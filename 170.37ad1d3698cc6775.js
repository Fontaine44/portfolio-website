(self.webpackChunkfontaine_portfolio=self.webpackChunkfontaine_portfolio||[]).push([[170],{170:(Du,v,$)=>{"use strict";$.r(v),$.d(v,{NhlDataModule:()=>ca});var Q=$(895),m=$(773);function g(ot,tt,Ge,Bt,Ur,kn,ft){try{var zt=ot[kn](ft),sr=zt.value}catch(Yt){return void Ge(Yt)}zt.done?tt(sr):Promise.resolve(sr).then(Bt,Ur)}function k(ot){return function(){var tt=this,Ge=arguments;return new Promise(function(Bt,Ur){var kn=ot.apply(tt,Ge);function ft(sr){g(kn,Bt,Ur,ft,zt,"next",sr)}function zt(sr){g(kn,Bt,Ur,ft,zt,"throw",sr)}ft(void 0)})}}var x=$(751),e=$(742),n=$(421),i=$(669),l=$(403),r=$(268),d=$(810);function f(...ot){const tt=(0,i.jO)(ot),{args:Ge,keys:Bt}=(0,e.D)(ot),Ur=new x.y(kn=>{const{length:ft}=Ge;if(!ft)return void kn.complete();const zt=new Array(ft);let sr=ft,Yt=ft;for(let hr=0;hr<ft;hr++){let Ir=!1;(0,n.Xf)(Ge[hr]).subscribe((0,l.x)(kn,Gr=>{Ir||(Ir=!0,Yt--),zt[hr]=Gr},()=>sr--,void 0,()=>{(!sr||!Ir)&&(Yt||kn.next(Bt?(0,d.n)(Bt,zt):zt),kn.complete())}))}});return tt?Ur.pipe((0,r.Z)(tt)):Ur}var t=$(256),h=$(529);class s{constructor(tt){this.http=tt}httpGet(tt){return this.http.get(tt)}httpGetWithParameters(tt,Ge){let Bt=new h.LE({fromObject:Ge});return this.http.get(tt,{params:Bt})}}s.\u0275fac=function(tt){return new(tt||s)(t.LFG(h.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"});var o=$(76),p=$(4);let c=(()=>{class ot{constructor(Ge,Bt){this._renderer=Ge,this._elementRef=Bt,this.onChange=Ur=>{},this.onTouched=()=>{}}setProperty(Ge,Bt){this._renderer.setProperty(this._elementRef.nativeElement,Ge,Bt)}registerOnTouched(Ge){this.onTouched=Ge}registerOnChange(Ge){this.onChange=Ge}setDisabledState(Ge){this.setProperty("disabled",Ge)}}return ot.\u0275fac=function(Ge){return new(Ge||ot)(t.Y36(t.Qsj),t.Y36(t.SBq))},ot.\u0275dir=t.lG2({type:ot}),ot})(),a=(()=>{class ot extends c{}return ot.\u0275fac=function(){let tt;return function(Bt){return(tt||(tt=t.n5z(ot)))(Bt||ot)}}(),ot.\u0275dir=t.lG2({type:ot,features:[t.qOj]}),ot})();const y=new t.OlP("NgValueAccessor"),u={provide:y,useExisting:(0,t.Gpc)(()=>_),multi:!0};let _=(()=>{class ot extends a{writeValue(Ge){this.setProperty("checked",Ge)}}return ot.\u0275fac=function(){let tt;return function(Bt){return(tt||(tt=t.n5z(ot)))(Bt||ot)}}(),ot.\u0275dir=t.lG2({type:ot,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(Ge,Bt){1&Ge&&t.NdJ("change",function(kn){return Bt.onChange(kn.target.checked)})("blur",function(){return Bt.onTouched()})},features:[t._Bn([u]),t.qOj]}),ot})();const b={provide:y,useExisting:(0,t.Gpc)(()=>C),multi:!0},T=new t.OlP("CompositionEventMode");let C=(()=>{class ot extends c{constructor(Ge,Bt,Ur){super(Ge,Bt),this._compositionMode=Ur,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function w(){const ot=(0,Q.q)()?(0,Q.q)().getUserAgent():"";return/android (\d+)/.test(ot.toLowerCase())}())}writeValue(Ge){this.setProperty("value",Ge??"")}_handleInput(Ge){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(Ge)}_compositionStart(){this._composing=!0}_compositionEnd(Ge){this._composing=!1,this._compositionMode&&this.onChange(Ge)}}return ot.\u0275fac=function(Ge){return new(Ge||ot)(t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(T,8))},ot.\u0275dir=t.lG2({type:ot,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Ge,Bt){1&Ge&&t.NdJ("input",function(kn){return Bt._handleInput(kn.target.value)})("blur",function(){return Bt.onTouched()})("compositionstart",function(){return Bt._compositionStart()})("compositionend",function(kn){return Bt._compositionEnd(kn.target.value)})},features:[t._Bn([b]),t.qOj]}),ot})();const S=new t.OlP("NgValidators"),E=new t.OlP("NgAsyncValidators");function V(ot){return null!=ot}function ee(ot){return(0,t.QGY)(ot)?(0,o.D)(ot):ot}function N(ot){let tt={};return ot.forEach(Ge=>{tt=null!=Ge?{...tt,...Ge}:tt}),0===Object.keys(tt).length?null:tt}function K(ot,tt){return tt.map(Ge=>Ge(ot))}function te(ot){return ot.map(tt=>function J(ot){return!ot.validate}(tt)?tt:Ge=>tt.validate(Ge))}function le(ot){return null!=ot?function ae(ot){if(!ot)return null;const tt=ot.filter(V);return 0==tt.length?null:function(Ge){return N(K(Ge,tt))}}(te(ot)):null}function ve(ot){return null!=ot?function se(ot){if(!ot)return null;const tt=ot.filter(V);return 0==tt.length?null:function(Ge){return f(K(Ge,tt).map(ee)).pipe((0,p.U)(N))}}(te(ot)):null}function ue(ot,tt){return null===ot?[tt]:Array.isArray(ot)?[...ot,tt]:[ot,tt]}function ye(ot){return ot._rawValidators}function Me(ot){return ot._rawAsyncValidators}function pe(ot){return ot?Array.isArray(ot)?ot:[ot]:[]}function ge(ot,tt){return Array.isArray(ot)?ot.includes(tt):ot===tt}function we(ot,tt){const Ge=pe(tt);return pe(ot).forEach(Ur=>{ge(Ge,Ur)||Ge.push(Ur)}),Ge}function oe(ot,tt){return pe(tt).filter(Ge=>!ge(ot,Ge))}class de{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(tt){this._rawValidators=tt||[],this._composedValidatorFn=le(this._rawValidators)}_setAsyncValidators(tt){this._rawAsyncValidators=tt||[],this._composedAsyncValidatorFn=ve(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(tt){this._onDestroyCallbacks.push(tt)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(tt=>tt()),this._onDestroyCallbacks=[]}reset(tt){this.control&&this.control.reset(tt)}hasError(tt,Ge){return!!this.control&&this.control.hasError(tt,Ge)}getError(tt,Ge){return this.control?this.control.getError(tt,Ge):null}}class Te extends de{get formDirective(){return null}get path(){return null}}class Ee extends de{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ae{constructor(tt){this._cd=tt}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Oe=(()=>{class ot extends Ae{constructor(Ge){super(Ge)}}return ot.\u0275fac=function(Ge){return new(Ge||ot)(t.Y36(Ee,2))},ot.\u0275dir=t.lG2({type:ot,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Ge,Bt){2&Ge&&t.ekj("ng-untouched",Bt.isUntouched)("ng-touched",Bt.isTouched)("ng-pristine",Bt.isPristine)("ng-dirty",Bt.isDirty)("ng-valid",Bt.isValid)("ng-invalid",Bt.isInvalid)("ng-pending",Bt.isPending)},features:[t.qOj]}),ot})(),Xe=(()=>{class ot extends Ae{constructor(Ge){super(Ge)}}return ot.\u0275fac=function(Ge){return new(Ge||ot)(t.Y36(Te,10))},ot.\u0275dir=t.lG2({type:ot,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(Ge,Bt){2&Ge&&t.ekj("ng-untouched",Bt.isUntouched)("ng-touched",Bt.isTouched)("ng-pristine",Bt.isPristine)("ng-dirty",Bt.isDirty)("ng-valid",Bt.isValid)("ng-invalid",Bt.isInvalid)("ng-pending",Bt.isPending)("ng-submitted",Bt.isSubmitted)},features:[t.qOj]}),ot})();const Be="VALID",He="INVALID",he="PENDING",be="DISABLED";function ze(ot){return(lt(ot)?ot.validators:ot)||null}function Je(ot,tt){return(lt(tt)?tt.asyncValidators:ot)||null}function lt(ot){return null!=ot&&!Array.isArray(ot)&&"object"==typeof ot}function st(ot,tt,Ge){const Bt=ot.controls;if(!(tt?Object.keys(Bt):Bt).length)throw new t.vHH(1e3,"");if(!Bt[Ge])throw new t.vHH(1001,"")}function Mt(ot,tt,Ge){ot._forEachChild((Bt,Ur)=>{if(void 0===Ge[Ur])throw new t.vHH(1002,"")})}class Dt{constructor(tt,Ge){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(tt),this._assignAsyncValidators(Ge)}get validator(){return this._composedValidatorFn}set validator(tt){this._rawValidators=this._composedValidatorFn=tt}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(tt){this._rawAsyncValidators=this._composedAsyncValidatorFn=tt}get parent(){return this._parent}get valid(){return this.status===Be}get invalid(){return this.status===He}get pending(){return this.status==he}get disabled(){return this.status===be}get enabled(){return this.status!==be}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(tt){this._assignValidators(tt)}setAsyncValidators(tt){this._assignAsyncValidators(tt)}addValidators(tt){this.setValidators(we(tt,this._rawValidators))}addAsyncValidators(tt){this.setAsyncValidators(we(tt,this._rawAsyncValidators))}removeValidators(tt){this.setValidators(oe(tt,this._rawValidators))}removeAsyncValidators(tt){this.setAsyncValidators(oe(tt,this._rawAsyncValidators))}hasValidator(tt){return ge(this._rawValidators,tt)}hasAsyncValidator(tt){return ge(this._rawAsyncValidators,tt)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(tt={}){this.touched=!0,this._parent&&!tt.onlySelf&&this._parent.markAsTouched(tt)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(tt=>tt.markAllAsTouched())}markAsUntouched(tt={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(Ge=>{Ge.markAsUntouched({onlySelf:!0})}),this._parent&&!tt.onlySelf&&this._parent._updateTouched(tt)}markAsDirty(tt={}){this.pristine=!1,this._parent&&!tt.onlySelf&&this._parent.markAsDirty(tt)}markAsPristine(tt={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(Ge=>{Ge.markAsPristine({onlySelf:!0})}),this._parent&&!tt.onlySelf&&this._parent._updatePristine(tt)}markAsPending(tt={}){this.status=he,!1!==tt.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!tt.onlySelf&&this._parent.markAsPending(tt)}disable(tt={}){const Ge=this._parentMarkedDirty(tt.onlySelf);this.status=be,this.errors=null,this._forEachChild(Bt=>{Bt.disable({...tt,onlySelf:!0})}),this._updateValue(),!1!==tt.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...tt,skipPristineCheck:Ge}),this._onDisabledChange.forEach(Bt=>Bt(!0))}enable(tt={}){const Ge=this._parentMarkedDirty(tt.onlySelf);this.status=Be,this._forEachChild(Bt=>{Bt.enable({...tt,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:tt.emitEvent}),this._updateAncestors({...tt,skipPristineCheck:Ge}),this._onDisabledChange.forEach(Bt=>Bt(!1))}_updateAncestors(tt){this._parent&&!tt.onlySelf&&(this._parent.updateValueAndValidity(tt),tt.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(tt){this._parent=tt}getRawValue(){return this.value}updateValueAndValidity(tt={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Be||this.status===he)&&this._runAsyncValidator(tt.emitEvent)),!1!==tt.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!tt.onlySelf&&this._parent.updateValueAndValidity(tt)}_updateTreeValidity(tt={emitEvent:!0}){this._forEachChild(Ge=>Ge._updateTreeValidity(tt)),this.updateValueAndValidity({onlySelf:!0,emitEvent:tt.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?be:Be}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(tt){if(this.asyncValidator){this.status=he,this._hasOwnPendingAsyncValidator=!0;const Ge=ee(this.asyncValidator(this));this._asyncValidationSubscription=Ge.subscribe(Bt=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Bt,{emitEvent:tt})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(tt,Ge={}){this.errors=tt,this._updateControlsErrors(!1!==Ge.emitEvent)}get(tt){let Ge=tt;return null==Ge||(Array.isArray(Ge)||(Ge=Ge.split(".")),0===Ge.length)?null:Ge.reduce((Bt,Ur)=>Bt&&Bt._find(Ur),this)}getError(tt,Ge){const Bt=Ge?this.get(Ge):this;return Bt&&Bt.errors?Bt.errors[tt]:null}hasError(tt,Ge){return!!this.getError(tt,Ge)}get root(){let tt=this;for(;tt._parent;)tt=tt._parent;return tt}_updateControlsErrors(tt){this.status=this._calculateStatus(),tt&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(tt)}_initObservables(){this.valueChanges=new t.vpe,this.statusChanges=new t.vpe}_calculateStatus(){return this._allControlsDisabled()?be:this.errors?He:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(he)?he:this._anyControlsHaveStatus(He)?He:Be}_anyControlsHaveStatus(tt){return this._anyControls(Ge=>Ge.status===tt)}_anyControlsDirty(){return this._anyControls(tt=>tt.dirty)}_anyControlsTouched(){return this._anyControls(tt=>tt.touched)}_updatePristine(tt={}){this.pristine=!this._anyControlsDirty(),this._parent&&!tt.onlySelf&&this._parent._updatePristine(tt)}_updateTouched(tt={}){this.touched=this._anyControlsTouched(),this._parent&&!tt.onlySelf&&this._parent._updateTouched(tt)}_registerOnCollectionChange(tt){this._onCollectionChange=tt}_setUpdateStrategy(tt){lt(tt)&&null!=tt.updateOn&&(this._updateOn=tt.updateOn)}_parentMarkedDirty(tt){return!tt&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(tt){return null}_assignValidators(tt){this._rawValidators=Array.isArray(tt)?tt.slice():tt,this._composedValidatorFn=function Ve(ot){return Array.isArray(ot)?le(ot):ot||null}(this._rawValidators)}_assignAsyncValidators(tt){this._rawAsyncValidators=Array.isArray(tt)?tt.slice():tt,this._composedAsyncValidatorFn=function Ye(ot){return Array.isArray(ot)?ve(ot):ot||null}(this._rawAsyncValidators)}}class ht extends Dt{constructor(tt,Ge,Bt){super(ze(Ge),Je(Bt,Ge)),this.controls=tt,this._initObservables(),this._setUpdateStrategy(Ge),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(tt,Ge){return this.controls[tt]?this.controls[tt]:(this.controls[tt]=Ge,Ge.setParent(this),Ge._registerOnCollectionChange(this._onCollectionChange),Ge)}addControl(tt,Ge,Bt={}){this.registerControl(tt,Ge),this.updateValueAndValidity({emitEvent:Bt.emitEvent}),this._onCollectionChange()}removeControl(tt,Ge={}){this.controls[tt]&&this.controls[tt]._registerOnCollectionChange(()=>{}),delete this.controls[tt],this.updateValueAndValidity({emitEvent:Ge.emitEvent}),this._onCollectionChange()}setControl(tt,Ge,Bt={}){this.controls[tt]&&this.controls[tt]._registerOnCollectionChange(()=>{}),delete this.controls[tt],Ge&&this.registerControl(tt,Ge),this.updateValueAndValidity({emitEvent:Bt.emitEvent}),this._onCollectionChange()}contains(tt){return this.controls.hasOwnProperty(tt)&&this.controls[tt].enabled}setValue(tt,Ge={}){Mt(this,0,tt),Object.keys(tt).forEach(Bt=>{st(this,!0,Bt),this.controls[Bt].setValue(tt[Bt],{onlySelf:!0,emitEvent:Ge.emitEvent})}),this.updateValueAndValidity(Ge)}patchValue(tt,Ge={}){null!=tt&&(Object.keys(tt).forEach(Bt=>{const Ur=this.controls[Bt];Ur&&Ur.patchValue(tt[Bt],{onlySelf:!0,emitEvent:Ge.emitEvent})}),this.updateValueAndValidity(Ge))}reset(tt={},Ge={}){this._forEachChild((Bt,Ur)=>{Bt.reset(tt[Ur],{onlySelf:!0,emitEvent:Ge.emitEvent})}),this._updatePristine(Ge),this._updateTouched(Ge),this.updateValueAndValidity(Ge)}getRawValue(){return this._reduceChildren({},(tt,Ge,Bt)=>(tt[Bt]=Ge.getRawValue(),tt))}_syncPendingControls(){let tt=this._reduceChildren(!1,(Ge,Bt)=>!!Bt._syncPendingControls()||Ge);return tt&&this.updateValueAndValidity({onlySelf:!0}),tt}_forEachChild(tt){Object.keys(this.controls).forEach(Ge=>{const Bt=this.controls[Ge];Bt&&tt(Bt,Ge)})}_setUpControls(){this._forEachChild(tt=>{tt.setParent(this),tt._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(tt){for(const[Ge,Bt]of Object.entries(this.controls))if(this.contains(Ge)&&tt(Bt))return!0;return!1}_reduceValue(){return this._reduceChildren({},(Ge,Bt,Ur)=>((Bt.enabled||this.disabled)&&(Ge[Ur]=Bt.value),Ge))}_reduceChildren(tt,Ge){let Bt=tt;return this._forEachChild((Ur,kn)=>{Bt=Ge(Bt,Ur,kn)}),Bt}_allControlsDisabled(){for(const tt of Object.keys(this.controls))if(this.controls[tt].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(tt){return this.controls.hasOwnProperty(tt)?this.controls[tt]:null}}class At extends ht{}const Se=new t.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Ze}),Ze="always";function dt(ot,tt,Ge=Ze){qt(ot,tt),tt.valueAccessor.writeValue(ot.value),(ot.disabled||"always"===Ge)&&tt.valueAccessor.setDisabledState?.(ot.disabled),function Sr(ot,tt){tt.valueAccessor.registerOnChange(Ge=>{ot._pendingValue=Ge,ot._pendingChange=!0,ot._pendingDirty=!0,"change"===ot.updateOn&&tr(ot,tt)})}(ot,tt),function rr(ot,tt){const Ge=(Bt,Ur)=>{tt.valueAccessor.writeValue(Bt),Ur&&tt.viewToModelUpdate(Bt)};ot.registerOnChange(Ge),tt._registerOnDestroy(()=>{ot._unregisterOnChange(Ge)})}(ot,tt),function mr(ot,tt){tt.valueAccessor.registerOnTouched(()=>{ot._pendingTouched=!0,"blur"===ot.updateOn&&ot._pendingChange&&tr(ot,tt),"submit"!==ot.updateOn&&ot.markAsTouched()})}(ot,tt),function Jt(ot,tt){if(tt.valueAccessor.setDisabledState){const Ge=Bt=>{tt.valueAccessor.setDisabledState(Bt)};ot.registerOnDisabledChange(Ge),tt._registerOnDestroy(()=>{ot._unregisterOnDisabledChange(Ge)})}}(ot,tt)}function Ct(ot,tt,Ge=!0){const Bt=()=>{};tt.valueAccessor&&(tt.valueAccessor.registerOnChange(Bt),tt.valueAccessor.registerOnTouched(Bt)),pr(ot,tt),ot&&(tt._invokeOnDestroyCallbacks(),ot._registerOnCollectionChange(()=>{}))}function Ut(ot,tt){ot.forEach(Ge=>{Ge.registerOnValidatorChange&&Ge.registerOnValidatorChange(tt)})}function qt(ot,tt){const Ge=ye(ot);null!==tt.validator?ot.setValidators(ue(Ge,tt.validator)):"function"==typeof Ge&&ot.setValidators([Ge]);const Bt=Me(ot);null!==tt.asyncValidator?ot.setAsyncValidators(ue(Bt,tt.asyncValidator)):"function"==typeof Bt&&ot.setAsyncValidators([Bt]);const Ur=()=>ot.updateValueAndValidity();Ut(tt._rawValidators,Ur),Ut(tt._rawAsyncValidators,Ur)}function pr(ot,tt){let Ge=!1;if(null!==ot){if(null!==tt.validator){const Ur=ye(ot);if(Array.isArray(Ur)&&Ur.length>0){const kn=Ur.filter(ft=>ft!==tt.validator);kn.length!==Ur.length&&(Ge=!0,ot.setValidators(kn))}}if(null!==tt.asyncValidator){const Ur=Me(ot);if(Array.isArray(Ur)&&Ur.length>0){const kn=Ur.filter(ft=>ft!==tt.asyncValidator);kn.length!==Ur.length&&(Ge=!0,ot.setAsyncValidators(kn))}}}const Bt=()=>{};return Ut(tt._rawValidators,Bt),Ut(tt._rawAsyncValidators,Bt),Ge}function tr(ot,tt){ot._pendingDirty&&ot.markAsDirty(),ot.setValue(ot._pendingValue,{emitModelToViewChange:!1}),tt.viewToModelUpdate(ot._pendingValue),ot._pendingChange=!1}function xn(ot,tt){const Ge=ot.indexOf(tt);Ge>-1&&ot.splice(Ge,1)}function nn(ot){return"object"==typeof ot&&null!==ot&&2===Object.keys(ot).length&&"value"in ot&&"disabled"in ot}const fn=class extends Dt{constructor(tt=null,Ge,Bt){super(ze(Ge),Je(Bt,Ge)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(tt),this._setUpdateStrategy(Ge),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lt(Ge)&&(Ge.nonNullable||Ge.initialValueIsDefault)&&(this.defaultValue=nn(tt)?tt.value:tt)}setValue(tt,Ge={}){this.value=this._pendingValue=tt,this._onChange.length&&!1!==Ge.emitModelToViewChange&&this._onChange.forEach(Bt=>Bt(this.value,!1!==Ge.emitViewToModelChange)),this.updateValueAndValidity(Ge)}patchValue(tt,Ge={}){this.setValue(tt,Ge)}reset(tt=this.defaultValue,Ge={}){this._applyFormState(tt),this.markAsPristine(Ge),this.markAsUntouched(Ge),this.setValue(this.value,Ge),this._pendingChange=!1}_updateValue(){}_anyControls(tt){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(tt){this._onChange.push(tt)}_unregisterOnChange(tt){xn(this._onChange,tt)}registerOnDisabledChange(tt){this._onDisabledChange.push(tt)}_unregisterOnDisabledChange(tt){xn(this._onDisabledChange,tt)}_forEachChild(tt){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(tt){nn(tt)?(this.value=this._pendingValue=tt.value,tt.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=tt}};let Er=(()=>{class ot{}return ot.\u0275fac=function(Ge){return new(Ge||ot)},ot.\u0275dir=t.lG2({type:ot,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),ot})();const Mr={provide:y,useExisting:(0,t.Gpc)(()=>rn),multi:!0};let Wr=(()=>{class ot{}return ot.\u0275fac=function(Ge){return new(Ge||ot)},ot.\u0275mod=t.oAB({type:ot}),ot.\u0275inj=t.cJS({}),ot})(),Zr=(()=>{class ot{constructor(){this._accessors=[]}add(Ge,Bt){this._accessors.push([Ge,Bt])}remove(Ge){for(let Bt=this._accessors.length-1;Bt>=0;--Bt)if(this._accessors[Bt][1]===Ge)return void this._accessors.splice(Bt,1)}select(Ge){this._accessors.forEach(Bt=>{this._isSameGroup(Bt,Ge)&&Bt[1]!==Ge&&Bt[1].fireUncheck(Ge.value)})}_isSameGroup(Ge,Bt){return!!Ge[0].control&&Ge[0]._parent===Bt._control._parent&&Ge[1].name===Bt.name}}return ot.\u0275fac=function(Ge){return new(Ge||ot)},ot.\u0275prov=t.Yz7({token:ot,factory:ot.\u0275fac,providedIn:Wr}),ot})(),rn=(()=>{class ot extends a{constructor(Ge,Bt,Ur,kn){super(Ge,Bt),this._registry=Ur,this._injector=kn,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Ee),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(Ge){this._state=Ge===this.value,this.setProperty("checked",this._state)}registerOnChange(Ge){this._fn=Ge,this.onChange=()=>{Ge(this.value),this._registry.select(this)}}fireUncheck(Ge){this.writeValue(Ge)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return ot.\u0275fac=function(Ge){return new(Ge||ot)(t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(Zr),t.Y36(t.zs3))},ot.\u0275dir=t.lG2({type:ot,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(Ge,Bt){1&Ge&&t.NdJ("change",function(){return Bt.onChange()})("blur",function(){return Bt.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[t._Bn([Mr]),t.qOj]}),ot})();const Tn=new t.OlP("NgModelWithFormControlWarning"),Bn={provide:Te,useExisting:(0,t.Gpc)(()=>Kn)};let Kn=(()=>{class ot extends Te{constructor(Ge,Bt,Ur){super(),this.callSetDisabledState=Ur,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new t.vpe,this._setValidators(Ge),this._setAsyncValidators(Bt)}ngOnChanges(Ge){this._checkFormPresent(),Ge.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(pr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(Ge){const Bt=this.form.get(Ge.path);return dt(Bt,Ge,this.callSetDisabledState),Bt.updateValueAndValidity({emitEvent:!1}),this.directives.push(Ge),Bt}getControl(Ge){return this.form.get(Ge.path)}removeControl(Ge){Ct(Ge.control||null,Ge,!1),function wn(ot,tt){const Ge=ot.indexOf(tt);Ge>-1&&ot.splice(Ge,1)}(this.directives,Ge)}addFormGroup(Ge){this._setUpFormContainer(Ge)}removeFormGroup(Ge){this._cleanUpFormContainer(Ge)}getFormGroup(Ge){return this.form.get(Ge.path)}addFormArray(Ge){this._setUpFormContainer(Ge)}removeFormArray(Ge){this._cleanUpFormContainer(Ge)}getFormArray(Ge){return this.form.get(Ge.path)}updateModel(Ge,Bt){this.form.get(Ge.path).setValue(Bt)}onSubmit(Ge){return this.submitted=!0,function Nn(ot,tt){ot._syncPendingControls(),tt.forEach(Ge=>{const Bt=Ge.control;"submit"===Bt.updateOn&&Bt._pendingChange&&(Ge.viewToModelUpdate(Bt._pendingValue),Bt._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(Ge),"dialog"===Ge?.target?.method}onReset(){this.resetForm()}resetForm(Ge){this.form.reset(Ge),this.submitted=!1}_updateDomValue(){this.directives.forEach(Ge=>{const Bt=Ge.control,Ur=this.form.get(Ge.path);Bt!==Ur&&(Ct(Bt||null,Ge),(ot=>ot instanceof fn)(Ur)&&(dt(Ur,Ge,this.callSetDisabledState),Ge.control=Ur))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(Ge){const Bt=this.form.get(Ge.path);(function ar(ot,tt){qt(ot,tt)})(Bt,Ge),Bt.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(Ge){if(this.form){const Bt=this.form.get(Ge.path);Bt&&function dr(ot,tt){return pr(ot,tt)}(Bt,Ge)&&Bt.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){qt(this.form,this),this._oldForm&&pr(this._oldForm,this)}_checkFormPresent(){}}return ot.\u0275fac=function(Ge){return new(Ge||ot)(t.Y36(S,10),t.Y36(E,10),t.Y36(Se,8))},ot.\u0275dir=t.lG2({type:ot,selectors:[["","formGroup",""]],hostBindings:function(Ge,Bt){1&Ge&&t.NdJ("submit",function(kn){return Bt.onSubmit(kn)})("reset",function(){return Bt.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[t._Bn([Bn]),t.qOj,t.TTD]}),ot})();const Bi={provide:Ee,useExisting:(0,t.Gpc)(()=>ma)};let ma=(()=>{class ot extends Ee{constructor(Ge,Bt,Ur,kn,ft){super(),this._ngModelWarningConfig=ft,this._added=!1,this.update=new t.vpe,this._ngModelWarningSent=!1,this._parent=Ge,this._setValidators(Bt),this._setAsyncValidators(Ur),this.valueAccessor=function on(ot,tt){if(!tt)return null;let Ge,Bt,Ur;return Array.isArray(tt),tt.forEach(kn=>{kn.constructor===C?Ge=kn:function an(ot){return Object.getPrototypeOf(ot.constructor)===a}(kn)?Bt=kn:Ur=kn}),Ur||Bt||Ge||null}(0,kn)}set isDisabled(Ge){}ngOnChanges(Ge){this._added||this._setUpControl(),function cn(ot,tt){if(!ot.hasOwnProperty("model"))return!1;const Ge=ot.model;return!!Ge.isFirstChange()||!Object.is(tt,Ge.currentValue)}(Ge,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(Ge){this.viewModel=Ge,this.update.emit(Ge)}get path(){return function it(ot,tt){return[...tt.path,ot]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return ot._ngModelWarningSentOnce=!1,ot.\u0275fac=function(Ge){return new(Ge||ot)(t.Y36(Te,13),t.Y36(S,10),t.Y36(E,10),t.Y36(y,10),t.Y36(Tn,8))},ot.\u0275dir=t.lG2({type:ot,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[t._Bn([Bi]),t.qOj,t.TTD]}),ot})();const Sa={provide:y,useExisting:(0,t.Gpc)(()=>qi),multi:!0};function Xa(ot,tt){return null==ot?`${tt}`:(tt&&"object"==typeof tt&&(tt="Object"),`${ot}: ${tt}`.slice(0,50))}let qi=(()=>{class ot extends a{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(Ge){this._compareWith=Ge}writeValue(Ge){this.value=Ge;const Ur=Xa(this._getOptionId(Ge),Ge);this.setProperty("value",Ur)}registerOnChange(Ge){this.onChange=Bt=>{this.value=this._getOptionValue(Bt),Ge(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(Ge){for(const Bt of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Bt),Ge))return Bt;return null}_getOptionValue(Ge){const Bt=function Ji(ot){return ot.split(":")[0]}(Ge);return this._optionMap.has(Bt)?this._optionMap.get(Bt):Ge}}return ot.\u0275fac=function(){let tt;return function(Bt){return(tt||(tt=t.n5z(ot)))(Bt||ot)}}(),ot.\u0275dir=t.lG2({type:ot,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(Ge,Bt){1&Ge&&t.NdJ("change",function(kn){return Bt.onChange(kn.target.value)})("blur",function(){return Bt.onTouched()})},inputs:{compareWith:"compareWith"},features:[t._Bn([Sa]),t.qOj]}),ot})(),Ha=(()=>{class ot{constructor(Ge,Bt,Ur){this._element=Ge,this._renderer=Bt,this._select=Ur,this._select&&(this.id=this._select._registerOption())}set ngValue(Ge){null!=this._select&&(this._select._optionMap.set(this.id,Ge),this._setElementValue(Xa(this.id,Ge)),this._select.writeValue(this._select.value))}set value(Ge){this._setElementValue(Ge),this._select&&this._select.writeValue(this._select.value)}_setElementValue(Ge){this._renderer.setProperty(this._element.nativeElement,"value",Ge)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return ot.\u0275fac=function(Ge){return new(Ge||ot)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(qi,9))},ot.\u0275dir=t.lG2({type:ot,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),ot})();const Ni={provide:y,useExisting:(0,t.Gpc)(()=>Na),multi:!0};function Ja(ot,tt){return null==ot?`${tt}`:("string"==typeof tt&&(tt=`'${tt}'`),tt&&"object"==typeof tt&&(tt="Object"),`${ot}: ${tt}`.slice(0,50))}let Na=(()=>{class ot extends a{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(Ge){this._compareWith=Ge}writeValue(Ge){let Bt;if(this.value=Ge,Array.isArray(Ge)){const Ur=Ge.map(kn=>this._getOptionId(kn));Bt=(kn,ft)=>{kn._setSelected(Ur.indexOf(ft.toString())>-1)}}else Bt=(Ur,kn)=>{Ur._setSelected(!1)};this._optionMap.forEach(Bt)}registerOnChange(Ge){this.onChange=Bt=>{const Ur=[],kn=Bt.selectedOptions;if(void 0!==kn){const ft=kn;for(let zt=0;zt<ft.length;zt++){const Yt=this._getOptionValue(ft[zt].value);Ur.push(Yt)}}else{const ft=Bt.options;for(let zt=0;zt<ft.length;zt++){const sr=ft[zt];if(sr.selected){const Yt=this._getOptionValue(sr.value);Ur.push(Yt)}}}this.value=Ur,Ge(Ur)}}_registerOption(Ge){const Bt=(this._idCounter++).toString();return this._optionMap.set(Bt,Ge),Bt}_getOptionId(Ge){for(const Bt of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(Bt)._value,Ge))return Bt;return null}_getOptionValue(Ge){const Bt=function ro(ot){return ot.split(":")[0]}(Ge);return this._optionMap.has(Bt)?this._optionMap.get(Bt)._value:Ge}}return ot.\u0275fac=function(){let tt;return function(Bt){return(tt||(tt=t.n5z(ot)))(Bt||ot)}}(),ot.\u0275dir=t.lG2({type:ot,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(Ge,Bt){1&Ge&&t.NdJ("change",function(kn){return Bt.onChange(kn.target)})("blur",function(){return Bt.onTouched()})},inputs:{compareWith:"compareWith"},features:[t._Bn([Ni]),t.qOj]}),ot})(),eo=(()=>{class ot{constructor(Ge,Bt,Ur){this._element=Ge,this._renderer=Bt,this._select=Ur,this._select&&(this.id=this._select._registerOption(this))}set ngValue(Ge){null!=this._select&&(this._value=Ge,this._setElementValue(Ja(this.id,Ge)),this._select.writeValue(this._select.value))}set value(Ge){this._select?(this._value=Ge,this._setElementValue(Ja(this.id,Ge)),this._select.writeValue(this._select.value)):this._setElementValue(Ge)}_setElementValue(Ge){this._renderer.setProperty(this._element.nativeElement,"value",Ge)}_setSelected(Ge){this._renderer.setProperty(this._element.nativeElement,"selected",Ge)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return ot.\u0275fac=function(Ge){return new(Ge||ot)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(Na,9))},ot.\u0275dir=t.lG2({type:ot,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),ot})(),So=(()=>{class ot{}return ot.\u0275fac=function(Ge){return new(Ge||ot)},ot.\u0275mod=t.oAB({type:ot}),ot.\u0275inj=t.cJS({imports:[Wr]}),ot})(),Qo=(()=>{class ot{static withConfig(Ge){return{ngModule:ot,providers:[{provide:Se,useValue:Ge.callSetDisabledState??Ze}]}}}return ot.\u0275fac=function(Ge){return new(Ge||ot)},ot.\u0275mod=t.oAB({type:ot}),ot.\u0275inj=t.cJS({imports:[So]}),ot})(),mo=(()=>{class ot{static withConfig(Ge){return{ngModule:ot,providers:[{provide:Tn,useValue:Ge.warnOnNgModelWithFormControl??"always"},{provide:Se,useValue:Ge.callSetDisabledState??Ze}]}}}return ot.\u0275fac=function(Ge){return new(Ge||ot)},ot.\u0275mod=t.oAB({type:ot}),ot.\u0275inj=t.cJS({imports:[So]}),ot})();class Zi extends Dt{constructor(tt,Ge,Bt){super(ze(Ge),Je(Bt,Ge)),this.controls=tt,this._initObservables(),this._setUpdateStrategy(Ge),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(tt){return this.controls[this._adjustIndex(tt)]}push(tt,Ge={}){this.controls.push(tt),this._registerControl(tt),this.updateValueAndValidity({emitEvent:Ge.emitEvent}),this._onCollectionChange()}insert(tt,Ge,Bt={}){this.controls.splice(tt,0,Ge),this._registerControl(Ge),this.updateValueAndValidity({emitEvent:Bt.emitEvent})}removeAt(tt,Ge={}){let Bt=this._adjustIndex(tt);Bt<0&&(Bt=0),this.controls[Bt]&&this.controls[Bt]._registerOnCollectionChange(()=>{}),this.controls.splice(Bt,1),this.updateValueAndValidity({emitEvent:Ge.emitEvent})}setControl(tt,Ge,Bt={}){let Ur=this._adjustIndex(tt);Ur<0&&(Ur=0),this.controls[Ur]&&this.controls[Ur]._registerOnCollectionChange(()=>{}),this.controls.splice(Ur,1),Ge&&(this.controls.splice(Ur,0,Ge),this._registerControl(Ge)),this.updateValueAndValidity({emitEvent:Bt.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(tt,Ge={}){Mt(this,0,tt),tt.forEach((Bt,Ur)=>{st(this,!1,Ur),this.at(Ur).setValue(Bt,{onlySelf:!0,emitEvent:Ge.emitEvent})}),this.updateValueAndValidity(Ge)}patchValue(tt,Ge={}){null!=tt&&(tt.forEach((Bt,Ur)=>{this.at(Ur)&&this.at(Ur).patchValue(Bt,{onlySelf:!0,emitEvent:Ge.emitEvent})}),this.updateValueAndValidity(Ge))}reset(tt=[],Ge={}){this._forEachChild((Bt,Ur)=>{Bt.reset(tt[Ur],{onlySelf:!0,emitEvent:Ge.emitEvent})}),this._updatePristine(Ge),this._updateTouched(Ge),this.updateValueAndValidity(Ge)}getRawValue(){return this.controls.map(tt=>tt.getRawValue())}clear(tt={}){this.controls.length<1||(this._forEachChild(Ge=>Ge._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:tt.emitEvent}))}_adjustIndex(tt){return tt<0?tt+this.length:tt}_syncPendingControls(){let tt=this.controls.reduce((Ge,Bt)=>!!Bt._syncPendingControls()||Ge,!1);return tt&&this.updateValueAndValidity({onlySelf:!0}),tt}_forEachChild(tt){this.controls.forEach((Ge,Bt)=>{tt(Ge,Bt)})}_updateValue(){this.value=this.controls.filter(tt=>tt.enabled||this.disabled).map(tt=>tt.value)}_anyControls(tt){return this.controls.some(Ge=>Ge.enabled&&tt(Ge))}_setUpControls(){this._forEachChild(tt=>this._registerControl(tt))}_allControlsDisabled(){for(const tt of this.controls)if(tt.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(tt){tt.setParent(this),tt._registerOnCollectionChange(this._onCollectionChange)}_find(tt){return this.at(tt)??null}}function rt(ot){return!!ot&&(void 0!==ot.asyncValidators||void 0!==ot.validators||void 0!==ot.updateOn)}let ut=(()=>{class ot{constructor(){this.useNonNullable=!1}get nonNullable(){const Ge=new ot;return Ge.useNonNullable=!0,Ge}group(Ge,Bt=null){const Ur=this._reduceControls(Ge);let kn={};return rt(Bt)?kn=Bt:null!==Bt&&(kn.validators=Bt.validator,kn.asyncValidators=Bt.asyncValidator),new ht(Ur,kn)}record(Ge,Bt=null){const Ur=this._reduceControls(Ge);return new At(Ur,Bt)}control(Ge,Bt,Ur){let kn={};return this.useNonNullable?(rt(Bt)?kn=Bt:(kn.validators=Bt,kn.asyncValidators=Ur),new fn(Ge,{...kn,nonNullable:!0})):new fn(Ge,Bt,Ur)}array(Ge,Bt,Ur){const kn=Ge.map(ft=>this._createControl(ft));return new Zi(kn,Bt,Ur)}_reduceControls(Ge){const Bt={};return Object.keys(Ge).forEach(Ur=>{Bt[Ur]=this._createControl(Ge[Ur])}),Bt}_createControl(Ge){return Ge instanceof fn||Ge instanceof Dt?Ge:Array.isArray(Ge)?this.control(Ge[0],Ge.length>1?Ge[1]:null,Ge.length>2?Ge[2]:null):this.control(Ge)}}return ot.\u0275fac=function(Ge){return new(Ge||ot)},ot.\u0275prov=t.Yz7({token:ot,factory:ot.\u0275fac,providedIn:mo}),ot})();var er=$(655);const nr=["plot"],Kt=["*"];class ir{static setModuleName(tt){ir.moduleName=tt}static getModuleName(){return ir.moduleName}static setPlotly(tt){if("object"==typeof tt&&"function"!=typeof tt.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");ir.plotly=tt}static insert(tt){return-1===ir.instances.indexOf(tt)&&ir.instances.push(tt),tt}static remove(tt){const Ge=ir.instances.indexOf(tt);Ge>=0&&(ir.instances.splice(Ge,1),ir.plotly.purge(tt))}getInstanceByDivId(tt){for(const Ge of ir.instances)if(Ge&&Ge.id===tt)return Ge}getPlotly(){return(0,er.mG)(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(typeof ir.plotly>"u")throw new Error("ViaCDN"===ir.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return ir.plotly}waitFor(tt){return new Promise(Ge=>{const Bt=()=>{tt()?Ge():setTimeout(Bt,10)};Bt()})}newPlot(tt,Ge,Bt,Ur,kn){return(0,er.mG)(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),kn){const ft={data:Ge,layout:Bt,config:Ur,frames:kn};return this._getPlotly().newPlot(tt,ft).then(()=>ir.insert(tt))}return this._getPlotly().newPlot(tt,Ge,Bt,Ur).then(()=>ir.insert(tt))})}plot(tt,Ge,Bt,Ur,kn){if(kn){const ft={data:Ge,layout:Bt,config:Ur,frames:kn};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(tt,ft):this._getPlotly().newPlot(tt,ft)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(tt,Ge,Bt,Ur):this._getPlotly().newPlot(tt,Ge,Bt,Ur)}update(tt,Ge,Bt,Ur,kn){if(kn){const ft={data:Ge,layout:Bt,config:Ur,frames:kn};return this._getPlotly().react(tt,ft)}return this._getPlotly().react(tt,Ge,Bt,Ur)}resize(tt){return this._getPlotly().Plots.resize(tt)}}ir.\u0275fac=function(tt){return new(tt||ir)},ir.instances=[],ir.plotly=void 0,ir.moduleName=void 0,ir.\u0275prov=t.Yz7({factory:function(){return new ir},token:ir,providedIn:"root"});let vr=(()=>{class ot{constructor(Ge,Bt,Ur){this.plotly=Ge,this.iterableDiffers=Bt,this.keyValueDiffers=Ur,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new t.vpe,this.update=new t.vpe,this.purge=new t.vpe,this.error=new t.vpe,this.afterExport=new t.vpe,this.afterPlot=new t.vpe,this.animated=new t.vpe,this.animatingFrame=new t.vpe,this.animationInterrupted=new t.vpe,this.autoSize=new t.vpe,this.beforeExport=new t.vpe,this.buttonClicked=new t.vpe,this.click=new t.vpe,this.plotlyClick=new t.vpe,this.clickAnnotation=new t.vpe,this.deselect=new t.vpe,this.doubleClick=new t.vpe,this.framework=new t.vpe,this.hover=new t.vpe,this.legendClick=new t.vpe,this.legendDoubleClick=new t.vpe,this.react=new t.vpe,this.relayout=new t.vpe,this.restyle=new t.vpe,this.redraw=new t.vpe,this.selected=new t.vpe,this.selecting=new t.vpe,this.sliderChange=new t.vpe,this.sliderEnd=new t.vpe,this.sliderStart=new t.vpe,this.transitioning=new t.vpe,this.transitionInterrupted=new t.vpe,this.unhover=new t.vpe,this.relayouting=new t.vpe,this.treemapclick=new t.vpe,this.sunburstclick=new t.vpe,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}ngOnInit(){this.createPlot().then(()=>{const Ge=this.createFigure();this.initialized.emit(Ge)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const Ge=this.createFigure();this.purge.emit(Ge),ir.remove(this.plotlyInstance)}ngOnChanges(Ge){let Bt=!1;const Ur=Ge.revision;Ur&&!Ur.isFirstChange()&&(Bt=!0);const kn=Ge.debug;kn&&!kn.isFirstChange()&&(Bt=!0),Bt&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let Ge=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(Ge=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(Ge=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),Ge&&this.plotlyInstance&&this.updatePlot()}getWindow(){return window}getClassName(){let Ge=[this.defaultClassName];return Array.isArray(this.className)?Ge=Ge.concat(this.className):this.className&&Ge.push(this.className),Ge.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(Ge=>{this.plotlyInstance=Ge,this.getWindow().gd=this.debug?Ge:void 0,this.eventNames.forEach(Bt=>{const Ur=`plotly_${Bt.toLowerCase()}`;Ge.on(Ur,kn=>this[Bt].emit(kn))}),Ge.on("plotly_click",Bt=>{this.click.emit(Bt),this.plotlyClick.emit(Bt)}),this.updateWindowResizeHandler()},Ge=>{console.error("Error while plotting:",Ge),this.error.emit(Ge)})}createFigure(){const Ge=this.plotlyInstance;return{data:Ge.data,layout:Ge.layout,frames:Ge._transitionData?Ge._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const Bt=new Error("Plotly component wasn't initialized");throw this.error.emit(Bt),Bt}const Ge=Object.assign({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,Ge,this.config,this.frames).then(()=>{const Bt=this.createFigure();this.update.emit(Bt)},Bt=>{console.error("Error while updating plot:",Bt),this.error.emit(Bt)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(Ge,Bt){const Ur=Object.assign({},Bt,{uid:""});return JSON.stringify(Ur)}}return ot.\u0275fac=function(Ge){return new(Ge||ot)(t.Y36(ir),t.Y36(t.ZZ4),t.Y36(t.aQg))},ot.\u0275cmp=t.Xpm({type:ot,selectors:[["plotly-plot"]],viewQuery:function(Ge,Bt){if(1&Ge&&t.Gf(nr,7),2&Ge){let Ur;t.iGM(Ur=t.CRH())&&(Bt.plotEl=Ur.first)}},inputs:{revision:"revision",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision",data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",className:"className"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",relayouting:"relayouting",treemapclick:"treemapclick",sunburstclick:"sunburstclick"},features:[t._Bn([ir]),t.TTD],ngContentSelectors:Kt,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(Ge,Bt){1&Ge&&(t.F$t(),t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA()),2&Ge&&(t.Q6J("ngClass",Bt.getClassName())("ngStyle",Bt.style),t.uIk("id",Bt.divId))},dependencies:[Q.mk,Q.PC],encapsulation:2}),ot})(),wr=(()=>{class ot{constructor(){}}return ot.\u0275fac=function(Ge){return new(Ge||ot)},ot.\u0275mod=t.oAB({type:ot}),ot.\u0275inj=t.cJS({providers:[ir],imports:[Q.ez]}),ot})(),Ar=(()=>{class ot{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");ir.setPlotly(ot.plotlyjs)}isValid(){return void 0!==ot.plotlyjs&&("function"==typeof ot.plotlyjs.plot||"function"==typeof ot.plotlyjs.newPlot)}}return ot.\u0275fac=function(Ge){return new(Ge||ot)},ot.\u0275mod=t.oAB({type:ot}),ot.\u0275inj=t.cJS({providers:[ir],imports:[Q.ez,wr,wr]}),ot.plotlyjs={},ot})();function gn(ot,tt){if(1&ot&&(t.TgZ(0,"div"),t._UZ(1,"plotly-plot",1),t.qZA()),2&ot){const Ge=t.oxw();t.xp6(1),t.ekj("loading-blur",Ge.loading)("disabled-plot",Ge.loading),t.Q6J("data",Ge.graph.data)("layout",Ge.graph.layout)("config",Ge.graph.config)}}class Rn{constructor(){this.x=[],this.y=[],this.plotReady=!1,this.pointsTrace={x:[],y:[],text:null,mode:"markers",name:"scatter",opacity:.6,hovertemplate:"%{text.shooterName} <br><i>%{text.shotType}</i><br>(%{text.xCordAdjusted},%{text.yCordAdjusted})",hoverlabel:{namelength:0},marker:{color:null,size:5,opacity:.9},type:"scatter"},this.kdeTrace={z:[],name:"kde",autocontour:!1,hoverinfo:"skip",showscale:!1,ncontours:30,contours:{coloring:"heatmap"},line:{width:0},opacity:.8,reversescale:!0,colorscale:"Hot",type:"contour"},this.graph={data:[this.pointsTrace,this.kdeTrace],layout:{width:this.width,height:this.height,margin:{l:0,r:0,b:0,t:0},xaxis:{domain:[0,100],range:[0,100],visible:!1,fixedrange:!0},yaxis:{domain:[0,85],range:[0,85],visible:!1,fixedrange:!0},images:[{source:"../assets/rink.png",xref:"x",yref:"y",x:0,y:85,sizex:100,sizey:85,sizing:"stretch",layer:"below"}]},config:{displaylogo:!1,showTips:!1,toImageButtonOptions:{filename:"shotMapExport"},modeBarButtonsToRemove:["lasso2d","zoom2d","autoScale2d","select2d","zoomIn2d","zoomOut2d","pan2d","resetScale2d"]}}}ngOnInit(){this.graph.layout.width=this.width,this.graph.layout.height=this.height,this.plotReady=!0}ngOnChanges(){this.data&&(this.x=[],this.y=[],this.data.shots.forEach(tt=>{this.x.push(tt.xCordAdjusted),this.y.push(tt.yCordAdjusted+42.5)}),this.x.length>0&&(this.pointsTrace.marker.color=this.data.shots.map(tt=>"GOAL"==tt.event?"red":"black")),this.pointsTrace.x=this.x,this.pointsTrace.y=this.y,this.pointsTrace.text=this.data.shots,this.kdeTrace.z=this.data.kde,this.plotReady=!0)}}Rn.\u0275fac=function(tt){return new(tt||Rn)},Rn.\u0275cmp=t.Xpm({type:Rn,selectors:[["app-shot-plot"]],inputs:{loading:"loading",height:"height",width:"width",data:"data"},features:[t.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"crosshair-plot",3,"data","layout","config"]],template:function(tt,Ge){1&tt&&t.YNc(0,gn,2,7,"div",0),2&tt&&t.Q6J("ngIf",Ge.plotReady)},dependencies:[Q.O5,vr],styles:[".disabled-plot[_ngcontent-%COMP%]     g.xy rect{pointer-events:none!important}.disabled-plot[_ngcontent-%COMP%]     div.modebar-container{pointer-events:none!important;display:none}.loading-blur[_ngcontent-%COMP%]{-moz-filter:blur(5px);-o-filter:blur(5px);-ms-filter:blur(5px);filter:blur(5px);background-color:#ccc}.crosshair-plot[_ngcontent-%COMP%]     g.xy rect{cursor:crosshair!important}"]});const jn=["column"],Zn=["row"];function Vn(ot,tt){if(1&ot&&(t.TgZ(0,"option",57),t._uU(1),t.qZA()),2&ot){const Ge=tt.$implicit;t.s9C("value",Ge.abbrev),t.xp6(1),t.Oqu(Ge.name)}}function bi(ot,tt){1&ot&&(t.TgZ(0,"option",58),t._uU(1,"All"),t.qZA())}function Li(ot,tt){if(1&ot&&(t.TgZ(0,"option",57),t._uU(1),t.qZA()),2&ot){const Ge=tt.$implicit;t.s9C("value",Ge.id),t.xp6(1),t.Oqu(Ge.name)}}function Gi(ot,tt){1&ot&&(t.TgZ(0,"option",58),t._uU(1,"All"),t.qZA())}function ji(ot,tt){if(1&ot&&(t.TgZ(0,"option",57),t._uU(1),t.qZA()),2&ot){const Ge=tt.$implicit;t.s9C("value",Ge.id),t.xp6(1),t.lnq("",Ge.teamAway," vs ",Ge.teamHome," (",Ge.date,")")}}function Yi(ot,tt){if(1&ot&&(t.TgZ(0,"div",61)(1,"div",62),t._UZ(2,"div",63),t.qZA()()),2&ot){const Ge=t.oxw(2);t.Udp("width",Ge.GRAPH_WIDTH_TEXT)("height",Ge.GRAPH_HEIGHT_TEXT)}}function _a(ot,tt){if(1&ot&&(t.TgZ(0,"div"),t.YNc(1,Yi,3,4,"div",59),t._UZ(2,"app-shot-plot",60),t.qZA()),2&ot){const Ge=t.oxw();t.xp6(1),t.Q6J("ngIf",!Ge.dataReady),t.xp6(1),t.Q6J("loading",!Ge.dataReady)("height",Ge.GRAPH_HEIGHT)("width",Ge.GRAPH_WIDTH)("data",Ge.data)}}class da{constructor(tt,Ge,Bt){this.cdRef=tt,this.httpService=Ge,this.fb=Bt,this.NHL_API_1="https://api.nhle.com/",this.NHL_API_2="https://api-web.nhle.com/v1/",this.GRAPH_WIDTH=null,this.GRAPH_HEIGHT=null,this.filtersForm=this.fb.group({teamCode:"MTL",shooterPlayerId:{value:"",disabled:!0},gameId:{value:"",disabled:!0},strength:"",event:"",shooterLeftRight:"",period:""}),this.dataReady=!1,this.plotReady=!1,this.playersReady=!1,this.numberShots=void 0,this.teams=[],this.players=[],this.games=[],this.currentDate=new Date,this.fetchData({teamCode:"MTL"}),this.loadTeams()}ngAfterViewInit(){this.setHeightWidth(),this.cdRef.detectChanges()}setHeightWidth(){let tt,Ge;Ge=this.row?.nativeElement.offsetWidth-20,tt=.85*Ge,tt>this.column?.nativeElement.offsetHeight&&(tt=this.column?.nativeElement.offsetHeight-20,Ge=1.17*tt),this.GRAPH_WIDTH=Ge,this.GRAPH_HEIGHT=tt,this.GRAPH_WIDTH_TEXT=this.GRAPH_WIDTH.toString()+"px",this.GRAPH_HEIGHT_TEXT=this.GRAPH_HEIGHT.toString()+"px",this.plotReady=!0}fetchData(tt){this.httpService.httpGetWithParameters("https://fontaine.onrender.com/shots?zone=OFF",tt).subscribe({next:Ge=>{this.data=Ge,this.numberShots=Ge.length},error:Ge=>console.error(Ge),complete:()=>this.enablePlot()})}enablePlot(){this.dataReady=!0}disablePlot(){this.dataReady=!1}onTeamChange(tt){const Ge=this.teams.find(Bt=>Bt.abbrev==tt.target.value);this.loadPlayersAndGames(Ge)}loadPlayersAndGames(tt){var Bt,Ge=this;f({players:this.getPlayers(tt),games:this.getGames(tt)}).subscribe({next:(Bt=k(function*(Ur){yield Ge.parsePlayers(Ur.players),yield Ge.parseGames(Ur.games)}),function(kn){return Bt.apply(this,arguments)}),error:Bt=>console.error(Bt),complete:()=>{this.filtersForm.get("gameId")?.enable(),this.filtersForm.get("shooterPlayerId")?.enable()}})}loadTeams(){this.httpService.httpGet(this.NHL_API_1+"stats/rest/en/franchise?sort=fullName&include=lastSeason.id&include=firstSeason.id&include=teams").subscribe({next:tt=>{tt.data.forEach(Ge=>{if(null==Ge.lastSeason){var Bt=Ge.teams.at(-1);this.teams.push({id:Bt.id,abbrev:Bt.triCode,name:Bt.fullName})}})},error:tt=>console.error(tt),complete:()=>this.loadPlayersAndGames(this.teams.find(tt=>"MTL"==tt.abbrev))})}getPlayers(tt){return this.filtersForm.get("shooterPlayerId")?.disable(),this.filtersForm.get("shooterPlayerId")?.setValue(""),this.players=[],this.httpService.httpGet(this.NHL_API_2+"roster/"+tt.abbrev+"/20242025")}getGames(tt){return this.filtersForm.get("gameId")?.disable(),this.filtersForm.get("gameId")?.setValue(""),this.games=[],this.httpService.httpGet(this.NHL_API_2+"club-schedule-season/"+tt.abbrev+"/20242025")}parsePlayers(tt){var Ge=this;return k(function*(){tt.forwards.forEach(Bt=>{Ge.players.push({id:Bt.id,name:Bt.firstName.default+" "+Bt.lastName.default})}),tt.defensemen.forEach(Bt=>{Ge.players.push({id:Bt.id,name:Bt.firstName.default+" "+Bt.lastName.default})}),Ge.players.sort((Bt,Ur)=>Bt.name.split(" ")[1].localeCompare(Ur.name.split(" ")[1]))})()}parseGames(tt){var Ge=this;return k(function*(){tt.games.forEach(Bt=>{2==Bt.gameType&&new Date(Bt.gameDate)<Ge.currentDate&&Ge.games.push({id:Bt.id,date:Bt.gameDate,teamHome:Bt.homeTeam.abbrev,teamAway:Bt.awayTeam.abbrev})})})()}resetForm(){const tt=this.filtersForm.get("teamCode")?.value;this.filtersForm.reset({teamCode:"MTL",strength:"",shooterLeftRight:"",period:""}),"MTL"!=tt&&this.loadPlayersAndGames(this.teams.find(Ge=>"MTL"==Ge.abbrev))}onFormSubmit(){this.disablePlot();let tt={};this.filtersForm.get("event")?.setValue(this.filtersForm.get("event")?.value?"GOAL":"");for(const Bt in this.filtersForm.controls){let Ur=this.filtersForm.get(Bt)?.value;Ur&&(tt[Bt]=Ur)}const Ge=tt.gameId;Ge&&(tt.gameId=parseInt(Ge.substring(4))),this.fetchData(tt)}}da.\u0275fac=function(tt){return new(tt||da)(t.Y36(t.sBO),t.Y36(s),t.Y36(ut))},da.\u0275cmp=t.Xpm({type:da,selectors:[["app-shot-map"]],viewQuery:function(tt,Ge){if(1&tt&&(t.Gf(jn,5),t.Gf(Zn,5)),2&tt){let Bt;t.iGM(Bt=t.CRH())&&(Ge.column=Bt.first),t.iGM(Bt=t.CRH())&&(Ge.row=Bt.first)}},decls:108,vars:14,consts:[[1,"mb-4"],[1,"container-fluid","d-flex","flex-fill","p-0"],[1,"row","w-100","m-0"],["row",""],[1,"col-lg-4","d-flex","flex-column","mb-3","px-0"],[1,"row","mb-2"],[1,"d-flex","align-middle","filters-border","m-0","py-2","px-3"],[1,"m-0"],[1,"px-3","pb-3","filters-form",3,"formGroup","ngSubmit"],[1,"my-2"],["for","teamCode",1,"form-label"],["id","teamCode","formControlName","teamCode",1,"form-select","form-control",3,"change"],["value","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],[1,"mb-2"],["for","shooterPlayerId",1,"form-label"],["id","shooterPlayerId","formControlName","shooterPlayerId",1,"form-select","form-control"],["value","","selected","",4,"ngIf"],["for","game",1,"form-label"],["id","gameId","formControlName","gameId",1,"form-select","form-control"],["for","strength",1,"form-label"],[1,"form-check","form-check-inline"],["for","All",1,"form-check-label"],["default","","type","radio","id","All","value","","formControlName","strength",1,"form-check-input"],["for","PP",1,"form-check-label"],["type","radio","id","PP","value","PP","formControlName","strength",1,"form-check-input"],["for","PK",1,"form-check-label"],["type","radio","id","PK","value","PK","formControlName","strength",1,"form-check-input"],["for","EVEN",1,"form-check-label"],["type","radio","id","EVEN","value","EVEN","formControlName","strength",1,"form-check-input"],["for","period",1,"form-label"],["default","","type","radio","id","All","value","","formControlName","period",1,"form-check-input"],["for","1",1,"form-check-label"],["type","radio","id","1","value","1","formControlName","period",1,"form-check-input"],["for","2",1,"form-check-label"],["type","radio","id","2","value","2","formControlName","period",1,"form-check-input"],["for","3",1,"form-check-label"],["type","radio","id","3","value","3","formControlName","period",1,"form-check-input"],["for","OT",1,"form-check-label"],["type","radio","id","OT","value","4","formControlName","period",1,"form-check-input"],["for","shooterLeftRight",1,"form-label"],["for","L/R",1,"form-check-label"],["default","","type","radio","id","L/R","value","","formControlName","shooterLeftRight",1,"form-check-input"],["for","L",1,"form-check-label"],["type","radio","id","L","value","L","formControlName","shooterLeftRight",1,"form-check-input"],["for","R",1,"form-check-label"],["type","radio","id","R","value","R","formControlName","shooterLeftRight",1,"form-check-input"],[1,"form-check","form-switch"],["for","event",1,"form-check-label"],["type","checkbox","role","switch","value","GOAL","id","event","formControlName","event",1,"form-check-input"],[1,"d-flex","mt-3"],["type","submit",1,"btn","btn-primary","me-3","w-25"],["type","button",1,"text-black","btn","btn-outline-primary","w-25",3,"click"],[1,"row"],[1,"col","d-flex","justify-content-center","p-0","w-100","mb-3"],["column",""],[4,"ngIf"],[3,"value"],["value","","selected",""],["class","position-absolute pe-none",3,"width","height",4,"ngIf"],[3,"loading","height","width","data"],[1,"position-absolute","pe-none"],[1,"d-flex","col","h-100","justify-content-center","align-items-center"],["id","spinner1","role","status",1,"spinner-border"]],template:function(tt,Ge){1&tt&&(t.TgZ(0,"h3",0),t._uU(1,"NHL Shot Map"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2,3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h5",7),t._uU(9,"Filters"),t.qZA()(),t.TgZ(10,"form",8),t.NdJ("ngSubmit",function(){return Ge.onFormSubmit()}),t.TgZ(11,"div",9)(12,"label",10),t._uU(13,"Team:"),t.qZA(),t.TgZ(14,"select",11),t.NdJ("change",function(Ur){return Ge.onTeamChange(Ur)}),t._UZ(15,"option",12),t.YNc(16,Vn,2,2,"option",13),t.qZA()(),t.TgZ(17,"div",14)(18,"label",15),t._uU(19,"Player:"),t.qZA(),t.TgZ(20,"select",16),t.YNc(21,bi,2,0,"option",17),t.YNc(22,Li,2,2,"option",13),t.qZA()(),t.TgZ(23,"div",14)(24,"label",18),t._uU(25,"Game:"),t.qZA(),t.TgZ(26,"select",19),t.YNc(27,Gi,2,0,"option",17),t.YNc(28,ji,2,4,"option",13),t.qZA()(),t.TgZ(29,"div",14)(30,"label",20),t._uU(31,"Strength:"),t.qZA(),t._UZ(32,"br"),t.TgZ(33,"div",21)(34,"label",22),t._uU(35,"All"),t.qZA(),t._UZ(36,"input",23),t.qZA(),t.TgZ(37,"div",21)(38,"label",24),t._uU(39,"PP"),t.qZA(),t._UZ(40,"input",25),t.qZA(),t.TgZ(41,"div",21)(42,"label",26),t._uU(43,"PK"),t.qZA(),t._UZ(44,"input",27),t.qZA(),t.TgZ(45,"div",21)(46,"label",28),t._uU(47,"EVEN"),t.qZA(),t._UZ(48,"input",29),t.qZA()(),t.TgZ(49,"div",14)(50,"label",30),t._uU(51,"Period:"),t.qZA(),t._UZ(52,"br"),t.TgZ(53,"div",21)(54,"label",22),t._uU(55,"All"),t.qZA(),t._UZ(56,"input",31),t.qZA(),t.TgZ(57,"div",21)(58,"label",32),t._uU(59,"1"),t.qZA(),t._UZ(60,"input",33),t.qZA(),t.TgZ(61,"div",21)(62,"label",34),t._uU(63,"2"),t.qZA(),t._UZ(64,"input",35),t.qZA(),t.TgZ(65,"div",21)(66,"label",36),t._uU(67,"3"),t.qZA(),t._UZ(68,"input",37),t.qZA(),t.TgZ(69,"div",21)(70,"label",38),t._uU(71,"OT"),t.qZA(),t._UZ(72,"input",39),t.qZA()(),t.TgZ(73,"div",14)(74,"label",40),t._uU(75,"Handedness:"),t.qZA(),t._UZ(76,"br"),t.TgZ(77,"div",21)(78,"label",41),t._uU(79,"L/R"),t.qZA(),t._UZ(80,"input",42),t.qZA(),t.TgZ(81,"div",21)(82,"label",43),t._uU(83,"L"),t.qZA(),t._UZ(84,"input",44),t.qZA(),t.TgZ(85,"div",21)(86,"label",45),t._uU(87,"R"),t.qZA(),t._UZ(88,"input",46),t.qZA()(),t.TgZ(89,"div",14)(90,"div",47)(91,"label",48),t._uU(92,"Goals only"),t.qZA(),t._UZ(93,"input",49),t.qZA()(),t.TgZ(94,"div",50)(95,"button",51),t._uU(96,"Filter"),t.qZA(),t.TgZ(97,"button",52),t.NdJ("click",function(){return Ge.resetForm()}),t._uU(98,"Reset"),t.qZA()()()(),t.TgZ(99,"div",53)(100,"span"),t._uU(101,"Number of shots: "),t.TgZ(102,"b"),t._uU(103),t.qZA()()()(),t.TgZ(104,"div",54)(105,"div",null,55),t.YNc(107,_a,3,5,"div",56),t.qZA()()()()),2&tt&&(t.xp6(10),t.Q6J("formGroup",Ge.filtersForm),t.xp6(6),t.Q6J("ngForOf",Ge.teams),t.xp6(5),t.Q6J("ngIf",0!=Ge.players.length),t.xp6(1),t.Q6J("ngForOf",Ge.players),t.xp6(5),t.Q6J("ngIf",0!=Ge.games.length),t.xp6(1),t.Q6J("ngForOf",Ge.games),t.xp6(75),t.Oqu(Ge.numberShots),t.xp6(2),t.Udp("width",null!=Ge.GRAPH_WIDTH?Ge.GRAPH_WIDTH_TEXT:"100%")("height",null!=Ge.GRAPH_HEIGHT?Ge.GRAPH_HEIGHT_TEXT:null),t.ekj("disabled-plot",!Ge.dataReady),t.xp6(2),t.Q6J("ngIf",Ge.plotReady))},dependencies:[Q.sg,Q.O5,Er,Ha,eo,C,_,qi,rn,Oe,Xe,Kn,ma,Rn],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh;margin:20px}#spinner1[_ngcontent-%COMP%]{width:5rem;height:5rem;z-index:1000}div[_ngcontent-%COMP%]{--color: rgb(133, 151, 176)}div[_ngcontent-%COMP%]   .filters-form[_ngcontent-%COMP%]{border:3px solid var(--color);border-bottom-left-radius:10px;border-bottom-right-radius:10px}div[_ngcontent-%COMP%]   .filters-border[_ngcontent-%COMP%]{background-color:var(--color);border-top:3px solid var(--color);border-right:3px solid var(--color);border-left:3px solid var(--color);border-top-left-radius:10px;border-top-right-radius:10px}"]});var aa=$(102);Ar.plotlyjs=aa;const oa=[{path:"",redirectTo:"shot-map",pathMatch:"full"},{path:"shot-map",component:da}];class ca{}ca.\u0275fac=function(tt){return new(tt||ca)},ca.\u0275mod=t.oAB({type:ca}),ca.\u0275inj=t.cJS({imports:[Q.ez,m.Bz.forChild(oa),Ar,Qo,mo,m.Bz]})},102:Du=>{Du.exports=function v($,Q,m){function g(e,n){if(!Q[e]){if(!$[e]){if(k)return k(e,!0);var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}var r=Q[e]={exports:{}};$[e][0].call(r.exports,function(d){return g($[e][1][d]||d)},r,r.exports,v,$,Q,m)}return Q[e].exports}for(var k=void 0,x=0;x<m.length;x++)g(m[x]);return g}({1:[function(v,$,Q){"use strict";var m=v("../src/lib"),g={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var k in g){var x=k.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");m.addStyleRule(x,g[k])}},{"../src/lib":515}],2:[function(v,$,Q){"use strict";$.exports=v("../src/transforms/aggregate")},{"../src/transforms/aggregate":1127}],3:[function(v,$,Q){"use strict";$.exports=v("../src/traces/bar")},{"../src/traces/bar":665}],4:[function(v,$,Q){"use strict";$.exports=v("../src/traces/barpolar")},{"../src/traces/barpolar":678}],5:[function(v,$,Q){"use strict";$.exports=v("../src/traces/box")},{"../src/traces/box":688}],6:[function(v,$,Q){"use strict";$.exports=v("../src/components/calendars")},{"../src/components/calendars":365}],7:[function(v,$,Q){"use strict";$.exports=v("../src/traces/candlestick")},{"../src/traces/candlestick":697}],8:[function(v,$,Q){"use strict";$.exports=v("../src/traces/carpet")},{"../src/traces/carpet":716}],9:[function(v,$,Q){"use strict";$.exports=v("../src/traces/choropleth")},{"../src/traces/choropleth":730}],10:[function(v,$,Q){"use strict";$.exports=v("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":737}],11:[function(v,$,Q){"use strict";$.exports=v("../src/traces/cone")},{"../src/traces/cone":743}],12:[function(v,$,Q){"use strict";$.exports=v("../src/traces/contour")},{"../src/traces/contour":758}],13:[function(v,$,Q){"use strict";$.exports=v("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":769}],14:[function(v,$,Q){"use strict";$.exports=v("../src/core")},{"../src/core":493}],15:[function(v,$,Q){"use strict";$.exports=v("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":777}],16:[function(v,$,Q){"use strict";$.exports=v("../src/transforms/filter")},{"../src/transforms/filter":1128}],17:[function(v,$,Q){"use strict";$.exports=v("../src/traces/funnel")},{"../src/traces/funnel":787}],18:[function(v,$,Q){"use strict";$.exports=v("../src/traces/funnelarea")},{"../src/traces/funnelarea":796}],19:[function(v,$,Q){"use strict";$.exports=v("../src/transforms/groupby")},{"../src/transforms/groupby":1129}],20:[function(v,$,Q){"use strict";$.exports=v("../src/traces/heatmap")},{"../src/traces/heatmap":809}],21:[function(v,$,Q){"use strict";$.exports=v("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":820}],22:[function(v,$,Q){"use strict";$.exports=v("../src/traces/histogram")},{"../src/traces/histogram":832}],23:[function(v,$,Q){"use strict";$.exports=v("../src/traces/histogram2d")},{"../src/traces/histogram2d":838}],24:[function(v,$,Q){"use strict";$.exports=v("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":842}],25:[function(v,$,Q){"use strict";$.exports=v("../src/traces/icicle")},{"../src/traces/icicle":848}],26:[function(v,$,Q){"use strict";$.exports=v("../src/traces/image")},{"../src/traces/image":861}],27:[function(v,$,Q){"use strict";var m=v("./core");m.register([v("./bar"),v("./box"),v("./heatmap"),v("./histogram"),v("./histogram2d"),v("./histogram2dcontour"),v("./contour"),v("./scatterternary"),v("./violin"),v("./funnel"),v("./waterfall"),v("./image"),v("./pie"),v("./sunburst"),v("./treemap"),v("./icicle"),v("./funnelarea"),v("./scatter3d"),v("./surface"),v("./isosurface"),v("./volume"),v("./mesh3d"),v("./cone"),v("./streamtube"),v("./scattergeo"),v("./choropleth"),v("./scattergl"),v("./splom"),v("./pointcloud"),v("./heatmapgl"),v("./parcoords"),v("./parcats"),v("./scattermapbox"),v("./choroplethmapbox"),v("./densitymapbox"),v("./sankey"),v("./indicator"),v("./table"),v("./carpet"),v("./scattercarpet"),v("./contourcarpet"),v("./ohlc"),v("./candlestick"),v("./scatterpolar"),v("./scatterpolargl"),v("./barpolar"),v("./scattersmith"),v("./aggregate"),v("./filter"),v("./groupby"),v("./sort"),v("./calendars")]),$.exports=m},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(v,$,Q){"use strict";$.exports=v("../src/traces/indicator")},{"../src/traces/indicator":869}],29:[function(v,$,Q){"use strict";$.exports=v("../src/traces/isosurface")},{"../src/traces/isosurface":875}],30:[function(v,$,Q){"use strict";$.exports=v("../src/traces/mesh3d")},{"../src/traces/mesh3d":880}],31:[function(v,$,Q){"use strict";$.exports=v("../src/traces/ohlc")},{"../src/traces/ohlc":885}],32:[function(v,$,Q){"use strict";$.exports=v("../src/traces/parcats")},{"../src/traces/parcats":894}],33:[function(v,$,Q){"use strict";$.exports=v("../src/traces/parcoords")},{"../src/traces/parcoords":905}],34:[function(v,$,Q){"use strict";$.exports=v("../src/traces/pie")},{"../src/traces/pie":916}],35:[function(v,$,Q){"use strict";$.exports=v("../src/traces/pointcloud")},{"../src/traces/pointcloud":925}],36:[function(v,$,Q){"use strict";$.exports=v("../src/traces/sankey")},{"../src/traces/sankey":931}],37:[function(v,$,Q){"use strict";$.exports=v("../src/traces/scatter3d")},{"../src/traces/scatter3d":969}],38:[function(v,$,Q){"use strict";$.exports=v("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":976}],39:[function(v,$,Q){"use strict";$.exports=v("../src/traces/scattergeo")},{"../src/traces/scattergeo":984}],40:[function(v,$,Q){"use strict";$.exports=v("../src/traces/scattergl")},{"../src/traces/scattergl":998}],41:[function(v,$,Q){"use strict";$.exports=v("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1008}],42:[function(v,$,Q){"use strict";$.exports=v("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1016}],43:[function(v,$,Q){"use strict";$.exports=v("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1024}],44:[function(v,$,Q){"use strict";$.exports=v("../src/traces/scattersmith")},{"../src/traces/scattersmith":1031}],45:[function(v,$,Q){"use strict";$.exports=v("../src/traces/scatterternary")},{"../src/traces/scatterternary":1039}],46:[function(v,$,Q){"use strict";$.exports=v("../src/transforms/sort")},{"../src/transforms/sort":1131}],47:[function(v,$,Q){"use strict";$.exports=v("../src/traces/splom")},{"../src/traces/splom":1049}],48:[function(v,$,Q){"use strict";$.exports=v("../src/traces/streamtube")},{"../src/traces/streamtube":1057}],49:[function(v,$,Q){"use strict";$.exports=v("../src/traces/sunburst")},{"../src/traces/sunburst":1065}],50:[function(v,$,Q){"use strict";$.exports=v("../src/traces/surface")},{"../src/traces/surface":1074}],51:[function(v,$,Q){"use strict";$.exports=v("../src/traces/table")},{"../src/traces/table":1082}],52:[function(v,$,Q){"use strict";$.exports=v("../src/traces/treemap")},{"../src/traces/treemap":1093}],53:[function(v,$,Q){"use strict";$.exports=v("../src/traces/violin")},{"../src/traces/violin":1106}],54:[function(v,$,Q){"use strict";$.exports=v("../src/traces/volume")},{"../src/traces/volume":1114}],55:[function(v,$,Q){"use strict";$.exports=v("../src/traces/waterfall")},{"../src/traces/waterfall":1122}],56:[function(v,$,Q){var m,g;m=this,g=function(m,g,k,x,e){"use strict";function n(te){return te.target.depth}function i(te,ae){return te.sourceLinks.length?te.depth:ae-1}function l(te){return function(){return te}}e=e&&e.hasOwnProperty("default")?e.default:e;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(te){return typeof te}:function(te){return te&&"function"==typeof Symbol&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te};function d(te,ae){return t(te.source,ae.source)||te.index-ae.index}function f(te,ae){return t(te.target,ae.target)||te.index-ae.index}function t(te,ae){return te.partOfCycle===ae.partOfCycle?te.y0-ae.y0:"top"===te.circularLinkType||"bottom"===ae.circularLinkType?-1:1}function h(te){return te.value}function s(te){return(te.y0+te.y1)/2}function o(te){return s(te.source)}function p(te){return s(te.target)}function c(te){return te.index}function a(te){return te.nodes}function y(te){return te.links}function u(te,ae){var le=te.get(ae);if(!le)throw new Error("missing: "+ae);return le}function _(te,ae){return ae(te)}function b(te,ae,le){var se=0;if(null===le){for(var ve=[],ue=0;ue<te.links.length;ue++){var ye=te.links[ue],Me=ye.source.index,pe=ye.target.index;ve[Me]||(ve[Me]=[]),ve[pe]||(ve[pe]=[]),-1===ve[Me].indexOf(pe)&&ve[Me].push(pe)}var ge=e(ve);ge.sort(function(de,Te){return de.length-Te.length});var we={};for(ue=0;ue<ge.length;ue++){var oe=ge[ue].slice(-2);we[oe[0]]||(we[oe[0]]={}),we[oe[0]][oe[1]]=!0}te.links.forEach(function(de){var Te=de.target.index,Ee=de.source.index;Te===Ee||we[Ee]&&we[Ee][Te]?(de.circular=!0,de.circularLinkID=se,se+=1):de.circular=!1})}else te.links.forEach(function(de){de.source[le]<de.target[le]?de.circular=!1:(de.circular=!0,de.circularLinkID=se,se+=1)})}function w(te,ae){var le=0,se=0;te.links.forEach(function(ve){ve.circular&&(ve.circularLinkType=ve.source.circularLinkType||ve.target.circularLinkType?ve.source.circularLinkType?ve.source.circularLinkType:ve.target.circularLinkType:le<se?"top":"bottom","top"==ve.circularLinkType?le+=1:se+=1,te.nodes.forEach(function(ue){_(ue,ae)!=_(ve.source,ae)&&_(ue,ae)!=_(ve.target,ae)||(ue.circularLinkType=ve.circularLinkType)}))}),te.links.forEach(function(ve){ve.circular&&(ve.source.circularLinkType==ve.target.circularLinkType&&(ve.circularLinkType=ve.source.circularLinkType),K(ve,ae)&&(ve.circularLinkType=ve.source.circularLinkType))})}function T(te){var ae=Math.abs(te.y1-te.y0),le=Math.abs(te.target.x0-te.source.x1);return Math.atan(le/ae)}function C(te,ae){var le=0;te.sourceLinks.forEach(function(ve){le=ve.circular&&!K(ve,ae)?le+1:le});var se=0;return te.targetLinks.forEach(function(ve){se=ve.circular&&!K(ve,ae)?se+1:se}),le+se}function M(te){var le=0;te.source.sourceLinks.forEach(function(ue){le=ue.circular?le+1:le});var ve=0;return te.target.targetLinks.forEach(function(ue){ve=ue.circular?ve+1:ve}),!(le>1||ve>1)}function I(te,ae,le){return te.sort(S),te.forEach(function(se,ve){var ue,ye,Me=0;if(K(se,le)&&M(se))se.circularPathData.verticalBuffer=Me+se.width/2;else{for(var pe=0;pe<ve;pe++)if(!((ue=te[ve]).source.column<(ye=te[pe]).target.column||ue.target.column>ye.source.column)){var ge=te[pe].circularPathData.verticalBuffer+te[pe].width/2+ae;Me=ge>Me?ge:Me}se.circularPathData.verticalBuffer=Me+se.width/2}}),te}function P(te,ae,le,se){var ve=g.min(te.links,function(ue){return ue.source.y0});te.links.forEach(function(ue){ue.circular&&(ue.circularPathData={})}),I(te.links.filter(function(ue){return"top"==ue.circularLinkType}),ae,se),I(te.links.filter(function(ue){return"bottom"==ue.circularLinkType}),ae,se),te.links.forEach(function(ue){if(ue.circular){if(ue.circularPathData.arcRadius=ue.width+10,ue.circularPathData.leftNodeBuffer=5,ue.circularPathData.rightNodeBuffer=5,ue.circularPathData.sourceWidth=ue.source.x1-ue.source.x0,ue.circularPathData.sourceX=ue.source.x0+ue.circularPathData.sourceWidth,ue.circularPathData.targetX=ue.target.x0,ue.circularPathData.sourceY=ue.y0,ue.circularPathData.targetY=ue.y1,K(ue,se)&&M(ue))ue.circularPathData.leftSmallArcRadius=10+ue.width/2,ue.circularPathData.leftLargeArcRadius=10+ue.width/2,ue.circularPathData.rightSmallArcRadius=10+ue.width/2,ue.circularPathData.rightLargeArcRadius=10+ue.width/2,"bottom"==ue.circularLinkType?(ue.circularPathData.verticalFullExtent=ue.source.y1+25+ue.circularPathData.verticalBuffer,ue.circularPathData.verticalLeftInnerExtent=ue.circularPathData.verticalFullExtent-ue.circularPathData.leftLargeArcRadius,ue.circularPathData.verticalRightInnerExtent=ue.circularPathData.verticalFullExtent-ue.circularPathData.rightLargeArcRadius):(ue.circularPathData.verticalFullExtent=ue.source.y0-25-ue.circularPathData.verticalBuffer,ue.circularPathData.verticalLeftInnerExtent=ue.circularPathData.verticalFullExtent+ue.circularPathData.leftLargeArcRadius,ue.circularPathData.verticalRightInnerExtent=ue.circularPathData.verticalFullExtent+ue.circularPathData.rightLargeArcRadius);else{var ye=ue.source.column,Me=ue.circularLinkType,pe=te.links.filter(function(oe){return oe.source.column==ye&&oe.circularLinkType==Me});pe.sort("bottom"==ue.circularLinkType?R:E);var ge=0;pe.forEach(function(oe,de){oe.circularLinkID==ue.circularLinkID&&(ue.circularPathData.leftSmallArcRadius=10+ue.width/2+ge,ue.circularPathData.leftLargeArcRadius=10+ue.width/2+de*ae+ge),ge+=oe.width}),ye=ue.target.column,(pe=te.links.filter(function(oe){return oe.target.column==ye&&oe.circularLinkType==Me})).sort("bottom"==ue.circularLinkType?j:D),ge=0,pe.forEach(function(oe,de){oe.circularLinkID==ue.circularLinkID&&(ue.circularPathData.rightSmallArcRadius=10+ue.width/2+ge,ue.circularPathData.rightLargeArcRadius=10+ue.width/2+de*ae+ge),ge+=oe.width}),"bottom"==ue.circularLinkType?(ue.circularPathData.verticalFullExtent=Math.max(le,ue.source.y1,ue.target.y1)+25+ue.circularPathData.verticalBuffer,ue.circularPathData.verticalLeftInnerExtent=ue.circularPathData.verticalFullExtent-ue.circularPathData.leftLargeArcRadius,ue.circularPathData.verticalRightInnerExtent=ue.circularPathData.verticalFullExtent-ue.circularPathData.rightLargeArcRadius):(ue.circularPathData.verticalFullExtent=ve-25-ue.circularPathData.verticalBuffer,ue.circularPathData.verticalLeftInnerExtent=ue.circularPathData.verticalFullExtent+ue.circularPathData.leftLargeArcRadius,ue.circularPathData.verticalRightInnerExtent=ue.circularPathData.verticalFullExtent+ue.circularPathData.rightLargeArcRadius)}ue.circularPathData.leftInnerExtent=ue.circularPathData.sourceX+ue.circularPathData.leftNodeBuffer,ue.circularPathData.rightInnerExtent=ue.circularPathData.targetX-ue.circularPathData.rightNodeBuffer,ue.circularPathData.leftFullExtent=ue.circularPathData.sourceX+ue.circularPathData.leftLargeArcRadius+ue.circularPathData.leftNodeBuffer,ue.circularPathData.rightFullExtent=ue.circularPathData.targetX-ue.circularPathData.rightLargeArcRadius-ue.circularPathData.rightNodeBuffer}if(ue.circular)ue.path="top"==(oe=ue).circularLinkType?"M"+oe.circularPathData.sourceX+" "+oe.circularPathData.sourceY+" L"+oe.circularPathData.leftInnerExtent+" "+oe.circularPathData.sourceY+" A"+oe.circularPathData.leftLargeArcRadius+" "+oe.circularPathData.leftSmallArcRadius+" 0 0 0 "+oe.circularPathData.leftFullExtent+" "+(oe.circularPathData.sourceY-oe.circularPathData.leftSmallArcRadius)+" L"+oe.circularPathData.leftFullExtent+" "+oe.circularPathData.verticalLeftInnerExtent+" A"+oe.circularPathData.leftLargeArcRadius+" "+oe.circularPathData.leftLargeArcRadius+" 0 0 0 "+oe.circularPathData.leftInnerExtent+" "+oe.circularPathData.verticalFullExtent+" L"+oe.circularPathData.rightInnerExtent+" "+oe.circularPathData.verticalFullExtent+" A"+oe.circularPathData.rightLargeArcRadius+" "+oe.circularPathData.rightLargeArcRadius+" 0 0 0 "+oe.circularPathData.rightFullExtent+" "+oe.circularPathData.verticalRightInnerExtent+" L"+oe.circularPathData.rightFullExtent+" "+(oe.circularPathData.targetY-oe.circularPathData.rightSmallArcRadius)+" A"+oe.circularPathData.rightLargeArcRadius+" "+oe.circularPathData.rightSmallArcRadius+" 0 0 0 "+oe.circularPathData.rightInnerExtent+" "+oe.circularPathData.targetY+" L"+oe.circularPathData.targetX+" "+oe.circularPathData.targetY:"M"+oe.circularPathData.sourceX+" "+oe.circularPathData.sourceY+" L"+oe.circularPathData.leftInnerExtent+" "+oe.circularPathData.sourceY+" A"+oe.circularPathData.leftLargeArcRadius+" "+oe.circularPathData.leftSmallArcRadius+" 0 0 1 "+oe.circularPathData.leftFullExtent+" "+(oe.circularPathData.sourceY+oe.circularPathData.leftSmallArcRadius)+" L"+oe.circularPathData.leftFullExtent+" "+oe.circularPathData.verticalLeftInnerExtent+" A"+oe.circularPathData.leftLargeArcRadius+" "+oe.circularPathData.leftLargeArcRadius+" 0 0 1 "+oe.circularPathData.leftInnerExtent+" "+oe.circularPathData.verticalFullExtent+" L"+oe.circularPathData.rightInnerExtent+" "+oe.circularPathData.verticalFullExtent+" A"+oe.circularPathData.rightLargeArcRadius+" "+oe.circularPathData.rightLargeArcRadius+" 0 0 1 "+oe.circularPathData.rightFullExtent+" "+oe.circularPathData.verticalRightInnerExtent+" L"+oe.circularPathData.rightFullExtent+" "+(oe.circularPathData.targetY+oe.circularPathData.rightSmallArcRadius)+" A"+oe.circularPathData.rightLargeArcRadius+" "+oe.circularPathData.rightSmallArcRadius+" 0 0 1 "+oe.circularPathData.rightInnerExtent+" "+oe.circularPathData.targetY+" L"+oe.circularPathData.targetX+" "+oe.circularPathData.targetY;else{var we=x.linkHorizontal().source(function(oe){return[oe.source.x0+(oe.source.x1-oe.source.x0),oe.y0]}).target(function(oe){return[oe.target.x0,oe.y1]});ue.path=we(ue)}var oe})}function S(te,ae){return H(te)==H(ae)?"bottom"==te.circularLinkType?R(te,ae):E(te,ae):H(ae)-H(te)}function E(te,ae){return te.y0-ae.y0}function R(te,ae){return ae.y0-te.y0}function D(te,ae){return te.y1-ae.y1}function j(te,ae){return ae.y1-te.y1}function H(te){return te.target.column-te.source.column}function Y(te){return te.target.x0-te.source.x1}function X(te,ae){var le=T(te),se=Y(ae)/Math.tan(le);return"up"==N(te)?te.y1+se:te.y1-se}function Z(te,ae){var le=T(te),se=Y(ae)/Math.tan(le);return"up"==N(te)?te.y1-se:te.y1+se}function W(te,ae,le,se){te.links.forEach(function(ve){if(!ve.circular&&ve.target.column-ve.source.column>1){var ue=ve.source.column+1,ye=ve.target.column-1,Me=1,pe=ye-ue+1;for(Me=1;ue<=ye;ue++,Me++)te.nodes.forEach(function(ge){if(ge.column==ue){var we,oe=Me/(pe+1),de=Math.pow(1-oe,3),Te=3*oe*Math.pow(1-oe,2),Ee=3*Math.pow(oe,2)*(1-oe),Ae=Math.pow(oe,3),De=de*ve.y0+Te*ve.y0+Ee*ve.y1+Ae*ve.y1,Ie=De-ve.width/2,Oe=De+ve.width/2;Ie>ge.y0&&Ie<ge.y1?(we=ge.y1-Ie+10,ge=U(ge,we="bottom"==ge.circularLinkType?we:-we,ae,le),te.nodes.forEach(function(Xe){_(Xe,se)!=_(ge,se)&&Xe.column==ge.column&&re(ge,Xe)&&U(Xe,we,ae,le)})):(Oe>ge.y0&&Oe<ge.y1||Ie<ge.y0&&Oe>ge.y1)&&(ge=U(ge,we=Oe-ge.y0+10,ae,le),te.nodes.forEach(function(Xe){_(Xe,se)!=_(ge,se)&&Xe.column==ge.column&&Xe.y0<ge.y1&&Xe.y1>ge.y1&&U(Xe,we,ae,le)}))}})}})}function re(te,ae){return te.y0>ae.y0&&te.y0<ae.y1||te.y1>ae.y0&&te.y1<ae.y1||te.y0<ae.y0&&te.y1>ae.y1}function U(te,ae,le,se){return te.y0+ae>=le&&te.y1+ae<=se&&(te.y0=te.y0+ae,te.y1=te.y1+ae,te.targetLinks.forEach(function(ve){ve.y1=ve.y1+ae}),te.sourceLinks.forEach(function(ve){ve.y0=ve.y0+ae})),te}function B(te,ae,le,se){te.nodes.forEach(function(ve){se&&ve.y+(ve.y1-ve.y0)>ae&&(ve.y=ve.y-(ve.y+(ve.y1-ve.y0)-ae));var ue=te.links.filter(function(pe){return _(pe.source,le)==_(ve,le)}),ye=ue.length;ye>1&&ue.sort(function(pe,ge){if(!pe.circular&&!ge.circular){if(pe.target.column==ge.target.column||!ee(pe,ge))return pe.y1-ge.y1;if(pe.target.column>ge.target.column){var we=Z(ge,pe);return pe.y1-we}if(ge.target.column>pe.target.column)return Z(pe,ge)-ge.y1}return pe.circular&&!ge.circular?"top"==pe.circularLinkType?-1:1:ge.circular&&!pe.circular?"top"==ge.circularLinkType?1:-1:pe.circular&&ge.circular?pe.circularLinkType===ge.circularLinkType&&"top"==pe.circularLinkType?pe.target.column===ge.target.column?pe.target.y1-ge.target.y1:ge.target.column-pe.target.column:pe.circularLinkType===ge.circularLinkType&&"bottom"==pe.circularLinkType?pe.target.column===ge.target.column?ge.target.y1-pe.target.y1:pe.target.column-ge.target.column:"top"==pe.circularLinkType?-1:1:void 0});var Me=ve.y0;ue.forEach(function(pe){pe.y0=Me+pe.width/2,Me+=pe.width}),ue.forEach(function(pe,ge){if("bottom"==pe.circularLinkType){for(var we=ge+1,oe=0;we<ye;we++)oe+=ue[we].width;pe.y0=ve.y1-oe-pe.width/2}})})}function V(te,ae,le){te.nodes.forEach(function(se){var ve=te.links.filter(function(Me){return _(Me.target,le)==_(se,le)}),ue=ve.length;ue>1&&ve.sort(function(Me,pe){if(!Me.circular&&!pe.circular){if(Me.source.column==pe.source.column||!ee(Me,pe))return Me.y0-pe.y0;if(pe.source.column<Me.source.column){var ge=X(pe,Me);return Me.y0-ge}if(Me.source.column<pe.source.column)return X(Me,pe)-pe.y0}return Me.circular&&!pe.circular?"top"==Me.circularLinkType?-1:1:pe.circular&&!Me.circular?"top"==pe.circularLinkType?1:-1:Me.circular&&pe.circular?Me.circularLinkType===pe.circularLinkType&&"top"==Me.circularLinkType?Me.source.column===pe.source.column?Me.source.y1-pe.source.y1:Me.source.column-pe.source.column:Me.circularLinkType===pe.circularLinkType&&"bottom"==Me.circularLinkType?Me.source.column===pe.source.column?Me.source.y1-pe.source.y1:pe.source.column-Me.source.column:"top"==Me.circularLinkType?-1:1:void 0});var ye=se.y0;ve.forEach(function(Me){Me.y1=ye+Me.width/2,ye+=Me.width}),ve.forEach(function(Me,pe){if("bottom"==Me.circularLinkType){for(var ge=pe+1,we=0;ge<ue;ge++)we+=ve[ge].width;Me.y1=se.y1-we-Me.width/2}})})}function ee(te,ae){return N(te)==N(ae)}function N(te){return te.y0-te.y1>0?"up":"down"}function K(te,ae){return _(te.source,ae)==_(te.target,ae)}function J(te,ae,le){var se=te.nodes,ve=te.links,ue=!1,ye=!1;if(ve.forEach(function(ge){"top"==ge.circularLinkType?ue=!0:"bottom"==ge.circularLinkType&&(ye=!0)}),0==ue||0==ye){var Me=g.min(se,function(ge){return ge.y0}),pe=(le-ae)/(g.max(se,function(ge){return ge.y1})-Me);se.forEach(function(ge){var we=(ge.y1-ge.y0)*pe;ge.y0=(ge.y0-Me)*pe,ge.y1=ge.y0+we}),ve.forEach(function(ge){ge.y0=(ge.y0-Me)*pe,ge.y1=(ge.y1-Me)*pe,ge.width=ge.width*pe})}}m.sankeyCircular=function(){var te,ae,le=0,se=0,ve=1,ue=1,ye=24,Me=c,pe=i,ge=a,we=y,oe=32,de=2,Te=null;function Ee(){var Fe={nodes:ge.apply(null,arguments),links:we.apply(null,arguments)};Ae(Fe),b(Fe,0,Te),De(Fe),Ie(Fe),w(Fe,Me),Oe(Fe,oe,Me),Xe(Fe);for(var Pe=4,Re=0;Re<Pe;Re++)B(Fe,ue,Me),V(Fe,0,Me),W(Fe,se,ue,Me),B(Fe,ue,Me),V(Fe,0,Me);return J(Fe,se,ue),P(Fe,de,ue,Me),Fe}function Ae(Fe){Fe.nodes.forEach(function(Re,qe){Re.index=qe,Re.sourceLinks=[],Re.targetLinks=[]});var Pe=k.map(Fe.nodes,Me);return Fe.links.forEach(function(Re,qe){Re.index=qe;var Qe=Re.source,ct=Re.target;"object"!==(void 0===Qe?"undefined":r(Qe))&&(Qe=Re.source=u(Pe,Qe)),"object"!==(void 0===ct?"undefined":r(ct))&&(ct=Re.target=u(Pe,ct)),Qe.sourceLinks.push(Re),ct.targetLinks.push(Re)}),Fe}function De(Fe){Fe.nodes.forEach(function(Pe){Pe.partOfCycle=!1,Pe.value=Math.max(g.sum(Pe.sourceLinks,h),g.sum(Pe.targetLinks,h)),Pe.sourceLinks.forEach(function(Re){Re.circular&&(Pe.partOfCycle=!0,Pe.circularLinkType=Re.circularLinkType)}),Pe.targetLinks.forEach(function(Re){Re.circular&&(Pe.partOfCycle=!0,Pe.circularLinkType=Re.circularLinkType)})})}function Ie(Fe){var Pe,Re,qe;for(Pe=Fe.nodes,Re=[],qe=0;Pe.length;++qe,Pe=Re,Re=[])Pe.forEach(function(Qe){Qe.depth=qe,Qe.sourceLinks.forEach(function(ct){Re.indexOf(ct.target)<0&&!ct.circular&&Re.push(ct.target)})});for(Pe=Fe.nodes,Re=[],qe=0;Pe.length;++qe,Pe=Re,Re=[])Pe.forEach(function(Qe){Qe.height=qe,Qe.targetLinks.forEach(function(ct){Re.indexOf(ct.source)<0&&!ct.circular&&Re.push(ct.source)})});Fe.nodes.forEach(function(Qe){Qe.column=Math.floor(pe.call(null,Qe,qe))})}function Oe(Fe,Pe,Re){var qe=k.nest().key(function(_t){return _t.column}).sortKeys(g.ascending).entries(Fe.nodes).map(function(_t){return _t.values});(function(_t){if(ae){var nt=1/0;qe.forEach(function(Zt){var $t=ue*ae/(Zt.length+1);nt=$t<nt?$t:nt}),te=nt}var Ke=g.min(qe,function(Zt){return(ue-se-(Zt.length-1)*te)/g.sum(Zt,h)});Ke*=.3,Fe.links.forEach(function(Zt){Zt.width=Zt.value*Ke});var Zt,$t,Xt,cr,Ft,Be,xt=($t=0,Xt=0,cr=0,Ft=0,Be=g.max((Zt=Fe).nodes,function(He){return He.column}),Zt.links.forEach(function(He){He.circular&&("top"==He.circularLinkType?$t+=He.width:Xt+=He.width,0==He.target.column&&(Ft+=He.width),He.source.column==Be&&(cr+=He.width))}),{top:$t=$t>0?$t+25+10:$t,bottom:Xt=Xt>0?Xt+25+10:Xt,left:Ft=Ft>0?Ft+25+10:Ft,right:cr=cr>0?cr+25+10:cr}),Ht=function(Zt,$t){var Xt=g.max(Zt.nodes,function(he){return he.column}),cr=ve-le,Ft=ue-se,Be=cr/(cr+$t.right+$t.left),He=Ft/(Ft+$t.top+$t.bottom);return le=le*Be+$t.left,ve=0==$t.right?ve:ve*Be,se=se*He+$t.top,ue*=He,Zt.nodes.forEach(function(he){he.x0=le+he.column*((ve-le-ye)/Xt),he.x1=he.x0+ye}),He}(Fe,xt);Ke*=Ht,Fe.links.forEach(function(Zt){Zt.width=Zt.value*Ke}),qe.forEach(function(Zt){var $t=Zt.length;Zt.forEach(function(Xt,cr){Xt.depth==qe.length-1&&1==$t||0==Xt.depth&&1==$t?(Xt.y0=ue/2-Xt.value*Ke,Xt.y1=Xt.y0+Xt.value*Ke):Xt.partOfCycle?0==C(Xt,_t)?(Xt.y0=ue/2+cr,Xt.y1=Xt.y0+Xt.value*Ke):"top"==Xt.circularLinkType?(Xt.y0=se+cr,Xt.y1=Xt.y0+Xt.value*Ke):(Xt.y0=ue-Xt.value*Ke-cr,Xt.y1=Xt.y0+Xt.value*Ke):0==xt.top||0==xt.bottom?(Xt.y0=(ue-se)/$t*cr,Xt.y1=Xt.y0+Xt.value*Ke):(Xt.y0=(ue-se)/2-$t/2+cr,Xt.y1=Xt.y0+Xt.value*Ke)})})})(Re),Tt();for(var Qe=1,ct=Pe;ct>0;--ct)bt(Qe*=.99,Re),Tt();function bt(_t,nt){var Ke=qe.length;qe.forEach(function(xt){var Ht=xt.length,Zt=xt[0].depth;xt.forEach(function($t){var Xt;if(($t.sourceLinks.length||$t.targetLinks.length)&&!($t.partOfCycle&&C($t,nt)>0))if(0==Zt&&1==Ht)$t.y0=ue/2-(Xt=$t.y1-$t.y0)/2,$t.y1=ue/2+Xt/2;else if(Zt==Ke-1&&1==Ht)$t.y0=ue/2-(Xt=$t.y1-$t.y0)/2,$t.y1=ue/2+Xt/2;else{var cr=g.mean($t.sourceLinks,p),Ft=g.mean($t.targetLinks,o),Be=((cr&&Ft?(cr+Ft)/2:cr||Ft)-s($t))*_t;$t.y0+=Be,$t.y1+=Be}})})}function Tt(){qe.forEach(function(_t){var nt,Ke,xt,Ht=se,Zt=_t.length;for(_t.sort(t),xt=0;xt<Zt;++xt)(Ke=Ht-(nt=_t[xt]).y0)>0&&(nt.y0+=Ke,nt.y1+=Ke),Ht=nt.y1+te;if((Ke=Ht-te-ue)>0)for(Ht=nt.y0-=Ke,nt.y1-=Ke,xt=Zt-2;xt>=0;--xt)(Ke=(nt=_t[xt]).y1+te-Ht)>0&&(nt.y0-=Ke,nt.y1-=Ke),Ht=nt.y0})}}function Xe(Fe){Fe.nodes.forEach(function(Pe){Pe.sourceLinks.sort(f),Pe.targetLinks.sort(d)}),Fe.nodes.forEach(function(Pe){var Re=Pe.y0,qe=Re,Qe=Pe.y1,ct=Qe;Pe.sourceLinks.forEach(function(bt){bt.circular?(bt.y0=Qe-bt.width/2,Qe-=bt.width):(bt.y0=Re+bt.width/2,Re+=bt.width)}),Pe.targetLinks.forEach(function(bt){bt.circular?(bt.y1=ct-bt.width/2,ct-=bt.width):(bt.y1=qe+bt.width/2,qe+=bt.width)})})}return Ee.nodeId=function(Fe){return arguments.length?(Me="function"==typeof Fe?Fe:l(Fe),Ee):Me},Ee.nodeAlign=function(Fe){return arguments.length?(pe="function"==typeof Fe?Fe:l(Fe),Ee):pe},Ee.nodeWidth=function(Fe){return arguments.length?(ye=+Fe,Ee):ye},Ee.nodePadding=function(Fe){return arguments.length?(te=+Fe,Ee):te},Ee.nodes=function(Fe){return arguments.length?(ge="function"==typeof Fe?Fe:l(Fe),Ee):ge},Ee.links=function(Fe){return arguments.length?(we="function"==typeof Fe?Fe:l(Fe),Ee):we},Ee.size=function(Fe){return arguments.length?(le=se=0,ve=+Fe[0],ue=+Fe[1],Ee):[ve-le,ue-se]},Ee.extent=function(Fe){return arguments.length?(le=+Fe[0][0],ve=+Fe[1][0],se=+Fe[0][1],ue=+Fe[1][1],Ee):[[le,se],[ve,ue]]},Ee.iterations=function(Fe){return arguments.length?(oe=+Fe,Ee):oe},Ee.circularLinkGap=function(Fe){return arguments.length?(de=+Fe,Ee):de},Ee.nodePaddingRatio=function(Fe){return arguments.length?(ae=+Fe,Ee):ae},Ee.sortNodes=function(Fe){return arguments.length?(Te=Fe,Ee):Te},Ee.update=function(Fe){return w(Fe,Me),Xe(Fe),Fe.links.forEach(function(Pe){Pe.circular&&(Pe.circularLinkType=Pe.y0+Pe.y1<ue?"top":"bottom",Pe.source.circularLinkType=Pe.circularLinkType,Pe.target.circularLinkType=Pe.circularLinkType)}),B(Fe,ue,Me,!1),V(Fe,0,Me),P(Fe,de,ue,Me),Fe},Ee},m.sankeyCenter=function(te){return te.targetLinks.length?te.depth:te.sourceLinks.length?g.min(te.sourceLinks,n)-1:0},m.sankeyLeft=function(te){return te.depth},m.sankeyRight=function(te,ae){return ae-1-te.height},m.sankeyJustify=i,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof Q&&void 0!==$?g(Q,v("d3-array"),v("d3-collection"),v("d3-shape"),v("elementary-circuits-directed-graph")):g(m.d3=m.d3||{},m.d3,m.d3,m.d3,null)},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(v,$,Q){var m,g;m=this,g=function(m,g,k,x){"use strict";function e(_){return _.target.depth}function n(_,b){return _.sourceLinks.length?_.depth:b-1}function i(_){return function(){return _}}function l(_,b){return d(_.source,b.source)||_.index-b.index}function r(_,b){return d(_.target,b.target)||_.index-b.index}function d(_,b){return _.y0-b.y0}function f(_){return _.value}function t(_){return(_.y0+_.y1)/2}function h(_){return t(_.source)*_.value}function s(_){return t(_.target)*_.value}function o(_){return _.index}function p(_){return _.nodes}function c(_){return _.links}function a(_,b){var w=_.get(b);if(!w)throw new Error("missing: "+b);return w}function y(_){return[_.source.x1,_.y0]}function u(_){return[_.target.x0,_.y1]}m.sankey=function(){var _=0,b=0,w=1,T=1,C=24,M=8,I=o,P=n,S=p,E=c,R=32;function D(){var W={nodes:S.apply(null,arguments),links:E.apply(null,arguments)};return j(W),H(W),Y(W),X(W),Z(W),W}function j(W){W.nodes.forEach(function(U,B){U.index=B,U.sourceLinks=[],U.targetLinks=[]});var re=k.map(W.nodes,I);W.links.forEach(function(U,B){U.index=B;var V=U.source,ee=U.target;"object"!=typeof V&&(V=U.source=a(re,V)),"object"!=typeof ee&&(ee=U.target=a(re,ee)),V.sourceLinks.push(U),ee.targetLinks.push(U)})}function H(W){W.nodes.forEach(function(re){re.value=Math.max(g.sum(re.sourceLinks,f),g.sum(re.targetLinks,f))})}function Y(W){var re,U,B;for(re=W.nodes,U=[],B=0;re.length;++B,re=U,U=[])re.forEach(function(ee){ee.depth=B,ee.sourceLinks.forEach(function(N){U.indexOf(N.target)<0&&U.push(N.target)})});for(re=W.nodes,U=[],B=0;re.length;++B,re=U,U=[])re.forEach(function(ee){ee.height=B,ee.targetLinks.forEach(function(N){U.indexOf(N.source)<0&&U.push(N.source)})});var V=(w-_-C)/(B-1);W.nodes.forEach(function(ee){ee.x1=(ee.x0=_+Math.max(0,Math.min(B-1,Math.floor(P.call(null,ee,B))))*V)+C})}function X(W){var re=k.nest().key(function(K){return K.x0}).sortKeys(g.ascending).entries(W.nodes).map(function(K){return K.values});(function(){var K=g.max(re,function(ae){return ae.length}),J=2/3*(T-b)/(K-1);M>J&&(M=J);var te=g.min(re,function(ae){return(T-b-(ae.length-1)*M)/g.sum(ae,f)});re.forEach(function(ae){ae.forEach(function(le,se){le.y1=(le.y0=se)+le.value*te})}),W.links.forEach(function(ae){ae.width=ae.value*te})})(),N();for(var U=1,B=R;B>0;--B)ee(U*=.99),N(),V(U),N();function V(K){re.forEach(function(J){J.forEach(function(te){if(te.targetLinks.length){var ae=(g.sum(te.targetLinks,h)/g.sum(te.targetLinks,f)-t(te))*K;te.y0+=ae,te.y1+=ae}})})}function ee(K){re.slice().reverse().forEach(function(J){J.forEach(function(te){if(te.sourceLinks.length){var ae=(g.sum(te.sourceLinks,s)/g.sum(te.sourceLinks,f)-t(te))*K;te.y0+=ae,te.y1+=ae}})})}function N(){re.forEach(function(K){var J,te,ae,le=b,se=K.length;for(K.sort(d),ae=0;ae<se;++ae)(te=le-(J=K[ae]).y0)>0&&(J.y0+=te,J.y1+=te),le=J.y1+M;if((te=le-M-T)>0)for(le=J.y0-=te,J.y1-=te,ae=se-2;ae>=0;--ae)(te=(J=K[ae]).y1+M-le)>0&&(J.y0-=te,J.y1-=te),le=J.y0})}}function Z(W){W.nodes.forEach(function(re){re.sourceLinks.sort(r),re.targetLinks.sort(l)}),W.nodes.forEach(function(re){var U=re.y0,B=U;re.sourceLinks.forEach(function(V){V.y0=U+V.width/2,U+=V.width}),re.targetLinks.forEach(function(V){V.y1=B+V.width/2,B+=V.width})})}return D.update=function(W){return Z(W),W},D.nodeId=function(W){return arguments.length?(I="function"==typeof W?W:i(W),D):I},D.nodeAlign=function(W){return arguments.length?(P="function"==typeof W?W:i(W),D):P},D.nodeWidth=function(W){return arguments.length?(C=+W,D):C},D.nodePadding=function(W){return arguments.length?(M=+W,D):M},D.nodes=function(W){return arguments.length?(S="function"==typeof W?W:i(W),D):S},D.links=function(W){return arguments.length?(E="function"==typeof W?W:i(W),D):E},D.size=function(W){return arguments.length?(_=b=0,w=+W[0],T=+W[1],D):[w-_,T-b]},D.extent=function(W){return arguments.length?(_=+W[0][0],w=+W[1][0],b=+W[0][1],T=+W[1][1],D):[[_,b],[w,T]]},D.iterations=function(W){return arguments.length?(R=+W,D):R},D},m.sankeyCenter=function(_){return _.targetLinks.length?_.depth:_.sourceLinks.length?g.min(_.sourceLinks,e)-1:0},m.sankeyLeft=function(_){return _.depth},m.sankeyRight=function(_,b){return b-1-_.height},m.sankeyJustify=n,m.sankeyLinkHorizontal=function(){return x.linkHorizontal().source(y).target(u)},Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof Q&&void 0!==$?g(Q,v("d3-array"),v("d3-collection"),v("d3-shape")):g(m.d3=m.d3||{},m.d3,m.d3,m.d3)},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(v,$,Q){(function(){var m={version:"3.8.0"},g=[].slice,k=function(ce){return g.call(ce)},x=self.document;function e(ce){return ce&&(ce.ownerDocument||ce.document||ce).documentElement}function n(ce){return ce&&(ce.ownerDocument&&ce.ownerDocument.defaultView||ce.document&&ce||ce.defaultView)}if(x)try{k(x.documentElement.childNodes)}catch{k=function(L){for(var z=L.length,F=new Array(z);z--;)F[z]=L[z];return F}}if(Date.now||(Date.now=function(){return+new Date}),x)try{x.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,l=i.setAttribute,r=i.setAttributeNS,d=this.CSSStyleDeclaration.prototype,f=d.setProperty;i.setAttribute=function(L,z){l.call(this,L,z+"")},i.setAttributeNS=function(L,z,F){r.call(this,L,z,F+"")},d.setProperty=function(L,z,F){f.call(this,L,z+"",F)}}function t(ce,L){return ce<L?-1:ce>L?1:ce>=L?0:NaN}function h(ce){return null===ce?NaN:+ce}function s(ce){return!isNaN(ce)}function o(ce){return{left:function(L,z,F,G){for(arguments.length<3&&(F=0),arguments.length<4&&(G=L.length);F<G;){var ie=F+G>>>1;ce(L[ie],z)<0?F=ie+1:G=ie}return F},right:function(L,z,F,G){for(arguments.length<3&&(F=0),arguments.length<4&&(G=L.length);F<G;){var ie=F+G>>>1;ce(L[ie],z)>0?G=ie:F=ie+1}return F}}}m.ascending=t,m.descending=function(ce,L){return L<ce?-1:L>ce?1:L>=ce?0:NaN},m.min=function(ce,L){var z,F,G=-1,ie=ce.length;if(1===arguments.length){for(;++G<ie;)if(null!=(F=ce[G])&&F>=F){z=F;break}for(;++G<ie;)null!=(F=ce[G])&&z>F&&(z=F)}else{for(;++G<ie;)if(null!=(F=L.call(ce,ce[G],G))&&F>=F){z=F;break}for(;++G<ie;)null!=(F=L.call(ce,ce[G],G))&&z>F&&(z=F)}return z},m.max=function(ce,L){var z,F,G=-1,ie=ce.length;if(1===arguments.length){for(;++G<ie;)if(null!=(F=ce[G])&&F>=F){z=F;break}for(;++G<ie;)null!=(F=ce[G])&&F>z&&(z=F)}else{for(;++G<ie;)if(null!=(F=L.call(ce,ce[G],G))&&F>=F){z=F;break}for(;++G<ie;)null!=(F=L.call(ce,ce[G],G))&&F>z&&(z=F)}return z},m.extent=function(ce,L){var z,F,G,ie=-1,fe=ce.length;if(1===arguments.length){for(;++ie<fe;)if(null!=(F=ce[ie])&&F>=F){z=G=F;break}for(;++ie<fe;)null!=(F=ce[ie])&&(z>F&&(z=F),G<F&&(G=F))}else{for(;++ie<fe;)if(null!=(F=L.call(ce,ce[ie],ie))&&F>=F){z=G=F;break}for(;++ie<fe;)null!=(F=L.call(ce,ce[ie],ie))&&(z>F&&(z=F),G<F&&(G=F))}return[z,G]},m.sum=function(ce,L){var z,F=0,G=ce.length,ie=-1;if(1===arguments.length)for(;++ie<G;)s(z=+ce[ie])&&(F+=z);else for(;++ie<G;)s(z=+L.call(ce,ce[ie],ie))&&(F+=z);return F},m.mean=function(ce,L){var z,F=0,G=ce.length,ie=-1,fe=G;if(1===arguments.length)for(;++ie<G;)s(z=h(ce[ie]))?F+=z:--fe;else for(;++ie<G;)s(z=h(L.call(ce,ce[ie],ie)))?F+=z:--fe;if(fe)return F/fe},m.quantile=function(ce,L){var z=(ce.length-1)*L+1,F=Math.floor(z),G=+ce[F-1],ie=z-F;return ie?G+ie*(ce[F]-G):G},m.median=function(ce,L){var z,F=[],G=ce.length,ie=-1;if(1===arguments.length)for(;++ie<G;)s(z=h(ce[ie]))&&F.push(z);else for(;++ie<G;)s(z=h(L.call(ce,ce[ie],ie)))&&F.push(z);if(F.length)return m.quantile(F.sort(t),.5)},m.variance=function(ce,L){var z,F,G=ce.length,ie=0,fe=0,xe=-1,ke=0;if(1===arguments.length)for(;++xe<G;)s(z=h(ce[xe]))&&(fe+=(F=z-ie)*(z-(ie+=F/++ke)));else for(;++xe<G;)s(z=h(L.call(ce,ce[xe],xe)))&&(fe+=(F=z-ie)*(z-(ie+=F/++ke)));if(ke>1)return fe/(ke-1)},m.deviation=function(){var ce=m.variance.apply(this,arguments);return ce&&Math.sqrt(ce)};var p=o(t);function c(ce){return ce.length}m.bisectLeft=p.left,m.bisect=m.bisectRight=p.right,m.bisector=function(ce){return o(1===ce.length?function(L,z){return t(ce(L),z)}:ce)},m.shuffle=function(ce,L,z){(ie=arguments.length)<3&&(z=ce.length,ie<2&&(L=0));for(var F,G,ie=z-L;ie;)G=Math.random()*ie--|0,F=ce[ie+L],ce[ie+L]=ce[G+L],ce[G+L]=F;return ce},m.permute=function(ce,L){for(var z=L.length,F=new Array(z);z--;)F[z]=ce[L[z]];return F},m.pairs=function(ce){for(var L=0,z=ce.length-1,F=ce[0],G=new Array(z<0?0:z);L<z;)G[L]=[F,F=ce[++L]];return G},m.transpose=function(ce){if(!(G=ce.length))return[];for(var L=-1,z=m.min(ce,c),F=new Array(z);++L<z;)for(var G,ie=-1,fe=F[L]=new Array(G);++ie<G;)fe[ie]=ce[ie][L];return F},m.zip=function(){return m.transpose(arguments)},m.keys=function(ce){var L=[];for(var z in ce)L.push(z);return L},m.values=function(ce){var L=[];for(var z in ce)L.push(ce[z]);return L},m.entries=function(ce){var L=[];for(var z in ce)L.push({key:z,value:ce[z]});return L},m.merge=function(ce){for(var L,z,F,G=ce.length,ie=-1,fe=0;++ie<G;)fe+=ce[ie].length;for(z=new Array(fe);--G>=0;)for(L=(F=ce[G]).length;--L>=0;)z[--fe]=F[L];return z};var a=Math.abs;function y(ce){for(var L=1;ce*L%1;)L*=10;return L}function u(ce,L){for(var z in L)Object.defineProperty(ce.prototype,z,{value:L[z],enumerable:!1})}function _(){this._=Object.create(null)}function b(ce){return"__proto__"==(ce+="")||"\0"===ce[0]?"\0"+ce:ce}function w(ce){return"\0"===(ce+="")[0]?ce.slice(1):ce}function T(ce){return b(ce)in this._}function C(ce){return(ce=b(ce))in this._&&delete this._[ce]}function M(){var ce=[];for(var L in this._)ce.push(w(L));return ce}function I(){var ce=0;for(var L in this._)++ce;return ce}function P(){for(var ce in this._)return!1;return!0}function S(){this._=Object.create(null)}function E(ce){return ce}function R(ce,L,z){return function(){var F=z.apply(L,arguments);return F===L?ce:F}}function D(ce,L){if(L in ce)return L;L=L.charAt(0).toUpperCase()+L.slice(1);for(var z=0,F=j.length;z<F;++z){var G=j[z]+L;if(G in ce)return G}}m.range=function(ce,L,z){if(arguments.length<3&&(z=1,arguments.length<2&&(L=ce,ce=0)),(L-ce)/z==1/0)throw new Error("infinite range");var F,G=[],ie=y(a(z)),fe=-1;if(ce*=ie,L*=ie,(z*=ie)<0)for(;(F=ce+z*++fe)>L;)G.push(F/ie);else for(;(F=ce+z*++fe)<L;)G.push(F/ie);return G},m.map=function(ce,L){var z=new _;if(ce instanceof _)ce.forEach(function(xe,ke){z.set(xe,ke)});else if(Array.isArray(ce)){var F,G=-1,ie=ce.length;if(1===arguments.length)for(;++G<ie;)z.set(G,ce[G]);else for(;++G<ie;)z.set(L.call(ce,F=ce[G],G),F)}else for(var fe in ce)z.set(fe,ce[fe]);return z},u(_,{has:T,get:function(ce){return this._[b(ce)]},set:function(ce,L){return this._[b(ce)]=L},remove:C,keys:M,values:function(){var ce=[];for(var L in this._)ce.push(this._[L]);return ce},entries:function(){var ce=[];for(var L in this._)ce.push({key:w(L),value:this._[L]});return ce},size:I,empty:P,forEach:function(ce){for(var L in this._)ce.call(this,w(L),this._[L])}}),m.nest=function(){var ce,L,z={},F=[],G=[];function ie(fe,xe,ke){if(ke>=F.length)return L?L.call(z,xe):ce?xe.sort(ce):xe;for(var Ce,Ue,$e,at,kt=-1,Pt=xe.length,St=F[ke++],Et=new _;++kt<Pt;)(at=Et.get(Ce=St(Ue=xe[kt])))?at.push(Ue):Et.set(Ce,[Ue]);return fe?(Ue=fe(),$e=function(wt,jt){Ue.set(wt,ie(fe,jt,ke))}):(Ue={},$e=function(wt,jt){Ue[wt]=ie(fe,jt,ke)}),Et.forEach($e),Ue}return z.map=function(fe,xe){return ie(xe,fe,0)},z.entries=function(fe){return function xe(ke,Ce){if(Ce>=F.length)return ke;var Ue=[],$e=G[Ce++];return ke.forEach(function(at,kt){Ue.push({key:at,values:xe(kt,Ce)})}),$e?Ue.sort(function(at,kt){return $e(at.key,kt.key)}):Ue}(ie(m.map,fe,0),0)},z.key=function(fe){return F.push(fe),z},z.sortKeys=function(fe){return G[F.length-1]=fe,z},z.sortValues=function(fe){return ce=fe,z},z.rollup=function(fe){return L=fe,z},z},m.set=function(ce){var L=new S;if(ce)for(var z=0,F=ce.length;z<F;++z)L.add(ce[z]);return L},u(S,{has:T,add:function(ce){return this._[b(ce+="")]=!0,ce},remove:C,values:M,size:I,empty:P,forEach:function(ce){for(var L in this._)ce.call(this,w(L))}}),m.behavior={},m.rebind=function(ce,L){for(var z,F=1,G=arguments.length;++F<G;)ce[z=arguments[F]]=R(ce,L,L[z]);return ce};var j=["webkit","ms","moz","Moz","o","O"];function H(){}function Y(){}function X(ce){var L=[],z=new _;function F(){for(var G,ie=L,fe=-1,xe=ie.length;++fe<xe;)(G=ie[fe].on)&&G.apply(this,arguments);return ce}return F.on=function(G,ie){var fe,xe=z.get(G);return arguments.length<2?xe&&xe.on:(xe&&(xe.on=null,L=L.slice(0,fe=L.indexOf(xe)).concat(L.slice(fe+1)),z.remove(G)),ie&&L.push(z.set(G,{on:ie})),ce)},F}function Z(){m.event.preventDefault()}function W(){for(var ce,L=m.event;ce=L.sourceEvent;)L=ce;return L}function re(ce){for(var L=new Y,z=0,F=arguments.length;++z<F;)L[arguments[z]]=X(L);return L.of=function(G,ie){return function(fe){try{var xe=fe.sourceEvent=m.event;fe.target=ce,m.event=fe,L[fe.type].apply(G,ie)}finally{m.event=xe}}},L}m.dispatch=function(){for(var ce=new Y,L=-1,z=arguments.length;++L<z;)ce[arguments[L]]=X(ce);return ce},Y.prototype.on=function(ce,L){var z=ce.indexOf("."),F="";if(z>=0&&(F=ce.slice(z+1),ce=ce.slice(0,z)),ce)return arguments.length<2?this[ce].on(F):this[ce].on(F,L);if(2===arguments.length){if(null==L)for(ce in this)this.hasOwnProperty(ce)&&this[ce].on(F,null);return this}},m.event=null,m.requote=function(ce){return ce.replace(U,"\\$&")};var U=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,B={}.__proto__?function(ce,L){ce.__proto__=L}:function(ce,L){for(var z in L)ce[z]=L[z]};function V(ce){return B(ce,J),ce}var ee=function(ce,L){return L.querySelector(ce)},N=function(ce,L){return L.querySelectorAll(ce)},K=function(ce,L){var z=ce.matches||ce[D(ce,"matchesSelector")];return(K=function(F,G){return z.call(F,G)})(ce,L)};"function"==typeof Sizzle&&(ee=function(ce,L){return Sizzle(ce,L)[0]||null},N=Sizzle,K=Sizzle.matchesSelector),m.selection=function(){return m.select(x.documentElement)};var J=m.selection.prototype=[];function te(ce){return"function"==typeof ce?ce:function(){return ee(ce,this)}}function ae(ce){return"function"==typeof ce?ce:function(){return N(ce,this)}}J.select=function(ce){var L,z,F,G,ie=[];ce=te(ce);for(var fe=-1,xe=this.length;++fe<xe;){ie.push(L=[]),L.parentNode=(F=this[fe]).parentNode;for(var ke=-1,Ce=F.length;++ke<Ce;)(G=F[ke])?(L.push(z=ce.call(G,G.__data__,ke,fe)),z&&"__data__"in G&&(z.__data__=G.__data__)):L.push(null)}return V(ie)},J.selectAll=function(ce){var L,z,F=[];ce=ae(ce);for(var G=-1,ie=this.length;++G<ie;)for(var fe=this[G],xe=-1,ke=fe.length;++xe<ke;)(z=fe[xe])&&(F.push(L=k(ce.call(z,z.__data__,xe,G))),L.parentNode=z);return V(F)};var le="http://www.w3.org/1999/xhtml",se={svg:"http://www.w3.org/2000/svg",xhtml:le,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ve(ce,L){return ce=m.ns.qualify(ce),null==L?ce.local?function(){this.removeAttributeNS(ce.space,ce.local)}:function(){this.removeAttribute(ce)}:"function"==typeof L?ce.local?function(){var z=L.apply(this,arguments);null==z?this.removeAttributeNS(ce.space,ce.local):this.setAttributeNS(ce.space,ce.local,z)}:function(){var z=L.apply(this,arguments);null==z?this.removeAttribute(ce):this.setAttribute(ce,z)}:ce.local?function(){this.setAttributeNS(ce.space,ce.local,L)}:function(){this.setAttribute(ce,L)}}function ue(ce){return ce.trim().replace(/\s+/g," ")}function ye(ce){return new RegExp("(?:^|\\s+)"+m.requote(ce)+"(?:\\s+|$)","g")}function Me(ce){return(ce+"").trim().split(/^|\s+/)}function pe(ce,L){var z=(ce=Me(ce).map(ge)).length;return"function"==typeof L?function(){for(var F=-1,G=L.apply(this,arguments);++F<z;)ce[F](this,G)}:function(){for(var F=-1;++F<z;)ce[F](this,L)}}function ge(ce){var L=ye(ce);return function(z,F){if(G=z.classList)return F?G.add(ce):G.remove(ce);var G=z.getAttribute("class")||"";F?(L.lastIndex=0,L.test(G)||z.setAttribute("class",ue(G+" "+ce))):z.setAttribute("class",ue(G.replace(L," ")))}}function we(ce,L,z){return null==L?function(){this.style.removeProperty(ce)}:"function"==typeof L?function(){var F=L.apply(this,arguments);null==F?this.style.removeProperty(ce):this.style.setProperty(ce,F,z)}:function(){this.style.setProperty(ce,L,z)}}function oe(ce,L){return null==L?function(){delete this[ce]}:"function"==typeof L?function(){var z=L.apply(this,arguments);null==z?delete this[ce]:this[ce]=z}:function(){this[ce]=L}}function de(ce){return"function"==typeof ce?ce:(ce=m.ns.qualify(ce)).local?function(){return this.ownerDocument.createElementNS(ce.space,ce.local)}:function(){var L=this.ownerDocument,z=this.namespaceURI;return z===le&&L.documentElement.namespaceURI===le?L.createElement(ce):L.createElementNS(z,ce)}}function Te(){var ce=this.parentNode;ce&&ce.removeChild(this)}function Ee(ce){return{__data__:ce}}function Ae(ce){return function(){return K(this,ce)}}function De(ce){return arguments.length||(ce=t),function(L,z){return L&&z?ce(L.__data__,z.__data__):!L-!z}}function Ie(ce,L){for(var z=0,F=ce.length;z<F;z++)for(var G,ie=ce[z],fe=0,xe=ie.length;fe<xe;fe++)(G=ie[fe])&&L(G,fe,z);return ce}function Oe(ce){return B(ce,Xe),ce}m.ns={prefix:se,qualify:function(ce){var L=ce.indexOf(":"),z=ce;return L>=0&&"xmlns"!==(z=ce.slice(0,L))&&(ce=ce.slice(L+1)),se.hasOwnProperty(z)?{space:se[z],local:ce}:ce}},J.attr=function(ce,L){if(arguments.length<2){if("string"==typeof ce){var z=this.node();return(ce=m.ns.qualify(ce)).local?z.getAttributeNS(ce.space,ce.local):z.getAttribute(ce)}for(L in ce)this.each(ve(L,ce[L]));return this}return this.each(ve(ce,L))},J.classed=function(ce,L){if(arguments.length<2){if("string"==typeof ce){var z=this.node(),F=(ce=Me(ce)).length,G=-1;if(L=z.classList){for(;++G<F;)if(!L.contains(ce[G]))return!1}else for(L=z.getAttribute("class");++G<F;)if(!ye(ce[G]).test(L))return!1;return!0}for(L in ce)this.each(pe(L,ce[L]));return this}return this.each(pe(ce,L))},J.style=function(ce,L,z){var F=arguments.length;if(F<3){if("string"!=typeof ce){for(z in F<2&&(L=""),ce)this.each(we(z,ce[z],L));return this}if(F<2){var G=this.node();return n(G).getComputedStyle(G,null).getPropertyValue(ce)}z=""}return this.each(we(ce,L,z))},J.property=function(ce,L){if(arguments.length<2){if("string"==typeof ce)return this.node()[ce];for(L in ce)this.each(oe(L,ce[L]));return this}return this.each(oe(ce,L))},J.text=function(ce){return arguments.length?this.each("function"==typeof ce?function(){var L=ce.apply(this,arguments);this.textContent=L??""}:null==ce?function(){this.textContent=""}:function(){this.textContent=ce}):this.node().textContent},J.html=function(ce){return arguments.length?this.each("function"==typeof ce?function(){var L=ce.apply(this,arguments);this.innerHTML=L??""}:null==ce?function(){this.innerHTML=""}:function(){this.innerHTML=ce}):this.node().innerHTML},J.append=function(ce){return ce=de(ce),this.select(function(){return this.appendChild(ce.apply(this,arguments))})},J.insert=function(ce,L){return ce=de(ce),L=te(L),this.select(function(){return this.insertBefore(ce.apply(this,arguments),L.apply(this,arguments)||null)})},J.remove=function(){return this.each(Te)},J.data=function(ce,L){var z,F,G=-1,ie=this.length;if(!arguments.length){for(ce=new Array(ie=(z=this[0]).length);++G<ie;)(F=z[G])&&(ce[G]=F.__data__);return ce}function fe(Ue,$e){var at,kt,Pt,St=Ue.length,Et=$e.length,wt=Math.min(St,Et),jt=new Array(Et),Nt=new Array(Et),Gt=new Array(St);if(L){var lr,yr=new _,Or=new Array(St);for(at=-1;++at<St;)(kt=Ue[at])&&(yr.has(lr=L.call(kt,kt.__data__,at))?Gt[at]=kt:yr.set(lr,kt),Or[at]=lr);for(at=-1;++at<Et;)(kt=yr.get(lr=L.call($e,Pt=$e[at],at)))?!0!==kt&&(jt[at]=kt,kt.__data__=Pt):Nt[at]=Ee(Pt),yr.set(lr,!0);for(at=-1;++at<St;)at in Or&&!0!==yr.get(Or[at])&&(Gt[at]=Ue[at])}else{for(at=-1;++at<wt;)Pt=$e[at],(kt=Ue[at])?(kt.__data__=Pt,jt[at]=kt):Nt[at]=Ee(Pt);for(;at<Et;++at)Nt[at]=Ee($e[at]);for(;at<St;++at)Gt[at]=Ue[at]}Nt.update=jt,Nt.parentNode=jt.parentNode=Gt.parentNode=Ue.parentNode,xe.push(Nt),ke.push(jt),Ce.push(Gt)}var xe=Oe([]),ke=V([]),Ce=V([]);if("function"==typeof ce)for(;++G<ie;)fe(z=this[G],ce.call(z,z.parentNode.__data__,G));else for(;++G<ie;)fe(z=this[G],ce);return ke.enter=function(){return xe},ke.exit=function(){return Ce},ke},J.datum=function(ce){return arguments.length?this.property("__data__",ce):this.property("__data__")},J.filter=function(ce){var L,z,F,G=[];"function"!=typeof ce&&(ce=Ae(ce));for(var ie=0,fe=this.length;ie<fe;ie++){G.push(L=[]),L.parentNode=(z=this[ie]).parentNode;for(var xe=0,ke=z.length;xe<ke;xe++)(F=z[xe])&&ce.call(F,F.__data__,xe,ie)&&L.push(F)}return V(G)},J.order=function(){for(var ce=-1,L=this.length;++ce<L;)for(var z,F=this[ce],G=F.length-1,ie=F[G];--G>=0;)(z=F[G])&&(ie&&ie!==z.nextSibling&&ie.parentNode.insertBefore(z,ie),ie=z);return this},J.sort=function(ce){ce=De.apply(this,arguments);for(var L=-1,z=this.length;++L<z;)this[L].sort(ce);return this.order()},J.each=function(ce){return Ie(this,function(L,z,F){ce.call(L,L.__data__,z,F)})},J.call=function(ce){var L=k(arguments);return ce.apply(L[0]=this,L),this},J.empty=function(){return!this.node()},J.node=function(){for(var ce=0,L=this.length;ce<L;ce++)for(var z=this[ce],F=0,G=z.length;F<G;F++){var ie=z[F];if(ie)return ie}return null},J.size=function(){var ce=0;return Ie(this,function(){++ce}),ce};var Xe=[];function Fe(ce){var L,z;return function(F,G,ie){var fe,xe=ce[ie].update,ke=xe.length;for(ie!=z&&(z=ie,L=0),G>=L&&(L=G+1);!(fe=xe[L])&&++L<ke;);return fe}}function Pe(ce,L,z){var F="__on"+ce,G=ce.indexOf("."),ie=qe;G>0&&(ce=ce.slice(0,G));var fe=Re.get(ce);function xe(){var ke=this[F];ke&&(this.removeEventListener(ce,ke,ke.$),delete this[F])}return fe&&(ce=fe,ie=Qe),G?L?function(){var ke=ie(L,k(arguments));xe.call(this),this.addEventListener(ce,this[F]=ke,ke.$=z),ke._=L}:xe:L?H:function(){var ke,Ce=new RegExp("^__on([^.]+)"+m.requote(ce)+"$");for(var Ue in this)if(ke=Ue.match(Ce)){var $e=this[Ue];this.removeEventListener(ke[1],$e,$e.$),delete this[Ue]}}}m.selection.enter=Oe,m.selection.enter.prototype=Xe,Xe.append=J.append,Xe.empty=J.empty,Xe.node=J.node,Xe.call=J.call,Xe.size=J.size,Xe.select=function(ce){for(var L,z,F,G,ie,fe=[],xe=-1,ke=this.length;++xe<ke;){F=(G=this[xe]).update,fe.push(L=[]),L.parentNode=G.parentNode;for(var Ce=-1,Ue=G.length;++Ce<Ue;)(ie=G[Ce])?(L.push(F[Ce]=z=ce.call(G.parentNode,ie.__data__,Ce,xe)),z.__data__=ie.__data__):L.push(null)}return V(fe)},Xe.insert=function(ce,L){return arguments.length<2&&(L=Fe(this)),J.insert.call(this,ce,L)},m.select=function(ce){var L;return"string"==typeof ce?(L=[ee(ce,x)]).parentNode=x.documentElement:(L=[ce]).parentNode=e(ce),V([L])},m.selectAll=function(ce){var L;return"string"==typeof ce?(L=k(N(ce,x))).parentNode=x.documentElement:(L=k(ce)).parentNode=null,V([L])},J.on=function(ce,L,z){var F=arguments.length;if(F<3){if("string"!=typeof ce){for(z in F<2&&(L=!1),ce)this.each(Pe(z,ce[z],L));return this}if(F<2)return(F=this.node()["__on"+ce])&&F._;z=!1}return this.each(Pe(ce,L,z))};var Re=m.map({mouseenter:"mouseover",mouseleave:"mouseout"});function qe(ce,L){return function(z){var F=m.event;m.event=z,L[0]=this.__data__;try{ce.apply(this,L)}finally{m.event=F}}}function Qe(ce,L){var z=qe(ce,L);return function(F){var G=F.relatedTarget;G&&(G===this||8&G.compareDocumentPosition(this))||z.call(this,F)}}x&&Re.forEach(function(ce){"on"+ce in x&&Re.remove(ce)});var ct,bt=0;function Tt(ce){var L=".dragsuppress-"+ ++bt,z="click"+L,F=m.select(n(ce)).on("touchmove"+L,Z).on("dragstart"+L,Z).on("selectstart"+L,Z);if(null==ct&&(ct=!("onselectstart"in ce)&&D(ce.style,"userSelect")),ct){var G=e(ce).style,ie=G[ct];G[ct]="none"}return function(fe){if(F.on(L,null),ct&&(G[ct]=ie),fe){var xe=function(){F.on(z,null)};F.on(z,function(){Z(),xe()},!0),setTimeout(xe,0)}}}m.mouse=function(ce){return nt(ce,W())};var _t=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function nt(ce,L){L.changedTouches&&(L=L.changedTouches[0]);var z=ce.ownerSVGElement||ce;if(z.createSVGPoint){var F=z.createSVGPoint();if(_t<0){var G=n(ce);if(G.scrollX||G.scrollY){var ie=(z=m.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();_t=!(ie.f||ie.e),z.remove()}}return _t?(F.x=L.pageX,F.y=L.pageY):(F.x=L.clientX,F.y=L.clientY),[(F=F.matrixTransform(ce.getScreenCTM().inverse())).x,F.y]}var fe=ce.getBoundingClientRect();return[L.clientX-fe.left-ce.clientLeft,L.clientY-fe.top-ce.clientTop]}function Ke(){return m.event.changedTouches[0].identifier}m.touch=function(ce,L,z){if(arguments.length<3&&(z=L,L=W().changedTouches),L)for(var F,G=0,ie=L.length;G<ie;++G)if((F=L[G]).identifier===z)return nt(ce,F)},m.behavior.drag=function(){var ce=re(G,"drag","dragstart","dragend"),L=null,z=ie(H,m.mouse,n,"mousemove","mouseup"),F=ie(Ke,m.touch,E,"touchmove","touchend");function G(){this.on("mousedown.drag",z).on("touchstart.drag",F)}function ie(fe,xe,ke,Ce,Ue){return function(){var $e,at=this,kt=m.event.target.correspondingElement||m.event.target,Pt=at.parentNode,St=ce.of(at,arguments),Et=0,wt=fe(),jt=".drag"+(null==wt?"":"-"+wt),Nt=m.select(ke(kt)).on(Ce+jt,yr).on(Ue+jt,Or),Gt=Tt(kt),lr=xe(Pt,wt);function yr(){var Cr,tn,en=xe(Pt,wt);en&&(Et|=(Cr=en[0]-lr[0])|(tn=en[1]-lr[1]),lr=en,St({type:"drag",x:en[0]+$e[0],y:en[1]+$e[1],dx:Cr,dy:tn}))}function Or(){xe(Pt,wt)&&(Nt.on(Ce+jt,null).on(Ue+jt,null),Gt(Et),St({type:"dragend"}))}$e=L?[($e=L.apply(at,arguments)).x-lr[0],$e.y-lr[1]]:[0,0],St({type:"dragstart"})}}return G.origin=function(fe){return arguments.length?(L=fe,G):L},m.rebind(G,ce,"on")},m.touches=function(ce,L){return arguments.length<2&&(L=W().touches),L?k(L).map(function(z){var F=nt(ce,z);return F.identifier=z.identifier,F}):[]};var xt=1e-6,Ht=Math.PI,Zt=2*Ht,$t=Zt-xt,Xt=Ht/2,cr=Ht/180,Ft=180/Ht;function Be(ce){return ce>1?Xt:ce<-1?-Xt:Math.asin(ce)}function He(ce){return((ce=Math.exp(ce))+1/ce)/2}var he=Math.SQRT2;m.interpolateZoom=function(ce,L){var z,F,G=ce[0],ie=ce[1],fe=ce[2],Ce=L[2],Ue=L[0]-G,$e=L[1]-ie,at=Ue*Ue+$e*$e;if(at<1e-12)F=Math.log(Ce/fe)/he,z=function(jt){return[G+jt*Ue,ie+jt*$e,fe*Math.exp(he*jt*F)]};else{var kt=Math.sqrt(at),Pt=(Ce*Ce-fe*fe+4*at)/(2*fe*2*kt),St=(Ce*Ce-fe*fe-4*at)/(2*Ce*2*kt),Et=Math.log(Math.sqrt(Pt*Pt+1)-Pt),wt=Math.log(Math.sqrt(St*St+1)-St);F=(wt-Et)/he,z=function(jt){var Nt,Or,Gt=jt*F,lr=He(Et),yr=fe/(2*kt)*(lr*(Nt=he*Gt+Et,((Nt=Math.exp(2*Nt))-1)/(Nt+1))-(Or=Et,((Or=Math.exp(Or))-1/Or)/2));return[G+yr*Ue,ie+yr*$e,fe*lr/He(he*Gt+Et)]}}return z.duration=1e3*F,z},m.behavior.zoom=function(){var ce,L,z,F,G,ie,fe,xe,ke,Ce={x:0,y:0,k:1},Ue=[960,500],$e=Ve,at=250,kt=0,Pt="mousedown.zoom",St="mousemove.zoom",Et="mouseup.zoom",wt="touchstart.zoom",jt=re(Nt,"zoomstart","zoom","zoomend");function Nt(Jr){Jr.on(Pt,pn).on(ze+".zoom",ti).on("dblclick.zoom",gi).on(wt,Yn)}function Gt(Jr){return[(Jr[0]-Ce.x)/Ce.k,(Jr[1]-Ce.y)/Ce.k]}function lr(Jr){Ce.k=Math.max($e[0],Math.min($e[1],Jr))}function yr(Jr,In){var ri;Ce.x+=Jr[0]-(In=[(ri=In)[0]*Ce.k+Ce.x,ri[1]*Ce.k+Ce.y])[0],Ce.y+=Jr[1]-In[1]}function Or(Jr,In,ri,Jn){Jr.__chart__={x:Ce.x,y:Ce.y,k:Ce.k},lr(Math.pow(2,Jn)),yr(L=In,ri),Jr=m.select(Jr),at>0&&(Jr=Jr.transition().duration(at)),Jr.call(Nt.event)}function Cr(){fe&&fe.domain(ie.range().map(function(Jr){return(Jr-Ce.x)/Ce.k}).map(ie.invert)),ke&&ke.domain(xe.range().map(function(Jr){return(Jr-Ce.y)/Ce.k}).map(xe.invert))}function tn(Jr){kt++||Jr({type:"zoomstart"})}function en(Jr){Cr(),Jr({type:"zoom",scale:Ce.k,translate:[Ce.x,Ce.y]})}function yn(Jr){--kt||(Jr({type:"zoomend"}),L=null)}function pn(){var Jr=this,In=jt.of(Jr,arguments),ri=0,Jn=m.select(n(Jr)).on(St,Oi).on(Et,ai),ui=Gt(m.mouse(Jr)),yi=Tt(Jr);function Oi(){ri=1,yr(m.mouse(Jr),ui),en(In)}function ai(){Jn.on(St,null).on(Et,null),yi(ri),yn(In)}_s.call(Jr),tn(In)}function Yn(){var Jr,In=this,ri=jt.of(In,arguments),Jn={},ui=0,yi=".zoom-"+m.event.changedTouches[0].identifier,Oi="touchmove"+yi,ai="touchend"+yi,Mi=[],wi=m.select(In),Ri=Tt(In);function Si(){var Fa=m.touches(In);return Jr=Ce.k,Fa.forEach(function(Ba){Ba.identifier in Jn&&(Jn[Ba.identifier]=Gt(Ba))}),Fa}function Fi(){var Fa=m.event.target;m.select(Fa).on(Oi,Xi).on(ai,ya),Mi.push(Fa);for(var Ba=m.event.changedTouches,va=0,La=Ba.length;va<La;++va)Jn[Ba[va].identifier]=null;var Ta=Si(),_o=Date.now();if(1===Ta.length){if(_o-G<500){var $a=Ta[0];Or(In,$a,Jn[$a.identifier],Math.floor(Math.log(Ce.k)/Math.LN2)+1),Z()}G=_o}else if(Ta.length>1){var Bo=Ta[1],bs=($a=Ta[0])[0]-Bo[0],Rs=$a[1]-Bo[1];ui=bs*bs+Rs*Rs}}function Xi(){var Fa,Ba,va,La,Ta=m.touches(In);_s.call(In);for(var _o=0,$a=Ta.length;_o<$a;++_o,La=null)if(La=Jn[(va=Ta[_o]).identifier]){if(Ba)break;Fa=va,Ba=La}if(La){var Bo=(Bo=va[0]-Fa[0])*Bo+(Bo=va[1]-Fa[1])*Bo,bs=ui&&Math.sqrt(Bo/ui);Fa=[(Fa[0]+va[0])/2,(Fa[1]+va[1])/2],Ba=[(Ba[0]+La[0])/2,(Ba[1]+La[1])/2],lr(bs*Jr)}G=null,yr(Fa,Ba),en(ri)}function ya(){if(m.event.touches.length){for(var Fa=m.event.changedTouches,Ba=0,va=Fa.length;Ba<va;++Ba)delete Jn[Fa[Ba].identifier];for(var La in Jn)return void Si()}m.selectAll(Mi).on(yi,null),wi.on(Pt,pn).on(wt,Yn),Ri(),yn(ri)}Fi(),tn(ri),wi.on(Pt,null).on(wt,Fi)}function ti(){var Jr=jt.of(this,arguments);F?clearTimeout(F):(_s.call(this),ce=Gt(L=z||m.mouse(this)),tn(Jr)),F=setTimeout(function(){F=null,yn(Jr)},50),Z(),lr(Math.pow(2,.002*be())*Ce.k),yr(L,ce),en(Jr)}function gi(){var Jr=m.mouse(this),In=Math.log(Ce.k)/Math.LN2;Or(this,Jr,Gt(Jr),m.event.shiftKey?Math.ceil(In)-1:Math.floor(In)+1)}return ze||(ze="onwheel"in x?(be=function(){return-m.event.deltaY*(m.event.deltaMode?120:1)},"wheel"):"onmousewheel"in x?(be=function(){return m.event.wheelDelta},"mousewheel"):(be=function(){return-m.event.detail},"MozMousePixelScroll")),Nt.event=function(Jr){Jr.each(function(){var In=jt.of(this,arguments),ri=Ce;gs?m.select(this).transition().each("start.zoom",function(){Ce=this.__chart__||{x:0,y:0,k:1},tn(In)}).tween("zoom:zoom",function(){var Jn=Ue[0],yi=L?L[0]:Jn/2,Oi=L?L[1]:Ue[1]/2,ai=m.interpolateZoom([(yi-Ce.x)/Ce.k,(Oi-Ce.y)/Ce.k,Jn/Ce.k],[(yi-ri.x)/ri.k,(Oi-ri.y)/ri.k,Jn/ri.k]);return function(Mi){var wi=ai(Mi),Ri=Jn/wi[2];this.__chart__=Ce={x:yi-wi[0]*Ri,y:Oi-wi[1]*Ri,k:Ri},en(In)}}).each("interrupt.zoom",function(){yn(In)}).each("end.zoom",function(){yn(In)}):(this.__chart__=Ce,tn(In),en(In),yn(In))})},Nt.translate=function(Jr){return arguments.length?(Ce={x:+Jr[0],y:+Jr[1],k:Ce.k},Cr(),Nt):[Ce.x,Ce.y]},Nt.scale=function(Jr){return arguments.length?(Ce={x:Ce.x,y:Ce.y,k:null},lr(+Jr),Cr(),Nt):Ce.k},Nt.scaleExtent=function(Jr){return arguments.length?($e=null==Jr?Ve:[+Jr[0],+Jr[1]],Nt):$e},Nt.center=function(Jr){return arguments.length?(z=Jr&&[+Jr[0],+Jr[1]],Nt):z},Nt.size=function(Jr){return arguments.length?(Ue=Jr&&[+Jr[0],+Jr[1]],Nt):Ue},Nt.duration=function(Jr){return arguments.length?(at=+Jr,Nt):at},Nt.x=function(Jr){return arguments.length?(fe=Jr,ie=Jr.copy(),Ce={x:0,y:0,k:1},Nt):fe},Nt.y=function(Jr){return arguments.length?(ke=Jr,xe=Jr.copy(),Ce={x:0,y:0,k:1},Nt):ke},m.rebind(Nt,jt,"on")};var be,ze,Ve=[0,1/0];function Je(){}function Ye(ce,L,z){return this instanceof Ye?(this.h=+ce,this.s=+L,void(this.l=+z)):arguments.length<2?ce instanceof Ye?new Ye(ce.h,ce.s,ce.l):Sr(""+ce,mr,Ye):new Ye(ce,L,z)}m.color=Je,Je.prototype.toString=function(){return this.rgb()+""},m.hsl=Ye;var lt=Ye.prototype=new Je;function st(ce,L,z){var F,G;function ie(fe){return Math.round(255*((xe=fe)>360?xe-=360:xe<0&&(xe+=360),xe<60?F+(G-F)*xe/60:xe<180?G:xe<240?F+(G-F)*(240-xe)/60:F));var xe}return ce=isNaN(ce)?0:(ce%=360)<0?ce+360:ce,L=isNaN(L)||L<0?0:L>1?1:L,F=2*(z=z<0?0:z>1?1:z)-(G=z<=.5?z*(1+L):z+L-z*L),new Ct(ie(ce+120),ie(ce),ie(ce-120))}function Mt(ce,L,z){return this instanceof Mt?(this.h=+ce,this.c=+L,void(this.l=+z)):arguments.length<2?ce instanceof Mt?new Mt(ce.h,ce.c,ce.l):Se(ce instanceof mt?ce.l:(ce=tr((ce=m.rgb(ce)).r,ce.g,ce.b)).l,ce.a,ce.b):new Mt(ce,L,z)}lt.brighter=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new Ye(this.h,this.s,this.l/ce)},lt.darker=function(ce){return ce=Math.pow(.7,arguments.length?ce:1),new Ye(this.h,this.s,ce*this.l)},lt.rgb=function(){return st(this.h,this.s,this.l)},m.hcl=Mt;var Dt=Mt.prototype=new Je;function ht(ce,L,z){return isNaN(ce)&&(ce=0),isNaN(L)&&(L=0),new mt(z,Math.cos(ce*=cr)*L,Math.sin(ce)*L)}function mt(ce,L,z){return this instanceof mt?(this.l=+ce,this.a=+L,void(this.b=+z)):arguments.length<2?ce instanceof mt?new mt(ce.l,ce.a,ce.b):ce instanceof Mt?ht(ce.h,ce.c,ce.l):tr((ce=Ct(ce)).r,ce.g,ce.b):new mt(ce,L,z)}Dt.brighter=function(ce){return new Mt(this.h,this.c,Math.min(100,this.l+Ot*(arguments.length?ce:1)))},Dt.darker=function(ce){return new Mt(this.h,this.c,Math.max(0,this.l-Ot*(arguments.length?ce:1)))},Dt.rgb=function(){return ht(this.h,this.c,this.l).rgb()},m.lab=mt;var Ot=18,At=mt.prototype=new Je;function It(ce,L,z){var F=(ce+16)/116,G=F+L/500,ie=F-z/200;return new Ct(dt(3.2404542*(G=.95047*Ze(G))-1.5371385*(F=1*Ze(F))-.4985314*(ie=1.08883*Ze(ie))),dt(-.969266*G+1.8760108*F+.041556*ie),dt(.0556434*G-.2040259*F+1.0572252*ie))}function Se(ce,L,z){return ce>0?new Mt(Math.atan2(z,L)*Ft,Math.sqrt(L*L+z*z),ce):new Mt(NaN,NaN,ce)}function Ze(ce){return ce>.206893034?ce*ce*ce:(ce-4/29)/7.787037}function it(ce){return ce>.008856?Math.pow(ce,1/3):7.787037*ce+4/29}function dt(ce){return Math.round(255*(ce<=.00304?12.92*ce:1.055*Math.pow(ce,1/2.4)-.055))}function Ct(ce,L,z){return this instanceof Ct?(this.r=~~ce,this.g=~~L,void(this.b=~~z)):arguments.length<2?ce instanceof Ct?new Ct(ce.r,ce.g,ce.b):Sr(""+ce,Ct,st):new Ct(ce,L,z)}function Ut(ce){return new Ct(ce>>16,ce>>8&255,255&ce)}function Jt(ce){return Ut(ce)+""}At.brighter=function(ce){return new mt(Math.min(100,this.l+Ot*(arguments.length?ce:1)),this.a,this.b)},At.darker=function(ce){return new mt(Math.max(0,this.l-Ot*(arguments.length?ce:1)),this.a,this.b)},At.rgb=function(){return It(this.l,this.a,this.b)},m.rgb=Ct;var qt=Ct.prototype=new Je;function pr(ce){return ce<16?"0"+Math.max(0,ce).toString(16):Math.min(255,ce).toString(16)}function Sr(ce,L,z){var F,G,ie,fe=0,xe=0,ke=0;if(F=/([a-z]+)\((.*)\)/.exec(ce=ce.toLowerCase()))switch(G=F[2].split(","),F[1]){case"hsl":return z(parseFloat(G[0]),parseFloat(G[1])/100,parseFloat(G[2])/100);case"rgb":return L(ar(G[0]),ar(G[1]),ar(G[2]))}return(ie=dr.get(ce))?L(ie.r,ie.g,ie.b):(null==ce||"#"!==ce.charAt(0)||isNaN(ie=parseInt(ce.slice(1),16))||(4===ce.length?(fe=(3840&ie)>>4,fe|=fe>>4,xe=240&ie,xe|=xe>>4,ke=15&ie,ke|=ke<<4):7===ce.length&&(fe=(16711680&ie)>>16,xe=(65280&ie)>>8,ke=255&ie)),L(fe,xe,ke))}function mr(ce,L,z){var F,G,ie=Math.min(ce/=255,L/=255,z/=255),fe=Math.max(ce,L,z),xe=fe-ie,ke=(fe+ie)/2;return xe?(G=ke<.5?xe/(fe+ie):xe/(2-fe-ie),F=ce==fe?(L-z)/xe+(L<z?6:0):L==fe?(z-ce)/xe+2:(ce-L)/xe+4,F*=60):(F=NaN,G=ke>0&&ke<1?0:F),new Ye(F,G,ke)}function tr(ce,L,z){var F=it((.4124564*(ce=rr(ce))+.3575761*(L=rr(L))+.1804375*(z=rr(z)))/.95047),G=it((.2126729*ce+.7151522*L+.072175*z)/1);return mt(116*G-16,500*(F-G),200*(G-it((.0193339*ce+.119192*L+.9503041*z)/1.08883)))}function rr(ce){return(ce/=255)<=.04045?ce/12.92:Math.pow((ce+.055)/1.055,2.4)}function ar(ce){var L=parseFloat(ce);return"%"===ce.charAt(ce.length-1)?Math.round(2.55*L):L}qt.brighter=function(ce){ce=Math.pow(.7,arguments.length?ce:1);var L=this.r,z=this.g,F=this.b,G=30;return L||z||F?(L&&L<G&&(L=G),z&&z<G&&(z=G),F&&F<G&&(F=G),new Ct(Math.min(255,L/ce),Math.min(255,z/ce),Math.min(255,F/ce))):new Ct(G,G,G)},qt.darker=function(ce){return new Ct((ce=Math.pow(.7,arguments.length?ce:1))*this.r,ce*this.g,ce*this.b)},qt.hsl=function(){return mr(this.r,this.g,this.b)},qt.toString=function(){return"#"+pr(this.r)+pr(this.g)+pr(this.b)};var dr=m.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function xr(ce){return"function"==typeof ce?ce:function(){return ce}}function Lr(ce){return function(L,z,F){return 2===arguments.length&&"function"==typeof z&&(F=z,z=null),zr(L,z,ce,F)}}function zr(ce,L,z,F){var Ue,G={},ie=m.dispatch("beforesend","progress","load","error"),fe={},xe=new XMLHttpRequest,ke=null;function Ce(){var Ue,at,kt,$e=xe.status;if(!$e&&((kt=(at=xe).responseType)&&"text"!==kt?at.response:at.responseText)||$e>=200&&$e<300||304===$e){try{Ue=z.call(G,xe)}catch(at){return void ie.error.call(G,at)}ie.load.call(G,Ue)}else ie.error.call(G,xe)}return self.XDomainRequest&&!("withCredentials"in xe)&&/^(http(s)?:)?\/\//.test(ce)&&(xe=new XDomainRequest),"onload"in xe?xe.onload=xe.onerror=Ce:xe.onreadystatechange=function(){xe.readyState>3&&Ce()},xe.onprogress=function(Ue){var $e=m.event;m.event=Ue;try{ie.progress.call(G,xe)}finally{m.event=$e}},G.header=function(Ue,$e){return Ue=(Ue+"").toLowerCase(),arguments.length<2?fe[Ue]:(null==$e?delete fe[Ue]:fe[Ue]=$e+"",G)},G.mimeType=function(Ue){return arguments.length?(L=null==Ue?null:Ue+"",G):L},G.responseType=function(Ue){return arguments.length?(ke=Ue,G):ke},G.response=function(Ue){return z=Ue,G},["get","post"].forEach(function(Ue){G[Ue]=function(){return G.send.apply(G,[Ue].concat(k(arguments)))}}),G.send=function(Ue,$e,at){if(2===arguments.length&&"function"==typeof $e&&(at=$e,$e=null),xe.open(Ue,ce,!0),null==L||"accept"in fe||(fe.accept=L+",*/*"),xe.setRequestHeader)for(var kt in fe)xe.setRequestHeader(kt,fe[kt]);return null!=L&&xe.overrideMimeType&&xe.overrideMimeType(L),null!=ke&&(xe.responseType=ke),null!=at&&G.on("error",at).on("load",function(Pt){at(null,Pt)}),ie.beforesend.call(G,xe),xe.send($e??null),G},G.abort=function(){return xe.abort(),G},m.rebind(G,ie,"on"),null==F?G:G.get(1===(Ue=F).length?function($e,at){Ue(null==$e?at:null)}:Ue)}dr.forEach(function(ce,L){dr.set(ce,Ut(L))}),m.functor=xr,m.xhr=Lr(E),m.dsv=function(ce,L){var z=new RegExp('["'+ce+"\n]"),F=ce.charCodeAt(0);function G(Ce,Ue,$e){arguments.length<3&&($e=Ue,Ue=null);var at=zr(Ce,L,null==Ue?ie:fe(Ue),$e);return at.row=function(kt){return arguments.length?at.response(null==(Ue=kt)?ie:fe(kt)):Ue},at}function ie(Ce){return G.parse(Ce.responseText)}function fe(Ce){return function(Ue){return G.parse(Ue.responseText,Ce)}}function xe(Ce){return Ce.map(ke).join(ce)}function ke(Ce){return z.test(Ce)?'"'+Ce.replace(/\"/g,'""')+'"':Ce}return G.parse=function(Ce,Ue){var $e;return G.parseRows(Ce,function(at,kt){if($e)return $e(at,kt-1);var Pt=function(St){for(var Et={},wt=at.length,jt=0;jt<wt;++jt)Et[at[jt]]=St[jt];return Et};$e=Ue?function(St,Et){return Ue(Pt(St),Et)}:Pt})},G.parseRows=function(Ce,Ue){var $e,at,kt={},Pt={},St=[],Et=Ce.length,wt=0,jt=0;function Nt(){if(wt>=Et)return Pt;if(at)return at=!1,kt;var lr=wt;if(34===Ce.charCodeAt(lr)){for(var yr=lr;yr++<Et;)if(34===Ce.charCodeAt(yr)){if(34!==Ce.charCodeAt(yr+1))break;++yr}return wt=yr+2,13===(Or=Ce.charCodeAt(yr+1))?(at=!0,10===Ce.charCodeAt(yr+2)&&++wt):10===Or&&(at=!0),Ce.slice(lr+1,yr).replace(/""/g,'"')}for(;wt<Et;){var Or,Cr=1;if(10===(Or=Ce.charCodeAt(wt++)))at=!0;else if(13===Or)at=!0,10===Ce.charCodeAt(wt)&&(++wt,++Cr);else if(Or!==F)continue;return Ce.slice(lr,wt-Cr)}return Ce.slice(lr)}for(;($e=Nt())!==Pt;){for(var Gt=[];$e!==kt&&$e!==Pt;)Gt.push($e),$e=Nt();Ue&&null==(Gt=Ue(Gt,jt++))||St.push(Gt)}return St},G.format=function(Ce){if(Array.isArray(Ce[0]))return G.formatRows(Ce);var Ue=new S,$e=[];return Ce.forEach(function(at){for(var kt in at)Ue.has(kt)||$e.push(Ue.add(kt))}),[$e.map(ke).join(ce)].concat(Ce.map(function(at){return $e.map(function(kt){return ke(at[kt])}).join(ce)})).join("\n")},G.formatRows=function(Ce){return Ce.map(xe).join("\n")},G},m.csv=m.dsv(",","text/csv"),m.tsv=m.dsv("\t","text/tab-separated-values");var Hr,Xr,cn,an,Nn=this[D(this,"requestAnimationFrame")]||function(ce){setTimeout(ce,17)};function on(ce,L,z){var F=arguments.length;F<2&&(L=0),F<3&&(z=Date.now());var ie={c:ce,t:z+L,n:null};return Xr?Xr.n=ie:Hr=ie,Xr=ie,cn||(an=clearTimeout(an),cn=1,Nn(wn)),ie}function wn(){var ce=An(),L=ii()-ce;L>24?(isFinite(L)&&(clearTimeout(an),an=setTimeout(wn,L)),cn=0):(cn=1,Nn(wn))}function An(){for(var ce=Date.now(),L=Hr;L;)ce>=L.t&&L.c(ce-L.t)&&(L.c=null),L=L.n;return ce}function ii(){for(var ce,L=Hr,z=1/0;L;)L.c?(L.t<z&&(z=L.t),L=(ce=L).n):L=ce?ce.n=L.n:Hr=L.n;return Xr=ce,z}function Vr(ce){return ce[0]}function sn(ce){return ce[1]}function xn(ce){for(var L,z,F,G=ce.length,ie=[0,1],fe=2,xe=2;xe<G;xe++){for(;fe>1&&((z=ce[ie[fe-1]])[0]-(L=ce[ie[fe-2]])[0])*((F=ce[xe])[1]-L[1])-(z[1]-L[1])*(F[0]-L[0])<=0;)--fe;ie[fe++]=xe}return ie.slice(0,fe)}function nn(ce,L){return ce[0]-L[0]||ce[1]-L[1]}m.timer=function(){on.apply(this,arguments)},m.timer.flush=function(){An(),ii()},m.round=function(ce,L){return L?Math.round(ce*(L=Math.pow(10,L)))/L:Math.round(ce)},m.geom={},m.geom.hull=function(ce){var L=Vr,z=sn;if(arguments.length)return F(ce);function F(G){if(G.length<3)return[];var ie,fe=xr(L),xe=xr(z),ke=G.length,Ce=[],Ue=[];for(ie=0;ie<ke;ie++)Ce.push([+fe.call(this,G[ie],ie),+xe.call(this,G[ie],ie),ie]);for(Ce.sort(nn),ie=0;ie<ke;ie++)Ue.push([Ce[ie][0],-Ce[ie][1]]);var $e=xn(Ce),at=xn(Ue),kt=at[0]===$e[0],Pt=at[at.length-1]===$e[$e.length-1],St=[];for(ie=$e.length-1;ie>=0;--ie)St.push(G[Ce[$e[ie]][2]]);for(ie=+kt;ie<at.length-Pt;++ie)St.push(G[Ce[at[ie]][2]]);return St}return F.x=function(G){return arguments.length?(L=G,F):L},F.y=function(G){return arguments.length?(z=G,F):z},F},m.geom.polygon=function(ce){return B(ce,fn),ce};var fn=m.geom.polygon.prototype=[];function Xn(ce,L,z){return(z[0]-L[0])*(ce[1]-L[1])<(z[1]-L[1])*(ce[0]-L[0])}function Mn(ce,L,z,F){var G=ce[0],ie=z[0],fe=L[0]-G,xe=F[0]-ie,ke=ce[1],Ce=z[1],Ue=L[1]-ke,$e=F[1]-Ce,at=(xe*(ke-Ce)-$e*(G-ie))/($e*fe-xe*Ue);return[G+at*fe,ke+at*Ue]}function On(ce){var L=ce[0],z=ce[ce.length-1];return!(L[0]-z[0]||L[1]-z[1])}fn.area=function(){for(var ce,L=-1,z=this.length,F=this[z-1],G=0;++L<z;)G+=(ce=F)[1]*(F=this[L])[0]-ce[0]*F[1];return.5*G},fn.centroid=function(ce){var L,z,F=-1,G=this.length,ie=0,fe=0,xe=this[G-1];for(arguments.length||(ce=-1/(6*this.area()));++F<G;)ie+=((L=xe)[0]+(xe=this[F])[0])*(z=L[0]*xe[1]-xe[0]*L[1]),fe+=(L[1]+xe[1])*z;return[ie*ce,fe*ce]},fn.clip=function(ce){for(var L,z,F,G,ie,fe,xe=On(ce),ke=-1,Ce=this.length-On(this),Ue=this[Ce-1];++ke<Ce;){for(L=ce.slice(),ce.length=0,G=this[ke],ie=L[(F=L.length-xe)-1],z=-1;++z<F;)Xn(fe=L[z],Ue,G)?(Xn(ie,Ue,G)||ce.push(Mn(ie,fe,Ue,G)),ce.push(fe)):Xn(ie,Ue,G)&&ce.push(Mn(ie,fe,Ue,G)),ie=fe;xe&&ce.push(ce[0]),Ue=G}return ce};var si,or,br,Rt,fr,gr=[],jr=[];function Br(){Pn(this),this.edge=this.site=this.circle=null}function Fr(ce){var L=gr.pop()||new Br;return L.site=ce,L}function Er(ce){bn(ce),br.remove(ce),gr.push(ce),Pn(ce)}function _r(ce){var L=ce.circle,z=L.x,F=L.cy,G={x:z,y:F},ie=ce.P,fe=ce.N,xe=[ce];Er(ce);for(var ke=ie;ke.circle&&a(z-ke.circle.x)<xt&&a(F-ke.circle.cy)<xt;)ie=ke.P,xe.unshift(ke),Er(ke),ke=ie;xe.unshift(ke),bn(ke);for(var Ce=fe;Ce.circle&&a(z-Ce.circle.x)<xt&&a(F-Ce.circle.cy)<xt;)fe=Ce.N,xe.push(Ce),Er(Ce),Ce=fe;xe.push(Ce),bn(Ce);var Ue,$e=xe.length;for(Ue=1;Ue<$e;++Ue)Kn((Ce=xe[Ue]).edge,(ke=xe[Ue-1]).site,Ce.site,G);(Ce=xe[$e-1]).edge=Dn((ke=xe[0]).site,Ce.site,null,G),ln(ke),ln(Ce)}function kr(ce){for(var L,z,F,G,ie=ce.x,fe=ce.y,xe=br._;xe;)if((F=Mr(xe,fe)-ie)>xt)xe=xe.L;else{if(!((G=ie-Pr(xe,fe))>xt)){F>-xt?(L=xe.P,z=xe):G>-xt?(L=xe,z=xe.N):L=z=xe;break}if(!xe.R){L=xe;break}xe=xe.R}var ke=Fr(ce);if(br.insert(L,ke),L||z){if(L===z)return bn(L),z=Fr(L.site),br.insert(ke,z),ke.edge=z.edge=Dn(L.site,ke.site),ln(L),void ln(z);if(z){bn(L),bn(z);var Ce=L.site,Ue=Ce.x,$e=Ce.y,at=ce.x-Ue,kt=ce.y-$e,Pt=z.site,St=Pt.x-Ue,Et=Pt.y-$e,wt=2*(at*Et-kt*St),jt=at*at+kt*kt,Nt=St*St+Et*Et,Gt={x:(Et*jt-kt*Nt)/wt+Ue,y:(at*Nt-St*jt)/wt+$e};Kn(z.edge,Ce,Pt,Gt),ke.edge=Dn(Ce,ce,null,Gt),z.edge=Dn(ce,Pt,null,Gt),ln(L),ln(z)}else ke.edge=Dn(L.site,ke.site)}}function Mr(ce,L){var z=ce.site,F=z.x,G=z.y,ie=G-L;if(!ie)return F;var fe=ce.P;if(!fe)return-1/0;var xe=(z=fe.site).x,ke=z.y,Ce=ke-L;if(!Ce)return xe;var Ue=xe-F,$e=1/ie-1/Ce,at=Ue/Ce;return $e?(-at+Math.sqrt(at*at-2*$e*(Ue*Ue/(-2*Ce)-ke+Ce/2+G-ie/2)))/$e+F:(F+xe)/2}function Pr(ce,L){var z=ce.N;if(z)return Mr(z,L);var F=ce.site;return F.y===L?F.x:1/0}function Wr(ce){this.site=ce,this.edges=[]}function Zr(ce,L){return L.angle-ce.angle}function rn(){Pn(this),this.x=this.y=this.arc=this.site=this.cy=null}function ln(ce){var L=ce.P,z=ce.N;if(L&&z){var F=L.site,G=ce.site,ie=z.site;if(F!==ie){var fe=G.x,xe=G.y,ke=F.x-fe,Ce=F.y-xe,Ue=ie.x-fe,$e=2*(ke*(Et=ie.y-xe)-Ce*Ue);if(!($e>=-1e-12)){var at=ke*ke+Ce*Ce,kt=Ue*Ue+Et*Et,Pt=(Et*at-Ce*kt)/$e,St=(ke*kt-Ue*at)/$e,Et=St+xe,wt=jr.pop()||new rn;wt.arc=ce,wt.site=G,wt.x=Pt+fe,wt.y=Et+Math.sqrt(Pt*Pt+St*St),wt.cy=Et,ce.circle=wt;for(var jt=null,Nt=fr._;Nt;)if(wt.y<Nt.y||wt.y===Nt.y&&wt.x<=Nt.x){if(!Nt.L){jt=Nt.P;break}Nt=Nt.L}else{if(!Nt.R){jt=Nt;break}Nt=Nt.R}fr.insert(jt,wt),jt||(Rt=wt)}}}}function bn(ce){var L=ce.circle;L&&(L.P||(Rt=L.N),fr.remove(L),jr.push(L),Pn(L),ce.circle=null)}function Tn(ce,L){var z=ce.b;if(z)return!0;var F,G,ie=ce.a,fe=L[0][0],xe=L[1][0],ke=L[0][1],Ce=L[1][1],Ue=ce.l,$e=ce.r,at=Ue.x,kt=Ue.y,Pt=$e.x,St=$e.y,Et=(at+Pt)/2;if(St===kt){if(Et<fe||Et>=xe)return;if(at>Pt){if(ie){if(ie.y>=Ce)return}else ie={x:Et,y:ke};z={x:Et,y:Ce}}else{if(ie){if(ie.y<ke)return}else ie={x:Et,y:Ce};z={x:Et,y:ke}}}else if(G=(kt+St)/2-(F=(at-Pt)/(St-kt))*Et,F<-1||F>1)if(at>Pt){if(ie){if(ie.y>=Ce)return}else ie={x:(ke-G)/F,y:ke};z={x:(Ce-G)/F,y:Ce}}else{if(ie){if(ie.y<ke)return}else ie={x:(Ce-G)/F,y:Ce};z={x:(ke-G)/F,y:ke}}else if(kt<St){if(ie){if(ie.x>=xe)return}else ie={x:fe,y:F*fe+G};z={x:xe,y:F*xe+G}}else{if(ie){if(ie.x<fe)return}else ie={x:xe,y:F*xe+G};z={x:fe,y:F*fe+G}}return ce.a=ie,ce.b=z,!0}function En(ce,L){this.l=ce,this.r=L,this.a=this.b=null}function Dn(ce,L,z,F){var G=new En(ce,L);return si.push(G),z&&Kn(G,ce,L,z),F&&Kn(G,L,ce,F),or[ce.i].edges.push(new Ci(G,ce,L)),or[L.i].edges.push(new Ci(G,L,ce)),G}function Bn(ce,L,z){var F=new En(ce,null);return F.a=L,F.b=z,si.push(F),F}function Kn(ce,L,z,F){ce.a||ce.b?ce.l===z?ce.b=F:ce.a=F:(ce.a=F,ce.l=L,ce.r=z)}function Ci(ce,L,z){var F=ce.a,G=ce.b;this.edge=ce,this.site=L,this.angle=z?Math.atan2(z.y-L.y,z.x-L.x):ce.l===L?Math.atan2(G.x-F.x,F.y-G.y):Math.atan2(F.x-G.x,G.y-F.y)}function Ti(){this._=null}function Pn(ce){ce.U=ce.C=ce.L=ce.R=ce.P=ce.N=null}function ei(ce,L){var z=L,F=L.R,G=z.U;G?G.L===z?G.L=F:G.R=F:ce._=F,F.U=G,z.U=F,z.R=F.L,z.R&&(z.R.U=z),F.L=z}function Qn(ce,L){var z=L,F=L.L,G=z.U;G?G.L===z?G.L=F:G.R=F:ce._=F,F.U=G,z.U=F,z.L=F.R,z.L&&(z.L.U=z),F.R=z}function Bi(ce){for(;ce.L;)ce=ce.L;return ce}function ma(ce,L){var z,F,G,ie=ce.sort(Sa).pop();for(si=[],or=new Array(ce.length),br=new Ti,fr=new Ti;;)if(G=Rt,ie&&(!G||ie.y<G.y||ie.y===G.y&&ie.x<G.x))ie.x===z&&ie.y===F||(or[ie.i]=new Wr(ie),kr(ie),z=ie.x,F=ie.y),ie=ce.pop();else{if(!G)break;_r(G.arc)}L&&(function(xe){for(var ke,Ce,Ue,$e,at,kt=si,Pt=(Ce=xe[0][0],Ue=xe[0][1],$e=xe[1][0],at=xe[1][1],function(Et){var wt,jt=Et.a,Nt=Et.b,Gt=jt.x,lr=jt.y,yr=0,Or=1,Cr=Nt.x-Gt,tn=Nt.y-lr;if(wt=Ce-Gt,Cr||!(wt>0)){if(wt/=Cr,Cr<0){if(wt<yr)return;wt<Or&&(Or=wt)}else if(Cr>0){if(wt>Or)return;wt>yr&&(yr=wt)}if(wt=$e-Gt,Cr||!(wt<0)){if(wt/=Cr,Cr<0){if(wt>Or)return;wt>yr&&(yr=wt)}else if(Cr>0){if(wt<yr)return;wt<Or&&(Or=wt)}if(wt=Ue-lr,tn||!(wt>0)){if(wt/=tn,tn<0){if(wt<yr)return;wt<Or&&(Or=wt)}else if(tn>0){if(wt>Or)return;wt>yr&&(yr=wt)}if(wt=at-lr,tn||!(wt<0)){if(wt/=tn,tn<0){if(wt>Or)return;wt>yr&&(yr=wt)}else if(tn>0){if(wt<yr)return;wt<Or&&(Or=wt)}return yr>0&&(Et.a={x:Gt+yr*Cr,y:lr+yr*tn}),Or<1&&(Et.b={x:Gt+Or*Cr,y:lr+Or*tn}),Et}}}}}),St=kt.length;St--;)(!Tn(ke=kt[St],xe)||!Pt(ke)||a(ke.a.x-ke.b.x)<xt&&a(ke.a.y-ke.b.y)<xt)&&(ke.a=ke.b=null,kt.splice(St,1))}(L),function(xe){for(var ke,Ce,Ue,$e,at,kt,Pt,St,Et,wt,jt=xe[0][0],Nt=xe[1][0],Gt=xe[0][1],lr=xe[1][1],yr=or,Or=yr.length;Or--;)if((at=yr[Or])&&at.prepare())for(St=(Pt=at.edges).length,kt=0;kt<St;)Ue=(wt=Pt[kt].end()).x,$e=wt.y,ke=(Et=Pt[++kt%St].start()).x,Ce=Et.y,(a(Ue-ke)>xt||a($e-Ce)>xt)&&(Pt.splice(kt,0,new Ci(Bn(at.site,wt,a(Ue-jt)<xt&&lr-$e>xt?{x:jt,y:a(ke-jt)<xt?Ce:lr}:a($e-lr)<xt&&Nt-Ue>xt?{x:a(Ce-lr)<xt?ke:Nt,y:lr}:a(Ue-Nt)<xt&&$e-Gt>xt?{x:Nt,y:a(ke-Nt)<xt?Ce:Gt}:a($e-Gt)<xt&&Ue-jt>xt?{x:a(Ce-Gt)<xt?ke:jt,y:Gt}:null),at.site,null)),++St)}(L));var fe={cells:or,edges:si};return br=fr=si=or=null,fe}function Sa(ce,L){return L.y-ce.y||L.x-ce.x}Wr.prototype.prepare=function(){for(var ce,L=this.edges,z=L.length;z--;)(ce=L[z].edge).b&&ce.a||L.splice(z,1);return L.sort(Zr),L.length},Ci.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ti.prototype={insert:function(ce,L){var z,F,G;if(ce){if(L.P=ce,L.N=ce.N,ce.N&&(ce.N.P=L),ce.N=L,ce.R){for(ce=ce.R;ce.L;)ce=ce.L;ce.L=L}else ce.R=L;z=ce}else this._?(ce=Bi(this._),L.P=null,L.N=ce,ce.P=ce.L=L,z=ce):(L.P=L.N=null,this._=L,z=null);for(L.L=L.R=null,L.U=z,L.C=!0,ce=L;z&&z.C;)z===(F=z.U).L?(G=F.R)&&G.C?(z.C=G.C=!1,F.C=!0,ce=F):(ce===z.R&&(ei(this,z),z=(ce=z).U),z.C=!1,F.C=!0,Qn(this,F)):(G=F.L)&&G.C?(z.C=G.C=!1,F.C=!0,ce=F):(ce===z.L&&(Qn(this,z),z=(ce=z).U),z.C=!1,F.C=!0,ei(this,F)),z=ce.U;this._.C=!1},remove:function(ce){ce.N&&(ce.N.P=ce.P),ce.P&&(ce.P.N=ce.N),ce.N=ce.P=null;var L,z,F,G=ce.U,ie=ce.L,fe=ce.R;if(z=ie?fe?Bi(fe):ie:fe,G?G.L===ce?G.L=z:G.R=z:this._=z,ie&&fe?(F=z.C,z.C=ce.C,z.L=ie,ie.U=z,z!==fe?(G=z.U,z.U=ce.U,G.L=ce=z.R,z.R=fe,fe.U=z):(z.U=G,G=z,ce=z.R)):(F=ce.C,ce=z),ce&&(ce.U=G),!F)if(ce&&ce.C)ce.C=!1;else{do{if(ce===this._)break;if(ce===G.L){if((L=G.R).C&&(L.C=!1,G.C=!0,ei(this,G),L=G.R),L.L&&L.L.C||L.R&&L.R.C){L.R&&L.R.C||(L.L.C=!1,L.C=!0,Qn(this,L),L=G.R),L.C=G.C,G.C=L.R.C=!1,ei(this,G),ce=this._;break}}else if((L=G.L).C&&(L.C=!1,G.C=!0,Qn(this,G),L=G.L),L.L&&L.L.C||L.R&&L.R.C){L.L&&L.L.C||(L.R.C=!1,L.C=!0,ei(this,L),L=G.L),L.C=G.C,G.C=L.L.C=!1,Qn(this,G),ce=this._;break}L.C=!0,ce=G,G=G.U}while(!ce.C);ce&&(ce.C=!1)}}},m.geom.voronoi=function(ce){var L=Vr,z=sn,F=L,G=z,ie=Xa;if(ce)return fe(ce);function fe(ke){var Ce=new Array(ke.length),Ue=ie[0][0],$e=ie[0][1],at=ie[1][0],kt=ie[1][1];return ma(xe(ke),ie).cells.forEach(function(Pt,St){var Et=Pt.edges,wt=Pt.site;(Ce[St]=Et.length?Et.map(function(jt){var Nt=jt.start();return[Nt.x,Nt.y]}):wt.x>=Ue&&wt.x<=at&&wt.y>=$e&&wt.y<=kt?[[Ue,kt],[at,kt],[at,$e],[Ue,$e]]:[]).point=ke[St]}),Ce}function xe(ke){return ke.map(function(Ce,Ue){return{x:Math.round(F(Ce,Ue)/xt)*xt,y:Math.round(G(Ce,Ue)/xt)*xt,i:Ue}})}return fe.links=function(ke){return ma(xe(ke)).edges.filter(function(Ce){return Ce.l&&Ce.r}).map(function(Ce){return{source:ke[Ce.l.i],target:ke[Ce.r.i]}})},fe.triangles=function(ke){var Ce=[];return ma(xe(ke)).cells.forEach(function(Ue,$e){for(var at,kt,Pt,St,Et=Ue.site,wt=Ue.edges.sort(Zr),jt=-1,Nt=wt.length,Gt=wt[Nt-1].edge,lr=Gt.l===Et?Gt.r:Gt.l;++jt<Nt;)at=lr,lr=(Gt=wt[jt].edge).l===Et?Gt.r:Gt.l,$e<at.i&&$e<lr.i&&((kt=Et).x-(St=lr).x)*((Pt=at).y-kt.y)-(kt.x-Pt.x)*(St.y-kt.y)<0&&Ce.push([ke[$e],ke[at.i],ke[lr.i]])}),Ce},fe.x=function(ke){return arguments.length?(F=xr(L=ke),fe):L},fe.y=function(ke){return arguments.length?(G=xr(z=ke),fe):z},fe.clipExtent=function(ke){return arguments.length?(ie=ke??Xa,fe):ie===Xa?null:ie},fe.size=function(ke){return arguments.length?fe.clipExtent(ke&&[[0,0],ke]):ie===Xa?null:ie&&ie[1]},fe};var Xa=[[-1e6,-1e6],[1e6,1e6]];function Ji(ce){return ce.x}function qi(ce){return ce.y}function Ha(ce,L,z,F,G,ie){if(!ce(L,z,F,G,ie)){var fe=.5*(z+G),xe=.5*(F+ie),ke=L.nodes;ke[0]&&Ha(ce,ke[0],z,F,fe,xe),ke[1]&&Ha(ce,ke[1],fe,F,G,xe),ke[2]&&Ha(ce,ke[2],z,xe,fe,ie),ke[3]&&Ha(ce,ke[3],fe,xe,G,ie)}}function Ni(ce,L,z,F,G,ie,fe){var xe,ke=1/0;return function Ce(Ue,$e,at,kt,Pt){if(!($e>ie||at>fe||kt<F||Pt<G)){if(St=Ue.point){var St,Et=L-Ue.x,wt=z-Ue.y,jt=Et*Et+wt*wt;if(jt<ke){var Nt=Math.sqrt(ke=jt);F=L-Nt,G=z-Nt,ie=L+Nt,fe=z+Nt,xe=St}}for(var Gt=Ue.nodes,lr=.5*($e+kt),yr=.5*(at+Pt),Or=(z>=yr)<<1|L>=lr,Cr=Or+4;Or<Cr;++Or)if(Ue=Gt[3&Or])switch(3&Or){case 0:Ce(Ue,$e,at,lr,yr);break;case 1:Ce(Ue,lr,at,kt,yr);break;case 2:Ce(Ue,$e,yr,lr,Pt);break;case 3:Ce(Ue,lr,yr,kt,Pt)}}}(ce,F,G,ie,fe),xe}function Ja(ce,L){ce=m.rgb(ce),L=m.rgb(L);var z=ce.r,F=ce.g,G=ce.b,ie=L.r-z,fe=L.g-F,xe=L.b-G;return function(ke){return"#"+pr(Math.round(z+ie*ke))+pr(Math.round(F+fe*ke))+pr(Math.round(G+xe*ke))}}function ro(ce,L){var z,F={},G={};for(z in ce)z in L?F[z]=Ea(ce[z],L[z]):G[z]=ce[z];for(z in L)z in ce||(G[z]=L[z]);return function(ie){for(z in F)G[z]=F[z](ie);return G}}function Ma(ce,L){return ce=+ce,L=+L,function(z){return ce*(1-z)+L*z}}function Na(ce,L){var z,F,G,ie=eo.lastIndex=no.lastIndex=0,fe=-1,xe=[],ke=[];for(ce+="",L+="";(z=eo.exec(ce))&&(F=no.exec(L));)(G=F.index)>ie&&(G=L.slice(ie,G),xe[fe]?xe[fe]+=G:xe[++fe]=G),(z=z[0])===(F=F[0])?xe[fe]?xe[fe]+=F:xe[++fe]=F:(xe[++fe]=null,ke.push({i:fe,x:Ma(z,F)})),ie=no.lastIndex;return ie<L.length&&(G=L.slice(ie),xe[fe]?xe[fe]+=G:xe[++fe]=G),xe.length<2?ke[0]?(L=ke[0].x,function(Ce){return L(Ce)+""}):function(){return L}:(L=ke.length,function(Ce){for(var Ue,$e=0;$e<L;++$e)xe[(Ue=ke[$e]).i]=Ue.x(Ce);return xe.join("")})}m.geom.delaunay=function(ce){return m.geom.voronoi().triangles(ce)},m.geom.quadtree=function(ce,L,z,F,G){var ie,fe=Vr,xe=sn;if(ie=arguments.length)return fe=Ji,xe=qi,3===ie&&(G=z,F=L,z=L=0),ke(ce);function ke(Ce){var Ue,$e,at,kt,Pt,St,Et,wt,jt,Nt=xr(fe),Gt=xr(xe);if(null!=L)St=L,Et=z,wt=F,jt=G;else if(wt=jt=-(St=Et=1/0),$e=[],at=[],Pt=Ce.length,ie)for(kt=0;kt<Pt;++kt)(Ue=Ce[kt]).x<St&&(St=Ue.x),Ue.y<Et&&(Et=Ue.y),Ue.x>wt&&(wt=Ue.x),Ue.y>jt&&(jt=Ue.y),$e.push(Ue.x),at.push(Ue.y);else for(kt=0;kt<Pt;++kt){var lr=+Nt(Ue=Ce[kt],kt),yr=+Gt(Ue,kt);lr<St&&(St=lr),yr<Et&&(Et=yr),lr>wt&&(wt=lr),yr>jt&&(jt=yr),$e.push(lr),at.push(yr)}var Or=wt-St,Cr=jt-Et;function tn(pn,Yn,ti,gi,Jr,In,ri,Jn){if(!isNaN(ti)&&!isNaN(gi))if(pn.leaf){var ui=pn.x,yi=pn.y;if(null!=ui)if(a(ui-ti)+a(yi-gi)<.01)en(pn,Yn,ti,gi,Jr,In,ri,Jn);else{var Oi=pn.point;pn.x=pn.y=pn.point=null,en(pn,Oi,ui,yi,Jr,In,ri,Jn),en(pn,Yn,ti,gi,Jr,In,ri,Jn)}else pn.x=ti,pn.y=gi,pn.point=Yn}else en(pn,Yn,ti,gi,Jr,In,ri,Jn)}function en(pn,Yn,ti,gi,Jr,In,ri,Jn){var ui=.5*(Jr+ri),yi=.5*(In+Jn),Oi=ti>=ui,ai=gi>=yi,Mi=ai<<1|Oi;pn.leaf=!1,Oi?Jr=ui:ri=ui,ai?In=yi:Jn=yi,tn(pn=pn.nodes[Mi]||(pn.nodes[Mi]={leaf:!0,nodes:[],point:null,x:null,y:null}),Yn,ti,gi,Jr,In,ri,Jn)}Or>Cr?jt=Et+Or:wt=St+Cr;var yn={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(pn){tn(yn,pn,+Nt(pn,++kt),+Gt(pn,kt),St,Et,wt,jt)},visit:function(pn){Ha(pn,yn,St,Et,wt,jt)},find:function(pn){return Ni(yn,pn[0],pn[1],St,Et,wt,jt)}};if(kt=-1,null==L){for(;++kt<Pt;)tn(yn,Ce[kt],$e[kt],at[kt],St,Et,wt,jt);--kt}else Ce.forEach(yn.add);return $e=at=Ce=Ue=null,yn}return ke.x=function(Ce){return arguments.length?(fe=Ce,ke):fe},ke.y=function(Ce){return arguments.length?(xe=Ce,ke):xe},ke.extent=function(Ce){return arguments.length?(null==Ce?L=z=F=G=null:(L=+Ce[0][0],z=+Ce[0][1],F=+Ce[1][0],G=+Ce[1][1]),ke):null==L?null:[[L,z],[F,G]]},ke.size=function(Ce){return arguments.length?(null==Ce?L=z=F=G=null:(L=z=0,F=+Ce[0],G=+Ce[1]),ke):null==L?null:[F-L,G-z]},ke},m.interpolateRgb=Ja,m.interpolateObject=ro,m.interpolateNumber=Ma,m.interpolateString=Na;var eo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,no=new RegExp(eo.source,"g");function Ea(ce,L){for(var z,F=m.interpolators.length;--F>=0&&!(z=m.interpolators[F](ce,L)););return z}function na(ce,L){var z,F=[],G=[],ie=ce.length,fe=L.length,xe=Math.min(ce.length,L.length);for(z=0;z<xe;++z)F.push(Ea(ce[z],L[z]));for(;z<ie;++z)G[z]=ce[z];for(;z<fe;++z)G[z]=L[z];return function(ke){for(z=0;z<xe;++z)G[z]=F[z](ke);return G}}m.interpolate=Ea,m.interpolators=[function(ce,L){var z=typeof L;return("string"===z?dr.has(L.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(L)?Ja:Na:L instanceof Je?Ja:Array.isArray(L)?na:"object"===z&&isNaN(L)?ro:Ma)(ce,L)}],m.interpolateArray=na;var Ga=function(){return E},Jo=m.map({linear:Ga,poly:function(ce){return function(L){return Math.pow(L,ce)}},quad:function(){return $o},cubic:function(){return os},sin:function(){return ls},exp:function(){return yo},circle:function(){return ho},elastic:function(ce,L){var z;return arguments.length<2&&(L=.45),arguments.length?z=L/Zt*Math.asin(1/ce):(ce=1,z=L/4),function(F){return 1+ce*Math.pow(2,-10*F)*Math.sin((F-z)*Zt/L)}},back:function(ce){return ce||(ce=1.70158),function(L){return L*L*((ce+1)*L-ce)}},bounce:function(){return Lo}}),ms=m.map({in:E,out:Ko,"in-out":Uo,"out-in":function(ce){return Uo(Ko(ce))}});function Wi(ce){return function(L){return L<=0?0:L>=1?1:ce(L)}}function Ko(ce){return function(L){return 1-ce(1-L)}}function Uo(ce){return function(L){return.5*(L<.5?ce(2*L):2-ce(2-2*L))}}function $o(ce){return ce*ce}function os(ce){return ce*ce*ce}function ss(ce){if(ce<=0)return 0;if(ce>=1)return 1;var L=ce*ce,z=L*ce;return 4*(ce<.5?z:3*(ce-L)+z-.75)}function ls(ce){return 1-Math.cos(ce*Xt)}function yo(ce){return Math.pow(2,10*(ce-1))}function ho(ce){return 1-Math.sqrt(1-ce*ce)}function Lo(ce){return ce<1/2.75?7.5625*ce*ce:ce<2/2.75?7.5625*(ce-=1.5/2.75)*ce+.75:ce<2.5/2.75?7.5625*(ce-=2.25/2.75)*ce+.9375:7.5625*(ce-=2.625/2.75)*ce+.984375}function Mo(ce,L){return L-=ce,function(z){return Math.round(ce+L*z)}}function Po(ce){var L,z,F,G=[ce.a,ce.b],ie=[ce.c,ce.d],fe=po(G),xe=Ro(G,ie),ke=po(((L=ie)[0]+=(F=-xe)*(z=G)[0],L[1]+=F*z[1],L))||0;G[0]*ie[1]<ie[0]*G[1]&&(G[0]*=-1,G[1]*=-1,fe*=-1,xe*=-1),this.rotate=(fe?Math.atan2(G[1],G[0]):Math.atan2(-ie[0],ie[1]))*Ft,this.translate=[ce.e,ce.f],this.scale=[fe,ke],this.skew=ke?Math.atan2(xe,ke)*Ft:0}function Ro(ce,L){return ce[0]*L[0]+ce[1]*L[1]}function po(ce){var L=Math.sqrt(Ro(ce,ce));return L&&(ce[0]/=L,ce[1]/=L),L}m.ease=function(ce){var L=ce.indexOf("-"),z=L>=0?ce.slice(0,L):ce,F=L>=0?ce.slice(L+1):"in";return z=Jo.get(z)||Ga,Wi((F=ms.get(F)||E)(z.apply(null,g.call(arguments,1))))},m.interpolateHcl=function(ce,L){ce=m.hcl(ce),L=m.hcl(L);var z=ce.h,F=ce.c,G=ce.l,ie=L.h-z,fe=L.c-F,xe=L.l-G;return isNaN(fe)&&(fe=0,F=isNaN(F)?L.c:F),isNaN(ie)?(ie=0,z=isNaN(z)?L.h:z):ie>180?ie-=360:ie<-180&&(ie+=360),function(ke){return ht(z+ie*ke,F+fe*ke,G+xe*ke)+""}},m.interpolateHsl=function(ce,L){ce=m.hsl(ce),L=m.hsl(L);var z=ce.h,F=ce.s,G=ce.l,ie=L.h-z,fe=L.s-F,xe=L.l-G;return isNaN(fe)&&(fe=0,F=isNaN(F)?L.s:F),isNaN(ie)?(ie=0,z=isNaN(z)?L.h:z):ie>180?ie-=360:ie<-180&&(ie+=360),function(ke){return st(z+ie*ke,F+fe*ke,G+xe*ke)+""}},m.interpolateLab=function(ce,L){ce=m.lab(ce),L=m.lab(L);var z=ce.l,F=ce.a,G=ce.b,ie=L.l-z,fe=L.a-F,xe=L.b-G;return function(ke){return It(z+ie*ke,F+fe*ke,G+xe*ke)+""}},m.interpolateRound=Mo,m.transform=function(ce){var L=x.createElementNS(m.ns.prefix.svg,"g");return(m.transform=function(z){if(null!=z){L.setAttribute("transform",z);var F=L.transform.baseVal.consolidate()}return new Po(F?F.matrix:cs)})(ce)},Po.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var cs={a:1,b:0,c:0,d:1,e:0,f:0};function io(ce){return ce.length?ce.pop()+",":""}function So(ce,L){var G,ie,fe,z=[],F=[];return ce=m.transform(ce),L=m.transform(L),function(G,ie,fe,xe){if(G[0]!==ie[0]||G[1]!==ie[1]){var ke=fe.push("translate(",null,",",null,")");xe.push({i:ke-4,x:Ma(G[0],ie[0])},{i:ke-2,x:Ma(G[1],ie[1])})}else(ie[0]||ie[1])&&fe.push("translate("+ie+")")}(ce.translate,L.translate,z,F),fe=z,(G=ce.rotate)!==(ie=L.rotate)?(G-ie>180?ie+=360:ie-G>180&&(G+=360),F.push({i:fe.push(io(fe)+"rotate(",null,")")-2,x:Ma(G,ie)})):ie&&fe.push(io(fe)+"rotate("+ie+")"),function(G,ie,fe,xe){G!==ie?xe.push({i:fe.push(io(fe)+"skewX(",null,")")-2,x:Ma(G,ie)}):ie&&fe.push(io(fe)+"skewX("+ie+")")}(ce.skew,L.skew,z,F),function(G,ie,fe,xe){if(G[0]!==ie[0]||G[1]!==ie[1]){var ke=fe.push(io(fe)+"scale(",null,",",null,")");xe.push({i:ke-4,x:Ma(G[0],ie[0])},{i:ke-2,x:Ma(G[1],ie[1])})}else 1===ie[0]&&1===ie[1]||fe.push(io(fe)+"scale("+ie+")")}(ce.scale,L.scale,z,F),ce=L=null,function(G){for(var ie,fe=-1,xe=F.length;++fe<xe;)z[(ie=F[fe]).i]=ie.x(G);return z.join("")}}function Qo(ce,L){return L=(L-=ce=+ce)||1/L,function(z){return(z-ce)/L}}function mo(ce,L){return L=(L-=ce=+ce)||1/L,function(z){return Math.max(0,Math.min(1,(z-ce)/L))}}function Zi(ce){for(var L=ce.source,z=ce.target,F=function(fe,xe){if(fe===xe)return fe;for(var ke=je(fe),Ce=je(xe),Ue=ke.pop(),$e=Ce.pop(),at=null;Ue===$e;)at=Ue,Ue=ke.pop(),$e=Ce.pop();return at}(L,z),G=[L];L!==F;)G.push(L=L.parent);for(var ie=G.length;z!==F;)G.splice(ie,0,z),z=z.parent;return G}function je(ce){for(var L=[],z=ce.parent;null!=z;)L.push(ce),ce=z,z=z.parent;return L.push(ce),L}function We(ce){ce.fixed|=2}function rt(ce){ce.fixed&=-7}function ut(ce){ce.fixed|=4,ce.px=ce.x,ce.py=ce.y}function yt(ce){ce.fixed&=-5}m.interpolateTransform=So,m.layout={},m.layout.bundle=function(){return function(ce){for(var L=[],z=-1,F=ce.length;++z<F;)L.push(Zi(ce[z]));return L}},m.layout.chord=function(){var ce,L,z,F,G,ie,fe,xe={},ke=0;function Ce(){var $e,at,kt,Pt,St,Et={},wt=[],jt=m.range(F),Nt=[];for(ce=[],L=[],$e=0,Pt=-1;++Pt<F;){for(at=0,St=-1;++St<F;)at+=z[Pt][St];wt.push(at),Nt.push(m.range(F)),$e+=at}for(G&&jt.sort(function(yn,pn){return G(wt[yn],wt[pn])}),ie&&Nt.forEach(function(yn,pn){yn.sort(function(Yn,ti){return ie(z[pn][Yn],z[pn][ti])})}),$e=(Zt-ke*F)/$e,at=0,Pt=-1;++Pt<F;){for(kt=at,St=-1;++St<F;){var Gt=jt[Pt],lr=Nt[Gt][St],yr=z[Gt][lr],Or=at,Cr=at+=yr*$e;Et[Gt+"-"+lr]={index:Gt,subindex:lr,startAngle:Or,endAngle:Cr,value:yr}}L[Gt]={index:Gt,startAngle:kt,endAngle:at,value:wt[Gt]},at+=ke}for(Pt=-1;++Pt<F;)for(St=Pt-1;++St<F;){var tn=Et[Pt+"-"+St],en=Et[St+"-"+Pt];(tn.value||en.value)&&ce.push(tn.value<en.value?{source:en,target:tn}:{source:tn,target:en})}fe&&Ue()}function Ue(){ce.sort(function($e,at){return fe(($e.source.value+$e.target.value)/2,(at.source.value+at.target.value)/2)})}return xe.matrix=function($e){return arguments.length?(F=(z=$e)&&z.length,ce=L=null,xe):z},xe.padding=function($e){return arguments.length?(ke=$e,ce=L=null,xe):ke},xe.sortGroups=function($e){return arguments.length?(G=$e,ce=L=null,xe):G},xe.sortSubgroups=function($e){return arguments.length?(ie=$e,ce=null,xe):ie},xe.sortChords=function($e){return arguments.length?(fe=$e,ce&&Ue(),xe):fe},xe.chords=function(){return ce||Ce(),ce},xe.groups=function(){return L||Ce(),L},xe},m.layout.force=function(){var ce,L,z,F,G,ie,fe={},xe=m.dispatch("start","tick","end"),ke=[1,1],Ce=.9,Ue=gt,$e=Lt,at=-30,kt=er,Pt=.1,St=.64,Et=[],wt=[];function jt(Gt){return function(lr,yr,Or,Cr){if(lr.point!==Gt){var tn=lr.cx-Gt.x,en=lr.cy-Gt.y,yn=Cr-yr,pn=tn*tn+en*en;if(yn*yn/St<pn){if(pn<kt){var Yn=lr.charge/pn;Gt.px-=tn*Yn,Gt.py-=en*Yn}return!0}lr.point&&pn&&pn<kt&&(Gt.px-=tn*(Yn=lr.pointCharge/pn),Gt.py-=en*Yn)}return!lr.charge}}function Nt(Gt){Gt.px=m.event.x,Gt.py=m.event.y,fe.resume()}return fe.tick=function(){if((z*=.99)<.005)return ce=null,xe.end({type:"end",alpha:z=0}),!0;var Gt,lr,yr,Or,Cr,tn,en,yn,pn,Yn=Et.length,ti=wt.length;for(lr=0;lr<ti;++lr)Or=(yr=wt[lr]).source,(tn=(yn=(Cr=yr.target).x-Or.x)*yn+(pn=Cr.y-Or.y)*pn)&&(yn*=tn=z*G[lr]*((tn=Math.sqrt(tn))-F[lr])/tn,pn*=tn,Cr.x-=yn*(en=Or.weight+Cr.weight?Or.weight/(Or.weight+Cr.weight):.5),Cr.y-=pn*en,Or.x+=yn*(en=1-en),Or.y+=pn*en);if((en=z*Pt)&&(yn=ke[0]/2,pn=ke[1]/2,lr=-1,en))for(;++lr<Yn;)(yr=Et[lr]).x+=(yn-yr.x)*en,yr.y+=(pn-yr.y)*en;if(at)for(function gi(Jr,In,ri){var Jn=0,ui=0;if(Jr.charge=0,!Jr.leaf)for(var yi,Oi=Jr.nodes,ai=Oi.length,Mi=-1;++Mi<ai;)null!=(yi=Oi[Mi])&&(gi(yi,In,ri),Jr.charge+=yi.charge,Jn+=yi.charge*yi.cx,ui+=yi.charge*yi.cy);if(Jr.point){Jr.leaf||(Jr.point.x+=Math.random()-.5,Jr.point.y+=Math.random()-.5);var wi=In*ri[Jr.point.index];Jr.charge+=Jr.pointCharge=wi,Jn+=wi*Jr.point.x,ui+=wi*Jr.point.y}Jr.cx=Jn/Jr.charge,Jr.cy=ui/Jr.charge}(Gt=m.geom.quadtree(Et),z,ie),lr=-1;++lr<Yn;)(yr=Et[lr]).fixed||Gt.visit(jt(yr));for(lr=-1;++lr<Yn;)(yr=Et[lr]).fixed?(yr.x=yr.px,yr.y=yr.py):(yr.x-=(yr.px-(yr.px=yr.x))*Ce,yr.y-=(yr.py-(yr.py=yr.y))*Ce);xe.tick({type:"tick",alpha:z})},fe.nodes=function(Gt){return arguments.length?(Et=Gt,fe):Et},fe.links=function(Gt){return arguments.length?(wt=Gt,fe):wt},fe.size=function(Gt){return arguments.length?(ke=Gt,fe):ke},fe.linkDistance=function(Gt){return arguments.length?(Ue="function"==typeof Gt?Gt:+Gt,fe):Ue},fe.distance=fe.linkDistance,fe.linkStrength=function(Gt){return arguments.length?($e="function"==typeof Gt?Gt:+Gt,fe):$e},fe.friction=function(Gt){return arguments.length?(Ce=+Gt,fe):Ce},fe.charge=function(Gt){return arguments.length?(at="function"==typeof Gt?Gt:+Gt,fe):at},fe.chargeDistance=function(Gt){return arguments.length?(kt=Gt*Gt,fe):Math.sqrt(kt)},fe.gravity=function(Gt){return arguments.length?(Pt=+Gt,fe):Pt},fe.theta=function(Gt){return arguments.length?(St=Gt*Gt,fe):Math.sqrt(St)},fe.alpha=function(Gt){return arguments.length?(Gt=+Gt,z?Gt>0?z=Gt:(ce.c=null,ce.t=NaN,ce=null,xe.end({type:"end",alpha:z=0})):Gt>0&&(xe.start({type:"start",alpha:z=Gt}),ce=on(fe.tick)),fe):z},fe.start=function(){var Gt,lr,yr,Or=Et.length,Cr=wt.length,tn=ke[0],en=ke[1];for(Gt=0;Gt<Or;++Gt)(yr=Et[Gt]).index=Gt,yr.weight=0;for(Gt=0;Gt<Cr;++Gt)"number"==typeof(yr=wt[Gt]).source&&(yr.source=Et[yr.source]),"number"==typeof yr.target&&(yr.target=Et[yr.target]),++yr.source.weight,++yr.target.weight;for(Gt=0;Gt<Or;++Gt)yr=Et[Gt],isNaN(yr.x)&&(yr.x=yn("x",tn)),isNaN(yr.y)&&(yr.y=yn("y",en)),isNaN(yr.px)&&(yr.px=yr.x),isNaN(yr.py)&&(yr.py=yr.y);if(F=[],"function"==typeof Ue)for(Gt=0;Gt<Cr;++Gt)F[Gt]=+Ue.call(this,wt[Gt],Gt);else for(Gt=0;Gt<Cr;++Gt)F[Gt]=Ue;if(G=[],"function"==typeof $e)for(Gt=0;Gt<Cr;++Gt)G[Gt]=+$e.call(this,wt[Gt],Gt);else for(Gt=0;Gt<Cr;++Gt)G[Gt]=$e;if(ie=[],"function"==typeof at)for(Gt=0;Gt<Or;++Gt)ie[Gt]=+at.call(this,Et[Gt],Gt);else for(Gt=0;Gt<Or;++Gt)ie[Gt]=at;function yn(pn,Yn){if(!lr){for(lr=new Array(Or),In=0;In<Or;++In)lr[In]=[];for(In=0;In<Cr;++In){var ti=wt[In];lr[ti.source.index].push(ti.target),lr[ti.target.index].push(ti.source)}}for(var gi,Jr=lr[Gt],In=-1,ri=Jr.length;++In<ri;)if(!isNaN(gi=Jr[In][pn]))return gi;return Math.random()*Yn}return fe.resume()},fe.resume=function(){return fe.alpha(.1)},fe.stop=function(){return fe.alpha(0)},fe.drag=function(){if(L||(L=m.behavior.drag().origin(E).on("dragstart.force",We).on("drag.force",Nt).on("dragend.force",rt)),!arguments.length)return L;this.on("mouseover.force",ut).on("mouseout.force",yt).call(L)},m.rebind(fe,xe,"on")};var gt=20,Lt=1,er=1/0;function nr(ce,L){return m.rebind(ce,L,"sort","children","value"),ce.nodes=ce,ce.links=Nr,ce}function Kt(ce,L){for(var z=[ce];null!=(ce=z.pop());)if(L(ce),(G=ce.children)&&(F=G.length))for(var F,G;--F>=0;)z.push(G[F])}function ir(ce,L){for(var z=[ce],F=[];null!=(ce=z.pop());)if(F.push(ce),(ie=ce.children)&&(G=ie.length))for(var G,ie,fe=-1;++fe<G;)z.push(ie[fe]);for(;null!=(ce=F.pop());)L(ce)}function vr(ce){return ce.children}function wr(ce){return ce.value}function Ar(ce,L){return L.value-ce.value}function Nr(ce){return m.merge(ce.map(function(L){return(L.children||[]).map(function(z){return{source:L,target:z}})}))}m.layout.hierarchy=function(){var ce=Ar,L=vr,z=wr;function F(G){var ie,fe=[G],xe=[];for(G.depth=0;null!=(ie=fe.pop());)if(xe.push(ie),(Ce=L.call(F,ie,ie.depth))&&(ke=Ce.length)){for(var ke,Ce,Ue;--ke>=0;)fe.push(Ue=Ce[ke]),Ue.parent=ie,Ue.depth=ie.depth+1;z&&(ie.value=0),ie.children=Ce}else z&&(ie.value=+z.call(F,ie,ie.depth)||0),delete ie.children;return ir(G,function($e){var at,kt;ce&&(at=$e.children)&&at.sort(ce),z&&(kt=$e.parent)&&(kt.value+=$e.value)}),xe}return F.sort=function(G){return arguments.length?(ce=G,F):ce},F.children=function(G){return arguments.length?(L=G,F):L},F.value=function(G){return arguments.length?(z=G,F):z},F.revalue=function(G){return z&&(Kt(G,function(ie){ie.children&&(ie.value=0)}),ir(G,function(ie){var fe;ie.children||(ie.value=+z.call(F,ie,ie.depth)||0),(fe=ie.parent)&&(fe.value+=ie.value)})),G},F},m.layout.partition=function(){var ce=m.layout.hierarchy(),L=[1,1];function z(F,G){var ie=ce.call(this,F,G);return function fe(xe,ke,Ce,Ue){var $e=xe.children;if(xe.x=ke,xe.y=xe.depth*Ue,xe.dx=Ce,xe.dy=Ue,$e&&(at=$e.length)){var at,kt,Pt,St=-1;for(Ce=xe.value?Ce/xe.value:0;++St<at;)fe(kt=$e[St],ke,Pt=kt.value*Ce,Ue),ke+=Pt}}(ie[0],0,L[0],L[1]/function fe(xe){var ke=xe.children,Ce=0;if(ke&&(Ue=ke.length))for(var Ue,$e=-1;++$e<Ue;)Ce=Math.max(Ce,fe(ke[$e]));return 1+Ce}(ie[0])),ie}return z.size=function(F){return arguments.length?(L=F,z):L},nr(z,ce)},m.layout.pie=function(){var ce=Number,L=un,z=0,F=Zt,G=0;function ie(fe){var xe,ke=fe.length,Ce=fe.map(function(jt,Nt){return+ce.call(ie,jt,Nt)}),Ue=+("function"==typeof z?z.apply(this,arguments):z),$e=("function"==typeof F?F.apply(this,arguments):F)-Ue,at=Math.min(Math.abs($e)/ke,+("function"==typeof G?G.apply(this,arguments):G)),kt=at*($e<0?-1:1),Pt=m.sum(Ce),St=Pt?($e-ke*kt)/Pt:0,Et=m.range(ke),wt=[];return null!=L&&Et.sort(L===un?function(jt,Nt){return Ce[Nt]-Ce[jt]}:function(jt,Nt){return L(fe[jt],fe[Nt])}),Et.forEach(function(jt){wt[jt]={data:fe[jt],value:xe=Ce[jt],startAngle:Ue,endAngle:Ue+=xe*St+kt,padAngle:at}}),wt}return ie.value=function(fe){return arguments.length?(ce=fe,ie):ce},ie.sort=function(fe){return arguments.length?(L=fe,ie):L},ie.startAngle=function(fe){return arguments.length?(z=fe,ie):z},ie.endAngle=function(fe){return arguments.length?(F=fe,ie):F},ie.padAngle=function(fe){return arguments.length?(G=fe,ie):G},ie};var un={};function gn(ce){return ce.x}function Rn(ce){return ce.y}function jn(ce,L,z){ce.y0=L,ce.y=z}m.layout.stack=function(){var ce=E,L=bi,z=Li,F=jn,G=gn,ie=Rn;function fe(xe,ke){if(!(at=xe.length))return xe;var Ce=xe.map(function(jt,Nt){return ce.call(fe,jt,Nt)}),Ue=Ce.map(function(jt){return jt.map(function(Nt,Gt){return[G.call(fe,Nt,Gt),ie.call(fe,Nt,Gt)]})}),$e=L.call(fe,Ue,ke);Ce=m.permute(Ce,$e),Ue=m.permute(Ue,$e);var at,kt,Pt,St,Et=z.call(fe,Ue,ke),wt=Ce[0].length;for(Pt=0;Pt<wt;++Pt)for(F.call(fe,Ce[0][Pt],St=Et[Pt],Ue[0][Pt][1]),kt=1;kt<at;++kt)F.call(fe,Ce[kt][Pt],St+=Ue[kt-1][Pt][1],Ue[kt][Pt][1]);return xe}return fe.values=function(xe){return arguments.length?(ce=xe,fe):ce},fe.order=function(xe){return arguments.length?(L="function"==typeof xe?xe:Zn.get(xe)||bi,fe):L},fe.offset=function(xe){return arguments.length?(z="function"==typeof xe?xe:Vn.get(xe)||Li,fe):z},fe.x=function(xe){return arguments.length?(G=xe,fe):G},fe.y=function(xe){return arguments.length?(ie=xe,fe):ie},fe.out=function(xe){return arguments.length?(F=xe,fe):F},fe};var Zn=m.map({"inside-out":function(ce){var L,z,F=ce.length,G=ce.map(Gi),ie=ce.map(ji),fe=m.range(F).sort(function($e,at){return G[$e]-G[at]}),xe=0,ke=0,Ce=[],Ue=[];for(L=0;L<F;++L)z=fe[L],xe<ke?(xe+=ie[z],Ce.push(z)):(ke+=ie[z],Ue.push(z));return Ue.reverse().concat(Ce)},reverse:function(ce){return m.range(ce.length).reverse()},default:bi}),Vn=m.map({silhouette:function(ce){var L,z,F,G=ce.length,ie=ce[0].length,fe=[],xe=0,ke=[];for(z=0;z<ie;++z){for(L=0,F=0;L<G;L++)F+=ce[L][z][1];F>xe&&(xe=F),fe.push(F)}for(z=0;z<ie;++z)ke[z]=(xe-fe[z])/2;return ke},wiggle:function(ce){var L,z,F,G,ie,fe,xe,ke,Ce,Ue=ce.length,$e=ce[0],at=$e.length,kt=[];for(kt[0]=ke=Ce=0,z=1;z<at;++z){for(L=0,G=0;L<Ue;++L)G+=ce[L][z][1];for(L=0,ie=0,xe=$e[z][0]-$e[z-1][0];L<Ue;++L){for(F=0,fe=(ce[L][z][1]-ce[L][z-1][1])/(2*xe);F<L;++F)fe+=(ce[F][z][1]-ce[F][z-1][1])/xe;ie+=fe*ce[L][z][1]}kt[z]=ke-=G?ie/G*xe:0,ke<Ce&&(Ce=ke)}for(z=0;z<at;++z)kt[z]-=Ce;return kt},expand:function(ce){var L,z,F,G=ce.length,ie=ce[0].length,fe=1/G,xe=[];for(z=0;z<ie;++z){for(L=0,F=0;L<G;L++)F+=ce[L][z][1];if(F)for(L=0;L<G;L++)ce[L][z][1]/=F;else for(L=0;L<G;L++)ce[L][z][1]=fe}for(z=0;z<ie;++z)xe[z]=0;return xe},zero:Li});function bi(ce){return m.range(ce.length)}function Li(ce){for(var L=-1,z=ce[0].length,F=[];++L<z;)F[L]=0;return F}function Gi(ce){for(var L,z=1,F=0,G=ce[0][1],ie=ce.length;z<ie;++z)(L=ce[z][1])>G&&(F=z,G=L);return F}function ji(ce){return ce.reduce(Yi,0)}function Yi(ce,L){return ce+L[1]}function _a(ce,L){return da(ce,Math.ceil(Math.log(L.length)/Math.LN2+1))}function da(ce,L){for(var z=-1,F=+ce[0],G=(ce[1]-F)/L,ie=[];++z<=L;)ie[z]=G*z+F;return ie}function aa(ce){return[m.min(ce),m.max(ce)]}function oa(ce,L){return ce.value-L.value}function ca(ce,L){var z=ce._pack_next;ce._pack_next=L,L._pack_prev=ce,L._pack_next=z,z._pack_prev=L}function ot(ce,L){ce._pack_next=L,L._pack_prev=ce}function tt(ce,L){var z=L.x-ce.x,F=L.y-ce.y,G=ce.r+L.r;return.999*G*G>z*z+F*F}function Ge(ce){if((L=ce.children)&&(ke=L.length)){var L,z,F,G,ie,fe,xe,ke,Ce=1/0,Ue=-1/0,$e=1/0,at=-1/0;if(L.forEach(Bt),(z=L[0]).x=-z.r,z.y=0,Nt(z),ke>1&&((F=L[1]).x=F.r,F.y=0,Nt(F),ke>2))for(kn(z,F,G=L[2]),Nt(G),ca(z,G),z._pack_prev=G,ca(G,F),F=z._pack_next,ie=3;ie<ke;ie++){kn(z,F,G=L[ie]);var kt=0,Pt=1,St=1;for(fe=F._pack_next;fe!==F;fe=fe._pack_next,Pt++)if(tt(fe,G)){kt=1;break}if(1==kt)for(xe=z._pack_prev;xe!==fe._pack_prev&&!tt(xe,G);xe=xe._pack_prev,St++);kt?(Pt<St||Pt==St&&F.r<z.r?ot(z,F=fe):ot(z=xe,F),ie--):(ca(z,G),F=G,Nt(G))}var Et=(Ce+Ue)/2,wt=($e+at)/2,jt=0;for(ie=0;ie<ke;ie++)(G=L[ie]).x-=Et,G.y-=wt,jt=Math.max(jt,G.r+Math.sqrt(G.x*G.x+G.y*G.y));ce.r=jt,L.forEach(Ur)}function Nt(Gt){Ce=Math.min(Gt.x-Gt.r,Ce),Ue=Math.max(Gt.x+Gt.r,Ue),$e=Math.min(Gt.y-Gt.r,$e),at=Math.max(Gt.y+Gt.r,at)}}function Bt(ce){ce._pack_next=ce._pack_prev=ce}function Ur(ce){delete ce._pack_next,delete ce._pack_prev}function kn(ce,L,z){var F=ce.r+z.r,G=L.x-ce.x,ie=L.y-ce.y;if(F&&(G||ie)){var fe=L.r+z.r,xe=G*G+ie*ie,ke=.5+((F*=F)-(fe*=fe))/(2*xe),Ce=Math.sqrt(Math.max(0,2*fe*(F+xe)-(F-=xe)*F-fe*fe))/(2*xe);z.x=ce.x+ke*G+Ce*ie,z.y=ce.y+ke*ie-Ce*G}else z.x=ce.x+F,z.y=ce.y}function ft(ce,L){return ce.parent==L.parent?1:2}function zt(ce){var L=ce.children;return L.length?L[0]:ce.t}function sr(ce){var L,z=ce.children;return(L=z.length)?z[L-1]:ce.t}function Yt(ce,L,z){var F=z/(L.i-ce.i);L.c-=F,L.s+=z,ce.c+=F,L.z+=z,L.m+=z}function hr(ce,L,z){return ce.a.parent===L.parent?ce.a:z}function Ir(ce){return{x:ce.x,y:ce.y,dx:ce.dx,dy:ce.dy}}function Gr(ce,L){var z=ce.x+L[3],F=ce.y+L[0],G=ce.dx-L[1]-L[3],ie=ce.dy-L[0]-L[2];return G<0&&(z+=G/2,G=0),ie<0&&(F+=ie/2,ie=0),{x:z,y:F,dx:G,dy:ie}}function $r(ce){var L=ce[0],z=ce[ce.length-1];return L<z?[L,z]:[z,L]}function dn(ce){return ce.rangeExtent?ce.rangeExtent():$r(ce.range())}function hn(ce,L,z,F){var G=z(ce[0],ce[1]),ie=F(L[0],L[1]);return function(fe){return ie(G(fe))}}function _n(ce,L){var z,F=0,G=ce.length-1,ie=ce[F],fe=ce[G];return fe<ie&&(z=F,F=G,G=z,z=ie,ie=fe,fe=z),ce[F]=L.floor(ie),ce[G]=L.ceil(fe),ce}function Cn(ce){return ce?{floor:function(L){return Math.floor(L/ce)*ce},ceil:function(L){return Math.ceil(L/ce)*ce}}:mn}m.layout.histogram=function(){var ce=!0,L=Number,z=aa,F=_a;function G(ie,fe){for(var xe,ke,Ce=[],Ue=ie.map(L,this),$e=z.call(this,Ue,fe),at=F.call(this,$e,Ue,fe),kt=(fe=-1,Ue.length),Pt=at.length-1,St=ce?1:1/kt;++fe<Pt;)(xe=Ce[fe]=[]).dx=at[fe+1]-(xe.x=at[fe]),xe.y=0;if(Pt>0)for(fe=-1;++fe<kt;)(ke=Ue[fe])>=$e[0]&&ke<=$e[1]&&((xe=Ce[m.bisect(at,ke,1,Pt)-1]).y+=St,xe.push(ie[fe]));return Ce}return G.value=function(ie){return arguments.length?(L=ie,G):L},G.range=function(ie){return arguments.length?(z=xr(ie),G):z},G.bins=function(ie){return arguments.length?(F="number"==typeof ie?function(fe){return da(fe,ie)}:xr(ie),G):F},G.frequency=function(ie){return arguments.length?(ce=!!ie,G):ce},G},m.layout.pack=function(){var ce,L=m.layout.hierarchy().sort(oa),z=0,F=[1,1];function G(ie,fe){var xe=L.call(this,ie,fe),ke=xe[0],Ce=F[0],Ue=F[1],$e=null==ce?Math.sqrt:"function"==typeof ce?ce:function(){return ce};if(ke.x=ke.y=0,ir(ke,function(kt){kt.r=+$e(kt.value)}),ir(ke,Ge),z){var at=z*(ce?1:Math.max(2*ke.r/Ce,2*ke.r/Ue))/2;ir(ke,function(kt){kt.r+=at}),ir(ke,Ge),ir(ke,function(kt){kt.r-=at})}return function kt(Pt,St,Et,wt){var jt=Pt.children;if(Pt.x=St+=wt*Pt.x,Pt.y=Et+=wt*Pt.y,Pt.r*=wt,jt)for(var Nt=-1,Gt=jt.length;++Nt<Gt;)kt(jt[Nt],St,Et,wt)}(ke,Ce/2,Ue/2,ce?1:1/Math.max(2*ke.r/Ce,2*ke.r/Ue)),xe}return G.size=function(ie){return arguments.length?(F=ie,G):F},G.radius=function(ie){return arguments.length?(ce=null==ie||"function"==typeof ie?ie:+ie,G):ce},G.padding=function(ie){return arguments.length?(z=+ie,G):z},nr(G,L)},m.layout.tree=function(){var ce=m.layout.hierarchy().sort(null).value(null),L=ft,z=[1,1],F=null;function G(ke,Ce){var Ue=ce.call(this,ke,Ce),$e=Ue[0],at=function(Nt){for(var Gt,lr={A:null,children:[Nt]},yr=[lr];null!=(Gt=yr.pop());)for(var Or,Cr=Gt.children,tn=0,en=Cr.length;tn<en;++tn)yr.push((Cr[tn]=Or={_:Cr[tn],parent:Gt,children:(Or=Cr[tn].children)&&Or.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:tn}).a=Or);return lr.children[0]}($e);if(ir(at,ie),at.parent.m=-at.z,Kt(at,fe),F)Kt($e,xe);else{var kt=$e,Pt=$e,St=$e;Kt($e,function(Nt){Nt.x<kt.x&&(kt=Nt),Nt.x>Pt.x&&(Pt=Nt),Nt.depth>St.depth&&(St=Nt)});var Et=L(kt,Pt)/2-kt.x,wt=z[0]/(Pt.x+L(Pt,kt)/2+Et),jt=z[1]/(St.depth||1);Kt($e,function(Nt){Nt.x=(Nt.x+Et)*wt,Nt.y=Nt.depth*jt})}return Ue}function ie(ke){var Ce=ke.children,Ue=ke.parent.children,$e=ke.i?Ue[ke.i-1]:null;if(Ce.length){!function(kt){for(var Pt,St=0,Et=0,wt=kt.children,jt=wt.length;--jt>=0;)(Pt=wt[jt]).z+=St,Pt.m+=St,St+=Pt.s+(Et+=Pt.c)}(ke);var at=(Ce[0].z+Ce[Ce.length-1].z)/2;$e?(ke.z=$e.z+L(ke._,$e._),ke.m=ke.z-at):ke.z=at}else $e&&(ke.z=$e.z+L(ke._,$e._));ke.parent.A=function(kt,Pt,St){if(Pt){for(var Et,wt=kt,jt=kt,Nt=Pt,Gt=wt.parent.children[0],lr=wt.m,yr=jt.m,Or=Nt.m,Cr=Gt.m;Nt=sr(Nt),wt=zt(wt),Nt&&wt;)Gt=zt(Gt),(jt=sr(jt)).a=kt,(Et=Nt.z+Or-wt.z-lr+L(Nt._,wt._))>0&&(Yt(hr(Nt,kt,St),kt,Et),lr+=Et,yr+=Et),Or+=Nt.m,lr+=wt.m,Cr+=Gt.m,yr+=jt.m;Nt&&!sr(jt)&&(jt.t=Nt,jt.m+=Or-yr),wt&&!zt(Gt)&&(Gt.t=wt,Gt.m+=lr-Cr,St=kt)}return St}(ke,$e,ke.parent.A||Ue[0])}function fe(ke){ke._.x=ke.z+ke.parent.m,ke.m+=ke.parent.m}function xe(ke){ke.x*=z[0],ke.y=ke.depth*z[1]}return G.separation=function(ke){return arguments.length?(L=ke,G):L},G.size=function(ke){return arguments.length?(F=null==(z=ke)?xe:null,G):F?null:z},G.nodeSize=function(ke){return arguments.length?(F=null==(z=ke)?null:xe,G):F?z:null},nr(G,ce)},m.layout.cluster=function(){var ce=m.layout.hierarchy().sort(null).value(null),L=ft,z=[1,1],F=!1;function G(ie,fe){var xe,ke=ce.call(this,ie,fe),Ce=ke[0],Ue=0;ir(Ce,function(St){var wt,Et=St.children;Et&&Et.length?(St.x=(wt=Et).reduce(function(jt,Nt){return jt+Nt.x},0)/wt.length,St.y=function(wt){return 1+m.max(wt,function(jt){return jt.y})}(Et)):(St.x=xe?Ue+=L(St,xe):0,St.y=0,xe=St)});var $e=function St(Et){var wt=Et.children;return wt&&wt.length?St(wt[0]):Et}(Ce),at=function St(Et){var wt,jt=Et.children;return jt&&(wt=jt.length)?St(jt[wt-1]):Et}(Ce),kt=$e.x-L($e,at)/2,Pt=at.x+L(at,$e)/2;return ir(Ce,F?function(St){St.x=(St.x-Ce.x)*z[0],St.y=(Ce.y-St.y)*z[1]}:function(St){St.x=(St.x-kt)/(Pt-kt)*z[0],St.y=(1-(Ce.y?St.y/Ce.y:1))*z[1]}),ke}return G.separation=function(ie){return arguments.length?(L=ie,G):L},G.size=function(ie){return arguments.length?(F=null==(z=ie),G):F?null:z},G.nodeSize=function(ie){return arguments.length?(F=null!=(z=ie),G):F?z:null},nr(G,ce)},m.layout.treemap=function(){var ce,L=m.layout.hierarchy(),z=Math.round,F=[1,1],G=null,ie=Ir,fe=!1,xe="squarify",ke=.5*(1+Math.sqrt(5));function Ce(St,Et){for(var wt,jt,Nt=-1,Gt=St.length;++Nt<Gt;)jt=(wt=St[Nt]).value*(Et<0?0:Et),wt.area=isNaN(jt)||jt<=0?0:jt}function Ue(St){var Et=St.children;if(Et&&Et.length){var wt,jt,Nt,Gt=ie(St),lr=[],yr=Et.slice(),Or=1/0,Cr="slice"===xe?Gt.dx:"dice"===xe?Gt.dy:"slice-dice"===xe?1&St.depth?Gt.dy:Gt.dx:Math.min(Gt.dx,Gt.dy);for(Ce(yr,Gt.dx*Gt.dy/St.value),lr.area=0;(Nt=yr.length)>0;)lr.push(wt=yr[Nt-1]),lr.area+=wt.area,"squarify"!==xe||(jt=at(lr,Cr))<=Or?(yr.pop(),Or=jt):(lr.area-=lr.pop().area,kt(lr,Cr,Gt,!1),Cr=Math.min(Gt.dx,Gt.dy),lr.length=lr.area=0,Or=1/0);lr.length&&(kt(lr,Cr,Gt,!0),lr.length=lr.area=0),Et.forEach(Ue)}}function $e(St){var Et=St.children;if(Et&&Et.length){var wt,jt=ie(St),Nt=Et.slice(),Gt=[];for(Ce(Nt,jt.dx*jt.dy/St.value),Gt.area=0;wt=Nt.pop();)Gt.push(wt),Gt.area+=wt.area,null!=wt.z&&(kt(Gt,wt.z?jt.dx:jt.dy,jt,!Nt.length),Gt.length=Gt.area=0);Et.forEach($e)}}function at(St,Et){for(var wt,jt=St.area,Nt=0,Gt=1/0,lr=-1,yr=St.length;++lr<yr;)(wt=St[lr].area)&&(wt<Gt&&(Gt=wt),wt>Nt&&(Nt=wt));return Et*=Et,(jt*=jt)?Math.max(Et*Nt*ke/jt,jt/(Et*Gt*ke)):1/0}function kt(St,Et,wt,jt){var Nt,Gt=-1,lr=St.length,yr=wt.x,Or=wt.y,Cr=Et?z(St.area/Et):0;if(Et==wt.dx){for((jt||Cr>wt.dy)&&(Cr=wt.dy);++Gt<lr;)(Nt=St[Gt]).x=yr,Nt.y=Or,Nt.dy=Cr,yr+=Nt.dx=Math.min(wt.x+wt.dx-yr,Cr?z(Nt.area/Cr):0);Nt.z=!0,Nt.dx+=wt.x+wt.dx-yr,wt.y+=Cr,wt.dy-=Cr}else{for((jt||Cr>wt.dx)&&(Cr=wt.dx);++Gt<lr;)(Nt=St[Gt]).x=yr,Nt.y=Or,Nt.dx=Cr,Or+=Nt.dy=Math.min(wt.y+wt.dy-Or,Cr?z(Nt.area/Cr):0);Nt.z=!1,Nt.dy+=wt.y+wt.dy-Or,wt.x+=Cr,wt.dx-=Cr}}function Pt(St){var Et=ce||L(St),wt=Et[0];return wt.x=wt.y=0,wt.value?(wt.dx=F[0],wt.dy=F[1]):wt.dx=wt.dy=0,ce&&L.revalue(wt),Ce([wt],wt.dx*wt.dy/wt.value),(ce?$e:Ue)(wt),fe&&(ce=Et),Et}return Pt.size=function(St){return arguments.length?(F=St,Pt):F},Pt.padding=function(St){if(!arguments.length)return G;function Et(Nt){var Gt=St.call(Pt,Nt,Nt.depth);return null==Gt?Ir(Nt):Gr(Nt,"number"==typeof Gt?[Gt,Gt,Gt,Gt]:Gt)}function wt(Nt){return Gr(Nt,St)}var jt;return ie=null==(G=St)?Ir:"function"==(jt=typeof St)?Et:("number"===jt&&(St=[St,St,St,St]),wt),Pt},Pt.round=function(St){return arguments.length?(z=St?Math.round:Number,Pt):z!=Number},Pt.sticky=function(St){return arguments.length?(fe=St,ce=null,Pt):fe},Pt.ratio=function(St){return arguments.length?(ke=St,Pt):ke},Pt.mode=function(St){return arguments.length?(xe=St+"",Pt):xe},nr(Pt,L)},m.random={normal:function(ce,L){var z=arguments.length;return z<2&&(L=1),z<1&&(ce=0),function(){var F,G,ie;do{ie=(F=2*Math.random()-1)*F+(G=2*Math.random()-1)*G}while(!ie||ie>1);return ce+L*F*Math.sqrt(-2*Math.log(ie)/ie)}},logNormal:function(){var ce=m.random.normal.apply(m,arguments);return function(){return Math.exp(ce())}},bates:function(ce){var L=m.random.irwinHall(ce);return function(){return L()/ce}},irwinHall:function(ce){return function(){for(var L=0,z=0;z<ce;z++)L+=Math.random();return L}}},m.scale={};var mn={floor:E,ceil:E};function Ln(ce,L,z,F){var G=[],ie=[],fe=0,xe=Math.min(ce.length,L.length)-1;for(ce[xe]<ce[0]&&(ce=ce.slice().reverse(),L=L.slice().reverse());++fe<=xe;)G.push(z(ce[fe-1],ce[fe])),ie.push(F(L[fe-1],L[fe]));return function(ke){var Ce=m.bisect(ce,ke,1,xe)-1;return ie[Ce](G[Ce](ke))}}function Un(ce,L){return m.rebind(ce,L,"range","rangeRound","interpolate","clamp")}function Wn(ce,L){return _n(ce,Cn(fi(ce,L)[2])),_n(ce,Cn(fi(ce,L)[2])),ce}function fi(ce,L){null==L&&(L=10);var z=$r(ce),F=z[1]-z[0],G=Math.pow(10,Math.floor(Math.log(F/L)/Math.LN10)),ie=L/F*G;return ie<=.15?G*=10:ie<=.35?G*=5:ie<=.75&&(G*=2),z[0]=Math.ceil(z[0]/G)*G,z[1]=Math.floor(z[1]/G)*G+.5*G,z[2]=G,z}function Qr(ce,L){return m.range.apply(m,fi(ce,L))}m.scale.linear=function(){return function ce(L,z,F,G){var ie,fe;function xe(){var Ce=Math.min(L.length,z.length)>2?Ln:hn,Ue=G?mo:Qo;return ie=Ce(L,z,Ue,F),fe=Ce(z,L,Ue,Ea),ke}function ke(Ce){return ie(Ce)}return ke.invert=function(Ce){return fe(Ce)},ke.domain=function(Ce){return arguments.length?(L=Ce.map(Number),xe()):L},ke.range=function(Ce){return arguments.length?(z=Ce,xe()):z},ke.rangeRound=function(Ce){return ke.range(Ce).interpolate(Mo)},ke.clamp=function(Ce){return arguments.length?(G=Ce,xe()):G},ke.interpolate=function(Ce){return arguments.length?(F=Ce,xe()):F},ke.ticks=function(Ce){return Qr(L,Ce)},ke.tickFormat=function(Ce,Ue){return d3_scale_linearTickFormat(L,Ce,Ue)},ke.nice=function(Ce){return Wn(L,Ce),xe()},ke.copy=function(){return ce(L,z,F,G)},xe()}([0,1],[0,1],Ea,!1)},m.scale.log=function(){return function ce(L,z,F,G){function ie(ke){return(F?Math.log(ke<0?0:ke):-Math.log(ke>0?0:-ke))/Math.log(z)}function fe(ke){return F?Math.pow(z,ke):-Math.pow(z,-ke)}function xe(ke){return L(ie(ke))}return xe.invert=function(ke){return fe(L.invert(ke))},xe.domain=function(ke){return arguments.length?(F=ke[0]>=0,L.domain((G=ke.map(Number)).map(ie)),xe):G},xe.base=function(ke){return arguments.length?(z=+ke,L.domain(G.map(ie)),xe):z},xe.nice=function(){var ke=_n(G.map(ie),F?Math:li);return L.domain(ke),G=ke.map(fe),xe},xe.ticks=function(){var ke=$r(G),Ce=[],Ue=ke[0],$e=ke[1],at=Math.floor(ie(Ue)),kt=Math.ceil(ie($e)),Pt=z%1?2:z;if(isFinite(kt-at)){if(F){for(;at<kt;at++)for(var St=1;St<Pt;St++)Ce.push(fe(at)*St);Ce.push(fe(at))}else for(Ce.push(fe(at));at++<kt;)for(St=Pt-1;St>0;St--)Ce.push(fe(at)*St);for(at=0;Ce[at]<Ue;at++);for(kt=Ce.length;Ce[kt-1]>$e;kt--);Ce=Ce.slice(at,kt)}return Ce},xe.copy=function(){return ce(L.copy(),z,F,G)},Un(xe,L)}(m.scale.linear().domain([0,1]),10,!0,[1,10])};var li={floor:function(ce){return-Math.ceil(-ce)},ceil:function(ce){return-Math.floor(-ce)}};function Fn(ce){return function(L){return L<0?-Math.pow(-L,ce):Math.pow(L,ce)}}m.scale.pow=function(){return function ce(L,z,F){var G=Fn(z),ie=Fn(1/z);function fe(xe){return L(G(xe))}return fe.invert=function(xe){return ie(L.invert(xe))},fe.domain=function(xe){return arguments.length?(L.domain((F=xe.map(Number)).map(G)),fe):F},fe.ticks=function(xe){return Qr(F,xe)},fe.tickFormat=function(xe,ke){return d3_scale_linearTickFormat(F,xe,ke)},fe.nice=function(xe){return fe.domain(Wn(F,xe))},fe.exponent=function(xe){return arguments.length?(G=Fn(z=xe),ie=Fn(1/z),L.domain(F.map(G)),fe):z},fe.copy=function(){return ce(L.copy(),z,F)},Un(fe,L)}(m.scale.linear(),1,[0,1])},m.scale.sqrt=function(){return m.scale.pow().exponent(.5)},m.scale.ordinal=function(){return function ce(L,z){var F,G,ie;function fe(ke){return G[((F.get(ke)||("range"===z.t?F.set(ke,L.push(ke)):NaN))-1)%G.length]}function xe(ke,Ce){return m.range(L.length).map(function(Ue){return ke+Ce*Ue})}return fe.domain=function(ke){if(!arguments.length)return L;L=[],F=new _;for(var Ce,Ue=-1,$e=ke.length;++Ue<$e;)F.has(Ce=ke[Ue])||F.set(Ce,L.push(Ce));return fe[z.t].apply(fe,z.a)},fe.range=function(ke){return arguments.length?(G=ke,ie=0,z={t:"range",a:arguments},fe):G},fe.rangePoints=function(ke,Ce){arguments.length<2&&(Ce=0);var Ue=ke[0],$e=ke[1],at=L.length<2?(Ue=(Ue+$e)/2,0):($e-Ue)/(L.length-1+Ce);return G=xe(Ue+at*Ce/2,at),ie=0,z={t:"rangePoints",a:arguments},fe},fe.rangeRoundPoints=function(ke,Ce){arguments.length<2&&(Ce=0);var Ue=ke[0],$e=ke[1],at=L.length<2?(Ue=$e=Math.round((Ue+$e)/2),0):($e-Ue)/(L.length-1+Ce)|0;return G=xe(Ue+Math.round(at*Ce/2+($e-Ue-(L.length-1+Ce)*at)/2),at),ie=0,z={t:"rangeRoundPoints",a:arguments},fe},fe.rangeBands=function(ke,Ce,Ue){arguments.length<2&&(Ce=0),arguments.length<3&&(Ue=Ce);var $e=ke[1]<ke[0],at=ke[$e-0],Pt=(ke[1-$e]-at)/(L.length-Ce+2*Ue);return G=xe(at+Pt*Ue,Pt),$e&&G.reverse(),ie=Pt*(1-Ce),z={t:"rangeBands",a:arguments},fe},fe.rangeRoundBands=function(ke,Ce,Ue){arguments.length<2&&(Ce=0),arguments.length<3&&(Ue=Ce);var $e=ke[1]<ke[0],at=ke[$e-0],kt=ke[1-$e],Pt=Math.floor((kt-at)/(L.length-Ce+2*Ue));return G=xe(at+Math.round((kt-at-(L.length-Ce)*Pt)/2),Pt),$e&&G.reverse(),ie=Math.round(Pt*(1-Ce)),z={t:"rangeRoundBands",a:arguments},fe},fe.rangeBand=function(){return ie},fe.rangeExtent=function(){return $r(z.a[0])},fe.copy=function(){return ce(L,z)},fe.domain(L)}([],{t:"range",a:[[]]})},m.scale.category10=function(){return m.scale.ordinal().range(qn)},m.scale.category20=function(){return m.scale.ordinal().range(oi)},m.scale.category20b=function(){return m.scale.ordinal().range(Pi)},m.scale.category20c=function(){return m.scale.ordinal().range(zi)};var qn=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Jt),oi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Jt),Pi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Jt),zi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Jt);function zn(){return 0}m.scale.quantile=function(){return function ce(L,z){var F;function G(){var fe=0,xe=z.length;for(F=[];++fe<xe;)F[fe-1]=m.quantile(L,fe/xe);return ie}function ie(fe){if(!isNaN(fe=+fe))return z[m.bisect(F,fe)]}return ie.domain=function(fe){return arguments.length?(L=fe.map(h).filter(s).sort(t),G()):L},ie.range=function(fe){return arguments.length?(z=fe,G()):z},ie.quantiles=function(){return F},ie.invertExtent=function(fe){return(fe=z.indexOf(fe))<0?[NaN,NaN]:[fe>0?F[fe-1]:L[0],fe<F.length?F[fe]:L[L.length-1]]},ie.copy=function(){return ce(L,z)},G()}([],[])},m.scale.quantize=function(){return function ce(L,z,F){var G,ie;function fe(ke){return F[Math.max(0,Math.min(ie,Math.floor(G*(ke-L))))]}function xe(){return G=F.length/(z-L),ie=F.length-1,fe}return fe.domain=function(ke){return arguments.length?(L=+ke[0],z=+ke[ke.length-1],xe()):[L,z]},fe.range=function(ke){return arguments.length?(F=ke,xe()):F},fe.invertExtent=function(ke){return[ke=(ke=F.indexOf(ke))<0?NaN:ke/G+L,ke+1/G]},fe.copy=function(){return ce(L,z,F)},xe()}(0,1,[0,1])},m.scale.threshold=function(){return function ce(L,z){function F(G){if(G<=G)return z[m.bisect(L,G)]}return F.domain=function(G){return arguments.length?(L=G,F):L},F.range=function(G){return arguments.length?(z=G,F):z},F.invertExtent=function(G){return G=z.indexOf(G),[L[G-1],L[G]]},F.copy=function(){return ce(L,z)},F}([.5],[0,1])},m.scale.identity=function(){return function ce(L){function z(F){return+F}return z.invert=z,z.domain=z.range=function(F){return arguments.length?(L=F.map(z),z):L},z.ticks=function(F){return Qr(L,F)},z.tickFormat=function(F,G){return d3_scale_linearTickFormat(L,F,G)},z.copy=function(){return ce(L)},z}([0,1])},m.svg={},m.svg.arc=function(){var ce=Di,L=_i,z=zn,F=Vi,G=Ui,ie=Ii,fe=sa;function xe(){var Ce=Math.max(0,+ce.apply(this,arguments)),Ue=Math.max(0,+L.apply(this,arguments)),$e=G.apply(this,arguments)-Xt,at=ie.apply(this,arguments)-Xt,kt=Math.abs(at-$e),Pt=$e>at?0:1;if(Ue<Ce&&(St=Ue,Ue=Ce,Ce=St),kt>=$t)return ke(Ue,Pt)+(Ce?ke(Ce,1-Pt):"")+"Z";var St,Et,wt,jt,Nt,Gt,lr,yr,Or,Cr,tn,en,yn=0,pn=0,Yn=[];if((jt=(+fe.apply(this,arguments)||0)/2)&&(wt=F===Vi?Math.sqrt(Ce*Ce+Ue*Ue):+F.apply(this,arguments),Pt||(pn*=-1),Ue&&(pn=Be(wt/Ue*Math.sin(jt))),Ce&&(yn=Be(wt/Ce*Math.sin(jt)))),Ue){Nt=Ue*Math.cos($e+pn),Gt=Ue*Math.sin($e+pn),lr=Ue*Math.cos(at-pn),yr=Ue*Math.sin(at-pn);var ti=Math.abs(at-$e-2*pn)<=Ht?0:1;if(pn&&ci(Nt,Gt,lr,yr)===Pt^ti){var gi=($e+at)/2;Nt=Ue*Math.cos(gi),Gt=Ue*Math.sin(gi),lr=yr=null}}else Nt=Gt=0;if(Ce){Or=Ce*Math.cos(at-yn),Cr=Ce*Math.sin(at-yn),tn=Ce*Math.cos($e+yn),en=Ce*Math.sin($e+yn);var Jr=Math.abs($e-at+2*yn)<=Ht?0:1;if(yn&&ci(Or,Cr,tn,en)===1-Pt^Jr){var In=($e+at)/2;Or=Ce*Math.cos(In),Cr=Ce*Math.sin(In),tn=en=null}}else Or=Cr=0;if(kt>xt&&(St=Math.min(Math.abs(Ue-Ce)/2,+z.apply(this,arguments)))>.001){Et=Ce<Ue^Pt?0:1;var ri=St,Jn=St;if(kt<Ht){var ui=null==tn?[Or,Cr]:null==lr?[Nt,Gt]:Mn([Nt,Gt],[tn,en],[lr,yr],[Or,Cr]),yi=Nt-ui[0],Oi=Gt-ui[1],ai=lr-ui[0],Mi=yr-ui[1],wi=1/Math.sin(Math.acos((yi*ai+Oi*Mi)/(Math.sqrt(yi*yi+Oi*Oi)*Math.sqrt(ai*ai+Mi*Mi)))/2),Ri=Math.sqrt(ui[0]*ui[0]+ui[1]*ui[1]);Jn=Math.min(St,(Ce-Ri)/(wi-1)),ri=Math.min(St,(Ue-Ri)/(wi+1))}if(null!=lr){var Si=Qi(null==tn?[Or,Cr]:[tn,en],[Nt,Gt],Ue,ri,Pt),Fi=Qi([lr,yr],[Or,Cr],Ue,ri,Pt);St===ri?Yn.push("M",Si[0],"A",ri,",",ri," 0 0,",Et," ",Si[1],"A",Ue,",",Ue," 0 ",1-Pt^ci(Si[1][0],Si[1][1],Fi[1][0],Fi[1][1]),",",Pt," ",Fi[1],"A",ri,",",ri," 0 0,",Et," ",Fi[0]):Yn.push("M",Si[0],"A",ri,",",ri," 0 1,",Et," ",Fi[0])}else Yn.push("M",Nt,",",Gt);if(null!=tn){var Xi=Qi([Nt,Gt],[tn,en],Ce,-Jn,Pt),ya=Qi([Or,Cr],null==lr?[Nt,Gt]:[lr,yr],Ce,-Jn,Pt);St===Jn?Yn.push("L",ya[0],"A",Jn,",",Jn," 0 0,",Et," ",ya[1],"A",Ce,",",Ce," 0 ",Pt^ci(ya[1][0],ya[1][1],Xi[1][0],Xi[1][1]),",",1-Pt," ",Xi[1],"A",Jn,",",Jn," 0 0,",Et," ",Xi[0]):Yn.push("L",ya[0],"A",Jn,",",Jn," 0 0,",Et," ",Xi[0])}else Yn.push("L",Or,",",Cr)}else Yn.push("M",Nt,",",Gt),null!=lr&&Yn.push("A",Ue,",",Ue," 0 ",ti,",",Pt," ",lr,",",yr),Yn.push("L",Or,",",Cr),null!=tn&&Yn.push("A",Ce,",",Ce," 0 ",Jr,",",1-Pt," ",tn,",",en);return Yn.push("Z"),Yn.join("")}function ke(Ce,Ue){return"M0,"+Ce+"A"+Ce+","+Ce+" 0 1,"+Ue+" 0,"+-Ce+"A"+Ce+","+Ce+" 0 1,"+Ue+" 0,"+Ce}return xe.innerRadius=function(Ce){return arguments.length?(ce=xr(Ce),xe):ce},xe.outerRadius=function(Ce){return arguments.length?(L=xr(Ce),xe):L},xe.cornerRadius=function(Ce){return arguments.length?(z=xr(Ce),xe):z},xe.padRadius=function(Ce){return arguments.length?(F=Ce==Vi?Vi:xr(Ce),xe):F},xe.startAngle=function(Ce){return arguments.length?(G=xr(Ce),xe):G},xe.endAngle=function(Ce){return arguments.length?(ie=xr(Ce),xe):ie},xe.padAngle=function(Ce){return arguments.length?(fe=xr(Ce),xe):fe},xe.centroid=function(){var Ce=(+ce.apply(this,arguments)+ +L.apply(this,arguments))/2,Ue=(+G.apply(this,arguments)+ +ie.apply(this,arguments))/2-Xt;return[Math.cos(Ue)*Ce,Math.sin(Ue)*Ce]},xe};var Vi="auto";function Di(ce){return ce.innerRadius}function _i(ce){return ce.outerRadius}function Ui(ce){return ce.startAngle}function Ii(ce){return ce.endAngle}function sa(ce){return ce&&ce.padAngle}function ci(ce,L,z,F){return(ce-z)*L-(L-F)*ce>0?0:1}function Qi(ce,L,z,F,G){var ie=ce[0]-L[0],fe=ce[1]-L[1],xe=(G?F:-F)/Math.sqrt(ie*ie+fe*fe),ke=xe*fe,Ce=-xe*ie,Ue=ce[0]+ke,$e=ce[1]+Ce,at=L[0]+ke,kt=L[1]+Ce,Pt=(Ue+at)/2,St=($e+kt)/2,Et=at-Ue,wt=kt-$e,jt=Et*Et+wt*wt,Nt=z-F,Gt=Ue*kt-at*$e,lr=(wt<0?-1:1)*Math.sqrt(Math.max(0,Nt*Nt*jt-Gt*Gt)),yr=(Gt*wt-Et*lr)/jt,Or=(-Gt*Et-wt*lr)/jt,Cr=(Gt*wt+Et*lr)/jt,tn=(-Gt*Et+wt*lr)/jt,en=yr-Pt,yn=Or-St,pn=Cr-Pt,Yn=tn-St;return en*en+yn*yn>pn*pn+Yn*Yn&&(yr=Cr,Or=tn),[[yr-ke,Or-Ce],[yr*z/Nt,Or*z/Nt]]}function qa(){return!0}function Yo(ce){var L=Vr,z=sn,F=qa,G=xo,ie=G.key,fe=.7;function xe(ke){var Ce,Ue=[],$e=[],at=-1,kt=ke.length,Pt=xr(L),St=xr(z);function Et(){Ue.push("M",G(ce($e),fe))}for(;++at<kt;)F.call(this,Ce=ke[at],at)?$e.push([+Pt.call(this,Ce,at),+St.call(this,Ce,at)]):$e.length&&(Et(),$e=[]);return $e.length&&Et(),Ue.length?Ue.join(""):null}return xe.x=function(ke){return arguments.length?(L=ke,xe):L},xe.y=function(ke){return arguments.length?(z=ke,xe):z},xe.defined=function(ke){return arguments.length?(F=ke,xe):F},xe.interpolate=function(ke){return arguments.length?(ie="function"==typeof ke?G=ke:(G=Fo.get(ke)||xo).key,xe):ie},xe.tension=function(ke){return arguments.length?(fe=ke,xe):fe},xe}m.svg.line=function(){return Yo(E)};var Fo=m.map({linear:xo,"linear-closed":ki,step:function(ce){for(var L=0,z=ce.length,F=ce[0],G=[F[0],",",F[1]];++L<z;)G.push("H",(F[0]+(F=ce[L])[0])/2,"V",F[1]);return z>1&&G.push("H",F[0]),G.join("")},"step-before":wa,"step-after":bo,basis:Ka,"basis-open":function(ce){if(ce.length<4)return xo(ce);for(var L,z=[],F=-1,G=ce.length,ie=[0],fe=[0];++F<3;)ie.push((L=ce[F])[0]),fe.push(L[1]);for(z.push(ua(ao,ie)+","+ua(ao,fe)),--F;++F<G;)L=ce[F],ie.shift(),ie.push(L[0]),fe.shift(),fe.push(L[1]),us(z,ie,fe);return z.join("")},"basis-closed":function(ce){for(var L,z,F=-1,G=ce.length,ie=G+4,fe=[],xe=[];++F<4;)fe.push((z=ce[F%G])[0]),xe.push(z[1]);for(L=[ua(ao,fe),",",ua(ao,xe)],--F;++F<ie;)z=ce[F%G],fe.shift(),fe.push(z[0]),xe.shift(),xe.push(z[1]),us(L,fe,xe);return L.join("")},bundle:function(ce,L){var z=ce.length-1;if(z)for(var F,G,ie=ce[0][0],fe=ce[0][1],xe=ce[z][0]-ie,ke=ce[z][1]-fe,Ce=-1;++Ce<=z;)(F=ce[Ce])[0]=L*F[0]+(1-L)*(ie+(G=Ce/z)*xe),F[1]=L*F[1]+(1-L)*(fe+G*ke);return Ka(ce)},cardinal:function(ce,L){return ce.length<3?xo(ce):ce[0]+ea(ce,Ca(ce,L))},"cardinal-open":function(ce,L){return ce.length<4?xo(ce):ce[1]+ea(ce.slice(1,-1),Ca(ce,L))},"cardinal-closed":function(ce,L){return ce.length<3?ki(ce):ce[0]+ea((ce.push(ce[0]),ce),Ca([ce[ce.length-2]].concat(ce,[ce[1]]),L))},monotone:function(ce){return ce.length<3?xo(ce):ce[0]+ea(ce,function(L){for(var z,F,G,ie,fe=[],xe=function(Ue){for(var $e=0,at=Ue.length-1,kt=[],Pt=Ue[0],St=Ue[1],Et=kt[0]=es(Pt,St);++$e<at;)kt[$e]=(Et+(Et=es(Pt=St,St=Ue[$e+1])))/2;return kt[$e]=Et,kt}(L),ke=-1,Ce=L.length-1;++ke<Ce;)z=es(L[ke],L[ke+1]),a(z)<xt?xe[ke]=xe[ke+1]=0:(ie=(F=xe[ke]/z)*F+(G=xe[ke+1]/z)*G)>9&&(ie=3*z/Math.sqrt(ie),xe[ke]=ie*F,xe[ke+1]=ie*G);for(ke=-1;++ke<=Ce;)ie=(L[Math.min(Ce,ke+1)][0]-L[Math.max(0,ke-1)][0])/(6*(1+xe[ke]*xe[ke])),fe.push([ie||0,xe[ke]*ie||0]);return fe}(ce))}});function xo(ce){return ce.length>1?ce.join("L"):ce+"Z"}function ki(ce){return ce.join("L")+"Z"}function wa(ce){for(var L=0,z=ce.length,F=ce[0],G=[F[0],",",F[1]];++L<z;)G.push("V",(F=ce[L])[1],"H",F[0]);return G.join("")}function bo(ce){for(var L=0,z=ce.length,F=ce[0],G=[F[0],",",F[1]];++L<z;)G.push("H",(F=ce[L])[0],"V",F[1]);return G.join("")}function ea(ce,L){if(L.length<1||ce.length!=L.length&&ce.length!=L.length+2)return xo(ce);var z=ce.length!=L.length,F="",G=ce[0],ie=ce[1],fe=L[0],xe=fe,ke=1;if(z&&(F+="Q"+(ie[0]-2*fe[0]/3)+","+(ie[1]-2*fe[1]/3)+","+ie[0]+","+ie[1],G=ce[1],ke=2),L.length>1){ie=ce[ke],ke++,F+="C"+(G[0]+fe[0])+","+(G[1]+fe[1])+","+(ie[0]-(xe=L[1])[0])+","+(ie[1]-xe[1])+","+ie[0]+","+ie[1];for(var Ce=2;Ce<L.length;Ce++,ke++)F+="S"+((ie=ce[ke])[0]-(xe=L[Ce])[0])+","+(ie[1]-xe[1])+","+ie[0]+","+ie[1]}if(z){var Ue=ce[ke];F+="Q"+(ie[0]+2*xe[0]/3)+","+(ie[1]+2*xe[1]/3)+","+Ue[0]+","+Ue[1]}return F}function Ca(ce,L){for(var z,F=[],G=(1-L)/2,ie=ce[0],fe=ce[1],xe=1,ke=ce.length;++xe<ke;)z=ie,ie=fe,F.push([G*((fe=ce[xe])[0]-z[0]),G*(fe[1]-z[1])]);return F}function Ka(ce){if(ce.length<3)return xo(ce);var L=1,z=ce.length,F=ce[0],G=F[0],ie=F[1],fe=[G,G,G,(F=ce[1])[0]],xe=[ie,ie,ie,F[1]],ke=[G,",",ie,"L",ua(ao,fe),",",ua(ao,xe)];for(ce.push(ce[z-1]);++L<=z;)F=ce[L],fe.shift(),fe.push(F[0]),xe.shift(),xe.push(F[1]),us(ke,fe,xe);return ce.pop(),ke.push("L",F),ke.join("")}function ua(ce,L){return ce[0]*L[0]+ce[1]*L[1]+ce[2]*L[2]+ce[3]*L[3]}Fo.forEach(function(ce,L){L.key=ce,L.closed=/-closed$/.test(ce)});var go=[0,2/3,1/3,0],fa=[0,1/3,2/3,0],ao=[0,1/6,2/3,1/6];function us(ce,L,z){ce.push("C",ua(go,L),",",ua(go,z),",",ua(fa,L),",",ua(fa,z),",",ua(ao,L),",",ua(ao,z))}function es(ce,L){return(L[1]-ce[1])/(L[0]-ce[0])}function Is(ce){for(var L,z,F,G=-1,ie=ce.length;++G<ie;)z=(L=ce[G])[0],F=L[1]-Xt,L[0]=z*Math.cos(F),L[1]=z*Math.sin(F);return ce}function ja(ce){var L=Vr,z=Vr,F=0,G=sn,ie=qa,fe=xo,xe=fe.key,ke=fe,Ce="L",Ue=.7;function $e(at){var kt,Pt,St,Et=[],wt=[],jt=[],Nt=-1,Gt=at.length,lr=xr(L),yr=xr(F),Or=L===z?function(){return Pt}:xr(z),Cr=F===G?function(){return St}:xr(G);function tn(){Et.push("M",fe(ce(jt),Ue),Ce,ke(ce(wt.reverse()),Ue),"Z")}for(;++Nt<Gt;)ie.call(this,kt=at[Nt],Nt)?(wt.push([Pt=+lr.call(this,kt,Nt),St=+yr.call(this,kt,Nt)]),jt.push([+Or.call(this,kt,Nt),+Cr.call(this,kt,Nt)])):wt.length&&(tn(),wt=[],jt=[]);return wt.length&&tn(),Et.length?Et.join(""):null}return $e.x=function(at){return arguments.length?(L=z=at,$e):z},$e.x0=function(at){return arguments.length?(L=at,$e):L},$e.x1=function(at){return arguments.length?(z=at,$e):z},$e.y=function(at){return arguments.length?(F=G=at,$e):G},$e.y0=function(at){return arguments.length?(F=at,$e):F},$e.y1=function(at){return arguments.length?(G=at,$e):G},$e.defined=function(at){return arguments.length?(ie=at,$e):ie},$e.interpolate=function(at){return arguments.length?(xe="function"==typeof at?fe=at:(fe=Fo.get(at)||xo).key,ke=fe.reverse||fe,Ce=fe.closed?"M":"L",$e):xe},$e.tension=function(at){return arguments.length?(Ue=at,$e):Ue},$e}function Os(ce){return ce.source}function Va(ce){return ce.target}function ts(ce){return ce.radius}function mi(ce){return[ce.x,ce.y]}function Ai(ce){return function(){var L=ce.apply(this,arguments),z=L[0],F=L[1]-Xt;return[z*Math.cos(F),z*Math.sin(F)]}}function Ds(){return 64}function zs(){return"circle"}function rs(ce){var L=Math.sqrt(ce/Ht);return"M0,"+L+"A"+L+","+L+" 0 1,1 0,"+-L+"A"+L+","+L+" 0 1,1 0,"+L+"Z"}m.svg.line.radial=function(){var ce=Yo(Is);return ce.radius=ce.x,delete ce.x,ce.angle=ce.y,delete ce.y,ce},wa.reverse=bo,bo.reverse=wa,m.svg.area=function(){return ja(E)},m.svg.area.radial=function(){var ce=ja(Is);return ce.radius=ce.x,delete ce.x,ce.innerRadius=ce.x0,delete ce.x0,ce.outerRadius=ce.x1,delete ce.x1,ce.angle=ce.y,delete ce.y,ce.startAngle=ce.y0,delete ce.y0,ce.endAngle=ce.y1,delete ce.y1,ce},m.svg.chord=function(){var ce=Os,L=Va,z=ts,F=Ui,G=Ii;function ie(Ce,Ue){var $e,at,kt=fe(this,ce,Ce,Ue),Pt=fe(this,L,Ce,Ue);return"M"+kt.p0+xe(kt.r,kt.p1,kt.a1-kt.a0)+(($e=kt).a0==(at=Pt).a0&&$e.a1==at.a1?ke(0,0,0,kt.p0):ke(0,0,0,Pt.p0)+xe(Pt.r,Pt.p1,Pt.a1-Pt.a0)+ke(0,0,0,kt.p0))+"Z"}function fe(Ce,Ue,$e,at){var kt=Ue.call(Ce,$e,at),Pt=z.call(Ce,kt,at),St=F.call(Ce,kt,at)-Xt,Et=G.call(Ce,kt,at)-Xt;return{r:Pt,a0:St,a1:Et,p0:[Pt*Math.cos(St),Pt*Math.sin(St)],p1:[Pt*Math.cos(Et),Pt*Math.sin(Et)]}}function xe(Ce,Ue,$e){return"A"+Ce+","+Ce+" 0 "+ +($e>Ht)+",1 "+Ue}function ke(Ce,Ue,$e,at){return"Q 0,0 "+at}return ie.radius=function(Ce){return arguments.length?(z=xr(Ce),ie):z},ie.source=function(Ce){return arguments.length?(ce=xr(Ce),ie):ce},ie.target=function(Ce){return arguments.length?(L=xr(Ce),ie):L},ie.startAngle=function(Ce){return arguments.length?(F=xr(Ce),ie):F},ie.endAngle=function(Ce){return arguments.length?(G=xr(Ce),ie):G},ie},m.svg.diagonal=function(){var ce=Os,L=Va,z=mi;function F(G,ie){var fe=ce.call(this,G,ie),xe=L.call(this,G,ie),ke=(fe.y+xe.y)/2,Ce=[fe,{x:fe.x,y:ke},{x:xe.x,y:ke},xe];return"M"+(Ce=Ce.map(z))[0]+"C"+Ce[1]+" "+Ce[2]+" "+Ce[3]}return F.source=function(G){return arguments.length?(ce=xr(G),F):ce},F.target=function(G){return arguments.length?(L=xr(G),F):L},F.projection=function(G){return arguments.length?(z=G,F):z},F},m.svg.diagonal.radial=function(){var ce=m.svg.diagonal(),L=mi,z=ce.projection;return ce.projection=function(F){return arguments.length?z(Ai(L=F)):L},ce},m.svg.symbol=function(){var ce=zs,L=Ds;function z(F,G){return(Io.get(ce.call(this,F,G))||rs)(L.call(this,F,G))}return z.type=function(F){return arguments.length?(ce=xr(F),z):ce},z.size=function(F){return arguments.length?(L=xr(F),z):L},z};var Io=m.map({circle:rs,cross:function(ce){var L=Math.sqrt(ce/5)/2;return"M"+-3*L+","+-L+"H"+-L+"V"+-3*L+"H"+L+"V"+-L+"H"+3*L+"V"+L+"H"+L+"V"+3*L+"H"+-L+"V"+L+"H"+-3*L+"Z"},diamond:function(ce){var L=Math.sqrt(ce/(2*Zs)),z=L*Zs;return"M0,"+-L+"L"+z+",0 0,"+L+" "+-z+",0Z"},square:function(ce){var L=Math.sqrt(ce)/2;return"M"+-L+","+-L+"L"+L+","+-L+" "+L+","+L+" "+-L+","+L+"Z"},"triangle-down":function(ce){var L=Math.sqrt(ce/Ho),z=L*Ho/2;return"M0,"+z+"L"+L+","+-z+" "+-L+","+-z+"Z"},"triangle-up":function(ce){var L=Math.sqrt(ce/Ho),z=L*Ho/2;return"M0,"+-z+"L"+L+","+z+" "+-L+","+z+"Z"}});m.svg.symbolTypes=Io.keys();var Ho=Math.sqrt(3),Zs=Math.tan(30*cr);J.transition=function(ce){for(var L,z,F=gs||++vs,G=Ts(ce),ie=[],fe=fs||{time:Date.now(),ease:ss,delay:0,duration:250},xe=-1,ke=this.length;++xe<ke;){ie.push(L=[]);for(var Ce=this[xe],Ue=-1,$e=Ce.length;++Ue<$e;)(z=Ce[Ue])&&hs(z,Ue,G,F,fe),L.push(z)}return ha(ie,G,F)},J.interrupt=function(ce){return this.each(null==ce?_s:ta(Ts(ce)))};var _s=ta(Ts());function ta(ce){return function(){var L,z,F;(L=this[ce])&&(F=L[z=L.active])&&(F.timer.c=null,F.timer.t=NaN,--L.count?delete L[z]:delete this[ce],L.active+=.5,F.event&&F.event.interrupt.call(this,this.__data__,F.index))}}function ha(ce,L,z){return B(ce,Ra),ce.namespace=L,ce.id=z,ce}var gs,fs,Ra=[],vs=0;function ws(ce,L,z,F){var G=ce.id,ie=ce.namespace;return Ie(ce,"function"==typeof z?function(fe,xe,ke){fe[ie][G].tween.set(L,F(z.call(fe,fe.__data__,xe,ke)))}:(z=F(z),function(fe){fe[ie][G].tween.set(L,z)}))}function xs(ce){return null==ce&&(ce=""),function(){this.textContent=ce}}function Ts(ce){return null==ce?"__transition__":"__transition_"+ce+"__"}function hs(ce,L,z,F,G){var ie,fe,xe,ke,Ce,Ue=ce[z]||(ce[z]={active:0,count:0}),$e=Ue[F];function at(Pt){var St=Ue.active,Et=Ue[St];for(var wt in Et&&(Et.timer.c=null,Et.timer.t=NaN,--Ue.count,delete Ue[St],Et.event&&Et.event.interrupt.call(ce,ce.__data__,Et.index)),Ue)if(+wt<F){var jt=Ue[wt];jt.timer.c=null,jt.timer.t=NaN,--Ue.count,delete Ue[wt]}fe.c=kt,on(function(){return fe.c&&kt(Pt||1)&&(fe.c=null,fe.t=NaN),1},0,ie),Ue.active=F,$e.event&&$e.event.start.call(ce,ce.__data__,L),Ce=[],$e.tween.forEach(function(Nt,Gt){(Gt=Gt.call(ce,ce.__data__,L))&&Ce.push(Gt)}),ke=$e.ease,xe=$e.duration}function kt(Pt){for(var St=Pt/xe,Et=ke(St),wt=Ce.length;wt>0;)Ce[--wt].call(ce,Et);if(St>=1)return $e.event&&$e.event.end.call(ce,ce.__data__,L),--Ue.count?delete Ue[F]:delete ce[z],1}$e||(fe=on(function(Pt){var St=$e.delay;if(fe.t=St+ie,St<=Pt)return at(Pt-St);fe.c=at},0,ie=G.time),$e=Ue[F]={tween:new _,time:ie,timer:fe,delay:G.delay,duration:G.duration,ease:G.ease,index:L},G=null,++Ue.count)}Ra.call=J.call,Ra.empty=J.empty,Ra.node=J.node,Ra.size=J.size,m.transition=function(ce,L){return ce&&ce.transition?gs?ce.transition(L):ce:m.selection().transition(ce)},m.transition.prototype=Ra,Ra.select=function(ce){var L,z,F,G=this.id,ie=this.namespace,fe=[];ce=te(ce);for(var xe=-1,ke=this.length;++xe<ke;){fe.push(L=[]);for(var Ce=this[xe],Ue=-1,$e=Ce.length;++Ue<$e;)(F=Ce[Ue])&&(z=ce.call(F,F.__data__,Ue,xe))?("__data__"in F&&(z.__data__=F.__data__),hs(z,Ue,ie,G,F[ie][G]),L.push(z)):L.push(null)}return ha(fe,ie,G)},Ra.selectAll=function(ce){var L,z,F,G,ie,fe=this.id,xe=this.namespace,ke=[];ce=ae(ce);for(var Ce=-1,Ue=this.length;++Ce<Ue;)for(var $e=this[Ce],at=-1,kt=$e.length;++at<kt;)if(F=$e[at]){ie=F[xe][fe],z=ce.call(F,F.__data__,at,Ce),ke.push(L=[]);for(var Pt=-1,St=z.length;++Pt<St;)(G=z[Pt])&&hs(G,Pt,xe,fe,ie),L.push(G)}return ha(ke,xe,fe)},Ra.filter=function(ce){var L,z,F=[];"function"!=typeof ce&&(ce=Ae(ce));for(var G=0,ie=this.length;G<ie;G++){F.push(L=[]);for(var fe,xe=0,ke=(fe=this[G]).length;xe<ke;xe++)(z=fe[xe])&&ce.call(z,z.__data__,xe,G)&&L.push(z)}return ha(F,this.namespace,this.id)},Ra.tween=function(ce,L){var z=this.id,F=this.namespace;return arguments.length<2?this.node()[F][z].tween.get(ce):Ie(this,null==L?function(G){G[F][z].tween.remove(ce)}:function(G){G[F][z].tween.set(ce,L)})},Ra.attr=function(ce,L){if(arguments.length<2){for(L in ce)this.attr(L,ce[L]);return this}var z="transform"==ce?So:Ea,F=m.ns.qualify(ce);function G(){this.removeAttribute(F)}function ie(){this.removeAttributeNS(F.space,F.local)}function fe(ke){return null==ke?G:(ke+="",function(){var Ce,Ue=this.getAttribute(F);return Ue!==ke&&(Ce=z(Ue,ke),function($e){this.setAttribute(F,Ce($e))})})}function xe(ke){return null==ke?ie:(ke+="",function(){var Ce,Ue=this.getAttributeNS(F.space,F.local);return Ue!==ke&&(Ce=z(Ue,ke),function($e){this.setAttributeNS(F.space,F.local,Ce($e))})})}return ws(this,"attr."+ce,L,F.local?xe:fe)},Ra.attrTween=function(ce,L){var z=m.ns.qualify(ce);return this.tween("attr."+ce,z.local?function(F,G){var ie=L.call(this,F,G,this.getAttributeNS(z.space,z.local));return ie&&function(fe){this.setAttributeNS(z.space,z.local,ie(fe))}}:function(F,G){var ie=L.call(this,F,G,this.getAttribute(z));return ie&&function(fe){this.setAttribute(z,ie(fe))}})},Ra.style=function(ce,L,z){var F=arguments.length;if(F<3){if("string"!=typeof ce){for(z in F<2&&(L=""),ce)this.style(z,ce[z],L);return this}z=""}function G(){this.style.removeProperty(ce)}function ie(fe){return null==fe?G:(fe+="",function(){var xe,ke=n(this).getComputedStyle(this,null).getPropertyValue(ce);return ke!==fe&&(xe=Ea(ke,fe),function(Ce){this.style.setProperty(ce,xe(Ce),z)})})}return ws(this,"style."+ce,L,ie)},Ra.styleTween=function(ce,L,z){function F(G,ie){var fe=L.call(this,G,ie,n(this).getComputedStyle(this,null).getPropertyValue(ce));return fe&&function(xe){this.style.setProperty(ce,fe(xe),z)}}return arguments.length<3&&(z=""),this.tween("style."+ce,F)},Ra.text=function(ce){return ws(this,"text",ce,xs)},Ra.remove=function(){var ce=this.namespace;return this.each("end.transition",function(){var L;this[ce].count<2&&(L=this.parentNode)&&L.removeChild(this)})},Ra.ease=function(ce){var L=this.id,z=this.namespace;return arguments.length<1?this.node()[z][L].ease:("function"!=typeof ce&&(ce=m.ease.apply(m,arguments)),Ie(this,function(F){F[z][L].ease=ce}))},Ra.delay=function(ce){var L=this.id,z=this.namespace;return arguments.length<1?this.node()[z][L].delay:Ie(this,"function"==typeof ce?function(F,G,ie){F[z][L].delay=+ce.call(F,F.__data__,G,ie)}:(ce=+ce,function(F){F[z][L].delay=ce}))},Ra.duration=function(ce){var L=this.id,z=this.namespace;return arguments.length<1?this.node()[z][L].duration:Ie(this,"function"==typeof ce?function(F,G,ie){F[z][L].duration=Math.max(1,ce.call(F,F.__data__,G,ie))}:(ce=Math.max(1,ce),function(F){F[z][L].duration=ce}))},Ra.each=function(ce,L){var z=this.id,F=this.namespace;if(arguments.length<2){var G=fs,ie=gs;try{gs=z,Ie(this,function(fe,xe,ke){fs=fe[F][z],ce.call(fe,fe.__data__,xe,ke)})}finally{fs=G,gs=ie}}else Ie(this,function(fe){var xe=fe[F][z];(xe.event||(xe.event=m.dispatch("start","end","interrupt"))).on(ce,L)});return this},Ra.transition=function(){for(var ce,L,z,F=this.id,G=++vs,ie=this.namespace,fe=[],xe=0,ke=this.length;xe<ke;xe++){fe.push(ce=[]);for(var Ce,Ue=0,$e=(Ce=this[xe]).length;Ue<$e;Ue++)(L=Ce[Ue])&&hs(L,Ue,ie,G,{time:(z=L[ie][F]).time,ease:z.ease,delay:z.delay+z.duration,duration:z.duration}),ce.push(L)}return ha(fe,ie,G)},m.svg.axis=function(){var ce,L=m.scale.linear(),z=Ws,F=6,G=6,ie=3,fe=[10],xe=null;function ke(Ce){Ce.each(function(){var Ue,$e=m.select(this),at=this.__chart__||L,kt=this.__chart__=L.copy(),Pt=xe??(kt.ticks?kt.ticks.apply(kt,fe):kt.domain()),St=ce??(kt.tickFormat?kt.tickFormat.apply(kt,fe):E),Et=$e.selectAll(".tick").data(Pt,kt),wt=Et.enter().insert("g",".domain").attr("class","tick").style("opacity",xt),jt=m.transition(Et.exit()).style("opacity",xt).remove(),Nt=m.transition(Et.order()).style("opacity",1),Gt=Math.max(F,0)+ie,lr=dn(kt),yr=$e.selectAll(".domain").data([0]),Or=(yr.enter().append("path").attr("class","domain"),m.transition(yr));wt.append("line"),wt.append("text");var Cr,tn,en,yn,pn=wt.select("line"),Yn=Nt.select("line"),ti=Et.select("text").text(St),gi=wt.select("text"),Jr=Nt.select("text"),In="top"===z||"left"===z?-1:1;if("bottom"===z||"top"===z?(Ue=ys,Cr="x",en="y",tn="x2",yn="y2",ti.attr("dy",In<0?"0em":".71em").style("text-anchor","middle"),Or.attr("d","M"+lr[0]+","+In*G+"V0H"+lr[1]+"V"+In*G)):(Ue=Xs,Cr="y",en="x",tn="y2",yn="x2",ti.attr("dy",".32em").style("text-anchor",In<0?"end":"start"),Or.attr("d","M"+In*G+","+lr[0]+"H0V"+lr[1]+"H"+In*G)),pn.attr(yn,In*F),gi.attr(en,In*Gt),Yn.attr(tn,0).attr(yn,In*F),Jr.attr(Cr,0).attr(en,In*Gt),kt.rangeBand){var ri=kt,Jn=ri.rangeBand()/2;at=kt=function(ui){return ri(ui)+Jn}}else at.rangeBand?at=kt:jt.call(Ue,kt,at);wt.call(Ue,at,kt),Nt.call(Ue,kt,kt)})}return ke.scale=function(Ce){return arguments.length?(L=Ce,ke):L},ke.orient=function(Ce){return arguments.length?(z=Ce in il?Ce+"":Ws,ke):z},ke.ticks=function(){return arguments.length?(fe=k(arguments),ke):fe},ke.tickValues=function(Ce){return arguments.length?(xe=Ce,ke):xe},ke.tickFormat=function(Ce){return arguments.length?(ce=Ce,ke):ce},ke.tickSize=function(Ce){var Ue=arguments.length;return Ue?(F=+Ce,G=+arguments[Ue-1],ke):F},ke.innerTickSize=function(Ce){return arguments.length?(F=+Ce,ke):F},ke.outerTickSize=function(Ce){return arguments.length?(G=+Ce,ke):G},ke.tickPadding=function(Ce){return arguments.length?(ie=+Ce,ke):ie},ke.tickSubdivide=function(){return arguments.length&&ke},ke};var Ws="bottom",il={top:1,right:1,bottom:1,left:1};function ys(ce,L,z){ce.attr("transform",function(F){var G=L(F);return"translate("+(isFinite(G)?G:z(F))+",0)"})}function Xs(ce,L,z){ce.attr("transform",function(F){var G=L(F);return"translate(0,"+(isFinite(G)?G:z(F))+")"})}m.svg.brush=function(){var ce,L,z=re(Ue,"brushstart","brush","brushend"),F=null,G=null,ie=[0,0],fe=[0,0],xe=!0,ke=!0,Ce=oo[0];function Ue(St){St.each(function(){var Et=m.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Pt).on("touchstart.brush",Pt),wt=Et.selectAll(".background").data([0]);wt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Et.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var jt=Et.selectAll(".resize").data(Ce,E);jt.exit().remove(),jt.enter().append("g").attr("class",function(yr){return"resize "+yr}).style("cursor",function(yr){return ks[yr]}).append("rect").attr("x",function(yr){return/[ew]$/.test(yr)?-3:null}).attr("y",function(yr){return/^[ns]/.test(yr)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),jt.style("display",Ue.empty()?"none":null);var Nt,Gt=m.transition(Et),lr=m.transition(wt);F&&(Nt=dn(F),lr.attr("x",Nt[0]).attr("width",Nt[1]-Nt[0]),at(Gt)),G&&(Nt=dn(G),lr.attr("y",Nt[0]).attr("height",Nt[1]-Nt[0]),kt(Gt)),$e(Gt)})}function $e(St){St.selectAll(".resize").attr("transform",function(Et){return"translate("+ie[+/e$/.test(Et)]+","+fe[+/^s/.test(Et)]+")"})}function at(St){St.select(".extent").attr("x",ie[0]),St.selectAll(".extent,.n>rect,.s>rect").attr("width",ie[1]-ie[0])}function kt(St){St.select(".extent").attr("y",fe[0]),St.selectAll(".extent,.e>rect,.w>rect").attr("height",fe[1]-fe[0])}function Pt(){var St,Et,wt=this,jt=m.select(m.event.target),Nt=z.of(wt,arguments),Gt=m.select(wt),lr=jt.datum(),yr=!/^(n|s)$/.test(lr)&&F,Or=!/^(e|w)$/.test(lr)&&G,Cr=jt.classed("extent"),tn=Tt(wt),en=m.mouse(wt),yn=m.select(n(wt)).on("keydown.brush",ti).on("keyup.brush",gi);if(m.event.changedTouches?yn.on("touchmove.brush",Jr).on("touchend.brush",ri):yn.on("mousemove.brush",Jr).on("mouseup.brush",ri),Gt.interrupt().selectAll("*").interrupt(),Cr)en[0]=ie[0]-en[0],en[1]=fe[0]-en[1];else if(lr){var pn=+/w$/.test(lr),Yn=+/^n/.test(lr);Et=[ie[1-pn]-en[0],fe[1-Yn]-en[1]],en[0]=ie[pn],en[1]=fe[Yn]}else m.event.altKey&&(St=en.slice());function ti(){32==m.event.keyCode&&(Cr||(St=null,en[0]-=ie[1],en[1]-=fe[1],Cr=2),Z())}function gi(){32==m.event.keyCode&&2==Cr&&(en[0]+=ie[1],en[1]+=fe[1],Cr=0,Z())}function Jr(){var Jn=m.mouse(wt),ui=!1;Et&&(Jn[0]+=Et[0],Jn[1]+=Et[1]),Cr||(m.event.altKey?(St||(St=[(ie[0]+ie[1])/2,(fe[0]+fe[1])/2]),en[0]=ie[+(Jn[0]<St[0])],en[1]=fe[+(Jn[1]<St[1])]):St=null),yr&&In(Jn,F,0)&&(at(Gt),ui=!0),Or&&In(Jn,G,1)&&(kt(Gt),ui=!0),ui&&($e(Gt),Nt({type:"brush",mode:Cr?"move":"resize"}))}function In(Jn,ui,yi){var Oi,ai,Mi=dn(ui),wi=Mi[0],Ri=Mi[1],Si=en[yi],Fi=yi?fe:ie,Xi=Fi[1]-Fi[0];if(Cr&&(wi-=Si,Ri-=Xi+Si),Oi=(yi?ke:xe)?Math.max(wi,Math.min(Ri,Jn[yi])):Jn[yi],Cr?ai=(Oi+=Si)+Xi:(St&&(Si=Math.max(wi,Math.min(Ri,2*St[yi]-Oi))),Si<Oi?(ai=Oi,Oi=Si):ai=Si),Fi[0]!=Oi||Fi[1]!=ai)return yi?L=null:ce=null,Fi[0]=Oi,Fi[1]=ai,!0}function ri(){Jr(),Gt.style("pointer-events","all").selectAll(".resize").style("display",Ue.empty()?"none":null),m.select("body").style("cursor",null),yn.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),tn(),Nt({type:"brushend"})}Gt.style("pointer-events","none").selectAll(".resize").style("display",null),m.select("body").style("cursor",jt.style("cursor")),Nt({type:"brushstart"}),Jr()}return Ue.event=function(St){St.each(function(){var Et=z.of(this,arguments),wt={x:ie,y:fe,i:ce,j:L},jt=this.__chart__||wt;this.__chart__=wt,gs?m.select(this).transition().each("start.brush",function(){ce=jt.i,L=jt.j,ie=jt.x,fe=jt.y,Et({type:"brushstart"})}).tween("brush:brush",function(){var Nt=na(ie,wt.x),Gt=na(fe,wt.y);return ce=L=null,function(lr){ie=wt.x=Nt(lr),fe=wt.y=Gt(lr),Et({type:"brush",mode:"resize"})}}).each("end.brush",function(){ce=wt.i,L=wt.j,Et({type:"brush",mode:"resize"}),Et({type:"brushend"})}):(Et({type:"brushstart"}),Et({type:"brush",mode:"resize"}),Et({type:"brushend"}))})},Ue.x=function(St){return arguments.length?(Ce=oo[!(F=St)<<1|!G],Ue):F},Ue.y=function(St){return arguments.length?(Ce=oo[!F<<1|!(G=St)],Ue):G},Ue.clamp=function(St){return arguments.length?(F&&G?(xe=!!St[0],ke=!!St[1]):F?xe=!!St:G&&(ke=!!St),Ue):F&&G?[xe,ke]:F?xe:G?ke:null},Ue.extent=function(St){var Et,wt,jt,Nt,Gt;return arguments.length?(F&&(Et=St[0],wt=St[1],G&&(Et=Et[0],wt=wt[0]),ce=[Et,wt],F.invert&&(Et=F(Et),wt=F(wt)),wt<Et&&(Gt=Et,Et=wt,wt=Gt),Et==ie[0]&&wt==ie[1]||(ie=[Et,wt])),G&&(jt=St[0],Nt=St[1],F&&(jt=jt[1],Nt=Nt[1]),L=[jt,Nt],G.invert&&(jt=G(jt),Nt=G(Nt)),Nt<jt&&(Gt=jt,jt=Nt,Nt=Gt),jt==fe[0]&&Nt==fe[1]||(fe=[jt,Nt])),Ue):(F&&(ce?(Et=ce[0],wt=ce[1]):(Et=ie[0],wt=ie[1],F.invert&&(Et=F.invert(Et),wt=F.invert(wt)),wt<Et&&(Gt=Et,Et=wt,wt=Gt))),G&&(L?(jt=L[0],Nt=L[1]):(jt=fe[0],Nt=fe[1],G.invert&&(jt=G.invert(jt),Nt=G.invert(Nt)),Nt<jt&&(Gt=jt,jt=Nt,Nt=Gt))),F&&G?[[Et,jt],[wt,Nt]]:F?[Et,wt]:G&&[jt,Nt])},Ue.clear=function(){return Ue.empty()||(ie=[0,0],fe=[0,0],ce=L=null),Ue},Ue.empty=function(){return!!F&&ie[0]==ie[1]||!!G&&fe[0]==fe[1]},m.rebind(Ue,z,"on")};var ks={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},oo=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function al(ce){return JSON.parse(ce.responseText)}function ol(ce){var L=x.createRange();return L.selectNode(x.body),L.createContextualFragment(ce.responseText)}m.text=Lr(function(ce){return ce.responseText}),m.json=function(ce,L){return zr(ce,"application/json",al,L)},m.html=function(ce,L){return zr(ce,"text/html",ol,L)},m.xml=Lr(function(ce){return ce.responseXML}),"object"==typeof $&&$.exports?$.exports=m:this.d3=m}).apply(self)},{}],59:[function(v,$,Q){"use strict";$.exports=v("./quad")},{"./quad":60}],60:[function(v,$,Q){"use strict";var m=v("binary-search-bounds"),g=v("clamp"),k=v("parse-rect"),x=v("array-bounds"),e=v("pick-by-alias"),n=v("defined"),i=v("flatten-vertex-data"),l=v("is-obj"),r=v("dtype"),d=v("math-log2");function f(t,h){for(var s=h[0],o=h[1],p=1/(h[2]-s),c=1/(h[3]-o),a=new Array(t.length),y=0,u=t.length/2;y<u;y++)a[2*y]=g((t[2*y]-s)*p,0,1),a[2*y+1]=g((t[2*y+1]-o)*c,0,1);return a}$.exports=function(t,h){h||(h={}),t=i(t,"float64"),h=e(h,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var s=n(h.maxDepth,255),o=n(h.bounds,x(t,2));o[0]===o[2]&&o[2]++,o[1]===o[3]&&o[3]++;var p,c=f(t,o),a=t.length>>>1;h.dtype||(h.dtype="array"),"string"==typeof h.dtype?p=new(r(h.dtype))(a):h.dtype&&(p=h.dtype,Array.isArray(p)&&(p.length=a));for(var y=0;y<a;++y)p[y]=y;var u=[],_=[],b=[],w=[];!function D(j,H,Y,X,Z,W){if(!X.length)return null;var re=u[Z]||(u[Z]=[]),U=b[Z]||(b[Z]=[]),B=_[Z]||(_[Z]=[]),V=re.length;if(++Z>s||W>1073741824){for(var ee=0;ee<X.length;ee++)re.push(X[ee]),U.push(W),B.push(null,null,null,null);return V}if(re.push(X[0]),U.push(W),X.length<=1)return B.push(null,null,null,null),V;for(var N=.5*Y,K=j+N,J=H+N,te=[],ae=[],le=[],se=[],ve=1,ue=X.length;ve<ue;ve++){var ye=X[ve],pe=c[2*ye+1];c[2*ye]<K?pe<J?te.push(ye):ae.push(ye):pe<J?le.push(ye):se.push(ye)}return B.push(D(j,H,N,te,Z,W<<=2),D(j,J,N,ae,Z,W+1),D(K,H,N,le,Z,W+2),D(K,J,N,se,Z,W+3)),V}(0,0,1,p,0,1);for(var T=0,C=0;C<u.length;C++){var M=u[C];if(p.set)p.set(M,T);else for(var I=0,P=M.length;I<P;I++)p[I+T]=M[I];var S=T+u[C].length;w[C]=[T,S],T=S}return p.range=function(){for(var D,j=[],H=arguments.length;H--;)j[H]=arguments[H];if(l(j[j.length-1])){var Y=j.pop();j.length||null==Y.x&&null==Y.l&&null==Y.left||(j=[Y],D={}),D=e(Y,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else D={};j.length||(j=o);var ae,X=k.apply(void 0,j),Z=[Math.min(X.x,X.x+X.width),Math.min(X.y,X.y+X.height),Math.max(X.x,X.x+X.width),Math.max(X.y,X.y+X.height)],W=Z[0],re=Z[1],U=Z[2],B=Z[3],V=f([W,re,U,B],o),ee=V[0],N=V[1],K=V[2],J=V[3],te=n(D.level,u.length);if(null!=D.d&&("number"==typeof D.d?ae=[D.d,D.d]:D.d.length&&(ae=D.d),te=Math.min(Math.max(Math.ceil(-d(Math.abs(ae[0])/(o[2]-o[0]))),Math.ceil(-d(Math.abs(ae[1])/(o[3]-o[1])))),te)),te=Math.min(te,u.length),D.lod)return E(ee,N,K,J,te);var le=[];function se(ue,ye,Me,pe,ge,we){if(null!==ge&&null!==we&&!(ee>ue+Me||N>ye+Me||K<ue||J<ye||pe>=te||ge===we)){var oe=u[pe];void 0===we&&(we=oe.length);for(var de=ge;de<we;de++){var Te=oe[de],Ee=t[2*Te],Ae=t[2*Te+1];Ee>=W&&Ee<=U&&Ae>=re&&Ae<=B&&le.push(Te)}var De=_[pe],Ie=De[4*ge+0],Oe=De[4*ge+1],Xe=De[4*ge+2],Fe=De[4*ge+3],Pe=ve(De,ge+1),Re=.5*Me,qe=pe+1;se(ue,ye,Re,qe,Ie,Oe||Xe||Fe||Pe),se(ue,ye+Re,Re,qe,Oe,Xe||Fe||Pe),se(ue+Re,ye,Re,qe,Xe,Fe||Pe),se(ue+Re,ye+Re,Re,qe,Fe,Pe)}}function ve(ue,ye){for(var Me=null,pe=0;null===Me;)if(Me=ue[4*ye+pe],++pe>ue.length)return null;return Me}return se(0,0,1,0,0,1),le},p;function E(D,j,H,Y,X){for(var Z=[],W=0;W<X;W++){var re=b[W],U=w[W][0],B=R(D,j,W),V=R(H,Y,W),ee=m.ge(re,B),N=m.gt(re,V,ee,re.length-1);Z[W]=[ee+U,N+U]}return Z}function R(D,j,H){for(var Y=1,X=.5,Z=.5,W=.5,re=0;re<H;re++)Y<<=2,Y+=D<X?j<Z?0:1:j<Z?2:3,W*=.5,X+=D<X?-W:W,Z+=j<Z?-W:W;return Y}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(v,$,Q){"use strict";Object.defineProperty(Q,"__esModule",{value:!0});var m=v("@turf/meta");function g(e){var n=0;if(e&&e.length>0){n+=Math.abs(k(e[0]));for(var i=1;i<e.length;i++)n-=Math.abs(k(e[i]))}return n}function k(e){var n,i,l,r,d,f,t=0,h=e.length;if(h>2){for(f=0;f<h;f++)f===h-2?(l=h-2,r=h-1,d=0):f===h-1?(l=h-1,r=0,d=1):(l=f,r=f+1,d=f+2),n=e[l],i=e[r],t+=(x(e[d][0])-x(n[0]))*Math.sin(x(i[1]));t=6378137*t*6378137/2}return t}function x(e){return e*Math.PI/180}Q.default=function(e){return m.geomReduce(e,function(n,i){return n+function(l){var r,d=0;switch(l.type){case"Polygon":return g(l.coordinates);case"MultiPolygon":for(r=0;r<l.coordinates.length;r++)d+=g(l.coordinates[r]);return d;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(i)},0)}},{"@turf/meta":63}],62:[function(v,$,Q){"use strict";function m(h,s,o){void 0===o&&(o={});var p={type:"Feature"};return(0===o.id||o.id)&&(p.id=o.id),o.bbox&&(p.bbox=o.bbox),p.properties=s||{},p.geometry=h,p}function g(h,s,o){if(void 0===o&&(o={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!t(h[0])||!t(h[1]))throw new Error("coordinates must contain numbers");return m({type:"Point",coordinates:h},s,o)}function k(h,s,o){void 0===o&&(o={});for(var p=0,c=h;p<c.length;p++){var a=c[p];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<a[a.length-1].length;y++)if(a[a.length-1][y]!==a[0][y])throw new Error("First and last Position are not equivalent.")}return m({type:"Polygon",coordinates:h},s,o)}function x(h,s,o){if(void 0===o&&(o={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");return m({type:"LineString",coordinates:h},s,o)}function e(h,s){void 0===s&&(s={});var o={type:"FeatureCollection"};return s.id&&(o.id=s.id),s.bbox&&(o.bbox=s.bbox),o.features=h,o}function n(h,s,o){return void 0===o&&(o={}),m({type:"MultiLineString",coordinates:h},s,o)}function i(h,s,o){return void 0===o&&(o={}),m({type:"MultiPoint",coordinates:h},s,o)}function l(h,s,o){return void 0===o&&(o={}),m({type:"MultiPolygon",coordinates:h},s,o)}function r(h,s){void 0===s&&(s="kilometers");var o=Q.factors[s];if(!o)throw new Error(s+" units is invalid");return h*o}function d(h,s){void 0===s&&(s="kilometers");var o=Q.factors[s];if(!o)throw new Error(s+" units is invalid");return h/o}function f(h){return h%(2*Math.PI)*180/Math.PI}function t(h){return!isNaN(h)&&null!==h&&!Array.isArray(h)}Object.defineProperty(Q,"__esModule",{value:!0}),Q.earthRadius=6371008.8,Q.factors={centimeters:100*Q.earthRadius,centimetres:100*Q.earthRadius,degrees:Q.earthRadius/111325,feet:3.28084*Q.earthRadius,inches:39.37*Q.earthRadius,kilometers:Q.earthRadius/1e3,kilometres:Q.earthRadius/1e3,meters:Q.earthRadius,metres:Q.earthRadius,miles:Q.earthRadius/1609.344,millimeters:1e3*Q.earthRadius,millimetres:1e3*Q.earthRadius,nauticalmiles:Q.earthRadius/1852,radians:1,yards:1.0936*Q.earthRadius},Q.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Q.earthRadius,yards:1.0936133},Q.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},Q.feature=m,Q.geometry=function(h,s,o){switch(void 0===o&&(o={}),h){case"Point":return g(s).geometry;case"LineString":return x(s).geometry;case"Polygon":return k(s).geometry;case"MultiPoint":return i(s).geometry;case"MultiLineString":return n(s).geometry;case"MultiPolygon":return l(s).geometry;default:throw new Error(h+" is invalid")}},Q.point=g,Q.points=function(h,s,o){return void 0===o&&(o={}),e(h.map(function(p){return g(p,s)}),o)},Q.polygon=k,Q.polygons=function(h,s,o){return void 0===o&&(o={}),e(h.map(function(p){return k(p,s)}),o)},Q.lineString=x,Q.lineStrings=function(h,s,o){return void 0===o&&(o={}),e(h.map(function(p){return x(p,s)}),o)},Q.featureCollection=e,Q.multiLineString=n,Q.multiPoint=i,Q.multiPolygon=l,Q.geometryCollection=function(h,s,o){return void 0===o&&(o={}),m({type:"GeometryCollection",geometries:h},s,o)},Q.round=function(h,s){if(void 0===s&&(s=0),s&&!(s>=0))throw new Error("precision must be a positive number");var o=Math.pow(10,s||0);return Math.round(h*o)/o},Q.radiansToLength=r,Q.lengthToRadians=d,Q.lengthToDegrees=function(h,s){return f(d(h,s))},Q.bearingToAzimuth=function(h){var s=h%360;return s<0&&(s+=360),s},Q.radiansToDegrees=f,Q.degreesToRadians=function(h){return h%360*Math.PI/180},Q.convertLength=function(h,s,o){if(void 0===s&&(s="kilometers"),void 0===o&&(o="kilometers"),!(h>=0))throw new Error("length must be a positive number");return r(d(h,s),o)},Q.convertArea=function(h,s,o){if(void 0===s&&(s="meters"),void 0===o&&(o="kilometers"),!(h>=0))throw new Error("area must be a positive number");var p=Q.areaFactors[s];if(!p)throw new Error("invalid original units");var c=Q.areaFactors[o];if(!c)throw new Error("invalid final units");return h/p*c},Q.isNumber=t,Q.isObject=function(h){return!!h&&h.constructor===Object},Q.validateBBox=function(h){if(!h)throw new Error("bbox is required");if(!Array.isArray(h))throw new Error("bbox must be an Array");if(4!==h.length&&6!==h.length)throw new Error("bbox must be an Array of 4 or 6 numbers");h.forEach(function(s){if(!t(s))throw new Error("bbox must only contain numbers")})},Q.validateId=function(h){if(!h)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof h))throw new Error("id must be a number or a string")}},{}],63:[function(v,$,Q){"use strict";Object.defineProperty(Q,"__esModule",{value:!0});var m=v("@turf/helpers");function g(r,d,f){if(null!==r)for(var t,h,s,o,p,c,a,y,u=0,_=0,b=r.type,w="FeatureCollection"===b,T="Feature"===b,C=w?r.features.length:1,M=0;M<C;M++){p=(y=!!(a=w?r.features[M].geometry:T?r.geometry:r)&&"GeometryCollection"===a.type)?a.geometries.length:1;for(var I=0;I<p;I++){var P=0,S=0;if(null!==(o=y?a.geometries[I]:a)){c=o.coordinates;var E=o.type;switch(u=!f||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===d(c,_,M,P,S))return!1;_++,P++;break;case"LineString":case"MultiPoint":for(t=0;t<c.length;t++){if(!1===d(c[t],_,M,P,S))return!1;_++,"MultiPoint"===E&&P++}"LineString"===E&&P++;break;case"Polygon":case"MultiLineString":for(t=0;t<c.length;t++){for(h=0;h<c[t].length-u;h++){if(!1===d(c[t][h],_,M,P,S))return!1;_++}"MultiLineString"===E&&P++,"Polygon"===E&&S++}"Polygon"===E&&P++;break;case"MultiPolygon":for(t=0;t<c.length;t++){for(S=0,h=0;h<c[t].length;h++){for(s=0;s<c[t][h].length-u;s++){if(!1===d(c[t][h][s],_,M,P,S))return!1;_++}S++}P++}break;case"GeometryCollection":for(t=0;t<o.geometries.length;t++)if(!1===g(o.geometries[t],d,f))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function k(r,d){var f;switch(r.type){case"FeatureCollection":for(f=0;f<r.features.length&&!1!==d(r.features[f].properties,f);f++);break;case"Feature":d(r.properties,0)}}function x(r,d){if("Feature"===r.type)d(r,0);else if("FeatureCollection"===r.type)for(var f=0;f<r.features.length&&!1!==d(r.features[f],f);f++);}function e(r,d){var f,t,h,s,o,p,c,a,y,u,_=0,b="FeatureCollection"===r.type,w="Feature"===r.type,T=b?r.features.length:1;for(f=0;f<T;f++){for(a=b?r.features[f].properties:w?r.properties:{},y=b?r.features[f].bbox:w?r.bbox:void 0,u=b?r.features[f].id:w?r.id:void 0,o=(c=!!(p=b?r.features[f].geometry:w?r.geometry:r)&&"GeometryCollection"===p.type)?p.geometries.length:1,h=0;h<o;h++)if(null!==(s=c?p.geometries[h]:p))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===d(s,_,a,y,u))return!1;break;case"GeometryCollection":for(t=0;t<s.geometries.length;t++)if(!1===d(s.geometries[t],_,a,y,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===d(null,_,a,y,u))return!1;_++}}function n(r,d){e(r,function(f,t,h,s,o){var p,c=null===f?null:f.type;switch(c){case null:case"Point":case"LineString":case"Polygon":return!1!==d(m.feature(f,h,{bbox:s,id:o}),t,0)&&void 0}switch(c){case"MultiPoint":p="Point";break;case"MultiLineString":p="LineString";break;case"MultiPolygon":p="Polygon"}for(var a=0;a<f.coordinates.length;a++)if(!1===d(m.feature({type:p,coordinates:f.coordinates[a]},h),t,a))return!1})}function i(r,d){n(r,function(f,t,h){var s=0;if(f.geometry){var o=f.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var p,c=0,a=0,y=0;return!1!==g(f,function(u,_,b,w,T){if(void 0===p||t>c||w>a||T>y)return p=u,c=t,a=w,y=T,void(s=0);var C=m.lineString([p,u],f.properties);if(!1===d(C,t,h,T,s))return!1;s++,p=u})&&void 0}}})}function l(r,d){if(!r)throw new Error("geojson is required");n(r,function(f,t,h){if(null!==f.geometry){var o=f.geometry.coordinates;switch(f.geometry.type){case"LineString":if(!1===d(f,t,h,0,0))return!1;break;case"Polygon":for(var p=0;p<o.length;p++)if(!1===d(m.lineString(o[p],f.properties),t,h,p))return!1}}})}Q.coordEach=g,Q.coordReduce=function(r,d,f,t){var h=f;return g(r,function(s,o,p,c,a){h=0===o&&void 0===f?s:d(h,s,o,p,c,a)},t),h},Q.propEach=k,Q.propReduce=function(r,d,f){var t=f;return k(r,function(h,s){t=0===s&&void 0===f?h:d(t,h,s)}),t},Q.featureEach=x,Q.featureReduce=function(r,d,f){var t=f;return x(r,function(h,s){t=0===s&&void 0===f?h:d(t,h,s)}),t},Q.coordAll=function(r){var d=[];return g(r,function(f){d.push(f)}),d},Q.geomEach=e,Q.geomReduce=function(r,d,f){var t=f;return e(r,function(h,s,o,p,c){t=0===s&&void 0===f?h:d(t,h,s,o,p,c)}),t},Q.flattenEach=n,Q.flattenReduce=function(r,d,f){var t=f;return n(r,function(h,s,o){t=0===s&&0===o&&void 0===f?h:d(t,h,s,o)}),t},Q.segmentEach=i,Q.segmentReduce=function(r,d,f){var t=f,h=!1;return i(r,function(s,o,p,c,a){t=!1===h&&void 0===f?s:d(t,s,o,p,c,a),h=!0}),t},Q.lineEach=l,Q.lineReduce=function(r,d,f){var t=f;return l(r,function(h,s,o,p){t=0===s&&void 0===f?h:d(t,h,s,o,p)}),t},Q.findSegment=function(r,d){if(!m.isObject(d=d||{}))throw new Error("options is invalid");var f,t=d.featureIndex||0,h=d.multiFeatureIndex||0,s=d.geometryIndex||0,o=d.segmentIndex||0,p=d.properties;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),p=p||r.features[t].properties,f=r.features[t].geometry;break;case"Feature":p=p||r.properties,f=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=r;break;default:throw new Error("geojson is invalid")}if(null===f)return null;var c=f.coordinates;switch(f.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=c.length+o-1),m.lineString([c[o],c[o+1]],p,d);case"Polygon":return s<0&&(s=c.length+s),o<0&&(o=c[s].length+o-1),m.lineString([c[s][o],c[s][o+1]],p,d);case"MultiLineString":return h<0&&(h=c.length+h),o<0&&(o=c[h].length+o-1),m.lineString([c[h][o],c[h][o+1]],p,d);case"MultiPolygon":return h<0&&(h=c.length+h),s<0&&(s=c[h].length+s),o<0&&(o=c[h][s].length-o-1),m.lineString([c[h][s][o],c[h][s][o+1]],p,d)}throw new Error("geojson is invalid")},Q.findPoint=function(r,d){if(!m.isObject(d=d||{}))throw new Error("options is invalid");var f,t=d.featureIndex||0,h=d.multiFeatureIndex||0,s=d.geometryIndex||0,o=d.coordIndex||0,p=d.properties;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),p=p||r.features[t].properties,f=r.features[t].geometry;break;case"Feature":p=p||r.properties,f=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=r;break;default:throw new Error("geojson is invalid")}if(null===f)return null;var c=f.coordinates;switch(f.type){case"Point":return m.point(c,p,d);case"MultiPoint":return h<0&&(h=c.length+h),m.point(c[h],p,d);case"LineString":return o<0&&(o=c.length+o),m.point(c[o],p,d);case"Polygon":return s<0&&(s=c.length+s),o<0&&(o=c[s].length+o),m.point(c[s][o],p,d);case"MultiLineString":return h<0&&(h=c.length+h),o<0&&(o=c[h].length+o),m.point(c[h][o],p,d);case"MultiPolygon":return h<0&&(h=c.length+h),s<0&&(s=c[h].length+s),o<0&&(o=c[h][s].length-o),m.point(c[h][s][o],p,d)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(v,$,Q){"use strict";Object.defineProperty(Q,"__esModule",{value:!0});var m=v("@turf/meta");function g(k){var x=[1/0,1/0,-1/0,-1/0];return m.coordEach(k,function(e){x[0]>e[0]&&(x[0]=e[0]),x[1]>e[1]&&(x[1]=e[1]),x[2]<e[0]&&(x[2]=e[0]),x[3]<e[1]&&(x[3]=e[1])}),x}g.default=g,Q.default=g},{"@turf/meta":66}],65:[function(v,$,Q){arguments[4][62][0].apply(Q,arguments)},{dup:62}],66:[function(v,$,Q){arguments[4][63][0].apply(Q,arguments)},{"@turf/helpers":65,dup:63}],67:[function(v,$,Q){"use strict";Object.defineProperty(Q,"__esModule",{value:!0});var m=v("@turf/meta"),g=v("@turf/helpers");Q.default=function(k,x){void 0===x&&(x={});var e=0,n=0,i=0;return m.coordEach(k,function(l){e+=l[0],n+=l[1],i++}),g.point([e/i,n/i],x.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(v,$,Q){"use strict";function m(h,s,o){void 0===o&&(o={});var p={type:"Feature"};return(0===o.id||o.id)&&(p.id=o.id),o.bbox&&(p.bbox=o.bbox),p.properties=s||{},p.geometry=h,p}function g(h,s,o){return void 0===o&&(o={}),m({type:"Point",coordinates:h},s,o)}function k(h,s,o){void 0===o&&(o={});for(var p=0,c=h;p<c.length;p++){var a=c[p];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<a[a.length-1].length;y++)if(a[a.length-1][y]!==a[0][y])throw new Error("First and last Position are not equivalent.")}return m({type:"Polygon",coordinates:h},s,o)}function x(h,s,o){if(void 0===o&&(o={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");return m({type:"LineString",coordinates:h},s,o)}function e(h,s){void 0===s&&(s={});var o={type:"FeatureCollection"};return s.id&&(o.id=s.id),s.bbox&&(o.bbox=s.bbox),o.features=h,o}function n(h,s,o){return void 0===o&&(o={}),m({type:"MultiLineString",coordinates:h},s,o)}function i(h,s,o){return void 0===o&&(o={}),m({type:"MultiPoint",coordinates:h},s,o)}function l(h,s,o){return void 0===o&&(o={}),m({type:"MultiPolygon",coordinates:h},s,o)}function r(h,s){void 0===s&&(s="kilometers");var o=Q.factors[s];if(!o)throw new Error(s+" units is invalid");return h*o}function d(h,s){void 0===s&&(s="kilometers");var o=Q.factors[s];if(!o)throw new Error(s+" units is invalid");return h/o}function f(h){return h%(2*Math.PI)*180/Math.PI}function t(h){return!isNaN(h)&&null!==h&&!Array.isArray(h)&&!/^\s*$/.test(h)}Object.defineProperty(Q,"__esModule",{value:!0}),Q.earthRadius=6371008.8,Q.factors={centimeters:100*Q.earthRadius,centimetres:100*Q.earthRadius,degrees:Q.earthRadius/111325,feet:3.28084*Q.earthRadius,inches:39.37*Q.earthRadius,kilometers:Q.earthRadius/1e3,kilometres:Q.earthRadius/1e3,meters:Q.earthRadius,metres:Q.earthRadius,miles:Q.earthRadius/1609.344,millimeters:1e3*Q.earthRadius,millimetres:1e3*Q.earthRadius,nauticalmiles:Q.earthRadius/1852,radians:1,yards:Q.earthRadius/1.0936},Q.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Q.earthRadius,yards:1/1.0936},Q.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},Q.feature=m,Q.geometry=function(h,s,o){switch(void 0===o&&(o={}),h){case"Point":return g(s).geometry;case"LineString":return x(s).geometry;case"Polygon":return k(s).geometry;case"MultiPoint":return i(s).geometry;case"MultiLineString":return n(s).geometry;case"MultiPolygon":return l(s).geometry;default:throw new Error(h+" is invalid")}},Q.point=g,Q.points=function(h,s,o){return void 0===o&&(o={}),e(h.map(function(p){return g(p,s)}),o)},Q.polygon=k,Q.polygons=function(h,s,o){return void 0===o&&(o={}),e(h.map(function(p){return k(p,s)}),o)},Q.lineString=x,Q.lineStrings=function(h,s,o){return void 0===o&&(o={}),e(h.map(function(p){return x(p,s)}),o)},Q.featureCollection=e,Q.multiLineString=n,Q.multiPoint=i,Q.multiPolygon=l,Q.geometryCollection=function(h,s,o){return void 0===o&&(o={}),m({type:"GeometryCollection",geometries:h},s,o)},Q.round=function(h,s){if(void 0===s&&(s=0),s&&!(s>=0))throw new Error("precision must be a positive number");var o=Math.pow(10,s||0);return Math.round(h*o)/o},Q.radiansToLength=r,Q.lengthToRadians=d,Q.lengthToDegrees=function(h,s){return f(d(h,s))},Q.bearingToAzimuth=function(h){var s=h%360;return s<0&&(s+=360),s},Q.radiansToDegrees=f,Q.degreesToRadians=function(h){return h%360*Math.PI/180},Q.convertLength=function(h,s,o){if(void 0===s&&(s="kilometers"),void 0===o&&(o="kilometers"),!(h>=0))throw new Error("length must be a positive number");return r(d(h,s),o)},Q.convertArea=function(h,s,o){if(void 0===s&&(s="meters"),void 0===o&&(o="kilometers"),!(h>=0))throw new Error("area must be a positive number");var p=Q.areaFactors[s];if(!p)throw new Error("invalid original units");var c=Q.areaFactors[o];if(!c)throw new Error("invalid final units");return h/p*c},Q.isNumber=t,Q.isObject=function(h){return!!h&&h.constructor===Object},Q.validateBBox=function(h){if(!h)throw new Error("bbox is required");if(!Array.isArray(h))throw new Error("bbox must be an Array");if(4!==h.length&&6!==h.length)throw new Error("bbox must be an Array of 4 or 6 numbers");h.forEach(function(s){if(!t(s))throw new Error("bbox must only contain numbers")})},Q.validateId=function(h){if(!h)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof h))throw new Error("id must be a number or a string")},Q.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},Q.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},Q.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},Q.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},Q.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},Q.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},Q.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(v,$,Q){"use strict";Object.defineProperty(Q,"__esModule",{value:!0});var m=v("@turf/helpers");function g(r,d,f){if(null!==r)for(var t,h,s,o,p,c,a,y,u=0,_=0,b=r.type,w="FeatureCollection"===b,T="Feature"===b,C=w?r.features.length:1,M=0;M<C;M++){p=(y=!!(a=w?r.features[M].geometry:T?r.geometry:r)&&"GeometryCollection"===a.type)?a.geometries.length:1;for(var I=0;I<p;I++){var P=0,S=0;if(null!==(o=y?a.geometries[I]:a)){c=o.coordinates;var E=o.type;switch(u=!f||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===d(c,_,M,P,S))return!1;_++,P++;break;case"LineString":case"MultiPoint":for(t=0;t<c.length;t++){if(!1===d(c[t],_,M,P,S))return!1;_++,"MultiPoint"===E&&P++}"LineString"===E&&P++;break;case"Polygon":case"MultiLineString":for(t=0;t<c.length;t++){for(h=0;h<c[t].length-u;h++){if(!1===d(c[t][h],_,M,P,S))return!1;_++}"MultiLineString"===E&&P++,"Polygon"===E&&S++}"Polygon"===E&&P++;break;case"MultiPolygon":for(t=0;t<c.length;t++){for(S=0,h=0;h<c[t].length;h++){for(s=0;s<c[t][h].length-u;s++){if(!1===d(c[t][h][s],_,M,P,S))return!1;_++}S++}P++}break;case"GeometryCollection":for(t=0;t<o.geometries.length;t++)if(!1===g(o.geometries[t],d,f))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function k(r,d){var f;switch(r.type){case"FeatureCollection":for(f=0;f<r.features.length&&!1!==d(r.features[f].properties,f);f++);break;case"Feature":d(r.properties,0)}}function x(r,d){if("Feature"===r.type)d(r,0);else if("FeatureCollection"===r.type)for(var f=0;f<r.features.length&&!1!==d(r.features[f],f);f++);}function e(r,d){var f,t,h,s,o,p,c,a,y,u,_=0,b="FeatureCollection"===r.type,w="Feature"===r.type,T=b?r.features.length:1;for(f=0;f<T;f++){for(a=b?r.features[f].properties:w?r.properties:{},y=b?r.features[f].bbox:w?r.bbox:void 0,u=b?r.features[f].id:w?r.id:void 0,o=(c=!!(p=b?r.features[f].geometry:w?r.geometry:r)&&"GeometryCollection"===p.type)?p.geometries.length:1,h=0;h<o;h++)if(null!==(s=c?p.geometries[h]:p))switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===d(s,_,a,y,u))return!1;break;case"GeometryCollection":for(t=0;t<s.geometries.length;t++)if(!1===d(s.geometries[t],_,a,y,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===d(null,_,a,y,u))return!1;_++}}function n(r,d){e(r,function(f,t,h,s,o){var p,c=null===f?null:f.type;switch(c){case null:case"Point":case"LineString":case"Polygon":return!1!==d(m.feature(f,h,{bbox:s,id:o}),t,0)&&void 0}switch(c){case"MultiPoint":p="Point";break;case"MultiLineString":p="LineString";break;case"MultiPolygon":p="Polygon"}for(var a=0;a<f.coordinates.length;a++)if(!1===d(m.feature({type:p,coordinates:f.coordinates[a]},h),t,a))return!1})}function i(r,d){n(r,function(f,t,h){var s=0;if(f.geometry){var o=f.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var p,c=0,a=0,y=0;return!1!==g(f,function(u,_,b,w,T){if(void 0===p||t>c||w>a||T>y)return p=u,c=t,a=w,y=T,void(s=0);var C=m.lineString([p,u],f.properties);if(!1===d(C,t,h,T,s))return!1;s++,p=u})&&void 0}}})}function l(r,d){if(!r)throw new Error("geojson is required");n(r,function(f,t,h){if(null!==f.geometry){var o=f.geometry.coordinates;switch(f.geometry.type){case"LineString":if(!1===d(f,t,h,0,0))return!1;break;case"Polygon":for(var p=0;p<o.length;p++)if(!1===d(m.lineString(o[p],f.properties),t,h,p))return!1}}})}Q.coordEach=g,Q.coordReduce=function(r,d,f,t){var h=f;return g(r,function(s,o,p,c,a){h=0===o&&void 0===f?s:d(h,s,o,p,c,a)},t),h},Q.propEach=k,Q.propReduce=function(r,d,f){var t=f;return k(r,function(h,s){t=0===s&&void 0===f?h:d(t,h,s)}),t},Q.featureEach=x,Q.featureReduce=function(r,d,f){var t=f;return x(r,function(h,s){t=0===s&&void 0===f?h:d(t,h,s)}),t},Q.coordAll=function(r){var d=[];return g(r,function(f){d.push(f)}),d},Q.geomEach=e,Q.geomReduce=function(r,d,f){var t=f;return e(r,function(h,s,o,p,c){t=0===s&&void 0===f?h:d(t,h,s,o,p,c)}),t},Q.flattenEach=n,Q.flattenReduce=function(r,d,f){var t=f;return n(r,function(h,s,o){t=0===s&&0===o&&void 0===f?h:d(t,h,s,o)}),t},Q.segmentEach=i,Q.segmentReduce=function(r,d,f){var t=f,h=!1;return i(r,function(s,o,p,c,a){t=!1===h&&void 0===f?s:d(t,s,o,p,c,a),h=!0}),t},Q.lineEach=l,Q.lineReduce=function(r,d,f){var t=f;return l(r,function(h,s,o,p){t=0===s&&void 0===f?h:d(t,h,s,o,p)}),t},Q.findSegment=function(r,d){if(!m.isObject(d=d||{}))throw new Error("options is invalid");var f,t=d.featureIndex||0,h=d.multiFeatureIndex||0,s=d.geometryIndex||0,o=d.segmentIndex||0,p=d.properties;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),p=p||r.features[t].properties,f=r.features[t].geometry;break;case"Feature":p=p||r.properties,f=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=r;break;default:throw new Error("geojson is invalid")}if(null===f)return null;var c=f.coordinates;switch(f.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=c.length+o-1),m.lineString([c[o],c[o+1]],p,d);case"Polygon":return s<0&&(s=c.length+s),o<0&&(o=c[s].length+o-1),m.lineString([c[s][o],c[s][o+1]],p,d);case"MultiLineString":return h<0&&(h=c.length+h),o<0&&(o=c[h].length+o-1),m.lineString([c[h][o],c[h][o+1]],p,d);case"MultiPolygon":return h<0&&(h=c.length+h),s<0&&(s=c[h].length+s),o<0&&(o=c[h][s].length-o-1),m.lineString([c[h][s][o],c[h][s][o+1]],p,d)}throw new Error("geojson is invalid")},Q.findPoint=function(r,d){if(!m.isObject(d=d||{}))throw new Error("options is invalid");var f,t=d.featureIndex||0,h=d.multiFeatureIndex||0,s=d.geometryIndex||0,o=d.coordIndex||0,p=d.properties;switch(r.type){case"FeatureCollection":t<0&&(t=r.features.length+t),p=p||r.features[t].properties,f=r.features[t].geometry;break;case"Feature":p=p||r.properties,f=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":f=r;break;default:throw new Error("geojson is invalid")}if(null===f)return null;var c=f.coordinates;switch(f.type){case"Point":return m.point(c,p,d);case"MultiPoint":return h<0&&(h=c.length+h),m.point(c[h],p,d);case"LineString":return o<0&&(o=c.length+o),m.point(c[o],p,d);case"Polygon":return s<0&&(s=c.length+s),o<0&&(o=c[s].length+o),m.point(c[s][o],p,d);case"MultiLineString":return h<0&&(h=c.length+h),o<0&&(o=c[h].length+o),m.point(c[h][o],p,d);case"MultiPolygon":return h<0&&(h=c.length+h),s<0&&(s=c[h].length+s),o<0&&(o=c[h][s].length-o),m.point(c[h][s][o],p,d)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(v,$,Q){$.exports=function(m){var g=0,k=0,x=0,e=0;return m.map(function(n){var i=(n=n.slice())[0],l=i.toUpperCase();if(i!=l)switch(n[0]=l,i){case"a":n[6]+=x,n[7]+=e;break;case"v":n[1]+=e;break;case"h":n[1]+=x;break;default:for(var r=1;r<n.length;)n[r++]+=x,n[r++]+=e}switch(l){case"Z":x=g,e=k;break;case"H":x=n[1];break;case"V":e=n[1];break;case"M":x=g=n[1],e=k=n[2];break;default:x=n[n.length-2],e=n[n.length-1]}return n})}},{}],71:[function(v,$,Q){"use strict";$.exports=function(m,g){if(!m||null==m.length)throw Error("Argument should be an array");g=null==g?1:Math.floor(g);for(var k=Array(2*g),x=0;x<g;x++){for(var e=-1/0,n=1/0,i=x,l=m.length;i<l;i+=g)m[i]>e&&(e=m[i]),m[i]<n&&(n=m[i]);k[x]=n,k[g+x]=e}return k}},{}],72:[function(v,$,Q){"use strict";$.exports=function(m,g,k){if("function"==typeof Array.prototype.findIndex)return m.findIndex(g,k);if("function"!=typeof g)throw new TypeError("predicate must be a function");var x=Object(m),e=x.length;if(0===e)return-1;for(var n=0;n<e;n++)if(g.call(k,x[n],n,x))return n;return-1}},{}],73:[function(v,$,Q){"use strict";var m=v("array-bounds");$.exports=function(g,k,x){if(!g||null==g.length)throw Error("Argument should be an array");null==k&&(k=1),null==x&&(x=m(g,k));for(var e=0;e<k;e++){var n=x[k+e],i=x[e],l=e,r=g.length;if(n===1/0&&i===-1/0)for(l=e;l<r;l+=k)g[l]=g[l]===n?1:g[l]===i?0:.5;else if(n===1/0)for(l=e;l<r;l+=k)g[l]=g[l]===n?1:0;else if(i===-1/0)for(l=e;l<r;l+=k)g[l]=g[l]===i?0:1;else{var d=n-i;for(l=e;l<r;l+=k)isNaN(g[l])||(g[l]=0===d?.5:(g[l]-i)/d)}}return g}},{"array-bounds":71}],74:[function(v,$,Q){$.exports=function(m,g){var k="number"==typeof m,x="number"==typeof g;k&&!x?(g=m,m=0):k||x||(m=0,g=0);var e=(g|=0)-(m|=0);if(e<0)throw new Error("array length must be positive");for(var n=new Array(e),i=0,l=m;i<e;i++,l++)n[i]=l;return n}},{}],75:[function(v,$,Q){(function(m){(function(){"use strict";var g=v("object-assign");function k(w,T){if(w===T)return 0;for(var C=w.length,M=T.length,I=0,P=Math.min(C,M);I<P;++I)if(w[I]!==T[I]){C=w[I],M=T[I];break}return C<M?-1:M<C?1:0}function x(w){return m.Buffer&&"function"==typeof m.Buffer.isBuffer?m.Buffer.isBuffer(w):!(null==w||!w._isBuffer)}var e=v("util/"),n=Object.prototype.hasOwnProperty,i=Array.prototype.slice,l="foo"===function(){}.name;function r(w){return Object.prototype.toString.call(w)}function d(w){return!x(w)&&"function"==typeof m.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(w):!!w&&(w instanceof DataView||!!(w.buffer&&w.buffer instanceof ArrayBuffer)))}var f=$.exports=c,t=/\s*function\s+([^\(\s]*)\s*/;function h(w){if(e.isFunction(w)){if(l)return w.name;var T=w.toString().match(t);return T&&T[1]}}function s(w,T){return"string"==typeof w?w.length<T?w:w.slice(0,T):w}function o(w){if(l||!e.isFunction(w))return e.inspect(w);var T=h(w);return"[Function"+(T?": "+T:"")+"]"}function p(w,T,C,M,I){throw new f.AssertionError({message:C,actual:w,expected:T,operator:M,stackStartFunction:I})}function c(w,T){w||p(w,!0,T,"==",f.ok)}function a(w,T,C,M){if(w===T)return!0;if(x(w)&&x(T))return 0===k(w,T);if(e.isDate(w)&&e.isDate(T))return w.getTime()===T.getTime();if(e.isRegExp(w)&&e.isRegExp(T))return w.source===T.source&&w.global===T.global&&w.multiline===T.multiline&&w.lastIndex===T.lastIndex&&w.ignoreCase===T.ignoreCase;if(null!==w&&"object"==typeof w||null!==T&&"object"==typeof T){if(d(w)&&d(T)&&r(w)===r(T)&&!(w instanceof Float32Array||w instanceof Float64Array))return 0===k(new Uint8Array(w.buffer),new Uint8Array(T.buffer));if(x(w)!==x(T))return!1;var I=(M=M||{actual:[],expected:[]}).actual.indexOf(w);return-1!==I&&I===M.expected.indexOf(T)||(M.actual.push(w),M.expected.push(T),function(P,S,E,R){if(null==P||null==S)return!1;if(e.isPrimitive(P)||e.isPrimitive(S))return P===S;if(E&&Object.getPrototypeOf(P)!==Object.getPrototypeOf(S))return!1;var D=y(P),j=y(S);if(D&&!j||!D&&j)return!1;if(D)return a(P=i.call(P),S=i.call(S),E);var H,Y,X=b(P),Z=b(S);if(X.length!==Z.length)return!1;for(X.sort(),Z.sort(),Y=X.length-1;Y>=0;Y--)if(X[Y]!==Z[Y])return!1;for(Y=X.length-1;Y>=0;Y--)if(!a(P[H=X[Y]],S[H],E,R))return!1;return!0}(w,T,C,M))}return C?w===T:w==T}function y(w){return"[object Arguments]"==Object.prototype.toString.call(w)}function u(w,T){if(!w||!T)return!1;if("[object RegExp]"==Object.prototype.toString.call(T))return T.test(w);try{if(w instanceof T)return!0}catch{}return!Error.isPrototypeOf(T)&&!0===T.call({},w)}function _(w,T,C,M){var I;if("function"!=typeof T)throw new TypeError('"block" argument must be a function');"string"==typeof C&&(M=C,C=null),I=function(E){var R;try{E()}catch(D){R=D}return R}(T),M=(C&&C.name?" ("+C.name+").":".")+(M?" "+M:"."),w&&!I&&p(I,C,"Missing expected exception"+M);var P="string"==typeof M,S=!w&&I&&!C;if((!w&&e.isError(I)&&P&&u(I,C)||S)&&p(I,C,"Got unwanted exception"+M),w&&I&&C&&!u(I,C)||!w&&I)throw I}f.AssertionError=function(w){this.name="AssertionError",this.actual=w.actual,this.expected=w.expected,this.operator=w.operator,w.message?(this.message=w.message,this.generatedMessage=!1):(this.message=s(o(this.actual),128)+" "+this.operator+" "+s(o(this.expected),128),this.generatedMessage=!0);var T=w.stackStartFunction||p;if(Error.captureStackTrace)Error.captureStackTrace(this,T);else{var C=new Error;if(C.stack){var M=C.stack,I=h(T),P=M.indexOf("\n"+I);if(P>=0){var S=M.indexOf("\n",P+1);M=M.substring(S+1)}this.stack=M}}},e.inherits(f.AssertionError,Error),f.fail=p,f.ok=c,f.equal=function(w,T,C){w!=T&&p(w,T,C,"==",f.equal)},f.notEqual=function(w,T,C){w==T&&p(w,T,C,"!=",f.notEqual)},f.deepEqual=function(w,T,C){a(w,T,!1)||p(w,T,C,"deepEqual",f.deepEqual)},f.deepStrictEqual=function(w,T,C){a(w,T,!0)||p(w,T,C,"deepStrictEqual",f.deepStrictEqual)},f.notDeepEqual=function(w,T,C){a(w,T,!1)&&p(w,T,C,"notDeepEqual",f.notDeepEqual)},f.notDeepStrictEqual=function w(T,C,M){a(T,C,!0)&&p(T,C,M,"notDeepStrictEqual",w)},f.strictEqual=function(w,T,C){w!==T&&p(w,T,C,"===",f.strictEqual)},f.notStrictEqual=function(w,T,C){w===T&&p(w,T,C,"!==",f.notStrictEqual)},f.throws=function(w,T,C){_(!0,w,T,C)},f.doesNotThrow=function(w,T,C){_(!1,w,T,C)},f.ifError=function(w){if(w)throw w},f.strict=g(function w(T,C){T||p(T,!0,C,"==",w)},f,{equal:f.strictEqual,deepEqual:f.deepStrictEqual,notEqual:f.notStrictEqual,notDeepEqual:f.notDeepStrictEqual}),f.strict.strict=f.strict;var b=Object.keys||function(w){var T=[];for(var C in w)n.call(w,C)&&T.push(C);return T}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":247,"util/":78}],76:[function(v,$,Q){$.exports="function"==typeof Object.create?function(m,g){m.super_=g,m.prototype=Object.create(g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}})}:function(m,g){m.super_=g;var k=function(){};k.prototype=g.prototype,m.prototype=new k,m.prototype.constructor=m}},{}],77:[function(v,$,Q){$.exports=function(m){return m&&"object"==typeof m&&"function"==typeof m.copy&&"function"==typeof m.fill&&"function"==typeof m.readUInt8}},{}],78:[function(v,$,Q){(function(m,g){(function(){var k=/%[sdj%]/g;Q.format=function(P){if(!p(P)){for(var S=[],E=0;E<arguments.length;E++)S.push(n(arguments[E]));return S.join(" ")}E=1;for(var R=arguments,D=R.length,j=String(P).replace(k,function(Y){if("%%"===Y)return"%";if(E>=D)return Y;switch(Y){case"%s":return String(R[E++]);case"%d":return Number(R[E++]);case"%j":try{return JSON.stringify(R[E++])}catch{return"[Circular]"}default:return Y}}),H=R[E];E<D;H=R[++E])s(H)||!y(H)?j+=" "+H:j+=" "+n(H);return j},Q.deprecate=function(P,S){if(c(g.process))return function(){return Q.deprecate(P,S).apply(this,arguments)};if(!0===m.noDeprecation)return P;var E=!1;return function(){if(!E){if(m.throwDeprecation)throw new Error(S);m.traceDeprecation?console.trace(S):console.error(S),E=!0}return P.apply(this,arguments)}};var x,e={};function n(P,S){var E={seen:[],stylize:l};return arguments.length>=3&&(E.depth=arguments[2]),arguments.length>=4&&(E.colors=arguments[3]),h(S)?E.showHidden=S:S&&Q._extend(E,S),c(E.showHidden)&&(E.showHidden=!1),c(E.depth)&&(E.depth=2),c(E.colors)&&(E.colors=!1),c(E.customInspect)&&(E.customInspect=!0),E.colors&&(E.stylize=i),r(E,P,E.depth)}function i(P,S){var E=n.styles[S];return E?"\x1b["+n.colors[E][0]+"m"+P+"\x1b["+n.colors[E][1]+"m":P}function l(P,S){return P}function r(P,S,E){if(P.customInspect&&S&&b(S.inspect)&&S.inspect!==Q.inspect&&(!S.constructor||S.constructor.prototype!==S)){var R=S.inspect(E,P);return p(R)||(R=r(P,R,E)),R}var D=function(U,B){if(c(B))return U.stylize("undefined","undefined");if(p(B)){var V="'"+JSON.stringify(B).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return U.stylize(V,"string")}return o(B)?U.stylize(""+B,"number"):h(B)?U.stylize(""+B,"boolean"):s(B)?U.stylize("null","null"):void 0}(P,S);if(D)return D;var B,j=Object.keys(S),H=(B={},j.forEach(function(V,ee){B[V]=!0}),B);if(P.showHidden&&(j=Object.getOwnPropertyNames(S)),_(S)&&(j.indexOf("message")>=0||j.indexOf("description")>=0))return d(S);if(0===j.length){if(b(S))return P.stylize("[Function"+(S.name?": "+S.name:"")+"]","special");if(a(S))return P.stylize(RegExp.prototype.toString.call(S),"regexp");if(u(S))return P.stylize(Date.prototype.toString.call(S),"date");if(_(S))return d(S)}var X,Z="",W=!1,re=["{","}"];return t(S)&&(W=!0,re=["[","]"]),b(S)&&(Z=" [Function"+(S.name?": "+S.name:"")+"]"),a(S)&&(Z=" "+RegExp.prototype.toString.call(S)),u(S)&&(Z=" "+Date.prototype.toUTCString.call(S)),_(S)&&(Z=" "+d(S)),0!==j.length||W&&0!=S.length?E<0?a(S)?P.stylize(RegExp.prototype.toString.call(S),"regexp"):P.stylize("[Object]","special"):(P.seen.push(S),X=W?function(U,B,V,ee,N){for(var K=[],J=0,te=B.length;J<te;++J)I(B,String(J))?K.push(f(U,B,V,ee,String(J),!0)):K.push("");return N.forEach(function(ae){ae.match(/^\d+$/)||K.push(f(U,B,V,ee,ae,!0))}),K}(P,S,E,H,j):j.map(function(U){return f(P,S,E,H,U,W)}),P.seen.pop(),function(U,B,V){return U.reduce(function(ee,N){return N.indexOf("\n"),ee+N.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?V[0]+(""===B?"":B+"\n ")+" "+U.join(",\n  ")+" "+V[1]:V[0]+B+" "+U.join(", ")+" "+V[1]}(X,Z,re)):re[0]+Z+re[1]}function d(P){return"["+Error.prototype.toString.call(P)+"]"}function f(P,S,E,R,D,j){var H,Y,X;if((X=Object.getOwnPropertyDescriptor(S,D)||{value:S[D]}).get?Y=P.stylize(X.set?"[Getter/Setter]":"[Getter]","special"):X.set&&(Y=P.stylize("[Setter]","special")),I(R,D)||(H="["+D+"]"),Y||(P.seen.indexOf(X.value)<0?(Y=s(E)?r(P,X.value,null):r(P,X.value,E-1)).indexOf("\n")>-1&&(Y=j?Y.split("\n").map(function(Z){return"  "+Z}).join("\n").substr(2):"\n"+Y.split("\n").map(function(Z){return"   "+Z}).join("\n")):Y=P.stylize("[Circular]","special")),c(H)){if(j&&D.match(/^\d+$/))return Y;(H=JSON.stringify(""+D)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(H=H.substr(1,H.length-2),H=P.stylize(H,"name")):(H=H.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),H=P.stylize(H,"string"))}return H+": "+Y}function t(P){return Array.isArray(P)}function h(P){return"boolean"==typeof P}function s(P){return null===P}function o(P){return"number"==typeof P}function p(P){return"string"==typeof P}function c(P){return void 0===P}function a(P){return y(P)&&"[object RegExp]"===w(P)}function y(P){return"object"==typeof P&&null!==P}function u(P){return y(P)&&"[object Date]"===w(P)}function _(P){return y(P)&&("[object Error]"===w(P)||P instanceof Error)}function b(P){return"function"==typeof P}function w(P){return Object.prototype.toString.call(P)}function T(P){return P<10?"0"+P.toString(10):P.toString(10)}Q.debuglog=function(P){if(c(x)&&(x=m.env.NODE_DEBUG||""),P=P.toUpperCase(),!e[P])if(new RegExp("\\b"+P+"\\b","i").test(x)){var S=m.pid;e[P]=function(){var E=Q.format.apply(Q,arguments);console.error("%s %d: %s",P,S,E)}}else e[P]=function(){};return e[P]},Q.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},Q.isArray=t,Q.isBoolean=h,Q.isNull=s,Q.isNullOrUndefined=function(P){return null==P},Q.isNumber=o,Q.isString=p,Q.isSymbol=function(P){return"symbol"==typeof P},Q.isUndefined=c,Q.isRegExp=a,Q.isObject=y,Q.isDate=u,Q.isError=_,Q.isFunction=b,Q.isPrimitive=function(P){return null===P||"boolean"==typeof P||"number"==typeof P||"string"==typeof P||"symbol"==typeof P||void 0===P},Q.isBuffer=v("./support/isBuffer");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(){var P=new Date,S=[T(P.getHours()),T(P.getMinutes()),T(P.getSeconds())].join(":");return[P.getDate(),C[P.getMonth()],S].join(" ")}function I(P,S){return Object.prototype.hasOwnProperty.call(P,S)}Q.log=function(){console.log("%s - %s",M(),Q.format.apply(Q,arguments))},Q.inherits=v("inherits"),Q._extend=function(P,S){if(!S||!y(S))return P;for(var E=Object.keys(S),R=E.length;R--;)P[E[R]]=S[E[R]];return P}}).call(this)}).call(this,v("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":77,_process:278,inherits:76}],79:[function(v,$,Q){"use strict";Q.byteLength=function(r){var d=i(r),t=d[1];return 3*(d[0]+t)/4-t},Q.toByteArray=function(r){var d,f,u,t=i(r),h=t[0],s=t[1],o=new k(3*(h+(u=s))/4-u),p=0,c=s>0?h-4:h;for(f=0;f<c;f+=4)d=g[r.charCodeAt(f)]<<18|g[r.charCodeAt(f+1)]<<12|g[r.charCodeAt(f+2)]<<6|g[r.charCodeAt(f+3)],o[p++]=d>>16&255,o[p++]=d>>8&255,o[p++]=255&d;return 2===s&&(d=g[r.charCodeAt(f)]<<2|g[r.charCodeAt(f+1)]>>4,o[p++]=255&d),1===s&&(d=g[r.charCodeAt(f)]<<10|g[r.charCodeAt(f+1)]<<4|g[r.charCodeAt(f+2)]>>2,o[p++]=d>>8&255,o[p++]=255&d),o},Q.fromByteArray=function(r){for(var d,f=r.length,t=f%3,h=[],s=0,o=f-t;s<o;s+=16383)h.push(l(r,s,s+16383>o?o:s+16383));return 1===t?h.push(m[(d=r[f-1])>>2]+m[d<<4&63]+"=="):2===t&&h.push(m[(d=(r[f-2]<<8)+r[f-1])>>10]+m[d>>4&63]+m[d<<2&63]+"="),h.join("")};for(var m=[],g=[],k=typeof Uint8Array<"u"?Uint8Array:Array,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=x.length;e<n;++e)m[e]=x[e],g[x.charCodeAt(e)]=e;function i(r){var d=r.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=r.indexOf("=");return-1===f&&(f=d),[f,f===d?0:4-f%4]}function l(r,d,f){for(var h,s=[],o=d;o<f;o+=3)s.push(m[(h=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(255&r[o+2]))>>18&63]+m[h>>12&63]+m[h>>6&63]+m[63&h]);return s.join("")}g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63},{}],80:[function(v,$,Q){"use strict";function m(i,l,r,d,f){for(var t=f+1;d<=f;){var h=d+f>>>1,s=i[h];(void 0!==r?r(s,l):s-l)>=0?(t=h,f=h-1):d=h+1}return t}function g(i,l,r,d,f){for(var t=f+1;d<=f;){var h=d+f>>>1,s=i[h];(void 0!==r?r(s,l):s-l)>0?(t=h,f=h-1):d=h+1}return t}function k(i,l,r,d,f){for(var t=d-1;d<=f;){var h=d+f>>>1,s=i[h];(void 0!==r?r(s,l):s-l)<0?(t=h,d=h+1):f=h-1}return t}function x(i,l,r,d,f){for(var t=d-1;d<=f;){var h=d+f>>>1,s=i[h];(void 0!==r?r(s,l):s-l)<=0?(t=h,d=h+1):f=h-1}return t}function e(i,l,r,d,f){for(;d<=f;){var t=d+f>>>1,h=i[t],s=void 0!==r?r(h,l):h-l;if(0===s)return t;s<=0?d=t+1:f=t-1}return-1}function n(i,l,r,d,f,t){return"function"==typeof r?t(i,l,r,void 0===d?0:0|d,void 0===f?i.length-1:0|f):t(i,l,void 0,void 0===r?0:0|r,void 0===d?i.length-1:0|d)}$.exports={ge:function(i,l,r,d,f){return n(i,l,r,d,f,m)},gt:function(i,l,r,d,f){return n(i,l,r,d,f,g)},lt:function(i,l,r,d,f){return n(i,l,r,d,f,k)},le:function(i,l,r,d,f){return n(i,l,r,d,f,x)},eq:function(i,l,r,d,f){return n(i,l,r,d,f,e)}}},{}],81:[function(v,$,Q){"use strict";function m(k){var x=32;return(k&=-k)&&x--,65535&k&&(x-=16),16711935&k&&(x-=8),252645135&k&&(x-=4),858993459&k&&(x-=2),1431655765&k&&(x-=1),x}Q.INT_BITS=32,Q.INT_MAX=2147483647,Q.INT_MIN=-1<<31,Q.sign=function(k){return(k>0)-(k<0)},Q.abs=function(k){var x=k>>31;return(k^x)-x},Q.min=function(k,x){return x^(k^x)&-(k<x)},Q.max=function(k,x){return k^(k^x)&-(k<x)},Q.isPow2=function(k){return!(k&k-1||!k)},Q.log2=function(k){var x,e;return x=(k>65535)<<4,x|=e=((k>>>=x)>255)<<3,x|=e=((k>>>=e)>15)<<2,(x|=e=((k>>>=e)>3)<<1)|(k>>>=e)>>1},Q.log10=function(k){return k>=1e9?9:k>=1e8?8:k>=1e7?7:k>=1e6?6:k>=1e5?5:k>=1e4?4:k>=1e3?3:k>=100?2:k>=10?1:0},Q.popCount=function(k){return 16843009*((k=(858993459&(k-=k>>>1&1431655765))+(k>>>2&858993459))+(k>>>4)&252645135)>>>24},Q.countTrailingZeros=m,Q.nextPow2=function(k){return k+=0===k,--k,k|=k>>>1,k|=k>>>2,k|=k>>>4,1+((k|=k>>>8)|k>>>16)},Q.prevPow2=function(k){return k|=k>>>1,k|=k>>>2,k|=k>>>4,k|=k>>>8,(k|=k>>>16)-(k>>>1)},Q.parity=function(k){return k^=k>>>16,k^=k>>>8,k^=k>>>4,27030>>>(k&=15)&1};var g=new Array(256);(function(k){for(var x=0;x<256;++x){var e=x,n=x,i=7;for(e>>>=1;e;e>>>=1)n<<=1,n|=1&e,--i;k[x]=n<<i&255}})(g),Q.reverse=function(k){return g[255&k]<<24|g[k>>>8&255]<<16|g[k>>>16&255]<<8|g[k>>>24&255]},Q.interleave2=function(k,x){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k&=65535)|k<<8))|k<<4))|k<<2))|k<<1))|(x=1431655765&((x=858993459&((x=252645135&((x=16711935&((x&=65535)|x<<8))|x<<4))|x<<2))|x<<1))<<1},Q.deinterleave2=function(k,x){return(k=65535&((k=16711935&((k=252645135&((k=858993459&((k=k>>>x&1431655765)|k>>>1))|k>>>2))|k>>>4))|k>>>16))<<16>>16},Q.interleave3=function(k,x,e){return k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2),(k|=(x=1227133513&((x=3272356035&((x=251719695&((x=4278190335&((x&=1023)|x<<16))|x<<8))|x<<4))|x<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},Q.deinterleave3=function(k,x){return(k=1023&((k=4278190335&((k=251719695&((k=3272356035&((k=k>>>x&1227133513)|k>>>2))|k>>>4))|k>>>8))|k>>>16))<<22>>22},Q.nextCombination=function(k){var x=k|k-1;return x+1|(~x&-~x)-1>>>m(k)+1}},{}],82:[function(v,$,Q){"use strict";var m=v("clamp");$.exports=function(e,n){n||(n={});var i,l,r,d,f,t,s,p,c,a=null==n.cutoff?.25:n.cutoff,y=null==n.radius?8:n.radius,u=n.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!n.width||!n.height)throw Error("For raw data width and height should be provided by options");i=n.width,l=n.height,d=e,t=n.stride?n.stride:Math.floor(e.length/i/l)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(d=(s=e).getContext("2d").getImageData(0,0,i=s.width,l=s.height).data,t=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(d=e.getImageData(0,0,i=(s=e.canvas).width,l=s.height).data,t=4):window.ImageData&&e instanceof window.ImageData&&(i=e.width,l=e.height,d=e.data,t=4);if(r=Math.max(i,l),window.Uint8ClampedArray&&d instanceof window.Uint8ClampedArray||window.Uint8Array&&d instanceof window.Uint8Array)for(f=d,d=Array(i*l),p=0,c=f.length;p<c;p++)d[p]=f[p*t+u]/255;else if(1!==t)throw Error("Raw data can have only 1 value per pixel");var _=Array(i*l),b=Array(i*l),w=Array(r),T=Array(r),C=Array(r+1),M=Array(r);for(p=0,c=i*l;p<c;p++){var I=d[p];_[p]=1===I?0:0===I?g:Math.pow(Math.max(0,.5-I),2),b[p]=1===I?g:0===I?0:Math.pow(Math.max(0,I-.5),2)}k(_,i,l,w,T,M,C),k(b,i,l,w,T,M,C);var P=window.Float32Array?new Float32Array(i*l):new Array(i*l);for(p=0,c=i*l;p<c;p++)P[p]=m(1-((_[p]-b[p])/y+a),0,1);return P};var g=1e20;function k(e,n,i,l,r,d,f){for(var t=0;t<n;t++){for(var h=0;h<i;h++)l[h]=e[h*n+t];for(x(l,r,d,f,i),h=0;h<i;h++)e[h*n+t]=r[h]}for(h=0;h<i;h++){for(t=0;t<n;t++)l[t]=e[h*n+t];for(x(l,r,d,f,n),t=0;t<n;t++)e[h*n+t]=Math.sqrt(r[t])}}function x(e,n,i,l,r){i[0]=0,l[0]=-g,l[1]=+g;for(var d=1,f=0;d<r;d++){for(var t=(e[d]+d*d-(e[i[f]]+i[f]*i[f]))/(2*d-2*i[f]);t<=l[f];)f--,t=(e[d]+d*d-(e[i[f]]+i[f]*i[f]))/(2*d-2*i[f]);i[++f]=d,l[f]=t,l[f+1]=+g}for(d=0,f=0;d<r;d++){for(;l[f+1]<d;)f++;n[d]=(d-i[f])*(d-i[f])+e[i[f]]}}},{clamp:86}],83:[function(v,$,Q){},{}],84:[function(v,$,Q){"use strict";var m,g="object"==typeof Reflect?Reflect:null,k=g&&"function"==typeof g.apply?g.apply:function(o,p,c){return Function.prototype.apply.call(o,p,c)};m=g&&"function"==typeof g.ownKeys?g.ownKeys:Object.getOwnPropertySymbols?function(o){return Object.getOwnPropertyNames(o).concat(Object.getOwnPropertySymbols(o))}:function(o){return Object.getOwnPropertyNames(o)};var x=Number.isNaN||function(o){return o!=o};function e(){e.init.call(this)}$.exports=e,$.exports.once=function(o,p){return new Promise(function(c,a){function y(){void 0!==u&&o.removeListener("error",u),c([].slice.call(arguments))}var u;"error"!==p&&(u=function(_){o.removeListener(p,y),a(_)},o.once("error",u)),o.once(p,y)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var n=10;function i(o){if("function"!=typeof o)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof o)}function l(o){return void 0===o._maxListeners?e.defaultMaxListeners:o._maxListeners}function r(o,p,c,a){var y,u,_;if(i(c),void 0===(u=o._events)?(u=o._events=Object.create(null),o._eventsCount=0):(void 0!==u.newListener&&(o.emit("newListener",p,c.listener?c.listener:c),u=o._events),_=u[p]),void 0===_)_=u[p]=c,++o._eventsCount;else if("function"==typeof _?_=u[p]=a?[c,_]:[_,c]:a?_.unshift(c):_.push(c),(y=l(o))>0&&_.length>y&&!_.warned){_.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+_.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=o,w.type=p,w.count=_.length,console&&console.warn&&console.warn(w)}return o}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(o,p,c){var a={fired:!1,wrapFn:void 0,target:o,type:p,listener:c},y=d.bind(a);return y.listener=c,a.wrapFn=y,y}function t(o,p,c){var a=o._events;if(void 0===a)return[];var y=a[p];return void 0===y?[]:"function"==typeof y?c?[y.listener||y]:[y]:c?function(u){for(var _=new Array(u.length),b=0;b<_.length;++b)_[b]=u[b].listener||u[b];return _}(y):s(y,y.length)}function h(o){var p=this._events;if(void 0!==p){var c=p[o];if("function"==typeof c)return 1;if(void 0!==c)return c.length}return 0}function s(o,p){for(var c=new Array(p),a=0;a<p;++a)c[a]=o[a];return c}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(o){if("number"!=typeof o||o<0||x(o))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+o+".");n=o}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(o){if("number"!=typeof o||o<0||x(o))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+o+".");return this._maxListeners=o,this},e.prototype.getMaxListeners=function(){return l(this)},e.prototype.emit=function(o){for(var p=[],c=1;c<arguments.length;c++)p.push(arguments[c]);var a="error"===o,y=this._events;if(void 0!==y)a=a&&void 0===y.error;else if(!a)return!1;if(a){var u;if(p.length>0&&(u=p[0]),u instanceof Error)throw u;var _=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw _.context=u,_}var b=y[o];if(void 0===b)return!1;if("function"==typeof b)k(b,this,p);else{var w=b.length,T=s(b,w);for(c=0;c<w;++c)k(T[c],this,p)}return!0},e.prototype.on=e.prototype.addListener=function(o,p){return r(this,o,p,!1)},e.prototype.prependListener=function(o,p){return r(this,o,p,!0)},e.prototype.once=function(o,p){return i(p),this.on(o,f(this,o,p)),this},e.prototype.prependOnceListener=function(o,p){return i(p),this.prependListener(o,f(this,o,p)),this},e.prototype.off=e.prototype.removeListener=function(o,p){var c,a,y,u,_;if(i(p),void 0===(a=this._events))return this;if(void 0===(c=a[o]))return this;if(c===p||c.listener===p)0==--this._eventsCount?this._events=Object.create(null):(delete a[o],a.removeListener&&this.emit("removeListener",o,c.listener||p));else if("function"!=typeof c){for(y=-1,u=c.length-1;u>=0;u--)if(c[u]===p||c[u].listener===p){_=c[u].listener,y=u;break}if(y<0)return this;0===y?c.shift():function(b,w){for(;w+1<b.length;w++)b[w]=b[w+1];b.pop()}(c,y),1===c.length&&(a[o]=c[0]),void 0!==a.removeListener&&this.emit("removeListener",o,_||p)}return this},e.prototype.removeAllListeners=function(o){var p,c,a;if(void 0===(c=this._events))return this;if(void 0===c.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==c[o]&&(0==--this._eventsCount?this._events=Object.create(null):delete c[o]),this;if(0===arguments.length){var y,u=Object.keys(c);for(a=0;a<u.length;++a)"removeListener"!==(y=u[a])&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(p=c[o]))this.removeListener(o,p);else if(void 0!==p)for(a=p.length-1;a>=0;a--)this.removeListener(o,p[a]);return this},e.prototype.listeners=function(o){return t(this,o,!0)},e.prototype.rawListeners=function(o){return t(this,o,!1)},e.listenerCount=function(o,p){return"function"==typeof o.listenerCount?o.listenerCount(p):h.call(o,p)},e.prototype.listenerCount=h,e.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},{}],85:[function(v,$,Q){(function(m){(function(){"use strict";var g=v("base64-js"),k=v("ieee754");function x(U){if(U>2147483647)throw new RangeError('The value "'+U+'" is invalid for option "size"');var B=new Uint8Array(U);return B.__proto__=e.prototype,B}function e(U,B,V){if("number"==typeof U){if("string"==typeof B)throw new TypeError('The "string" argument must be of type string. Received type number');return l(U)}return n(U,B,V)}function n(U,B,V){if("string"==typeof U)return function(K,J){if("string"==typeof J&&""!==J||(J="utf8"),!e.isEncoding(J))throw new TypeError("Unknown encoding: "+J);var te=0|f(K,J),ae=x(te),le=ae.write(K,J);return le!==te&&(ae=ae.slice(0,le)),ae}(U,B);if(ArrayBuffer.isView(U))return r(U);if(null==U)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(W(U,ArrayBuffer)||U&&W(U.buffer,ArrayBuffer))return function(K,J,te){if(J<0||K.byteLength<J)throw new RangeError('"offset" is outside of buffer bounds');if(K.byteLength<J+(te||0))throw new RangeError('"length" is outside of buffer bounds');var ae;return(ae=void 0===J&&void 0===te?new Uint8Array(K):void 0===te?new Uint8Array(K,J):new Uint8Array(K,J,te)).__proto__=e.prototype,ae}(U,B,V);if("number"==typeof U)throw new TypeError('The "value" argument must not be of type number. Received type number');var ee=U.valueOf&&U.valueOf();if(null!=ee&&ee!==U)return e.from(ee,B,V);var N=function(K){if(e.isBuffer(K)){var J=0|d(K.length),te=x(J);return 0===te.length||K.copy(te,0,0,J),te}return void 0!==K.length?"number"!=typeof K.length||re(K.length)?x(0):r(K):"Buffer"===K.type&&Array.isArray(K.data)?r(K.data):void 0}(U);if(N)return N;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof U[Symbol.toPrimitive])return e.from(U[Symbol.toPrimitive]("string"),B,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}function i(U){if("number"!=typeof U)throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function l(U){return i(U),x(U<0?0:0|d(U))}function r(U){for(var B=U.length<0?0:0|d(U.length),V=x(B),ee=0;ee<B;ee+=1)V[ee]=255&U[ee];return V}function d(U){if(U>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|U}function f(U,B){if(e.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||W(U,ArrayBuffer))return U.byteLength;if("string"!=typeof U)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);var V=U.length,ee=arguments.length>2&&!0===arguments[2];if(!ee&&0===V)return 0;for(var N=!1;;)switch(B){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return Y(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*V;case"hex":return V>>>1;case"base64":return X(U).length;default:if(N)return ee?-1:Y(U).length;B=(""+B).toLowerCase(),N=!0}}function t(U,B,V){var ee=!1;if((void 0===B||B<0)&&(B=0),B>this.length||((void 0===V||V>this.length)&&(V=this.length),V<=0)||(V>>>=0)<=(B>>>=0))return"";for(U||(U="utf8");;)switch(U){case"hex":return M(this,B,V);case"utf8":case"utf-8":return w(this,B,V);case"ascii":return T(this,B,V);case"latin1":case"binary":return C(this,B,V);case"base64":return b(this,B,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,B,V);default:if(ee)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),ee=!0}}function h(U,B,V){var ee=U[B];U[B]=U[V],U[V]=ee}function s(U,B,V,ee,N){if(0===U.length)return-1;if("string"==typeof V?(ee=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),re(V=+V)&&(V=N?0:U.length-1),V<0&&(V=U.length+V),V>=U.length){if(N)return-1;V=U.length-1}else if(V<0){if(!N)return-1;V=0}if("string"==typeof B&&(B=e.from(B,ee)),e.isBuffer(B))return 0===B.length?-1:o(U,B,V,ee,N);if("number"==typeof B)return B&=255,"function"==typeof Uint8Array.prototype.indexOf?N?Uint8Array.prototype.indexOf.call(U,B,V):Uint8Array.prototype.lastIndexOf.call(U,B,V):o(U,[B],V,ee,N);throw new TypeError("val must be string, number or Buffer")}function o(U,B,V,ee,N){var K,J=1,te=U.length,ae=B.length;if(void 0!==ee&&("ucs2"===(ee=String(ee).toLowerCase())||"ucs-2"===ee||"utf16le"===ee||"utf-16le"===ee)){if(U.length<2||B.length<2)return-1;J=2,te/=2,ae/=2,V/=2}function le(ye,Me){return 1===J?ye[Me]:ye.readUInt16BE(Me*J)}if(N){var se=-1;for(K=V;K<te;K++)if(le(U,K)===le(B,-1===se?0:K-se)){if(-1===se&&(se=K),K-se+1===ae)return se*J}else-1!==se&&(K-=K-se),se=-1}else for(V+ae>te&&(V=te-ae),K=V;K>=0;K--){for(var ve=!0,ue=0;ue<ae;ue++)if(le(U,K+ue)!==le(B,ue)){ve=!1;break}if(ve)return K}return-1}function p(U,B,V,ee){V=Number(V)||0;var N=U.length-V;ee?(ee=Number(ee))>N&&(ee=N):ee=N;var K=B.length;ee>K/2&&(ee=K/2);for(var J=0;J<ee;++J){var te=parseInt(B.substr(2*J,2),16);if(re(te))return J;U[V+J]=te}return J}function c(U,B,V,ee){return Z(Y(B,U.length-V),U,V,ee)}function a(U,B,V,ee){return Z(function(N){for(var K=[],J=0;J<N.length;++J)K.push(255&N.charCodeAt(J));return K}(B),U,V,ee)}function y(U,B,V,ee){return a(U,B,V,ee)}function u(U,B,V,ee){return Z(X(B),U,V,ee)}function _(U,B,V,ee){return Z(function(N,K){for(var J,te,le=[],se=0;se<N.length&&!((K-=2)<0);++se)te=(J=N.charCodeAt(se))>>8,le.push(J%256),le.push(te);return le}(B,U.length-V),U,V,ee)}function b(U,B,V){return g.fromByteArray(0===B&&V===U.length?U:U.slice(B,V))}function w(U,B,V){V=Math.min(U.length,V);for(var ee=[],N=B;N<V;){var K,J,te,ae,le=U[N],se=null,ve=le>239?4:le>223?3:le>191?2:1;if(N+ve<=V)switch(ve){case 1:le<128&&(se=le);break;case 2:128==(192&(K=U[N+1]))&&(ae=(31&le)<<6|63&K)>127&&(se=ae);break;case 3:J=U[N+2],128==(192&(K=U[N+1]))&&128==(192&J)&&(ae=(15&le)<<12|(63&K)<<6|63&J)>2047&&(ae<55296||ae>57343)&&(se=ae);break;case 4:J=U[N+2],te=U[N+3],128==(192&(K=U[N+1]))&&128==(192&J)&&128==(192&te)&&(ae=(15&le)<<18|(63&K)<<12|(63&J)<<6|63&te)>65535&&ae<1114112&&(se=ae)}null===se?(se=65533,ve=1):se>65535&&(ee.push((se-=65536)>>>10&1023|55296),se=56320|1023&se),ee.push(se),N+=ve}return function(ue){var ye=ue.length;if(ye<=4096)return String.fromCharCode.apply(String,ue);for(var Me="",pe=0;pe<ye;)Me+=String.fromCharCode.apply(String,ue.slice(pe,pe+=4096));return Me}(ee)}function T(U,B,V){var ee="";V=Math.min(U.length,V);for(var N=B;N<V;++N)ee+=String.fromCharCode(127&U[N]);return ee}function C(U,B,V){var ee="";V=Math.min(U.length,V);for(var N=B;N<V;++N)ee+=String.fromCharCode(U[N]);return ee}function M(U,B,V){var ee=U.length;(!B||B<0)&&(B=0),(!V||V<0||V>ee)&&(V=ee);for(var N="",K=B;K<V;++K)N+=H(U[K]);return N}function I(U,B,V){for(var ee=U.slice(B,V),N="",K=0;K<ee.length;K+=2)N+=String.fromCharCode(ee[K]+256*ee[K+1]);return N}function P(U,B,V){if(U%1!=0||U<0)throw new RangeError("offset is not uint");if(U+B>V)throw new RangeError("Trying to access beyond buffer length")}function S(U,B,V,ee,N,K){if(!e.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>N||B<K)throw new RangeError('"value" argument is out of bounds');if(V+ee>U.length)throw new RangeError("Index out of range")}function E(U,B,V,ee,N,K){if(V+ee>U.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function R(U,B,V,ee,N){return B=+B,V>>>=0,N||E(U,0,V,4),k.write(U,B,V,ee,23,4),V+4}function D(U,B,V,ee,N){return B=+B,V>>>=0,N||E(U,0,V,8),k.write(U,B,V,ee,52,8),V+8}Q.Buffer=e,Q.SlowBuffer=function(U){return+U!=U&&(U=0),e.alloc(+U)},Q.INSPECT_MAX_BYTES=50,Q.kMaxLength=2147483647,(e.TYPED_ARRAY_SUPPORT=function(){try{var U=new Uint8Array(1);return U.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===U.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(U,B,V){return n(U,B,V)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(U,B,V){return N=B,K=V,i(ee=U),ee<=0?x(ee):void 0!==N?"string"==typeof K?x(ee).fill(N,K):x(ee).fill(N):x(ee);var ee,N,K},e.allocUnsafe=function(U){return l(U)},e.allocUnsafeSlow=function(U){return l(U)},e.isBuffer=function(U){return null!=U&&!0===U._isBuffer&&U!==e.prototype},e.compare=function(U,B){if(W(U,Uint8Array)&&(U=e.from(U,U.offset,U.byteLength)),W(B,Uint8Array)&&(B=e.from(B,B.offset,B.byteLength)),!e.isBuffer(U)||!e.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(U===B)return 0;for(var V=U.length,ee=B.length,N=0,K=Math.min(V,ee);N<K;++N)if(U[N]!==B[N]){V=U[N],ee=B[N];break}return V<ee?-1:ee<V?1:0},e.isEncoding=function(U){switch(String(U).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(U,B){if(!Array.isArray(U))throw new TypeError('"list" argument must be an Array of Buffers');if(0===U.length)return e.alloc(0);var V;if(void 0===B)for(B=0,V=0;V<U.length;++V)B+=U[V].length;var ee=e.allocUnsafe(B),N=0;for(V=0;V<U.length;++V){var K=U[V];if(W(K,Uint8Array)&&(K=e.from(K)),!e.isBuffer(K))throw new TypeError('"list" argument must be an Array of Buffers');K.copy(ee,N),N+=K.length}return ee},e.byteLength=f,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var U=this.length;if(U%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var B=0;B<U;B+=2)h(this,B,B+1);return this},e.prototype.swap32=function(){var U=this.length;if(U%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var B=0;B<U;B+=4)h(this,B,B+3),h(this,B+1,B+2);return this},e.prototype.swap64=function(){var U=this.length;if(U%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var B=0;B<U;B+=8)h(this,B,B+7),h(this,B+1,B+6),h(this,B+2,B+5),h(this,B+3,B+4);return this},e.prototype.toLocaleString=e.prototype.toString=function(){var U=this.length;return 0===U?"":0===arguments.length?w(this,0,U):t.apply(this,arguments)},e.prototype.equals=function(U){if(!e.isBuffer(U))throw new TypeError("Argument must be a Buffer");return this===U||0===e.compare(this,U)},e.prototype.inspect=function(){var U="",B=Q.INSPECT_MAX_BYTES;return U=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(U+=" ... "),"<Buffer "+U+">"},e.prototype.compare=function(U,B,V,ee,N){if(W(U,Uint8Array)&&(U=e.from(U,U.offset,U.byteLength)),!e.isBuffer(U))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof U);if(void 0===B&&(B=0),void 0===V&&(V=U?U.length:0),void 0===ee&&(ee=0),void 0===N&&(N=this.length),B<0||V>U.length||ee<0||N>this.length)throw new RangeError("out of range index");if(ee>=N&&B>=V)return 0;if(ee>=N)return-1;if(B>=V)return 1;if(this===U)return 0;for(var K=(N>>>=0)-(ee>>>=0),J=(V>>>=0)-(B>>>=0),te=Math.min(K,J),ae=this.slice(ee,N),le=U.slice(B,V),se=0;se<te;++se)if(ae[se]!==le[se]){K=ae[se],J=le[se];break}return K<J?-1:J<K?1:0},e.prototype.includes=function(U,B,V){return-1!==this.indexOf(U,B,V)},e.prototype.indexOf=function(U,B,V){return s(this,U,B,V,!0)},e.prototype.lastIndexOf=function(U,B,V){return s(this,U,B,V,!1)},e.prototype.write=function(U,B,V,ee){if(void 0===B)ee="utf8",V=this.length,B=0;else if(void 0===V&&"string"==typeof B)ee=B,V=this.length,B=0;else{if(!isFinite(B))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");B>>>=0,isFinite(V)?(V>>>=0,void 0===ee&&(ee="utf8")):(ee=V,V=void 0)}var N=this.length-B;if((void 0===V||V>N)&&(V=N),U.length>0&&(V<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");for(var K=!1;;)switch(ee){case"hex":return p(this,U,B,V);case"utf8":case"utf-8":return c(this,U,B,V);case"ascii":return a(this,U,B,V);case"latin1":case"binary":return y(this,U,B,V);case"base64":return u(this,U,B,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,U,B,V);default:if(K)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),K=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(U,B){var V=this.length;(U=~~U)<0?(U+=V)<0&&(U=0):U>V&&(U=V),(B=void 0===B?V:~~B)<0?(B+=V)<0&&(B=0):B>V&&(B=V),B<U&&(B=U);var ee=this.subarray(U,B);return ee.__proto__=e.prototype,ee},e.prototype.readUIntLE=function(U,B,V){U>>>=0,B>>>=0,V||P(U,B,this.length);for(var ee=this[U],N=1,K=0;++K<B&&(N*=256);)ee+=this[U+K]*N;return ee},e.prototype.readUIntBE=function(U,B,V){U>>>=0,B>>>=0,V||P(U,B,this.length);for(var ee=this[U+--B],N=1;B>0&&(N*=256);)ee+=this[U+--B]*N;return ee},e.prototype.readUInt8=function(U,B){return U>>>=0,B||P(U,1,this.length),this[U]},e.prototype.readUInt16LE=function(U,B){return U>>>=0,B||P(U,2,this.length),this[U]|this[U+1]<<8},e.prototype.readUInt16BE=function(U,B){return U>>>=0,B||P(U,2,this.length),this[U]<<8|this[U+1]},e.prototype.readUInt32LE=function(U,B){return U>>>=0,B||P(U,4,this.length),(this[U]|this[U+1]<<8|this[U+2]<<16)+16777216*this[U+3]},e.prototype.readUInt32BE=function(U,B){return U>>>=0,B||P(U,4,this.length),16777216*this[U]+(this[U+1]<<16|this[U+2]<<8|this[U+3])},e.prototype.readIntLE=function(U,B,V){U>>>=0,B>>>=0,V||P(U,B,this.length);for(var ee=this[U],N=1,K=0;++K<B&&(N*=256);)ee+=this[U+K]*N;return ee>=(N*=128)&&(ee-=Math.pow(2,8*B)),ee},e.prototype.readIntBE=function(U,B,V){U>>>=0,B>>>=0,V||P(U,B,this.length);for(var ee=B,N=1,K=this[U+--ee];ee>0&&(N*=256);)K+=this[U+--ee]*N;return K>=(N*=128)&&(K-=Math.pow(2,8*B)),K},e.prototype.readInt8=function(U,B){return U>>>=0,B||P(U,1,this.length),128&this[U]?-1*(255-this[U]+1):this[U]},e.prototype.readInt16LE=function(U,B){U>>>=0,B||P(U,2,this.length);var V=this[U]|this[U+1]<<8;return 32768&V?4294901760|V:V},e.prototype.readInt16BE=function(U,B){U>>>=0,B||P(U,2,this.length);var V=this[U+1]|this[U]<<8;return 32768&V?4294901760|V:V},e.prototype.readInt32LE=function(U,B){return U>>>=0,B||P(U,4,this.length),this[U]|this[U+1]<<8|this[U+2]<<16|this[U+3]<<24},e.prototype.readInt32BE=function(U,B){return U>>>=0,B||P(U,4,this.length),this[U]<<24|this[U+1]<<16|this[U+2]<<8|this[U+3]},e.prototype.readFloatLE=function(U,B){return U>>>=0,B||P(U,4,this.length),k.read(this,U,!0,23,4)},e.prototype.readFloatBE=function(U,B){return U>>>=0,B||P(U,4,this.length),k.read(this,U,!1,23,4)},e.prototype.readDoubleLE=function(U,B){return U>>>=0,B||P(U,8,this.length),k.read(this,U,!0,52,8)},e.prototype.readDoubleBE=function(U,B){return U>>>=0,B||P(U,8,this.length),k.read(this,U,!1,52,8)},e.prototype.writeUIntLE=function(U,B,V,ee){U=+U,B>>>=0,V>>>=0,ee||S(this,U,B,V,Math.pow(2,8*V)-1,0);var N=1,K=0;for(this[B]=255&U;++K<V&&(N*=256);)this[B+K]=U/N&255;return B+V},e.prototype.writeUIntBE=function(U,B,V,ee){U=+U,B>>>=0,V>>>=0,ee||S(this,U,B,V,Math.pow(2,8*V)-1,0);var N=V-1,K=1;for(this[B+N]=255&U;--N>=0&&(K*=256);)this[B+N]=U/K&255;return B+V},e.prototype.writeUInt8=function(U,B,V){return U=+U,B>>>=0,V||S(this,U,B,1,255,0),this[B]=255&U,B+1},e.prototype.writeUInt16LE=function(U,B,V){return U=+U,B>>>=0,V||S(this,U,B,2,65535,0),this[B]=255&U,this[B+1]=U>>>8,B+2},e.prototype.writeUInt16BE=function(U,B,V){return U=+U,B>>>=0,V||S(this,U,B,2,65535,0),this[B]=U>>>8,this[B+1]=255&U,B+2},e.prototype.writeUInt32LE=function(U,B,V){return U=+U,B>>>=0,V||S(this,U,B,4,4294967295,0),this[B+3]=U>>>24,this[B+2]=U>>>16,this[B+1]=U>>>8,this[B]=255&U,B+4},e.prototype.writeUInt32BE=function(U,B,V){return U=+U,B>>>=0,V||S(this,U,B,4,4294967295,0),this[B]=U>>>24,this[B+1]=U>>>16,this[B+2]=U>>>8,this[B+3]=255&U,B+4},e.prototype.writeIntLE=function(U,B,V,ee){if(U=+U,B>>>=0,!ee){var N=Math.pow(2,8*V-1);S(this,U,B,V,N-1,-N)}var K=0,J=1,te=0;for(this[B]=255&U;++K<V&&(J*=256);)U<0&&0===te&&0!==this[B+K-1]&&(te=1),this[B+K]=(U/J>>0)-te&255;return B+V},e.prototype.writeIntBE=function(U,B,V,ee){if(U=+U,B>>>=0,!ee){var N=Math.pow(2,8*V-1);S(this,U,B,V,N-1,-N)}var K=V-1,J=1,te=0;for(this[B+K]=255&U;--K>=0&&(J*=256);)U<0&&0===te&&0!==this[B+K+1]&&(te=1),this[B+K]=(U/J>>0)-te&255;return B+V},e.prototype.writeInt8=function(U,B,V){return U=+U,B>>>=0,V||S(this,U,B,1,127,-128),U<0&&(U=255+U+1),this[B]=255&U,B+1},e.prototype.writeInt16LE=function(U,B,V){return U=+U,B>>>=0,V||S(this,U,B,2,32767,-32768),this[B]=255&U,this[B+1]=U>>>8,B+2},e.prototype.writeInt16BE=function(U,B,V){return U=+U,B>>>=0,V||S(this,U,B,2,32767,-32768),this[B]=U>>>8,this[B+1]=255&U,B+2},e.prototype.writeInt32LE=function(U,B,V){return U=+U,B>>>=0,V||S(this,U,B,4,2147483647,-2147483648),this[B]=255&U,this[B+1]=U>>>8,this[B+2]=U>>>16,this[B+3]=U>>>24,B+4},e.prototype.writeInt32BE=function(U,B,V){return U=+U,B>>>=0,V||S(this,U,B,4,2147483647,-2147483648),U<0&&(U=4294967295+U+1),this[B]=U>>>24,this[B+1]=U>>>16,this[B+2]=U>>>8,this[B+3]=255&U,B+4},e.prototype.writeFloatLE=function(U,B,V){return R(this,U,B,!0,V)},e.prototype.writeFloatBE=function(U,B,V){return R(this,U,B,!1,V)},e.prototype.writeDoubleLE=function(U,B,V){return D(this,U,B,!0,V)},e.prototype.writeDoubleBE=function(U,B,V){return D(this,U,B,!1,V)},e.prototype.copy=function(U,B,V,ee){if(!e.isBuffer(U))throw new TypeError("argument should be a Buffer");if(V||(V=0),ee||0===ee||(ee=this.length),B>=U.length&&(B=U.length),B||(B=0),ee>0&&ee<V&&(ee=V),ee===V||0===U.length||0===this.length)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),U.length-B<ee-V&&(ee=U.length-B+V);var N=ee-V;if(this===U&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(B,V,ee);else if(this===U&&V<B&&B<ee)for(var K=N-1;K>=0;--K)U[K+B]=this[K+V];else Uint8Array.prototype.set.call(U,this.subarray(V,ee),B);return N},e.prototype.fill=function(U,B,V,ee){if("string"==typeof U){if("string"==typeof B?(ee=B,B=0,V=this.length):"string"==typeof V&&(ee=V,V=this.length),void 0!==ee&&"string"!=typeof ee)throw new TypeError("encoding must be a string");if("string"==typeof ee&&!e.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(1===U.length){var N=U.charCodeAt(0);("utf8"===ee&&N<128||"latin1"===ee)&&(U=N)}}else"number"==typeof U&&(U&=255);if(B<0||this.length<B||this.length<V)throw new RangeError("Out of range index");if(V<=B)return this;var K;if(B>>>=0,V=void 0===V?this.length:V>>>0,U||(U=0),"number"==typeof U)for(K=B;K<V;++K)this[K]=U;else{var J=e.isBuffer(U)?U:e.from(U,ee),te=J.length;if(0===te)throw new TypeError('The value "'+U+'" is invalid for argument "value"');for(K=0;K<V-B;++K)this[K+B]=J[K%te]}return this};var j=/[^+/0-9A-Za-z-_]/g;function H(U){return U<16?"0"+U.toString(16):U.toString(16)}function Y(U,B){var V;B=B||1/0;for(var ee=U.length,N=null,K=[],J=0;J<ee;++J){if((V=U.charCodeAt(J))>55295&&V<57344){if(!N){if(V>56319){(B-=3)>-1&&K.push(239,191,189);continue}if(J+1===ee){(B-=3)>-1&&K.push(239,191,189);continue}N=V;continue}if(V<56320){(B-=3)>-1&&K.push(239,191,189),N=V;continue}V=65536+(N-55296<<10|V-56320)}else N&&(B-=3)>-1&&K.push(239,191,189);if(N=null,V<128){if((B-=1)<0)break;K.push(V)}else if(V<2048){if((B-=2)<0)break;K.push(V>>6|192,63&V|128)}else if(V<65536){if((B-=3)<0)break;K.push(V>>12|224,V>>6&63|128,63&V|128)}else{if(!(V<1114112))throw new Error("Invalid code point");if((B-=4)<0)break;K.push(V>>18|240,V>>12&63|128,V>>6&63|128,63&V|128)}}return K}function X(U){return g.toByteArray(function(B){if((B=(B=B.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;B.length%4!=0;)B+="=";return B}(U))}function Z(U,B,V,ee){for(var N=0;N<ee&&!(N+V>=B.length||N>=U.length);++N)B[N+V]=U[N];return N}function W(U,B){return U instanceof B||null!=U&&null!=U.constructor&&null!=U.constructor.name&&U.constructor.name===B.name}function re(U){return U!=U}}).call(this)}).call(this,v("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(v,$,Q){$.exports=function(m,g,k){return g<k?m<g?g:m>k?k:m:m<k?k:m>g?g:m}},{}],87:[function(v,$,Q){"use strict";var m=v("clamp");function g(k,x){null==x&&(x=!0);var e=k[0],n=k[1],i=k[2],l=k[3];return null==l&&(l=x?1:255),x&&(e*=255,n*=255,i*=255,l*=255),16777216*(e=255&m(e,0,255))+((n=255&m(n,0,255))<<16)+((i=255&m(i,0,255))<<8)+(255&m(l,0,255))}$.exports=g,$.exports.to=g,$.exports.from=function(k,x){var e=(k=+k)>>>24,n=(16711680&k)>>>16,i=(65280&k)>>>8,l=255&k;return!1===x?[e,n,i,l]:[e/255,n/255,i/255,l/255]}},{clamp:86}],88:[function(v,$,Q){"use strict";$.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(v,$,Q){"use strict";var m=v("color-rgba"),g=v("clamp"),k=v("dtype");$.exports=function(x,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var l,n=new(k(e))(4),i="uint8"!==e&&"uint8_clamped"!==e;return x.length&&"string"!=typeof x||((x=m(x))[0]/=255,x[1]/=255,x[2]/=255),(l=x)instanceof Uint8Array||l instanceof Uint8ClampedArray||Array.isArray(l)&&(l[0]>1||0===l[0])&&(l[1]>1||0===l[1])&&(l[2]>1||0===l[2])&&(!l[3]||l[3]>1)?(n[0]=x[0],n[1]=x[1],n[2]=x[2],n[3]=null!=x[3]?x[3]:255,i&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(i?(n[0]=x[0],n[1]=x[1],n[2]=x[2],n[3]=null!=x[3]?x[3]:1):(n[0]=g(Math.floor(255*x[0]),0,255),n[1]=g(Math.floor(255*x[1]),0,255),n[2]=g(Math.floor(255*x[2]),0,255),n[3]=null==x[3]?255:g(Math.floor(255*x[3]),0,255)),n)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(v,$,Q){(function(m){(function(){"use strict";var g=v("color-name"),k=v("is-plain-obj"),x=v("defined");$.exports=function(n){var i,l,r=[],d=1;if("string"==typeof n)if(g[n])r=g[n].slice(),l="rgb";else if("transparent"===n)d=0,l="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var f=(s=n.slice(1)).length;d=1,f<=4?(r=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],4===f&&(d=parseInt(s[3]+s[3],16)/255)):(r=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],8===f&&(d=parseInt(s[6]+s[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),l="rgb"}else if(i=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var t=i[1],h="rgb"===t,s=t.replace(/a$/,"");l=s,f="cmyk"===s?4:"gray"===s?1:3,r=i[2].trim().split(/\s*,\s*/).map(function(p,c){if(/%$/.test(p))return c===f?parseFloat(p)/100:"rgb"===s?255*parseFloat(p)/100:parseFloat(p);if("h"===s[c]){if(/deg$/.test(p))return parseFloat(p);if(void 0!==e[p])return e[p]}return parseFloat(p)}),t===s&&r.push(1),d=h||void 0===r[f]?1:r[f],r=r.slice(0,f)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(r=n.match(/([0-9]+)/g).map(function(p){return parseFloat(p)}),l=n.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(n))if(k(n)){var o=x(n.r,n.red,n.R,null);null!==o?(l="rgb",r=[o,x(n.g,n.green,n.G),x(n.b,n.blue,n.B)]):(l="hsl",r=[x(n.h,n.hue,n.H),x(n.s,n.saturation,n.S),x(n.l,n.lightness,n.L,n.b,n.brightness)]),d=x(n.a,n.alpha,n.opacity,1),null!=n.opacity&&(d/=100)}else(Array.isArray(n)||m.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(n))&&(r=[n[0],n[1],n[2]],l="rgb",d=4===n.length?n[3]:1);else l="rgb",r=[n>>>16,(65280&n)>>>8,255&n];return{space:l,values:r,alpha:d}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(v,$,Q){"use strict";var m=v("color-parse"),g=v("color-space/hsl"),k=v("clamp");$.exports=function(x){var e,n=m(x);return n.space?((e=Array(3))[0]=k(n.values[0],0,255),e[1]=k(n.values[1],0,255),e[2]=k(n.values[2],0,255),"h"===n.space[0]&&(e=g.rgb(e)),e.push(k(n.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(v,$,Q){"use strict";var m=v("./rgb");$.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(g){var k,x,e,n,i,l=g[0]/360,r=g[1]/100,d=g[2]/100;if(0===r)return[i=255*d,i,i];k=2*d-(x=d<.5?d*(1+r):d+r-d*r),n=[0,0,0];for(var f=0;f<3;f++)(e=l+1/3*-(f-1))<0?e++:e>1&&e--,n[f]=255*(i=6*e<1?k+6*(x-k)*e:2*e<1?x:3*e<2?k+(x-k)*(2/3-e)*6:k);return n}},m.hsl=function(g){var k,x,e=g[0]/255,n=g[1]/255,i=g[2]/255,l=Math.min(e,n,i),r=Math.max(e,n,i),d=r-l;return r===l?k=0:e===r?k=(n-i)/d:n===r?k=2+(i-e)/d:i===r&&(k=4+(e-n)/d),(k=Math.min(60*k,360))<0&&(k+=360),x=(l+r)/2,[k,100*(r===l?0:x<=.5?d/(r+l):d/(2-r-l)),100*x]}},{"./rgb":93}],93:[function(v,$,Q){"use strict";$.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(v,$,Q){$.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(v,$,Q){$.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(v,$,Q){$.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(v,$,Q){$.exports=["normal","italic","oblique"]},{}],98:[function(v,$,Q){$.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(v,$,Q){"use strict";$.exports={parse:v("./parse"),stringify:v("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(v,$,Q){"use strict";var m=v("css-font-size-keywords");$.exports={isSize:function(g){return/^[\d\.]/.test(g)||-1!==g.indexOf("/")||-1!==m.indexOf(g)}}},{"css-font-size-keywords":95}],101:[function(v,$,Q){"use strict";var m=v("unquote"),g=v("css-global-keywords"),k=v("css-system-font-keywords"),x=v("css-font-weight-keywords"),e=v("css-font-style-keywords"),n=v("css-font-stretch-keywords"),i=v("string-split-by"),l=v("./lib/util").isSize;$.exports=d;var r=d.cache={};function d(t){if("string"!=typeof t)throw new Error("Font argument must be a string.");if(r[t])return r[t];if(""===t)throw new Error("Cannot parse an empty string.");if(-1!==k.indexOf(t))return r[t]={system:t};for(var h,s={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},o=i(t,/\s+/);h=o.shift();){if(-1!==g.indexOf(h))return["style","variant","weight","stretch"].forEach(function(c){s[c]=h}),r[t]=s;if(-1===e.indexOf(h))if("normal"!==h&&"small-caps"!==h)if(-1===n.indexOf(h)){if(-1===x.indexOf(h)){if(l(h)){var p=i(h,"/");if(s.size=p[0],null!=p[1]?s.lineHeight=f(p[1]):"/"===o[0]&&(o.shift(),s.lineHeight=f(o.shift())),!o.length)throw new Error("Missing required font-family.");return s.family=i(o.join(" "),/\s*,\s*/).map(m),r[t]=s}throw new Error("Unknown or unsupported font token: "+h)}s.weight=h}else s.stretch=h;else s.variant=h;else s.style=h}throw new Error("Missing required font-size.")}function f(t){var h=parseFloat(t);return h.toString()===t?h:t}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":306,unquote:329}],102:[function(v,$,Q){"use strict";var m=v("pick-by-alias"),g=v("./lib/util").isSize,k=h(v("css-global-keywords")),x=h(v("css-system-font-keywords")),e=h(v("css-font-weight-keywords")),n=h(v("css-font-style-keywords")),i=h(v("css-font-stretch-keywords")),l={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},f="serif";function t(s,o){if(s&&!o[s]&&!k[s])throw Error("Unknown keyword `"+s+"`");return s}function h(s){for(var o={},p=0;p<s.length;p++)o[s[p]]=1;return o}$.exports=function(s){if((s=m(s,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return s.system&&t(s.system,x),s.system;if(t(s.style,n),t(s.variant,l),t(s.weight,e),t(s.stretch,i),null==s.size&&(s.size="1rem"),"number"==typeof s.size&&(s.size+="px"),!g)throw Error("Bad size value `"+s.size+"`");s.family||(s.family=f),Array.isArray(s.family)&&(s.family.length||(s.family=[f]),s.family=s.family.map(function(p){return r[p]?p:'"'+p+'"'}).join(", "));var o=[];return o.push(s.style),s.variant!==s.style&&o.push(s.variant),s.weight!==s.variant&&s.weight!==s.style&&o.push(s.weight),s.stretch!==s.weight&&s.stretch!==s.variant&&s.stretch!==s.style&&o.push(s.stretch),o.push(s.size+(null==s.lineHeight||"normal"===s.lineHeight||s.lineHeight+""=="1"?"":"/"+s.lineHeight)),o.push(s.family),o.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(v,$,Q){$.exports=["inherit","initial","unset"]},{}],104:[function(v,$,Q){$.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(v,$,Q){"use strict";var m,g=v("type/value/is"),k=v("type/value/ensure"),x=v("type/plain-function/ensure"),e=v("es5-ext/object/copy"),n=v("es5-ext/object/normalize-options"),i=v("es5-ext/object/map"),l=Function.prototype.bind,r=Object.defineProperty,d=Object.prototype.hasOwnProperty;m=function(f,t,h){var s,o=k(t)&&x(t.value);return delete(s=e(t)).writable,delete s.value,s.get=function(){return!h.overwriteDefinition&&d.call(this,f)?o:(t.value=l.call(o,h.resolveContext?h.resolveContext(this):this),r(this,f,t),this[f])},s},$.exports=function(f){var t=n(arguments[1]);return g(t.resolveContext)&&x(t.resolveContext),i(f,function(h,s){return m(s,h,t)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":322,"type/value/ensure":326,"type/value/is":327}],106:[function(v,$,Q){"use strict";var m=v("type/value/is"),g=v("type/plain-function/is"),k=v("es5-ext/object/assign"),x=v("es5-ext/object/normalize-options"),e=v("es5-ext/string/#/contains");($.exports=function(n,i){var l,r,d,f,t;return arguments.length<2||"string"!=typeof n?(f=i,i=n,n=null):f=arguments[2],m(n)?(l=e.call(n,"c"),r=e.call(n,"e"),d=e.call(n,"w")):(l=d=!0,r=!1),t={value:i,configurable:l,enumerable:r,writable:d},f?k(x(f),t):t}).gs=function(n,i,l){var r,d,f,t;return"string"!=typeof n?(f=l,l=i,i=n,n=null):f=arguments[3],m(i)?g(i)?m(l)?g(l)||(f=l,l=void 0):l=void 0:(f=i,i=l=void 0):i=void 0,m(n)?(r=e.call(n,"c"),d=e.call(n,"e")):(r=!0,d=!1),t={get:i,set:l,configurable:r,enumerable:d},f?k(x(f),t):t}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":323,"type/value/is":327}],107:[function(v,$,Q){var g;g=function(m){"use strict";function g(P,S){return P<S?-1:P>S?1:P>=S?0:NaN}function k(P){var S;return 1===P.length&&(S=P,P=function(E,R){return g(S(E),R)}),{left:function(E,R,D,j){for(null==D&&(D=0),null==j&&(j=E.length);D<j;){var H=D+j>>>1;P(E[H],R)<0?D=H+1:j=H}return D},right:function(E,R,D,j){for(null==D&&(D=0),null==j&&(j=E.length);D<j;){var H=D+j>>>1;P(E[H],R)>0?j=H:D=H+1}return D}}}var x=k(g),e=x.right,n=x.left;function i(P,S){return[P,S]}function l(P){return null===P?NaN:+P}function r(P,S){var E,R,D=P.length,j=0,H=-1,Y=0,X=0;if(null==S)for(;++H<D;)isNaN(E=l(P[H]))||(X+=(R=E-Y)*(E-(Y+=R/++j)));else for(;++H<D;)isNaN(E=l(S(P[H],H,P)))||(X+=(R=E-Y)*(E-(Y+=R/++j)));if(j>1)return X/(j-1)}function d(P,S){var E=r(P,S);return E&&Math.sqrt(E)}function f(P,S){var E,R,D,j=P.length,H=-1;if(null==S){for(;++H<j;)if(null!=(E=P[H])&&E>=E)for(R=D=E;++H<j;)null!=(E=P[H])&&(R>E&&(R=E),D<E&&(D=E))}else for(;++H<j;)if(null!=(E=S(P[H],H,P))&&E>=E)for(R=D=E;++H<j;)null!=(E=S(P[H],H,P))&&(R>E&&(R=E),D<E&&(D=E));return[R,D]}var t=Array.prototype,h=t.slice,s=t.map;function o(P){return function(){return P}}function p(P){return P}function c(P,S,E){P=+P,S=+S,E=(D=arguments.length)<2?(S=P,P=0,1):D<3?1:+E;for(var R=-1,D=0|Math.max(0,Math.ceil((S-P)/E)),j=new Array(D);++R<D;)j[R]=P+R*E;return j}var a=Math.sqrt(50),y=Math.sqrt(10),u=Math.sqrt(2);function _(P,S,E){var R=(S-P)/Math.max(0,E),D=Math.floor(Math.log(R)/Math.LN10),j=R/Math.pow(10,D);return D>=0?(j>=a?10:j>=y?5:j>=u?2:1)*Math.pow(10,D):-Math.pow(10,-D)/(j>=a?10:j>=y?5:j>=u?2:1)}function b(P,S,E){var R=Math.abs(S-P)/Math.max(0,E),D=Math.pow(10,Math.floor(Math.log(R)/Math.LN10)),j=R/D;return j>=a?D*=10:j>=y?D*=5:j>=u&&(D*=2),S<P?-D:D}function w(P){return Math.ceil(Math.log(P.length)/Math.LN2)+1}function T(P,S,E){if(null==E&&(E=l),R=P.length){if((S=+S)<=0||R<2)return+E(P[0],0,P);if(S>=1)return+E(P[R-1],R-1,P);var R,D=(R-1)*S,j=Math.floor(D),H=+E(P[j],j,P);return H+(+E(P[j+1],j+1,P)-H)*(D-j)}}function C(P,S){var E,R,D=P.length,j=-1;if(null==S){for(;++j<D;)if(null!=(E=P[j])&&E>=E)for(R=E;++j<D;)null!=(E=P[j])&&R>E&&(R=E)}else for(;++j<D;)if(null!=(E=S(P[j],j,P))&&E>=E)for(R=E;++j<D;)null!=(E=S(P[j],j,P))&&R>E&&(R=E);return R}function M(P){if(!(D=P.length))return[];for(var S=-1,E=C(P,I),R=new Array(E);++S<E;)for(var D,j=-1,H=R[S]=new Array(D);++j<D;)H[j]=P[j][S];return R}function I(P){return P.length}m.bisect=e,m.bisectRight=e,m.bisectLeft=n,m.ascending=g,m.bisector=k,m.cross=function(P,S,E){var R,D,j,H,Y=P.length,X=S.length,Z=new Array(Y*X);for(null==E&&(E=i),R=j=0;R<Y;++R)for(H=P[R],D=0;D<X;++D,++j)Z[j]=E(H,S[D]);return Z},m.descending=function(P,S){return S<P?-1:S>P?1:S>=P?0:NaN},m.deviation=d,m.extent=f,m.histogram=function(){var P=p,S=f,E=w;function R(D){var j,H,Y=D.length,X=new Array(Y);for(j=0;j<Y;++j)X[j]=P(D[j],j,D);var Z=S(X),W=Z[0],re=Z[1],U=E(X,W,re);Array.isArray(U)||(U=b(W,re,U),U=c(Math.ceil(W/U)*U,re,U));for(var B=U.length;U[0]<=W;)U.shift(),--B;for(;U[B-1]>re;)U.pop(),--B;var V,ee=new Array(B+1);for(j=0;j<=B;++j)(V=ee[j]=[]).x0=j>0?U[j-1]:W,V.x1=j<B?U[j]:re;for(j=0;j<Y;++j)W<=(H=X[j])&&H<=re&&ee[e(U,H,0,B)].push(D[j]);return ee}return R.value=function(D){return arguments.length?(P="function"==typeof D?D:o(D),R):P},R.domain=function(D){return arguments.length?(S="function"==typeof D?D:o([D[0],D[1]]),R):S},R.thresholds=function(D){return arguments.length?(E="function"==typeof D?D:Array.isArray(D)?o(h.call(D)):o(D),R):E},R},m.thresholdFreedmanDiaconis=function(P,S,E){return P=s.call(P,l).sort(g),Math.ceil((E-S)/(2*(T(P,.75)-T(P,.25))*Math.pow(P.length,-1/3)))},m.thresholdScott=function(P,S,E){return Math.ceil((E-S)/(3.5*d(P)*Math.pow(P.length,-1/3)))},m.thresholdSturges=w,m.max=function(P,S){var E,R,D=P.length,j=-1;if(null==S){for(;++j<D;)if(null!=(E=P[j])&&E>=E)for(R=E;++j<D;)null!=(E=P[j])&&E>R&&(R=E)}else for(;++j<D;)if(null!=(E=S(P[j],j,P))&&E>=E)for(R=E;++j<D;)null!=(E=S(P[j],j,P))&&E>R&&(R=E);return R},m.mean=function(P,S){var E,R=P.length,D=R,j=-1,H=0;if(null==S)for(;++j<R;)isNaN(E=l(P[j]))?--D:H+=E;else for(;++j<R;)isNaN(E=l(S(P[j],j,P)))?--D:H+=E;if(D)return H/D},m.median=function(P,S){var E,R=P.length,D=-1,j=[];if(null==S)for(;++D<R;)isNaN(E=l(P[D]))||j.push(E);else for(;++D<R;)isNaN(E=l(S(P[D],D,P)))||j.push(E);return T(j.sort(g),.5)},m.merge=function(P){for(var S,E,R,D=P.length,j=-1,H=0;++j<D;)H+=P[j].length;for(E=new Array(H);--D>=0;)for(S=(R=P[D]).length;--S>=0;)E[--H]=R[S];return E},m.min=C,m.pairs=function(P,S){null==S&&(S=i);for(var E=0,R=P.length-1,D=P[0],j=new Array(R<0?0:R);E<R;)j[E]=S(D,D=P[++E]);return j},m.permute=function(P,S){for(var E=S.length,R=new Array(E);E--;)R[E]=P[S[E]];return R},m.quantile=T,m.range=c,m.scan=function(P,S){if(E=P.length){var E,R,D=0,j=0,H=P[j];for(null==S&&(S=g);++D<E;)(S(R=P[D],H)<0||0!==S(H,H))&&(H=R,j=D);return 0===S(H,H)?j:void 0}},m.shuffle=function(P,S,E){for(var R,D,j=(E??P.length)-(S=null==S?0:+S);j;)D=Math.random()*j--|0,R=P[j+S],P[j+S]=P[D+S],P[D+S]=R;return P},m.sum=function(P,S){var E,R=P.length,D=-1,j=0;if(null==S)for(;++D<R;)(E=+P[D])&&(j+=E);else for(;++D<R;)(E=+S(P[D],D,P))&&(j+=E);return j},m.ticks=function(P,S,E){var R,D,j,H,Y=-1;if(E=+E,(P=+P)==(S=+S)&&E>0)return[P];if((R=S<P)&&(D=P,P=S,S=D),0===(H=_(P,S,E))||!isFinite(H))return[];if(H>0)for(P=Math.ceil(P/H),S=Math.floor(S/H),j=new Array(D=Math.ceil(S-P+1));++Y<D;)j[Y]=(P+Y)*H;else for(P=Math.floor(P*H),S=Math.ceil(S*H),j=new Array(D=Math.ceil(P-S+1));++Y<D;)j[Y]=(P-Y)/H;return R&&j.reverse(),j},m.tickIncrement=_,m.tickStep=b,m.transpose=M,m.variance=r,m.zip=function(){return M(arguments)},Object.defineProperty(m,"__esModule",{value:!0})},g("object"==typeof Q&&void 0!==$?Q:this.d3=this.d3||{})},{}],108:[function(v,$,Q){var g;g=function(m){"use strict";function g(){}function k(f,t){var h=new g;if(f instanceof g)f.each(function(a,y){h.set(y,a)});else if(Array.isArray(f)){var s,o=-1,p=f.length;if(null==t)for(;++o<p;)h.set(o,f[o]);else for(;++o<p;)h.set(t(s=f[o],o,f),s)}else if(f)for(var c in f)h.set(c,f[c]);return h}function x(){return{}}function e(f,t,h){f[t]=h}function n(){return k()}function i(f,t,h){f.set(t,h)}function l(){}g.prototype=k.prototype={constructor:g,has:function(f){return"$"+f in this},get:function(f){return this["$"+f]},set:function(f,t){return this["$"+f]=t,this},remove:function(f){var t="$"+f;return t in this&&delete this[t]},clear:function(){for(var f in this)"$"===f[0]&&delete this[f]},keys:function(){var f=[];for(var t in this)"$"===t[0]&&f.push(t.slice(1));return f},values:function(){var f=[];for(var t in this)"$"===t[0]&&f.push(this[t]);return f},entries:function(){var f=[];for(var t in this)"$"===t[0]&&f.push({key:t.slice(1),value:this[t]});return f},size:function(){var f=0;for(var t in this)"$"===t[0]&&++f;return f},empty:function(){for(var f in this)if("$"===f[0])return!1;return!0},each:function(f){for(var t in this)"$"===t[0]&&f(this[t],t.slice(1),this)}};var r=k.prototype;function d(f,t){var h=new l;if(f instanceof l)f.each(function(p){h.add(p)});else if(f){var s=-1,o=f.length;if(null==t)for(;++s<o;)h.add(f[s]);else for(;++s<o;)h.add(t(f[s],s,f))}return h}l.prototype=d.prototype={constructor:l,has:r.has,add:function(f){return this["$"+(f+="")]=f,this},remove:r.remove,clear:r.clear,values:r.keys,size:r.size,empty:r.empty,each:r.each},m.nest=function(){var f,t,h,s=[],o=[];function p(c,a,y,u){if(a>=s.length)return null!=f&&c.sort(f),null!=t?t(c):c;for(var _,b,w,T=-1,C=c.length,M=s[a++],I=k(),P=y();++T<C;)(w=I.get(_=M(b=c[T])+""))?w.push(b):I.set(_,[b]);return I.each(function(S,E){u(P,E,p(S,a,y,u))}),P}return h={object:function(c){return p(c,0,x,e)},map:function(c){return p(c,0,n,i)},entries:function(c){return function a(y,u){if(++u>s.length)return y;var _,b=o[u-1];return null!=t&&u>=s.length?_=y.entries():(_=[],y.each(function(w,T){_.push({key:T,values:a(w,u)})})),null!=b?_.sort(function(w,T){return b(w.key,T.key)}):_}(p(c,0,n,i),0)},key:function(c){return s.push(c),h},sortKeys:function(c){return o[s.length-1]=c,h},sortValues:function(c){return f=c,h},rollup:function(c){return t=c,h}}},m.set=d,m.map=k,m.keys=function(f){var t=[];for(var h in f)t.push(h);return t},m.values=function(f){var t=[];for(var h in f)t.push(f[h]);return t},m.entries=function(f){var t=[];for(var h in f)t.push({key:h,value:f[h]});return t},Object.defineProperty(m,"__esModule",{value:!0})},g("object"==typeof Q&&void 0!==$?Q:this.d3=this.d3||{})},{}],109:[function(v,$,Q){var m,g;m=this,g=function(m){"use strict";function g(oe,de,Te){oe.prototype=de.prototype=Te,Te.constructor=oe}function k(oe,de){var Te=Object.create(oe.prototype);for(var Ee in de)Te[Ee]=de[Ee];return Te}function x(){}var e="\\s*([+-]?\\d+)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",i="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),d=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),f=new RegExp("^rgba\\("+[e,e,e,n]+"\\)$"),t=new RegExp("^rgba\\("+[i,i,i,n]+"\\)$"),h=new RegExp("^hsl\\("+[n,i,i]+"\\)$"),s=new RegExp("^hsla\\("+[n,i,i,n]+"\\)$"),o={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function p(){return this.rgb().formatHex()}function c(){return this.rgb().formatRgb()}function a(oe){var de,Te;return oe=(oe+"").trim().toLowerCase(),(de=l.exec(oe))?(Te=de[1].length,de=parseInt(de[1],16),6===Te?y(de):3===Te?new w(de>>8&15|de>>4&240,de>>4&15|240&de,(15&de)<<4|15&de,1):8===Te?u(de>>24&255,de>>16&255,de>>8&255,(255&de)/255):4===Te?u(de>>12&15|de>>8&240,de>>8&15|de>>4&240,de>>4&15|240&de,((15&de)<<4|15&de)/255):null):(de=r.exec(oe))?new w(de[1],de[2],de[3],1):(de=d.exec(oe))?new w(255*de[1]/100,255*de[2]/100,255*de[3]/100,1):(de=f.exec(oe))?u(de[1],de[2],de[3],de[4]):(de=t.exec(oe))?u(255*de[1]/100,255*de[2]/100,255*de[3]/100,de[4]):(de=h.exec(oe))?I(de[1],de[2]/100,de[3]/100,1):(de=s.exec(oe))?I(de[1],de[2]/100,de[3]/100,de[4]):o.hasOwnProperty(oe)?y(o[oe]):"transparent"===oe?new w(NaN,NaN,NaN,0):null}function y(oe){return new w(oe>>16&255,oe>>8&255,255&oe,1)}function u(oe,de,Te,Ee){return Ee<=0&&(oe=de=Te=NaN),new w(oe,de,Te,Ee)}function _(oe){return oe instanceof x||(oe=a(oe)),oe?new w((oe=oe.rgb()).r,oe.g,oe.b,oe.opacity):new w}function b(oe,de,Te,Ee){return 1===arguments.length?_(oe):new w(oe,de,Te,Ee??1)}function w(oe,de,Te,Ee){this.r=+oe,this.g=+de,this.b=+Te,this.opacity=+Ee}function T(){return"#"+M(this.r)+M(this.g)+M(this.b)}function C(){var oe=this.opacity;return(1===(oe=isNaN(oe)?1:Math.max(0,Math.min(1,oe)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===oe?")":", "+oe+")")}function M(oe){return((oe=Math.max(0,Math.min(255,Math.round(oe)||0)))<16?"0":"")+oe.toString(16)}function I(oe,de,Te,Ee){return Ee<=0?oe=de=Te=NaN:Te<=0||Te>=1?oe=de=NaN:de<=0&&(oe=NaN),new E(oe,de,Te,Ee)}function P(oe){if(oe instanceof E)return new E(oe.h,oe.s,oe.l,oe.opacity);if(oe instanceof x||(oe=a(oe)),!oe)return new E;if(oe instanceof E)return oe;var de=(oe=oe.rgb()).r/255,Te=oe.g/255,Ee=oe.b/255,Ae=Math.min(de,Te,Ee),De=Math.max(de,Te,Ee),Ie=NaN,Oe=De-Ae,Xe=(De+Ae)/2;return Oe?(Ie=de===De?(Te-Ee)/Oe+6*(Te<Ee):Te===De?(Ee-de)/Oe+2:(de-Te)/Oe+4,Oe/=Xe<.5?De+Ae:2-De-Ae,Ie*=60):Oe=Xe>0&&Xe<1?0:Ie,new E(Ie,Oe,Xe,oe.opacity)}function S(oe,de,Te,Ee){return 1===arguments.length?P(oe):new E(oe,de,Te,Ee??1)}function E(oe,de,Te,Ee){this.h=+oe,this.s=+de,this.l=+Te,this.opacity=+Ee}function R(oe,de,Te){return 255*(oe<60?de+(Te-de)*oe/60:oe<180?Te:oe<240?de+(Te-de)*(240-oe)/60:de)}g(x,a,{copy:function(oe){return Object.assign(new this.constructor,this,oe)},displayable:function(){return this.rgb().displayable()},hex:p,formatHex:p,formatHsl:function(){return P(this).formatHsl()},formatRgb:c,toString:c}),g(w,b,k(x,{brighter:function(oe){return oe=null==oe?1/.7:Math.pow(1/.7,oe),new w(this.r*oe,this.g*oe,this.b*oe,this.opacity)},darker:function(oe){return oe=null==oe?.7:Math.pow(.7,oe),new w(this.r*oe,this.g*oe,this.b*oe,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T,formatHex:T,formatRgb:C,toString:C})),g(E,S,k(x,{brighter:function(oe){return oe=null==oe?1/.7:Math.pow(1/.7,oe),new E(this.h,this.s,this.l*oe,this.opacity)},darker:function(oe){return oe=null==oe?.7:Math.pow(.7,oe),new E(this.h,this.s,this.l*oe,this.opacity)},rgb:function(){var oe=this.h%360+360*(this.h<0),de=isNaN(oe)||isNaN(this.s)?0:this.s,Te=this.l,Ee=Te+(Te<.5?Te:1-Te)*de,Ae=2*Te-Ee;return new w(R(oe>=240?oe-240:oe+120,Ae,Ee),R(oe,Ae,Ee),R(oe<120?oe+240:oe-120,Ae,Ee),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var oe=this.opacity;return(1===(oe=isNaN(oe)?1:Math.max(0,Math.min(1,oe)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===oe?")":", "+oe+")")}}));var D=Math.PI/180,j=180/Math.PI,H=6/29,Y=3*H*H;function X(oe){if(oe instanceof W)return new W(oe.l,oe.a,oe.b,oe.opacity);if(oe instanceof K)return J(oe);oe instanceof w||(oe=_(oe));var de,Te,Ee=V(oe.r),Ae=V(oe.g),De=V(oe.b),Ie=re((.2225045*Ee+.7168786*Ae+.0606169*De)/1);return Ee===Ae&&Ae===De?de=Te=Ie:(de=re((.4360747*Ee+.3850649*Ae+.1430804*De)/.96422),Te=re((.0139322*Ee+.0971045*Ae+.7141733*De)/.82521)),new W(116*Ie-16,500*(de-Ie),200*(Ie-Te),oe.opacity)}function Z(oe,de,Te,Ee){return 1===arguments.length?X(oe):new W(oe,de,Te,Ee??1)}function W(oe,de,Te,Ee){this.l=+oe,this.a=+de,this.b=+Te,this.opacity=+Ee}function re(oe){return oe>.008856451679035631?Math.pow(oe,1/3):oe/Y+4/29}function U(oe){return oe>H?oe*oe*oe:Y*(oe-4/29)}function B(oe){return 255*(oe<=.0031308?12.92*oe:1.055*Math.pow(oe,1/2.4)-.055)}function V(oe){return(oe/=255)<=.04045?oe/12.92:Math.pow((oe+.055)/1.055,2.4)}function ee(oe){if(oe instanceof K)return new K(oe.h,oe.c,oe.l,oe.opacity);if(oe instanceof W||(oe=X(oe)),0===oe.a&&0===oe.b)return new K(NaN,0<oe.l&&oe.l<100?0:NaN,oe.l,oe.opacity);var de=Math.atan2(oe.b,oe.a)*j;return new K(de<0?de+360:de,Math.sqrt(oe.a*oe.a+oe.b*oe.b),oe.l,oe.opacity)}function N(oe,de,Te,Ee){return 1===arguments.length?ee(oe):new K(oe,de,Te,Ee??1)}function K(oe,de,Te,Ee){this.h=+oe,this.c=+de,this.l=+Te,this.opacity=+Ee}function J(oe){if(isNaN(oe.h))return new W(oe.l,0,0,oe.opacity);var de=oe.h*D;return new W(oe.l,Math.cos(de)*oe.c,Math.sin(de)*oe.c,oe.opacity)}g(W,Z,k(x,{brighter:function(oe){return new W(this.l+18*(oe??1),this.a,this.b,this.opacity)},darker:function(oe){return new W(this.l-18*(oe??1),this.a,this.b,this.opacity)},rgb:function(){var oe=(this.l+16)/116,de=isNaN(this.a)?oe:oe+this.a/500,Te=isNaN(this.b)?oe:oe-this.b/200;return new w(B(3.1338561*(de=.96422*U(de))-1.6168667*(oe=1*U(oe))-.4906146*(Te=.82521*U(Te))),B(-.9787684*de+1.9161415*oe+.033454*Te),B(.0719453*de-.2289914*oe+1.4052427*Te),this.opacity)}})),g(K,N,k(x,{brighter:function(oe){return new K(this.h,this.c,this.l+18*(oe??1),this.opacity)},darker:function(oe){return new K(this.h,this.c,this.l-18*(oe??1),this.opacity)},rgb:function(){return J(this).rgb()}}));var ae=1.78277,le=-.29227,se=-.90649,ve=1.97294,ue=ve*se,ye=ve*ae,Me=ae*le- -.14861*se;function pe(oe){if(oe instanceof we)return new we(oe.h,oe.s,oe.l,oe.opacity);oe instanceof w||(oe=_(oe));var Te=oe.g/255,Ee=oe.b/255,Ae=(Me*Ee+ue*(oe.r/255)-ye*Te)/(Me+ue-ye),De=Ee-Ae,Ie=(ve*(Te-Ae)-le*De)/se,Oe=Math.sqrt(Ie*Ie+De*De)/(ve*Ae*(1-Ae)),Xe=Oe?Math.atan2(Ie,De)*j-120:NaN;return new we(Xe<0?Xe+360:Xe,Oe,Ae,oe.opacity)}function ge(oe,de,Te,Ee){return 1===arguments.length?pe(oe):new we(oe,de,Te,Ee??1)}function we(oe,de,Te,Ee){this.h=+oe,this.s=+de,this.l=+Te,this.opacity=+Ee}g(we,ge,k(x,{brighter:function(oe){return oe=null==oe?1/.7:Math.pow(1/.7,oe),new we(this.h,this.s,this.l*oe,this.opacity)},darker:function(oe){return oe=null==oe?.7:Math.pow(.7,oe),new we(this.h,this.s,this.l*oe,this.opacity)},rgb:function(){var oe=isNaN(this.h)?0:(this.h+120)*D,de=+this.l,Te=isNaN(this.s)?0:this.s*de*(1-de),Ee=Math.cos(oe),Ae=Math.sin(oe);return new w(255*(de+Te*(-.14861*Ee+ae*Ae)),255*(de+Te*(le*Ee+se*Ae)),255*(de+Te*(ve*Ee)),this.opacity)}})),m.color=a,m.cubehelix=ge,m.gray=function(oe,de){return new W(oe,0,0,de??1)},m.hcl=N,m.hsl=S,m.lab=Z,m.lch=function(oe,de,Te,Ee){return 1===arguments.length?ee(oe):new K(Te,de,oe,Ee??1)},m.rgb=b,Object.defineProperty(m,"__esModule",{value:!0})},g("object"==typeof Q&&void 0!==$?Q:(m=m||self).d3=m.d3||{})},{}],110:[function(v,$,Q){var m,g;m=this,g=function(m){"use strict";var g={value:function(){}};function k(){for(var l,r=0,d=arguments.length,f={};r<d;++r){if(!(l=arguments[r]+"")||l in f||/[\s.]/.test(l))throw new Error("illegal type: "+l);f[l]=[]}return new x(f)}function x(l){this._=l}function e(l,r){return l.trim().split(/^|\s+/).map(function(d){var f="",t=d.indexOf(".");if(t>=0&&(f=d.slice(t+1),d=d.slice(0,t)),d&&!r.hasOwnProperty(d))throw new Error("unknown type: "+d);return{type:d,name:f}})}function n(l,r){for(var d,f=0,t=l.length;f<t;++f)if((d=l[f]).name===r)return d.value}function i(l,r,d){for(var f=0,t=l.length;f<t;++f)if(l[f].name===r){l[f]=g,l=l.slice(0,f).concat(l.slice(f+1));break}return null!=d&&l.push({name:r,value:d}),l}x.prototype=k.prototype={constructor:x,on:function(l,r){var d,f=this._,t=e(l+"",f),h=-1,s=t.length;if(!(arguments.length<2)){if(null!=r&&"function"!=typeof r)throw new Error("invalid callback: "+r);for(;++h<s;)if(d=(l=t[h]).type)f[d]=i(f[d],l.name,r);else if(null==r)for(d in f)f[d]=i(f[d],l.name,null);return this}for(;++h<s;)if((d=(l=t[h]).type)&&(d=n(f[d],l.name)))return d},copy:function(){var l={},r=this._;for(var d in r)l[d]=r[d].slice();return new x(l)},call:function(l,r){if((d=arguments.length-2)>0)for(var d,f,t=new Array(d),h=0;h<d;++h)t[h]=arguments[h+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(h=0,d=(f=this._[l]).length;h<d;++h)f[h].value.apply(r,t)},apply:function(l,r,d){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var f=this._[l],t=0,h=f.length;t<h;++t)f[t].value.apply(r,d)}},m.dispatch=k,Object.defineProperty(m,"__esModule",{value:!0})},g("object"==typeof Q&&void 0!==$?Q:(m=m||self).d3=m.d3||{})},{}],111:[function(v,$,Q){var m,g;m=this,g=function(m,g,k,x,e){"use strict";function n(o){return function(){return o}}function i(){return 1e-6*(Math.random()-.5)}function l(o){return o.x+o.vx}function r(o){return o.y+o.vy}function d(o){return o.index}function f(o,p){var c=o.get(p);if(!c)throw new Error("missing: "+p);return c}function t(o){return o.x}function h(o){return o.y}var s=Math.PI*(3-Math.sqrt(5));m.forceCenter=function(o,p){var c;function a(){var y,u,_=c.length,b=0,w=0;for(y=0;y<_;++y)b+=(u=c[y]).x,w+=u.y;for(b=b/_-o,w=w/_-p,y=0;y<_;++y)(u=c[y]).x-=b,u.y-=w}return null==o&&(o=0),null==p&&(p=0),a.initialize=function(y){c=y},a.x=function(y){return arguments.length?(o=+y,a):o},a.y=function(y){return arguments.length?(p=+y,a):p},a},m.forceCollide=function(o){var p,c,a=1,y=1;function u(){for(var w,T,C,M,I,P,S,E=p.length,R=0;R<y;++R)for(T=g.quadtree(p,l,r).visitAfter(_),w=0;w<E;++w)S=(P=c[(C=p[w]).index])*P,M=C.x+C.vx,I=C.y+C.vy,T.visit(D);function D(j,H,Y,X,Z){var W=j.data,re=j.r,U=P+re;if(!W)return H>M+U||X<M-U||Y>I+U||Z<I-U;if(W.index>C.index){var B=M-W.x-W.vx,V=I-W.y-W.vy,ee=B*B+V*V;ee<U*U&&(0===B&&(ee+=(B=i())*B),0===V&&(ee+=(V=i())*V),ee=(U-(ee=Math.sqrt(ee)))/ee*a,C.vx+=(B*=ee)*(U=(re*=re)/(S+re)),C.vy+=(V*=ee)*U,W.vx-=B*(U=1-U),W.vy-=V*U)}}}function _(w){if(w.data)return w.r=c[w.data.index];for(var T=w.r=0;T<4;++T)w[T]&&w[T].r>w.r&&(w.r=w[T].r)}function b(){if(p){var w,T,C=p.length;for(c=new Array(C),w=0;w<C;++w)c[(T=p[w]).index]=+o(T,w,p)}}return"function"!=typeof o&&(o=n(null==o?1:+o)),u.initialize=function(w){p=w,b()},u.iterations=function(w){return arguments.length?(y=+w,u):y},u.strength=function(w){return arguments.length?(a=+w,u):a},u.radius=function(w){return arguments.length?(o="function"==typeof w?w:n(+w),b(),u):o},u},m.forceLink=function(o){var p,c,a,y,u,_=d,b=function(S){return 1/Math.min(y[S.source.index],y[S.target.index])},w=n(30),T=1;function C(S){for(var E=0,R=o.length;E<T;++E)for(var D,j,H,Y,X,Z,W,re=0;re<R;++re)j=(D=o[re]).source,Y=(H=D.target).x+H.vx-j.x-j.vx||i(),X=H.y+H.vy-j.y-j.vy||i(),Y*=Z=((Z=Math.sqrt(Y*Y+X*X))-c[re])/Z*S*p[re],X*=Z,H.vx-=Y*(W=u[re]),H.vy-=X*W,j.vx+=Y*(W=1-W),j.vy+=X*W}function M(){if(a){var S,E,R=a.length,D=o.length,j=k.map(a,_);for(S=0,y=new Array(R);S<D;++S)(E=o[S]).index=S,"object"!=typeof E.source&&(E.source=f(j,E.source)),"object"!=typeof E.target&&(E.target=f(j,E.target)),y[E.source.index]=(y[E.source.index]||0)+1,y[E.target.index]=(y[E.target.index]||0)+1;for(S=0,u=new Array(D);S<D;++S)u[S]=y[(E=o[S]).source.index]/(y[E.source.index]+y[E.target.index]);p=new Array(D),I(),c=new Array(D),P()}}function I(){if(a)for(var S=0,E=o.length;S<E;++S)p[S]=+b(o[S],S,o)}function P(){if(a)for(var S=0,E=o.length;S<E;++S)c[S]=+w(o[S],S,o)}return null==o&&(o=[]),C.initialize=function(S){a=S,M()},C.links=function(S){return arguments.length?(o=S,M(),C):o},C.id=function(S){return arguments.length?(_=S,C):_},C.iterations=function(S){return arguments.length?(T=+S,C):T},C.strength=function(S){return arguments.length?(b="function"==typeof S?S:n(+S),I(),C):b},C.distance=function(S){return arguments.length?(w="function"==typeof S?S:n(+S),P(),C):w},C},m.forceManyBody=function(){var o,p,c,a,y=n(-30),u=1,_=1/0,b=.81;function w(I){var P,S=o.length,E=g.quadtree(o,t,h).visitAfter(C);for(c=I,P=0;P<S;++P)p=o[P],E.visit(M)}function T(){if(o){var I,P,S=o.length;for(a=new Array(S),I=0;I<S;++I)a[(P=o[I]).index]=+y(P,I,o)}}function C(I){var P,S,E,R,D,j=0,H=0;if(I.length){for(E=R=D=0;D<4;++D)(P=I[D])&&(S=Math.abs(P.value))&&(j+=P.value,H+=S,E+=S*P.x,R+=S*P.y);I.x=E/H,I.y=R/H}else{(P=I).x=P.data.x,P.y=P.data.y;do{j+=a[P.data.index]}while(P=P.next)}I.value=j}function M(I,P,S,E){if(!I.value)return!0;var R=I.x-p.x,D=I.y-p.y,j=E-P,H=R*R+D*D;if(j*j/b<H)return H<_&&(0===R&&(H+=(R=i())*R),0===D&&(H+=(D=i())*D),H<u&&(H=Math.sqrt(u*H)),p.vx+=R*I.value*c/H,p.vy+=D*I.value*c/H),!0;if(!(I.length||H>=_)){(I.data!==p||I.next)&&(0===R&&(H+=(R=i())*R),0===D&&(H+=(D=i())*D),H<u&&(H=Math.sqrt(u*H)));do{I.data!==p&&(p.vx+=R*(j=a[I.data.index]*c/H),p.vy+=D*j)}while(I=I.next)}}return w.initialize=function(I){o=I,T()},w.strength=function(I){return arguments.length?(y="function"==typeof I?I:n(+I),T(),w):y},w.distanceMin=function(I){return arguments.length?(u=I*I,w):Math.sqrt(u)},w.distanceMax=function(I){return arguments.length?(_=I*I,w):Math.sqrt(_)},w.theta=function(I){return arguments.length?(b=I*I,w):Math.sqrt(b)},w},m.forceRadial=function(o,p,c){var a,y,u,_=n(.1);function b(T){for(var C=0,M=a.length;C<M;++C){var I=a[C],P=I.x-p||1e-6,S=I.y-c||1e-6,E=Math.sqrt(P*P+S*S),R=(u[C]-E)*y[C]*T/E;I.vx+=P*R,I.vy+=S*R}}function w(){if(a){var T,C=a.length;for(y=new Array(C),u=new Array(C),T=0;T<C;++T)u[T]=+o(a[T],T,a),y[T]=isNaN(u[T])?0:+_(a[T],T,a)}}return"function"!=typeof o&&(o=n(+o)),null==p&&(p=0),null==c&&(c=0),b.initialize=function(T){a=T,w()},b.strength=function(T){return arguments.length?(_="function"==typeof T?T:n(+T),w(),b):_},b.radius=function(T){return arguments.length?(o="function"==typeof T?T:n(+T),w(),b):o},b.x=function(T){return arguments.length?(p=+T,b):p},b.y=function(T){return arguments.length?(c=+T,b):c},b},m.forceSimulation=function(o){var p,c=1,a=.001,y=1-Math.pow(a,1/300),u=0,_=.6,b=k.map(),w=e.timer(C),T=x.dispatch("tick","end");function C(){M(),T.call("tick",p),c<a&&(w.stop(),T.call("end",p))}function M(S){var E,R,D=o.length;void 0===S&&(S=1);for(var j=0;j<S;++j)for(c+=(u-c)*y,b.each(function(H){H(c)}),E=0;E<D;++E)null==(R=o[E]).fx?R.x+=R.vx*=_:(R.x=R.fx,R.vx=0),null==R.fy?R.y+=R.vy*=_:(R.y=R.fy,R.vy=0);return p}function I(){for(var S,E=0,R=o.length;E<R;++E){if((S=o[E]).index=E,null!=S.fx&&(S.x=S.fx),null!=S.fy&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var D=10*Math.sqrt(E),j=E*s;S.x=D*Math.cos(j),S.y=D*Math.sin(j)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function P(S){return S.initialize&&S.initialize(o),S}return null==o&&(o=[]),I(),p={tick:M,restart:function(){return w.restart(C),p},stop:function(){return w.stop(),p},nodes:function(S){return arguments.length?(o=S,I(),b.each(P),p):o},alpha:function(S){return arguments.length?(c=+S,p):c},alphaMin:function(S){return arguments.length?(a=+S,p):a},alphaDecay:function(S){return arguments.length?(y=+S,p):+y},alphaTarget:function(S){return arguments.length?(u=+S,p):u},velocityDecay:function(S){return arguments.length?(_=1-S,p):1-_},force:function(S,E){return arguments.length>1?(null==E?b.remove(S):b.set(S,P(E)),p):b.get(S)},find:function(S,E,R){var D,j,H,Y,X,Z=0,W=o.length;for(null==R?R=1/0:R*=R,Z=0;Z<W;++Z)(H=(D=S-(Y=o[Z]).x)*D+(j=E-Y.y)*j)<R&&(X=Y,R=H);return X},on:function(S,E){return arguments.length>1?(T.on(S,E),p):T.on(S)}}},m.forceX=function(o){var p,c,a,y=n(.1);function u(b){for(var w,T=0,C=p.length;T<C;++T)(w=p[T]).vx+=(a[T]-w.x)*c[T]*b}function _(){if(p){var b,w=p.length;for(c=new Array(w),a=new Array(w),b=0;b<w;++b)c[b]=isNaN(a[b]=+o(p[b],b,p))?0:+y(p[b],b,p)}}return"function"!=typeof o&&(o=n(null==o?0:+o)),u.initialize=function(b){p=b,_()},u.strength=function(b){return arguments.length?(y="function"==typeof b?b:n(+b),_(),u):y},u.x=function(b){return arguments.length?(o="function"==typeof b?b:n(+b),_(),u):o},u},m.forceY=function(o){var p,c,a,y=n(.1);function u(b){for(var w,T=0,C=p.length;T<C;++T)(w=p[T]).vy+=(a[T]-w.y)*c[T]*b}function _(){if(p){var b,w=p.length;for(c=new Array(w),a=new Array(w),b=0;b<w;++b)c[b]=isNaN(a[b]=+o(p[b],b,p))?0:+y(p[b],b,p)}}return"function"!=typeof o&&(o=n(null==o?0:+o)),u.initialize=function(b){p=b,_()},u.strength=function(b){return arguments.length?(y="function"==typeof b?b:n(+b),_(),u):y},u.y=function(b){return arguments.length?(o="function"==typeof b?b:n(+b),_(),u):o},u},Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof Q&&void 0!==$?g(Q,v("d3-quadtree"),v("d3-collection"),v("d3-dispatch"),v("d3-timer")):g(m.d3=m.d3||{},m.d3,m.d3,m.d3,m.d3)},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(v,$,Q){var m,g;m=this,g=function(m){"use strict";function g(p,c){if((a=(p=c?p.toExponential(c-1):p.toExponential()).indexOf("e"))<0)return null;var a,y=p.slice(0,a);return[y.length>1?y[0]+y.slice(2):y,+p.slice(a+1)]}function k(p){return(p=g(Math.abs(p)))?p[1]:NaN}var x,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n(p){if(!(c=e.exec(p)))throw new Error("invalid format: "+p);var c;return new i({fill:c[1],align:c[2],sign:c[3],symbol:c[4],zero:c[5],width:c[6],comma:c[7],precision:c[8]&&c[8].slice(1),trim:c[9],type:c[10]})}function i(p){this.fill=void 0===p.fill?" ":p.fill+"",this.align=void 0===p.align?">":p.align+"",this.sign=void 0===p.sign?"-":p.sign+"",this.symbol=void 0===p.symbol?"":p.symbol+"",this.zero=!!p.zero,this.width=void 0===p.width?void 0:+p.width,this.comma=!!p.comma,this.precision=void 0===p.precision?void 0:+p.precision,this.trim=!!p.trim,this.type=void 0===p.type?"":p.type+""}function l(p,c){var a=g(p,c);if(!a)return p+"";var y=a[0],u=a[1];return u<0?"0."+new Array(-u).join("0")+y:y.length>u+1?y.slice(0,u+1)+"."+y.slice(u+1):y+new Array(u-y.length+2).join("0")}n.prototype=i.prototype,i.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var r={"%":function(p,c){return(100*p).toFixed(c)},b:function(p){return Math.round(p).toString(2)},c:function(p){return p+""},d:function(p){return Math.abs(p=Math.round(p))>=1e21?p.toLocaleString("en").replace(/,/g,""):p.toString(10)},e:function(p,c){return p.toExponential(c)},f:function(p,c){return p.toFixed(c)},g:function(p,c){return p.toPrecision(c)},o:function(p){return Math.round(p).toString(8)},p:function(p,c){return l(100*p,c)},r:l,s:function(p,c){var a=g(p,c);if(!a)return p+"";var y=a[0],u=a[1],_=u-(x=3*Math.max(-8,Math.min(8,Math.floor(u/3))))+1,b=y.length;return _===b?y:_>b?y+new Array(_-b+1).join("0"):_>0?y.slice(0,_)+"."+y.slice(_):"0."+new Array(1-_).join("0")+g(p,Math.max(0,c+_-1))[0]},X:function(p){return Math.round(p).toString(16).toUpperCase()},x:function(p){return Math.round(p).toString(16)}};function d(p){return p}var f,t=Array.prototype.map,h=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function s(p){var c,a,P,y=void 0===p.grouping||void 0===p.thousands?d:(c=t.call(p.grouping,Number),a=p.thousands+"",function(P,S){for(var E=P.length,R=[],D=0,j=c[0],H=0;E>0&&j>0&&(H+j+1>S&&(j=Math.max(1,S-H)),R.push(P.substring(E-=j,E+j)),!((H+=j+1)>S));)j=c[D=(D+1)%c.length];return R.reverse().join(a)}),u=void 0===p.currency?"":p.currency[0]+"",_=void 0===p.currency?"":p.currency[1]+"",b=void 0===p.decimal?".":p.decimal+"",w=void 0===p.numerals?d:(P=t.call(p.numerals,String),function(S){return S.replace(/[0-9]/g,function(E){return P[+E]})}),T=void 0===p.percent?"%":p.percent+"",C=void 0===p.minus?"-":p.minus+"",M=void 0===p.nan?"NaN":p.nan+"";function I(P){var S=(P=n(P)).fill,E=P.align,R=P.sign,D=P.symbol,j=P.zero,H=P.width,Y=P.comma,X=P.precision,Z=P.trim,W=P.type;"n"===W?(Y=!0,W="g"):r[W]||(void 0===X&&(X=12),Z=!0,W="g"),(j||"0"===S&&"="===E)&&(j=!0,S="0",E="=");var re="$"===D?u:"#"===D&&/[boxX]/.test(W)?"0"+W.toLowerCase():"",U="$"===D?_:/[%p]/.test(W)?T:"",B=r[W],V=/[defgprs%]/.test(W);function ee(N){var K,J,te,ae=re,le=U;if("c"===W)le=B(N)+le,N="";else{var se=(N=+N)<0||1/N<0;if(N=isNaN(N)?M:B(Math.abs(N),X),Z&&(N=function(ye){e:for(var Me,pe=ye.length,ge=1,we=-1;ge<pe;++ge)switch(ye[ge]){case".":we=Me=ge;break;case"0":0===we&&(we=ge),Me=ge;break;default:if(!+ye[ge])break e;we>0&&(we=0)}return we>0?ye.slice(0,we)+ye.slice(Me+1):ye}(N)),se&&0==+N&&"+"!==R&&(se=!1),ae=(se?"("===R?R:C:"-"===R||"("===R?"":R)+ae,le=("s"===W?h[8+x/3]:"")+le+(se&&"("===R?")":""),V)for(K=-1,J=N.length;++K<J;)if(48>(te=N.charCodeAt(K))||te>57){le=(46===te?b+N.slice(K+1):N.slice(K))+le,N=N.slice(0,K);break}}Y&&!j&&(N=y(N,1/0));var ve=ae.length+N.length+le.length,ue=ve<H?new Array(H-ve+1).join(S):"";switch(Y&&j&&(N=y(ue+N,ue.length?H-le.length:1/0),ue=""),E){case"<":N=ae+N+le+ue;break;case"=":N=ae+ue+N+le;break;case"^":N=ue.slice(0,ve=ue.length>>1)+ae+N+le+ue.slice(ve);break;default:N=ue+ae+N+le}return w(N)}return X=void 0===X?6:/[gprs]/.test(W)?Math.max(1,Math.min(21,X)):Math.max(0,Math.min(20,X)),ee.toString=function(){return P+""},ee}return{format:I,formatPrefix:function(P,S){var E=I(((P=n(P)).type="f",P)),R=3*Math.max(-8,Math.min(8,Math.floor(k(S)/3))),D=Math.pow(10,-R),j=h[8+R/3];return function(H){return E(D*H)+j}}}}function o(p){return f=s(p),m.format=f.format,m.formatPrefix=f.formatPrefix,f}o({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),m.FormatSpecifier=i,m.formatDefaultLocale=o,m.formatLocale=s,m.formatSpecifier=n,m.precisionFixed=function(p){return Math.max(0,-k(Math.abs(p)))},m.precisionPrefix=function(p,c){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(k(c)/3)))-k(Math.abs(p)))},m.precisionRound=function(p,c){return p=Math.abs(p),c=Math.abs(c)-p,Math.max(0,k(c)-k(p))+1},Object.defineProperty(m,"__esModule",{value:!0})},g("object"==typeof Q&&void 0!==$?Q:(m=typeof globalThis<"u"?globalThis:m||self).d3=m.d3||{})},{}],113:[function(v,$,Q){var m,g;m=this,g=function(m,g,k){"use strict";var x=Math.abs,e=Math.atan,n=Math.atan2,i=Math.cos,l=Math.exp,r=Math.floor,d=Math.log,f=Math.max,t=Math.min,h=Math.pow,s=Math.round,o=Math.sign||function(je){return je>0?1:je<0?-1:0},p=Math.sin,c=Math.tan,a=1e-6,y=Math.PI,u=y/2,_=y/4,b=Math.SQRT1_2,w=E(2),T=E(y),C=2*y,M=180/y,I=y/180;function P(je){return je>1?u:je<-1?-u:Math.asin(je)}function S(je){return je>1?0:je<-1?y:Math.acos(je)}function E(je){return je>0?Math.sqrt(je):0}function R(je){return(l(je)-l(-je))/2}function D(je){return(l(je)+l(-je))/2}function j(je){var We=c(je/2),rt=2*d(i(je/2))/(We*We);function ut(yt,gt){var Lt=i(yt),er=i(gt),nr=p(gt),Kt=er*Lt,ir=-((1-Kt?d((1+Kt)/2)/(1-Kt):-.5)+rt/(1+Kt));return[ir*er*p(yt),ir*nr]}return ut.invert=function(yt,gt){var Lt,er=E(yt*yt+gt*gt),nr=-je/2,Kt=50;if(!er)return[0,0];do{var ir=nr/2,vr=i(ir),wr=p(ir),Ar=wr/vr,Nr=-d(x(vr));nr-=Lt=(2/Ar*Nr-rt*Ar-er)/(-Nr/(wr*wr)+1-rt/(2*vr*vr))*(vr<0?.7:1)}while(x(Lt)>a&&--Kt>0);var un=p(nr);return[n(yt*un,er*i(nr)),P(gt*un/er)]},ut}function H(je,We){var yt,rt=i(We),ut=(yt=S(rt*i(je/=2)))?yt/Math.sin(yt):1;return[2*rt*p(je)*ut,p(We)*ut]}function Y(je){var We=p(je),rt=i(je),ut=je>=0?1:-1,yt=c(ut*je),gt=(1+We-rt)/2;function Lt(er,nr){var Kt=i(nr),ir=i(er/=2);return[(1+Kt)*p(er),(ut*nr>-n(ir,yt)-.001?0:10*-ut)+gt+p(nr)*rt-(1+Kt)*We*ir]}return Lt.invert=function(er,nr){var Kt=0,ir=0,vr=50;do{var wr=i(Kt),Ar=p(Kt),Nr=i(ir),un=p(ir),gn=1+Nr,Rn=gn*Ar-er,jn=gt+un*rt-gn*We*wr-nr,Zn=gn*wr/2,Vn=-Ar*un,bi=We*gn*Ar/2,Li=rt*Nr+We*wr*un,Gi=Vn*bi-Li*Zn,ji=(jn*Vn-Rn*Li)/Gi/2,Yi=(Rn*bi-jn*Zn)/Gi;x(Yi)>2&&(Yi/=2),Kt-=ji,ir-=Yi}while((x(ji)>a||x(Yi)>a)&&--vr>0);return ut*ir>-n(i(Kt),yt)-.001?[2*Kt,ir]:null},Lt}function X(je,We){var rt=c(We/2),ut=E(1-rt*rt),yt=1+ut*i(je/=2),gt=p(je)*ut/yt,Lt=rt/yt,er=gt*gt,nr=Lt*Lt;return[4/3*gt*(3+er-3*nr),4/3*Lt*(3+3*er-nr)]}H.invert=function(je,We){if(!(je*je+4*We*We>y*y+a)){var rt=je,ut=We,yt=25;do{var gt,Lt=p(rt),er=p(rt/2),nr=i(rt/2),Kt=p(ut),ir=i(ut),vr=p(2*ut),wr=Kt*Kt,Ar=ir*ir,Nr=er*er,un=1-Ar*nr*nr,gn=un?S(ir*nr)*E(gt=1/un):gt=0,Rn=2*gn*ir*er-je,jn=gn*Kt-We,Zn=gt*(Ar*Nr+gn*ir*nr*wr),Vn=gt*(.5*Lt*vr-2*gn*Kt*er),bi=.25*gt*(vr*er-gn*Kt*Ar*Lt),Li=gt*(wr*nr+gn*Nr*ir),Gi=Vn*bi-Li*Zn;if(!Gi)break;var ji=(jn*Vn-Rn*Li)/Gi,Yi=(Rn*bi-jn*Zn)/Gi;rt-=ji,ut-=Yi}while((x(ji)>a||x(Yi)>a)&&--yt>0);return[rt,ut]}},X.invert=function(je,We){if(We*=3/8,!(je*=3/8)&&x(We)>1)return null;var Kt,rt=1+je*je+We*We,ut=E((rt-E(rt*rt-4*We*We))/2),yt=P(ut)/3,gt=ut?(Kt=x(We/ut),d(Kt+E(Kt*Kt-1))/3):function(Kt){return d(Kt+E(Kt*Kt+1))}(x(je))/3,Lt=i(yt),er=D(gt),nr=er*er-Lt*Lt;return[2*o(je)*n(R(gt)*Lt,.25-nr),2*o(We)*n(er*p(yt),.25+nr)]};var Z=E(8),W=d(1+w);function re(je,We){var rt=x(We);return rt<_?[je,d(c(_+We/2))]:[je*i(rt)*(2*w-1/p(rt)),o(We)*(2*w*(rt-_)-d(c(rt/2)))]}function U(je){var We=2*y/je;function rt(ut,yt){var gt=g.geoAzimuthalEquidistantRaw(ut,yt);if(x(ut)>u){var Lt=n(gt[1],gt[0]),er=E(gt[0]*gt[0]+gt[1]*gt[1]),nr=We*s((Lt-u)/We)+u,Kt=n(p(Lt-=nr),2-i(Lt));Lt=nr+P(y/er*p(Kt))-Kt,gt[0]=er*i(Lt),gt[1]=er*p(Lt)}return gt}return rt.invert=function(ut,yt){var gt=E(ut*ut+yt*yt);if(gt>u){var Lt=n(yt,ut),er=We*s((Lt-u)/We)+u,nr=Lt>er?-1:1,Kt=gt*i(er-Lt),ir=1/c(nr*S((Kt-y)/E(y*(y-2*Kt)+gt*gt)));Lt=er+2*e((ir+nr*E(ir*ir-3))/3),ut=gt*i(Lt),yt=gt*p(Lt)}return g.geoAzimuthalEquidistantRaw.invert(ut,yt)},rt}function B(je,We){if(arguments.length<2&&(We=je),1===We)return g.geoAzimuthalEqualAreaRaw;if(We===1/0)return V;function rt(ut,yt){var gt=g.geoAzimuthalEqualAreaRaw(ut/We,yt);return gt[0]*=je,gt}return rt.invert=function(ut,yt){var gt=g.geoAzimuthalEqualAreaRaw.invert(ut/je,yt);return gt[0]*=We,gt},rt}function V(je,We){return[je*i(We)/i(We/=2),2*p(We)]}function ee(je,We,rt){var ut,yt,gt,Lt=100;rt=void 0===rt?0:+rt,We=+We;do{(yt=je(rt))===(gt=je(rt+a))&&(gt=yt+a),rt-=ut=-1*a*(yt-We)/(yt-gt)}while(Lt-- >0&&x(ut)>a);return Lt<0?NaN:rt}function N(je,We,rt){return void 0===We&&(We=40),void 0===rt&&(rt=1e-12),function(ut,yt,gt,Lt){var er,nr,Kt;gt=void 0===gt?0:+gt,Lt=void 0===Lt?0:+Lt;for(var ir=0;ir<We;ir++){var vr=je(gt,Lt),wr=vr[0]-ut,Ar=vr[1]-yt;if(x(wr)<rt&&x(Ar)<rt)break;var Nr=wr*wr+Ar*Ar;if(Nr>er)gt-=nr/=2,Lt-=Kt/=2;else{er=Nr;var un=(gt>0?-1:1)*rt,gn=(Lt>0?-1:1)*rt,Rn=je(gt+un,Lt),jn=je(gt,Lt+gn),Zn=(Rn[0]-vr[0])/un,Vn=(Rn[1]-vr[1])/un,bi=(jn[0]-vr[0])/gn,Li=(jn[1]-vr[1])/gn,Gi=Li*Zn-Vn*bi,ji=(x(Gi)<.5?.5:1)/Gi;if(gt+=nr=(Ar*bi-wr*Li)*ji,Lt+=Kt=(wr*Vn-Ar*Zn)*ji,x(nr)<rt&&x(Kt)<rt)break}}return[gt,Lt]}}function K(){var je=B(1.68,2);function We(rt,ut){if(rt+ut<-1.4){var yt=(rt-ut+1.6)*(rt+ut+1.4)/8;rt+=yt,ut-=.8*yt*p(ut+y/2)}var gt=je(rt,ut),Lt=(1-i(rt*ut))/12;return gt[1]<0&&(gt[0]*=1+Lt),gt[1]>0&&(gt[1]*=1+Lt/1.5*gt[0]*gt[0]),gt}return We.invert=N(We),We}function J(je,We){var rt,ut=je*p(We),yt=30;do{We-=rt=(We+p(We)-ut)/(1+i(We))}while(x(rt)>a&&--yt>0);return We/2}function te(je,We,rt){function ut(yt,gt){return[je*yt*i(gt=J(rt,gt)),We*p(gt)]}return ut.invert=function(yt,gt){return gt=P(gt/We),[yt/(je*i(gt)),P((2*gt+p(2*gt))/rt)]},ut}re.invert=function(je,We){if((ut=x(We))<W)return[je,2*e(l(We))-u];var rt,ut,yt=_,gt=25;do{var Lt=i(yt/2),er=c(yt/2);yt-=rt=(Z*(yt-_)-d(er)-ut)/(Z-Lt*Lt/(2*er))}while(x(rt)>1e-12&&--gt>0);return[je/(i(yt)*(Z-1/p(yt))),o(We)*yt]},V.invert=function(je,We){var rt=2*P(We/2);return[je*i(rt/2)/i(rt),rt]};var ae=te(w/u,w,y),le=2.00276;function ve(je,We){var rt=J(y,We);return[le*je/(1/i(We)+1.11072/i(rt)),(We+w*p(rt))/le]}function ue(je){var We=0,rt=g.geoProjectionMutator(je),ut=rt(We);return ut.parallel=function(yt){return arguments.length?rt(We=yt*I):We*M},ut}function ye(je,We){return[je*i(We),We]}function Me(je){if(!je)return ye;var We=1/c(je);function rt(ut,yt){var gt=We+je-yt,Lt=gt&&ut*i(yt)/gt;return[gt*p(Lt),We-gt*i(Lt)]}return rt.invert=function(ut,yt){var gt=E(ut*ut+(yt=We-yt)*yt),Lt=We+je-gt;return[gt/i(Lt)*n(ut,yt),Lt]},rt}function pe(je){function We(rt,ut){var yt=u-ut,gt=yt&&rt*je*p(yt)/yt;return[yt*p(gt)/je,u-yt*i(gt)]}return We.invert=function(rt,ut){var yt=rt*je,gt=u-ut,Lt=E(yt*yt+gt*gt),er=n(yt,gt);return[(Lt?Lt/p(Lt):1)*er/je,u-Lt]},We}ve.invert=function(je,We){var rt,ut,yt=le*We,gt=We<0?-_:_,Lt=25;do{ut=yt-w*p(gt),gt-=rt=(p(2*gt)+2*gt-y*p(ut))/(2*i(2*gt)+2+y*i(ut)*w*i(gt))}while(x(rt)>a&&--Lt>0);return ut=yt-w*p(gt),[je*(1/i(ut)+1.11072/i(gt))/le,ut]},ye.invert=function(je,We){return[je/i(We),We]};var ge=te(1,4/y,y);function we(je,We,rt,ut,yt,gt){var Lt,er=i(gt);if(x(je)>1||x(gt)>1)Lt=S(rt*yt+We*ut*er);else{var nr=p(je/2),Kt=p(gt/2);Lt=2*P(E(nr*nr+We*ut*Kt*Kt))}return x(Lt)>a?[Lt,n(ut*p(gt),We*yt-rt*ut*er)]:[0,0]}function oe(je,We,rt){return S((je*je+We*We-rt*rt)/(2*je*We))}function de(je){return je-2*y*r((je+y)/(2*y))}function Te(je,We,rt){for(var ut,yt=[[je[0],je[1],p(je[1]),i(je[1])],[We[0],We[1],p(We[1]),i(We[1])],[rt[0],rt[1],p(rt[1]),i(rt[1])]],gt=yt[2],Lt=0;Lt<3;++Lt,gt=ut)gt.v=we((ut=yt[Lt])[1]-gt[1],gt[3],gt[2],ut[3],ut[2],ut[0]-gt[0]),gt.point=[0,0];var er=oe(yt[0].v[0],yt[2].v[0],yt[1].v[0]),nr=oe(yt[0].v[0],yt[1].v[0],yt[2].v[0]),Kt=y-er;yt[2].point[1]=0,yt[0].point[0]=-(yt[1].point[0]=yt[0].v[0]/2);var ir=[yt[2].point[0]=yt[0].point[0]+yt[2].v[0]*i(er),2*(yt[0].point[1]=yt[1].point[1]=yt[2].v[0]*p(er))];return function(vr,wr){var Ar,Nr=p(wr),un=i(wr),gn=new Array(3);for(Ar=0;Ar<3;++Ar){var Rn=yt[Ar];if(gn[Ar]=we(wr-Rn[1],Rn[3],Rn[2],un,Nr,vr-Rn[0]),!gn[Ar][0])return Rn.point;gn[Ar][1]=de(gn[Ar][1]-Rn.v[1])}var jn=ir.slice();for(Ar=0;Ar<3;++Ar){var Vn=oe(yt[Ar].v[0],gn[Ar][0],gn[2==Ar?0:Ar+1][0]);gn[Ar][1]<0&&(Vn=-Vn),Ar?1==Ar?(jn[0]-=gn[Ar][0]*i(Vn=nr-Vn),jn[1]-=gn[Ar][0]*p(Vn)):(jn[0]+=gn[Ar][0]*i(Vn=Kt-Vn),jn[1]+=gn[Ar][0]*p(Vn)):(jn[0]+=gn[Ar][0]*i(Vn),jn[1]-=gn[Ar][0]*p(Vn))}return jn[0]/=3,jn[1]/=3,jn}}function Ee(je){return je[0]*=I,je[1]*=I,je}function Ae(je,We,rt){var ut=g.geoCentroid({type:"MultiPoint",coordinates:[je,We,rt]}),yt=[-ut[0],-ut[1]],gt=g.geoRotation(yt),Lt=Te(Ee(gt(je)),Ee(gt(We)),Ee(gt(rt)));Lt.invert=N(Lt);var er=g.geoProjection(Lt).rotate(yt),nr=er.center;return delete er.rotate,er.center=function(Kt){return arguments.length?nr(gt(Kt)):gt.invert(nr())},er.clipAngle(90)}function De(je,We){var rt=E(1-p(We));return[2/T*je*rt,T*(1-rt)]}function Ie(je){var We=c(je);function rt(ut,yt){return[ut,(ut?ut/p(ut):1)*(p(yt)*i(ut)-We*i(yt))]}return rt.invert=We?function(ut,yt){ut&&(yt*=p(ut)/ut);var gt=i(ut);return[ut,2*n(E(gt*gt+We*We-yt*yt)-gt,We-yt)]}:function(ut,yt){return[ut,P(ut?yt*c(ut)/ut:yt)]},rt}De.invert=function(je,We){var rt=(rt=We/T-1)*rt;return[rt>0?je*E(y/rt)/2:0,P(1-rt)]};var Oe=E(3);function Xe(je,We){return[Oe*je*(2*i(2*We/3)-1)/T,Oe*T*p(We/3)]}function Fe(je){var We=i(je);function rt(ut,yt){return[ut*We,p(yt)/We]}return rt.invert=function(ut,yt){return[ut/We,P(yt*We)]},rt}function Pe(je){var We=i(je);function rt(ut,yt){return[ut*We,(1+We)*c(yt/2)]}return rt.invert=function(ut,yt){return[ut/We,2*e(yt/(1+We))]},rt}function Re(je,We){var rt=E(8/(3*y));return[rt*je*(1-x(We)/y),rt*We]}function qe(je,We){var rt=E(4-3*p(x(We)));return[2/E(6*y)*je*rt,o(We)*E(2*y/3)*(2-rt)]}function Qe(je,We){var rt=E(y*(4+y));return[2/rt*je*(1+E(1-4*We*We/(y*y))),4/rt*We]}function ct(je,We){var rt=(2+u)*p(We);We/=2;for(var ut=0,yt=1/0;ut<10&&x(yt)>a;ut++){var gt=i(We);We-=yt=(We+p(We)*(gt+2)-rt)/(2*gt*(1+gt))}return[2/E(y*(4+y))*je*(1+i(We)),2*E(y/(4+y))*p(We)]}function bt(je,We){return[je*(1+i(We))/E(2+y),2*We/E(2+y)]}function Tt(je,We){for(var rt=(1+u)*p(We),ut=0,yt=1/0;ut<10&&x(yt)>a;ut++)We-=yt=(We+p(We)-rt)/(1+i(We));return rt=E(2+y),[je*(1+i(We))/rt,2*We/rt]}Xe.invert=function(je,We){var rt=3*P(We/(Oe*T));return[T*je/(Oe*(2*i(2*rt/3)-1)),rt]},Re.invert=function(je,We){var rt=E(8/(3*y)),ut=We/rt;return[je/(rt*(1-x(ut)/y)),ut]},qe.invert=function(je,We){var rt=2-x(We)/E(2*y/3);return[je*E(6*y)/(2*rt),o(We)*P((4-rt*rt)/3)]},Qe.invert=function(je,We){var rt=E(y*(4+y))/2;return[je*rt/(1+E(1-We*We*(4+y)/(4*y))),We*rt/2]},ct.invert=function(je,We){var rt=We*E((4+y)/y)/2,ut=P(rt),yt=i(ut);return[je/(2/E(y*(4+y))*(1+yt)),P((ut+rt*(yt+2))/(2+u))]},bt.invert=function(je,We){var rt=E(2+y),ut=We*rt/2;return[rt*je/(1+i(ut)),ut]},Tt.invert=function(je,We){var rt=1+u,ut=E(rt/2);return[2*je*ut/(1+i(We*=ut)),P((We+p(We))/rt)]};var _t=3+2*w;function nt(je,We){var rt=p(je/=2),ut=i(je),yt=E(i(We)),gt=i(We/=2),Lt=p(We)/(gt+w*ut*yt),er=E(2/(1+Lt*Lt)),nr=E((w*gt+(ut+rt)*yt)/(w*gt+(ut-rt)*yt));return[_t*(er*(nr-1/nr)-2*d(nr)),_t*(er*Lt*(nr+1/nr)-2*e(Lt))]}nt.invert=function(je,We){if(!(rt=X.invert(je/1.2,1.065*We)))return null;var rt,ut=rt[0],yt=rt[1],gt=20;je/=_t,We/=_t;do{var Lt=ut/2,er=yt/2,nr=p(Lt),Kt=i(Lt),ir=p(er),vr=i(er),wr=i(yt),Ar=E(wr),Nr=ir/(vr+w*Kt*Ar),un=Nr*Nr,gn=E(2/(1+un)),Rn=(w*vr+(Kt+nr)*Ar)/(w*vr+(Kt-nr)*Ar),jn=E(Rn),Zn=jn-1/jn,Vn=jn+1/jn,bi=gn*Zn-2*d(jn)-je,Li=gn*Nr*Vn-2*e(Nr)-We,Gi=ir&&b*Ar*nr*un/ir,ji=(w*Kt*vr+Ar)/(2*(vr+w*Kt*Ar)*(vr+w*Kt*Ar)*Ar),Yi=-.5*Nr*gn*gn*gn,_a=Yi*Gi,da=Yi*ji,aa=(aa=2*vr+w*Ar*(Kt-nr))*aa*jn,oa=(w*Kt*vr*Ar+wr)/aa,ca=-w*nr*ir/(Ar*aa),ot=Zn*_a-2*oa/jn+gn*(oa+oa/Rn),tt=Zn*da-2*ca/jn+gn*(ca+ca/Rn),Ge=Nr*Vn*_a-2*Gi/(1+un)+gn*Vn*Gi+gn*Nr*(oa-oa/Rn),Bt=Nr*Vn*da-2*ji/(1+un)+gn*Vn*ji+gn*Nr*(ca-ca/Rn),Ur=tt*Ge-Bt*ot;if(!Ur)break;var kn=(Li*tt-bi*Bt)/Ur,ft=(bi*Ge-Li*ot)/Ur;ut-=kn,yt=f(-u,t(u,yt-ft))}while((x(kn)>a||x(ft)>a)&&--gt>0);return x(x(yt)-u)<a?[0,yt]:gt&&[ut,yt]};var Ke=i(35*I);function xt(je,We){var rt=c(We/2);return[je*Ke*E(1-rt*rt),(1+Ke)*rt]}function Ht(je,We){var rt=We/2,ut=i(rt);return[2*je/T*i(We)*ut*ut,T*c(rt)]}function Zt(je){var We=1-je,rt=yt(y,0)[0]-yt(-y,0)[0],ut=E(2*(yt(0,u)[1]-yt(0,-u)[1])/rt);function yt(er,nr){var Kt=i(nr),ir=p(nr);return[Kt/(We+je*Kt)*er,We*nr+je*ir]}function gt(er,nr){var Kt=yt(er,nr);return[Kt[0]*ut,Kt[1]/ut]}function Lt(er){return gt(0,er)[1]}return gt.invert=function(er,nr){var Kt=ee(Lt,nr);return[er/ut*(je+We/i(Kt)),Kt]},gt}function $t(je){return[je[0]/2,P(c(je[1]/2*I))*M]}function Xt(je){return[2*je[0],2*e(p(je[1]*I))*M]}function cr(je,We){var rt=2*y/We,ut=je*je;function yt(gt,Lt){var er=g.geoAzimuthalEquidistantRaw(gt,Lt),nr=er[0],Kt=er[1],ir=nr*nr+Kt*Kt;if(ir>ut){var vr=E(ir),wr=n(Kt,nr),Ar=rt*s(wr/rt),Nr=wr-Ar,un=je*i(Nr),gn=(je*p(Nr)-Nr*p(un))/(u-un),Rn=Ft(Nr,gn),jn=(y-je)/Be(Rn,un,y);nr=vr;var Zn,Vn=50;do{nr-=Zn=(je+Be(Rn,un,nr)*jn-vr)/(Rn(nr)*jn)}while(x(Zn)>a&&--Vn>0);Kt=Nr*p(nr),nr<u&&(Kt-=gn*(nr-u));var bi=p(Ar),Li=i(Ar);er[0]=nr*Li-Kt*bi,er[1]=nr*bi+Kt*Li}return er}return yt.invert=function(gt,Lt){var er=gt*gt+Lt*Lt;if(er>ut){var nr=E(er),Kt=n(Lt,gt),ir=rt*s(Kt/rt),vr=Kt-ir;gt=nr*i(vr),Lt=nr*p(vr);for(var wr=gt-u,Ar=p(gt),Nr=Lt/Ar,un=gt<u?1/0:0,gn=10;;){var Rn=je*p(Nr),jn=je*i(Nr),Zn=p(jn),Vn=u-jn,bi=(Rn-Nr*Zn)/Vn,Li=Ft(Nr,bi);if(x(un)<1e-12||!--gn)break;Nr-=un=(Nr*Ar-bi*wr-Lt)/(Ar-2*wr*(Vn*(jn+Nr*Rn*i(jn)-Zn)-Rn*(Rn-Nr*Zn))/(Vn*Vn))}gt=(nr=je+Be(Li,jn,gt)*(y-je)/Be(Li,jn,y))*i(Kt=ir+Nr),Lt=nr*p(Kt)}return g.geoAzimuthalEquidistantRaw.invert(gt,Lt)},yt}function Ft(je,We){return function(rt){var ut=je*i(rt);return rt<u&&(ut-=We),E(1+ut*ut)}}function Be(je,We,rt){for(var ut=(rt-We)/50,yt=je(We)+je(rt),gt=1,Lt=We;gt<50;++gt)yt+=2*je(Lt+=ut);return.5*yt*ut}function He(je,We,rt,ut,yt,gt,Lt,er){function nr(Kt,ir){if(!ir)return[je*Kt/y,0];var vr=ir*ir,wr=je+vr*(We+vr*(rt+vr*ut)),Ar=ir*(yt-1+vr*(gt-er+vr*Lt)),Nr=(wr*wr+Ar*Ar)/(2*Ar),un=Kt*P(wr/Nr)/y;return[Nr*p(un),ir*(1+vr*er)+Nr*(1-i(un))]}return arguments.length<8&&(er=0),nr.invert=function(Kt,ir){var vr,wr,Ar=y*Kt/je,Nr=ir,un=50;do{var gn=Nr*Nr,Rn=je+gn*(We+gn*(rt+gn*ut)),jn=Nr*(yt-1+gn*(gt-er+gn*Lt)),Zn=Rn*Rn+jn*jn,Vn=2*jn,bi=Zn/Vn,Li=bi*bi,Gi=P(Rn/bi)/y,ji=Ar*Gi,Yi=Rn*Rn,_a=(2*We+gn*(4*rt+6*gn*ut))*Nr,da=yt+gn*(3*gt+5*gn*Lt),aa=(2*(Rn*_a+jn*(da-1))*Vn-Zn*(2*(da-1)))/(Vn*Vn),oa=i(ji),ca=p(ji),ot=bi*oa,tt=bi*ca,Ge=Ar/y*(1/E(1-Yi/Li))*(_a*bi-Rn*aa)/Li,Bt=tt-Kt,Ur=Nr*(1+gn*er)+bi-ot-ir,kn=aa*ca+ot*Ge,ft=ot*Gi,zt=1+aa-(aa*oa-tt*Ge),sr=tt*Gi,Yt=kn*sr-zt*ft;if(!Yt)break;Ar-=vr=(Ur*kn-Bt*zt)/Yt,Nr-=wr=(Bt*sr-Ur*ft)/Yt}while((x(vr)>a||x(wr)>a)&&--un>0);return[Ar,Nr]},nr}xt.invert=function(je,We){var rt=We/(1+Ke);return[je&&je/(Ke*E(1-rt*rt)),2*e(rt)]},Ht.invert=function(je,We){var rt=e(We/T),ut=i(rt),yt=2*rt;return[je*T/2/(i(yt)*ut*ut),yt]};var he=He(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),be=He(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),ze=He(5/6*y,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Ve(je,We){var rt=je*je,ut=We*We;return[je*(1-.162388*ut)*(.87-952426e-9*rt*rt),We*(1+ut/12)]}Ve.invert=function(je,We){var rt,ut=je,yt=We,gt=50;do{var Lt=yt*yt;yt-=rt=(yt*(1+Lt/12)-We)/(1+Lt/4)}while(x(rt)>a&&--gt>0);gt=50,je/=1-.162388*Lt;do{var er=(er=ut*ut)*er;ut-=rt=(ut*(.87-952426e-9*er)-je)/(.87-.00476213*er)}while(x(rt)>a&&--gt>0);return[ut,yt]};var Je=He(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Ye(je){var We=je(u,0)[0]-je(-u,0)[0];function rt(ut,yt){var gt=ut>0?-.5:.5,Lt=je(ut+gt*y,yt);return Lt[0]-=gt*We,Lt}return je.invert&&(rt.invert=function(ut,yt){var gt=ut>0?-.5:.5,Lt=je.invert(ut+gt*We,yt),er=Lt[0]-gt*y;return er<-y?er+=2*y:er>y&&(er-=2*y),Lt[0]=er,Lt}),rt}function lt(je,We){var rt=o(je),ut=o(We),yt=i(We),gt=i(je)*yt,Lt=p(je)*yt,er=p(ut*We);je=x(n(Lt,er)),We=P(gt),x(je-u)>a&&(je%=u);var nr=function(Kt,ir){if(ir===u)return[0,0];var vr,wr,Ar=p(ir),Nr=Ar*Ar,un=Nr*Nr,gn=1+un,Rn=1+3*un,jn=1-un,Zn=P(1/E(gn)),Vn=jn+Nr*gn*Zn,bi=(1-Ar)/Vn,Li=E(bi),Gi=bi*gn,ji=E(Gi),Yi=Li*jn;if(0===Kt)return[0,-(Yi+Nr*ji)];var _a,da=i(ir),aa=1/da,oa=2*Ar*da,ca=(-Vn*da-(-3*Nr+Zn*Rn)*oa*(1-Ar))/(Vn*Vn),ot=-aa*oa,tt=-aa*(Nr*gn*ca+bi*Rn*oa),Ge=-2*aa*(jn*(.5*ca/Li)-2*Nr*Li*oa),Bt=4*Kt/y;if(Kt>.222*y||ir<y/4&&Kt>.175*y){if(vr=(Yi+Nr*E(Gi*(1+un)-Yi*Yi))/(1+un),Kt>y/4)return[vr,vr];var Ur=vr,kn=.5*vr;vr=.5*(kn+Ur),wr=50;do{var zt=vr*(Ge+ot*E(Gi-vr*vr))+tt*P(vr/ji)-Bt;if(!zt)break;zt<0?kn=vr:Ur=vr,vr=.5*(kn+Ur)}while(x(Ur-kn)>a&&--wr>0)}else{vr=a,wr=25;do{var sr=vr*vr,Yt=E(Gi-sr),hr=Ge+ot*Yt,Ir=vr*hr+tt*P(vr/ji)-Bt;vr-=_a=Yt?Ir/(hr+(tt-ot*sr)/Yt):0}while(x(_a)>a&&--wr>0)}return[vr,-Yi-Nr*E(Gi-vr*vr)]}(je>y/4?u-je:je,We);return je>y/4&&(er=nr[0],nr[0]=-nr[1],nr[1]=-er),nr[0]*=rt,nr[1]*=-ut,nr}function st(je,We){var rt,ut,yt,gt,Lt,er;if(We<a)return[(gt=p(je))-(rt=We*(je-gt*(ut=i(je)))/4)*ut,ut+rt*gt,1-We*gt*gt/2,je-rt];if(We>=1-a)return rt=(1-We)/4,yt=1/(ut=D(je)),[(gt=((er=l(2*(er=je)))-1)/(er+1))+rt*((Lt=ut*R(je))-je)/(ut*ut),yt-rt*gt*yt*(Lt-je),yt+rt*gt*yt*(Lt+je),2*e(l(je))-u+rt*(Lt-je)/ut];var nr=[1,0,0,0,0,0,0,0,0],Kt=[E(We),0,0,0,0,0,0,0,0],ir=0;for(ut=E(1-We),Lt=1;x(Kt[ir]/nr[ir])>a&&ir<8;)rt=nr[ir++],Kt[ir]=(rt-ut)/2,nr[ir]=(rt+ut)/2,ut=E(rt*ut),Lt*=2;yt=Lt*nr[ir]*je;do{yt=(P(gt=Kt[ir]*p(ut=yt)/nr[ir])+yt)/2}while(--ir);return[p(yt),gt=i(yt),gt/i(yt-ut),yt]}function Mt(je,We){if(!We)return je;if(1===We)return d(c(je/2+_));for(var rt=1,ut=E(1-We),yt=E(We),gt=0;x(yt)>a;gt++){if(je%y){var Lt=e(ut*c(je)/rt);Lt<0&&(Lt+=y),je+=Lt+~~(je/y)*y}else je+=je;yt=(rt+ut)/2,ut=E(rt*ut),yt=((rt=yt)-ut)/2}return je/(h(2,gt)*rt)}function Dt(je,We){var Kt,ir,vr,wr,Ar,rt=(w-1)/(w+1),ut=E(1-rt*rt),yt=Mt(u,ut*ut),gt=d(c(y/4+x(We)/2)),Lt=l(-1*gt)/E(rt),er=(Kt=Lt*i(-1*je),wr=(ir=Lt*p(-1*je))+1,[.5*((Kt>=0?u:-u)-n(Ar=1-(vr=Kt*Kt)-ir*ir,2*Kt)),-.25*d(Ar*Ar+4*vr)+.5*d(wr*wr+vr)]),nr=function(Kt,ir,vr){var wr=x(Kt),Ar=R(x(ir));if(wr){var Nr=1/p(wr),un=1/(c(wr)*c(wr)),gn=-(un+vr*(Ar*Ar*Nr*Nr)-1+vr),Rn=(-gn+E(gn*gn-(vr-1)*un*4))/2;return[Mt(e(1/E(Rn)),vr)*o(Kt),Mt(e(E((Rn/un-1)/vr)),1-vr)*o(ir)]}return[0,Mt(e(Ar),1-vr)*o(ir)]}(er[0],er[1],ut*ut);return[-nr[1],(We>=0?1:-1)*(.5*yt-nr[0])]}function ht(je){var We=p(je),rt=i(je),ut=mt(je);function yt(gt,Lt){var er=ut(gt,Lt);gt=er[0];var nr=p(Lt=er[1]),Kt=i(Lt),ir=i(gt),vr=S(We*nr+rt*Kt*ir),wr=p(vr),Ar=x(wr)>a?vr/wr:1;return[Ar*rt*p(gt),(x(gt)>u?Ar:-Ar)*(We*Kt-rt*nr*ir)]}return ut.invert=mt(-je),yt.invert=function(gt,Lt){var er=E(gt*gt+Lt*Lt),nr=-p(er),Kt=i(er),ir=er*Kt,vr=-Lt*nr,wr=er*We,Ar=E(ir*ir+vr*vr-wr*wr),Nr=n(ir*wr+vr*Ar,vr*wr-ir*Ar),un=(er>u?-1:1)*n(gt*nr,er*i(Nr)*Kt+Lt*p(Nr)*nr);return ut.invert(un,Nr)},yt}function mt(je){var We=p(je),rt=i(je);return function(ut,yt){var gt=i(yt),Lt=i(ut)*gt,er=p(ut)*gt,nr=p(yt);return[n(er,Lt*rt-nr*We),P(nr*rt+Lt*We)]}}lt.invert=function(je,We){x(je)>1&&(je=2*o(je)-je),x(We)>1&&(We=2*o(We)-We);var rt=o(je),ut=o(We),yt=-rt*je,gt=-ut*We,Lt=gt/yt<1,er=function(vr,wr){for(var Ar=0,Nr=1,un=.5,gn=50;;){var Rn=un*un,jn=E(un),Zn=P(1/E(1+Rn)),Vn=1-Rn+un*(1+Rn)*Zn,bi=(1-jn)/Vn,Li=E(bi),Gi=bi*(1+Rn),ji=Li*(1-Rn),Yi=E(Gi-vr*vr),_a=wr+ji+un*Yi;if(x(Nr-Ar)<1e-12||0==--gn||0===_a)break;_a>0?Ar=un:Nr=un,un=.5*(Ar+Nr)}if(!gn)return null;var da=P(jn),aa=i(da),oa=1/aa,ca=2*jn*aa,ot=(-Vn*aa-(-3*un+Zn*(1+3*Rn))*ca*(1-jn))/(Vn*Vn);return[y/4*(vr*(-2*oa*(.5*ot/Li*(1-Rn)-2*un*Li*ca)+-oa*ca*Yi)+-oa*(un*(1+Rn)*ot+bi*(1+3*Rn)*ca)*P(vr/E(Gi))),da]}(Lt?gt:yt,Lt?yt:gt),nr=er[0],Kt=er[1],ir=i(Kt);return Lt&&(nr=-u-nr),[rt*(n(p(nr)*ir,-p(Kt))+y),ut*P(i(nr)*ir)]},Dt.invert=function(je,We){var rt,ut,yt,gt,Lt,er,Ar,Nr,un,nr=(w-1)/(w+1),Kt=E(1-nr*nr),vr=(ut=-je,yt=Kt*Kt,(rt=.5*Mt(u,Kt*Kt)-We)?(gt=st(rt,yt),ut?(er=(Lt=st(ut,1-yt))[1]*Lt[1]+yt*gt[0]*gt[0]*Lt[0]*Lt[0],[[gt[0]*Lt[2]/er,gt[1]*gt[2]*Lt[0]*Lt[1]/er],[gt[1]*Lt[1]/er,-gt[0]*gt[2]*Lt[0]*Lt[2]/er],[gt[2]*Lt[1]*Lt[2]/er,-yt*gt[0]*gt[1]*Lt[0]/er]]):[[gt[0],0],[gt[1],0],[gt[2],0]]):[[0,(Lt=st(ut,1-yt))[0]/Lt[1]],[1/Lt[1],0],[Lt[2]/Lt[1],0]]),wr=[((Ar=vr[0])[0]*(Nr=vr[1])[0]+Ar[1]*Nr[1])/(un=Nr[0]*Nr[0]+Nr[1]*Nr[1]),(Ar[1]*Nr[0]-Ar[0]*Nr[1])/un];return[n(wr[1],wr[0])/-1,2*e(l(-.5*d(nr*wr[0]*wr[0]+nr*wr[1]*wr[1])))-u]};var Ot=P(1-1/3)*M,At=Fe(0);function It(je){var We=Ot*I,rt=De(y,We)[0]-De(-y,We)[0],ut=At(0,We)[1],yt=De(0,We)[1],gt=T-yt,Lt=C/je,er=4/C,nr=ut+gt*gt*4/C;function Kt(ir,vr){var wr,Ar=x(vr);if(Ar>We){var Nr=t(je-1,f(0,r((ir+y)/Lt)));(wr=De(ir+=y*(je-1)/je-Nr*Lt,Ar))[0]=wr[0]*C/rt-C*(je-1)/(2*je)+Nr*C/je,wr[1]=ut+4*(wr[1]-yt)*gt/C,vr<0&&(wr[1]=-wr[1])}else wr=At(ir,vr);return wr[0]*=er,wr[1]/=nr,wr}return Kt.invert=function(ir,vr){ir/=er;var wr=x(vr*=nr);if(wr>ut){var Ar=t(je-1,f(0,r((ir+y)/Lt))),Nr=De.invert(ir=(ir+y*(je-1)/je-Ar*Lt)*rt/C,.25*(wr-ut)*C/gt+yt);return Nr[0]-=y*(je-1)/je-Ar*Lt,vr<0&&(Nr[1]=-Nr[1]),Nr}return At.invert(ir,vr)},Kt}function Se(je,We){return[je,1&We?90-a:Ot]}function Ze(je,We){return[je,1&We?-90+a:-Ot]}function it(je){return[je[0]*(1-a),je[1]]}function dt(je){var We,rt=1+je,ut=P(p(1/rt)),yt=2*E(y/(We=y+4*ut*rt)),gt=.5*yt*(rt+E(je*(2+je))),Lt=je*je,er=rt*rt;function nr(Kt,ir){var vr,wr,Ar=1-p(ir);if(Ar&&Ar<2){var Nr,un=u-ir,gn=25;do{var Rn=p(un),jn=i(un),Zn=ut+n(Rn,rt-jn),Vn=1+er-2*rt*jn;un-=Nr=(un-Lt*ut-rt*Rn+Vn*Zn-.5*Ar*We)/(2*rt*Rn*Zn)}while(x(Nr)>1e-12&&--gn>0);vr=yt*E(Vn),wr=Kt*Zn/y}else vr=yt*(je+Ar),wr=Kt*ut/y;return[vr*p(wr),gt-vr*i(wr)]}return nr.invert=function(Kt,ir){var vr=Kt*Kt+(ir-=gt)*ir,wr=(1+er-vr/(yt*yt))/(2*rt),Ar=S(wr),Nr=p(Ar),un=ut+n(Nr,rt-wr);return[P(Kt/E(vr))*y/un,P(1-2*(Ar-Lt*ut-rt*Nr+(1+er-2*rt*wr)*un)/We)]},nr}function Ct(je,We){return We>-.7109889596207567?((je=ae(je,We))[1]+=.0528035274542,je):ye(je,We)}function Ut(je,We){return x(We)>.7109889596207567?((je=ae(je,We))[1]-=We>0?.0528035274542:-.0528035274542,je):ye(je,We)}function Jt(je,We,rt,ut){var yt=E(4*y/(2*rt+(1+je-We/2)*p(2*rt)+(je+We)/2*p(4*rt)+We/2*p(6*rt))),gt=E(ut*p(rt)*E((1+je*i(2*rt)+We*i(4*rt))/(1+je+We))),Lt=rt*nr(1);function er(vr){return E(1+je*i(2*vr)+We*i(4*vr))}function nr(vr){var wr=vr*rt;return(2*wr+(1+je-We/2)*p(2*wr)+(je+We)/2*p(4*wr)+We/2*p(6*wr))/rt}function Kt(vr){return er(vr)*p(vr)}var ir=function(vr,wr){var Ar=rt*ee(nr,Lt*p(wr)/rt,wr/y);isNaN(Ar)&&(Ar=rt*o(wr));var Nr=yt*er(Ar);return[Nr*gt*vr/y*i(Ar),Nr/gt*p(Ar)]};return ir.invert=function(vr,wr){var Ar=ee(Kt,wr*gt/yt);return[vr*y/(i(Ar)*yt*gt*er(Ar)),P(rt*nr(Ar/rt)/Lt)]},0===rt&&(yt=E(ut/y),(ir=function(vr,wr){return[vr*yt,p(wr)/yt]}).invert=function(vr,wr){return[vr/yt,P(wr*yt)]}),ir}function pr(je,We,rt){function ut(Ar){return je+(1-je)*h(1-h(Ar,We),1/We)}function yt(Ar){return function qt(je,We,rt,ut,yt){void 0===ut&&(ut=1e-8),void 0===yt&&(yt=20);var gt=je(We),Lt=je(.5*(We+rt)),er=je(rt);return function nr(Kt,ir,vr,wr,Ar,Nr,un,gn,Rn,jn,Zn){if(Zn.nanEncountered)return NaN;var Vn,bi,Li,Gi,ji,Yi,_a,da,aa,oa;if(bi=Kt(ir+.25*(Vn=vr-ir)),Li=Kt(vr-.25*Vn),isNaN(bi))Zn.nanEncountered=!0;else{if(!isNaN(Li))return oa=((Yi=(Gi=Vn*(wr+4*bi+Ar)/12)+(ji=Vn*(Ar+4*Li+Nr)/12))-un)/15,jn>Rn?(Zn.maxDepthCount++,Yi+oa):Math.abs(oa)<gn?Yi+oa:(da=nr(Kt,ir,_a=ir+.5*Vn,wr,bi,Ar,Gi,.5*gn,Rn,jn+1,Zn),isNaN(da)?(Zn.nanEncountered=!0,NaN):(aa=nr(Kt,_a,vr,Ar,Li,Nr,ji,.5*gn,Rn,jn+1,Zn),isNaN(aa)?(Zn.nanEncountered=!0,NaN):da+aa));Zn.nanEncountered=!0}}(je,We,rt,gt,Lt,er,(gt+4*Lt+er)*(rt-We)/6,ut,yt,1,{maxDepthCount:0,nanEncountered:!1})}(ut,0,Ar,1e-4)}for(var gt=1/yt(1),er=(1+1e-8)*gt,nr=[],Kt=0;Kt<=1e3;Kt++)nr.push(yt(Kt/1e3)*er);function ir(Ar){var Nr=0,un=1e3,gn=500;do{nr[gn]>Ar?un=gn:Nr=gn,gn=Nr+un>>1}while(gn>Nr);var Rn=nr[gn+1]-nr[gn];return Rn&&(Rn=(Ar-nr[gn+1])/Rn),(gn+1+Rn)/1e3}var vr=2*ir(1)/y*gt/rt,wr=function(Ar,Nr){var un=ir(x(p(Nr))),gn=ut(un)*Ar;return un/=vr,[gn,Nr>=0?un:-un]};return wr.invert=function(Ar,Nr){var un;return x(Nr*=vr)<1&&(un=o(Nr)*P(yt(x(Nr))*gt)),[Ar/ut(x(Nr)),un]},wr}function Sr(je,We){return x(je[0]-We[0])<a&&x(je[1]-We[1])<a}function mr(je,We){for(var rt,ut,yt,gt=-1,Lt=je.length,er=je[0],nr=[];++gt<Lt;){ut=((rt=je[gt])[0]-er[0])/We,yt=(rt[1]-er[1])/We;for(var Kt=0;Kt<We;++Kt)nr.push([er[0]+Kt*ut,er[1]+Kt*yt]);er=rt}return nr.push(rt),nr}function tr(je){var We,rt,yt,gt,er,nr=[],Kt=je[0].length;for(er=0;er<Kt;++er)rt=(We=je[0][er])[0][0],nr.push(mr([[rt+a,We[0][1]+a],[rt+a,(yt=We[1][1])-a],[(gt=We[2][0])-a,yt-a],[gt-a,We[2][1]+a]],30));for(er=je[1].length-1;er>=0;--er)rt=(We=je[1][er])[0][0],nr.push(mr([[(gt=We[2][0])-a,We[2][1]-a],[gt-a,(yt=We[1][1])+a],[rt+a,yt+a],[rt+a,We[0][1]-a]],30));return{type:"Polygon",coordinates:[k.merge(nr)]}}function rr(je,We,rt){var ut,yt;function gt(nr,Kt){for(var ir=Kt<0?-1:1,vr=We[+(Kt<0)],wr=0,Ar=vr.length-1;wr<Ar&&nr>vr[wr][2][0];++wr);var Nr=je(nr-vr[wr][1][0],Kt);return Nr[0]+=je(vr[wr][1][0],ir*Kt>ir*vr[wr][0][1]?vr[wr][0][1]:Kt)[0],Nr}rt?gt.invert=rt(gt):je.invert&&(gt.invert=function(nr,Kt){for(var ir=yt[+(Kt<0)],vr=We[+(Kt<0)],wr=0,Ar=ir.length;wr<Ar;++wr){var Nr=ir[wr];if(Nr[0][0]<=nr&&nr<Nr[1][0]&&Nr[0][1]<=Kt&&Kt<Nr[1][1]){var un=je.invert(nr-je(vr[wr][1][0],0)[0],Kt);return un[0]+=vr[wr][1][0],Sr(gt(un[0],un[1]),[nr,Kt])?un:null}}});var Lt=g.geoProjection(gt),er=Lt.stream;return Lt.stream=function(nr){var Kt=Lt.rotate(),ir=er(nr),vr=(Lt.rotate([0,0]),er(nr));return Lt.rotate(Kt),ir.sphere=function(){g.geoStream(ut,vr)},ir},Lt.lobes=function(nr){return arguments.length?(ut=tr(nr),We=nr.map(function(Kt){return Kt.map(function(ir){return[[ir[0][0]*I,ir[0][1]*I],[ir[1][0]*I,ir[1][1]*I],[ir[2][0]*I,ir[2][1]*I]]})}),yt=We.map(function(Kt){return Kt.map(function(ir){var vr,wr=je(ir[0][0],ir[0][1])[0],Ar=je(ir[2][0],ir[2][1])[0],Nr=je(ir[1][0],ir[0][1])[1],un=je(ir[1][0],ir[1][1])[1];return Nr>un&&(vr=Nr,Nr=un,un=vr),[[wr,Nr],[Ar,un]]})}),Lt):We.map(function(Kt){return Kt.map(function(ir){return[[ir[0][0]*M,ir[0][1]*M],[ir[1][0]*M,ir[1][1]*M],[ir[2][0]*M,ir[2][1]*M]]})})},null!=We&&Lt.lobes(We),Lt}Ct.invert=function(je,We){return We>-.7109889596207567?ae.invert(je,We-.0528035274542):ye.invert(je,We)},Ut.invert=function(je,We){return x(We)>.7109889596207567?ae.invert(je,We+(We>0?.0528035274542:-.0528035274542)):ye.invert(je,We)};var ar=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],dr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],xr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Lr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],zr=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],Hr=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Xr(je,We){return[3/C*je*E(y*y/3-We*We),We]}function cn(je){function We(rt,ut){if(x(x(ut)-u)<a)return[0,ut<0?-2:2];var yt=p(ut),gt=h((1+yt)/(1-yt),je/2),Lt=.5*(gt+1/gt)+i(rt*=je);return[2*p(rt)/Lt,(gt-1/gt)/Lt]}return We.invert=function(rt,ut){var yt=x(ut);if(x(yt-2)<a)return rt?null:[0,o(ut)*u];if(yt>2)return null;var gt=(rt/=2)*rt,Lt=(ut/=2)*ut,er=2*ut/(1+gt+Lt);return er=h((1+er)/(1-er),1/je),[n(2*rt,1-gt-Lt)/je,P((er-1)/(er+1))]},We}Xr.invert=function(je,We){return[C/3*je/E(y*y/3-We*We),We]};var an=y/w;function Nn(je,We){return[je*(1+E(i(We)))/2,We/(i(We/2)*i(je/6))]}function on(je,We){var rt=je*je,ut=We*We;return[je*(.975534+ut*(-.0143059*rt-.119161+-.0547009*ut)),We*(1.00384+rt*(.0802894+-.02855*ut+199025e-9*rt)+ut*(.0998909+-.0491032*ut))]}function wn(je,We){return[p(je)/i(We),c(We)*i(je)]}function An(je){var We=i(je),rt=c(_+je/2);function ut(yt,gt){var Lt=gt-je,er=x(Lt)<a?yt*We:x(er=_+gt/2)<a||x(x(er)-u)<a?0:yt*Lt/d(c(er)/rt);return[er,Lt]}return ut.invert=function(yt,gt){var Lt,er=gt+je;return[x(gt)<a?yt/We:x(Lt=_+er/2)<a||x(x(Lt)-u)<a?0:yt*d(c(Lt)/rt)/gt,er]},ut}function ii(je,We){return[je,1.25*d(c(_+.4*We))]}function Vr(je){var We=je.length-1;function rt(ut,yt){for(var gt,Lt=i(yt),er=2/(1+Lt*i(ut)),nr=er*Lt*p(ut),Kt=er*p(yt),ir=We,vr=je[ir],wr=vr[0],Ar=vr[1];--ir>=0;)wr=(vr=je[ir])[0]+nr*(gt=wr)-Kt*Ar,Ar=vr[1]+nr*Ar+Kt*gt;return[wr=nr*(gt=wr)-Kt*Ar,Ar=nr*Ar+Kt*gt]}return rt.invert=function(ut,yt){var gt=20,Lt=ut,er=yt;do{for(var nr,Kt=We,ir=je[Kt],vr=ir[0],wr=ir[1],Ar=0,Nr=0;--Kt>=0;)Ar=vr+Lt*(nr=Ar)-er*Nr,Nr=wr+Lt*Nr+er*nr,vr=(ir=je[Kt])[0]+Lt*(nr=vr)-er*wr,wr=ir[1]+Lt*wr+er*nr;var un,gn,Rn=(Ar=vr+Lt*(nr=Ar)-er*Nr)*Ar+(Nr=wr+Lt*Nr+er*nr)*Nr;Lt-=un=((vr=Lt*(nr=vr)-er*wr-ut)*Ar+(wr=Lt*wr+er*nr-yt)*Nr)/Rn,er-=gn=(wr*Ar-vr*Nr)/Rn}while(x(un)+x(gn)>1e-12&&--gt>0);if(gt){var jn=E(Lt*Lt+er*er),Zn=2*e(.5*jn),Vn=p(Zn);return[n(Lt*Vn,jn*i(Zn)),jn?P(er*Vn/jn):0]}},rt}Nn.invert=function(je,We){var rt=x(je),ut=x(We),yt=a,gt=u;ut<an?gt*=ut/an:yt+=6*S(an/ut);for(var Lt=0;Lt<25;Lt++){var er=p(gt),nr=E(i(gt)),Kt=p(gt/2),ir=i(gt/2),vr=p(yt/6),wr=i(yt/6),Ar=.5*yt*(1+nr)-rt,Nr=gt/(ir*wr)-ut,un=nr?-.25*yt*er/nr:0,gn=.5*(1+nr),Rn=(1+.5*gt*Kt/ir)/(ir*wr),jn=gt/ir*(vr/6)/(wr*wr),Zn=un*jn-Rn*gn,Vn=(Ar*jn-Nr*gn)/Zn,bi=(Nr*un-Ar*Rn)/Zn;if(gt-=Vn,yt-=bi,x(Vn)<a&&x(bi)<a)break}return[je<0?-yt:yt,We<0?-gt:gt]},on.invert=function(je,We){var rt=o(je)*y,ut=We/2,yt=50;do{var gt=rt*rt,Lt=ut*ut,er=rt*ut,nr=rt*(.975534+Lt*(-.0143059*gt-.119161+-.0547009*Lt))-je,Kt=ut*(1.00384+gt*(.0802894+-.02855*Lt+199025e-9*gt)+Lt*(.0998909+-.0491032*Lt))-We,ir=.975534-Lt*(.119161+3*gt*.0143059+.0547009*Lt),vr=-er*(.238322+.2188036*Lt+.0286118*gt),wr=er*(.1605788+7961e-7*gt+-.0571*Lt),Ar=1.00384+gt*(.0802894+199025e-9*gt)+Lt*(3*(.0998909-.02855*gt)-.245516*Lt),Nr=vr*wr-Ar*ir,un=(Kt*vr-nr*Ar)/Nr,gn=(nr*wr-Kt*ir)/Nr;rt-=un,ut-=gn}while((x(un)>a||x(gn)>a)&&--yt>0);return yt&&[rt,ut]},wn.invert=function(je,We){var rt=je*je,ut=We*We+1,yt=rt+ut,gt=je?b*E((yt-E(yt*yt-4*rt))/rt):1/E(ut);return[P(je*gt),o(We)*S(gt)]},ii.invert=function(je,We){return[je,2.5*e(l(.8*We))-.625*y]};var sn=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],xn=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],nn=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],fn=[[.9245,0],[0,0],[.01943,0]],Xn=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Mn(je,We){var rt=g.geoProjection(Vr(je)).rotate(We).clipAngle(90),ut=g.geoRotation(We),yt=rt.center;return delete rt.rotate,rt.center=function(gt){return arguments.length?yt(ut(gt)):ut.invert(yt())},rt}var On=E(6),si=E(7);function or(je,We){var rt=P(7*p(We)/(3*On));return[On*je*(2*i(2*rt/3)-1)/si,9*p(rt/3)/si]}function br(je,We){for(var rt,ut=(1+b)*p(We),yt=We,gt=0;gt<25&&(yt-=rt=(p(yt/2)+p(yt)-ut)/(.5*i(yt/2)+i(yt)),!(x(rt)<a));gt++);return[je*(1+2*i(yt)/i(yt/2))/(3*w),2*E(3)*p(yt/2)/E(2+w)]}function Rt(je,We){for(var rt,ut=E(6/(4+y)),yt=(1+y/4)*p(We),gt=We/2,Lt=0;Lt<25&&(gt-=rt=(gt/2+p(gt)-yt)/(.5+i(gt)),!(x(rt)<a));Lt++);return[ut*(.5+i(gt))*je/1.5,ut*gt]}function fr(je,We){var rt=We*We,ut=rt*rt,yt=rt*ut;return[je*(.84719-.13063*rt+yt*yt*(.05494*rt-.04515-.02326*ut+.00331*yt)),We*(1.01183+ut*ut*(.01926*rt-.02625-.00396*ut))]}function gr(je,We){return[je*(1+i(We))/2,2*(We-c(We/2))]}or.invert=function(je,We){var rt=3*P(We*si/9);return[je*si/(On*(2*i(2*rt/3)-1)),P(3*p(rt)*On/7)]},br.invert=function(je,We){var rt=We*E(2+w)/(2*E(3)),ut=2*P(rt);return[3*w*je/(1+2*i(ut)/i(ut/2)),P((rt+p(ut))/(1+b))]},Rt.invert=function(je,We){var rt=E(6/(4+y)),ut=We/rt;return x(x(ut)-u)<a&&(ut=ut<0?-u:u),[1.5*je/(rt*(.5+i(ut))),P((ut/2+p(ut))/(1+y/4))]},fr.invert=function(je,We){var rt,ut,yt,gt,Lt=We,er=25;do{Lt-=rt=(Lt*(1.01183+(yt=(ut=Lt*Lt)*ut)*yt*(.01926*ut-.02625-.00396*yt))-We)/(1.01183+yt*yt*(.21186*ut-.23625+-.05148*yt))}while(x(rt)>1e-12&&--er>0);return[je/(.84719-.13063*(ut=Lt*Lt)+(gt=ut*(yt=ut*ut))*gt*(.05494*ut-.04515-.02326*yt+.00331*gt)),Lt]},gr.invert=function(je,We){for(var rt=We/2,ut=0,yt=1/0;ut<10&&x(yt)>a;++ut){var gt=i(We/2);We-=yt=(We-c(We/2)-rt)/(1-.5/(gt*gt))}return[2*je/(1+i(We)),We]};var jr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Br(je,We){var rt=p(We),ut=i(We),yt=o(je);if(0===je||x(We)===u)return[0,We];if(0===We)return[je,0];if(x(je)===u)return[je*ut,u*rt];var gt=y/(2*je)-2*je/y,Lt=2*We/y,er=(1-Lt*Lt)/(rt-Lt),nr=gt*gt,Kt=er*er,ir=1+nr/Kt,vr=1+Kt/nr,wr=(gt*rt/er-gt/2)/ir,Ar=(Kt*rt/nr+er/2)/vr,Nr=Ar*Ar-(Kt*rt*rt/nr+er*rt-1)/vr;return[u*(wr+E(wr*wr+ut*ut/ir)*yt),u*(Ar+E(Nr<0?0:Nr)*o(-We*gt)*yt)]}function Fr(je,We){var rt=We*We;return[je,We*(1.0148+rt*rt*(.23185+rt*(.02406*rt-.14499)))]}function Er(je,We){if(x(We)<a)return[je,0];var rt=c(We),ut=je*p(We);return[p(ut)/rt,We+(1-i(ut))/rt]}function kr(je,We){return[je[0]*We[0]+je[1]*We[3],je[0]*We[1]+je[1]*We[4],je[0]*We[2]+je[1]*We[5]+je[2],je[3]*We[0]+je[4]*We[3],je[3]*We[1]+je[4]*We[4],je[3]*We[2]+je[4]*We[5]+je[5]]}function Mr(je,We){return[je[0]-We[0],je[1]-We[1]]}function Pr(je){return E(je[0]*je[0]+je[1]*je[1])}function Wr(je,We,rt){function ut(Lt,er){var nr,Kt=We(Lt,er),ir=Kt.project([Lt*M,er*M]);return(nr=Kt.transform)?[nr[0]*ir[0]+nr[1]*ir[1]+nr[2],-(nr[3]*ir[0]+nr[4]*ir[1]+nr[5])]:(ir[1]=-ir[1],ir)}(function Lt(er,nr){if(er.edges=function(Nr){for(var un=Nr.length,gn=[],Rn=Nr[un-1],jn=0;jn<un;++jn)gn.push([Rn,Rn=Nr[jn]]);return gn}(er.face),nr.face){var Kt=er.shared=function(Nr,un){for(var gn,Rn,jn=Nr.length,Zn=null,Vn=0;Vn<jn;++Vn){gn=Nr[Vn];for(var bi=un.length;--bi>=0;)if(gn[0]===(Rn=un[bi])[0]&&gn[1]===Rn[1]){if(Zn)return[Zn,gn];Zn=gn}}}(er.face,nr.face),ir=function _r(je,We){var Lt,er,rt=Mr(je[1],je[0]),ut=Mr(We[1],We[0]),yt=n((Lt=rt)[0]*(er=ut)[1]-Lt[1]*er[0],Lt[0]*er[0]+Lt[1]*er[1]),gt=Pr(rt)/Pr(ut);return kr([1,0,je[0][0],0,1,je[0][1]],kr([gt,0,0,0,gt,0],kr([i(yt),p(yt),0,-p(yt),i(yt),0],[1,0,-We[0][0],0,1,-We[0][1]])))}(Kt.map(nr.project),Kt.map(er.project));er.transform=nr.transform?kr(nr.transform,ir):ir;for(var vr=nr.edges,wr=0,Ar=vr.length;wr<Ar;++wr)Zr(Kt[0],vr[wr][1])&&Zr(Kt[1],vr[wr][0])&&(vr[wr]=er),Zr(Kt[0],vr[wr][0])&&Zr(Kt[1],vr[wr][1])&&(vr[wr]=er);for(wr=0,Ar=(vr=er.edges).length;wr<Ar;++wr)Zr(Kt[0],vr[wr][0])&&Zr(Kt[1],vr[wr][1])&&(vr[wr]=nr),Zr(Kt[0],vr[wr][1])&&Zr(Kt[1],vr[wr][0])&&(vr[wr]=nr)}else er.transform=nr.transform;return er.children&&er.children.forEach(function(Nr){Lt(Nr,er)}),er})(je,{transform:null}),rn(je)&&(ut.invert=function(Lt,er){var nr=function Kt(ir,vr){var Zn,Vn,wr=ir.project.invert,Ar=ir.transform,Nr=vr;if(Ar&&(Nr=[(Ar=[(Vn=1/((Zn=Ar)[0]*Zn[4]-Zn[1]*Zn[3]))*Zn[4],-Vn*Zn[1],Vn*(Zn[1]*Zn[5]-Zn[2]*Zn[4]),-Vn*Zn[3],Vn*Zn[0],Vn*(Zn[2]*Zn[3]-Zn[0]*Zn[5])])[0]*Nr[0]+Ar[1]*Nr[1]+Ar[2],Ar[3]*Nr[0]+Ar[4]*Nr[1]+Ar[5]]),wr&&ir===function(Zn){return We(Zn[0]*I,Zn[1]*I)}(un=wr(Nr)))return un;for(var un,gn=ir.children,Rn=0,jn=gn&&gn.length;Rn<jn;++Rn)if(un=Kt(gn[Rn],vr))return un}(je,[Lt,-er]);return nr&&(nr[0]*=I,nr[1]*=I,nr)});var yt=g.geoProjection(ut),gt=yt.stream;return yt.stream=function(Lt){var er=yt.rotate(),nr=gt(Lt),Kt=(yt.rotate([0,0]),gt(Lt));return yt.rotate(er),nr.sphere=function(){Kt.polygonStart(),Kt.lineStart(),function ir(vr,wr,Ar){var Nr,un,gn=wr.edges,Rn=gn.length,jn={type:"MultiPoint",coordinates:wr.face},Zn=wr.face.filter(function(_a){return 90!==x(_a[1])}),Vn=g.geoBounds({type:"MultiPoint",coordinates:Zn}),bi=!1,Li=-1,Gi=Vn[1][0]-Vn[0][0],ji=180===Gi||360===Gi?[(Vn[0][0]+Vn[1][0])/2,(Vn[0][1]+Vn[1][1])/2]:g.geoCentroid(jn);if(Ar)for(;++Li<Rn&&gn[Li]!==Ar;);++Li;for(var Yi=0;Yi<Rn;++Yi)un=gn[(Yi+Li)%Rn],Array.isArray(un)?(bi||(vr.point((Nr=g.geoInterpolate(un[0],ji)(a))[0],Nr[1]),bi=!0),vr.point((Nr=g.geoInterpolate(un[1],ji)(a))[0],Nr[1])):(bi=!1,un!==Ar&&ir(vr,un,wr))}(Kt,je),Kt.lineEnd(),Kt.polygonEnd()},nr},yt.angle(null==rt?-30:rt*M)}function Zr(je,We){return je&&We&&je[0]===We[0]&&je[1]===We[1]}function rn(je){return je.project.invert||je.children&&je.children.some(rn)}Br.invert=function(je,We){var rt=(je/=u)*je,ut=rt+(We/=u)*We,yt=y*y;return[je?(ut-1+E((1-ut)*(1-ut)+4*rt))/(2*je)*u:0,ee(function(gt){return ut*(y*p(gt)-2*gt)*y+4*gt*gt*(We-p(gt))+2*y*gt-yt*We},0)]},Fr.invert=function(je,We){We>1.790857183?We=1.790857183:We<-1.790857183&&(We=-1.790857183);var rt,ut=We;do{var yt=ut*ut;ut-=rt=(ut*(1.0148+yt*yt*(.23185+yt*(.02406*yt-.14499)))-We)/(1.0148+yt*yt*(5*.23185+yt*(.21654*yt-1.01493)))}while(x(rt)>a);return[je,ut]},Er.invert=function(je,We){if(x(We)<a)return[je,0];var rt,ut=je*je+We*We,yt=.5*We,gt=10;do{var Lt=c(yt),er=1/i(yt),nr=ut-2*We*yt+yt*yt;yt-=rt=(Lt*nr+2*(yt-We))/(2+nr*er*er+2*(yt-We)*Lt)}while(x(rt)>a&&--gt>0);return Lt=c(yt),[(x(We)<x(yt+1/Lt)?P(je*Lt):o(We)*o(je)*(S(x(je*Lt))+u))/p(yt),yt]};var ln=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],bn=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(je){return je.map(function(We){return ln[We]})}),Tn=2/E(3);function En(je,We){var rt=De(je,We);return[rt[0]*Tn,rt[1]]}function Dn(je,We){for(var rt=0,ut=je.length,yt=0;rt<ut;++rt)yt+=je[rt]*We[rt];return yt}function Bn(je){return[n(je[1],je[0])*M,P(f(-1,t(1,je[2])))*M]}function Kn(je){var We=je[0]*I,rt=je[1]*I,ut=i(rt);return[ut*i(We),ut*p(We),p(rt)]}function Ci(){}function Ti(je,We){return{type:"FeatureCollection",features:je.features.map(function(rt){return Pn(rt,We)})}}function Pn(je,We){return{type:"Feature",id:je.id,properties:je.properties,geometry:ei(je.geometry,We)}}function ei(je,We){if(!je)return null;if("GeometryCollection"===je.type)return yt=We,{type:"GeometryCollection",geometries:je.geometries.map(function(gt){return ei(gt,yt)})};var yt,rt;switch(je.type){case"Point":case"MultiPoint":rt=ma;break;case"LineString":case"MultiLineString":rt=Sa;break;case"Polygon":case"MultiPolygon":case"Sphere":rt=Xa;break;default:return null}return g.geoStream(je,We(rt)),rt.result()}En.invert=function(je,We){return De.invert(je/Tn,We)};var Qn=[],Bi=[],ma={point:function(je,We){Qn.push([je,We])},result:function(){var je=Qn.length?Qn.length<2?{type:"Point",coordinates:Qn[0]}:{type:"MultiPoint",coordinates:Qn}:null;return Qn=[],je}},Sa={lineStart:Ci,point:function(je,We){Qn.push([je,We])},lineEnd:function(){Qn.length&&(Bi.push(Qn),Qn=[])},result:function(){var je=Bi.length?Bi.length<2?{type:"LineString",coordinates:Bi[0]}:{type:"MultiLineString",coordinates:Bi}:null;return Bi=[],je}},Xa={polygonStart:Ci,lineStart:Ci,point:function(je,We){Qn.push([je,We])},lineEnd:function(){var je=Qn.length;if(je){do{Qn.push(Qn[0].slice())}while(++je<4);Bi.push(Qn),Qn=[]}},polygonEnd:Ci,result:function(){if(!Bi.length)return null;var je=[],We=[];return Bi.forEach(function(rt){!function(ut){if((yt=ut.length)<4)return!1;for(var yt,gt=0,Lt=ut[yt-1][1]*ut[0][0]-ut[yt-1][0]*ut[0][1];++gt<yt;)Lt+=ut[gt-1][1]*ut[gt][0]-ut[gt-1][0]*ut[gt][1];return Lt<=0}(rt)?We.push(rt):je.push([rt])}),We.forEach(function(rt){var ut=rt[0];je.some(function(yt){if(function(gt,Lt){for(var er=Lt[0],nr=Lt[1],Kt=!1,ir=0,vr=gt.length,wr=vr-1;ir<vr;wr=ir++){var Ar=gt[ir],Nr=Ar[0],un=Ar[1],gn=gt[wr],jn=gn[1];un>nr^jn>nr&&er<(gn[0]-Nr)*(nr-un)/(jn-un)+Nr&&(Kt=!Kt)}return Kt}(yt[0],ut))return yt.push(rt),!0})||je.push([rt])}),Bi=[],je.length?je.length>1?{type:"MultiPolygon",coordinates:je}:{type:"Polygon",coordinates:je[0]}:null}};function Ji(je){var We=je(u,0)[0]-je(-u,0)[0];function rt(ut,yt){var gt=x(ut)<u,Lt=je(gt?ut:ut>0?ut-y:ut+y,yt),er=(Lt[0]-Lt[1])*b,nr=(Lt[0]+Lt[1])*b;if(gt)return[er,nr];var Kt=We*b,ir=er>0^nr>0?-1:1;return[ir*er-o(nr)*Kt,ir*nr-o(er)*Kt]}return je.invert&&(rt.invert=function(ut,yt){var gt=(ut+yt)*b,Lt=(yt-ut)*b,er=x(gt)<.5*We&&x(Lt)<.5*We;if(!er){var nr=We*b,Kt=gt>0^Lt>0?-1:1,ir=-Kt*ut+(Lt>0?1:-1)*nr,vr=-Kt*yt+(gt>0?1:-1)*nr;gt=(-ir-vr)*b,Lt=(ir-vr)*b}var wr=je.invert(gt,Lt);return er||(wr[0]+=gt>0?y:-y),wr}),g.geoProjection(rt).rotate([-90,-90,45]).clipAngle(179.999)}function qi(){return Ji(Dt).scale(111.48)}function Ha(je){var We=p(je);function rt(ut,yt){var gt=We?c(ut*We/2)/We:ut/2;if(!yt)return[2*gt,-je];var Lt=2*e(gt*p(yt)),er=1/c(yt);return[p(Lt)*er,yt+(1-i(Lt))*er-je]}return rt.invert=function(ut,yt){if(x(yt+=je)<a)return[We?2*e(We*ut/2)/We:ut,0];var gt,Lt=ut*ut+yt*yt,er=0,nr=10;do{var Kt=c(er),ir=1/i(er),vr=Lt-2*yt*er+er*er;er-=gt=(Kt*vr+2*(er-yt))/(2+vr*ir*ir+2*(er-yt)*Kt)}while(x(gt)>a&&--nr>0);var wr=ut*(Kt=c(er)),Ar=c(x(yt)<x(er+1/Kt)?.5*P(wr):.5*S(wr)+y/4)/p(er);return[We?2*e(We*Ar)/We:2*Ar,er]},rt}var Ni=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Ja(je,We){var rt,ut=t(18,36*x(We)/y),yt=r(ut),gt=ut-yt,Lt=(rt=Ni[yt])[0],er=rt[1],nr=(rt=Ni[++yt])[0],Kt=rt[1],ir=(rt=Ni[t(19,++yt)])[0],vr=rt[1];return[je*(nr+gt*(ir-Lt)/2+gt*gt*(ir-2*nr+Lt)/2),(We>0?u:-u)*(Kt+gt*(vr-er)/2+gt*gt*(vr-2*Kt+er)/2)]}function ro(je,We){var rt=function(Lt){function er(nr,Kt){var ir=i(Kt),vr=(Lt-1)/(Lt-ir*i(nr));return[vr*ir*p(nr),vr*p(Kt)]}return er.invert=function(nr,Kt){var ir=nr*nr+Kt*Kt,vr=E(ir),wr=(Lt-E(1-ir*(Lt+1)/(Lt-1)))/((Lt-1)/vr+vr/(Lt-1));return[n(nr*wr,vr*E(1-wr*wr)),vr?P(Kt*wr/vr):0]},er}(je);if(!We)return rt;var ut=i(We),yt=p(We);function gt(Lt,er){var nr=rt(Lt,er),Kt=nr[1],ir=Kt*yt/(je-1)+ut;return[nr[0]*ut/ir,Kt/ir]}return gt.invert=function(Lt,er){var nr=(je-1)/(je-1-er*yt);return rt.invert(nr*Lt,nr*er*ut)},gt}Ni.forEach(function(je){je[1]*=1.0144}),Ja.invert=function(je,We){var rt=We/u,ut=90*rt,yt=t(18,x(ut/5)),gt=f(0,r(yt));do{var Lt=Ni[gt][1],er=Ni[gt+1][1],nr=Ni[t(19,gt+2)][1],Kt=nr-Lt,ir=nr-2*er+Lt,vr=2*(x(rt)-er)/Kt,wr=ir/Kt,Ar=vr*(1-wr*vr*(1-2*wr*vr));if(Ar>=0||1===gt){ut=(We>=0?5:-5)*(Ar+yt);var Nr,un=50;do{Ar=(yt=t(18,x(ut)/5))-(gt=r(yt)),Lt=Ni[gt][1],er=Ni[gt+1][1],nr=Ni[t(19,gt+2)][1],ut-=(Nr=(We>=0?u:-u)*(er+Ar*(nr-Lt)/2+Ar*Ar*(nr-2*er+Lt)/2)-We)*M}while(x(Nr)>1e-12&&--un>0);break}}while(--gt>=0);var gn=Ni[gt][0],Rn=Ni[gt+1][0],jn=Ni[t(19,gt+2)][0];return[je/(Rn+Ar*(jn-gn)/2+Ar*Ar*(jn-2*Rn+gn)/2),ut*I]};var Ma=-179.9999,Na=179.9999,eo=-89.9999;function no(je){return je.length>0}function Ea(je){return-90===je||90===je?[0,je]:[-180,(We=je,Math.floor(1e4*We)/1e4)];var We}function na(je){var We=je[0],rt=je[1],ut=!1;return We<=Ma?(We=-180,ut=!0):We>=Na&&(We=180,ut=!0),rt<=eo?(rt=-90,ut=!0):rt>=89.9999&&(rt=90,ut=!0),ut?[We,rt]:je}function Ga(je){return je.map(na)}function Jo(je,We,rt){for(var ut=0,yt=je.length;ut<yt;++ut){var gt=je[ut].slice();rt.push({index:-1,polygon:We,ring:gt});for(var Lt=0,er=gt.length;Lt<er;++Lt){var nr=gt[Lt],Kt=nr[0],ir=nr[1];if(Kt<=Ma||Kt>=Na||ir<=eo||ir>=89.9999){gt[Lt]=na(nr);for(var vr=Lt+1;vr<er;++vr){var wr=gt[vr],Ar=wr[0],Nr=wr[1];if(Ar>Ma&&Ar<Na&&Nr>eo&&Nr<89.9999)break}if(vr===Lt+1)continue;if(Lt){var un={index:-1,polygon:We,ring:gt.slice(0,Lt+1)};un.ring[un.ring.length-1]=Ea(ir),rt[rt.length-1]=un}else rt.pop();if(vr>=er)break;rt.push({index:-1,polygon:We,ring:gt=gt.slice(vr-1)}),gt[0]=Ea(gt[0][1]),Lt=-1,er=gt.length}}}}function ms(je){var We,rt,ut,yt,gt,Lt,er=je.length,nr={},Kt={};for(We=0;We<er;++We)(ut=(rt=je[We]).ring[0])[0]!==(gt=rt.ring[rt.ring.length-1])[0]||ut[1]!==gt[1]?(rt.index=We,nr[ut]=Kt[gt]=rt):(rt.polygon.push(rt.ring),je[We]=null);for(We=0;We<er;++We)if(rt=je[We]){if(yt=Kt[ut=rt.ring[0]],Lt=nr[gt=rt.ring[rt.ring.length-1]],delete nr[ut],delete Kt[gt],ut[0]===gt[0]&&ut[1]===gt[1]){rt.polygon.push(rt.ring);continue}yt?(delete Kt[ut],delete nr[yt.ring[0]],yt.ring.pop(),je[yt.index]=null,rt={index:-1,polygon:yt.polygon,ring:yt.ring.concat(rt.ring)},yt===Lt?rt.polygon.push(rt.ring):(rt.index=er++,je.push(nr[rt.ring[0]]=Kt[rt.ring[rt.ring.length-1]]=rt))):Lt?(delete nr[gt],delete Kt[Lt.ring[Lt.ring.length-1]],rt.ring.pop(),rt={index:er++,polygon:Lt.polygon,ring:rt.ring.concat(Lt.ring)},je[Lt.index]=null,je.push(nr[rt.ring[0]]=Kt[rt.ring[rt.ring.length-1]]=rt)):(rt.ring.push(rt.ring[0]),rt.polygon.push(rt.ring))}}function Wi(je){var We={type:"Feature",geometry:Ko(je.geometry)};return null!=je.id&&(We.id=je.id),null!=je.bbox&&(We.bbox=je.bbox),null!=je.properties&&(We.properties=je.properties),We}function Ko(je){if(null==je)return je;var We,rt,ut,yt;switch(je.type){case"GeometryCollection":We={type:"GeometryCollection",geometries:je.geometries.map(Ko)};break;case"Point":We={type:"Point",coordinates:na(je.coordinates)};break;case"MultiPoint":case"LineString":We={type:je.type,coordinates:Ga(je.coordinates)};break;case"MultiLineString":We={type:"MultiLineString",coordinates:je.coordinates.map(Ga)};break;case"Polygon":var gt=[];Jo(je.coordinates,gt,rt=[]),ms(rt),We={type:"Polygon",coordinates:gt};break;case"MultiPolygon":rt=[],ut=-1,yt=je.coordinates.length;for(var Lt=new Array(yt);++ut<yt;)Jo(je.coordinates[ut],Lt[ut]=[],rt);ms(rt),We={type:"MultiPolygon",coordinates:Lt.filter(no)};break;default:return je}return null!=je.bbox&&(We.bbox=je.bbox),We}function Uo(je,We){var rt=c(We/2),ut=p(_*rt);return[je*(.74482-.34588*ut*ut),1.70711*rt]}function $o(je,We,rt){var ut=g.geoInterpolate(We,rt),yt=ut(.5),gt=g.geoRotation([-yt[0],-yt[1]])(We),Lt=ut.distance/2,er=-P(p(gt[1]*I)/p(Lt)),nr=[-yt[0],-yt[1],-(gt[0]>0?y-er:er)*M],Kt=g.geoProjection(je(Lt)).rotate(nr),ir=g.geoRotation(nr),vr=Kt.center;return delete Kt.rotate,Kt.center=function(wr){return arguments.length?vr(ir(wr)):ir.invert(vr())},Kt.clipAngle(90)}function os(je){var We=i(je);function rt(ut,yt){var gt=g.geoGnomonicRaw(ut,yt);return gt[0]*=We,gt}return rt.invert=function(ut,yt){return g.geoGnomonicRaw.invert(ut/We,yt)},rt}function ss(je,We){return $o(os,je,We)}function ls(je){if(!(je*=2))return g.geoAzimuthalEquidistantRaw;var We=-je/2,rt=-We,ut=je*je,yt=c(rt),gt=.5/p(rt);function Lt(er,nr){var Kt=S(i(nr)*i(er-We)),ir=S(i(nr)*i(er-rt));return[((Kt*=Kt)-(ir*=ir))/(2*je),(nr<0?-1:1)*E(4*ut*ir-(ut-Kt+ir)*(ut-Kt+ir))/(2*je)]}return Lt.invert=function(er,nr){var Kt,ir,vr=nr*nr,wr=i(E(vr+(Kt=er+We)*Kt)),Ar=i(E(vr+(Kt=er+rt)*Kt));return[n(ir=wr-Ar,Kt=(wr+Ar)*yt),(nr<0?-1:1)*S(E(Kt*Kt+ir*ir)*gt)]},Lt}function yo(je,We){return $o(ls,je,We)}function ho(je,We){if(x(We)<a)return[je,0];var rt=x(We/u),ut=P(rt);if(x(je)<a||x(x(We)-u)<a)return[0,o(We)*y*c(ut/2)];var yt=i(ut),gt=x(y/je-je/y)/2,Lt=gt*gt,er=yt/(rt+yt-1),nr=er*(2/rt-1),Kt=nr*nr,ir=Kt+Lt,vr=er-Kt,wr=Lt+er;return[o(je)*y*(gt*vr+E(Lt*vr*vr-ir*(er*er-Kt)))/ir,o(We)*y*(nr*wr-gt*E((Lt+1)*ir-wr*wr))/ir]}function Lo(je,We){if(x(We)<a)return[je,0];var rt=x(We/u),ut=P(rt);if(x(je)<a||x(x(We)-u)<a)return[0,o(We)*y*c(ut/2)];var yt=i(ut),gt=x(y/je-je/y)/2,Lt=gt*gt,er=yt*(E(1+Lt)-gt*yt)/(1+Lt*rt*rt);return[o(je)*y*er,o(We)*y*E(1-er*(2*gt+er))]}function Mo(je,We){if(x(We)<a)return[je,0];var rt=We/u,ut=P(rt);if(x(je)<a||x(x(We)-u)<a)return[0,y*c(ut/2)];var yt=(y/je-je/y)/2,gt=rt/(1+i(ut));return[y*(o(je)*E(yt*yt+1-gt*gt)-yt),y*gt]}function Po(je,We){if(!We)return[je,0];var rt=x(We);if(!je||rt===u)return[0,We];var ut=rt/u,yt=ut*ut,gt=(8*ut-yt*(yt+2)-5)/(2*yt*(ut-1)),Lt=gt*gt,er=ut*gt,nr=yt+Lt+2*er,Kt=ut+3*gt,ir=je/u,vr=ir+1/ir,wr=o(x(je)-u)*E(vr*vr-4),Ar=wr*wr,Nr=(wr*(nr+Lt-1)+2*E(nr*(yt+Lt*Ar-1)+(1-yt)*(yt*(Kt*Kt+4*Lt)+12*er*Lt+4*Lt*Lt)))/(4*nr+Ar);return[o(je)*u*Nr,o(We)*u*E(1+wr*x(Nr)-Nr*Nr)]}function Ro(je,We,rt,ut){var yt=y/3;je=f(je,a),We=f(We,a),je=t(je,u),We=t(We,y-a),rt=f(rt,0),rt=t(rt,100-a);var gt=(ut=f(ut,a))/100,Lt=S((rt/100+1)*i(yt))/yt,er=p(je)/p(Lt*u),nr=We/y,Kt=E(gt*p(je/2)/p(We/2));return function(ir,vr,wr,Ar,Nr){function un(gn,Rn){var jn=wr*p(Ar*Rn),Zn=E(1-jn*jn),Vn=E(2/(1+Zn*i(gn*=Nr)));return[ir*Zn*Vn*p(gn),vr*jn*Vn]}return un.invert=function(gn,Rn){var jn=gn/ir,Zn=Rn/vr,Vn=E(jn*jn+Zn*Zn),bi=2*P(Vn/2);return[n(gn*c(bi),ir*Vn)/Nr,Vn&&P(Rn*p(bi)/(vr*wr*Vn))/Ar]},un}(Kt/E(nr*er*Lt),1/(Kt*E(nr*er*Lt)),er,Lt,nr)}function po(){var je=65*I,We=60*I,rt=20,ut=200,yt=g.geoProjectionMutator(Ro),gt=yt(je,We,rt,ut);return gt.poleline=function(Lt){return arguments.length?yt(je=+Lt*I,We,rt,ut):je*M},gt.parallels=function(Lt){return arguments.length?yt(je,We=+Lt*I,rt,ut):We*M},gt.inflation=function(Lt){return arguments.length?yt(je,We,rt=+Lt,ut):rt},gt.ratio=function(Lt){return arguments.length?yt(je,We,rt,ut=+Lt):ut},gt.scale(163.775)}Uo.invert=function(je,We){var rt=We/1.70711,ut=p(_*rt);return[je/(.74482-.34588*ut*ut),2*e(rt)]},ho.invert=function(je,We){if(x(We)<a)return[je,0];if(x(je)<a)return[0,u*p(2*e(We/y))];var rt=(je/=y)*je,ut=(We/=y)*We,yt=rt+ut,gt=yt*yt,Lt=-x(We)*(1+yt),er=Lt-2*ut+rt,nr=-2*Lt+1+2*ut+gt,Kt=ut/nr+(2*er*er*er/(nr*nr*nr)-9*Lt*er/(nr*nr))/27,ir=(Lt-er*er/(3*nr))/nr,vr=2*E(-ir/3),wr=S(3*Kt/(ir*vr))/3;return[y*(yt-1+E(1+2*(rt-ut)+gt))/(2*je),o(We)*y*(-vr*i(wr+y/3)-er/(3*nr))]},Lo.invert=function(je,We){if(!je)return[0,u*p(2*e(We/y))];var rt=x(je/y),ut=(1-rt*rt-(We/=y)*We)/(2*rt),yt=E(ut*ut+1);return[o(je)*y*(yt-ut),o(We)*u*p(2*n(E((1-2*ut*rt)*(ut+yt)-rt),E(yt+ut+rt)))]},Mo.invert=function(je,We){if(!We)return[je,0];var rt=We/y,ut=(y*y*(1-rt*rt)-je*je)/(2*y*je);return[je?y*(o(je)*E(ut*ut+1)-ut):0,u*p(2*e(rt))]},Po.invert=function(je,We){var rt;if(!je||!We)return[je,We];We/=y;var ut=o(je)*je/u,yt=(ut*ut-1+4*We*We)/x(ut),gt=yt*yt,Lt=2*We,er=50;do{var nr=Lt*Lt,Kt=(8*Lt-nr*(nr+2)-5)/(2*nr*(Lt-1)),ir=(3*Lt-nr*Lt-10)/(2*nr*Lt),vr=Kt*Kt,wr=Lt*Kt,Ar=Lt+Kt,Nr=Ar*Ar,un=Lt+3*Kt,gn=-2*Ar*(4*wr*vr+(1-4*nr+3*nr*nr)*(1+ir)+vr*(14*nr-6-gt+(8*nr-8-2*gt)*ir)+wr*(12*nr-8+(10*nr-10-gt)*ir)),Rn=E(Nr*(nr+vr*gt-1)+(1-nr)*(nr*(un*un+4*vr)+vr*(12*wr+4*vr)));Lt-=rt=(yt*(Nr+vr-1)+2*Rn-ut*(4*Nr+gt))/(yt*(2*Kt*ir+2*Ar*(1+ir))+gn/Rn-8*Ar*(yt*(-1+vr+Nr)+2*Rn)*(1+ir)/(gt+4*Nr))}while(rt>a&&--er>0);return[o(je)*(E(yt*yt+4)+yt)*y/4,u*Lt]};var cs=4*y+3*E(3),io=2*E(2*y*E(3)/cs),So=te(io*E(3)/y,io,cs/6);function Qo(je,We){return[je*E(1-3*We*We/(y*y)),We]}function mo(je,We){var rt=i(We),ut=i(je)*rt,yt=1-ut,gt=i(je=n(p(je)*rt,-p(We))),Lt=p(je);return[Lt*(rt=E(1-ut*ut))-gt*yt,-gt*rt-Lt*yt]}function Zi(je,We){var rt=H(je,We);return[(rt[0]+je/u)/2,(rt[1]+We)/2]}Qo.invert=function(je,We){return[je/E(1-3*We*We/(y*y)),We]},mo.invert=function(je,We){var rt=(je*je+We*We)/-2,ut=E(-rt*(2+rt)),yt=We*rt+je*ut,gt=je*rt-We*ut,Lt=E(gt*gt+yt*yt);return[n(ut*yt,Lt*(1+rt)),Lt?-P(ut*gt/Lt):0]},Zi.invert=function(je,We){var rt=je,ut=We,yt=25;do{var gt,Lt=i(ut),er=p(ut),nr=p(2*ut),Kt=er*er,ir=Lt*Lt,vr=p(rt),wr=i(rt/2),Ar=p(rt/2),Nr=Ar*Ar,un=1-ir*wr*wr,gn=un?S(Lt*wr)*E(gt=1/un):gt=0,Rn=.5*(2*gn*Lt*Ar+rt/u)-je,jn=.5*(gn*er+ut)-We,Zn=.5*gt*(ir*Nr+gn*Lt*wr*Kt)+.5/u,Vn=gt*(vr*nr/4-gn*er*Ar),bi=.125*gt*(nr*Ar-gn*er*ir*vr),Li=.5*gt*(Kt*wr+gn*Nr*Lt)+.5,Gi=Vn*bi-Li*Zn,ji=(jn*Vn-Rn*Li)/Gi,Yi=(Rn*bi-jn*Zn)/Gi;rt-=ji,ut-=Yi}while((x(ji)>a||x(Yi)>a)&&--yt>0);return[rt,ut]},m.geoNaturalEarth=g.geoNaturalEarth1,m.geoNaturalEarthRaw=g.geoNaturalEarth1Raw,m.geoAiry=function(){var je=u,We=g.geoProjectionMutator(j),rt=We(je);return rt.radius=function(ut){return arguments.length?We(je=ut*I):je*M},rt.scale(179.976).clipAngle(147)},m.geoAiryRaw=j,m.geoAitoff=function(){return g.geoProjection(H).scale(152.63)},m.geoAitoffRaw=H,m.geoArmadillo=function(){var je=20*I,We=je>=0?1:-1,rt=c(We*je),ut=g.geoProjectionMutator(Y),yt=ut(je),gt=yt.stream;return yt.parallel=function(Lt){return arguments.length?(rt=c((We=(je=Lt*I)>=0?1:-1)*je),ut(je)):je*M},yt.stream=function(Lt){var er=yt.rotate(),nr=gt(Lt),Kt=(yt.rotate([0,0]),gt(Lt)),ir=yt.precision();return yt.rotate(er),nr.sphere=function(){Kt.polygonStart(),Kt.lineStart();for(var vr=-180*We;We*vr<180;vr+=90*We)Kt.point(vr,90*We);if(je)for(;We*(vr-=3*We*ir)>=-180;)Kt.point(vr,We*-n(i(vr*I/2),rt)*M);Kt.lineEnd(),Kt.polygonEnd()},nr},yt.scale(218.695).center([0,28.0974])},m.geoArmadilloRaw=Y,m.geoAugust=function(){return g.geoProjection(X).scale(66.1603)},m.geoAugustRaw=X,m.geoBaker=function(){return g.geoProjection(re).scale(112.314)},m.geoBakerRaw=re,m.geoBerghaus=function(){var je=5,We=g.geoProjectionMutator(U),rt=We(je),ut=rt.stream,yt=-i(.01*I),gt=p(.01*I);return rt.lobes=function(Lt){return arguments.length?We(je=+Lt):je},rt.stream=function(Lt){var er=rt.rotate(),nr=ut(Lt),Kt=(rt.rotate([0,0]),ut(Lt));return rt.rotate(er),nr.sphere=function(){Kt.polygonStart(),Kt.lineStart();for(var ir=0,vr=360/je,wr=2*y/je,Ar=90-180/je,Nr=u;ir<je;++ir,Ar-=vr,Nr-=wr)Kt.point(n(gt*i(Nr),yt)*M,P(gt*p(Nr))*M),Ar<-90?(Kt.point(-90,-180-Ar-.01),Kt.point(-90,-180-Ar+.01)):(Kt.point(90,Ar+.01),Kt.point(90,Ar-.01));Kt.lineEnd(),Kt.polygonEnd()},nr},rt.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},m.geoBerghausRaw=U,m.geoBertin1953=function(){return g.geoProjection(K()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},m.geoBertin1953Raw=K,m.geoBoggs=function(){return g.geoProjection(ve).scale(160.857)},m.geoBoggsRaw=ve,m.geoBonne=function(){return ue(Me).scale(123.082).center([0,26.1441]).parallel(45)},m.geoBonneRaw=Me,m.geoBottomley=function(){var je=.5,We=g.geoProjectionMutator(pe),rt=We(je);return rt.fraction=function(ut){return arguments.length?We(je=+ut):je},rt.scale(158.837)},m.geoBottomleyRaw=pe,m.geoBromley=function(){return g.geoProjection(ge).scale(152.63)},m.geoBromleyRaw=ge,m.geoChamberlin=Ae,m.geoChamberlinRaw=Te,m.geoChamberlinAfrica=function(){return Ae([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},m.geoCollignon=function(){return g.geoProjection(De).scale(95.6464).center([0,30])},m.geoCollignonRaw=De,m.geoCraig=function(){return ue(Ie).scale(249.828).clipAngle(90)},m.geoCraigRaw=Ie,m.geoCraster=function(){return g.geoProjection(Xe).scale(156.19)},m.geoCrasterRaw=Xe,m.geoCylindricalEqualArea=function(){return ue(Fe).parallel(38.58).scale(195.044)},m.geoCylindricalEqualAreaRaw=Fe,m.geoCylindricalStereographic=function(){return ue(Pe).scale(124.75)},m.geoCylindricalStereographicRaw=Pe,m.geoEckert1=function(){return g.geoProjection(Re).scale(165.664)},m.geoEckert1Raw=Re,m.geoEckert2=function(){return g.geoProjection(qe).scale(165.664)},m.geoEckert2Raw=qe,m.geoEckert3=function(){return g.geoProjection(Qe).scale(180.739)},m.geoEckert3Raw=Qe,m.geoEckert4=function(){return g.geoProjection(ct).scale(180.739)},m.geoEckert4Raw=ct,m.geoEckert5=function(){return g.geoProjection(bt).scale(173.044)},m.geoEckert5Raw=bt,m.geoEckert6=function(){return g.geoProjection(Tt).scale(173.044)},m.geoEckert6Raw=Tt,m.geoEisenlohr=function(){return g.geoProjection(nt).scale(62.5271)},m.geoEisenlohrRaw=nt,m.geoFahey=function(){return g.geoProjection(xt).scale(137.152)},m.geoFaheyRaw=xt,m.geoFoucaut=function(){return g.geoProjection(Ht).scale(135.264)},m.geoFoucautRaw=Ht,m.geoFoucautSinusoidal=function(){var je=.5,We=g.geoProjectionMutator(Zt),rt=We(je);return rt.alpha=function(ut){return arguments.length?We(je=+ut):je},rt.scale(168.725)},m.geoFoucautSinusoidalRaw=Zt,m.geoGilbert=function(je){null==je&&(je=g.geoOrthographic);var We=je(),rt=g.geoEquirectangular().scale(M).precision(0).clipAngle(null).translate([0,0]);function ut(gt){return We($t(gt))}function yt(gt){ut[gt]=function(){return arguments.length?(We[gt].apply(We,arguments),ut):We[gt]()}}return We.invert&&(ut.invert=function(gt){return Xt(We.invert(gt))}),ut.stream=function(gt){var Lt=We.stream(gt),er=rt.stream({point:function(nr,Kt){Lt.point(nr/2,P(c(-Kt/2*I))*M)},lineStart:function(){Lt.lineStart()},lineEnd:function(){Lt.lineEnd()},polygonStart:function(){Lt.polygonStart()},polygonEnd:function(){Lt.polygonEnd()}});return er.sphere=Lt.sphere,er},ut.rotate=function(gt){return arguments.length?(rt.rotate(gt),ut):rt.rotate()},ut.center=function(gt){return arguments.length?(We.center($t(gt)),ut):Xt(We.center())},yt("angle"),yt("clipAngle"),yt("clipExtent"),yt("fitExtent"),yt("fitHeight"),yt("fitSize"),yt("fitWidth"),yt("scale"),yt("translate"),yt("precision"),ut.scale(249.5)},m.geoGingery=function(){var je=6,We=30*I,rt=i(We),ut=p(We),yt=g.geoProjectionMutator(cr),gt=yt(We,je),Lt=gt.stream,er=-i(.01*I),nr=p(.01*I);return gt.radius=function(Kt){return arguments.length?(rt=i(We=Kt*I),ut=p(We),yt(We,je)):We*M},gt.lobes=function(Kt){return arguments.length?yt(We,je=+Kt):je},gt.stream=function(Kt){var ir=gt.rotate(),vr=Lt(Kt),wr=(gt.rotate([0,0]),Lt(Kt));return gt.rotate(ir),vr.sphere=function(){wr.polygonStart(),wr.lineStart();for(var Ar=0,Nr=2*y/je,un=0;Ar<je;++Ar,un-=Nr)wr.point(n(nr*i(un),er)*M,P(nr*p(un))*M),wr.point(n(ut*i(un-Nr/2),rt)*M,P(ut*p(un-Nr/2))*M);wr.lineEnd(),wr.polygonEnd()},vr},gt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},m.geoGingeryRaw=cr,m.geoGinzburg4=function(){return g.geoProjection(he).scale(149.995)},m.geoGinzburg4Raw=he,m.geoGinzburg5=function(){return g.geoProjection(be).scale(153.93)},m.geoGinzburg5Raw=be,m.geoGinzburg6=function(){return g.geoProjection(ze).scale(130.945)},m.geoGinzburg6Raw=ze,m.geoGinzburg8=function(){return g.geoProjection(Ve).scale(131.747)},m.geoGinzburg8Raw=Ve,m.geoGinzburg9=function(){return g.geoProjection(Je).scale(131.087)},m.geoGinzburg9Raw=Je,m.geoGringorten=function(){return g.geoProjection(Ye(lt)).scale(239.75)},m.geoGringortenRaw=lt,m.geoGuyou=function(){return g.geoProjection(Ye(Dt)).scale(151.496)},m.geoGuyouRaw=Dt,m.geoHammer=function(){var je=2,We=g.geoProjectionMutator(B),rt=We(je);return rt.coefficient=function(ut){return arguments.length?We(je=+ut):je},rt.scale(169.529)},m.geoHammerRaw=B,m.geoHammerRetroazimuthal=function(){var je=0,We=g.geoProjectionMutator(ht),rt=We(je),ut=rt.rotate,yt=rt.stream,gt=g.geoCircle();return rt.parallel=function(Lt){if(!arguments.length)return je*M;var er=rt.rotate();return We(je=Lt*I).rotate(er)},rt.rotate=function(Lt){return arguments.length?(ut.call(rt,[Lt[0],Lt[1]-je*M]),gt.center([-Lt[0],-Lt[1]]),rt):((Lt=ut.call(rt))[1]+=je*M,Lt)},rt.stream=function(Lt){return(Lt=yt(Lt)).sphere=function(){Lt.polygonStart();var er,nr=gt.radius(89.99)().coordinates[0],Kt=nr.length-1,ir=-1;for(Lt.lineStart();++ir<Kt;)Lt.point((er=nr[ir])[0],er[1]);for(Lt.lineEnd(),Kt=(nr=gt.radius(90.01)().coordinates[0]).length-1,Lt.lineStart();--ir>=0;)Lt.point((er=nr[ir])[0],er[1]);Lt.lineEnd(),Lt.polygonEnd()},Lt},rt.scale(79.4187).parallel(45).clipAngle(179.999)},m.geoHammerRetroazimuthalRaw=ht,m.geoHealpix=function(){var je=4,We=g.geoProjectionMutator(It),rt=We(je),ut=rt.stream;return rt.lobes=function(yt){return arguments.length?We(je=+yt):je},rt.stream=function(yt){var gt=rt.rotate(),Lt=ut(yt),er=(rt.rotate([0,0]),ut(yt));return rt.rotate(gt),Lt.sphere=function(){var nr,Kt;g.geoStream((Kt=[].concat(k.range(-180,180+(nr=180/je)/2,nr).map(Se),k.range(180,-180-nr/2,-nr).map(Ze)),{type:"Polygon",coordinates:[180===nr?Kt.map(it):Kt]}),er)},Lt},rt.scale(239.75)},m.geoHealpixRaw=It,m.geoHill=function(){var je=1,We=g.geoProjectionMutator(dt),rt=We(je);return rt.ratio=function(ut){return arguments.length?We(je=+ut):je},rt.scale(167.774).center([0,18.67])},m.geoHillRaw=dt,m.geoHomolosine=function(){return g.geoProjection(Ut).scale(152.63)},m.geoHomolosineRaw=Ut,m.geoHufnagel=function(){var je=1,We=0,rt=45*I,ut=2,yt=g.geoProjectionMutator(Jt),gt=yt(je,We,rt,ut);return gt.a=function(Lt){return arguments.length?yt(je=+Lt,We,rt,ut):je},gt.b=function(Lt){return arguments.length?yt(je,We=+Lt,rt,ut):We},gt.psiMax=function(Lt){return arguments.length?yt(je,We,rt=+Lt*I,ut):rt*M},gt.ratio=function(Lt){return arguments.length?yt(je,We,rt,ut=+Lt):ut},gt.scale(180.739)},m.geoHufnagelRaw=Jt,m.geoHyperelliptical=function(){var je=0,We=2.5,rt=1.183136,ut=g.geoProjectionMutator(pr),yt=ut(je,We,rt);return yt.alpha=function(gt){return arguments.length?ut(je=+gt,We,rt):je},yt.k=function(gt){return arguments.length?ut(je,We=+gt,rt):We},yt.gamma=function(gt){return arguments.length?ut(je,We,rt=+gt):rt},yt.scale(152.63)},m.geoHyperellipticalRaw=pr,m.geoInterrupt=rr,m.geoInterruptedBoggs=function(){return rr(ve,ar).scale(160.857)},m.geoInterruptedHomolosine=function(){return rr(Ut,dr).scale(152.63)},m.geoInterruptedMollweide=function(){return rr(ae,xr).scale(169.529)},m.geoInterruptedMollweideHemispheres=function(){return rr(ae,Lr).scale(169.529).rotate([20,0])},m.geoInterruptedSinuMollweide=function(){return rr(Ct,zr,N).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},m.geoInterruptedSinusoidal=function(){return rr(ye,Hr).scale(152.63).rotate([-20,0])},m.geoKavrayskiy7=function(){return g.geoProjection(Xr).scale(158.837)},m.geoKavrayskiy7Raw=Xr,m.geoLagrange=function(){var je=.5,We=g.geoProjectionMutator(cn),rt=We(je);return rt.spacing=function(ut){return arguments.length?We(je=+ut):je},rt.scale(124.75)},m.geoLagrangeRaw=cn,m.geoLarrivee=function(){return g.geoProjection(Nn).scale(97.2672)},m.geoLarriveeRaw=Nn,m.geoLaskowski=function(){return g.geoProjection(on).scale(139.98)},m.geoLaskowskiRaw=on,m.geoLittrow=function(){return g.geoProjection(wn).scale(144.049).clipAngle(89.999)},m.geoLittrowRaw=wn,m.geoLoximuthal=function(){return ue(An).parallel(40).scale(158.837)},m.geoLoximuthalRaw=An,m.geoMiller=function(){return g.geoProjection(ii).scale(108.318)},m.geoMillerRaw=ii,m.geoModifiedStereographic=Mn,m.geoModifiedStereographicRaw=Vr,m.geoModifiedStereographicAlaska=function(){return Mn(sn,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},m.geoModifiedStereographicGs48=function(){return Mn(xn,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},m.geoModifiedStereographicGs50=function(){return Mn(nn,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},m.geoModifiedStereographicMiller=function(){return Mn(fn,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},m.geoModifiedStereographicLee=function(){return Mn(Xn,[165,10]).scale(250).clipAngle(130).center([-165,-10])},m.geoMollweide=function(){return g.geoProjection(ae).scale(169.529)},m.geoMollweideRaw=ae,m.geoMtFlatPolarParabolic=function(){return g.geoProjection(or).scale(164.859)},m.geoMtFlatPolarParabolicRaw=or,m.geoMtFlatPolarQuartic=function(){return g.geoProjection(br).scale(188.209)},m.geoMtFlatPolarQuarticRaw=br,m.geoMtFlatPolarSinusoidal=function(){return g.geoProjection(Rt).scale(166.518)},m.geoMtFlatPolarSinusoidalRaw=Rt,m.geoNaturalEarth2=function(){return g.geoProjection(fr).scale(175.295)},m.geoNaturalEarth2Raw=fr,m.geoNellHammer=function(){return g.geoProjection(gr).scale(152.63)},m.geoNellHammerRaw=gr,m.geoInterruptedQuarticAuthalic=function(){return rr(B(1/0),jr).rotate([20,0]).scale(152.63)},m.geoNicolosi=function(){return g.geoProjection(Br).scale(127.267)},m.geoNicolosiRaw=Br,m.geoPatterson=function(){return g.geoProjection(Fr).scale(139.319)},m.geoPattersonRaw=Fr,m.geoPolyconic=function(){return g.geoProjection(Er).scale(103.74)},m.geoPolyconicRaw=Er,m.geoPolyhedral=Wr,m.geoPolyhedralButterfly=function(je){je=je||function(rt){var ut=g.geoCentroid({type:"MultiPoint",coordinates:rt});return g.geoGnomonic().scale(1).translate([0,0]).rotate([-ut[0],-ut[1]])};var We=bn.map(function(rt){return{face:rt,project:je(rt)}});return[-1,0,0,1,0,1,4,5].forEach(function(rt,ut){var yt=We[rt];yt&&(yt.children||(yt.children=[])).push(We[ut])}),Wr(We[0],function(rt,ut){return We[rt<-y/2?ut<0?6:4:rt<0?ut<0?2:0:rt<y/2?ut<0?3:1:ut<0?7:5]}).angle(-30).scale(101.858).center([0,45])},m.geoPolyhedralCollignon=function(je){je=je||function(rt){var ut=g.geoCentroid({type:"MultiPoint",coordinates:rt});return g.geoProjection(En).translate([0,0]).scale(1).rotate(ut[1]>0?[-ut[0],0]:[180-ut[0],180])};var We=bn.map(function(rt){return{face:rt,project:je(rt)}});return[-1,0,0,1,0,1,4,5].forEach(function(rt,ut){var yt=We[rt];yt&&(yt.children||(yt.children=[])).push(We[ut])}),Wr(We[0],function(rt,ut){return We[rt<-y/2?ut<0?6:4:rt<0?ut<0?2:0:rt<y/2?ut<0?3:1:ut<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},m.geoPolyhedralWaterman=function(je){je=je||function(gt){var Lt=6===gt.length?g.geoCentroid({type:"MultiPoint",coordinates:gt}):gt[0];return g.geoGnomonic().scale(1).translate([0,0]).rotate([-Lt[0],-Lt[1]])};var We=bn.map(function(gt){for(var Lt,er=gt.map(Kn),nr=er.length,Kt=er[nr-1],ir=[],vr=0;vr<nr;++vr)ir.push(Bn([.9486832980505138*Kt[0]+.31622776601683794*(Lt=er[vr])[0],.9486832980505138*Kt[1]+.31622776601683794*Lt[1],.9486832980505138*Kt[2]+.31622776601683794*Lt[2]]),Bn([.9486832980505138*Lt[0]+.31622776601683794*Kt[0],.9486832980505138*Lt[1]+.31622776601683794*Kt[1],.9486832980505138*Lt[2]+.31622776601683794*Kt[2]])),Kt=Lt;return ir}),rt=[],ut=[-1,0,0,1,0,1,4,5];We.forEach(function(gt,Lt){for(var er,nr,Kt=bn[Lt],ir=Kt.length,vr=rt[Lt]=[],wr=0;wr<ir;++wr)We.push([Kt[wr],gt[(2*wr+2)%(2*ir)],gt[(2*wr+1)%(2*ir)]]),ut.push(Lt),vr.push((er=Kn(gt[(2*wr+2)%(2*ir)]),nr=Kn(gt[(2*wr+1)%(2*ir)]),[er[1]*nr[2]-er[2]*nr[1],er[2]*nr[0]-er[0]*nr[2],er[0]*nr[1]-er[1]*nr[0]]))});var yt=We.map(function(gt){return{project:je(gt),face:gt}});return ut.forEach(function(gt,Lt){var er=yt[gt];er&&(er.children||(er.children=[])).push(yt[Lt])}),Wr(yt[0],function(gt,Lt){var er=i(Lt),nr=[er*i(gt),er*p(gt),p(Lt)],Kt=gt<-y/2?Lt<0?6:4:gt<0?Lt<0?2:0:gt<y/2?Lt<0?3:1:Lt<0?7:5,ir=rt[Kt];return yt[Dn(ir[0],nr)<0?8+3*Kt:Dn(ir[1],nr)<0?8+3*Kt+1:Dn(ir[2],nr)<0?8+3*Kt+2:Kt]}).angle(-30).scale(110.625).center([0,45])},m.geoProject=function(je,We){var rt,ut=We.stream;if(!ut)throw new Error("invalid projection");switch(je&&je.type){case"Feature":rt=Pn;break;case"FeatureCollection":rt=Ti;break;default:rt=ei}return rt(je,ut)},m.geoGringortenQuincuncial=function(){return Ji(lt).scale(176.423)},m.geoPeirceQuincuncial=qi,m.geoPierceQuincuncial=qi,m.geoQuantize=function(je,We){if(!(0<=(We=+We)&&We<=20))throw new Error("invalid digits");function rt(Kt){var ir=Kt.length,vr=2,wr=new Array(ir);for(wr[0]=+Kt[0].toFixed(We),wr[1]=+Kt[1].toFixed(We);vr<ir;)wr[vr]=Kt[vr],++vr;return wr}function ut(Kt){return Kt.map(rt)}function yt(Kt){for(var ir=rt(Kt[0]),vr=[ir],wr=1;wr<Kt.length;wr++){var Ar=rt(Kt[wr]);(Ar.length>2||Ar[0]!=ir[0]||Ar[1]!=ir[1])&&(vr.push(Ar),ir=Ar)}return 1===vr.length&&Kt.length>1&&vr.push(rt(Kt[Kt.length-1])),vr}function gt(Kt){return Kt.map(yt)}function Lt(Kt){if(null==Kt)return Kt;var ir;switch(Kt.type){case"GeometryCollection":ir={type:"GeometryCollection",geometries:Kt.geometries.map(Lt)};break;case"Point":ir={type:"Point",coordinates:rt(Kt.coordinates)};break;case"MultiPoint":ir={type:Kt.type,coordinates:ut(Kt.coordinates)};break;case"LineString":ir={type:Kt.type,coordinates:yt(Kt.coordinates)};break;case"MultiLineString":case"Polygon":ir={type:Kt.type,coordinates:gt(Kt.coordinates)};break;case"MultiPolygon":ir={type:"MultiPolygon",coordinates:Kt.coordinates.map(gt)};break;default:return Kt}return null!=Kt.bbox&&(ir.bbox=Kt.bbox),ir}function er(Kt){var ir={type:"Feature",properties:Kt.properties,geometry:Lt(Kt.geometry)};return null!=Kt.id&&(ir.id=Kt.id),null!=Kt.bbox&&(ir.bbox=Kt.bbox),ir}if(null!=je)switch(je.type){case"Feature":return er(je);case"FeatureCollection":var nr={type:"FeatureCollection",features:je.features.map(er)};return null!=je.bbox&&(nr.bbox=je.bbox),nr;default:return Lt(je)}return je},m.geoQuincuncial=Ji,m.geoRectangularPolyconic=function(){return ue(Ha).scale(131.215)},m.geoRectangularPolyconicRaw=Ha,m.geoRobinson=function(){return g.geoProjection(Ja).scale(152.63)},m.geoRobinsonRaw=Ja,m.geoSatellite=function(){var je=2,We=0,rt=g.geoProjectionMutator(ro),ut=rt(je,We);return ut.distance=function(yt){return arguments.length?rt(je=+yt,We):je},ut.tilt=function(yt){return arguments.length?rt(je,We=yt*I):We*M},ut.scale(432.147).clipAngle(S(1/je)*M-1e-6)},m.geoSatelliteRaw=ro,m.geoSinuMollweide=function(){return g.geoProjection(Ct).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},m.geoSinuMollweideRaw=Ct,m.geoSinusoidal=function(){return g.geoProjection(ye).scale(152.63)},m.geoSinusoidalRaw=ye,m.geoStitch=function(je){if(null==je)return je;switch(je.type){case"Feature":return Wi(je);case"FeatureCollection":var We={type:"FeatureCollection",features:je.features.map(Wi)};return null!=je.bbox&&(We.bbox=je.bbox),We;default:return Ko(je)}},m.geoTimes=function(){return g.geoProjection(Uo).scale(146.153)},m.geoTimesRaw=Uo,m.geoTwoPointAzimuthal=ss,m.geoTwoPointAzimuthalRaw=os,m.geoTwoPointAzimuthalUsa=function(){return ss([-158,21.5],[-77,39]).clipAngle(60).scale(400)},m.geoTwoPointEquidistant=yo,m.geoTwoPointEquidistantRaw=ls,m.geoTwoPointEquidistantUsa=function(){return yo([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},m.geoVanDerGrinten=function(){return g.geoProjection(ho).scale(79.4183)},m.geoVanDerGrintenRaw=ho,m.geoVanDerGrinten2=function(){return g.geoProjection(Lo).scale(79.4183)},m.geoVanDerGrinten2Raw=Lo,m.geoVanDerGrinten3=function(){return g.geoProjection(Mo).scale(79.4183)},m.geoVanDerGrinten3Raw=Mo,m.geoVanDerGrinten4=function(){return g.geoProjection(Po).scale(127.16)},m.geoVanDerGrinten4Raw=Po,m.geoWagner=po,m.geoWagner7=function(){return po().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},m.geoWagnerRaw=Ro,m.geoWagner4=function(){return g.geoProjection(So).scale(176.84)},m.geoWagner4Raw=So,m.geoWagner6=function(){return g.geoProjection(Qo).scale(152.63)},m.geoWagner6Raw=Qo,m.geoWiechel=function(){return g.geoProjection(mo).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},m.geoWiechelRaw=mo,m.geoWinkel3=function(){return g.geoProjection(Zi).scale(158.837)},m.geoWinkel3Raw=Zi,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof Q&&void 0!==$?g(Q,v("d3-geo"),v("d3-array")):g(m.d3=m.d3||{},m.d3,m.d3)},{"d3-array":107,"d3-geo":114}],114:[function(v,$,Q){var m,g;m=this,g=function(m,g){"use strict";function k(){return new x}function x(){this.reset()}x.prototype={constructor:x,reset:function(){this.s=this.t=0},add:function(ft){n(e,ft,this.t),n(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new x;function n(ft,zt,sr){var Yt=ft.s=zt+sr,hr=Yt-zt;ft.t=zt-(Yt-hr)+(sr-hr)}var i=1e-6,l=Math.PI,r=l/2,d=l/4,f=2*l,t=180/l,h=l/180,s=Math.abs,o=Math.atan,p=Math.atan2,c=Math.cos,a=Math.ceil,y=Math.exp,u=Math.log,_=Math.pow,b=Math.sin,w=Math.sign||function(ft){return ft>0?1:ft<0?-1:0},T=Math.sqrt,C=Math.tan;function M(ft){return ft>1?0:ft<-1?l:Math.acos(ft)}function I(ft){return ft>1?r:ft<-1?-r:Math.asin(ft)}function P(ft){return(ft=b(ft/2))*ft}function S(){}function E(ft,zt){ft&&D.hasOwnProperty(ft.type)&&D[ft.type](ft,zt)}var R={Feature:function(ft,zt){E(ft.geometry,zt)},FeatureCollection:function(ft,zt){for(var sr=ft.features,Yt=-1,hr=sr.length;++Yt<hr;)E(sr[Yt].geometry,zt)}},D={Sphere:function(ft,zt){zt.sphere()},Point:function(ft,zt){zt.point((ft=ft.coordinates)[0],ft[1],ft[2])},MultiPoint:function(ft,zt){for(var sr=ft.coordinates,Yt=-1,hr=sr.length;++Yt<hr;)zt.point((ft=sr[Yt])[0],ft[1],ft[2])},LineString:function(ft,zt){j(ft.coordinates,zt,0)},MultiLineString:function(ft,zt){for(var sr=ft.coordinates,Yt=-1,hr=sr.length;++Yt<hr;)j(sr[Yt],zt,0)},Polygon:function(ft,zt){H(ft.coordinates,zt)},MultiPolygon:function(ft,zt){for(var sr=ft.coordinates,Yt=-1,hr=sr.length;++Yt<hr;)H(sr[Yt],zt)},GeometryCollection:function(ft,zt){for(var sr=ft.geometries,Yt=-1,hr=sr.length;++Yt<hr;)E(sr[Yt],zt)}};function j(ft,zt,sr){var Yt,hr=-1,Ir=ft.length-sr;for(zt.lineStart();++hr<Ir;)zt.point((Yt=ft[hr])[0],Yt[1],Yt[2]);zt.lineEnd()}function H(ft,zt){var sr=-1,Yt=ft.length;for(zt.polygonStart();++sr<Yt;)j(ft[sr],zt,1);zt.polygonEnd()}function Y(ft,zt){ft&&R.hasOwnProperty(ft.type)?R[ft.type](ft,zt):E(ft,zt)}var X,Z,W,re,U,B=k(),V=k(),ee={point:S,lineStart:S,lineEnd:S,polygonStart:function(){B.reset(),ee.lineStart=N,ee.lineEnd=K},polygonEnd:function(){var ft=+B;V.add(ft<0?f+ft:ft),this.lineStart=this.lineEnd=this.point=S},sphere:function(){V.add(f)}};function N(){ee.point=J}function K(){te(X,Z)}function J(ft,zt){ee.point=te,X=ft,Z=zt,W=ft*=h,re=c(zt=(zt*=h)/2+d),U=b(zt)}function te(ft,zt){var sr=(ft*=h)-W,Yt=sr>=0?1:-1,hr=Yt*sr,Ir=c(zt=(zt*=h)/2+d),Gr=b(zt),$r=U*Gr,dn=re*Ir+$r*c(hr),hn=$r*Yt*b(hr);B.add(p(hn,dn)),W=ft,re=Ir,U=Gr}function ae(ft){return[p(ft[1],ft[0]),I(ft[2])]}function le(ft){var zt=ft[0],sr=ft[1],Yt=c(sr);return[Yt*c(zt),Yt*b(zt),b(sr)]}function se(ft,zt){return ft[0]*zt[0]+ft[1]*zt[1]+ft[2]*zt[2]}function ve(ft,zt){return[ft[1]*zt[2]-ft[2]*zt[1],ft[2]*zt[0]-ft[0]*zt[2],ft[0]*zt[1]-ft[1]*zt[0]]}function ue(ft,zt){ft[0]+=zt[0],ft[1]+=zt[1],ft[2]+=zt[2]}function ye(ft,zt){return[ft[0]*zt,ft[1]*zt,ft[2]*zt]}function Me(ft){var zt=T(ft[0]*ft[0]+ft[1]*ft[1]+ft[2]*ft[2]);ft[0]/=zt,ft[1]/=zt,ft[2]/=zt}var pe,ge,we,oe,de,Te,Ee,Ae,De,Ie,Oe,Xe,Fe,Pe,Re,qe,Qe,ct,bt,Tt,_t,nt,Ke,xt,Ht,Zt,$t=k(),Xt={point:cr,lineStart:Be,lineEnd:He,polygonStart:function(){Xt.point=he,Xt.lineStart=be,Xt.lineEnd=ze,$t.reset(),ee.polygonStart()},polygonEnd:function(){ee.polygonEnd(),Xt.point=cr,Xt.lineStart=Be,Xt.lineEnd=He,B<0?(pe=-(we=180),ge=-(oe=90)):$t>i?oe=90:$t<-i&&(ge=-90),Ie[0]=pe,Ie[1]=we},sphere:function(){pe=-(we=180),ge=-(oe=90)}};function cr(ft,zt){De.push(Ie=[pe=ft,we=ft]),zt<ge&&(ge=zt),zt>oe&&(oe=zt)}function Ft(ft,zt){var sr=le([ft*h,zt*h]);if(Ae){var Yt=ve(Ae,sr),hr=ve([Yt[1],-Yt[0],0],Yt);Me(hr),hr=ae(hr);var Ir,Gr=ft-de,$r=Gr>0?1:-1,dn=hr[0]*t*$r,hn=s(Gr)>180;hn^($r*de<dn&&dn<$r*ft)?(Ir=hr[1]*t)>oe&&(oe=Ir):hn^($r*de<(dn=(dn+360)%360-180)&&dn<$r*ft)?(Ir=-hr[1]*t)<ge&&(ge=Ir):(zt<ge&&(ge=zt),zt>oe&&(oe=zt)),hn?ft<de?Ve(pe,ft)>Ve(pe,we)&&(we=ft):Ve(ft,we)>Ve(pe,we)&&(pe=ft):we>=pe?(ft<pe&&(pe=ft),ft>we&&(we=ft)):ft>de?Ve(pe,ft)>Ve(pe,we)&&(we=ft):Ve(ft,we)>Ve(pe,we)&&(pe=ft)}else De.push(Ie=[pe=ft,we=ft]);zt<ge&&(ge=zt),zt>oe&&(oe=zt),Ae=sr,de=ft}function Be(){Xt.point=Ft}function He(){Ie[0]=pe,Ie[1]=we,Xt.point=cr,Ae=null}function he(ft,zt){if(Ae){var sr=ft-de;$t.add(s(sr)>180?sr+(sr>0?360:-360):sr)}else Te=ft,Ee=zt;ee.point(ft,zt),Ft(ft,zt)}function be(){ee.lineStart()}function ze(){he(Te,Ee),ee.lineEnd(),s($t)>i&&(pe=-(we=180)),Ie[0]=pe,Ie[1]=we,Ae=null}function Ve(ft,zt){return(zt-=ft)<0?zt+360:zt}function Je(ft,zt){return ft[0]-zt[0]}function Ye(ft,zt){return ft[0]<=ft[1]?ft[0]<=zt&&zt<=ft[1]:zt<ft[0]||ft[1]<zt}var lt={sphere:S,point:st,lineStart:Dt,lineEnd:Ot,polygonStart:function(){lt.lineStart=At,lt.lineEnd=It},polygonEnd:function(){lt.lineStart=Dt,lt.lineEnd=Ot}};function st(ft,zt){ft*=h;var sr=c(zt*=h);Mt(sr*c(ft),sr*b(ft),b(zt))}function Mt(ft,zt,sr){++Oe,Fe+=(ft-Fe)/Oe,Pe+=(zt-Pe)/Oe,Re+=(sr-Re)/Oe}function Dt(){lt.point=ht}function ht(ft,zt){ft*=h;var sr=c(zt*=h);xt=sr*c(ft),Ht=sr*b(ft),Zt=b(zt),lt.point=mt,Mt(xt,Ht,Zt)}function mt(ft,zt){ft*=h;var sr=c(zt*=h),Yt=sr*c(ft),hr=sr*b(ft),Ir=b(zt),Gr=p(T((Gr=Ht*Ir-Zt*hr)*Gr+(Gr=Zt*Yt-xt*Ir)*Gr+(Gr=xt*hr-Ht*Yt)*Gr),xt*Yt+Ht*hr+Zt*Ir);Xe+=Gr,qe+=Gr*(xt+(xt=Yt)),Qe+=Gr*(Ht+(Ht=hr)),ct+=Gr*(Zt+(Zt=Ir)),Mt(xt,Ht,Zt)}function Ot(){lt.point=st}function At(){lt.point=Se}function It(){Ze(nt,Ke),lt.point=st}function Se(ft,zt){nt=ft,Ke=zt,ft*=h,zt*=h,lt.point=Ze;var sr=c(zt);xt=sr*c(ft),Ht=sr*b(ft),Zt=b(zt),Mt(xt,Ht,Zt)}function Ze(ft,zt){ft*=h;var sr=c(zt*=h),Yt=sr*c(ft),hr=sr*b(ft),Ir=b(zt),Gr=Ht*Ir-Zt*hr,$r=Zt*Yt-xt*Ir,dn=xt*hr-Ht*Yt,hn=T(Gr*Gr+$r*$r+dn*dn),_n=I(hn),Cn=hn&&-_n/hn;bt+=Cn*Gr,Tt+=Cn*$r,_t+=Cn*dn,Xe+=_n,qe+=_n*(xt+(xt=Yt)),Qe+=_n*(Ht+(Ht=hr)),ct+=_n*(Zt+(Zt=Ir)),Mt(xt,Ht,Zt)}function it(ft){return function(){return ft}}function dt(ft,zt){function sr(Yt,hr){return Yt=ft(Yt,hr),zt(Yt[0],Yt[1])}return ft.invert&&zt.invert&&(sr.invert=function(Yt,hr){return(Yt=zt.invert(Yt,hr))&&ft.invert(Yt[0],Yt[1])}),sr}function Ct(ft,zt){return[s(ft)>l?ft+Math.round(-ft/f)*f:ft,zt]}function Ut(ft,zt,sr){return(ft%=f)?zt||sr?dt(qt(ft),pr(zt,sr)):qt(ft):zt||sr?pr(zt,sr):Ct}function Jt(ft){return function(zt,sr){return[(zt+=ft)>l?zt-f:zt<-l?zt+f:zt,sr]}}function qt(ft){var zt=Jt(ft);return zt.invert=Jt(-ft),zt}function pr(ft,zt){var sr=c(ft),Yt=b(ft),hr=c(zt),Ir=b(zt);function Gr($r,dn){var hn=c(dn),_n=c($r)*hn,Cn=b($r)*hn,mn=b(dn),Ln=mn*sr+_n*Yt;return[p(Cn*hr-Ln*Ir,_n*sr-mn*Yt),I(Ln*hr+Cn*Ir)]}return Gr.invert=function($r,dn){var hn=c(dn),_n=c($r)*hn,Cn=b($r)*hn,mn=b(dn),Ln=mn*hr-Cn*Ir;return[p(Cn*hr+mn*Ir,_n*sr+Ln*Yt),I(Ln*sr-_n*Yt)]},Gr}function Sr(ft){function zt(sr){return(sr=ft(sr[0]*h,sr[1]*h))[0]*=t,sr[1]*=t,sr}return ft=Ut(ft[0]*h,ft[1]*h,ft.length>2?ft[2]*h:0),zt.invert=function(sr){return(sr=ft.invert(sr[0]*h,sr[1]*h))[0]*=t,sr[1]*=t,sr},zt}function mr(ft,zt,sr,Yt,hr,Ir){if(sr){var Gr=c(zt),$r=b(zt),dn=Yt*sr;null==hr?(hr=zt+Yt*f,Ir=zt-dn/2):(hr=tr(Gr,hr),Ir=tr(Gr,Ir),(Yt>0?hr<Ir:hr>Ir)&&(hr+=Yt*f));for(var hn,_n=hr;Yt>0?_n>Ir:_n<Ir;_n-=dn)hn=ae([Gr,-$r*c(_n),-$r*b(_n)]),ft.point(hn[0],hn[1])}}function tr(ft,zt){(zt=le(zt))[0]-=ft,Me(zt);var sr=M(-zt[1]);return((-zt[2]<0?-sr:sr)+f-i)%f}function rr(){var ft,zt=[];return{point:function(sr,Yt,hr){ft.push([sr,Yt,hr])},lineStart:function(){zt.push(ft=[])},lineEnd:S,rejoin:function(){zt.length>1&&zt.push(zt.pop().concat(zt.shift()))},result:function(){var sr=zt;return zt=[],ft=null,sr}}}function ar(ft,zt){return s(ft[0]-zt[0])<i&&s(ft[1]-zt[1])<i}function dr(ft,zt,sr,Yt){this.x=ft,this.z=zt,this.o=sr,this.e=Yt,this.v=!1,this.n=this.p=null}function xr(ft,zt,sr,Yt,hr){var Ir,Gr,$r=[],dn=[];if(ft.forEach(function(Un){if(!((Wn=Un.length-1)<=0)){var Wn,fi,Qr=Un[0],li=Un[Wn];if(ar(Qr,li)){if(!Qr[2]&&!li[2]){for(hr.lineStart(),Ir=0;Ir<Wn;++Ir)hr.point((Qr=Un[Ir])[0],Qr[1]);return void hr.lineEnd()}li[0]+=2*i}$r.push(fi=new dr(Qr,Un,null,!0)),dn.push(fi.o=new dr(Qr,null,fi,!1)),$r.push(fi=new dr(li,Un,null,!1)),dn.push(fi.o=new dr(li,null,fi,!0))}}),$r.length){for(dn.sort(zt),Lr($r),Lr(dn),Ir=0,Gr=dn.length;Ir<Gr;++Ir)dn[Ir].e=sr=!sr;for(var hn,_n,Cn=$r[0];;){for(var mn=Cn,Ln=!0;mn.v;)if((mn=mn.n)===Cn)return;hn=mn.z,hr.lineStart();do{if(mn.v=mn.o.v=!0,mn.e){if(Ln)for(Ir=0,Gr=hn.length;Ir<Gr;++Ir)hr.point((_n=hn[Ir])[0],_n[1]);else Yt(mn.x,mn.n.x,1,hr);mn=mn.n}else{if(Ln)for(Ir=(hn=mn.p.z).length-1;Ir>=0;--Ir)hr.point((_n=hn[Ir])[0],_n[1]);else Yt(mn.x,mn.p.x,-1,hr);mn=mn.p}hn=(mn=mn.o).z,Ln=!Ln}while(!mn.v);hr.lineEnd()}}}function Lr(ft){if(zt=ft.length){for(var zt,sr,Yt=0,hr=ft[0];++Yt<zt;)hr.n=sr=ft[Yt],sr.p=hr,hr=sr;hr.n=sr=ft[0],sr.p=hr}}Ct.invert=Ct;var zr=k();function Hr(ft){return s(ft[0])<=l?ft[0]:w(ft[0])*((s(ft[0])+l)%f-l)}function Xr(ft,zt){var sr=Hr(zt),Yt=zt[1],hr=b(Yt),Ir=[b(sr),-c(sr),0],Gr=0,$r=0;zr.reset(),1===hr?Yt=r+i:-1===hr&&(Yt=-r-i);for(var dn=0,hn=ft.length;dn<hn;++dn)if(Cn=(_n=ft[dn]).length)for(var _n,Cn,mn=_n[Cn-1],Ln=Hr(mn),Un=mn[1]/2+d,Wn=b(Un),fi=c(Un),Qr=0;Qr<Cn;++Qr,Ln=Fn,Wn=oi,fi=Pi,mn=li){var li=_n[Qr],Fn=Hr(li),qn=li[1]/2+d,oi=b(qn),Pi=c(qn),zi=Fn-Ln,zn=zi>=0?1:-1,Vi=zn*zi,Di=Vi>l,_i=Wn*oi;if(zr.add(p(_i*zn*b(Vi),fi*Pi+_i*c(Vi))),Gr+=Di?zi+zn*f:zi,Di^Ln>=sr^Fn>=sr){var Ui=ve(le(mn),le(li));Me(Ui);var Ii=ve(Ir,Ui);Me(Ii);var sa=(Di^zi>=0?-1:1)*I(Ii[2]);(Yt>sa||Yt===sa&&(Ui[0]||Ui[1]))&&($r+=Di^zi>=0?1:-1)}}return(Gr<-i||Gr<i&&zr<-i)^1&$r}function cn(ft,zt,sr,Yt){return function(hr){var Ir,Gr,$r,dn=zt(hr),hn=rr(),_n=zt(hn),Cn=!1,mn={point:Ln,lineStart:Wn,lineEnd:fi,polygonStart:function(){mn.point=Qr,mn.lineStart=li,mn.lineEnd=Fn,Gr=[],Ir=[]},polygonEnd:function(){mn.point=Ln,mn.lineStart=Wn,mn.lineEnd=fi,Gr=g.merge(Gr);var qn=Xr(Ir,Yt);Gr.length?(Cn||(hr.polygonStart(),Cn=!0),xr(Gr,Nn,qn,sr,hr)):qn&&(Cn||(hr.polygonStart(),Cn=!0),hr.lineStart(),sr(null,null,1,hr),hr.lineEnd()),Cn&&(hr.polygonEnd(),Cn=!1),Gr=Ir=null},sphere:function(){hr.polygonStart(),hr.lineStart(),sr(null,null,1,hr),hr.lineEnd(),hr.polygonEnd()}};function Ln(qn,oi){ft(qn,oi)&&hr.point(qn,oi)}function Un(qn,oi){dn.point(qn,oi)}function Wn(){mn.point=Un,dn.lineStart()}function fi(){mn.point=Ln,dn.lineEnd()}function Qr(qn,oi){$r.push([qn,oi]),_n.point(qn,oi)}function li(){_n.lineStart(),$r=[]}function Fn(){Qr($r[0][0],$r[0][1]),_n.lineEnd();var qn,oi,Pi,zi,zn=_n.clean(),Vi=hn.result(),Di=Vi.length;if($r.pop(),Ir.push($r),$r=null,Di)if(1&zn){if((oi=(Pi=Vi[0]).length-1)>0){for(Cn||(hr.polygonStart(),Cn=!0),hr.lineStart(),qn=0;qn<oi;++qn)hr.point((zi=Pi[qn])[0],zi[1]);hr.lineEnd()}}else Di>1&&2&zn&&Vi.push(Vi.pop().concat(Vi.shift())),Gr.push(Vi.filter(an))}return mn}}function an(ft){return ft.length>1}function Nn(ft,zt){return((ft=ft.x)[0]<0?ft[1]-r-i:r-ft[1])-((zt=zt.x)[0]<0?zt[1]-r-i:r-zt[1])}var on=cn(function(){return!0},function(ft){var zt,sr=NaN,Yt=NaN,hr=NaN;return{lineStart:function(){ft.lineStart(),zt=1},point:function(Ir,Gr){var hn,_n,Cn,mn,Ln,Un,Wn,$r=Ir>0?l:-l,dn=s(Ir-sr);s(dn-l)<i?(ft.point(sr,Yt=(Yt+Gr)/2>0?r:-r),ft.point(hr,Yt),ft.lineEnd(),ft.lineStart(),ft.point($r,Yt),ft.point(Ir,Yt),zt=0):hr!==$r&&dn>=l&&(s(sr-hr)<i&&(sr-=hr*i),s(Ir-$r)<i&&(Ir-=$r*i),_n=Yt,mn=Gr,Wn=b((hn=sr)-(Cn=Ir)),Yt=s(Wn)>i?o((b(_n)*(Un=c(mn))*b(Cn)-b(mn)*(Ln=c(_n))*b(hn))/(Ln*Un*Wn)):(_n+mn)/2,ft.point(hr,Yt),ft.lineEnd(),ft.lineStart(),ft.point($r,Yt),zt=0),ft.point(sr=Ir,Yt=Gr),hr=$r},lineEnd:function(){ft.lineEnd(),sr=Yt=NaN},clean:function(){return 2-zt}}},function(ft,zt,sr,Yt){var hr;if(null==ft)Yt.point(-l,hr=sr*r),Yt.point(0,hr),Yt.point(l,hr),Yt.point(l,0),Yt.point(l,-hr),Yt.point(0,-hr),Yt.point(-l,-hr),Yt.point(-l,0),Yt.point(-l,hr);else if(s(ft[0]-zt[0])>i){var Ir=ft[0]<zt[0]?l:-l;Yt.point(-Ir,hr=sr*Ir/2),Yt.point(0,hr),Yt.point(Ir,hr)}else Yt.point(zt[0],zt[1])},[-l,-r]);function wn(ft){var zt=c(ft),sr=6*h,Yt=zt>0,hr=s(zt)>i;function Ir(dn,hn){return c(dn)*c(hn)>zt}function Gr(dn,hn,_n){var Cn=[1,0,0],mn=ve(le(dn),le(hn)),Ln=se(mn,mn),Un=mn[0],Wn=Ln-Un*Un;if(!Wn)return!_n&&dn;var fi=zt*Ln/Wn,Qr=-zt*Un/Wn,li=ve(Cn,mn),Fn=ye(Cn,fi);ue(Fn,ye(mn,Qr));var qn=li,oi=se(Fn,qn),Pi=se(qn,qn),zi=oi*oi-Pi*(se(Fn,Fn)-1);if(!(zi<0)){var zn=T(zi),Vi=ye(qn,(-oi-zn)/Pi);if(ue(Vi,Fn),Vi=ae(Vi),!_n)return Vi;var Di,_i=dn[0],Ui=hn[0],Ii=dn[1],sa=hn[1];Ui<_i&&(Di=_i,_i=Ui,Ui=Di);var ci=Ui-_i,Qi=s(ci-l)<i;if(!Qi&&sa<Ii&&(Di=Ii,Ii=sa,sa=Di),Qi||ci<i?Qi?Ii+sa>0^Vi[1]<(s(Vi[0]-_i)<i?Ii:sa):Ii<=Vi[1]&&Vi[1]<=sa:ci>l^(_i<=Vi[0]&&Vi[0]<=Ui)){var qa=ye(qn,(-oi+zn)/Pi);return ue(qa,Fn),[Vi,ae(qa)]}}}function $r(dn,hn){var _n=Yt?ft:l-ft,Cn=0;return dn<-_n?Cn|=1:dn>_n&&(Cn|=2),hn<-_n?Cn|=4:hn>_n&&(Cn|=8),Cn}return cn(Ir,function(dn){var hn,_n,Cn,mn,Ln;return{lineStart:function(){mn=Cn=!1,Ln=1},point:function(Un,Wn){var fi,Qr=[Un,Wn],li=Ir(Un,Wn),Fn=Yt?li?0:$r(Un,Wn):li?$r(Un+(Un<0?l:-l),Wn):0;if(!hn&&(mn=Cn=li)&&dn.lineStart(),li!==Cn&&(!(fi=Gr(hn,Qr))||ar(hn,fi)||ar(Qr,fi))&&(Qr[2]=1),li!==Cn)Ln=0,li?(dn.lineStart(),fi=Gr(Qr,hn),dn.point(fi[0],fi[1])):(fi=Gr(hn,Qr),dn.point(fi[0],fi[1],2),dn.lineEnd()),hn=fi;else if(hr&&hn&&Yt^li){var qn;Fn&_n||!(qn=Gr(Qr,hn,!0))||(Ln=0,Yt?(dn.lineStart(),dn.point(qn[0][0],qn[0][1]),dn.point(qn[1][0],qn[1][1]),dn.lineEnd()):(dn.point(qn[1][0],qn[1][1]),dn.lineEnd(),dn.lineStart(),dn.point(qn[0][0],qn[0][1],3)))}!li||hn&&ar(hn,Qr)||dn.point(Qr[0],Qr[1]),hn=Qr,Cn=li,_n=Fn},lineEnd:function(){Cn&&dn.lineEnd(),hn=null},clean:function(){return Ln|(mn&&Cn)<<1}}},function(dn,hn,_n,Cn){mr(Cn,ft,sr,_n,dn,hn)},Yt?[0,-ft]:[-l,ft-l])}function An(ft,zt,sr,Yt){function hr(hn,_n){return ft<=hn&&hn<=sr&&zt<=_n&&_n<=Yt}function Ir(hn,_n,Cn,mn){var Ln=0,Un=0;if(null==hn||(Ln=Gr(hn,Cn))!==(Un=Gr(_n,Cn))||dn(hn,_n)<0^Cn>0)do{mn.point(0===Ln||3===Ln?ft:sr,Ln>1?Yt:zt)}while((Ln=(Ln+Cn+4)%4)!==Un);else mn.point(_n[0],_n[1])}function Gr(hn,_n){return s(hn[0]-ft)<i?_n>0?0:3:s(hn[0]-sr)<i?_n>0?2:1:s(hn[1]-zt)<i?_n>0?1:0:_n>0?3:2}function $r(hn,_n){return dn(hn.x,_n.x)}function dn(hn,_n){var Cn=Gr(hn,1),mn=Gr(_n,1);return Cn!==mn?Cn-mn:0===Cn?_n[1]-hn[1]:1===Cn?hn[0]-_n[0]:2===Cn?hn[1]-_n[1]:_n[0]-hn[0]}return function(hn){var _n,Cn,mn,Ln,Un,Wn,fi,Qr,li,Fn,qn,oi=hn,Pi=rr(),zi={point:zn,lineStart:function(){zi.point=Vi,Cn&&Cn.push(mn=[]),Fn=!0,li=!1,fi=Qr=NaN},lineEnd:function(){_n&&(Vi(Ln,Un),Wn&&li&&Pi.rejoin(),_n.push(Pi.result())),zi.point=zn,li&&oi.lineEnd()},polygonStart:function(){oi=Pi,_n=[],Cn=[],qn=!0},polygonEnd:function(){var Di=function(){for(var Ii=0,sa=0,ci=Cn.length;sa<ci;++sa)for(var Qi,qa,Yo=Cn[sa],Fo=1,xo=Yo.length,ki=Yo[0],wa=ki[0],bo=ki[1];Fo<xo;++Fo)Qi=wa,qa=bo,wa=(ki=Yo[Fo])[0],bo=ki[1],qa<=Yt?bo>Yt&&(wa-Qi)*(Yt-qa)>(bo-qa)*(ft-Qi)&&++Ii:bo<=Yt&&(wa-Qi)*(Yt-qa)<(bo-qa)*(ft-Qi)&&--Ii;return Ii}(),_i=qn&&Di,Ui=(_n=g.merge(_n)).length;(_i||Ui)&&(hn.polygonStart(),_i&&(hn.lineStart(),Ir(null,null,1,hn),hn.lineEnd()),Ui&&xr(_n,$r,Di,Ir,hn),hn.polygonEnd()),oi=hn,_n=Cn=mn=null}};function zn(Di,_i){hr(Di,_i)&&oi.point(Di,_i)}function Vi(Di,_i){var Ui=hr(Di,_i);if(Cn&&mn.push([Di,_i]),Fn)Ln=Di,Un=_i,Wn=Ui,Fn=!1,Ui&&(oi.lineStart(),oi.point(Di,_i));else if(Ui&&li)oi.point(Di,_i);else{var Ii=[fi=Math.max(-1e9,Math.min(1e9,fi)),Qr=Math.max(-1e9,Math.min(1e9,Qr))],sa=[Di=Math.max(-1e9,Math.min(1e9,Di)),_i=Math.max(-1e9,Math.min(1e9,_i))];!function(ci,Qi,qa,Yo,Fo,xo){var ki,wa=ci[0],bo=ci[1],ea=0,Ca=1,Ka=Qi[0]-wa,ua=Qi[1]-bo;if(ki=qa-wa,Ka||!(ki>0)){if(ki/=Ka,Ka<0){if(ki<ea)return;ki<Ca&&(Ca=ki)}else if(Ka>0){if(ki>Ca)return;ki>ea&&(ea=ki)}if(ki=Fo-wa,Ka||!(ki<0)){if(ki/=Ka,Ka<0){if(ki>Ca)return;ki>ea&&(ea=ki)}else if(Ka>0){if(ki<ea)return;ki<Ca&&(Ca=ki)}if(ki=Yo-bo,ua||!(ki>0)){if(ki/=ua,ua<0){if(ki<ea)return;ki<Ca&&(Ca=ki)}else if(ua>0){if(ki>Ca)return;ki>ea&&(ea=ki)}if(ki=xo-bo,ua||!(ki<0)){if(ki/=ua,ua<0){if(ki>Ca)return;ki>ea&&(ea=ki)}else if(ua>0){if(ki<ea)return;ki<Ca&&(Ca=ki)}return ea>0&&(ci[0]=wa+ea*Ka,ci[1]=bo+ea*ua),Ca<1&&(Qi[0]=wa+Ca*Ka,Qi[1]=bo+Ca*ua),!0}}}}}(Ii,sa,ft,zt,sr,Yt)?Ui&&(oi.lineStart(),oi.point(Di,_i),qn=!1):(li||(oi.lineStart(),oi.point(Ii[0],Ii[1])),oi.point(sa[0],sa[1]),Ui||oi.lineEnd(),qn=!1)}fi=Di,Qr=_i,li=Ui}return zi}}var ii,Vr,sn,xn=k(),nn={sphere:S,point:S,lineStart:function(){nn.point=Xn,nn.lineEnd=fn},lineEnd:S,polygonStart:S,polygonEnd:S};function fn(){nn.point=nn.lineEnd=S}function Xn(ft,zt){ii=ft*=h,Vr=b(zt*=h),sn=c(zt),nn.point=Mn}function Mn(ft,zt){ft*=h;var sr=b(zt*=h),Yt=c(zt),hr=s(ft-ii),Ir=c(hr),Gr=Yt*b(hr),$r=sn*sr-Vr*Yt*Ir,dn=Vr*sr+sn*Yt*Ir;xn.add(p(T(Gr*Gr+$r*$r),dn)),ii=ft,Vr=sr,sn=Yt}function On(ft){return xn.reset(),Y(ft,nn),+xn}var si=[null,null],or={type:"LineString",coordinates:si};function br(ft,zt){return si[0]=ft,si[1]=zt,On(or)}var Rt={Feature:function(ft,zt){return gr(ft.geometry,zt)},FeatureCollection:function(ft,zt){for(var sr=ft.features,Yt=-1,hr=sr.length;++Yt<hr;)if(gr(sr[Yt].geometry,zt))return!0;return!1}},fr={Sphere:function(){return!0},Point:function(ft,zt){return jr(ft.coordinates,zt)},MultiPoint:function(ft,zt){for(var sr=ft.coordinates,Yt=-1,hr=sr.length;++Yt<hr;)if(jr(sr[Yt],zt))return!0;return!1},LineString:function(ft,zt){return Br(ft.coordinates,zt)},MultiLineString:function(ft,zt){for(var sr=ft.coordinates,Yt=-1,hr=sr.length;++Yt<hr;)if(Br(sr[Yt],zt))return!0;return!1},Polygon:function(ft,zt){return Fr(ft.coordinates,zt)},MultiPolygon:function(ft,zt){for(var sr=ft.coordinates,Yt=-1,hr=sr.length;++Yt<hr;)if(Fr(sr[Yt],zt))return!0;return!1},GeometryCollection:function(ft,zt){for(var sr=ft.geometries,Yt=-1,hr=sr.length;++Yt<hr;)if(gr(sr[Yt],zt))return!0;return!1}};function gr(ft,zt){return!(!ft||!fr.hasOwnProperty(ft.type))&&fr[ft.type](ft,zt)}function jr(ft,zt){return 0===br(ft,zt)}function Br(ft,zt){for(var sr,Yt,hr,Ir=0,Gr=ft.length;Ir<Gr;Ir++){if(0===(Yt=br(ft[Ir],zt))||Ir>0&&(hr=br(ft[Ir],ft[Ir-1]))>0&&sr<=hr&&Yt<=hr&&(sr+Yt-hr)*(1-Math.pow((sr-Yt)/hr,2))<1e-12*hr)return!0;sr=Yt}return!1}function Fr(ft,zt){return!!Xr(ft.map(Er),_r(zt))}function Er(ft){return(ft=ft.map(_r)).pop(),ft}function _r(ft){return[ft[0]*h,ft[1]*h]}function kr(ft,zt,sr){var Yt=g.range(ft,zt-i,sr).concat(zt);return function(hr){return Yt.map(function(Ir){return[hr,Ir]})}}function Mr(ft,zt,sr){var Yt=g.range(ft,zt-i,sr).concat(zt);return function(hr){return Yt.map(function(Ir){return[Ir,hr]})}}function Pr(){var ft,zt,sr,Yt,hr,Ir,Gr,$r,dn,hn,_n,Cn,mn=10,Ln=mn,Un=90,Wn=360,fi=2.5;function Qr(){return{type:"MultiLineString",coordinates:li()}}function li(){return g.range(a(Yt/Un)*Un,sr,Un).map(_n).concat(g.range(a($r/Wn)*Wn,Gr,Wn).map(Cn)).concat(g.range(a(zt/mn)*mn,ft,mn).filter(function(Fn){return s(Fn%Un)>i}).map(dn)).concat(g.range(a(Ir/Ln)*Ln,hr,Ln).filter(function(Fn){return s(Fn%Wn)>i}).map(hn))}return Qr.lines=function(){return li().map(function(Fn){return{type:"LineString",coordinates:Fn}})},Qr.outline=function(){return{type:"Polygon",coordinates:[_n(Yt).concat(Cn(Gr).slice(1),_n(sr).reverse().slice(1),Cn($r).reverse().slice(1))]}},Qr.extent=function(Fn){return arguments.length?Qr.extentMajor(Fn).extentMinor(Fn):Qr.extentMinor()},Qr.extentMajor=function(Fn){return arguments.length?($r=+Fn[0][1],Gr=+Fn[1][1],(Yt=+Fn[0][0])>(sr=+Fn[1][0])&&(Fn=Yt,Yt=sr,sr=Fn),$r>Gr&&(Fn=$r,$r=Gr,Gr=Fn),Qr.precision(fi)):[[Yt,$r],[sr,Gr]]},Qr.extentMinor=function(Fn){return arguments.length?(Ir=+Fn[0][1],hr=+Fn[1][1],(zt=+Fn[0][0])>(ft=+Fn[1][0])&&(Fn=zt,zt=ft,ft=Fn),Ir>hr&&(Fn=Ir,Ir=hr,hr=Fn),Qr.precision(fi)):[[zt,Ir],[ft,hr]]},Qr.step=function(Fn){return arguments.length?Qr.stepMajor(Fn).stepMinor(Fn):Qr.stepMinor()},Qr.stepMajor=function(Fn){return arguments.length?(Un=+Fn[0],Wn=+Fn[1],Qr):[Un,Wn]},Qr.stepMinor=function(Fn){return arguments.length?(mn=+Fn[0],Ln=+Fn[1],Qr):[mn,Ln]},Qr.precision=function(Fn){return arguments.length?(fi=+Fn,dn=kr(Ir,hr,90),hn=Mr(zt,ft,fi),_n=kr($r,Gr,90),Cn=Mr(Yt,sr,fi),Qr):fi},Qr.extentMajor([[-180,-90+i],[180,90-i]]).extentMinor([[-180,-80-i],[180,80+i]])}function Wr(ft){return ft}var Zr,rn,ln,bn,Tn=k(),En=k(),Dn={point:S,lineStart:S,lineEnd:S,polygonStart:function(){Dn.lineStart=Bn,Dn.lineEnd=Ti},polygonEnd:function(){Dn.lineStart=Dn.lineEnd=Dn.point=S,Tn.add(s(En)),En.reset()},result:function(){var ft=Tn/2;return Tn.reset(),ft}};function Bn(){Dn.point=Kn}function Kn(ft,zt){Dn.point=Ci,Zr=ln=ft,rn=bn=zt}function Ci(ft,zt){En.add(bn*ft-ln*zt),ln=ft,bn=zt}function Ti(){Ci(Zr,rn)}var Sa,Xa,Ji,qi,Pn=1/0,ei=Pn,Qn=-Pn,Bi=Qn,ma={point:function(ft,zt){ft<Pn&&(Pn=ft),ft>Qn&&(Qn=ft),zt<ei&&(ei=zt),zt>Bi&&(Bi=zt)},lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S,result:function(){var ft=[[Pn,ei],[Qn,Bi]];return Qn=Bi=-(ei=Pn=1/0),ft}},Ha=0,Ni=0,Ja=0,ro=0,Ma=0,Na=0,eo=0,no=0,Ea=0,na={point:Ga,lineStart:Jo,lineEnd:Ko,polygonStart:function(){na.lineStart=Uo,na.lineEnd=$o},polygonEnd:function(){na.point=Ga,na.lineStart=Jo,na.lineEnd=Ko},result:function(){var ft=Ea?[eo/Ea,no/Ea]:Na?[ro/Na,Ma/Na]:Ja?[Ha/Ja,Ni/Ja]:[NaN,NaN];return Ha=Ni=Ja=ro=Ma=Na=eo=no=Ea=0,ft}};function Ga(ft,zt){Ha+=ft,Ni+=zt,++Ja}function Jo(){na.point=ms}function ms(ft,zt){na.point=Wi,Ga(Ji=ft,qi=zt)}function Wi(ft,zt){var sr=ft-Ji,Yt=zt-qi,hr=T(sr*sr+Yt*Yt);ro+=hr*(Ji+ft)/2,Ma+=hr*(qi+zt)/2,Na+=hr,Ga(Ji=ft,qi=zt)}function Ko(){na.point=Ga}function Uo(){na.point=os}function $o(){ss(Sa,Xa)}function os(ft,zt){na.point=ss,Ga(Sa=Ji=ft,Xa=qi=zt)}function ss(ft,zt){var sr=ft-Ji,Yt=zt-qi,hr=T(sr*sr+Yt*Yt);ro+=hr*(Ji+ft)/2,Ma+=hr*(qi+zt)/2,Na+=hr,eo+=(hr=qi*ft-Ji*zt)*(Ji+ft),no+=hr*(qi+zt),Ea+=3*hr,Ga(Ji=ft,qi=zt)}function ls(ft){this._context=ft}ls.prototype={_radius:4.5,pointRadius:function(ft){return this._radius=ft,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(ft,zt){switch(this._point){case 0:this._context.moveTo(ft,zt),this._point=1;break;case 1:this._context.lineTo(ft,zt);break;default:this._context.moveTo(ft+this._radius,zt),this._context.arc(ft,zt,this._radius,0,f)}},result:S};var yo,ho,Lo,Mo,Po,Ro=k(),po={point:S,lineStart:function(){po.point=cs},lineEnd:function(){yo&&io(ho,Lo),po.point=S},polygonStart:function(){yo=!0},polygonEnd:function(){yo=null},result:function(){var ft=+Ro;return Ro.reset(),ft}};function cs(ft,zt){po.point=io,ho=Mo=ft,Lo=Po=zt}function io(ft,zt){Ro.add(T((Mo-=ft)*Mo+(Po-=zt)*Po)),Mo=ft,Po=zt}function So(){this._string=[]}function Qo(ft){return"m0,"+ft+"a"+ft+","+ft+" 0 1,1 0,"+-2*ft+"a"+ft+","+ft+" 0 1,1 0,"+2*ft+"z"}function mo(ft){return function(zt){var sr=new Zi;for(var Yt in ft)sr[Yt]=ft[Yt];return sr.stream=zt,sr}}function Zi(){}function je(ft,zt,sr){var Yt=ft.clipExtent&&ft.clipExtent();return ft.scale(150).translate([0,0]),null!=Yt&&ft.clipExtent(null),Y(sr,ft.stream(ma)),zt(ma.result()),null!=Yt&&ft.clipExtent(Yt),ft}function We(ft,zt,sr){return je(ft,function(Yt){var hr=zt[1][0]-zt[0][0],Ir=zt[1][1]-zt[0][1],Gr=Math.min(hr/(Yt[1][0]-Yt[0][0]),Ir/(Yt[1][1]-Yt[0][1])),$r=+zt[0][0]+(hr-Gr*(Yt[1][0]+Yt[0][0]))/2,dn=+zt[0][1]+(Ir-Gr*(Yt[1][1]+Yt[0][1]))/2;ft.scale(150*Gr).translate([$r,dn])},sr)}function rt(ft,zt,sr){return We(ft,[[0,0],zt],sr)}function ut(ft,zt,sr){return je(ft,function(Yt){var hr=+zt,Ir=hr/(Yt[1][0]-Yt[0][0]),Gr=(hr-Ir*(Yt[1][0]+Yt[0][0]))/2,$r=-Ir*Yt[0][1];ft.scale(150*Ir).translate([Gr,$r])},sr)}function yt(ft,zt,sr){return je(ft,function(Yt){var hr=+zt,Ir=hr/(Yt[1][1]-Yt[0][1]),Gr=-Ir*Yt[0][0],$r=(hr-Ir*(Yt[1][1]+Yt[0][1]))/2;ft.scale(150*Ir).translate([Gr,$r])},sr)}So.prototype={_radius:4.5,_circle:Qo(4.5),pointRadius:function(ft){return(ft=+ft)!==this._radius&&(this._radius=ft,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(ft,zt){switch(this._point){case 0:this._string.push("M",ft,",",zt),this._point=1;break;case 1:this._string.push("L",ft,",",zt);break;default:null==this._circle&&(this._circle=Qo(this._radius)),this._string.push("M",ft,",",zt,this._circle)}},result:function(){if(this._string.length){var ft=this._string.join("");return this._string=[],ft}return null}},Zi.prototype={constructor:Zi,point:function(ft,zt){this.stream.point(ft,zt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var gt=c(30*h);function Lt(ft,zt){return+zt?function(sr,Yt){function hr(Ir,Gr,$r,dn,hn,_n,Cn,mn,Ln,Un,Wn,fi,Qr,li){var Fn=Cn-Ir,qn=mn-Gr,oi=Fn*Fn+qn*qn;if(oi>4*Yt&&Qr--){var Pi=dn+Un,zi=hn+Wn,zn=_n+fi,Vi=T(Pi*Pi+zi*zi+zn*zn),Di=I(zn/=Vi),_i=s(s(zn)-1)<i||s($r-Ln)<i?($r+Ln)/2:p(zi,Pi),Ui=sr(_i,Di),Ii=Ui[0],sa=Ui[1],ci=Ii-Ir,Qi=sa-Gr,qa=qn*ci-Fn*Qi;(qa*qa/oi>Yt||s((Fn*ci+qn*Qi)/oi-.5)>.3||dn*Un+hn*Wn+_n*fi<gt)&&(hr(Ir,Gr,$r,dn,hn,_n,Ii,sa,_i,Pi/=Vi,zi/=Vi,zn,Qr,li),li.point(Ii,sa),hr(Ii,sa,_i,Pi,zi,zn,Cn,mn,Ln,Un,Wn,fi,Qr,li))}}return function(Ir){var Gr,$r,dn,hn,_n,Cn,mn,Ln,Un,Wn,fi,Qr,li={point:Fn,lineStart:qn,lineEnd:Pi,polygonStart:function(){Ir.polygonStart(),li.lineStart=zi},polygonEnd:function(){Ir.polygonEnd(),li.lineStart=qn}};function Fn(Di,_i){Di=sr(Di,_i),Ir.point(Di[0],Di[1])}function qn(){Ln=NaN,li.point=oi,Ir.lineStart()}function oi(Di,_i){var Ui=le([Di,_i]),Ii=sr(Di,_i);hr(Ln,Un,mn,Wn,fi,Qr,Ln=Ii[0],Un=Ii[1],mn=Di,Wn=Ui[0],fi=Ui[1],Qr=Ui[2],16,Ir),Ir.point(Ln,Un)}function Pi(){li.point=Fn,Ir.lineEnd()}function zi(){qn(),li.point=zn,li.lineEnd=Vi}function zn(Di,_i){oi(Gr=Di,_i),$r=Ln,dn=Un,hn=Wn,_n=fi,Cn=Qr,li.point=oi}function Vi(){hr(Ln,Un,mn,Wn,fi,Qr,$r,dn,Gr,hn,_n,Cn,16,Ir),li.lineEnd=Pi,Pi()}return li}}(ft,zt):(sr=ft,mo({point:function(Yt,hr){Yt=sr(Yt,hr),this.stream.point(Yt[0],Yt[1])}}));var sr}var er=mo({point:function(ft,zt){this.stream.point(ft*h,zt*h)}});function nr(ft,zt,sr,Yt,hr){function Ir(Gr,$r){return[zt+ft*(Gr*=Yt),sr-ft*($r*=hr)]}return Ir.invert=function(Gr,$r){return[(Gr-zt)/ft*Yt,(sr-$r)/ft*hr]},Ir}function Kt(ft,zt,sr,Yt,hr,Ir){var Gr=c(Ir),$r=b(Ir),dn=Gr*ft,hn=$r*ft,_n=Gr/ft,Cn=$r/ft,mn=($r*sr-Gr*zt)/ft,Ln=($r*zt+Gr*sr)/ft;function Un(Wn,fi){return[dn*(Wn*=Yt)-hn*(fi*=hr)+zt,sr-hn*Wn-dn*fi]}return Un.invert=function(Wn,fi){return[Yt*(_n*Wn-Cn*fi+mn),hr*(Ln-Cn*Wn-_n*fi)]},Un}function ir(ft){return vr(function(){return ft})()}function vr(ft){var zt,sr,Yt,hr,Ir,Gr,$r,dn,hn,_n,Cn=150,mn=480,Ln=250,Un=0,Wn=0,fi=0,Qr=0,li=0,Fn=0,qn=1,oi=1,Pi=null,zi=on,zn=null,Vi=Wr,Di=.5;function _i(ci){return dn(ci[0]*h,ci[1]*h)}function Ui(ci){return(ci=dn.invert(ci[0],ci[1]))&&[ci[0]*t,ci[1]*t]}function Ii(){var ci=Kt(Cn,0,0,qn,oi,Fn).apply(null,zt(Un,Wn)),Qi=(Fn?Kt:nr)(Cn,mn-ci[0],Ln-ci[1],qn,oi,Fn);return sr=Ut(fi,Qr,li),$r=dt(zt,Qi),dn=dt(sr,$r),Gr=Lt($r,Di),sa()}function sa(){return hn=_n=null,_i}return _i.stream=function(ci){return hn&&_n===ci?hn:hn=er((Qi=sr,mo({point:function(qa,Yo){var Fo=Qi(qa,Yo);return this.stream.point(Fo[0],Fo[1])}}))(zi(Gr(Vi(_n=ci)))));var Qi},_i.preclip=function(ci){return arguments.length?(zi=ci,Pi=void 0,sa()):zi},_i.postclip=function(ci){return arguments.length?(Vi=ci,zn=Yt=hr=Ir=null,sa()):Vi},_i.clipAngle=function(ci){return arguments.length?(zi=+ci?wn(Pi=ci*h):(Pi=null,on),sa()):Pi*t},_i.clipExtent=function(ci){return arguments.length?(Vi=null==ci?(zn=Yt=hr=Ir=null,Wr):An(zn=+ci[0][0],Yt=+ci[0][1],hr=+ci[1][0],Ir=+ci[1][1]),sa()):null==zn?null:[[zn,Yt],[hr,Ir]]},_i.scale=function(ci){return arguments.length?(Cn=+ci,Ii()):Cn},_i.translate=function(ci){return arguments.length?(mn=+ci[0],Ln=+ci[1],Ii()):[mn,Ln]},_i.center=function(ci){return arguments.length?(Un=ci[0]%360*h,Wn=ci[1]%360*h,Ii()):[Un*t,Wn*t]},_i.rotate=function(ci){return arguments.length?(fi=ci[0]%360*h,Qr=ci[1]%360*h,li=ci.length>2?ci[2]%360*h:0,Ii()):[fi*t,Qr*t,li*t]},_i.angle=function(ci){return arguments.length?(Fn=ci%360*h,Ii()):Fn*t},_i.reflectX=function(ci){return arguments.length?(qn=ci?-1:1,Ii()):qn<0},_i.reflectY=function(ci){return arguments.length?(oi=ci?-1:1,Ii()):oi<0},_i.precision=function(ci){return arguments.length?(Gr=Lt($r,Di=ci*ci),sa()):T(Di)},_i.fitExtent=function(ci,Qi){return We(_i,ci,Qi)},_i.fitSize=function(ci,Qi){return rt(_i,ci,Qi)},_i.fitWidth=function(ci,Qi){return ut(_i,ci,Qi)},_i.fitHeight=function(ci,Qi){return yt(_i,ci,Qi)},function(){return zt=ft.apply(this,arguments),_i.invert=zt.invert&&Ui,Ii()}}function wr(ft){var zt=0,sr=l/3,Yt=vr(ft),hr=Yt(zt,sr);return hr.parallels=function(Ir){return arguments.length?Yt(zt=Ir[0]*h,sr=Ir[1]*h):[zt*t,sr*t]},hr}function Ar(ft,zt){var sr=b(ft),Yt=(sr+b(zt))/2;if(s(Yt)<i)return function($r){var dn=c($r);function hn(_n,Cn){return[_n*dn,b(Cn)/dn]}return hn.invert=function(_n,Cn){return[_n/dn,I(Cn*dn)]},hn}(ft);var hr=1+sr*(2*Yt-sr),Ir=T(hr)/Yt;function Gr($r,dn){var hn=T(hr-2*Yt*b(dn))/Yt;return[hn*b($r*=Yt),Ir-hn*c($r)]}return Gr.invert=function($r,dn){var hn=Ir-dn,_n=p($r,s(hn))*w(hn);return hn*Yt<0&&(_n-=l*w($r)*w(hn)),[_n/Yt,I((hr-($r*$r+hn*hn)*Yt*Yt)/(2*Yt))]},Gr}function Nr(){return wr(Ar).scale(155.424).center([0,33.6442])}function un(){return Nr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function gn(ft){return function(zt,sr){var Yt=c(zt),hr=c(sr),Ir=ft(Yt*hr);return[Ir*hr*b(zt),Ir*b(sr)]}}function Rn(ft){return function(zt,sr){var Yt=T(zt*zt+sr*sr),hr=ft(Yt),Ir=b(hr),Gr=c(hr);return[p(zt*Ir,Yt*Gr),I(Yt&&sr*Ir/Yt)]}}var jn=gn(function(ft){return T(2/(1+ft))});jn.invert=Rn(function(ft){return 2*I(ft/2)});var Zn=gn(function(ft){return(ft=M(ft))&&ft/b(ft)});function Vn(ft,zt){return[ft,u(C((r+zt)/2))]}function bi(ft){var zt,sr,Yt,hr=ir(ft),Ir=hr.center,Gr=hr.scale,$r=hr.translate,dn=hr.clipExtent,hn=null;function _n(){var Cn=l*Gr(),mn=hr(Sr(hr.rotate()).invert([0,0]));return dn(null==hn?[[mn[0]-Cn,mn[1]-Cn],[mn[0]+Cn,mn[1]+Cn]]:ft===Vn?[[Math.max(mn[0]-Cn,hn),zt],[Math.min(mn[0]+Cn,sr),Yt]]:[[hn,Math.max(mn[1]-Cn,zt)],[sr,Math.min(mn[1]+Cn,Yt)]])}return hr.scale=function(Cn){return arguments.length?(Gr(Cn),_n()):Gr()},hr.translate=function(Cn){return arguments.length?($r(Cn),_n()):$r()},hr.center=function(Cn){return arguments.length?(Ir(Cn),_n()):Ir()},hr.clipExtent=function(Cn){return arguments.length?(null==Cn?hn=zt=sr=Yt=null:(hn=+Cn[0][0],zt=+Cn[0][1],sr=+Cn[1][0],Yt=+Cn[1][1]),_n()):null==hn?null:[[hn,zt],[sr,Yt]]},_n()}function Li(ft){return C((r+ft)/2)}function Gi(ft,zt){var sr=c(ft),Yt=ft===zt?b(ft):u(sr/c(zt))/u(Li(zt)/Li(ft)),hr=sr*_(Li(ft),Yt)/Yt;if(!Yt)return Vn;function Ir(Gr,$r){hr>0?$r<-r+i&&($r=-r+i):$r>r-i&&($r=r-i);var dn=hr/_(Li($r),Yt);return[dn*b(Yt*Gr),hr-dn*c(Yt*Gr)]}return Ir.invert=function(Gr,$r){var dn=hr-$r,hn=w(Yt)*T(Gr*Gr+dn*dn),_n=p(Gr,s(dn))*w(dn);return dn*Yt<0&&(_n-=l*w(Gr)*w(dn)),[_n/Yt,2*o(_(hr/hn,1/Yt))-r]},Ir}function ji(ft,zt){return[ft,zt]}function Yi(ft,zt){var sr=c(ft),Yt=ft===zt?b(ft):(sr-c(zt))/(zt-ft),hr=sr/Yt+ft;if(s(Yt)<i)return ji;function Ir(Gr,$r){var dn=hr-$r,hn=Yt*Gr;return[dn*b(hn),hr-dn*c(hn)]}return Ir.invert=function(Gr,$r){var dn=hr-$r,hn=p(Gr,s(dn))*w(dn);return dn*Yt<0&&(hn-=l*w(Gr)*w(dn)),[hn/Yt,hr-w(Yt)*T(Gr*Gr+dn*dn)]},Ir}Zn.invert=Rn(function(ft){return ft}),Vn.invert=function(ft,zt){return[ft,2*o(y(zt))-r]},ji.invert=ji;var _a=1.340264,da=-.081106,aa=893e-6,oa=.003796,ca=T(3)/2;function ot(ft,zt){var sr=I(ca*b(zt)),Yt=sr*sr,hr=Yt*Yt*Yt;return[ft*c(sr)/(ca*(_a+3*da*Yt+hr*(7*aa+9*oa*Yt))),sr*(_a+da*Yt+hr*(aa+oa*Yt))]}function tt(ft,zt){var sr=c(zt),Yt=c(ft)*sr;return[sr*b(ft)/Yt,b(zt)/Yt]}function Ge(ft,zt){var sr=zt*zt,Yt=sr*sr;return[ft*(.8707-.131979*sr+Yt*(Yt*(.003971*sr-.001529*Yt)-.013791)),zt*(1.007226+sr*(.015085+Yt*(.028874*sr-.044475-.005916*Yt)))]}function Bt(ft,zt){return[c(zt)*b(ft),b(zt)]}function Ur(ft,zt){var sr=c(zt),Yt=1+c(ft)*sr;return[sr*b(ft)/Yt,b(zt)/Yt]}function kn(ft,zt){return[u(C((r+zt)/2)),-ft]}ot.invert=function(ft,zt){for(var sr,Yt=zt,hr=Yt*Yt,Ir=hr*hr*hr,Gr=0;Gr<12&&(Ir=(hr=(Yt-=sr=(Yt*(_a+da*hr+Ir*(aa+oa*hr))-zt)/(_a+3*da*hr+Ir*(7*aa+9*oa*hr)))*Yt)*hr*hr,!(s(sr)<1e-12));++Gr);return[ca*ft*(_a+3*da*hr+Ir*(7*aa+9*oa*hr))/c(Yt),I(b(Yt)/ca)]},tt.invert=Rn(o),Ge.invert=function(ft,zt){var sr,Yt=zt,hr=25;do{var Ir=Yt*Yt,Gr=Ir*Ir;Yt-=sr=(Yt*(1.007226+Ir*(.015085+Gr*(.028874*Ir-.044475-.005916*Gr)))-zt)/(1.007226+Ir*(.045255+Gr*(.259866*Ir-.311325-.005916*11*Gr)))}while(s(sr)>i&&--hr>0);return[ft/(.8707+(Ir=Yt*Yt)*(Ir*(Ir*Ir*Ir*(.003971-.001529*Ir)-.013791)-.131979)),Yt]},Bt.invert=Rn(I),Ur.invert=Rn(function(ft){return 2*o(ft)}),kn.invert=function(ft,zt){return[-zt,2*o(y(ft))-r]},m.geoAlbers=un,m.geoAlbersUsa=function(){var ft,zt,sr,Yt,hr,Ir,Gr=un(),$r=Nr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),dn=Nr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),hn={point:function(mn,Ln){Ir=[mn,Ln]}};function _n(mn){var Ln=mn[0],Un=mn[1];return Ir=null,sr.point(Ln,Un),Ir||(Yt.point(Ln,Un),Ir)||(hr.point(Ln,Un),Ir)}function Cn(){return ft=zt=null,_n}return _n.invert=function(mn){var Ln=Gr.scale(),Un=Gr.translate(),Wn=(mn[0]-Un[0])/Ln,fi=(mn[1]-Un[1])/Ln;return(fi>=.12&&fi<.234&&Wn>=-.425&&Wn<-.214?$r:fi>=.166&&fi<.234&&Wn>=-.214&&Wn<-.115?dn:Gr).invert(mn)},_n.stream=function(mn){return ft&&zt===mn?ft:(Ln=[Gr.stream(zt=mn),$r.stream(mn),dn.stream(mn)],Un=Ln.length,ft={point:function(Wn,fi){for(var Qr=-1;++Qr<Un;)Ln[Qr].point(Wn,fi)},sphere:function(){for(var Wn=-1;++Wn<Un;)Ln[Wn].sphere()},lineStart:function(){for(var Wn=-1;++Wn<Un;)Ln[Wn].lineStart()},lineEnd:function(){for(var Wn=-1;++Wn<Un;)Ln[Wn].lineEnd()},polygonStart:function(){for(var Wn=-1;++Wn<Un;)Ln[Wn].polygonStart()},polygonEnd:function(){for(var Wn=-1;++Wn<Un;)Ln[Wn].polygonEnd()}});var Ln,Un},_n.precision=function(mn){return arguments.length?(Gr.precision(mn),$r.precision(mn),dn.precision(mn),Cn()):Gr.precision()},_n.scale=function(mn){return arguments.length?(Gr.scale(mn),$r.scale(.35*mn),dn.scale(mn),_n.translate(Gr.translate())):Gr.scale()},_n.translate=function(mn){if(!arguments.length)return Gr.translate();var Ln=Gr.scale(),Un=+mn[0],Wn=+mn[1];return sr=Gr.translate(mn).clipExtent([[Un-.455*Ln,Wn-.238*Ln],[Un+.455*Ln,Wn+.238*Ln]]).stream(hn),Yt=$r.translate([Un-.307*Ln,Wn+.201*Ln]).clipExtent([[Un-.425*Ln+i,Wn+.12*Ln+i],[Un-.214*Ln-i,Wn+.234*Ln-i]]).stream(hn),hr=dn.translate([Un-.205*Ln,Wn+.212*Ln]).clipExtent([[Un-.214*Ln+i,Wn+.166*Ln+i],[Un-.115*Ln-i,Wn+.234*Ln-i]]).stream(hn),Cn()},_n.fitExtent=function(mn,Ln){return We(_n,mn,Ln)},_n.fitSize=function(mn,Ln){return rt(_n,mn,Ln)},_n.fitWidth=function(mn,Ln){return ut(_n,mn,Ln)},_n.fitHeight=function(mn,Ln){return yt(_n,mn,Ln)},_n.scale(1070)},m.geoArea=function(ft){return V.reset(),Y(ft,ee),2*V},m.geoAzimuthalEqualArea=function(){return ir(jn).scale(124.75).clipAngle(179.999)},m.geoAzimuthalEqualAreaRaw=jn,m.geoAzimuthalEquidistant=function(){return ir(Zn).scale(79.4188).clipAngle(179.999)},m.geoAzimuthalEquidistantRaw=Zn,m.geoBounds=function(ft){var zt,sr,Yt,hr,Ir,Gr,$r;if(oe=we=-(pe=ge=1/0),De=[],Y(ft,Xt),sr=De.length){for(De.sort(Je),zt=1,Ir=[Yt=De[0]];zt<sr;++zt)Ye(Yt,(hr=De[zt])[0])||Ye(Yt,hr[1])?(Ve(Yt[0],hr[1])>Ve(Yt[0],Yt[1])&&(Yt[1]=hr[1]),Ve(hr[0],Yt[1])>Ve(Yt[0],Yt[1])&&(Yt[0]=hr[0])):Ir.push(Yt=hr);for(Gr=-1/0,zt=0,Yt=Ir[sr=Ir.length-1];zt<=sr;Yt=hr,++zt)($r=Ve(Yt[1],(hr=Ir[zt])[0]))>Gr&&(Gr=$r,pe=hr[0],we=Yt[1])}return De=Ie=null,pe===1/0||ge===1/0?[[NaN,NaN],[NaN,NaN]]:[[pe,ge],[we,oe]]},m.geoCentroid=function(ft){Oe=Xe=Fe=Pe=Re=qe=Qe=ct=bt=Tt=_t=0,Y(ft,lt);var zt=bt,sr=Tt,Yt=_t,hr=zt*zt+sr*sr+Yt*Yt;return hr<1e-12&&(zt=qe,sr=Qe,Yt=ct,Xe<i&&(zt=Fe,sr=Pe,Yt=Re),(hr=zt*zt+sr*sr+Yt*Yt)<1e-12)?[NaN,NaN]:[p(sr,zt)*t,I(Yt/T(hr))*t]},m.geoCircle=function(){var ft,zt,sr=it([0,0]),Yt=it(90),hr=it(6),Ir={point:function($r,dn){ft.push($r=zt($r,dn)),$r[0]*=t,$r[1]*=t}};function Gr(){var $r=sr.apply(this,arguments),dn=Yt.apply(this,arguments)*h,hn=hr.apply(this,arguments)*h;return ft=[],zt=Ut(-$r[0]*h,-$r[1]*h,0).invert,mr(Ir,dn,hn,1),$r={type:"Polygon",coordinates:[ft]},ft=zt=null,$r}return Gr.center=function($r){return arguments.length?(sr="function"==typeof $r?$r:it([+$r[0],+$r[1]]),Gr):sr},Gr.radius=function($r){return arguments.length?(Yt="function"==typeof $r?$r:it(+$r),Gr):Yt},Gr.precision=function($r){return arguments.length?(hr="function"==typeof $r?$r:it(+$r),Gr):hr},Gr},m.geoClipAntimeridian=on,m.geoClipCircle=wn,m.geoClipExtent=function(){var ft,zt,sr,Yt=0,hr=0,Ir=960,Gr=500;return sr={stream:function($r){return ft&&zt===$r?ft:ft=An(Yt,hr,Ir,Gr)(zt=$r)},extent:function($r){return arguments.length?(Yt=+$r[0][0],hr=+$r[0][1],Ir=+$r[1][0],Gr=+$r[1][1],ft=zt=null,sr):[[Yt,hr],[Ir,Gr]]}}},m.geoClipRectangle=An,m.geoConicConformal=function(){return wr(Gi).scale(109.5).parallels([30,30])},m.geoConicConformalRaw=Gi,m.geoConicEqualArea=Nr,m.geoConicEqualAreaRaw=Ar,m.geoConicEquidistant=function(){return wr(Yi).scale(131.154).center([0,13.9389])},m.geoConicEquidistantRaw=Yi,m.geoContains=function(ft,zt){return(ft&&Rt.hasOwnProperty(ft.type)?Rt[ft.type]:gr)(ft,zt)},m.geoDistance=br,m.geoEqualEarth=function(){return ir(ot).scale(177.158)},m.geoEqualEarthRaw=ot,m.geoEquirectangular=function(){return ir(ji).scale(152.63)},m.geoEquirectangularRaw=ji,m.geoGnomonic=function(){return ir(tt).scale(144.049).clipAngle(60)},m.geoGnomonicRaw=tt,m.geoGraticule=Pr,m.geoGraticule10=function(){return Pr()()},m.geoIdentity=function(){var ft,zt,sr,Yt,hr,Ir,Gr,$r=1,dn=0,hn=0,_n=1,Cn=1,mn=0,Ln=null,Un=1,Wn=1,fi=mo({point:function(qn,oi){var Pi=Fn([qn,oi]);this.stream.point(Pi[0],Pi[1])}}),Qr=Wr;function li(){return Un=$r*_n,Wn=$r*Cn,Ir=Gr=null,Fn}function Fn(qn){var oi=qn[0]*Un,Pi=qn[1]*Wn;if(mn){var zi=Pi*ft-oi*zt;oi=oi*ft+Pi*zt,Pi=zi}return[oi+dn,Pi+hn]}return Fn.invert=function(qn){var oi=qn[0]-dn,Pi=qn[1]-hn;if(mn){var zi=Pi*ft+oi*zt;oi=oi*ft-Pi*zt,Pi=zi}return[oi/Un,Pi/Wn]},Fn.stream=function(qn){return Ir&&Gr===qn?Ir:Ir=fi(Qr(Gr=qn))},Fn.postclip=function(qn){return arguments.length?(Qr=qn,Ln=sr=Yt=hr=null,li()):Qr},Fn.clipExtent=function(qn){return arguments.length?(Qr=null==qn?(Ln=sr=Yt=hr=null,Wr):An(Ln=+qn[0][0],sr=+qn[0][1],Yt=+qn[1][0],hr=+qn[1][1]),li()):null==Ln?null:[[Ln,sr],[Yt,hr]]},Fn.scale=function(qn){return arguments.length?($r=+qn,li()):$r},Fn.translate=function(qn){return arguments.length?(dn=+qn[0],hn=+qn[1],li()):[dn,hn]},Fn.angle=function(qn){return arguments.length?(zt=b(mn=qn%360*h),ft=c(mn),li()):mn*t},Fn.reflectX=function(qn){return arguments.length?(_n=qn?-1:1,li()):_n<0},Fn.reflectY=function(qn){return arguments.length?(Cn=qn?-1:1,li()):Cn<0},Fn.fitExtent=function(qn,oi){return We(Fn,qn,oi)},Fn.fitSize=function(qn,oi){return rt(Fn,qn,oi)},Fn.fitWidth=function(qn,oi){return ut(Fn,qn,oi)},Fn.fitHeight=function(qn,oi){return yt(Fn,qn,oi)},Fn},m.geoInterpolate=function(ft,zt){var sr=ft[0]*h,Yt=ft[1]*h,hr=zt[0]*h,Ir=zt[1]*h,Gr=c(Yt),$r=b(Yt),dn=c(Ir),hn=b(Ir),_n=Gr*c(sr),Cn=Gr*b(sr),mn=dn*c(hr),Ln=dn*b(hr),Un=2*I(T(P(Ir-Yt)+Gr*dn*P(hr-sr))),Wn=b(Un),fi=Un?function(Qr){var li=b(Qr*=Un)/Wn,Fn=b(Un-Qr)/Wn,qn=Fn*_n+li*mn,oi=Fn*Cn+li*Ln,Pi=Fn*$r+li*hn;return[p(oi,qn)*t,p(Pi,T(qn*qn+oi*oi))*t]}:function(){return[sr*t,Yt*t]};return fi.distance=Un,fi},m.geoLength=On,m.geoMercator=function(){return bi(Vn).scale(961/f)},m.geoMercatorRaw=Vn,m.geoNaturalEarth1=function(){return ir(Ge).scale(175.295)},m.geoNaturalEarth1Raw=Ge,m.geoOrthographic=function(){return ir(Bt).scale(249.5).clipAngle(90+i)},m.geoOrthographicRaw=Bt,m.geoPath=function(ft,zt){var sr,Yt,hr=4.5;function Ir(Gr){return Gr&&("function"==typeof hr&&Yt.pointRadius(+hr.apply(this,arguments)),Y(Gr,sr(Yt))),Yt.result()}return Ir.area=function(Gr){return Y(Gr,sr(Dn)),Dn.result()},Ir.measure=function(Gr){return Y(Gr,sr(po)),po.result()},Ir.bounds=function(Gr){return Y(Gr,sr(ma)),ma.result()},Ir.centroid=function(Gr){return Y(Gr,sr(na)),na.result()},Ir.projection=function(Gr){return arguments.length?(sr=null==Gr?(ft=null,Wr):(ft=Gr).stream,Ir):ft},Ir.context=function(Gr){return arguments.length?(Yt=null==Gr?(zt=null,new So):new ls(zt=Gr),"function"!=typeof hr&&Yt.pointRadius(hr),Ir):zt},Ir.pointRadius=function(Gr){return arguments.length?(hr="function"==typeof Gr?Gr:(Yt.pointRadius(+Gr),+Gr),Ir):hr},Ir.projection(ft).context(zt)},m.geoProjection=ir,m.geoProjectionMutator=vr,m.geoRotation=Sr,m.geoStereographic=function(){return ir(Ur).scale(250).clipAngle(142)},m.geoStereographicRaw=Ur,m.geoStream=Y,m.geoTransform=function(ft){return{stream:mo(ft)}},m.geoTransverseMercator=function(){var ft=bi(kn),zt=ft.center,sr=ft.rotate;return ft.center=function(Yt){return arguments.length?zt([-Yt[1],Yt[0]]):[(Yt=zt())[1],-Yt[0]]},ft.rotate=function(Yt){return arguments.length?sr([Yt[0],Yt[1],Yt.length>2?Yt[2]+90:90]):[(Yt=sr())[0],Yt[1],Yt[2]-90]},sr([0,0,90]).scale(159.155)},m.geoTransverseMercatorRaw=kn,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof Q&&void 0!==$?g(Q,v("d3-array")):g((m=m||self).d3=m.d3||{},m.d3)},{"d3-array":107}],115:[function(v,$,Q){var m,g;m=this,g=function(m){"use strict";function g(se,ve){return se.parent===ve.parent?1:2}function k(se,ve){return se+ve.x}function x(se,ve){return Math.max(se,ve.y)}function e(se){var ve=0,ue=se.children,ye=ue&&ue.length;if(ye)for(;--ye>=0;)ve+=ue[ye].value;else ve=1;se.value=ve}function n(se,ve){var ue,ye,Me,pe,ge,we=new d(se),oe=+se.value&&(we.value=se.value),de=[we];for(null==ve&&(ve=i);ue=de.pop();)if(oe&&(ue.value=+ue.data.value),(Me=ve(ue.data))&&(ge=Me.length))for(ue.children=new Array(ge),pe=ge-1;pe>=0;--pe)de.push(ye=ue.children[pe]=new d(Me[pe])),ye.parent=ue,ye.depth=ue.depth+1;return we.eachBefore(r)}function i(se){return se.children}function l(se){se.data=se.data.data}function r(se){var ve=0;do{se.height=ve}while((se=se.parent)&&se.height<++ve)}function d(se){this.data=se,this.depth=this.height=0,this.parent=null}d.prototype=n.prototype={constructor:d,count:function(){return this.eachAfter(e)},each:function(se){var ve,ue,ye,Me,pe=this,ge=[pe];do{for(ve=ge.reverse(),ge=[];pe=ve.pop();)if(se(pe),ue=pe.children)for(ye=0,Me=ue.length;ye<Me;++ye)ge.push(ue[ye])}while(ge.length);return this},eachAfter:function(se){for(var ve,ue,ye,Me=this,pe=[Me],ge=[];Me=pe.pop();)if(ge.push(Me),ve=Me.children)for(ue=0,ye=ve.length;ue<ye;++ue)pe.push(ve[ue]);for(;Me=ge.pop();)se(Me);return this},eachBefore:function(se){for(var ve,ue,ye=this,Me=[ye];ye=Me.pop();)if(se(ye),ve=ye.children)for(ue=ve.length-1;ue>=0;--ue)Me.push(ve[ue]);return this},sum:function(se){return this.eachAfter(function(ve){for(var ue=+se(ve.data)||0,ye=ve.children,Me=ye&&ye.length;--Me>=0;)ue+=ye[Me].value;ve.value=ue})},sort:function(se){return this.eachBefore(function(ve){ve.children&&ve.children.sort(se)})},path:function(se){for(var ve=this,ue=function(pe,ge){if(pe===ge)return pe;var we=pe.ancestors(),oe=ge.ancestors(),de=null;for(pe=we.pop(),ge=oe.pop();pe===ge;)de=pe,pe=we.pop(),ge=oe.pop();return de}(ve,se),ye=[ve];ve!==ue;)ye.push(ve=ve.parent);for(var Me=ye.length;se!==ue;)ye.splice(Me,0,se),se=se.parent;return ye},ancestors:function(){for(var se=this,ve=[se];se=se.parent;)ve.push(se);return ve},descendants:function(){var se=[];return this.each(function(ve){se.push(ve)}),se},leaves:function(){var se=[];return this.eachBefore(function(ve){ve.children||se.push(ve)}),se},links:function(){var se=this,ve=[];return se.each(function(ue){ue!==se&&ve.push({source:ue.parent,target:ue})}),ve},copy:function(){return n(this).eachBefore(l)}};var f=Array.prototype.slice;function t(se){for(var ve,ue,ye=0,Me=(se=function(ge){for(var we,oe,de=ge.length;de;)oe=Math.random()*de--|0,we=ge[de],ge[de]=ge[oe],ge[oe]=we;return ge}(f.call(se))).length,pe=[];ye<Me;)ve=se[ye],ue&&o(ue,ve)?++ye:(ue=c(pe=h(pe,ve)),ye=0);return ue}function h(se,ve){var ue,ye;if(p(ve,se))return[ve];for(ue=0;ue<se.length;++ue)if(s(ve,se[ue])&&p(a(se[ue],ve),se))return[se[ue],ve];for(ue=0;ue<se.length-1;++ue)for(ye=ue+1;ye<se.length;++ye)if(s(a(se[ue],se[ye]),ve)&&s(a(se[ue],ve),se[ye])&&s(a(se[ye],ve),se[ue])&&p(y(se[ue],se[ye],ve),se))return[se[ue],se[ye],ve];throw new Error}function s(se,ve){var ue=se.r-ve.r,ye=ve.x-se.x,Me=ve.y-se.y;return ue<0||ue*ue<ye*ye+Me*Me}function o(se,ve){var ue=se.r-ve.r+1e-6,ye=ve.x-se.x,Me=ve.y-se.y;return ue>0&&ue*ue>ye*ye+Me*Me}function p(se,ve){for(var ue=0;ue<ve.length;++ue)if(!o(se,ve[ue]))return!1;return!0}function c(se){switch(se.length){case 1:return{x:(ve=se[0]).x,y:ve.y,r:ve.r};case 2:return a(se[0],se[1]);case 3:return y(se[0],se[1],se[2])}var ve}function a(se,ve){var ue=se.x,ye=se.y,Me=se.r,pe=ve.x,ge=ve.y,we=ve.r,oe=pe-ue,de=ge-ye,Te=we-Me,Ee=Math.sqrt(oe*oe+de*de);return{x:(ue+pe+oe/Ee*Te)/2,y:(ye+ge+de/Ee*Te)/2,r:(Ee+Me+we)/2}}function y(se,ve,ue){var ye=se.x,Me=se.y,pe=se.r,ge=ve.x,we=ve.y,oe=ve.r,de=ue.x,Te=ue.y,Ee=ue.r,Ae=ye-ge,De=ye-de,Ie=Me-we,Oe=Me-Te,Xe=oe-pe,Fe=Ee-pe,Pe=ye*ye+Me*Me-pe*pe,Re=Pe-ge*ge-we*we+oe*oe,qe=Pe-de*de-Te*Te+Ee*Ee,Qe=De*Ie-Ae*Oe,ct=(Ie*qe-Oe*Re)/(2*Qe)-ye,bt=(Oe*Xe-Ie*Fe)/Qe,Tt=(De*Re-Ae*qe)/(2*Qe)-Me,_t=(Ae*Fe-De*Xe)/Qe,nt=bt*bt+_t*_t-1,Ke=2*(pe+ct*bt+Tt*_t),xt=ct*ct+Tt*Tt-pe*pe,Ht=-(nt?(Ke+Math.sqrt(Ke*Ke-4*nt*xt))/(2*nt):xt/Ke);return{x:ye+ct+bt*Ht,y:Me+Tt+_t*Ht,r:Ht}}function u(se,ve,ue){var ye,Me,pe,ge,we=se.x-ve.x,oe=se.y-ve.y,de=we*we+oe*oe;de?(Me=ve.r+ue.r,ge=se.r+ue.r,(Me*=Me)>(ge*=ge)?(ye=(de+ge-Me)/(2*de),pe=Math.sqrt(Math.max(0,ge/de-ye*ye)),ue.x=se.x-ye*we-pe*oe,ue.y=se.y-ye*oe+pe*we):(ye=(de+Me-ge)/(2*de),pe=Math.sqrt(Math.max(0,Me/de-ye*ye)),ue.x=ve.x+ye*we-pe*oe,ue.y=ve.y+ye*oe+pe*we)):(ue.x=ve.x+ue.r,ue.y=ve.y)}function _(se,ve){var ue=se.r+ve.r-1e-6,ye=ve.x-se.x,Me=ve.y-se.y;return ue>0&&ue*ue>ye*ye+Me*Me}function b(se){var ve=se._,ue=se.next._,ye=ve.r+ue.r,Me=(ve.x*ue.r+ue.x*ve.r)/ye,pe=(ve.y*ue.r+ue.y*ve.r)/ye;return Me*Me+pe*pe}function w(se){this._=se,this.next=null,this.previous=null}function T(se){if(!(Me=se.length))return 0;var ve,ue,ye,Me,pe,ge,we,oe,de,Te,Ee;if((ve=se[0]).x=0,ve.y=0,!(Me>1))return ve.r;if(ve.x=-(ue=se[1]).r,ue.x=ve.r,ue.y=0,!(Me>2))return ve.r+ue.r;u(ue,ve,ye=se[2]),ve=new w(ve),ue=new w(ue),ye=new w(ye),ve.next=ye.previous=ue,ue.next=ve.previous=ye,ye.next=ue.previous=ve;e:for(we=3;we<Me;++we){u(ve._,ue._,ye=se[we]),ye=new w(ye),oe=ue.next,de=ve.previous,Te=ue._.r,Ee=ve._.r;do{if(Te<=Ee){if(_(oe._,ye._)){ve.next=ue=oe,ue.previous=ve,--we;continue e}Te+=oe._.r,oe=oe.next}else{if(_(de._,ye._)){(ve=de).next=ue,ue.previous=ve,--we;continue e}Ee+=de._.r,de=de.previous}}while(oe!==de.next);for(ye.previous=ve,ye.next=ue,ve.next=ue.previous=ue=ye,pe=b(ve);(ye=ye.next)!==ue;)(ge=b(ye))<pe&&(ve=ye,pe=ge);ue=ve.next}for(ve=[ue._],ye=ue;(ye=ye.next)!==ue;)ve.push(ye._);for(ye=t(ve),we=0;we<Me;++we)(ve=se[we]).x-=ye.x,ve.y-=ye.y;return ye.r}function C(se){return null==se?null:M(se)}function M(se){if("function"!=typeof se)throw new Error;return se}function I(){return 0}function P(se){return function(){return se}}function S(se){return Math.sqrt(se.value)}function E(se){return function(ve){ve.children||(ve.r=Math.max(0,+se(ve)||0))}}function R(se,ve){return function(ue){if(ye=ue.children){var ye,Me,pe,ge=ye.length,we=se(ue)*ve||0;if(we)for(Me=0;Me<ge;++Me)ye[Me].r+=we;if(pe=T(ye),we)for(Me=0;Me<ge;++Me)ye[Me].r-=we;ue.r=pe+we}}}function D(se){return function(ve){var ue=ve.parent;ve.r*=se,ue&&(ve.x=ue.x+se*ve.x,ve.y=ue.y+se*ve.y)}}function j(se){se.x0=Math.round(se.x0),se.y0=Math.round(se.y0),se.x1=Math.round(se.x1),se.y1=Math.round(se.y1)}function H(se,ve,ue,ye,Me){for(var pe,ge=se.children,we=-1,oe=ge.length,de=se.value&&(ye-ve)/se.value;++we<oe;)(pe=ge[we]).y0=ue,pe.y1=Me,pe.x0=ve,pe.x1=ve+=pe.value*de}var Y={depth:-1},X={};function Z(se){return se.id}function W(se){return se.parentId}function re(se,ve){return se.parent===ve.parent?1:2}function U(se){var ve=se.children;return ve?ve[0]:se.t}function B(se){var ve=se.children;return ve?ve[ve.length-1]:se.t}function V(se,ve,ue){var ye=ue/(ve.i-se.i);ve.c-=ye,ve.s+=ue,se.c+=ye,ve.z+=ue,ve.m+=ue}function ee(se,ve,ue){return se.a.parent===ve.parent?se.a:ue}function N(se,ve){this._=se,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=ve}function K(se,ve,ue,ye,Me){for(var pe,ge=se.children,we=-1,oe=ge.length,de=se.value&&(Me-ue)/se.value;++we<oe;)(pe=ge[we]).x0=ve,pe.x1=ye,pe.y0=ue,pe.y1=ue+=pe.value*de}N.prototype=Object.create(d.prototype);var J=(1+Math.sqrt(5))/2;function te(se,ve,ue,ye,Me,pe){for(var ge,we,oe,de,Te,Ee,Ae,De,Ie,Oe,Xe,Fe=[],Pe=ve.children,Re=0,qe=0,Qe=Pe.length,ct=ve.value;Re<Qe;){oe=Me-ue,de=pe-ye;do{Te=Pe[qe++].value}while(!Te&&qe<Qe);for(Ee=Ae=Te,Xe=Te*Te*(Oe=Math.max(de/oe,oe/de)/(ct*se)),Ie=Math.max(Ae/Xe,Xe/Ee);qe<Qe;++qe){if(Te+=we=Pe[qe].value,we<Ee&&(Ee=we),we>Ae&&(Ae=we),Xe=Te*Te*Oe,(De=Math.max(Ae/Xe,Xe/Ee))>Ie){Te-=we;break}Ie=De}Fe.push(ge={value:Te,dice:oe<de,children:Pe.slice(Re,qe)}),ge.dice?H(ge,ue,ye,Me,ct?ye+=de*Te/ct:pe):K(ge,ue,ye,ct?ue+=oe*Te/ct:Me,pe),ct-=Te,Re=qe}return Fe}var ae=function se(ve){function ue(ye,Me,pe,ge,we){te(ve,ye,Me,pe,ge,we)}return ue.ratio=function(ye){return se((ye=+ye)>1?ye:1)},ue}(J),le=function se(ve){function ue(ye,Me,pe,ge,we){if((oe=ye._squarify)&&oe.ratio===ve)for(var oe,de,Te,Ee,Ae,De=-1,Ie=oe.length,Oe=ye.value;++De<Ie;){for(Te=(de=oe[De]).children,Ee=de.value=0,Ae=Te.length;Ee<Ae;++Ee)de.value+=Te[Ee].value;de.dice?H(de,Me,pe,ge,pe+=(we-pe)*de.value/Oe):K(de,Me,pe,Me+=(ge-Me)*de.value/Oe,we),Oe-=de.value}else ye._squarify=oe=te(ve,ye,Me,pe,ge,we),oe.ratio=ve}return ue.ratio=function(ye){return se((ye=+ye)>1?ye:1)},ue}(J);m.cluster=function(){var se=g,ve=1,ue=1,ye=!1;function Me(pe){var ge,we=0;pe.eachAfter(function(Ae){var Ie,De=Ae.children;De?(Ae.x=(Ie=De).reduce(k,0)/Ie.length,Ae.y=function(Ie){return 1+Ie.reduce(x,0)}(De)):(Ae.x=ge?we+=se(Ae,ge):0,Ae.y=0,ge=Ae)});var oe=function(Ae){for(var De;De=Ae.children;)Ae=De[0];return Ae}(pe),de=function(Ae){for(var De;De=Ae.children;)Ae=De[De.length-1];return Ae}(pe),Te=oe.x-se(oe,de)/2,Ee=de.x+se(de,oe)/2;return pe.eachAfter(ye?function(Ae){Ae.x=(Ae.x-pe.x)*ve,Ae.y=(pe.y-Ae.y)*ue}:function(Ae){Ae.x=(Ae.x-Te)/(Ee-Te)*ve,Ae.y=(1-(pe.y?Ae.y/pe.y:1))*ue})}return Me.separation=function(pe){return arguments.length?(se=pe,Me):se},Me.size=function(pe){return arguments.length?(ye=!1,ve=+pe[0],ue=+pe[1],Me):ye?null:[ve,ue]},Me.nodeSize=function(pe){return arguments.length?(ye=!0,ve=+pe[0],ue=+pe[1],Me):ye?[ve,ue]:null},Me},m.hierarchy=n,m.pack=function(){var se=null,ve=1,ue=1,ye=I;function Me(pe){return pe.x=ve/2,pe.y=ue/2,se?pe.eachBefore(E(se)).eachAfter(R(ye,.5)).eachBefore(D(1)):pe.eachBefore(E(S)).eachAfter(R(I,1)).eachAfter(R(ye,pe.r/Math.min(ve,ue))).eachBefore(D(Math.min(ve,ue)/(2*pe.r))),pe}return Me.radius=function(pe){return arguments.length?(se=C(pe),Me):se},Me.size=function(pe){return arguments.length?(ve=+pe[0],ue=+pe[1],Me):[ve,ue]},Me.padding=function(pe){return arguments.length?(ye="function"==typeof pe?pe:P(+pe),Me):ye},Me},m.packEnclose=t,m.packSiblings=function(se){return T(se),se},m.partition=function(){var se=1,ve=1,ue=0,ye=!1;function Me(pe){var we,oe,ge=pe.height+1;return pe.x0=pe.y0=ue,pe.x1=se,pe.y1=ve/ge,pe.eachBefore((we=ve,oe=ge,function(de){de.children&&H(de,de.x0,we*(de.depth+1)/oe,de.x1,we*(de.depth+2)/oe);var Te=de.x0,Ee=de.y0,Ae=de.x1-ue,De=de.y1-ue;Ae<Te&&(Te=Ae=(Te+Ae)/2),De<Ee&&(Ee=De=(Ee+De)/2),de.x0=Te,de.y0=Ee,de.x1=Ae,de.y1=De})),ye&&pe.eachBefore(j),pe}return Me.round=function(pe){return arguments.length?(ye=!!pe,Me):ye},Me.size=function(pe){return arguments.length?(se=+pe[0],ve=+pe[1],Me):[se,ve]},Me.padding=function(pe){return arguments.length?(ue=+pe,Me):ue},Me},m.stratify=function(){var se=Z,ve=W;function ue(ye){var Me,pe,ge,we,oe,de,Te,Ee=ye.length,Ae=new Array(Ee),De={};for(pe=0;pe<Ee;++pe)oe=Ae[pe]=new d(Me=ye[pe]),null!=(de=se(Me,pe,ye))&&(de+="")&&(De[Te="$"+(oe.id=de)]=Te in De?X:oe);for(pe=0;pe<Ee;++pe)if(oe=Ae[pe],null!=(de=ve(ye[pe],pe,ye))&&(de+="")){if(!(we=De["$"+de]))throw new Error("missing: "+de);if(we===X)throw new Error("ambiguous: "+de);we.children?we.children.push(oe):we.children=[oe],oe.parent=we}else{if(ge)throw new Error("multiple roots");ge=oe}if(!ge)throw new Error("no root");if(ge.parent=Y,ge.eachBefore(function(Ie){Ie.depth=Ie.parent.depth+1,--Ee}).eachBefore(r),ge.parent=null,Ee>0)throw new Error("cycle");return ge}return ue.id=function(ye){return arguments.length?(se=M(ye),ue):se},ue.parentId=function(ye){return arguments.length?(ve=M(ye),ue):ve},ue},m.tree=function(){var se=re,ve=1,ue=1,ye=null;function Me(oe){var de=function(Fe){for(var Pe,Re,qe,Qe,ct,bt=new N(Fe,0),Tt=[bt];Pe=Tt.pop();)if(qe=Pe._.children)for(Pe.children=new Array(ct=qe.length),Qe=ct-1;Qe>=0;--Qe)Tt.push(Re=Pe.children[Qe]=new N(qe[Qe],Qe)),Re.parent=Pe;return(bt.parent=new N(null,0)).children=[bt],bt}(oe);if(de.eachAfter(pe),de.parent.m=-de.z,de.eachBefore(ge),ye)oe.eachBefore(we);else{var Te=oe,Ee=oe,Ae=oe;oe.eachBefore(function(Fe){Fe.x<Te.x&&(Te=Fe),Fe.x>Ee.x&&(Ee=Fe),Fe.depth>Ae.depth&&(Ae=Fe)});var De=Te===Ee?1:se(Te,Ee)/2,Ie=De-Te.x,Oe=ve/(Ee.x+De+Ie),Xe=ue/(Ae.depth||1);oe.eachBefore(function(Fe){Fe.x=(Fe.x+Ie)*Oe,Fe.y=Fe.depth*Xe})}return oe}function pe(oe){var de=oe.children,Te=oe.parent.children,Ee=oe.i?Te[oe.i-1]:null;if(de){!function(De){for(var Ie,Oe=0,Xe=0,Fe=De.children,Pe=Fe.length;--Pe>=0;)(Ie=Fe[Pe]).z+=Oe,Ie.m+=Oe,Oe+=Ie.s+(Xe+=Ie.c)}(oe);var Ae=(de[0].z+de[de.length-1].z)/2;Ee?(oe.z=Ee.z+se(oe._,Ee._),oe.m=oe.z-Ae):oe.z=Ae}else Ee&&(oe.z=Ee.z+se(oe._,Ee._));oe.parent.A=function(De,Ie,Oe){if(Ie){for(var Xe,Fe=De,Pe=De,Re=Ie,qe=Fe.parent.children[0],Qe=Fe.m,ct=Pe.m,bt=Re.m,Tt=qe.m;Re=B(Re),Fe=U(Fe),Re&&Fe;)qe=U(qe),(Pe=B(Pe)).a=De,(Xe=Re.z+bt-Fe.z-Qe+se(Re._,Fe._))>0&&(V(ee(Re,De,Oe),De,Xe),Qe+=Xe,ct+=Xe),bt+=Re.m,Qe+=Fe.m,Tt+=qe.m,ct+=Pe.m;Re&&!B(Pe)&&(Pe.t=Re,Pe.m+=bt-ct),Fe&&!U(qe)&&(qe.t=Fe,qe.m+=Qe-Tt,Oe=De)}return Oe}(oe,Ee,oe.parent.A||Te[0])}function ge(oe){oe._.x=oe.z+oe.parent.m,oe.m+=oe.parent.m}function we(oe){oe.x*=ve,oe.y=oe.depth*ue}return Me.separation=function(oe){return arguments.length?(se=oe,Me):se},Me.size=function(oe){return arguments.length?(ye=!1,ve=+oe[0],ue=+oe[1],Me):ye?null:[ve,ue]},Me.nodeSize=function(oe){return arguments.length?(ye=!0,ve=+oe[0],ue=+oe[1],Me):ye?[ve,ue]:null},Me},m.treemap=function(){var se=ae,ve=!1,ue=1,ye=1,Me=[0],pe=I,ge=I,we=I,oe=I,de=I;function Te(Ae){return Ae.x0=Ae.y0=0,Ae.x1=ue,Ae.y1=ye,Ae.eachBefore(Ee),Me=[0],ve&&Ae.eachBefore(j),Ae}function Ee(Ae){var De=Me[Ae.depth],Ie=Ae.x0+De,Oe=Ae.y0+De,Xe=Ae.x1-De,Fe=Ae.y1-De;Xe<Ie&&(Ie=Xe=(Ie+Xe)/2),Fe<Oe&&(Oe=Fe=(Oe+Fe)/2),Ae.x0=Ie,Ae.y0=Oe,Ae.x1=Xe,Ae.y1=Fe,Ae.children&&(De=Me[Ae.depth+1]=pe(Ae)/2,Ie+=de(Ae)-De,Oe+=ge(Ae)-De,(Xe-=we(Ae)-De)<Ie&&(Ie=Xe=(Ie+Xe)/2),(Fe-=oe(Ae)-De)<Oe&&(Oe=Fe=(Oe+Fe)/2),se(Ae,Ie,Oe,Xe,Fe))}return Te.round=function(Ae){return arguments.length?(ve=!!Ae,Te):ve},Te.size=function(Ae){return arguments.length?(ue=+Ae[0],ye=+Ae[1],Te):[ue,ye]},Te.tile=function(Ae){return arguments.length?(se=M(Ae),Te):se},Te.padding=function(Ae){return arguments.length?Te.paddingInner(Ae).paddingOuter(Ae):Te.paddingInner()},Te.paddingInner=function(Ae){return arguments.length?(pe="function"==typeof Ae?Ae:P(+Ae),Te):pe},Te.paddingOuter=function(Ae){return arguments.length?Te.paddingTop(Ae).paddingRight(Ae).paddingBottom(Ae).paddingLeft(Ae):Te.paddingTop()},Te.paddingTop=function(Ae){return arguments.length?(ge="function"==typeof Ae?Ae:P(+Ae),Te):ge},Te.paddingRight=function(Ae){return arguments.length?(we="function"==typeof Ae?Ae:P(+Ae),Te):we},Te.paddingBottom=function(Ae){return arguments.length?(oe="function"==typeof Ae?Ae:P(+Ae),Te):oe},Te.paddingLeft=function(Ae){return arguments.length?(de="function"==typeof Ae?Ae:P(+Ae),Te):de},Te},m.treemapBinary=function(se,ve,ue,ye,Me){var pe,ge,we=se.children,oe=we.length,de=new Array(oe+1);for(de[0]=ge=pe=0;pe<oe;++pe)de[pe+1]=ge+=we[pe].value;!function Te(Ee,Ae,De,Ie,Oe,Xe,Fe){if(Ee>=Ae-1){var Pe=we[Ee];return Pe.x0=Ie,Pe.y0=Oe,Pe.x1=Xe,void(Pe.y1=Fe)}for(var Re=de[Ee],qe=De/2+Re,Qe=Ee+1,ct=Ae-1;Qe<ct;){var bt=Qe+ct>>>1;de[bt]<qe?Qe=bt+1:ct=bt}qe-de[Qe-1]<de[Qe]-qe&&Ee+1<Qe&&--Qe;var Tt=de[Qe]-Re,_t=De-Tt;if(Xe-Ie>Fe-Oe){var nt=(Ie*_t+Xe*Tt)/De;Te(Ee,Qe,Tt,Ie,Oe,nt,Fe),Te(Qe,Ae,_t,nt,Oe,Xe,Fe)}else{var Ke=(Oe*_t+Fe*Tt)/De;Te(Ee,Qe,Tt,Ie,Oe,Xe,Ke),Te(Qe,Ae,_t,Ie,Ke,Xe,Fe)}}(0,oe,se.value,ve,ue,ye,Me)},m.treemapDice=H,m.treemapResquarify=le,m.treemapSlice=K,m.treemapSliceDice=function(se,ve,ue,ye,Me){(1&se.depth?K:H)(se,ve,ue,ye,Me)},m.treemapSquarify=ae,Object.defineProperty(m,"__esModule",{value:!0})},g("object"==typeof Q&&void 0!==$?Q:(m=m||self).d3=m.d3||{})},{}],116:[function(v,$,Q){var m,g;m=this,g=function(m,g){"use strict";function k(J,te,ae,le,se){var ve=J*J,ue=ve*J;return((1-3*J+3*ve-ue)*te+(4-6*ve+3*ue)*ae+(1+3*J+3*ve-3*ue)*le+ue*se)/6}function x(J){var te=J.length-1;return function(ae){var le=ae<=0?ae=0:ae>=1?(ae=1,te-1):Math.floor(ae*te),se=J[le],ve=J[le+1];return k((ae-le/te)*te,le>0?J[le-1]:2*se-ve,se,ve,le<te-1?J[le+2]:2*ve-se)}}function e(J){var te=J.length;return function(ae){var le=Math.floor(((ae%=1)<0?++ae:ae)*te);return k((ae-le/te)*te,J[(le+te-1)%te],J[le%te],J[(le+1)%te],J[(le+2)%te])}}function n(J){return function(){return J}}function i(J,te){return function(ae){return J+ae*te}}function l(J,te){var ae=te-J;return ae?i(J,ae>180||ae<-180?ae-360*Math.round(ae/360):ae):n(isNaN(J)?te:J)}function d(J,te){var ae=te-J;return ae?i(J,ae):n(isNaN(J)?te:J)}var f=function J(te){var ae=function r(J){return 1==(J=+J)?d:function(te,ae){return ae-te?(le=te,se=ae,ve=J,le=Math.pow(le,ve),se=Math.pow(se,ve)-le,ve=1/ve,function(ue){return Math.pow(le+ue*se,ve)}):n(isNaN(te)?ae:te);var le,se,ve}}(te);function le(se,ve){var ue=ae((se=g.rgb(se)).r,(ve=g.rgb(ve)).r),ye=ae(se.g,ve.g),Me=ae(se.b,ve.b),pe=d(se.opacity,ve.opacity);return function(ge){return se.r=ue(ge),se.g=ye(ge),se.b=Me(ge),se.opacity=pe(ge),se+""}}return le.gamma=J,le}(1);function t(J){return function(te){var ae,le,se=te.length,ve=new Array(se),ue=new Array(se),ye=new Array(se);for(ae=0;ae<se;++ae)le=g.rgb(te[ae]),ve[ae]=le.r||0,ue[ae]=le.g||0,ye[ae]=le.b||0;return ve=J(ve),ue=J(ue),ye=J(ye),le.opacity=1,function(Me){return le.r=ve(Me),le.g=ue(Me),le.b=ye(Me),le+""}}}var h=t(x),s=t(e);function o(J,te){te||(te=[]);var ae,le=J?Math.min(te.length,J.length):0,se=te.slice();return function(ve){for(ae=0;ae<le;++ae)se[ae]=J[ae]*(1-ve)+te[ae]*ve;return se}}function p(J){return ArrayBuffer.isView(J)&&!(J instanceof DataView)}function c(J,te){var ae,le=te?te.length:0,se=J?Math.min(le,J.length):0,ve=new Array(se),ue=new Array(le);for(ae=0;ae<se;++ae)ve[ae]=T(J[ae],te[ae]);for(;ae<le;++ae)ue[ae]=te[ae];return function(ye){for(ae=0;ae<se;++ae)ue[ae]=ve[ae](ye);return ue}}function a(J,te){var ae=new Date;return J=+J,te=+te,function(le){return ae.setTime(J*(1-le)+te*le),ae}}function y(J,te){return J=+J,te=+te,function(ae){return J*(1-ae)+te*ae}}function u(J,te){var ae,le={},se={};for(ae in null!==J&&"object"==typeof J||(J={}),null!==te&&"object"==typeof te||(te={}),te)ae in J?le[ae]=T(J[ae],te[ae]):se[ae]=te[ae];return function(ve){for(ae in le)se[ae]=le[ae](ve);return se}}var _=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b=new RegExp(_.source,"g");function w(J,te){var ae,le,se,pe,ve=_.lastIndex=b.lastIndex=0,ue=-1,ye=[],Me=[];for(J+="",te+="";(ae=_.exec(J))&&(le=b.exec(te));)(se=le.index)>ve&&(se=te.slice(ve,se),ye[ue]?ye[ue]+=se:ye[++ue]=se),(ae=ae[0])===(le=le[0])?ye[ue]?ye[ue]+=le:ye[++ue]=le:(ye[++ue]=null,Me.push({i:ue,x:y(ae,le)})),ve=b.lastIndex;return ve<te.length&&(se=te.slice(ve),ye[ue]?ye[ue]+=se:ye[++ue]=se),ye.length<2?Me[0]?(pe=Me[0].x,function(ge){return pe(ge)+""}):function(pe){return function(){return pe}}(te):(te=Me.length,function(pe){for(var ge,we=0;we<te;++we)ye[(ge=Me[we]).i]=ge.x(pe);return ye.join("")})}function T(J,te){var ae,le=typeof te;return null==te||"boolean"===le?n(te):("number"===le?y:"string"===le?(ae=g.color(te))?(te=ae,f):w:te instanceof g.color?f:te instanceof Date?a:p(te)?o:Array.isArray(te)?c:"function"!=typeof te.valueOf&&"function"!=typeof te.toString||isNaN(te)?u:y)(J,te)}var C,M,I,P,S=180/Math.PI,E={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function R(J,te,ae,le,se,ve){var ue,ye,Me;return(ue=Math.sqrt(J*J+te*te))&&(J/=ue,te/=ue),(Me=J*ae+te*le)&&(ae-=J*Me,le-=te*Me),(ye=Math.sqrt(ae*ae+le*le))&&(ae/=ye,le/=ye,Me/=ye),J*le<te*ae&&(J=-J,te=-te,Me=-Me,ue=-ue),{translateX:se,translateY:ve,rotate:Math.atan2(te,J)*S,skewX:Math.atan(Me)*S,scaleX:ue,scaleY:ye}}function D(J,te,ae,le){function se(ve){return ve.length?ve.pop()+" ":""}return function(ve,ue){var pe,ge,we,ye=[],Me=[];return ve=J(ve),ue=J(ue),function(pe,ge,we,oe,de,Te){if(pe!==we||ge!==oe){var Ee=de.push("translate(",null,te,null,ae);Te.push({i:Ee-4,x:y(pe,we)},{i:Ee-2,x:y(ge,oe)})}else(we||oe)&&de.push("translate("+we+te+oe+ae)}(ve.translateX,ve.translateY,ue.translateX,ue.translateY,ye,Me),we=ye,(pe=ve.rotate)!==(ge=ue.rotate)?(pe-ge>180?ge+=360:ge-pe>180&&(pe+=360),Me.push({i:we.push(se(we)+"rotate(",null,le)-2,x:y(pe,ge)})):ge&&we.push(se(we)+"rotate("+ge+le),function(pe,ge,we,oe){pe!==ge?oe.push({i:we.push(se(we)+"skewX(",null,le)-2,x:y(pe,ge)}):ge&&we.push(se(we)+"skewX("+ge+le)}(ve.skewX,ue.skewX,ye,Me),function(pe,ge,we,oe,de,Te){if(pe!==we||ge!==oe){var Ee=de.push(se(de)+"scale(",null,",",null,")");Te.push({i:Ee-4,x:y(pe,we)},{i:Ee-2,x:y(ge,oe)})}else 1===we&&1===oe||de.push(se(de)+"scale("+we+","+oe+")")}(ve.scaleX,ve.scaleY,ue.scaleX,ue.scaleY,ye,Me),ve=ue=null,function(pe){for(var ge,we=-1,oe=Me.length;++we<oe;)ye[(ge=Me[we]).i]=ge.x(pe);return ye.join("")}}}var j=D(function(J){return"none"===J?E:(C||(C=document.createElement("DIV"),M=document.documentElement,I=document.defaultView),C.style.transform=J,J=I.getComputedStyle(M.appendChild(C),null).getPropertyValue("transform"),M.removeChild(C),R(+(J=J.slice(7,-1).split(","))[0],+J[1],+J[2],+J[3],+J[4],+J[5]))},"px, ","px)","deg)"),H=D(function(J){return null==J?E:(P||(P=document.createElementNS("http://www.w3.org/2000/svg","g")),P.setAttribute("transform",J),(J=P.transform.baseVal.consolidate())?R((J=J.matrix).a,J.b,J.c,J.d,J.e,J.f):E)},", ",")",")"),Y=Math.SQRT2;function X(J){return((J=Math.exp(J))+1/J)/2}function Z(J){return function(te,ae){var le=J((te=g.hsl(te)).h,(ae=g.hsl(ae)).h),se=d(te.s,ae.s),ve=d(te.l,ae.l),ue=d(te.opacity,ae.opacity);return function(ye){return te.h=le(ye),te.s=se(ye),te.l=ve(ye),te.opacity=ue(ye),te+""}}}var W=Z(l),re=Z(d);function U(J){return function(te,ae){var le=J((te=g.hcl(te)).h,(ae=g.hcl(ae)).h),se=d(te.c,ae.c),ve=d(te.l,ae.l),ue=d(te.opacity,ae.opacity);return function(ye){return te.h=le(ye),te.c=se(ye),te.l=ve(ye),te.opacity=ue(ye),te+""}}}var B=U(l),V=U(d);function ee(J){return function te(ae){function le(se,ve){var ue=J((se=g.cubehelix(se)).h,(ve=g.cubehelix(ve)).h),ye=d(se.s,ve.s),Me=d(se.l,ve.l),pe=d(se.opacity,ve.opacity);return function(ge){return se.h=ue(ge),se.s=ye(ge),se.l=Me(Math.pow(ge,ae)),se.opacity=pe(ge),se+""}}return ae=+ae,le.gamma=te,le}(1)}var N=ee(l),K=ee(d);m.interpolate=T,m.interpolateArray=function(J,te){return(p(te)?o:c)(J,te)},m.interpolateBasis=x,m.interpolateBasisClosed=e,m.interpolateCubehelix=N,m.interpolateCubehelixLong=K,m.interpolateDate=a,m.interpolateDiscrete=function(J){var te=J.length;return function(ae){return J[Math.max(0,Math.min(te-1,Math.floor(ae*te)))]}},m.interpolateHcl=B,m.interpolateHclLong=V,m.interpolateHsl=W,m.interpolateHslLong=re,m.interpolateHue=function(J,te){var ae=l(+J,+te);return function(le){var se=ae(le);return se-360*Math.floor(se/360)}},m.interpolateLab=function(J,te){var ae=d((J=g.lab(J)).l,(te=g.lab(te)).l),le=d(J.a,te.a),se=d(J.b,te.b),ve=d(J.opacity,te.opacity);return function(ue){return J.l=ae(ue),J.a=le(ue),J.b=se(ue),J.opacity=ve(ue),J+""}},m.interpolateNumber=y,m.interpolateNumberArray=o,m.interpolateObject=u,m.interpolateRgb=f,m.interpolateRgbBasis=h,m.interpolateRgbBasisClosed=s,m.interpolateRound=function(J,te){return J=+J,te=+te,function(ae){return Math.round(J*(1-ae)+te*ae)}},m.interpolateString=w,m.interpolateTransformCss=j,m.interpolateTransformSvg=H,m.interpolateZoom=function(J,te){var ae,le,se=J[0],ve=J[1],ue=J[2],pe=te[2],ge=te[0]-se,we=te[1]-ve,oe=ge*ge+we*we;if(oe<1e-12)le=Math.log(pe/ue)/Y,ae=function(Ie){return[se+Ie*ge,ve+Ie*we,ue*Math.exp(Y*Ie*le)]};else{var de=Math.sqrt(oe),Te=(pe*pe-ue*ue+4*oe)/(2*ue*2*de),Ee=(pe*pe-ue*ue-4*oe)/(2*pe*2*de),Ae=Math.log(Math.sqrt(Te*Te+1)-Te),De=Math.log(Math.sqrt(Ee*Ee+1)-Ee);le=(De-Ae)/Y,ae=function(Ie){var Oe,Re,Xe=Ie*le,Fe=X(Ae),Pe=ue/(2*de)*(Fe*(Oe=Y*Xe+Ae,((Oe=Math.exp(2*Oe))-1)/(Oe+1))-(Re=Ae,((Re=Math.exp(Re))-1/Re)/2));return[se+Pe*ge,ve+Pe*we,ue*Fe/X(Y*Xe+Ae)]}}return ae.duration=1e3*le,ae},m.piecewise=function(J,te){for(var ae=0,le=te.length-1,se=te[0],ve=new Array(le<0?0:le);ae<le;)ve[ae]=J(se,se=te[++ae]);return function(ue){var ye=Math.max(0,Math.min(le-1,Math.floor(ue*=le)));return ve[ye](ue-ye)}},m.quantize=function(J,te){for(var ae=new Array(te),le=0;le<te;++le)ae[le]=J(le/(te-1));return ae},Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof Q&&void 0!==$?g(Q,v("d3-color")):g((m=m||self).d3=m.d3||{},m.d3)},{"d3-color":109}],117:[function(v,$,Q){var m,g;m=this,g=function(m){"use strict";var g=Math.PI,k=2*g,x=k-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new e}e.prototype=n.prototype={constructor:e,moveTo:function(i,l){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+l)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(i,l){this._+="L"+(this._x1=+i)+","+(this._y1=+l)},quadraticCurveTo:function(i,l,r,d){this._+="Q"+ +i+","+ +l+","+(this._x1=+r)+","+(this._y1=+d)},bezierCurveTo:function(i,l,r,d,f,t){this._+="C"+ +i+","+ +l+","+ +r+","+ +d+","+(this._x1=+f)+","+(this._y1=+t)},arcTo:function(i,l,r,d,f){var t=this._x1,h=this._y1,s=(r=+r)-(i=+i),o=(d=+d)-(l=+l),p=t-i,c=h-l,a=p*p+c*c;if((f=+f)<0)throw new Error("negative radius: "+f);if(null===this._x1)this._+="M"+(this._x1=i)+","+(this._y1=l);else if(a>1e-6)if(Math.abs(c*s-o*p)>1e-6&&f){var y=r-t,u=d-h,_=s*s+o*o,b=y*y+u*u,w=Math.sqrt(_),T=Math.sqrt(a),C=f*Math.tan((g-Math.acos((_+a-b)/(2*w*T)))/2),M=C/T,I=C/w;Math.abs(M-1)>1e-6&&(this._+="L"+(i+M*p)+","+(l+M*c)),this._+="A"+f+","+f+",0,0,"+ +(c*y>p*u)+","+(this._x1=i+I*s)+","+(this._y1=l+I*o)}else this._+="L"+(this._x1=i)+","+(this._y1=l)},arc:function(i,l,r,d,f,t){i=+i,l=+l,t=!!t;var h=(r=+r)*Math.cos(d),s=r*Math.sin(d),o=i+h,p=l+s,c=1^t,a=t?d-f:f-d;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+o+","+p:(Math.abs(this._x1-o)>1e-6||Math.abs(this._y1-p)>1e-6)&&(this._+="L"+o+","+p),r&&(a<0&&(a=a%k+k),a>x?this._+="A"+r+","+r+",0,1,"+c+","+(i-h)+","+(l-s)+"A"+r+","+r+",0,1,"+c+","+(this._x1=o)+","+(this._y1=p):a>1e-6&&(this._+="A"+r+","+r+",0,"+ +(a>=g)+","+c+","+(this._x1=i+r*Math.cos(f))+","+(this._y1=l+r*Math.sin(f))))},rect:function(i,l,r,d){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+l)+"h"+ +r+"v"+ +d+"h"+-r+"Z"},toString:function(){return this._}},m.path=n,Object.defineProperty(m,"__esModule",{value:!0})},g("object"==typeof Q&&void 0!==$?Q:(m=m||self).d3=m.d3||{})},{}],118:[function(v,$,Q){var m,g;m=this,g=function(m){"use strict";function g(d,f,t,h){if(isNaN(f)||isNaN(t))return d;var s,o,p,c,a,y,u,_,b,w=d._root,T={data:h},C=d._x0,M=d._y0,I=d._x1,P=d._y1;if(!w)return d._root=T,d;for(;w.length;)if((y=f>=(o=(C+I)/2))?C=o:I=o,(u=t>=(p=(M+P)/2))?M=p:P=p,s=w,!(w=w[_=u<<1|y]))return s[_]=T,d;if(c=+d._x.call(null,w.data),a=+d._y.call(null,w.data),f===c&&t===a)return T.next=w,s?s[_]=T:d._root=T,d;do{s=s?s[_]=new Array(4):d._root=new Array(4),(y=f>=(o=(C+I)/2))?C=o:I=o,(u=t>=(p=(M+P)/2))?M=p:P=p}while((_=u<<1|y)==(b=(a>=p)<<1|c>=o));return s[b]=w,s[_]=T,d}function k(d,f,t,h,s){this.node=d,this.x0=f,this.y0=t,this.x1=h,this.y1=s}function x(d){return d[0]}function e(d){return d[1]}function n(d,f,t){var h=new i(f??x,t??e,NaN,NaN,NaN,NaN);return null==d?h:h.addAll(d)}function i(d,f,t,h,s,o){this._x=d,this._y=f,this._x0=t,this._y0=h,this._x1=s,this._y1=o,this._root=void 0}function l(d){for(var f={data:d.data},t=f;d=d.next;)t=t.next={data:d.data};return f}var r=n.prototype=i.prototype;r.copy=function(){var d,f,t=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),h=this._root;if(!h)return t;if(!h.length)return t._root=l(h),t;for(d=[{source:h,target:t._root=new Array(4)}];h=d.pop();)for(var s=0;s<4;++s)(f=h.source[s])&&(f.length?d.push({source:f,target:h.target[s]=new Array(4)}):h.target[s]=l(f));return t},r.add=function(d){var f=+this._x.call(null,d),t=+this._y.call(null,d);return g(this.cover(f,t),f,t,d)},r.addAll=function(d){var f,t,h,s,o=d.length,p=new Array(o),c=new Array(o),a=1/0,y=1/0,u=-1/0,_=-1/0;for(t=0;t<o;++t)isNaN(h=+this._x.call(null,f=d[t]))||isNaN(s=+this._y.call(null,f))||(p[t]=h,c[t]=s,h<a&&(a=h),h>u&&(u=h),s<y&&(y=s),s>_&&(_=s));if(a>u||y>_)return this;for(this.cover(a,y).cover(u,_),t=0;t<o;++t)g(this,p[t],c[t],d[t]);return this},r.cover=function(d,f){if(isNaN(d=+d)||isNaN(f=+f))return this;var t=this._x0,h=this._y0,s=this._x1,o=this._y1;if(isNaN(t))s=(t=Math.floor(d))+1,o=(h=Math.floor(f))+1;else{for(var p,c,a=s-t,y=this._root;t>d||d>=s||h>f||f>=o;)switch(c=(f<h)<<1|d<t,(p=new Array(4))[c]=y,y=p,a*=2,c){case 0:s=t+a,o=h+a;break;case 1:t=s-a,o=h+a;break;case 2:s=t+a,h=o-a;break;case 3:t=s-a,h=o-a}this._root&&this._root.length&&(this._root=y)}return this._x0=t,this._y0=h,this._x1=s,this._y1=o,this},r.data=function(){var d=[];return this.visit(function(f){if(!f.length)do{d.push(f.data)}while(f=f.next)}),d},r.extent=function(d){return arguments.length?this.cover(+d[0][0],+d[0][1]).cover(+d[1][0],+d[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},r.find=function(d,f,t){var h,s,o,p,c,a,y,u=this._x0,_=this._y0,b=this._x1,w=this._y1,T=[],C=this._root;for(C&&T.push(new k(C,u,_,b,w)),null==t?t=1/0:(u=d-t,_=f-t,b=d+t,w=f+t,t*=t);a=T.pop();)if(!(!(C=a.node)||(s=a.x0)>b||(o=a.y0)>w||(p=a.x1)<u||(c=a.y1)<_))if(C.length){var M=(s+p)/2,I=(o+c)/2;T.push(new k(C[3],M,I,p,c),new k(C[2],s,I,M,c),new k(C[1],M,o,p,I),new k(C[0],s,o,M,I)),(y=(f>=I)<<1|d>=M)&&(a=T[T.length-1],T[T.length-1]=T[T.length-1-y],T[T.length-1-y]=a)}else{var P=d-+this._x.call(null,C.data),S=f-+this._y.call(null,C.data),E=P*P+S*S;if(E<t){var R=Math.sqrt(t=E);u=d-R,_=f-R,b=d+R,w=f+R,h=C.data}}return h},r.remove=function(d){if(isNaN(o=+this._x.call(null,d))||isNaN(p=+this._y.call(null,d)))return this;var f,t,h,s,o,p,c,a,y,u,_,b,w=this._root,T=this._x0,C=this._y0,M=this._x1,I=this._y1;if(!w)return this;if(w.length)for(;;){if((y=o>=(c=(T+M)/2))?T=c:M=c,(u=p>=(a=(C+I)/2))?C=a:I=a,f=w,!(w=w[_=u<<1|y]))return this;if(!w.length)break;(f[_+1&3]||f[_+2&3]||f[_+3&3])&&(t=f,b=_)}for(;w.data!==d;)if(h=w,!(w=w.next))return this;return(s=w.next)&&delete w.next,h?(s?h.next=s:delete h.next,this):f?(s?f[_]=s:delete f[_],(w=f[0]||f[1]||f[2]||f[3])&&w===(f[3]||f[2]||f[1]||f[0])&&!w.length&&(t?t[b]=w:this._root=w),this):(this._root=s,this)},r.removeAll=function(d){for(var f=0,t=d.length;f<t;++f)this.remove(d[f]);return this},r.root=function(){return this._root},r.size=function(){var d=0;return this.visit(function(f){if(!f.length)do{++d}while(f=f.next)}),d},r.visit=function(d){var f,t,h,s,o,p,c=[],a=this._root;for(a&&c.push(new k(a,this._x0,this._y0,this._x1,this._y1));f=c.pop();)if(!d(a=f.node,h=f.x0,s=f.y0,o=f.x1,p=f.y1)&&a.length){var y=(h+o)/2,u=(s+p)/2;(t=a[3])&&c.push(new k(t,y,u,o,p)),(t=a[2])&&c.push(new k(t,h,u,y,p)),(t=a[1])&&c.push(new k(t,y,s,o,u)),(t=a[0])&&c.push(new k(t,h,s,y,u))}return this},r.visitAfter=function(d){var f,t=[],h=[];for(this._root&&t.push(new k(this._root,this._x0,this._y0,this._x1,this._y1));f=t.pop();){var s=f.node;if(s.length){var o,p=f.x0,c=f.y0,a=f.x1,y=f.y1,u=(p+a)/2,_=(c+y)/2;(o=s[0])&&t.push(new k(o,p,c,u,_)),(o=s[1])&&t.push(new k(o,u,c,a,_)),(o=s[2])&&t.push(new k(o,p,_,u,y)),(o=s[3])&&t.push(new k(o,u,_,a,y))}h.push(f)}for(;f=h.pop();)d(f.node,f.x0,f.y0,f.x1,f.y1);return this},r.x=function(d){return arguments.length?(this._x=d,this):this._x},r.y=function(d){return arguments.length?(this._y=d,this):this._y},m.quadtree=n,Object.defineProperty(m,"__esModule",{value:!0})},g("object"==typeof Q&&void 0!==$?Q:(m=m||self).d3=m.d3||{})},{}],119:[function(v,$,Q){var m,g;m=this,g=function(m,g){"use strict";function k(Se){return function(){return Se}}var x=Math.abs,e=Math.atan2,n=Math.cos,i=Math.max,l=Math.min,r=Math.sin,d=Math.sqrt,f=Math.PI,t=f/2,h=2*f;function s(Se){return Se>1?0:Se<-1?f:Math.acos(Se)}function o(Se){return Se>=1?t:Se<=-1?-t:Math.asin(Se)}function p(Se){return Se.innerRadius}function c(Se){return Se.outerRadius}function a(Se){return Se.startAngle}function y(Se){return Se.endAngle}function u(Se){return Se&&Se.padAngle}function _(Se,Ze,it,dt,Ct,Ut,Jt,qt){var pr=it-Se,Sr=dt-Ze,mr=Jt-Ct,tr=qt-Ut,rr=tr*pr-mr*Sr;if(!(rr*rr<1e-12))return[Se+(rr=(mr*(Ze-Ut)-tr*(Se-Ct))/rr)*pr,Ze+rr*Sr]}function b(Se,Ze,it,dt,Ct,Ut,Jt){var qt=Se-it,pr=Ze-dt,Sr=(Jt?Ut:-Ut)/d(qt*qt+pr*pr),mr=Sr*pr,tr=-Sr*qt,rr=Se+mr,ar=Ze+tr,dr=it+mr,xr=dt+tr,Lr=(rr+dr)/2,zr=(ar+xr)/2,Hr=dr-rr,Xr=xr-ar,cn=Hr*Hr+Xr*Xr,an=Ct-Ut,Nn=rr*xr-dr*ar,on=(Xr<0?-1:1)*d(i(0,an*an*cn-Nn*Nn)),wn=(Nn*Xr-Hr*on)/cn,An=(-Nn*Hr-Xr*on)/cn,ii=(Nn*Xr+Hr*on)/cn,Vr=(-Nn*Hr+Xr*on)/cn,sn=wn-Lr,xn=An-zr,nn=ii-Lr,fn=Vr-zr;return sn*sn+xn*xn>nn*nn+fn*fn&&(wn=ii,An=Vr),{cx:wn,cy:An,x01:-mr,y01:-tr,x11:wn*(Ct/an-1),y11:An*(Ct/an-1)}}function w(Se){this._context=Se}function T(Se){return new w(Se)}function C(Se){return Se[0]}function M(Se){return Se[1]}function I(){var Se=C,Ze=M,it=k(!0),dt=null,Ct=T,Ut=null;function Jt(qt){var pr,Sr,mr,tr=qt.length,rr=!1;for(null==dt&&(Ut=Ct(mr=g.path())),pr=0;pr<=tr;++pr)!(pr<tr&&it(Sr=qt[pr],pr,qt))===rr&&((rr=!rr)?Ut.lineStart():Ut.lineEnd()),rr&&Ut.point(+Se(Sr,pr,qt),+Ze(Sr,pr,qt));if(mr)return Ut=null,mr+""||null}return Jt.x=function(qt){return arguments.length?(Se="function"==typeof qt?qt:k(+qt),Jt):Se},Jt.y=function(qt){return arguments.length?(Ze="function"==typeof qt?qt:k(+qt),Jt):Ze},Jt.defined=function(qt){return arguments.length?(it="function"==typeof qt?qt:k(!!qt),Jt):it},Jt.curve=function(qt){return arguments.length?(Ct=qt,null!=dt&&(Ut=Ct(dt)),Jt):Ct},Jt.context=function(qt){return arguments.length?(null==qt?dt=Ut=null:Ut=Ct(dt=qt),Jt):dt},Jt}function P(){var Se=C,Ze=null,it=k(0),dt=M,Ct=k(!0),Ut=null,Jt=T,qt=null;function pr(mr){var tr,rr,ar,dr,xr,Lr=mr.length,zr=!1,Hr=new Array(Lr),Xr=new Array(Lr);for(null==Ut&&(qt=Jt(xr=g.path())),tr=0;tr<=Lr;++tr){if(!(tr<Lr&&Ct(dr=mr[tr],tr,mr))===zr)if(zr=!zr)rr=tr,qt.areaStart(),qt.lineStart();else{for(qt.lineEnd(),qt.lineStart(),ar=tr-1;ar>=rr;--ar)qt.point(Hr[ar],Xr[ar]);qt.lineEnd(),qt.areaEnd()}zr&&(Hr[tr]=+Se(dr,tr,mr),Xr[tr]=+it(dr,tr,mr),qt.point(Ze?+Ze(dr,tr,mr):Hr[tr],dt?+dt(dr,tr,mr):Xr[tr]))}if(xr)return qt=null,xr+""||null}function Sr(){return I().defined(Ct).curve(Jt).context(Ut)}return pr.x=function(mr){return arguments.length?(Se="function"==typeof mr?mr:k(+mr),Ze=null,pr):Se},pr.x0=function(mr){return arguments.length?(Se="function"==typeof mr?mr:k(+mr),pr):Se},pr.x1=function(mr){return arguments.length?(Ze=null==mr?null:"function"==typeof mr?mr:k(+mr),pr):Ze},pr.y=function(mr){return arguments.length?(it="function"==typeof mr?mr:k(+mr),dt=null,pr):it},pr.y0=function(mr){return arguments.length?(it="function"==typeof mr?mr:k(+mr),pr):it},pr.y1=function(mr){return arguments.length?(dt=null==mr?null:"function"==typeof mr?mr:k(+mr),pr):dt},pr.lineX0=pr.lineY0=function(){return Sr().x(Se).y(it)},pr.lineY1=function(){return Sr().x(Se).y(dt)},pr.lineX1=function(){return Sr().x(Ze).y(it)},pr.defined=function(mr){return arguments.length?(Ct="function"==typeof mr?mr:k(!!mr),pr):Ct},pr.curve=function(mr){return arguments.length?(Jt=mr,null!=Ut&&(qt=Jt(Ut)),pr):Jt},pr.context=function(mr){return arguments.length?(null==mr?Ut=qt=null:qt=Jt(Ut=mr),pr):Ut},pr}function S(Se,Ze){return Ze<Se?-1:Ze>Se?1:Ze>=Se?0:NaN}function E(Se){return Se}w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Se,Ze){switch(Se=+Se,Ze=+Ze,this._point){case 0:this._point=1,this._line?this._context.lineTo(Se,Ze):this._context.moveTo(Se,Ze);break;case 1:this._point=2;default:this._context.lineTo(Se,Ze)}}};var R=j(T);function D(Se){this._curve=Se}function j(Se){function Ze(it){return new D(Se(it))}return Ze._curve=Se,Ze}function H(Se){var Ze=Se.curve;return Se.angle=Se.x,delete Se.x,Se.radius=Se.y,delete Se.y,Se.curve=function(it){return arguments.length?Ze(j(it)):Ze()._curve},Se}function Y(){return H(I().curve(R))}function X(){var Se=P().curve(R),Ze=Se.curve,it=Se.lineX0,dt=Se.lineX1,Ct=Se.lineY0,Ut=Se.lineY1;return Se.angle=Se.x,delete Se.x,Se.startAngle=Se.x0,delete Se.x0,Se.endAngle=Se.x1,delete Se.x1,Se.radius=Se.y,delete Se.y,Se.innerRadius=Se.y0,delete Se.y0,Se.outerRadius=Se.y1,delete Se.y1,Se.lineStartAngle=function(){return H(it())},delete Se.lineX0,Se.lineEndAngle=function(){return H(dt())},delete Se.lineX1,Se.lineInnerRadius=function(){return H(Ct())},delete Se.lineY0,Se.lineOuterRadius=function(){return H(Ut())},delete Se.lineY1,Se.curve=function(Jt){return arguments.length?Ze(j(Jt)):Ze()._curve},Se}function Z(Se,Ze){return[(Ze=+Ze)*Math.cos(Se-=Math.PI/2),Ze*Math.sin(Se)]}D.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Se,Ze){this._curve.point(Ze*Math.sin(Se),Ze*-Math.cos(Se))}};var W=Array.prototype.slice;function re(Se){return Se.source}function U(Se){return Se.target}function B(Se){var Ze=re,it=U,dt=C,Ct=M,Ut=null;function Jt(){var qt,pr=W.call(arguments),Sr=Ze.apply(this,pr),mr=it.apply(this,pr);if(Ut||(Ut=qt=g.path()),Se(Ut,+dt.apply(this,(pr[0]=Sr,pr)),+Ct.apply(this,pr),+dt.apply(this,(pr[0]=mr,pr)),+Ct.apply(this,pr)),qt)return Ut=null,qt+""||null}return Jt.source=function(qt){return arguments.length?(Ze=qt,Jt):Ze},Jt.target=function(qt){return arguments.length?(it=qt,Jt):it},Jt.x=function(qt){return arguments.length?(dt="function"==typeof qt?qt:k(+qt),Jt):dt},Jt.y=function(qt){return arguments.length?(Ct="function"==typeof qt?qt:k(+qt),Jt):Ct},Jt.context=function(qt){return arguments.length?(Ut=qt??null,Jt):Ut},Jt}function V(Se,Ze,it,dt,Ct){Se.moveTo(Ze,it),Se.bezierCurveTo(Ze=(Ze+dt)/2,it,Ze,Ct,dt,Ct)}function ee(Se,Ze,it,dt,Ct){Se.moveTo(Ze,it),Se.bezierCurveTo(Ze,it=(it+Ct)/2,dt,it,dt,Ct)}function N(Se,Ze,it,dt,Ct){var Ut=Z(Ze,it),Jt=Z(Ze,it=(it+Ct)/2),qt=Z(dt,it),pr=Z(dt,Ct);Se.moveTo(Ut[0],Ut[1]),Se.bezierCurveTo(Jt[0],Jt[1],qt[0],qt[1],pr[0],pr[1])}var K={draw:function(Se,Ze){var it=Math.sqrt(Ze/f);Se.moveTo(it,0),Se.arc(0,0,it,0,h)}},J={draw:function(Se,Ze){var it=Math.sqrt(Ze/5)/2;Se.moveTo(-3*it,-it),Se.lineTo(-it,-it),Se.lineTo(-it,-3*it),Se.lineTo(it,-3*it),Se.lineTo(it,-it),Se.lineTo(3*it,-it),Se.lineTo(3*it,it),Se.lineTo(it,it),Se.lineTo(it,3*it),Se.lineTo(-it,3*it),Se.lineTo(-it,it),Se.lineTo(-3*it,it),Se.closePath()}},te=Math.sqrt(1/3),ae=2*te,le={draw:function(Se,Ze){var it=Math.sqrt(Ze/ae),dt=it*te;Se.moveTo(0,-it),Se.lineTo(dt,0),Se.lineTo(0,it),Se.lineTo(-dt,0),Se.closePath()}},se=Math.sin(f/10)/Math.sin(7*f/10),ve=Math.sin(h/10)*se,ue=-Math.cos(h/10)*se,ye={draw:function(Se,Ze){var it=Math.sqrt(.8908130915292852*Ze),dt=ve*it,Ct=ue*it;Se.moveTo(0,-it),Se.lineTo(dt,Ct);for(var Ut=1;Ut<5;++Ut){var Jt=h*Ut/5,qt=Math.cos(Jt),pr=Math.sin(Jt);Se.lineTo(pr*it,-qt*it),Se.lineTo(qt*dt-pr*Ct,pr*dt+qt*Ct)}Se.closePath()}},Me={draw:function(Se,Ze){var it=Math.sqrt(Ze),dt=-it/2;Se.rect(dt,dt,it,it)}},pe=Math.sqrt(3),ge={draw:function(Se,Ze){var it=-Math.sqrt(Ze/(3*pe));Se.moveTo(0,2*it),Se.lineTo(-pe*it,-it),Se.lineTo(pe*it,-it),Se.closePath()}},we=-.5,oe=Math.sqrt(3)/2,de=1/Math.sqrt(12),Te=3*(de/2+1),Ee={draw:function(Se,Ze){var it=Math.sqrt(Ze/Te),dt=it/2,Ct=it*de,Ut=dt,Jt=it*de+it,qt=-Ut,pr=Jt;Se.moveTo(dt,Ct),Se.lineTo(Ut,Jt),Se.lineTo(qt,pr),Se.lineTo(we*dt-oe*Ct,oe*dt+we*Ct),Se.lineTo(we*Ut-oe*Jt,oe*Ut+we*Jt),Se.lineTo(we*qt-oe*pr,oe*qt+we*pr),Se.lineTo(we*dt+oe*Ct,we*Ct-oe*dt),Se.lineTo(we*Ut+oe*Jt,we*Jt-oe*Ut),Se.lineTo(we*qt+oe*pr,we*pr-oe*qt),Se.closePath()}},Ae=[K,J,le,Me,ye,ge,Ee];function De(){}function Ie(Se,Ze,it){Se._context.bezierCurveTo((2*Se._x0+Se._x1)/3,(2*Se._y0+Se._y1)/3,(Se._x0+2*Se._x1)/3,(Se._y0+2*Se._y1)/3,(Se._x0+4*Se._x1+Ze)/6,(Se._y0+4*Se._y1+it)/6)}function Oe(Se){this._context=Se}function Xe(Se){this._context=Se}function Fe(Se){this._context=Se}function Pe(Se,Ze){this._basis=new Oe(Se),this._beta=Ze}Oe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ie(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Se,Ze){switch(Se=+Se,Ze=+Ze,this._point){case 0:this._point=1,this._line?this._context.lineTo(Se,Ze):this._context.moveTo(Se,Ze);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ie(this,Se,Ze)}this._x0=this._x1,this._x1=Se,this._y0=this._y1,this._y1=Ze}},Xe.prototype={areaStart:De,areaEnd:De,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Se,Ze){switch(Se=+Se,Ze=+Ze,this._point){case 0:this._point=1,this._x2=Se,this._y2=Ze;break;case 1:this._point=2,this._x3=Se,this._y3=Ze;break;case 2:this._point=3,this._x4=Se,this._y4=Ze,this._context.moveTo((this._x0+4*this._x1+Se)/6,(this._y0+4*this._y1+Ze)/6);break;default:Ie(this,Se,Ze)}this._x0=this._x1,this._x1=Se,this._y0=this._y1,this._y1=Ze}},Fe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Se,Ze){switch(Se=+Se,Ze=+Ze,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var it=(this._x0+4*this._x1+Se)/6,dt=(this._y0+4*this._y1+Ze)/6;this._line?this._context.lineTo(it,dt):this._context.moveTo(it,dt);break;case 3:this._point=4;default:Ie(this,Se,Ze)}this._x0=this._x1,this._x1=Se,this._y0=this._y1,this._y1=Ze}},Pe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Se=this._x,Ze=this._y,it=Se.length-1;if(it>0)for(var dt,Ct=Se[0],Ut=Ze[0],Jt=Se[it]-Ct,qt=Ze[it]-Ut,pr=-1;++pr<=it;)this._basis.point(this._beta*Se[pr]+(1-this._beta)*(Ct+(dt=pr/it)*Jt),this._beta*Ze[pr]+(1-this._beta)*(Ut+dt*qt));this._x=this._y=null,this._basis.lineEnd()},point:function(Se,Ze){this._x.push(+Se),this._y.push(+Ze)}};var Re=function Se(Ze){function it(dt){return 1===Ze?new Oe(dt):new Pe(dt,Ze)}return it.beta=function(dt){return Se(+dt)},it}(.85);function qe(Se,Ze,it){Se._context.bezierCurveTo(Se._x1+Se._k*(Se._x2-Se._x0),Se._y1+Se._k*(Se._y2-Se._y0),Se._x2+Se._k*(Se._x1-Ze),Se._y2+Se._k*(Se._y1-it),Se._x2,Se._y2)}function Qe(Se,Ze){this._context=Se,this._k=(1-Ze)/6}Qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:qe(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Se,Ze){switch(Se=+Se,Ze=+Ze,this._point){case 0:this._point=1,this._line?this._context.lineTo(Se,Ze):this._context.moveTo(Se,Ze);break;case 1:this._point=2,this._x1=Se,this._y1=Ze;break;case 2:this._point=3;default:qe(this,Se,Ze)}this._x0=this._x1,this._x1=this._x2,this._x2=Se,this._y0=this._y1,this._y1=this._y2,this._y2=Ze}};var ct=function Se(Ze){function it(dt){return new Qe(dt,Ze)}return it.tension=function(dt){return Se(+dt)},it}(0);function bt(Se,Ze){this._context=Se,this._k=(1-Ze)/6}bt.prototype={areaStart:De,areaEnd:De,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Se,Ze){switch(Se=+Se,Ze=+Ze,this._point){case 0:this._point=1,this._x3=Se,this._y3=Ze;break;case 1:this._point=2,this._context.moveTo(this._x4=Se,this._y4=Ze);break;case 2:this._point=3,this._x5=Se,this._y5=Ze;break;default:qe(this,Se,Ze)}this._x0=this._x1,this._x1=this._x2,this._x2=Se,this._y0=this._y1,this._y1=this._y2,this._y2=Ze}};var Tt=function Se(Ze){function it(dt){return new bt(dt,Ze)}return it.tension=function(dt){return Se(+dt)},it}(0);function _t(Se,Ze){this._context=Se,this._k=(1-Ze)/6}_t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Se,Ze){switch(Se=+Se,Ze=+Ze,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:qe(this,Se,Ze)}this._x0=this._x1,this._x1=this._x2,this._x2=Se,this._y0=this._y1,this._y1=this._y2,this._y2=Ze}};var nt=function Se(Ze){function it(dt){return new _t(dt,Ze)}return it.tension=function(dt){return Se(+dt)},it}(0);function Ke(Se,Ze,it){var dt=Se._x1,Ct=Se._y1,Ut=Se._x2,Jt=Se._y2;if(Se._l01_a>1e-12){var qt=2*Se._l01_2a+3*Se._l01_a*Se._l12_a+Se._l12_2a,pr=3*Se._l01_a*(Se._l01_a+Se._l12_a);dt=(dt*qt-Se._x0*Se._l12_2a+Se._x2*Se._l01_2a)/pr,Ct=(Ct*qt-Se._y0*Se._l12_2a+Se._y2*Se._l01_2a)/pr}if(Se._l23_a>1e-12){var Sr=2*Se._l23_2a+3*Se._l23_a*Se._l12_a+Se._l12_2a,mr=3*Se._l23_a*(Se._l23_a+Se._l12_a);Ut=(Ut*Sr+Se._x1*Se._l23_2a-Ze*Se._l12_2a)/mr,Jt=(Jt*Sr+Se._y1*Se._l23_2a-it*Se._l12_2a)/mr}Se._context.bezierCurveTo(dt,Ct,Ut,Jt,Se._x2,Se._y2)}function xt(Se,Ze){this._context=Se,this._alpha=Ze}xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Se,Ze){if(Se=+Se,Ze=+Ze,this._point){var it=this._x2-Se,dt=this._y2-Ze;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(it*it+dt*dt,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Se,Ze):this._context.moveTo(Se,Ze);break;case 1:this._point=2;break;case 2:this._point=3;default:Ke(this,Se,Ze)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Se,this._y0=this._y1,this._y1=this._y2,this._y2=Ze}};var Ht=function Se(Ze){function it(dt){return Ze?new xt(dt,Ze):new Qe(dt,0)}return it.alpha=function(dt){return Se(+dt)},it}(.5);function Zt(Se,Ze){this._context=Se,this._alpha=Ze}Zt.prototype={areaStart:De,areaEnd:De,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Se,Ze){if(Se=+Se,Ze=+Ze,this._point){var it=this._x2-Se,dt=this._y2-Ze;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(it*it+dt*dt,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Se,this._y3=Ze;break;case 1:this._point=2,this._context.moveTo(this._x4=Se,this._y4=Ze);break;case 2:this._point=3,this._x5=Se,this._y5=Ze;break;default:Ke(this,Se,Ze)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Se,this._y0=this._y1,this._y1=this._y2,this._y2=Ze}};var $t=function Se(Ze){function it(dt){return Ze?new Zt(dt,Ze):new bt(dt,0)}return it.alpha=function(dt){return Se(+dt)},it}(.5);function Xt(Se,Ze){this._context=Se,this._alpha=Ze}Xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Se,Ze){if(Se=+Se,Ze=+Ze,this._point){var it=this._x2-Se,dt=this._y2-Ze;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(it*it+dt*dt,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ke(this,Se,Ze)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Se,this._y0=this._y1,this._y1=this._y2,this._y2=Ze}};var cr=function Se(Ze){function it(dt){return Ze?new Xt(dt,Ze):new _t(dt,0)}return it.alpha=function(dt){return Se(+dt)},it}(.5);function Ft(Se){this._context=Se}function Be(Se){return Se<0?-1:1}function He(Se,Ze,it){var dt=Se._x1-Se._x0,Ct=Ze-Se._x1,Ut=(Se._y1-Se._y0)/(dt||Ct<0&&-0),Jt=(it-Se._y1)/(Ct||dt<0&&-0),qt=(Ut*Ct+Jt*dt)/(dt+Ct);return(Be(Ut)+Be(Jt))*Math.min(Math.abs(Ut),Math.abs(Jt),.5*Math.abs(qt))||0}function he(Se,Ze){var it=Se._x1-Se._x0;return it?(3*(Se._y1-Se._y0)/it-Ze)/2:Ze}function be(Se,Ze,it){var dt=Se._x0,Ut=Se._x1,Jt=Se._y1,qt=(Ut-dt)/3;Se._context.bezierCurveTo(dt+qt,Se._y0+qt*Ze,Ut-qt,Jt-qt*it,Ut,Jt)}function ze(Se){this._context=Se}function Ve(Se){this._context=new Je(Se)}function Je(Se){this._context=Se}function Ye(Se){this._context=Se}function lt(Se){var Ze,it,dt=Se.length-1,Ct=new Array(dt),Ut=new Array(dt),Jt=new Array(dt);for(Ct[0]=0,Ut[0]=2,Jt[0]=Se[0]+2*Se[1],Ze=1;Ze<dt-1;++Ze)Ct[Ze]=1,Ut[Ze]=4,Jt[Ze]=4*Se[Ze]+2*Se[Ze+1];for(Ct[dt-1]=2,Ut[dt-1]=7,Jt[dt-1]=8*Se[dt-1]+Se[dt],Ze=1;Ze<dt;++Ze)Ut[Ze]-=it=Ct[Ze]/Ut[Ze-1],Jt[Ze]-=it*Jt[Ze-1];for(Ct[dt-1]=Jt[dt-1]/Ut[dt-1],Ze=dt-2;Ze>=0;--Ze)Ct[Ze]=(Jt[Ze]-Ct[Ze+1])/Ut[Ze];for(Ut[dt-1]=(Se[dt]+Ct[dt-1])/2,Ze=0;Ze<dt-1;++Ze)Ut[Ze]=2*Se[Ze+1]-Ct[Ze+1];return[Ct,Ut]}function st(Se,Ze){this._context=Se,this._t=Ze}function Mt(Se,Ze){if((Ct=Se.length)>1)for(var it,dt,Ct,Ut=1,Jt=Se[Ze[0]],qt=Jt.length;Ut<Ct;++Ut)for(dt=Jt,Jt=Se[Ze[Ut]],it=0;it<qt;++it)Jt[it][1]+=Jt[it][0]=isNaN(dt[it][1])?dt[it][0]:dt[it][1]}function Dt(Se){for(var Ze=Se.length,it=new Array(Ze);--Ze>=0;)it[Ze]=Ze;return it}function ht(Se,Ze){return Se[Ze]}function mt(Se){var Ze=Se.map(Ot);return Dt(Se).sort(function(it,dt){return Ze[it]-Ze[dt]})}function Ot(Se){for(var Ze,it=-1,dt=0,Ct=Se.length,Ut=-1/0;++it<Ct;)(Ze=+Se[it][1])>Ut&&(Ut=Ze,dt=it);return dt}function At(Se){var Ze=Se.map(It);return Dt(Se).sort(function(it,dt){return Ze[it]-Ze[dt]})}function It(Se){for(var Ze,it=0,dt=-1,Ct=Se.length;++dt<Ct;)(Ze=+Se[dt][1])&&(it+=Ze);return it}Ft.prototype={areaStart:De,areaEnd:De,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Se,Ze){Se=+Se,Ze=+Ze,this._point?this._context.lineTo(Se,Ze):(this._point=1,this._context.moveTo(Se,Ze))}},ze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:be(this,this._t0,he(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Se,Ze){var it=NaN;if(Ze=+Ze,(Se=+Se)!==this._x1||Ze!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Se,Ze):this._context.moveTo(Se,Ze);break;case 1:this._point=2;break;case 2:this._point=3,be(this,he(this,it=He(this,Se,Ze)),it);break;default:be(this,this._t0,it=He(this,Se,Ze))}this._x0=this._x1,this._x1=Se,this._y0=this._y1,this._y1=Ze,this._t0=it}}},(Ve.prototype=Object.create(ze.prototype)).point=function(Se,Ze){ze.prototype.point.call(this,Ze,Se)},Je.prototype={moveTo:function(Se,Ze){this._context.moveTo(Ze,Se)},closePath:function(){this._context.closePath()},lineTo:function(Se,Ze){this._context.lineTo(Ze,Se)},bezierCurveTo:function(Se,Ze,it,dt,Ct,Ut){this._context.bezierCurveTo(Ze,Se,dt,it,Ut,Ct)}},Ye.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Se=this._x,Ze=this._y,it=Se.length;if(it)if(this._line?this._context.lineTo(Se[0],Ze[0]):this._context.moveTo(Se[0],Ze[0]),2===it)this._context.lineTo(Se[1],Ze[1]);else for(var dt=lt(Se),Ct=lt(Ze),Ut=0,Jt=1;Jt<it;++Ut,++Jt)this._context.bezierCurveTo(dt[0][Ut],Ct[0][Ut],dt[1][Ut],Ct[1][Ut],Se[Jt],Ze[Jt]);(this._line||0!==this._line&&1===it)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Se,Ze){this._x.push(+Se),this._y.push(+Ze)}},st.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Se,Ze){switch(Se=+Se,Ze=+Ze,this._point){case 0:this._point=1,this._line?this._context.lineTo(Se,Ze):this._context.moveTo(Se,Ze);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,Ze),this._context.lineTo(Se,Ze);else{var it=this._x*(1-this._t)+Se*this._t;this._context.lineTo(it,this._y),this._context.lineTo(it,Ze)}}this._x=Se,this._y=Ze}},m.arc=function(){var Se=p,Ze=c,it=k(0),dt=null,Ct=a,Ut=y,Jt=u,qt=null;function pr(){var Sr,mr,tr=+Se.apply(this,arguments),rr=+Ze.apply(this,arguments),ar=Ct.apply(this,arguments)-t,dr=Ut.apply(this,arguments)-t,xr=x(dr-ar),Lr=dr>ar;if(qt||(qt=Sr=g.path()),rr<tr&&(mr=rr,rr=tr,tr=mr),rr>1e-12)if(xr>h-1e-12)qt.moveTo(rr*n(ar),rr*r(ar)),qt.arc(0,0,rr,ar,dr,!Lr),tr>1e-12&&(qt.moveTo(tr*n(dr),tr*r(dr)),qt.arc(0,0,tr,dr,ar,Lr));else{var zr,Hr,Xr=ar,cn=dr,an=ar,Nn=dr,on=xr,wn=xr,An=Jt.apply(this,arguments)/2,ii=An>1e-12&&(dt?+dt.apply(this,arguments):d(tr*tr+rr*rr)),Vr=l(x(rr-tr)/2,+it.apply(this,arguments)),sn=Vr,xn=Vr;if(ii>1e-12){var nn=o(ii/tr*r(An)),fn=o(ii/rr*r(An));(on-=2*nn)>1e-12?(an+=nn*=Lr?1:-1,Nn-=nn):(on=0,an=Nn=(ar+dr)/2),(wn-=2*fn)>1e-12?(Xr+=fn*=Lr?1:-1,cn-=fn):(wn=0,Xr=cn=(ar+dr)/2)}var Xn=rr*n(Xr),Mn=rr*r(Xr),On=tr*n(Nn),si=tr*r(Nn);if(Vr>1e-12){var or,br=rr*n(cn),Rt=rr*r(cn),fr=tr*n(an),gr=tr*r(an);if(xr<f&&(or=_(Xn,Mn,fr,gr,br,Rt,On,si))){var jr=Xn-or[0],Br=Mn-or[1],Fr=br-or[0],Er=Rt-or[1],_r=1/r(s((jr*Fr+Br*Er)/(d(jr*jr+Br*Br)*d(Fr*Fr+Er*Er)))/2),kr=d(or[0]*or[0]+or[1]*or[1]);sn=l(Vr,(tr-kr)/(_r-1)),xn=l(Vr,(rr-kr)/(_r+1))}}wn>1e-12?xn>1e-12?(zr=b(fr,gr,Xn,Mn,rr,xn,Lr),Hr=b(br,Rt,On,si,rr,xn,Lr),qt.moveTo(zr.cx+zr.x01,zr.cy+zr.y01),xn<Vr?qt.arc(zr.cx,zr.cy,xn,e(zr.y01,zr.x01),e(Hr.y01,Hr.x01),!Lr):(qt.arc(zr.cx,zr.cy,xn,e(zr.y01,zr.x01),e(zr.y11,zr.x11),!Lr),qt.arc(0,0,rr,e(zr.cy+zr.y11,zr.cx+zr.x11),e(Hr.cy+Hr.y11,Hr.cx+Hr.x11),!Lr),qt.arc(Hr.cx,Hr.cy,xn,e(Hr.y11,Hr.x11),e(Hr.y01,Hr.x01),!Lr))):(qt.moveTo(Xn,Mn),qt.arc(0,0,rr,Xr,cn,!Lr)):qt.moveTo(Xn,Mn),tr>1e-12&&on>1e-12?sn>1e-12?(zr=b(On,si,br,Rt,tr,-sn,Lr),Hr=b(Xn,Mn,fr,gr,tr,-sn,Lr),qt.lineTo(zr.cx+zr.x01,zr.cy+zr.y01),sn<Vr?qt.arc(zr.cx,zr.cy,sn,e(zr.y01,zr.x01),e(Hr.y01,Hr.x01),!Lr):(qt.arc(zr.cx,zr.cy,sn,e(zr.y01,zr.x01),e(zr.y11,zr.x11),!Lr),qt.arc(0,0,tr,e(zr.cy+zr.y11,zr.cx+zr.x11),e(Hr.cy+Hr.y11,Hr.cx+Hr.x11),Lr),qt.arc(Hr.cx,Hr.cy,sn,e(Hr.y11,Hr.x11),e(Hr.y01,Hr.x01),!Lr))):qt.arc(0,0,tr,Nn,an,Lr):qt.lineTo(On,si)}else qt.moveTo(0,0);if(qt.closePath(),Sr)return qt=null,Sr+""||null}return pr.centroid=function(){var Sr=(+Se.apply(this,arguments)+ +Ze.apply(this,arguments))/2,mr=(+Ct.apply(this,arguments)+ +Ut.apply(this,arguments))/2-f/2;return[n(mr)*Sr,r(mr)*Sr]},pr.innerRadius=function(Sr){return arguments.length?(Se="function"==typeof Sr?Sr:k(+Sr),pr):Se},pr.outerRadius=function(Sr){return arguments.length?(Ze="function"==typeof Sr?Sr:k(+Sr),pr):Ze},pr.cornerRadius=function(Sr){return arguments.length?(it="function"==typeof Sr?Sr:k(+Sr),pr):it},pr.padRadius=function(Sr){return arguments.length?(dt=null==Sr?null:"function"==typeof Sr?Sr:k(+Sr),pr):dt},pr.startAngle=function(Sr){return arguments.length?(Ct="function"==typeof Sr?Sr:k(+Sr),pr):Ct},pr.endAngle=function(Sr){return arguments.length?(Ut="function"==typeof Sr?Sr:k(+Sr),pr):Ut},pr.padAngle=function(Sr){return arguments.length?(Jt="function"==typeof Sr?Sr:k(+Sr),pr):Jt},pr.context=function(Sr){return arguments.length?(qt=Sr??null,pr):qt},pr},m.area=P,m.areaRadial=X,m.curveBasis=function(Se){return new Oe(Se)},m.curveBasisClosed=function(Se){return new Xe(Se)},m.curveBasisOpen=function(Se){return new Fe(Se)},m.curveBundle=Re,m.curveCardinal=ct,m.curveCardinalClosed=Tt,m.curveCardinalOpen=nt,m.curveCatmullRom=Ht,m.curveCatmullRomClosed=$t,m.curveCatmullRomOpen=cr,m.curveLinear=T,m.curveLinearClosed=function(Se){return new Ft(Se)},m.curveMonotoneX=function(Se){return new ze(Se)},m.curveMonotoneY=function(Se){return new Ve(Se)},m.curveNatural=function(Se){return new Ye(Se)},m.curveStep=function(Se){return new st(Se,.5)},m.curveStepAfter=function(Se){return new st(Se,1)},m.curveStepBefore=function(Se){return new st(Se,0)},m.line=I,m.lineRadial=Y,m.linkHorizontal=function(){return B(V)},m.linkRadial=function(){var Se=B(N);return Se.angle=Se.x,delete Se.x,Se.radius=Se.y,delete Se.y,Se},m.linkVertical=function(){return B(ee)},m.pie=function(){var Se=E,Ze=S,it=null,dt=k(0),Ct=k(h),Ut=k(0);function Jt(qt){var pr,Sr,mr,tr,rr,ar=qt.length,dr=0,xr=new Array(ar),Lr=new Array(ar),zr=+dt.apply(this,arguments),Hr=Math.min(h,Math.max(-h,Ct.apply(this,arguments)-zr)),Xr=Math.min(Math.abs(Hr)/ar,Ut.apply(this,arguments)),cn=Xr*(Hr<0?-1:1);for(pr=0;pr<ar;++pr)(rr=Lr[xr[pr]=pr]=+Se(qt[pr],pr,qt))>0&&(dr+=rr);for(null!=Ze?xr.sort(function(an,Nn){return Ze(Lr[an],Lr[Nn])}):null!=it&&xr.sort(function(an,Nn){return it(qt[an],qt[Nn])}),pr=0,mr=dr?(Hr-ar*cn)/dr:0;pr<ar;++pr,zr=tr)tr=zr+((rr=Lr[Sr=xr[pr]])>0?rr*mr:0)+cn,Lr[Sr]={data:qt[Sr],index:pr,value:rr,startAngle:zr,endAngle:tr,padAngle:Xr};return Lr}return Jt.value=function(qt){return arguments.length?(Se="function"==typeof qt?qt:k(+qt),Jt):Se},Jt.sortValues=function(qt){return arguments.length?(Ze=qt,it=null,Jt):Ze},Jt.sort=function(qt){return arguments.length?(it=qt,Ze=null,Jt):it},Jt.startAngle=function(qt){return arguments.length?(dt="function"==typeof qt?qt:k(+qt),Jt):dt},Jt.endAngle=function(qt){return arguments.length?(Ct="function"==typeof qt?qt:k(+qt),Jt):Ct},Jt.padAngle=function(qt){return arguments.length?(Ut="function"==typeof qt?qt:k(+qt),Jt):Ut},Jt},m.pointRadial=Z,m.radialArea=X,m.radialLine=Y,m.stack=function(){var Se=k([]),Ze=Dt,it=Mt,dt=ht;function Ct(Ut){var Jt,qt,pr=Se.apply(this,arguments),Sr=Ut.length,mr=pr.length,tr=new Array(mr);for(Jt=0;Jt<mr;++Jt){for(var rr,ar=pr[Jt],dr=tr[Jt]=new Array(Sr),xr=0;xr<Sr;++xr)dr[xr]=rr=[0,+dt(Ut[xr],ar,xr,Ut)],rr.data=Ut[xr];dr.key=ar}for(Jt=0,qt=Ze(tr);Jt<mr;++Jt)tr[qt[Jt]].index=Jt;return it(tr,qt),tr}return Ct.keys=function(Ut){return arguments.length?(Se="function"==typeof Ut?Ut:k(W.call(Ut)),Ct):Se},Ct.value=function(Ut){return arguments.length?(dt="function"==typeof Ut?Ut:k(+Ut),Ct):dt},Ct.order=function(Ut){return arguments.length?(Ze=null==Ut?Dt:"function"==typeof Ut?Ut:k(W.call(Ut)),Ct):Ze},Ct.offset=function(Ut){return arguments.length?(it=Ut??Mt,Ct):it},Ct},m.stackOffsetDiverging=function(Se,Ze){if((qt=Se.length)>0)for(var it,dt,Ct,Ut,Jt,qt,pr=0,Sr=Se[Ze[0]].length;pr<Sr;++pr)for(Ut=Jt=0,it=0;it<qt;++it)(Ct=(dt=Se[Ze[it]][pr])[1]-dt[0])>0?(dt[0]=Ut,dt[1]=Ut+=Ct):Ct<0?(dt[1]=Jt,dt[0]=Jt+=Ct):(dt[0]=0,dt[1]=Ct)},m.stackOffsetExpand=function(Se,Ze){if((dt=Se.length)>0){for(var it,dt,Ct,Ut=0,Jt=Se[0].length;Ut<Jt;++Ut){for(Ct=it=0;it<dt;++it)Ct+=Se[it][Ut][1]||0;if(Ct)for(it=0;it<dt;++it)Se[it][Ut][1]/=Ct}Mt(Se,Ze)}},m.stackOffsetNone=Mt,m.stackOffsetSilhouette=function(Se,Ze){if((it=Se.length)>0){for(var it,dt=0,Ct=Se[Ze[0]],Ut=Ct.length;dt<Ut;++dt){for(var Jt=0,qt=0;Jt<it;++Jt)qt+=Se[Jt][dt][1]||0;Ct[dt][1]+=Ct[dt][0]=-qt/2}Mt(Se,Ze)}},m.stackOffsetWiggle=function(Se,Ze){if((Ct=Se.length)>0&&(dt=(it=Se[Ze[0]]).length)>0){for(var it,dt,Ct,Ut=0,Jt=1;Jt<dt;++Jt){for(var qt=0,pr=0,Sr=0;qt<Ct;++qt){for(var mr=Se[Ze[qt]],tr=mr[Jt][1]||0,rr=(tr-(mr[Jt-1][1]||0))/2,ar=0;ar<qt;++ar){var dr=Se[Ze[ar]];rr+=(dr[Jt][1]||0)-(dr[Jt-1][1]||0)}pr+=tr,Sr+=rr*tr}it[Jt-1][1]+=it[Jt-1][0]=Ut,pr&&(Ut-=Sr/pr)}it[Jt-1][1]+=it[Jt-1][0]=Ut,Mt(Se,Ze)}},m.stackOrderAppearance=mt,m.stackOrderAscending=At,m.stackOrderDescending=function(Se){return At(Se).reverse()},m.stackOrderInsideOut=function(Se){var Ze,it,dt=Se.length,Ct=Se.map(It),Ut=mt(Se),Jt=0,qt=0,pr=[],Sr=[];for(Ze=0;Ze<dt;++Ze)it=Ut[Ze],Jt<qt?(Jt+=Ct[it],pr.push(it)):(qt+=Ct[it],Sr.push(it));return Sr.reverse().concat(pr)},m.stackOrderNone=Dt,m.stackOrderReverse=function(Se){return Dt(Se).reverse()},m.symbol=function(){var Se=k(K),Ze=k(64),it=null;function dt(){var Ct;if(it||(it=Ct=g.path()),Se.apply(this,arguments).draw(it,+Ze.apply(this,arguments)),Ct)return it=null,Ct+""||null}return dt.type=function(Ct){return arguments.length?(Se="function"==typeof Ct?Ct:k(Ct),dt):Se},dt.size=function(Ct){return arguments.length?(Ze="function"==typeof Ct?Ct:k(+Ct),dt):Ze},dt.context=function(Ct){return arguments.length?(it=Ct??null,dt):it},dt},m.symbolCircle=K,m.symbolCross=J,m.symbolDiamond=le,m.symbolSquare=Me,m.symbolStar=ye,m.symbolTriangle=ge,m.symbolWye=Ee,m.symbols=Ae,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof Q&&void 0!==$?g(Q,v("d3-path")):g((m=m||self).d3=m.d3||{},m.d3)},{"d3-path":117}],120:[function(v,$,Q){var m,g;m=this,g=function(m,g){"use strict";function k(nt){if(0<=nt.y&&nt.y<100){var Ke=new Date(-1,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L);return Ke.setFullYear(nt.y),Ke}return new Date(nt.y,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L)}function x(nt){if(0<=nt.y&&nt.y<100){var Ke=new Date(Date.UTC(-1,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L));return Ke.setUTCFullYear(nt.y),Ke}return new Date(Date.UTC(nt.y,nt.m,nt.d,nt.H,nt.M,nt.S,nt.L))}function e(nt,Ke,xt){return{y:nt,m:Ke,d:xt,H:0,M:0,S:0,L:0}}function n(nt){var Ke=nt.dateTime,xt=nt.date,Ht=nt.time,Zt=nt.periods,$t=nt.days,Xt=nt.shortDays,cr=nt.months,Ft=nt.shortMonths,Be=s(Zt),He=o(Zt),he=s($t),be=o($t),ze=s(Xt),Ve=o(Xt),Je=s(cr),Ye=o(cr),lt=s(Ft),st=o(Ft),Mt={a:function(It){return Xt[It.getDay()]},A:function(It){return $t[It.getDay()]},b:function(It){return Ft[It.getMonth()]},B:function(It){return cr[It.getMonth()]},c:null,d:X,e:X,f:B,H:Z,I:W,j:re,L:U,m:V,M:ee,p:function(It){return Zt[+(It.getHours()>=12)]},q:function(It){return 1+~~(It.getMonth()/3)},Q:Qe,s:ct,S:N,u:K,U:J,V:te,w:ae,W:le,x:null,X:null,y:se,Y:ve,Z:ue,"%":qe},Dt={a:function(It){return Xt[It.getUTCDay()]},A:function(It){return $t[It.getUTCDay()]},b:function(It){return Ft[It.getUTCMonth()]},B:function(It){return cr[It.getUTCMonth()]},c:null,d:ye,e:ye,f:oe,H:Me,I:pe,j:ge,L:we,m:de,M:Te,p:function(It){return Zt[+(It.getUTCHours()>=12)]},q:function(It){return 1+~~(It.getUTCMonth()/3)},Q:Qe,s:ct,S:Ee,u:Ae,U:De,V:Ie,w:Oe,W:Xe,x:null,X:null,y:Fe,Y:Pe,Z:Re,"%":qe},ht={a:function(It,Se,Ze){var it=ze.exec(Se.slice(Ze));return it?(It.w=Ve[it[0].toLowerCase()],Ze+it[0].length):-1},A:function(It,Se,Ze){var it=he.exec(Se.slice(Ze));return it?(It.w=be[it[0].toLowerCase()],Ze+it[0].length):-1},b:function(It,Se,Ze){var it=lt.exec(Se.slice(Ze));return it?(It.m=st[it[0].toLowerCase()],Ze+it[0].length):-1},B:function(It,Se,Ze){var it=Je.exec(Se.slice(Ze));return it?(It.m=Ye[it[0].toLowerCase()],Ze+it[0].length):-1},c:function(It,Se,Ze){return At(It,Ke,Se,Ze)},d:M,e:M,f:D,H:P,I:P,j:I,L:R,m:C,M:S,p:function(It,Se,Ze){var it=Be.exec(Se.slice(Ze));return it?(It.p=He[it[0].toLowerCase()],Ze+it[0].length):-1},q:T,Q:H,s:Y,S:E,u:c,U:a,V:y,w:p,W:u,x:function(It,Se,Ze){return At(It,xt,Se,Ze)},X:function(It,Se,Ze){return At(It,Ht,Se,Ze)},y:b,Y:_,Z:w,"%":j};function mt(It,Se){return function(Ze){var it,dt,Ct,Ut=[],Jt=-1,qt=0,pr=It.length;for(Ze instanceof Date||(Ze=new Date(+Ze));++Jt<pr;)37===It.charCodeAt(Jt)&&(Ut.push(It.slice(qt,Jt)),null!=(dt=l[it=It.charAt(++Jt)])?it=It.charAt(++Jt):dt="e"===it?" ":"0",(Ct=Se[it])&&(it=Ct(Ze,dt)),Ut.push(it),qt=Jt+1);return Ut.push(It.slice(qt,Jt)),Ut.join("")}}function Ot(It,Se){return function(Ze){var it,dt,Ct=e(1900,void 0,1);if(At(Ct,It,Ze+="",0)!=Ze.length)return null;if("Q"in Ct)return new Date(Ct.Q);if("s"in Ct)return new Date(1e3*Ct.s+("L"in Ct?Ct.L:0));if(Se&&!("Z"in Ct)&&(Ct.Z=0),"p"in Ct&&(Ct.H=Ct.H%12+12*Ct.p),void 0===Ct.m&&(Ct.m="q"in Ct?Ct.q:0),"V"in Ct){if(Ct.V<1||Ct.V>53)return null;"w"in Ct||(Ct.w=1),"Z"in Ct?(dt=(it=x(e(Ct.y,0,1))).getUTCDay(),it=dt>4||0===dt?g.utcMonday.ceil(it):g.utcMonday(it),it=g.utcDay.offset(it,7*(Ct.V-1)),Ct.y=it.getUTCFullYear(),Ct.m=it.getUTCMonth(),Ct.d=it.getUTCDate()+(Ct.w+6)%7):(dt=(it=k(e(Ct.y,0,1))).getDay(),it=dt>4||0===dt?g.timeMonday.ceil(it):g.timeMonday(it),it=g.timeDay.offset(it,7*(Ct.V-1)),Ct.y=it.getFullYear(),Ct.m=it.getMonth(),Ct.d=it.getDate()+(Ct.w+6)%7)}else("W"in Ct||"U"in Ct)&&("w"in Ct||(Ct.w="u"in Ct?Ct.u%7:"W"in Ct?1:0),dt="Z"in Ct?x(e(Ct.y,0,1)).getUTCDay():k(e(Ct.y,0,1)).getDay(),Ct.m=0,Ct.d="W"in Ct?(Ct.w+6)%7+7*Ct.W-(dt+5)%7:Ct.w+7*Ct.U-(dt+6)%7);return"Z"in Ct?(Ct.H+=Ct.Z/100|0,Ct.M+=Ct.Z%100,x(Ct)):k(Ct)}}function At(It,Se,Ze,it){for(var dt,Ct,Ut=0,Jt=Se.length,qt=Ze.length;Ut<Jt;){if(it>=qt)return-1;if(37===(dt=Se.charCodeAt(Ut++))){if(dt=Se.charAt(Ut++),!(Ct=ht[dt in l?Se.charAt(Ut++):dt])||(it=Ct(It,Ze,it))<0)return-1}else if(dt!=Ze.charCodeAt(it++))return-1}return it}return Mt.x=mt(xt,Mt),Mt.X=mt(Ht,Mt),Mt.c=mt(Ke,Mt),Dt.x=mt(xt,Dt),Dt.X=mt(Ht,Dt),Dt.c=mt(Ke,Dt),{format:function(It){var Se=mt(It+="",Mt);return Se.toString=function(){return It},Se},parse:function(It){var Se=Ot(It+="",!1);return Se.toString=function(){return It},Se},utcFormat:function(It){var Se=mt(It+="",Dt);return Se.toString=function(){return It},Se},utcParse:function(It){var Se=Ot(It+="",!0);return Se.toString=function(){return It},Se}}}var i,l={"-":"",_:" ",0:"0"},r=/^\s*\d+/,d=/^%/,f=/[\\^$*+?|[\]().{}]/g;function t(nt,Ke,xt){var Ht=nt<0?"-":"",Zt=(Ht?-nt:nt)+"",$t=Zt.length;return Ht+($t<xt?new Array(xt-$t+1).join(Ke)+Zt:Zt)}function h(nt){return nt.replace(f,"\\$&")}function s(nt){return new RegExp("^(?:"+nt.map(h).join("|")+")","i")}function o(nt){for(var Ke={},xt=-1,Ht=nt.length;++xt<Ht;)Ke[nt[xt].toLowerCase()]=xt;return Ke}function p(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+1));return Ht?(nt.w=+Ht[0],xt+Ht[0].length):-1}function c(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+1));return Ht?(nt.u=+Ht[0],xt+Ht[0].length):-1}function a(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+2));return Ht?(nt.U=+Ht[0],xt+Ht[0].length):-1}function y(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+2));return Ht?(nt.V=+Ht[0],xt+Ht[0].length):-1}function u(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+2));return Ht?(nt.W=+Ht[0],xt+Ht[0].length):-1}function _(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+4));return Ht?(nt.y=+Ht[0],xt+Ht[0].length):-1}function b(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+2));return Ht?(nt.y=+Ht[0]+(+Ht[0]>68?1900:2e3),xt+Ht[0].length):-1}function w(nt,Ke,xt){var Ht=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Ke.slice(xt,xt+6));return Ht?(nt.Z=Ht[1]?0:-(Ht[2]+(Ht[3]||"00")),xt+Ht[0].length):-1}function T(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+1));return Ht?(nt.q=3*Ht[0]-3,xt+Ht[0].length):-1}function C(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+2));return Ht?(nt.m=Ht[0]-1,xt+Ht[0].length):-1}function M(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+2));return Ht?(nt.d=+Ht[0],xt+Ht[0].length):-1}function I(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+3));return Ht?(nt.m=0,nt.d=+Ht[0],xt+Ht[0].length):-1}function P(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+2));return Ht?(nt.H=+Ht[0],xt+Ht[0].length):-1}function S(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+2));return Ht?(nt.M=+Ht[0],xt+Ht[0].length):-1}function E(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+2));return Ht?(nt.S=+Ht[0],xt+Ht[0].length):-1}function R(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+3));return Ht?(nt.L=+Ht[0],xt+Ht[0].length):-1}function D(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt,xt+6));return Ht?(nt.L=Math.floor(Ht[0]/1e3),xt+Ht[0].length):-1}function j(nt,Ke,xt){var Ht=d.exec(Ke.slice(xt,xt+1));return Ht?xt+Ht[0].length:-1}function H(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt));return Ht?(nt.Q=+Ht[0],xt+Ht[0].length):-1}function Y(nt,Ke,xt){var Ht=r.exec(Ke.slice(xt));return Ht?(nt.s=+Ht[0],xt+Ht[0].length):-1}function X(nt,Ke){return t(nt.getDate(),Ke,2)}function Z(nt,Ke){return t(nt.getHours(),Ke,2)}function W(nt,Ke){return t(nt.getHours()%12||12,Ke,2)}function re(nt,Ke){return t(1+g.timeDay.count(g.timeYear(nt),nt),Ke,3)}function U(nt,Ke){return t(nt.getMilliseconds(),Ke,3)}function B(nt,Ke){return U(nt,Ke)+"000"}function V(nt,Ke){return t(nt.getMonth()+1,Ke,2)}function ee(nt,Ke){return t(nt.getMinutes(),Ke,2)}function N(nt,Ke){return t(nt.getSeconds(),Ke,2)}function K(nt){var Ke=nt.getDay();return 0===Ke?7:Ke}function J(nt,Ke){return t(g.timeSunday.count(g.timeYear(nt)-1,nt),Ke,2)}function te(nt,Ke){var xt=nt.getDay();return nt=xt>=4||0===xt?g.timeThursday(nt):g.timeThursday.ceil(nt),t(g.timeThursday.count(g.timeYear(nt),nt)+(4===g.timeYear(nt).getDay()),Ke,2)}function ae(nt){return nt.getDay()}function le(nt,Ke){return t(g.timeMonday.count(g.timeYear(nt)-1,nt),Ke,2)}function se(nt,Ke){return t(nt.getFullYear()%100,Ke,2)}function ve(nt,Ke){return t(nt.getFullYear()%1e4,Ke,4)}function ue(nt){var Ke=nt.getTimezoneOffset();return(Ke>0?"-":(Ke*=-1,"+"))+t(Ke/60|0,"0",2)+t(Ke%60,"0",2)}function ye(nt,Ke){return t(nt.getUTCDate(),Ke,2)}function Me(nt,Ke){return t(nt.getUTCHours(),Ke,2)}function pe(nt,Ke){return t(nt.getUTCHours()%12||12,Ke,2)}function ge(nt,Ke){return t(1+g.utcDay.count(g.utcYear(nt),nt),Ke,3)}function we(nt,Ke){return t(nt.getUTCMilliseconds(),Ke,3)}function oe(nt,Ke){return we(nt,Ke)+"000"}function de(nt,Ke){return t(nt.getUTCMonth()+1,Ke,2)}function Te(nt,Ke){return t(nt.getUTCMinutes(),Ke,2)}function Ee(nt,Ke){return t(nt.getUTCSeconds(),Ke,2)}function Ae(nt){var Ke=nt.getUTCDay();return 0===Ke?7:Ke}function De(nt,Ke){return t(g.utcSunday.count(g.utcYear(nt)-1,nt),Ke,2)}function Ie(nt,Ke){var xt=nt.getUTCDay();return nt=xt>=4||0===xt?g.utcThursday(nt):g.utcThursday.ceil(nt),t(g.utcThursday.count(g.utcYear(nt),nt)+(4===g.utcYear(nt).getUTCDay()),Ke,2)}function Oe(nt){return nt.getUTCDay()}function Xe(nt,Ke){return t(g.utcMonday.count(g.utcYear(nt)-1,nt),Ke,2)}function Fe(nt,Ke){return t(nt.getUTCFullYear()%100,Ke,2)}function Pe(nt,Ke){return t(nt.getUTCFullYear()%1e4,Ke,4)}function Re(){return"+0000"}function qe(){return"%"}function Qe(nt){return+nt}function ct(nt){return Math.floor(+nt/1e3)}function bt(nt){return i=n(nt),m.timeFormat=i.format,m.timeParse=i.parse,m.utcFormat=i.utcFormat,m.utcParse=i.utcParse,i}bt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Tt=Date.prototype.toISOString?function(nt){return nt.toISOString()}:m.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),_t=+new Date("2000-01-01T00:00:00.000Z")?function(nt){var Ke=new Date(nt);return isNaN(Ke)?null:Ke}:m.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");m.isoFormat=Tt,m.isoParse=_t,m.timeFormatDefaultLocale=bt,m.timeFormatLocale=n,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof Q&&void 0!==$?g(Q,v("d3-time")):g((m=m||self).d3=m.d3||{},m.d3)},{"d3-time":121}],121:[function(v,$,Q){var m,g;m=this,g=function(m){"use strict";var g=new Date,k=new Date;function x(de,Te,Ee,Ae){function De(Ie){return de(Ie=0===arguments.length?new Date:new Date(+Ie)),Ie}return De.floor=function(Ie){return de(Ie=new Date(+Ie)),Ie},De.ceil=function(Ie){return de(Ie=new Date(Ie-1)),Te(Ie,1),de(Ie),Ie},De.round=function(Ie){var Oe=De(Ie),Xe=De.ceil(Ie);return Ie-Oe<Xe-Ie?Oe:Xe},De.offset=function(Ie,Oe){return Te(Ie=new Date(+Ie),null==Oe?1:Math.floor(Oe)),Ie},De.range=function(Ie,Oe,Xe){var Fe,Pe=[];if(Ie=De.ceil(Ie),Xe=null==Xe?1:Math.floor(Xe),!(Ie<Oe&&Xe>0))return Pe;do{Pe.push(Fe=new Date(+Ie)),Te(Ie,Xe),de(Ie)}while(Fe<Ie&&Ie<Oe);return Pe},De.filter=function(Ie){return x(function(Oe){if(Oe>=Oe)for(;de(Oe),!Ie(Oe);)Oe.setTime(Oe-1)},function(Oe,Xe){if(Oe>=Oe)if(Xe<0)for(;++Xe<=0;)for(;Te(Oe,-1),!Ie(Oe););else for(;--Xe>=0;)for(;Te(Oe,1),!Ie(Oe););})},Ee&&(De.count=function(Ie,Oe){return g.setTime(+Ie),k.setTime(+Oe),de(g),de(k),Math.floor(Ee(g,k))},De.every=function(Ie){return Ie=Math.floor(Ie),isFinite(Ie)&&Ie>0?Ie>1?De.filter(Ae?function(Oe){return Ae(Oe)%Ie==0}:function(Oe){return De.count(0,Oe)%Ie==0}):De:null}),De}var e=x(function(){},function(de,Te){de.setTime(+de+Te)},function(de,Te){return Te-de});e.every=function(de){return de=Math.floor(de),isFinite(de)&&de>0?de>1?x(function(Te){Te.setTime(Math.floor(Te/de)*de)},function(Te,Ee){Te.setTime(+Te+Ee*de)},function(Te,Ee){return(Ee-Te)/de}):e:null};var n=e.range,i=x(function(de){de.setTime(de-de.getMilliseconds())},function(de,Te){de.setTime(+de+1e3*Te)},function(de,Te){return(Te-de)/1e3},function(de){return de.getUTCSeconds()}),l=i.range,r=x(function(de){de.setTime(de-de.getMilliseconds()-1e3*de.getSeconds())},function(de,Te){de.setTime(+de+6e4*Te)},function(de,Te){return(Te-de)/6e4},function(de){return de.getMinutes()}),d=r.range,f=x(function(de){de.setTime(de-de.getMilliseconds()-1e3*de.getSeconds()-6e4*de.getMinutes())},function(de,Te){de.setTime(+de+36e5*Te)},function(de,Te){return(Te-de)/36e5},function(de){return de.getHours()}),t=f.range,h=x(function(de){de.setHours(0,0,0,0)},function(de,Te){de.setDate(de.getDate()+Te)},function(de,Te){return(Te-de-6e4*(Te.getTimezoneOffset()-de.getTimezoneOffset()))/864e5},function(de){return de.getDate()-1}),s=h.range;function o(de){return x(function(Te){Te.setDate(Te.getDate()-(Te.getDay()+7-de)%7),Te.setHours(0,0,0,0)},function(Te,Ee){Te.setDate(Te.getDate()+7*Ee)},function(Te,Ee){return(Ee-Te-6e4*(Ee.getTimezoneOffset()-Te.getTimezoneOffset()))/6048e5})}var p=o(0),c=o(1),a=o(2),y=o(3),u=o(4),_=o(5),b=o(6),w=p.range,T=c.range,C=a.range,M=y.range,I=u.range,P=_.range,S=b.range,E=x(function(de){de.setDate(1),de.setHours(0,0,0,0)},function(de,Te){de.setMonth(de.getMonth()+Te)},function(de,Te){return Te.getMonth()-de.getMonth()+12*(Te.getFullYear()-de.getFullYear())},function(de){return de.getMonth()}),R=E.range,D=x(function(de){de.setMonth(0,1),de.setHours(0,0,0,0)},function(de,Te){de.setFullYear(de.getFullYear()+Te)},function(de,Te){return Te.getFullYear()-de.getFullYear()},function(de){return de.getFullYear()});D.every=function(de){return isFinite(de=Math.floor(de))&&de>0?x(function(Te){Te.setFullYear(Math.floor(Te.getFullYear()/de)*de),Te.setMonth(0,1),Te.setHours(0,0,0,0)},function(Te,Ee){Te.setFullYear(Te.getFullYear()+Ee*de)}):null};var j=D.range,H=x(function(de){de.setUTCSeconds(0,0)},function(de,Te){de.setTime(+de+6e4*Te)},function(de,Te){return(Te-de)/6e4},function(de){return de.getUTCMinutes()}),Y=H.range,X=x(function(de){de.setUTCMinutes(0,0,0)},function(de,Te){de.setTime(+de+36e5*Te)},function(de,Te){return(Te-de)/36e5},function(de){return de.getUTCHours()}),Z=X.range,W=x(function(de){de.setUTCHours(0,0,0,0)},function(de,Te){de.setUTCDate(de.getUTCDate()+Te)},function(de,Te){return(Te-de)/864e5},function(de){return de.getUTCDate()-1}),re=W.range;function U(de){return x(function(Te){Te.setUTCDate(Te.getUTCDate()-(Te.getUTCDay()+7-de)%7),Te.setUTCHours(0,0,0,0)},function(Te,Ee){Te.setUTCDate(Te.getUTCDate()+7*Ee)},function(Te,Ee){return(Ee-Te)/6048e5})}var B=U(0),V=U(1),ee=U(2),N=U(3),K=U(4),J=U(5),te=U(6),ae=B.range,le=V.range,se=ee.range,ve=N.range,ue=K.range,ye=J.range,Me=te.range,pe=x(function(de){de.setUTCDate(1),de.setUTCHours(0,0,0,0)},function(de,Te){de.setUTCMonth(de.getUTCMonth()+Te)},function(de,Te){return Te.getUTCMonth()-de.getUTCMonth()+12*(Te.getUTCFullYear()-de.getUTCFullYear())},function(de){return de.getUTCMonth()}),ge=pe.range,we=x(function(de){de.setUTCMonth(0,1),de.setUTCHours(0,0,0,0)},function(de,Te){de.setUTCFullYear(de.getUTCFullYear()+Te)},function(de,Te){return Te.getUTCFullYear()-de.getUTCFullYear()},function(de){return de.getUTCFullYear()});we.every=function(de){return isFinite(de=Math.floor(de))&&de>0?x(function(Te){Te.setUTCFullYear(Math.floor(Te.getUTCFullYear()/de)*de),Te.setUTCMonth(0,1),Te.setUTCHours(0,0,0,0)},function(Te,Ee){Te.setUTCFullYear(Te.getUTCFullYear()+Ee*de)}):null};var oe=we.range;m.timeDay=h,m.timeDays=s,m.timeFriday=_,m.timeFridays=P,m.timeHour=f,m.timeHours=t,m.timeInterval=x,m.timeMillisecond=e,m.timeMilliseconds=n,m.timeMinute=r,m.timeMinutes=d,m.timeMonday=c,m.timeMondays=T,m.timeMonth=E,m.timeMonths=R,m.timeSaturday=b,m.timeSaturdays=S,m.timeSecond=i,m.timeSeconds=l,m.timeSunday=p,m.timeSundays=w,m.timeThursday=u,m.timeThursdays=I,m.timeTuesday=a,m.timeTuesdays=C,m.timeWednesday=y,m.timeWednesdays=M,m.timeWeek=p,m.timeWeeks=w,m.timeYear=D,m.timeYears=j,m.utcDay=W,m.utcDays=re,m.utcFriday=J,m.utcFridays=ye,m.utcHour=X,m.utcHours=Z,m.utcMillisecond=e,m.utcMilliseconds=n,m.utcMinute=H,m.utcMinutes=Y,m.utcMonday=V,m.utcMondays=le,m.utcMonth=pe,m.utcMonths=ge,m.utcSaturday=te,m.utcSaturdays=Me,m.utcSecond=i,m.utcSeconds=l,m.utcSunday=B,m.utcSundays=ae,m.utcThursday=K,m.utcThursdays=ue,m.utcTuesday=ee,m.utcTuesdays=se,m.utcWednesday=N,m.utcWednesdays=ve,m.utcWeek=B,m.utcWeeks=ae,m.utcYear=we,m.utcYears=oe,Object.defineProperty(m,"__esModule",{value:!0})},g("object"==typeof Q&&void 0!==$?Q:(m=m||self).d3=m.d3||{})},{}],122:[function(v,$,Q){arguments[4][121][0].apply(Q,arguments)},{dup:121}],123:[function(v,$,Q){var m,g;m=this,g=function(m){"use strict";var g,k,x=0,e=0,n=0,i=0,l=0,r=0,d="object"==typeof performance&&performance.now?performance:Date,f="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(u){setTimeout(u,17)};function t(){return l||(f(h),l=d.now()+r)}function h(){l=0}function s(){this._call=this._time=this._next=null}function o(u,_,b){var w=new s;return w.restart(u,_,b),w}function p(){t(),++x;for(var u,_=g;_;)(u=l-_._time)>=0&&_._call.call(null,u),_=_._next;--x}function c(){l=(i=d.now())+r,x=e=0;try{p()}finally{x=0,function(){for(var u,_,b=g,w=1/0;b;)b._call?(w>b._time&&(w=b._time),u=b,b=b._next):(_=b._next,b._next=null,b=u?u._next=_:g=_);k=u,y(w)}(),l=0}}function a(){var u=d.now(),_=u-i;_>1e3&&(r-=_,i=u)}function y(u){x||(e&&(e=clearTimeout(e)),u-l>24?(u<1/0&&(e=setTimeout(c,u-d.now()-r)),n&&(n=clearInterval(n))):(n||(i=d.now(),n=setInterval(a,1e3)),x=1,f(c)))}s.prototype=o.prototype={constructor:s,restart:function(u,_,b){if("function"!=typeof u)throw new TypeError("callback is not a function");b=(null==b?t():+b)+(null==_?0:+_),this._next||k===this||(k?k._next=this:g=this,k=this),this._call=u,this._time=b,y()},stop:function(){this._call&&(this._call=null,this._time=1/0,y())}},m.interval=function(u,_,b){var w=new s,T=_;return null==_?(w.restart(u,_,b),w):(_=+_,b=null==b?t():+b,w.restart(function C(M){M+=T,w.restart(C,T+=_,b),u(M)},_,b),w)},m.now=t,m.timeout=function(u,_,b){var w=new s;return w.restart(function(T){w.stop(),u(T+_)},_=null==_?0:+_,b),w},m.timer=o,m.timerFlush=p,Object.defineProperty(m,"__esModule",{value:!0})},g("object"==typeof Q&&void 0!==$?Q:(m=m||self).d3=m.d3||{})},{}],124:[function(v,$,Q){$.exports=function(){for(var m=0;m<arguments.length;m++)if(void 0!==arguments[m])return arguments[m]}},{}],125:[function(v,$,Q){"use strict";$.exports=k;var m=(k.canvas=document.createElement("canvas")).getContext("2d"),g=x([32,126]);function k(e,n){Array.isArray(e)&&(e=e.join(", "));var i,l={},r=16,d=.05;n&&(2===n.length&&"number"==typeof n[0]?i=x(n):Array.isArray(n)?i=n:(n.o?i=x(n.o):n.pairs&&(i=n.pairs),n.fontSize&&(r=n.fontSize),null!=n.threshold&&(d=n.threshold))),i||(i=g),m.font=r+"px "+e;for(var f=0;f<i.length;f++){var t=i[f],h=m.measureText(t[0]).width+m.measureText(t[1]).width,s=m.measureText(t).width;Math.abs(h-s)>r*d&&(l[t]=(s-h)/r*1e3)}return l}function x(e){for(var n=[],i=e[0];i<=e[1];i++)for(var l=String.fromCharCode(i),r=e[0];r<e[1];r++){var d=l+String.fromCharCode(r);n.push(d)}return n}k.createPairs=x,k.ascii=g},{}],126:[function(v,$,Q){var m=v("abs-svg-path"),g=v("normalize-svg-path"),k={M:"moveTo",C:"bezierCurveTo"};$.exports=function(x,e){x.beginPath(),g(m(e)).forEach(function(n){var i=n[0],l=n.slice(1);x[k[i]].apply(x,l)}),x.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(v,$,Q){$.exports=function(m){switch(m){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(v,$,Q){"use strict";$.exports=function(m,g){switch(void 0===g&&(g=0),typeof m){case"number":if(m>0)return function(k,x){var e,n;for(e=new Array(k),n=0;n<k;++n)e[n]=x;return e}(0|m,g);break;case"object":if("number"==typeof m.length)return function k(x,e,n){var i=0|x[n];if(i<=0)return[];var l,r=new Array(i);if(n===x.length-1)for(l=0;l<i;++l)r[l]=e;else for(l=0;l<i;++l)r[l]=k(x,e,n+1);return r}(m,g,0)}return[]}},{}],129:[function(v,$,Q){"use strict";function m(I,P,S){S=S||2;var E,R,D,j,H,Y,X,Z=P&&P.length,W=Z?P[0]*S:I.length,re=g(I,0,W,S,!0),U=[];if(!re||re.next===re.prev)return U;if(Z&&(re=function(V,ee,N,K){var J,te,se,ve=[];for(J=0,te=ee.length;J<te;J++)(se=g(V,ee[J]*K,J<te-1?ee[J+1]*K:V.length,K,!1))===se.next&&(se.steiner=!0),ve.push(h(se));for(ve.sort(r),J=0;J<ve.length;J++)d(ve[J],N),N=k(N,N.next);return N}(I,P,re,S)),I.length>80*S){E=D=I[0],R=j=I[1];for(var B=S;B<W;B+=S)(H=I[B])<E&&(E=H),(Y=I[B+1])<R&&(R=Y),H>D&&(D=H),Y>j&&(j=Y);X=0!==(X=Math.max(D-E,j-R))?1/X:0}return x(re,U,S,E,R,X),U}function g(I,P,S,E,R){var D,j;if(R===M(I,P,S,E)>0)for(D=P;D<S;D+=E)j=w(D,I[D],I[D+1],j);else for(D=S-E;D>=P;D-=E)j=w(D,I[D],I[D+1],j);return j&&c(j,j.next)&&(T(j),j=j.next),j}function k(I,P){if(!I)return I;P||(P=I);var S,E=I;do{if(S=!1,E.steiner||!c(E,E.next)&&0!==p(E.prev,E,E.next))E=E.next;else{if(T(E),(E=P=E.prev)===E.next)break;S=!0}}while(S||E!==P);return P}function x(I,P,S,E,R,D,j){if(I){!j&&D&&function(Z,W,re,U){var B=Z;do{null===B.z&&(B.z=t(B.x,B.y,W,re,U)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next}while(B!==Z);B.prevZ.nextZ=null,B.prevZ=null,function(V){var ee,N,K,J,te,ae,le,se,ve=1;do{for(N=V,V=null,te=null,ae=0;N;){for(ae++,K=N,le=0,ee=0;ee<ve&&(le++,K=K.nextZ);ee++);for(se=ve;le>0||se>0&&K;)0!==le&&(0===se||!K||N.z<=K.z)?(J=N,N=N.nextZ,le--):(J=K,K=K.nextZ,se--),te?te.nextZ=J:V=J,J.prevZ=te,te=J;N=K}te.nextZ=null,ve*=2}while(ae>1)}(B)}(I,E,R,D);for(var H,Y,X=I;I.prev!==I.next;)if(H=I.prev,Y=I.next,D?n(I,E,R,D):e(I))P.push(H.i/S),P.push(I.i/S),P.push(Y.i/S),T(I),I=Y.next,X=Y.next;else if((I=Y)===X){j?1===j?x(I=i(k(I),P,S),P,S,E,R,D,2):2===j&&l(I,P,S,E,R,D):x(k(I),P,S,E,R,D,1);break}}}function e(I){var P=I.prev,S=I,E=I.next;if(p(P,S,E)>=0)return!1;for(var R=I.next.next;R!==I.prev;){if(s(P.x,P.y,S.x,S.y,E.x,E.y,R.x,R.y)&&p(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function n(I,P,S,E){var R=I.prev,D=I,j=I.next;if(p(R,D,j)>=0)return!1;for(var X=R.x>D.x?R.x>j.x?R.x:j.x:D.x>j.x?D.x:j.x,Z=R.y>D.y?R.y>j.y?R.y:j.y:D.y>j.y?D.y:j.y,W=t(R.x<D.x?R.x<j.x?R.x:j.x:D.x<j.x?D.x:j.x,R.y<D.y?R.y<j.y?R.y:j.y:D.y<j.y?D.y:j.y,P,S,E),re=t(X,Z,P,S,E),U=I.prevZ,B=I.nextZ;U&&U.z>=W&&B&&B.z<=re;){if(U!==I.prev&&U!==I.next&&s(R.x,R.y,D.x,D.y,j.x,j.y,U.x,U.y)&&p(U.prev,U,U.next)>=0||(U=U.prevZ,B!==I.prev&&B!==I.next&&s(R.x,R.y,D.x,D.y,j.x,j.y,B.x,B.y)&&p(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;U&&U.z>=W;){if(U!==I.prev&&U!==I.next&&s(R.x,R.y,D.x,D.y,j.x,j.y,U.x,U.y)&&p(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;B&&B.z<=re;){if(B!==I.prev&&B!==I.next&&s(R.x,R.y,D.x,D.y,j.x,j.y,B.x,B.y)&&p(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function i(I,P,S){var E=I;do{var R=E.prev,D=E.next.next;!c(R,D)&&a(R,E,E.next,D)&&_(R,D)&&_(D,R)&&(P.push(R.i/S),P.push(E.i/S),P.push(D.i/S),T(E),T(E.next),E=I=D),E=E.next}while(E!==I);return k(E)}function l(I,P,S,E,R,D){var j=I;do{for(var H=j.next.next;H!==j.prev;){if(j.i!==H.i&&o(j,H)){var Y=b(j,H);return j=k(j,j.next),Y=k(Y,Y.next),x(j,P,S,E,R,D),void x(Y,P,S,E,R,D)}H=H.next}j=j.next}while(j!==I)}function r(I,P){return I.x-P.x}function d(I,P){if(P=function(E,R){var D,j=R,H=E.x,Y=E.y,X=-1/0;do{if(Y<=j.y&&Y>=j.next.y&&j.next.y!==j.y){var Z=j.x+(Y-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if(Z<=H&&Z>X){if(X=Z,Z===H){if(Y===j.y)return j;if(Y===j.next.y)return j.next}D=j.x<j.next.x?j:j.next}}j=j.next}while(j!==R);if(!D)return null;if(H===X)return D;var W,re=D,U=D.x,B=D.y,V=1/0;j=D;do{H>=j.x&&j.x>=U&&H!==j.x&&s(Y<B?H:X,Y,U,B,Y<B?X:H,Y,j.x,j.y)&&(W=Math.abs(Y-j.y)/(H-j.x),_(j,E)&&(W<V||W===V&&(j.x>D.x||j.x===D.x&&f(D,j)))&&(D=j,V=W)),j=j.next}while(j!==re);return D}(I,P)){var S=b(P,I);k(P,P.next),k(S,S.next)}}function f(I,P){return p(I.prev,I,P.prev)<0&&p(P.next,I,I.next)<0}function t(I,P,S,E,R){return(I=1431655765&((I=858993459&((I=252645135&((I=16711935&((I=32767*(I-S)*R)|I<<8))|I<<4))|I<<2))|I<<1))|(P=1431655765&((P=858993459&((P=252645135&((P=16711935&((P=32767*(P-E)*R)|P<<8))|P<<4))|P<<2))|P<<1))<<1}function h(I){var P=I,S=I;do{(P.x<S.x||P.x===S.x&&P.y<S.y)&&(S=P),P=P.next}while(P!==I);return S}function s(I,P,S,E,R,D,j,H){return(R-j)*(P-H)-(I-j)*(D-H)>=0&&(I-j)*(E-H)-(S-j)*(P-H)>=0&&(S-j)*(D-H)-(R-j)*(E-H)>=0}function o(I,P){return I.next.i!==P.i&&I.prev.i!==P.i&&!function(S,E){var R=S;do{if(R.i!==S.i&&R.next.i!==S.i&&R.i!==E.i&&R.next.i!==E.i&&a(R,R.next,S,E))return!0;R=R.next}while(R!==S);return!1}(I,P)&&(_(I,P)&&_(P,I)&&function(S,E){var R=S,D=!1,j=(S.x+E.x)/2,H=(S.y+E.y)/2;do{R.y>H!=R.next.y>H&&R.next.y!==R.y&&j<(R.next.x-R.x)*(H-R.y)/(R.next.y-R.y)+R.x&&(D=!D),R=R.next}while(R!==S);return D}(I,P)&&(p(I.prev,I,P.prev)||p(I,P.prev,P))||c(I,P)&&p(I.prev,I,I.next)>0&&p(P.prev,P,P.next)>0)}function p(I,P,S){return(P.y-I.y)*(S.x-P.x)-(P.x-I.x)*(S.y-P.y)}function c(I,P){return I.x===P.x&&I.y===P.y}function a(I,P,S,E){var R=u(p(I,P,S)),D=u(p(I,P,E)),j=u(p(S,E,I)),H=u(p(S,E,P));return R!==D&&j!==H||!(0!==R||!y(I,S,P))||!(0!==D||!y(I,E,P))||!(0!==j||!y(S,I,E))||!(0!==H||!y(S,P,E))}function y(I,P,S){return P.x<=Math.max(I.x,S.x)&&P.x>=Math.min(I.x,S.x)&&P.y<=Math.max(I.y,S.y)&&P.y>=Math.min(I.y,S.y)}function u(I){return I>0?1:I<0?-1:0}function _(I,P){return p(I.prev,I,I.next)<0?p(I,P,I.next)>=0&&p(I,I.prev,P)>=0:p(I,P,I.prev)<0||p(I,I.next,P)<0}function b(I,P){var S=new C(I.i,I.x,I.y),E=new C(P.i,P.x,P.y),R=I.next,D=P.prev;return I.next=P,P.prev=I,S.next=R,R.prev=S,E.next=S,S.prev=E,D.next=E,E.prev=D,E}function w(I,P,S,E){var R=new C(I,P,S);return E?(R.next=E.next,R.prev=E,E.next.prev=R,E.next=R):(R.prev=R,R.next=R),R}function T(I){I.next.prev=I.prev,I.prev.next=I.next,I.prevZ&&(I.prevZ.nextZ=I.nextZ),I.nextZ&&(I.nextZ.prevZ=I.prevZ)}function C(I,P,S){this.i=I,this.x=P,this.y=S,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(I,P,S,E){for(var R=0,D=P,j=S-E;D<S;D+=E)R+=(I[j]-I[D])*(I[D+1]+I[j+1]),j=D;return R}$.exports=m,$.exports.default=m,m.deviation=function(I,P,S,E){var R=P&&P.length,j=Math.abs(M(I,0,R?P[0]*S:I.length,S));if(R)for(var H=0,Y=P.length;H<Y;H++)j-=Math.abs(M(I,P[H]*S,H<Y-1?P[H+1]*S:I.length,S));var W=0;for(H=0;H<E.length;H+=3){var re=E[H]*S,U=E[H+1]*S,B=E[H+2]*S;W+=Math.abs((I[re]-I[B])*(I[U+1]-I[re+1])-(I[re]-I[U])*(I[B+1]-I[re+1]))}return 0===j&&0===W?0:Math.abs((W-j)/j)},m.flatten=function(I){for(var P=I[0][0].length,S={vertices:[],holes:[],dimensions:P},E=0,R=0;R<I.length;R++){for(var D=0;D<I[R].length;D++)for(var j=0;j<P;j++)S.vertices.push(I[R][D][j]);R>0&&S.holes.push(E+=I[R-1].length)}return S}},{}],130:[function(v,$,Q){var m=v("strongly-connected-components");$.exports=function(g,k){var x,e=[],n=[],i=[],l={},r=[];function d(a){var y,u,_=!1;for(n.push(a),i[a]=!0,y=0;y<r[a].length;y++)(u=r[a][y])===x?(f(x,n),_=!0):i[u]||(_=d(u));if(_)!function w(T){i[T]=!1,l.hasOwnProperty(T)&&Object.keys(l[T]).forEach(function(C){delete l[T][C],i[C]&&w(C)})}(a);else for(y=0;y<r[a].length;y++){var b=l[u=r[a][y]];b||(l[u]=b={}),b[u]=!0}return n.pop(),_}function f(a,y){var u=[].concat(y).concat(a);k?k(d):e.push(u)}function t(a){!function(C){for(var M=0;M<g.length;M++)M<C&&(g[M]=[]),g[M]=g[M].filter(function(I){return I>=C})}(a);for(var y,u=m(g).components.filter(function(C){return C.length>1}),_=1/0,b=0;b<u.length;b++)for(var w=0;w<u[b].length;w++)u[b][w]<_&&(_=u[b][w],y=b);var T=u[y];return!!T&&{leastVertex:_,adjList:g.map(function(C,M){return-1===T.indexOf(M)?[]:C.filter(function(I){return-1!==T.indexOf(I)})})}}x=0;for(var h=g.length;x<h;){var s=t(x);if(x=s.leastVertex,r=s.adjList){for(var o=0;o<r.length;o++)for(var p=0;p<r[o].length;p++){var c=r[o][p];i[+c]=!1,l[c]={}}d(x),x+=1}else x=h}return k?void 0:e}},{"strongly-connected-components":307}],131:[function(v,$,Q){"use strict";var m=v("../../object/valid-value");$.exports=function(){return m(this).length=0,this}},{"../../object/valid-value":162}],132:[function(v,$,Q){"use strict";$.exports=v("./is-implemented")()?Array.from:v("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(v,$,Q){"use strict";$.exports=function(){var m,g,k=Array.from;return"function"==typeof k&&(g=k(m=["raz","dwa"]),Boolean(g&&g!==m&&"dwa"===g[1]))}},{}],134:[function(v,$,Q){"use strict";var m=v("es6-symbol").iterator,g=v("../../function/is-arguments"),k=v("../../function/is-function"),x=v("../../number/to-pos-integer"),e=v("../../object/valid-callable"),n=v("../../object/valid-value"),i=v("../../object/is-value"),l=v("../../string/is-string"),r=Array.isArray,d=Function.prototype.call,f={configurable:!0,enumerable:!0,writable:!0,value:null},t=Object.defineProperty;$.exports=function(h){var s,o,p,c,a,y,u,_,b,w,T=arguments[1],C=arguments[2];if(h=Object(n(h)),i(T)&&e(T),this&&this!==Array&&k(this))s=this;else{if(!T){if(g(h))return 1!==(a=h.length)?Array.apply(null,h):((c=new Array(1))[0]=h[0],c);if(r(h)){for(c=new Array(a=h.length),o=0;o<a;++o)c[o]=h[o];return c}}c=[]}if(!r(h))if(void 0!==(b=h[m])){for(u=e(b).call(h),s&&(c=new s),_=u.next(),o=0;!_.done;)w=T?d.call(T,C,_.value,o):_.value,s?(f.value=w,t(c,o,f)):c[o]=w,_=u.next(),++o;a=o}else if(l(h)){for(a=h.length,s&&(c=new s),o=0,p=0;o<a;++o)w=h[o],o+1<a&&(y=w.charCodeAt(0))>=55296&&y<=56319&&(w+=h[++o]),w=T?d.call(T,C,w,p):w,s?(f.value=w,t(c,p,f)):c[p]=w,++p;a=p}if(void 0===a)for(a=x(h.length),s&&(c=new s(a)),o=0;o<a;++o)w=T?d.call(T,C,h[o],o):h[o],s?(f.value=w,t(c,o,f)):c[o]=w;return s&&(f.value=null,c.length=a),c}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(v,$,Q){"use strict";var m=Object.prototype.toString,g=m.call(function(){return arguments}());$.exports=function(k){return m.call(k)===g}},{}],136:[function(v,$,Q){"use strict";var m=Object.prototype.toString,g=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);$.exports=function(k){return"function"==typeof k&&g(m.call(k))}},{}],137:[function(v,$,Q){"use strict";$.exports=function(){}},{}],138:[function(v,$,Q){"use strict";$.exports=v("./is-implemented")()?Math.sign:v("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(v,$,Q){"use strict";$.exports=function(){var m=Math.sign;return"function"==typeof m&&1===m(10)&&-1===m(-20)}},{}],140:[function(v,$,Q){"use strict";$.exports=function(m){return m=Number(m),isNaN(m)||0===m?m:m>0?1:-1}},{}],141:[function(v,$,Q){"use strict";var m=v("../math/sign"),g=Math.abs,k=Math.floor;$.exports=function(x){return isNaN(x)?0:0!==(x=Number(x))&&isFinite(x)?m(x)*k(g(x)):x}},{"../math/sign":138}],142:[function(v,$,Q){"use strict";var m=v("./to-integer"),g=Math.max;$.exports=function(k){return g(0,m(k))}},{"./to-integer":141}],143:[function(v,$,Q){"use strict";var m=v("./valid-callable"),g=v("./valid-value"),k=Function.prototype.bind,x=Function.prototype.call,e=Object.keys,n=Object.prototype.propertyIsEnumerable;$.exports=function(i,l){return function(r,d){var f,t=arguments[2],h=arguments[3];return r=Object(g(r)),m(d),f=e(r),h&&f.sort("function"==typeof h?k.call(h,r):void 0),"function"!=typeof i&&(i=f[i]),x.call(i,f,function(s,o){return n.call(r,s)?x.call(d,t,r[s],s,r,o):l})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(v,$,Q){"use strict";$.exports=v("./is-implemented")()?Object.assign:v("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(v,$,Q){"use strict";$.exports=function(){var m,g=Object.assign;return"function"==typeof g&&(g(m={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),m.foo+m.bar+m.trzy==="razdwatrzy")}},{}],146:[function(v,$,Q){"use strict";var m=v("../keys"),g=v("../valid-value"),k=Math.max;$.exports=function(x,e){var n,i,l,r=k(arguments.length,2);for(x=Object(g(x)),l=function(d){try{x[d]=e[d]}catch(f){n||(n=f)}},i=1;i<r;++i)m(e=arguments[i]).forEach(l);if(void 0!==n)throw n;return x}},{"../keys":152,"../valid-value":162}],147:[function(v,$,Q){"use strict";var m=v("../array/from"),g=v("./assign"),k=v("./valid-value");$.exports=function(x){var e=Object(k(x)),n=arguments[1],i=Object(arguments[2]);if(e!==x&&!n)return e;var l={};return n?m(n,function(r){(i.ensure||r in x)&&(l[r]=x[r])}):g(l,x),l}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(v,$,Q){"use strict";var m,g,k,x,e=Object.create;v("./set-prototype-of/is-implemented")()||(m=v("./set-prototype-of/shim")),$.exports=m?1!==m.level?e:(g={},k={},x={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(n){k[n]="__proto__"!==n?x:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(g,k),Object.defineProperty(m,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:g}),function(n,i){return e(null===n?g:n,i)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(v,$,Q){"use strict";$.exports=v("./_iterate")("forEach")},{"./_iterate":143}],150:[function(v,$,Q){"use strict";var m=v("./is-value"),g={function:!0,object:!0};$.exports=function(k){return m(k)&&g[typeof k]||!1}},{"./is-value":151}],151:[function(v,$,Q){"use strict";var m=v("../function/noop")();$.exports=function(g){return g!==m&&null!==g}},{"../function/noop":137}],152:[function(v,$,Q){"use strict";$.exports=v("./is-implemented")()?Object.keys:v("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(v,$,Q){"use strict";$.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(v,$,Q){"use strict";var m=v("../is-value"),g=Object.keys;$.exports=function(k){return g(m(k)?Object(k):k)}},{"../is-value":151}],155:[function(v,$,Q){"use strict";var m=v("./valid-callable"),g=v("./for-each"),k=Function.prototype.call;$.exports=function(x,e){var n={},i=arguments[2];return m(e),g(x,function(l,r,d,f){n[r]=k.call(e,i,l,r,d,f)}),n}},{"./for-each":149,"./valid-callable":160}],156:[function(v,$,Q){"use strict";var m=v("./is-value"),g=Array.prototype.forEach,k=Object.create,x=function(e,n){var i;for(i in e)n[i]=e[i]};$.exports=function(e){var n=k(null);return g.call(arguments,function(i){m(i)&&x(Object(i),n)}),n}},{"./is-value":151}],157:[function(v,$,Q){"use strict";$.exports=v("./is-implemented")()?Object.setPrototypeOf:v("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(v,$,Q){"use strict";var m=Object.create,g=Object.getPrototypeOf,k={};$.exports=function(){var x=Object.setPrototypeOf;return"function"==typeof x&&g(x((arguments[0]||m)(null),k))===k}},{}],159:[function(v,$,Q){"use strict";var m,i,l,r,g=v("../is-object"),k=v("../valid-value"),x=Object.prototype.isPrototypeOf,e=Object.defineProperty,n={configurable:!0,enumerable:!1,writable:!0,value:void 0};m=function(i,l){if(k(i),null===l||g(l))return i;throw new TypeError("Prototype must be null or an object")},$.exports=(i=function(){var i,l=Object.create(null),r={},d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(d){try{(i=d.set).call(l,r)}catch{}if(Object.getPrototypeOf(l)===r)return{set:i,level:2}}return l.__proto__=r,Object.getPrototypeOf(l)===r?{level:2}:((l={}).__proto__=r,Object.getPrototypeOf(l)===r&&{level:1})}(),i?(2===i.level?i.set?(r=i.set,l=function(d,f){return r.call(m(d,f),f),d}):l=function(d,f){return m(d,f).__proto__=f,d}:l=function d(f,t){var h;return m(f,t),(h=x.call(d.nullPolyfill,f))&&delete d.nullPolyfill.__proto__,null===t&&(t=d.nullPolyfill),f.__proto__=t,h&&e(d.nullPolyfill,"__proto__",n),f},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:i.level})):null),v("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(v,$,Q){"use strict";$.exports=function(m){if("function"!=typeof m)throw new TypeError(m+" is not a function");return m}},{}],161:[function(v,$,Q){"use strict";var m=v("./is-object");$.exports=function(g){if(!m(g))throw new TypeError(g+" is not an Object");return g}},{"./is-object":150}],162:[function(v,$,Q){"use strict";var m=v("./is-value");$.exports=function(g){if(!m(g))throw new TypeError("Cannot use null or undefined");return g}},{"./is-value":151}],163:[function(v,$,Q){"use strict";$.exports=v("./is-implemented")()?String.prototype.contains:v("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(v,$,Q){"use strict";var m="razdwatrzy";$.exports=function(){return"function"==typeof m.contains&&!0===m.contains("dwa")&&!1===m.contains("foo")}},{}],165:[function(v,$,Q){"use strict";var m=String.prototype.indexOf;$.exports=function(g){return m.call(this,g,arguments[1])>-1}},{}],166:[function(v,$,Q){"use strict";var m=Object.prototype.toString,g=m.call("");$.exports=function(k){return"string"==typeof k||k&&"object"==typeof k&&(k instanceof String||m.call(k)===g)||!1}},{}],167:[function(v,$,Q){"use strict";var m=Object.create(null),g=Math.random;$.exports=function(){var k;do{k=g().toString(36).slice(2)}while(m[k]);return k}},{}],168:[function(v,$,Q){"use strict";var m,g=v("es5-ext/object/set-prototype-of"),k=v("es5-ext/string/#/contains"),x=v("d"),e=v("es6-symbol"),n=v("./"),i=Object.defineProperty;m=$.exports=function(l,r){if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");n.call(this,l),r=r?k.call(r,"key+value")?"key+value":k.call(r,"key")?"key":"value":"value",i(this,"__kind__",x("",r))},g&&g(m,n),delete m.prototype.constructor,m.prototype=Object.create(n.prototype,{_resolve:x(function(l){return"value"===this.__kind__?this.__list__[l]:"key+value"===this.__kind__?[l,this.__list__[l]]:l})}),i(m.prototype,e.toStringTag,x("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(v,$,Q){"use strict";var m=v("es5-ext/function/is-arguments"),g=v("es5-ext/object/valid-callable"),k=v("es5-ext/string/is-string"),x=v("./get"),e=Array.isArray,n=Function.prototype.call,i=Array.prototype.some;$.exports=function(l,r){var d,f,t,h,s,o,p,c,a=arguments[2];if(e(l)||m(l)?d="array":k(l)?d="string":l=x(l),g(r),t=function(){h=!0},"array"!==d)if("string"!==d)for(f=l.next();!f.done;){if(n.call(r,a,f.value,t),h)return;f=l.next()}else for(o=l.length,s=0;s<o&&(p=l[s],s+1<o&&(c=p.charCodeAt(0))>=55296&&c<=56319&&(p+=l[++s]),n.call(r,a,p,t),!h);++s);else i.call(l,function(y){return n.call(r,a,y,t),h})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(v,$,Q){"use strict";var m=v("es5-ext/function/is-arguments"),g=v("es5-ext/string/is-string"),k=v("./array"),x=v("./string"),e=v("./valid-iterable"),n=v("es6-symbol").iterator;$.exports=function(i){return"function"==typeof e(i)[n]?i[n]():m(i)?new k(i):g(i)?new x(i):new k(i)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(v,$,Q){"use strict";var m,g=v("es5-ext/array/#/clear"),k=v("es5-ext/object/assign"),x=v("es5-ext/object/valid-callable"),e=v("es5-ext/object/valid-value"),n=v("d"),i=v("d/auto-bind"),l=v("es6-symbol"),r=Object.defineProperty,d=Object.defineProperties;$.exports=m=function(f,t){if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");d(this,{__list__:n("w",e(f)),__context__:n("w",t),__nextIndex__:n("w",0)}),t&&(x(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete m.prototype.constructor,d(m.prototype,k({_next:n(function(){var f;if(this.__list__)return this.__redo__&&void 0!==(f=this.__redo__.shift())?f:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:n(function(){return this._createResult(this._next())}),_createResult:n(function(f){return void 0===f?{done:!0,value:void 0}:{done:!1,value:this._resolve(f)}}),_resolve:n(function(f){return this.__list__[f]}),_unBind:n(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:n(function(){return"[object "+(this[l.toStringTag]||"Object")+"]"})},i({_onAdd:n(function(f){f>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(t,h){t>=f&&(this.__redo__[h]=++t)},this),this.__redo__.push(f)):r(this,"__redo__",n("c",[f])))}),_onDelete:n(function(f){var t;f>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(t=this.__redo__.indexOf(f))&&this.__redo__.splice(t,1),this.__redo__.forEach(function(h,s){h>f&&(this.__redo__[s]=--h)},this)))}),_onClear:n(function(){this.__redo__&&g.call(this.__redo__),this.__nextIndex__=0})}))),r(m.prototype,l.iterator,n(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(v,$,Q){"use strict";var m=v("es5-ext/function/is-arguments"),g=v("es5-ext/object/is-value"),k=v("es5-ext/string/is-string"),x=v("es6-symbol").iterator,e=Array.isArray;$.exports=function(n){return!(!g(n)||!e(n)&&!k(n)&&!m(n)&&"function"!=typeof n[x])}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(v,$,Q){"use strict";var m,g=v("es5-ext/object/set-prototype-of"),k=v("d"),x=v("es6-symbol"),e=v("./"),n=Object.defineProperty;m=$.exports=function(i){if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");i=String(i),e.call(this,i),n(this,"__length__",k("",i.length))},g&&g(m,e),delete m.prototype.constructor,m.prototype=Object.create(e.prototype,{_next:k(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:k(function(i){var l,r=this.__list__[i];return this.__nextIndex__===this.__length__?r:(l=r.charCodeAt(0))>=55296&&l<=56319?r+this.__list__[this.__nextIndex__++]:r})}),n(m.prototype,x.toStringTag,k("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(v,$,Q){"use strict";var m=v("./is-iterable");$.exports=function(g){if(!m(g))throw new TypeError(g+" is not iterable");return g}},{"./is-iterable":172}],175:[function(v,$,Q){"use strict";$.exports=v("./is-implemented")()?v("ext/global-this").Symbol:v("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(v,$,Q){"use strict";var m=v("ext/global-this"),g={object:!0,symbol:!0};$.exports=function(){var k,x=m.Symbol;if("function"!=typeof x)return!1;k=x("test symbol");try{String(k)}catch{return!1}return!!g[typeof x.iterator]&&!!g[typeof x.toPrimitive]&&!!g[typeof x.toStringTag]}},{"ext/global-this":188}],177:[function(v,$,Q){"use strict";$.exports=function(m){return!!m&&("symbol"==typeof m||!!m.constructor&&"Symbol"===m.constructor.name&&"Symbol"===m[m.constructor.toStringTag])}},{}],178:[function(v,$,Q){"use strict";var m=v("d"),k=Object.defineProperty,x=Object.prototype,e=(0,Object.create)(null);$.exports=function(n){for(var i,l,r=0;e[n+(r||"")];)++r;return e[n+=r||""]=!0,k(x,i="@@"+n,m.gs(null,function(d){l||(l=!0,k(this,i,m(d)),l=!1)})),i}},{d:106}],179:[function(v,$,Q){"use strict";var m=v("d"),g=v("ext/global-this").Symbol;$.exports=function(k){return Object.defineProperties(k,{hasInstance:m("",g&&g.hasInstance||k("hasInstance")),isConcatSpreadable:m("",g&&g.isConcatSpreadable||k("isConcatSpreadable")),iterator:m("",g&&g.iterator||k("iterator")),match:m("",g&&g.match||k("match")),replace:m("",g&&g.replace||k("replace")),search:m("",g&&g.search||k("search")),species:m("",g&&g.species||k("species")),split:m("",g&&g.split||k("split")),toPrimitive:m("",g&&g.toPrimitive||k("toPrimitive")),toStringTag:m("",g&&g.toStringTag||k("toStringTag")),unscopables:m("",g&&g.unscopables||k("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(v,$,Q){"use strict";var m=v("d"),g=v("../../../validate-symbol"),k=Object.create(null);$.exports=function(x){return Object.defineProperties(x,{for:m(function(e){return k[e]?k[e]:k[e]=x(String(e))}),keyFor:m(function(e){var n;for(n in g(e),k)if(k[n]===e)return n})})}},{"../../../validate-symbol":182,d:106}],181:[function(v,$,Q){"use strict";var m,g,k,x=v("d"),e=v("./validate-symbol"),n=v("ext/global-this").Symbol,i=v("./lib/private/generate-name"),l=v("./lib/private/setup/standard-symbols"),r=v("./lib/private/setup/symbol-registry"),d=Object.create,f=Object.defineProperties,t=Object.defineProperty;if("function"==typeof n)try{String(n()),k=!0}catch{}else n=null;g=function(h){if(this instanceof g)throw new TypeError("Symbol is not a constructor");return m(h)},$.exports=m=function h(s){var o;if(this instanceof h)throw new TypeError("Symbol is not a constructor");return k?n(s):(o=d(g.prototype),s=void 0===s?"":String(s),f(o,{__description__:x("",s),__name__:x("",i(s))}))},l(m),r(m),f(g.prototype,{constructor:x(m),toString:x("",function(){return this.__name__})}),f(m.prototype,{toString:x(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:x(function(){return e(this)})}),t(m.prototype,m.toPrimitive,x("",function(){var h=e(this);return"symbol"==typeof h?h:h.toString()})),t(m.prototype,m.toStringTag,x("c","Symbol")),t(g.prototype,m.toStringTag,x("c",m.prototype[m.toStringTag])),t(g.prototype,m.toPrimitive,x("c",m.prototype[m.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(v,$,Q){"use strict";var m=v("./is-symbol");$.exports=function(g){if(!m(g))throw new TypeError(g+" is not a symbol");return g}},{"./is-symbol":177}],183:[function(v,$,Q){"use strict";$.exports=v("./is-implemented")()?WeakMap:v("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(v,$,Q){"use strict";$.exports=function(){var m,g;if("function"!=typeof WeakMap)return!1;try{m=new WeakMap([[g={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return"[object WeakMap]"===String(m)&&"function"==typeof m.set&&m.set({},1)===m&&"function"==typeof m.delete&&"function"==typeof m.has&&"one"===m.get(g)}},{}],185:[function(v,$,Q){"use strict";$.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],186:[function(v,$,Q){"use strict";var m,g=v("es5-ext/object/is-value"),k=v("es5-ext/object/set-prototype-of"),x=v("es5-ext/object/valid-object"),e=v("es5-ext/object/valid-value"),n=v("es5-ext/string/random-uniq"),i=v("d"),l=v("es6-iterator/get"),r=v("es6-iterator/for-of"),d=v("es6-symbol").toStringTag,f=v("./is-native-implemented"),t=Array.isArray,h=Object.defineProperty,s=Object.prototype.hasOwnProperty,o=Object.getPrototypeOf;$.exports=m=function(){var p,c=arguments[0];if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");return p=f&&k&&WeakMap!==m?k(new WeakMap,o(this)):this,g(c)&&(t(c)||(c=l(c))),h(p,"__weakMapData__",i("c","$weakMap$"+n())),c&&r(c,function(a){e(a),p.set(a[0],a[1])}),p},f&&(k&&k(m,WeakMap),m.prototype=Object.create(WeakMap.prototype,{constructor:i(m)})),Object.defineProperties(m.prototype,{delete:i(function(p){return!!s.call(x(p),this.__weakMapData__)&&(delete p[this.__weakMapData__],!0)}),get:i(function(p){if(s.call(x(p),this.__weakMapData__))return p[this.__weakMapData__]}),has:i(function(p){return s.call(x(p),this.__weakMapData__)}),set:i(function(p,c){return h(x(p),this.__weakMapData__,i("c",c)),this}),toString:i(function(){return"[object WeakMap]"})}),h(m.prototype,d,i("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(v,$,Q){var m=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};$.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return m()}try{return __global__||m()}finally{delete Object.prototype.__global__}}()},{}],188:[function(v,$,Q){"use strict";$.exports=v("./is-implemented")()?globalThis:v("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(v,$,Q){"use strict";$.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(v,$,Q){"use strict";var m=v("is-string-blank");$.exports=function(g){var k=typeof g;if("string"===k){var x=g;if(0==(g=+g)&&m(x))return!1}else if("number"!==k)return!1;return g-g<1}},{"is-string-blank":237}],191:[function(v,$,Q){var m=v("dtype");$.exports=function(g,k,x){if(!g)throw new TypeError("must specify data as first parameter");if(x=0|+(x||0),Array.isArray(g)&&g[0]&&"number"==typeof g[0][0]){var e,n,i,l,r=g[0].length,d=g.length*r;k&&"string"!=typeof k||(k=new(m(k||"float32"))(d+x));var f=k.length-x;if(d!==f)throw new Error("source length "+d+" ("+r+"x"+g.length+") does not match destination length "+f);for(e=0,i=x;e<g.length;e++)for(n=0;n<r;n++)k[i++]=null===g[e][n]?NaN:g[e][n]}else if(k&&"string"!=typeof k)k.set(g,x);else{var t=m(k||"float32");if(Array.isArray(g)||"array"===k)for(e=0,i=x,l=(k=new t(g.length+x)).length;i<l;i++,e++)k[i]=null===g[e]?NaN:g[e];else 0===x?k=new t(g):(k=new t(g.length+x)).set(g,x)}return k}},{dtype:127}],192:[function(v,$,Q){"use strict";var m=v("css-font/stringify"),g=[32,126];$.exports=function(k){var x=(k=k||{}).shape?k.shape:k.canvas?[k.canvas.width,k.canvas.height]:[512,512],e=k.canvas||document.createElement("canvas"),n=k.font,i="number"==typeof k.step?[k.step,k.step]:k.step||[32,32],l=k.chars||g;if(n&&"string"!=typeof n&&(n=m(n)),Array.isArray(l)){if(2===l.length&&"number"==typeof l[0]&&"number"==typeof l[1]){for(var r=[],d=l[0],f=0;d<=l[1];d++)r[f++]=String.fromCharCode(d);l=r}}else l=String(l).split("");x=x.slice(),e.width=x[0],e.height=x[1];var t=e.getContext("2d");t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),t.font=n,t.textAlign="center",t.textBaseline="middle",t.fillStyle="#fff";var h=i[0]/2,s=i[1]/2;for(d=0;d<l.length;d++)t.fillText(l[d],h,s),(h+=i[0])>x[0]-i[0]/2&&(h=i[0]/2,s+=i[1]);return e}},{"css-font/stringify":102}],193:[function(v,$,Q){"use strict";function m(e,n){n||(n={}),("string"==typeof e||Array.isArray(e))&&(n.family=e);var i=Array.isArray(n.family)?n.family.join(", "):n.family;if(!i)throw Error("`family` must be defined");var l=n.size||n.fontSize||n.em||48,d=(e=[n.style||n.fontStyle||"",n.weight||n.fontWeight||"",l].join(" ")+"px "+i,n.origin||"top");if(m.cache[i]&&l<=m.cache[i].em)return g(m.cache[i],d);var f=n.canvas||m.canvas,t=f.getContext("2d"),h={upper:void 0!==n.upper?n.upper:"H",lower:void 0!==n.lower?n.lower:"x",descent:void 0!==n.descent?n.descent:"p",ascent:void 0!==n.ascent?n.ascent:"h",tittle:void 0!==n.tittle?n.tittle:"i",overshoot:void 0!==n.overshoot?n.overshoot:"O"},s=Math.ceil(1.5*l);f.height=s,f.width=.5*s,t.font=e;var o={top:0};t.clearRect(0,0,s,s),t.textBaseline="top",t.fillStyle="black",t.fillText("H",0,0);var p=k(t.getImageData(0,0,s,s));t.clearRect(0,0,s,s),t.textBaseline="bottom",t.fillText("H",0,s);var c=k(t.getImageData(0,0,s,s));o.lineHeight=o.bottom=s-c+p,t.clearRect(0,0,s,s),t.textBaseline="alphabetic",t.fillText("H",0,s);var a=s-k(t.getImageData(0,0,s,s))-1+p;o.baseline=o.alphabetic=a,t.clearRect(0,0,s,s),t.textBaseline="middle",t.fillText("H",0,.5*s);var y=k(t.getImageData(0,0,s,s));o.median=o.middle=s-y-1+p-.5*s,t.clearRect(0,0,s,s),t.textBaseline="hanging",t.fillText("H",0,.5*s);var u=k(t.getImageData(0,0,s,s));o.hanging=s-u-1+p-.5*s,t.clearRect(0,0,s,s),t.textBaseline="ideographic",t.fillText("H",0,s);var _=k(t.getImageData(0,0,s,s));if(o.ideographic=s-_-1+p,h.upper&&(t.clearRect(0,0,s,s),t.textBaseline="top",t.fillText(h.upper,0,0),o.upper=k(t.getImageData(0,0,s,s)),o.capHeight=o.baseline-o.upper),h.lower&&(t.clearRect(0,0,s,s),t.textBaseline="top",t.fillText(h.lower,0,0),o.lower=k(t.getImageData(0,0,s,s)),o.xHeight=o.baseline-o.lower),h.tittle&&(t.clearRect(0,0,s,s),t.textBaseline="top",t.fillText(h.tittle,0,0),o.tittle=k(t.getImageData(0,0,s,s))),h.ascent&&(t.clearRect(0,0,s,s),t.textBaseline="top",t.fillText(h.ascent,0,0),o.ascent=k(t.getImageData(0,0,s,s))),h.descent&&(t.clearRect(0,0,s,s),t.textBaseline="top",t.fillText(h.descent,0,0),o.descent=x(t.getImageData(0,0,s,s))),h.overshoot){t.clearRect(0,0,s,s),t.textBaseline="top",t.fillText(h.overshoot,0,0);var b=x(t.getImageData(0,0,s,s));o.overshoot=b-a}for(var w in o)o[w]/=l;return o.em=l,m.cache[i]=o,g(o,d)}function g(e,n){var i={};for(var l in"string"==typeof n&&(n=e[n]),e)"em"!==l&&(i[l]=e[l]-n);return i}function k(e){for(var n=e.height,i=e.data,l=3;l<i.length;l+=4)if(0!==i[l])return Math.floor(.25*(l-3)/n)}function x(e){for(var n=e.height,i=e.data,l=i.length-1;l>0;l-=4)if(0!==i[l])return Math.floor(.25*(l-3)/n)}$.exports=m,m.canvas=document.createElement("canvas"),m.cache={}},{}],194:[function(v,$,Q){$.exports=function(m,g){if("string"!=typeof m)throw new TypeError("must specify type string");if(g=g||{},typeof document>"u"&&!g.canvas)return null;var k=g.canvas||document.createElement("canvas");"number"==typeof g.width&&(k.width=g.width),"number"==typeof g.height&&(k.height=g.height);var x,e=g;try{var n=[m];0===m.indexOf("webgl")&&n.push("experimental-"+m);for(var i=0;i<n.length;i++)if(x=k.getContext(n[i],e))return x}catch{x=null}return x||null}},{}],195:[function(v,$,Q){$.exports=function(m,g){var k=g[0],x=g[1],e=g[2],n=g[3],i=g[4],l=g[5],r=g[6],d=g[7],f=g[8],t=g[9],h=g[10],s=g[11],o=g[12],p=g[13],c=g[14],a=g[15];return m[0]=l*(h*a-s*c)-t*(r*a-d*c)+p*(r*s-d*h),m[1]=-(x*(h*a-s*c)-t*(e*a-n*c)+p*(e*s-n*h)),m[2]=x*(r*a-d*c)-l*(e*a-n*c)+p*(e*d-n*r),m[3]=-(x*(r*s-d*h)-l*(e*s-n*h)+t*(e*d-n*r)),m[4]=-(i*(h*a-s*c)-f*(r*a-d*c)+o*(r*s-d*h)),m[5]=k*(h*a-s*c)-f*(e*a-n*c)+o*(e*s-n*h),m[6]=-(k*(r*a-d*c)-i*(e*a-n*c)+o*(e*d-n*r)),m[7]=k*(r*s-d*h)-i*(e*s-n*h)+f*(e*d-n*r),m[8]=i*(t*a-s*p)-f*(l*a-d*p)+o*(l*s-d*t),m[9]=-(k*(t*a-s*p)-f*(x*a-n*p)+o*(x*s-n*t)),m[10]=k*(l*a-d*p)-i*(x*a-n*p)+o*(x*d-n*l),m[11]=-(k*(l*s-d*t)-i*(x*s-n*t)+f*(x*d-n*l)),m[12]=-(i*(t*c-h*p)-f*(l*c-r*p)+o*(l*h-r*t)),m[13]=k*(t*c-h*p)-f*(x*c-e*p)+o*(x*h-e*t),m[14]=-(k*(l*c-r*p)-i*(x*c-e*p)+o*(x*r-e*l)),m[15]=k*(l*h-r*t)-i*(x*h-e*t)+f*(x*r-e*l),m}},{}],196:[function(v,$,Q){$.exports=function(m){var g=new Float32Array(16);return g[0]=m[0],g[1]=m[1],g[2]=m[2],g[3]=m[3],g[4]=m[4],g[5]=m[5],g[6]=m[6],g[7]=m[7],g[8]=m[8],g[9]=m[9],g[10]=m[10],g[11]=m[11],g[12]=m[12],g[13]=m[13],g[14]=m[14],g[15]=m[15],g}},{}],197:[function(v,$,Q){$.exports=function(m,g){return m[0]=g[0],m[1]=g[1],m[2]=g[2],m[3]=g[3],m[4]=g[4],m[5]=g[5],m[6]=g[6],m[7]=g[7],m[8]=g[8],m[9]=g[9],m[10]=g[10],m[11]=g[11],m[12]=g[12],m[13]=g[13],m[14]=g[14],m[15]=g[15],m}},{}],198:[function(v,$,Q){$.exports=function(){var m=new Float32Array(16);return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],199:[function(v,$,Q){$.exports=function(m){var g=m[0],k=m[1],x=m[2],e=m[3],n=m[4],i=m[5],l=m[6],r=m[7],d=m[8],f=m[9],t=m[10],h=m[11],s=m[12],o=m[13],p=m[14],c=m[15];return(g*i-k*n)*(t*c-h*p)-(g*l-x*n)*(f*c-h*o)+(g*r-e*n)*(f*p-t*o)+(k*l-x*i)*(d*c-h*s)-(k*r-e*i)*(d*p-t*s)+(x*r-e*l)*(d*o-f*s)}},{}],200:[function(v,$,Q){$.exports=function(m,g){var k=g[0],x=g[1],e=g[2],n=g[3],i=k+k,l=x+x,r=e+e,d=k*i,f=x*i,t=x*l,h=e*i,s=e*l,o=e*r,p=n*i,c=n*l,a=n*r;return m[0]=1-t-o,m[1]=f+a,m[2]=h-c,m[3]=0,m[4]=f-a,m[5]=1-d-o,m[6]=s+p,m[7]=0,m[8]=h+c,m[9]=s-p,m[10]=1-d-t,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],201:[function(v,$,Q){$.exports=function(m,g,k){var x,e,n,i=k[0],l=k[1],r=k[2],d=Math.sqrt(i*i+l*l+r*r);return Math.abs(d)<1e-6?null:(i*=d=1/d,l*=d,r*=d,x=Math.sin(g),e=Math.cos(g),m[0]=i*i*(n=1-e)+e,m[1]=l*i*n+r*x,m[2]=r*i*n-l*x,m[3]=0,m[4]=i*l*n-r*x,m[5]=l*l*n+e,m[6]=r*l*n+i*x,m[7]=0,m[8]=i*r*n+l*x,m[9]=l*r*n-i*x,m[10]=r*r*n+e,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m)}},{}],202:[function(v,$,Q){$.exports=function(m,g,k){var x=g[0],e=g[1],n=g[2],i=g[3],l=x+x,r=e+e,d=n+n,f=x*l,t=x*r,h=x*d,s=e*r,o=e*d,p=n*d,c=i*l,a=i*r,y=i*d;return m[0]=1-(s+p),m[1]=t+y,m[2]=h-a,m[3]=0,m[4]=t-y,m[5]=1-(f+p),m[6]=o+c,m[7]=0,m[8]=h+a,m[9]=o-c,m[10]=1-(f+s),m[11]=0,m[12]=k[0],m[13]=k[1],m[14]=k[2],m[15]=1,m}},{}],203:[function(v,$,Q){$.exports=function(m,g){return m[0]=g[0],m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=g[1],m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=g[2],m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],204:[function(v,$,Q){$.exports=function(m,g){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=g[0],m[13]=g[1],m[14]=g[2],m[15]=1,m}},{}],205:[function(v,$,Q){$.exports=function(m,g){var k=Math.sin(g),x=Math.cos(g);return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=x,m[6]=k,m[7]=0,m[8]=0,m[9]=-k,m[10]=x,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],206:[function(v,$,Q){$.exports=function(m,g){var k=Math.sin(g),x=Math.cos(g);return m[0]=x,m[1]=0,m[2]=-k,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=k,m[9]=0,m[10]=x,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],207:[function(v,$,Q){$.exports=function(m,g){var k=Math.sin(g),x=Math.cos(g);return m[0]=x,m[1]=k,m[2]=0,m[3]=0,m[4]=-k,m[5]=x,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],208:[function(v,$,Q){$.exports=function(m,g,k,x,e,n,i){var l=1/(k-g),r=1/(e-x),d=1/(n-i);return m[0]=2*n*l,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=2*n*r,m[6]=0,m[7]=0,m[8]=(k+g)*l,m[9]=(e+x)*r,m[10]=(i+n)*d,m[11]=-1,m[12]=0,m[13]=0,m[14]=i*n*2*d,m[15]=0,m}},{}],209:[function(v,$,Q){$.exports=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],210:[function(v,$,Q){$.exports={create:v("./create"),clone:v("./clone"),copy:v("./copy"),identity:v("./identity"),transpose:v("./transpose"),invert:v("./invert"),adjoint:v("./adjoint"),determinant:v("./determinant"),multiply:v("./multiply"),translate:v("./translate"),scale:v("./scale"),rotate:v("./rotate"),rotateX:v("./rotateX"),rotateY:v("./rotateY"),rotateZ:v("./rotateZ"),fromRotation:v("./fromRotation"),fromRotationTranslation:v("./fromRotationTranslation"),fromScaling:v("./fromScaling"),fromTranslation:v("./fromTranslation"),fromXRotation:v("./fromXRotation"),fromYRotation:v("./fromYRotation"),fromZRotation:v("./fromZRotation"),fromQuat:v("./fromQuat"),frustum:v("./frustum"),perspective:v("./perspective"),perspectiveFromFieldOfView:v("./perspectiveFromFieldOfView"),ortho:v("./ortho"),lookAt:v("./lookAt"),str:v("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(v,$,Q){$.exports=function(m,g){var k=g[0],x=g[1],e=g[2],n=g[3],i=g[4],l=g[5],r=g[6],d=g[7],f=g[8],t=g[9],h=g[10],s=g[11],o=g[12],p=g[13],c=g[14],a=g[15],y=k*l-x*i,u=k*r-e*i,_=k*d-n*i,b=x*r-e*l,w=x*d-n*l,T=e*d-n*r,C=f*p-t*o,M=f*c-h*o,I=f*a-s*o,P=t*c-h*p,S=t*a-s*p,E=h*a-s*c,R=y*E-u*S+_*P+b*I-w*M+T*C;return R?(m[0]=(l*E-r*S+d*P)*(R=1/R),m[1]=(e*S-x*E-n*P)*R,m[2]=(p*T-c*w+a*b)*R,m[3]=(h*w-t*T-s*b)*R,m[4]=(r*I-i*E-d*M)*R,m[5]=(k*E-e*I+n*M)*R,m[6]=(c*_-o*T-a*u)*R,m[7]=(f*T-h*_+s*u)*R,m[8]=(i*S-l*I+d*C)*R,m[9]=(x*I-k*S-n*C)*R,m[10]=(o*w-p*_+a*y)*R,m[11]=(t*_-f*w-s*y)*R,m[12]=(l*M-i*P-r*C)*R,m[13]=(k*P-x*M+e*C)*R,m[14]=(p*u-o*b-c*y)*R,m[15]=(f*b-t*u+h*y)*R,m):null}},{}],212:[function(v,$,Q){var m=v("./identity");$.exports=function(g,k,x,e){var n,i,l,r,d,f,t,h,s,o,p=k[0],c=k[1],a=k[2],y=e[0],u=e[1],_=e[2],b=x[0],w=x[1],T=x[2];return Math.abs(p-b)<1e-6&&Math.abs(c-w)<1e-6&&Math.abs(a-T)<1e-6?m(g):(t=p-b,h=c-w,s=a-T,n=u*(s*=o=1/Math.sqrt(t*t+h*h+s*s))-_*(h*=o),i=_*(t*=o)-y*s,l=y*h-u*t,(o=Math.sqrt(n*n+i*i+l*l))?(n*=o=1/o,i*=o,l*=o):(n=0,i=0,l=0),r=h*l-s*i,d=s*n-t*l,f=t*i-h*n,(o=Math.sqrt(r*r+d*d+f*f))?(r*=o=1/o,d*=o,f*=o):(r=0,d=0,f=0),g[0]=n,g[1]=r,g[2]=t,g[3]=0,g[4]=i,g[5]=d,g[6]=h,g[7]=0,g[8]=l,g[9]=f,g[10]=s,g[11]=0,g[12]=-(n*p+i*c+l*a),g[13]=-(r*p+d*c+f*a),g[14]=-(t*p+h*c+s*a),g[15]=1,g)}},{"./identity":209}],213:[function(v,$,Q){$.exports=function(m,g,k){var x=g[0],e=g[1],n=g[2],i=g[3],l=g[4],r=g[5],d=g[6],f=g[7],t=g[8],h=g[9],s=g[10],o=g[11],p=g[12],c=g[13],a=g[14],y=g[15],u=k[0],_=k[1],b=k[2],w=k[3];return m[0]=u*x+_*l+b*t+w*p,m[1]=u*e+_*r+b*h+w*c,m[2]=u*n+_*d+b*s+w*a,m[3]=u*i+_*f+b*o+w*y,m[4]=(u=k[4])*x+(_=k[5])*l+(b=k[6])*t+(w=k[7])*p,m[5]=u*e+_*r+b*h+w*c,m[6]=u*n+_*d+b*s+w*a,m[7]=u*i+_*f+b*o+w*y,m[8]=(u=k[8])*x+(_=k[9])*l+(b=k[10])*t+(w=k[11])*p,m[9]=u*e+_*r+b*h+w*c,m[10]=u*n+_*d+b*s+w*a,m[11]=u*i+_*f+b*o+w*y,m[12]=(u=k[12])*x+(_=k[13])*l+(b=k[14])*t+(w=k[15])*p,m[13]=u*e+_*r+b*h+w*c,m[14]=u*n+_*d+b*s+w*a,m[15]=u*i+_*f+b*o+w*y,m}},{}],214:[function(v,$,Q){$.exports=function(m,g,k,x,e,n,i){var l=1/(g-k),r=1/(x-e),d=1/(n-i);return m[0]=-2*l,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=-2*r,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=2*d,m[11]=0,m[12]=(g+k)*l,m[13]=(e+x)*r,m[14]=(i+n)*d,m[15]=1,m}},{}],215:[function(v,$,Q){$.exports=function(m,g,k,x,e){var n=1/Math.tan(g/2),i=1/(x-e);return m[0]=n/k,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=n,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=(e+x)*i,m[11]=-1,m[12]=0,m[13]=0,m[14]=2*e*x*i,m[15]=0,m}},{}],216:[function(v,$,Q){$.exports=function(m,g,k,x){var e=Math.tan(g.upDegrees*Math.PI/180),n=Math.tan(g.downDegrees*Math.PI/180),i=Math.tan(g.leftDegrees*Math.PI/180),l=Math.tan(g.rightDegrees*Math.PI/180),r=2/(i+l),d=2/(e+n);return m[0]=r,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=d,m[6]=0,m[7]=0,m[8]=-(i-l)*r*.5,m[9]=(e-n)*d*.5,m[10]=x/(k-x),m[11]=-1,m[12]=0,m[13]=0,m[14]=x*k/(k-x),m[15]=0,m}},{}],217:[function(v,$,Q){$.exports=function(m,g,k,x){var e,n,i,l,r,d,f,t,h,s,o,p,c,a,y,u,_,b,w,T,C,M,I,P,S=x[0],E=x[1],R=x[2],D=Math.sqrt(S*S+E*E+R*R);return Math.abs(D)<1e-6?null:(S*=D=1/D,E*=D,R*=D,e=Math.sin(k),n=Math.cos(k),r=g[1],d=g[2],f=g[3],h=g[5],s=g[6],o=g[7],c=g[9],a=g[10],y=g[11],w=S*E*(i=1-n)-R*e,T=E*E*i+n,C=R*E*i+S*e,M=S*R*i+E*e,I=E*R*i-S*e,P=R*R*i+n,m[0]=(l=g[0])*(u=S*S*i+n)+(t=g[4])*(_=E*S*i+R*e)+(p=g[8])*(b=R*S*i-E*e),m[1]=r*u+h*_+c*b,m[2]=d*u+s*_+a*b,m[3]=f*u+o*_+y*b,m[4]=l*w+t*T+p*C,m[5]=r*w+h*T+c*C,m[6]=d*w+s*T+a*C,m[7]=f*w+o*T+y*C,m[8]=l*M+t*I+p*P,m[9]=r*M+h*I+c*P,m[10]=d*M+s*I+a*P,m[11]=f*M+o*I+y*P,g!==m&&(m[12]=g[12],m[13]=g[13],m[14]=g[14],m[15]=g[15]),m)}},{}],218:[function(v,$,Q){$.exports=function(m,g,k){var x=Math.sin(k),e=Math.cos(k),n=g[4],i=g[5],l=g[6],r=g[7],d=g[8],f=g[9],t=g[10],h=g[11];return g!==m&&(m[0]=g[0],m[1]=g[1],m[2]=g[2],m[3]=g[3],m[12]=g[12],m[13]=g[13],m[14]=g[14],m[15]=g[15]),m[4]=n*e+d*x,m[5]=i*e+f*x,m[6]=l*e+t*x,m[7]=r*e+h*x,m[8]=d*e-n*x,m[9]=f*e-i*x,m[10]=t*e-l*x,m[11]=h*e-r*x,m}},{}],219:[function(v,$,Q){$.exports=function(m,g,k){var x=Math.sin(k),e=Math.cos(k),n=g[0],i=g[1],l=g[2],r=g[3],d=g[8],f=g[9],t=g[10],h=g[11];return g!==m&&(m[4]=g[4],m[5]=g[5],m[6]=g[6],m[7]=g[7],m[12]=g[12],m[13]=g[13],m[14]=g[14],m[15]=g[15]),m[0]=n*e-d*x,m[1]=i*e-f*x,m[2]=l*e-t*x,m[3]=r*e-h*x,m[8]=n*x+d*e,m[9]=i*x+f*e,m[10]=l*x+t*e,m[11]=r*x+h*e,m}},{}],220:[function(v,$,Q){$.exports=function(m,g,k){var x=Math.sin(k),e=Math.cos(k),n=g[0],i=g[1],l=g[2],r=g[3],d=g[4],f=g[5],t=g[6],h=g[7];return g!==m&&(m[8]=g[8],m[9]=g[9],m[10]=g[10],m[11]=g[11],m[12]=g[12],m[13]=g[13],m[14]=g[14],m[15]=g[15]),m[0]=n*e+d*x,m[1]=i*e+f*x,m[2]=l*e+t*x,m[3]=r*e+h*x,m[4]=d*e-n*x,m[5]=f*e-i*x,m[6]=t*e-l*x,m[7]=h*e-r*x,m}},{}],221:[function(v,$,Q){$.exports=function(m,g,k){var x=k[0],e=k[1],n=k[2];return m[0]=g[0]*x,m[1]=g[1]*x,m[2]=g[2]*x,m[3]=g[3]*x,m[4]=g[4]*e,m[5]=g[5]*e,m[6]=g[6]*e,m[7]=g[7]*e,m[8]=g[8]*n,m[9]=g[9]*n,m[10]=g[10]*n,m[11]=g[11]*n,m[12]=g[12],m[13]=g[13],m[14]=g[14],m[15]=g[15],m}},{}],222:[function(v,$,Q){$.exports=function(m){return"mat4("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+", "+m[6]+", "+m[7]+", "+m[8]+", "+m[9]+", "+m[10]+", "+m[11]+", "+m[12]+", "+m[13]+", "+m[14]+", "+m[15]+")"}},{}],223:[function(v,$,Q){$.exports=function(m,g,k){var x,e,n,i,l,r,d,f,t,h,s,o,p=k[0],c=k[1],a=k[2];return g===m?(m[12]=g[0]*p+g[4]*c+g[8]*a+g[12],m[13]=g[1]*p+g[5]*c+g[9]*a+g[13],m[14]=g[2]*p+g[6]*c+g[10]*a+g[14],m[15]=g[3]*p+g[7]*c+g[11]*a+g[15]):(e=g[1],n=g[2],i=g[3],l=g[4],r=g[5],d=g[6],f=g[7],t=g[8],h=g[9],s=g[10],o=g[11],m[0]=x=g[0],m[1]=e,m[2]=n,m[3]=i,m[4]=l,m[5]=r,m[6]=d,m[7]=f,m[8]=t,m[9]=h,m[10]=s,m[11]=o,m[12]=x*p+l*c+t*a+g[12],m[13]=e*p+r*c+h*a+g[13],m[14]=n*p+d*c+s*a+g[14],m[15]=i*p+f*c+o*a+g[15]),m}},{}],224:[function(v,$,Q){$.exports=function(m,g){if(m===g){var k=g[1],x=g[2],e=g[3],n=g[6],i=g[7],l=g[11];m[1]=g[4],m[2]=g[8],m[3]=g[12],m[4]=k,m[6]=g[9],m[7]=g[13],m[8]=x,m[9]=n,m[11]=g[14],m[12]=e,m[13]=i,m[14]=l}else m[0]=g[0],m[1]=g[4],m[2]=g[8],m[3]=g[12],m[4]=g[1],m[5]=g[5],m[6]=g[9],m[7]=g[13],m[8]=g[2],m[9]=g[6],m[10]=g[10],m[11]=g[14],m[12]=g[3],m[13]=g[7],m[14]=g[11],m[15]=g[15];return m}},{}],225:[function(v,$,Q){"use strict";var m=v("css-font"),g=v("pick-by-alias"),k=v("regl"),x=v("gl-util/context"),e=v("es6-weak-map"),n=v("color-normalize"),i=v("font-atlas"),l=v("typedarray-pool"),r=v("parse-rect"),d=v("is-plain-obj"),f=v("parse-unit"),t=v("to-px"),h=v("detect-kerning"),s=v("object-assign"),o=v("font-measure"),p=v("flatten-vertex-data"),c=v("bit-twiddle").nextPow2,a=new e,y=!1;if(document.body){var u=document.body.appendChild(document.createElement("div"));u.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(u).fontStretch&&(y=!0),document.body.removeChild(u)}var _=function(b){var w;this.gl="function"==typeof(w=b)&&w._gl&&w.prop&&w.texture&&w.buffer?(b={regl:b}).regl._gl:x(b),this.shader=a.get(this.gl),this.regl=this.shader?this.shader.regl:b.regl||k({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),a.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(d(b)?b:{})};_.prototype.createShader=function(){var b=this.regl,w=b({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:b.prop("count"),offset:b.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:b.this("sizeBuffer")},width:{offset:0,stride:8,buffer:b.this("sizeBuffer")},char:b.this("charBuffer"),position:b.this("position")},uniforms:{atlasSize:function(T,C){return[C.atlas.width,C.atlas.height]},atlasDim:function(T,C){return[C.atlas.cols,C.atlas.rows]},atlas:function(T,C){return C.atlas.texture},charStep:function(T,C){return C.atlas.step},em:function(T,C){return C.atlas.em},color:b.prop("color"),opacity:b.prop("opacity"),viewport:b.this("viewportArray"),scale:b.this("scale"),align:b.prop("align"),baseline:b.prop("baseline"),translate:b.this("translate"),positionOffset:b.prop("positionOffset")},primitive:"points",viewport:b.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:b,draw:w,atlas:{}}},_.prototype.update=function(b){var w=this;if("string"==typeof b)b={text:b};else if(!b)return;null!=(b=g(b,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(b.opacity)?b.opacity.map(function(de){return parseFloat(de)}):parseFloat(b.opacity)),null!=b.viewport&&(this.viewport=r(b.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=b.kerning&&(this.kerning=b.kerning),null!=b.offset&&("number"==typeof b.offset&&(b.offset=[b.offset,0]),this.positionOffset=p(b.offset)),b.direction&&(this.direction=b.direction),b.range&&(this.range=b.range,this.scale=[1/(b.range[2]-b.range[0]),1/(b.range[3]-b.range[1])],this.translate=[-b.range[0],-b.range[1]]),b.scale&&(this.scale=b.scale),b.translate&&(this.translate=b.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||b.font||(b.font=_.baseFontSize+"px sans-serif");var T,C=!1,M=!1;if(b.font&&(Array.isArray(b.font)?b.font:[b.font]).forEach(function(de,Te){if("string"==typeof de)try{de=m.parse(de)}catch{de=m.parse(_.baseFontSize+"px "+de)}else de=m.parse(m.stringify(de));var Ee=m.stringify({size:_.baseFontSize,family:de.family,stretch:y?de.stretch:void 0,variant:de.variant,weight:de.weight,style:de.style}),Ae=f(de.size),De=Math.round(Ae[0]*t(Ae[1]));if(De!==w.fontSize[Te]&&(M=!0,w.fontSize[Te]=De),!(w.font[Te]&&Ee==w.font[Te].baseString||(C=!0,w.font[Te]=_.fonts[Ee],w.font[Te]))){var Ie=de.family.join(", "),Oe=[de.style];de.style!=de.variant&&Oe.push(de.variant),de.variant!=de.weight&&Oe.push(de.weight),y&&de.weight!=de.stretch&&Oe.push(de.stretch),w.font[Te]={baseString:Ee,family:Ie,weight:de.weight,stretch:de.stretch,style:de.style,variant:de.variant,width:{},kerning:{},metrics:o(Ie,{origin:"top",fontSize:_.baseFontSize,fontStyle:Oe.join(" ")})},_.fonts[Ee]=w.font[Te]}}),(C||M)&&this.font.forEach(function(de,Te){var Ee=m.stringify({size:w.fontSize[Te],family:de.family,stretch:y?de.stretch:void 0,variant:de.variant,weight:de.weight,style:de.style});w.fontAtlas[Te]=w.shader.atlas[Ee],w.fontAtlas[Te]||(w.shader.atlas[Ee]=w.fontAtlas[Te]={fontString:Ee,step:2*Math.ceil(w.fontSize[Te]*de.metrics.bottom*.5),em:w.fontSize[Te],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:w.regl.texture()}),null==b.text&&(b.text=w.text)}),"string"==typeof b.text&&b.position&&b.position.length>2){for(var I=Array(.5*b.position.length),P=0;P<I.length;P++)I[P]=b.text;b.text=I}if(null!=b.text||C){if(this.textOffsets=[0],Array.isArray(b.text)){this.count=b.text[0].length,this.counts=[this.count];for(var S=1;S<b.text.length;S++)this.textOffsets[S]=this.textOffsets[S-1]+b.text[S-1].length,this.count+=b.text[S].length,this.counts.push(b.text[S].length);this.text=b.text.join("")}else this.text=b.text,this.count=this.text.length,this.counts=[this.count];T=[],this.font.forEach(function(de,Te){_.atlasContext.font=de.baseString;for(var Ee=w.fontAtlas[Te],Ae=0;Ae<w.text.length;Ae++){var De=w.text.charAt(Ae);if(null==Ee.ids[De]&&(Ee.ids[De]=Ee.chars.length,Ee.chars.push(De),T.push(De)),null==de.width[De]&&(de.width[De]=_.atlasContext.measureText(De).width/_.baseFontSize,w.kerning)){var Ie=[];for(var Oe in de.width)Ie.push(Oe+De,De+Oe);s(de.kerning,h(de.family,{pairs:Ie}))}}})}if(b.position)if(b.position.length>2){for(var E=!b.position[0].length,R=l.mallocFloat(2*this.count),D=0,j=0;D<this.counts.length;D++){var H=this.counts[D];if(E)for(var Y=0;Y<H;Y++)R[j++]=b.position[2*D],R[j++]=b.position[2*D+1];else for(var X=0;X<H;X++)R[j++]=b.position[D][0],R[j++]=b.position[D][1]}this.position.call?this.position({type:"float",data:R}):this.position=this.regl.buffer({type:"float",data:R}),l.freeFloat(R)}else this.position.destroy&&this.position.destroy(),this.position={constant:b.position};if(b.text||C){var Z=l.mallocUint8(this.count),W=l.mallocFloat(2*this.count);this.textWidth=[];for(var re=0,U=0;re<this.counts.length;re++){for(var B=this.counts[re],V=this.font[re]||this.font[0],ee=this.fontAtlas[re]||this.fontAtlas[0],N=0;N<B;N++){var K=this.text.charAt(U),J=this.text.charAt(U-1);if(Z[U]=ee.ids[K],W[2*U]=V.width[K],N){var le=W[2*U-1]+.5*W[2*U-2]+.5*W[2*U];if(this.kerning){var se=V.kerning[J+K];se&&(le+=.001*se)}W[2*U+1]=le}else W[2*U+1]=.5*W[2*U];U++}this.textWidth.push(W.length?.5*W[2*U-2]+W[2*U-1]:0)}b.align||(b.align=this.align),this.charBuffer({data:Z,type:"uint8",usage:"stream"}),this.sizeBuffer({data:W,type:"float",usage:"stream"}),l.freeUint8(Z),l.freeFloat(W),T.length&&this.font.forEach(function(de,Te){var Ee=w.fontAtlas[Te],Ae=Ee.step,De=Math.floor(_.maxAtlasSize/Ae),Ie=Math.min(De,Ee.chars.length),Oe=Math.ceil(Ee.chars.length/Ie),Xe=c(Ie*Ae),Fe=c(Oe*Ae);Ee.width=Xe,Ee.height=Fe,Ee.rows=Oe,Ee.cols=Ie,Ee.em&&Ee.texture({data:i({canvas:_.atlasCanvas,font:Ee.fontString,chars:Ee.chars,shape:[Xe,Fe],step:[Ae,Ae]})})})}if(b.align&&(this.align=b.align,this.alignOffset=this.textWidth.map(function(de,Te){var Ee=Array.isArray(w.align)?w.align.length>1?w.align[Te]:w.align[0]:w.align;if("number"==typeof Ee)return Ee;switch(Ee){case"right":case"end":return-de;case"center":case"centre":case"middle":return.5*-de}return 0})),null==this.baseline&&null==b.baseline&&(b.baseline=0),null!=b.baseline&&(this.baseline=b.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(de,Te){var Ee=(w.font[Te]||w.font[0]).metrics,Ae=0;return-1*((Ae+=.5*Ee.bottom)+("number"==typeof de?de-Ee.baseline:-Ee[de]))})),null!=b.color)if(b.color||(b.color="transparent"),"string"!=typeof b.color&&isNaN(b.color)){var ve;if("number"==typeof b.color[0]&&b.color.length>this.counts.length){var ue=b.color.length;ve=l.mallocUint8(ue);for(var ye=(b.color.subarray||b.color.slice).bind(b.color),Me=0;Me<ue;Me+=4)ve.set(n(ye(Me,Me+4),"uint8"),Me)}else{var pe=b.color.length;ve=l.mallocUint8(4*pe);for(var ge=0;ge<pe;ge++)ve.set(n(b.color[ge]||0,"uint8"),4*ge)}this.color=ve}else this.color=n(b.color,"uint8");if(b.position||b.text||b.color||b.baseline||b.align||b.font||b.offset||b.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var we=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(we);for(var oe=0;oe<this.batch.length;oe++)this.batch[oe]={count:this.counts.length>1?this.counts[oe]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[oe]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*oe,4*oe+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[oe]:this.opacity,baseline:null!=this.baselineOffset[oe]?this.baselineOffset[oe]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[oe]?this.alignOffset[oe]:this.alignOffset[0]:0,atlas:this.fontAtlas[oe]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*oe,2*oe+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},_.prototype.destroy=function(){},_.prototype.kerning=!0,_.prototype.position={constant:new Float32Array(2)},_.prototype.translate=null,_.prototype.scale=null,_.prototype.font=null,_.prototype.text="",_.prototype.positionOffset=[0,0],_.prototype.opacity=1,_.prototype.color=new Uint8Array([0,0,0,255]),_.prototype.alignOffset=[0,0],_.maxAtlasSize=1024,_.atlasCanvas=document.createElement("canvas"),_.atlasContext=_.atlasCanvas.getContext("2d",{alpha:!1}),_.baseFontSize=64,_.fonts={},$.exports=_},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:284,"to-px":315,"typedarray-pool":328}],226:[function(v,$,Q){(function(m){(function(){"use strict";var g=v("pick-by-alias");function k(n){if(n.container)if(n.container==document.body)document.body.style.width||(n.canvas.width=n.width||n.pixelRatio*m.innerWidth),document.body.style.height||(n.canvas.height=n.height||n.pixelRatio*m.innerHeight);else{var i=n.container.getBoundingClientRect();n.canvas.width=n.width||i.right-i.left,n.canvas.height=n.height||i.bottom-i.top}}function x(n){return"function"==typeof n.getContext&&"width"in n&&"height"in n}function e(){var n=document.createElement("canvas");return n.style.position="absolute",n.style.top=0,n.style.left=0,n}$.exports=function(n){var i,r;if(n?"string"==typeof n&&(n={container:n}):n={},(n=x(n)||"string"==typeof(i=n).nodeName&&"function"==typeof i.appendChild&&"function"==typeof i.getBoundingClientRect?{container:n}:"function"==typeof(r=n).drawArrays||"function"==typeof r.drawElements?{gl:n}:g(n,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(n.pixelRatio=m.pixelRatio||1),n.gl)return n.gl;if(n.canvas&&(n.container=n.canvas.parentNode),n.container){if("string"==typeof n.container){var l=document.querySelector(n.container);if(!l)throw Error("Element "+n.container+" is not found");n.container=l}x(n.container)?(n.canvas=n.container,n.container=n.canvas.parentNode):n.canvas||(n.canvas=e(),n.container.appendChild(n.canvas),k(n))}else if(!n.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");n.container=document.body||document.documentElement,n.canvas=e(),n.container.appendChild(n.canvas),k(n)}return n.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(r){try{n.gl=n.canvas.getContext(r,n.attrs)}catch{}return n.gl}),n.gl}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":253}],227:[function(v,$,Q){$.exports=function(m){"string"==typeof m&&(m=[m]);for(var g=[].slice.call(arguments,1),k=[],x=0;x<m.length-1;x++)k.push(m[x],g[x]||"");return k.push(m[x]),k.join("")}},{}],228:[function(v,$,Q){(function(m){(function(){"use strict";var g,k=v("is-browser");g="function"==typeof m.matchMedia?!m.matchMedia("(hover: none)").matches:k,$.exports=g}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":232}],229:[function(v,$,Q){"use strict";var m=v("is-browser");$.exports=m&&function(){var g=!1;try{var k=Object.defineProperty({},"passive",{get:function(){g=!0}});window.addEventListener("test",null,k),window.removeEventListener("test",null,k)}catch{g=!1}return g}()},{"is-browser":232}],230:[function(v,$,Q){Q.read=function(m,g,k,x,e){var n,i,l=8*e-x-1,r=(1<<l)-1,d=r>>1,f=-7,t=k?e-1:0,h=k?-1:1,s=m[g+t];for(t+=h,n=s&(1<<-f)-1,s>>=-f,f+=l;f>0;n=256*n+m[g+t],t+=h,f-=8);for(i=n&(1<<-f)-1,n>>=-f,f+=x;f>0;i=256*i+m[g+t],t+=h,f-=8);if(0===n)n=1-d;else{if(n===r)return i?NaN:1/0*(s?-1:1);i+=Math.pow(2,x),n-=d}return(s?-1:1)*i*Math.pow(2,n-x)},Q.write=function(m,g,k,x,e,n){var i,l,r,d=8*n-e-1,f=(1<<d)-1,t=f>>1,h=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,s=x?0:n-1,o=x?1:-1,p=g<0||0===g&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(l=isNaN(g)?1:0,i=f):(i=Math.floor(Math.log(g)/Math.LN2),g*(r=Math.pow(2,-i))<1&&(i--,r*=2),(g+=i+t>=1?h/r:h*Math.pow(2,1-t))*r>=2&&(i++,r/=2),i+t>=f?(l=0,i=f):i+t>=1?(l=(g*r-1)*Math.pow(2,e),i+=t):(l=g*Math.pow(2,t-1)*Math.pow(2,e),i=0));e>=8;m[k+s]=255&l,s+=o,l/=256,e-=8);for(i=i<<e|l,d+=e;d>0;m[k+s]=255&i,s+=o,i/=256,d-=8);m[k+s-o]|=128*p}},{}],231:[function(v,$,Q){$.exports="function"==typeof Object.create?function(m,g){g&&(m.super_=g,m.prototype=Object.create(g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}))}:function(m,g){if(g){m.super_=g;var k=function(){};k.prototype=g.prototype,m.prototype=new k,m.prototype.constructor=m}}},{}],232:[function(v,$,Q){$.exports=!0},{}],233:[function(v,$,Q){"use strict";$.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(v,$,Q){"use strict";$.exports=k,$.exports.isMobile=k,$.exports.default=k;var m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,g=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function k(x){x||(x={});var e=x.ua;if(e||typeof navigator>"u"||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var n=x.tablet?g.test(e):m.test(e);return!n&&x.tablet&&x.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(n=!0),n}},{}],235:[function(v,$,Q){"use strict";$.exports=function(m){var g=typeof m;return null!==m&&("object"===g||"function"===g)}},{}],236:[function(v,$,Q){"use strict";var m=Object.prototype.toString;$.exports=function(g){var k;return"[object Object]"===m.call(g)&&(null===(k=Object.getPrototypeOf(g))||k===Object.getPrototypeOf({}))}},{}],237:[function(v,$,Q){"use strict";$.exports=function(m){for(var g,k=m.length,x=0;x<k;x++)if(((g=m.charCodeAt(x))<9||g>13)&&32!==g&&133!==g&&160!==g&&5760!==g&&6158!==g&&(g<8192||g>8205)&&8232!==g&&8233!==g&&8239!==g&&8287!==g&&8288!==g&&12288!==g&&65279!==g)return!1;return!0}},{}],238:[function(v,$,Q){"use strict";$.exports=function(m){return"string"==typeof m&&(m=m.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(m)&&/[\dz]$/i.test(m)&&m.length>4))}},{}],239:[function(v,$,Q){var m,g;m=this,g=function(){"use strict";var m,g,k;function x(e,n){if(m)if(g){var i="var sharedChunk = {}; ("+m+")(sharedChunk); ("+g+")(sharedChunk);",l={};m(l),(k=n(l)).workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}else g=n;else m=n}return x(0,function(e){function n(A,O){return A(O={exports:{}},O.exports),O.exports}var i=l;function l(A,O,q,ne){this.cx=3*A,this.bx=3*(q-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*O,this.by=3*(ne-O)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=ne,this.p2x=q,this.p2y=ne}l.prototype.sampleCurveX=function(A){return((this.ax*A+this.bx)*A+this.cx)*A},l.prototype.sampleCurveY=function(A){return((this.ay*A+this.by)*A+this.cy)*A},l.prototype.sampleCurveDerivativeX=function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},l.prototype.solveCurveX=function(A,O){var q,ne,me,_e,Le;for(void 0===O&&(O=1e-6),me=A,Le=0;Le<8;Le++){if(_e=this.sampleCurveX(me)-A,Math.abs(_e)<O)return me;var Ne=this.sampleCurveDerivativeX(me);if(Math.abs(Ne)<1e-6)break;me-=_e/Ne}if((me=A)<(q=0))return q;if(me>(ne=1))return ne;for(;q<ne;){if(_e=this.sampleCurveX(me),Math.abs(_e-A)<O)return me;A>_e?q=me:ne=me,me=.5*(ne-q)+q}return me},l.prototype.solve=function(A,O){return this.sampleCurveY(this.solveCurveX(A,O))};var r=d;function d(A,O){this.x=A,this.y=O}function f(A,O,q,ne){var me=new i(A,O,q,ne);return function(_e){return me.solve(_e)}}d.prototype={clone:function(){return new d(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,O){return this.clone()._rotateAround(A,O)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var O=A.x-this.x,q=A.y-this.y;return O*O+q*q},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,O){return Math.atan2(this.x*O-this.y*A,this.x*A+this.y*O)},_matMult:function(A){var q=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=q,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var O=Math.cos(A),q=Math.sin(A),me=q*this.x+O*this.y;return this.x=O*this.x-q*this.y,this.y=me,this},_rotateAround:function(A,O){var q=Math.cos(A),ne=Math.sin(A),_e=O.y+ne*(this.x-O.x)+q*(this.y-O.y);return this.x=O.x+q*(this.x-O.x)-ne*(this.y-O.y),this.y=_e,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(A){return A instanceof d?A:Array.isArray(A)?new d(A[0],A[1]):A};var t=f(.25,.1,.25,1);function h(A,O,q){return Math.min(q,Math.max(O,A))}function s(A,O,q){var ne=q-O,me=((A-O)%ne+ne)%ne+O;return me===O?q:me}function o(A){for(var O=[],q=arguments.length-1;q-- >0;)O[q]=arguments[q+1];for(var ne=0,me=O;ne<me.length;ne+=1){var _e=me[ne];for(var Le in _e)A[Le]=_e[Le]}return A}var p=1;function c(){return p++}function a(){return function A(O){return O?(O^16*Math.random()>>O/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()}function y(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)}function u(A,O){A.forEach(function(q){O[q]&&(O[q]=O[q].bind(O))})}function _(A,O){return-1!==A.indexOf(O,A.length-O.length)}function b(A,O,q){var ne={};for(var me in A)ne[me]=O.call(q||this,A[me],me,A);return ne}function w(A,O,q){var ne={};for(var me in A)O.call(q||this,A[me],me,A)&&(ne[me]=A[me]);return ne}function T(A){return Array.isArray(A)?A.map(T):"object"==typeof A&&A?b(A,T):A}var C={};function M(A){C[A]||(typeof console<"u"&&console.warn(A),C[A]=!0)}function I(A,O,q){return(q.y-A.y)*(O.x-A.x)>(O.y-A.y)*(q.x-A.x)}function P(A){for(var O=0,q=0,ne=A.length,me=ne-1,_e=void 0,Le=void 0;q<ne;me=q++)O+=((Le=A[me]).x-(_e=A[q]).x)*(_e.y+Le.y);return O}function S(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function E(A){var O={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ne,me,_e,Le){var Ne=_e||Le;return O[me]=!Ne||Ne.toLowerCase(),""}),O["max-age"]){var q=parseInt(O["max-age"],10);isNaN(q)?delete O["max-age"]:O["max-age"]=q}return O}var R=null;function D(A){if(null==R){var O=A.navigator?A.navigator.userAgent:null;R=!!A.safari||!(!O||!(/\b(iPad|iPhone|iPod)\b/.test(O)||O.match("Safari")&&!O.match("Chrome")))}return R}function j(A){try{var O=self[A];return O.setItem("_mapbox_test_",1),O.removeItem("_mapbox_test_"),!0}catch{return!1}}var H,Y,X,Z,W=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),re=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,U=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,B={now:W,frame:function(A){var O=re(A);return{cancel:function(){return U(O)}}},getImageData:function(A,O){void 0===O&&(O=0);var q=self.document.createElement("canvas"),ne=q.getContext("2d");if(!ne)throw new Error("failed to create canvas 2d context");return q.width=A.width,q.height=A.height,ne.drawImage(A,0,0,A.width,A.height),ne.getImageData(-O,-O,A.width+2*O,A.height+2*O)},resolveURL:function(A){return H||(H=self.document.createElement("a")),H.href=A,H.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==Y&&(Y=self.matchMedia("(prefers-reduced-motion: reduce)")),Y.matches)}},V={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ee={supported:!1,testSupport:function(A){N||!Z||(K?J(A):X=A)}},N=!1,K=!1;function J(A){var O=A.createTexture();A.bindTexture(A.TEXTURE_2D,O);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,Z),A.isContextLost())return;ee.supported=!0}catch{}A.deleteTexture(O),N=!0}self.document&&((Z=self.document.createElement("img")).onload=function(){X&&J(X),X=null,K=!0},Z.onerror=function(){N=!0,X=null},Z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var te="01",ae=function(A,O){this._transformRequestFn=A,this._customAccessToken=O,this._createSkuToken()};function le(A){return 0===A.indexOf("mapbox:")}ae.prototype._createSkuToken=function(){var A=function(){for(var O="",q=0;q<10;q++)O+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",te,O].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=A.token,this._skuTokenExpiresAt=A.tokenExpiresAt},ae.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ae.prototype.transformRequest=function(A,O){return this._transformRequestFn&&this._transformRequestFn(A,O)||{url:A}},ae.prototype.normalizeStyleURL=function(A,O){if(!le(A))return A;var q=ye(A);return q.path="/styles/v1"+q.path,this._makeAPIURL(q,this._customAccessToken||O)},ae.prototype.normalizeGlyphsURL=function(A,O){if(!le(A))return A;var q=ye(A);return q.path="/fonts/v1"+q.path,this._makeAPIURL(q,this._customAccessToken||O)},ae.prototype.normalizeSourceURL=function(A,O){if(!le(A))return A;var q=ye(A);return q.path="/v4/"+q.authority+".json",q.params.push("secure"),this._makeAPIURL(q,this._customAccessToken||O)},ae.prototype.normalizeSpriteURL=function(A,O,q,ne){var me=ye(A);return le(A)?(me.path="/styles/v1"+me.path+"/sprite"+O+q,this._makeAPIURL(me,this._customAccessToken||ne)):(me.path+=""+O+q,Me(me))},ae.prototype.normalizeTileURL=function(A,O){if(this._isSkuTokenExpired()&&this._createSkuToken(),A&&!le(A))return A;var q=ye(A);q.path=q.path.replace(/(\.(png|jpg)\d*)(?=$)/,(B.devicePixelRatio>=2||512===O?"@2x":"")+(ee.supported?".webp":"$1")),q.path=q.path.replace(/^.+\/v4\//,"/"),q.path="/v4"+q.path;var _e=this._customAccessToken||function(Le){for(var Ne=0,et=Le;Ne<et.length;Ne+=1){var pt=et[Ne].match(/^access_token=(.*)$/);if(pt)return pt[1]}return null}(q.params)||V.ACCESS_TOKEN;return V.REQUIRE_ACCESS_TOKEN&&_e&&this._skuToken&&q.params.push("sku="+this._skuToken),this._makeAPIURL(q,_e)},ae.prototype.canonicalizeTileURL=function(A,O){var q=ye(A);if(!q.path.match(/(^\/v4\/)/)||!q.path.match(/\.[\w]+$/))return A;var ne="mapbox://tiles/";ne+=q.path.replace("/v4/","");var me=q.params;return O&&(me=me.filter(function(_e){return!_e.match(/^access_token=/)})),me.length&&(ne+="?"+me.join("&")),ne},ae.prototype.canonicalizeTileset=function(A,O){for(var q=!!O&&le(O),ne=[],me=0,_e=A.tiles||[];me<_e.length;me+=1){var Le=_e[me];ve(Le)?ne.push(this.canonicalizeTileURL(Le,q)):ne.push(Le)}return ne},ae.prototype._makeAPIURL=function(A,O){var q="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ne=ye(V.API_URL);if(A.protocol=ne.protocol,A.authority=ne.authority,"/"!==ne.path&&(A.path=""+ne.path+A.path),!V.REQUIRE_ACCESS_TOKEN)return Me(A);if(!(O=O||V.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+q);if("s"===O[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+q);return A.params=A.params.filter(function(me){return-1===me.indexOf("access_token")}),A.params.push("access_token="+O),Me(A)};var se=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ve(A){return se.test(A)}var ue=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ye(A){var O=A.match(ue);if(!O)throw new Error("Unable to parse URL object");return{protocol:O[1],authority:O[2],path:O[3]||"/",params:O[4]?O[4].split("&"):[]}}function Me(A){var O=A.params.length?"?"+A.params.join("&"):"";return A.protocol+"://"+A.authority+A.path+O}function pe(A){if(!A)return null;var q=A.split(".");if(!q||3!==q.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(q[1]).split("").map(function(ne){return"%"+("00"+ne.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var ge=function(A){this.type=A,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ge.prototype.getStorageKey=function(A){var ne,q=pe(V.ACCESS_TOKEN);return ne=q&&q.u?self.btoa(encodeURIComponent(q.u).replace(/%([0-9A-F]{2})/g,function(me,_e){return String.fromCharCode(Number("0x"+_e))})):V.ACCESS_TOKEN||"",A?"mapbox.eventData."+A+":"+ne:"mapbox.eventData:"+ne},ge.prototype.fetchEventData=function(){var A=j("localStorage"),O=this.getStorageKey(),q=this.getStorageKey("uuid");if(A)try{var ne=self.localStorage.getItem(O);ne&&(this.eventData=JSON.parse(ne));var me=self.localStorage.getItem(q);me&&(this.anonId=me)}catch{M("Unable to read from LocalStorage")}},ge.prototype.saveEventData=function(){var A=j("localStorage"),O=this.getStorageKey(),q=this.getStorageKey("uuid");if(A)try{self.localStorage.setItem(q,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(O,JSON.stringify(this.eventData))}catch{M("Unable to write to LocalStorage")}},ge.prototype.processRequests=function(A){},ge.prototype.postEvent=function(A,O,q,ne){var me=this;if(V.EVENTS_URL){var _e=ye(V.EVENTS_URL);_e.params.push("access_token="+(ne||V.ACCESS_TOKEN||""));var Le={event:this.type,created:new Date(A).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:te,userId:this.anonId},Ne=O?o(Le,O):Le,et={url:Me(_e),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ne])};this.pendingRequest=Ht(et,function(pt){me.pendingRequest=null,q(pt),me.saveEventData(),me.processRequests(ne)})}},ge.prototype.queueRequest=function(A,O){this.queue.push(A),this.processRequests(O)};var we,oe,de=function(A){function O(){A.call(this,"map.load"),this.success={},this.skuToken=""}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.postMapLoadEvent=function(q,ne,me,_e){this.skuToken=me,(V.EVENTS_URL&&_e||V.ACCESS_TOKEN&&Array.isArray(q)&&q.some(function(Le){return le(Le)||ve(Le)}))&&this.queueRequest({id:ne,timestamp:Date.now()},_e)},O.prototype.processRequests=function(q){var ne=this;if(!this.pendingRequest&&0!==this.queue.length){var me=this.queue.shift(),_e=me.id,Le=me.timestamp;_e&&this.success[_e]||(this.anonId||this.fetchEventData(),y(this.anonId)||(this.anonId=a()),this.postEvent(Le,{skuToken:this.skuToken},function(Ne){Ne||_e&&(ne.success[_e]=!0)},q))}},O}(ge),Te=new(function(A){function O(q){A.call(this,"appUserTurnstile"),this._customAccessToken=q}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.postTurnstileEvent=function(q,ne){V.EVENTS_URL&&V.ACCESS_TOKEN&&Array.isArray(q)&&q.some(function(me){return le(me)||ve(me)})&&this.queueRequest(Date.now(),ne)},O.prototype.processRequests=function(q){var ne=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var me=pe(V.ACCESS_TOKEN),_e=me?me.u:V.ACCESS_TOKEN,Le=_e!==this.eventData.tokenU;y(this.anonId)||(this.anonId=a(),Le=!0);var Ne=this.queue.shift();if(this.eventData.lastSuccess){var et=new Date(this.eventData.lastSuccess),pt=new Date(Ne),vt=(Ne-this.eventData.lastSuccess)/864e5;Le=Le||vt>=1||vt<-1||et.getDate()!==pt.getDate()}else Le=!0;if(!Le)return this.processRequests();this.postEvent(Ne,{"enabled.telemetry":!1},function(Vt){Vt||(ne.eventData.lastSuccess=Ne,ne.eventData.tokenU=_e)},q)}},O}(ge)),Ee=Te.postTurnstileEvent.bind(Te),Ae=new de,De=Ae.postMapLoadEvent.bind(Ae),Ie=500,Oe=50;function Xe(){self.caches&&!we&&(we=self.caches.open("mapbox-tiles"))}function Pe(A){var O=A.indexOf("?");return O<0?A:A.slice(0,O)}var qe,Qe=1/0;function ct(){return null==qe&&(qe=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),qe}var bt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(bt);var Tt=function(A){function O(q,ne,me){401===ne&&ve(me)&&(q+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),A.call(this,q),this.status=ne,this.url=me,this.name=this.constructor.name,this.message=q}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},O}(Error),_t=S()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function nt(A,O){var q,ne=new self.AbortController,me=new self.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:_t(),signal:ne.signal}),_e=!1,Le=!1,Ne=(q=me.url).indexOf("sku=")>0&&ve(q);"json"===A.type&&me.headers.set("Accept","application/json");var et=function(vt,Vt,Qt){if(!Le){if(vt&&"SecurityError"!==vt.message&&M(vt),Vt&&Qt)return pt(Vt);var Wt=Date.now();self.fetch(me).then(function(ur){if(ur.ok){var Tr=Ne?ur.clone():null;return pt(ur,Tr,Wt)}return O(new Tt(ur.statusText,ur.status,A.url))}).catch(function(ur){20!==ur.code&&O(new Error(ur.message))})}},pt=function(vt,Vt,Qt){("arrayBuffer"===A.type?vt.arrayBuffer():"json"===A.type?vt.json():vt.text()).then(function(Wt){Le||(Vt&&Qt&&function Fe(A,O,q){if(Xe(),we){var ne={status:O.status,statusText:O.statusText,headers:new self.Headers};O.headers.forEach(function(_e,Le){return ne.headers.set(Le,_e)});var me=E(O.headers.get("Cache-Control")||"");me["no-store"]||(me["max-age"]&&ne.headers.set("Expires",new Date(q+1e3*me["max-age"]).toUTCString()),new Date(ne.headers.get("Expires")).getTime()-q<42e4||function(_e,Le){if(void 0===oe)try{new Response(new ReadableStream),oe=!0}catch{oe=!1}oe?Le(_e.body):_e.blob().then(Le)}(O,function(_e){var Le=new self.Response(_e,ne);Xe(),we&&we.then(function(Ne){return Ne.put(Pe(A.url),Le)}).catch(function(Ne){return M(Ne.message)})}))}}(me,Vt,Qt),_e=!0,O(null,Wt,vt.headers.get("Cache-Control"),vt.headers.get("Expires")))}).catch(function(Wt){Le||O(new Error(Wt.message))})};return Ne?function Re(A,O){if(Xe(),!we)return O(null);var q=Pe(A.url);we.then(function(ne){ne.match(q).then(function(me){var _e=function(Le){if(!Le)return!1;var Ne=new Date(Le.headers.get("Expires")||0),et=E(Le.headers.get("Cache-Control")||"");return Ne>Date.now()&&!et["no-cache"]}(me);ne.delete(q),_e&&ne.put(q,me.clone()),O(null,me,_e)}).catch(O)}).catch(O)}(me,et):et(null,null),{cancel:function(){Le=!0,_e||ne.abort()}}}var Zt,$t,Ke=function(A,O){if(!(/^file:/.test(q=A.url)||/^file:/.test(_t())&&!/^\w+:/.test(q))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return nt(A,O);if(S()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,O,void 0,!0)}var q;return function(ne,me){var _e=new self.XMLHttpRequest;for(var Le in _e.open(ne.method||"GET",ne.url,!0),"arrayBuffer"===ne.type&&(_e.responseType="arraybuffer"),ne.headers)_e.setRequestHeader(Le,ne.headers[Le]);return"json"===ne.type&&(_e.responseType="text",_e.setRequestHeader("Accept","application/json")),_e.withCredentials="include"===ne.credentials,_e.onerror=function(){me(new Error(_e.statusText))},_e.onload=function(){if((_e.status>=200&&_e.status<300||0===_e.status)&&null!==_e.response){var Ne=_e.response;if("json"===ne.type)try{Ne=JSON.parse(_e.response)}catch(et){return me(et)}me(null,Ne,_e.getResponseHeader("Cache-Control"),_e.getResponseHeader("Expires"))}else me(new Tt(_e.statusText,_e.status,ne.url))},_e.send(ne.body),{cancel:function(){return _e.abort()}}}(A,O)},xt=function(A,O){return Ke(o(A,{type:"arrayBuffer"}),O)},Ht=function(A,O){return Ke(o(A,{method:"POST"}),O)};Zt=[],$t=0;var Xt=function(A,O){if(ee.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),$t>=V.MAX_PARALLEL_IMAGE_REQUESTS){var q={requestParameters:A,callback:O,cancelled:!1,cancel:function(){this.cancelled=!0}};return Zt.push(q),q}$t++;var ne=!1,me=function(){if(!ne)for(ne=!0,$t--;Zt.length&&$t<V.MAX_PARALLEL_IMAGE_REQUESTS;){var Le=Zt.shift();Le.cancelled||(Le.cancel=Xt(Le.requestParameters,Le.callback).cancel)}},_e=xt(A,function(Le,Ne,et,pt){var Vt,Qt;me(),Le?O(Le):Ne&&(ct()?(Vt=O,Qt=new self.Blob([new Uint8Array(Ne)],{type:"image/png"}),self.createImageBitmap(Qt).then(function(Wt){Vt(null,Wt)}).catch(function(Wt){Vt(new Error("Could not load image because of "+Wt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(vt,Vt,Qt,Wt){var ur=new self.Image,Tr=self.URL;ur.onload=function(){Vt(null,ur),Tr.revokeObjectURL(ur.src)},ur.onerror=function(){return Vt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Rr=new self.Blob([new Uint8Array(vt)],{type:"image/png"});ur.cacheControl=Qt,ur.expires=Wt,ur.src=vt.byteLength?Tr.createObjectURL(Rr):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ne,O,et,pt))});return{cancel:function(){_e.cancel(),me()}}};function cr(A,O,q){q[A]&&-1!==q[A].indexOf(O)||(q[A]=q[A]||[],q[A].push(O))}function Ft(A,O,q){if(q&&q[A]){var ne=q[A].indexOf(O);-1!==ne&&q[A].splice(ne,1)}}var Be=function(A,O){void 0===O&&(O={}),o(this,O),this.type=A},He=function(A){function O(q,ne){void 0===ne&&(ne={}),A.call(this,"error",o({error:q},ne))}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O}(Be),he=function(){};he.prototype.on=function(A,O){return this._listeners=this._listeners||{},cr(A,O,this._listeners),this},he.prototype.off=function(A,O){return Ft(A,O,this._listeners),Ft(A,O,this._oneTimeListeners),this},he.prototype.once=function(A,O){return this._oneTimeListeners=this._oneTimeListeners||{},cr(A,O,this._oneTimeListeners),this},he.prototype.fire=function(A,O){"string"==typeof A&&(A=new Be(A,O||{}));var q=A.type;if(this.listens(q)){A.target=this;for(var ne=0,me=this._listeners&&this._listeners[q]?this._listeners[q].slice():[];ne<me.length;ne+=1)me[ne].call(this,A);for(var _e=0,Le=this._oneTimeListeners&&this._oneTimeListeners[q]?this._oneTimeListeners[q].slice():[];_e<Le.length;_e+=1){var Ne=Le[_e];Ft(q,Ne,this._oneTimeListeners),Ne.call(this,A)}var et=this._eventedParent;et&&(o(A,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),et.fire(A))}else A instanceof He&&console.error(A.error);return this},he.prototype.listens=function(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)},he.prototype.setEventedParent=function(A,O){return this._eventedParent=A,this._eventedParentData=O,this};var be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ze=function(A,O,q,ne){this.message=(A?A+": ":"")+q,ne&&(this.identifier=ne),null!=O&&O.__line__&&(this.line=O.__line__)};function Ve(A){var q=A.value;return q?[new ze(A.key,q,"constants have been deprecated as of v8")]:[]}function Je(A){for(var O=[],q=arguments.length-1;q-- >0;)O[q]=arguments[q+1];for(var ne=0,me=O;ne<me.length;ne+=1){var _e=me[ne];for(var Le in _e)A[Le]=_e[Le]}return A}function Ye(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function lt(A){if(Array.isArray(A))return A.map(lt);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){var O={};for(var q in A)O[q]=lt(A[q]);return O}return Ye(A)}var st=function(A){function O(q,ne){A.call(this,ne),this.message=ne,this.key=q}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O}(Error),Mt=function(A,O){void 0===O&&(O=[]),this.parent=A,this.bindings={};for(var q=0,ne=O;q<ne.length;q+=1){var me=ne[q];this.bindings[me[0]]=me[1]}};Mt.prototype.concat=function(A){return new Mt(this,A)},Mt.prototype.get=function(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(A+" not found in scope.")},Mt.prototype.has=function(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)};var Dt={kind:"null"},ht={kind:"number"},mt={kind:"string"},Ot={kind:"boolean"},At={kind:"color"},It={kind:"object"},Se={kind:"value"},Ze={kind:"collator"},it={kind:"formatted"},dt={kind:"resolvedImage"};function Ct(A,O){return{kind:"array",itemType:A,N:O}}function Ut(A){if("array"===A.kind){var O=Ut(A.itemType);return"number"==typeof A.N?"array<"+O+", "+A.N+">":"value"===A.itemType.kind?"array":"array<"+O+">"}return A.kind}var Jt=[Dt,ht,mt,Ot,At,it,It,Ct(Se),dt];function qt(A,O){if("error"===O.kind)return null;if("array"===A.kind){if("array"===O.kind&&(0===O.N&&"value"===O.itemType.kind||!qt(A.itemType,O.itemType))&&("number"!=typeof A.N||A.N===O.N))return null}else{if(A.kind===O.kind)return null;if("value"===A.kind)for(var q=0,ne=Jt;q<ne.length;q+=1)if(!qt(ne[q],O))return null}return"Expected "+Ut(A)+" but found "+Ut(O)+" instead."}function pr(A,O){return O.some(function(q){return q.kind===A.kind})}function Sr(A,O){return O.some(function(q){return"null"===q?null===A:"array"===q?Array.isArray(A):"object"===q?A&&!Array.isArray(A)&&"object"==typeof A:q===typeof A})}var mr=n(function(A,O){var q={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ne(et){return(et=Math.round(et))<0?0:et>255?255:et}function _e(et){return ne("%"===et[et.length-1]?parseFloat(et)/100*255:parseInt(et))}function Le(et){return function me(et){return et<0?0:et>1?1:et}("%"===et[et.length-1]?parseFloat(et)/100:parseFloat(et))}function Ne(et,pt,vt){return vt<0?vt+=1:vt>1&&(vt-=1),6*vt<1?et+(pt-et)*vt*6:2*vt<1?pt:3*vt<2?et+(pt-et)*(2/3-vt)*6:et}try{O.parseCSSColor=function(et){var pt,vt=et.replace(/ /g,"").toLowerCase();if(vt in q)return q[vt].slice();if("#"===vt[0])return 4===vt.length?(pt=parseInt(vt.substr(1),16))>=0&&pt<=4095?[(3840&pt)>>4|(3840&pt)>>8,240&pt|(240&pt)>>4,15&pt|(15&pt)<<4,1]:null:7===vt.length&&(pt=parseInt(vt.substr(1),16))>=0&&pt<=16777215?[(16711680&pt)>>16,(65280&pt)>>8,255&pt,1]:null;var Vt=vt.indexOf("("),Qt=vt.indexOf(")");if(-1!==Vt&&Qt+1===vt.length){var Wt=vt.substr(0,Vt),ur=vt.substr(Vt+1,Qt-(Vt+1)).split(","),Tr=1;switch(Wt){case"rgba":if(4!==ur.length)return null;Tr=Le(ur.pop());case"rgb":return 3!==ur.length?null:[_e(ur[0]),_e(ur[1]),_e(ur[2]),Tr];case"hsla":if(4!==ur.length)return null;Tr=Le(ur.pop());case"hsl":if(3!==ur.length)return null;var Rr=(parseFloat(ur[0])%360+360)%360/360,Dr=Le(ur[1]),qr=Le(ur[2]),Yr=qr<=.5?qr*(Dr+1):qr+Dr-qr*Dr,Kr=2*qr-Yr;return[ne(255*Ne(Kr,Yr,Rr+1/3)),ne(255*Ne(Kr,Yr,Rr)),ne(255*Ne(Kr,Yr,Rr-1/3)),Tr];default:return null}}return null}}catch{}}).parseCSSColor,tr=function(A,O,q,ne){void 0===ne&&(ne=1),this.r=A,this.g=O,this.b=q,this.a=ne};tr.parse=function(A){if(A){if(A instanceof tr)return A;if("string"==typeof A){var O=mr(A);if(O)return new tr(O[0]/255*O[3],O[1]/255*O[3],O[2]/255*O[3],O[3])}}},tr.prototype.toString=function(){var A=this.toArray(),q=A[1],ne=A[2],me=A[3];return"rgba("+Math.round(A[0])+","+Math.round(q)+","+Math.round(ne)+","+me+")"},tr.prototype.toArray=function(){var ne=this.a;return 0===ne?[0,0,0,0]:[255*this.r/ne,255*this.g/ne,255*this.b/ne,ne]},tr.black=new tr(0,0,0,1),tr.white=new tr(1,1,1,1),tr.transparent=new tr(0,0,0,0),tr.red=new tr(1,0,0,1);var rr=function(A,O,q){this.sensitivity=A?O?"variant":"case":O?"accent":"base",this.locale=q,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};rr.prototype.compare=function(A,O){return this.collator.compare(A,O)},rr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ar=function(A,O,q,ne,me){this.text=A,this.image=O,this.scale=q,this.fontStack=ne,this.textColor=me},dr=function(A){this.sections=A};dr.fromString=function(A){return new dr([new ar(A,null,null,null,null)])},dr.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(A){return 0!==A.text.length||A.image&&0!==A.image.name.length})},dr.factory=function(A){return A instanceof dr?A:dr.fromString(A)},dr.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(A){return A.text}).join("")},dr.prototype.serialize=function(){for(var A=["format"],O=0,q=this.sections;O<q.length;O+=1){var ne=q[O];if(ne.image)A.push(["image",ne.image.name]);else{A.push(ne.text);var me={};ne.fontStack&&(me["text-font"]=["literal",ne.fontStack.split(",")]),ne.scale&&(me["font-scale"]=ne.scale),ne.textColor&&(me["text-color"]=["rgba"].concat(ne.textColor.toArray())),A.push(me)}}return A};var xr=function(A){this.name=A.name,this.available=A.available};function Lr(A,O,q,ne){return"number"==typeof A&&A>=0&&A<=255&&"number"==typeof O&&O>=0&&O<=255&&"number"==typeof q&&q>=0&&q<=255?void 0===ne||"number"==typeof ne&&ne>=0&&ne<=1?null:"Invalid rgba value ["+[A,O,q,ne].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof ne?[A,O,q,ne]:[A,O,q]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function zr(A){if(null===A||"string"==typeof A||"boolean"==typeof A||"number"==typeof A||A instanceof tr||A instanceof rr||A instanceof dr||A instanceof xr)return!0;if(Array.isArray(A)){for(var O=0,q=A;O<q.length;O+=1)if(!zr(q[O]))return!1;return!0}if("object"==typeof A){for(var ne in A)if(!zr(A[ne]))return!1;return!0}return!1}function Hr(A){if(null===A)return Dt;if("string"==typeof A)return mt;if("boolean"==typeof A)return Ot;if("number"==typeof A)return ht;if(A instanceof tr)return At;if(A instanceof rr)return Ze;if(A instanceof dr)return it;if(A instanceof xr)return dt;if(Array.isArray(A)){for(var O,q=A.length,ne=0,me=A;ne<me.length;ne+=1){var _e=Hr(me[ne]);if(O){if(O===_e)continue;O=Se;break}O=_e}return Ct(O||Se,q)}return It}function Xr(A){var O=typeof A;return null===A?"":"string"===O||"number"===O||"boolean"===O?String(A):A instanceof tr||A instanceof dr||A instanceof xr?A.toString():JSON.stringify(A)}xr.prototype.toString=function(){return this.name},xr.fromString=function(A){return A?new xr({name:A,available:!1}):null},xr.prototype.serialize=function(){return["image",this.name]};var cn=function(A,O){this.type=A,this.value=O};cn.parse=function(A,O){if(2!==A.length)return O.error("'literal' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(!zr(A[1]))return O.error("invalid value");var q=A[1],ne=Hr(q),me=O.expectedType;return"array"!==ne.kind||0!==ne.N||!me||"array"!==me.kind||"number"==typeof me.N&&0!==me.N||(ne=me),new cn(ne,q)},cn.prototype.evaluate=function(){return this.value},cn.prototype.eachChild=function(){},cn.prototype.outputDefined=function(){return!0},cn.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof tr?["rgba"].concat(this.value.toArray()):this.value instanceof dr?this.value.serialize():this.value};var an=function(A){this.name="ExpressionEvaluationError",this.message=A};an.prototype.toJSON=function(){return this.message};var Nn={string:mt,number:ht,boolean:Ot,object:It},on=function(A,O){this.type=A,this.args=O};on.parse=function(A,O){if(A.length<2)return O.error("Expected at least one argument.");var q,ne=1,me=A[0];if("array"===me){var _e,Le;if(A.length>2){var Ne=A[1];if("string"!=typeof Ne||!(Ne in Nn)||"object"===Ne)return O.error('The item type argument of "array" must be one of string, number, boolean',1);_e=Nn[Ne],ne++}else _e=Se;if(A.length>3){if(null!==A[2]&&("number"!=typeof A[2]||A[2]<0||A[2]!==Math.floor(A[2])))return O.error('The length argument to "array" must be a positive integer literal',2);Le=A[2],ne++}q=Ct(_e,Le)}else q=Nn[me];for(var et=[];ne<A.length;ne++){var pt=O.parse(A[ne],ne,Se);if(!pt)return null;et.push(pt)}return new on(q,et)},on.prototype.evaluate=function(A){for(var O=0;O<this.args.length;O++){var q=this.args[O].evaluate(A);if(!qt(this.type,Hr(q)))return q;if(O===this.args.length-1)throw new an("Expected value to be of type "+Ut(this.type)+", but found "+Ut(Hr(q))+" instead.")}return null},on.prototype.eachChild=function(A){this.args.forEach(A)},on.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},on.prototype.serialize=function(){var A=this.type,O=[A.kind];if("array"===A.kind){var q=A.itemType;if("string"===q.kind||"number"===q.kind||"boolean"===q.kind){O.push(q.kind);var ne=A.N;("number"==typeof ne||this.args.length>1)&&O.push(ne)}}return O.concat(this.args.map(function(me){return me.serialize()}))};var wn=function(A){this.type=it,this.sections=A};wn.parse=function(A,O){if(A.length<2)return O.error("Expected at least one argument.");var q=A[1];if(!Array.isArray(q)&&"object"==typeof q)return O.error("First argument must be an image or text section.");for(var ne=[],me=!1,_e=1;_e<=A.length-1;++_e){var Le=A[_e];if(me&&"object"==typeof Le&&!Array.isArray(Le)){me=!1;var Ne=null;if(Le["font-scale"]&&!(Ne=O.parse(Le["font-scale"],1,ht)))return null;var et=null;if(Le["text-font"]&&!(et=O.parse(Le["text-font"],1,Ct(mt))))return null;var pt=null;if(Le["text-color"]&&!(pt=O.parse(Le["text-color"],1,At)))return null;var vt=ne[ne.length-1];vt.scale=Ne,vt.font=et,vt.textColor=pt}else{var Vt=O.parse(A[_e],1,Se);if(!Vt)return null;var Qt=Vt.type.kind;if("string"!==Qt&&"value"!==Qt&&"null"!==Qt&&"resolvedImage"!==Qt)return O.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");me=!0,ne.push({content:Vt,scale:null,font:null,textColor:null})}}return new wn(ne)},wn.prototype.evaluate=function(A){return new dr(this.sections.map(function(O){var q=O.content.evaluate(A);return Hr(q)===dt?new ar("",q,null,null,null):new ar(Xr(q),null,O.scale?O.scale.evaluate(A):null,O.font?O.font.evaluate(A).join(","):null,O.textColor?O.textColor.evaluate(A):null)}))},wn.prototype.eachChild=function(A){for(var O=0,q=this.sections;O<q.length;O+=1){var ne=q[O];A(ne.content),ne.scale&&A(ne.scale),ne.font&&A(ne.font),ne.textColor&&A(ne.textColor)}},wn.prototype.outputDefined=function(){return!1},wn.prototype.serialize=function(){for(var A=["format"],O=0,q=this.sections;O<q.length;O+=1){var ne=q[O];A.push(ne.content.serialize());var me={};ne.scale&&(me["font-scale"]=ne.scale.serialize()),ne.font&&(me["text-font"]=ne.font.serialize()),ne.textColor&&(me["text-color"]=ne.textColor.serialize()),A.push(me)}return A};var An=function(A){this.type=dt,this.input=A};An.parse=function(A,O){if(2!==A.length)return O.error("Expected two arguments.");var q=O.parse(A[1],1,mt);return q?new An(q):O.error("No image name provided.")},An.prototype.evaluate=function(A){var O=this.input.evaluate(A),q=xr.fromString(O);return q&&A.availableImages&&(q.available=A.availableImages.indexOf(O)>-1),q},An.prototype.eachChild=function(A){A(this.input)},An.prototype.outputDefined=function(){return!1},An.prototype.serialize=function(){return["image",this.input.serialize()]};var ii={"to-boolean":Ot,"to-color":At,"to-number":ht,"to-string":mt},Vr=function(A,O){this.type=A,this.args=O};Vr.parse=function(A,O){if(A.length<2)return O.error("Expected at least one argument.");var q=A[0];if(("to-boolean"===q||"to-string"===q)&&2!==A.length)return O.error("Expected one argument.");for(var ne=ii[q],me=[],_e=1;_e<A.length;_e++){var Le=O.parse(A[_e],_e,Se);if(!Le)return null;me.push(Le)}return new Vr(ne,me)},Vr.prototype.evaluate=function(A){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(A));if("color"===this.type.kind){for(var O,q,ne=0,me=this.args;ne<me.length;ne+=1){if(q=null,(O=me[ne].evaluate(A))instanceof tr)return O;if("string"==typeof O){var _e=A.parseColor(O);if(_e)return _e}else if(Array.isArray(O)&&!(q=O.length<3||O.length>4?"Invalid rbga value "+JSON.stringify(O)+": expected an array containing either three or four numeric values.":Lr(O[0],O[1],O[2],O[3])))return new tr(O[0]/255,O[1]/255,O[2]/255,O[3])}throw new an(q||"Could not parse color from value '"+("string"==typeof O?O:String(JSON.stringify(O)))+"'")}if("number"===this.type.kind){for(var Le=null,Ne=0,et=this.args;Ne<et.length;Ne+=1){if(null===(Le=et[Ne].evaluate(A)))return 0;var pt=Number(Le);if(!isNaN(pt))return pt}throw new an("Could not convert "+JSON.stringify(Le)+" to number.")}return"formatted"===this.type.kind?dr.fromString(Xr(this.args[0].evaluate(A))):"resolvedImage"===this.type.kind?xr.fromString(Xr(this.args[0].evaluate(A))):Xr(this.args[0].evaluate(A))},Vr.prototype.eachChild=function(A){this.args.forEach(A)},Vr.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Vr.prototype.serialize=function(){if("formatted"===this.type.kind)return new wn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new An(this.args[0]).serialize();var A=["to-"+this.type.kind];return this.eachChild(function(O){A.push(O.serialize())}),A};var sn=["Unknown","Point","LineString","Polygon"],xn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};xn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},xn.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?sn[this.feature.type]:this.feature.type:null},xn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},xn.prototype.canonicalID=function(){return this.canonical},xn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},xn.prototype.parseColor=function(A){var O=this._parseColorCache[A];return O||(O=this._parseColorCache[A]=tr.parse(A)),O};var nn=function(A,O,q,ne){this.name=A,this.type=O,this._evaluate=q,this.args=ne};nn.prototype.evaluate=function(A){return this._evaluate(A,this.args)},nn.prototype.eachChild=function(A){this.args.forEach(A)},nn.prototype.outputDefined=function(){return!1},nn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(A){return A.serialize()}))},nn.parse=function(A,O){var q,ne=A[0],me=nn.definitions[ne];if(!me)return O.error('Unknown expression "'+ne+'". If you wanted a literal array, use ["literal", [...]].',0);for(var _e=Array.isArray(me)?me[0]:me.type,Le=Array.isArray(me)?[[me[1],me[2]]]:me.overloads,Ne=Le.filter(function(pi){var ni=pi[0];return!Array.isArray(ni)||ni.length===A.length-1}),et=null,pt=0,vt=Ne;pt<vt.length;pt+=1){var Vt=vt[pt],Qt=Vt[0],Wt=Vt[1];et=new ln(O.registry,O.path,null,O.scope);for(var ur=[],Tr=!1,Rr=1;Rr<A.length;Rr++){var Dr=A[Rr],qr=Array.isArray(Qt)?Qt[Rr-1]:Qt.type,Yr=et.parse(Dr,1+ur.length,qr);if(!Yr){Tr=!0;break}ur.push(Yr)}if(!Tr)if(Array.isArray(Qt)&&Qt.length!==ur.length)et.error("Expected "+Qt.length+" arguments, but found "+ur.length+" instead.");else{for(var Kr=0;Kr<ur.length;Kr++){var vn=Array.isArray(Qt)?Qt[Kr]:Qt.type,Sn=ur[Kr];et.concat(Kr+1).checkSubtype(vn,Sn.type)}if(0===et.errors.length)return new nn(ne,_e,Wt,ur)}}if(1===Ne.length)(q=O.errors).push.apply(q,et.errors);else{for(var Gn=(Ne.length?Ne:Le).map(function(pi){var ni;return ni=pi[0],Array.isArray(ni)?"("+ni.map(Ut).join(", ")+")":"("+Ut(ni.type)+"...)"}).join(" | "),Hn=[],$n=1;$n<A.length;$n++){var hi=O.parse(A[$n],1+Hn.length);if(!hi)return null;Hn.push(Ut(hi.type))}O.error("Expected arguments of type "+Gn+", but found ("+Hn.join(", ")+") instead.")}return null},nn.register=function(A,O){for(var q in nn.definitions=O,O)A[q]=nn};var fn=function(A,O,q){this.type=Ze,this.locale=q,this.caseSensitive=A,this.diacriticSensitive=O};function Xn(A,O){A[0]=Math.min(A[0],O[0]),A[1]=Math.min(A[1],O[1]),A[2]=Math.max(A[2],O[0]),A[3]=Math.max(A[3],O[1])}function Mn(A,O){return!(A[0]<=O[0]||A[2]>=O[2]||A[1]<=O[1]||A[3]>=O[3])}function On(A,O){var ne=(180+A[0])/360,me=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,_e=Math.pow(2,O.z);return[Math.round(ne*_e*8192),Math.round(me*_e*8192)]}function si(A,O,q){return O[1]>A[1]!=q[1]>A[1]&&A[0]<(q[0]-O[0])*(A[1]-O[1])/(q[1]-O[1])+O[0]}function or(A,O){for(var q,ne,me,_e,Le,Ne,et,pt=!1,vt=0,Vt=O.length;vt<Vt;vt++)for(var Qt=O[vt],Wt=0,ur=Qt.length;Wt<ur-1;Wt++){if(void 0,void 0,void 0,void 0,(_e=(q=A)[0]-(ne=Qt[Wt])[0])*(et=q[1]-(me=Qt[Wt+1])[1])-(Ne=q[0]-me[0])*(Le=q[1]-ne[1])==0&&_e*Ne<=0&&Le*et<=0)return!1;si(A,Qt[Wt],Qt[Wt+1])&&(pt=!pt)}return pt}function br(A,O){for(var q=0;q<O.length;q++)if(or(A,O[q]))return!0;return!1}function Rt(A,O,q,ne){var et=ne[0]-q[0],pt=ne[1]-q[1],vt=(A[0]-q[0])*pt-et*(A[1]-q[1]),Vt=(O[0]-q[0])*pt-et*(O[1]-q[1]);return vt>0&&Vt<0||vt<0&&Vt>0}function fr(A,O,q){for(var ne=0,me=q;ne<me.length;ne+=1)for(var _e=me[ne],Le=0;Le<_e.length-1;++Le)if(void 0,void 0,(Vt=[(vt=_e[Le+1])[0]-(pt=_e[Le])[0],vt[1]-pt[1]])[0]*(Qt=[(et=O)[0]-(Ne=A)[0],et[1]-Ne[1]])[1]-Vt[1]*Qt[0]!=0&&Rt(Ne,et,pt,vt)&&Rt(pt,vt,Ne,et))return!0;var Ne,et,pt,vt,Vt,Qt;return!1}function gr(A,O){for(var q=0;q<A.length;++q)if(!or(A[q],O))return!1;for(var ne=0;ne<A.length-1;++ne)if(fr(A[ne],A[ne+1],O))return!1;return!0}function jr(A,O){for(var q=0;q<O.length;q++)if(gr(A,O[q]))return!0;return!1}function Br(A,O,q){for(var ne=[],me=0;me<A.length;me++){for(var _e=[],Le=0;Le<A[me].length;Le++){var Ne=On(A[me][Le],q);Xn(O,Ne),_e.push(Ne)}ne.push(_e)}return ne}function Fr(A,O,q){for(var ne=[],me=0;me<A.length;me++){var _e=Br(A[me],O,q);ne.push(_e)}return ne}function Er(A,O,q,ne){if(A[0]<q[0]||A[0]>q[2]){var me=.5*ne,_e=A[0]-q[0]>me?-ne:q[0]-A[0]>me?ne:0;0===_e&&(_e=A[0]-q[2]>me?-ne:q[2]-A[0]>me?ne:0),A[0]+=_e}Xn(O,A)}function _r(A,O,q,ne){for(var me=8192*Math.pow(2,ne.z),_e=[8192*ne.x,8192*ne.y],Le=[],Ne=0,et=A;Ne<et.length;Ne+=1)for(var pt=0,vt=et[Ne];pt<vt.length;pt+=1){var Vt=vt[pt],Qt=[Vt.x+_e[0],Vt.y+_e[1]];Er(Qt,O,q,me),Le.push(Qt)}return Le}function kr(A,O,q,ne){for(var me,_e=8192*Math.pow(2,ne.z),Le=[8192*ne.x,8192*ne.y],Ne=[],et=0,pt=A;et<pt.length;et+=1){for(var vt=[],Vt=0,Qt=pt[et];Vt<Qt.length;Vt+=1){var Wt=Qt[Vt],ur=[Wt.x+Le[0],Wt.y+Le[1]];Xn(O,ur),vt.push(ur)}Ne.push(vt)}if(O[2]-O[0]<=_e/2){(me=O)[0]=me[1]=1/0,me[2]=me[3]=-1/0;for(var Tr=0,Rr=Ne;Tr<Rr.length;Tr+=1)for(var Dr=0,qr=Rr[Tr];Dr<qr.length;Dr+=1)Er(qr[Dr],O,q,_e)}return Ne}fn.parse=function(A,O){if(2!==A.length)return O.error("Expected one argument.");var q=A[1];if("object"!=typeof q||Array.isArray(q))return O.error("Collator options argument must be an object.");var ne=O.parse(void 0!==q["case-sensitive"]&&q["case-sensitive"],1,Ot);if(!ne)return null;var me=O.parse(void 0!==q["diacritic-sensitive"]&&q["diacritic-sensitive"],1,Ot);if(!me)return null;var _e=null;return q.locale&&!(_e=O.parse(q.locale,1,mt))?null:new fn(ne,me,_e)},fn.prototype.evaluate=function(A){return new rr(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)},fn.prototype.eachChild=function(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)},fn.prototype.outputDefined=function(){return!1},fn.prototype.serialize=function(){var A={};return A["case-sensitive"]=this.caseSensitive.serialize(),A["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(A.locale=this.locale.serialize()),["collator",A]};var Mr=function(A,O){this.type=Ot,this.geojson=A,this.geometries=O};function Pr(A){if(A instanceof nn&&("get"===A.name&&1===A.args.length||"feature-state"===A.name||"has"===A.name&&1===A.args.length||"properties"===A.name||"geometry-type"===A.name||"id"===A.name||/^filter-/.test(A.name))||A instanceof Mr)return!1;var O=!0;return A.eachChild(function(q){O&&!Pr(q)&&(O=!1)}),O}function Wr(A){if(A instanceof nn&&"feature-state"===A.name)return!1;var O=!0;return A.eachChild(function(q){O&&!Wr(q)&&(O=!1)}),O}function Zr(A,O){if(A instanceof nn&&O.indexOf(A.name)>=0)return!1;var q=!0;return A.eachChild(function(ne){q&&!Zr(ne,O)&&(q=!1)}),q}Mr.parse=function(A,O){if(2!==A.length)return O.error("'within' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(zr(A[1])){var q=A[1];if("FeatureCollection"===q.type)for(var ne=0;ne<q.features.length;++ne){var me=q.features[ne].geometry.type;if("Polygon"===me||"MultiPolygon"===me)return new Mr(q,q.features[ne].geometry)}else if("Feature"===q.type){var _e=q.geometry.type;if("Polygon"===_e||"MultiPolygon"===_e)return new Mr(q,q.geometry)}else if("Polygon"===q.type||"MultiPolygon"===q.type)return new Mr(q,q)}return O.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Mr.prototype.evaluate=function(A){if(null!=A.geometry()&&null!=A.canonicalID()){if("Point"===A.geometryType())return function(O,q){var ne=[1/0,1/0,-1/0,-1/0],me=[1/0,1/0,-1/0,-1/0],_e=O.canonicalID();if("Polygon"===q.type){var Le=Br(q.coordinates,me,_e),Ne=_r(O.geometry(),ne,me,_e);if(!Mn(ne,me))return!1;for(var et=0,pt=Ne;et<pt.length;et+=1)if(!or(pt[et],Le))return!1}if("MultiPolygon"===q.type){var vt=Fr(q.coordinates,me,_e),Vt=_r(O.geometry(),ne,me,_e);if(!Mn(ne,me))return!1;for(var Qt=0,Wt=Vt;Qt<Wt.length;Qt+=1)if(!br(Wt[Qt],vt))return!1}return!0}(A,this.geometries);if("LineString"===A.geometryType())return function(O,q){var ne=[1/0,1/0,-1/0,-1/0],me=[1/0,1/0,-1/0,-1/0],_e=O.canonicalID();if("Polygon"===q.type){var Le=Br(q.coordinates,me,_e),Ne=kr(O.geometry(),ne,me,_e);if(!Mn(ne,me))return!1;for(var et=0,pt=Ne;et<pt.length;et+=1)if(!gr(pt[et],Le))return!1}if("MultiPolygon"===q.type){var vt=Fr(q.coordinates,me,_e),Vt=kr(O.geometry(),ne,me,_e);if(!Mn(ne,me))return!1;for(var Qt=0,Wt=Vt;Qt<Wt.length;Qt+=1)if(!jr(Wt[Qt],vt))return!1}return!0}(A,this.geometries)}return!1},Mr.prototype.eachChild=function(){},Mr.prototype.outputDefined=function(){return!0},Mr.prototype.serialize=function(){return["within",this.geojson]};var rn=function(A,O){this.type=O.type,this.name=A,this.boundExpression=O};rn.parse=function(A,O){if(2!==A.length||"string"!=typeof A[1])return O.error("'var' expression requires exactly one string literal argument.");var q=A[1];return O.scope.has(q)?new rn(q,O.scope.get(q)):O.error('Unknown variable "'+q+'". Make sure "'+q+'" has been bound in an enclosing "let" expression before using it.',1)},rn.prototype.evaluate=function(A){return this.boundExpression.evaluate(A)},rn.prototype.eachChild=function(){},rn.prototype.outputDefined=function(){return!1},rn.prototype.serialize=function(){return["var",this.name]};var ln=function(A,O,q,ne,me){void 0===O&&(O=[]),void 0===ne&&(ne=new Mt),void 0===me&&(me=[]),this.registry=A,this.path=O,this.key=O.map(function(_e){return"["+_e+"]"}).join(""),this.scope=ne,this.errors=me,this.expectedType=q};function bn(A,O){for(var q,me=A.length-1,_e=0,Le=me,Ne=0;_e<=Le;)if((q=A[Ne=Math.floor((_e+Le)/2)])<=O){if(Ne===me||O<A[Ne+1])return Ne;_e=Ne+1}else{if(!(q>O))throw new an("Input is not a number.");Le=Ne-1}return 0}ln.prototype.parse=function(A,O,q,ne,me){return void 0===me&&(me={}),O?this.concat(O,q,ne)._parse(A,me):this._parse(A,me)},ln.prototype._parse=function(A,O){function q(pt,vt,Vt){return"assert"===Vt?new on(vt,[pt]):"coerce"===Vt?new Vr(vt,[pt]):pt}if(null!==A&&"string"!=typeof A&&"boolean"!=typeof A&&"number"!=typeof A||(A=["literal",A]),Array.isArray(A)){if(0===A.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ne=A[0];if("string"!=typeof ne)return this.error("Expression name must be a string, but found "+typeof ne+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var me=this.registry[ne];if(me){var _e=me.parse(A,this);if(!_e)return null;if(this.expectedType){var Le=this.expectedType,Ne=_e.type;if("string"!==Le.kind&&"number"!==Le.kind&&"boolean"!==Le.kind&&"object"!==Le.kind&&"array"!==Le.kind||"value"!==Ne.kind)if("color"!==Le.kind&&"formatted"!==Le.kind&&"resolvedImage"!==Le.kind||"value"!==Ne.kind&&"string"!==Ne.kind){if(this.checkSubtype(Le,Ne))return null}else _e=q(_e,Le,O.typeAnnotation||"coerce");else _e=q(_e,Le,O.typeAnnotation||"assert")}if(!(_e instanceof cn)&&"resolvedImage"!==_e.type.kind&&function pt(vt){if(vt instanceof rn)return pt(vt.boundExpression);if(vt instanceof nn&&"error"===vt.name||vt instanceof fn||vt instanceof Mr)return!1;var Vt=vt instanceof Vr||vt instanceof on,Qt=!0;return vt.eachChild(function(Wt){Qt=Vt?Qt&&pt(Wt):Qt&&Wt instanceof cn}),!!Qt&&Pr(vt)&&Zr(vt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(_e)){var et=new xn;try{_e=new cn(_e.type,_e.evaluate(et))}catch(pt){return this.error(pt.message),null}}return _e}return this.error('Unknown expression "'+ne+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===A?"'undefined' value invalid. Use null instead.":"object"==typeof A?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof A+" instead.")},ln.prototype.concat=function(A,O,q){var ne="number"==typeof A?this.path.concat(A):this.path,me=q?this.scope.concat(q):this.scope;return new ln(this.registry,ne,O||null,me,this.errors)},ln.prototype.error=function(A){for(var O=[],q=arguments.length-1;q-- >0;)O[q]=arguments[q+1];var ne=""+this.key+O.map(function(me){return"["+me+"]"}).join("");this.errors.push(new st(ne,A))},ln.prototype.checkSubtype=function(A,O){var q=qt(A,O);return q&&this.error(q),q};var Tn=function(A,O,q){this.type=A,this.input=O,this.labels=[],this.outputs=[];for(var ne=0,me=q;ne<me.length;ne+=1){var _e=me[ne],Ne=_e[1];this.labels.push(_e[0]),this.outputs.push(Ne)}};function En(A,O,q){return A*(1-q)+O*q}Tn.parse=function(A,O){if(A.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return O.error("Expected an even number of arguments.");var q=O.parse(A[1],1,ht);if(!q)return null;var ne=[],me=null;O.expectedType&&"value"!==O.expectedType.kind&&(me=O.expectedType);for(var _e=1;_e<A.length;_e+=2){var Le=1===_e?-1/0:A[_e],Ne=A[_e+1],et=_e,pt=_e+1;if("number"!=typeof Le)return O.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',et);if(ne.length&&ne[ne.length-1][0]>=Le)return O.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',et);var vt=O.parse(Ne,pt,me);if(!vt)return null;me=me||vt.type,ne.push([Le,vt])}return new Tn(me,q,ne)},Tn.prototype.evaluate=function(A){var O=this.labels,q=this.outputs;if(1===O.length)return q[0].evaluate(A);var ne=this.input.evaluate(A);if(ne<=O[0])return q[0].evaluate(A);var me=O.length;return ne>=O[me-1]?q[me-1].evaluate(A):q[bn(O,ne)].evaluate(A)},Tn.prototype.eachChild=function(A){A(this.input);for(var O=0,q=this.outputs;O<q.length;O+=1)A(q[O])},Tn.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},Tn.prototype.serialize=function(){for(var A=["step",this.input.serialize()],O=0;O<this.labels.length;O++)O>0&&A.push(this.labels[O]),A.push(this.outputs[O].serialize());return A};var Dn=Object.freeze({__proto__:null,number:En,color:function(A,O,q){return new tr(En(A.r,O.r,q),En(A.g,O.g,q),En(A.b,O.b,q),En(A.a,O.a,q))},array:function(A,O,q){return A.map(function(ne,me){return En(ne,O[me],q)})}}),Bn=6/29,Kn=3*Bn*Bn,Ci=Math.PI/180,Ti=180/Math.PI;function Pn(A){return A>.008856451679035631?Math.pow(A,1/3):A/Kn+4/29}function ei(A){return A>Bn?A*A*A:Kn*(A-4/29)}function Qn(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,1/2.4)-.055)}function Bi(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function ma(A){var O=Bi(A.r),q=Bi(A.g),ne=Bi(A.b),me=Pn((.4124564*O+.3575761*q+.1804375*ne)/.95047),_e=Pn((.2126729*O+.7151522*q+.072175*ne)/1);return{l:116*_e-16,a:500*(me-_e),b:200*(_e-Pn((.0193339*O+.119192*q+.9503041*ne)/1.08883)),alpha:A.a}}function Sa(A){var O=(A.l+16)/116,q=isNaN(A.a)?O:O+A.a/500,ne=isNaN(A.b)?O:O-A.b/200;return O=1*ei(O),q=.95047*ei(q),ne=1.08883*ei(ne),new tr(Qn(3.2404542*q-1.5371385*O-.4985314*ne),Qn(-.969266*q+1.8760108*O+.041556*ne),Qn(.0556434*q-.2040259*O+1.0572252*ne),A.alpha)}function Xa(A,O,q){var ne=O-A;return A+q*(ne>180||ne<-180?ne-360*Math.round(ne/360):ne)}var Ji={forward:ma,reverse:Sa,interpolate:function(A,O,q){return{l:En(A.l,O.l,q),a:En(A.a,O.a,q),b:En(A.b,O.b,q),alpha:En(A.alpha,O.alpha,q)}}},qi={forward:function(A){var O=ma(A),q=O.l,ne=O.a,me=O.b,_e=Math.atan2(me,ne)*Ti;return{h:_e<0?_e+360:_e,c:Math.sqrt(ne*ne+me*me),l:q,alpha:A.a}},reverse:function(A){var O=A.h*Ci,q=A.c;return Sa({l:A.l,a:Math.cos(O)*q,b:Math.sin(O)*q,alpha:A.alpha})},interpolate:function(A,O,q){return{h:Xa(A.h,O.h,q),c:En(A.c,O.c,q),l:En(A.l,O.l,q),alpha:En(A.alpha,O.alpha,q)}}},Ha=Object.freeze({__proto__:null,lab:Ji,hcl:qi}),Ni=function(A,O,q,ne,me){this.type=A,this.operator=O,this.interpolation=q,this.input=ne,this.labels=[],this.outputs=[];for(var _e=0,Le=me;_e<Le.length;_e+=1){var Ne=Le[_e],pt=Ne[1];this.labels.push(Ne[0]),this.outputs.push(pt)}};function Ja(A,O,q,ne){var me=ne-q,_e=A-q;return 0===me?0:1===O?_e/me:(Math.pow(O,_e)-1)/(Math.pow(O,me)-1)}Ni.interpolationFactor=function(A,O,q,ne){var me=0;if("exponential"===A.name)me=Ja(O,A.base,q,ne);else if("linear"===A.name)me=Ja(O,1,q,ne);else if("cubic-bezier"===A.name){var _e=A.controlPoints;me=new i(_e[0],_e[1],_e[2],_e[3]).solve(Ja(O,1,q,ne))}return me},Ni.parse=function(A,O){var q=A[0],ne=A[1],me=A[2],_e=A.slice(3);if(!Array.isArray(ne)||0===ne.length)return O.error("Expected an interpolation type expression.",1);if("linear"===ne[0])ne={name:"linear"};else if("exponential"===ne[0]){var Le=ne[1];if("number"!=typeof Le)return O.error("Exponential interpolation requires a numeric base.",1,1);ne={name:"exponential",base:Le}}else{if("cubic-bezier"!==ne[0])return O.error("Unknown interpolation type "+String(ne[0]),1,0);var Ne=ne.slice(1);if(4!==Ne.length||Ne.some(function(Rr){return"number"!=typeof Rr||Rr<0||Rr>1}))return O.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ne={name:"cubic-bezier",controlPoints:Ne}}if(A.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return O.error("Expected an even number of arguments.");if(!(me=O.parse(me,2,ht)))return null;var et=[],pt=null;"interpolate-hcl"===q||"interpolate-lab"===q?pt=At:O.expectedType&&"value"!==O.expectedType.kind&&(pt=O.expectedType);for(var vt=0;vt<_e.length;vt+=2){var Vt=_e[vt],Qt=_e[vt+1],Wt=vt+3,ur=vt+4;if("number"!=typeof Vt)return O.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Wt);if(et.length&&et[et.length-1][0]>=Vt)return O.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Wt);var Tr=O.parse(Qt,ur,pt);if(!Tr)return null;pt=pt||Tr.type,et.push([Vt,Tr])}return"number"===pt.kind||"color"===pt.kind||"array"===pt.kind&&"number"===pt.itemType.kind&&"number"==typeof pt.N?new Ni(pt,q,ne,me,et):O.error("Type "+Ut(pt)+" is not interpolatable.")},Ni.prototype.evaluate=function(A){var O=this.labels,q=this.outputs;if(1===O.length)return q[0].evaluate(A);var ne=this.input.evaluate(A);if(ne<=O[0])return q[0].evaluate(A);var me=O.length;if(ne>=O[me-1])return q[me-1].evaluate(A);var _e=bn(O,ne),et=Ni.interpolationFactor(this.interpolation,ne,O[_e],O[_e+1]),pt=q[_e].evaluate(A),vt=q[_e+1].evaluate(A);return"interpolate"===this.operator?Dn[this.type.kind.toLowerCase()](pt,vt,et):"interpolate-hcl"===this.operator?qi.reverse(qi.interpolate(qi.forward(pt),qi.forward(vt),et)):Ji.reverse(Ji.interpolate(Ji.forward(pt),Ji.forward(vt),et))},Ni.prototype.eachChild=function(A){A(this.input);for(var O=0,q=this.outputs;O<q.length;O+=1)A(q[O])},Ni.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},Ni.prototype.serialize=function(){var A;A="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var O=[this.operator,A,this.input.serialize()],q=0;q<this.labels.length;q++)O.push(this.labels[q],this.outputs[q].serialize());return O};var ro=function(A,O){this.type=A,this.args=O};ro.parse=function(A,O){if(A.length<2)return O.error("Expectected at least one argument.");var q=null,ne=O.expectedType;ne&&"value"!==ne.kind&&(q=ne);for(var me=[],_e=0,Le=A.slice(1);_e<Le.length;_e+=1){var et=O.parse(Le[_e],1+me.length,q,void 0,{typeAnnotation:"omit"});if(!et)return null;q=q||et.type,me.push(et)}var pt=ne&&me.some(function(vt){return qt(ne,vt.type)});return new ro(pt?Se:q,me)},ro.prototype.evaluate=function(A){for(var O,q=null,ne=0,me=0,_e=this.args;me<_e.length&&(ne++,(q=_e[me].evaluate(A))&&q instanceof xr&&!q.available&&(O||(O=q.name),q=null,ne===this.args.length&&(q=O)),null===q);me+=1);return q},ro.prototype.eachChild=function(A){this.args.forEach(A)},ro.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},ro.prototype.serialize=function(){var A=["coalesce"];return this.eachChild(function(O){A.push(O.serialize())}),A};var Ma=function(A,O){this.type=O.type,this.bindings=[].concat(A),this.result=O};Ma.prototype.evaluate=function(A){return this.result.evaluate(A)},Ma.prototype.eachChild=function(A){for(var O=0,q=this.bindings;O<q.length;O+=1)A(q[O][1]);A(this.result)},Ma.parse=function(A,O){if(A.length<4)return O.error("Expected at least 3 arguments, but found "+(A.length-1)+" instead.");for(var q=[],ne=1;ne<A.length-1;ne+=2){var me=A[ne];if("string"!=typeof me)return O.error("Expected string, but found "+typeof me+" instead.",ne);if(/[^a-zA-Z0-9_]/.test(me))return O.error("Variable names must contain only alphanumeric characters or '_'.",ne);var _e=O.parse(A[ne+1],ne+1);if(!_e)return null;q.push([me,_e])}var Le=O.parse(A[A.length-1],A.length-1,O.expectedType,q);return Le?new Ma(q,Le):null},Ma.prototype.outputDefined=function(){return this.result.outputDefined()},Ma.prototype.serialize=function(){for(var A=["let"],O=0,q=this.bindings;O<q.length;O+=1){var ne=q[O];A.push(ne[0],ne[1].serialize())}return A.push(this.result.serialize()),A};var Na=function(A,O,q){this.type=A,this.index=O,this.input=q};Na.parse=function(A,O){if(3!==A.length)return O.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var q=O.parse(A[1],1,ht),ne=O.parse(A[2],2,Ct(O.expectedType||Se));return q&&ne?new Na(ne.type.itemType,q,ne):null},Na.prototype.evaluate=function(A){var O=this.index.evaluate(A),q=this.input.evaluate(A);if(O<0)throw new an("Array index out of bounds: "+O+" < 0.");if(O>=q.length)throw new an("Array index out of bounds: "+O+" > "+(q.length-1)+".");if(O!==Math.floor(O))throw new an("Array index must be an integer, but found "+O+" instead.");return q[O]},Na.prototype.eachChild=function(A){A(this.index),A(this.input)},Na.prototype.outputDefined=function(){return!1},Na.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var eo=function(A,O){this.type=Ot,this.needle=A,this.haystack=O};eo.parse=function(A,O){if(3!==A.length)return O.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var q=O.parse(A[1],1,Se),ne=O.parse(A[2],2,Se);return q&&ne?pr(q.type,[Ot,mt,ht,Dt,Se])?new eo(q,ne):O.error("Expected first argument to be of type boolean, string, number or null, but found "+Ut(q.type)+" instead"):null},eo.prototype.evaluate=function(A){var O=this.needle.evaluate(A),q=this.haystack.evaluate(A);if(!q)return!1;if(!Sr(O,["boolean","string","number","null"]))throw new an("Expected first argument to be of type boolean, string, number or null, but found "+Ut(Hr(O))+" instead.");if(!Sr(q,["string","array"]))throw new an("Expected second argument to be of type array or string, but found "+Ut(Hr(q))+" instead.");return q.indexOf(O)>=0},eo.prototype.eachChild=function(A){A(this.needle),A(this.haystack)},eo.prototype.outputDefined=function(){return!0},eo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var no=function(A,O,q){this.type=ht,this.needle=A,this.haystack=O,this.fromIndex=q};no.parse=function(A,O){if(A.length<=2||A.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var q=O.parse(A[1],1,Se),ne=O.parse(A[2],2,Se);if(!q||!ne)return null;if(!pr(q.type,[Ot,mt,ht,Dt,Se]))return O.error("Expected first argument to be of type boolean, string, number or null, but found "+Ut(q.type)+" instead");if(4===A.length){var me=O.parse(A[3],3,ht);return me?new no(q,ne,me):null}return new no(q,ne)},no.prototype.evaluate=function(A){var O=this.needle.evaluate(A),q=this.haystack.evaluate(A);if(!Sr(O,["boolean","string","number","null"]))throw new an("Expected first argument to be of type boolean, string, number or null, but found "+Ut(Hr(O))+" instead.");if(!Sr(q,["string","array"]))throw new an("Expected second argument to be of type array or string, but found "+Ut(Hr(q))+" instead.");if(this.fromIndex){var ne=this.fromIndex.evaluate(A);return q.indexOf(O,ne)}return q.indexOf(O)},no.prototype.eachChild=function(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)},no.prototype.outputDefined=function(){return!1},no.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var A=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),A]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ea=function(A,O,q,ne,me,_e){this.inputType=A,this.type=O,this.input=q,this.cases=ne,this.outputs=me,this.otherwise=_e};Ea.parse=function(A,O){if(A.length<5)return O.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(A.length%2!=1)return O.error("Expected an even number of arguments.");var q,ne;O.expectedType&&"value"!==O.expectedType.kind&&(ne=O.expectedType);for(var me={},_e=[],Le=2;Le<A.length-1;Le+=2){var Ne=A[Le],et=A[Le+1];Array.isArray(Ne)||(Ne=[Ne]);var pt=O.concat(Le);if(0===Ne.length)return pt.error("Expected at least one branch label.");for(var vt=0,Vt=Ne;vt<Vt.length;vt+=1){var Qt=Vt[vt];if("number"!=typeof Qt&&"string"!=typeof Qt)return pt.error("Branch labels must be numbers or strings.");if("number"==typeof Qt&&Math.abs(Qt)>Number.MAX_SAFE_INTEGER)return pt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof Qt&&Math.floor(Qt)!==Qt)return pt.error("Numeric branch labels must be integer values.");if(q){if(pt.checkSubtype(q,Hr(Qt)))return null}else q=Hr(Qt);if(void 0!==me[String(Qt)])return pt.error("Branch labels must be unique.");me[String(Qt)]=_e.length}var Wt=O.parse(et,Le,ne);if(!Wt)return null;ne=ne||Wt.type,_e.push(Wt)}var ur=O.parse(A[1],1,Se);if(!ur)return null;var Tr=O.parse(A[A.length-1],A.length-1,ne);return Tr?"value"!==ur.type.kind&&O.concat(1).checkSubtype(q,ur.type)?null:new Ea(q,ne,ur,me,_e,Tr):null},Ea.prototype.evaluate=function(A){var O=this.input.evaluate(A);return(Hr(O)===this.inputType&&this.outputs[this.cases[O]]||this.otherwise).evaluate(A)},Ea.prototype.eachChild=function(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)},Ea.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})&&this.otherwise.outputDefined()},Ea.prototype.serialize=function(){for(var A=this,O=["match",this.input.serialize()],q=[],ne={},me=0,_e=Object.keys(this.cases).sort();me<_e.length;me+=1){var Le=_e[me];void 0===(Vt=ne[this.cases[Le]])?(ne[this.cases[Le]]=q.length,q.push([this.cases[Le],[Le]])):q[Vt][1].push(Le)}for(var Ne=function(Wt){return"number"===A.inputType.kind?Number(Wt):Wt},et=0,pt=q;et<pt.length;et+=1){var vt=pt[et],Vt=vt[0],Qt=vt[1];O.push(1===Qt.length?Ne(Qt[0]):Qt.map(Ne)),O.push(this.outputs[outputIndex$1].serialize())}return O.push(this.otherwise.serialize()),O};var na=function(A,O,q){this.type=A,this.branches=O,this.otherwise=q};na.parse=function(A,O){if(A.length<4)return O.error("Expected at least 3 arguments, but found only "+(A.length-1)+".");if(A.length%2!=0)return O.error("Expected an odd number of arguments.");var q;O.expectedType&&"value"!==O.expectedType.kind&&(q=O.expectedType);for(var ne=[],me=1;me<A.length-1;me+=2){var _e=O.parse(A[me],me,Ot);if(!_e)return null;var Le=O.parse(A[me+1],me+1,q);if(!Le)return null;ne.push([_e,Le]),q=q||Le.type}var Ne=O.parse(A[A.length-1],A.length-1,q);return Ne?new na(q,ne,Ne):null},na.prototype.evaluate=function(A){for(var O=0,q=this.branches;O<q.length;O+=1){var ne=q[O],_e=ne[1];if(ne[0].evaluate(A))return _e.evaluate(A)}return this.otherwise.evaluate(A)},na.prototype.eachChild=function(A){for(var O=0,q=this.branches;O<q.length;O+=1){var ne=q[O],_e=ne[1];A(ne[0]),A(_e)}A(this.otherwise)},na.prototype.outputDefined=function(){return this.branches.every(function(A){return A[1].outputDefined()})&&this.otherwise.outputDefined()},na.prototype.serialize=function(){var A=["case"];return this.eachChild(function(O){A.push(O.serialize())}),A};var Ga=function(A,O,q,ne){this.type=A,this.input=O,this.beginIndex=q,this.endIndex=ne};function Jo(A,O){return"=="===A||"!="===A?"boolean"===O.kind||"string"===O.kind||"number"===O.kind||"null"===O.kind||"value"===O.kind:"string"===O.kind||"number"===O.kind||"value"===O.kind}function ms(A,O,q,ne){return 0===ne.compare(O,q)}function Wi(A,O,q){var ne="=="!==A&&"!="!==A;return function(){function me(_e,Le,Ne){this.type=Ot,this.lhs=_e,this.rhs=Le,this.collator=Ne,this.hasUntypedArgument="value"===_e.type.kind||"value"===Le.type.kind}return me.parse=function(_e,Le){if(3!==_e.length&&4!==_e.length)return Le.error("Expected two or three arguments.");var Ne=_e[0],et=Le.parse(_e[1],1,Se);if(!et)return null;if(!Jo(Ne,et.type))return Le.concat(1).error('"'+Ne+"\" comparisons are not supported for type '"+Ut(et.type)+"'.");var pt=Le.parse(_e[2],2,Se);if(!pt)return null;if(!Jo(Ne,pt.type))return Le.concat(2).error('"'+Ne+"\" comparisons are not supported for type '"+Ut(pt.type)+"'.");if(et.type.kind!==pt.type.kind&&"value"!==et.type.kind&&"value"!==pt.type.kind)return Le.error("Cannot compare types '"+Ut(et.type)+"' and '"+Ut(pt.type)+"'.");ne&&("value"===et.type.kind&&"value"!==pt.type.kind?et=new on(pt.type,[et]):"value"!==et.type.kind&&"value"===pt.type.kind&&(pt=new on(et.type,[pt])));var vt=null;if(4===_e.length){if("string"!==et.type.kind&&"string"!==pt.type.kind&&"value"!==et.type.kind&&"value"!==pt.type.kind)return Le.error("Cannot use collator to compare non-string types.");if(!(vt=Le.parse(_e[3],3,Ze)))return null}return new me(et,pt,vt)},me.prototype.evaluate=function(_e){var Le=this.lhs.evaluate(_e),Ne=this.rhs.evaluate(_e);if(ne&&this.hasUntypedArgument){var et=Hr(Le),pt=Hr(Ne);if(et.kind!==pt.kind||"string"!==et.kind&&"number"!==et.kind)throw new an('Expected arguments for "'+A+'" to be (string, string) or (number, number), but found ('+et.kind+", "+pt.kind+") instead.")}if(this.collator&&!ne&&this.hasUntypedArgument){var vt=Hr(Le),Vt=Hr(Ne);if("string"!==vt.kind||"string"!==Vt.kind)return O(_e,Le,Ne)}return this.collator?q(_e,Le,Ne,this.collator.evaluate(_e)):O(_e,Le,Ne)},me.prototype.eachChild=function(_e){_e(this.lhs),_e(this.rhs),this.collator&&_e(this.collator)},me.prototype.outputDefined=function(){return!0},me.prototype.serialize=function(){var _e=[A];return this.eachChild(function(Le){_e.push(Le.serialize())}),_e},me}()}Ga.parse=function(A,O){if(A.length<=2||A.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var q=O.parse(A[1],1,Se),ne=O.parse(A[2],2,ht);if(!q||!ne)return null;if(!pr(q.type,[Ct(Se),mt,Se]))return O.error("Expected first argument to be of type array or string, but found "+Ut(q.type)+" instead");if(4===A.length){var me=O.parse(A[3],3,ht);return me?new Ga(q.type,q,ne,me):null}return new Ga(q.type,q,ne)},Ga.prototype.evaluate=function(A){var O=this.input.evaluate(A),q=this.beginIndex.evaluate(A);if(!Sr(O,["string","array"]))throw new an("Expected first argument to be of type array or string, but found "+Ut(Hr(O))+" instead.");if(this.endIndex){var ne=this.endIndex.evaluate(A);return O.slice(q,ne)}return O.slice(q)},Ga.prototype.eachChild=function(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)},Ga.prototype.outputDefined=function(){return!1},Ga.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var A=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),A]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Ko=Wi("==",function(A,O,q){return O===q},ms),Uo=Wi("!=",function(A,O,q){return O!==q},function(A,O,q,ne){return!ms(0,O,q,ne)}),$o=Wi("<",function(A,O,q){return O<q},function(A,O,q,ne){return ne.compare(O,q)<0}),os=Wi(">",function(A,O,q){return O>q},function(A,O,q,ne){return ne.compare(O,q)>0}),ss=Wi("<=",function(A,O,q){return O<=q},function(A,O,q,ne){return ne.compare(O,q)<=0}),ls=Wi(">=",function(A,O,q){return O>=q},function(A,O,q,ne){return ne.compare(O,q)>=0}),yo=function(A,O,q,ne,me){this.type=mt,this.number=A,this.locale=O,this.currency=q,this.minFractionDigits=ne,this.maxFractionDigits=me};yo.parse=function(A,O){if(3!==A.length)return O.error("Expected two arguments.");var q=O.parse(A[1],1,ht);if(!q)return null;var ne=A[2];if("object"!=typeof ne||Array.isArray(ne))return O.error("NumberFormat options argument must be an object.");var me=null;if(ne.locale&&!(me=O.parse(ne.locale,1,mt)))return null;var _e=null;if(ne.currency&&!(_e=O.parse(ne.currency,1,mt)))return null;var Le=null;if(ne["min-fraction-digits"]&&!(Le=O.parse(ne["min-fraction-digits"],1,ht)))return null;var Ne=null;return ne["max-fraction-digits"]&&!(Ne=O.parse(ne["max-fraction-digits"],1,ht))?null:new yo(q,me,_e,Le,Ne)},yo.prototype.evaluate=function(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))},yo.prototype.eachChild=function(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)},yo.prototype.outputDefined=function(){return!1},yo.prototype.serialize=function(){var A={};return this.locale&&(A.locale=this.locale.serialize()),this.currency&&(A.currency=this.currency.serialize()),this.minFractionDigits&&(A["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(A["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),A]};var ho=function(A){this.type=ht,this.input=A};ho.parse=function(A,O){if(2!==A.length)return O.error("Expected 1 argument, but found "+(A.length-1)+" instead.");var q=O.parse(A[1],1);return q?"array"!==q.type.kind&&"string"!==q.type.kind&&"value"!==q.type.kind?O.error("Expected argument of type string or array, but found "+Ut(q.type)+" instead."):new ho(q):null},ho.prototype.evaluate=function(A){var O=this.input.evaluate(A);if("string"==typeof O||Array.isArray(O))return O.length;throw new an("Expected value to be of type string or array, but found "+Ut(Hr(O))+" instead.")},ho.prototype.eachChild=function(A){A(this.input)},ho.prototype.outputDefined=function(){return!1},ho.prototype.serialize=function(){var A=["length"];return this.eachChild(function(O){A.push(O.serialize())}),A};var Lo={"==":Ko,"!=":Uo,">":os,"<":$o,">=":ls,"<=":ss,array:on,at:Na,boolean:on,case:na,coalesce:ro,collator:fn,format:wn,image:An,in:eo,"index-of":no,interpolate:Ni,"interpolate-hcl":Ni,"interpolate-lab":Ni,length:ho,let:Ma,literal:cn,match:Ea,number:on,"number-format":yo,object:on,slice:Ga,step:Tn,string:on,"to-boolean":Vr,"to-color":Vr,"to-number":Vr,"to-string":Vr,var:rn,within:Mr};function Mo(A,O){var q=O[0],ne=O[1],me=O[2],_e=O[3];q=q.evaluate(A),ne=ne.evaluate(A),me=me.evaluate(A);var Le=_e?_e.evaluate(A):1,Ne=Lr(q,ne,me,Le);if(Ne)throw new an(Ne);return new tr(q/255*Le,ne/255*Le,me/255*Le,Le)}function Po(A,O){return A in O}function Ro(A,O){var q=O[A];return void 0===q?null:q}function po(A){return{type:A}}function cs(A){return{result:"success",value:A}}function io(A){return{result:"error",value:A}}function So(A){return"data-driven"===A["property-type"]||"cross-faded-data-driven"===A["property-type"]}function Qo(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function mo(A){return!!A.expression&&A.expression.interpolated}function Zi(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":null===A?"null":typeof A}function je(A){return"object"==typeof A&&null!==A&&!Array.isArray(A)}function We(A){return A}function rt(A,O,q){return void 0!==A?A:void 0!==O?O:void 0!==q?q:void 0}function ut(A,O,q,ne,me){return rt(typeof q===me?ne[q]:void 0,A.default,O.default)}function yt(A,O,q){if("number"!==Zi(q))return rt(A.default,O.default);var ne=A.stops.length;if(1===ne||q<=A.stops[0][0])return A.stops[0][1];if(q>=A.stops[ne-1][0])return A.stops[ne-1][1];var me=bn(A.stops.map(function(_e){return _e[0]}),q);return A.stops[me][1]}function gt(A,O,q){var ne=void 0!==A.base?A.base:1;if("number"!==Zi(q))return rt(A.default,O.default);var me=A.stops.length;if(1===me||q<=A.stops[0][0])return A.stops[0][1];if(q>=A.stops[me-1][0])return A.stops[me-1][1];var Qt,Wt,Tr,Rr,_e=bn(A.stops.map(function(Vt){return Vt[0]}),q),Le=(Qt=ne,Rr=q-(Wt=A.stops[_e][0]),0==(Tr=A.stops[_e+1][0]-Wt)?0:1===Qt?Rr/Tr:(Math.pow(Qt,Rr)-1)/(Math.pow(Qt,Tr)-1)),Ne=A.stops[_e][1],et=A.stops[_e+1][1],pt=Dn[O.type]||We;if(A.colorSpace&&"rgb"!==A.colorSpace){var vt=Ha[A.colorSpace];pt=function(Vt,Qt){return vt.reverse(vt.interpolate(vt.forward(Vt),vt.forward(Qt),Le))}}return"function"==typeof Ne.evaluate?{evaluate:function(){for(var Vt=[],Qt=arguments.length;Qt--;)Vt[Qt]=arguments[Qt];var Wt=Ne.evaluate.apply(void 0,Vt),ur=et.evaluate.apply(void 0,Vt);if(void 0!==Wt&&void 0!==ur)return pt(Wt,ur,Le)}}:pt(Ne,et,Le)}function Lt(A,O,q){return"color"===O.type?q=tr.parse(q):"formatted"===O.type?q=dr.fromString(q.toString()):"resolvedImage"===O.type?q=xr.fromString(q.toString()):Zi(q)===O.type||"enum"===O.type&&O.values[q]||(q=void 0),rt(q,A.default,O.default)}nn.register(Lo,{error:[{kind:"error"},[mt],function(A,O){throw new an(O[0].evaluate(A))}],typeof:[mt,[Se],function(A,O){return Ut(Hr(O[0].evaluate(A)))}],"to-rgba":[Ct(ht,4),[At],function(A,O){return O[0].evaluate(A).toArray()}],rgb:[At,[ht,ht,ht],Mo],rgba:[At,[ht,ht,ht,ht],Mo],has:{type:Ot,overloads:[[[mt],function(A,O){return Po(O[0].evaluate(A),A.properties())}],[[mt,It],function(A,O){var ne=O[1];return Po(O[0].evaluate(A),ne.evaluate(A))}]]},get:{type:Se,overloads:[[[mt],function(A,O){return Ro(O[0].evaluate(A),A.properties())}],[[mt,It],function(A,O){var ne=O[1];return Ro(O[0].evaluate(A),ne.evaluate(A))}]]},"feature-state":[Se,[mt],function(A,O){return Ro(O[0].evaluate(A),A.featureState||{})}],properties:[It,[],function(A){return A.properties()}],"geometry-type":[mt,[],function(A){return A.geometryType()}],id:[Se,[],function(A){return A.id()}],zoom:[ht,[],function(A){return A.globals.zoom}],"heatmap-density":[ht,[],function(A){return A.globals.heatmapDensity||0}],"line-progress":[ht,[],function(A){return A.globals.lineProgress||0}],accumulated:[Se,[],function(A){return void 0===A.globals.accumulated?null:A.globals.accumulated}],"+":[ht,po(ht),function(A,O){for(var q=0,ne=0,me=O;ne<me.length;ne+=1)q+=me[ne].evaluate(A);return q}],"*":[ht,po(ht),function(A,O){for(var q=1,ne=0,me=O;ne<me.length;ne+=1)q*=me[ne].evaluate(A);return q}],"-":{type:ht,overloads:[[[ht,ht],function(A,O){var ne=O[1];return O[0].evaluate(A)-ne.evaluate(A)}],[[ht],function(A,O){return-O[0].evaluate(A)}]]},"/":[ht,[ht,ht],function(A,O){var ne=O[1];return O[0].evaluate(A)/ne.evaluate(A)}],"%":[ht,[ht,ht],function(A,O){var ne=O[1];return O[0].evaluate(A)%ne.evaluate(A)}],ln2:[ht,[],function(){return Math.LN2}],pi:[ht,[],function(){return Math.PI}],e:[ht,[],function(){return Math.E}],"^":[ht,[ht,ht],function(A,O){var ne=O[1];return Math.pow(O[0].evaluate(A),ne.evaluate(A))}],sqrt:[ht,[ht],function(A,O){return Math.sqrt(O[0].evaluate(A))}],log10:[ht,[ht],function(A,O){return Math.log(O[0].evaluate(A))/Math.LN10}],ln:[ht,[ht],function(A,O){return Math.log(O[0].evaluate(A))}],log2:[ht,[ht],function(A,O){return Math.log(O[0].evaluate(A))/Math.LN2}],sin:[ht,[ht],function(A,O){return Math.sin(O[0].evaluate(A))}],cos:[ht,[ht],function(A,O){return Math.cos(O[0].evaluate(A))}],tan:[ht,[ht],function(A,O){return Math.tan(O[0].evaluate(A))}],asin:[ht,[ht],function(A,O){return Math.asin(O[0].evaluate(A))}],acos:[ht,[ht],function(A,O){return Math.acos(O[0].evaluate(A))}],atan:[ht,[ht],function(A,O){return Math.atan(O[0].evaluate(A))}],min:[ht,po(ht),function(A,O){return Math.min.apply(Math,O.map(function(q){return q.evaluate(A)}))}],max:[ht,po(ht),function(A,O){return Math.max.apply(Math,O.map(function(q){return q.evaluate(A)}))}],abs:[ht,[ht],function(A,O){return Math.abs(O[0].evaluate(A))}],round:[ht,[ht],function(A,O){var q=O[0].evaluate(A);return q<0?-Math.round(-q):Math.round(q)}],floor:[ht,[ht],function(A,O){return Math.floor(O[0].evaluate(A))}],ceil:[ht,[ht],function(A,O){return Math.ceil(O[0].evaluate(A))}],"filter-==":[Ot,[mt,Se],function(A,O){var q=O[0],ne=O[1];return A.properties()[q.value]===ne.value}],"filter-id-==":[Ot,[Se],function(A,O){var q=O[0];return A.id()===q.value}],"filter-type-==":[Ot,[mt],function(A,O){var q=O[0];return A.geometryType()===q.value}],"filter-<":[Ot,[mt,Se],function(A,O){var q=O[0],ne=O[1],me=A.properties()[q.value],_e=ne.value;return typeof me==typeof _e&&me<_e}],"filter-id-<":[Ot,[Se],function(A,O){var q=O[0],ne=A.id(),me=q.value;return typeof ne==typeof me&&ne<me}],"filter->":[Ot,[mt,Se],function(A,O){var q=O[0],ne=O[1],me=A.properties()[q.value],_e=ne.value;return typeof me==typeof _e&&me>_e}],"filter-id->":[Ot,[Se],function(A,O){var q=O[0],ne=A.id(),me=q.value;return typeof ne==typeof me&&ne>me}],"filter-<=":[Ot,[mt,Se],function(A,O){var q=O[0],ne=O[1],me=A.properties()[q.value],_e=ne.value;return typeof me==typeof _e&&me<=_e}],"filter-id-<=":[Ot,[Se],function(A,O){var q=O[0],ne=A.id(),me=q.value;return typeof ne==typeof me&&ne<=me}],"filter->=":[Ot,[mt,Se],function(A,O){var q=O[0],ne=O[1],me=A.properties()[q.value],_e=ne.value;return typeof me==typeof _e&&me>=_e}],"filter-id->=":[Ot,[Se],function(A,O){var q=O[0],ne=A.id(),me=q.value;return typeof ne==typeof me&&ne>=me}],"filter-has":[Ot,[Se],function(A,O){return O[0].value in A.properties()}],"filter-has-id":[Ot,[],function(A){return null!==A.id()&&void 0!==A.id()}],"filter-type-in":[Ot,[Ct(mt)],function(A,O){return O[0].value.indexOf(A.geometryType())>=0}],"filter-id-in":[Ot,[Ct(Se)],function(A,O){return O[0].value.indexOf(A.id())>=0}],"filter-in-small":[Ot,[mt,Ct(Se)],function(A,O){var q=O[0];return O[1].value.indexOf(A.properties()[q.value])>=0}],"filter-in-large":[Ot,[mt,Ct(Se)],function(A,O){var q=O[0],ne=O[1];return function(me,_e,Le,Ne){for(;Le<=Ne;){var et=Le+Ne>>1;if(_e[et]===me)return!0;_e[et]>me?Ne=et-1:Le=et+1}return!1}(A.properties()[q.value],ne.value,0,ne.value.length-1)}],all:{type:Ot,overloads:[[[Ot,Ot],function(A,O){var ne=O[1];return O[0].evaluate(A)&&ne.evaluate(A)}],[po(Ot),function(A,O){for(var q=0,ne=O;q<ne.length;q+=1)if(!ne[q].evaluate(A))return!1;return!0}]]},any:{type:Ot,overloads:[[[Ot,Ot],function(A,O){var ne=O[1];return O[0].evaluate(A)||ne.evaluate(A)}],[po(Ot),function(A,O){for(var q=0,ne=O;q<ne.length;q+=1)if(ne[q].evaluate(A))return!0;return!1}]]},"!":[Ot,[Ot],function(A,O){return!O[0].evaluate(A)}],"is-supported-script":[Ot,[mt],function(A,O){var ne=A.globals&&A.globals.isSupportedScript;return!ne||ne(O[0].evaluate(A))}],upcase:[mt,[mt],function(A,O){return O[0].evaluate(A).toUpperCase()}],downcase:[mt,[mt],function(A,O){return O[0].evaluate(A).toLowerCase()}],concat:[mt,po(Se),function(A,O){return O.map(function(q){return Xr(q.evaluate(A))}).join("")}],"resolved-locale":[mt,[Ze],function(A,O){return O[0].evaluate(A).resolvedLocale()}]});var er=function(A,O){var q;this.expression=A,this._warningHistory={},this._evaluator=new xn,this._defaultValue=O?"color"===(q=O).type&&je(q.default)?new tr(0,0,0,0):"color"===q.type?tr.parse(q.default)||null:void 0===q.default?null:q.default:null,this._enumValues=O&&"enum"===O.type?O.values:null};function nr(A){return Array.isArray(A)&&A.length>0&&"string"==typeof A[0]&&A[0]in Lo}function Kt(A,O){var me,_e,q=new ln(Lo,[],O?(_e={color:At,string:mt,number:ht,enum:mt,boolean:Ot,formatted:it,resolvedImage:dt},"array"===(me=O).type?Ct(_e[me.value]||Se,me.length):_e[me.type]):void 0),ne=q.parse(A,void 0,void 0,void 0,O&&"string"===O.type?{typeAnnotation:"coerce"}:void 0);return ne?cs(new er(ne,O)):io(q.errors)}er.prototype.evaluateWithoutErrorHandling=function(A,O,q,ne,me,_e){return this._evaluator.globals=A,this._evaluator.feature=O,this._evaluator.featureState=q,this._evaluator.canonical=ne,this._evaluator.availableImages=me||null,this._evaluator.formattedSection=_e,this.expression.evaluate(this._evaluator)},er.prototype.evaluate=function(A,O,q,ne,me,_e){this._evaluator.globals=A,this._evaluator.feature=O||null,this._evaluator.featureState=q||null,this._evaluator.canonical=ne,this._evaluator.availableImages=me||null,this._evaluator.formattedSection=_e||null;try{var Le=this.expression.evaluate(this._evaluator);if(null==Le||"number"==typeof Le&&Le!=Le)return this._defaultValue;if(this._enumValues&&!(Le in this._enumValues))throw new an("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ne){return JSON.stringify(Ne)}).join(", ")+", but found "+JSON.stringify(Le)+" instead.");return Le}catch(Ne){return this._warningHistory[Ne.message]||(this._warningHistory[Ne.message]=!0,typeof console<"u"&&console.warn(Ne.message)),this._defaultValue}};var ir=function(A,O){this.kind=A,this._styleExpression=O,this.isStateDependent="constant"!==A&&!Wr(O.expression)};ir.prototype.evaluateWithoutErrorHandling=function(A,O,q,ne,me,_e){return this._styleExpression.evaluateWithoutErrorHandling(A,O,q,ne,me,_e)},ir.prototype.evaluate=function(A,O,q,ne,me,_e){return this._styleExpression.evaluate(A,O,q,ne,me,_e)};var vr=function(A,O,q,ne){this.kind=A,this.zoomStops=q,this._styleExpression=O,this.isStateDependent="camera"!==A&&!Wr(O.expression),this.interpolationType=ne};function wr(A,O){if("error"===(A=Kt(A,O)).result)return A;var q=A.value.expression,ne=Pr(q);if(!ne&&!So(O))return io([new st("","data expressions not supported")]);var me=Zr(q,["zoom"]);if(!me&&!Qo(O))return io([new st("","zoom expressions not supported")]);var _e=function Ne(et){var pt=null;if(et instanceof Ma)pt=Ne(et.result);else if(et instanceof ro)for(var vt=0,Vt=et.args;vt<Vt.length&&!(pt=Ne(Vt[vt]));vt+=1);else(et instanceof Tn||et instanceof Ni)&&et.input instanceof nn&&"zoom"===et.input.name&&(pt=et);return pt instanceof st||et.eachChild(function(Wt){var ur=Ne(Wt);ur instanceof st?pt=ur:!pt&&ur?pt=new st("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):pt&&ur&&pt!==ur&&(pt=new st("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),pt}(q);return _e||me?_e instanceof st?io([_e]):_e instanceof Ni&&!mo(O)?io([new st("",'"interpolate" expressions cannot be used with this property')]):cs(_e?new vr(ne?"camera":"composite",A.value,_e.labels,_e instanceof Ni?_e.interpolation:void 0):new ir(ne?"constant":"source",A.value)):io([new st("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}vr.prototype.evaluateWithoutErrorHandling=function(A,O,q,ne,me,_e){return this._styleExpression.evaluateWithoutErrorHandling(A,O,q,ne,me,_e)},vr.prototype.evaluate=function(A,O,q,ne,me,_e){return this._styleExpression.evaluate(A,O,q,ne,me,_e)},vr.prototype.interpolationFactor=function(A,O,q){return this.interpolationType?Ni.interpolationFactor(this.interpolationType,A,O,q):0};var Ar=function(A,O){this._parameters=A,this._specification=O,Je(this,function q(ne,me){var _e,Le,Ne,et="color"===me.type,pt=ne.stops&&"object"==typeof ne.stops[0][0],Vt=pt||!(pt||void 0!==ne.property),Qt=ne.type||(mo(me)?"exponential":"interval");if(et&&((ne=Je({},ne)).stops&&(ne.stops=ne.stops.map(function(pi){return[pi[0],tr.parse(pi[1])]})),ne.default=tr.parse(ne.default?ne.default:me.default)),ne.colorSpace&&"rgb"!==ne.colorSpace&&!Ha[ne.colorSpace])throw new Error("Unknown color space: "+ne.colorSpace);if("exponential"===Qt)_e=gt;else if("interval"===Qt)_e=yt;else if("categorical"===Qt){_e=ut,Le=Object.create(null);for(var Wt=0,ur=ne.stops;Wt<ur.length;Wt+=1){var Tr=ur[Wt];Le[Tr[0]]=Tr[1]}Ne=typeof ne.stops[0][0]}else{if("identity"!==Qt)throw new Error('Unknown function type "'+Qt+'"');_e=Lt}if(pt){for(var Rr={},Dr=[],qr=0;qr<ne.stops.length;qr++){var Yr=ne.stops[qr],Kr=Yr[0].zoom;void 0===Rr[Kr]&&(Rr[Kr]={zoom:Kr,type:ne.type,property:ne.property,default:ne.default,stops:[]},Dr.push(Kr)),Rr[Kr].stops.push([Yr[0].value,Yr[1]])}for(var vn=[],Sn=0,Gn=Dr;Sn<Gn.length;Sn+=1){var Hn=Gn[Sn];vn.push([Rr[Hn].zoom,q(Rr[Hn],me)])}var $n={name:"linear"};return{kind:"composite",interpolationType:$n,interpolationFactor:Ni.interpolationFactor.bind(void 0,$n),zoomStops:vn.map(function(pi){return pi[0]}),evaluate:function(pi,ni){var xi=pi.zoom;return gt({stops:vn,base:ne.base},me,xi).evaluate(xi,ni)}}}if(Vt){var hi="exponential"===Qt?{name:"exponential",base:void 0!==ne.base?ne.base:1}:null;return{kind:"camera",interpolationType:hi,interpolationFactor:Ni.interpolationFactor.bind(void 0,hi),zoomStops:ne.stops.map(function(pi){return pi[0]}),evaluate:function(pi){return _e(ne,me,pi.zoom,Le,Ne)}}}return{kind:"source",evaluate:function(pi,ni){var xi=ni&&ni.properties?ni.properties[ne.property]:void 0;return void 0===xi?rt(ne.default,me.default):_e(ne,me,xi,Le,Ne)}}}(this._parameters,this._specification))};function Nr(A){var O=A.key,q=A.value,ne=A.valueSpec||{},me=A.objectElementValidators||{},_e=A.style,Le=A.styleSpec,Ne=[],et=Zi(q);if("object"!==et)return[new ze(O,q,"object expected, "+et+" found")];for(var pt in q){var vt=pt.split(".")[0],Vt=ne[vt]||ne["*"],Qt=void 0;if(me[vt])Qt=me[vt];else if(ne[vt])Qt=sr;else if(me["*"])Qt=me["*"];else{if(!ne["*"]){Ne.push(new ze(O,q[pt],'unknown property "'+pt+'"'));continue}Qt=sr}Ne=Ne.concat(Qt({key:(O&&O+".")+pt,value:q[pt],valueSpec:Vt,style:_e,styleSpec:Le,object:q,objectKey:pt},q))}for(var Wt in ne)me[Wt]||ne[Wt].required&&void 0===ne[Wt].default&&void 0===q[Wt]&&Ne.push(new ze(O,q,'missing required property "'+Wt+'"'));return Ne}function un(A){var O=A.value,q=A.valueSpec,ne=A.style,me=A.styleSpec,_e=A.key,Le=A.arrayElementValidator||sr;if("array"!==Zi(O))return[new ze(_e,O,"array expected, "+Zi(O)+" found")];if(q.length&&O.length!==q.length)return[new ze(_e,O,"array length "+q.length+" expected, length "+O.length+" found")];if(q["min-length"]&&O.length<q["min-length"])return[new ze(_e,O,"array length at least "+q["min-length"]+" expected, length "+O.length+" found")];var Ne={type:q.value,values:q.values};me.$version<7&&(Ne.function=q.function),"object"===Zi(q.value)&&(Ne=q.value);for(var et=[],pt=0;pt<O.length;pt++)et=et.concat(Le({array:O,arrayIndex:pt,value:O[pt],valueSpec:Ne,style:ne,styleSpec:me,key:_e+"["+pt+"]"}));return et}function gn(A){var O=A.key,q=A.value,ne=A.valueSpec,me=Zi(q);return"number"===me&&q!=q&&(me="NaN"),"number"!==me?[new ze(O,q,"number expected, "+me+" found")]:"minimum"in ne&&q<ne.minimum?[new ze(O,q,q+" is less than the minimum value "+ne.minimum)]:"maximum"in ne&&q>ne.maximum?[new ze(O,q,q+" is greater than the maximum value "+ne.maximum)]:[]}function Rn(A){var O,q,ne,me=A.valueSpec,_e=Ye(A.value.type),Le={},Ne="categorical"!==_e&&void 0===A.value.property,et=!Ne,pt="array"===Zi(A.value.stops)&&"array"===Zi(A.value.stops[0])&&"object"===Zi(A.value.stops[0][0]),vt=Nr({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Wt){if("identity"===_e)return[new ze(Wt.key,Wt.value,'identity function may not have a "stops" property')];var ur=[],Tr=Wt.value;return ur=ur.concat(un({key:Wt.key,value:Tr,valueSpec:Wt.valueSpec,style:Wt.style,styleSpec:Wt.styleSpec,arrayElementValidator:Vt})),"array"===Zi(Tr)&&0===Tr.length&&ur.push(new ze(Wt.key,Tr,"array must have at least one stop")),ur},default:function(Wt){return sr({key:Wt.key,value:Wt.value,valueSpec:me,style:Wt.style,styleSpec:Wt.styleSpec})}}});return"identity"===_e&&Ne&&vt.push(new ze(A.key,A.value,'missing required property "property"')),"identity"===_e||A.value.stops||vt.push(new ze(A.key,A.value,'missing required property "stops"')),"exponential"===_e&&A.valueSpec.expression&&!mo(A.valueSpec)&&vt.push(new ze(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(et&&!So(A.valueSpec)?vt.push(new ze(A.key,A.value,"property functions not supported")):Ne&&!Qo(A.valueSpec)&&vt.push(new ze(A.key,A.value,"zoom functions not supported"))),"categorical"!==_e&&!pt||void 0!==A.value.property||vt.push(new ze(A.key,A.value,'"property" property is required')),vt;function Vt(Wt){var ur=[],Tr=Wt.value,Rr=Wt.key;if("array"!==Zi(Tr))return[new ze(Rr,Tr,"array expected, "+Zi(Tr)+" found")];if(2!==Tr.length)return[new ze(Rr,Tr,"array length 2 expected, length "+Tr.length+" found")];if(pt){if("object"!==Zi(Tr[0]))return[new ze(Rr,Tr,"object expected, "+Zi(Tr[0])+" found")];if(void 0===Tr[0].zoom)return[new ze(Rr,Tr,"object stop key must have zoom")];if(void 0===Tr[0].value)return[new ze(Rr,Tr,"object stop key must have value")];if(ne&&ne>Ye(Tr[0].zoom))return[new ze(Rr,Tr[0].zoom,"stop zoom values must appear in ascending order")];Ye(Tr[0].zoom)!==ne&&(ne=Ye(Tr[0].zoom),q=void 0,Le={}),ur=ur.concat(Nr({key:Rr+"[0]",value:Tr[0],valueSpec:{zoom:{}},style:Wt.style,styleSpec:Wt.styleSpec,objectElementValidators:{zoom:gn,value:Qt}}))}else ur=ur.concat(Qt({key:Rr+"[0]",value:Tr[0],valueSpec:{},style:Wt.style,styleSpec:Wt.styleSpec},Tr));return nr(lt(Tr[1]))?ur.concat([new ze(Rr+"[1]",Tr[1],"expressions are not allowed in function stops.")]):ur.concat(sr({key:Rr+"[1]",value:Tr[1],valueSpec:me,style:Wt.style,styleSpec:Wt.styleSpec}))}function Qt(Wt,ur){var Tr=Zi(Wt.value),Rr=Ye(Wt.value),Dr=null!==Wt.value?Wt.value:ur;if(O){if(Tr!==O)return[new ze(Wt.key,Dr,Tr+" stop domain type must match previous stop domain type "+O)]}else O=Tr;if("number"!==Tr&&"string"!==Tr&&"boolean"!==Tr)return[new ze(Wt.key,Dr,"stop domain value must be a number, string, or boolean")];if("number"!==Tr&&"categorical"!==_e){var qr="number expected, "+Tr+" found";return So(me)&&void 0===_e&&(qr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ze(Wt.key,Dr,qr)]}return"categorical"!==_e||"number"!==Tr||isFinite(Rr)&&Math.floor(Rr)===Rr?"categorical"!==_e&&"number"===Tr&&void 0!==q&&Rr<q?[new ze(Wt.key,Dr,"stop domain values must appear in ascending order")]:(q=Rr,"categorical"===_e&&Rr in Le?[new ze(Wt.key,Dr,"stop domain values must be unique")]:(Le[Rr]=!0,[])):[new ze(Wt.key,Dr,"integer expected, found "+Rr)]}}function jn(A){var O=("property"===A.expressionContext?wr:Kt)(lt(A.value),A.valueSpec);if("error"===O.result)return O.value.map(function(ne){return new ze(""+A.key+ne.key,A.value,ne.message)});var q=O.value.expression||O.value._styleExpression.expression;if("property"===A.expressionContext&&"text-font"===A.propertyKey&&!q.outputDefined())return[new ze(A.key,A.value,'Invalid data expression for "'+A.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===A.expressionContext&&"layout"===A.propertyType&&!Wr(q))return[new ze(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===A.expressionContext&&!Wr(q))return[new ze(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&0===A.expressionContext.indexOf("cluster")){if(!Zr(q,["zoom","feature-state"]))return[new ze(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===A.expressionContext&&!Pr(q))return[new ze(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Zn(A){var O=A.key,q=A.value,ne=A.valueSpec,me=[];return Array.isArray(ne.values)?-1===ne.values.indexOf(Ye(q))&&me.push(new ze(O,q,"expected one of ["+ne.values.join(", ")+"], "+JSON.stringify(q)+" found")):-1===Object.keys(ne.values).indexOf(Ye(q))&&me.push(new ze(O,q,"expected one of ["+Object.keys(ne.values).join(", ")+"], "+JSON.stringify(q)+" found")),me}function Vn(A){if(!0===A||!1===A)return!0;if(!Array.isArray(A)||0===A.length)return!1;switch(A[0]){case"has":return A.length>=2&&"$id"!==A[1]&&"$type"!==A[1];case"in":return A.length>=3&&("string"!=typeof A[1]||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==A.length||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(var O=0,q=A.slice(1);O<q.length;O+=1){var ne=q[O];if(!Vn(ne)&&"boolean"!=typeof ne)return!1}return!0;default:return!0}}Ar.deserialize=function(A){return new Ar(A._parameters,A._specification)},Ar.serialize=function(A){return{_parameters:A._parameters,_specification:A._specification}};var bi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Li(A){if(null==A)return{filter:function(){return!0},needGeometry:!1};Vn(A)||(A=ji(A));var O=Kt(A,bi);if("error"===O.result)throw new Error(O.value.map(function(q){return q.key+": "+q.message}).join(", "));return{filter:function(q,ne,me){return O.value.evaluate(q,ne,{},me)},needGeometry:function q(ne){if(!Array.isArray(ne))return!1;if("within"===ne[0])return!0;for(var me=1;me<ne.length;me++)if(q(ne[me]))return!0;return!1}(A)}}function Gi(A,O){return A<O?-1:A>O?1:0}function ji(A){if(!A)return!0;var O,q=A[0];return A.length<=1?"any"!==q:"=="===q?Yi(A[1],A[2],"=="):"!="===q?aa(Yi(A[1],A[2],"==")):"<"===q||">"===q||"<="===q||">="===q?Yi(A[1],A[2],q):"any"===q?(O=A.slice(1),["any"].concat(O.map(ji))):"all"===q?["all"].concat(A.slice(1).map(ji)):"none"===q?["all"].concat(A.slice(1).map(ji).map(aa)):"in"===q?_a(A[1],A.slice(2)):"!in"===q?aa(_a(A[1],A.slice(2))):"has"===q?da(A[1]):"!has"===q?aa(da(A[1])):"within"!==q||A}function Yi(A,O,q){switch(A){case"$type":return["filter-type-"+q,O];case"$id":return["filter-id-"+q,O];default:return["filter-"+q,A,O]}}function _a(A,O){if(0===O.length)return!1;switch(A){case"$type":return["filter-type-in",["literal",O]];case"$id":return["filter-id-in",["literal",O]];default:return O.length>200&&!O.some(function(q){return typeof q!=typeof O[0]})?["filter-in-large",A,["literal",O.sort(Gi)]]:["filter-in-small",A,["literal",O]]}}function da(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function aa(A){return["!",A]}function oa(A){return Vn(lt(A.value))?jn(Je({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function O(q){var ne=q.value,me=q.key;if("array"!==Zi(ne))return[new ze(me,ne,"array expected, "+Zi(ne)+" found")];var _e,Le=q.styleSpec,Ne=[];if(ne.length<1)return[new ze(me,ne,"filter array must have at least 1 element")];switch(Ne=Ne.concat(Zn({key:me+"[0]",value:ne[0],valueSpec:Le.filter_operator,style:q.style,styleSpec:q.styleSpec})),Ye(ne[0])){case"<":case"<=":case">":case">=":ne.length>=2&&"$type"===Ye(ne[1])&&Ne.push(new ze(me,ne,'"$type" cannot be use with operator "'+ne[0]+'"'));case"==":case"!=":3!==ne.length&&Ne.push(new ze(me,ne,'filter array for operator "'+ne[0]+'" must have 3 elements'));case"in":case"!in":ne.length>=2&&"string"!==(_e=Zi(ne[1]))&&Ne.push(new ze(me+"[1]",ne[1],"string expected, "+_e+" found"));for(var et=2;et<ne.length;et++)_e=Zi(ne[et]),"$type"===Ye(ne[1])?Ne=Ne.concat(Zn({key:me+"["+et+"]",value:ne[et],valueSpec:Le.geometry_type,style:q.style,styleSpec:q.styleSpec})):"string"!==_e&&"number"!==_e&&"boolean"!==_e&&Ne.push(new ze(me+"["+et+"]",ne[et],"string, number, or boolean expected, "+_e+" found"));break;case"any":case"all":case"none":for(var pt=1;pt<ne.length;pt++)Ne=Ne.concat(O({key:me+"["+pt+"]",value:ne[pt],style:q.style,styleSpec:q.styleSpec}));break;case"has":case"!has":_e=Zi(ne[1]),2!==ne.length?Ne.push(new ze(me,ne,'filter array for "'+ne[0]+'" operator must have 2 elements')):"string"!==_e&&Ne.push(new ze(me+"[1]",ne[1],"string expected, "+_e+" found"));break;case"within":_e=Zi(ne[1]),2!==ne.length?Ne.push(new ze(me,ne,'filter array for "'+ne[0]+'" operator must have 2 elements')):"object"!==_e&&Ne.push(new ze(me+"[1]",ne[1],"object expected, "+_e+" found"))}return Ne}(A)}function ca(A,O){var q=A.key,ne=A.style,me=A.styleSpec,_e=A.value,Le=A.objectKey,Ne=me[O+"_"+A.layerType];if(!Ne)return[];var et=Le.match(/^(.*)-transition$/);if("paint"===O&&et&&Ne[et[1]]&&Ne[et[1]].transition)return sr({key:q,value:_e,valueSpec:me.transition,style:ne,styleSpec:me});var pt,vt=A.valueSpec||Ne[Le];if(!vt)return[new ze(q,_e,'unknown property "'+Le+'"')];if("string"===Zi(_e)&&So(vt)&&!vt.tokens&&(pt=/^{([^}]+)}$/.exec(_e)))return[new ze(q,_e,'"'+Le+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(pt[1])+" }`.")];var Vt=[];return"symbol"===A.layerType&&("text-field"===Le&&ne&&!ne.glyphs&&Vt.push(new ze(q,_e,'use of "text-field" requires a style "glyphs" property')),"text-font"===Le&&je(lt(_e))&&"identity"===Ye(_e.type)&&Vt.push(new ze(q,_e,'"text-font" does not support identity functions'))),Vt.concat(sr({key:A.key,value:_e,valueSpec:vt,style:ne,styleSpec:me,expressionContext:"property",propertyType:O,propertyKey:Le}))}function ot(A){return ca(A,"paint")}function tt(A){return ca(A,"layout")}function Ge(A){var O=[],q=A.value,ne=A.key,me=A.style,_e=A.styleSpec;q.type||q.ref||O.push(new ze(ne,q,'either "type" or "ref" is required'));var Le,Ne=Ye(q.type),et=Ye(q.ref);if(q.id)for(var pt=Ye(q.id),vt=0;vt<A.arrayIndex;vt++){var Vt=me.layers[vt];Ye(Vt.id)===pt&&O.push(new ze(ne,q.id,'duplicate layer id "'+q.id+'", previously used at line '+Vt.id.__line__))}if("ref"in q)["type","source","source-layer","filter","layout"].forEach(function(ur){ur in q&&O.push(new ze(ne,q[ur],'"'+ur+'" is prohibited for ref layers'))}),me.layers.forEach(function(ur){Ye(ur.id)===et&&(Le=ur)}),Le?Le.ref?O.push(new ze(ne,q.ref,"ref cannot reference another ref layer")):Ne=Ye(Le.type):O.push(new ze(ne,q.ref,'ref layer "'+et+'" not found'));else if("background"!==Ne)if(q.source){var Qt=me.sources&&me.sources[q.source],Wt=Qt&&Ye(Qt.type);Qt?"vector"===Wt&&"raster"===Ne?O.push(new ze(ne,q.source,'layer "'+q.id+'" requires a raster source')):"raster"===Wt&&"raster"!==Ne?O.push(new ze(ne,q.source,'layer "'+q.id+'" requires a vector source')):"vector"!==Wt||q["source-layer"]?"raster-dem"===Wt&&"hillshade"!==Ne?O.push(new ze(ne,q.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ne||!q.paint||!q.paint["line-gradient"]||"geojson"===Wt&&Qt.lineMetrics||O.push(new ze(ne,q,'layer "'+q.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):O.push(new ze(ne,q,'layer "'+q.id+'" must specify a "source-layer"')):O.push(new ze(ne,q.source,'source "'+q.source+'" not found'))}else O.push(new ze(ne,q,'missing required property "source"'));return O=O.concat(Nr({key:ne,value:q,valueSpec:_e.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return sr({key:ne+".type",value:q.type,valueSpec:_e.layer.type,style:A.style,styleSpec:A.styleSpec,object:q,objectKey:"type"})},filter:oa,layout:function(ur){return Nr({layer:q,key:ur.key,value:ur.value,style:ur.style,styleSpec:ur.styleSpec,objectElementValidators:{"*":function(Tr){return tt(Je({layerType:Ne},Tr))}}})},paint:function(ur){return Nr({layer:q,key:ur.key,value:ur.value,style:ur.style,styleSpec:ur.styleSpec,objectElementValidators:{"*":function(Tr){return ot(Je({layerType:Ne},Tr))}}})}}}))}function Bt(A){var O=A.value,q=A.key,ne=Zi(O);return"string"!==ne?[new ze(q,O,"string expected, "+ne+" found")]:[]}var Ur={promoteId:function(A){var O=A.key,q=A.value;if("string"===Zi(q))return Bt({key:O,value:q});var ne=[];for(var me in q)ne.push.apply(ne,Bt({key:O+"."+me,value:q[me]}));return ne}};function kn(A){var O=A.value,q=A.key,ne=A.styleSpec,me=A.style;if(!O.type)return[new ze(q,O,'"type" is required')];var _e,Le=Ye(O.type);switch(Le){case"vector":case"raster":case"raster-dem":return Nr({key:q,value:O,valueSpec:ne["source_"+Le.replace("-","_")],style:A.style,styleSpec:ne,objectElementValidators:Ur});case"geojson":if(_e=Nr({key:q,value:O,valueSpec:ne.source_geojson,style:me,styleSpec:ne,objectElementValidators:Ur}),O.cluster)for(var Ne in O.clusterProperties){var et=O.clusterProperties[Ne],pt=et[0],Vt="string"==typeof pt?[pt,["accumulated"],["get",Ne]]:pt;_e.push.apply(_e,jn({key:q+"."+Ne+".map",value:et[1],expressionContext:"cluster-map"})),_e.push.apply(_e,jn({key:q+"."+Ne+".reduce",value:Vt,expressionContext:"cluster-reduce"}))}return _e;case"video":return Nr({key:q,value:O,valueSpec:ne.source_video,style:me,styleSpec:ne});case"image":return Nr({key:q,value:O,valueSpec:ne.source_image,style:me,styleSpec:ne});case"canvas":return[new ze(q,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Zn({key:q+".type",value:O.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:me,styleSpec:ne})}}function ft(A){var O=A.value,q=A.styleSpec,ne=q.light,me=A.style,_e=[],Le=Zi(O);if(void 0===O)return _e;if("object"!==Le)return _e.concat([new ze("light",O,"object expected, "+Le+" found")]);for(var Ne in O){var et=Ne.match(/^(.*)-transition$/);_e=_e.concat(et&&ne[et[1]]&&ne[et[1]].transition?sr({key:Ne,value:O[Ne],valueSpec:q.transition,style:me,styleSpec:q}):ne[Ne]?sr({key:Ne,value:O[Ne],valueSpec:ne[Ne],style:me,styleSpec:q}):[new ze(Ne,O[Ne],'unknown property "'+Ne+'"')])}return _e}var zt={"*":function(){return[]},array:un,boolean:function(A){var O=A.value,q=A.key,ne=Zi(O);return"boolean"!==ne?[new ze(q,O,"boolean expected, "+ne+" found")]:[]},number:gn,color:function(A){var O=A.key,q=A.value,ne=Zi(q);return"string"!==ne?[new ze(O,q,"color expected, "+ne+" found")]:null===mr(q)?[new ze(O,q,'color expected, "'+q+'" found')]:[]},constants:Ve,enum:Zn,filter:oa,function:Rn,layer:Ge,object:Nr,source:kn,light:ft,string:Bt,formatted:function(A){return 0===Bt(A).length?[]:jn(A)},resolvedImage:function(A){return 0===Bt(A).length?[]:jn(A)}};function sr(A){var O=A.value,q=A.valueSpec,ne=A.styleSpec;return q.expression&&je(Ye(O))?Rn(A):q.expression&&nr(lt(O))?jn(A):q.type&&zt[q.type]?zt[q.type](A):Nr(Je({},A,{valueSpec:q.type?ne[q.type]:q}))}function Yt(A){var O=A.value,q=A.key,ne=Bt(A);return ne.length||(-1===O.indexOf("{fontstack}")&&ne.push(new ze(q,O,'"glyphs" url must include a "{fontstack}" token')),-1===O.indexOf("{range}")&&ne.push(new ze(q,O,'"glyphs" url must include a "{range}" token'))),ne}function hr(A,O){void 0===O&&(O=be);var q=[];return q=q.concat(sr({key:"",value:A,valueSpec:O.$root,styleSpec:O,style:A,objectElementValidators:{glyphs:Yt,"*":function(){return[]}}})),A.constants&&(q=q.concat(Ve({key:"constants",value:A.constants,style:A,styleSpec:O}))),Ir(q)}function Ir(A){return[].concat(A).sort(function(O,q){return O.line-q.line})}function Gr(A){return function(){for(var O=[],q=arguments.length;q--;)O[q]=arguments[q];return Ir(A.apply(this,O))}}hr.source=Gr(kn),hr.light=Gr(ft),hr.layer=Gr(Ge),hr.filter=Gr(oa),hr.paintProperty=Gr(ot),hr.layoutProperty=Gr(tt);var $r=hr,dn=$r.light,hn=$r.paintProperty,_n=$r.layoutProperty;function Cn(A,O){var q=!1;if(O&&O.length)for(var ne=0,me=O;ne<me.length;ne+=1)A.fire(new He(new Error(me[ne].message))),q=!0;return q}var mn=Ln;function Ln(A,O,q){var ne=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;var me=new Int32Array(this.arrayBuffer);A=me[0],this.d=(O=me[1])+2*(q=me[2]);for(var _e=0;_e<this.d*this.d;_e++){var Le=me[3+_e],Ne=me[3+_e+1];ne.push(Le===Ne?null:me.subarray(Le,Ne))}var pt=me[3+ne.length+1];this.keys=me.subarray(me[3+ne.length],pt),this.bboxes=me.subarray(pt),this.insert=this._insertReadonly}else{this.d=O+2*q;for(var vt=0;vt<this.d*this.d;vt++)ne.push([]);this.keys=[],this.bboxes=[]}this.n=O,this.extent=A,this.padding=q,this.scale=O/A,this.uid=0;var Vt=q/O*A;this.min=-Vt,this.max=A+Vt}Ln.prototype.insert=function(A,O,q,ne,me){this._forEachCell(O,q,ne,me,this._insertCell,this.uid++),this.keys.push(A),this.bboxes.push(O),this.bboxes.push(q),this.bboxes.push(ne),this.bboxes.push(me)},Ln.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ln.prototype._insertCell=function(A,O,q,ne,me,_e){this.cells[me].push(_e)},Ln.prototype.query=function(A,O,q,ne,me){var _e=this.min,Le=this.max;if(A<=_e&&O<=_e&&Le<=q&&Le<=ne&&!me)return Array.prototype.slice.call(this.keys);var Ne=[];return this._forEachCell(A,O,q,ne,this._queryCell,Ne,{},me),Ne},Ln.prototype._queryCell=function(A,O,q,ne,me,_e,Le,Ne){var et=this.cells[me];if(null!==et)for(var pt=this.keys,vt=this.bboxes,Vt=0;Vt<et.length;Vt++){var Qt=et[Vt];if(void 0===Le[Qt]){var Wt=4*Qt;(Ne?Ne(vt[Wt+0],vt[Wt+1],vt[Wt+2],vt[Wt+3]):A<=vt[Wt+2]&&O<=vt[Wt+3]&&q>=vt[Wt+0]&&ne>=vt[Wt+1])?(Le[Qt]=!0,_e.push(pt[Qt])):Le[Qt]=!1}}},Ln.prototype._forEachCell=function(A,O,q,ne,me,_e,Le,Ne){for(var et=this._convertToCellCoord(A),pt=this._convertToCellCoord(O),vt=this._convertToCellCoord(q),Vt=this._convertToCellCoord(ne),Qt=et;Qt<=vt;Qt++)for(var Wt=pt;Wt<=Vt;Wt++){var ur=this.d*Wt+Qt;if((!Ne||Ne(this._convertFromCellCoord(Qt),this._convertFromCellCoord(Wt),this._convertFromCellCoord(Qt+1),this._convertFromCellCoord(Wt+1)))&&me.call(this,A,O,q,ne,ur,_e,Le,Ne))return}},Ln.prototype._convertFromCellCoord=function(A){return(A-this.padding)/this.scale},Ln.prototype._convertToCellCoord=function(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))},Ln.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var A=this.cells,O=3+this.cells.length+1+1,q=0,ne=0;ne<this.cells.length;ne++)q+=this.cells[ne].length;var me=new Int32Array(O+q+this.keys.length+this.bboxes.length);me[0]=this.extent,me[1]=this.n,me[2]=this.padding;for(var _e=O,Le=0;Le<A.length;Le++){var Ne=A[Le];me[3+Le]=_e,me.set(Ne,_e),_e+=Ne.length}return me[3+A.length]=_e,me.set(this.keys,_e),me[3+A.length+1]=_e+=this.keys.length,me.set(this.bboxes,_e),_e+=this.bboxes.length,me.buffer};var Un=self.ImageData,Wn=self.ImageBitmap,fi={};function Qr(A,O,q){void 0===q&&(q={}),Object.defineProperty(O,"_classRegistryKey",{value:A,writeable:!1}),fi[A]={klass:O,omit:q.omit||[],shallow:q.shallow||[]}}for(var li in Qr("Object",Object),mn.serialize=function(A,O){var q=A.toArrayBuffer();return O&&O.push(q),{buffer:q}},mn.deserialize=function(A){return new mn(A.buffer)},Qr("Grid",mn),Qr("Color",tr),Qr("Error",Error),Qr("ResolvedImage",xr),Qr("StylePropertyFunction",Ar),Qr("StyleExpression",er,{omit:["_evaluator"]}),Qr("ZoomDependentExpression",vr),Qr("ZoomConstantExpression",ir),Qr("CompoundExpression",nn,{omit:["_evaluate"]}),Lo)Lo[li]._classRegistryKey||Qr("Expression_"+li,Lo[li]);function Fn(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&"ArrayBuffer"===A.constructor.name)}function qn(A){return Wn&&A instanceof Wn}function oi(A,O){if(null==A||"boolean"==typeof A||"number"==typeof A||"string"==typeof A||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if(Fn(A)||qn(A))return O&&O.push(A),A;if(ArrayBuffer.isView(A)){var q=A;return O&&O.push(q.buffer),q}if(A instanceof Un)return O&&O.push(A.data.buffer),A;if(Array.isArray(A)){for(var ne=[],me=0,_e=A;me<_e.length;me+=1)ne.push(oi(_e[me],O));return ne}if("object"==typeof A){var Ne=A.constructor,et=Ne._classRegistryKey;if(!et)throw new Error("can't serialize object of unregistered class");var pt=Ne.serialize?Ne.serialize(A,O):{};if(!Ne.serialize){for(var vt in A)if(A.hasOwnProperty(vt)&&!(fi[et].omit.indexOf(vt)>=0)){var Vt=A[vt];pt[vt]=fi[et].shallow.indexOf(vt)>=0?Vt:oi(Vt,O)}A instanceof Error&&(pt.message=A.message)}if(pt.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==et&&(pt.$name=et),pt}throw new Error("can't serialize object of type "+typeof A)}function Pi(A){if(null==A||"boolean"==typeof A||"number"==typeof A||"string"==typeof A||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||Fn(A)||qn(A)||ArrayBuffer.isView(A)||A instanceof Un)return A;if(Array.isArray(A))return A.map(Pi);if("object"==typeof A){var O=A.$name||"Object",q=fi[O].klass;if(!q)throw new Error("can't deserialize unregistered class "+O);if(q.deserialize)return q.deserialize(A);for(var ne=Object.create(q.prototype),me=0,_e=Object.keys(A);me<_e.length;me+=1){var Le=_e[me];if("$name"!==Le){var Ne=A[Le];ne[Le]=fi[O].shallow.indexOf(Le)>=0?Ne:Pi(Ne)}}return ne}throw new Error("can't deserialize object of type "+typeof A)}var zi=function(){this.first=!0};zi.prototype.update=function(A,O){var q=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=q,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=q,!0):(this.lastFloorZoom>q?(this.lastIntegerZoom=q+1,this.lastIntegerZoomTime=O):this.lastFloorZoom<q&&(this.lastIntegerZoom=q,this.lastIntegerZoomTime=O),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=q,!0))};var zn={"Latin-1 Supplement":function(A){return A>=128&&A<=255},Arabic:function(A){return A>=1536&&A<=1791},"Arabic Supplement":function(A){return A>=1872&&A<=1919},"Arabic Extended-A":function(A){return A>=2208&&A<=2303},"Hangul Jamo":function(A){return A>=4352&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return A>=5120&&A<=5759},Khmer:function(A){return A>=6016&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return A>=6320&&A<=6399},"General Punctuation":function(A){return A>=8192&&A<=8303},"Letterlike Symbols":function(A){return A>=8448&&A<=8527},"Number Forms":function(A){return A>=8528&&A<=8591},"Miscellaneous Technical":function(A){return A>=8960&&A<=9215},"Control Pictures":function(A){return A>=9216&&A<=9279},"Optical Character Recognition":function(A){return A>=9280&&A<=9311},"Enclosed Alphanumerics":function(A){return A>=9312&&A<=9471},"Geometric Shapes":function(A){return A>=9632&&A<=9727},"Miscellaneous Symbols":function(A){return A>=9728&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return A>=11008&&A<=11263},"CJK Radicals Supplement":function(A){return A>=11904&&A<=12031},"Kangxi Radicals":function(A){return A>=12032&&A<=12255},"Ideographic Description Characters":function(A){return A>=12272&&A<=12287},"CJK Symbols and Punctuation":function(A){return A>=12288&&A<=12351},Hiragana:function(A){return A>=12352&&A<=12447},Katakana:function(A){return A>=12448&&A<=12543},Bopomofo:function(A){return A>=12544&&A<=12591},"Hangul Compatibility Jamo":function(A){return A>=12592&&A<=12687},Kanbun:function(A){return A>=12688&&A<=12703},"Bopomofo Extended":function(A){return A>=12704&&A<=12735},"CJK Strokes":function(A){return A>=12736&&A<=12783},"Katakana Phonetic Extensions":function(A){return A>=12784&&A<=12799},"Enclosed CJK Letters and Months":function(A){return A>=12800&&A<=13055},"CJK Compatibility":function(A){return A>=13056&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return A>=13312&&A<=19903},"Yijing Hexagram Symbols":function(A){return A>=19904&&A<=19967},"CJK Unified Ideographs":function(A){return A>=19968&&A<=40959},"Yi Syllables":function(A){return A>=40960&&A<=42127},"Yi Radicals":function(A){return A>=42128&&A<=42191},"Hangul Jamo Extended-A":function(A){return A>=43360&&A<=43391},"Hangul Syllables":function(A){return A>=44032&&A<=55215},"Hangul Jamo Extended-B":function(A){return A>=55216&&A<=55295},"Private Use Area":function(A){return A>=57344&&A<=63743},"CJK Compatibility Ideographs":function(A){return A>=63744&&A<=64255},"Arabic Presentation Forms-A":function(A){return A>=64336&&A<=65023},"Vertical Forms":function(A){return A>=65040&&A<=65055},"CJK Compatibility Forms":function(A){return A>=65072&&A<=65103},"Small Form Variants":function(A){return A>=65104&&A<=65135},"Arabic Presentation Forms-B":function(A){return A>=65136&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return A>=65280&&A<=65519}};function Vi(A){for(var O=0,q=A;O<q.length;O+=1)if(_i(q[O].charCodeAt(0)))return!0;return!1}function Di(A){return!(zn.Arabic(A)||zn["Arabic Supplement"](A)||zn["Arabic Extended-A"](A)||zn["Arabic Presentation Forms-A"](A)||zn["Arabic Presentation Forms-B"](A))}function _i(A){return!(746!==A&&747!==A&&(A<4352||!(zn["Bopomofo Extended"](A)||zn.Bopomofo(A)||zn["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||zn["CJK Compatibility Ideographs"](A)||zn["CJK Compatibility"](A)||zn["CJK Radicals Supplement"](A)||zn["CJK Strokes"](A)||!(!zn["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||12336===A)||zn["CJK Unified Ideographs Extension A"](A)||zn["CJK Unified Ideographs"](A)||zn["Enclosed CJK Letters and Months"](A)||zn["Hangul Compatibility Jamo"](A)||zn["Hangul Jamo Extended-A"](A)||zn["Hangul Jamo Extended-B"](A)||zn["Hangul Jamo"](A)||zn["Hangul Syllables"](A)||zn.Hiragana(A)||zn["Ideographic Description Characters"](A)||zn.Kanbun(A)||zn["Kangxi Radicals"](A)||zn["Katakana Phonetic Extensions"](A)||zn.Katakana(A)&&12540!==A||!(!zn["Halfwidth and Fullwidth Forms"](A)||65288===A||65289===A||65293===A||A>=65306&&A<=65310||65339===A||65341===A||65343===A||A>=65371&&A<=65503||65507===A||A>=65512&&A<=65519)||!(!zn["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||zn["Unified Canadian Aboriginal Syllabics"](A)||zn["Unified Canadian Aboriginal Syllabics Extended"](A)||zn["Vertical Forms"](A)||zn["Yijing Hexagram Symbols"](A)||zn["Yi Syllables"](A)||zn["Yi Radicals"](A))))}function Ui(A){return!(_i(A)||(O=A,zn["Latin-1 Supplement"](O)&&(167===O||169===O||174===O||177===O||188===O||189===O||190===O||215===O||247===O)||zn["General Punctuation"](O)&&(8214===O||8224===O||8225===O||8240===O||8241===O||8251===O||8252===O||8258===O||8263===O||8264===O||8265===O||8273===O)||zn["Letterlike Symbols"](O)||zn["Number Forms"](O)||zn["Miscellaneous Technical"](O)&&(O>=8960&&O<=8967||O>=8972&&O<=8991||O>=8996&&O<=9e3||9003===O||O>=9085&&O<=9114||O>=9150&&O<=9165||9167===O||O>=9169&&O<=9179||O>=9186&&O<=9215)||zn["Control Pictures"](O)&&9251!==O||zn["Optical Character Recognition"](O)||zn["Enclosed Alphanumerics"](O)||zn["Geometric Shapes"](O)||zn["Miscellaneous Symbols"](O)&&!(O>=9754&&O<=9759)||zn["Miscellaneous Symbols and Arrows"](O)&&(O>=11026&&O<=11055||O>=11088&&O<=11097||O>=11192&&O<=11243)||zn["CJK Symbols and Punctuation"](O)||zn.Katakana(O)||zn["Private Use Area"](O)||zn["CJK Compatibility Forms"](O)||zn["Small Form Variants"](O)||zn["Halfwidth and Fullwidth Forms"](O)||8734===O||8756===O||8757===O||O>=9984&&O<=10087||O>=10102&&O<=10131||65532===O||65533===O));var O}function Ii(A){return A>=1424&&A<=2303||zn["Arabic Presentation Forms-A"](A)||zn["Arabic Presentation Forms-B"](A)}function sa(A,O){return!(!O&&Ii(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||zn.Khmer(A))}function ci(A){for(var O=0,q=A;O<q.length;O+=1)if(Ii(q[O].charCodeAt(0)))return!0;return!1}var Qi="deferred",qa="loading",Yo="loaded",xo=null,ki="unavailable",wa=null,bo=function(A){A&&"string"==typeof A&&A.indexOf("NetworkError")>-1&&(ki="error"),xo&&xo(A)};function ea(){Ca.fire(new Be("pluginStateChange",{pluginStatus:ki,pluginURL:wa}))}var Ca=new he,Ka=function(){return ki},ua=function(){if(ki!==Qi||!wa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ki=qa,ea(),wa&&xt({url:wa},function(A){A?bo(A):(ki=Yo,ea())})},go={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ki===Yo||null!=go.applyArabicShaping},isLoading:function(){return ki===qa},setState:function(A){ki=A.pluginStatus,wa=A.pluginURL},isParsed:function(){return null!=go.applyArabicShaping&&null!=go.processBidirectionalText&&null!=go.processStyledBidirectionalText},getPluginURL:function(){return wa}},fa=function(A,O){this.zoom=A,O?(this.now=O.now,this.fadeDuration=O.fadeDuration,this.zoomHistory=O.zoomHistory,this.transition=O.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new zi,this.transition={})};fa.prototype.isSupportedScript=function(A){return function(O,q){for(var ne=0,me=O;ne<me.length;ne+=1)if(!sa(me[ne].charCodeAt(0),q))return!1;return!0}(A,go.isLoaded())},fa.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},fa.prototype.getCrossfadeParameters=function(){var A=this.zoom,O=A-Math.floor(A),q=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:O+(1-O)*q}:{fromScale:.5,toScale:1,t:1-(1-q)*O}};var ao=function(A,O){this.property=A,this.value=O,this.expression=function(q,ne){if(je(q))return new Ar(q,ne);if(nr(q)){var me=wr(q,ne);if("error"===me.result)throw new Error(me.value.map(function(Le){return Le.key+": "+Le.message}).join(", "));return me.value}var _e=q;return"string"==typeof q&&"color"===ne.type&&(_e=tr.parse(q)),{kind:"constant",evaluate:function(){return _e}}}(void 0===O?A.specification.default:O,A.specification)};ao.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ao.prototype.possiblyEvaluate=function(A,O,q){return this.property.possiblyEvaluate(this,A,O,q)};var us=function(A){this.property=A,this.value=new ao(A,void 0)};us.prototype.transitioned=function(A,O){return new Is(this.property,this.value,O,o({},A.transition,this.transition),A.now)},us.prototype.untransitioned=function(){return new Is(this.property,this.value,null,{},0)};var es=function(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)};es.prototype.getValue=function(A){return T(this._values[A].value.value)},es.prototype.setValue=function(A,O){this._values.hasOwnProperty(A)||(this._values[A]=new us(this._values[A].property)),this._values[A].value=new ao(this._values[A].property,null===O?void 0:T(O))},es.prototype.getTransition=function(A){return T(this._values[A].transition)},es.prototype.setTransition=function(A,O){this._values.hasOwnProperty(A)||(this._values[A]=new us(this._values[A].property)),this._values[A].transition=T(O)||void 0},es.prototype.serialize=function(){for(var A={},O=0,q=Object.keys(this._values);O<q.length;O+=1){var ne=q[O],me=this.getValue(ne);void 0!==me&&(A[ne]=me);var _e=this.getTransition(ne);void 0!==_e&&(A[ne+"-transition"]=_e)}return A},es.prototype.transitioned=function(A,O){for(var q=new ja(this._properties),ne=0,me=Object.keys(this._values);ne<me.length;ne+=1){var _e=me[ne];q._values[_e]=this._values[_e].transitioned(A,O._values[_e])}return q},es.prototype.untransitioned=function(){for(var A=new ja(this._properties),O=0,q=Object.keys(this._values);O<q.length;O+=1){var ne=q[O];A._values[ne]=this._values[ne].untransitioned()}return A};var Is=function(A,O,q,ne,me){this.property=A,this.value=O,this.begin=me+ne.delay||0,this.end=this.begin+ne.duration||0,A.specification.transition&&(ne.delay||ne.duration)&&(this.prior=q)};Is.prototype.possiblyEvaluate=function(A,O,q){var ne=A.now||0,me=this.value.possiblyEvaluate(A,O,q),_e=this.prior;if(_e){if(ne>this.end)return this.prior=null,me;if(this.value.isDataDriven())return this.prior=null,me;if(ne<this.begin)return _e.possiblyEvaluate(A,O,q);var Le=(ne-this.begin)/(this.end-this.begin);return this.property.interpolate(_e.possiblyEvaluate(A,O,q),me,function(Ne){if(Ne<=0)return 0;if(Ne>=1)return 1;var et=Ne*Ne,pt=et*Ne;return 4*(Ne<.5?pt:3*(Ne-et)+pt-.75)}(Le))}return me};var ja=function(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)};ja.prototype.possiblyEvaluate=function(A,O,q){for(var ne=new ts(this._properties),me=0,_e=Object.keys(this._values);me<_e.length;me+=1){var Le=_e[me];ne._values[Le]=this._values[Le].possiblyEvaluate(A,O,q)}return ne},ja.prototype.hasTransition=function(){for(var A=0,O=Object.keys(this._values);A<O.length;A+=1)if(this._values[O[A]].prior)return!0;return!1};var Os=function(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)};Os.prototype.getValue=function(A){return T(this._values[A].value)},Os.prototype.setValue=function(A,O){this._values[A]=new ao(this._values[A].property,null===O?void 0:T(O))},Os.prototype.serialize=function(){for(var A={},O=0,q=Object.keys(this._values);O<q.length;O+=1){var ne=q[O],me=this.getValue(ne);void 0!==me&&(A[ne]=me)}return A},Os.prototype.possiblyEvaluate=function(A,O,q){for(var ne=new ts(this._properties),me=0,_e=Object.keys(this._values);me<_e.length;me+=1){var Le=_e[me];ne._values[Le]=this._values[Le].possiblyEvaluate(A,O,q)}return ne};var Va=function(A,O,q){this.property=A,this.value=O,this.parameters=q};Va.prototype.isConstant=function(){return"constant"===this.value.kind},Va.prototype.constantOr=function(A){return"constant"===this.value.kind?this.value.value:A},Va.prototype.evaluate=function(A,O,q,ne){return this.property.evaluate(this.value,this.parameters,A,O,q,ne)};var ts=function(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)};ts.prototype.get=function(A){return this._values[A]};var mi=function(A){this.specification=A};mi.prototype.possiblyEvaluate=function(A,O){return A.expression.evaluate(O)},mi.prototype.interpolate=function(A,O,q){var ne=Dn[this.specification.type];return ne?ne(A,O,q):A};var Ai=function(A,O){this.specification=A,this.overrides=O};Ai.prototype.possiblyEvaluate=function(A,O,q,ne){return new Va(this,"constant"===A.expression.kind||"camera"===A.expression.kind?{kind:"constant",value:A.expression.evaluate(O,null,{},q,ne)}:A.expression,O)},Ai.prototype.interpolate=function(A,O,q){if("constant"!==A.value.kind||"constant"!==O.value.kind)return A;if(void 0===A.value.value||void 0===O.value.value)return new Va(this,{kind:"constant",value:void 0},A.parameters);var ne=Dn[this.specification.type];return ne?new Va(this,{kind:"constant",value:ne(A.value.value,O.value.value,q)},A.parameters):A},Ai.prototype.evaluate=function(A,O,q,ne,me,_e){return"constant"===A.kind?A.value:A.evaluate(O,q,ne,me,_e)};var Ds=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.possiblyEvaluate=function(q,ne,me,_e){if(void 0===q.value)return new Va(this,{kind:"constant",value:void 0},ne);if("constant"===q.expression.kind){var Le=q.expression.evaluate(ne,null,{},me,_e),Ne="resolvedImage"===q.property.specification.type&&"string"!=typeof Le?Le.name:Le,et=this._calculate(Ne,Ne,Ne,ne);return new Va(this,{kind:"constant",value:et},ne)}if("camera"===q.expression.kind){var pt=this._calculate(q.expression.evaluate({zoom:ne.zoom-1}),q.expression.evaluate({zoom:ne.zoom}),q.expression.evaluate({zoom:ne.zoom+1}),ne);return new Va(this,{kind:"constant",value:pt},ne)}return new Va(this,q.expression,ne)},O.prototype.evaluate=function(q,ne,me,_e,Le,Ne){if("source"===q.kind){var et=q.evaluate(ne,me,_e,Le,Ne);return this._calculate(et,et,et,ne)}return"composite"===q.kind?this._calculate(q.evaluate({zoom:Math.floor(ne.zoom)-1},me,_e),q.evaluate({zoom:Math.floor(ne.zoom)},me,_e),q.evaluate({zoom:Math.floor(ne.zoom)+1},me,_e),ne):q.value},O.prototype._calculate=function(q,ne,me,_e){return _e.zoom>_e.zoomHistory.lastIntegerZoom?{from:q,to:ne}:{from:me,to:ne}},O.prototype.interpolate=function(q){return q},O}(Ai),zs=function(A){this.specification=A};zs.prototype.possiblyEvaluate=function(A,O,q,ne){if(void 0!==A.value){if("constant"===A.expression.kind){var me=A.expression.evaluate(O,null,{},q,ne);return this._calculate(me,me,me,O)}return this._calculate(A.expression.evaluate(new fa(Math.floor(O.zoom-1),O)),A.expression.evaluate(new fa(Math.floor(O.zoom),O)),A.expression.evaluate(new fa(Math.floor(O.zoom+1),O)),O)}},zs.prototype._calculate=function(A,O,q,ne){return ne.zoom>ne.zoomHistory.lastIntegerZoom?{from:A,to:O}:{from:q,to:O}},zs.prototype.interpolate=function(A){return A};var rs=function(A){this.specification=A};rs.prototype.possiblyEvaluate=function(A,O,q,ne){return!!A.expression.evaluate(O,null,{},q,ne)},rs.prototype.interpolate=function(){return!1};var Io=function(A){for(var O in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var q=A[O];q.specification.overridable&&this.overridableProperties.push(O);var ne=this.defaultPropertyValues[O]=new ao(q,void 0),me=this.defaultTransitionablePropertyValues[O]=new us(q);this.defaultTransitioningPropertyValues[O]=me.untransitioned(),this.defaultPossiblyEvaluatedValues[O]=ne.possiblyEvaluate({})}};Qr("DataDrivenProperty",Ai),Qr("DataConstantProperty",mi),Qr("CrossFadedDataDrivenProperty",Ds),Qr("CrossFadedProperty",zs),Qr("ColorRampProperty",rs);var Ho=function(A){function O(q,ne){if(A.call(this),this.id=q.id,this.type=q.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==q.type&&(this.metadata=q.metadata,this.minzoom=q.minzoom,this.maxzoom=q.maxzoom,"background"!==q.type&&(this.source=q.source,this.sourceLayer=q["source-layer"],this.filter=q.filter),ne.layout&&(this._unevaluatedLayout=new Os(ne.layout)),ne.paint)){for(var me in this._transitionablePaint=new es(ne.paint),q.paint)this.setPaintProperty(me,q.paint[me],{validate:!1});for(var _e in q.layout)this.setLayoutProperty(_e,q.layout[_e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ts(ne.paint)}}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},O.prototype.getLayoutProperty=function(q){return"visibility"===q?this.visibility:this._unevaluatedLayout.getValue(q)},O.prototype.setLayoutProperty=function(q,ne,me){void 0===me&&(me={}),null!=ne&&this._validate(_n,"layers."+this.id+".layout."+q,q,ne,me)||("visibility"!==q?this._unevaluatedLayout.setValue(q,ne):this.visibility=ne)},O.prototype.getPaintProperty=function(q){return _(q,"-transition")?this._transitionablePaint.getTransition(q.slice(0,-11)):this._transitionablePaint.getValue(q)},O.prototype.setPaintProperty=function(q,ne,me){if(void 0===me&&(me={}),null!=ne&&this._validate(hn,"layers."+this.id+".paint."+q,q,ne,me))return!1;if(_(q,"-transition"))return this._transitionablePaint.setTransition(q.slice(0,-11),ne||void 0),!1;var Le=this._transitionablePaint._values[q],Ne="cross-faded-data-driven"===Le.property.specification["property-type"],et=Le.value.isDataDriven(),pt=Le.value;this._transitionablePaint.setValue(q,ne),this._handleSpecialPaintPropertyUpdate(q);var vt=this._transitionablePaint._values[q].value;return vt.isDataDriven()||et||Ne||this._handleOverridablePaintPropertyUpdate(q,pt,vt)},O.prototype._handleSpecialPaintPropertyUpdate=function(q){},O.prototype._handleOverridablePaintPropertyUpdate=function(q,ne,me){return!1},O.prototype.isHidden=function(q){return!!(this.minzoom&&q<this.minzoom)||!!(this.maxzoom&&q>=this.maxzoom)||"none"===this.visibility},O.prototype.updateTransitions=function(q){this._transitioningPaint=this._transitionablePaint.transitioned(q,this._transitioningPaint)},O.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},O.prototype.recalculate=function(q,ne){q.getCrossfadeParameters&&(this._crossfadeParameters=q.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(q,void 0,ne)),this.paint=this._transitioningPaint.possiblyEvaluate(q,void 0,ne)},O.prototype.serialize=function(){var q={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(q.layout=q.layout||{},q.layout.visibility=this.visibility),w(q,function(ne,me){return!(void 0===ne||"layout"===me&&!Object.keys(ne).length||"paint"===me&&!Object.keys(ne).length)})},O.prototype._validate=function(q,ne,me,_e,Le){return void 0===Le&&(Le={}),(!Le||!1!==Le.validate)&&Cn(this,q.call($r,{key:ne,layerType:this.type,objectKey:me,value:_e,styleSpec:be,style:{glyphs:!0,sprite:!0}}))},O.prototype.is3D=function(){return!1},O.prototype.isTileClipped=function(){return!1},O.prototype.hasOffscreenPass=function(){return!1},O.prototype.resize=function(){},O.prototype.isStateDependent=function(){for(var q in this.paint._values){var ne=this.paint.get(q);if(ne instanceof Va&&So(ne.property.specification)&&("source"===ne.value.kind||"composite"===ne.value.kind)&&ne.value.isStateDependent)return!0}return!1},O}(he),Zs={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},_s=function(A,O){this._structArray=A,this._pos1=O*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ta=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ha(A,O){void 0===O&&(O=1);var q=0,ne=0;return{members:A.map(function(me){var Le=Zs[me.type].BYTES_PER_ELEMENT,Ne=q=gs(q,Math.max(O,Le)),et=me.components||1;return ne=Math.max(ne,Le),q+=Le*et,{name:me.name,type:me.type,components:et,offset:Ne}}),size:gs(q,Math.max(ne,O)),alignment:O}}function gs(A,O){return Math.ceil(A/O)*O}ta.serialize=function(A,O){return A._trim(),O&&(A.isTransferred=!0,O.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}},ta.deserialize=function(A){var O=Object.create(this.prototype);return O.arrayBuffer=A.arrayBuffer,O.length=A.length,O.capacity=A.arrayBuffer.byteLength/O.bytesPerElement,O._refreshViews(),O},ta.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ta.prototype.clear=function(){this.length=0},ta.prototype.resize=function(A){this.reserve(A),this.length=A},ta.prototype.reserve=function(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var O=this.uint8;this._refreshViews(),O&&this.uint8.set(O)}},ta.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var fs=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne){var me=this.length;return this.resize(me+1),this.emplace(me,q,ne)},O.prototype.emplace=function(q,ne,me){var _e=2*q;return this.int16[_e+0]=ne,this.int16[_e+1]=me,q},O}(ta);fs.prototype.bytesPerElement=4,Qr("StructArrayLayout2i4",fs);var Ra=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me,_e){var Le=this.length;return this.resize(Le+1),this.emplace(Le,q,ne,me,_e)},O.prototype.emplace=function(q,ne,me,_e,Le){var Ne=4*q;return this.int16[Ne+0]=ne,this.int16[Ne+1]=me,this.int16[Ne+2]=_e,this.int16[Ne+3]=Le,q},O}(ta);Ra.prototype.bytesPerElement=8,Qr("StructArrayLayout4i8",Ra);var vs=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me,_e,Le,Ne){var et=this.length;return this.resize(et+1),this.emplace(et,q,ne,me,_e,Le,Ne)},O.prototype.emplace=function(q,ne,me,_e,Le,Ne,et){var pt=6*q;return this.int16[pt+0]=ne,this.int16[pt+1]=me,this.int16[pt+2]=_e,this.int16[pt+3]=Le,this.int16[pt+4]=Ne,this.int16[pt+5]=et,q},O}(ta);vs.prototype.bytesPerElement=12,Qr("StructArrayLayout2i4i12",vs);var ws=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me,_e,Le,Ne){var et=this.length;return this.resize(et+1),this.emplace(et,q,ne,me,_e,Le,Ne)},O.prototype.emplace=function(q,ne,me,_e,Le,Ne,et){var pt=4*q,vt=8*q;return this.int16[pt+0]=ne,this.int16[pt+1]=me,this.uint8[vt+4]=_e,this.uint8[vt+5]=Le,this.uint8[vt+6]=Ne,this.uint8[vt+7]=et,q},O}(ta);ws.prototype.bytesPerElement=8,Qr("StructArrayLayout2i4ub8",ws);var xs=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me,_e,Le,Ne,et,pt,vt,Vt){var Qt=this.length;return this.resize(Qt+1),this.emplace(Qt,q,ne,me,_e,Le,Ne,et,pt,vt,Vt)},O.prototype.emplace=function(q,ne,me,_e,Le,Ne,et,pt,vt,Vt,Qt){var Wt=9*q,ur=18*q;return this.uint16[Wt+0]=ne,this.uint16[Wt+1]=me,this.uint16[Wt+2]=_e,this.uint16[Wt+3]=Le,this.uint16[Wt+4]=Ne,this.uint16[Wt+5]=et,this.uint16[Wt+6]=pt,this.uint16[Wt+7]=vt,this.uint8[ur+16]=Vt,this.uint8[ur+17]=Qt,q},O}(ta);xs.prototype.bytesPerElement=18,Qr("StructArrayLayout8ui2ub18",xs);var Ts=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me,_e,Le,Ne,et,pt,vt,Vt,Qt,Wt){var ur=this.length;return this.resize(ur+1),this.emplace(ur,q,ne,me,_e,Le,Ne,et,pt,vt,Vt,Qt,Wt)},O.prototype.emplace=function(q,ne,me,_e,Le,Ne,et,pt,vt,Vt,Qt,Wt,ur){var Tr=12*q;return this.int16[Tr+0]=ne,this.int16[Tr+1]=me,this.int16[Tr+2]=_e,this.int16[Tr+3]=Le,this.uint16[Tr+4]=Ne,this.uint16[Tr+5]=et,this.uint16[Tr+6]=pt,this.uint16[Tr+7]=vt,this.int16[Tr+8]=Vt,this.int16[Tr+9]=Qt,this.int16[Tr+10]=Wt,this.int16[Tr+11]=ur,q},O}(ta);Ts.prototype.bytesPerElement=24,Qr("StructArrayLayout4i4ui4i24",Ts);var hs=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me){var _e=this.length;return this.resize(_e+1),this.emplace(_e,q,ne,me)},O.prototype.emplace=function(q,ne,me,_e){var Le=3*q;return this.float32[Le+0]=ne,this.float32[Le+1]=me,this.float32[Le+2]=_e,q},O}(ta);hs.prototype.bytesPerElement=12,Qr("StructArrayLayout3f12",hs);var Ws=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q){var ne=this.length;return this.resize(ne+1),this.emplace(ne,q)},O.prototype.emplace=function(q,ne){return this.uint32[1*q+0]=ne,q},O}(ta);Ws.prototype.bytesPerElement=4,Qr("StructArrayLayout1ul4",Ws);var il=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me,_e,Le,Ne,et,pt,vt){var Vt=this.length;return this.resize(Vt+1),this.emplace(Vt,q,ne,me,_e,Le,Ne,et,pt,vt)},O.prototype.emplace=function(q,ne,me,_e,Le,Ne,et,pt,vt,Vt){var Qt=10*q,Wt=5*q;return this.int16[Qt+0]=ne,this.int16[Qt+1]=me,this.int16[Qt+2]=_e,this.int16[Qt+3]=Le,this.int16[Qt+4]=Ne,this.int16[Qt+5]=et,this.uint32[Wt+3]=pt,this.uint16[Qt+8]=vt,this.uint16[Qt+9]=Vt,q},O}(ta);il.prototype.bytesPerElement=20,Qr("StructArrayLayout6i1ul2ui20",il);var ys=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me,_e,Le,Ne){var et=this.length;return this.resize(et+1),this.emplace(et,q,ne,me,_e,Le,Ne)},O.prototype.emplace=function(q,ne,me,_e,Le,Ne,et){var pt=6*q;return this.int16[pt+0]=ne,this.int16[pt+1]=me,this.int16[pt+2]=_e,this.int16[pt+3]=Le,this.int16[pt+4]=Ne,this.int16[pt+5]=et,q},O}(ta);ys.prototype.bytesPerElement=12,Qr("StructArrayLayout2i2i2i12",ys);var Xs=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me,_e,Le){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,q,ne,me,_e,Le)},O.prototype.emplace=function(q,ne,me,_e,Le,Ne){var et=4*q,pt=8*q;return this.float32[et+0]=ne,this.float32[et+1]=me,this.float32[et+2]=_e,this.int16[pt+6]=Le,this.int16[pt+7]=Ne,q},O}(ta);Xs.prototype.bytesPerElement=16,Qr("StructArrayLayout2f1f2i16",Xs);var ks=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me,_e){var Le=this.length;return this.resize(Le+1),this.emplace(Le,q,ne,me,_e)},O.prototype.emplace=function(q,ne,me,_e,Le){var Ne=12*q,et=3*q;return this.uint8[Ne+0]=ne,this.uint8[Ne+1]=me,this.float32[et+1]=_e,this.float32[et+2]=Le,q},O}(ta);ks.prototype.bytesPerElement=12,Qr("StructArrayLayout2ub2f12",ks);var oo=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me){var _e=this.length;return this.resize(_e+1),this.emplace(_e,q,ne,me)},O.prototype.emplace=function(q,ne,me,_e){var Le=3*q;return this.uint16[Le+0]=ne,this.uint16[Le+1]=me,this.uint16[Le+2]=_e,q},O}(ta);oo.prototype.bytesPerElement=6,Qr("StructArrayLayout3ui6",oo);var al=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me,_e,Le,Ne,et,pt,vt,Vt,Qt,Wt,ur,Tr,Rr,Dr,qr){var Yr=this.length;return this.resize(Yr+1),this.emplace(Yr,q,ne,me,_e,Le,Ne,et,pt,vt,Vt,Qt,Wt,ur,Tr,Rr,Dr,qr)},O.prototype.emplace=function(q,ne,me,_e,Le,Ne,et,pt,vt,Vt,Qt,Wt,ur,Tr,Rr,Dr,qr,Yr){var Kr=24*q,vn=12*q,Sn=48*q;return this.int16[Kr+0]=ne,this.int16[Kr+1]=me,this.uint16[Kr+2]=_e,this.uint16[Kr+3]=Le,this.uint32[vn+2]=Ne,this.uint32[vn+3]=et,this.uint32[vn+4]=pt,this.uint16[Kr+10]=vt,this.uint16[Kr+11]=Vt,this.uint16[Kr+12]=Qt,this.float32[vn+7]=Wt,this.float32[vn+8]=ur,this.uint8[Sn+36]=Tr,this.uint8[Sn+37]=Rr,this.uint8[Sn+38]=Dr,this.uint32[vn+10]=qr,this.int16[Kr+22]=Yr,q},O}(ta);al.prototype.bytesPerElement=48,Qr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",al);var ol=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me,_e,Le,Ne,et,pt,vt,Vt,Qt,Wt,ur,Tr,Rr,Dr,qr,Yr,Kr,vn,Sn,Gn,Hn,$n,hi,pi,ni,xi){var vi=this.length;return this.resize(vi+1),this.emplace(vi,q,ne,me,_e,Le,Ne,et,pt,vt,Vt,Qt,Wt,ur,Tr,Rr,Dr,qr,Yr,Kr,vn,Sn,Gn,Hn,$n,hi,pi,ni,xi)},O.prototype.emplace=function(q,ne,me,_e,Le,Ne,et,pt,vt,Vt,Qt,Wt,ur,Tr,Rr,Dr,qr,Yr,Kr,vn,Sn,Gn,Hn,$n,hi,pi,ni,xi,vi){var di=34*q,ra=17*q;return this.int16[di+0]=ne,this.int16[di+1]=me,this.int16[di+2]=_e,this.int16[di+3]=Le,this.int16[di+4]=Ne,this.int16[di+5]=et,this.int16[di+6]=pt,this.int16[di+7]=vt,this.uint16[di+8]=Vt,this.uint16[di+9]=Qt,this.uint16[di+10]=Wt,this.uint16[di+11]=ur,this.uint16[di+12]=Tr,this.uint16[di+13]=Rr,this.uint16[di+14]=Dr,this.uint16[di+15]=qr,this.uint16[di+16]=Yr,this.uint16[di+17]=Kr,this.uint16[di+18]=vn,this.uint16[di+19]=Sn,this.uint16[di+20]=Gn,this.uint16[di+21]=Hn,this.uint16[di+22]=$n,this.uint32[ra+12]=hi,this.float32[ra+13]=pi,this.float32[ra+14]=ni,this.float32[ra+15]=xi,this.float32[ra+16]=vi,q},O}(ta);ol.prototype.bytesPerElement=68,Qr("StructArrayLayout8i15ui1ul4f68",ol);var ce=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q){var ne=this.length;return this.resize(ne+1),this.emplace(ne,q)},O.prototype.emplace=function(q,ne){return this.float32[1*q+0]=ne,q},O}(ta);ce.prototype.bytesPerElement=4,Qr("StructArrayLayout1f4",ce);var L=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me){var _e=this.length;return this.resize(_e+1),this.emplace(_e,q,ne,me)},O.prototype.emplace=function(q,ne,me,_e){var Le=3*q;return this.int16[Le+0]=ne,this.int16[Le+1]=me,this.int16[Le+2]=_e,q},O}(ta);L.prototype.bytesPerElement=6,Qr("StructArrayLayout3i6",L);var z=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me){var _e=this.length;return this.resize(_e+1),this.emplace(_e,q,ne,me)},O.prototype.emplace=function(q,ne,me,_e){var Ne=4*q;return this.uint32[2*q+0]=ne,this.uint16[Ne+2]=me,this.uint16[Ne+3]=_e,q},O}(ta);z.prototype.bytesPerElement=8,Qr("StructArrayLayout1ul2ui8",z);var F=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne){var me=this.length;return this.resize(me+1),this.emplace(me,q,ne)},O.prototype.emplace=function(q,ne,me){var _e=2*q;return this.uint16[_e+0]=ne,this.uint16[_e+1]=me,q},O}(ta);F.prototype.bytesPerElement=4,Qr("StructArrayLayout2ui4",F);var G=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q){var ne=this.length;return this.resize(ne+1),this.emplace(ne,q)},O.prototype.emplace=function(q,ne){return this.uint16[1*q+0]=ne,q},O}(ta);G.prototype.bytesPerElement=2,Qr("StructArrayLayout1ui2",G);var ie=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne){var me=this.length;return this.resize(me+1),this.emplace(me,q,ne)},O.prototype.emplace=function(q,ne,me){var _e=2*q;return this.float32[_e+0]=ne,this.float32[_e+1]=me,q},O}(ta);ie.prototype.bytesPerElement=8,Qr("StructArrayLayout2f8",ie);var fe=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},O.prototype.emplaceBack=function(q,ne,me,_e){var Le=this.length;return this.resize(Le+1),this.emplace(Le,q,ne,me,_e)},O.prototype.emplace=function(q,ne,me,_e,Le){var Ne=4*q;return this.float32[Ne+0]=ne,this.float32[Ne+1]=me,this.float32[Ne+2]=_e,this.float32[Ne+3]=Le,q},O}(ta);fe.prototype.bytesPerElement=16,Qr("StructArrayLayout4f16",fe);var xe=function(A){function O(){A.apply(this,arguments)}A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O;var q={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return q.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},q.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},q.x1.get=function(){return this._structArray.int16[this._pos2+2]},q.y1.get=function(){return this._structArray.int16[this._pos2+3]},q.x2.get=function(){return this._structArray.int16[this._pos2+4]},q.y2.get=function(){return this._structArray.int16[this._pos2+5]},q.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},q.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},q.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},q.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(O.prototype,q),O}(_s);xe.prototype.size=20;var ke=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.get=function(q){return new xe(this,q)},O}(il);Qr("CollisionBoxArray",ke);var Ce=function(A){function O(){A.apply(this,arguments)}A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O;var q={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return q.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},q.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},q.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},q.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},q.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},q.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},q.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},q.segment.get=function(){return this._structArray.uint16[this._pos2+10]},q.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},q.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},q.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},q.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},q.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},q.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},q.placedOrientation.set=function(ne){this._structArray.uint8[this._pos1+37]=ne},q.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},q.hidden.set=function(ne){this._structArray.uint8[this._pos1+38]=ne},q.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},q.crossTileID.set=function(ne){this._structArray.uint32[this._pos4+10]=ne},q.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(O.prototype,q),O}(_s);Ce.prototype.size=48;var Ue=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.get=function(q){return new Ce(this,q)},O}(al);Qr("PlacedSymbolArray",Ue);var $e=function(A){function O(){A.apply(this,arguments)}A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O;var q={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return q.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},q.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},q.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},q.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},q.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},q.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},q.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},q.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},q.key.get=function(){return this._structArray.uint16[this._pos2+8]},q.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},q.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},q.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},q.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},q.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},q.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},q.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},q.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},q.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},q.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},q.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},q.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},q.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},q.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},q.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},q.crossTileID.set=function(ne){this._structArray.uint32[this._pos4+12]=ne},q.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},q.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},q.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},q.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(O.prototype,q),O}(_s);$e.prototype.size=68;var at=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.get=function(q){return new $e(this,q)},O}(ol);Qr("SymbolInstanceArray",at);var kt=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.getoffsetX=function(q){return this.float32[1*q+0]},O}(ce);Qr("GlyphOffsetArray",kt);var Pt=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.getx=function(q){return this.int16[3*q+0]},O.prototype.gety=function(q){return this.int16[3*q+1]},O.prototype.gettileUnitDistanceFromAnchor=function(q){return this.int16[3*q+2]},O}(L);Qr("SymbolLineVertexArray",Pt);var St=function(A){function O(){A.apply(this,arguments)}A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O;var q={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return q.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},q.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},q.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(O.prototype,q),O}(_s);St.prototype.size=8;var Et=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.get=function(q){return new St(this,q)},O}(z);Qr("FeatureIndexArray",Et);var wt=ha([{name:"a_pos",components:2,type:"Int16"}],4).members,jt=function(A){void 0===A&&(A=[]),this.segments=A};function Nt(A,O){return 256*(A=h(Math.floor(A),0,255))+h(Math.floor(O),0,255)}jt.prototype.prepareSegment=function(A,O,q,ne){var me=this.segments[this.segments.length-1];return A>jt.MAX_VERTEX_ARRAY_LENGTH&&M("Max vertices per segment is "+jt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+A),(!me||me.vertexLength+A>jt.MAX_VERTEX_ARRAY_LENGTH||me.sortKey!==ne)&&(me={vertexOffset:O.length,primitiveOffset:q.length,vertexLength:0,primitiveLength:0},void 0!==ne&&(me.sortKey=ne),this.segments.push(me)),me},jt.prototype.get=function(){return this.segments},jt.prototype.destroy=function(){for(var A=0,O=this.segments;A<O.length;A+=1){var q=O[A];for(var ne in q.vaos)q.vaos[ne].destroy()}},jt.simpleSegment=function(A,O,q,ne){return new jt([{vertexOffset:A,primitiveOffset:O,vertexLength:q,primitiveLength:ne,vaos:{},sortKey:0}])},jt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Qr("SegmentVector",jt);var Gt=ha([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),lr=n(function(A){A.exports=function(O,q){var ne,me,_e,Le,Ne,et,pt,vt;for(me=O.length-(ne=3&O.length),_e=q,Ne=3432918353,et=461845907,vt=0;vt<me;)pt=255&O.charCodeAt(vt)|(255&O.charCodeAt(++vt))<<8|(255&O.charCodeAt(++vt))<<16|(255&O.charCodeAt(++vt))<<24,++vt,_e=27492+(65535&(Le=5*(65535&(_e=(_e^=pt=(65535&(pt=(pt=(65535&pt)*Ne+(((pt>>>16)*Ne&65535)<<16)&4294967295)<<15|pt>>>17))*et+(((pt>>>16)*et&65535)<<16)&4294967295)<<13|_e>>>19))+((5*(_e>>>16)&65535)<<16)&4294967295))+((58964+(Le>>>16)&65535)<<16);switch(pt=0,ne){case 3:pt^=(255&O.charCodeAt(vt+2))<<16;case 2:pt^=(255&O.charCodeAt(vt+1))<<8;case 1:_e^=pt=(65535&(pt=(pt=(65535&(pt^=255&O.charCodeAt(vt)))*Ne+(((pt>>>16)*Ne&65535)<<16)&4294967295)<<15|pt>>>17))*et+(((pt>>>16)*et&65535)<<16)&4294967295}return _e^=O.length,_e=2246822507*(65535&(_e^=_e>>>16))+((2246822507*(_e>>>16)&65535)<<16)&4294967295,_e=3266489909*(65535&(_e^=_e>>>13))+((3266489909*(_e>>>16)&65535)<<16)&4294967295,(_e^=_e>>>16)>>>0}}),yr=n(function(A){A.exports=function(O,q){for(var ne,me=O.length,_e=q^me,Le=0;me>=4;)ne=1540483477*(65535&(ne=255&O.charCodeAt(Le)|(255&O.charCodeAt(++Le))<<8|(255&O.charCodeAt(++Le))<<16|(255&O.charCodeAt(++Le))<<24))+((1540483477*(ne>>>16)&65535)<<16),_e=1540483477*(65535&_e)+((1540483477*(_e>>>16)&65535)<<16)^(ne=1540483477*(65535&(ne^=ne>>>24))+((1540483477*(ne>>>16)&65535)<<16)),me-=4,++Le;switch(me){case 3:_e^=(255&O.charCodeAt(Le+2))<<16;case 2:_e^=(255&O.charCodeAt(Le+1))<<8;case 1:_e=1540483477*(65535&(_e^=255&O.charCodeAt(Le)))+((1540483477*(_e>>>16)&65535)<<16)}return _e=1540483477*(65535&(_e^=_e>>>13))+((1540483477*(_e>>>16)&65535)<<16),(_e^=_e>>>15)>>>0}}),Or=lr,tn=yr;Or.murmur3=lr,Or.murmur2=tn;var en=function(){this.ids=[],this.positions=[],this.indexed=!1};en.prototype.add=function(A,O,q,ne){this.ids.push(pn(A)),this.positions.push(O,q,ne)},en.prototype.getPositions=function(A){for(var O=pn(A),q=0,ne=this.ids.length-1;q<ne;){var me=q+ne>>1;this.ids[me]>=O?ne=me:q=me+1}for(var _e=[];this.ids[q]===O;)_e.push({index:this.positions[3*q],start:this.positions[3*q+1],end:this.positions[3*q+2]}),q++;return _e},en.serialize=function(A,O){var q=new Float64Array(A.ids),ne=new Uint32Array(A.positions);return function me(_e,Le,Ne,et){for(;Ne<et;){for(var pt=_e[Ne+et>>1],vt=Ne-1,Vt=et+1;;){do{vt++}while(_e[vt]<pt);do{Vt--}while(_e[Vt]>pt);if(vt>=Vt)break;Yn(_e,vt,Vt),Yn(Le,3*vt,3*Vt),Yn(Le,3*vt+1,3*Vt+1),Yn(Le,3*vt+2,3*Vt+2)}Vt-Ne<et-Vt?(me(_e,Le,Ne,Vt),Ne=Vt+1):(me(_e,Le,Vt+1,et),et=Vt)}}(q,ne,0,q.length-1),O&&O.push(q.buffer,ne.buffer),{ids:q,positions:ne}},en.deserialize=function(A){var O=new en;return O.ids=A.ids,O.positions=A.positions,O.indexed=!0,O};var yn=Math.pow(2,53)-1;function pn(A){var O=+A;return!isNaN(O)&&O<=yn?O:Or(String(A))}function Yn(A,O,q){var ne=A[O];A[O]=A[q],A[q]=ne}Qr("FeaturePositionMap",en);var ti=function(A,O){this.gl=A.gl,this.location=O},gi=function(A){function O(q,ne){A.call(this,q,ne),this.current=0}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.set=function(q){this.current!==q&&(this.current=q,this.gl.uniform1i(this.location,q))},O}(ti),Jr=function(A){function O(q,ne){A.call(this,q,ne),this.current=0}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.set=function(q){this.current!==q&&(this.current=q,this.gl.uniform1f(this.location,q))},O}(ti),In=function(A){function O(q,ne){A.call(this,q,ne),this.current=[0,0]}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.set=function(q){q[0]===this.current[0]&&q[1]===this.current[1]||(this.current=q,this.gl.uniform2f(this.location,q[0],q[1]))},O}(ti),ri=function(A){function O(q,ne){A.call(this,q,ne),this.current=[0,0,0]}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.set=function(q){q[0]===this.current[0]&&q[1]===this.current[1]&&q[2]===this.current[2]||(this.current=q,this.gl.uniform3f(this.location,q[0],q[1],q[2]))},O}(ti),Jn=function(A){function O(q,ne){A.call(this,q,ne),this.current=[0,0,0,0]}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.set=function(q){q[0]===this.current[0]&&q[1]===this.current[1]&&q[2]===this.current[2]&&q[3]===this.current[3]||(this.current=q,this.gl.uniform4f(this.location,q[0],q[1],q[2],q[3]))},O}(ti),ui=function(A){function O(q,ne){A.call(this,q,ne),this.current=tr.transparent}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.set=function(q){q.r===this.current.r&&q.g===this.current.g&&q.b===this.current.b&&q.a===this.current.a||(this.current=q,this.gl.uniform4f(this.location,q.r,q.g,q.b,q.a))},O}(ti),yi=new Float32Array(16),Oi=function(A){function O(q,ne){A.call(this,q,ne),this.current=yi}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.set=function(q){if(q[12]!==this.current[12]||q[0]!==this.current[0])return this.current=q,void this.gl.uniformMatrix4fv(this.location,!1,q);for(var ne=1;ne<16;ne++)if(q[ne]!==this.current[ne]){this.current=q,this.gl.uniformMatrix4fv(this.location,!1,q);break}},O}(ti);function ai(A){return[Nt(255*A.r,255*A.g),Nt(255*A.b,255*A.a)]}var Mi=function(A,O,q){this.value=A,this.uniformNames=O.map(function(ne){return"u_"+ne}),this.type=q};Mi.prototype.setUniform=function(A,O,q){A.set(q.constantOr(this.value))},Mi.prototype.getBinding=function(A,O,q){return"color"===this.type?new ui(A,O):new Jr(A,O)};var wi=function(A,O){this.uniformNames=O.map(function(q){return"u_"+q}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};wi.prototype.setConstantPatternPositions=function(A,O){this.pixelRatioFrom=O.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=O.tlbr,this.patternTo=A.tlbr},wi.prototype.setUniform=function(A,O,q,ne){var me="u_pattern_to"===ne?this.patternTo:"u_pattern_from"===ne?this.patternFrom:"u_pixel_ratio_to"===ne?this.pixelRatioTo:"u_pixel_ratio_from"===ne?this.pixelRatioFrom:null;me&&A.set(me)},wi.prototype.getBinding=function(A,O,q){return"u_pattern"===q.substr(0,9)?new Jn(A,O):new Jr(A,O)};var Ri=function(A,O,q,ne){this.expression=A,this.type=q,this.maxValue=0,this.paintVertexAttributes=O.map(function(me){return{name:"a_"+me,type:"Float32",components:"color"===q?2:1,offset:0}}),this.paintVertexArray=new ne};Ri.prototype.populatePaintArray=function(A,O,q,ne,me){var _e=this.paintVertexArray.length,Le=this.expression.evaluate(new fa(0),O,{},ne,[],me);this.paintVertexArray.resize(A),this._setPaintValue(_e,A,Le)},Ri.prototype.updatePaintArray=function(A,O,q,ne){var me=this.expression.evaluate({zoom:0},q,ne);this._setPaintValue(A,O,me)},Ri.prototype._setPaintValue=function(A,O,q){if("color"===this.type)for(var ne=ai(q),me=A;me<O;me++)this.paintVertexArray.emplace(me,ne[0],ne[1]);else{for(var _e=A;_e<O;_e++)this.paintVertexArray.emplace(_e,q);this.maxValue=Math.max(this.maxValue,Math.abs(q))}},Ri.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ri.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Si=function(A,O,q,ne,me,_e){this.expression=A,this.uniformNames=O.map(function(Le){return"u_"+Le+"_t"}),this.type=q,this.useIntegerZoom=ne,this.zoom=me,this.maxValue=0,this.paintVertexAttributes=O.map(function(Le){return{name:"a_"+Le,type:"Float32",components:"color"===q?4:2,offset:0}}),this.paintVertexArray=new _e};Si.prototype.populatePaintArray=function(A,O,q,ne,me){var _e=this.expression.evaluate(new fa(this.zoom),O,{},ne,[],me),Le=this.expression.evaluate(new fa(this.zoom+1),O,{},ne,[],me),Ne=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(Ne,A,_e,Le)},Si.prototype.updatePaintArray=function(A,O,q,ne){var me=this.expression.evaluate({zoom:this.zoom},q,ne),_e=this.expression.evaluate({zoom:this.zoom+1},q,ne);this._setPaintValue(A,O,me,_e)},Si.prototype._setPaintValue=function(A,O,q,ne){if("color"===this.type)for(var me=ai(q),_e=ai(ne),Le=A;Le<O;Le++)this.paintVertexArray.emplace(Le,me[0],me[1],_e[0],_e[1]);else{for(var Ne=A;Ne<O;Ne++)this.paintVertexArray.emplace(Ne,q,ne);this.maxValue=Math.max(this.maxValue,Math.abs(q),Math.abs(ne))}},Si.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Si.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Si.prototype.setUniform=function(A,O){var q=this.useIntegerZoom?Math.floor(O.zoom):O.zoom,ne=h(this.expression.interpolationFactor(q,this.zoom,this.zoom+1),0,1);A.set(ne)},Si.prototype.getBinding=function(A,O,q){return new Jr(A,O)};var Fi=function(A,O,q,ne,me,_e){this.expression=A,this.type=O,this.useIntegerZoom=q,this.zoom=ne,this.layerId=_e,this.zoomInPaintVertexArray=new me,this.zoomOutPaintVertexArray=new me};Fi.prototype.populatePaintArray=function(A,O,q){var ne=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(ne,A,O.patterns&&O.patterns[this.layerId],q)},Fi.prototype.updatePaintArray=function(A,O,q,ne,me){this._setPaintValues(A,O,q.patterns&&q.patterns[this.layerId],me)},Fi.prototype._setPaintValues=function(A,O,q,ne){if(ne&&q){var Ne=ne[q.min],et=ne[q.mid],pt=ne[q.max];if(Ne&&et&&pt)for(var vt=A;vt<O;vt++)this.zoomInPaintVertexArray.emplace(vt,et.tl[0],et.tl[1],et.br[0],et.br[1],Ne.tl[0],Ne.tl[1],Ne.br[0],Ne.br[1],et.pixelRatio,Ne.pixelRatio),this.zoomOutPaintVertexArray.emplace(vt,et.tl[0],et.tl[1],et.br[0],et.br[1],pt.tl[0],pt.tl[1],pt.br[0],pt.br[1],et.pixelRatio,pt.pixelRatio)}},Fi.prototype.upload=function(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,Gt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,Gt.members,this.expression.isStateDependent))},Fi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Xi=function(A,O,q,ne){this.binders={},this.layoutAttributes=ne,this._buffers=[];var me=[];for(var _e in A.paint._values)if(q(_e)){var Le=A.paint.get(_e);if(Le instanceof Va&&So(Le.property.specification)){var Ne=Fa(_e,A.type),et=Le.value,pt=Le.property.specification.type,vt=Le.property.useIntegerZoom,Vt=Le.property.specification["property-type"],Qt="cross-faded"===Vt||"cross-faded-data-driven"===Vt;if("constant"===et.kind)this.binders[_e]=Qt?new wi(et.value,Ne):new Mi(et.value,Ne,pt),me.push("/u_"+_e);else if("source"===et.kind||Qt){var Wt=Ba(_e,pt,"source");this.binders[_e]=Qt?new Fi(et,pt,vt,O,Wt,A.id):new Ri(et,Ne,pt,Wt),me.push("/a_"+_e)}else{var ur=Ba(_e,pt,"composite");this.binders[_e]=new Si(et,Ne,pt,vt,O,ur),me.push("/z_"+_e)}}}this.cacheKey=me.sort().join("")};Xi.prototype.getMaxValue=function(A){var O=this.binders[A];return O instanceof Ri||O instanceof Si?O.maxValue:0},Xi.prototype.populatePaintArrays=function(A,O,q,ne,me){for(var _e in this.binders){var Le=this.binders[_e];(Le instanceof Ri||Le instanceof Si||Le instanceof Fi)&&Le.populatePaintArray(A,O,q,ne,me)}},Xi.prototype.setConstantPatternPositions=function(A,O){for(var q in this.binders){var ne=this.binders[q];ne instanceof wi&&ne.setConstantPatternPositions(A,O)}},Xi.prototype.updatePaintArrays=function(A,O,q,ne,me){var _e=!1;for(var Le in A)for(var Ne=0,et=O.getPositions(Le);Ne<et.length;Ne+=1){var pt=et[Ne],vt=q.feature(pt.index);for(var Vt in this.binders){var Qt=this.binders[Vt];if((Qt instanceof Ri||Qt instanceof Si||Qt instanceof Fi)&&!0===Qt.expression.isStateDependent){var Wt=ne.paint.get(Vt);Qt.expression=Wt.value,Qt.updatePaintArray(pt.start,pt.end,vt,A[Le],me),_e=!0}}}return _e},Xi.prototype.defines=function(){var A=[];for(var O in this.binders){var q=this.binders[O];(q instanceof Mi||q instanceof wi)&&A.push.apply(A,q.uniformNames.map(function(ne){return"#define HAS_UNIFORM_"+ne}))}return A},Xi.prototype.getPaintVertexBuffers=function(){return this._buffers},Xi.prototype.getUniforms=function(A,O){var q=[];for(var ne in this.binders){var me=this.binders[ne];if(me instanceof Mi||me instanceof wi||me instanceof Si)for(var _e=0,Le=me.uniformNames;_e<Le.length;_e+=1){var Ne=Le[_e];if(O[Ne]){var et=me.getBinding(A,O[Ne],Ne);q.push({name:Ne,property:ne,binding:et})}}}return q},Xi.prototype.setUniforms=function(A,O,q,ne){for(var me=0,_e=O;me<_e.length;me+=1){var Le=_e[me],Ne=Le.name,et=Le.property;this.binders[et].setUniform(Le.binding,ne,q.get(et),Ne)}},Xi.prototype.updatePaintBuffers=function(A){for(var O in this._buffers=[],this.binders){var q=this.binders[O];if(A&&q instanceof Fi){var ne=2===A.fromScale?q.zoomInPaintVertexBuffer:q.zoomOutPaintVertexBuffer;ne&&this._buffers.push(ne)}else(q instanceof Ri||q instanceof Si)&&q.paintVertexBuffer&&this._buffers.push(q.paintVertexBuffer)}},Xi.prototype.upload=function(A){for(var O in this.binders){var q=this.binders[O];(q instanceof Ri||q instanceof Si||q instanceof Fi)&&q.upload(A)}this.updatePaintBuffers()},Xi.prototype.destroy=function(){for(var A in this.binders){var O=this.binders[A];(O instanceof Ri||O instanceof Si||O instanceof Fi)&&O.destroy()}};var ya=function(A,O,q,ne){void 0===ne&&(ne=function(){return!0}),this.programConfigurations={};for(var me=0,_e=O;me<_e.length;me+=1){var Le=_e[me];this.programConfigurations[Le.id]=new Xi(Le,q,ne,A)}this.needsUpload=!1,this._featureMap=new en,this._bufferOffset=0};function Fa(A,O){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(O+"-","").replace(/-/g,"_")]}function Ba(A,O,q){var me={"line-pattern":{source:xs,composite:xs},"fill-pattern":{source:xs,composite:xs},"fill-extrusion-pattern":{source:xs,composite:xs}}[A];return me&&me[q]||{color:{source:ie,composite:fe},number:{source:ce,composite:ie}}[O][q]}ya.prototype.populatePaintArrays=function(A,O,q,ne,me,_e){for(var Le in this.programConfigurations)this.programConfigurations[Le].populatePaintArrays(A,O,ne,me,_e);void 0!==O.id&&this._featureMap.add(O.id,q,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0},ya.prototype.updatePaintArrays=function(A,O,q,ne){for(var me=0,_e=q;me<_e.length;me+=1){var Le=_e[me];this.needsUpload=this.programConfigurations[Le.id].updatePaintArrays(A,this._featureMap,O,Le,ne)||this.needsUpload}},ya.prototype.get=function(A){return this.programConfigurations[A]},ya.prototype.upload=function(A){if(this.needsUpload){for(var O in this.programConfigurations)this.programConfigurations[O].upload(A);this.needsUpload=!1}},ya.prototype.destroy=function(){for(var A in this.programConfigurations)this.programConfigurations[A].destroy()},Qr("ConstantBinder",Mi),Qr("CrossFadedConstantBinder",wi),Qr("SourceExpressionBinder",Ri),Qr("CrossFadedCompositeBinder",Fi),Qr("CompositeExpressionBinder",Si),Qr("ProgramConfiguration",Xi,{omit:["_buffers"]}),Qr("ProgramConfigurationSet",ya);var La=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function Ta(A){for(var O=8192/A.extent,q=A.loadGeometry(),ne=0;ne<q.length;ne++)for(var me=q[ne],_e=0;_e<me.length;_e++){var Le=me[_e];Le.x=Math.round(Le.x*O),Le.y=Math.round(Le.y*O),(Le.x<La.min||Le.x>La.max||Le.y<La.min||Le.y>La.max)&&(M("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Le.x=h(Le.x,La.min,La.max),Le.y=h(Le.y,La.min,La.max))}return q}function _o(A,O,q,ne,me){A.emplaceBack(2*O+(ne+1)/2,2*q+(me+1)/2)}var $a=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new fs,this.indexArray=new oo,this.segments=new jt,this.programConfigurations=new ya(wt,A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function Bo(A,O){for(var q=0;q<A.length;q++)if(ns(O,A[q]))return!0;for(var ne=0;ne<O.length;ne++)if(ns(A,O[ne]))return!0;return!!Js(A,O)}function bs(A,O,q){return!!ns(A,O)||!!wo(O,A,q)}function Rs(A,O){if(1===A.length)return ll(O,A[0]);for(var q=0;q<O.length;q++)for(var ne=O[q],me=0;me<ne.length;me++)if(ns(A,ne[me]))return!0;for(var _e=0;_e<A.length;_e++)if(ll(O,A[_e]))return!0;for(var Le=0;Le<O.length;Le++)if(Js(A,O[Le]))return!0;return!1}function sl(A,O,q){if(A.length>1){if(Js(A,O))return!0;for(var ne=0;ne<O.length;ne++)if(wo(O[ne],A,q))return!0}for(var me=0;me<A.length;me++)if(wo(A[me],O,q))return!0;return!1}function Js(A,O){if(0===A.length||0===O.length)return!1;for(var q=0;q<A.length-1;q++)for(var ne=A[q],me=A[q+1],_e=0;_e<O.length-1;_e++)if(Ks(ne,me,O[_e],O[_e+1]))return!0;return!1}function Ks(A,O,q,ne){return I(A,q,ne)!==I(O,q,ne)&&I(A,O,q)!==I(A,O,ne)}function wo(A,O,q){var ne=q*q;if(1===O.length)return A.distSqr(O[0])<ne;for(var me=1;me<O.length;me++)if(Vs(A,O[me-1],O[me])<ne)return!0;return!1}function Vs(A,O,q){var ne=O.distSqr(q);if(0===ne)return A.distSqr(O);var me=((A.x-O.x)*(q.x-O.x)+(A.y-O.y)*(q.y-O.y))/ne;return A.distSqr(me<0?O:me>1?q:q.sub(O)._mult(me)._add(O))}function ll(A,O){for(var q,ne,me,_e=!1,Le=0;Le<A.length;Le++)for(var Ne=0,et=(q=A[Le]).length-1;Ne<q.length;et=Ne++)(ne=q[Ne]).y>O.y!=(me=q[et]).y>O.y&&O.x<(me.x-ne.x)*(O.y-ne.y)/(me.y-ne.y)+ne.x&&(_e=!_e);return _e}function ns(A,O){for(var q=!1,ne=0,me=A.length-1;ne<A.length;me=ne++){var _e=A[ne],Le=A[me];_e.y>O.y!=Le.y>O.y&&O.x<(Le.x-_e.x)*(O.y-_e.y)/(Le.y-_e.y)+_e.x&&(q=!q)}return q}function cl(A,O,q){var ne=q[0],me=q[2];if(A.x<ne.x&&O.x<ne.x||A.x>me.x&&O.x>me.x||A.y<ne.y&&O.y<ne.y||A.y>me.y&&O.y>me.y)return!1;var _e=I(A,O,q[0]);return _e!==I(A,O,q[1])||_e!==I(A,O,q[2])||_e!==I(A,O,q[3])}function Pa(A,O,q){var ne=O.paint.get(A).value;return"constant"===ne.kind?ne.value:q.programConfigurations.get(O.id).getMaxValue(A)}function Oo(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function Do(A,O,q,ne,me){if(!O[0]&&!O[1])return A;var _e=r.convert(O)._mult(me);"viewport"===q&&_e._rotate(-ne);for(var Le=[],Ne=0;Ne<A.length;Ne++)Le.push(A[Ne].sub(_e));return Le}$a.prototype.populate=function(A,O,q){var ne=this.layers[0],me=[],_e=null;"circle"===ne.type&&(_e=ne.layout.get("circle-sort-key"));for(var Le=0,Ne=A;Le<Ne.length;Le+=1){var et=Ne[Le],pt=et.feature,vt=et.id,Vt=et.index,Qt=et.sourceLayerIndex,Wt=this.layers[0]._featureFilter.needGeometry,ur={type:pt.type,id:vt,properties:pt.properties,geometry:Wt?Ta(pt):[]};if(this.layers[0]._featureFilter.filter(new fa(this.zoom),ur,q)){Wt||(ur.geometry=Ta(pt));var Tr=_e?_e.evaluate(ur,{},q):void 0;me.push({id:vt,properties:pt.properties,type:pt.type,sourceLayerIndex:Qt,index:Vt,geometry:ur.geometry,patterns:{},sortKey:Tr})}}_e&&me.sort(function($n,hi){return $n.sortKey-hi.sortKey});for(var Dr=0,qr=me;Dr<qr.length;Dr+=1){var Yr=qr[Dr],vn=Yr.geometry,Sn=Yr.index,Gn=Yr.sourceLayerIndex,Hn=A[Sn].feature;this.addFeature(Yr,vn,Sn,q),O.featureIndex.insert(Hn,vn,Sn,Gn,this.index)}},$a.prototype.update=function(A,O,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,O,this.stateDependentLayers,q)},$a.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},$a.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},$a.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,wt),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},$a.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},$a.prototype.addFeature=function(A,O,q,ne){for(var me=0,_e=O;me<_e.length;me+=1)for(var Le=0,Ne=_e[me];Le<Ne.length;Le+=1){var et=Ne[Le],pt=et.x,vt=et.y;if(!(pt<0||pt>=8192||vt<0||vt>=8192)){var Vt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,A.sortKey),Qt=Vt.vertexLength;_o(this.layoutVertexArray,pt,vt,-1,-1),_o(this.layoutVertexArray,pt,vt,1,-1),_o(this.layoutVertexArray,pt,vt,1,1),_o(this.layoutVertexArray,pt,vt,-1,1),this.indexArray.emplaceBack(Qt,Qt+1,Qt+2),this.indexArray.emplaceBack(Qt,Qt+3,Qt+2),Vt.vertexLength+=4,Vt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,q,{},ne)},Qr("CircleBucket",$a,{omit:["layers"]});var yl=new Io({"circle-sort-key":new Ai(be.layout_circle["circle-sort-key"])}),Xc={paint:new Io({"circle-radius":new Ai(be.paint_circle["circle-radius"]),"circle-color":new Ai(be.paint_circle["circle-color"]),"circle-blur":new Ai(be.paint_circle["circle-blur"]),"circle-opacity":new Ai(be.paint_circle["circle-opacity"]),"circle-translate":new mi(be.paint_circle["circle-translate"]),"circle-translate-anchor":new mi(be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mi(be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mi(be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ai(be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ai(be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ai(be.paint_circle["circle-stroke-opacity"])}),layout:yl},Zo=typeof Float32Array<"u"?Float32Array:Array;function Gl(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function ul(A,O,q){var ne=O[0],me=O[1],_e=O[2],Le=O[3],Ne=O[4],et=O[5],pt=O[6],vt=O[7],Vt=O[8],Qt=O[9],Wt=O[10],ur=O[11],Tr=O[12],Rr=O[13],Dr=O[14],qr=O[15],Yr=q[0],Kr=q[1],vn=q[2],Sn=q[3];return A[0]=Yr*ne+Kr*Ne+vn*Vt+Sn*Tr,A[1]=Yr*me+Kr*et+vn*Qt+Sn*Rr,A[2]=Yr*_e+Kr*pt+vn*Wt+Sn*Dr,A[3]=Yr*Le+Kr*vt+vn*ur+Sn*qr,A[4]=(Yr=q[4])*ne+(Kr=q[5])*Ne+(vn=q[6])*Vt+(Sn=q[7])*Tr,A[5]=Yr*me+Kr*et+vn*Qt+Sn*Rr,A[6]=Yr*_e+Kr*pt+vn*Wt+Sn*Dr,A[7]=Yr*Le+Kr*vt+vn*ur+Sn*qr,A[8]=(Yr=q[8])*ne+(Kr=q[9])*Ne+(vn=q[10])*Vt+(Sn=q[11])*Tr,A[9]=Yr*me+Kr*et+vn*Qt+Sn*Rr,A[10]=Yr*_e+Kr*pt+vn*Wt+Sn*Dr,A[11]=Yr*Le+Kr*vt+vn*ur+Sn*qr,A[12]=(Yr=q[12])*ne+(Kr=q[13])*Ne+(vn=q[14])*Vt+(Sn=q[15])*Tr,A[13]=Yr*me+Kr*et+vn*Qt+Sn*Rr,A[14]=Yr*_e+Kr*pt+vn*Wt+Sn*Dr,A[15]=Yr*Le+Kr*vt+vn*ur+Sn*qr,A}Math.hypot||(Math.hypot=function(){for(var A=arguments,O=0,q=arguments.length;q--;)O+=A[q]*A[q];return Math.sqrt(O)});var Fs,O,Jc=ul;function $s(A,O,q){var ne=O[0],me=O[1],_e=O[2],Le=O[3];return A[0]=q[0]*ne+q[4]*me+q[8]*_e+q[12]*Le,A[1]=q[1]*ne+q[5]*me+q[9]*_e+q[13]*Le,A[2]=q[2]*ne+q[6]*me+q[10]*_e+q[14]*Le,A[3]=q[3]*ne+q[7]*me+q[11]*_e+q[15]*Le,A}Fs=new Zo(3),Zo!=Float32Array&&(Fs[0]=0,Fs[1]=0,Fs[2]=0),O=new Zo(4),Zo!=Float32Array&&(O[0]=0,O[1]=0,O[2]=0,O[3]=0);var ch=(function(){var O=new Zo(2);Zo!=Float32Array&&(O[0]=0,O[1]=0)}(),function(A){function O(q){A.call(this,q,Xc)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.createBucket=function(q){return new $a(q)},O.prototype.queryRadius=function(q){var ne=q;return Pa("circle-radius",this,ne)+Pa("circle-stroke-width",this,ne)+Oo(this.paint.get("circle-translate"))},O.prototype.queryIntersectsFeature=function(q,ne,me,_e,Le,Ne,et,pt){for(var vt=Do(q,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ne.angle,et),Vt=this.paint.get("circle-radius").evaluate(ne,me)+this.paint.get("circle-stroke-width").evaluate(ne,me),Qt="map"===this.paint.get("circle-pitch-alignment"),Wt=Qt?vt:function(Gn,Hn){return Gn.map(function($n){return zu($n,Hn)})}(vt,pt),ur=Qt?Vt*et:Vt,Tr=0,Rr=_e;Tr<Rr.length;Tr+=1)for(var Dr=0,qr=Rr[Tr];Dr<qr.length;Dr+=1){var Yr=qr[Dr],Kr=Qt?Yr:zu(Yr,pt),vn=ur,Sn=$s([],[Yr.x,Yr.y,0,1],pt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?vn*=Sn[3]/Ne.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(vn*=Ne.cameraToCenterDistance/Sn[3]),bs(Wt,Kr,vn))return!0}return!1},O}(Ho));function zu(A,O){var q=$s([],[A.x,A.y,0,1],O);return new r(q[0]/q[3],q[1]/q[3])}var Ru=function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O}($a);function Qc(A,O,q,ne){var me=O.width,_e=O.height;if(ne){if(ne instanceof Uint8ClampedArray)ne=new Uint8Array(ne.buffer);else if(ne.length!==me*_e*q)throw new RangeError("mismatched image size")}else ne=new Uint8Array(me*_e*q);return A.width=me,A.height=_e,A.data=ne,A}function Fu(A,O,q){var ne=O.width,me=O.height;if(ne!==A.width||me!==A.height){var _e=Qc({},{width:ne,height:me},q);eu(A,_e,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,ne),height:Math.min(A.height,me)},q),A.width=ne,A.height=me,A.data=_e.data}}function eu(A,O,q,ne,me,_e){if(0===me.width||0===me.height)return O;if(me.width>A.width||me.height>A.height||q.x>A.width-me.width||q.y>A.height-me.height)throw new RangeError("out of range source coordinates for image copy");if(me.width>O.width||me.height>O.height||ne.x>O.width-me.width||ne.y>O.height-me.height)throw new RangeError("out of range destination coordinates for image copy");for(var Le=A.data,Ne=O.data,et=0;et<me.height;et++)for(var pt=((q.y+et)*A.width+q.x)*_e,vt=((ne.y+et)*O.width+ne.x)*_e,Vt=0;Vt<me.width*_e;Vt++)Ne[vt+Vt]=Le[pt+Vt];return O}Qr("HeatmapBucket",Ru,{omit:["layers"]});var fl=function(A,O){Qc(this,A,1,O)};fl.prototype.resize=function(A){Fu(this,A,1)},fl.prototype.clone=function(){return new fl({width:this.width,height:this.height},new Uint8Array(this.data))},fl.copy=function(A,O,q,ne,me){eu(A,O,q,ne,me,1)};var Wo=function(A,O){Qc(this,A,4,O)};Wo.prototype.resize=function(A){Fu(this,A,4)},Wo.prototype.replace=function(A,O){O?this.data.set(A):this.data=A instanceof Uint8ClampedArray?new Uint8Array(A.buffer):A},Wo.prototype.clone=function(){return new Wo({width:this.width,height:this.height},new Uint8Array(this.data))},Wo.copy=function(A,O,q,ne,me){eu(A,O,q,ne,me,4)},Qr("AlphaImage",fl),Qr("RGBAImage",Wo);var uh={paint:new Io({"heatmap-radius":new Ai(be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ai(be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mi(be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new rs(be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mi(be.paint_heatmap["heatmap-opacity"])})};function Bu(A,O){for(var q=new Uint8Array(1024),ne={},me=0,_e=0;me<256;me++,_e+=4){ne[O]=me/255;var Le=A.evaluate(ne);q[_e+0]=Math.floor(255*Le.r/Le.a),q[_e+1]=Math.floor(255*Le.g/Le.a),q[_e+2]=Math.floor(255*Le.b/Le.a),q[_e+3]=Math.floor(255*Le.a)}return new Wo({width:256,height:1},q)}var fh=function(A){function O(q){A.call(this,q,uh),this._updateColorRamp()}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.createBucket=function(q){return new Ru(q)},O.prototype._handleSpecialPaintPropertyUpdate=function(q){"heatmap-color"===q&&this._updateColorRamp()},O.prototype._updateColorRamp=function(){this.colorRamp=Bu(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},O.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},O}(Ho),hh={paint:new Io({"hillshade-illumination-direction":new mi(be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new mi(be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mi(be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mi(be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mi(be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mi(be.paint_hillshade["hillshade-accent-color"])})},ph=function(A){function O(q){A.call(this,q,hh)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},O}(Ho),Nu=ha([{name:"a_pos",components:2,type:"Int16"}],4).members,tu=hc,dh=hc;function hc(A,O,q){q=q||2;var ne,me,_e,Le,Ne,et,pt,vt=O&&O.length,Vt=vt?O[0]*q:A.length,Qt=ju(A,0,Vt,q,!0),Wt=[];if(!Qt||Qt.next===Qt.prev)return Wt;if(vt&&(Qt=function(Tr,Rr,Dr,qr){var Yr,Kr,Gn,Hn=[];for(Yr=0,Kr=Rr.length;Yr<Kr;Yr++)(Gn=ju(Tr,Rr[Yr]*qr,Yr<Kr-1?Rr[Yr+1]*qr:Tr.length,qr,!1))===Gn.next&&(Gn.steiner=!0),Hn.push(wh(Gn));for(Hn.sort(xh),Yr=0;Yr<Hn.length;Yr++)bh(Hn[Yr],Dr),Dr=Qs(Dr,Dr.next);return Dr}(A,O,Qt,q)),A.length>80*q){ne=_e=A[0],me=Le=A[1];for(var ur=q;ur<Vt;ur+=q)(Ne=A[ur])<ne&&(ne=Ne),(et=A[ur+1])<me&&(me=et),Ne>_e&&(_e=Ne),et>Le&&(Le=et);pt=0!==(pt=Math.max(_e-ne,Le-me))?1/pt:0}return ql(Qt,Wt,q,ne,me,pt),Wt}function ju(A,O,q,ne,me){var _e,Le;if(me===iu(A,O,q,ne)>0)for(_e=O;_e<q;_e+=ne)Le=Hu(_e,A[_e],A[_e+1],Le);else for(_e=q-ne;_e>=O;_e-=ne)Le=Hu(_e,A[_e],A[_e+1],Le);return Le&&pc(Le,Le.next)&&(Zl(Le),Le=Le.next),Le}function Qs(A,O){if(!A)return A;O||(O=A);var q,ne=A;do{if(q=!1,ne.steiner||!pc(ne,ne.next)&&0!==so(ne.prev,ne,ne.next))ne=ne.next;else{if(Zl(ne),(ne=O=ne.prev)===ne.next)break;q=!0}}while(q||ne!==O);return O}function ql(A,O,q,ne,me,_e,Le){if(A){!Le&&_e&&function(vt,Vt,Qt,Wt){var ur=vt;do{null===ur.z&&(ur.z=ru(ur.x,ur.y,Vt,Qt,Wt)),ur.prevZ=ur.prev,ur.nextZ=ur.next,ur=ur.next}while(ur!==vt);ur.prevZ.nextZ=null,ur.prevZ=null,function(Tr){var Rr,Dr,qr,Yr,Kr,vn,Sn,Gn,Hn=1;do{for(Dr=Tr,Tr=null,Kr=null,vn=0;Dr;){for(vn++,qr=Dr,Sn=0,Rr=0;Rr<Hn&&(Sn++,qr=qr.nextZ);Rr++);for(Gn=Hn;Sn>0||Gn>0&&qr;)0!==Sn&&(0===Gn||!qr||Dr.z<=qr.z)?(Yr=Dr,Dr=Dr.nextZ,Sn--):(Yr=qr,qr=qr.nextZ,Gn--),Kr?Kr.nextZ=Yr:Tr=Yr,Yr.prevZ=Kr,Kr=Yr;Dr=qr}Kr.nextZ=null,Hn*=2}while(vn>1)}(ur)}(A,ne,me,_e);for(var Ne,et,pt=A;A.prev!==A.next;)if(Ne=A.prev,et=A.next,_e?gh(A,ne,me,_e):mh(A))O.push(Ne.i/q),O.push(A.i/q),O.push(et.i/q),Zl(A),A=et.next,pt=et.next;else if((A=et)===pt){Le?1===Le?ql(A=vh(Qs(A),O,q),O,q,ne,me,_e,2):2===Le&&yh(A,O,q,ne,me,_e):ql(Qs(A),O,q,ne,me,_e,1);break}}}function mh(A){var O=A.prev,q=A,ne=A.next;if(so(O,q,ne)>=0)return!1;for(var me=A.next.next;me!==A.prev;){if(xl(O.x,O.y,q.x,q.y,ne.x,ne.y,me.x,me.y)&&so(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function gh(A,O,q,ne){var me=A.prev,_e=A,Le=A.next;if(so(me,_e,Le)>=0)return!1;for(var pt=me.x>_e.x?me.x>Le.x?me.x:Le.x:_e.x>Le.x?_e.x:Le.x,vt=me.y>_e.y?me.y>Le.y?me.y:Le.y:_e.y>Le.y?_e.y:Le.y,Vt=ru(me.x<_e.x?me.x<Le.x?me.x:Le.x:_e.x<Le.x?_e.x:Le.x,me.y<_e.y?me.y<Le.y?me.y:Le.y:_e.y<Le.y?_e.y:Le.y,O,q,ne),Qt=ru(pt,vt,O,q,ne),Wt=A.prevZ,ur=A.nextZ;Wt&&Wt.z>=Vt&&ur&&ur.z<=Qt;){if(Wt!==A.prev&&Wt!==A.next&&xl(me.x,me.y,_e.x,_e.y,Le.x,Le.y,Wt.x,Wt.y)&&so(Wt.prev,Wt,Wt.next)>=0||(Wt=Wt.prevZ,ur!==A.prev&&ur!==A.next&&xl(me.x,me.y,_e.x,_e.y,Le.x,Le.y,ur.x,ur.y)&&so(ur.prev,ur,ur.next)>=0))return!1;ur=ur.nextZ}for(;Wt&&Wt.z>=Vt;){if(Wt!==A.prev&&Wt!==A.next&&xl(me.x,me.y,_e.x,_e.y,Le.x,Le.y,Wt.x,Wt.y)&&so(Wt.prev,Wt,Wt.next)>=0)return!1;Wt=Wt.prevZ}for(;ur&&ur.z<=Qt;){if(ur!==A.prev&&ur!==A.next&&xl(me.x,me.y,_e.x,_e.y,Le.x,Le.y,ur.x,ur.y)&&so(ur.prev,ur,ur.next)>=0)return!1;ur=ur.nextZ}return!0}function vh(A,O,q){var ne=A;do{var me=ne.prev,_e=ne.next.next;!pc(me,_e)&&Vu(me,ne,ne.next,_e)&&Yl(me,_e)&&Yl(_e,me)&&(O.push(me.i/q),O.push(ne.i/q),O.push(_e.i/q),Zl(ne),Zl(ne.next),ne=A=_e),ne=ne.next}while(ne!==A);return Qs(ne)}function yh(A,O,q,ne,me,_e){var Le=A;do{for(var Ne=Le.next.next;Ne!==Le.prev;){if(Le.i!==Ne.i&&Th(Le,Ne)){var et=Uu(Le,Ne);return Le=Qs(Le,Le.next),et=Qs(et,et.next),ql(Le,O,q,ne,me,_e),void ql(et,O,q,ne,me,_e)}Ne=Ne.next}Le=Le.next}while(Le!==A)}function xh(A,O){return A.x-O.x}function bh(A,O){if(O=function(ne,me){var _e,Le=me,Ne=ne.x,et=ne.y,pt=-1/0;do{if(et<=Le.y&&et>=Le.next.y&&Le.next.y!==Le.y){var vt=Le.x+(et-Le.y)*(Le.next.x-Le.x)/(Le.next.y-Le.y);if(vt<=Ne&&vt>pt){if(pt=vt,vt===Ne){if(et===Le.y)return Le;if(et===Le.next.y)return Le.next}_e=Le.x<Le.next.x?Le:Le.next}}Le=Le.next}while(Le!==me);if(!_e)return null;if(Ne===pt)return _e;var Vt,Qt=_e,Wt=_e.x,ur=_e.y,Tr=1/0;Le=_e;do{Ne>=Le.x&&Le.x>=Wt&&Ne!==Le.x&&xl(et<ur?Ne:pt,et,Wt,ur,et<ur?pt:Ne,et,Le.x,Le.y)&&(Vt=Math.abs(et-Le.y)/(Ne-Le.x),Yl(Le,ne)&&(Vt<Tr||Vt===Tr&&(Le.x>_e.x||Le.x===_e.x&&_h(_e,Le)))&&(_e=Le,Tr=Vt)),Le=Le.next}while(Le!==Qt);return _e}(A,O)){var q=Uu(O,A);Qs(O,O.next),Qs(q,q.next)}}function _h(A,O){return so(A.prev,A,O.prev)<0&&so(O.next,A,A.next)<0}function ru(A,O,q,ne,me){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-q)*me)|A<<8))|A<<4))|A<<2))|A<<1))|(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-ne)*me)|O<<8))|O<<4))|O<<2))|O<<1))<<1}function wh(A){var O=A,q=A;do{(O.x<q.x||O.x===q.x&&O.y<q.y)&&(q=O),O=O.next}while(O!==A);return q}function xl(A,O,q,ne,me,_e,Le,Ne){return(me-Le)*(O-Ne)-(A-Le)*(_e-Ne)>=0&&(A-Le)*(ne-Ne)-(q-Le)*(O-Ne)>=0&&(q-Le)*(_e-Ne)-(me-Le)*(ne-Ne)>=0}function Th(A,O){return A.next.i!==O.i&&A.prev.i!==O.i&&!function(q,ne){var me=q;do{if(me.i!==q.i&&me.next.i!==q.i&&me.i!==ne.i&&me.next.i!==ne.i&&Vu(me,me.next,q,ne))return!0;me=me.next}while(me!==q);return!1}(A,O)&&(Yl(A,O)&&Yl(O,A)&&function(q,ne){var me=q,_e=!1,Le=(q.x+ne.x)/2,Ne=(q.y+ne.y)/2;do{me.y>Ne!=me.next.y>Ne&&me.next.y!==me.y&&Le<(me.next.x-me.x)*(Ne-me.y)/(me.next.y-me.y)+me.x&&(_e=!_e),me=me.next}while(me!==q);return _e}(A,O)&&(so(A.prev,A,O.prev)||so(A,O.prev,O))||pc(A,O)&&so(A.prev,A,A.next)>0&&so(O.prev,O,O.next)>0)}function so(A,O,q){return(O.y-A.y)*(q.x-O.x)-(O.x-A.x)*(q.y-O.y)}function pc(A,O){return A.x===O.x&&A.y===O.y}function Vu(A,O,q,ne){var me=mc(so(A,O,q)),_e=mc(so(A,O,ne)),Le=mc(so(q,ne,A)),Ne=mc(so(q,ne,O));return me!==_e&&Le!==Ne||!(0!==me||!dc(A,q,O))||!(0!==_e||!dc(A,ne,O))||!(0!==Le||!dc(q,A,ne))||!(0!==Ne||!dc(q,O,ne))}function dc(A,O,q){return O.x<=Math.max(A.x,q.x)&&O.x>=Math.min(A.x,q.x)&&O.y<=Math.max(A.y,q.y)&&O.y>=Math.min(A.y,q.y)}function mc(A){return A>0?1:A<0?-1:0}function Yl(A,O){return so(A.prev,A,A.next)<0?so(A,O,A.next)>=0&&so(A,A.prev,O)>=0:so(A,O,A.prev)<0||so(A,A.next,O)<0}function Uu(A,O){var q=new nu(A.i,A.x,A.y),ne=new nu(O.i,O.x,O.y),me=A.next,_e=O.prev;return A.next=O,O.prev=A,q.next=me,me.prev=q,ne.next=q,q.prev=ne,_e.next=ne,ne.prev=_e,ne}function Hu(A,O,q,ne){var me=new nu(A,O,q);return ne?(me.next=ne.next,me.prev=ne,ne.next.prev=me,ne.next=me):(me.prev=me,me.next=me),me}function Zl(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function nu(A,O,q){this.i=A,this.x=O,this.y=q,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function iu(A,O,q,ne){for(var me=0,_e=O,Le=q-ne;_e<q;_e+=ne)me+=(A[Le]-A[_e])*(A[_e+1]+A[Le+1]),Le=_e;return me}function kh(A,O,q,ne,me){!function _e(Le,Ne,et,pt,vt){for(;pt>et;){if(pt-et>600){var Vt=pt-et+1,Qt=Ne-et+1,Wt=Math.log(Vt),ur=.5*Math.exp(2*Wt/3),Tr=.5*Math.sqrt(Wt*ur*(Vt-ur)/Vt)*(Qt-Vt/2<0?-1:1);_e(Le,Ne,Math.max(et,Math.floor(Ne-Qt*ur/Vt+Tr)),Math.min(pt,Math.floor(Ne+(Vt-Qt)*ur/Vt+Tr)),vt)}var qr=Le[Ne],Yr=et,Kr=pt;for(Wl(Le,et,Ne),vt(Le[pt],qr)>0&&Wl(Le,et,pt);Yr<Kr;){for(Wl(Le,Yr,Kr),Yr++,Kr--;vt(Le[Yr],qr)<0;)Yr++;for(;vt(Le[Kr],qr)>0;)Kr--}0===vt(Le[et],qr)?Wl(Le,et,Kr):Wl(Le,++Kr,pt),Kr<=Ne&&(et=Kr+1),Ne<=Kr&&(pt=Kr-1)}}(A,O,q||0,ne||A.length-1,me||Ah)}function Wl(A,O,q){var ne=A[O];A[O]=A[q],A[q]=ne}function Ah(A,O){return A<O?-1:A>O?1:0}function au(A,O){var q=A.length;if(q<=1)return[A];for(var ne,me,_e=[],Le=0;Le<q;Le++){var Ne=P(A[Le]);0!==Ne&&(A[Le].area=Math.abs(Ne),void 0===me&&(me=Ne<0),me===Ne<0?(ne&&_e.push(ne),ne=[A[Le]]):ne.push(A[Le]))}if(ne&&_e.push(ne),O>1)for(var et=0;et<_e.length;et++)_e[et].length<=O||(kh(_e[et],O,1,_e[et].length-1,Mh),_e[et]=_e[et].slice(0,O));return _e}function Mh(A,O){return O.area-A.area}function ou(A,O,q){for(var ne=q.patternDependencies,me=!1,_e=0,Le=O;_e<Le.length;_e+=1){var Ne=Le[_e].paint.get(A+"-pattern");Ne.isConstant()||(me=!0);var et=Ne.constantOr(null);et&&(me=!0,ne[et.to]=!0,ne[et.from]=!0)}return me}function su(A,O,q,ne,me){for(var _e=me.patternDependencies,Le=0,Ne=O;Le<Ne.length;Le+=1){var et=Ne[Le],pt=et.paint.get(A+"-pattern").value;if("constant"!==pt.kind){var vt=pt.evaluate({zoom:ne-1},q,{},me.availableImages),Vt=pt.evaluate({zoom:ne},q,{},me.availableImages),Qt=pt.evaluate({zoom:ne+1},q,{},me.availableImages);Vt=Vt&&Vt.name?Vt.name:Vt,Qt=Qt&&Qt.name?Qt.name:Qt,_e[vt=vt&&vt.name?vt.name:vt]=!0,_e[Vt]=!0,_e[Qt]=!0,q.patterns[et.id]={min:vt,mid:Vt,max:Qt}}}return q}hc.deviation=function(A,O,q,ne){var me=O&&O.length,Le=Math.abs(iu(A,0,me?O[0]*q:A.length,q));if(me)for(var Ne=0,et=O.length;Ne<et;Ne++)Le-=Math.abs(iu(A,O[Ne]*q,Ne<et-1?O[Ne+1]*q:A.length,q));var Vt=0;for(Ne=0;Ne<ne.length;Ne+=3){var Qt=ne[Ne]*q,Wt=ne[Ne+1]*q,ur=ne[Ne+2]*q;Vt+=Math.abs((A[Qt]-A[ur])*(A[Wt+1]-A[Qt+1])-(A[Qt]-A[Wt])*(A[ur+1]-A[Qt+1]))}return 0===Le&&0===Vt?0:Math.abs((Vt-Le)/Le)},hc.flatten=function(A){for(var O=A[0][0].length,q={vertices:[],holes:[],dimensions:O},ne=0,me=0;me<A.length;me++){for(var _e=0;_e<A[me].length;_e++)for(var Le=0;Le<O;Le++)q.vertices.push(A[me][_e][Le]);me>0&&q.holes.push(ne+=A[me-1].length)}return q},tu.default=dh;var As=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new fs,this.indexArray=new oo,this.indexArray2=new F,this.programConfigurations=new ya(Nu,A.layers,A.zoom),this.segments=new jt,this.segments2=new jt,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};As.prototype.populate=function(A,O,q){this.hasPattern=ou("fill",this.layers,O);for(var ne=this.layers[0].layout.get("fill-sort-key"),me=[],_e=0,Le=A;_e<Le.length;_e+=1){var Ne=Le[_e],et=Ne.feature,pt=Ne.id,vt=Ne.index,Vt=Ne.sourceLayerIndex,Qt=this.layers[0]._featureFilter.needGeometry,Wt={type:et.type,id:pt,properties:et.properties,geometry:Qt?Ta(et):[]};if(this.layers[0]._featureFilter.filter(new fa(this.zoom),Wt,q)){Qt||(Wt.geometry=Ta(et));var ur=ne?ne.evaluate(Wt,{},q,O.availableImages):void 0;me.push({id:pt,properties:et.properties,type:et.type,sourceLayerIndex:Vt,index:vt,geometry:Wt.geometry,patterns:{},sortKey:ur})}}ne&&me.sort(function($n,hi){return $n.sortKey-hi.sortKey});for(var Rr=0,Dr=me;Rr<Dr.length;Rr+=1){var qr=Dr[Rr],Kr=qr.geometry,vn=qr.index,Sn=qr.sourceLayerIndex;if(this.hasPattern){var Gn=su("fill",this.layers,qr,this.zoom,O);this.patternFeatures.push(Gn)}else this.addFeature(qr,Kr,vn,q,{});O.featureIndex.insert(A[vn].feature,Kr,vn,Sn,this.index)}},As.prototype.update=function(A,O,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,O,this.stateDependentLayers,q)},As.prototype.addFeatures=function(A,O,q){for(var ne=0,me=this.patternFeatures;ne<me.length;ne+=1){var _e=me[ne];this.addFeature(_e,_e.geometry,_e.index,O,q)}},As.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},As.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},As.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Nu),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0},As.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},As.prototype.addFeature=function(A,O,q,ne,me){for(var _e=0,Le=au(O,500);_e<Le.length;_e+=1){for(var Ne=Le[_e],et=0,pt=0,vt=Ne;pt<vt.length;pt+=1)et+=vt[pt].length;for(var Vt=this.segments.prepareSegment(et,this.layoutVertexArray,this.indexArray),Qt=Vt.vertexLength,Wt=[],ur=[],Tr=0,Rr=Ne;Tr<Rr.length;Tr+=1){var Dr=Rr[Tr];if(0!==Dr.length){Dr!==Ne[0]&&ur.push(Wt.length/2);var qr=this.segments2.prepareSegment(Dr.length,this.layoutVertexArray,this.indexArray2),Yr=qr.vertexLength;this.layoutVertexArray.emplaceBack(Dr[0].x,Dr[0].y),this.indexArray2.emplaceBack(Yr+Dr.length-1,Yr),Wt.push(Dr[0].x),Wt.push(Dr[0].y);for(var Kr=1;Kr<Dr.length;Kr++)this.layoutVertexArray.emplaceBack(Dr[Kr].x,Dr[Kr].y),this.indexArray2.emplaceBack(Yr+Kr-1,Yr+Kr),Wt.push(Dr[Kr].x),Wt.push(Dr[Kr].y);qr.vertexLength+=Dr.length,qr.primitiveLength+=Dr.length}}for(var vn=tu(Wt,ur),Sn=0;Sn<vn.length;Sn+=3)this.indexArray.emplaceBack(Qt+vn[Sn],Qt+vn[Sn+1],Qt+vn[Sn+2]);Vt.vertexLength+=et,Vt.primitiveLength+=vn.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,q,me,ne)},Qr("FillBucket",As,{omit:["layers","patternFeatures"]});var Sh=new Io({"fill-sort-key":new Ai(be.layout_fill["fill-sort-key"])}),Eh={paint:new Io({"fill-antialias":new mi(be.paint_fill["fill-antialias"]),"fill-opacity":new Ai(be.paint_fill["fill-opacity"]),"fill-color":new Ai(be.paint_fill["fill-color"]),"fill-outline-color":new Ai(be.paint_fill["fill-outline-color"]),"fill-translate":new mi(be.paint_fill["fill-translate"]),"fill-translate-anchor":new mi(be.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ds(be.paint_fill["fill-pattern"])}),layout:Sh},Ch=function(A){function O(q){A.call(this,q,Eh)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.recalculate=function(q,ne){A.prototype.recalculate.call(this,q,ne);var me=this.paint._values["fill-outline-color"];"constant"===me.value.kind&&void 0===me.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},O.prototype.createBucket=function(q){return new As(q)},O.prototype.queryRadius=function(){return Oo(this.paint.get("fill-translate"))},O.prototype.queryIntersectsFeature=function(q,ne,me,_e,Le,Ne,et){return Rs(Do(q,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ne.angle,et),_e)},O.prototype.isTileClipped=function(){return!0},O}(Ho),Gu=ha([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,qu=bl;function bl(A,O,q,ne,me){this.properties={},this.extent=q,this.type=0,this._pbf=A,this._geometry=-1,this._keys=ne,this._values=me,A.readFields(Lh,this,O)}function Lh(A,O,q){1==A?O.id=q.readVarint():2==A?function(ne,me){for(var _e=ne.readVarint()+ne.pos;ne.pos<_e;){var Le=me._keys[ne.readVarint()],Ne=me._values[ne.readVarint()];me.properties[Le]=Ne}}(q,O):3==A?O.type=q.readVarint():4==A&&(O._geometry=q.pos)}function Ph(A){for(var O,q,ne=0,me=0,_e=A.length,Le=_e-1;me<_e;Le=me++)ne+=((q=A[Le]).x-(O=A[me]).x)*(O.y+q.y);return ne}bl.types=["Unknown","Point","LineString","Polygon"],bl.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var O,q=A.readVarint()+A.pos,ne=1,me=0,_e=0,Le=0,Ne=[];A.pos<q;){if(me<=0){var et=A.readVarint();ne=7&et,me=et>>3}if(me--,1===ne||2===ne)_e+=A.readSVarint(),Le+=A.readSVarint(),1===ne&&(O&&Ne.push(O),O=[]),O.push(new r(_e,Le));else{if(7!==ne)throw new Error("unknown command "+ne);O&&O.push(O[0].clone())}}return O&&Ne.push(O),Ne},bl.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var O=A.readVarint()+A.pos,q=1,ne=0,me=0,_e=0,Le=1/0,Ne=-1/0,et=1/0,pt=-1/0;A.pos<O;){if(ne<=0){var vt=A.readVarint();q=7&vt,ne=vt>>3}if(ne--,1===q||2===q)(me+=A.readSVarint())<Le&&(Le=me),me>Ne&&(Ne=me),(_e+=A.readSVarint())<et&&(et=_e),_e>pt&&(pt=_e);else if(7!==q)throw new Error("unknown command "+q)}return[Le,et,Ne,pt]},bl.prototype.toGeoJSON=function(A,O,q){var ne,me,_e=this.extent*Math.pow(2,q),Le=this.extent*A,Ne=this.extent*O,et=this.loadGeometry(),pt=bl.types[this.type];function vt(Wt){for(var ur=0;ur<Wt.length;ur++){var Tr=Wt[ur];Wt[ur]=[360*(Tr.x+Le)/_e-180,360/Math.PI*Math.atan(Math.exp((180-360*(Tr.y+Ne)/_e)*Math.PI/180))-90]}}switch(this.type){case 1:var Vt=[];for(ne=0;ne<et.length;ne++)Vt[ne]=et[ne][0];vt(et=Vt);break;case 2:for(ne=0;ne<et.length;ne++)vt(et[ne]);break;case 3:for(et=function(Wt){var ur=Wt.length;if(ur<=1)return[Wt];for(var Tr,Rr,Dr=[],qr=0;qr<ur;qr++){var Yr=Ph(Wt[qr]);0!==Yr&&(void 0===Rr&&(Rr=Yr<0),Rr===Yr<0?(Tr&&Dr.push(Tr),Tr=[Wt[qr]]):Tr.push(Wt[qr]))}return Tr&&Dr.push(Tr),Dr}(et),ne=0;ne<et.length;ne++)for(me=0;me<et[ne].length;me++)vt(et[ne][me])}1===et.length?et=et[0]:pt="Multi"+pt;var Qt={type:"Feature",geometry:{type:pt,coordinates:et},properties:this.properties};return"id"in this&&(Qt.id=this.id),Qt};var Yu=Zu;function Zu(A,O){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(Ih,this,O),this.length=this._features.length}function Ih(A,O,q){15===A?O.version=q.readVarint():1===A?O.name=q.readString():5===A?O.extent=q.readVarint():2===A?O._features.push(q.pos):3===A?O._keys.push(q.readString()):4===A&&O._values.push(function(ne){for(var me=null,_e=ne.readVarint()+ne.pos;ne.pos<_e;){var Le=ne.readVarint()>>3;me=1===Le?ne.readString():2===Le?ne.readFloat():3===Le?ne.readDouble():4===Le?ne.readVarint64():5===Le?ne.readVarint():6===Le?ne.readSVarint():7===Le?ne.readBoolean():null}return me}(q))}function Oh(A,O,q){if(3===A){var ne=new Yu(q,q.readVarint()+q.pos);ne.length&&(O[ne.name]=ne)}}Zu.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var O=this._pbf.readVarint()+this._pbf.pos;return new qu(this._pbf,O,this.extent,this._keys,this._values)};var _l={VectorTile:function(A,O){this.layers=A.readFields(Oh,{},O)},VectorTileFeature:qu,VectorTileLayer:Yu},Dh=_l.VectorTileFeature.types,lu=Math.pow(2,13);function Xl(A,O,q,ne,me,_e,Le,Ne){A.emplaceBack(O,q,2*Math.floor(ne*lu)+Le,me*lu*2,_e*lu*2,Math.round(Ne))}var Ms=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new vs,this.indexArray=new oo,this.programConfigurations=new ya(Gu,A.layers,A.zoom),this.segments=new jt,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};function zh(A,O){return A.x===O.x&&(A.x<0||A.x>8192)||A.y===O.y&&(A.y<0||A.y>8192)}function Rh(A){return A.every(function(O){return O.x<0})||A.every(function(O){return O.x>8192})||A.every(function(O){return O.y<0})||A.every(function(O){return O.y>8192})}Ms.prototype.populate=function(A,O,q){this.features=[],this.hasPattern=ou("fill-extrusion",this.layers,O);for(var ne=0,me=A;ne<me.length;ne+=1){var _e=me[ne],Le=_e.feature,Ne=_e.id,et=_e.index,pt=_e.sourceLayerIndex,vt=this.layers[0]._featureFilter.needGeometry,Vt={type:Le.type,id:Ne,properties:Le.properties,geometry:vt?Ta(Le):[]};if(this.layers[0]._featureFilter.filter(new fa(this.zoom),Vt,q)){var Qt={id:Ne,sourceLayerIndex:pt,index:et,geometry:vt?Vt.geometry:Ta(Le),properties:Le.properties,type:Le.type,patterns:{}};void 0!==Le.id&&(Qt.id=Le.id),this.hasPattern?this.features.push(su("fill-extrusion",this.layers,Qt,this.zoom,O)):this.addFeature(Qt,Qt.geometry,et,q,{}),O.featureIndex.insert(Le,Qt.geometry,et,pt,this.index,!0)}}},Ms.prototype.addFeatures=function(A,O,q){for(var ne=0,me=this.features;ne<me.length;ne+=1){var _e=me[ne];this.addFeature(_e,_e.geometry,_e.index,O,q)}},Ms.prototype.update=function(A,O,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,O,this.stateDependentLayers,q)},Ms.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ms.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ms.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Gu),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Ms.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ms.prototype.addFeature=function(A,O,q,ne,me){for(var _e=0,Le=au(O,500);_e<Le.length;_e+=1){for(var Ne=Le[_e],et=0,pt=0,vt=Ne;pt<vt.length;pt+=1)et+=vt[pt].length;for(var Vt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Qt=0,Wt=Ne;Qt<Wt.length;Qt+=1){var ur=Wt[Qt];if(0!==ur.length&&!Rh(ur))for(var Tr=0,Rr=0;Rr<ur.length;Rr++){var Dr=ur[Rr];if(Rr>=1){var qr=ur[Rr-1];if(!zh(Dr,qr)){Vt.vertexLength+4>jt.MAX_VERTEX_ARRAY_LENGTH&&(Vt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Yr=Dr.sub(qr)._perp()._unit(),Kr=qr.dist(Dr);Tr+Kr>32768&&(Tr=0),Xl(this.layoutVertexArray,Dr.x,Dr.y,Yr.x,Yr.y,0,0,Tr),Xl(this.layoutVertexArray,Dr.x,Dr.y,Yr.x,Yr.y,0,1,Tr),Xl(this.layoutVertexArray,qr.x,qr.y,Yr.x,Yr.y,0,0,Tr+=Kr),Xl(this.layoutVertexArray,qr.x,qr.y,Yr.x,Yr.y,0,1,Tr);var vn=Vt.vertexLength;this.indexArray.emplaceBack(vn,vn+2,vn+1),this.indexArray.emplaceBack(vn+1,vn+2,vn+3),Vt.vertexLength+=4,Vt.primitiveLength+=2}}}}if(Vt.vertexLength+et>jt.MAX_VERTEX_ARRAY_LENGTH&&(Vt=this.segments.prepareSegment(et,this.layoutVertexArray,this.indexArray)),"Polygon"===Dh[A.type]){for(var Sn=[],Gn=[],Hn=Vt.vertexLength,$n=0,hi=Ne;$n<hi.length;$n+=1){var pi=hi[$n];if(0!==pi.length){pi!==Ne[0]&&Gn.push(Sn.length/2);for(var ni=0;ni<pi.length;ni++){var xi=pi[ni];Xl(this.layoutVertexArray,xi.x,xi.y,0,0,1,1,0),Sn.push(xi.x),Sn.push(xi.y)}}}for(var vi=tu(Sn,Gn),di=0;di<vi.length;di+=3)this.indexArray.emplaceBack(Hn+vi[di],Hn+vi[di+2],Hn+vi[di+1]);Vt.primitiveLength+=vi.length/3,Vt.vertexLength+=et}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,q,me,ne)},Qr("FillExtrusionBucket",Ms,{omit:["layers","features"]});var Fh={paint:new Io({"fill-extrusion-opacity":new mi(be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ai(be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mi(be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mi(be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ds(be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ai(be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ai(be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mi(be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Bh=function(A){function O(q){A.call(this,q,Fh)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.createBucket=function(q){return new Ms(q)},O.prototype.queryRadius=function(){return Oo(this.paint.get("fill-extrusion-translate"))},O.prototype.is3D=function(){return!0},O.prototype.queryIntersectsFeature=function(q,ne,me,_e,Le,Ne,et,pt){var vt=Do(q,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ne.angle,et),Vt=this.paint.get("fill-extrusion-height").evaluate(ne,me),Qt=this.paint.get("fill-extrusion-base").evaluate(ne,me),Wt=function(Tr,Rr,Dr,qr){for(var Yr=[],Kr=0,vn=Tr;Kr<vn.length;Kr+=1){var Sn=vn[Kr],Gn=[Sn.x,Sn.y,0,1];$s(Gn,Gn,Rr),Yr.push(new r(Gn[0]/Gn[3],Gn[1]/Gn[3]))}return Yr}(vt,pt),ur=function(Tr,Rr,Dr,qr){for(var Yr=[],Kr=[],vn=qr[8]*Rr,Sn=qr[9]*Rr,Gn=qr[10]*Rr,Hn=qr[11]*Rr,$n=qr[8]*Dr,hi=qr[9]*Dr,pi=qr[10]*Dr,ni=qr[11]*Dr,xi=0,vi=Tr;xi<vi.length;xi+=1){for(var ra=[],Ki=[],la=0,Ei=vi[xi];la<Ei.length;la+=1){var $i=Ei[la],Aa=$i.x,xa=$i.y,Oa=qr[0]*Aa+qr[4]*xa+qr[12],ba=qr[1]*Aa+qr[5]*xa+qr[13],uo=qr[2]*Aa+qr[6]*xa+qr[14],Da=qr[3]*Aa+qr[7]*xa+qr[15],zo=uo+Gn,ko=Da+Hn,Eo=Oa+$n,Go=ba+hi,jo=uo+pi,fo=Da+ni,Co=new r((Oa+vn)/ko,(ba+Sn)/ko);Co.z=zo/ko,ra.push(Co);var to=new r(Eo/fo,Go/fo);to.z=jo/fo,Ki.push(to)}Yr.push(ra),Kr.push(Ki)}return[Yr,Kr]}(_e,Qt,Vt,pt);return function(Tr,Rr,Dr){var qr=1/0;Rs(Dr,Rr)&&(qr=Wu(Dr,Rr[0]));for(var Yr=0;Yr<Rr.length;Yr++)for(var Kr=Rr[Yr],vn=Tr[Yr],Sn=0;Sn<Kr.length-1;Sn++){var Gn=Kr[Sn],pi=[Gn,Kr[Sn+1],vn[Sn+1],vn[Sn],Gn];Bo(Dr,pi)&&(qr=Math.min(qr,Wu(Dr,pi)))}return qr!==1/0&&qr}(ur[0],ur[1],Wt)},O}(Ho);function Jl(A,O){return A.x*O.x+A.y*O.y}function Wu(A,O){if(1===A.length){for(var q,ne=0,me=O[ne++];!q||me.equals(q);)if(!(q=O[ne++]))return 1/0;for(;ne<O.length;ne++){var _e=O[ne],Le=A[0],Ne=q.sub(me),et=_e.sub(me),pt=Le.sub(me),vt=Jl(Ne,Ne),Vt=Jl(Ne,et),Qt=Jl(et,et),Wt=Jl(pt,Ne),ur=Jl(pt,et),Tr=vt*Qt-Vt*Vt,Rr=(Qt*Wt-Vt*ur)/Tr,Dr=(vt*ur-Vt*Wt)/Tr,Yr=me.z*(1-Rr-Dr)+q.z*Rr+_e.z*Dr;if(isFinite(Yr))return Yr}return 1/0}for(var Kr=1/0,vn=0,Sn=O;vn<Sn.length;vn+=1)Kr=Math.min(Kr,Sn[vn].z);return Kr}var Xu=ha([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Nh=_l.VectorTileFeature.types,jh=Math.cos(Math.PI/180*37.5),Ju=Math.pow(2,14)/.5,Xo=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ws,this.indexArray=new oo,this.programConfigurations=new ya(Xu,A.layers,A.zoom),this.segments=new jt,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};Xo.prototype.populate=function(A,O,q){this.hasPattern=ou("line",this.layers,O);for(var ne=this.layers[0].layout.get("line-sort-key"),me=[],_e=0,Le=A;_e<Le.length;_e+=1){var Ne=Le[_e],et=Ne.feature,pt=Ne.id,vt=Ne.index,Vt=Ne.sourceLayerIndex,Qt=this.layers[0]._featureFilter.needGeometry,Wt={type:et.type,id:pt,properties:et.properties,geometry:Qt?Ta(et):[]};if(this.layers[0]._featureFilter.filter(new fa(this.zoom),Wt,q)){Qt||(Wt.geometry=Ta(et));var ur=ne?ne.evaluate(Wt,{},q):void 0;me.push({id:pt,properties:et.properties,type:et.type,sourceLayerIndex:Vt,index:vt,geometry:Wt.geometry,patterns:{},sortKey:ur})}}ne&&me.sort(function($n,hi){return $n.sortKey-hi.sortKey});for(var Rr=0,Dr=me;Rr<Dr.length;Rr+=1){var qr=Dr[Rr],Kr=qr.geometry,vn=qr.index,Sn=qr.sourceLayerIndex;if(this.hasPattern){var Gn=su("line",this.layers,qr,this.zoom,O);this.patternFeatures.push(Gn)}else this.addFeature(qr,Kr,vn,q,{});O.featureIndex.insert(A[vn].feature,Kr,vn,Sn,this.index)}},Xo.prototype.update=function(A,O,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,O,this.stateDependentLayers,q)},Xo.prototype.addFeatures=function(A,O,q){for(var ne=0,me=this.patternFeatures;ne<me.length;ne+=1){var _e=me[ne];this.addFeature(_e,_e.geometry,_e.index,O,q)}},Xo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Xo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xo.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Xu),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Xo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xo.prototype.addFeature=function(A,O,q,ne,me){for(var _e=this.layers[0].layout,Le=_e.get("line-join").evaluate(A,{}),Ne=_e.get("line-cap"),et=_e.get("line-miter-limit"),pt=_e.get("line-round-limit"),vt=0,Vt=O;vt<Vt.length;vt+=1)this.addLine(Vt[vt],A,Le,Ne,et,pt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,q,me,ne)},Xo.prototype.addLine=function(A,O,q,ne,me,_e){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,O.properties&&O.properties.hasOwnProperty("mapbox_clip_start")&&O.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+O.properties.mapbox_clip_start,this.clipEnd=+O.properties.mapbox_clip_end;for(var Le=0;Le<A.length-1;Le++)this.totalDistance+=A[Le].dist(A[Le+1]);this.updateScaledDistance()}for(var Ne="Polygon"===Nh[O.type],et=A.length;et>=2&&A[et-1].equals(A[et-2]);)et--;for(var pt=0;pt<et-1&&A[pt].equals(A[pt+1]);)pt++;if(!(et<(Ne?3:2))){"bevel"===q&&(me=1.05);var vt,Vt=this.overscaling<=16?122880/(512*this.overscaling):0,Qt=this.segments.prepareSegment(10*et,this.layoutVertexArray,this.indexArray),Wt=void 0,ur=void 0,Tr=void 0,Rr=void 0;this.e1=this.e2=-1,Ne&&(Rr=A[pt].sub(vt=A[et-2])._unit()._perp());for(var Dr=pt;Dr<et;Dr++)if(!(ur=Dr===et-1?Ne?A[pt+1]:void 0:A[Dr+1])||!A[Dr].equals(ur)){Rr&&(Tr=Rr),vt&&(Wt=vt),vt=A[Dr],Rr=ur?ur.sub(vt)._unit()._perp():Tr;var qr=(Tr=Tr||Rr).add(Rr);0===qr.x&&0===qr.y||qr._unit();var Yr=Tr.x*Rr.x+Tr.y*Rr.y,Kr=qr.x*Rr.x+qr.y*Rr.y,vn=0!==Kr?1/Kr:1/0,Sn=2*Math.sqrt(2-2*Kr),Gn=Kr<jh&&Wt&&ur,Hn=Tr.x*Rr.y-Tr.y*Rr.x>0;if(Gn&&Dr>pt){var $n=vt.dist(Wt);if($n>2*Vt){var hi=vt.sub(vt.sub(Wt)._mult(Vt/$n)._round());this.updateDistance(Wt,hi),this.addCurrentVertex(hi,Tr,0,0,Qt),Wt=hi}}var pi=Wt&&ur,ni=pi?q:Ne?"butt":ne;if(pi&&"round"===ni&&(vn<_e?ni="miter":vn<=2&&(ni="fakeround")),"miter"===ni&&vn>me&&(ni="bevel"),"bevel"===ni&&(vn>2&&(ni="flipbevel"),vn<me&&(ni="miter")),Wt&&this.updateDistance(Wt,vt),"miter"===ni)qr._mult(vn),this.addCurrentVertex(vt,qr,0,0,Qt);else if("flipbevel"===ni){if(vn>100)qr=Rr.mult(-1);else{var xi=vn*Tr.add(Rr).mag()/Tr.sub(Rr).mag();qr._perp()._mult(xi*(Hn?-1:1))}this.addCurrentVertex(vt,qr,0,0,Qt),this.addCurrentVertex(vt,qr.mult(-1),0,0,Qt)}else if("bevel"===ni||"fakeround"===ni){var vi=-Math.sqrt(vn*vn-1),di=Hn?vi:0,ra=Hn?0:vi;if(Wt&&this.addCurrentVertex(vt,Tr,di,ra,Qt),"fakeround"===ni)for(var Ki=Math.round(180*Sn/Math.PI/20),la=1;la<Ki;la++){var Ei=la/Ki;if(.5!==Ei){var $i=Ei-.5;Ei+=Ei*$i*(Ei-1)*((1.0904+Yr*(Yr*(3.55645-1.43519*Yr)-3.2452))*$i*$i+(.848013+Yr*(.215638*Yr-1.06021)))}var Aa=Rr.sub(Tr)._mult(Ei)._add(Tr)._unit()._mult(Hn?-1:1);this.addHalfVertex(vt,Aa.x,Aa.y,!1,Hn,0,Qt)}ur&&this.addCurrentVertex(vt,Rr,-di,-ra,Qt)}else if("butt"===ni)this.addCurrentVertex(vt,qr,0,0,Qt);else if("square"===ni){var xa=Wt?1:-1;this.addCurrentVertex(vt,qr,xa,xa,Qt)}else"round"===ni&&(Wt&&(this.addCurrentVertex(vt,Tr,0,0,Qt),this.addCurrentVertex(vt,Tr,1,1,Qt,!0)),ur&&(this.addCurrentVertex(vt,Rr,-1,-1,Qt,!0),this.addCurrentVertex(vt,Rr,0,0,Qt)));if(Gn&&Dr<et-1){var Oa=vt.dist(ur);if(Oa>2*Vt){var ba=vt.add(ur.sub(vt)._mult(Vt/Oa)._round());this.updateDistance(vt,ba),this.addCurrentVertex(ba,Rr,0,0,Qt),vt=ba}}}}},Xo.prototype.addCurrentVertex=function(A,O,q,ne,me,_e){void 0===_e&&(_e=!1);var et=O.y*ne-O.x,pt=-O.y-O.x*ne;this.addHalfVertex(A,O.x+O.y*q,O.y-O.x*q,_e,!1,q,me),this.addHalfVertex(A,et,pt,_e,!0,-ne,me),this.distance>Ju/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(A,O,q,ne,me,_e))},Xo.prototype.addHalfVertex=function(A,O,q,ne,me,_e,Le){var pt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((A.x<<1)+(ne?1:0),(A.y<<1)+(me?1:0),Math.round(63*O)+128,Math.round(63*q)+128,1+(0===_e?0:_e<0?-1:1)|(63&pt)<<2,pt>>6);var vt=Le.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,vt),Le.primitiveLength++),me?this.e2=vt:this.e1=vt},Xo.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Ju-1):this.distance},Xo.prototype.updateDistance=function(A,O){this.distance+=A.dist(O),this.updateScaledDistance()},Qr("LineBucket",Xo,{omit:["layers","patternFeatures"]});var Vh=new Io({"line-cap":new mi(be.layout_line["line-cap"]),"line-join":new Ai(be.layout_line["line-join"]),"line-miter-limit":new mi(be.layout_line["line-miter-limit"]),"line-round-limit":new mi(be.layout_line["line-round-limit"]),"line-sort-key":new Ai(be.layout_line["line-sort-key"])}),Ku={paint:new Io({"line-opacity":new Ai(be.paint_line["line-opacity"]),"line-color":new Ai(be.paint_line["line-color"]),"line-translate":new mi(be.paint_line["line-translate"]),"line-translate-anchor":new mi(be.paint_line["line-translate-anchor"]),"line-width":new Ai(be.paint_line["line-width"]),"line-gap-width":new Ai(be.paint_line["line-gap-width"]),"line-offset":new Ai(be.paint_line["line-offset"]),"line-blur":new Ai(be.paint_line["line-blur"]),"line-dasharray":new zs(be.paint_line["line-dasharray"]),"line-pattern":new Ds(be.paint_line["line-pattern"]),"line-gradient":new rs(be.paint_line["line-gradient"])}),layout:Vh},$u=new(function(A){function O(){A.apply(this,arguments)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.possiblyEvaluate=function(q,ne){return ne=new fa(Math.floor(ne.zoom),{now:ne.now,fadeDuration:ne.fadeDuration,zoomHistory:ne.zoomHistory,transition:ne.transition}),A.prototype.possiblyEvaluate.call(this,q,ne)},O.prototype.evaluate=function(q,ne,me,_e){return ne=o({},ne,{zoom:Math.floor(ne.zoom)}),A.prototype.evaluate.call(this,q,ne,me,_e)},O}(Ai))(Ku.paint.properties["line-width"].specification);$u.useIntegerZoom=!0;var Uh=function(A){function O(q){A.call(this,q,Ku)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype._handleSpecialPaintPropertyUpdate=function(q){"line-gradient"===q&&this._updateGradient()},O.prototype._updateGradient=function(){this.gradient=Bu(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},O.prototype.recalculate=function(q,ne){A.prototype.recalculate.call(this,q,ne),this.paint._values["line-floorwidth"]=$u.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,q)},O.prototype.createBucket=function(q){return new Xo(q)},O.prototype.queryRadius=function(q){var ne=q,me=Qu(Pa("line-width",this,ne),Pa("line-gap-width",this,ne)),_e=Pa("line-offset",this,ne);return me/2+Math.abs(_e)+Oo(this.paint.get("line-translate"))},O.prototype.queryIntersectsFeature=function(q,ne,me,_e,Le,Ne,et){var pt=Do(q,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ne.angle,et),vt=et/2*Qu(this.paint.get("line-width").evaluate(ne,me),this.paint.get("line-gap-width").evaluate(ne,me)),Vt=this.paint.get("line-offset").evaluate(ne,me);return Vt&&(_e=function(Qt,Wt){for(var ur=[],Tr=new r(0,0),Rr=0;Rr<Qt.length;Rr++){for(var Dr=Qt[Rr],qr=[],Yr=0;Yr<Dr.length;Yr++){var vn=Dr[Yr],Sn=Dr[Yr+1],Gn=0===Yr?Tr:vn.sub(Dr[Yr-1])._unit()._perp(),Hn=Yr===Dr.length-1?Tr:Sn.sub(vn)._unit()._perp(),$n=Gn._add(Hn)._unit();$n._mult(1/($n.x*Hn.x+$n.y*Hn.y)),qr.push($n._mult(Wt)._add(vn))}ur.push(qr)}return ur}(_e,Vt*et)),function(Qt,Wt,ur){for(var Tr=0;Tr<Wt.length;Tr++){var Rr=Wt[Tr];if(Qt.length>=3)for(var Dr=0;Dr<Rr.length;Dr++)if(ns(Qt,Rr[Dr]))return!0;if(sl(Qt,Rr,ur))return!0}return!1}(pt,_e,vt)},O.prototype.isTileClipped=function(){return!0},O}(Ho);function Qu(A,O){return O>0?O+2*A:A}var cu=ha([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Hh=ha([{name:"a_projected_pos",components:3,type:"Float32"}],4),Gh=(ha([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ha([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),ef=(ha([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ha([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),qh=ha([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Yh(A,O,q){return A.sections.forEach(function(ne){var me,Le,Ne;ne.text=(me=ne.text,Le=q,"uppercase"===(Ne=O.layout.get("text-transform").evaluate(Le,{}))?me=me.toLocaleUpperCase():"lowercase"===Ne&&(me=me.toLocaleLowerCase()),go.applyArabicShaping&&(me=go.applyArabicShaping(me)),me)}),A}ha([{name:"triangle",components:3,type:"Uint16"}]),ha([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ha([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ha([{type:"Float32",name:"offsetX"}]),ha([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Kl={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},tf=function(A,O,q,ne,me){var _e,Le,Ne=8*me-ne-1,et=(1<<Ne)-1,pt=et>>1,vt=-7,Vt=q?me-1:0,Qt=q?-1:1,Wt=A[O+Vt];for(Vt+=Qt,_e=Wt&(1<<-vt)-1,Wt>>=-vt,vt+=Ne;vt>0;_e=256*_e+A[O+Vt],Vt+=Qt,vt-=8);for(Le=_e&(1<<-vt)-1,_e>>=-vt,vt+=ne;vt>0;Le=256*Le+A[O+Vt],Vt+=Qt,vt-=8);if(0===_e)_e=1-pt;else{if(_e===et)return Le?NaN:1/0*(Wt?-1:1);Le+=Math.pow(2,ne),_e-=pt}return(Wt?-1:1)*Le*Math.pow(2,_e-ne)},rf=function(A,O,q,ne,me,_e){var Le,Ne,et,pt=8*_e-me-1,vt=(1<<pt)-1,Vt=vt>>1,Qt=23===me?Math.pow(2,-24)-Math.pow(2,-77):0,Wt=ne?0:_e-1,ur=ne?1:-1,Tr=O<0||0===O&&1/O<0?1:0;for(O=Math.abs(O),isNaN(O)||O===1/0?(Ne=isNaN(O)?1:0,Le=vt):(Le=Math.floor(Math.log(O)/Math.LN2),O*(et=Math.pow(2,-Le))<1&&(Le--,et*=2),(O+=Le+Vt>=1?Qt/et:Qt*Math.pow(2,1-Vt))*et>=2&&(Le++,et/=2),Le+Vt>=vt?(Ne=0,Le=vt):Le+Vt>=1?(Ne=(O*et-1)*Math.pow(2,me),Le+=Vt):(Ne=O*Math.pow(2,Vt-1)*Math.pow(2,me),Le=0));me>=8;A[q+Wt]=255&Ne,Wt+=ur,Ne/=256,me-=8);for(Le=Le<<me|Ne,pt+=me;pt>0;A[q+Wt]=255&Le,Wt+=ur,Le/=256,pt-=8);A[q+Wt-ur]|=128*Tr},gc=ka;function ka(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}ka.Varint=0,ka.Fixed64=1,ka.Bytes=2,ka.Fixed32=5;var nf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Us(A){return A.type===ka.Bytes?A.readVarint()+A.pos:A.pos+1}function af(A,O,q){var ne=O<=16383?1:O<=2097151?2:O<=268435455?3:Math.floor(Math.log(O)/(7*Math.LN2));q.realloc(ne);for(var me=q.pos-1;me>=A;me--)q.buf[me+ne]=q.buf[me]}function Zh(A,O){for(var q=0;q<A.length;q++)O.writeVarint(A[q])}function Wh(A,O){for(var q=0;q<A.length;q++)O.writeSVarint(A[q])}function Xh(A,O){for(var q=0;q<A.length;q++)O.writeFloat(A[q])}function Jh(A,O){for(var q=0;q<A.length;q++)O.writeDouble(A[q])}function Kh(A,O){for(var q=0;q<A.length;q++)O.writeBoolean(A[q])}function $h(A,O){for(var q=0;q<A.length;q++)O.writeFixed32(A[q])}function Qh(A,O){for(var q=0;q<A.length;q++)O.writeSFixed32(A[q])}function ep(A,O){for(var q=0;q<A.length;q++)O.writeFixed64(A[q])}function tp(A,O){for(var q=0;q<A.length;q++)O.writeSFixed64(A[q])}function vc(A,O){return(A[O]|A[O+1]<<8|A[O+2]<<16)+16777216*A[O+3]}function Tl(A,O,q){A[q]=O,A[q+1]=O>>>8,A[q+2]=O>>>16,A[q+3]=O>>>24}function of(A,O){return(A[O]|A[O+1]<<8|A[O+2]<<16)+(A[O+3]<<24)}function rp(A,O,q){1===A&&q.readMessage(np,O)}function np(A,O,q){if(3===A){var ne=q.readMessage(ip,{}),Le=ne.width,Ne=ne.height,et=ne.left,pt=ne.top,vt=ne.advance;O.push({id:ne.id,bitmap:new fl({width:Le+6,height:Ne+6},ne.bitmap),metrics:{width:Le,height:Ne,left:et,top:pt,advance:vt}})}}function ip(A,O,q){1===A?O.id=q.readVarint():2===A?O.bitmap=q.readBytes():3===A?O.width=q.readVarint():4===A?O.height=q.readVarint():5===A?O.left=q.readSVarint():6===A?O.top=q.readSVarint():7===A&&(O.advance=q.readVarint())}function sf(A){for(var O=0,q=0,ne=0,me=A;ne<me.length;ne+=1){var _e=me[ne];O+=_e.w*_e.h,q=Math.max(q,_e.w)}A.sort(function(Tr,Rr){return Rr.h-Tr.h});for(var Le=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(O/.95)),q),h:1/0}],Ne=0,et=0,pt=0,vt=A;pt<vt.length;pt+=1)for(var Vt=vt[pt],Qt=Le.length-1;Qt>=0;Qt--){var Wt=Le[Qt];if(!(Vt.w>Wt.w||Vt.h>Wt.h)){if(Vt.x=Wt.x,Vt.y=Wt.y,et=Math.max(et,Vt.y+Vt.h),Ne=Math.max(Ne,Vt.x+Vt.w),Vt.w===Wt.w&&Vt.h===Wt.h){var ur=Le.pop();Qt<Le.length&&(Le[Qt]=ur)}else Vt.h===Wt.h?(Wt.x+=Vt.w,Wt.w-=Vt.w):Vt.w===Wt.w?(Wt.y+=Vt.h,Wt.h-=Vt.h):(Le.push({x:Wt.x+Vt.w,y:Wt.y,w:Wt.w-Vt.w,h:Vt.h}),Wt.y+=Vt.h,Wt.h-=Vt.h);break}}return{w:Ne,h:et,fill:O/(Ne*et)||0}}ka.prototype={destroy:function(){this.buf=null},readFields:function(A,O,q){for(q=q||this.length;this.pos<q;){var ne=this.readVarint(),me=ne>>3,_e=this.pos;this.type=7&ne,A(me,O,this),this.pos===_e&&this.skip(ne)}return O},readMessage:function(A,O){return this.readFields(A,O,this.readVarint()+this.pos)},readFixed32:function(){var A=vc(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=of(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=vc(this.buf,this.pos)+4294967296*vc(this.buf,this.pos+4);return this.pos+=8,A},readSFixed64:function(){var A=vc(this.buf,this.pos)+4294967296*of(this.buf,this.pos+4);return this.pos+=8,A},readFloat:function(){var A=tf(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=tf(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var O,q,ne=this.buf;return O=127&(q=ne[this.pos++]),q<128?O:(O|=(127&(q=ne[this.pos++]))<<7,q<128?O:(O|=(127&(q=ne[this.pos++]))<<14,q<128?O:(O|=(127&(q=ne[this.pos++]))<<21,q<128?O:function(me,_e,Le){var Ne,et,pt=Le.buf;if(Ne=(112&(et=pt[Le.pos++]))>>4,et<128||(Ne|=(127&(et=pt[Le.pos++]))<<3,et<128)||(Ne|=(127&(et=pt[Le.pos++]))<<10,et<128)||(Ne|=(127&(et=pt[Le.pos++]))<<17,et<128)||(Ne|=(127&(et=pt[Le.pos++]))<<24,et<128)||(Ne|=(1&(et=pt[Le.pos++]))<<31,et<128))return function wl(A,O,q){return q?4294967296*O+(A>>>0):4294967296*(O>>>0)+(A>>>0)}(me,Ne,_e);throw new Error("Expected varint not more than 10 bytes")}(O|=(15&(q=ne[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var A=this.readVarint()+this.pos,O=this.pos;return this.pos=A,A-O>=12&&nf?nf.decode(this.buf.subarray(O,A)):function(q,ne,me){for(var _e="",Le=ne;Le<me;){var Ne,et,pt,vt=q[Le],Vt=null,Qt=vt>239?4:vt>223?3:vt>191?2:1;if(Le+Qt>me)break;1===Qt?vt<128&&(Vt=vt):2===Qt?128==(192&(Ne=q[Le+1]))&&(Vt=(31&vt)<<6|63&Ne)<=127&&(Vt=null):3===Qt?(et=q[Le+2],128==(192&(Ne=q[Le+1]))&&128==(192&et)&&((Vt=(15&vt)<<12|(63&Ne)<<6|63&et)<=2047||Vt>=55296&&Vt<=57343)&&(Vt=null)):4===Qt&&(et=q[Le+2],pt=q[Le+3],128==(192&(Ne=q[Le+1]))&&128==(192&et)&&128==(192&pt)&&((Vt=(15&vt)<<18|(63&Ne)<<12|(63&et)<<6|63&pt)<=65535||Vt>=1114112)&&(Vt=null)),null===Vt?(Vt=65533,Qt=1):Vt>65535&&(Vt-=65536,_e+=String.fromCharCode(Vt>>>10&1023|55296),Vt=56320|1023&Vt),_e+=String.fromCharCode(Vt),Le+=Qt}return _e}(this.buf,O,A)},readBytes:function(){var A=this.readVarint()+this.pos,O=this.buf.subarray(this.pos,A);return this.pos=A,O},readPackedVarint:function(A,O){if(this.type!==ka.Bytes)return A.push(this.readVarint(O));var q=Us(this);for(A=A||[];this.pos<q;)A.push(this.readVarint(O));return A},readPackedSVarint:function(A){if(this.type!==ka.Bytes)return A.push(this.readSVarint());var O=Us(this);for(A=A||[];this.pos<O;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==ka.Bytes)return A.push(this.readBoolean());var O=Us(this);for(A=A||[];this.pos<O;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==ka.Bytes)return A.push(this.readFloat());var O=Us(this);for(A=A||[];this.pos<O;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==ka.Bytes)return A.push(this.readDouble());var O=Us(this);for(A=A||[];this.pos<O;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==ka.Bytes)return A.push(this.readFixed32());var O=Us(this);for(A=A||[];this.pos<O;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==ka.Bytes)return A.push(this.readSFixed32());var O=Us(this);for(A=A||[];this.pos<O;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==ka.Bytes)return A.push(this.readFixed64());var O=Us(this);for(A=A||[];this.pos<O;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==ka.Bytes)return A.push(this.readSFixed64());var O=Us(this);for(A=A||[];this.pos<O;)A.push(this.readSFixed64());return A},skip:function(A){var O=7&A;if(O===ka.Varint)for(;this.buf[this.pos++]>127;);else if(O===ka.Bytes)this.pos=this.readVarint()+this.pos;else if(O===ka.Fixed32)this.pos+=4;else{if(O!==ka.Fixed64)throw new Error("Unimplemented type: "+O);this.pos+=8}},writeTag:function(A,O){this.writeVarint(A<<3|O)},realloc:function(A){for(var O=this.length||16;O<this.pos+A;)O*=2;if(O!==this.length){var q=new Uint8Array(O);q.set(this.buf),this.buf=q,this.length=O}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),Tl(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),Tl(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),Tl(this.buf,-1&A,this.pos),Tl(this.buf,Math.floor(A*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),Tl(this.buf,-1&A,this.pos),Tl(this.buf,Math.floor(A*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(O,q){var ne,me,_e,Ne;if(O>=0?(ne=O%4294967296|0,me=O/4294967296|0):(me=~(-O/4294967296),4294967295^(ne=~(-O%4294967296))?ne=ne+1|0:(ne=0,me=me+1|0)),O>=0x10000000000000000||O<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");q.realloc(10),_e=ne,(Ne=q).buf[Ne.pos++]=127&_e|128,_e>>>=7,Ne.buf[Ne.pos++]=127&_e|128,_e>>>=7,Ne.buf[Ne.pos++]=127&_e|128,_e>>>=7,Ne.buf[Ne.pos++]=127&_e|128,Ne.buf[Ne.pos]=127&(_e>>>=7),function(_e,Le){var Ne=(7&_e)<<4;Le.buf[Le.pos++]|=Ne|((_e>>>=3)?128:0),_e&&(Le.buf[Le.pos++]=127&_e|((_e>>>=7)?128:0),_e&&(Le.buf[Le.pos++]=127&_e|((_e>>>=7)?128:0),_e&&(Le.buf[Le.pos++]=127&_e|((_e>>>=7)?128:0),_e&&(Le.buf[Le.pos++]=127&_e|((_e>>>=7)?128:0),_e&&(Le.buf[Le.pos++]=127&_e)))))}(me,q)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(Boolean(A))},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var O=this.pos;this.pos=function(ne,me,_e){for(var Le,Ne,et=0;et<me.length;et++){if((Le=me.charCodeAt(et))>55295&&Le<57344){if(!Ne){Le>56319||et+1===me.length?(ne[_e++]=239,ne[_e++]=191,ne[_e++]=189):Ne=Le;continue}if(Le<56320){ne[_e++]=239,ne[_e++]=191,ne[_e++]=189,Ne=Le;continue}Le=Ne-55296<<10|Le-56320|65536,Ne=null}else Ne&&(ne[_e++]=239,ne[_e++]=191,ne[_e++]=189,Ne=null);Le<128?ne[_e++]=Le:(Le<2048?ne[_e++]=Le>>6|192:(Le<65536?ne[_e++]=Le>>12|224:(ne[_e++]=Le>>18|240,ne[_e++]=Le>>12&63|128),ne[_e++]=Le>>6&63|128),ne[_e++]=63&Le|128)}return _e}(this.buf,A,this.pos);var q=this.pos-O;q>=128&&af(O,q,this),this.pos=O-1,this.writeVarint(q),this.pos+=q},writeFloat:function(A){this.realloc(4),rf(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),rf(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var O=A.length;this.writeVarint(O),this.realloc(O);for(var q=0;q<O;q++)this.buf[this.pos++]=A[q]},writeRawMessage:function(A,O){this.pos++;var q=this.pos;A(O,this);var ne=this.pos-q;ne>=128&&af(q,ne,this),this.pos=q-1,this.writeVarint(ne),this.pos+=ne},writeMessage:function(A,O,q){this.writeTag(A,ka.Bytes),this.writeRawMessage(O,q)},writePackedVarint:function(A,O){O.length&&this.writeMessage(A,Zh,O)},writePackedSVarint:function(A,O){O.length&&this.writeMessage(A,Wh,O)},writePackedBoolean:function(A,O){O.length&&this.writeMessage(A,Kh,O)},writePackedFloat:function(A,O){O.length&&this.writeMessage(A,Xh,O)},writePackedDouble:function(A,O){O.length&&this.writeMessage(A,Jh,O)},writePackedFixed32:function(A,O){O.length&&this.writeMessage(A,$h,O)},writePackedSFixed32:function(A,O){O.length&&this.writeMessage(A,Qh,O)},writePackedFixed64:function(A,O){O.length&&this.writeMessage(A,ep,O)},writePackedSFixed64:function(A,O){O.length&&this.writeMessage(A,tp,O)},writeBytesField:function(A,O){this.writeTag(A,ka.Bytes),this.writeBytes(O)},writeFixed32Field:function(A,O){this.writeTag(A,ka.Fixed32),this.writeFixed32(O)},writeSFixed32Field:function(A,O){this.writeTag(A,ka.Fixed32),this.writeSFixed32(O)},writeFixed64Field:function(A,O){this.writeTag(A,ka.Fixed64),this.writeFixed64(O)},writeSFixed64Field:function(A,O){this.writeTag(A,ka.Fixed64),this.writeSFixed64(O)},writeVarintField:function(A,O){this.writeTag(A,ka.Varint),this.writeVarint(O)},writeSVarintField:function(A,O){this.writeTag(A,ka.Varint),this.writeSVarint(O)},writeStringField:function(A,O){this.writeTag(A,ka.Bytes),this.writeString(O)},writeFloatField:function(A,O){this.writeTag(A,ka.Fixed32),this.writeFloat(O)},writeDoubleField:function(A,O){this.writeTag(A,ka.Fixed64),this.writeDouble(O)},writeBooleanField:function(A,O){this.writeVarintField(A,Boolean(O))}};var yc=function(A,O){var q=O.pixelRatio,ne=O.version,me=O.stretchX,_e=O.stretchY,Le=O.content;this.paddedRect=A,this.pixelRatio=q,this.stretchX=me,this.stretchY=_e,this.content=Le,this.version=ne},$l={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};$l.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},$l.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},$l.tlbr.get=function(){return this.tl.concat(this.br)},$l.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(yc.prototype,$l);var Ql=function(A,O){var q={},ne={};this.haveRenderCallbacks=[];var me=[];this.addImages(A,q,me),this.addImages(O,ne,me);var _e=sf(me),et=new Wo({width:_e.w||1,height:_e.h||1});for(var pt in A){var vt=A[pt],Vt=q[pt].paddedRect;Wo.copy(vt.data,et,{x:0,y:0},{x:Vt.x+1,y:Vt.y+1},vt.data)}for(var Qt in O){var Wt=O[Qt],ur=ne[Qt].paddedRect,Tr=ur.x+1,Rr=ur.y+1,Dr=Wt.data.width,qr=Wt.data.height;Wo.copy(Wt.data,et,{x:0,y:0},{x:Tr,y:Rr},Wt.data),Wo.copy(Wt.data,et,{x:0,y:qr-1},{x:Tr,y:Rr-1},{width:Dr,height:1}),Wo.copy(Wt.data,et,{x:0,y:0},{x:Tr,y:Rr+qr},{width:Dr,height:1}),Wo.copy(Wt.data,et,{x:Dr-1,y:0},{x:Tr-1,y:Rr},{width:1,height:qr}),Wo.copy(Wt.data,et,{x:0,y:0},{x:Tr+Dr,y:Rr},{width:1,height:qr})}this.image=et,this.iconPositions=q,this.patternPositions=ne};Ql.prototype.addImages=function(A,O,q){for(var ne in A){var me=A[ne],_e={x:0,y:0,w:me.data.width+2,h:me.data.height+2};q.push(_e),O[ne]=new yc(_e,me),me.hasRenderCallback&&this.haveRenderCallbacks.push(ne)}},Ql.prototype.patchUpdatedImages=function(A,O){for(var q in A.dispatchRenderCallbacks(this.haveRenderCallbacks),A.updatedImages)this.patchUpdatedImage(this.iconPositions[q],A.getImage(q),O),this.patchUpdatedImage(this.patternPositions[q],A.getImage(q),O)},Ql.prototype.patchUpdatedImage=function(A,O,q){if(A&&O&&A.version!==O.version){A.version=O.version;var ne=A.tl;q.update(O.data,void 0,{x:ne[0],y:ne[1]})}},Qr("ImagePosition",yc),Qr("ImageAtlas",Ql);var ps={horizontal:1,vertical:2,horizontalOnly:3},kl=function(){this.scale=1,this.fontStack="",this.imageName=null};kl.forText=function(A,O){var q=new kl;return q.scale=A||1,q.fontStack=O,q},kl.forImage=function(A){var O=new kl;return O.imageName=A,O};var No=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function xc(A,O,q,ne,me,_e,Le,Ne,et,pt,vt,Vt,Qt,Wt,ur,Tr){var Rr,Dr=No.fromFeature(A,me);Vt===ps.vertical&&Dr.verticalizePunctuation();var qr=go.processBidirectionalText,Yr=go.processStyledBidirectionalText;if(qr&&1===Dr.sections.length){Rr=[];for(var Kr=0,vn=qr(Dr.toString(),uu(Dr,pt,_e,O,ne,Wt,ur));Kr<vn.length;Kr+=1){var Sn=vn[Kr],Gn=new No;Gn.text=Sn,Gn.sections=Dr.sections;for(var Hn=0;Hn<Sn.length;Hn++)Gn.sectionIndex.push(0);Rr.push(Gn)}}else if(Yr){Rr=[];for(var $n=0,hi=Yr(Dr.text,Dr.sectionIndex,uu(Dr,pt,_e,O,ne,Wt,ur));$n<hi.length;$n+=1){var pi=hi[$n],ni=new No;ni.text=pi[0],ni.sectionIndex=pi[1],ni.sections=Dr.sections,Rr.push(ni)}}else Rr=function(di,ra){for(var Ki=[],la=di.text,Ei=0,$i=0,Aa=ra;$i<Aa.length;$i+=1){var xa=Aa[$i];Ki.push(di.substring(Ei,xa)),Ei=xa}return Ei<la.length&&Ki.push(di.substring(Ei,la.length)),Ki}(Dr,uu(Dr,pt,_e,O,ne,Wt,ur));var xi=[],vi={positionedLines:xi,text:Dr.toString(),top:vt[1],bottom:vt[1],left:vt[0],right:vt[0],writingMode:Vt,iconsInText:!1,verticalizable:!1};return function(di,ra,Ki,la,Ei,$i,Aa,xa,Oa,ba,uo,Da){for(var zo=0,ko=-17,Eo=0,Go=0,jo="right"===xa?1:"left"===xa?0:.5,fo=0,Co=0,to=Ei;Co<to.length;Co+=1){var vo=to[Co];vo.trim();var Hi=vo.getMaxScale(),ia=24*(Hi-1),Ya={positionedGlyphs:[],lineOffset:0};di.positionedLines[fo]=Ya;var Za=Ya.positionedGlyphs,Ua=0;if(vo.length()){for(var za=0;za<vo.length();za++){var pa=vo.getSection(za),Wa=vo.getSectionIndex(za),qo=vo.getCharCode(za),as=0,Vo=null,Ss=null,qs=null,Ao=24,Es=!(Oa===ps.horizontal||!uo&&!_i(qo)||uo&&(bc[qo]||(tl=qo,zn.Arabic(tl)||zn["Arabic Supplement"](tl)||zn["Arabic Extended-A"](tl)||zn["Arabic Presentation Forms-A"](tl)||zn["Arabic Presentation Forms-B"](tl))));if(pa.imageName){var Cs=la[pa.imageName];if(!Cs)continue;qs=pa.imageName,di.iconsInText=di.iconsInText||!0,Ss=Cs.paddedRect;var Ls=Cs.displaySize;pa.scale=24*pa.scale/Da,as=ia+(24-Ls[1]*pa.scale),Ao=(Vo={width:Ls[0],height:Ls[1],left:1,top:-3,advance:Es?Ls[1]:Ls[0]}).advance;var Il=Es?Ls[0]*pa.scale-24*Hi:Ls[1]*pa.scale-24*Hi;Il>0&&Il>Ua&&(Ua=Il)}else{var Cc=Ki[pa.fontStack],ml=Cc&&Cc[qo];if(ml&&ml.rect)Ss=ml.rect,Vo=ml.metrics;else{var Lc=ra[pa.fontStack],Pc=Lc&&Lc[qo];if(!Pc)continue;Vo=Pc.metrics}as=24*(Hi-pa.scale)}Es?(di.verticalizable=!0,Za.push({glyph:qo,imageName:qs,x:zo,y:ko+as,vertical:Es,scale:pa.scale,fontStack:pa.fontStack,sectionIndex:Wa,metrics:Vo,rect:Ss}),zo+=Ao*pa.scale+ba):(Za.push({glyph:qo,imageName:qs,x:zo,y:ko+as,vertical:Es,scale:pa.scale,fontStack:pa.fontStack,sectionIndex:Wa,metrics:Vo,rect:Ss}),zo+=Vo.advance*pa.scale+ba)}0!==Za.length&&(Eo=Math.max(zo-ba,Eo),op(Za,0,Za.length-1,jo,Ua)),zo=0;var Oc=$i*Hi+Ua;Ya.lineOffset=Math.max(Ua,ia),ko+=Oc,Go=Math.max(Oc,Go),++fo}else ko+=$i,++fo}var tl,Ol=ko- -17,Dc=fu(Aa),Dl=Dc.horizontalAlign,rl=Dc.verticalAlign;(function(rc,zc,Rc,Fc,nc,Bc,ic,Nc,ac){var zl,jc=(zc-Rc)*nc;zl=Bc!==ic?-Nc*Fc- -17:(-Fc*ac+.5)*ic;for(var Rl=0,Fl=rc;Rl<Fl.length;Rl+=1)for(var Bl=0,oc=Fl[Rl].positionedGlyphs;Bl<oc.length;Bl+=1){var Nl=oc[Bl];Nl.x+=jc,Nl.y+=zl}})(di.positionedLines,jo,Dl,rl,Eo,Go,$i,Ol,Ei.length),di.top+=-rl*Ol,di.bottom=di.top+Ol,di.left+=-Dl*Eo,di.right=di.left+Eo}(vi,O,q,ne,Rr,Le,Ne,et,Vt,pt,Qt,Tr),!function(di){for(var ra=0,Ki=di;ra<Ki.length;ra+=1)if(0!==Ki[ra].positionedGlyphs.length)return!1;return!0}(xi)&&vi}No.fromFeature=function(A,O){for(var q=new No,ne=0;ne<A.sections.length;ne++){var me=A.sections[ne];me.image?q.addImageSection(me):q.addTextSection(me,O)}return q},No.prototype.length=function(){return this.text.length},No.prototype.getSection=function(A){return this.sections[this.sectionIndex[A]]},No.prototype.getSectionIndex=function(A){return this.sectionIndex[A]},No.prototype.getCharCode=function(A){return this.text.charCodeAt(A)},No.prototype.verticalizePunctuation=function(){this.text=function(A){for(var O="",q=0;q<A.length;q++){var ne=A.charCodeAt(q+1)||null,me=A.charCodeAt(q-1)||null;ne&&Ui(ne)&&!Kl[A[q+1]]||me&&Ui(me)&&!Kl[A[q-1]]||!Kl[A[q]]?O+=A[q]:O+=Kl[A[q]]}return O}(this.text)},No.prototype.trim=function(){for(var A=0,O=0;O<this.text.length&&bc[this.text.charCodeAt(O)];O++)A++;for(var q=this.text.length,ne=this.text.length-1;ne>=0&&ne>=A&&bc[this.text.charCodeAt(ne)];ne--)q--;this.text=this.text.substring(A,q),this.sectionIndex=this.sectionIndex.slice(A,q)},No.prototype.substring=function(A,O){var q=new No;return q.text=this.text.substring(A,O),q.sectionIndex=this.sectionIndex.slice(A,O),q.sections=this.sections,q},No.prototype.toString=function(){return this.text},No.prototype.getMaxScale=function(){var A=this;return this.sectionIndex.reduce(function(O,q){return Math.max(O,A.sections[q].scale)},0)},No.prototype.addTextSection=function(A,O){this.text+=A.text,this.sections.push(kl.forText(A.scale,A.fontStack||O));for(var q=this.sections.length-1,ne=0;ne<A.text.length;++ne)this.sectionIndex.push(q)},No.prototype.addImageSection=function(A){var O=A.image?A.image.name:"";if(0!==O.length){var q=this.getNextImageSectionCharCode();q?(this.text+=String.fromCharCode(q),this.sections.push(kl.forImage(O)),this.sectionIndex.push(this.sections.length-1)):M("Reached maximum number of images 6401")}else M("Can't add FormattedSection with an empty image.")},No.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var bc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},is={};function lf(A,O,q,ne,me,_e){if(O.imageName){var Le=ne[O.imageName];return Le?Le.displaySize[0]*O.scale*24/_e+me:0}var Ne=q[O.fontStack],et=Ne&&Ne[A];return et?et.metrics.advance*O.scale+me:0}function cf(A,O,q,ne){var me=Math.pow(A-O,2);return ne?A<O?me/2:2*me:me+Math.abs(q)*q}function ap(A,O,q){var ne=0;return 10===A&&(ne-=1e4),q&&(ne+=150),40!==A&&65288!==A||(ne+=50),41!==O&&65289!==O||(ne+=50),ne}function uf(A,O,q,ne,me,_e){for(var Le=null,Ne=cf(O,q,me,_e),et=0,pt=ne;et<pt.length;et+=1){var vt=pt[et],Vt=cf(O-vt.x,q,me,_e)+vt.badness;Vt<=Ne&&(Le=vt,Ne=Vt)}return{index:A,x:O,priorBreak:Le,badness:Ne}}function uu(A,O,q,ne,me,_e,Le){if("point"!==_e)return[];if(!A)return[];for(var Ne,et=[],pt=function(Rr,Dr,qr,Yr,Kr,vn){for(var Sn=0,Gn=0;Gn<Rr.length();Gn++){var Hn=Rr.getSection(Gn);Sn+=lf(Rr.getCharCode(Gn),Hn,Yr,Kr,Dr,vn)}return Sn/Math.max(1,Math.ceil(Sn/qr))}(A,O,q,ne,me,Le),vt=A.text.indexOf("\u200b")>=0,Vt=0,Qt=0;Qt<A.length();Qt++){var Wt=A.getSection(Qt),ur=A.getCharCode(Qt);if(bc[ur]||(Vt+=lf(ur,Wt,ne,me,O,Le)),Qt<A.length()-1){var Tr=!((Ne=ur)<11904||!(zn["Bopomofo Extended"](Ne)||zn.Bopomofo(Ne)||zn["CJK Compatibility Forms"](Ne)||zn["CJK Compatibility Ideographs"](Ne)||zn["CJK Compatibility"](Ne)||zn["CJK Radicals Supplement"](Ne)||zn["CJK Strokes"](Ne)||zn["CJK Symbols and Punctuation"](Ne)||zn["CJK Unified Ideographs Extension A"](Ne)||zn["CJK Unified Ideographs"](Ne)||zn["Enclosed CJK Letters and Months"](Ne)||zn["Halfwidth and Fullwidth Forms"](Ne)||zn.Hiragana(Ne)||zn["Ideographic Description Characters"](Ne)||zn["Kangxi Radicals"](Ne)||zn["Katakana Phonetic Extensions"](Ne)||zn.Katakana(Ne)||zn["Vertical Forms"](Ne)||zn["Yi Radicals"](Ne)||zn["Yi Syllables"](Ne)));(is[ur]||Tr||Wt.imageName)&&et.push(uf(Qt+1,Vt,pt,et,ap(ur,A.getCharCode(Qt+1),Tr&&vt),!1))}}return function Rr(Dr){return Dr?Rr(Dr.priorBreak).concat(Dr.index):[]}(uf(A.length(),Vt,pt,et,0,!0))}function fu(A){var O=.5,q=.5;switch(A){case"right":case"top-right":case"bottom-right":O=1;break;case"left":case"top-left":case"bottom-left":O=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":q=1;break;case"top":case"top-right":case"top-left":q=0}return{horizontalAlign:O,verticalAlign:q}}function op(A,O,q,ne,me){if(ne||me)for(var _e=A[q],Ne=(A[q].x+_e.metrics.advance*_e.scale)*ne,et=O;et<=q;et++)A[et].x-=Ne,A[et].y+=me}function ff(A,O,q,ne,me,_e){var Le,Ne=A.image;if(Ne.content){var et=Ne.content,pt=Ne.pixelRatio||1;Le=[et[0]/pt,et[1]/pt,Ne.displaySize[0]-et[2]/pt,Ne.displaySize[1]-et[3]/pt]}var vt,Vt,Qt,Wt,ur=O.left*_e,Tr=O.right*_e;"width"===q||"both"===q?(Wt=me[0]+ur-ne[3],Vt=me[0]+Tr+ne[1]):Vt=(Wt=me[0]+(ur+Tr-Ne.displaySize[0])/2)+Ne.displaySize[0];var Rr=O.top*_e,Dr=O.bottom*_e;return"height"===q||"both"===q?(vt=me[1]+Rr-ne[0],Qt=me[1]+Dr+ne[2]):Qt=(vt=me[1]+(Rr+Dr-Ne.displaySize[1])/2)+Ne.displaySize[1],{image:Ne,top:vt,right:Vt,bottom:Qt,left:Wt,collisionPadding:Le}}is[10]=!0,is[32]=!0,is[38]=!0,is[40]=!0,is[41]=!0,is[43]=!0,is[45]=!0,is[47]=!0,is[173]=!0,is[183]=!0,is[8203]=!0,is[8208]=!0,is[8211]=!0,is[8231]=!0;var Al=function(A){function O(q,ne,me,_e){A.call(this,q,ne),this.angle=me,void 0!==_e&&(this.segment=_e)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.clone=function(){return new O(this.x,this.y,this.angle,this.segment)},O}(r);function hu(A,O){var q=O.expression;if("constant"===q.kind)return{kind:"constant",layoutSize:q.evaluate(new fa(A+1))};if("source"===q.kind)return{kind:"source"};for(var ne=q.zoomStops,me=q.interpolationType,_e=0;_e<ne.length&&ne[_e]<=A;)_e++;for(var Le=_e=Math.max(0,_e-1);Le<ne.length&&ne[Le]<A+1;)Le++;Le=Math.min(ne.length-1,Le);var Ne=ne[_e],et=ne[Le];return"composite"===q.kind?{kind:"composite",minZoom:Ne,maxZoom:et,interpolationType:me}:{kind:"camera",minZoom:Ne,maxZoom:et,minSize:q.evaluate(new fa(Ne)),maxSize:q.evaluate(new fa(et)),interpolationType:me}}function hf(A,O,q){var ne=O.uSize,_e=q.lowerSize;return"source"===A.kind?_e/128:"composite"===A.kind?En(_e/128,q.upperSize/128,O.uSizeT):ne}function pf(A,O){var q=0,ne=0;if("constant"===A.kind)ne=A.layoutSize;else if("source"!==A.kind){var me=A.interpolationType,Ne=me?h(Ni.interpolationFactor(me,O,A.minZoom,A.maxZoom),0,1):0;"camera"===A.kind?ne=En(A.minSize,A.maxSize,Ne):q=Ne}return{uSizeT:q,uSize:ne}}Qr("Anchor",Al);var sp=Object.freeze({__proto__:null,getSizeData:hu,evaluateSizeForFeature:hf,evaluateSizeForZoom:pf,SIZE_PACK_FACTOR:128});function df(A,O,q,ne,me){if(void 0===O.segment)return!0;for(var _e=O,Le=O.segment+1,Ne=0;Ne>-q/2;){if(--Le<0)return!1;Ne-=A[Le].dist(_e),_e=A[Le]}Ne+=A[Le].dist(A[Le+1]),Le++;for(var et=[],pt=0;Ne<q/2;){var Vt=A[Le],Qt=A[Le+1];if(!Qt)return!1;var Wt=A[Le-1].angleTo(Vt)-Vt.angleTo(Qt);for(Wt=Math.abs((Wt+3*Math.PI)%(2*Math.PI)-Math.PI),et.push({distance:Ne,angleDelta:Wt}),pt+=Wt;Ne-et[0].distance>ne;)pt-=et.shift().angleDelta;if(pt>me)return!1;Le++,Ne+=Vt.dist(Qt)}return!0}function mf(A){for(var O=0,q=0;q<A.length-1;q++)O+=A[q].dist(A[q+1]);return O}function gf(A,O,q){return A?.6*O*q:0}function vf(A,O){return Math.max(A?A.right-A.left:0,O?O.right-O.left:0)}function lp(A,O,q,ne,me,_e){for(var Le=gf(q,me,_e),Ne=vf(q,ne)*_e,et=0,pt=mf(A)/2,vt=0;vt<A.length-1;vt++){var Vt=A[vt],Qt=A[vt+1],Wt=Vt.dist(Qt);if(et+Wt>pt){var ur=(pt-et)/Wt,Tr=En(Vt.x,Qt.x,ur),Rr=En(Vt.y,Qt.y,ur),Dr=new Al(Tr,Rr,Qt.angleTo(Vt),vt);return Dr._round(),!Le||df(A,Dr,Ne,Le,O)?Dr:void 0}et+=Wt}}function cp(A,O,q,ne,me,_e,Le,Ne,et){var pt=gf(ne,_e,Le),vt=vf(ne,me),Vt=vt*Le,Qt=0===A[0].x||A[0].x===et||0===A[0].y||A[0].y===et;return O-Vt<O/4&&(O=Vt+O/4),function Wt(ur,Tr,Rr,Dr,qr,Yr,Kr,vn,Sn){for(var Gn=Yr/2,Hn=mf(ur),$n=0,hi=Tr-Rr,pi=[],ni=0;ni<ur.length-1;ni++){for(var xi=ur[ni],vi=ur[ni+1],di=xi.dist(vi),ra=vi.angleTo(xi);hi+Rr<$n+di;){var Ki=((hi+=Rr)-$n)/di,la=En(xi.x,vi.x,Ki),Ei=En(xi.y,vi.y,Ki);if(la>=0&&la<Sn&&Ei>=0&&Ei<Sn&&hi-Gn>=0&&hi+Gn<=Hn){var $i=new Al(la,Ei,ra,ni);$i._round(),Dr&&!df(ur,$i,Yr,Dr,qr)||pi.push($i)}}$n+=di}return vn||pi.length||Kr||(pi=Wt(ur,$n/2,Rr,Dr,qr,Yr,Kr,!0,Sn)),pi}(A,Qt?O/2*Ne%O:(vt/2+2*_e)*Le*Ne%O,O,pt,q,Vt,Qt,!1,et)}function yf(A,O,q,ne,me){for(var _e=[],Le=0;Le<A.length;Le++)for(var Ne=A[Le],et=void 0,pt=0;pt<Ne.length-1;pt++){var vt=Ne[pt],Vt=Ne[pt+1];vt.x<O&&Vt.x<O||(vt.x<O?vt=new r(O,vt.y+(O-vt.x)/(Vt.x-vt.x)*(Vt.y-vt.y))._round():Vt.x<O&&(Vt=new r(O,vt.y+(O-vt.x)/(Vt.x-vt.x)*(Vt.y-vt.y))._round()),vt.y<q&&Vt.y<q||(vt.y<q?vt=new r(vt.x+(q-vt.y)/(Vt.y-vt.y)*(Vt.x-vt.x),q)._round():Vt.y<q&&(Vt=new r(vt.x+(q-vt.y)/(Vt.y-vt.y)*(Vt.x-vt.x),q)._round()),vt.x>=ne&&Vt.x>=ne||(vt.x>=ne?vt=new r(ne,vt.y+(ne-vt.x)/(Vt.x-vt.x)*(Vt.y-vt.y))._round():Vt.x>=ne&&(Vt=new r(ne,vt.y+(ne-vt.x)/(Vt.x-vt.x)*(Vt.y-vt.y))._round()),vt.y>=me&&Vt.y>=me||(vt.y>=me?vt=new r(vt.x+(me-vt.y)/(Vt.y-vt.y)*(Vt.x-vt.x),me)._round():Vt.y>=me&&(Vt=new r(vt.x+(me-vt.y)/(Vt.y-vt.y)*(Vt.x-vt.x),me)._round()),et&&vt.equals(et[et.length-1])||_e.push(et=[vt]),et.push(Vt)))))}return _e}function xf(A,O,q,ne){var me=[],_e=A.image,Le=_e.pixelRatio,Ne=_e.paddedRect.w-2,et=_e.paddedRect.h-2,pt=A.right-A.left,vt=A.bottom-A.top,Vt=_e.stretchX||[[0,Ne]],Qt=_e.stretchY||[[0,et]],Wt=function($i,Aa){return $i+Aa[1]-Aa[0]},ur=Vt.reduce(Wt,0),Tr=Qt.reduce(Wt,0),Rr=Ne-ur,Dr=et-Tr,qr=0,Yr=ur,Kr=0,vn=Tr,Sn=0,Gn=Rr,Hn=0,$n=Dr;if(_e.content&&ne){var hi=_e.content;qr=_c(Vt,0,hi[0]),Kr=_c(Qt,0,hi[1]),Yr=_c(Vt,hi[0],hi[2]),vn=_c(Qt,hi[1],hi[3]),Sn=hi[0]-qr,Hn=hi[1]-Kr,Gn=hi[2]-hi[0]-Yr,$n=hi[3]-hi[1]-vn}var pi=function($i,Aa,xa,Oa){var ba=wc($i.stretch-qr,Yr,pt,A.left),uo=Tc($i.fixed-Sn,Gn,$i.stretch,ur),Da=wc(Aa.stretch-Kr,vn,vt,A.top),zo=Tc(Aa.fixed-Hn,$n,Aa.stretch,Tr),ko=wc(xa.stretch-qr,Yr,pt,A.left),Eo=Tc(xa.fixed-Sn,Gn,xa.stretch,ur),Go=wc(Oa.stretch-Kr,vn,vt,A.top),jo=Tc(Oa.fixed-Hn,$n,Oa.stretch,Tr),fo=new r(ba,Da),Co=new r(ko,Da),to=new r(ko,Go),vo=new r(ba,Go),Hi=new r(uo/Le,zo/Le),ia=new r(Eo/Le,jo/Le),Ya=O*Math.PI/180;if(Ya){var Za=Math.sin(Ya),Ua=Math.cos(Ya),za=[Ua,-Za,Za,Ua];fo._matMult(za),Co._matMult(za),vo._matMult(za),to._matMult(za)}var pa=$i.stretch+$i.fixed,qo=Aa.stretch+Aa.fixed;return{tl:fo,tr:Co,bl:vo,br:to,tex:{x:_e.paddedRect.x+1+pa,y:_e.paddedRect.y+1+qo,w:xa.stretch+xa.fixed-pa,h:Oa.stretch+Oa.fixed-qo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Hi,pixelOffsetBR:ia,minFontScaleX:Gn/Le/pt,minFontScaleY:$n/Le/vt,isSDF:q}};if(ne&&(_e.stretchX||_e.stretchY))for(var ni=bf(Vt,Rr,ur),xi=bf(Qt,Dr,Tr),vi=0;vi<ni.length-1;vi++)for(var di=ni[vi],ra=ni[vi+1],Ki=0;Ki<xi.length-1;Ki++)me.push(pi(di,xi[Ki],ra,xi[Ki+1]));else me.push(pi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ne+1},{fixed:0,stretch:et+1}));return me}function _c(A,O,q){for(var ne=0,me=0,_e=A;me<_e.length;me+=1){var Le=_e[me];ne+=Math.max(O,Math.min(q,Le[1]))-Math.max(O,Math.min(q,Le[0]))}return ne}function bf(A,O,q){for(var ne=[{fixed:-1,stretch:0}],me=0,_e=A;me<_e.length;me+=1){var Le=_e[me],Ne=Le[0],et=Le[1],pt=ne[ne.length-1];ne.push({fixed:Ne-pt.stretch,stretch:pt.stretch}),ne.push({fixed:Ne-pt.stretch,stretch:pt.stretch+(et-Ne)})}return ne.push({fixed:O+1,stretch:q}),ne}function wc(A,O,q,ne){return A/O*q+ne}function Tc(A,O,q,ne){return A-O*q/ne}var kc=function(A,O,q,ne,me,_e,Le,Ne,et,pt){if(this.boxStartIndex=A.length,et){var vt=_e.top,Vt=_e.bottom,Qt=_e.collisionPadding;Qt&&(vt-=Qt[1],Vt+=Qt[3]);var Wt=Vt-vt;Wt>0&&(Wt=Math.max(10,Wt),this.circleDiameter=Wt)}else{var ur=_e.top*Le-Ne,Tr=_e.bottom*Le+Ne,Rr=_e.left*Le-Ne,Dr=_e.right*Le+Ne,qr=_e.collisionPadding;if(qr&&(Rr-=qr[0]*Le,ur-=qr[1]*Le,Dr+=qr[2]*Le,Tr+=qr[3]*Le),pt){var Yr=new r(Rr,ur),Kr=new r(Dr,ur),vn=new r(Rr,Tr),Sn=new r(Dr,Tr),Gn=pt*Math.PI/180;Yr._rotate(Gn),Kr._rotate(Gn),vn._rotate(Gn),Sn._rotate(Gn),Rr=Math.min(Yr.x,Kr.x,vn.x,Sn.x),Dr=Math.max(Yr.x,Kr.x,vn.x,Sn.x),ur=Math.min(Yr.y,Kr.y,vn.y,Sn.y),Tr=Math.max(Yr.y,Kr.y,vn.y,Sn.y)}A.emplaceBack(O.x,O.y,Rr,ur,Dr,Tr,q,ne,me)}this.boxEndIndex=A.length},Ml=function(A,O){if(void 0===A&&(A=[]),void 0===O&&(O=up),this.data=A,this.length=this.data.length,this.compare=O,this.length>0)for(var q=(this.length>>1)-1;q>=0;q--)this._down(q)};function up(A,O){return A<O?-1:A>O?1:0}function fp(A,O,q){void 0===O&&(O=1),void 0===q&&(q=!1);for(var ne=1/0,me=1/0,_e=-1/0,Le=-1/0,Ne=A[0],et=0;et<Ne.length;et++){var pt=Ne[et];(!et||pt.x<ne)&&(ne=pt.x),(!et||pt.y<me)&&(me=pt.y),(!et||pt.x>_e)&&(_e=pt.x),(!et||pt.y>Le)&&(Le=pt.y)}var Qt=Math.min(_e-ne,Le-me),Wt=Qt/2,ur=new Ml([],hp);if(0===Qt)return new r(ne,me);for(var Tr=ne;Tr<_e;Tr+=Qt)for(var Rr=me;Rr<Le;Rr+=Qt)ur.push(new Sl(Tr+Wt,Rr+Wt,Wt,A));for(var Dr=function(Kr){for(var vn=0,Sn=0,Gn=0,Hn=Kr[0],$n=0,hi=Hn.length,pi=hi-1;$n<hi;pi=$n++){var ni=Hn[$n],xi=Hn[pi],vi=ni.x*xi.y-xi.x*ni.y;Sn+=(ni.x+xi.x)*vi,Gn+=(ni.y+xi.y)*vi,vn+=3*vi}return new Sl(Sn/vn,Gn/vn,0,Kr)}(A),qr=ur.length;ur.length;){var Yr=ur.pop();(Yr.d>Dr.d||!Dr.d)&&(Dr=Yr,q&&console.log("found best %d after %d probes",Math.round(1e4*Yr.d)/1e4,qr)),Yr.max-Dr.d<=O||(ur.push(new Sl(Yr.p.x-(Wt=Yr.h/2),Yr.p.y-Wt,Wt,A)),ur.push(new Sl(Yr.p.x+Wt,Yr.p.y-Wt,Wt,A)),ur.push(new Sl(Yr.p.x-Wt,Yr.p.y+Wt,Wt,A)),ur.push(new Sl(Yr.p.x+Wt,Yr.p.y+Wt,Wt,A)),qr+=4)}return q&&(console.log("num probes: "+qr),console.log("best distance: "+Dr.d)),Dr.p}function hp(A,O){return O.max-A.max}function Sl(A,O,q,ne){this.p=new r(A,O),this.h=q,this.d=function(me,_e){for(var Le=!1,Ne=1/0,et=0;et<_e.length;et++)for(var pt=_e[et],vt=0,Vt=pt.length,Qt=Vt-1;vt<Vt;Qt=vt++){var Wt=pt[vt],ur=pt[Qt];Wt.y>me.y!=ur.y>me.y&&me.x<(ur.x-Wt.x)*(me.y-Wt.y)/(ur.y-Wt.y)+Wt.x&&(Le=!Le),Ne=Math.min(Ne,Vs(me,Wt,ur))}return(Le?1:-1)*Math.sqrt(Ne)}(this.p,ne),this.max=this.d+this.h*Math.SQRT2}Ml.prototype.push=function(A){this.data.push(A),this.length++,this._up(this.length-1)},Ml.prototype.pop=function(){if(0!==this.length){var A=this.data[0],O=this.data.pop();return this.length--,this.length>0&&(this.data[0]=O,this._down(0)),A}},Ml.prototype.peek=function(){return this.data[0]},Ml.prototype._up=function(A){for(var O=this.data,q=this.compare,ne=O[A];A>0;){var me=A-1>>1,_e=O[me];if(q(ne,_e)>=0)break;O[A]=_e,A=me}O[A]=ne},Ml.prototype._down=function(A){for(var O=this.data,q=this.compare,ne=this.length>>1,me=O[A];A<ne;){var _e=1+(A<<1),Le=O[_e],Ne=_e+1;if(Ne<this.length&&q(O[Ne],Le)<0&&(_e=Ne,Le=O[Ne]),q(Le,me)>=0)break;O[A]=Le,A=_e}O[A]=me};var pu=Number.POSITIVE_INFINITY;function _f(A,O){return O[1]!==pu?function(q,ne,me){var _e=0,Le=0;switch(ne=Math.abs(ne),me=Math.abs(me),q){case"top-right":case"top-left":case"top":Le=me-7;break;case"bottom-right":case"bottom-left":case"bottom":Le=7-me}switch(q){case"top-right":case"bottom-right":case"right":_e=-ne;break;case"top-left":case"bottom-left":case"left":_e=ne}return[_e,Le]}(A,O[0],O[1]):function(q,ne){var me=0,_e=0;ne<0&&(ne=0);var Le=ne/Math.sqrt(2);switch(q){case"top-right":case"top-left":_e=Le-7;break;case"bottom-right":case"bottom-left":_e=7-Le;break;case"bottom":_e=7-ne;break;case"top":_e=ne-7}switch(q){case"top-right":case"bottom-right":me=-Le;break;case"top-left":case"bottom-left":me=Le;break;case"left":me=ne;break;case"right":me=-ne}return[me,_e]}(A,O[0])}function du(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wf(A,O,q,ne,me,_e,Le,Ne,et,pt,vt,Vt,Qt,Wt,ur){var Tr=function(Kr,vn,Sn,Gn,Hn,$n,hi,pi){for(var ni=Gn.layout.get("text-rotate").evaluate($n,{})*Math.PI/180,xi=[],vi=0,di=vn.positionedLines;vi<di.length;vi+=1)for(var ra=di[vi],Ki=0,la=ra.positionedGlyphs;Ki<la.length;Ki+=1){var Ei=la[Ki];if(Ei.rect){var $i=Ei.rect||{},Aa=4,xa=!0,Oa=1,ba=0,uo=(Hn||pi)&&Ei.vertical,Da=Ei.metrics.advance*Ei.scale/2;if(pi&&vn.verticalizable&&(ba=ra.lineOffset/2-(Ei.imageName?-(24-Ei.metrics.width*Ei.scale)/2:24*(Ei.scale-1))),Ei.imageName){var Eo=hi[Ei.imageName];xa=Eo.sdf,Aa=1/(Oa=Eo.pixelRatio)}var Go=Hn?[Ei.x+Da,Ei.y]:[0,0],jo=Hn?[0,0]:[Ei.x+Da+Sn[0],Ei.y+Sn[1]-ba],fo=[0,0];uo&&(fo=jo,jo=[0,0]);var Co=(Ei.metrics.left-Aa)*Ei.scale-Da+jo[0],to=(-Ei.metrics.top-Aa)*Ei.scale+jo[1],vo=Co+$i.w*Ei.scale/Oa,Hi=to+$i.h*Ei.scale/Oa,ia=new r(Co,to),Ya=new r(vo,to),Za=new r(Co,Hi),Ua=new r(vo,Hi);if(uo){var za=new r(-Da,Da- -17),pa=-Math.PI/2,Wa=12-Da,as=new r(22-Wa,-(Ei.imageName?Wa:0)),Vo=new(Function.prototype.bind.apply(r,[null].concat(fo)));ia._rotateAround(pa,za)._add(as)._add(Vo),Ya._rotateAround(pa,za)._add(as)._add(Vo),Za._rotateAround(pa,za)._add(as)._add(Vo),Ua._rotateAround(pa,za)._add(as)._add(Vo)}if(ni){var Ss=Math.sin(ni),qs=Math.cos(ni),Ao=[qs,-Ss,Ss,qs];ia._matMult(Ao),Ya._matMult(Ao),Za._matMult(Ao),Ua._matMult(Ao)}var Es=new r(0,0),Cs=new r(0,0);xi.push({tl:ia,tr:Ya,bl:Za,br:Ua,tex:$i,writingMode:vn.writingMode,glyphOffset:Go,sectionIndex:Ei.sectionIndex,isSDF:xa,pixelOffsetTL:Es,pixelOffsetBR:Cs,minFontScaleX:0,minFontScaleY:0})}}return xi}(0,q,Ne,me,_e,Le,ne,A.allowVerticalPlacement),Rr=A.textSizeData,Dr=null;"source"===Rr.kind?(Dr=[128*me.layout.get("text-size").evaluate(Le,{})])[0]>32640&&M(A.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Rr.kind&&((Dr=[128*Wt.compositeTextSizes[0].evaluate(Le,{},ur),128*Wt.compositeTextSizes[1].evaluate(Le,{},ur)])[0]>32640||Dr[1]>32640)&&M(A.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),A.addSymbols(A.text,Tr,Dr,Ne,_e,Le,pt,O,et.lineStartIndex,et.lineLength,Qt,ur);for(var qr=0,Yr=vt;qr<Yr.length;qr+=1)Vt[Yr[qr]]=A.text.placedSymbolArray.length-1;return 4*Tr.length}function Tf(A){for(var O in A)return A[O];return null}function pp(A,O,q,ne){var me=A.compareText;if(O in me){for(var _e=me[O],Le=_e.length-1;Le>=0;Le--)if(ne.dist(_e[Le])<q)return!0}else me[O]=[];return me[O].push(ne),!1}var dp=_l.VectorTileFeature.types,mp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ac(A,O,q,ne,me,_e,Le,Ne,et,pt,vt,Vt,Qt){var Wt=Ne?Math.min(32640,Math.round(Ne[0])):0,ur=Ne?Math.min(32640,Math.round(Ne[1])):0;A.emplaceBack(O,q,Math.round(32*ne),Math.round(32*me),_e,Le,(Wt<<1)+(et?1:0),ur,16*pt,16*vt,256*Vt,256*Qt)}function mu(A,O,q){A.emplaceBack(O.x,O.y,q),A.emplaceBack(O.x,O.y,q),A.emplaceBack(O.x,O.y,q),A.emplaceBack(O.x,O.y,q)}function gp(A){for(var O=0,q=A.sections;O<q.length;O+=1)if(ci(q[O].text))return!0;return!1}var El=function(A){this.layoutVertexArray=new Ts,this.indexArray=new oo,this.programConfigurations=A,this.segments=new jt,this.dynamicLayoutVertexArray=new hs,this.opacityVertexArray=new Ws,this.placedSymbolArray=new Ue};El.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},El.prototype.upload=function(A,O,q,ne){this.isEmpty()||(q&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,cu.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,O),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,Hh.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,mp,!0),this.opacityVertexBuffer.itemSize=1),(q||ne)&&this.programConfigurations.upload(A))},El.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Qr("SymbolBuffers",El);var ec=function(A,O,q){this.layoutVertexArray=new A,this.layoutAttributes=O,this.indexArray=new q,this.segments=new jt,this.collisionVertexArray=new ks};ec.prototype.upload=function(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,Gh.members,!0)},ec.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Qr("CollisionBuffers",ec);var ga=function(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(Le){return Le.id}),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Gl([]),this.placementViewportMatrix=Gl([]);var O=this.layers[0]._unevaluatedLayout._values;this.textSizeData=hu(this.zoom,O["text-size"]),this.iconSizeData=hu(this.zoom,O["icon-size"]);var q=this.layers[0].layout,ne=q.get("symbol-sort-key"),me=q.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==me&&void 0!==ne.constantOr(1),this.sortFeaturesByY=("viewport-y"===me||"auto"===me&&!this.sortFeaturesByKey)&&(q.get("text-allow-overlap")||q.get("icon-allow-overlap")||q.get("text-ignore-placement")||q.get("icon-ignore-placement")),"point"===q.get("symbol-placement")&&(this.writingModes=q.get("text-writing-mode").map(function(Le){return ps[Le]})),this.stateDependentLayerIds=this.layers.filter(function(Le){return Le.isStateDependent()}).map(function(Le){return Le.id}),this.sourceID=A.sourceID};ga.prototype.createArrays=function(){this.text=new El(new ya(cu.members,this.layers,this.zoom,function(A){return/^text/.test(A)})),this.icon=new El(new ya(cu.members,this.layers,this.zoom,function(A){return/^icon/.test(A)})),this.glyphOffsetArray=new kt,this.lineVertexArray=new Pt,this.symbolInstances=new at},ga.prototype.calculateGlyphDependencies=function(A,O,q,ne,me){for(var _e=0;_e<A.length;_e++)if(O[A.charCodeAt(_e)]=!0,(q||ne)&&me){var Le=Kl[A.charAt(_e)];Le&&(O[Le.charCodeAt(0)]=!0)}},ga.prototype.populate=function(A,O,q){var ne=this.layers[0],me=ne.layout,_e=me.get("text-font"),Le=me.get("text-field"),Ne=me.get("icon-image"),et=("constant"!==Le.value.kind||Le.value.value instanceof dr&&!Le.value.value.isEmpty()||Le.value.value.toString().length>0)&&("constant"!==_e.value.kind||_e.value.value.length>0),pt="constant"!==Ne.value.kind||!!Ne.value.value||Object.keys(Ne.parameters).length>0,vt=me.get("symbol-sort-key");if(this.features=[],et||pt){for(var Vt=O.iconDependencies,Qt=O.glyphDependencies,Wt=O.availableImages,ur=new fa(this.zoom),Tr=0,Rr=A;Tr<Rr.length;Tr+=1){var Dr=Rr[Tr],qr=Dr.feature,Yr=Dr.id,Kr=Dr.index,vn=Dr.sourceLayerIndex,Sn=ne._featureFilter.needGeometry,Gn={type:qr.type,id:Yr,properties:qr.properties,geometry:Sn?Ta(qr):[]};if(ne._featureFilter.filter(ur,Gn,q)){Sn||(Gn.geometry=Ta(qr));var Hn=void 0;if(et){var $n=ne.getValueAndResolveTokens("text-field",Gn,q,Wt),hi=dr.factory($n);gp(hi)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ka()||this.hasRTLText&&go.isParsed())&&(Hn=Yh(hi,ne,Gn))}var pi=void 0;if(pt){var ni=ne.getValueAndResolveTokens("icon-image",Gn,q,Wt);pi=ni instanceof xr?ni:xr.fromString(ni)}if(Hn||pi){var xi=this.sortFeaturesByKey?vt.evaluate(Gn,{},q):void 0,vi={id:Yr,text:Hn,icon:pi,index:Kr,sourceLayerIndex:vn,geometry:Ta(qr),properties:qr.properties,type:dp[qr.type],sortKey:xi};if(this.features.push(vi),pi&&(Vt[pi.name]=!0),Hn){var di=_e.evaluate(Gn,{},q).join(","),ra="map"===me.get("text-rotation-alignment")&&"point"!==me.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ps.vertical)>=0;for(var Ki=0,la=Hn.sections;Ki<la.length;Ki+=1){var Ei=la[Ki];if(Ei.image)Vt[Ei.image.name]=!0;else{var $i=Vi(Hn.toString()),Aa=Ei.fontStack||di,xa=Qt[Aa]=Qt[Aa]||{};this.calculateGlyphDependencies(Ei.text,xa,ra,this.allowVerticalPlacement,$i)}}}}}}"line"===me.get("symbol-placement")&&(this.features=function(Oa){var ba={},uo={},Da=[],zo=0;function ko(Ua){Da.push(Oa[Ua]),zo++}function Eo(Ua,za,pa){var Wa=uo[Ua];return delete uo[Ua],uo[za]=Wa,Da[Wa].geometry[0].pop(),Da[Wa].geometry[0]=Da[Wa].geometry[0].concat(pa[0]),Wa}function Go(Ua,za,pa){var Wa=ba[za];return delete ba[za],ba[Ua]=Wa,Da[Wa].geometry[0].shift(),Da[Wa].geometry[0]=pa[0].concat(Da[Wa].geometry[0]),Wa}function jo(Ua,za,pa){var Wa=pa?za[0][za[0].length-1]:za[0][0];return Ua+":"+Wa.x+":"+Wa.y}for(var fo=0;fo<Oa.length;fo++){var Co=Oa[fo],to=Co.geometry,vo=Co.text?Co.text.toString():null;if(vo){var Hi=jo(vo,to),ia=jo(vo,to,!0);if(Hi in uo&&ia in ba&&uo[Hi]!==ba[ia]){var Ya=Go(Hi,ia,to),Za=Eo(Hi,ia,Da[Ya].geometry);delete ba[Hi],delete uo[ia],uo[jo(vo,Da[Za].geometry,!0)]=Za,Da[Ya].geometry=null}else Hi in uo?Eo(Hi,ia,to):ia in ba?Go(Hi,ia,to):(ko(fo),ba[Hi]=zo-1,uo[ia]=zo-1)}else ko(fo)}return Da.filter(function(Ua){return Ua.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Oa,ba){return Oa.sortKey-ba.sortKey})}},ga.prototype.update=function(A,O,q){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,O,this.layers,q),this.icon.programConfigurations.updatePaintArrays(A,O,this.layers,q))},ga.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},ga.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ga.prototype.upload=function(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ga.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ga.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ga.prototype.addToLineVertexArray=function(A,O){var q=this.lineVertexArray.length;if(void 0!==A.segment){for(var ne=A.dist(O[A.segment+1]),me=A.dist(O[A.segment]),_e={},Le=A.segment+1;Le<O.length;Le++)_e[Le]={x:O[Le].x,y:O[Le].y,tileUnitDistanceFromAnchor:ne},Le<O.length-1&&(ne+=O[Le+1].dist(O[Le]));for(var Ne=A.segment||0;Ne>=0;Ne--)_e[Ne]={x:O[Ne].x,y:O[Ne].y,tileUnitDistanceFromAnchor:me},Ne>0&&(me+=O[Ne-1].dist(O[Ne]));for(var et=0;et<O.length;et++){var pt=_e[et];this.lineVertexArray.emplaceBack(pt.x,pt.y,pt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:q,lineLength:this.lineVertexArray.length-q}},ga.prototype.addSymbols=function(A,O,q,ne,me,_e,Le,Ne,et,pt,vt,Vt){for(var Qt=A.indexArray,Wt=A.layoutVertexArray,ur=A.segments.prepareSegment(4*O.length,Wt,Qt,_e.sortKey),Tr=this.glyphOffsetArray.length,Rr=ur.vertexLength,Dr=this.allowVerticalPlacement&&Le===ps.vertical?Math.PI/2:0,qr=_e.text&&_e.text.sections,Yr=0;Yr<O.length;Yr++){var Kr=O[Yr],vn=Kr.tl,Sn=Kr.tr,Gn=Kr.bl,Hn=Kr.br,$n=Kr.tex,hi=Kr.pixelOffsetTL,pi=Kr.pixelOffsetBR,ni=Kr.minFontScaleX,xi=Kr.minFontScaleY,vi=Kr.glyphOffset,di=Kr.isSDF,ra=Kr.sectionIndex,Ki=ur.vertexLength,la=vi[1];Ac(Wt,Ne.x,Ne.y,vn.x,la+vn.y,$n.x,$n.y,q,di,hi.x,hi.y,ni,xi),Ac(Wt,Ne.x,Ne.y,Sn.x,la+Sn.y,$n.x+$n.w,$n.y,q,di,pi.x,hi.y,ni,xi),Ac(Wt,Ne.x,Ne.y,Gn.x,la+Gn.y,$n.x,$n.y+$n.h,q,di,hi.x,pi.y,ni,xi),Ac(Wt,Ne.x,Ne.y,Hn.x,la+Hn.y,$n.x+$n.w,$n.y+$n.h,q,di,pi.x,pi.y,ni,xi),mu(A.dynamicLayoutVertexArray,Ne,Dr),Qt.emplaceBack(Ki,Ki+1,Ki+2),Qt.emplaceBack(Ki+1,Ki+2,Ki+3),ur.vertexLength+=4,ur.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(vi[0]),Yr!==O.length-1&&ra===O[Yr+1].sectionIndex||A.programConfigurations.populatePaintArrays(Wt.length,_e,_e.index,{},Vt,qr&&qr[ra])}A.placedSymbolArray.emplaceBack(Ne.x,Ne.y,Tr,this.glyphOffsetArray.length-Tr,Rr,et,pt,Ne.segment,q?q[0]:0,q?q[1]:0,ne[0],ne[1],Le,0,!1,0,vt)},ga.prototype._addCollisionDebugVertex=function(A,O,q,ne,me,_e){return O.emplaceBack(0,0),A.emplaceBack(q.x,q.y,ne,me,Math.round(_e.x),Math.round(_e.y))},ga.prototype.addCollisionDebugVertices=function(A,O,q,ne,me,_e,Le){var Ne=me.segments.prepareSegment(4,me.layoutVertexArray,me.indexArray),et=Ne.vertexLength,pt=me.layoutVertexArray,vt=me.collisionVertexArray,Vt=Le.anchorX,Qt=Le.anchorY;this._addCollisionDebugVertex(pt,vt,_e,Vt,Qt,new r(A,O)),this._addCollisionDebugVertex(pt,vt,_e,Vt,Qt,new r(q,O)),this._addCollisionDebugVertex(pt,vt,_e,Vt,Qt,new r(q,ne)),this._addCollisionDebugVertex(pt,vt,_e,Vt,Qt,new r(A,ne)),Ne.vertexLength+=4;var Wt=me.indexArray;Wt.emplaceBack(et,et+1),Wt.emplaceBack(et+1,et+2),Wt.emplaceBack(et+2,et+3),Wt.emplaceBack(et+3,et),Ne.primitiveLength+=4},ga.prototype.addDebugCollisionBoxes=function(A,O,q,ne){for(var me=A;me<O;me++){var _e=this.collisionBoxArray.get(me);this.addCollisionDebugVertices(_e.x1,_e.y1,_e.x2,_e.y2,ne?this.textCollisionBox:this.iconCollisionBox,_e.anchorPoint,q)}},ga.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ec(ys,ef.members,F),this.iconCollisionBox=new ec(ys,ef.members,F);for(var A=0;A<this.symbolInstances.length;A++){var O=this.symbolInstances.get(A);this.addDebugCollisionBoxes(O.textBoxStartIndex,O.textBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.iconBoxStartIndex,O.iconBoxEndIndex,O,!1),this.addDebugCollisionBoxes(O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,!1)}},ga.prototype._deserializeCollisionBoxesForSymbol=function(A,O,q,ne,me,_e,Le,Ne,et){for(var pt={},vt=O;vt<q;vt++){var Vt=A.get(vt);pt.textBox={x1:Vt.x1,y1:Vt.y1,x2:Vt.x2,y2:Vt.y2,anchorPointX:Vt.anchorPointX,anchorPointY:Vt.anchorPointY},pt.textFeatureIndex=Vt.featureIndex;break}for(var Qt=ne;Qt<me;Qt++){var Wt=A.get(Qt);pt.verticalTextBox={x1:Wt.x1,y1:Wt.y1,x2:Wt.x2,y2:Wt.y2,anchorPointX:Wt.anchorPointX,anchorPointY:Wt.anchorPointY},pt.verticalTextFeatureIndex=Wt.featureIndex;break}for(var ur=_e;ur<Le;ur++){var Tr=A.get(ur);pt.iconBox={x1:Tr.x1,y1:Tr.y1,x2:Tr.x2,y2:Tr.y2,anchorPointX:Tr.anchorPointX,anchorPointY:Tr.anchorPointY},pt.iconFeatureIndex=Tr.featureIndex;break}for(var Rr=Ne;Rr<et;Rr++){var Dr=A.get(Rr);pt.verticalIconBox={x1:Dr.x1,y1:Dr.y1,x2:Dr.x2,y2:Dr.y2,anchorPointX:Dr.anchorPointX,anchorPointY:Dr.anchorPointY},pt.verticalIconFeatureIndex=Dr.featureIndex;break}return pt},ga.prototype.deserializeCollisionBoxes=function(A){this.collisionArrays=[];for(var O=0;O<this.symbolInstances.length;O++){var q=this.symbolInstances.get(O);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,q.textBoxStartIndex,q.textBoxEndIndex,q.verticalTextBoxStartIndex,q.verticalTextBoxEndIndex,q.iconBoxStartIndex,q.iconBoxEndIndex,q.verticalIconBoxStartIndex,q.verticalIconBoxEndIndex))}},ga.prototype.hasTextData=function(){return this.text.segments.get().length>0},ga.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ga.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ga.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ga.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ga.prototype.addIndicesForPlacedSymbol=function(A,O){for(var q=A.placedSymbolArray.get(O),ne=q.vertexStartIndex+4*q.numGlyphs,me=q.vertexStartIndex;me<ne;me+=4)A.indexArray.emplaceBack(me,me+1,me+2),A.indexArray.emplaceBack(me+1,me+2,me+3)},ga.prototype.getSortedSymbolIndexes=function(A){if(this.sortedAngle===A&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var O=Math.sin(A),q=Math.cos(A),ne=[],me=[],_e=[],Le=0;Le<this.symbolInstances.length;++Le){_e.push(Le);var Ne=this.symbolInstances.get(Le);ne.push(0|Math.round(O*Ne.anchorX+q*Ne.anchorY)),me.push(Ne.featureIndex)}return _e.sort(function(et,pt){return ne[et]-ne[pt]||me[pt]-me[et]}),_e},ga.prototype.addToSortKeyRanges=function(A,O){var q=this.sortKeyRanges[this.sortKeyRanges.length-1];q&&q.sortKey===O?q.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:O,symbolInstanceStart:A,symbolInstanceEnd:A+1})},ga.prototype.sortFeatures=function(A){var O=this;if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var q=0,ne=this.symbolInstanceIndexes;q<ne.length;q+=1){var _e=this.symbolInstances.get(ne[q]);this.featureSortOrder.push(_e.featureIndex),[_e.rightJustifiedTextSymbolIndex,_e.centerJustifiedTextSymbolIndex,_e.leftJustifiedTextSymbolIndex].forEach(function(Le,Ne,et){Le>=0&&et.indexOf(Le)===Ne&&O.addIndicesForPlacedSymbol(O.text,Le)}),_e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,_e.verticalPlacedTextSymbolIndex),_e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_e.placedIconSymbolIndex),_e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Qr("SymbolBucket",ga,{omit:["layers","collisionBoxArray","features","compareText"]}),ga.MAX_GLYPHS=65535,ga.addDynamicAttributes=mu;var vp=new Io({"symbol-placement":new mi(be.layout_symbol["symbol-placement"]),"symbol-spacing":new mi(be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mi(be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ai(be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mi(be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mi(be.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new mi(be.layout_symbol["icon-ignore-placement"]),"icon-optional":new mi(be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mi(be.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ai(be.layout_symbol["icon-size"]),"icon-text-fit":new mi(be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mi(be.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ai(be.layout_symbol["icon-image"]),"icon-rotate":new Ai(be.layout_symbol["icon-rotate"]),"icon-padding":new mi(be.layout_symbol["icon-padding"]),"icon-keep-upright":new mi(be.layout_symbol["icon-keep-upright"]),"icon-offset":new Ai(be.layout_symbol["icon-offset"]),"icon-anchor":new Ai(be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mi(be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mi(be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mi(be.layout_symbol["text-rotation-alignment"]),"text-field":new Ai(be.layout_symbol["text-field"]),"text-font":new Ai(be.layout_symbol["text-font"]),"text-size":new Ai(be.layout_symbol["text-size"]),"text-max-width":new Ai(be.layout_symbol["text-max-width"]),"text-line-height":new mi(be.layout_symbol["text-line-height"]),"text-letter-spacing":new Ai(be.layout_symbol["text-letter-spacing"]),"text-justify":new Ai(be.layout_symbol["text-justify"]),"text-radial-offset":new Ai(be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mi(be.layout_symbol["text-variable-anchor"]),"text-anchor":new Ai(be.layout_symbol["text-anchor"]),"text-max-angle":new mi(be.layout_symbol["text-max-angle"]),"text-writing-mode":new mi(be.layout_symbol["text-writing-mode"]),"text-rotate":new Ai(be.layout_symbol["text-rotate"]),"text-padding":new mi(be.layout_symbol["text-padding"]),"text-keep-upright":new mi(be.layout_symbol["text-keep-upright"]),"text-transform":new Ai(be.layout_symbol["text-transform"]),"text-offset":new Ai(be.layout_symbol["text-offset"]),"text-allow-overlap":new mi(be.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new mi(be.layout_symbol["text-ignore-placement"]),"text-optional":new mi(be.layout_symbol["text-optional"])}),gu={paint:new Io({"icon-opacity":new Ai(be.paint_symbol["icon-opacity"]),"icon-color":new Ai(be.paint_symbol["icon-color"]),"icon-halo-color":new Ai(be.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ai(be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ai(be.paint_symbol["icon-halo-blur"]),"icon-translate":new mi(be.paint_symbol["icon-translate"]),"icon-translate-anchor":new mi(be.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ai(be.paint_symbol["text-opacity"]),"text-color":new Ai(be.paint_symbol["text-color"],{runtimeType:At,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),"text-halo-color":new Ai(be.paint_symbol["text-halo-color"]),"text-halo-width":new Ai(be.paint_symbol["text-halo-width"]),"text-halo-blur":new Ai(be.paint_symbol["text-halo-blur"]),"text-translate":new mi(be.paint_symbol["text-translate"]),"text-translate-anchor":new mi(be.paint_symbol["text-translate-anchor"])}),layout:vp},Cl=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:Dt,this.defaultValue=A};Cl.prototype.evaluate=function(A){if(A.formattedSection){var O=this.defaultValue.property.overrides;if(O&&O.hasOverride(A.formattedSection))return O.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default},Cl.prototype.eachChild=function(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)},Cl.prototype.outputDefined=function(){return!1},Cl.prototype.serialize=function(){return null},Qr("FormatSectionOverride",Cl,{omit:["defaultValue"]});var yp=function(A){function O(q){A.call(this,q,gu)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.recalculate=function(q,ne){if(A.prototype.recalculate.call(this,q,ne),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var me=this.layout.get("text-writing-mode");if(me){for(var _e=[],Le=0,Ne=me;Le<Ne.length;Le+=1){var et=Ne[Le];_e.indexOf(et)<0&&_e.push(et)}this.layout._values["text-writing-mode"]=_e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},O.prototype.getValueAndResolveTokens=function(q,ne,me,_e){var et,Le=this.layout.get(q).evaluate(ne,{},me,_e),Ne=this._unevaluatedLayout._values[q];return Ne.isDataDriven()||nr(Ne.value)||!Le?Le:(et=ne.properties,Le.replace(/{([^{}]+)}/g,function(vt,Vt){return Vt in et?String(et[Vt]):""}))},O.prototype.createBucket=function(q){return new ga(q)},O.prototype.queryRadius=function(){return 0},O.prototype.queryIntersectsFeature=function(){return!1},O.prototype._setPaintOverrides=function(){for(var q=0,ne=gu.paint.overridableProperties;q<ne.length;q+=1){var me=ne[q];if(O.hasPaintOverride(this.layout,me)){var et,_e=this.paint.get(me),Le=new Cl(_e),Ne=new er(Le,_e.property.specification);et="constant"===_e.value.kind||"source"===_e.value.kind?new ir("source",Ne):new vr("composite",Ne,_e.value.zoomStops,_e.value._interpolationType),this.paint._values[me]=new Va(_e.property,et,_e.parameters)}}},O.prototype._handleOverridablePaintPropertyUpdate=function(q,ne,me){return!(!this.layout||ne.isDataDriven()||me.isDataDriven())&&O.hasPaintOverride(this.layout,q)},O.hasPaintOverride=function(q,ne){var me=q.get("text-field"),_e=gu.paint.properties[ne],Le=!1,Ne=function(vt){for(var Vt=0,Qt=vt;Vt<Qt.length;Vt+=1)if(_e.overrides&&_e.overrides.hasOverride(Qt[Vt]))return void(Le=!0)};if("constant"===me.value.kind&&me.value.value instanceof dr)Ne(me.value.value.sections);else if("source"===me.value.kind){var et=function(vt){Le||(vt instanceof cn&&Hr(vt.value)===it?Ne(vt.value.sections):vt instanceof wn?Ne(vt.sections):vt.eachChild(et))},pt=me.value;pt._styleExpression&&et(pt._styleExpression.expression)}return Le},O}(Ho),xp={paint:new Io({"background-color":new mi(be.paint_background["background-color"]),"background-pattern":new zs(be.paint_background["background-pattern"]),"background-opacity":new mi(be.paint_background["background-opacity"])})},bp=function(A){function O(q){A.call(this,q,xp)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O}(Ho),_p={paint:new Io({"raster-opacity":new mi(be.paint_raster["raster-opacity"]),"raster-hue-rotate":new mi(be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mi(be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mi(be.paint_raster["raster-brightness-max"]),"raster-saturation":new mi(be.paint_raster["raster-saturation"]),"raster-contrast":new mi(be.paint_raster["raster-contrast"]),"raster-resampling":new mi(be.paint_raster["raster-resampling"]),"raster-fade-duration":new mi(be.paint_raster["raster-fade-duration"])})},wp=function(A){function O(q){A.call(this,q,_p)}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O}(Ho),Tp=function(A){function O(q){A.call(this,q,{}),this.implementation=q}return A&&(O.__proto__=A),(O.prototype=Object.create(A&&A.prototype)).constructor=O,O.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},O.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},O.prototype.recalculate=function(){},O.prototype.updateTransitions=function(){},O.prototype.hasTransition=function(){},O.prototype.serialize=function(){},O.prototype.onAdd=function(q){this.implementation.onAdd&&this.implementation.onAdd(q,q.painter.context.gl)},O.prototype.onRemove=function(q){this.implementation.onRemove&&this.implementation.onRemove(q,q.painter.context.gl)},O}(Ho),kp={circle:ch,heatmap:fh,hillshade:ph,fill:Ch,"fill-extrusion":Bh,line:Uh,symbol:yp,background:bp,raster:wp},kf=self.HTMLImageElement,Af=self.HTMLCanvasElement,Mf=self.HTMLVideoElement,Sf=self.ImageData,Mc=self.ImageBitmap,hl=function(A,O,q,ne){this.context=A,this.format=q,this.texture=A.gl.createTexture(),this.update(O,ne)};hl.prototype.update=function(A,O,q){var ne=A.width,me=A.height,_e=!(this.size&&this.size[0]===ne&&this.size[1]===me||q),Le=this.context,Ne=Le.gl;if(this.useMipmap=Boolean(O&&O.useMipmap),Ne.bindTexture(Ne.TEXTURE_2D,this.texture),Le.pixelStoreUnpackFlipY.set(!1),Le.pixelStoreUnpack.set(1),Le.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ne.RGBA&&(!O||!1!==O.premultiply)),_e)this.size=[ne,me],A instanceof kf||A instanceof Af||A instanceof Mf||A instanceof Sf||Mc&&A instanceof Mc?Ne.texImage2D(Ne.TEXTURE_2D,0,this.format,this.format,Ne.UNSIGNED_BYTE,A):Ne.texImage2D(Ne.TEXTURE_2D,0,this.format,ne,me,0,this.format,Ne.UNSIGNED_BYTE,A.data);else{var et=q||{x:0,y:0},pt=et.x,vt=et.y;A instanceof kf||A instanceof Af||A instanceof Mf||A instanceof Sf||Mc&&A instanceof Mc?Ne.texSubImage2D(Ne.TEXTURE_2D,0,pt,vt,Ne.RGBA,Ne.UNSIGNED_BYTE,A):Ne.texSubImage2D(Ne.TEXTURE_2D,0,pt,vt,ne,me,Ne.RGBA,Ne.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ne.generateMipmap(Ne.TEXTURE_2D)},hl.prototype.bind=function(A,O,q){var ne=this.context.gl;ne.bindTexture(ne.TEXTURE_2D,this.texture),q!==ne.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(q=ne.LINEAR),A!==this.filter&&(ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MAG_FILTER,A),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MIN_FILTER,q||A),this.filter=A),O!==this.wrap&&(ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_S,O),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_T,O),this.wrap=O)},hl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},hl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var vu=function(A){var O=this;this._callback=A,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){O._triggered=!1,O._callback()})};vu.prototype.trigger=function(){var A=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){A._triggered=!1,A._callback()},0))},vu.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Ll=function(A,O,q){this.target=A,this.parent=O,this.mapId=q,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},u(["receive","process"],this),this.invoker=new vu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=S()?A:self};function Ef(A,O,q){var ne=2*Math.PI*6378137/256/Math.pow(2,q);return[A*ne-2*Math.PI*6378137/2,O*ne-2*Math.PI*6378137/2]}Ll.prototype.send=function(A,O,q,ne,me){var _e=this;void 0===me&&(me=!1);var Le=Math.round(1e18*Math.random()).toString(36).substring(0,10);q&&(this.callbacks[Le]=q);var Ne=D(this.globalScope)?void 0:[];return this.target.postMessage({id:Le,type:A,hasCallback:!!q,targetMapId:ne,mustQueue:me,sourceMapId:this.mapId,data:oi(O,Ne)},Ne),{cancel:function(){q&&delete _e.callbacks[Le],_e.target.postMessage({id:Le,type:"<cancel>",targetMapId:ne,sourceMapId:_e.mapId})}}},Ll.prototype.receive=function(A){var O=A.data,q=O.id;if(q&&(!O.targetMapId||this.mapId===O.targetMapId))if("<cancel>"===O.type){delete this.tasks[q];var ne=this.cancelCallbacks[q];delete this.cancelCallbacks[q],ne&&ne()}else S()||O.mustQueue?(this.tasks[q]=O,this.taskQueue.push(q),this.invoker.trigger()):this.processTask(q,O)},Ll.prototype.process=function(){if(this.taskQueue.length){var A=this.taskQueue.shift(),O=this.tasks[A];delete this.tasks[A],this.taskQueue.length&&this.invoker.trigger(),O&&this.processTask(A,O)}},Ll.prototype.processTask=function(A,O){var q=this;if("<response>"===O.type){var ne=this.callbacks[A];delete this.callbacks[A],ne&&(O.error?ne(Pi(O.error)):ne(null,Pi(O.data)))}else{var me=!1,_e=D(this.globalScope)?void 0:[],Le=O.hasCallback?function(vt,Vt){me=!0,delete q.cancelCallbacks[A],q.target.postMessage({id:A,type:"<response>",sourceMapId:q.mapId,error:vt?oi(vt):null,data:oi(Vt,_e)},_e)}:function(vt){me=!0},Ne=null,et=Pi(O.data);if(this.parent[O.type])Ne=this.parent[O.type](O.sourceMapId,et,Le);else if(this.parent.getWorkerSource){var pt=O.type.split(".");Ne=this.parent.getWorkerSource(O.sourceMapId,pt[0],et.source)[pt[1]](et,Le)}else Le(new Error("Could not find function "+O.type));!me&&Ne&&Ne.cancel&&(this.cancelCallbacks[A]=Ne.cancel)}},Ll.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var lo=function(A,O){A&&(O?this.setSouthWest(A).setNorthEast(O):4===A.length?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};lo.prototype.setNorthEast=function(A){return this._ne=A instanceof Ia?new Ia(A.lng,A.lat):Ia.convert(A),this},lo.prototype.setSouthWest=function(A){return this._sw=A instanceof Ia?new Ia(A.lng,A.lat):Ia.convert(A),this},lo.prototype.extend=function(A){var O,q,ne=this._sw,me=this._ne;if(A instanceof Ia)O=A,q=A;else{if(!(A instanceof lo))return Array.isArray(A)?4===A.length||A.every(Array.isArray)?this.extend(lo.convert(A)):this.extend(Ia.convert(A)):this;if(q=A._ne,!(O=A._sw)||!q)return this}return ne||me?(ne.lng=Math.min(O.lng,ne.lng),ne.lat=Math.min(O.lat,ne.lat),me.lng=Math.max(q.lng,me.lng),me.lat=Math.max(q.lat,me.lat)):(this._sw=new Ia(O.lng,O.lat),this._ne=new Ia(q.lng,q.lat)),this},lo.prototype.getCenter=function(){return new Ia((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},lo.prototype.getSouthWest=function(){return this._sw},lo.prototype.getNorthEast=function(){return this._ne},lo.prototype.getNorthWest=function(){return new Ia(this.getWest(),this.getNorth())},lo.prototype.getSouthEast=function(){return new Ia(this.getEast(),this.getSouth())},lo.prototype.getWest=function(){return this._sw.lng},lo.prototype.getSouth=function(){return this._sw.lat},lo.prototype.getEast=function(){return this._ne.lng},lo.prototype.getNorth=function(){return this._ne.lat},lo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},lo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},lo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},lo.prototype.contains=function(A){var O=Ia.convert(A),q=O.lng,ne=O.lat,_e=this._sw.lng<=q&&q<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_e=this._sw.lng>=q&&q>=this._ne.lng),this._sw.lat<=ne&&ne<=this._ne.lat&&_e},lo.convert=function(A){return!A||A instanceof lo?A:new lo(A)};var Ia=function(A,O){if(isNaN(A)||isNaN(O))throw new Error("Invalid LngLat object: ("+A+", "+O+")");if(this.lng=+A,this.lat=+O,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ia.prototype.wrap=function(){return new Ia(s(this.lng,-180,180),this.lat)},Ia.prototype.toArray=function(){return[this.lng,this.lat]},Ia.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ia.prototype.distanceTo=function(A){var O=Math.PI/180,q=this.lat*O,ne=A.lat*O,me=Math.sin(q)*Math.sin(ne)+Math.cos(q)*Math.cos(ne)*Math.cos((A.lng-this.lng)*O);return 6371008.8*Math.acos(Math.min(me,1))},Ia.prototype.toBounds=function(A){void 0===A&&(A=0);var O=360*A/40075017,q=O/Math.cos(Math.PI/180*this.lat);return new lo(new Ia(this.lng-q,this.lat-O),new Ia(this.lng+q,this.lat+O))},Ia.convert=function(A){if(A instanceof Ia)return A;if(Array.isArray(A)&&(2===A.length||3===A.length))return new Ia(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&"object"==typeof A&&null!==A)return new Ia(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Cf=2*Math.PI*6371008.8;function Lf(A){return Cf*Math.cos(A*Math.PI/180)}function Pf(A){return(180+A)/360}function If(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function Of(A,O){return A/Lf(O)}function yu(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}var pl=function(A,O,q){void 0===q&&(q=0),this.x=+A,this.y=+O,this.z=+q};pl.fromLngLat=function(A,O){void 0===O&&(O=0);var q=Ia.convert(A);return new pl(Pf(q.lng),If(q.lat),Of(O,q.lat))},pl.prototype.toLngLat=function(){return new Ia(360*this.x-180,yu(this.y))},pl.prototype.toAltitude=function(){return this.z*Lf(yu(this.y))},pl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Cf*(A=yu(this.y),1/Math.cos(A*Math.PI/180));var A};var dl=function(A,O,q){this.z=A,this.x=O,this.y=q,this.key=tc(0,A,A,O,q)};dl.prototype.equals=function(A){return this.z===A.z&&this.x===A.x&&this.y===A.y},dl.prototype.url=function(A,O){var q,ne,me,_e,Le,Ne=(ne=this.y,me=this.z,_e=Ef(256*(q=this.x),256*(ne=Math.pow(2,me)-ne-1),me),Le=Ef(256*(q+1),256*(ne+1),me),_e[0]+","+_e[1]+","+Le[0]+","+Le[1]),et=function(pt,vt,Vt){for(var Qt,Wt="",ur=pt;ur>0;ur--)Wt+=(vt&(Qt=1<<ur-1)?1:0)+(Vt&Qt?2:0);return Wt}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===O?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",et).replace("{bbox-epsg-3857}",Ne)},dl.prototype.getTilePoint=function(A){var O=Math.pow(2,this.z);return new r(8192*(A.x*O-this.x),8192*(A.y*O-this.y))},dl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Df=function(A,O){this.wrap=A,this.canonical=O,this.key=tc(A,O.z,O.z,O.x,O.y)},co=function(A,O,q,ne,me){this.overscaledZ=A,this.wrap=O,this.canonical=new dl(q,+ne,+me),this.key=tc(O,A,q,ne,me)};function tc(A,O,q,ne,me){(A*=2)<0&&(A=-1*A-1);var _e=1<<q;return(_e*_e*A+_e*me+ne).toString(36)+q.toString(36)+O.toString(36)}co.prototype.equals=function(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)},co.prototype.scaledTo=function(A){var O=this.canonical.z-A;return A>this.canonical.z?new co(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new co(A,this.wrap,A,this.canonical.x>>O,this.canonical.y>>O)},co.prototype.calculateScaledKey=function(A,O){var q=this.canonical.z-A;return A>this.canonical.z?tc(this.wrap*+O,A,this.canonical.z,this.canonical.x,this.canonical.y):tc(this.wrap*+O,A,A,this.canonical.x>>q,this.canonical.y>>q)},co.prototype.isChildOf=function(A){if(A.wrap!==this.wrap)return!1;var O=this.canonical.z-A.canonical.z;return 0===A.overscaledZ||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>O&&A.canonical.y===this.canonical.y>>O},co.prototype.children=function(A){if(this.overscaledZ>=A)return[new co(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var O=this.canonical.z+1,q=2*this.canonical.x,ne=2*this.canonical.y;return[new co(O,this.wrap,O,q,ne),new co(O,this.wrap,O,q+1,ne),new co(O,this.wrap,O,q,ne+1),new co(O,this.wrap,O,q+1,ne+1)]},co.prototype.isLessThan=function(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))},co.prototype.wrapped=function(){return new co(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},co.prototype.unwrapTo=function(A){return new co(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)},co.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},co.prototype.toUnwrapped=function(){return new Df(this.wrap,this.canonical)},co.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},co.prototype.getTilePoint=function(A){return this.canonical.getTilePoint(new pl(A.x-this.wrap,A.y))},Qr("CanonicalTileID",dl),Qr("OverscaledTileID",co,{omit:["posMatrix"]});var Hs=function(A,O,q){if(this.uid=A,O.height!==O.width)throw new RangeError("DEM tiles must be square");if(q&&"mapbox"!==q&&"terrarium"!==q)return M('"'+q+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=O.height;var ne=this.dim=O.height-2;this.data=new Uint32Array(O.data.buffer),this.encoding=q||"mapbox";for(var me=0;me<ne;me++)this.data[this._idx(-1,me)]=this.data[this._idx(0,me)],this.data[this._idx(ne,me)]=this.data[this._idx(ne-1,me)],this.data[this._idx(me,-1)]=this.data[this._idx(me,0)],this.data[this._idx(me,ne)]=this.data[this._idx(me,ne-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ne,-1)]=this.data[this._idx(ne-1,0)],this.data[this._idx(-1,ne)]=this.data[this._idx(0,ne-1)],this.data[this._idx(ne,ne)]=this.data[this._idx(ne-1,ne-1)]};Hs.prototype.get=function(A,O){var q=new Uint8Array(this.data.buffer),ne=4*this._idx(A,O);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(q[ne],q[ne+1],q[ne+2])},Hs.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Hs.prototype._idx=function(A,O){if(A<-1||A>=this.dim+1||O<-1||O>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(O+1)*this.stride+(A+1)},Hs.prototype._unpackMapbox=function(A,O,q){return(256*A*256+256*O+q)/10-1e4},Hs.prototype._unpackTerrarium=function(A,O,q){return 256*A+O+q/256-32768},Hs.prototype.getPixels=function(){return new Wo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Hs.prototype.backfillBorder=function(A,O,q){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");var ne=O*this.dim,me=O*this.dim+this.dim,_e=q*this.dim,Le=q*this.dim+this.dim;switch(O){case-1:ne=me-1;break;case 1:me=ne+1}switch(q){case-1:_e=Le-1;break;case 1:Le=_e+1}for(var Ne=-O*this.dim,et=-q*this.dim,pt=_e;pt<Le;pt++)for(var vt=ne;vt<me;vt++)this.data[this._idx(vt,pt)]=A.data[this._idx(vt+Ne,pt+et)]},Qr("DEMData",Hs);var Sc=function(A){this._stringToNumber={},this._numberToString=[];for(var O=0;O<A.length;O++){var q=A[O];this._stringToNumber[q]=O,this._numberToString[O]=q}};Sc.prototype.encode=function(A){return this._stringToNumber[A]},Sc.prototype.decode=function(A){return this._numberToString[A]};var Ec=function(A,O,q,ne,me){this.type="Feature",this._vectorTileFeature=A,A._z=O,A._x=q,A._y=ne,this.properties=A.properties,this.id=me},xu={geometry:{configurable:!0}};xu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},xu.geometry.set=function(A){this._geometry=A},Ec.prototype.toJSON=function(){var A={geometry:this.geometry};for(var O in this)"_geometry"!==O&&"_vectorTileFeature"!==O&&(A[O]=this[O]);return A},Object.defineProperties(Ec.prototype,xu);var Pl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Pl.prototype.updateState=function(A,O,q){var ne=String(O);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][ne]=this.stateChanges[A][ne]||{},o(this.stateChanges[A][ne],q),null===this.deletedStates[A])for(var me in this.deletedStates[A]={},this.state[A])me!==ne&&(this.deletedStates[A][me]=null);else if(this.deletedStates[A]&&null===this.deletedStates[A][ne])for(var _e in this.deletedStates[A][ne]={},this.state[A][ne])q[_e]||(this.deletedStates[A][ne][_e]=null);else for(var Le in q)this.deletedStates[A]&&this.deletedStates[A][ne]&&null===this.deletedStates[A][ne][Le]&&delete this.deletedStates[A][ne][Le]},Pl.prototype.removeFeatureState=function(A,O,q){if(null!==this.deletedStates[A]){var ne=String(O);if(this.deletedStates[A]=this.deletedStates[A]||{},q&&void 0!==O)null!==this.deletedStates[A][ne]&&(this.deletedStates[A][ne]=this.deletedStates[A][ne]||{},this.deletedStates[A][ne][q]=null);else if(void 0!==O)if(this.stateChanges[A]&&this.stateChanges[A][ne])for(q in this.deletedStates[A][ne]={},this.stateChanges[A][ne])this.deletedStates[A][ne][q]=null;else this.deletedStates[A][ne]=null;else this.deletedStates[A]=null}},Pl.prototype.getState=function(A,O){var q=String(O),_e=o({},(this.state[A]||{})[q],(this.stateChanges[A]||{})[q]);if(null===this.deletedStates[A])return{};if(this.deletedStates[A]){var Le=this.deletedStates[A][O];if(null===Le)return{};for(var Ne in Le)delete _e[Ne]}return _e},Pl.prototype.initializeTileState=function(A,O){A.setFeatureState(this.state,O)},Pl.prototype.coalesceChanges=function(A,O){var q={};for(var ne in this.stateChanges){this.state[ne]=this.state[ne]||{};var me={};for(var _e in this.stateChanges[ne])this.state[ne][_e]||(this.state[ne][_e]={}),o(this.state[ne][_e],this.stateChanges[ne][_e]),me[_e]=this.state[ne][_e];q[ne]=me}for(var Le in this.deletedStates){this.state[Le]=this.state[Le]||{};var Ne={};if(null===this.deletedStates[Le])for(var et in this.state[Le])Ne[et]={},this.state[Le][et]={};else for(var pt in this.deletedStates[Le]){if(null===this.deletedStates[Le][pt])this.state[Le][pt]={};else for(var vt=0,Vt=Object.keys(this.deletedStates[Le][pt]);vt<Vt.length;vt+=1)delete this.state[Le][pt][Vt[vt]];Ne[pt]=this.state[Le][pt]}q[Le]=q[Le]||{},o(q[Le],Ne)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(q).length)for(var Wt in A)A[Wt].setFeatureState(q,O)};var Gs=function(A,O){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new mn(8192,16,0),this.grid3D=new mn(8192,16,0),this.featureIndexArray=new Et,this.promoteId=O};function zf(A,O,q,ne,me){return b(A,function(_e,Le){var Ne=O instanceof ts?O.get(Le):null;return Ne&&Ne.evaluate?Ne.evaluate(q,ne,me):Ne})}function Rf(A){for(var O=1/0,q=1/0,ne=-1/0,me=-1/0,_e=0,Le=A;_e<Le.length;_e+=1){var Ne=Le[_e];O=Math.min(O,Ne.x),q=Math.min(q,Ne.y),ne=Math.max(ne,Ne.x),me=Math.max(me,Ne.y)}return{minX:O,minY:q,maxX:ne,maxY:me}}function Ap(A,O){return O-A}Gs.prototype.insert=function(A,O,q,ne,me,_e){var Le=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(q,ne,me);for(var Ne=_e?this.grid3D:this.grid,et=0;et<O.length;et++){for(var pt=O[et],vt=[1/0,1/0,-1/0,-1/0],Vt=0;Vt<pt.length;Vt++){var Qt=pt[Vt];vt[0]=Math.min(vt[0],Qt.x),vt[1]=Math.min(vt[1],Qt.y),vt[2]=Math.max(vt[2],Qt.x),vt[3]=Math.max(vt[3],Qt.y)}vt[0]<8192&&vt[1]<8192&&vt[2]>=0&&vt[3]>=0&&Ne.insert(Le,vt[0],vt[1],vt[2],vt[3])}},Gs.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new _l.VectorTile(new gc(this.rawTileData)).layers,this.sourceLayerCoder=new Sc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Gs.prototype.query=function(A,O,q,ne){var me=this;this.loadVTLayers();for(var _e=A.params||{},Le=8192/A.tileSize/A.scale,Ne=Li(_e.filter),et=A.queryGeometry,pt=A.queryPadding*Le,vt=Rf(et),Vt=this.grid.query(vt.minX-pt,vt.minY-pt,vt.maxX+pt,vt.maxY+pt),Qt=Rf(A.cameraQueryGeometry),ur=0,Tr=this.grid3D.query(Qt.minX-pt,Qt.minY-pt,Qt.maxX+pt,Qt.maxY+pt,function(vn,Sn,Gn,Hn){return function($n,hi,pi,ni,xi){for(var vi=0,di=$n;vi<di.length;vi+=1){var ra=di[vi];if(hi<=ra.x&&pi<=ra.y&&ni>=ra.x&&xi>=ra.y)return!0}var Ki=[new r(hi,pi),new r(hi,xi),new r(ni,xi),new r(ni,pi)];if($n.length>2)for(var la=0,Ei=Ki;la<Ei.length;la+=1)if(ns($n,Ei[la]))return!0;for(var $i=0;$i<$n.length-1;$i++)if(cl($n[$i],$n[$i+1],Ki))return!0;return!1}(A.cameraQueryGeometry,vn-pt,Sn-pt,Gn+pt,Hn+pt)});ur<Tr.length;ur+=1)Vt.push(Tr[ur]);Vt.sort(Ap);for(var Dr,qr={},Yr=function(vn){var Sn=Vt[vn];if(Sn!==Dr){Dr=Sn;var Gn=me.featureIndexArray.get(Sn),Hn=null;me.loadMatchingFeature(qr,Gn.bucketIndex,Gn.sourceLayerIndex,Gn.featureIndex,Ne,_e.layers,_e.availableImages,O,q,ne,function($n,hi,pi){return Hn||(Hn=Ta($n)),hi.queryIntersectsFeature(et,$n,pi,Hn,me.z,A.transform,Le,A.pixelPosMatrix)})}},Kr=0;Kr<Vt.length;Kr++)Yr(Kr);return qr},Gs.prototype.loadMatchingFeature=function(A,O,q,ne,me,_e,Le,Ne,et,pt,vt){var Vt=this.bucketLayerIDs[O];if(!_e||function(Gn,Hn){for(var $n=0;$n<Gn.length;$n++)if(Hn.indexOf(Gn[$n])>=0)return!0;return!1}(_e,Vt)){var Qt=this.sourceLayerCoder.decode(q),Wt=this.vtLayers[Qt].feature(ne);if(me.filter(new fa(this.tileID.overscaledZ),Wt))for(var ur=this.getId(Wt,Qt),Tr=0;Tr<Vt.length;Tr++){var Rr=Vt[Tr];if(!(_e&&_e.indexOf(Rr)<0)){var Dr=Ne[Rr];if(Dr){var qr={};void 0!==ur&&pt&&(qr=pt.getState(Dr.sourceLayer||"_geojsonTileLayer",ur));var Yr=et[Rr];Yr.paint=zf(Yr.paint,Dr.paint,Wt,qr,Le),Yr.layout=zf(Yr.layout,Dr.layout,Wt,qr,Le);var Kr=!vt||vt(Wt,Dr,qr);if(Kr){var vn=new Ec(Wt,this.z,this.x,this.y,ur);vn.layer=Yr;var Sn=A[Rr];void 0===Sn&&(Sn=A[Rr]=[]),Sn.push({featureIndex:ne,feature:vn,intersectionZ:Kr})}}}}}},Gs.prototype.lookupSymbolFeatures=function(A,O,q,ne,me,_e,Le,Ne){var et={};this.loadVTLayers();for(var pt=Li(me),vt=0,Vt=A;vt<Vt.length;vt+=1)this.loadMatchingFeature(et,q,ne,Vt[vt],pt,_e,Le,Ne,O);return et},Gs.prototype.hasLayer=function(A){for(var O=0,q=this.bucketLayerIDs;O<q.length;O+=1)for(var ne=0,me=q[O];ne<me.length;ne+=1)if(A===me[ne])return!0;return!1},Gs.prototype.getId=function(A,O){var q=A.id;return this.promoteId&&"boolean"==typeof(q=A.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[O]])&&(q=Number(q)),q},Qr("FeatureIndex",Gs,{omit:["rawTileData","sourceLayerCoder"]});var To=function(A,O){this.tileID=A,this.uid=c(),this.uses=0,this.tileSize=O,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};To.prototype.registerFadeDuration=function(A){var O=A+this.timeAdded;O<B.now()||this.fadeEndTime&&O<this.fadeEndTime||(this.fadeEndTime=O)},To.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},To.prototype.loadVectorData=function(A,O,q){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){for(var ne in A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(pt,vt){var Vt={};if(!vt)return Vt;for(var Qt=function(){var Tr=ur[Wt],Rr=Tr.layerIds.map(function(Kr){return vt.getLayer(Kr)}).filter(Boolean);if(0!==Rr.length){Tr.layers=Rr,Tr.stateDependentLayerIds&&(Tr.stateDependentLayers=Tr.stateDependentLayerIds.map(function(Kr){return Rr.filter(function(vn){return vn.id===Kr})[0]}));for(var Dr=0,qr=Rr;Dr<qr.length;Dr+=1)Vt[qr[Dr].id]=Tr}},Wt=0,ur=pt;Wt<ur.length;Wt+=1)Qt();return Vt}(A.buckets,O.style),this.hasSymbolBuckets=!1,this.buckets){var me=this.buckets[ne];if(me instanceof ga){if(this.hasSymbolBuckets=!0,!q)break;me.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var _e in this.buckets){var Le=this.buckets[_e];if(Le instanceof ga&&Le.hasRTLText){this.hasRTLText=!0,go.isLoading()||go.isLoaded()||"deferred"!==Ka()||ua();break}}for(var Ne in this.queryPadding=0,this.buckets){var et=this.buckets[Ne];this.queryPadding=Math.max(this.queryPadding,O.style.getLayer(Ne).queryRadius(et))}A.imageAtlas&&(this.imageAtlas=A.imageAtlas),A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new ke},To.prototype.unloadVectorData=function(){for(var A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},To.prototype.getBucket=function(A){return this.buckets[A.id]},To.prototype.upload=function(A){for(var O in this.buckets){var q=this.buckets[O];q.uploadPending()&&q.upload(A)}var ne=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new hl(A,this.imageAtlas.image,ne.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new hl(A,this.glyphAtlasImage,ne.ALPHA),this.glyphAtlasImage=null)},To.prototype.prepare=function(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)},To.prototype.queryRenderedFeatures=function(A,O,q,ne,me,_e,Le,Ne,et,pt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ne,cameraQueryGeometry:me,scale:_e,tileSize:this.tileSize,pixelPosMatrix:pt,transform:Ne,params:Le,queryPadding:this.queryPadding*et},A,O,q):{}},To.prototype.querySourceFeatures=function(A,O){var q=this.latestFeatureIndex;if(q&&q.rawTileData){var ne=q.loadVTLayers(),me=O?O.sourceLayer:"",_e=ne._geojsonTileLayer||ne[me];if(_e)for(var Le=Li(O&&O.filter),Ne=this.tileID.canonical,et=Ne.z,pt=Ne.x,vt=Ne.y,Vt={z:et,x:pt,y:vt},Qt=0;Qt<_e.length;Qt++){var Wt=_e.feature(Qt);if(Le.filter(new fa(this.tileID.overscaledZ),Wt)){var ur=q.getId(Wt,me),Tr=new Ec(Wt,et,pt,vt,ur);Tr.tile=Vt,A.push(Tr)}}}},To.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},To.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},To.prototype.setExpiryData=function(A){var O=this.expirationTime;if(A.cacheControl){var q=E(A.cacheControl);q["max-age"]&&(this.expirationTime=Date.now()+1e3*q["max-age"])}else A.expires&&(this.expirationTime=new Date(A.expires).getTime());if(this.expirationTime){var ne=Date.now(),me=!1;if(this.expirationTime>ne)me=!1;else if(O)if(this.expirationTime<O)me=!0;else{var _e=this.expirationTime-O;_e?this.expirationTime=ne+Math.max(_e,3e4):me=!0}else me=!0;me?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},To.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},To.prototype.setFeatureState=function(A,O){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(A).length){var q=this.latestFeatureIndex.loadVTLayers();for(var ne in this.buckets)if(O.style.hasLayer(ne)){var me=this.buckets[ne],_e=me.layers[0].sourceLayer||"_geojsonTileLayer",Le=q[_e],Ne=A[_e];if(Le&&Ne&&0!==Object.keys(Ne).length){me.update(Ne,Le,this.imageAtlas&&this.imageAtlas.patternPositions||{});var et=O&&O.style&&O.style.getLayer(ne);et&&(this.queryPadding=Math.max(this.queryPadding,et.queryRadius(me)))}}}},To.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},To.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<B.now()},To.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},To.prototype.setHoldDuration=function(A){this.symbolFadeHoldUntil=B.now()+A},To.prototype.setDependencies=function(A,O){for(var q={},ne=0,me=O;ne<me.length;ne+=1)q[me[ne]]=!0;this.dependencies[A]=q},To.prototype.hasDependency=function(A,O){for(var q=0,ne=A;q<ne.length;q+=1){var _e=this.dependencies[ne[q]];if(_e)for(var Le=0,Ne=O;Le<Ne.length;Le+=1)if(_e[Ne[Le]])return!0}return!1};var el=self.performance,Ff=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},el.mark(this._marks.start)};Ff.prototype.finish=function(){el.mark(this._marks.end);var A=el.getEntriesByName(this._marks.measure);return 0===A.length&&(el.measure(this._marks.measure,this._marks.start,this._marks.end),A=el.getEntriesByName(this._marks.measure),el.clearMarks(this._marks.start),el.clearMarks(this._marks.end),el.clearMeasures(this._marks.measure)),A},e.Actor=Ll,e.AlphaImage=fl,e.CanonicalTileID=dl,e.CollisionBoxArray=ke,e.Color=tr,e.DEMData=Hs,e.DataConstantProperty=mi,e.DictionaryCoder=Sc,e.EXTENT=8192,e.ErrorEvent=He,e.EvaluationParameters=fa,e.Event=Be,e.Evented=he,e.FeatureIndex=Gs,e.FillBucket=As,e.FillExtrusionBucket=Ms,e.ImageAtlas=Ql,e.ImagePosition=yc,e.LineBucket=Xo,e.LngLat=Ia,e.LngLatBounds=lo,e.MercatorCoordinate=pl,e.ONE_EM=24,e.OverscaledTileID=co,e.Point=r,e.Point$1=r,e.Properties=Io,e.Protobuf=gc,e.RGBAImage=Wo,e.RequestManager=ae,e.RequestPerformance=Ff,e.ResourceType=bt,e.SegmentVector=jt,e.SourceFeatureState=Pl,e.StructArrayLayout1ui2=G,e.StructArrayLayout2f1f2i16=Xs,e.StructArrayLayout2i4=fs,e.StructArrayLayout3ui6=oo,e.StructArrayLayout4i8=Ra,e.SymbolBucket=ga,e.Texture=hl,e.Tile=To,e.Transitionable=es,e.Uniform1f=Jr,e.Uniform1i=gi,e.Uniform2f=In,e.Uniform3f=ri,e.Uniform4f=Jn,e.UniformColor=ui,e.UniformMatrix4f=Oi,e.UnwrappedTileID=Df,e.ValidationError=ze,e.WritingMode=ps,e.ZoomHistory=zi,e.add=function(A,O,q){return A[0]=O[0]+q[0],A[1]=O[1]+q[1],A[2]=O[2]+q[2],A},e.addDynamicAttributes=mu,e.asyncAll=function(A,O,q){if(!A.length)return q(null,[]);var ne=A.length,me=new Array(A.length),_e=null;A.forEach(function(Le,Ne){O(Le,function(et,pt){et&&(_e=et),me[Ne]=pt,0==--ne&&q(_e,me)})})},e.bezier=f,e.bindAll=u,e.browser=B,e.cacheEntryPossiblyAdded=function(A){++Qe>Oe&&(A.getActor().send("enforceCacheSizeLimit",Ie),Qe=0)},e.clamp=h,e.clearTileCache=function(A){var O=self.caches.delete("mapbox-tiles");A&&O.catch(A).then(function(){return A()})},e.clipLine=yf,e.clone=function(A){var O=new Zo(16);return O[0]=A[0],O[1]=A[1],O[2]=A[2],O[3]=A[3],O[4]=A[4],O[5]=A[5],O[6]=A[6],O[7]=A[7],O[8]=A[8],O[9]=A[9],O[10]=A[10],O[11]=A[11],O[12]=A[12],O[13]=A[13],O[14]=A[14],O[15]=A[15],O},e.clone$1=T,e.clone$2=function(A){var O=new Zo(3);return O[0]=A[0],O[1]=A[1],O[2]=A[2],O},e.collisionCircleLayout=qh,e.config=V,e.create=function(){var A=new Zo(16);return Zo!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},e.create$1=function(){var A=new Zo(9);return Zo!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A},e.create$2=function(){var A=new Zo(4);return Zo!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A},e.createCommonjsModule=n,e.createExpression=Kt,e.createLayout=ha,e.createStyleLayer=function(A){return"custom"===A.type?new Tp(A):new kp[A.type](A)},e.cross=function(A,O,q){var ne=O[0],me=O[1],_e=O[2],Le=q[0],Ne=q[1],et=q[2];return A[0]=me*et-_e*Ne,A[1]=_e*Le-ne*et,A[2]=ne*Ne-me*Le,A},e.deepEqual=function A(O,q){if(Array.isArray(O)){if(!Array.isArray(q)||O.length!==q.length)return!1;for(var ne=0;ne<O.length;ne++)if(!A(O[ne],q[ne]))return!1;return!0}if("object"==typeof O&&null!==O&&null!==q){if("object"!=typeof q||Object.keys(O).length!==Object.keys(q).length)return!1;for(var me in O)if(!A(O[me],q[me]))return!1;return!0}return O===q},e.dot=function(A,O){return A[0]*O[0]+A[1]*O[1]+A[2]*O[2]},e.dot$1=function(A,O){return A[0]*O[0]+A[1]*O[1]+A[2]*O[2]+A[3]*O[3]},e.ease=t,e.emitValidationErrors=Cn,e.endsWith=_,e.enforceCacheSizeLimit=function(A){Xe(),we&&we.then(function(O){O.keys().then(function(q){for(var ne=0;ne<q.length-A;ne++)O.delete(q[ne])})})},e.evaluateSizeForFeature=hf,e.evaluateSizeForZoom=pf,e.evaluateVariableOffset=_f,e.evented=Ca,e.extend=o,e.featureFilter=Li,e.filterObject=w,e.fromRotation=function(A,O){var q=Math.sin(O),ne=Math.cos(O);return A[0]=ne,A[1]=q,A[2]=0,A[3]=-q,A[4]=ne,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},e.getAnchorAlignment=fu,e.getAnchorJustification=du,e.getArrayBuffer=xt,e.getImage=Xt,e.getJSON=function(A,O){return Ke(o(A,{type:"json"}),O)},e.getRTLTextPluginStatus=Ka,e.getReferrer=_t,e.getVideo=function(A,O){var q,ne,me=self.document.createElement("video");me.muted=!0,me.onloadstart=function(){O(null,me)};for(var _e=0;_e<A.length;_e++){var Le=self.document.createElement("source");q=A[_e],ne=void 0,(ne=self.document.createElement("a")).href=q,(ne.protocol!==self.document.location.protocol||ne.host!==self.document.location.host)&&(me.crossOrigin="Anonymous"),Le.src=A[_e],me.appendChild(Le)}return{cancel:function(){}}},e.identity=Gl,e.invert=function(A,O){var q=O[0],ne=O[1],me=O[2],_e=O[3],Le=O[4],Ne=O[5],et=O[6],pt=O[7],vt=O[8],Vt=O[9],Qt=O[10],Wt=O[11],ur=O[12],Tr=O[13],Rr=O[14],Dr=O[15],qr=q*Ne-ne*Le,Yr=q*et-me*Le,Kr=q*pt-_e*Le,vn=ne*et-me*Ne,Sn=ne*pt-_e*Ne,Gn=me*pt-_e*et,Hn=vt*Tr-Vt*ur,$n=vt*Rr-Qt*ur,hi=vt*Dr-Wt*ur,pi=Vt*Rr-Qt*Tr,ni=Vt*Dr-Wt*Tr,xi=Qt*Dr-Wt*Rr,vi=qr*xi-Yr*ni+Kr*pi+vn*hi-Sn*$n+Gn*Hn;return vi?(A[0]=(Ne*xi-et*ni+pt*pi)*(vi=1/vi),A[1]=(me*ni-ne*xi-_e*pi)*vi,A[2]=(Tr*Gn-Rr*Sn+Dr*vn)*vi,A[3]=(Qt*Sn-Vt*Gn-Wt*vn)*vi,A[4]=(et*hi-Le*xi-pt*$n)*vi,A[5]=(q*xi-me*hi+_e*$n)*vi,A[6]=(Rr*Kr-ur*Gn-Dr*Yr)*vi,A[7]=(vt*Gn-Qt*Kr+Wt*Yr)*vi,A[8]=(Le*ni-Ne*hi+pt*Hn)*vi,A[9]=(ne*hi-q*ni-_e*Hn)*vi,A[10]=(ur*Sn-Tr*Kr+Dr*qr)*vi,A[11]=(Vt*Kr-vt*Sn-Wt*qr)*vi,A[12]=(Ne*$n-Le*pi-et*Hn)*vi,A[13]=(q*pi-ne*$n+me*Hn)*vi,A[14]=(Tr*Yr-ur*vn-Rr*qr)*vi,A[15]=(vt*vn-Vt*Yr+Qt*qr)*vi,A):null},e.isChar=zn,e.isMapboxURL=le,e.keysDifference=function(A,O){var q=[];for(var ne in A)ne in O||q.push(ne);return q},e.makeRequest=Ke,e.mapObject=b,e.mercatorXfromLng=Pf,e.mercatorYfromLat=If,e.mercatorZfromAltitude=Of,e.mul=Jc,e.multiply=ul,e.mvt=_l,e.normalize=function(A,O){var q=O[0],ne=O[1],me=O[2],_e=q*q+ne*ne+me*me;return _e>0&&(_e=1/Math.sqrt(_e)),A[0]=O[0]*_e,A[1]=O[1]*_e,A[2]=O[2]*_e,A},e.number=En,e.offscreenCanvasSupported=ct,e.ortho=function(A,O,q,ne,me,_e,Le){var Ne=1/(O-q),et=1/(ne-me),pt=1/(_e-Le);return A[0]=-2*Ne,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*et,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*pt,A[11]=0,A[12]=(O+q)*Ne,A[13]=(me+ne)*et,A[14]=(Le+_e)*pt,A[15]=1,A},e.parseGlyphPBF=function(A){return new gc(A).readFields(rp,[])},e.pbf=gc,e.performSymbolLayout=function(A,O,q,ne,me,_e,Le){A.createArrays(),A.tilePixelRatio=8192/(512*A.overscaling),A.compareText={},A.iconsNeedLinear=!1;var et=A.layers[0].layout,pt=A.layers[0]._unevaluatedLayout._values,vt={};if("composite"===A.textSizeData.kind){var Vt=A.textSizeData,Wt=Vt.maxZoom;vt.compositeTextSizes=[pt["text-size"].possiblyEvaluate(new fa(Vt.minZoom),Le),pt["text-size"].possiblyEvaluate(new fa(Wt),Le)]}if("composite"===A.iconSizeData.kind){var ur=A.iconSizeData,Rr=ur.maxZoom;vt.compositeIconSizes=[pt["icon-size"].possiblyEvaluate(new fa(ur.minZoom),Le),pt["icon-size"].possiblyEvaluate(new fa(Rr),Le)]}vt.layoutTextSize=pt["text-size"].possiblyEvaluate(new fa(A.zoom+1),Le),vt.layoutIconSize=pt["icon-size"].possiblyEvaluate(new fa(A.zoom+1),Le),vt.textMaxSize=pt["text-size"].possiblyEvaluate(new fa(18));for(var Dr=24*et.get("text-line-height"),qr="map"===et.get("text-rotation-alignment")&&"point"!==et.get("symbol-placement"),Yr=et.get("text-keep-upright"),Kr=et.get("text-size"),vn=function(){var Hn=Gn[Sn],$n=et.get("text-font").evaluate(Hn,{},Le).join(","),hi=Kr.evaluate(Hn,{},Le),pi=vt.layoutTextSize.evaluate(Hn,{},Le),ni=vt.layoutIconSize.evaluate(Hn,{},Le),xi={horizontal:{},vertical:void 0},vi=Hn.text,di=[0,0];if(vi){var ra=vi.toString(),Ki=24*et.get("text-letter-spacing").evaluate(Hn,{},Le),la=function(Hi){for(var ia=0,Ya=Hi;ia<Ya.length;ia+=1)if(!Di(Ya[ia].charCodeAt(0)))return!1;return!0}(ra)?Ki:0,Ei=et.get("text-anchor").evaluate(Hn,{},Le),$i=et.get("text-variable-anchor");if(!$i){var Aa=et.get("text-radial-offset").evaluate(Hn,{},Le);di=Aa?_f(Ei,[24*Aa,pu]):et.get("text-offset").evaluate(Hn,{},Le).map(function(Hi){return 24*Hi})}var xa=qr?"center":et.get("text-justify").evaluate(Hn,{},Le),Oa=et.get("symbol-placement"),ba="point"===Oa?24*et.get("text-max-width").evaluate(Hn,{},Le):0,uo=function(){A.allowVerticalPlacement&&Vi(ra)&&(xi.vertical=xc(vi,O,q,me,$n,ba,Dr,Ei,"left",la,di,ps.vertical,!0,Oa,pi,hi))};if(!qr&&$i){for(var Da="auto"===xa?$i.map(function(Hi){return du(Hi)}):[xa],zo=!1,ko=0;ko<Da.length;ko++){var Eo=Da[ko];if(!xi.horizontal[Eo])if(zo)xi.horizontal[Eo]=xi.horizontal[0];else{var Go=xc(vi,O,q,me,$n,ba,Dr,"center",Eo,la,di,ps.horizontal,!1,Oa,pi,hi);Go&&(xi.horizontal[Eo]=Go,zo=1===Go.positionedLines.length)}}uo()}else{"auto"===xa&&(xa=du(Ei));var jo=xc(vi,O,q,me,$n,ba,Dr,Ei,xa,la,di,ps.horizontal,!1,Oa,pi,hi);jo&&(xi.horizontal[xa]=jo),uo(),Vi(ra)&&qr&&Yr&&(xi.vertical=xc(vi,O,q,me,$n,ba,Dr,Ei,xa,la,di,ps.vertical,!1,Oa,pi,hi))}}var Hi,ia,Za,qo,Vo,fo=void 0,Co=!1;if(Hn.icon&&Hn.icon.name){var to=ne[Hn.icon.name];to&&(Hi=me[Hn.icon.name],ia=et.get("icon-offset").evaluate(Hn,{},Le),Za=fu(et.get("icon-anchor").evaluate(Hn,{},Le)),fo={image:Hi,top:Vo=ia[1]-Hi.displaySize[1]*Za.verticalAlign,bottom:Vo+Hi.displaySize[1],left:qo=ia[0]-Hi.displaySize[0]*Za.horizontalAlign,right:qo+Hi.displaySize[0]},Co=to.sdf,void 0===A.sdfIcons?A.sdfIcons=to.sdf:A.sdfIcons!==to.sdf&&M("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(to.pixelRatio!==A.pixelRatio||0!==et.get("icon-rotate").constantOr(1))&&(A.iconsNeedLinear=!0))}var vo=Tf(xi.horizontal)||xi.vertical;A.iconsInText=!!vo&&vo.iconsInText,(vo||fo)&&function(Hi,ia,Ya,Za,Ua,za,pa,Wa,qo,as,Vo){var Ss=za.textMaxSize.evaluate(ia,{});void 0===Ss&&(Ss=pa);var qs,Ao=Hi.layers[0].layout,Es=Ao.get("icon-offset").evaluate(ia,{},Vo),Cs=Tf(Ya.horizontal),Ls=pa/24,bu=Hi.tilePixelRatio*Ls,Il=Hi.tilePixelRatio*Ss/24,Cc=Hi.tilePixelRatio*Wa,ml=Hi.tilePixelRatio*Ao.get("symbol-spacing"),Lc=Ao.get("text-padding")*Hi.tilePixelRatio,Pc=Ao.get("icon-padding")*Hi.tilePixelRatio,Ic=Ao.get("text-max-angle")/180*Math.PI,Oc="map"===Ao.get("text-rotation-alignment")&&"point"!==Ao.get("symbol-placement"),tl="map"===Ao.get("icon-rotation-alignment")&&"point"!==Ao.get("symbol-placement"),Ol=Ao.get("symbol-placement"),Dc=ml/2,Dl=Ao.get("icon-text-fit");Za&&"none"!==Dl&&(Hi.allowVerticalPlacement&&Ya.vertical&&(qs=ff(Za,Ya.vertical,Dl,Ao.get("icon-text-fit-padding"),Es,Ls)),Cs&&(Za=ff(Za,Cs,Dl,Ao.get("icon-text-fit-padding"),Es,Ls)));var rl=function(Sp,sc){sc.x<0||sc.x>=8192||sc.y<0||sc.y>=8192||function(Qa,Ps,Ep,nl,Au,Vf,Uc,Bs,Hc,lc,Gc,qc,Mu,Uf,cc,Hf,Gf,qf,Yf,Zf,ds,Yc,Wf,Ns,Cp){var Su,vl,jl,Vl,Ul,Hl=Qa.addToLineVertexArray(Ps,Ep),Xf=0,Jf=0,Kf=0,$f=0,Eu=-1,Cu=-1,Ys={},Qf=Or(""),Lu=0,Pu=0;if(void 0===Bs._unevaluatedLayout.getValue("text-radial-offset")?(Lu=(Su=Bs.layout.get("text-offset").evaluate(ds,{},Ns).map(function(fc){return 24*fc}))[0],Pu=Su[1]):(Lu=24*Bs.layout.get("text-radial-offset").evaluate(ds,{},Ns),Pu=pu),Qa.allowVerticalPlacement&&nl.vertical){var eh=Bs.layout.get("text-rotate").evaluate(ds,{},Ns)+90;Vl=new kc(Hc,Ps,lc,Gc,qc,nl.vertical,Mu,Uf,cc,eh),Uc&&(Ul=new kc(Hc,Ps,lc,Gc,qc,Uc,Gf,qf,cc,eh))}if(Au){var Iu=Bs.layout.get("icon-rotate").evaluate(ds,{}),th="none"!==Bs.layout.get("icon-text-fit"),rh=xf(Au,Iu,Wf,th),Ou=Uc?xf(Uc,Iu,Wf,th):void 0;jl=new kc(Hc,Ps,lc,Gc,qc,Au,Gf,qf,!1,Iu),Xf=4*rh.length;var nh=Qa.iconSizeData,uc=null;"source"===nh.kind?(uc=[128*Bs.layout.get("icon-size").evaluate(ds,{})])[0]>32640&&M(Qa.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===nh.kind&&((uc=[128*Yc.compositeIconSizes[0].evaluate(ds,{},Ns),128*Yc.compositeIconSizes[1].evaluate(ds,{},Ns)])[0]>32640||uc[1]>32640)&&M(Qa.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Qa.addSymbols(Qa.icon,rh,uc,Zf,Yf,ds,!1,Ps,Hl.lineStartIndex,Hl.lineLength,-1,Ns),Eu=Qa.icon.placedSymbolArray.length-1,Ou&&(Jf=4*Ou.length,Qa.addSymbols(Qa.icon,Ou,uc,Zf,Yf,ds,ps.vertical,Ps,Hl.lineStartIndex,Hl.lineLength,-1,Ns),Cu=Qa.icon.placedSymbolArray.length-1)}for(var ih in nl.horizontal){var Zc=nl.horizontal[ih];if(!vl){Qf=Or(Zc.text);var Pp=Bs.layout.get("text-rotate").evaluate(ds,{},Ns);vl=new kc(Hc,Ps,lc,Gc,qc,Zc,Mu,Uf,cc,Pp)}var ah=1===Zc.positionedLines.length;if(Kf+=wf(Qa,Ps,Zc,Vf,Bs,cc,ds,Hf,Hl,nl.vertical?ps.horizontal:ps.horizontalOnly,ah?Object.keys(nl.horizontal):[ih],Ys,Eu,Yc,Ns),ah)break}nl.vertical&&($f+=wf(Qa,Ps,nl.vertical,Vf,Bs,cc,ds,Hf,Hl,ps.vertical,["vertical"],Ys,Cu,Yc,Ns));var Ip=vl?vl.boxStartIndex:Qa.collisionBoxArray.length,Op=vl?vl.boxEndIndex:Qa.collisionBoxArray.length,Dp=Vl?Vl.boxStartIndex:Qa.collisionBoxArray.length,zp=Vl?Vl.boxEndIndex:Qa.collisionBoxArray.length,Rp=jl?jl.boxStartIndex:Qa.collisionBoxArray.length,Fp=jl?jl.boxEndIndex:Qa.collisionBoxArray.length,Bp=Ul?Ul.boxStartIndex:Qa.collisionBoxArray.length,Np=Ul?Ul.boxEndIndex:Qa.collisionBoxArray.length,js=-1,Wc=function(fc,sh){return fc&&fc.circleDiameter?Math.max(fc.circleDiameter,sh):sh};js=Wc(vl,js),js=Wc(Vl,js),js=Wc(jl,js);var oh=(js=Wc(Ul,js))>-1?1:0;oh&&(js*=Cp/24),Qa.glyphOffsetArray.length>=ga.MAX_GLYPHS&&M("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==ds.sortKey&&Qa.addToSortKeyRanges(Qa.symbolInstances.length,ds.sortKey),Qa.symbolInstances.emplaceBack(Ps.x,Ps.y,Ys.right>=0?Ys.right:-1,Ys.center>=0?Ys.center:-1,Ys.left>=0?Ys.left:-1,Ys.vertical||-1,Eu,Cu,Qf,Ip,Op,Dp,zp,Rp,Fp,Bp,Np,lc,Kf,$f,Xf,Jf,oh,0,Mu,Lu,Pu,js)}(Hi,sc,Sp,Ya,Za,Ua,qs,Hi.layers[0],Hi.collisionBoxArray,ia.index,ia.sourceLayerIndex,Hi.index,bu,Lc,Oc,qo,Cc,Pc,tl,Es,ia,za,as,Vo,pa)};if("line"===Ol)for(var rc=0,zc=yf(ia.geometry,0,0,8192,8192);rc<zc.length;rc+=1)for(var Rc=zc[rc],nc=0,Bc=cp(Rc,ml,Ic,Ya.vertical||Cs,Za,24,Il,Hi.overscaling,8192);nc<Bc.length;nc+=1){var ic=Bc[nc];Cs&&pp(Hi,Cs.text,Dc,ic)||rl(Rc,ic)}else if("line-center"===Ol)for(var ac=0,jc=ia.geometry;ac<jc.length;ac+=1){var zl=jc[ac];if(zl.length>1){var Rl=lp(zl,Ic,Ya.vertical||Cs,Za,24,Il);Rl&&rl(zl,Rl)}}else if("Polygon"===ia.type)for(var Fl=0,Vc=au(ia.geometry,0);Fl<Vc.length;Fl+=1){var Bl=Vc[Fl],oc=fp(Bl,16);rl(Bl[0],new Al(oc.x,oc.y,0))}else if("LineString"===ia.type)for(var Nl=0,Bf=ia.geometry;Nl<Bf.length;Nl+=1){var _u=Bf[Nl];rl(_u,new Al(_u[0].x,_u[0].y,0))}else if("Point"===ia.type)for(var wu=0,Nf=ia.geometry;wu<Nf.length;wu+=1)for(var Tu=0,jf=Nf[wu];Tu<jf.length;Tu+=1){var ku=jf[Tu];rl([ku],new Al(ku.x,ku.y,0))}}(A,Hn,xi,fo,ne,vt,pi,ni,di,Co,Le)},Sn=0,Gn=A.features;Sn<Gn.length;Sn+=1)vn();_e&&A.generateCollisionDebugBuffers()},e.perspective=function(A,O,q,ne,me){var _e,Le=1/Math.tan(O/2);return A[0]=Le/q,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=Le,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,null!=me&&me!==1/0?(A[10]=(me+ne)*(_e=1/(ne-me)),A[14]=2*me*ne*_e):(A[10]=-1,A[14]=-2*ne),A},e.pick=function(A,O){for(var q={},ne=0;ne<O.length;ne++){var me=O[ne];me in A&&(q[me]=A[me])}return q},e.plugin=go,e.polygonIntersectsPolygon=Bo,e.postMapLoadEvent=De,e.postTurnstileEvent=Ee,e.potpack=sf,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=Qr,e.registerForPluginStateChange=function(A){return A({pluginStatus:ki,pluginURL:wa}),Ca.on("pluginStateChange",A),A},e.rotate=function(A,O,q){var ne=O[0],me=O[1],_e=O[2],Le=O[3],Ne=Math.sin(q),et=Math.cos(q);return A[0]=ne*et+_e*Ne,A[1]=me*et+Le*Ne,A[2]=ne*-Ne+_e*et,A[3]=me*-Ne+Le*et,A},e.rotateX=function(A,O,q){var ne=Math.sin(q),me=Math.cos(q),_e=O[4],Le=O[5],Ne=O[6],et=O[7],pt=O[8],vt=O[9],Vt=O[10],Qt=O[11];return O!==A&&(A[0]=O[0],A[1]=O[1],A[2]=O[2],A[3]=O[3],A[12]=O[12],A[13]=O[13],A[14]=O[14],A[15]=O[15]),A[4]=_e*me+pt*ne,A[5]=Le*me+vt*ne,A[6]=Ne*me+Vt*ne,A[7]=et*me+Qt*ne,A[8]=pt*me-_e*ne,A[9]=vt*me-Le*ne,A[10]=Vt*me-Ne*ne,A[11]=Qt*me-et*ne,A},e.rotateZ=function(A,O,q){var ne=Math.sin(q),me=Math.cos(q),_e=O[0],Le=O[1],Ne=O[2],et=O[3],pt=O[4],vt=O[5],Vt=O[6],Qt=O[7];return O!==A&&(A[8]=O[8],A[9]=O[9],A[10]=O[10],A[11]=O[11],A[12]=O[12],A[13]=O[13],A[14]=O[14],A[15]=O[15]),A[0]=_e*me+pt*ne,A[1]=Le*me+vt*ne,A[2]=Ne*me+Vt*ne,A[3]=et*me+Qt*ne,A[4]=pt*me-_e*ne,A[5]=vt*me-Le*ne,A[6]=Vt*me-Ne*ne,A[7]=Qt*me-et*ne,A},e.scale=function(A,O,q){var ne=q[0],me=q[1],_e=q[2];return A[0]=O[0]*ne,A[1]=O[1]*ne,A[2]=O[2]*ne,A[3]=O[3]*ne,A[4]=O[4]*me,A[5]=O[5]*me,A[6]=O[6]*me,A[7]=O[7]*me,A[8]=O[8]*_e,A[9]=O[9]*_e,A[10]=O[10]*_e,A[11]=O[11]*_e,A[12]=O[12],A[13]=O[13],A[14]=O[14],A[15]=O[15],A},e.scale$1=function(A,O,q){return A[0]=O[0]*q,A[1]=O[1]*q,A[2]=O[2]*q,A[3]=O[3]*q,A},e.scale$2=function(A,O,q){return A[0]=O[0]*q,A[1]=O[1]*q,A[2]=O[2]*q,A},e.setCacheLimits=function(A,O){Ie=A,Oe=O},e.setRTLTextPlugin=function(A,O,q){if(void 0===q&&(q=!1),ki===Qi||ki===qa||ki===Yo)throw new Error("setRTLTextPlugin cannot be called multiple times.");wa=B.resolveURL(A),ki=Qi,xo=O,ea(),q||ua()},e.sphericalToCartesian=function(A){var O=A[0],q=A[1],ne=A[2];return q+=90,q*=Math.PI/180,ne*=Math.PI/180,{x:O*Math.cos(q)*Math.sin(ne),y:O*Math.sin(q)*Math.sin(ne),z:O*Math.cos(ne)}},e.sqrLen=function(A){var O=A[0],q=A[1];return O*O+q*q},e.styleSpec=be,e.sub=function(A,O,q){return A[0]=O[0]-q[0],A[1]=O[1]-q[1],A[2]=O[2]-q[2],A},e.symbolSize=sp,e.transformMat3=function(A,O,q){var ne=O[0],me=O[1],_e=O[2];return A[0]=ne*q[0]+me*q[3]+_e*q[6],A[1]=ne*q[1]+me*q[4]+_e*q[7],A[2]=ne*q[2]+me*q[5]+_e*q[8],A},e.transformMat4=$s,e.translate=function(A,O,q){var ne,me,_e,Le,Ne,et,pt,vt,Vt,Qt,Wt,ur,Tr=q[0],Rr=q[1],Dr=q[2];return O===A?(A[12]=O[0]*Tr+O[4]*Rr+O[8]*Dr+O[12],A[13]=O[1]*Tr+O[5]*Rr+O[9]*Dr+O[13],A[14]=O[2]*Tr+O[6]*Rr+O[10]*Dr+O[14],A[15]=O[3]*Tr+O[7]*Rr+O[11]*Dr+O[15]):(me=O[1],_e=O[2],Le=O[3],Ne=O[4],et=O[5],pt=O[6],vt=O[7],Vt=O[8],Qt=O[9],Wt=O[10],ur=O[11],A[0]=ne=O[0],A[1]=me,A[2]=_e,A[3]=Le,A[4]=Ne,A[5]=et,A[6]=pt,A[7]=vt,A[8]=Vt,A[9]=Qt,A[10]=Wt,A[11]=ur,A[12]=ne*Tr+Ne*Rr+Vt*Dr+O[12],A[13]=me*Tr+et*Rr+Qt*Dr+O[13],A[14]=_e*Tr+pt*Rr+Wt*Dr+O[14],A[15]=Le*Tr+vt*Rr+ur*Dr+O[15]),A},e.triggerPluginCompletionEvent=bo,e.uniqueId=c,e.validateCustomStyleLayer=function(A){var O=[],q=A.id;return void 0===q&&O.push({message:"layers."+q+': missing required property "id"'}),void 0===A.render&&O.push({message:"layers."+q+': missing required method "render"'}),A.renderingMode&&"2d"!==A.renderingMode&&"3d"!==A.renderingMode&&O.push({message:"layers."+q+': property "renderingMode" must be either "2d" or "3d"'}),O},e.validateLight=dn,e.validateStyle=$r,e.values=function(A){var O=[];for(var q in A)O.push(A[q]);return O},e.vectorTile=_l,e.version="1.10.1",e.warnOnce=M,e.webpSupported=ee,e.window=self,e.wrap=s}),x(0,function(e){function n(Be){var He=typeof Be;if("number"===He||"boolean"===He||"string"===He||null==Be)return JSON.stringify(Be);if(Array.isArray(Be)){for(var he="[",be=0,ze=Be;be<ze.length;be+=1)he+=n(ze[be])+",";return he+"]"}for(var Ve=Object.keys(Be).sort(),Je="{",Ye=0;Ye<Ve.length;Ye++)Je+=JSON.stringify(Ve[Ye])+":"+n(Be[Ve[Ye]])+",";return Je+"}"}function i(Be){for(var He="",he=0,be=e.refProperties;he<be.length;he+=1)He+="/"+n(Be[be[he]]);return He}var l=function(Be){this.keyCache={},Be&&this.replace(Be)};l.prototype.replace=function(Be){this._layerConfigs={},this._layers={},this.update(Be,[])},l.prototype.update=function(Be,He){for(var he=this,be=0,ze=Be;be<ze.length;be+=1){var Ve=ze[be];this._layerConfigs[Ve.id]=Ve;var Je=this._layers[Ve.id]=e.createStyleLayer(Ve);Je._featureFilter=e.featureFilter(Je.filter),this.keyCache[Ve.id]&&delete this.keyCache[Ve.id]}for(var Ye=0,lt=He;Ye<lt.length;Ye+=1){var st=lt[Ye];delete this.keyCache[st],delete this._layerConfigs[st],delete this._layers[st]}this.familiesBySource={};for(var Mt=0,Dt=function(Ze,it){for(var dt={},Ct=0;Ct<Ze.length;Ct++){var Ut=it&&it[Ze[Ct].id]||i(Ze[Ct]);it&&(it[Ze[Ct].id]=Ut);var Jt=dt[Ut];Jt||(Jt=dt[Ut]=[]),Jt.push(Ze[Ct])}var qt=[];for(var pr in dt)qt.push(dt[pr]);return qt}(e.values(this._layerConfigs),this.keyCache);Mt<Dt.length;Mt+=1){var ht=Dt[Mt].map(function(Ze){return he._layers[Ze.id]}),mt=ht[0];if("none"!==mt.visibility){var Ot=mt.source||"",At=this.familiesBySource[Ot];At||(At=this.familiesBySource[Ot]={});var It=mt.sourceLayer||"_geojsonTileLayer",Se=At[It];Se||(Se=At[It]=[]),Se.push(ht)}}};var r=function(Be){var He={},he=[];for(var be in Be){var ze=Be[be],Ve=He[be]={};for(var Je in ze){var Ye=ze[+Je];if(Ye&&0!==Ye.bitmap.width&&0!==Ye.bitmap.height){var lt={x:0,y:0,w:Ye.bitmap.width+2,h:Ye.bitmap.height+2};he.push(lt),Ve[Je]={rect:lt,metrics:Ye.metrics}}}}var st=e.potpack(he),ht=new e.AlphaImage({width:st.w||1,height:st.h||1});for(var mt in Be){var Ot=Be[mt];for(var At in Ot){var It=Ot[+At];if(It&&0!==It.bitmap.width&&0!==It.bitmap.height){var Se=He[mt][At].rect;e.AlphaImage.copy(It.bitmap,ht,{x:0,y:0},{x:Se.x+1,y:Se.y+1},It.bitmap)}}}this.image=ht,this.positions=He};e.register("GlyphAtlas",r);var d=function(Be){this.tileID=new e.OverscaledTileID(Be.tileID.overscaledZ,Be.tileID.wrap,Be.tileID.canonical.z,Be.tileID.canonical.x,Be.tileID.canonical.y),this.uid=Be.uid,this.zoom=Be.zoom,this.pixelRatio=Be.pixelRatio,this.tileSize=Be.tileSize,this.source=Be.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Be.showCollisionBoxes,this.collectResourceTiming=!!Be.collectResourceTiming,this.returnDependencies=!!Be.returnDependencies,this.promoteId=Be.promoteId};function f(Be,He,he){for(var be=new e.EvaluationParameters(He),ze=0,Ve=Be;ze<Ve.length;ze+=1)Ve[ze].recalculate(be,he)}function t(Be,He){var he=e.getArrayBuffer(Be.request,function(be,ze,Ve,Je){be?He(be):ze&&He(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(ze)),rawData:ze,cacheControl:Ve,expires:Je})});return function(){he.cancel(),He()}}d.prototype.parse=function(Be,He,he,be,ze){var Ve=this;this.status="parsing",this.data=Be,this.collisionBoxArray=new e.CollisionBoxArray;var Je=new e.DictionaryCoder(Object.keys(Be.layers).sort()),Ye=new e.FeatureIndex(this.tileID,this.promoteId);Ye.bucketLayerIDs=[];var lt,st,Mt,Dt,ht={},mt={featureIndex:Ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:he},Ot=He.familiesBySource[this.source];for(var At in Ot){var It=Be.layers[At];if(It){1===It.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+At+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Se=Je.encode(At),Ze=[],it=0;it<It.length;it++){var dt=It.feature(it),Ct=Ye.getId(dt,At);Ze.push({feature:dt,id:Ct,index:it,sourceLayerIndex:Se})}for(var Ut=0,Jt=Ot[At];Ut<Jt.length;Ut+=1){var qt=Jt[Ut],pr=qt[0];pr.minzoom&&this.zoom<Math.floor(pr.minzoom)||pr.maxzoom&&this.zoom>=pr.maxzoom||"none"!==pr.visibility&&(f(qt,this.zoom,he),(ht[pr.id]=pr.createBucket({index:Ye.bucketLayerIDs.length,layers:qt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Se,sourceID:this.source})).populate(Ze,mt,this.tileID.canonical),Ye.bucketLayerIDs.push(qt.map(function(ar){return ar.id})))}}}var Sr=e.mapObject(mt.glyphDependencies,function(ar){return Object.keys(ar).map(Number)});Object.keys(Sr).length?be.send("getGlyphs",{uid:this.uid,stacks:Sr},function(ar,dr){lt||(lt=ar,st=dr,rr.call(Ve))}):st={};var mr=Object.keys(mt.iconDependencies);mr.length?be.send("getImages",{icons:mr,source:this.source,tileID:this.tileID,type:"icons"},function(ar,dr){lt||(lt=ar,Mt=dr,rr.call(Ve))}):Mt={};var tr=Object.keys(mt.patternDependencies);function rr(){if(lt)return ze(lt);if(st&&Mt&&Dt){var ar=new r(st),dr=new e.ImageAtlas(Mt,Dt);for(var xr in ht){var Lr=ht[xr];Lr instanceof e.SymbolBucket?(f(Lr.layers,this.zoom,he),e.performSymbolLayout(Lr,st,ar.positions,Mt,dr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Lr.hasPattern&&(Lr instanceof e.LineBucket||Lr instanceof e.FillBucket||Lr instanceof e.FillExtrusionBucket)&&(f(Lr.layers,this.zoom,he),Lr.addFeatures(mt,this.tileID.canonical,dr.patternPositions))}this.status="done",ze(null,{buckets:e.values(ht).filter(function(zr){return!zr.isEmpty()}),featureIndex:Ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ar.image,imageAtlas:dr,glyphMap:this.returnDependencies?st:null,iconMap:this.returnDependencies?Mt:null,glyphPositions:this.returnDependencies?ar.positions:null})}}tr.length?be.send("getImages",{icons:tr,source:this.source,tileID:this.tileID,type:"patterns"},function(ar,dr){lt||(lt=ar,Dt=dr,rr.call(Ve))}):Dt={},rr.call(this)};var h=function(Be,He,he,be){this.actor=Be,this.layerIndex=He,this.availableImages=he,this.loadVectorData=be||t,this.loading={},this.loaded={}};h.prototype.loadTile=function(Be,He){var he=this,be=Be.uid;this.loading||(this.loading={});var ze=!!(Be&&Be.request&&Be.request.collectResourceTiming)&&new e.RequestPerformance(Be.request),Ve=this.loading[be]=new d(Be);Ve.abort=this.loadVectorData(Be,function(Je,Ye){if(delete he.loading[be],Je||!Ye)return Ve.status="done",he.loaded[be]=Ve,He(Je);var lt=Ye.rawData,st={};Ye.expires&&(st.expires=Ye.expires),Ye.cacheControl&&(st.cacheControl=Ye.cacheControl);var Mt={};if(ze){var Dt=ze.finish();Dt&&(Mt.resourceTiming=JSON.parse(JSON.stringify(Dt)))}Ve.vectorTile=Ye.vectorTile,Ve.parse(Ye.vectorTile,he.layerIndex,he.availableImages,he.actor,function(ht,mt){if(ht||!mt)return He(ht);He(null,e.extend({rawTileData:lt.slice(0)},mt,st,Mt))}),he.loaded=he.loaded||{},he.loaded[be]=Ve})},h.prototype.reloadTile=function(Be,He){var he=this,be=this.loaded,ze=Be.uid,Ve=this;if(be&&be[ze]){var Je=be[ze];Je.showCollisionBoxes=Be.showCollisionBoxes;var Ye=function(lt,st){var Mt=Je.reloadCallback;Mt&&(delete Je.reloadCallback,Je.parse(Je.vectorTile,Ve.layerIndex,he.availableImages,Ve.actor,Mt)),He(lt,st)};"parsing"===Je.status?Je.reloadCallback=Ye:"done"===Je.status&&(Je.vectorTile?Je.parse(Je.vectorTile,this.layerIndex,this.availableImages,this.actor,Ye):Ye())}},h.prototype.abortTile=function(Be,He){var he=this.loading,be=Be.uid;he&&he[be]&&he[be].abort&&(he[be].abort(),delete he[be]),He()},h.prototype.removeTile=function(Be,He){var he=this.loaded,be=Be.uid;he&&he[be]&&delete he[be],He()};var s=e.window.ImageBitmap,o=function(){this.loaded={}};o.prototype.loadTile=function(Be,He){var he=Be.uid,be=Be.encoding,ze=Be.rawImageData,Ve=s&&ze instanceof s?this.getImageData(ze):ze,Je=new e.DEMData(he,Ve,be);this.loaded=this.loaded||{},this.loaded[he]=Je,He(null,Je)},o.prototype.getImageData=function(Be){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Be.width,Be.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Be.width,this.offscreenCanvas.height=Be.height,this.offscreenCanvasContext.drawImage(Be,0,0,Be.width,Be.height);var He=this.offscreenCanvasContext.getImageData(-1,-1,Be.width+2,Be.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:He.width,height:He.height},He.data)},o.prototype.removeTile=function(Be){var He=this.loaded,he=Be.uid;He&&He[he]&&delete He[he]};var p=function Be(He,he){var be,ze=He&&He.type;if("FeatureCollection"===ze)for(be=0;be<He.features.length;be++)Be(He.features[be],he);else if("GeometryCollection"===ze)for(be=0;be<He.geometries.length;be++)Be(He.geometries[be],he);else if("Feature"===ze)Be(He.geometry,he);else if("Polygon"===ze)c(He.coordinates,he);else if("MultiPolygon"===ze)for(be=0;be<He.coordinates.length;be++)c(He.coordinates[be],he);return He};function c(Be,He){if(0!==Be.length){a(Be[0],He);for(var he=1;he<Be.length;he++)a(Be[he],!He)}}function a(Be,He){for(var he=0,be=0,ze=Be.length,Ve=ze-1;be<ze;Ve=be++)he+=(Be[be][0]-Be[Ve][0])*(Be[Ve][1]+Be[be][1]);he>=0!=!!He&&Be.reverse()}var y=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,u=function(Be){this._feature=Be,this.extent=e.EXTENT,this.type=Be.type,this.properties=Be.tags,"id"in Be&&!isNaN(Be.id)&&(this.id=parseInt(Be.id,10))};u.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Be=[],He=0,he=this._feature.geometry;He<he.length;He+=1){var be=he[He];Be.push([new e.Point$1(be[0],be[1])])}return Be}for(var ze=[],Ve=0,Je=this._feature.geometry;Ve<Je.length;Ve+=1){for(var Ye=[],lt=0,st=Je[Ve];lt<st.length;lt+=1){var Mt=st[lt];Ye.push(new e.Point$1(Mt[0],Mt[1]))}ze.push(Ye)}return ze},u.prototype.toGeoJSON=function(Be,He,he){return y.call(this,Be,He,he)};var _=function(Be){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Be.length,this._features=Be};_.prototype.feature=function(Be){return new u(this._features[Be])};var b=e.vectorTile.VectorTileFeature,w=T;function T(Be,He){this.options=He||{},this.features=Be,this.length=Be.length}function C(Be,He){this.id="number"==typeof Be.id?Be.id:void 0,this.type=Be.type,this.rawGeometry=1===Be.type?[Be.geometry]:Be.geometry,this.properties=Be.tags,this.extent=He||4096}T.prototype.feature=function(Be){return new C(this.features[Be],this.options.extent)},C.prototype.loadGeometry=function(){var Be=this.rawGeometry;this.geometry=[];for(var He=0;He<Be.length;He++){for(var he=Be[He],be=[],ze=0;ze<he.length;ze++)be.push(new e.Point$1(he[ze][0],he[ze][1]));this.geometry.push(be)}return this.geometry},C.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Be=this.geometry,He=1/0,he=-1/0,be=1/0,ze=-1/0,Ve=0;Ve<Be.length;Ve++)for(var Je=Be[Ve],Ye=0;Ye<Je.length;Ye++){var lt=Je[Ye];He=Math.min(He,lt.x),he=Math.max(he,lt.x),be=Math.min(be,lt.y),ze=Math.max(ze,lt.y)}return[He,be,he,ze]},C.prototype.toGeoJSON=b.prototype.toGeoJSON;var M=E,S=w;function E(Be){var He=new e.pbf;return function(he,be){for(var ze in he.layers)be.writeMessage(3,R,he.layers[ze])}(Be,He),He.finish()}function R(Be,He){var he;He.writeVarintField(15,Be.version||1),He.writeStringField(1,Be.name||""),He.writeVarintField(5,Be.extent||4096);var be={keys:[],values:[],keycache:{},valuecache:{}};for(he=0;he<Be.length;he++)be.feature=Be.feature(he),He.writeMessage(2,D,be);var ze=be.keys;for(he=0;he<ze.length;he++)He.writeStringField(3,ze[he]);var Ve=be.values;for(he=0;he<Ve.length;he++)He.writeMessage(4,Z,Ve[he])}function D(Be,He){var he=Be.feature;void 0!==he.id&&He.writeVarintField(1,he.id),He.writeMessage(2,j,Be),He.writeVarintField(3,he.type),He.writeMessage(4,X,he)}function j(Be,He){var he=Be.feature,be=Be.keys,ze=Be.values,Ve=Be.keycache,Je=Be.valuecache;for(var Ye in he.properties){var lt=Ve[Ye];void 0===lt&&(be.push(Ye),Ve[Ye]=lt=be.length-1),He.writeVarint(lt);var st=he.properties[Ye],Mt=typeof st;"string"!==Mt&&"boolean"!==Mt&&"number"!==Mt&&(st=JSON.stringify(st));var Dt=Mt+":"+st,ht=Je[Dt];void 0===ht&&(ze.push(st),Je[Dt]=ht=ze.length-1),He.writeVarint(ht)}}function H(Be,He){return(He<<3)+(7&Be)}function Y(Be){return Be<<1^Be>>31}function X(Be,He){for(var he=Be.loadGeometry(),be=Be.type,ze=0,Ve=0,Je=he.length,Ye=0;Ye<Je;Ye++){var lt=he[Ye],st=1;1===be&&(st=lt.length),He.writeVarint(H(1,st));for(var Mt=3===be?lt.length-1:lt.length,Dt=0;Dt<Mt;Dt++){1===Dt&&1!==be&&He.writeVarint(H(2,Mt-1));var ht=lt[Dt].x-ze,mt=lt[Dt].y-Ve;He.writeVarint(Y(ht)),He.writeVarint(Y(mt)),ze+=ht,Ve+=mt}3===be&&He.writeVarint(H(7,1))}}function Z(Be,He){var he=typeof Be;"string"===he?He.writeStringField(1,Be):"boolean"===he?He.writeBooleanField(7,Be):"number"===he&&(Be%1!=0?He.writeDoubleField(3,Be):Be<0?He.writeSVarintField(6,Be):He.writeVarintField(5,Be))}function W(Be,He,he,be,ze,Ve){if(!(ze-be<=he)){var Je=be+ze>>1;(function Ye(lt,st,Mt,Dt,ht,mt){for(;ht>Dt;){if(ht-Dt>600){var Ot=ht-Dt+1,At=Mt-Dt+1,It=Math.log(Ot),Se=.5*Math.exp(2*It/3),Ze=.5*Math.sqrt(It*Se*(Ot-Se)/Ot)*(At-Ot/2<0?-1:1);Ye(lt,st,Mt,Math.max(Dt,Math.floor(Mt-At*Se/Ot+Ze)),Math.min(ht,Math.floor(Mt+(Ot-At)*Se/Ot+Ze)),mt)}var Ct=st[2*Mt+mt],Ut=Dt,Jt=ht;for(re(lt,st,Dt,Mt),st[2*ht+mt]>Ct&&re(lt,st,Dt,ht);Ut<Jt;){for(re(lt,st,Ut,Jt),Ut++,Jt--;st[2*Ut+mt]<Ct;)Ut++;for(;st[2*Jt+mt]>Ct;)Jt--}st[2*Dt+mt]===Ct?re(lt,st,Dt,Jt):re(lt,st,++Jt,ht),Jt<=Mt&&(Dt=Jt+1),Mt<=Jt&&(ht=Jt-1)}})(Be,He,Je,be,ze,Ve%2),W(Be,He,he,be,Je-1,Ve+1),W(Be,He,he,Je+1,ze,Ve+1)}}function re(Be,He,he,be){U(Be,he,be),U(He,2*he,2*be),U(He,2*he+1,2*be+1)}function U(Be,He,he){var be=Be[He];Be[He]=Be[he],Be[he]=be}function B(Be,He,he,be){var ze=Be-he,Ve=He-be;return ze*ze+Ve*Ve}M.fromVectorTileJs=E,M.fromGeojsonVt=function(Be,He){He=He||{};var he={};for(var be in Be)he[be]=new w(Be[be].features,He),he[be].name=be,he[be].version=He.version,he[be].extent=He.extent;return E({layers:he})},M.GeoJSONWrapper=S;var V=function(Be){return Be[0]},ee=function(Be){return Be[1]},N=function(Be,He,he,be,ze){void 0===He&&(He=V),void 0===he&&(he=ee),void 0===be&&(be=64),void 0===ze&&(ze=Float64Array),this.nodeSize=be,this.points=Be;for(var Ve=Be.length<65536?Uint16Array:Uint32Array,Je=this.ids=new Ve(Be.length),Ye=this.coords=new ze(2*Be.length),lt=0;lt<Be.length;lt++)Je[lt]=lt,Ye[2*lt]=He(Be[lt]),Ye[2*lt+1]=he(Be[lt]);W(Je,Ye,be,0,Je.length-1,0)};N.prototype.range=function(Be,He,he,be){return function(ze,Ve,Je,Ye,lt,st,Mt){for(var Dt,ht,mt=[0,ze.length-1,0],Ot=[];mt.length;){var At=mt.pop(),It=mt.pop(),Se=mt.pop();if(It-Se<=Mt)for(var Ze=Se;Ze<=It;Ze++)ht=Ve[2*Ze+1],(Dt=Ve[2*Ze])>=Je&&Dt<=lt&&ht>=Ye&&ht<=st&&Ot.push(ze[Ze]);else{var it=Math.floor((Se+It)/2);ht=Ve[2*it+1],(Dt=Ve[2*it])>=Je&&Dt<=lt&&ht>=Ye&&ht<=st&&Ot.push(ze[it]);var dt=(At+1)%2;(0===At?Je<=Dt:Ye<=ht)&&(mt.push(Se),mt.push(it-1),mt.push(dt)),(0===At?lt>=Dt:st>=ht)&&(mt.push(it+1),mt.push(It),mt.push(dt))}}return Ot}(this.ids,this.coords,Be,He,he,be,this.nodeSize)},N.prototype.within=function(Be,He,he){return function(be,ze,Ve,Je,Ye,lt){for(var st=[0,be.length-1,0],Mt=[],Dt=Ye*Ye;st.length;){var ht=st.pop(),mt=st.pop(),Ot=st.pop();if(mt-Ot<=lt)for(var At=Ot;At<=mt;At++)B(ze[2*At],ze[2*At+1],Ve,Je)<=Dt&&Mt.push(be[At]);else{var It=Math.floor((Ot+mt)/2),Se=ze[2*It],Ze=ze[2*It+1];B(Se,Ze,Ve,Je)<=Dt&&Mt.push(be[It]);var it=(ht+1)%2;(0===ht?Ve-Ye<=Se:Je-Ye<=Ze)&&(st.push(Ot),st.push(It-1),st.push(it)),(0===ht?Ve+Ye>=Se:Je+Ye>=Ze)&&(st.push(It+1),st.push(mt),st.push(it))}}return Mt}(this.ids,this.coords,Be,He,he,this.nodeSize)};var K={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Be){return Be}},J=function(Be){this.options=ye(Object.create(K),Be),this.trees=new Array(this.options.maxZoom+1)};function te(Be,He,he,be,ze){return{x:Be,y:He,zoom:1/0,id:he,parentId:-1,numPoints:be,properties:ze}}function ae(Be,He){var he=Be.geometry.coordinates,ze=he[1];return{x:ve(he[0]),y:ue(ze),zoom:1/0,index:He,parentId:-1}}function le(Be){return{type:"Feature",id:Be.id,properties:se(Be),geometry:{type:"Point",coordinates:[(be=Be.x,360*(be-.5)),(He=Be.y,he=(180-360*He)*Math.PI/180,360*Math.atan(Math.exp(he))/Math.PI-90)]}};var He,he,be}function se(Be){var He=Be.numPoints,he=He>=1e4?Math.round(He/1e3)+"k":He>=1e3?Math.round(He/100)/10+"k":He;return ye(ye({},Be.properties),{cluster:!0,cluster_id:Be.id,point_count:He,point_count_abbreviated:he})}function ve(Be){return Be/360+.5}function ue(Be){var He=Math.sin(Be*Math.PI/180),he=.5-.25*Math.log((1+He)/(1-He))/Math.PI;return he<0?0:he>1?1:he}function ye(Be,He){for(var he in He)Be[he]=He[he];return Be}function Me(Be){return Be.x}function pe(Be){return Be.y}function ge(Be,He,he,be,ze,Ve){var Je=ze-he,Ye=Ve-be;if(0!==Je||0!==Ye){var lt=((Be-he)*Je+(He-be)*Ye)/(Je*Je+Ye*Ye);lt>1?(he=ze,be=Ve):lt>0&&(he+=Je*lt,be+=Ye*lt)}return(Je=Be-he)*Je+(Ye=He-be)*Ye}function we(Be,He,he,be){var ze={id:void 0===Be?null:Be,type:He,geometry:he,tags:be,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ve){var Je=Ve.geometry,Ye=Ve.type;if("Point"===Ye||"MultiPoint"===Ye||"LineString"===Ye)oe(Ve,Je);else if("Polygon"===Ye||"MultiLineString"===Ye)for(var lt=0;lt<Je.length;lt++)oe(Ve,Je[lt]);else if("MultiPolygon"===Ye)for(lt=0;lt<Je.length;lt++)for(var st=0;st<Je[lt].length;st++)oe(Ve,Je[lt][st])}(ze),ze}function oe(Be,He){for(var he=0;he<He.length;he+=3)Be.minX=Math.min(Be.minX,He[he]),Be.minY=Math.min(Be.minY,He[he+1]),Be.maxX=Math.max(Be.maxX,He[he]),Be.maxY=Math.max(Be.maxY,He[he+1])}function de(Be,He,he,be){if(He.geometry){var ze=He.geometry.coordinates,Ve=He.geometry.type,Je=Math.pow(he.tolerance/((1<<he.maxZoom)*he.extent),2),Ye=[],lt=He.id;if(he.promoteId?lt=He.properties[he.promoteId]:he.generateId&&(lt=be||0),"Point"===Ve)Te(ze,Ye);else if("MultiPoint"===Ve)for(var st=0;st<ze.length;st++)Te(ze[st],Ye);else if("LineString"===Ve)Ee(ze,Ye,Je,!1);else if("MultiLineString"===Ve){if(he.lineMetrics){for(st=0;st<ze.length;st++)Ee(ze[st],Ye=[],Je,!1),Be.push(we(lt,"LineString",Ye,He.properties));return}Ae(ze,Ye,Je,!1)}else if("Polygon"===Ve)Ae(ze,Ye,Je,!0);else{if("MultiPolygon"!==Ve){if("GeometryCollection"===Ve){for(st=0;st<He.geometry.geometries.length;st++)de(Be,{id:lt,geometry:He.geometry.geometries[st],properties:He.properties},he,be);return}throw new Error("Input data is not a valid GeoJSON object.")}for(st=0;st<ze.length;st++){var Mt=[];Ae(ze[st],Mt,Je,!0),Ye.push(Mt)}}Be.push(we(lt,Ve,Ye,He.properties))}}function Te(Be,He){He.push(De(Be[0])),He.push(Ie(Be[1])),He.push(0)}function Ee(Be,He,he,be){for(var ze,Ve,Je=0,Ye=0;Ye<Be.length;Ye++){var lt=De(Be[Ye][0]),st=Ie(Be[Ye][1]);He.push(lt),He.push(st),He.push(0),Ye>0&&(Je+=be?(ze*st-lt*Ve)/2:Math.sqrt(Math.pow(lt-ze,2)+Math.pow(st-Ve,2))),ze=lt,Ve=st}var Mt=He.length-3;He[2]=1,function Dt(ht,mt,Ot,At){for(var It,Se=At,Ze=Ot-mt>>1,it=Ot-mt,dt=ht[mt],Ct=ht[mt+1],Ut=ht[Ot],Jt=ht[Ot+1],qt=mt+3;qt<Ot;qt+=3){var pr=ge(ht[qt],ht[qt+1],dt,Ct,Ut,Jt);if(pr>Se)It=qt,Se=pr;else if(pr===Se){var Sr=Math.abs(qt-Ze);Sr<it&&(It=qt,it=Sr)}}Se>At&&(It-mt>3&&Dt(ht,mt,It,At),ht[It+2]=Se,Ot-It>3&&Dt(ht,It,Ot,At))}(He,0,Mt,he),He[Mt+2]=1,He.size=Math.abs(Je),He.start=0,He.end=He.size}function Ae(Be,He,he,be){for(var ze=0;ze<Be.length;ze++){var Ve=[];Ee(Be[ze],Ve,he,be),He.push(Ve)}}function De(Be){return Be/360+.5}function Ie(Be){var He=Math.sin(Be*Math.PI/180),he=.5-.25*Math.log((1+He)/(1-He))/Math.PI;return he<0?0:he>1?1:he}function Oe(Be,He,he,be,ze,Ve,Je,Ye){if(be/=He,Ve>=(he/=He)&&Je<be)return Be;if(Je<he||Ve>=be)return null;for(var lt=[],st=0;st<Be.length;st++){var Mt=Be[st],Dt=Mt.geometry,ht=Mt.type,mt=0===ze?Mt.minX:Mt.minY,Ot=0===ze?Mt.maxX:Mt.maxY;if(mt>=he&&Ot<be)lt.push(Mt);else if(!(Ot<he||mt>=be)){var At=[];if("Point"===ht||"MultiPoint"===ht)Xe(Dt,At,he,be,ze);else if("LineString"===ht)Fe(Dt,At,he,be,ze,!1,Ye.lineMetrics);else if("MultiLineString"===ht)Re(Dt,At,he,be,ze,!1);else if("Polygon"===ht)Re(Dt,At,he,be,ze,!0);else if("MultiPolygon"===ht)for(var It=0;It<Dt.length;It++){var Se=[];Re(Dt[It],Se,he,be,ze,!0),Se.length&&At.push(Se)}if(At.length){if(Ye.lineMetrics&&"LineString"===ht){for(It=0;It<At.length;It++)lt.push(we(Mt.id,ht,At[It],Mt.tags));continue}"LineString"!==ht&&"MultiLineString"!==ht||(1===At.length?(ht="LineString",At=At[0]):ht="MultiLineString"),"Point"!==ht&&"MultiPoint"!==ht||(ht=3===At.length?"Point":"MultiPoint"),lt.push(we(Mt.id,ht,At,Mt.tags))}}}return lt.length?lt:null}function Xe(Be,He,he,be,ze){for(var Ve=0;Ve<Be.length;Ve+=3){var Je=Be[Ve+ze];Je>=he&&Je<=be&&(He.push(Be[Ve]),He.push(Be[Ve+1]),He.push(Be[Ve+2]))}}function Fe(Be,He,he,be,ze,Ve,Je){for(var Ye,lt,st=Pe(Be),Mt=0===ze?Qe:ct,Dt=Be.start,ht=0;ht<Be.length-3;ht+=3){var mt=Be[ht],Ot=Be[ht+1],At=Be[ht+2],It=Be[ht+3],Se=Be[ht+4],Ze=0===ze?mt:Ot,it=0===ze?It:Se,dt=!1;Je&&(Ye=Math.sqrt(Math.pow(mt-It,2)+Math.pow(Ot-Se,2))),Ze<he?it>he&&(lt=Mt(st,mt,Ot,It,Se,he),Je&&(st.start=Dt+Ye*lt)):Ze>be?it<be&&(lt=Mt(st,mt,Ot,It,Se,be),Je&&(st.start=Dt+Ye*lt)):qe(st,mt,Ot,At),it<he&&Ze>=he&&(lt=Mt(st,mt,Ot,It,Se,he),dt=!0),it>be&&Ze<=be&&(lt=Mt(st,mt,Ot,It,Se,be),dt=!0),!Ve&&dt&&(Je&&(st.end=Dt+Ye*lt),He.push(st),st=Pe(Be)),Je&&(Dt+=Ye)}var Ct=Be.length-3;mt=Be[Ct],Ot=Be[Ct+1],At=Be[Ct+2],(Ze=0===ze?mt:Ot)>=he&&Ze<=be&&qe(st,mt,Ot,At),Ct=st.length-3,Ve&&Ct>=3&&(st[Ct]!==st[0]||st[Ct+1]!==st[1])&&qe(st,st[0],st[1],st[2]),st.length&&He.push(st)}function Pe(Be){var He=[];return He.size=Be.size,He.start=Be.start,He.end=Be.end,He}function Re(Be,He,he,be,ze,Ve){for(var Je=0;Je<Be.length;Je++)Fe(Be[Je],He,he,be,ze,Ve,!1)}function qe(Be,He,he,be){Be.push(He),Be.push(he),Be.push(be)}function Qe(Be,He,he,be,ze,Ve){var Je=(Ve-He)/(be-He);return Be.push(Ve),Be.push(he+(ze-he)*Je),Be.push(1),Je}function ct(Be,He,he,be,ze,Ve){var Je=(Ve-he)/(ze-he);return Be.push(He+(be-He)*Je),Be.push(Ve),Be.push(1),Je}function bt(Be,He){for(var he=[],be=0;be<Be.length;be++){var ze,Ve=Be[be],Je=Ve.type;if("Point"===Je||"MultiPoint"===Je||"LineString"===Je)ze=Tt(Ve.geometry,He);else if("MultiLineString"===Je||"Polygon"===Je){ze=[];for(var Ye=0;Ye<Ve.geometry.length;Ye++)ze.push(Tt(Ve.geometry[Ye],He))}else if("MultiPolygon"===Je)for(ze=[],Ye=0;Ye<Ve.geometry.length;Ye++){for(var lt=[],st=0;st<Ve.geometry[Ye].length;st++)lt.push(Tt(Ve.geometry[Ye][st],He));ze.push(lt)}he.push(we(Ve.id,Je,ze,Ve.tags))}return he}function Tt(Be,He){var he=[];he.size=Be.size,void 0!==Be.start&&(he.start=Be.start,he.end=Be.end);for(var be=0;be<Be.length;be+=3)he.push(Be[be]+He,Be[be+1],Be[be+2]);return he}function _t(Be,He){if(Be.transformed)return Be;var he,be,ze,Ve=1<<Be.z,Je=Be.x,Ye=Be.y;for(he=0;he<Be.features.length;he++){var lt=Be.features[he],st=lt.geometry,Mt=lt.type;if(lt.geometry=[],1===Mt)for(be=0;be<st.length;be+=2)lt.geometry.push(nt(st[be],st[be+1],He,Ve,Je,Ye));else for(be=0;be<st.length;be++){var Dt=[];for(ze=0;ze<st[be].length;ze+=2)Dt.push(nt(st[be][ze],st[be][ze+1],He,Ve,Je,Ye));lt.geometry.push(Dt)}}return Be.transformed=!0,Be}function nt(Be,He,he,be,ze,Ve){return[Math.round(he*(Be*be-ze)),Math.round(he*(He*be-Ve))]}function Ke(Be,He,he,be,ze){for(var Ve=He===ze.maxZoom?0:ze.tolerance/((1<<He)*ze.extent),Je={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:he,y:be,z:He,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ye=0;Ye<Be.length;Ye++){Je.numFeatures++,xt(Je,Be[Ye],Ve,ze);var lt=Be[Ye].minX,st=Be[Ye].minY,Mt=Be[Ye].maxX,Dt=Be[Ye].maxY;lt<Je.minX&&(Je.minX=lt),st<Je.minY&&(Je.minY=st),Mt>Je.maxX&&(Je.maxX=Mt),Dt>Je.maxY&&(Je.maxY=Dt)}return Je}function xt(Be,He,he,be){var ze=He.geometry,Ve=He.type,Je=[];if("Point"===Ve||"MultiPoint"===Ve)for(var Ye=0;Ye<ze.length;Ye+=3)Je.push(ze[Ye]),Je.push(ze[Ye+1]),Be.numPoints++,Be.numSimplified++;else if("LineString"===Ve)Ht(Je,ze,Be,he,!1,!1);else if("MultiLineString"===Ve||"Polygon"===Ve)for(Ye=0;Ye<ze.length;Ye++)Ht(Je,ze[Ye],Be,he,"Polygon"===Ve,0===Ye);else if("MultiPolygon"===Ve)for(var lt=0;lt<ze.length;lt++){var st=ze[lt];for(Ye=0;Ye<st.length;Ye++)Ht(Je,st[Ye],Be,he,!0,0===Ye)}if(Je.length){var Mt=He.tags||null;if("LineString"===Ve&&be.lineMetrics){for(var Dt in Mt={},He.tags)Mt[Dt]=He.tags[Dt];Mt.mapbox_clip_start=ze.start/ze.size,Mt.mapbox_clip_end=ze.end/ze.size}var ht={geometry:Je,type:"Polygon"===Ve||"MultiPolygon"===Ve?3:"LineString"===Ve||"MultiLineString"===Ve?2:1,tags:Mt};null!==He.id&&(ht.id=He.id),Be.features.push(ht)}}function Ht(Be,He,he,be,ze,Ve){var Je=be*be;if(be>0&&He.size<(ze?Je:be))he.numPoints+=He.length/3;else{for(var Ye=[],lt=0;lt<He.length;lt+=3)(0===be||He[lt+2]>Je)&&(he.numSimplified++,Ye.push(He[lt]),Ye.push(He[lt+1])),he.numPoints++;ze&&function(st,Mt){for(var Dt=0,ht=0,mt=st.length,Ot=mt-2;ht<mt;Ot=ht,ht+=2)Dt+=(st[ht]-st[Ot])*(st[ht+1]+st[Ot+1]);if(Dt>0===Mt)for(ht=0,mt=st.length;ht<mt/2;ht+=2){var At=st[ht],It=st[ht+1];st[ht]=st[mt-2-ht],st[ht+1]=st[mt-1-ht],st[mt-2-ht]=At,st[mt-1-ht]=It}}(Ye,Ve),Be.push(Ye)}}function Zt(Be,He){var he=(He=this.options=function(ze,Ve){for(var Je in Ve)ze[Je]=Ve[Je];return ze}(Object.create(this.options),He)).debug;if(he&&console.time("preprocess data"),He.maxZoom<0||He.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(He.promoteId&&He.generateId)throw new Error("promoteId and generateId cannot be used together.");var ze,Ve,Je,Ye,lt,st,be=function(ze,Ve){var Je=[];if("FeatureCollection"===ze.type)for(var Ye=0;Ye<ze.features.length;Ye++)de(Je,ze.features[Ye],Ve,Ye);else de(Je,"Feature"===ze.type?ze:{geometry:ze},Ve);return Je}(Be,He);this.tiles={},this.tileCoords=[],he&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",He.indexMaxZoom,He.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(ze=be,Ve=He,Je=Ve.buffer/Ve.extent,Ye=ze,lt=Oe(ze,1,-1-Je,Je,0,-1,2,Ve),st=Oe(ze,1,1-Je,2+Je,0,-1,2,Ve),(lt||st)&&(Ye=Oe(ze,1,-Je,1+Je,0,-1,2,Ve)||[],lt&&(Ye=bt(lt,1).concat(Ye)),st&&(Ye=Ye.concat(bt(st,-1)))),be=Ye).length&&this.splitTile(be,0,0,0),he&&(be.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function $t(Be,He,he){return 32*((1<<Be)*he+He)+Be}function Xt(Be,He){var he=Be.tileID.canonical;if(!this._geoJSONIndex)return He(null,null);var be=this._geoJSONIndex.getTile(he.z,he.x,he.y);if(!be)return He(null,null);var ze=new _(be.features),Ve=M(ze);0===Ve.byteOffset&&Ve.byteLength===Ve.buffer.byteLength||(Ve=new Uint8Array(Ve)),He(null,{vectorTile:ze,rawData:Ve.buffer})}J.prototype.load=function(Be){var He=this.options,he=He.log,be=He.minZoom,ze=He.maxZoom,Ve=He.nodeSize;he&&console.time("total time");var Je="prepare "+Be.length+" points";he&&console.time(Je),this.points=Be;for(var Ye=[],lt=0;lt<Be.length;lt++)Be[lt].geometry&&Ye.push(ae(Be[lt],lt));this.trees[ze+1]=new N(Ye,Me,pe,Ve,Float32Array),he&&console.timeEnd(Je);for(var st=ze;st>=be;st--){var Mt=+Date.now();Ye=this._cluster(Ye,st),this.trees[st]=new N(Ye,Me,pe,Ve,Float32Array),he&&console.log("z%d: %d clusters in %dms",st,Ye.length,+Date.now()-Mt)}return he&&console.timeEnd("total time"),this},J.prototype.getClusters=function(Be,He){var he=((Be[0]+180)%360+360)%360-180,be=Math.max(-90,Math.min(90,Be[1])),ze=180===Be[2]?180:((Be[2]+180)%360+360)%360-180,Ve=Math.max(-90,Math.min(90,Be[3]));if(Be[2]-Be[0]>=360)he=-180,ze=180;else if(he>ze){var Je=this.getClusters([he,be,180,Ve],He),Ye=this.getClusters([-180,be,ze,Ve],He);return Je.concat(Ye)}for(var lt=this.trees[this._limitZoom(He)],st=[],Mt=0,Dt=lt.range(ve(he),ue(Ve),ve(ze),ue(be));Mt<Dt.length;Mt+=1){var mt=lt.points[Dt[Mt]];st.push(mt.numPoints?le(mt):this.points[mt.index])}return st},J.prototype.getChildren=function(Be){var He=this._getOriginId(Be),he=this._getOriginZoom(Be),be="No cluster with the specified id.",ze=this.trees[he];if(!ze)throw new Error(be);var Ve=ze.points[He];if(!Ve)throw new Error(be);for(var Je=this.options.radius/(this.options.extent*Math.pow(2,he-1)),Ye=[],lt=0,st=ze.within(Ve.x,Ve.y,Je);lt<st.length;lt+=1){var Dt=ze.points[st[lt]];Dt.parentId===Be&&Ye.push(Dt.numPoints?le(Dt):this.points[Dt.index])}if(0===Ye.length)throw new Error(be);return Ye},J.prototype.getLeaves=function(Be,He,he){var be=[];return this._appendLeaves(be,Be,He=He||10,he=he||0,0),be},J.prototype.getTile=function(Be,He,he){var be=this.trees[this._limitZoom(Be)],ze=Math.pow(2,Be),Ve=this.options,Ye=Ve.radius/Ve.extent,lt=(he-Ye)/ze,st=(he+1+Ye)/ze,Mt={features:[]};return this._addTileFeatures(be.range((He-Ye)/ze,lt,(He+1+Ye)/ze,st),be.points,He,he,ze,Mt),0===He&&this._addTileFeatures(be.range(1-Ye/ze,lt,1,st),be.points,ze,he,ze,Mt),He===ze-1&&this._addTileFeatures(be.range(0,lt,Ye/ze,st),be.points,-1,he,ze,Mt),Mt.features.length?Mt:null},J.prototype.getClusterExpansionZoom=function(Be){for(var He=this._getOriginZoom(Be)-1;He<=this.options.maxZoom;){var he=this.getChildren(Be);if(He++,1!==he.length)break;Be=he[0].properties.cluster_id}return He},J.prototype._appendLeaves=function(Be,He,he,be,ze){for(var Ve=0,Je=this.getChildren(He);Ve<Je.length;Ve+=1){var Ye=Je[Ve],lt=Ye.properties;if(lt&&lt.cluster?ze+lt.point_count<=be?ze+=lt.point_count:ze=this._appendLeaves(Be,lt.cluster_id,he,be,ze):ze<be?ze++:Be.push(Ye),Be.length===he)break}return ze},J.prototype._addTileFeatures=function(Be,He,he,be,ze,Ve){for(var Je=0,Ye=Be;Je<Ye.length;Je+=1){var lt=He[Ye[Je]],st=lt.numPoints,Mt={type:1,geometry:[[Math.round(this.options.extent*(lt.x*ze-he)),Math.round(this.options.extent*(lt.y*ze-be))]],tags:st?se(lt):this.points[lt.index].properties},Dt=void 0;st?Dt=lt.id:this.options.generateId?Dt=lt.index:this.points[lt.index].id&&(Dt=this.points[lt.index].id),void 0!==Dt&&(Mt.id=Dt),Ve.features.push(Mt)}},J.prototype._limitZoom=function(Be){return Math.max(this.options.minZoom,Math.min(Be,this.options.maxZoom+1))},J.prototype._cluster=function(Be,He){for(var he=[],be=this.options,Je=be.reduce,Ye=be.radius/(be.extent*Math.pow(2,He)),lt=0;lt<Be.length;lt++){var st=Be[lt];if(!(st.zoom<=He)){st.zoom=He;for(var Mt=this.trees[He+1],Dt=Mt.within(st.x,st.y,Ye),ht=st.numPoints||1,mt=st.x*ht,Ot=st.y*ht,At=Je&&ht>1?this._map(st,!0):null,It=(lt<<5)+(He+1)+this.points.length,Se=0,Ze=Dt;Se<Ze.length;Se+=1){var dt=Mt.points[Ze[Se]];if(!(dt.zoom<=He)){dt.zoom=He;var Ct=dt.numPoints||1;mt+=dt.x*Ct,Ot+=dt.y*Ct,ht+=Ct,dt.parentId=It,Je&&(At||(At=this._map(st,!0)),Je(At,this._map(dt)))}}1===ht?he.push(st):(st.parentId=It,he.push(te(mt/ht,Ot/ht,It,ht,At)))}}return he},J.prototype._getOriginId=function(Be){return Be-this.points.length>>5},J.prototype._getOriginZoom=function(Be){return(Be-this.points.length)%32},J.prototype._map=function(Be,He){if(Be.numPoints)return He?ye({},Be.properties):Be.properties;var he=this.points[Be.index].properties,be=this.options.map(he);return He&&be===he?ye({},be):be},Zt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Zt.prototype.splitTile=function(Be,He,he,be,ze,Ve,Je){for(var Ye=[Be,He,he,be],lt=this.options,st=lt.debug;Ye.length;){be=Ye.pop(),he=Ye.pop(),He=Ye.pop(),Be=Ye.pop();var Mt=1<<He,Dt=$t(He,he,be),ht=this.tiles[Dt];if(!ht&&(st>1&&console.time("creation"),ht=this.tiles[Dt]=Ke(Be,He,he,be,lt),this.tileCoords.push({z:He,x:he,y:be}),st)){st>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",He,he,be,ht.numFeatures,ht.numPoints,ht.numSimplified),console.timeEnd("creation"));var mt="z"+He;this.stats[mt]=(this.stats[mt]||0)+1,this.total++}if(ht.source=Be,ze){if(He===lt.maxZoom||He===ze)continue;var Ot=1<<ze-He;if(he!==Math.floor(Ve/Ot)||be!==Math.floor(Je/Ot))continue}else if(He===lt.indexMaxZoom||ht.numPoints<=lt.indexMaxPoints)continue;if(ht.source=null,0!==Be.length){st>1&&console.time("clipping");var At,It,Se,Ze,it,dt,Ct=.5*lt.buffer/lt.extent,Ut=.5-Ct,Jt=.5+Ct,qt=1+Ct;At=It=Se=Ze=null,it=Oe(Be,Mt,he-Ct,he+Jt,0,ht.minX,ht.maxX,lt),dt=Oe(Be,Mt,he+Ut,he+qt,0,ht.minX,ht.maxX,lt),Be=null,it&&(At=Oe(it,Mt,be-Ct,be+Jt,1,ht.minY,ht.maxY,lt),It=Oe(it,Mt,be+Ut,be+qt,1,ht.minY,ht.maxY,lt),it=null),dt&&(Se=Oe(dt,Mt,be-Ct,be+Jt,1,ht.minY,ht.maxY,lt),Ze=Oe(dt,Mt,be+Ut,be+qt,1,ht.minY,ht.maxY,lt),dt=null),st>1&&console.timeEnd("clipping"),Ye.push(At||[],He+1,2*he,2*be),Ye.push(It||[],He+1,2*he,2*be+1),Ye.push(Se||[],He+1,2*he+1,2*be),Ye.push(Ze||[],He+1,2*he+1,2*be+1)}}},Zt.prototype.getTile=function(Be,He,he){var be=this.options,ze=be.extent,Ve=be.debug;if(Be<0||Be>24)return null;var Je=1<<Be,Ye=$t(Be,He=(He%Je+Je)%Je,he);if(this.tiles[Ye])return _t(this.tiles[Ye],ze);Ve>1&&console.log("drilling down to z%d-%d-%d",Be,He,he);for(var lt,st=Be,Mt=He,Dt=he;!lt&&st>0;)st--,Mt=Math.floor(Mt/2),Dt=Math.floor(Dt/2),lt=this.tiles[$t(st,Mt,Dt)];return lt&&lt.source?(Ve>1&&console.log("found parent tile z%d-%d-%d",st,Mt,Dt),Ve>1&&console.time("drilling down"),this.splitTile(lt.source,st,Mt,Dt,Be,He,he),Ve>1&&console.timeEnd("drilling down"),this.tiles[Ye]?_t(this.tiles[Ye],ze):null):null};var cr=function(Be){function He(he,be,ze,Ve){Be.call(this,he,be,ze,Xt),Ve&&(this.loadGeoJSON=Ve)}return Be&&(He.__proto__=Be),(He.prototype=Object.create(Be&&Be.prototype)).constructor=He,He.prototype.loadData=function(he,be){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=be,this._pendingLoadDataParams=he,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},He.prototype._loadData=function(){var he=this;if(this._pendingCallback&&this._pendingLoadDataParams){var be=this._pendingCallback,ze=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Ve=!!(ze&&ze.request&&ze.request.collectResourceTiming)&&new e.RequestPerformance(ze.request);this.loadGeoJSON(ze,function(Je,Ye){if(Je||!Ye)return be(Je);if("object"!=typeof Ye)return be(new Error("Input data given to '"+ze.source+"' is not a valid GeoJSON object."));p(Ye,!0);try{he._geoJSONIndex=ze.cluster?new J(function(Mt){var Dt=Mt.superclusterOptions,ht=Mt.clusterProperties;if(!ht||!Dt)return Dt;for(var mt={},Ot={},At={accumulated:null,zoom:0},It={properties:null},Se=Object.keys(ht),Ze=0,it=Se;Ze<it.length;Ze+=1){var dt=it[Ze],Ct=ht[dt],Ut=Ct[0],qt=e.createExpression(Ct[1]),pr=e.createExpression("string"==typeof Ut?[Ut,["accumulated"],["get",dt]]:Ut);mt[dt]=qt.value,Ot[dt]=pr.value}return Dt.map=function(Sr){It.properties=Sr;for(var mr={},tr=0,rr=Se;tr<rr.length;tr+=1){var ar=rr[tr];mr[ar]=mt[ar].evaluate(At,It)}return mr},Dt.reduce=function(Sr,mr){It.properties=mr;for(var tr=0,rr=Se;tr<rr.length;tr+=1){var ar=rr[tr];At.accumulated=Sr[ar],Sr[ar]=Ot[ar].evaluate(At,It)}},Dt}(ze)).load(Ye.features):new Zt(Mt=Ye,ze.geojsonVtOptions)}catch(Mt){return be(Mt)}var Mt;he.loaded={};var lt={};if(Ve){var st=Ve.finish();st&&(lt.resourceTiming={},lt.resourceTiming[ze.source]=JSON.parse(JSON.stringify(st)))}be(null,lt)})}},He.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},He.prototype.reloadTile=function(he,be){var ze=this.loaded;return ze&&ze[he.uid]?Be.prototype.reloadTile.call(this,he,be):this.loadTile(he,be)},He.prototype.loadGeoJSON=function(he,be){if(he.request)e.getJSON(he.request,be);else{if("string"!=typeof he.data)return be(new Error("Input data given to '"+he.source+"' is not a valid GeoJSON object."));try{return be(null,JSON.parse(he.data))}catch{return be(new Error("Input data given to '"+he.source+"' is not a valid GeoJSON object."))}}},He.prototype.removeSource=function(he,be){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),be()},He.prototype.getClusterExpansionZoom=function(he,be){try{be(null,this._geoJSONIndex.getClusterExpansionZoom(he.clusterId))}catch(ze){be(ze)}},He.prototype.getClusterChildren=function(he,be){try{be(null,this._geoJSONIndex.getChildren(he.clusterId))}catch(ze){be(ze)}},He.prototype.getClusterLeaves=function(he,be){try{be(null,this._geoJSONIndex.getLeaves(he.clusterId,he.limit,he.offset))}catch(ze){be(ze)}},He}(h),Ft=function(Be){var He=this;this.self=Be,this.actor=new e.Actor(Be,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:h,geojson:cr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(he,be){if(He.workerSourceTypes[he])throw new Error('Worker source with name "'+he+'" already registered.');He.workerSourceTypes[he]=be},this.self.registerRTLTextPlugin=function(he){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=he.applyArabicShaping,e.plugin.processBidirectionalText=he.processBidirectionalText,e.plugin.processStyledBidirectionalText=he.processStyledBidirectionalText}};return Ft.prototype.setReferrer=function(Be,He){this.referrer=He},Ft.prototype.setImages=function(Be,He,he){for(var be in this.availableImages[Be]=He,this.workerSources[Be]){var ze=this.workerSources[Be][be];for(var Ve in ze)ze[Ve].availableImages=He}he()},Ft.prototype.setLayers=function(Be,He,he){this.getLayerIndex(Be).replace(He),he()},Ft.prototype.updateLayers=function(Be,He,he){this.getLayerIndex(Be).update(He.layers,He.removedIds),he()},Ft.prototype.loadTile=function(Be,He,he){this.getWorkerSource(Be,He.type,He.source).loadTile(He,he)},Ft.prototype.loadDEMTile=function(Be,He,he){this.getDEMWorkerSource(Be,He.source).loadTile(He,he)},Ft.prototype.reloadTile=function(Be,He,he){this.getWorkerSource(Be,He.type,He.source).reloadTile(He,he)},Ft.prototype.abortTile=function(Be,He,he){this.getWorkerSource(Be,He.type,He.source).abortTile(He,he)},Ft.prototype.removeTile=function(Be,He,he){this.getWorkerSource(Be,He.type,He.source).removeTile(He,he)},Ft.prototype.removeDEMTile=function(Be,He){this.getDEMWorkerSource(Be,He.source).removeTile(He)},Ft.prototype.removeSource=function(Be,He,he){if(this.workerSources[Be]&&this.workerSources[Be][He.type]&&this.workerSources[Be][He.type][He.source]){var be=this.workerSources[Be][He.type][He.source];delete this.workerSources[Be][He.type][He.source],void 0!==be.removeSource?be.removeSource(He,he):he()}},Ft.prototype.loadWorkerSource=function(Be,He,he){try{this.self.importScripts(He.url),he()}catch(be){he(be.toString())}},Ft.prototype.syncRTLPluginState=function(Be,He,he){try{e.plugin.setState(He);var be=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=be){this.self.importScripts(be);var ze=e.plugin.isParsed();he(ze?void 0:new Error("RTL Text Plugin failed to import scripts from "+be),ze)}}catch(Ve){he(Ve.toString())}},Ft.prototype.getAvailableImages=function(Be){var He=this.availableImages[Be];return He||(He=[]),He},Ft.prototype.getLayerIndex=function(Be){var He=this.layerIndexes[Be];return He||(He=this.layerIndexes[Be]=new l),He},Ft.prototype.getWorkerSource=function(Be,He,he){var be=this;return this.workerSources[Be]||(this.workerSources[Be]={}),this.workerSources[Be][He]||(this.workerSources[Be][He]={}),this.workerSources[Be][He][he]||(this.workerSources[Be][He][he]=new this.workerSourceTypes[He]({send:function(Ve,Je,Ye){be.actor.send(Ve,Je,Ye,Be)}},this.getLayerIndex(Be),this.getAvailableImages(Be))),this.workerSources[Be][He][he]},Ft.prototype.getDEMWorkerSource=function(Be,He){return this.demWorkerSources[Be]||(this.demWorkerSources[Be]={}),this.demWorkerSources[Be][He]||(this.demWorkerSources[Be][He]=new o),this.demWorkerSources[Be][He]},Ft.prototype.enforceCacheSizeLimit=function(Be,He){e.enforceCacheSizeLimit(He)},typeof WorkerGlobalScope<"u"&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new Ft(e.window)),Ft}),x(0,function(e){var n=e.createCommonjsModule(function(L){function z(ie){return!F(ie)}function F(ie){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var fe,xe,ke=new Blob([""],{type:"text/javascript"}),Ce=URL.createObjectURL(ke);try{xe=new Worker(Ce),fe=!0}catch{fe=!1}return xe&&xe.terminate(),URL.revokeObjectURL(Ce),fe}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var fe=document.createElement("canvas");fe.width=fe.height=1;var xe=fe.getContext("2d");if(!xe)return!1;var ke=xe.getImageData(0,0,1,1);return ke&&ke.width===fe.width}()?(void 0===G[fe=ie&&ie.failIfMajorPerformanceCaveat]&&(G[fe]=function(xe){var Ue,$e,at,ke=(Ue=xe,$e=document.createElement("canvas"),(at=Object.create(z.webGLContextAttributes)).failIfMajorPerformanceCaveat=Ue,$e.probablySupportsContext?$e.probablySupportsContext("webgl",at)||$e.probablySupportsContext("experimental-webgl",at):$e.supportsContext?$e.supportsContext("webgl",at)||$e.supportsContext("experimental-webgl",at):$e.getContext("webgl",at)||$e.getContext("experimental-webgl",at));if(!ke)return!1;var Ce=ke.createShader(ke.VERTEX_SHADER);return!(!Ce||ke.isContextLost())&&(ke.shaderSource(Ce,"void main() {}"),ke.compileShader(Ce),!0===ke.getShaderParameter(Ce,ke.COMPILE_STATUS))}(fe)),G[fe]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var fe}L.exports?L.exports=z:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=z,window.mapboxgl.notSupportedReason=F);var G={};z.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),i={create:function(L,z,F){var G=e.window.document.createElement(L);return void 0!==z&&(G.className=z),F&&F.appendChild(G),G},createNS:function(L,z){return e.window.document.createElementNS(L,z)}},l=e.window.document.documentElement.style;function r(L){if(!l)return L[0];for(var z=0;z<L.length;z++)if(L[z]in l)return L[z];return L[0]}var d,f=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){l&&f&&(d=l[f],l[f]="none")},i.enableDrag=function(){l&&f&&(l[f]=d)};var t=r(["transform","WebkitTransform"]);i.setTransform=function(L,z){L.style[t]=z};var h=!1;try{var s=Object.defineProperty({},"passive",{get:function(){h=!0}});e.window.addEventListener("test",s,s),e.window.removeEventListener("test",s,s)}catch{h=!1}i.addEventListener=function(L,z,F,G){void 0===G&&(G={}),L.addEventListener(z,F,"passive"in G&&h?G:G.capture)},i.removeEventListener=function(L,z,F,G){void 0===G&&(G={}),L.removeEventListener(z,F,"passive"in G&&h?G:G.capture)};var o=function(L){L.preventDefault(),L.stopPropagation(),e.window.removeEventListener("click",o,!0)};function p(L){var z=L.userImage;return!!(z&&z.render&&z.render())&&(L.data.replace(new Uint8Array(z.data.buffer)),!0)}i.suppressClick=function(){e.window.addEventListener("click",o,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",o,!0)},0)},i.mousePos=function(L,z){var F=L.getBoundingClientRect();return new e.Point(z.clientX-F.left-L.clientLeft,z.clientY-F.top-L.clientTop)},i.touchPos=function(L,z){for(var F=L.getBoundingClientRect(),G=[],ie=0;ie<z.length;ie++)G.push(new e.Point(z[ie].clientX-F.left-L.clientLeft,z[ie].clientY-F.top-L.clientTop));return G},i.mouseButton=function(L){return void 0!==e.window.InstallTrigger&&2===L.button&&L.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:L.button},i.remove=function(L){L.parentNode&&L.parentNode.removeChild(L)};var c=function(L){function z(){L.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.isLoaded=function(){return this.loaded},z.prototype.setLoaded=function(F){if(this.loaded!==F&&(this.loaded=F,F)){for(var G=0,ie=this.requestors;G<ie.length;G+=1){var fe=ie[G];this._notify(fe.ids,fe.callback)}this.requestors=[]}},z.prototype.getImage=function(F){return this.images[F]},z.prototype.addImage=function(F,G){this._validate(F,G)&&(this.images[F]=G)},z.prototype._validate=function(F,G){var ie=!0;return this._validateStretch(G.stretchX,G.data&&G.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "stretchX" value'))),ie=!1),this._validateStretch(G.stretchY,G.data&&G.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "stretchY" value'))),ie=!1),this._validateContent(G.content,G)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "content" value'))),ie=!1),ie},z.prototype._validateStretch=function(F,G){if(!F)return!0;for(var ie=0,fe=0,xe=F;fe<xe.length;fe+=1){var ke=xe[fe];if(ke[0]<ie||ke[1]<ke[0]||G<ke[1])return!1;ie=ke[1]}return!0},z.prototype._validateContent=function(F,G){return!(F&&(4!==F.length||F[0]<0||G.data.width<F[0]||F[1]<0||G.data.height<F[1]||F[2]<0||G.data.width<F[2]||F[3]<0||G.data.height<F[3]||F[2]<F[0]||F[3]<F[1]))},z.prototype.updateImage=function(F,G){G.version=this.images[F].version+1,this.images[F]=G,this.updatedImages[F]=!0},z.prototype.removeImage=function(F){var G=this.images[F];delete this.images[F],delete this.patterns[F],G.userImage&&G.userImage.onRemove&&G.userImage.onRemove()},z.prototype.listImages=function(){return Object.keys(this.images)},z.prototype.getImages=function(F,G){var ie=!0;if(!this.isLoaded())for(var fe=0,xe=F;fe<xe.length;fe+=1)this.images[xe[fe]]||(ie=!1);this.isLoaded()||ie?this._notify(F,G):this.requestors.push({ids:F,callback:G})},z.prototype._notify=function(F,G){for(var ie={},fe=0,xe=F;fe<xe.length;fe+=1){var ke=xe[fe];this.images[ke]||this.fire(new e.Event("styleimagemissing",{id:ke}));var Ce=this.images[ke];Ce?ie[ke]={data:Ce.data.clone(),pixelRatio:Ce.pixelRatio,sdf:Ce.sdf,version:Ce.version,stretchX:Ce.stretchX,stretchY:Ce.stretchY,content:Ce.content,hasRenderCallback:Boolean(Ce.userImage&&Ce.userImage.render)}:e.warnOnce('Image "'+ke+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}G(null,ie)},z.prototype.getPixelSize=function(){var F=this.atlasImage;return{width:F.width,height:F.height}},z.prototype.getPattern=function(F){var G=this.patterns[F],ie=this.getImage(F);if(!ie)return null;if(G&&G.position.version===ie.version)return G.position;if(G)G.position.version=ie.version;else{var fe={w:ie.data.width+2,h:ie.data.height+2,x:0,y:0},xe=new e.ImagePosition(fe,ie);this.patterns[F]={bin:fe,position:xe}}return this._updatePatternAtlas(),this.patterns[F].position},z.prototype.bind=function(F){var G=F.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(F,this.atlasImage,G.RGBA),this.atlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE)},z.prototype._updatePatternAtlas=function(){var F=[];for(var G in this.patterns)F.push(this.patterns[G].bin);var ie=e.potpack(F),fe=ie.w,xe=ie.h,ke=this.atlasImage;for(var Ce in ke.resize({width:fe||1,height:xe||1}),this.patterns){var Ue=this.patterns[Ce].bin,$e=Ue.x+1,at=Ue.y+1,kt=this.images[Ce].data,Pt=kt.width,St=kt.height;e.RGBAImage.copy(kt,ke,{x:0,y:0},{x:$e,y:at},{width:Pt,height:St}),e.RGBAImage.copy(kt,ke,{x:0,y:St-1},{x:$e,y:at-1},{width:Pt,height:1}),e.RGBAImage.copy(kt,ke,{x:0,y:0},{x:$e,y:at+St},{width:Pt,height:1}),e.RGBAImage.copy(kt,ke,{x:Pt-1,y:0},{x:$e-1,y:at},{width:1,height:St}),e.RGBAImage.copy(kt,ke,{x:0,y:0},{x:$e+Pt,y:at},{width:1,height:St})}this.dirty=!0},z.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},z.prototype.dispatchRenderCallbacks=function(F){for(var G=0,ie=F;G<ie.length;G+=1){var fe=ie[G];if(!this.callbackDispatchedThisFrame[fe]){this.callbackDispatchedThisFrame[fe]=!0;var xe=this.images[fe];p(xe)&&this.updateImage(fe,xe)}}},z}(e.Evented),a=_,y=_,u=1e20;function _(L,z,F,G,ie,fe){this.fontSize=L||24,this.buffer=void 0===z?3:z,this.cutoff=G||.25,this.fontFamily=ie||"sans-serif",this.fontWeight=fe||"normal",this.radius=F||8;var xe=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=xe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(xe*xe),this.gridInner=new Float64Array(xe*xe),this.f=new Float64Array(xe),this.d=new Float64Array(xe),this.z=new Float64Array(xe+1),this.v=new Int16Array(xe),this.middle=Math.round(xe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function b(L,z,F,G,ie,fe,xe){for(var ke=0;ke<z;ke++){for(var Ce=0;Ce<F;Ce++)G[Ce]=L[Ce*z+ke];for(w(G,ie,fe,xe,F),Ce=0;Ce<F;Ce++)L[Ce*z+ke]=ie[Ce]}for(Ce=0;Ce<F;Ce++){for(ke=0;ke<z;ke++)G[ke]=L[Ce*z+ke];for(w(G,ie,fe,xe,z),ke=0;ke<z;ke++)L[Ce*z+ke]=Math.sqrt(ie[ke])}}function w(L,z,F,G,ie){F[0]=0,G[0]=-u,G[1]=+u;for(var fe=1,xe=0;fe<ie;fe++){for(var ke=(L[fe]+fe*fe-(L[F[xe]]+F[xe]*F[xe]))/(2*fe-2*F[xe]);ke<=G[xe];)xe--,ke=(L[fe]+fe*fe-(L[F[xe]]+F[xe]*F[xe]))/(2*fe-2*F[xe]);F[++xe]=fe,G[xe]=ke,G[xe+1]=+u}for(fe=0,xe=0;fe<ie;fe++){for(;G[xe+1]<fe;)xe++;z[fe]=(fe-F[xe])*(fe-F[xe])+L[F[xe]]}}_.prototype.draw=function(L){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(L,this.buffer,this.middle);for(var z=this.ctx.getImageData(0,0,this.size,this.size),F=new Uint8ClampedArray(this.size*this.size),G=0;G<this.size*this.size;G++){var ie=z.data[4*G+3]/255;this.gridOuter[G]=1===ie?0:0===ie?u:Math.pow(Math.max(0,.5-ie),2),this.gridInner[G]=1===ie?u:0===ie?0:Math.pow(Math.max(0,ie-.5),2)}for(b(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),b(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),G=0;G<this.size*this.size;G++)F[G]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[G]-this.gridInner[G])/this.radius+this.cutoff))));return F},a.default=y;var T=function(L,z){this.requestManager=L,this.localIdeographFontFamily=z,this.entries={}};T.prototype.setURL=function(L){this.url=L},T.prototype.getGlyphs=function(L,z){var F=this,G=[];for(var ie in L)for(var fe=0,xe=L[ie];fe<xe.length;fe+=1)G.push({stack:ie,id:xe[fe]});e.asyncAll(G,function(Ce,Ue){var $e=Ce.stack,at=Ce.id,kt=F.entries[$e];kt||(kt=F.entries[$e]={glyphs:{},requests:{},ranges:{}});var Pt=kt.glyphs[at];if(void 0===Pt){if(Pt=F._tinySDF(kt,$e,at))return kt.glyphs[at]=Pt,void Ue(null,{stack:$e,id:at,glyph:Pt});var St=Math.floor(at/256);if(256*St>65535)Ue(new Error("glyphs > 65535 not supported"));else if(kt.ranges[St])Ue(null,{stack:$e,id:at,glyph:Pt});else{var Et=kt.requests[St];Et||(Et=kt.requests[St]=[],T.loadGlyphRange($e,St,F.url,F.requestManager,function(wt,jt){if(jt){for(var Nt in jt)F._doesCharSupportLocalGlyph(+Nt)||(kt.glyphs[+Nt]=jt[+Nt]);kt.ranges[St]=!0}for(var Gt=0,lr=Et;Gt<lr.length;Gt+=1)(0,lr[Gt])(wt,jt);delete kt.requests[St]})),Et.push(function(wt,jt){wt?Ue(wt):jt&&Ue(null,{stack:$e,id:at,glyph:jt[at]||null})})}}else Ue(null,{stack:$e,id:at,glyph:Pt})},function(Ce,Ue){if(Ce)z(Ce);else if(Ue){for(var $e={},at=0,kt=Ue;at<kt.length;at+=1){var Pt=kt[at],St=Pt.stack,Et=Pt.id,wt=Pt.glyph;($e[St]||($e[St]={}))[Et]=wt&&{id:wt.id,bitmap:wt.bitmap.clone(),metrics:wt.metrics}}z(null,$e)}})},T.prototype._doesCharSupportLocalGlyph=function(L){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](L)||e.isChar["Hangul Syllables"](L)||e.isChar.Hiragana(L)||e.isChar.Katakana(L))},T.prototype._tinySDF=function(L,z,F){var G=this.localIdeographFontFamily;if(G&&this._doesCharSupportLocalGlyph(F)){var ie=L.tinySDF;if(!ie){var fe="400";/bold/i.test(z)?fe="900":/medium/i.test(z)?fe="500":/light/i.test(z)&&(fe="200"),ie=L.tinySDF=new T.TinySDF(24,3,8,.25,G,fe)}return{id:F,bitmap:new e.AlphaImage({width:30,height:30},ie.draw(String.fromCharCode(F))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},T.loadGlyphRange=function(L,z,F,G,ie){var fe=256*z,xe=fe+255,ke=G.transformRequest(G.normalizeGlyphsURL(F).replace("{fontstack}",L).replace("{range}",fe+"-"+xe),e.ResourceType.Glyphs);e.getArrayBuffer(ke,function(Ce,Ue){if(Ce)ie(Ce);else if(Ue){for(var $e={},at=0,kt=e.parseGlyphPBF(Ue);at<kt.length;at+=1){var Pt=kt[at];$e[Pt.id]=Pt}ie(null,$e)}})},T.TinySDF=a;var C=function(){this.specification=e.styleSpec.light.position};C.prototype.possiblyEvaluate=function(L,z){return e.sphericalToCartesian(L.expression.evaluate(z))},C.prototype.interpolate=function(L,z,F){return{x:e.number(L.x,z.x,F),y:e.number(L.y,z.y,F),z:e.number(L.z,z.z,F)}};var M=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new C,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),I=function(L){function z(F){L.call(this),this._transitionable=new e.Transitionable(M),this.setLight(F),this._transitioning=this._transitionable.untransitioned()}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getLight=function(){return this._transitionable.serialize()},z.prototype.setLight=function(F,G){if(void 0===G&&(G={}),!this._validate(e.validateLight,F,G))for(var ie in F){var fe=F[ie];e.endsWith(ie,"-transition")?this._transitionable.setTransition(ie.slice(0,-11),fe):this._transitionable.setValue(ie,fe)}},z.prototype.updateTransitions=function(F){this._transitioning=this._transitionable.transitioned(F,this._transitioning)},z.prototype.hasTransition=function(){return this._transitioning.hasTransition()},z.prototype.recalculate=function(F){this.properties=this._transitioning.possiblyEvaluate(F)},z.prototype._validate=function(F,G,ie){return(!ie||!1!==ie.validate)&&e.emitValidationErrors(this,F.call(e.validateStyle,e.extend({value:G,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},z}(e.Evented),P=function(L,z){this.width=L,this.height=z,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};P.prototype.getDash=function(L,z){var F=L.join(",")+String(z);return this.dashEntry[F]||(this.dashEntry[F]=this.addDash(L,z)),this.dashEntry[F]},P.prototype.getDashRanges=function(L,z,F){var G=[],ie=L.length%2==1?-L[L.length-1]*F:0,fe=L[0]*F,xe=!0;G.push({left:ie,right:fe,isDash:xe,zeroLength:0===L[0]});for(var ke=L[0],Ce=1;Ce<L.length;Ce++){var Ue=L[Ce];ie=ke*F,fe=(ke+=Ue)*F,G.push({left:ie,right:fe,isDash:xe=!xe,zeroLength:0===Ue})}return G},P.prototype.addRoundDash=function(L,z,F){for(var G=z/2,ie=-F;ie<=F;ie++)for(var xe=this.width*(this.nextRow+F+ie),ke=0,Ce=L[ke],Ue=0;Ue<this.width;Ue++){Ue/Ce.right>1&&(Ce=L[++ke]);var $e=Math.abs(Ue-Ce.left),at=Math.abs(Ue-Ce.right),kt=Math.min($e,at),Pt=void 0,St=ie/F*(G+1);if(Ce.isDash){var Et=G-Math.abs(St);Pt=Math.sqrt(kt*kt+Et*Et)}else Pt=G-Math.sqrt(kt*kt+St*St);this.data[xe+Ue]=Math.max(0,Math.min(255,Pt+128))}},P.prototype.addRegularDash=function(L){for(var z=L.length-1;z>=0;--z){var F=L[z],G=L[z+1];F.zeroLength?L.splice(z,1):G&&G.isDash===F.isDash&&(G.left=F.left,L.splice(z,1))}var ie=L[0],fe=L[L.length-1];ie.isDash===fe.isDash&&(ie.left=fe.left-this.width,fe.right=ie.right+this.width);for(var xe=this.width*this.nextRow,ke=0,Ce=L[ke],Ue=0;Ue<this.width;Ue++){Ue/Ce.right>1&&(Ce=L[++ke]);var $e=Math.abs(Ue-Ce.left),at=Math.abs(Ue-Ce.right),kt=Math.min($e,at);this.data[xe+Ue]=Math.max(0,Math.min(255,(Ce.isDash?kt:-kt)+128))}},P.prototype.addDash=function(L,z){var F=z?7:0,G=2*F+1;if(this.nextRow+G>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var ie=0,fe=0;fe<L.length;fe++)ie+=L[fe];if(0!==ie){var xe=this.width/ie,ke=this.getDashRanges(L,this.width,xe);z?this.addRoundDash(ke,xe,F):this.addRegularDash(ke)}var Ce={y:(this.nextRow+F+.5)/this.height,height:2*F/this.height,width:ie};return this.nextRow+=G,this.dirty=!0,Ce},P.prototype.bind=function(L){var z=L.gl;this.texture?(z.bindTexture(z.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,z.texSubImage2D(z.TEXTURE_2D,0,0,0,this.width,this.height,z.ALPHA,z.UNSIGNED_BYTE,this.data))):(this.texture=z.createTexture(),z.bindTexture(z.TEXTURE_2D,this.texture),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.REPEAT),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.REPEAT),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.LINEAR),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.LINEAR),z.texImage2D(z.TEXTURE_2D,0,z.ALPHA,this.width,this.height,0,z.ALPHA,z.UNSIGNED_BYTE,this.data))};var S=function L(z,F){this.workerPool=z,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var G=this.workerPool.acquire(this.id),ie=0;ie<G.length;ie++){var xe=new L.Actor(G[ie],F,this.id);xe.name="Worker "+ie,this.actors.push(xe)}};function E(L,z,F){var G=function(ie,fe){if(ie)return F(ie);if(fe){var xe=e.pick(e.extend(fe,L),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);fe.vector_layers&&(xe.vectorLayers=fe.vector_layers,xe.vectorLayerIds=xe.vectorLayers.map(function(ke){return ke.id})),xe.tiles=z.canonicalizeTileset(xe,L.url),F(null,xe)}};return L.url?e.getJSON(z.transformRequest(z.normalizeSourceURL(L.url),e.ResourceType.Source),G):e.browser.frame(function(){return G(null,L)})}S.prototype.broadcast=function(L,z,F){e.asyncAll(this.actors,function(G,ie){G.send(L,z,ie)},F=F||function(){})},S.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},S.prototype.remove=function(){this.actors.forEach(function(L){L.remove()}),this.actors=[],this.workerPool.release(this.id)},S.Actor=e.Actor;var R=function(L,z,F){this.bounds=e.LngLatBounds.convert(this.validateBounds(L)),this.minzoom=z||0,this.maxzoom=F||24};R.prototype.validateBounds=function(L){return Array.isArray(L)&&4===L.length?[Math.max(-180,L[0]),Math.max(-90,L[1]),Math.min(180,L[2]),Math.min(90,L[3])]:[-180,-90,180,90]},R.prototype.contains=function(L){var z=Math.pow(2,L.z),F=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*z),G=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*z),ie=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*z),fe=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*z);return L.x>=F&&L.x<ie&&L.y>=G&&L.y<fe};var D=function(L){function z(F,G,ie,fe){if(L.call(this),this.id=F,this.dispatcher=ie,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(G,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},G),this._collectResourceTiming=G.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(fe)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.load=function(){var F=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,function(G,ie){F._tileJSONRequest=null,F._loaded=!0,G?F.fire(new e.ErrorEvent(G)):ie&&(e.extend(F,ie),ie.bounds&&(F.tileBounds=new R(ie.bounds,F.minzoom,F.maxzoom)),e.postTurnstileEvent(ie.tiles,F.map._requestManager._customAccessToken),e.postMapLoadEvent(ie.tiles,F.map._getMapId(),F.map._requestManager._skuToken,F.map._requestManager._customAccessToken),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},z.prototype.loaded=function(){return this._loaded},z.prototype.hasTile=function(F){return!this.tileBounds||this.tileBounds.contains(F.canonical)},z.prototype.onAdd=function(F){this.map=F,this.load()},z.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},z.prototype.serialize=function(){return e.extend({},this._options)},z.prototype.loadTile=function(F,G){var ie=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme)),fe={request:this.map._requestManager.transformRequest(ie,e.ResourceType.Tile),uid:F.uid,tileID:F.tileID,zoom:F.tileID.overscaledZ,tileSize:this.tileSize*F.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function xe(ke,Ce){return delete F.request,F.aborted?G(null):ke&&404!==ke.status?G(ke):(Ce&&Ce.resourceTiming&&(F.resourceTiming=Ce.resourceTiming),this.map._refreshExpiredTiles&&Ce&&F.setExpiryData(Ce),F.loadVectorData(Ce,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),G(null),void(F.reloadCallback&&(this.loadTile(F,F.reloadCallback),F.reloadCallback=null)))}fe.request.collectResourceTiming=this._collectResourceTiming,F.actor&&"expired"!==F.state?"loading"===F.state?F.reloadCallback=G:F.request=F.actor.send("reloadTile",fe,xe.bind(this)):(F.actor=this.dispatcher.getActor(),F.request=F.actor.send("loadTile",fe,xe.bind(this)))},z.prototype.abortTile=function(F){F.request&&(F.request.cancel(),delete F.request),F.actor&&F.actor.send("abortTile",{uid:F.uid,type:this.type,source:this.id},void 0)},z.prototype.unloadTile=function(F){F.unloadVectorData(),F.actor&&F.actor.send("removeTile",{uid:F.uid,type:this.type,source:this.id},void 0)},z.prototype.hasTransition=function(){return!1},z}(e.Evented),j=function(L){function z(F,G,ie,fe){L.call(this),this.id=F,this.dispatcher=ie,this.setEventedParent(fe),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},G),e.extend(this,e.pick(G,["url","scheme","tileSize"]))}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.load=function(){var F=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,function(G,ie){F._tileJSONRequest=null,F._loaded=!0,G?F.fire(new e.ErrorEvent(G)):ie&&(e.extend(F,ie),ie.bounds&&(F.tileBounds=new R(ie.bounds,F.minzoom,F.maxzoom)),e.postTurnstileEvent(ie.tiles),e.postMapLoadEvent(ie.tiles,F.map._getMapId(),F.map._requestManager._skuToken),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},z.prototype.loaded=function(){return this._loaded},z.prototype.onAdd=function(F){this.map=F,this.load()},z.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},z.prototype.serialize=function(){return e.extend({},this._options)},z.prototype.hasTile=function(F){return!this.tileBounds||this.tileBounds.contains(F.canonical)},z.prototype.loadTile=function(F,G){var ie=this,fe=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);F.request=e.getImage(this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),function(xe,ke){if(delete F.request,F.aborted)F.state="unloaded",G(null);else if(xe)F.state="errored",G(xe);else if(ke){ie.map._refreshExpiredTiles&&F.setExpiryData(ke),delete ke.cacheControl,delete ke.expires;var Ce=ie.map.painter.context,Ue=Ce.gl;F.texture=ie.map.painter.getTileTexture(ke.width),F.texture?F.texture.update(ke,{useMipmap:!0}):(F.texture=new e.Texture(Ce,ke,Ue.RGBA,{useMipmap:!0}),F.texture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE,Ue.LINEAR_MIPMAP_NEAREST),Ce.extTextureFilterAnisotropic&&Ue.texParameterf(Ue.TEXTURE_2D,Ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ce.extTextureFilterAnisotropicMax)),F.state="loaded",e.cacheEntryPossiblyAdded(ie.dispatcher),G(null)}})},z.prototype.abortTile=function(F,G){F.request&&(F.request.cancel(),delete F.request),G()},z.prototype.unloadTile=function(F,G){F.texture&&this.map.painter.saveTileTexture(F.texture),G()},z.prototype.hasTransition=function(){return!1},z}(e.Evented),H=function(L){function z(F,G,ie,fe){L.call(this,F,G,ie,fe),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},G),this.encoding=G.encoding||"mapbox"}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},z.prototype.loadTile=function(F,G){var ie=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function fe(xe,ke){xe&&(F.state="errored",G(xe)),ke&&(F.dem=ke,F.needsHillshadePrepare=!0,F.state="loaded",G(null))}F.request=e.getImage(this.map._requestManager.transformRequest(ie,e.ResourceType.Tile),function(xe,ke){if(delete F.request,F.aborted)F.state="unloaded",G(null);else if(xe)F.state="errored",G(xe);else if(ke){this.map._refreshExpiredTiles&&F.setExpiryData(ke),delete ke.cacheControl,delete ke.expires;var Ce=e.window.ImageBitmap&&ke instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?ke:e.browser.getImageData(ke,1),Ue={uid:F.uid,coord:F.tileID,source:this.id,rawImageData:Ce,encoding:this.encoding};F.actor&&"expired"!==F.state||(F.actor=this.dispatcher.getActor(),F.actor.send("loadDEMTile",Ue,fe.bind(this)))}}.bind(this)),F.neighboringTiles=this._getNeighboringTiles(F.tileID)},z.prototype._getNeighboringTiles=function(F){var G=F.canonical,ie=Math.pow(2,G.z),fe=(G.x-1+ie)%ie,xe=0===G.x?F.wrap-1:F.wrap,ke=(G.x+1+ie)%ie,Ce=G.x+1===ie?F.wrap+1:F.wrap,Ue={};return Ue[new e.OverscaledTileID(F.overscaledZ,xe,G.z,fe,G.y).key]={backfilled:!1},Ue[new e.OverscaledTileID(F.overscaledZ,Ce,G.z,ke,G.y).key]={backfilled:!1},G.y>0&&(Ue[new e.OverscaledTileID(F.overscaledZ,xe,G.z,fe,G.y-1).key]={backfilled:!1},Ue[new e.OverscaledTileID(F.overscaledZ,F.wrap,G.z,G.x,G.y-1).key]={backfilled:!1},Ue[new e.OverscaledTileID(F.overscaledZ,Ce,G.z,ke,G.y-1).key]={backfilled:!1}),G.y+1<ie&&(Ue[new e.OverscaledTileID(F.overscaledZ,xe,G.z,fe,G.y+1).key]={backfilled:!1},Ue[new e.OverscaledTileID(F.overscaledZ,F.wrap,G.z,G.x,G.y+1).key]={backfilled:!1},Ue[new e.OverscaledTileID(F.overscaledZ,Ce,G.z,ke,G.y+1).key]={backfilled:!1}),Ue},z.prototype.unloadTile=function(F){F.demTexture&&this.map.painter.saveTileTexture(F.demTexture),F.fbo&&(F.fbo.destroy(),delete F.fbo),F.dem&&delete F.dem,delete F.neighboringTiles,F.state="unloaded",F.actor&&F.actor.send("removeDEMTile",{uid:F.uid,source:this.id})},z}(j),Y=function(L){function z(F,G,ie,fe){L.call(this),this.id=F,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ie.getActor(),this.setEventedParent(fe),this._data=G.data,this._options=e.extend({},G),this._collectResourceTiming=G.collectResourceTiming,this._resourceTiming=[],void 0!==G.maxzoom&&(this.maxzoom=G.maxzoom),G.type&&(this.type=G.type),G.attribution&&(this.attribution=G.attribution),this.promoteId=G.promoteId;var xe=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:G.cluster||!1,geojsonVtOptions:{buffer:(void 0!==G.buffer?G.buffer:128)*xe,tolerance:(void 0!==G.tolerance?G.tolerance:.375)*xe,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:G.lineMetrics||!1,generateId:G.generateId||!1},superclusterOptions:{maxZoom:void 0!==G.clusterMaxZoom?Math.min(G.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(G.clusterRadius||50)*xe,log:!1,generateId:G.generateId||!1},clusterProperties:G.clusterProperties},G.workerOptions)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.load=function(){var F=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(G){if(G)F.fire(new e.ErrorEvent(G));else{var ie={dataType:"source",sourceDataType:"metadata"};F._collectResourceTiming&&F._resourceTiming&&F._resourceTiming.length>0&&(ie.resourceTiming=F._resourceTiming,F._resourceTiming=[]),F.fire(new e.Event("data",ie))}})},z.prototype.onAdd=function(F){this.map=F,this.load()},z.prototype.setData=function(F){var G=this;return this._data=F,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ie){if(ie)G.fire(new e.ErrorEvent(ie));else{var fe={dataType:"source",sourceDataType:"content"};G._collectResourceTiming&&G._resourceTiming&&G._resourceTiming.length>0&&(fe.resourceTiming=G._resourceTiming,G._resourceTiming=[]),G.fire(new e.Event("data",fe))}}),this},z.prototype.getClusterExpansionZoom=function(F,G){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:F,source:this.id},G),this},z.prototype.getClusterChildren=function(F,G){return this.actor.send("geojson.getClusterChildren",{clusterId:F,source:this.id},G),this},z.prototype.getClusterLeaves=function(F,G,ie,fe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:F,limit:G,offset:ie},fe),this},z.prototype._updateWorkerData=function(F){var G=this;this._loaded=!1;var ie=e.extend({},this.workerOptions),fe=this._data;"string"==typeof fe?(ie.request=this.map._requestManager.transformRequest(e.browser.resolveURL(fe),e.ResourceType.Source),ie.request.collectResourceTiming=this._collectResourceTiming):ie.data=JSON.stringify(fe),this.actor.send(this.type+".loadData",ie,function(xe,ke){G._removed||ke&&ke.abandoned||(G._loaded=!0,ke&&ke.resourceTiming&&ke.resourceTiming[G.id]&&(G._resourceTiming=ke.resourceTiming[G.id].slice(0)),G.actor.send(G.type+".coalesce",{source:ie.source},null),F(xe))})},z.prototype.loaded=function(){return this._loaded},z.prototype.loadTile=function(F,G){var ie=this,fe=F.actor?"reloadTile":"loadTile";F.actor=this.actor,F.request=this.actor.send(fe,{type:this.type,uid:F.uid,tileID:F.tileID,zoom:F.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(ke,Ce){return delete F.request,F.unloadVectorData(),F.aborted?G(null):ke?G(ke):(F.loadVectorData(Ce,ie.map.painter,"reloadTile"===fe),G(null))})},z.prototype.abortTile=function(F){F.request&&(F.request.cancel(),delete F.request),F.aborted=!0},z.prototype.unloadTile=function(F){F.unloadVectorData(),this.actor.send("removeTile",{uid:F.uid,type:this.type,source:this.id})},z.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},z.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},z.prototype.hasTransition=function(){return!1},z}(e.Evented),X=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Z=function(L){function z(F,G,ie,fe){L.call(this),this.id=F,this.dispatcher=ie,this.coordinates=G.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(fe),this.options=G}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.load=function(F,G){var ie=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(fe,xe){ie._loaded=!0,fe?ie.fire(new e.ErrorEvent(fe)):xe&&(ie.image=xe,F&&(ie.coordinates=F),G&&G(),ie._finishLoading())})},z.prototype.loaded=function(){return this._loaded},z.prototype.updateImage=function(F){var G=this;return this.image&&F.url?(this.options.url=F.url,this.load(F.coordinates,function(){G.texture=null}),this):this},z.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},z.prototype.onAdd=function(F){this.map=F,this.load()},z.prototype.setCoordinates=function(F){var G=this;this.coordinates=F;var ie=F.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(xe){for(var ke=1/0,Ce=1/0,Ue=-1/0,$e=-1/0,at=0,kt=xe;at<kt.length;at+=1){var Pt=kt[at];ke=Math.min(ke,Pt.x),Ce=Math.min(Ce,Pt.y),Ue=Math.max(Ue,Pt.x),$e=Math.max($e,Pt.y)}var wt=Math.max(Ue-ke,$e-Ce),jt=Math.max(0,Math.floor(-Math.log(wt)/Math.LN2)),Nt=Math.pow(2,jt);return new e.CanonicalTileID(jt,Math.floor((ke+Ue)/2*Nt),Math.floor((Ce+$e)/2*Nt))}(ie),this.minzoom=this.maxzoom=this.tileID.z;var fe=ie.map(function(xe){return G.tileID.getTilePoint(xe)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(fe[0].x,fe[0].y,0,0),this._boundsArray.emplaceBack(fe[1].x,fe[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(fe[3].x,fe[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(fe[2].x,fe[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},z.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var F=this.map.painter.context,G=F.gl;for(var ie in this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(F,this.image,G.RGBA),this.texture.bind(G.LINEAR,G.CLAMP_TO_EDGE)),this.tiles){var fe=this.tiles[ie];"loaded"!==fe.state&&(fe.state="loaded",fe.texture=this.texture)}}},z.prototype.loadTile=function(F,G){this.tileID&&this.tileID.equals(F.tileID.canonical)?(this.tiles[String(F.tileID.wrap)]=F,F.buckets={},G(null)):(F.state="errored",G(null))},z.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},z.prototype.hasTransition=function(){return!1},z}(e.Evented),W=function(L){function z(F,G,ie,fe){L.call(this,F,G,ie,fe),this.roundZoom=!0,this.type="video",this.options=G}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.load=function(){var F=this;this._loaded=!1;var G=this.options;this.urls=[];for(var ie=0,fe=G.urls;ie<fe.length;ie+=1)this.urls.push(this.map._requestManager.transformRequest(fe[ie],e.ResourceType.Source).url);e.getVideo(this.urls,function(ke,Ce){F._loaded=!0,ke?F.fire(new e.ErrorEvent(ke)):Ce&&(F.video=Ce,F.video.loop=!0,F.video.addEventListener("playing",function(){F.map.triggerRepaint()}),F.map&&F.video.play(),F._finishLoading())})},z.prototype.pause=function(){this.video&&this.video.pause()},z.prototype.play=function(){this.video&&this.video.play()},z.prototype.seek=function(F){if(this.video){var G=this.video.seekable;F<G.start(0)||F>G.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+G.start(0)+" and "+G.end(0)+"-second mark."))):this.video.currentTime=F}},z.prototype.getVideo=function(){return this.video},z.prototype.onAdd=function(F){this.map||(this.map=F,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},z.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var F=this.map.painter.context,G=F.gl;for(var ie in this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(G.LINEAR,G.CLAMP_TO_EDGE),G.texSubImage2D(G.TEXTURE_2D,0,0,0,G.RGBA,G.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(F,this.video,G.RGBA),this.texture.bind(G.LINEAR,G.CLAMP_TO_EDGE)),this.tiles){var fe=this.tiles[ie];"loaded"!==fe.state&&(fe.state="loaded",fe.texture=this.texture)}}},z.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},z.prototype.hasTransition=function(){return this.video&&!this.video.paused},z}(Z),re=function(L){function z(F,G,ie,fe){L.call(this,F,G,ie,fe),G.coordinates?Array.isArray(G.coordinates)&&4===G.coordinates.length&&!G.coordinates.some(function(xe){return!Array.isArray(xe)||2!==xe.length||xe.some(function(ke){return"number"!=typeof ke})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'missing required property "coordinates"'))),G.animate&&"boolean"!=typeof G.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'optional "animate" property must be a boolean value'))),G.canvas?"string"==typeof G.canvas||G.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'missing required property "canvas"'))),this.options=G,this.animate=void 0===G.animate||G.animate}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},z.prototype.getCanvas=function(){return this.canvas},z.prototype.onAdd=function(F){this.map=F,this.load(),this.canvas&&this.animate&&this.play()},z.prototype.onRemove=function(){this.pause()},z.prototype.prepare=function(){var F=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,F=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,F=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var G=this.map.painter.context,ie=G.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=G.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(F||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(G,this.canvas,ie.RGBA,{premultiply:!0}),this.tiles){var xe=this.tiles[fe];"loaded"!==xe.state&&(xe.state="loaded",xe.texture=this.texture)}}},z.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},z.prototype.hasTransition=function(){return this._playing},z.prototype._hasInvalidDimensions=function(){for(var F=0,G=[this.canvas.width,this.canvas.height];F<G.length;F+=1){var ie=G[F];if(isNaN(ie)||ie<=0)return!0}return!1},z}(Z),U={vector:D,raster:j,"raster-dem":H,geojson:Y,video:W,image:Z,canvas:re};function B(L,z){var F=e.identity([]);return e.translate(F,F,[1,1,0]),e.scale(F,F,[.5*L.width,.5*L.height,1]),e.multiply(F,F,L.calculatePosMatrix(z.toUnwrapped()))}function V(L,z,F,G,ie,fe){var xe=function(Et,wt,jt){if(Et)for(var Nt=0,Gt=Et;Nt<Gt.length;Nt+=1){var lr=wt[Gt[Nt]];if(lr&&lr.source===jt&&"fill-extrusion"===lr.type)return!0}else for(var yr in wt){var Or=wt[yr];if(Or.source===jt&&"fill-extrusion"===Or.type)return!0}return!1}(ie&&ie.layers,z,L.id),ke=fe.maxPitchScaleFactor(),Ce=L.tilesIn(G,ke,xe);Ce.sort(ee);for(var Ue=[],$e=0,at=Ce;$e<at.length;$e+=1){var kt=at[$e];Ue.push({wrappedTileID:kt.tileID.wrapped().key,queryResults:kt.tile.queryRenderedFeatures(z,F,L._state,kt.queryGeometry,kt.cameraQueryGeometry,kt.scale,ie,fe,ke,B(L.transform,kt.tileID))})}var Pt=function(Et){for(var wt={},jt={},Nt=0,Gt=Et;Nt<Gt.length;Nt+=1){var lr=Gt[Nt],yr=lr.queryResults,Or=lr.wrappedTileID,Cr=jt[Or]=jt[Or]||{};for(var tn in yr)for(var en=yr[tn],yn=Cr[tn]=Cr[tn]||{},pn=wt[tn]=wt[tn]||[],Yn=0,ti=en;Yn<ti.length;Yn+=1){var gi=ti[Yn];yn[gi.featureIndex]||(yn[gi.featureIndex]=!0,pn.push(gi))}}return wt}(Ue);for(var St in Pt)Pt[St].forEach(function(Et){var wt=Et.feature,jt=L.getFeatureState(wt.layer["source-layer"],wt.id);wt.source=wt.layer.source,wt.layer["source-layer"]&&(wt.sourceLayer=wt.layer["source-layer"]),wt.state=jt});return Pt}function ee(L,z){var F=L.tileID,G=z.tileID;return F.overscaledZ-G.overscaledZ||F.canonical.y-G.canonical.y||F.wrap-G.wrap||F.canonical.x-G.canonical.x}var N=function(L,z){this.max=L,this.onRemove=z,this.reset()};N.prototype.reset=function(){for(var L in this.data)for(var z=0,F=this.data[L];z<F.length;z+=1){var G=F[z];G.timeout&&clearTimeout(G.timeout),this.onRemove(G.value)}return this.data={},this.order=[],this},N.prototype.add=function(L,z,F){var G=this,ie=L.wrapped().key;void 0===this.data[ie]&&(this.data[ie]=[]);var fe={value:z,timeout:void 0};if(void 0!==F&&(fe.timeout=setTimeout(function(){G.remove(L,fe)},F)),this.data[ie].push(fe),this.order.push(ie),this.order.length>this.max){var xe=this._getAndRemoveByKey(this.order[0]);xe&&this.onRemove(xe)}return this},N.prototype.has=function(L){return L.wrapped().key in this.data},N.prototype.getAndRemove=function(L){return this.has(L)?this._getAndRemoveByKey(L.wrapped().key):null},N.prototype._getAndRemoveByKey=function(L){var z=this.data[L].shift();return z.timeout&&clearTimeout(z.timeout),0===this.data[L].length&&delete this.data[L],this.order.splice(this.order.indexOf(L),1),z.value},N.prototype.getByKey=function(L){var z=this.data[L];return z?z[0].value:null},N.prototype.get=function(L){return this.has(L)?this.data[L.wrapped().key][0].value:null},N.prototype.remove=function(L,z){if(!this.has(L))return this;var F=L.wrapped().key,G=void 0===z?0:this.data[F].indexOf(z),ie=this.data[F][G];return this.data[F].splice(G,1),ie.timeout&&clearTimeout(ie.timeout),0===this.data[F].length&&delete this.data[F],this.onRemove(ie.value),this.order.splice(this.order.indexOf(F),1),this},N.prototype.setMaxSize=function(L){for(this.max=L;this.order.length>this.max;){var z=this._getAndRemoveByKey(this.order[0]);z&&this.onRemove(z)}return this},N.prototype.filter=function(L){var z=[];for(var F in this.data)for(var G=0,ie=this.data[F];G<ie.length;G+=1){var fe=ie[G];L(fe.value)||z.push(fe)}for(var xe=0,ke=z;xe<ke.length;xe+=1){var Ce=ke[xe];this.remove(Ce.value.tileID,Ce)}};var K=function(L,z,F){this.context=L;var G=L.gl;this.buffer=G.createBuffer(),this.dynamicDraw=Boolean(F),this.context.unbindVAO(),L.bindElementBuffer.set(this.buffer),G.bufferData(G.ELEMENT_ARRAY_BUFFER,z.arrayBuffer,this.dynamicDraw?G.DYNAMIC_DRAW:G.STATIC_DRAW),this.dynamicDraw||delete z.arrayBuffer};K.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},K.prototype.updateData=function(L){var z=this.context.gl;this.context.unbindVAO(),this.bind(),z.bufferSubData(z.ELEMENT_ARRAY_BUFFER,0,L.arrayBuffer)},K.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var J={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},te=function(L,z,F,G){this.length=z.length,this.attributes=F,this.itemSize=z.bytesPerElement,this.dynamicDraw=G,this.context=L;var ie=L.gl;this.buffer=ie.createBuffer(),L.bindVertexBuffer.set(this.buffer),ie.bufferData(ie.ARRAY_BUFFER,z.arrayBuffer,this.dynamicDraw?ie.DYNAMIC_DRAW:ie.STATIC_DRAW),this.dynamicDraw||delete z.arrayBuffer};te.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},te.prototype.updateData=function(L){var z=this.context.gl;this.bind(),z.bufferSubData(z.ARRAY_BUFFER,0,L.arrayBuffer)},te.prototype.enableAttributes=function(L,z){for(var F=0;F<this.attributes.length;F++){var ie=z.attributes[this.attributes[F].name];void 0!==ie&&L.enableVertexAttribArray(ie)}},te.prototype.setVertexAttribPointers=function(L,z,F){for(var G=0;G<this.attributes.length;G++){var ie=this.attributes[G],fe=z.attributes[ie.name];void 0!==fe&&L.vertexAttribPointer(fe,ie.components,L[J[ie.type]],!1,this.itemSize,ie.offset+this.itemSize*(F||0))}},te.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ae=function(L){this.gl=L.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ae.prototype.get=function(){return this.current},ae.prototype.set=function(L){},ae.prototype.getDefault=function(){return this.default},ae.prototype.setDefault=function(){this.set(this.default)};var le=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return e.Color.transparent},z.prototype.set=function(F){var G=this.current;(F.r!==G.r||F.g!==G.g||F.b!==G.b||F.a!==G.a||this.dirty)&&(this.gl.clearColor(F.r,F.g,F.b,F.a),this.current=F,this.dirty=!1)},z}(ae),se=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return 1},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.clearDepth(F),this.current=F,this.dirty=!1)},z}(ae),ve=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return 0},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.clearStencil(F),this.current=F,this.dirty=!1)},z}(ae),ue=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return[!0,!0,!0,!0]},z.prototype.set=function(F){var G=this.current;(F[0]!==G[0]||F[1]!==G[1]||F[2]!==G[2]||F[3]!==G[3]||this.dirty)&&(this.gl.colorMask(F[0],F[1],F[2],F[3]),this.current=F,this.dirty=!1)},z}(ae),ye=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return!0},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.depthMask(F),this.current=F,this.dirty=!1)},z}(ae),Me=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return 255},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.stencilMask(F),this.current=F,this.dirty=!1)},z}(ae),pe=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},z.prototype.set=function(F){var G=this.current;(F.func!==G.func||F.ref!==G.ref||F.mask!==G.mask||this.dirty)&&(this.gl.stencilFunc(F.func,F.ref,F.mask),this.current=F,this.dirty=!1)},z}(ae),ge=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){var F=this.gl;return[F.KEEP,F.KEEP,F.KEEP]},z.prototype.set=function(F){var G=this.current;(F[0]!==G[0]||F[1]!==G[1]||F[2]!==G[2]||this.dirty)&&(this.gl.stencilOp(F[0],F[1],F[2]),this.current=F,this.dirty=!1)},z}(ae),we=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(F){if(F!==this.current||this.dirty){var G=this.gl;F?G.enable(G.STENCIL_TEST):G.disable(G.STENCIL_TEST),this.current=F,this.dirty=!1}},z}(ae),oe=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return[0,1]},z.prototype.set=function(F){var G=this.current;(F[0]!==G[0]||F[1]!==G[1]||this.dirty)&&(this.gl.depthRange(F[0],F[1]),this.current=F,this.dirty=!1)},z}(ae),de=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(F){if(F!==this.current||this.dirty){var G=this.gl;F?G.enable(G.DEPTH_TEST):G.disable(G.DEPTH_TEST),this.current=F,this.dirty=!1}},z}(ae),Te=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.LESS},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.depthFunc(F),this.current=F,this.dirty=!1)},z}(ae),Ee=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(F){if(F!==this.current||this.dirty){var G=this.gl;F?G.enable(G.BLEND):G.disable(G.BLEND),this.current=F,this.dirty=!1}},z}(ae),Ae=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){var F=this.gl;return[F.ONE,F.ZERO]},z.prototype.set=function(F){var G=this.current;(F[0]!==G[0]||F[1]!==G[1]||this.dirty)&&(this.gl.blendFunc(F[0],F[1]),this.current=F,this.dirty=!1)},z}(ae),De=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return e.Color.transparent},z.prototype.set=function(F){var G=this.current;(F.r!==G.r||F.g!==G.g||F.b!==G.b||F.a!==G.a||this.dirty)&&(this.gl.blendColor(F.r,F.g,F.b,F.a),this.current=F,this.dirty=!1)},z}(ae),Ie=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.FUNC_ADD},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.blendEquation(F),this.current=F,this.dirty=!1)},z}(ae),Oe=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(F){if(F!==this.current||this.dirty){var G=this.gl;F?G.enable(G.CULL_FACE):G.disable(G.CULL_FACE),this.current=F,this.dirty=!1}},z}(ae),Xe=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.BACK},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.cullFace(F),this.current=F,this.dirty=!1)},z}(ae),Fe=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.CCW},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.frontFace(F),this.current=F,this.dirty=!1)},z}(ae),Pe=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.useProgram(F),this.current=F,this.dirty=!1)},z}(ae),Re=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.TEXTURE0},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.activeTexture(F),this.current=F,this.dirty=!1)},z}(ae),qe=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){var F=this.gl;return[0,0,F.drawingBufferWidth,F.drawingBufferHeight]},z.prototype.set=function(F){var G=this.current;(F[0]!==G[0]||F[1]!==G[1]||F[2]!==G[2]||F[3]!==G[3]||this.dirty)&&(this.gl.viewport(F[0],F[1],F[2],F[3]),this.current=F,this.dirty=!1)},z}(ae),Qe=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(F){if(F!==this.current||this.dirty){var G=this.gl;G.bindFramebuffer(G.FRAMEBUFFER,F),this.current=F,this.dirty=!1}},z}(ae),ct=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(F){if(F!==this.current||this.dirty){var G=this.gl;G.bindRenderbuffer(G.RENDERBUFFER,F),this.current=F,this.dirty=!1}},z}(ae),bt=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(F){if(F!==this.current||this.dirty){var G=this.gl;G.bindTexture(G.TEXTURE_2D,F),this.current=F,this.dirty=!1}},z}(ae),Tt=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(F){if(F!==this.current||this.dirty){var G=this.gl;G.bindBuffer(G.ARRAY_BUFFER,F),this.current=F,this.dirty=!1}},z}(ae),_t=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(F){var G=this.gl;G.bindBuffer(G.ELEMENT_ARRAY_BUFFER,F),this.current=F,this.dirty=!1},z}(ae),nt=function(L){function z(F){L.call(this,F),this.vao=F.extVertexArrayObject}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(F){this.vao&&(F!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(F),this.current=F,this.dirty=!1)},z}(ae),Ke=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return 4},z.prototype.set=function(F){if(F!==this.current||this.dirty){var G=this.gl;G.pixelStorei(G.UNPACK_ALIGNMENT,F),this.current=F,this.dirty=!1}},z}(ae),xt=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(F){if(F!==this.current||this.dirty){var G=this.gl;G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F),this.current=F,this.dirty=!1}},z}(ae),Ht=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(F){if(F!==this.current||this.dirty){var G=this.gl;G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,F),this.current=F,this.dirty=!1}},z}(ae),Zt=function(L){function z(F,G){L.call(this,F),this.context=F,this.parent=G}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z}(ae),$t=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.setDirty=function(){this.dirty=!0},z.prototype.set=function(F){if(F!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var G=this.gl;G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,F,0),this.current=F,this.dirty=!1}},z}(Zt),Xt=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.set=function(F){if(F!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var G=this.gl;G.framebufferRenderbuffer(G.FRAMEBUFFER,G.DEPTH_ATTACHMENT,G.RENDERBUFFER,F),this.current=F,this.dirty=!1}},z}(Zt),cr=function(L,z,F,G){this.context=L,this.width=z,this.height=F;var fe=this.framebuffer=L.gl.createFramebuffer();this.colorAttachment=new $t(L,fe),G&&(this.depthAttachment=new Xt(L,fe))};cr.prototype.destroy=function(){var L=this.context.gl,z=this.colorAttachment.get();if(z&&L.deleteTexture(z),this.depthAttachment){var F=this.depthAttachment.get();F&&L.deleteRenderbuffer(F)}L.deleteFramebuffer(this.framebuffer)};var Ft=function(L,z,F){this.func=L,this.mask=z,this.range=F};Ft.ReadOnly=!1,Ft.ReadWrite=!0,Ft.disabled=new Ft(519,Ft.ReadOnly,[0,1]);var Be=function(L,z,F,G,ie,fe){this.test=L,this.ref=z,this.mask=F,this.fail=G,this.depthFail=ie,this.pass=fe};Be.disabled=new Be({func:519,mask:0},0,0,7680,7680,7680);var He=function(L,z,F){this.blendFunction=L,this.blendColor=z,this.mask=F};He.disabled=new He(He.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),He.unblended=new He(He.Replace,e.Color.transparent,[!0,!0,!0,!0]),He.alphaBlended=new He([1,771],e.Color.transparent,[!0,!0,!0,!0]);var he=function(L,z,F){this.enable=L,this.mode=z,this.frontFace=F};he.disabled=new he(!1,1029,2305),he.backCCW=new he(!0,1029,2305);var be=function(L){this.gl=L,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new le(this),this.clearDepth=new se(this),this.clearStencil=new ve(this),this.colorMask=new ue(this),this.depthMask=new ye(this),this.stencilMask=new Me(this),this.stencilFunc=new pe(this),this.stencilOp=new ge(this),this.stencilTest=new we(this),this.depthRange=new oe(this),this.depthTest=new de(this),this.depthFunc=new Te(this),this.blend=new Ee(this),this.blendFunc=new Ae(this),this.blendColor=new De(this),this.blendEquation=new Ie(this),this.cullFace=new Oe(this),this.cullFaceSide=new Xe(this),this.frontFace=new Fe(this),this.program=new Pe(this),this.activeTexture=new Re(this),this.viewport=new qe(this),this.bindFramebuffer=new Qe(this),this.bindRenderbuffer=new ct(this),this.bindTexture=new bt(this),this.bindVertexBuffer=new Tt(this),this.bindElementBuffer=new _t(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new nt(this),this.pixelStoreUnpack=new Ke(this),this.pixelStoreUnpackPremultiplyAlpha=new xt(this),this.pixelStoreUnpackFlipY=new Ht(this),this.extTextureFilterAnisotropic=L.getExtension("EXT_texture_filter_anisotropic")||L.getExtension("MOZ_EXT_texture_filter_anisotropic")||L.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=L.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=L.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(L.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=L.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=L.getExtension("EXT_disjoint_timer_query")};be.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},be.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},be.prototype.createIndexBuffer=function(L,z){return new K(this,L,z)},be.prototype.createVertexBuffer=function(L,z,F){return new te(this,L,z,F)},be.prototype.createRenderbuffer=function(L,z,F){var G=this.gl,ie=G.createRenderbuffer();return this.bindRenderbuffer.set(ie),G.renderbufferStorage(G.RENDERBUFFER,L,z,F),this.bindRenderbuffer.set(null),ie},be.prototype.createFramebuffer=function(L,z,F){return new cr(this,L,z,F)},be.prototype.clear=function(L){var z=L.color,F=L.depth,G=this.gl,ie=0;z&&(ie|=G.COLOR_BUFFER_BIT,this.clearColor.set(z),this.colorMask.set([!0,!0,!0,!0])),void 0!==F&&(ie|=G.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(F),this.depthMask.set(!0)),G.clear(ie)},be.prototype.setCullFace=function(L){!1===L.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(L.mode),this.frontFace.set(L.frontFace))},be.prototype.setDepthMode=function(L){L.func!==this.gl.ALWAYS||L.mask?(this.depthTest.set(!0),this.depthFunc.set(L.func),this.depthMask.set(L.mask),this.depthRange.set(L.range)):this.depthTest.set(!1)},be.prototype.setStencilMode=function(L){L.test.func!==this.gl.ALWAYS||L.mask?(this.stencilTest.set(!0),this.stencilMask.set(L.mask),this.stencilOp.set([L.fail,L.depthFail,L.pass]),this.stencilFunc.set({func:L.test.func,ref:L.ref,mask:L.test.mask})):this.stencilTest.set(!1)},be.prototype.setColorMode=function(L){e.deepEqual(L.blendFunction,He.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(L.blendFunction),this.blendColor.set(L.blendColor)),this.colorMask.set(L.mask)},be.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ze=function(L){function z(F,G,ie){var fe=this;L.call(this),this.id=F,this.dispatcher=ie,this.on("data",function(xe){"source"===xe.dataType&&"metadata"===xe.sourceDataType&&(fe._sourceLoaded=!0),fe._sourceLoaded&&!fe._paused&&"source"===xe.dataType&&"content"===xe.sourceDataType&&(fe.reload(),fe.transform&&fe.update(fe.transform))}),this.on("error",function(){fe._sourceErrored=!0}),this._source=function(xe,ke,Ce,Ue){var $e=new U[ke.type](xe,ke,Ce,Ue);if($e.id!==xe)throw new Error("Expected Source id to be "+xe+" instead of "+$e.id);return e.bindAll(["load","abort","unload","serialize","prepare"],$e),$e}(F,G,ie,this),this._tiles={},this._cache=new N(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.onAdd=function(F){this.map=F,this._maxTileCacheSize=F?F._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(F)},z.prototype.onRemove=function(F){this._source&&this._source.onRemove&&this._source.onRemove(F)},z.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var F in this._tiles){var G=this._tiles[F];if("loaded"!==G.state&&"errored"!==G.state)return!1}return!0},z.prototype.getSource=function(){return this._source},z.prototype.pause=function(){this._paused=!0},z.prototype.resume=function(){if(this._paused){var F=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,F&&this.reload(),this.transform&&this.update(this.transform)}},z.prototype._loadTile=function(F,G){return this._source.loadTile(F,G)},z.prototype._unloadTile=function(F){if(this._source.unloadTile)return this._source.unloadTile(F,function(){})},z.prototype._abortTile=function(F){if(this._source.abortTile)return this._source.abortTile(F,function(){})},z.prototype.serialize=function(){return this._source.serialize()},z.prototype.prepare=function(F){for(var G in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var ie=this._tiles[G];ie.upload(F),ie.prepare(this.map.style.imageManager)}},z.prototype.getIds=function(){return e.values(this._tiles).map(function(F){return F.tileID}).sort(Ve).map(function(F){return F.key})},z.prototype.getRenderableIds=function(F){var G=this,ie=[];for(var fe in this._tiles)this._isIdRenderable(fe,F)&&ie.push(this._tiles[fe]);return F?ie.sort(function(xe,ke){var Ce=xe.tileID,Ue=ke.tileID,$e=new e.Point(Ce.canonical.x,Ce.canonical.y)._rotate(G.transform.angle),at=new e.Point(Ue.canonical.x,Ue.canonical.y)._rotate(G.transform.angle);return Ce.overscaledZ-Ue.overscaledZ||at.y-$e.y||at.x-$e.x}).map(function(xe){return xe.tileID.key}):ie.map(function(xe){return xe.tileID}).sort(Ve).map(function(xe){return xe.key})},z.prototype.hasRenderableParent=function(F){var G=this.findLoadedParent(F,0);return!!G&&this._isIdRenderable(G.tileID.key)},z.prototype._isIdRenderable=function(F,G){return this._tiles[F]&&this._tiles[F].hasData()&&!this._coveredTiles[F]&&(G||!this._tiles[F].holdingForFade())},z.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var F in this._cache.reset(),this._tiles)"errored"!==this._tiles[F].state&&this._reloadTile(F,"reloading")},z.prototype._reloadTile=function(F,G){var ie=this._tiles[F];ie&&("loading"!==ie.state&&(ie.state=G),this._loadTile(ie,this._tileLoaded.bind(this,ie,F,G)))},z.prototype._tileLoaded=function(F,G,ie,fe){if(fe)return F.state="errored",void(404!==fe.status?this._source.fire(new e.ErrorEvent(fe,{tile:F})):this.update(this.transform));F.timeAdded=e.browser.now(),"expired"===ie&&(F.refreshedUponExpiration=!0),this._setTileReloadTimer(G,F),"raster-dem"===this.getSource().type&&F.dem&&this._backfillDEM(F),this._state.initializeTileState(F,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:F,coord:F.tileID}))},z.prototype._backfillDEM=function(F){for(var G=this.getRenderableIds(),ie=0;ie<G.length;ie++){var fe=G[ie];if(F.neighboringTiles&&F.neighboringTiles[fe]){var xe=this.getTileByID(fe);ke(F,xe),ke(xe,F)}}function ke(Ce,Ue){Ce.needsHillshadePrepare=!0;var $e=Ue.tileID.canonical.x-Ce.tileID.canonical.x,at=Ue.tileID.canonical.y-Ce.tileID.canonical.y,kt=Math.pow(2,Ce.tileID.canonical.z),Pt=Ue.tileID.key;0===$e&&0===at||Math.abs(at)>1||(Math.abs($e)>1&&(1===Math.abs($e+kt)?$e+=kt:1===Math.abs($e-kt)&&($e-=kt)),Ue.dem&&Ce.dem&&(Ce.dem.backfillBorder(Ue.dem,$e,at),Ce.neighboringTiles&&Ce.neighboringTiles[Pt]&&(Ce.neighboringTiles[Pt].backfilled=!0)))}},z.prototype.getTile=function(F){return this.getTileByID(F.key)},z.prototype.getTileByID=function(F){return this._tiles[F]},z.prototype._retainLoadedChildren=function(F,G,ie,fe){for(var xe in this._tiles){var ke=this._tiles[xe];if(!(fe[xe]||!ke.hasData()||ke.tileID.overscaledZ<=G||ke.tileID.overscaledZ>ie)){for(var Ce=ke.tileID;ke&&ke.tileID.overscaledZ>G+1;){var Ue=ke.tileID.scaledTo(ke.tileID.overscaledZ-1);(ke=this._tiles[Ue.key])&&ke.hasData()&&(Ce=Ue)}for(var $e=Ce;$e.overscaledZ>G;)if(F[($e=$e.scaledTo($e.overscaledZ-1)).key]){fe[Ce.key]=Ce;break}}}},z.prototype.findLoadedParent=function(F,G){if(F.key in this._loadedParentTiles){var ie=this._loadedParentTiles[F.key];return ie&&ie.tileID.overscaledZ>=G?ie:null}for(var fe=F.overscaledZ-1;fe>=G;fe--){var xe=F.scaledTo(fe),ke=this._getLoadedTile(xe);if(ke)return ke}},z.prototype._getLoadedTile=function(F){var G=this._tiles[F.key];return G&&G.hasData()?G:this._cache.getByKey(F.wrapped().key)},z.prototype.updateCacheSize=function(F){var G=(Math.ceil(F.width/this._source.tileSize)+1)*(Math.ceil(F.height/this._source.tileSize)+1),ie=Math.floor(5*G),fe="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,ie):ie;this._cache.setMaxSize(fe)},z.prototype.handleWrapJump=function(F){var ie=Math.round((F-(void 0===this._prevLng?F:this._prevLng))/360);if(this._prevLng=F,ie){var fe={};for(var xe in this._tiles){var ke=this._tiles[xe];ke.tileID=ke.tileID.unwrapTo(ke.tileID.wrap+ie),fe[ke.tileID.key]=ke}for(var Ce in this._tiles=fe,this._timers)clearTimeout(this._timers[Ce]),delete this._timers[Ce];for(var Ue in this._tiles)this._setTileReloadTimer(Ue,this._tiles[Ue])}},z.prototype.update=function(F){var G=this;if(this.transform=F,this._sourceLoaded&&!this._paused){var ie;this.updateCacheSize(F),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?ie=F.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Cr){return new e.OverscaledTileID(Cr.canonical.z,Cr.wrap,Cr.canonical.z,Cr.canonical.x,Cr.canonical.y)}):(ie=F.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(ie=ie.filter(function(Cr){return G._source.hasTile(Cr)}))):ie=[];var fe=F.coveringZoomLevel(this._source),xe=Math.max(fe-z.maxOverzooming,this._source.minzoom),ke=Math.max(fe+z.maxUnderzooming,this._source.minzoom),Ce=this._updateRetainedTiles(ie,fe);if(Je(this._source.type)){for(var Ue={},$e={},at=0,kt=Object.keys(Ce);at<kt.length;at+=1){var Pt=kt[at],St=Ce[Pt],Et=this._tiles[Pt];if(Et&&!(Et.fadeEndTime&&Et.fadeEndTime<=e.browser.now())){var wt=this.findLoadedParent(St,xe);wt&&(this._addTile(wt.tileID),Ue[wt.tileID.key]=wt.tileID),$e[Pt]=St}}for(var jt in this._retainLoadedChildren($e,fe,ke,Ce),Ue)Ce[jt]||(this._coveredTiles[jt]=!0,Ce[jt]=Ue[jt])}for(var Nt in Ce)this._tiles[Nt].clearFadeHold();for(var Gt=0,lr=e.keysDifference(this._tiles,Ce);Gt<lr.length;Gt+=1){var yr=lr[Gt],Or=this._tiles[yr];Or.hasSymbolBuckets&&!Or.holdingForFade()?Or.setHoldDuration(this.map._fadeDuration):Or.hasSymbolBuckets&&!Or.symbolFadeFinished()||this._removeTile(yr)}this._updateLoadedParentTileCache()}},z.prototype.releaseSymbolFadeTiles=function(){for(var F in this._tiles)this._tiles[F].holdingForFade()&&this._removeTile(F)},z.prototype._updateRetainedTiles=function(F,G){for(var ie={},fe={},xe=Math.max(G-z.maxOverzooming,this._source.minzoom),ke=Math.max(G+z.maxUnderzooming,this._source.minzoom),Ce={},Ue=0,$e=F;Ue<$e.length;Ue+=1){var at=$e[Ue],kt=this._addTile(at);ie[at.key]=at,kt.hasData()||G<this._source.maxzoom&&(Ce[at.key]=at)}this._retainLoadedChildren(Ce,G,ke,ie);for(var Pt=0,St=F;Pt<St.length;Pt+=1){var Et=St[Pt],wt=this._tiles[Et.key];if(!wt.hasData()){if(G+1>this._source.maxzoom){var jt=Et.children(this._source.maxzoom)[0],Nt=this.getTile(jt);if(Nt&&Nt.hasData()){ie[jt.key]=jt;continue}}else{var Gt=Et.children(this._source.maxzoom);if(ie[Gt[0].key]&&ie[Gt[1].key]&&ie[Gt[2].key]&&ie[Gt[3].key])continue}for(var lr=wt.wasRequested(),yr=Et.overscaledZ-1;yr>=xe;--yr){var Or=Et.scaledTo(yr);if(fe[Or.key]||(fe[Or.key]=!0,!(wt=this.getTile(Or))&&lr&&(wt=this._addTile(Or)),wt&&(ie[Or.key]=Or,lr=wt.wasRequested(),wt.hasData())))break}}}return ie},z.prototype._updateLoadedParentTileCache=function(){for(var F in this._loadedParentTiles={},this._tiles){for(var G=[],ie=void 0,fe=this._tiles[F].tileID;fe.overscaledZ>0;){if(fe.key in this._loadedParentTiles){ie=this._loadedParentTiles[fe.key];break}G.push(fe.key);var xe=fe.scaledTo(fe.overscaledZ-1);if(ie=this._getLoadedTile(xe))break;fe=xe}for(var ke=0,Ce=G;ke<Ce.length;ke+=1)this._loadedParentTiles[Ce[ke]]=ie}},z.prototype._addTile=function(F){var G=this._tiles[F.key];if(G)return G;(G=this._cache.getAndRemove(F))&&(this._setTileReloadTimer(F.key,G),G.tileID=F,this._state.initializeTileState(G,this.map?this.map.painter:null),this._cacheTimers[F.key]&&(clearTimeout(this._cacheTimers[F.key]),delete this._cacheTimers[F.key],this._setTileReloadTimer(F.key,G)));var ie=Boolean(G);return ie||(G=new e.Tile(F,this._source.tileSize*F.overscaleFactor()),this._loadTile(G,this._tileLoaded.bind(this,G,F.key,G.state))),G?(G.uses++,this._tiles[F.key]=G,ie||this._source.fire(new e.Event("dataloading",{tile:G,coord:G.tileID,dataType:"source"})),G):null},z.prototype._setTileReloadTimer=function(F,G){var ie=this;F in this._timers&&(clearTimeout(this._timers[F]),delete this._timers[F]);var fe=G.getExpiryTimeout();fe&&(this._timers[F]=setTimeout(function(){ie._reloadTile(F,"expired"),delete ie._timers[F]},fe))},z.prototype._removeTile=function(F){var G=this._tiles[F];G&&(G.uses--,delete this._tiles[F],this._timers[F]&&(clearTimeout(this._timers[F]),delete this._timers[F]),G.uses>0||(G.hasData()&&"reloading"!==G.state?this._cache.add(G.tileID,G,G.getExpiryTimeout()):(G.aborted=!0,this._abortTile(G),this._unloadTile(G))))},z.prototype.clearTiles=function(){for(var F in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(F);this._cache.reset()},z.prototype.tilesIn=function(F,G,ie){var fe=this,xe=[],ke=this.transform;if(!ke)return xe;for(var Ce=ie?ke.getCameraQueryGeometry(F):F,Ue=F.map(function(yr){return ke.pointCoordinate(yr)}),$e=Ce.map(function(yr){return ke.pointCoordinate(yr)}),at=this.getIds(),kt=1/0,Pt=1/0,St=-1/0,Et=-1/0,wt=0,jt=$e;wt<jt.length;wt+=1){var Nt=jt[wt];kt=Math.min(kt,Nt.x),Pt=Math.min(Pt,Nt.y),St=Math.max(St,Nt.x),Et=Math.max(Et,Nt.y)}for(var Gt=function(yr){var Or=fe._tiles[at[yr]];if(!Or.holdingForFade()){var Cr=Or.tileID,tn=Math.pow(2,ke.zoom-Or.tileID.overscaledZ),en=G*Or.queryPadding*e.EXTENT/Or.tileSize/tn,yn=[Cr.getTilePoint(new e.MercatorCoordinate(kt,Pt)),Cr.getTilePoint(new e.MercatorCoordinate(St,Et))];if(yn[0].x-en<e.EXTENT&&yn[0].y-en<e.EXTENT&&yn[1].x+en>=0&&yn[1].y+en>=0){var pn=Ue.map(function(ti){return Cr.getTilePoint(ti)}),Yn=$e.map(function(ti){return Cr.getTilePoint(ti)});xe.push({tile:Or,tileID:Cr,queryGeometry:pn,cameraQueryGeometry:Yn,scale:tn})}}},lr=0;lr<at.length;lr++)Gt(lr);return xe},z.prototype.getVisibleCoordinates=function(F){for(var G=this,ie=this.getRenderableIds(F).map(function(Ce){return G._tiles[Ce].tileID}),fe=0,xe=ie;fe<xe.length;fe+=1){var ke=xe[fe];ke.posMatrix=this.transform.calculatePosMatrix(ke.toUnwrapped())}return ie},z.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Je(this._source.type))for(var F in this._tiles){var G=this._tiles[F];if(void 0!==G.fadeEndTime&&G.fadeEndTime>=e.browser.now())return!0}return!1},z.prototype.setFeatureState=function(F,G,ie){this._state.updateState(F=F||"_geojsonTileLayer",G,ie)},z.prototype.removeFeatureState=function(F,G,ie){this._state.removeFeatureState(F=F||"_geojsonTileLayer",G,ie)},z.prototype.getFeatureState=function(F,G){return this._state.getState(F=F||"_geojsonTileLayer",G)},z.prototype.setDependencies=function(F,G,ie){var fe=this._tiles[F];fe&&fe.setDependencies(G,ie)},z.prototype.reloadTilesForDependencies=function(F,G){for(var ie in this._tiles)this._tiles[ie].hasDependency(F,G)&&this._reloadTile(ie,"reloading");this._cache.filter(function(fe){return!fe.hasDependency(F,G)})},z}(e.Evented);function Ve(L,z){var F=Math.abs(2*L.wrap)-+(L.wrap<0),G=Math.abs(2*z.wrap)-+(z.wrap<0);return L.overscaledZ-z.overscaledZ||G-F||z.canonical.y-L.canonical.y||z.canonical.x-L.canonical.x}function Je(L){return"raster"===L||"image"===L||"video"===L}function Ye(){return new e.window.Worker(ce.workerUrl)}ze.maxOverzooming=10,ze.maxUnderzooming=3;var lt="mapboxgl_preloaded_worker_pool",st=function(){this.active={}};st.prototype.acquire=function(L){if(!this.workers)for(this.workers=[];this.workers.length<st.workerCount;)this.workers.push(new Ye);return this.active[L]=!0,this.workers.slice()},st.prototype.release=function(L){delete this.active[L],0===this.numActive()&&(this.workers.forEach(function(z){z.terminate()}),this.workers=null)},st.prototype.isPreloaded=function(){return!!this.active[lt]},st.prototype.numActive=function(){return Object.keys(this.active).length};var Mt,Dt=Math.floor(e.browser.hardwareConcurrency/2);function ht(){return Mt||(Mt=new st),Mt}function mt(L,z){var F={};for(var G in L)"ref"!==G&&(F[G]=L[G]);return e.refProperties.forEach(function(ie){ie in z&&(F[ie]=z[ie])}),F}function Ot(L){L=L.slice();for(var z=Object.create(null),F=0;F<L.length;F++)z[L[F].id]=L[F];for(var G=0;G<L.length;G++)"ref"in L[G]&&(L[G]=mt(L[G],z[L[G].ref]));return L}st.workerCount=Math.max(Math.min(Dt,6),1);var At={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function It(L,z,F){F.push({command:At.addSource,args:[L,z[L]]})}function Se(L,z,F){z.push({command:At.removeSource,args:[L]}),F[L]=!0}function Ze(L,z,F,G){Se(L,F,G),It(L,z,F)}function it(L,z,F){var G;for(G in L[F])if(L[F].hasOwnProperty(G)&&"data"!==G&&!e.deepEqual(L[F][G],z[F][G]))return!1;for(G in z[F])if(z[F].hasOwnProperty(G)&&"data"!==G&&!e.deepEqual(L[F][G],z[F][G]))return!1;return!0}function dt(L,z,F,G,ie,fe){var xe;for(xe in z=z||{},L=L||{})L.hasOwnProperty(xe)&&(e.deepEqual(L[xe],z[xe])||F.push({command:fe,args:[G,xe,z[xe],ie]}));for(xe in z)z.hasOwnProperty(xe)&&!L.hasOwnProperty(xe)&&(e.deepEqual(L[xe],z[xe])||F.push({command:fe,args:[G,xe,z[xe],ie]}))}function Ct(L){return L.id}function Ut(L,z){return L[z.id]=z,L}var qt=function(L,z){this.reset(L,z)};qt.prototype.reset=function(L,z){this.points=L||[],this._distances=[0];for(var F=1;F<this.points.length;F++)this._distances[F]=this._distances[F-1]+this.points[F].dist(this.points[F-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(z||0,.5*this.length),this.paddedLength=this.length-2*this.padding},qt.prototype.lerp=function(L){if(1===this.points.length)return this.points[0];L=e.clamp(L,0,1);for(var z=1,F=this._distances[z],G=L*this.paddedLength+this.padding;F<G&&z<this._distances.length;)F=this._distances[++z];var ie=z-1,fe=this._distances[ie],xe=F-fe,ke=xe>0?(G-fe)/xe:0;return this.points[ie].mult(1-ke).add(this.points[z].mult(ke))};var pr=function(L,z,F){var G=this.boxCells=[],ie=this.circleCells=[];this.xCellCount=Math.ceil(L/F),this.yCellCount=Math.ceil(z/F);for(var fe=0;fe<this.xCellCount*this.yCellCount;fe++)G.push([]),ie.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=L,this.height=z,this.xScale=this.xCellCount/L,this.yScale=this.yCellCount/z,this.boxUid=0,this.circleUid=0};function Sr(L,z,F,G,ie){var fe=e.create();return z?(e.scale(fe,fe,[1/ie,1/ie,1]),F||e.rotateZ(fe,fe,G.angle)):e.multiply(fe,G.labelPlaneMatrix,L),fe}function mr(L,z,F,G,ie){if(z){var fe=e.clone(L);return e.scale(fe,fe,[ie,ie,1]),F||e.rotateZ(fe,fe,-G.angle),fe}return G.glCoordMatrix}function tr(L,z){var F=[L.x,L.y,0,1];Nn(F,F,z);var G=F[3];return{point:new e.Point(F[0]/G,F[1]/G),signedDistanceFromCamera:G}}function rr(L,z){return.5+L/z*.5}function ar(L,z){var F=L[0]/L[3],G=L[1]/L[3];return F>=-z[0]&&F<=z[0]&&G>=-z[1]&&G<=z[1]}function dr(L,z,F,G,ie,fe,xe,ke){var Ce=G?L.textSizeData:L.iconSizeData,Ue=e.evaluateSizeForZoom(Ce,F.transform.zoom),$e=[256/F.width*2+1,256/F.height*2+1],at=G?L.text.dynamicLayoutVertexArray:L.icon.dynamicLayoutVertexArray;at.clear();for(var kt=L.lineVertexArray,Pt=G?L.text.placedSymbolArray:L.icon.placedSymbolArray,St=F.transform.width/F.transform.height,Et=!1,wt=0;wt<Pt.length;wt++){var jt=Pt.get(wt);if(jt.hidden||jt.writingMode===e.WritingMode.vertical&&!Et)an(jt.numGlyphs,at);else{Et=!1;var Nt=[jt.anchorX,jt.anchorY,0,1];if(e.transformMat4(Nt,Nt,z),ar(Nt,$e)){var lr=rr(F.transform.cameraToCenterDistance,Nt[3]),yr=e.evaluateSizeForFeature(Ce,Ue,jt),Or=xe?yr/lr:yr*lr,Cr=new e.Point(jt.anchorX,jt.anchorY),tn=tr(Cr,ie).point,en={},yn=zr(jt,Or,!1,ke,z,ie,fe,L.glyphOffsetArray,kt,at,tn,Cr,en,St);Et=yn.useVertical,(yn.notEnoughRoom||Et||yn.needsFlipping&&zr(jt,Or,!0,ke,z,ie,fe,L.glyphOffsetArray,kt,at,tn,Cr,en,St).notEnoughRoom)&&an(jt.numGlyphs,at)}else an(jt.numGlyphs,at)}}G?L.text.dynamicLayoutVertexBuffer.updateData(at):L.icon.dynamicLayoutVertexBuffer.updateData(at)}function xr(L,z,F,G,ie,fe,xe,ke,Ce,Ue,$e){var at=ke.glyphStartIndex+ke.numGlyphs,kt=ke.lineStartIndex,Pt=ke.lineStartIndex+ke.lineLength,St=z.getoffsetX(ke.glyphStartIndex),Et=z.getoffsetX(at-1),wt=Xr(L*St,F,G,ie,fe,xe,ke.segment,kt,Pt,Ce,Ue,$e);if(!wt)return null;var jt=Xr(L*Et,F,G,ie,fe,xe,ke.segment,kt,Pt,Ce,Ue,$e);return jt?{first:wt,last:jt}:null}function Lr(L,z,F,G){return L===e.WritingMode.horizontal&&Math.abs(F.y-z.y)>Math.abs(F.x-z.x)*G?{useVertical:!0}:(L===e.WritingMode.vertical?z.y<F.y:z.x>F.x)?{needsFlipping:!0}:null}function zr(L,z,F,G,ie,fe,xe,ke,Ce,Ue,$e,at,kt,Pt){var St,Et=z/24,wt=L.lineOffsetX*Et,jt=L.lineOffsetY*Et;if(L.numGlyphs>1){var Nt=L.glyphStartIndex+L.numGlyphs,Gt=L.lineStartIndex,lr=L.lineStartIndex+L.lineLength,yr=xr(Et,ke,wt,jt,F,$e,at,L,Ce,fe,kt);if(!yr)return{notEnoughRoom:!0};var Or=tr(yr.first.point,xe).point,Cr=tr(yr.last.point,xe).point;if(G&&!F){var tn=Lr(L.writingMode,Or,Cr,Pt);if(tn)return tn}St=[yr.first];for(var en=L.glyphStartIndex+1;en<Nt-1;en++)St.push(Xr(Et*ke.getoffsetX(en),wt,jt,F,$e,at,L.segment,Gt,lr,Ce,fe,kt));St.push(yr.last)}else{if(G&&!F){var yn=tr(at,ie).point,pn=L.lineStartIndex+L.segment+1,Yn=new e.Point(Ce.getx(pn),Ce.gety(pn)),ti=tr(Yn,ie),gi=ti.signedDistanceFromCamera>0?ti.point:Hr(at,Yn,yn,1,ie),Jr=Lr(L.writingMode,yn,gi,Pt);if(Jr)return Jr}var In=Xr(Et*ke.getoffsetX(L.glyphStartIndex),wt,jt,F,$e,at,L.segment,L.lineStartIndex,L.lineStartIndex+L.lineLength,Ce,fe,kt);if(!In)return{notEnoughRoom:!0};St=[In]}for(var ri=0,Jn=St;ri<Jn.length;ri+=1){var ui=Jn[ri];e.addDynamicAttributes(Ue,ui.point,ui.angle)}return{}}function Hr(L,z,F,G,ie){var fe=tr(L.add(L.sub(z)._unit()),ie).point,xe=F.sub(fe);return F.add(xe._mult(G/xe.mag()))}function Xr(L,z,F,G,ie,fe,xe,ke,Ce,Ue,$e,at){var kt=G?L-z:L+z,Pt=kt>0?1:-1,St=0;G&&(Pt*=-1,St=Math.PI),Pt<0&&(St+=Math.PI);for(var Et=Pt>0?ke+xe:ke+xe+1,wt=ie,jt=ie,Nt=0,Gt=0,lr=Math.abs(kt),yr=[];Nt+Gt<=lr;){if((Et+=Pt)<ke||Et>=Ce)return null;if(jt=wt,yr.push(wt),void 0===(wt=at[Et])){var Or=new e.Point(Ue.getx(Et),Ue.gety(Et)),Cr=tr(Or,$e);if(Cr.signedDistanceFromCamera>0)wt=at[Et]=Cr.point;else{var tn=Et-Pt;wt=Hr(0===Nt?fe:new e.Point(Ue.getx(tn),Ue.gety(tn)),Or,jt,lr-Nt+1,$e)}}Nt+=Gt,Gt=jt.dist(wt)}var en=(lr-Nt)/Gt,yn=wt.sub(jt),pn=yn.mult(en)._add(jt);pn._add(yn._unit()._perp()._mult(F*Pt));var Yn=St+Math.atan2(wt.y-jt.y,wt.x-jt.x);return yr.push(pn),{point:pn,angle:Yn,path:yr}}pr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},pr.prototype.insert=function(L,z,F,G,ie){this._forEachCell(z,F,G,ie,this._insertBoxCell,this.boxUid++),this.boxKeys.push(L),this.bboxes.push(z),this.bboxes.push(F),this.bboxes.push(G),this.bboxes.push(ie)},pr.prototype.insertCircle=function(L,z,F,G){this._forEachCell(z-G,F-G,z+G,F+G,this._insertCircleCell,this.circleUid++),this.circleKeys.push(L),this.circles.push(z),this.circles.push(F),this.circles.push(G)},pr.prototype._insertBoxCell=function(L,z,F,G,ie,fe){this.boxCells[ie].push(fe)},pr.prototype._insertCircleCell=function(L,z,F,G,ie,fe){this.circleCells[ie].push(fe)},pr.prototype._query=function(L,z,F,G,ie,fe){if(F<0||L>this.width||G<0||z>this.height)return!ie&&[];var xe=[];if(L<=0&&z<=0&&this.width<=F&&this.height<=G){if(ie)return!0;for(var ke=0;ke<this.boxKeys.length;ke++)xe.push({key:this.boxKeys[ke],x1:this.bboxes[4*ke],y1:this.bboxes[4*ke+1],x2:this.bboxes[4*ke+2],y2:this.bboxes[4*ke+3]});for(var Ce=0;Ce<this.circleKeys.length;Ce++){var Ue=this.circles[3*Ce],$e=this.circles[3*Ce+1],at=this.circles[3*Ce+2];xe.push({key:this.circleKeys[Ce],x1:Ue-at,y1:$e-at,x2:Ue+at,y2:$e+at})}return fe?xe.filter(fe):xe}return this._forEachCell(L,z,F,G,this._queryCell,xe,{hitTest:ie,seenUids:{box:{},circle:{}}},fe),ie?xe.length>0:xe},pr.prototype._queryCircle=function(L,z,F,G,ie){var fe=L-F,xe=L+F,ke=z-F,Ce=z+F;if(xe<0||fe>this.width||Ce<0||ke>this.height)return!G&&[];var Ue=[];return this._forEachCell(fe,ke,xe,Ce,this._queryCellCircle,Ue,{hitTest:G,circle:{x:L,y:z,radius:F},seenUids:{box:{},circle:{}}},ie),G?Ue.length>0:Ue},pr.prototype.query=function(L,z,F,G,ie){return this._query(L,z,F,G,!1,ie)},pr.prototype.hitTest=function(L,z,F,G,ie){return this._query(L,z,F,G,!0,ie)},pr.prototype.hitTestCircle=function(L,z,F,G){return this._queryCircle(L,z,F,!0,G)},pr.prototype._queryCell=function(L,z,F,G,ie,fe,xe,ke){var Ce=xe.seenUids,Ue=this.boxCells[ie];if(null!==Ue)for(var $e=this.bboxes,at=0,kt=Ue;at<kt.length;at+=1){var Pt=kt[at];if(!Ce.box[Pt]){Ce.box[Pt]=!0;var St=4*Pt;if(L<=$e[St+2]&&z<=$e[St+3]&&F>=$e[St+0]&&G>=$e[St+1]&&(!ke||ke(this.boxKeys[Pt]))){if(xe.hitTest)return fe.push(!0),!0;fe.push({key:this.boxKeys[Pt],x1:$e[St],y1:$e[St+1],x2:$e[St+2],y2:$e[St+3]})}}}var Et=this.circleCells[ie];if(null!==Et)for(var wt=this.circles,jt=0,Nt=Et;jt<Nt.length;jt+=1){var Gt=Nt[jt];if(!Ce.circle[Gt]){Ce.circle[Gt]=!0;var lr=3*Gt;if(this._circleAndRectCollide(wt[lr],wt[lr+1],wt[lr+2],L,z,F,G)&&(!ke||ke(this.circleKeys[Gt]))){if(xe.hitTest)return fe.push(!0),!0;var yr=wt[lr],Or=wt[lr+1],Cr=wt[lr+2];fe.push({key:this.circleKeys[Gt],x1:yr-Cr,y1:Or-Cr,x2:yr+Cr,y2:Or+Cr})}}}},pr.prototype._queryCellCircle=function(L,z,F,G,ie,fe,xe,ke){var Ce=xe.circle,Ue=xe.seenUids,$e=this.boxCells[ie];if(null!==$e)for(var at=this.bboxes,kt=0,Pt=$e;kt<Pt.length;kt+=1){var St=Pt[kt];if(!Ue.box[St]){Ue.box[St]=!0;var Et=4*St;if(this._circleAndRectCollide(Ce.x,Ce.y,Ce.radius,at[Et+0],at[Et+1],at[Et+2],at[Et+3])&&(!ke||ke(this.boxKeys[St])))return fe.push(!0),!0}}var wt=this.circleCells[ie];if(null!==wt)for(var jt=this.circles,Nt=0,Gt=wt;Nt<Gt.length;Nt+=1){var lr=Gt[Nt];if(!Ue.circle[lr]){Ue.circle[lr]=!0;var yr=3*lr;if(this._circlesCollide(jt[yr],jt[yr+1],jt[yr+2],Ce.x,Ce.y,Ce.radius)&&(!ke||ke(this.circleKeys[lr])))return fe.push(!0),!0}}},pr.prototype._forEachCell=function(L,z,F,G,ie,fe,xe,ke){for(var Ce=this._convertToXCellCoord(L),Ue=this._convertToYCellCoord(z),$e=this._convertToXCellCoord(F),at=this._convertToYCellCoord(G),kt=Ce;kt<=$e;kt++)for(var Pt=Ue;Pt<=at;Pt++)if(ie.call(this,L,z,F,G,this.xCellCount*Pt+kt,fe,xe,ke))return},pr.prototype._convertToXCellCoord=function(L){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(L*this.xScale)))},pr.prototype._convertToYCellCoord=function(L){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(L*this.yScale)))},pr.prototype._circlesCollide=function(L,z,F,G,ie,fe){var xe=G-L,ke=ie-z,Ce=F+fe;return Ce*Ce>xe*xe+ke*ke},pr.prototype._circleAndRectCollide=function(L,z,F,G,ie,fe,xe){var ke=(fe-G)/2,Ce=Math.abs(L-(G+ke));if(Ce>ke+F)return!1;var Ue=(xe-ie)/2,$e=Math.abs(z-(ie+Ue));if($e>Ue+F)return!1;if(Ce<=ke||$e<=Ue)return!0;var at=Ce-ke,kt=$e-Ue;return at*at+kt*kt<=F*F};var cn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function an(L,z){for(var F=0;F<L;F++){var G=z.length;z.resize(G+4),z.float32.set(cn,3*G)}}function Nn(L,z,F){var G=z[0],ie=z[1];return L[0]=F[0]*G+F[4]*ie+F[12],L[1]=F[1]*G+F[5]*ie+F[13],L[3]=F[3]*G+F[7]*ie+F[15],L}var on=function(L,z,F){void 0===z&&(z=new pr(L.width+200,L.height+200,25)),void 0===F&&(F=new pr(L.width+200,L.height+200,25)),this.transform=L,this.grid=z,this.ignoredGrid=F,this.pitchfactor=Math.cos(L._pitch)*L.cameraToCenterDistance,this.screenRightBoundary=L.width+100,this.screenBottomBoundary=L.height+100,this.gridRightBoundary=L.width+200,this.gridBottomBoundary=L.height+200};function wn(L,z,F){return z*(e.EXTENT/(L.tileSize*Math.pow(2,F-L.tileID.overscaledZ)))}on.prototype.placeCollisionBox=function(L,z,F,G,ie){var fe=this.projectAndGetPerspectiveRatio(G,L.anchorPointX,L.anchorPointY),xe=F*fe.perspectiveRatio,ke=L.x1*xe+fe.point.x,Ce=L.y1*xe+fe.point.y,Ue=L.x2*xe+fe.point.x,$e=L.y2*xe+fe.point.y;return!this.isInsideGrid(ke,Ce,Ue,$e)||!z&&this.grid.hitTest(ke,Ce,Ue,$e,ie)?{box:[],offscreen:!1}:{box:[ke,Ce,Ue,$e],offscreen:this.isOffscreen(ke,Ce,Ue,$e)}},on.prototype.placeCollisionCircles=function(L,z,F,G,ie,fe,xe,ke,Ce,Ue,$e,at,kt){var Pt=[],St=new e.Point(z.anchorX,z.anchorY),Et=tr(St,fe),wt=rr(this.transform.cameraToCenterDistance,Et.signedDistanceFromCamera),jt=(Ue?ie/wt:ie*wt)/e.ONE_EM,Nt=tr(St,xe).point,Gt=xr(jt,G,z.lineOffsetX*jt,z.lineOffsetY*jt,!1,Nt,St,z,F,xe,{}),lr=!1,yr=!1,Or=!0;if(Gt){for(var Cr=.5*at*wt+kt,tn=new e.Point(-100,-100),en=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),yn=new qt,pn=Gt.first,Yn=Gt.last,ti=[],gi=pn.path.length-1;gi>=1;gi--)ti.push(pn.path[gi]);for(var Jr=1;Jr<Yn.path.length;Jr++)ti.push(Yn.path[Jr]);var In=2.5*Cr;if(ke){var ri=ti.map(function(_o){return tr(_o,ke)});ti=ri.some(function(_o){return _o.signedDistanceFromCamera<=0})?[]:ri.map(function(_o){return _o.point})}var Jn=[];if(ti.length>0){for(var ui=ti[0].clone(),yi=ti[0].clone(),Oi=1;Oi<ti.length;Oi++)ui.x=Math.min(ui.x,ti[Oi].x),ui.y=Math.min(ui.y,ti[Oi].y),yi.x=Math.max(yi.x,ti[Oi].x),yi.y=Math.max(yi.y,ti[Oi].y);Jn=ui.x>=tn.x&&yi.x<=en.x&&ui.y>=tn.y&&yi.y<=en.y?[ti]:yi.x<tn.x||ui.x>en.x||yi.y<tn.y||ui.y>en.y?[]:e.clipLine([ti],tn.x,tn.y,en.x,en.y)}for(var ai=0,Mi=Jn;ai<Mi.length;ai+=1){yn.reset(Mi[ai],.25*Cr);var Ri;Ri=yn.length<=.5*Cr?1:Math.ceil(yn.paddedLength/In)+1;for(var Si=0;Si<Ri;Si++){var Fi=Si/Math.max(Ri-1,1),Xi=yn.lerp(Fi),ya=Xi.x+100,Fa=Xi.y+100;Pt.push(ya,Fa,Cr,0);var Ba=ya-Cr,va=Fa-Cr,La=ya+Cr,Ta=Fa+Cr;if(Or=Or&&this.isOffscreen(Ba,va,La,Ta),yr=yr||this.isInsideGrid(Ba,va,La,Ta),!L&&this.grid.hitTestCircle(ya,Fa,Cr,$e)&&(lr=!0,!Ce))return{circles:[],offscreen:!1,collisionDetected:lr}}}}return{circles:!Ce&&lr||!yr?[]:Pt,offscreen:Or,collisionDetected:lr}},on.prototype.queryRenderedSymbols=function(L){if(0===L.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var z=[],F=1/0,G=1/0,ie=-1/0,fe=-1/0,xe=0,ke=L;xe<ke.length;xe+=1){var Ce=ke[xe],Ue=new e.Point(Ce.x+100,Ce.y+100);F=Math.min(F,Ue.x),G=Math.min(G,Ue.y),ie=Math.max(ie,Ue.x),fe=Math.max(fe,Ue.y),z.push(Ue)}for(var $e={},at={},kt=0,Pt=this.grid.query(F,G,ie,fe).concat(this.ignoredGrid.query(F,G,ie,fe));kt<Pt.length;kt+=1){var St=Pt[kt],Et=St.key;if(void 0===$e[Et.bucketInstanceId]&&($e[Et.bucketInstanceId]={}),!$e[Et.bucketInstanceId][Et.featureIndex]){var wt=[new e.Point(St.x1,St.y1),new e.Point(St.x2,St.y1),new e.Point(St.x2,St.y2),new e.Point(St.x1,St.y2)];e.polygonIntersectsPolygon(z,wt)&&($e[Et.bucketInstanceId][Et.featureIndex]=!0,void 0===at[Et.bucketInstanceId]&&(at[Et.bucketInstanceId]=[]),at[Et.bucketInstanceId].push(Et.featureIndex))}}return at},on.prototype.insertCollisionBox=function(L,z,F,G,ie){(z?this.ignoredGrid:this.grid).insert({bucketInstanceId:F,featureIndex:G,collisionGroupID:ie},L[0],L[1],L[2],L[3])},on.prototype.insertCollisionCircles=function(L,z,F,G,ie){for(var fe=z?this.ignoredGrid:this.grid,xe={bucketInstanceId:F,featureIndex:G,collisionGroupID:ie},ke=0;ke<L.length;ke+=4)fe.insertCircle(xe,L[ke],L[ke+1],L[ke+2])},on.prototype.projectAndGetPerspectiveRatio=function(L,z,F){var G=[z,F,0,1];return Nn(G,G,L),{point:new e.Point((G[0]/G[3]+1)/2*this.transform.width+100,(-G[1]/G[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/G[3]*.5}},on.prototype.isOffscreen=function(L,z,F,G){return F<100||L>=this.screenRightBoundary||G<100||z>this.screenBottomBoundary},on.prototype.isInsideGrid=function(L,z,F,G){return F>=0&&L<this.gridRightBoundary&&G>=0&&z<this.gridBottomBoundary},on.prototype.getViewportMatrix=function(){var L=e.identity([]);return e.translate(L,L,[-100,-100,0]),L};var An=function(L,z,F,G){this.opacity=L?Math.max(0,Math.min(1,L.opacity+(L.placed?z:-z))):G&&F?1:0,this.placed=F};An.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ii=function(L,z,F,G,ie){this.text=new An(L?L.text:null,z,F,ie),this.icon=new An(L?L.icon:null,z,G,ie)};ii.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Vr=function(L,z,F){this.text=L,this.icon=z,this.skipFade=F},sn=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},xn=function(L,z,F,G,ie){this.bucketInstanceId=L,this.featureIndex=z,this.sourceLayerIndex=F,this.bucketIndex=G,this.tileID=ie},nn=function(L){this.crossSourceCollisions=L,this.maxGroupID=0,this.collisionGroups={}};function fn(L,z,F,G,ie){var fe=e.getAnchorAlignment(L),xe=-(fe.horizontalAlign-.5)*z,ke=-(fe.verticalAlign-.5)*F,Ce=e.evaluateVariableOffset(L,G);return new e.Point(xe+Ce[0]*ie,ke+Ce[1]*ie)}function Xn(L,z,F,G,ie,fe){var xe=L.x1,ke=L.x2,Ce=L.y1,Ue=L.y2,$e=L.anchorPointX,at=L.anchorPointY,kt=new e.Point(z,F);return G&&kt._rotate(ie?fe:-fe),{x1:xe+kt.x,y1:Ce+kt.y,x2:ke+kt.x,y2:Ue+kt.y,anchorPointX:$e,anchorPointY:at}}nn.prototype.get=function(L){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[L]){var z=++this.maxGroupID;this.collisionGroups[L]={ID:z,predicate:function(F){return F.collisionGroupID===z}}}return this.collisionGroups[L]};var Mn=function(L,z,F,G){this.transform=L.clone(),this.collisionIndex=new on(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=z,this.retainedQueryData={},this.collisionGroups=new nn(F),this.collisionCircleArrays={},this.prevPlacement=G,G&&(G.prevPlacement=void 0),this.placedOrientations={}};function On(L,z,F,G,ie){L.emplaceBack(z?1:0,F?1:0,G||0,ie||0),L.emplaceBack(z?1:0,F?1:0,G||0,ie||0),L.emplaceBack(z?1:0,F?1:0,G||0,ie||0),L.emplaceBack(z?1:0,F?1:0,G||0,ie||0)}Mn.prototype.getBucketParts=function(L,z,F,G){var ie=F.getBucket(z),fe=F.latestFeatureIndex;if(ie&&fe&&z.id===ie.layerIds[0]){var xe=F.collisionBoxArray,ke=ie.layers[0].layout,Ce=Math.pow(2,this.transform.zoom-F.tileID.overscaledZ),Ue=F.tileSize/e.EXTENT,$e=this.transform.calculatePosMatrix(F.tileID.toUnwrapped()),at="map"===ke.get("text-pitch-alignment"),kt="map"===ke.get("text-rotation-alignment"),Pt=wn(F,1,this.transform.zoom),St=Sr($e,at,kt,this.transform,Pt),Et=null;if(at){var wt=mr($e,at,kt,this.transform,Pt);Et=e.multiply([],this.transform.labelPlaneMatrix,wt)}this.retainedQueryData[ie.bucketInstanceId]=new xn(ie.bucketInstanceId,fe,ie.sourceLayerIndex,ie.index,F.tileID);var jt={bucket:ie,layout:ke,posMatrix:$e,textLabelPlaneMatrix:St,labelToScreenMatrix:Et,scale:Ce,textPixelRatio:Ue,holdingForFade:F.holdingForFade(),collisionBoxArray:xe,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(ie.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ie.sourceID)};if(G)for(var Nt=0,Gt=ie.sortKeyRanges;Nt<Gt.length;Nt+=1){var lr=Gt[Nt];L.push({sortKey:lr.sortKey,symbolInstanceStart:lr.symbolInstanceStart,symbolInstanceEnd:lr.symbolInstanceEnd,parameters:jt})}else L.push({symbolInstanceStart:0,symbolInstanceEnd:ie.symbolInstances.length,parameters:jt})}},Mn.prototype.attemptAnchorPlacement=function(L,z,F,G,ie,fe,xe,ke,Ce,Ue,$e,at,kt,Pt,St){var Et,wt=[at.textOffset0,at.textOffset1],jt=fn(L,F,G,wt,ie),Nt=this.collisionIndex.placeCollisionBox(Xn(z,jt.x,jt.y,fe,xe,this.transform.angle),$e,ke,Ce,Ue.predicate);if((!St||0!==this.collisionIndex.placeCollisionBox(Xn(St,jt.x,jt.y,fe,xe,this.transform.angle),$e,ke,Ce,Ue.predicate).box.length)&&Nt.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[at.crossTileID]&&this.prevPlacement.placements[at.crossTileID]&&this.prevPlacement.placements[at.crossTileID].text&&(Et=this.prevPlacement.variableOffsets[at.crossTileID].anchor),this.variableOffsets[at.crossTileID]={textOffset:wt,width:F,height:G,anchor:L,textBoxScale:ie,prevAnchor:Et},this.markUsedJustification(kt,L,at,Pt),kt.allowVerticalPlacement&&(this.markUsedOrientation(kt,Pt,at),this.placedOrientations[at.crossTileID]=Pt),{shift:jt,placedGlyphBoxes:Nt}},Mn.prototype.placeLayerBucketPart=function(L,z,F){var G=this,ie=L.parameters,fe=ie.bucket,xe=ie.layout,ke=ie.posMatrix,Ce=ie.textLabelPlaneMatrix,Ue=ie.labelToScreenMatrix,$e=ie.textPixelRatio,at=ie.holdingForFade,kt=ie.collisionBoxArray,Pt=ie.partiallyEvaluatedTextSize,St=ie.collisionGroup,Et=xe.get("text-optional"),wt=xe.get("icon-optional"),jt=xe.get("text-allow-overlap"),Nt=xe.get("icon-allow-overlap"),Gt="map"===xe.get("text-rotation-alignment"),lr="map"===xe.get("text-pitch-alignment"),yr="none"!==xe.get("icon-text-fit"),Or="viewport-y"===xe.get("symbol-z-order"),Cr=jt&&(Nt||!fe.hasIconData()||wt),tn=Nt&&(jt||!fe.hasTextData()||Et);!fe.collisionArrays&&kt&&fe.deserializeCollisionBoxes(kt);var en=function(Jr,In){if(!z[Jr.crossTileID])if(at)G.placements[Jr.crossTileID]=new Vr(!1,!1,!1);else{var ri,Jn=!1,ui=!1,yi=!0,Oi=null,ai={box:null,offscreen:null},Mi={box:null,offscreen:null},wi=null,Ri=null,Si=0,Fi=0,Xi=0;In.textFeatureIndex?Si=In.textFeatureIndex:Jr.useRuntimeCollisionCircles&&(Si=Jr.featureIndex),In.verticalTextFeatureIndex&&(Fi=In.verticalTextFeatureIndex);var ya=In.textBox;if(ya){var Fa=function(Pa){var Oo=e.WritingMode.horizontal;if(fe.allowVerticalPlacement&&!Pa&&G.prevPlacement){var Do=G.prevPlacement.placedOrientations[Jr.crossTileID];Do&&(G.placedOrientations[Jr.crossTileID]=Do,G.markUsedOrientation(fe,Oo=Do,Jr))}return Oo},Ba=function(Pa,Oo){if(fe.allowVerticalPlacement&&Jr.numVerticalGlyphVertices>0&&In.verticalTextBox)for(var Do=0,yl=fe.writingModes;Do<yl.length&&(yl[Do]===e.WritingMode.vertical?(ai=Oo(),Mi=ai):ai=Pa(),!(ai&&ai.box&&ai.box.length));Do+=1);else ai=Pa()};if(xe.get("text-variable-anchor")){var va=xe.get("text-variable-anchor");if(G.prevPlacement&&G.prevPlacement.variableOffsets[Jr.crossTileID]){var La=G.prevPlacement.variableOffsets[Jr.crossTileID];va.indexOf(La.anchor)>0&&(va=va.filter(function(Pa){return Pa!==La.anchor})).unshift(La.anchor)}var Ta=function(Pa,Oo,Do){for(var yl=Pa.x2-Pa.x1,Xc=Pa.y2-Pa.y1,Zo=Jr.textBoxScale,Gl=yr&&!Nt?Oo:null,ul={box:[],offscreen:!1},Jc=jt?2*va.length:va.length,Fs=0;Fs<Jc;++Fs){var $s=G.attemptAnchorPlacement(va[Fs%va.length],Pa,yl,Xc,Zo,Gt,lr,$e,ke,St,Fs>=va.length,Jr,fe,Do,Gl);if($s&&(ul=$s.placedGlyphBoxes)&&ul.box&&ul.box.length){Jn=!0,Oi=$s.shift;break}}return ul};Ba(function(){return Ta(ya,In.iconBox,e.WritingMode.horizontal)},function(){var Pa=In.verticalTextBox;return fe.allowVerticalPlacement&&!(ai&&ai.box&&ai.box.length)&&Jr.numVerticalGlyphVertices>0&&Pa?Ta(Pa,In.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),ai&&(Jn=ai.box,yi=ai.offscreen);var _o=Fa(ai&&ai.box);if(!Jn&&G.prevPlacement){var $a=G.prevPlacement.variableOffsets[Jr.crossTileID];$a&&(G.variableOffsets[Jr.crossTileID]=$a,G.markUsedJustification(fe,$a.anchor,Jr,_o))}}else{var Bo=function(Pa,Oo){var Do=G.collisionIndex.placeCollisionBox(Pa,jt,$e,ke,St.predicate);return Do&&Do.box&&Do.box.length&&(G.markUsedOrientation(fe,Oo,Jr),G.placedOrientations[Jr.crossTileID]=Oo),Do};Ba(function(){return Bo(ya,e.WritingMode.horizontal)},function(){var Pa=In.verticalTextBox;return fe.allowVerticalPlacement&&Jr.numVerticalGlyphVertices>0&&Pa?Bo(Pa,e.WritingMode.vertical):{box:null,offscreen:null}}),Fa(ai&&ai.box&&ai.box.length)}}if(Jn=(ri=ai)&&ri.box&&ri.box.length>0,yi=ri&&ri.offscreen,Jr.useRuntimeCollisionCircles){var bs=fe.text.placedSymbolArray.get(Jr.centerJustifiedTextSymbolIndex),Rs=e.evaluateSizeForFeature(fe.textSizeData,Pt,bs),sl=xe.get("text-padding");wi=G.collisionIndex.placeCollisionCircles(jt,bs,fe.lineVertexArray,fe.glyphOffsetArray,Rs,ke,Ce,Ue,F,lr,St.predicate,Jr.collisionCircleDiameter,sl),Jn=jt||wi.circles.length>0&&!wi.collisionDetected,yi=yi&&wi.offscreen}if(In.iconFeatureIndex&&(Xi=In.iconFeatureIndex),In.iconBox){var Ks=function(Pa){var Oo=yr&&Oi?Xn(Pa,Oi.x,Oi.y,Gt,lr,G.transform.angle):Pa;return G.collisionIndex.placeCollisionBox(Oo,Nt,$e,ke,St.predicate)};ui=Mi&&Mi.box&&Mi.box.length&&In.verticalIconBox?(Ri=Ks(In.verticalIconBox)).box.length>0:(Ri=Ks(In.iconBox)).box.length>0,yi=yi&&Ri.offscreen}var wo=Et||0===Jr.numHorizontalGlyphVertices&&0===Jr.numVerticalGlyphVertices,Vs=wt||0===Jr.numIconVertices;if(wo||Vs?Vs?wo||(ui=ui&&Jn):Jn=ui&&Jn:ui=Jn=ui&&Jn,Jn&&ri&&ri.box&&G.collisionIndex.insertCollisionBox(ri.box,xe.get("text-ignore-placement"),fe.bucketInstanceId,Mi&&Mi.box&&Fi?Fi:Si,St.ID),ui&&Ri&&G.collisionIndex.insertCollisionBox(Ri.box,xe.get("icon-ignore-placement"),fe.bucketInstanceId,Xi,St.ID),wi&&(Jn&&G.collisionIndex.insertCollisionCircles(wi.circles,xe.get("text-ignore-placement"),fe.bucketInstanceId,Si,St.ID),F)){var ll=fe.bucketInstanceId,ns=G.collisionCircleArrays[ll];void 0===ns&&(ns=G.collisionCircleArrays[ll]=new sn);for(var cl=0;cl<wi.circles.length;cl+=4)ns.circles.push(wi.circles[cl+0]),ns.circles.push(wi.circles[cl+1]),ns.circles.push(wi.circles[cl+2]),ns.circles.push(wi.collisionDetected?1:0)}G.placements[Jr.crossTileID]=new Vr(Jn||Cr,ui||tn,yi||fe.justReloaded),z[Jr.crossTileID]=!0}};if(Or)for(var yn=fe.getSortedSymbolIndexes(this.transform.angle),pn=yn.length-1;pn>=0;--pn){var Yn=yn[pn];en(fe.symbolInstances.get(Yn),fe.collisionArrays[Yn])}else for(var ti=L.symbolInstanceStart;ti<L.symbolInstanceEnd;ti++)en(fe.symbolInstances.get(ti),fe.collisionArrays[ti]);if(F&&fe.bucketInstanceId in this.collisionCircleArrays){var gi=this.collisionCircleArrays[fe.bucketInstanceId];e.invert(gi.invProjMatrix,ke),gi.viewportMatrix=this.collisionIndex.getViewportMatrix()}fe.justReloaded=!1},Mn.prototype.markUsedJustification=function(L,z,F,G){var ie;ie=G===e.WritingMode.vertical?F.verticalPlacedTextSymbolIndex:{left:F.leftJustifiedTextSymbolIndex,center:F.centerJustifiedTextSymbolIndex,right:F.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(z)];for(var xe=0,ke=[F.leftJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.rightJustifiedTextSymbolIndex,F.verticalPlacedTextSymbolIndex];xe<ke.length;xe+=1){var Ce=ke[xe];Ce>=0&&(L.text.placedSymbolArray.get(Ce).crossTileID=ie>=0&&Ce!==ie?0:F.crossTileID)}},Mn.prototype.markUsedOrientation=function(L,z,F){for(var G=z===e.WritingMode.horizontal||z===e.WritingMode.horizontalOnly?z:0,ie=z===e.WritingMode.vertical?z:0,fe=0,xe=[F.leftJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.rightJustifiedTextSymbolIndex];fe<xe.length;fe+=1)L.text.placedSymbolArray.get(xe[fe]).placedOrientation=G;F.verticalPlacedTextSymbolIndex&&(L.text.placedSymbolArray.get(F.verticalPlacedTextSymbolIndex).placedOrientation=ie)},Mn.prototype.commit=function(L){this.commitTime=L,this.zoomAtLastRecencyCheck=this.transform.zoom;var z=this.prevPlacement,F=!1;this.prevZoomAdjustment=z?z.zoomAdjustment(this.transform.zoom):0;var G=z?z.symbolFadeChange(L):1,ie=z?z.opacities:{},fe=z?z.variableOffsets:{},xe=z?z.placedOrientations:{};for(var ke in this.placements){var Ce=this.placements[ke],Ue=ie[ke];Ue?(this.opacities[ke]=new ii(Ue,G,Ce.text,Ce.icon),F=F||Ce.text!==Ue.text.placed||Ce.icon!==Ue.icon.placed):(this.opacities[ke]=new ii(null,G,Ce.text,Ce.icon,Ce.skipFade),F=F||Ce.text||Ce.icon)}for(var $e in ie){var at=ie[$e];if(!this.opacities[$e]){var kt=new ii(at,G,!1,!1);kt.isHidden()||(this.opacities[$e]=kt,F=F||at.text.placed||at.icon.placed)}}for(var Pt in fe)this.variableOffsets[Pt]||!this.opacities[Pt]||this.opacities[Pt].isHidden()||(this.variableOffsets[Pt]=fe[Pt]);for(var St in xe)this.placedOrientations[St]||!this.opacities[St]||this.opacities[St].isHidden()||(this.placedOrientations[St]=xe[St]);F?this.lastPlacementChangeTime=L:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=z?z.lastPlacementChangeTime:L)},Mn.prototype.updateLayerOpacities=function(L,z){for(var F={},G=0,ie=z;G<ie.length;G+=1){var fe=ie[G],xe=fe.getBucket(L);xe&&fe.latestFeatureIndex&&L.id===xe.layerIds[0]&&this.updateBucketOpacities(xe,F,fe.collisionBoxArray)}},Mn.prototype.updateBucketOpacities=function(L,z,F){var G=this;L.hasTextData()&&L.text.opacityVertexArray.clear(),L.hasIconData()&&L.icon.opacityVertexArray.clear(),L.hasIconCollisionBoxData()&&L.iconCollisionBox.collisionVertexArray.clear(),L.hasTextCollisionBoxData()&&L.textCollisionBox.collisionVertexArray.clear();var ie=L.layers[0].layout,fe=new ii(null,0,!1,!1,!0),xe=ie.get("text-allow-overlap"),ke=ie.get("icon-allow-overlap"),Ce=ie.get("text-variable-anchor"),Ue="map"===ie.get("text-rotation-alignment"),$e="map"===ie.get("text-pitch-alignment"),at="none"!==ie.get("icon-text-fit"),kt=new ii(null,0,xe&&(ke||!L.hasIconData()||ie.get("icon-optional")),ke&&(xe||!L.hasTextData()||ie.get("text-optional")),!0);!L.collisionArrays&&F&&(L.hasIconCollisionBoxData()||L.hasTextCollisionBoxData())&&L.deserializeCollisionBoxes(F);for(var Pt=function(jt,Nt,Gt){for(var lr=0;lr<Nt/4;lr++)jt.opacityVertexArray.emplaceBack(Gt)},St=function(jt){var Nt=L.symbolInstances.get(jt),Gt=Nt.numHorizontalGlyphVertices,lr=Nt.numVerticalGlyphVertices,yr=Nt.crossTileID,Cr=G.opacities[yr];z[yr]?Cr=fe:Cr||(G.opacities[yr]=Cr=kt),z[yr]=!0;var en=Nt.numIconVertices>0,yn=G.placedOrientations[Nt.crossTileID],pn=yn===e.WritingMode.vertical,Yn=yn===e.WritingMode.horizontal||yn===e.WritingMode.horizontalOnly;if(Gt>0||lr>0){var ti=Br(Cr.text);Pt(L.text,Gt,pn?Fr:ti),Pt(L.text,lr,Yn?Fr:ti);var In=Cr.text.isHidden();[Nt.rightJustifiedTextSymbolIndex,Nt.centerJustifiedTextSymbolIndex,Nt.leftJustifiedTextSymbolIndex].forEach(function(Xi){Xi>=0&&(L.text.placedSymbolArray.get(Xi).hidden=In||pn?1:0)}),Nt.verticalPlacedTextSymbolIndex>=0&&(L.text.placedSymbolArray.get(Nt.verticalPlacedTextSymbolIndex).hidden=In||Yn?1:0);var ri=G.variableOffsets[Nt.crossTileID];ri&&G.markUsedJustification(L,ri.anchor,Nt,yn);var Jn=G.placedOrientations[Nt.crossTileID];Jn&&(G.markUsedJustification(L,"left",Nt,Jn),G.markUsedOrientation(L,Jn,Nt))}if(en){var ui=Br(Cr.icon),yi=!(at&&Nt.verticalPlacedIconSymbolIndex&&pn);Nt.placedIconSymbolIndex>=0&&(Pt(L.icon,Nt.numIconVertices,yi?ui:Fr),L.icon.placedSymbolArray.get(Nt.placedIconSymbolIndex).hidden=Cr.icon.isHidden()),Nt.verticalPlacedIconSymbolIndex>=0&&(Pt(L.icon,Nt.numVerticalIconVertices,yi?Fr:ui),L.icon.placedSymbolArray.get(Nt.verticalPlacedIconSymbolIndex).hidden=Cr.icon.isHidden())}if(L.hasIconCollisionBoxData()||L.hasTextCollisionBoxData()){var Mi=L.collisionArrays[jt];if(Mi){var wi=new e.Point(0,0);if(Mi.textBox||Mi.verticalTextBox){var Ri=!0;if(Ce){var Si=G.variableOffsets[yr];Si?(wi=fn(Si.anchor,Si.width,Si.height,Si.textOffset,Si.textBoxScale),Ue&&wi._rotate($e?G.transform.angle:-G.transform.angle)):Ri=!1}Mi.textBox&&On(L.textCollisionBox.collisionVertexArray,Cr.text.placed,!Ri||pn,wi.x,wi.y),Mi.verticalTextBox&&On(L.textCollisionBox.collisionVertexArray,Cr.text.placed,!Ri||Yn,wi.x,wi.y)}var Fi=Boolean(!Yn&&Mi.verticalIconBox);Mi.iconBox&&On(L.iconCollisionBox.collisionVertexArray,Cr.icon.placed,Fi,at?wi.x:0,at?wi.y:0),Mi.verticalIconBox&&On(L.iconCollisionBox.collisionVertexArray,Cr.icon.placed,!Fi,at?wi.x:0,at?wi.y:0)}}},Et=0;Et<L.symbolInstances.length;Et++)St(Et);if(L.sortFeatures(this.transform.angle),this.retainedQueryData[L.bucketInstanceId]&&(this.retainedQueryData[L.bucketInstanceId].featureSortOrder=L.featureSortOrder),L.hasTextData()&&L.text.opacityVertexBuffer&&L.text.opacityVertexBuffer.updateData(L.text.opacityVertexArray),L.hasIconData()&&L.icon.opacityVertexBuffer&&L.icon.opacityVertexBuffer.updateData(L.icon.opacityVertexArray),L.hasIconCollisionBoxData()&&L.iconCollisionBox.collisionVertexBuffer&&L.iconCollisionBox.collisionVertexBuffer.updateData(L.iconCollisionBox.collisionVertexArray),L.hasTextCollisionBoxData()&&L.textCollisionBox.collisionVertexBuffer&&L.textCollisionBox.collisionVertexBuffer.updateData(L.textCollisionBox.collisionVertexArray),L.bucketInstanceId in this.collisionCircleArrays){var wt=this.collisionCircleArrays[L.bucketInstanceId];L.placementInvProjMatrix=wt.invProjMatrix,L.placementViewportMatrix=wt.viewportMatrix,L.collisionCircleArray=wt.circles,delete this.collisionCircleArrays[L.bucketInstanceId]}},Mn.prototype.symbolFadeChange=function(L){return 0===this.fadeDuration?1:(L-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Mn.prototype.zoomAdjustment=function(L){return Math.max(0,(this.transform.zoom-L)/1.5)},Mn.prototype.hasTransitions=function(L){return this.stale||L-this.lastPlacementChangeTime<this.fadeDuration},Mn.prototype.stillRecent=function(L,z){var F=this.zoomAtLastRecencyCheck===z?1-this.zoomAdjustment(z):1;return this.zoomAtLastRecencyCheck=z,this.commitTime+this.fadeDuration*F>L},Mn.prototype.setStale=function(){this.stale=!0};var si=Math.pow(2,25),or=Math.pow(2,24),br=Math.pow(2,17),Rt=Math.pow(2,16),fr=Math.pow(2,9),gr=Math.pow(2,8),jr=Math.pow(2,1);function Br(L){if(0===L.opacity&&!L.placed)return 0;if(1===L.opacity&&L.placed)return 4294967295;var z=L.placed?1:0,F=Math.floor(127*L.opacity);return F*si+z*or+F*br+z*Rt+F*fr+z*gr+F*jr+z}var Fr=0,Er=function(L){this._sortAcrossTiles="viewport-y"!==L.layout.get("symbol-z-order")&&void 0!==L.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Er.prototype.continuePlacement=function(L,z,F,G,ie){for(var fe=this._bucketParts;this._currentTileIndex<L.length;)if(z.getBucketParts(fe,G,L[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,ie())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,fe.sort(function(Ce,Ue){return Ce.sortKey-Ue.sortKey}));this._currentPartIndex<fe.length;)if(z.placeLayerBucketPart(fe[this._currentPartIndex],this._seenCrossTileIDs,F),this._currentPartIndex++,ie())return!0;return!1};var _r=function(L,z,F,G,ie,fe,xe){this.placement=new Mn(L,ie,fe,xe),this._currentPlacementIndex=z.length-1,this._forceFullPlacement=F,this._showCollisionBoxes=G,this._done=!1};_r.prototype.isDone=function(){return this._done},_r.prototype.continuePlacement=function(L,z,F){for(var G=this,ie=e.browser.now(),fe=function(){var Ce=e.browser.now()-ie;return!G._forceFullPlacement&&Ce>2};this._currentPlacementIndex>=0;){var xe=z[L[this._currentPlacementIndex]],ke=this.placement.collisionIndex.transform.zoom;if("symbol"===xe.type&&(!xe.minzoom||xe.minzoom<=ke)&&(!xe.maxzoom||xe.maxzoom>ke)){if(this._inProgressLayer||(this._inProgressLayer=new Er(xe)),this._inProgressLayer.continuePlacement(F[xe.source],this.placement,this._showCollisionBoxes,xe,fe))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},_r.prototype.commit=function(L){return this.placement.commit(L),this.placement};var kr=512/e.EXTENT/2,Mr=function(L,z,F){this.tileID=L,this.indexedSymbolInstances={},this.bucketInstanceId=F;for(var G=0;G<z.length;G++){var ie=z.get(G),fe=ie.key;this.indexedSymbolInstances[fe]||(this.indexedSymbolInstances[fe]=[]),this.indexedSymbolInstances[fe].push({crossTileID:ie.crossTileID,coord:this.getScaledCoordinates(ie,L)})}};Mr.prototype.getScaledCoordinates=function(L,z){var G=kr/Math.pow(2,z.canonical.z-this.tileID.canonical.z);return{x:Math.floor((z.canonical.x*e.EXTENT+L.anchorX)*G),y:Math.floor((z.canonical.y*e.EXTENT+L.anchorY)*G)}},Mr.prototype.findMatches=function(L,z,F){for(var G=this.tileID.canonical.z<z.canonical.z?1:Math.pow(2,this.tileID.canonical.z-z.canonical.z),ie=0;ie<L.length;ie++){var fe=L.get(ie);if(!fe.crossTileID){var xe=this.indexedSymbolInstances[fe.key];if(xe)for(var ke=this.getScaledCoordinates(fe,z),Ce=0,Ue=xe;Ce<Ue.length;Ce+=1){var $e=Ue[Ce];if(Math.abs($e.coord.x-ke.x)<=G&&Math.abs($e.coord.y-ke.y)<=G&&!F[$e.crossTileID]){F[$e.crossTileID]=!0,fe.crossTileID=$e.crossTileID;break}}}}};var Pr=function(){this.maxCrossTileID=0};Pr.prototype.generate=function(){return++this.maxCrossTileID};var Wr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Wr.prototype.handleWrapJump=function(L){var z=Math.round((L-this.lng)/360);if(0!==z)for(var F in this.indexes){var G=this.indexes[F],ie={};for(var fe in G){var xe=G[fe];xe.tileID=xe.tileID.unwrapTo(xe.tileID.wrap+z),ie[xe.tileID.key]=xe}this.indexes[F]=ie}this.lng=L},Wr.prototype.addBucket=function(L,z,F){if(this.indexes[L.overscaledZ]&&this.indexes[L.overscaledZ][L.key]){if(this.indexes[L.overscaledZ][L.key].bucketInstanceId===z.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(L.overscaledZ,this.indexes[L.overscaledZ][L.key])}for(var G=0;G<z.symbolInstances.length;G++)z.symbolInstances.get(G).crossTileID=0;this.usedCrossTileIDs[L.overscaledZ]||(this.usedCrossTileIDs[L.overscaledZ]={});var ie=this.usedCrossTileIDs[L.overscaledZ];for(var fe in this.indexes){var xe=this.indexes[fe];if(Number(fe)>L.overscaledZ)for(var ke in xe){var Ce=xe[ke];Ce.tileID.isChildOf(L)&&Ce.findMatches(z.symbolInstances,L,ie)}else{var Ue=xe[L.scaledTo(Number(fe)).key];Ue&&Ue.findMatches(z.symbolInstances,L,ie)}}for(var $e=0;$e<z.symbolInstances.length;$e++){var at=z.symbolInstances.get($e);at.crossTileID||(at.crossTileID=F.generate(),ie[at.crossTileID]=!0)}return void 0===this.indexes[L.overscaledZ]&&(this.indexes[L.overscaledZ]={}),this.indexes[L.overscaledZ][L.key]=new Mr(L,z.symbolInstances,z.bucketInstanceId),!0},Wr.prototype.removeBucketCrossTileIDs=function(L,z){for(var F in z.indexedSymbolInstances)for(var G=0,ie=z.indexedSymbolInstances[F];G<ie.length;G+=1)delete this.usedCrossTileIDs[L][ie[G].crossTileID]},Wr.prototype.removeStaleBuckets=function(L){var z=!1;for(var F in this.indexes){var G=this.indexes[F];for(var ie in G)L[G[ie].bucketInstanceId]||(this.removeBucketCrossTileIDs(F,G[ie]),delete G[ie],z=!0)}return z};var Zr=function(){this.layerIndexes={},this.crossTileIDs=new Pr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Zr.prototype.addLayer=function(L,z,F){var G=this.layerIndexes[L.id];void 0===G&&(G=this.layerIndexes[L.id]=new Wr);var ie=!1,fe={};G.handleWrapJump(F);for(var xe=0,ke=z;xe<ke.length;xe+=1){var Ce=ke[xe],Ue=Ce.getBucket(L);Ue&&L.id===Ue.layerIds[0]&&(Ue.bucketInstanceId||(Ue.bucketInstanceId=++this.maxBucketInstanceId),G.addBucket(Ce.tileID,Ue,this.crossTileIDs)&&(ie=!0),fe[Ue.bucketInstanceId]=!0)}return G.removeStaleBuckets(fe)&&(ie=!0),ie},Zr.prototype.pruneUnusedLayers=function(L){var z={};for(var F in L.forEach(function(G){z[G]=!0}),this.layerIndexes)z[F]||delete this.layerIndexes[F]};var rn=function(L,z){return e.emitValidationErrors(L,z&&z.filter(function(F){return"source.canvas"!==F.identifier}))},ln=e.pick(At,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),bn=e.pick(At,["setCenter","setZoom","setBearing","setPitch"]),Tn=function(){var L={},z=e.styleSpec.$version;for(var F in e.styleSpec.$root){var G=e.styleSpec.$root[F];if(G.required){var ie;null!=(ie="version"===F?z:"array"===G.type?[]:{})&&(L[F]=ie)}}return L}(),En=function(L){function z(F,G){var ie=this;void 0===G&&(G={}),L.call(this),this.map=F,this.dispatcher=new S(ht(),this),this.imageManager=new c,this.imageManager.setEventedParent(this),this.glyphManager=new T(F._requestManager,G.localIdeographFontFamily),this.lineAtlas=new P(256,512),this.crossTileSymbolIndex=new Zr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var fe=this;this._rtlTextPluginCallback=z.registerForPluginStateChange(function(xe){fe.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:xe.pluginStatus,pluginURL:xe.pluginURL},function(Ce,Ue){if(e.triggerPluginCompletionEvent(Ce),Ue&&Ue.every(function(at){return at}))for(var $e in fe.sourceCaches)fe.sourceCaches[$e].reload()})}),this.on("data",function(xe){if("source"===xe.dataType&&"metadata"===xe.sourceDataType){var ke=ie.sourceCaches[xe.sourceId];if(ke){var Ce=ke.getSource();if(Ce&&Ce.vectorLayerIds)for(var Ue in ie._layers){var $e=ie._layers[Ue];$e.source===Ce.id&&ie._validateLayer($e)}}}})}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.loadURL=function(F,G){var ie=this;void 0===G&&(G={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var fe="boolean"==typeof G.validate?G.validate:!e.isMapboxURL(F);F=this.map._requestManager.normalizeStyleURL(F,G.accessToken);var xe=this.map._requestManager.transformRequest(F,e.ResourceType.Style);this._request=e.getJSON(xe,function(ke,Ce){ie._request=null,ke?ie.fire(new e.ErrorEvent(ke)):Ce&&ie._load(Ce,fe)})},z.prototype.loadJSON=function(F,G){var ie=this;void 0===G&&(G={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){ie._request=null,ie._load(F,!1!==G.validate)})},z.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Tn,!1)},z.prototype._load=function(F,G){if(!G||!rn(this,e.validateStyle(F))){for(var ie in this._loaded=!0,this.stylesheet=F,F.sources)this.addSource(ie,F.sources[ie],{validate:!1});F.sprite?this._loadSprite(F.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(F.glyphs);var fe=Ot(this.stylesheet.layers);this._order=fe.map(function(Ue){return Ue.id}),this._layers={},this._serializedLayers={};for(var xe=0,ke=fe;xe<ke.length;xe+=1){var Ce=ke[xe];(Ce=e.createStyleLayer(Ce)).setEventedParent(this,{layer:{id:Ce.id}}),this._layers[Ce.id]=Ce,this._serializedLayers[Ce.id]=Ce.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},z.prototype._loadSprite=function(F){var G=this;this._spriteRequest=function(ie,fe,xe){var ke,Ce,Ue,$e=e.browser.devicePixelRatio>1?"@2x":"",at=e.getJSON(fe.transformRequest(fe.normalizeSpriteURL(ie,$e,".json"),e.ResourceType.SpriteJSON),function(St,Et){at=null,Ue||(Ue=St,ke=Et,Pt())}),kt=e.getImage(fe.transformRequest(fe.normalizeSpriteURL(ie,$e,".png"),e.ResourceType.SpriteImage),function(St,Et){kt=null,Ue||(Ue=St,Ce=Et,Pt())});function Pt(){if(Ue)xe(Ue);else if(ke&&Ce){var St=e.browser.getImageData(Ce),Et={};for(var wt in ke){var jt=ke[wt],Nt=jt.width,Gt=jt.height,lr=jt.x,yr=jt.y,Or=jt.sdf,Cr=jt.pixelRatio,tn=jt.stretchX,en=jt.stretchY,yn=jt.content,pn=new e.RGBAImage({width:Nt,height:Gt});e.RGBAImage.copy(St,pn,{x:lr,y:yr},{x:0,y:0},{width:Nt,height:Gt}),Et[wt]={data:pn,pixelRatio:Cr,sdf:Or,stretchX:tn,stretchY:en,content:yn}}xe(null,Et)}}return{cancel:function(){at&&(at.cancel(),at=null),kt&&(kt.cancel(),kt=null)}}}(F,this.map._requestManager,function(ie,fe){if(G._spriteRequest=null,ie)G.fire(new e.ErrorEvent(ie));else if(fe)for(var xe in fe)G.imageManager.addImage(xe,fe[xe]);G.imageManager.setLoaded(!0),G._availableImages=G.imageManager.listImages(),G.dispatcher.broadcast("setImages",G._availableImages),G.fire(new e.Event("data",{dataType:"style"}))})},z.prototype._validateLayer=function(F){var G=this.sourceCaches[F.source];if(G){var ie=F.sourceLayer;if(ie){var fe=G.getSource();("geojson"===fe.type||fe.vectorLayerIds&&-1===fe.vectorLayerIds.indexOf(ie))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+ie+'" does not exist on source "'+fe.id+'" as specified by style layer "'+F.id+'"')))}}},z.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var F in this.sourceCaches)if(!this.sourceCaches[F].loaded())return!1;return!!this.imageManager.isLoaded()},z.prototype._serializeLayers=function(F){for(var G=[],ie=0,fe=F;ie<fe.length;ie+=1){var ke=this._layers[fe[ie]];"custom"!==ke.type&&G.push(ke.serialize())}return G},z.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var F in this.sourceCaches)if(this.sourceCaches[F].hasTransition())return!0;for(var G in this._layers)if(this._layers[G].hasTransition())return!0;return!1},z.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},z.prototype.update=function(F){if(this._loaded){var G=this._changed;if(this._changed){var ie=Object.keys(this._updatedLayers),fe=Object.keys(this._removedLayers);for(var xe in(ie.length||fe.length)&&this._updateWorkerLayers(ie,fe),this._updatedSources){var ke=this._updatedSources[xe];"reload"===ke?this._reloadSource(xe):"clear"===ke&&this._clearSource(xe)}for(var Ce in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ce].updateTransitions(F);this.light.updateTransitions(F),this._resetUpdates()}for(var Ue in this.sourceCaches)this.sourceCaches[Ue].used=!1;for(var $e=0,at=this._order;$e<at.length;$e+=1){var Pt=this._layers[at[$e]];Pt.recalculate(F,this._availableImages),!Pt.isHidden(F.zoom)&&Pt.source&&(this.sourceCaches[Pt.source].used=!0)}this.light.recalculate(F),this.z=F.zoom,G&&this.fire(new e.Event("data",{dataType:"style"}))}},z.prototype._updateTilesForChangedImages=function(){var F=Object.keys(this._changedImages);if(F.length){for(var G in this.sourceCaches)this.sourceCaches[G].reloadTilesForDependencies(["icons","patterns"],F);this._changedImages={}}},z.prototype._updateWorkerLayers=function(F,G){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(F),removedIds:G})},z.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},z.prototype.setState=function(F){var G=this;if(this._checkLoaded(),rn(this,e.validateStyle(F)))return!1;(F=e.clone$1(F)).layers=Ot(F.layers);var ie=function Jt(L,z){if(!L)return[{command:At.setStyle,args:[z]}];var F=[];try{if(!e.deepEqual(L.version,z.version))return[{command:At.setStyle,args:[z]}];e.deepEqual(L.center,z.center)||F.push({command:At.setCenter,args:[z.center]}),e.deepEqual(L.zoom,z.zoom)||F.push({command:At.setZoom,args:[z.zoom]}),e.deepEqual(L.bearing,z.bearing)||F.push({command:At.setBearing,args:[z.bearing]}),e.deepEqual(L.pitch,z.pitch)||F.push({command:At.setPitch,args:[z.pitch]}),e.deepEqual(L.sprite,z.sprite)||F.push({command:At.setSprite,args:[z.sprite]}),e.deepEqual(L.glyphs,z.glyphs)||F.push({command:At.setGlyphs,args:[z.glyphs]}),e.deepEqual(L.transition,z.transition)||F.push({command:At.setTransition,args:[z.transition]}),e.deepEqual(L.light,z.light)||F.push({command:At.setLight,args:[z.light]});var G={},ie=[];!function(xe,ke,Ce,Ue){var $e;for($e in ke=ke||{},xe=xe||{})xe.hasOwnProperty($e)&&(ke.hasOwnProperty($e)||Se($e,Ce,Ue));for($e in ke)ke.hasOwnProperty($e)&&(xe.hasOwnProperty($e)?e.deepEqual(xe[$e],ke[$e])||("geojson"===xe[$e].type&&"geojson"===ke[$e].type&&it(xe,ke,$e)?Ce.push({command:At.setGeoJSONSourceData,args:[$e,ke[$e].data]}):Ze($e,ke,Ce,Ue)):It($e,ke,Ce))}(L.sources,z.sources,ie,G);var fe=[];L.layers&&L.layers.forEach(function(xe){G[xe.source]?F.push({command:At.removeLayer,args:[xe.id]}):fe.push(xe)}),F=F.concat(ie),function(xe,ke,Ce){ke=ke||[];var Ue,$e,at,kt,Pt,St,Et,wt=(xe=xe||[]).map(Ct),jt=ke.map(Ct),Nt=xe.reduce(Ut,{}),Gt=ke.reduce(Ut,{}),lr=wt.slice(),yr=Object.create(null);for(Ue=0,$e=0;Ue<wt.length;Ue++)Gt.hasOwnProperty(at=wt[Ue])?$e++:(Ce.push({command:At.removeLayer,args:[at]}),lr.splice(lr.indexOf(at,$e),1));for(Ue=0,$e=0;Ue<jt.length;Ue++)lr[lr.length-1-Ue]!==(at=jt[jt.length-1-Ue])&&(Nt.hasOwnProperty(at)?(Ce.push({command:At.removeLayer,args:[at]}),lr.splice(lr.lastIndexOf(at,lr.length-$e),1)):$e++,Ce.push({command:At.addLayer,args:[Gt[at],St=lr[lr.length-Ue]]}),lr.splice(lr.length-Ue,0,at),yr[at]=!0);for(Ue=0;Ue<jt.length;Ue++)if(kt=Nt[at=jt[Ue]],Pt=Gt[at],!yr[at]&&!e.deepEqual(kt,Pt))if(e.deepEqual(kt.source,Pt.source)&&e.deepEqual(kt["source-layer"],Pt["source-layer"])&&e.deepEqual(kt.type,Pt.type)){for(Et in dt(kt.layout,Pt.layout,Ce,at,null,At.setLayoutProperty),dt(kt.paint,Pt.paint,Ce,at,null,At.setPaintProperty),e.deepEqual(kt.filter,Pt.filter)||Ce.push({command:At.setFilter,args:[at,Pt.filter]}),e.deepEqual(kt.minzoom,Pt.minzoom)&&e.deepEqual(kt.maxzoom,Pt.maxzoom)||Ce.push({command:At.setLayerZoomRange,args:[at,Pt.minzoom,Pt.maxzoom]}),kt)kt.hasOwnProperty(Et)&&"layout"!==Et&&"paint"!==Et&&"filter"!==Et&&"metadata"!==Et&&"minzoom"!==Et&&"maxzoom"!==Et&&(0===Et.indexOf("paint.")?dt(kt[Et],Pt[Et],Ce,at,Et.slice(6),At.setPaintProperty):e.deepEqual(kt[Et],Pt[Et])||Ce.push({command:At.setLayerProperty,args:[at,Et,Pt[Et]]}));for(Et in Pt)Pt.hasOwnProperty(Et)&&!kt.hasOwnProperty(Et)&&"layout"!==Et&&"paint"!==Et&&"filter"!==Et&&"metadata"!==Et&&"minzoom"!==Et&&"maxzoom"!==Et&&(0===Et.indexOf("paint.")?dt(kt[Et],Pt[Et],Ce,at,Et.slice(6),At.setPaintProperty):e.deepEqual(kt[Et],Pt[Et])||Ce.push({command:At.setLayerProperty,args:[at,Et,Pt[Et]]}))}else Ce.push({command:At.removeLayer,args:[at]}),St=lr[lr.lastIndexOf(at)+1],Ce.push({command:At.addLayer,args:[Pt,St]})}(fe,z.layers,F)}catch(xe){console.warn("Unable to compute style diff:",xe),F=[{command:At.setStyle,args:[z]}]}return F}(this.serialize(),F).filter(function(xe){return!(xe.command in bn)});if(0===ie.length)return!1;var fe=ie.filter(function(xe){return!(xe.command in ln)});if(fe.length>0)throw new Error("Unimplemented: "+fe.map(function(xe){return xe.command}).join(", ")+".");return ie.forEach(function(xe){"setTransition"!==xe.command&&G[xe.command].apply(G,xe.args)}),this.stylesheet=F,!0},z.prototype.addImage=function(F,G){if(this.getImage(F))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(F,G),this._availableImages=this.imageManager.listImages(),this._changedImages[F]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},z.prototype.updateImage=function(F,G){this.imageManager.updateImage(F,G)},z.prototype.getImage=function(F){return this.imageManager.getImage(F)},z.prototype.removeImage=function(F){if(!this.getImage(F))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(F),this._availableImages=this.imageManager.listImages(),this._changedImages[F]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},z.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},z.prototype.addSource=function(F,G,ie){var fe=this;if(void 0===ie&&(ie={}),this._checkLoaded(),void 0!==this.sourceCaches[F])throw new Error("There is already a source with this ID");if(!G.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(G).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(G.type)>=0&&this._validate(e.validateStyle.source,"sources."+F,G,null,ie))){this.map&&this.map._collectResourceTiming&&(G.collectResourceTiming=!0);var xe=this.sourceCaches[F]=new ze(F,G,this.dispatcher);xe.style=this,xe.setEventedParent(this,function(){return{isSourceLoaded:fe.loaded(),source:xe.serialize(),sourceId:F}}),xe.onAdd(this.map),this._changed=!0}},z.prototype.removeSource=function(F){if(this._checkLoaded(),void 0===this.sourceCaches[F])throw new Error("There is no source with this ID");for(var G in this._layers)if(this._layers[G].source===F)return this.fire(new e.ErrorEvent(new Error('Source "'+F+'" cannot be removed while layer "'+G+'" is using it.')));var ie=this.sourceCaches[F];delete this.sourceCaches[F],delete this._updatedSources[F],ie.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:F})),ie.setEventedParent(null),ie.clearTiles(),ie.onRemove&&ie.onRemove(this.map),this._changed=!0},z.prototype.setGeoJSONSourceData=function(F,G){this._checkLoaded(),this.sourceCaches[F].getSource().setData(G),this._changed=!0},z.prototype.getSource=function(F){return this.sourceCaches[F]&&this.sourceCaches[F].getSource()},z.prototype.addLayer=function(F,G,ie){void 0===ie&&(ie={}),this._checkLoaded();var fe=F.id;if(this.getLayer(fe))this.fire(new e.ErrorEvent(new Error('Layer with id "'+fe+'" already exists on this map')));else{var xe;if("custom"===F.type){if(rn(this,e.validateCustomStyleLayer(F)))return;xe=e.createStyleLayer(F)}else{if("object"==typeof F.source&&(this.addSource(fe,F.source),F=e.clone$1(F),F=e.extend(F,{source:fe})),this._validate(e.validateStyle.layer,"layers."+fe,F,{arrayIndex:-1},ie))return;xe=e.createStyleLayer(F),this._validateLayer(xe),xe.setEventedParent(this,{layer:{id:fe}}),this._serializedLayers[xe.id]=xe.serialize()}var ke=G?this._order.indexOf(G):this._order.length;if(G&&-1===ke)this.fire(new e.ErrorEvent(new Error('Layer with id "'+G+'" does not exist on this map.')));else{if(this._order.splice(ke,0,fe),this._layerOrderChanged=!0,this._layers[fe]=xe,this._removedLayers[fe]&&xe.source&&"custom"!==xe.type){var Ce=this._removedLayers[fe];delete this._removedLayers[fe],Ce.type!==xe.type?this._updatedSources[xe.source]="clear":(this._updatedSources[xe.source]="reload",this.sourceCaches[xe.source].pause())}this._updateLayer(xe),xe.onAdd&&xe.onAdd(this.map)}}},z.prototype.moveLayer=function(F,G){if(this._checkLoaded(),this._changed=!0,this._layers[F]){if(F!==G){var ie=this._order.indexOf(F);this._order.splice(ie,1);var fe=G?this._order.indexOf(G):this._order.length;G&&-1===fe?this.fire(new e.ErrorEvent(new Error('Layer with id "'+G+'" does not exist on this map.'))):(this._order.splice(fe,0,F),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be moved.")))},z.prototype.removeLayer=function(F){this._checkLoaded();var G=this._layers[F];if(G){G.setEventedParent(null);var ie=this._order.indexOf(F);this._order.splice(ie,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[F]=G,delete this._layers[F],delete this._serializedLayers[F],delete this._updatedLayers[F],delete this._updatedPaintProps[F],G.onRemove&&G.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be removed.")))},z.prototype.getLayer=function(F){return this._layers[F]},z.prototype.hasLayer=function(F){return F in this._layers},z.prototype.setLayerZoomRange=function(F,G,ie){this._checkLoaded();var fe=this.getLayer(F);fe?fe.minzoom===G&&fe.maxzoom===ie||(null!=G&&(fe.minzoom=G),null!=ie&&(fe.maxzoom=ie),this._updateLayer(fe)):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot have zoom extent.")))},z.prototype.setFilter=function(F,G,ie){void 0===ie&&(ie={}),this._checkLoaded();var fe=this.getLayer(F);if(fe){if(!e.deepEqual(fe.filter,G))return null==G?(fe.filter=void 0,void this._updateLayer(fe)):void(this._validate(e.validateStyle.filter,"layers."+fe.id+".filter",G,null,ie)||(fe.filter=e.clone$1(G),this._updateLayer(fe)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be filtered.")))},z.prototype.getFilter=function(F){return e.clone$1(this.getLayer(F).filter)},z.prototype.setLayoutProperty=function(F,G,ie,fe){void 0===fe&&(fe={}),this._checkLoaded();var xe=this.getLayer(F);xe?e.deepEqual(xe.getLayoutProperty(G),ie)||(xe.setLayoutProperty(G,ie,fe),this._updateLayer(xe)):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be styled.")))},z.prototype.getLayoutProperty=function(F,G){var ie=this.getLayer(F);if(ie)return ie.getLayoutProperty(G);this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style.")))},z.prototype.setPaintProperty=function(F,G,ie,fe){void 0===fe&&(fe={}),this._checkLoaded();var xe=this.getLayer(F);xe?e.deepEqual(xe.getPaintProperty(G),ie)||(xe.setPaintProperty(G,ie,fe)&&this._updateLayer(xe),this._changed=!0,this._updatedPaintProps[F]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be styled.")))},z.prototype.getPaintProperty=function(F,G){return this.getLayer(F).getPaintProperty(G)},z.prototype.setFeatureState=function(F,G){this._checkLoaded();var ie=F.source,fe=F.sourceLayer,xe=this.sourceCaches[ie];if(void 0!==xe){var ke=xe.getSource().type;"geojson"===ke&&fe?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==ke||fe?(void 0===F.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),xe.setFeatureState(fe,F.id,G)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ie+"' does not exist in the map's style.")))},z.prototype.removeFeatureState=function(F,G){this._checkLoaded();var ie=F.source,fe=this.sourceCaches[ie];if(void 0!==fe){var xe=fe.getSource().type,ke="vector"===xe?F.sourceLayer:void 0;"vector"!==xe||ke?G&&"string"!=typeof F.id&&"number"!=typeof F.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):fe.removeFeatureState(ke,F.id,G):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ie+"' does not exist in the map's style.")))},z.prototype.getFeatureState=function(F){this._checkLoaded();var G=F.source,ie=F.sourceLayer,fe=this.sourceCaches[G];if(void 0!==fe){if("vector"!==fe.getSource().type||ie)return void 0===F.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),fe.getFeatureState(ie,F.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+G+"' does not exist in the map's style.")))},z.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},z.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(F){return F.serialize()}),layers:this._serializeLayers(this._order)},function(F){return void 0!==F})},z.prototype._updateLayer=function(F){this._updatedLayers[F.id]=!0,F.source&&!this._updatedSources[F.source]&&"raster"!==this.sourceCaches[F.source].getSource().type&&(this._updatedSources[F.source]="reload",this.sourceCaches[F.source].pause()),this._changed=!0},z.prototype._flattenAndSortRenderedFeatures=function(F){for(var G=this,ie=function(yn){return"fill-extrusion"===G._layers[yn].type},fe={},xe=[],ke=this._order.length-1;ke>=0;ke--){var Ce=this._order[ke];if(ie(Ce)){fe[Ce]=ke;for(var Ue=0,$e=F;Ue<$e.length;Ue+=1){var at=$e[Ue][Ce];if(at)for(var kt=0,Pt=at;kt<Pt.length;kt+=1)xe.push(Pt[kt])}}}xe.sort(function(yn,pn){return pn.intersectionZ-yn.intersectionZ});for(var Et=[],wt=this._order.length-1;wt>=0;wt--){var jt=this._order[wt];if(ie(jt))for(var Nt=xe.length-1;Nt>=0;Nt--){var Gt=xe[Nt].feature;if(fe[Gt.layer.id]<wt)break;Et.push(Gt),xe.pop()}else for(var lr=0,yr=F;lr<yr.length;lr+=1){var Or=yr[lr][jt];if(Or)for(var Cr=0,tn=Or;Cr<tn.length;Cr+=1)Et.push(tn[Cr].feature)}}return Et},z.prototype.queryRenderedFeatures=function(F,G,ie){G&&G.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",G.filter,null,G);var fe={};if(G&&G.layers){if(!Array.isArray(G.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var xe=0,ke=G.layers;xe<ke.length;xe+=1){var Ce=ke[xe],Ue=this._layers[Ce];if(!Ue)return this.fire(new e.ErrorEvent(new Error("The layer '"+Ce+"' does not exist in the map's style and cannot be queried for features."))),[];fe[Ue.source]=!0}}var $e=[];for(var at in G.availableImages=this._availableImages,this.sourceCaches)G.layers&&!fe[at]||$e.push(V(this.sourceCaches[at],this._layers,this._serializedLayers,F,G,ie));return this.placement&&$e.push(function(kt,Pt,St,Et,wt,jt,Nt){for(var Gt={},lr=jt.queryRenderedSymbols(Et),yr=[],Or=0,Cr=Object.keys(lr).map(Number);Or<Cr.length;Or+=1)yr.push(Nt[Cr[Or]]);yr.sort(ee);for(var en=function(){var gi=pn[yn],Jr=gi.featureIndex.lookupSymbolFeatures(lr[gi.bucketInstanceId],Pt,gi.bucketIndex,gi.sourceLayerIndex,wt.filter,wt.layers,wt.availableImages,kt);for(var In in Jr){var ri=Gt[In]=Gt[In]||[],Jn=Jr[In];Jn.sort(function(ai,Mi){var wi=gi.featureSortOrder;if(wi){var Ri=wi.indexOf(ai.featureIndex);return wi.indexOf(Mi.featureIndex)-Ri}return Mi.featureIndex-ai.featureIndex});for(var ui=0,yi=Jn;ui<yi.length;ui+=1)ri.push(yi[ui])}},yn=0,pn=yr;yn<pn.length;yn+=1)en();var Yn=function(gi){Gt[gi].forEach(function(Jr){var In=Jr.feature,Jn=St[kt[gi].source].getFeatureState(In.layer["source-layer"],In.id);In.source=In.layer.source,In.layer["source-layer"]&&(In.sourceLayer=In.layer["source-layer"]),In.state=Jn})};for(var ti in Gt)Yn(ti);return Gt}(this._layers,this._serializedLayers,this.sourceCaches,F,G,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures($e)},z.prototype.querySourceFeatures=function(F,G){G&&G.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",G.filter,null,G);var ie=this.sourceCaches[F];return ie?function(fe,xe){for(var ke=fe.getRenderableIds().map(function(Pt){return fe.getTileByID(Pt)}),Ce=[],Ue={},$e=0;$e<ke.length;$e++){var at=ke[$e],kt=at.tileID.canonical.key;Ue[kt]||(Ue[kt]=!0,at.querySourceFeatures(Ce,xe))}return Ce}(ie,G):[]},z.prototype.addSourceType=function(F,G,ie){return z.getSourceType(F)?ie(new Error('A source type called "'+F+'" already exists.')):(z.setSourceType(F,G),G.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:F,url:G.workerSourceURL},ie):ie(null,null))},z.prototype.getLight=function(){return this.light.getLight()},z.prototype.setLight=function(F,G){void 0===G&&(G={}),this._checkLoaded();var ie=this.light.getLight(),fe=!1;for(var xe in F)if(!e.deepEqual(F[xe],ie[xe])){fe=!0;break}if(fe){var ke={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(F,G),this.light.updateTransitions(ke)}},z.prototype._validate=function(F,G,ie,fe,xe){return void 0===xe&&(xe={}),(!xe||!1!==xe.validate)&&rn(this,F.call(e.validateStyle,e.extend({key:G,style:this.serialize(),value:ie,styleSpec:e.styleSpec},fe)))},z.prototype._remove=function(){for(var F in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[F].setEventedParent(null);for(var G in this.sourceCaches)this.sourceCaches[G].clearTiles(),this.sourceCaches[G].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},z.prototype._clearSource=function(F){this.sourceCaches[F].clearTiles()},z.prototype._reloadSource=function(F){this.sourceCaches[F].resume(),this.sourceCaches[F].reload()},z.prototype._updateSources=function(F){for(var G in this.sourceCaches)this.sourceCaches[G].update(F)},z.prototype._generateCollisionBoxes=function(){for(var F in this.sourceCaches)this._reloadSource(F)},z.prototype._updatePlacement=function(F,G,ie,fe,xe){void 0===xe&&(xe=!1);for(var ke=!1,Ce=!1,Ue={},$e=0,at=this._order;$e<at.length;$e+=1){var Pt=this._layers[at[$e]];if("symbol"===Pt.type){if(!Ue[Pt.source]){var St=this.sourceCaches[Pt.source];Ue[Pt.source]=St.getRenderableIds(!0).map(function(lr){return St.getTileByID(lr)}).sort(function(lr,yr){return yr.tileID.overscaledZ-lr.tileID.overscaledZ||(lr.tileID.isLessThan(yr.tileID)?-1:1)})}var Et=this.crossTileSymbolIndex.addLayer(Pt,Ue[Pt.source],F.center.lng);ke=ke||Et}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((xe=xe||this._layerOrderChanged||0===ie)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),F.zoom))&&(this.pauseablePlacement=new _r(F,this._order,xe,G,ie,fe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ue),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Ce=!0),ke&&this.pauseablePlacement.placement.setStale()),Ce||ke)for(var wt=0,jt=this._order;wt<jt.length;wt+=1){var Gt=this._layers[jt[wt]];"symbol"===Gt.type&&this.placement.updateLayerOpacities(Gt,Ue[Gt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},z.prototype._releaseSymbolFadeTiles=function(){for(var F in this.sourceCaches)this.sourceCaches[F].releaseSymbolFadeTiles()},z.prototype.getImages=function(F,G,ie){this.imageManager.getImages(G.icons,ie),this._updateTilesForChangedImages();var fe=this.sourceCaches[G.source];fe&&fe.setDependencies(G.tileID.key,G.type,G.icons)},z.prototype.getGlyphs=function(F,G,ie){this.glyphManager.getGlyphs(G.stacks,ie)},z.prototype.getResource=function(F,G,ie){return e.makeRequest(G,ie)},z}(e.Evented);En.getSourceType=function(L){return U[L]},En.setSourceType=function(L,z){U[L]=z},En.registerForPluginStateChange=e.registerForPluginStateChange;var Dn=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Bn=Wi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Kn=Wi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ci=Wi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ti=Wi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Pn=Wi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ei=Wi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Qn=Wi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Bi=Wi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),ma=Wi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Sa=Wi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Xa=Wi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Ji=Wi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),qi=Wi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Ha=Wi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Ni=Wi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Ja=Wi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),ro=Wi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ma=Wi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Na=Wi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),eo=Wi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),no=Wi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Ea=Wi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),na=Wi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ga=Wi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Jo=Wi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),ms=Wi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Wi(L,z){var F=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,G={};return{fragmentSource:L=L.replace(F,function(ie,fe,xe,ke,Ce){return G[Ce]=!0,"define"===fe?"\n#ifndef HAS_UNIFORM_u_"+Ce+"\nvarying "+xe+" "+ke+" "+Ce+";\n#else\nuniform "+xe+" "+ke+" u_"+Ce+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Ce+"\n    "+xe+" "+ke+" "+Ce+" = u_"+Ce+";\n#endif\n"}),vertexSource:z=z.replace(F,function(ie,fe,xe,ke,Ce){var Ue="float"===ke?"vec2":"vec4",$e=Ce.match(/color/)?"color":Ue;return G[Ce]?"define"===fe?"\n#ifndef HAS_UNIFORM_u_"+Ce+"\nuniform lowp float u_"+Ce+"_t;\nattribute "+xe+" "+Ue+" a_"+Ce+";\nvarying "+xe+" "+ke+" "+Ce+";\n#else\nuniform "+xe+" "+ke+" u_"+Ce+";\n#endif\n":"vec4"===$e?"\n#ifndef HAS_UNIFORM_u_"+Ce+"\n    "+Ce+" = a_"+Ce+";\n#else\n    "+xe+" "+ke+" "+Ce+" = u_"+Ce+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Ce+"\n    "+Ce+" = unpack_mix_"+$e+"(a_"+Ce+", u_"+Ce+"_t);\n#else\n    "+xe+" "+ke+" "+Ce+" = u_"+Ce+";\n#endif\n":"define"===fe?"\n#ifndef HAS_UNIFORM_u_"+Ce+"\nuniform lowp float u_"+Ce+"_t;\nattribute "+xe+" "+Ue+" a_"+Ce+";\n#else\nuniform "+xe+" "+ke+" u_"+Ce+";\n#endif\n":"vec4"===$e?"\n#ifndef HAS_UNIFORM_u_"+Ce+"\n    "+xe+" "+ke+" "+Ce+" = a_"+Ce+";\n#else\n    "+xe+" "+ke+" "+Ce+" = u_"+Ce+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Ce+"\n    "+xe+" "+ke+" "+Ce+" = unpack_mix_"+$e+"(a_"+Ce+", u_"+Ce+"_t);\n#else\n    "+xe+" "+ke+" "+Ce+" = u_"+Ce+";\n#endif\n"})}}var Ko=Object.freeze({__proto__:null,prelude:Bn,background:Kn,backgroundPattern:Ci,circle:Ti,clippingMask:Pn,heatmap:ei,heatmapTexture:Qn,collisionBox:Bi,collisionCircle:ma,debug:Sa,fill:Xa,fillOutline:Ji,fillOutlinePattern:qi,fillPattern:Ha,fillExtrusion:Ni,fillExtrusionPattern:Ja,hillshadePrepare:ro,hillshade:Ma,line:Na,lineGradient:eo,linePattern:no,lineSDF:Ea,raster:na,symbolIcon:Ga,symbolSDF:Jo,symbolTextAndIcon:ms}),Uo=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Uo.prototype.bind=function(L,z,F,G,ie,fe,xe,ke){this.context=L;for(var Ce=this.boundPaintVertexBuffers.length!==G.length,Ue=0;!Ce&&Ue<G.length;Ue++)this.boundPaintVertexBuffers[Ue]!==G[Ue]&&(Ce=!0);L.extVertexArrayObject&&this.vao&&this.boundProgram===z&&this.boundLayoutVertexBuffer===F&&!Ce&&this.boundIndexBuffer===ie&&this.boundVertexOffset===fe&&this.boundDynamicVertexBuffer===xe&&this.boundDynamicVertexBuffer2===ke?(L.bindVertexArrayOES.set(this.vao),xe&&xe.bind(),ie&&ie.dynamicDraw&&ie.bind(),ke&&ke.bind()):this.freshBind(z,F,G,ie,fe,xe,ke)},Uo.prototype.freshBind=function(L,z,F,G,ie,fe,xe){var ke,Ce=L.numAttributes,Ue=this.context,$e=Ue.gl;if(Ue.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ue.extVertexArrayObject.createVertexArrayOES(),Ue.bindVertexArrayOES.set(this.vao),ke=0,this.boundProgram=L,this.boundLayoutVertexBuffer=z,this.boundPaintVertexBuffers=F,this.boundIndexBuffer=G,this.boundVertexOffset=ie,this.boundDynamicVertexBuffer=fe,this.boundDynamicVertexBuffer2=xe;else{ke=Ue.currentNumAttributes||0;for(var at=Ce;at<ke;at++)$e.disableVertexAttribArray(at)}z.enableAttributes($e,L);for(var kt=0,Pt=F;kt<Pt.length;kt+=1)Pt[kt].enableAttributes($e,L);fe&&fe.enableAttributes($e,L),xe&&xe.enableAttributes($e,L),z.bind(),z.setVertexAttribPointers($e,L,ie);for(var St=0,Et=F;St<Et.length;St+=1){var wt=Et[St];wt.bind(),wt.setVertexAttribPointers($e,L,ie)}fe&&(fe.bind(),fe.setVertexAttribPointers($e,L,ie)),G&&G.bind(),xe&&(xe.bind(),xe.setVertexAttribPointers($e,L,ie)),Ue.currentNumAttributes=Ce},Uo.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var $o=function(L,z,F,G,ie){var fe=L.gl;this.program=fe.createProgram();var xe=F?F.defines():[];ie&&xe.push("#define OVERDRAW_INSPECTOR;");var ke=xe.concat(Bn.fragmentSource,z.fragmentSource).join("\n"),Ce=xe.concat(Bn.vertexSource,z.vertexSource).join("\n"),Ue=fe.createShader(fe.FRAGMENT_SHADER);if(fe.isContextLost())this.failedToCreate=!0;else{fe.shaderSource(Ue,ke),fe.compileShader(Ue),fe.attachShader(this.program,Ue);var $e=fe.createShader(fe.VERTEX_SHADER);if(fe.isContextLost())this.failedToCreate=!0;else{fe.shaderSource($e,Ce),fe.compileShader($e),fe.attachShader(this.program,$e);for(var at=F?F.layoutAttributes:[],kt=0;kt<at.length;kt++)fe.bindAttribLocation(this.program,kt,at[kt].name);fe.linkProgram(this.program),fe.deleteShader($e),fe.deleteShader(Ue),this.numAttributes=fe.getProgramParameter(this.program,fe.ACTIVE_ATTRIBUTES),this.attributes={};for(var Pt={},St=0;St<this.numAttributes;St++){var Et=fe.getActiveAttrib(this.program,St);Et&&(this.attributes[Et.name]=fe.getAttribLocation(this.program,Et.name))}for(var wt=fe.getProgramParameter(this.program,fe.ACTIVE_UNIFORMS),jt=0;jt<wt;jt++){var Nt=fe.getActiveUniform(this.program,jt);Nt&&(Pt[Nt.name]=fe.getUniformLocation(this.program,Nt.name))}this.fixedUniforms=G(L,Pt),this.binderUniforms=F?F.getUniforms(L,Pt):[]}}};function os(L,z,F){var G=1/wn(F,1,z.transform.tileZoom),ie=Math.pow(2,F.tileID.overscaledZ),fe=F.tileSize*Math.pow(2,z.transform.tileZoom)/ie,xe=fe*(F.tileID.canonical.x+F.tileID.wrap*ie),ke=fe*F.tileID.canonical.y;return{u_image:0,u_texsize:F.imageAtlasTexture.size,u_scale:[G,L.fromScale,L.toScale],u_fade:L.t,u_pixel_coord_upper:[xe>>16,ke>>16],u_pixel_coord_lower:[65535&xe,65535&ke]}}$o.prototype.draw=function(L,z,F,G,ie,fe,xe,ke,Ce,Ue,$e,at,kt,Pt,St,Et){var wt,jt=L.gl;if(!this.failedToCreate){for(var Nt in L.program.set(this.program),L.setDepthMode(F),L.setStencilMode(G),L.setColorMode(ie),L.setCullFace(fe),this.fixedUniforms)this.fixedUniforms[Nt].set(xe[Nt]);Pt&&Pt.setUniforms(L,this.binderUniforms,at,{zoom:kt});for(var Gt=(wt={},wt[jt.LINES]=2,wt[jt.TRIANGLES]=3,wt[jt.LINE_STRIP]=1,wt)[z],lr=0,yr=$e.get();lr<yr.length;lr+=1){var Or=yr[lr],Cr=Or.vaos||(Or.vaos={});(Cr[ke]||(Cr[ke]=new Uo)).bind(L,this,Ce,Pt?Pt.getPaintVertexBuffers():[],Ue,Or.vertexOffset,St,Et),jt.drawElements(z,Or.primitiveLength*Gt,jt.UNSIGNED_SHORT,Or.primitiveOffset*Gt*2)}}};var ss=function(L,z,F,G){var ie=z.style.light,fe=ie.properties.get("position"),xe=[fe.x,fe.y,fe.z],ke=e.create$1();"viewport"===ie.properties.get("anchor")&&e.fromRotation(ke,-z.transform.angle),e.transformMat3(xe,xe,ke);var Ce=ie.properties.get("color");return{u_matrix:L,u_lightpos:xe,u_lightintensity:ie.properties.get("intensity"),u_lightcolor:[Ce.r,Ce.g,Ce.b],u_vertical_gradient:+F,u_opacity:G}},ls=function(L,z,F,G,ie,fe,xe){return e.extend(ss(L,z,F,G),os(fe,z,xe),{u_height_factor:-Math.pow(2,ie.overscaledZ)/xe.tileSize/8})},yo=function(L){return{u_matrix:L}},ho=function(L,z,F,G){return e.extend(yo(L),os(F,z,G))},Lo=function(L,z){return{u_matrix:L,u_world:z}},Mo=function(L,z,F,G,ie){return e.extend(ho(L,z,F,G),{u_world:ie})},Po=function(L,z,F,G){var ie,fe,xe=L.transform;if("map"===G.paint.get("circle-pitch-alignment")){var ke=wn(F,1,xe.zoom);ie=!0,fe=[ke,ke]}else ie=!1,fe=xe.pixelsToGLUnits;return{u_camera_to_center_distance:xe.cameraToCenterDistance,u_scale_with_map:+("map"===G.paint.get("circle-pitch-scale")),u_matrix:L.translatePosMatrix(z.posMatrix,F,G.paint.get("circle-translate"),G.paint.get("circle-translate-anchor")),u_pitch_with_map:+ie,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:fe}},Ro=function(L,z,F){var G=wn(F,1,z.zoom),ie=Math.pow(2,z.zoom-F.tileID.overscaledZ),fe=F.tileID.overscaleFactor();return{u_matrix:L,u_camera_to_center_distance:z.cameraToCenterDistance,u_pixels_to_tile_units:G,u_extrude_scale:[z.pixelsToGLUnits[0]/(G*ie),z.pixelsToGLUnits[1]/(G*ie)],u_overscale_factor:fe}},po=function(L,z,F){return{u_matrix:L,u_inv_matrix:z,u_camera_to_center_distance:F.cameraToCenterDistance,u_viewport_size:[F.width,F.height]}},cs=function(L,z,F){return void 0===F&&(F=1),{u_matrix:L,u_color:z,u_overlay:0,u_overlay_scale:F}},io=function(L){return{u_matrix:L}},So=function(L,z,F,G){return{u_matrix:L,u_extrude_scale:wn(z,1,F),u_intensity:G}};function Qo(L,z){var F=Math.pow(2,z.canonical.z),G=z.canonical.y;return[new e.MercatorCoordinate(0,G/F).toLngLat().lat,new e.MercatorCoordinate(0,(G+1)/F).toLngLat().lat]}var mo=function(L,z,F){var G=L.transform;return{u_matrix:ut(L,z,F),u_ratio:1/wn(z,1,G.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/G.pixelsToGLUnits[0],1/G.pixelsToGLUnits[1]]}},Zi=function(L,z,F){return e.extend(mo(L,z,F),{u_image:0})},je=function(L,z,F,G){var ie=L.transform,fe=rt(z,ie);return{u_matrix:ut(L,z,F),u_texsize:z.imageAtlasTexture.size,u_ratio:1/wn(z,1,ie.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[fe,G.fromScale,G.toScale],u_fade:G.t,u_units_to_pixels:[1/ie.pixelsToGLUnits[0],1/ie.pixelsToGLUnits[1]]}},We=function(L,z,F,G,ie){var xe=L.lineAtlas,ke=rt(z,L.transform),Ce="round"===F.layout.get("line-cap"),Ue=xe.getDash(G.from,Ce),$e=xe.getDash(G.to,Ce),at=Ue.width*ie.fromScale,kt=$e.width*ie.toScale;return e.extend(mo(L,z,F),{u_patternscale_a:[ke/at,-Ue.height/2],u_patternscale_b:[ke/kt,-$e.height/2],u_sdfgamma:xe.width/(256*Math.min(at,kt)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ue.y,u_tex_y_b:$e.y,u_mix:ie.t})};function rt(L,z){return 1/wn(L,1,z.tileZoom)}function ut(L,z,F){return L.translatePosMatrix(z.tileID.posMatrix,z,F.paint.get("line-translate"),F.paint.get("line-translate-anchor"))}var yt=function(L,z,F,G,ie){return{u_matrix:L,u_tl_parent:z,u_scale_parent:F,u_buffer_scale:1,u_fade_t:G.mix,u_opacity:G.opacity*ie.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ie.paint.get("raster-brightness-min"),u_brightness_high:ie.paint.get("raster-brightness-max"),u_saturation_factor:(xe=ie.paint.get("raster-saturation"),xe>0?1-1/(1.001-xe):-xe),u_contrast_factor:(fe=ie.paint.get("raster-contrast"),fe>0?1/(1-fe):1+fe),u_spin_weights:gt(ie.paint.get("raster-hue-rotate"))};var fe,xe};function gt(L){L*=Math.PI/180;var z=Math.sin(L),F=Math.cos(L);return[(2*F+1)/3,(-Math.sqrt(3)*z-F+1)/3,(Math.sqrt(3)*z-F+1)/3]}var Lt,er=function(L,z,F,G,ie,fe,xe,ke,Ce,Ue){var $e=ie.transform;return{u_is_size_zoom_constant:+("constant"===L||"source"===L),u_is_size_feature_constant:+("constant"===L||"camera"===L),u_size_t:z?z.uSizeT:0,u_size:z?z.uSize:0,u_camera_to_center_distance:$e.cameraToCenterDistance,u_pitch:$e.pitch/360*2*Math.PI,u_rotate_symbol:+F,u_aspect_ratio:$e.width/$e.height,u_fade_change:ie.options.fadeDuration?ie.symbolFadeChange:1,u_matrix:fe,u_label_plane_matrix:xe,u_coord_matrix:ke,u_is_text:+Ce,u_pitch_with_map:+G,u_texsize:Ue,u_texture:0}},nr=function(L,z,F,G,ie,fe,xe,ke,Ce,Ue,$e){var at=ie.transform;return e.extend(er(L,z,F,G,ie,fe,xe,ke,Ce,Ue),{u_gamma_scale:G?Math.cos(at._pitch)*at.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+$e})},Kt=function(L,z,F,G,ie,fe,xe,ke,Ce,Ue){return e.extend(nr(L,z,F,G,ie,fe,xe,ke,!0,Ce,!0),{u_texsize_icon:Ue,u_texture_icon:1})},ir=function(L,z,F){return{u_matrix:L,u_opacity:z,u_color:F}},vr=function(L,z,F,G,ie,fe){return e.extend((ke=fe,Ue=ie,$e=(Ce=F).imageManager.getPattern((xe=G).from.toString()),at=Ce.imageManager.getPattern(xe.to.toString()),Pt=(kt=Ce.imageManager.getPixelSize()).width,St=kt.height,Et=Math.pow(2,Ue.tileID.overscaledZ),jt=(wt=Ue.tileSize*Math.pow(2,Ce.transform.tileZoom)/Et)*(Ue.tileID.canonical.x+Ue.tileID.wrap*Et),Nt=wt*Ue.tileID.canonical.y,{u_image:0,u_pattern_tl_a:$e.tl,u_pattern_br_a:$e.br,u_pattern_tl_b:at.tl,u_pattern_br_b:at.br,u_texsize:[Pt,St],u_mix:ke.t,u_pattern_size_a:$e.displaySize,u_pattern_size_b:at.displaySize,u_scale_a:ke.fromScale,u_scale_b:ke.toScale,u_tile_units_to_pixels:1/wn(Ue,1,Ce.transform.tileZoom),u_pixel_coord_upper:[jt>>16,Nt>>16],u_pixel_coord_lower:[65535&jt,65535&Nt]}),{u_matrix:L,u_opacity:z});var xe,ke,Ce,Ue,$e,at,kt,Pt,St,Et,wt,jt,Nt},wr={fillExtrusion:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_lightpos:new e.Uniform3f(L,z.u_lightpos),u_lightintensity:new e.Uniform1f(L,z.u_lightintensity),u_lightcolor:new e.Uniform3f(L,z.u_lightcolor),u_vertical_gradient:new e.Uniform1f(L,z.u_vertical_gradient),u_opacity:new e.Uniform1f(L,z.u_opacity)}},fillExtrusionPattern:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_lightpos:new e.Uniform3f(L,z.u_lightpos),u_lightintensity:new e.Uniform1f(L,z.u_lightintensity),u_lightcolor:new e.Uniform3f(L,z.u_lightcolor),u_vertical_gradient:new e.Uniform1f(L,z.u_vertical_gradient),u_height_factor:new e.Uniform1f(L,z.u_height_factor),u_image:new e.Uniform1i(L,z.u_image),u_texsize:new e.Uniform2f(L,z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(L,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(L,z.u_pixel_coord_lower),u_scale:new e.Uniform3f(L,z.u_scale),u_fade:new e.Uniform1f(L,z.u_fade),u_opacity:new e.Uniform1f(L,z.u_opacity)}},fill:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix)}},fillPattern:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_image:new e.Uniform1i(L,z.u_image),u_texsize:new e.Uniform2f(L,z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(L,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(L,z.u_pixel_coord_lower),u_scale:new e.Uniform3f(L,z.u_scale),u_fade:new e.Uniform1f(L,z.u_fade)}},fillOutline:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_world:new e.Uniform2f(L,z.u_world)}},fillOutlinePattern:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_world:new e.Uniform2f(L,z.u_world),u_image:new e.Uniform1i(L,z.u_image),u_texsize:new e.Uniform2f(L,z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(L,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(L,z.u_pixel_coord_lower),u_scale:new e.Uniform3f(L,z.u_scale),u_fade:new e.Uniform1f(L,z.u_fade)}},circle:function(L,z){return{u_camera_to_center_distance:new e.Uniform1f(L,z.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(L,z.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(L,z.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(L,z.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(L,z.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(L,z.u_matrix)}},collisionBox:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_camera_to_center_distance:new e.Uniform1f(L,z.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(L,z.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(L,z.u_extrude_scale),u_overscale_factor:new e.Uniform1f(L,z.u_overscale_factor)}},collisionCircle:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_inv_matrix:new e.UniformMatrix4f(L,z.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(L,z.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(L,z.u_viewport_size)}},debug:function(L,z){return{u_color:new e.UniformColor(L,z.u_color),u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_overlay:new e.Uniform1i(L,z.u_overlay),u_overlay_scale:new e.Uniform1f(L,z.u_overlay_scale)}},clippingMask:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix)}},heatmap:function(L,z){return{u_extrude_scale:new e.Uniform1f(L,z.u_extrude_scale),u_intensity:new e.Uniform1f(L,z.u_intensity),u_matrix:new e.UniformMatrix4f(L,z.u_matrix)}},heatmapTexture:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_world:new e.Uniform2f(L,z.u_world),u_image:new e.Uniform1i(L,z.u_image),u_color_ramp:new e.Uniform1i(L,z.u_color_ramp),u_opacity:new e.Uniform1f(L,z.u_opacity)}},hillshade:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_image:new e.Uniform1i(L,z.u_image),u_latrange:new e.Uniform2f(L,z.u_latrange),u_light:new e.Uniform2f(L,z.u_light),u_shadow:new e.UniformColor(L,z.u_shadow),u_highlight:new e.UniformColor(L,z.u_highlight),u_accent:new e.UniformColor(L,z.u_accent)}},hillshadePrepare:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_image:new e.Uniform1i(L,z.u_image),u_dimension:new e.Uniform2f(L,z.u_dimension),u_zoom:new e.Uniform1f(L,z.u_zoom),u_maxzoom:new e.Uniform1f(L,z.u_maxzoom),u_unpack:new e.Uniform4f(L,z.u_unpack)}},line:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_ratio:new e.Uniform1f(L,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(L,z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(L,z.u_units_to_pixels)}},lineGradient:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_ratio:new e.Uniform1f(L,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(L,z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(L,z.u_units_to_pixels),u_image:new e.Uniform1i(L,z.u_image)}},linePattern:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_texsize:new e.Uniform2f(L,z.u_texsize),u_ratio:new e.Uniform1f(L,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(L,z.u_device_pixel_ratio),u_image:new e.Uniform1i(L,z.u_image),u_units_to_pixels:new e.Uniform2f(L,z.u_units_to_pixels),u_scale:new e.Uniform3f(L,z.u_scale),u_fade:new e.Uniform1f(L,z.u_fade)}},lineSDF:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_ratio:new e.Uniform1f(L,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(L,z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(L,z.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(L,z.u_patternscale_a),u_patternscale_b:new e.Uniform2f(L,z.u_patternscale_b),u_sdfgamma:new e.Uniform1f(L,z.u_sdfgamma),u_image:new e.Uniform1i(L,z.u_image),u_tex_y_a:new e.Uniform1f(L,z.u_tex_y_a),u_tex_y_b:new e.Uniform1f(L,z.u_tex_y_b),u_mix:new e.Uniform1f(L,z.u_mix)}},raster:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_tl_parent:new e.Uniform2f(L,z.u_tl_parent),u_scale_parent:new e.Uniform1f(L,z.u_scale_parent),u_buffer_scale:new e.Uniform1f(L,z.u_buffer_scale),u_fade_t:new e.Uniform1f(L,z.u_fade_t),u_opacity:new e.Uniform1f(L,z.u_opacity),u_image0:new e.Uniform1i(L,z.u_image0),u_image1:new e.Uniform1i(L,z.u_image1),u_brightness_low:new e.Uniform1f(L,z.u_brightness_low),u_brightness_high:new e.Uniform1f(L,z.u_brightness_high),u_saturation_factor:new e.Uniform1f(L,z.u_saturation_factor),u_contrast_factor:new e.Uniform1f(L,z.u_contrast_factor),u_spin_weights:new e.Uniform3f(L,z.u_spin_weights)}},symbolIcon:function(L,z){return{u_is_size_zoom_constant:new e.Uniform1i(L,z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(L,z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(L,z.u_size_t),u_size:new e.Uniform1f(L,z.u_size),u_camera_to_center_distance:new e.Uniform1f(L,z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(L,z.u_pitch),u_rotate_symbol:new e.Uniform1i(L,z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(L,z.u_aspect_ratio),u_fade_change:new e.Uniform1f(L,z.u_fade_change),u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(L,z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(L,z.u_coord_matrix),u_is_text:new e.Uniform1i(L,z.u_is_text),u_pitch_with_map:new e.Uniform1i(L,z.u_pitch_with_map),u_texsize:new e.Uniform2f(L,z.u_texsize),u_texture:new e.Uniform1i(L,z.u_texture)}},symbolSDF:function(L,z){return{u_is_size_zoom_constant:new e.Uniform1i(L,z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(L,z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(L,z.u_size_t),u_size:new e.Uniform1f(L,z.u_size),u_camera_to_center_distance:new e.Uniform1f(L,z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(L,z.u_pitch),u_rotate_symbol:new e.Uniform1i(L,z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(L,z.u_aspect_ratio),u_fade_change:new e.Uniform1f(L,z.u_fade_change),u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(L,z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(L,z.u_coord_matrix),u_is_text:new e.Uniform1i(L,z.u_is_text),u_pitch_with_map:new e.Uniform1i(L,z.u_pitch_with_map),u_texsize:new e.Uniform2f(L,z.u_texsize),u_texture:new e.Uniform1i(L,z.u_texture),u_gamma_scale:new e.Uniform1f(L,z.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(L,z.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(L,z.u_is_halo)}},symbolTextAndIcon:function(L,z){return{u_is_size_zoom_constant:new e.Uniform1i(L,z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(L,z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(L,z.u_size_t),u_size:new e.Uniform1f(L,z.u_size),u_camera_to_center_distance:new e.Uniform1f(L,z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(L,z.u_pitch),u_rotate_symbol:new e.Uniform1i(L,z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(L,z.u_aspect_ratio),u_fade_change:new e.Uniform1f(L,z.u_fade_change),u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(L,z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(L,z.u_coord_matrix),u_is_text:new e.Uniform1i(L,z.u_is_text),u_pitch_with_map:new e.Uniform1i(L,z.u_pitch_with_map),u_texsize:new e.Uniform2f(L,z.u_texsize),u_texsize_icon:new e.Uniform2f(L,z.u_texsize_icon),u_texture:new e.Uniform1i(L,z.u_texture),u_texture_icon:new e.Uniform1i(L,z.u_texture_icon),u_gamma_scale:new e.Uniform1f(L,z.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(L,z.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(L,z.u_is_halo)}},background:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_opacity:new e.Uniform1f(L,z.u_opacity),u_color:new e.UniformColor(L,z.u_color)}},backgroundPattern:function(L,z){return{u_matrix:new e.UniformMatrix4f(L,z.u_matrix),u_opacity:new e.Uniform1f(L,z.u_opacity),u_image:new e.Uniform1i(L,z.u_image),u_pattern_tl_a:new e.Uniform2f(L,z.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(L,z.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(L,z.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(L,z.u_pattern_br_b),u_texsize:new e.Uniform2f(L,z.u_texsize),u_mix:new e.Uniform1f(L,z.u_mix),u_pattern_size_a:new e.Uniform2f(L,z.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(L,z.u_pattern_size_b),u_scale_a:new e.Uniform1f(L,z.u_scale_a),u_scale_b:new e.Uniform1f(L,z.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(L,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(L,z.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(L,z.u_tile_units_to_pixels)}}};function Ar(L,z,F,G,ie,fe,xe){for(var ke=L.context,Ce=ke.gl,Ue=L.useProgram("collisionBox"),$e=[],at=0,kt=0,Pt=0;Pt<G.length;Pt++){var St=G[Pt],Et=z.getTile(St),wt=Et.getBucket(F);if(wt){var jt=St.posMatrix;0===ie[0]&&0===ie[1]||(jt=L.translatePosMatrix(St.posMatrix,Et,ie,fe));var Nt=xe?wt.textCollisionBox:wt.iconCollisionBox,Gt=wt.collisionCircleArray;if(Gt.length>0){var lr=e.create(),yr=jt;e.mul(lr,wt.placementInvProjMatrix,L.transform.glCoordMatrix),e.mul(lr,lr,wt.placementViewportMatrix),$e.push({circleArray:Gt,circleOffset:kt,transform:yr,invTransform:lr}),kt=at+=Gt.length/4}Nt&&Ue.draw(ke,Ce.LINES,Ft.disabled,Be.disabled,L.colorModeForRenderPass(),he.disabled,Ro(jt,L.transform,Et),F.id,Nt.layoutVertexBuffer,Nt.indexBuffer,Nt.segments,null,L.transform.zoom,null,null,Nt.collisionVertexBuffer)}}if(xe&&$e.length){var Or=L.useProgram("collisionCircle"),Cr=new e.StructArrayLayout2f1f2i16;Cr.resize(4*at),Cr._trim();for(var tn=0,en=0,yn=$e;en<yn.length;en+=1)for(var pn=yn[en],Yn=0;Yn<pn.circleArray.length/4;Yn++){var ti=4*Yn,gi=pn.circleArray[ti+0],Jr=pn.circleArray[ti+1],In=pn.circleArray[ti+2],ri=pn.circleArray[ti+3];Cr.emplace(tn++,gi,Jr,In,ri,0),Cr.emplace(tn++,gi,Jr,In,ri,1),Cr.emplace(tn++,gi,Jr,In,ri,2),Cr.emplace(tn++,gi,Jr,In,ri,3)}(!Lt||Lt.length<2*at)&&(Lt=function(wi){var Ri=2*wi,Si=new e.StructArrayLayout3ui6;Si.resize(Ri),Si._trim();for(var Fi=0;Fi<Ri;Fi++){var Xi=6*Fi;Si.uint16[Xi+0]=4*Fi+0,Si.uint16[Xi+1]=4*Fi+1,Si.uint16[Xi+2]=4*Fi+2,Si.uint16[Xi+3]=4*Fi+2,Si.uint16[Xi+4]=4*Fi+3,Si.uint16[Xi+5]=4*Fi+0}return Si}(at));for(var Jn=ke.createIndexBuffer(Lt,!0),ui=ke.createVertexBuffer(Cr,e.collisionCircleLayout.members,!0),yi=0,Oi=$e;yi<Oi.length;yi+=1){var ai=Oi[yi],Mi=po(ai.transform,ai.invTransform,L.transform);Or.draw(ke,Ce.TRIANGLES,Ft.disabled,Be.disabled,L.colorModeForRenderPass(),he.disabled,Mi,F.id,ui,Jn,e.SegmentVector.simpleSegment(0,2*ai.circleOffset,ai.circleArray.length,ai.circleArray.length/2),null,L.transform.zoom,null,null,null)}ui.destroy(),Jn.destroy()}}var Nr=e.identity(new Float32Array(16));function un(L,z,F,G,ie,fe){var xe=e.getAnchorAlignment(L),ke=-(xe.horizontalAlign-.5)*z,Ce=-(xe.verticalAlign-.5)*F,Ue=e.evaluateVariableOffset(L,G);return new e.Point((ke/ie+Ue[0])*fe,(Ce/ie+Ue[1])*fe)}function gn(L,z,F,G,ie,fe,xe,ke,Ce,Ue,$e){var at=L.text.placedSymbolArray,kt=L.text.dynamicLayoutVertexArray,Pt=L.icon.dynamicLayoutVertexArray,St={};kt.clear();for(var Et=0;Et<at.length;Et++){var wt=at.get(Et),Nt=wt.hidden||!wt.crossTileID||L.allowVerticalPlacement&&!wt.placedOrientation?null:G[wt.crossTileID];if(Nt){var Gt=new e.Point(wt.anchorX,wt.anchorY),lr=tr(Gt,F?ke:xe),yr=rr(fe.cameraToCenterDistance,lr.signedDistanceFromCamera),Or=ie.evaluateSizeForFeature(L.textSizeData,Ue,wt)*yr/e.ONE_EM;F&&(Or*=L.tilePixelRatio/Ce);for(var en=un(Nt.anchor,Nt.width,Nt.height,Nt.textOffset,Nt.textBoxScale,Or),yn=F?tr(Gt.add(en),xe).point:lr.point.add(z?en.rotate(-fe.angle):en),pn=L.allowVerticalPlacement&&wt.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Yn=0;Yn<wt.numGlyphs;Yn++)e.addDynamicAttributes(kt,yn,pn);$e&&wt.associatedIconIndex>=0&&(St[wt.associatedIconIndex]={shiftedAnchor:yn,angle:pn})}else an(wt.numGlyphs,kt)}if($e){Pt.clear();for(var ti=L.icon.placedSymbolArray,gi=0;gi<ti.length;gi++){var Jr=ti.get(gi);if(Jr.hidden)an(Jr.numGlyphs,Pt);else{var In=St[gi];if(In)for(var ri=0;ri<Jr.numGlyphs;ri++)e.addDynamicAttributes(Pt,In.shiftedAnchor,In.angle);else an(Jr.numGlyphs,Pt)}}L.icon.dynamicLayoutVertexBuffer.updateData(Pt)}L.text.dynamicLayoutVertexBuffer.updateData(kt)}function Rn(L,z,F){return F.iconsInText&&z?"symbolTextAndIcon":L?"symbolSDF":"symbolIcon"}function jn(L,z,F,G,ie,fe,xe,ke,Ce,Ue,$e,at){for(var kt=L.context,Pt=kt.gl,St=L.transform,Et="map"===ke,wt="map"===Ce,jt=Et&&"point"!==F.layout.get("symbol-placement"),Nt=Et&&!wt&&!jt,Gt=void 0!==F.layout.get("symbol-sort-key").constantOr(1),lr=L.depthModeForSublayer(0,Ft.ReadOnly),yr=F.layout.get("text-variable-anchor"),Or=[],Cr=0,tn=G;Cr<tn.length;Cr+=1){var en=tn[Cr],yn=z.getTile(en),pn=yn.getBucket(F);if(pn){var Yn=ie?pn.text:pn.icon;if(Yn&&Yn.segments.get().length){var ti=Yn.programConfigurations.get(F.id),gi=ie||pn.sdfIcons,Jr=ie?pn.textSizeData:pn.iconSizeData,In=wt||0!==St.pitch,ri=L.useProgram(Rn(gi,ie,pn),ti),Jn=e.evaluateSizeForZoom(Jr,St.zoom),ui=void 0,yi=[0,0],Oi=void 0,ai=void 0,Mi=null,wi=void 0;if(ie)Oi=yn.glyphAtlasTexture,ai=Pt.LINEAR,ui=yn.glyphAtlasTexture.size,pn.iconsInText&&(yi=yn.imageAtlasTexture.size,Mi=yn.imageAtlasTexture,wi=In||L.options.rotating||L.options.zooming||"composite"===Jr.kind||"camera"===Jr.kind?Pt.LINEAR:Pt.NEAREST);else{var Si=1!==F.layout.get("icon-size").constantOr(0)||pn.iconsNeedLinear;Oi=yn.imageAtlasTexture,ai=gi||L.options.rotating||L.options.zooming||Si||In?Pt.LINEAR:Pt.NEAREST,ui=yn.imageAtlasTexture.size}var Fi=wn(yn,1,L.transform.zoom),Xi=Sr(en.posMatrix,wt,Et,L.transform,Fi),ya=mr(en.posMatrix,wt,Et,L.transform,Fi),Fa=yr&&pn.hasTextData(),Ba="none"!==F.layout.get("icon-text-fit")&&Fa&&pn.hasIconData();jt&&dr(pn,en.posMatrix,L,ie,Xi,ya,wt,Ue);var va=L.translatePosMatrix(en.posMatrix,yn,fe,xe),La=jt||ie&&yr||Ba?Nr:Xi,Ta=L.translatePosMatrix(ya,yn,fe,xe,!0),_o=gi&&0!==F.paint.get(ie?"text-halo-width":"icon-halo-width").constantOr(1),$a={program:ri,buffers:Yn,uniformValues:gi?pn.iconsInText?Kt(Jr.kind,Jn,Nt,wt,L,va,La,Ta,ui,yi):nr(Jr.kind,Jn,Nt,wt,L,va,La,Ta,ie,ui,!0):er(Jr.kind,Jn,Nt,wt,L,va,La,Ta,ie,ui),atlasTexture:Oi,atlasTextureIcon:Mi,atlasInterpolation:ai,atlasInterpolationIcon:wi,isSDF:gi,hasHalo:_o};if(Gt)for(var Bo=0,bs=Yn.segments.get();Bo<bs.length;Bo+=1){var Rs=bs[Bo];Or.push({segments:new e.SegmentVector([Rs]),sortKey:Rs.sortKey,state:$a})}else Or.push({segments:Yn.segments,sortKey:0,state:$a})}}}Gt&&Or.sort(function(ll,ns){return ll.sortKey-ns.sortKey});for(var sl=0,Js=Or;sl<Js.length;sl+=1){var Ks=Js[sl],wo=Ks.state;if(kt.activeTexture.set(Pt.TEXTURE0),wo.atlasTexture.bind(wo.atlasInterpolation,Pt.CLAMP_TO_EDGE),wo.atlasTextureIcon&&(kt.activeTexture.set(Pt.TEXTURE1),wo.atlasTextureIcon&&wo.atlasTextureIcon.bind(wo.atlasInterpolationIcon,Pt.CLAMP_TO_EDGE)),wo.isSDF){var Vs=wo.uniformValues;wo.hasHalo&&(Vs.u_is_halo=1,Zn(wo.buffers,Ks.segments,F,L,wo.program,lr,$e,at,Vs)),Vs.u_is_halo=0}Zn(wo.buffers,Ks.segments,F,L,wo.program,lr,$e,at,wo.uniformValues)}}function Zn(L,z,F,G,ie,fe,xe,ke,Ce){var Ue=G.context;ie.draw(Ue,Ue.gl.TRIANGLES,fe,xe,ke,he.disabled,Ce,F.id,L.layoutVertexBuffer,L.indexBuffer,z,F.paint,G.transform.zoom,L.programConfigurations.get(F.id),L.dynamicLayoutVertexBuffer,L.opacityVertexBuffer)}function Vn(L,z,F,G,ie,fe,xe){var ke,Ce,Ue,$e,at,kt=L.context.gl,Pt=F.paint.get("fill-pattern"),St=Pt&&Pt.constantOr(1),Et=F.getCrossfadeParameters();xe?(Ce=St&&!F.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ke=kt.LINES):(Ce=St?"fillPattern":"fill",ke=kt.TRIANGLES);for(var wt=0,jt=G;wt<jt.length;wt+=1){var Nt=jt[wt],Gt=z.getTile(Nt);if(!St||Gt.patternsLoaded()){var lr=Gt.getBucket(F);if(lr){var yr=lr.programConfigurations.get(F.id),Or=L.useProgram(Ce,yr);St&&(L.context.activeTexture.set(kt.TEXTURE0),Gt.imageAtlasTexture.bind(kt.LINEAR,kt.CLAMP_TO_EDGE),yr.updatePaintBuffers(Et));var Cr=Pt.constantOr(null);if(Cr&&Gt.imageAtlas){var tn=Gt.imageAtlas,en=tn.patternPositions[Cr.to.toString()],yn=tn.patternPositions[Cr.from.toString()];en&&yn&&yr.setConstantPatternPositions(en,yn)}var pn=L.translatePosMatrix(Nt.posMatrix,Gt,F.paint.get("fill-translate"),F.paint.get("fill-translate-anchor"));if(xe){$e=lr.indexBuffer2,at=lr.segments2;var Yn=[kt.drawingBufferWidth,kt.drawingBufferHeight];Ue="fillOutlinePattern"===Ce&&St?Mo(pn,L,Et,Gt,Yn):Lo(pn,Yn)}else $e=lr.indexBuffer,at=lr.segments,Ue=St?ho(pn,L,Et,Gt):yo(pn);Or.draw(L.context,ke,ie,L.stencilModeForClipping(Nt),fe,he.disabled,Ue,F.id,lr.layoutVertexBuffer,$e,at,F.paint,L.transform.zoom,yr)}}}}function bi(L,z,F,G,ie,fe,xe){for(var ke=L.context,Ce=ke.gl,Ue=F.paint.get("fill-extrusion-pattern"),$e=Ue.constantOr(1),at=F.getCrossfadeParameters(),kt=F.paint.get("fill-extrusion-opacity"),Pt=0,St=G;Pt<St.length;Pt+=1){var Et=St[Pt],wt=z.getTile(Et),jt=wt.getBucket(F);if(jt){var Nt=jt.programConfigurations.get(F.id),Gt=L.useProgram($e?"fillExtrusionPattern":"fillExtrusion",Nt);$e&&(L.context.activeTexture.set(Ce.TEXTURE0),wt.imageAtlasTexture.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),Nt.updatePaintBuffers(at));var lr=Ue.constantOr(null);if(lr&&wt.imageAtlas){var yr=wt.imageAtlas,Or=yr.patternPositions[lr.to.toString()],Cr=yr.patternPositions[lr.from.toString()];Or&&Cr&&Nt.setConstantPatternPositions(Or,Cr)}var tn=L.translatePosMatrix(Et.posMatrix,wt,F.paint.get("fill-extrusion-translate"),F.paint.get("fill-extrusion-translate-anchor")),en=F.paint.get("fill-extrusion-vertical-gradient"),yn=$e?ls(tn,L,en,kt,Et,at,wt):ss(tn,L,en,kt);Gt.draw(ke,ke.gl.TRIANGLES,ie,fe,xe,he.backCCW,yn,F.id,jt.layoutVertexBuffer,jt.indexBuffer,jt.segments,F.paint,L.transform.zoom,Nt)}}}function Li(L,z,F,G,ie,fe){var xe=L.context,ke=xe.gl,Ce=z.fbo;if(Ce){var Ue=L.useProgram("hillshade");xe.activeTexture.set(ke.TEXTURE0),ke.bindTexture(ke.TEXTURE_2D,Ce.colorAttachment.get());var $e=function(at,kt,Pt){var St=Pt.paint.get("hillshade-shadow-color"),Et=Pt.paint.get("hillshade-highlight-color"),wt=Pt.paint.get("hillshade-accent-color"),jt=Pt.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Pt.paint.get("hillshade-illumination-anchor")&&(jt-=at.transform.angle);var Nt=!at.options.moving;return{u_matrix:at.transform.calculatePosMatrix(kt.tileID.toUnwrapped(),Nt),u_image:0,u_latrange:Qo(0,kt.tileID),u_light:[Pt.paint.get("hillshade-exaggeration"),jt],u_shadow:St,u_highlight:Et,u_accent:wt}}(L,z,F);Ue.draw(xe,ke.TRIANGLES,G,ie,fe,he.disabled,$e,F.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments)}}function Gi(L,z,F,G,ie,fe,xe){var wt,jt,Nt,Gt,lr,ke=L.context,Ce=ke.gl,Ue=z.dem;if(Ue&&Ue.data){var $e=Ue.dim,at=Ue.stride,kt=Ue.getPixels();if(ke.activeTexture.set(Ce.TEXTURE1),ke.pixelStoreUnpackPremultiplyAlpha.set(!1),z.demTexture=z.demTexture||L.getTileTexture(at),z.demTexture){var Pt=z.demTexture;Pt.update(kt,{premultiply:!1}),Pt.bind(Ce.NEAREST,Ce.CLAMP_TO_EDGE)}else z.demTexture=new e.Texture(ke,kt,Ce.RGBA,{premultiply:!1}),z.demTexture.bind(Ce.NEAREST,Ce.CLAMP_TO_EDGE);ke.activeTexture.set(Ce.TEXTURE0);var St=z.fbo;if(!St){var Et=new e.Texture(ke,{width:$e,height:$e,data:null},Ce.RGBA);Et.bind(Ce.LINEAR,Ce.CLAMP_TO_EDGE),(St=z.fbo=ke.createFramebuffer($e,$e,!0)).colorAttachment.set(Et.texture)}ke.bindFramebuffer.set(St.framebuffer),ke.viewport.set([0,0,$e,$e]),L.useProgram("hillshadePrepare").draw(ke,Ce.TRIANGLES,ie,fe,xe,he.disabled,(wt=z.tileID,Nt=G,Gt=(jt=Ue).stride,lr=e.create(),e.ortho(lr,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(lr,lr,[0,-e.EXTENT,0]),{u_matrix:lr,u_image:1,u_dimension:[Gt,Gt],u_zoom:wt.overscaledZ,u_maxzoom:Nt,u_unpack:jt.getUnpackVector()}),F.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments),z.needsHillshadePrepare=!1}}function ji(L,z,F,G,ie){var fe=G.paint.get("raster-fade-duration");if(fe>0){var xe=e.browser.now(),ke=(xe-L.timeAdded)/fe,Ce=z?(xe-z.timeAdded)/fe:-1,Ue=F.getSource(),$e=ie.coveringZoomLevel({tileSize:Ue.tileSize,roundZoom:Ue.roundZoom}),at=!z||Math.abs(z.tileID.overscaledZ-$e)>Math.abs(L.tileID.overscaledZ-$e),kt=at&&L.refreshedUponExpiration?1:e.clamp(at?ke:1-Ce,0,1);return L.refreshedUponExpiration&&ke>=1&&(L.refreshedUponExpiration=!1),z?{opacity:1,mix:1-kt}:{opacity:kt,mix:0}}return{opacity:1,mix:0}}var Yi=new e.Color(1,0,0,1),_a=new e.Color(0,1,0,1),da=new e.Color(0,0,1,1),aa=new e.Color(1,0,1,1),oa=new e.Color(0,1,1,1);function ot(L,z,F,G){Ge(L,0,z+F/2,L.transform.width,F,G)}function tt(L,z,F,G){Ge(L,z-F/2,0,F,L.transform.height,G)}function Ge(L,z,F,G,ie,fe){var xe=L.context,ke=xe.gl;ke.enable(ke.SCISSOR_TEST),ke.scissor(z*e.browser.devicePixelRatio,F*e.browser.devicePixelRatio,G*e.browser.devicePixelRatio,ie*e.browser.devicePixelRatio),xe.clear({color:fe}),ke.disable(ke.SCISSOR_TEST)}function Bt(L,z,F){var G=L.context,ie=G.gl,fe=F.posMatrix,xe=L.useProgram("debug"),ke=Ft.disabled,Ce=Be.disabled,Ue=L.colorModeForRenderPass();G.activeTexture.set(ie.TEXTURE0),L.emptyTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),xe.draw(G,ie.LINE_STRIP,ke,Ce,Ue,he.disabled,cs(fe,e.Color.red),"$debug",L.debugBuffer,L.tileBorderIndexBuffer,L.debugSegments);var $e=z.getTileByID(F.key).latestRawTileData,kt=Math.floor(($e&&$e.byteLength||0)/1024),Pt=z.getTile(F).tileSize,St=512/Math.min(Pt,512)*(F.overscaledZ/L.transform.zoom)*.5,Et=F.canonical.toString();F.overscaledZ!==F.canonical.z&&(Et+=" => "+F.overscaledZ),function(wt,jt){wt.initDebugOverlayCanvas();var Nt=wt.debugOverlayCanvas,Gt=wt.context.gl,lr=wt.debugOverlayCanvas.getContext("2d");lr.clearRect(0,0,Nt.width,Nt.height),lr.shadowColor="white",lr.shadowBlur=2,lr.lineWidth=1.5,lr.strokeStyle="white",lr.textBaseline="top",lr.font="bold 36px Open Sans, sans-serif",lr.fillText(jt,5,5),lr.strokeText(jt,5,5),wt.debugOverlayTexture.update(Nt),wt.debugOverlayTexture.bind(Gt.LINEAR,Gt.CLAMP_TO_EDGE)}(L,Et+" "+kt+"kb"),xe.draw(G,ie.TRIANGLES,ke,Ce,He.alphaBlended,he.disabled,cs(fe,e.Color.transparent,St),"$debug",L.debugBuffer,L.quadTriangleIndexBuffer,L.debugSegments)}var Ur={symbol:function(L,z,F,G,ie){if("translucent"===L.renderPass){var fe=Be.disabled,xe=L.colorModeForRenderPass();F.layout.get("text-variable-anchor")&&function(ke,Ce,Ue,$e,at,kt,Pt){for(var St=Ce.transform,Et="map"===at,wt="map"===kt,jt=0,Nt=ke;jt<Nt.length;jt+=1){var Gt=Nt[jt],lr=$e.getTile(Gt),yr=lr.getBucket(Ue);if(yr&&yr.text&&yr.text.segments.get().length){var Cr=e.evaluateSizeForZoom(yr.textSizeData,St.zoom),tn=wn(lr,1,Ce.transform.zoom),en=Sr(Gt.posMatrix,wt,Et,Ce.transform,tn),yn="none"!==Ue.layout.get("icon-text-fit")&&yr.hasIconData();if(Cr){var pn=Math.pow(2,St.zoom-lr.tileID.overscaledZ);gn(yr,Et,wt,Pt,e.symbolSize,St,en,Gt.posMatrix,pn,Cr,yn)}}}}(G,L,F,z,F.layout.get("text-rotation-alignment"),F.layout.get("text-pitch-alignment"),ie),0!==F.paint.get("icon-opacity").constantOr(1)&&jn(L,z,F,G,!1,F.paint.get("icon-translate"),F.paint.get("icon-translate-anchor"),F.layout.get("icon-rotation-alignment"),F.layout.get("icon-pitch-alignment"),F.layout.get("icon-keep-upright"),fe,xe),0!==F.paint.get("text-opacity").constantOr(1)&&jn(L,z,F,G,!0,F.paint.get("text-translate"),F.paint.get("text-translate-anchor"),F.layout.get("text-rotation-alignment"),F.layout.get("text-pitch-alignment"),F.layout.get("text-keep-upright"),fe,xe),z.map.showCollisionBoxes&&(Ar(L,z,F,G,F.paint.get("text-translate"),F.paint.get("text-translate-anchor"),!0),Ar(L,z,F,G,F.paint.get("icon-translate"),F.paint.get("icon-translate-anchor"),!1))}},circle:function(L,z,F,G){if("translucent"===L.renderPass){var ie=F.paint.get("circle-opacity"),fe=F.paint.get("circle-stroke-width"),xe=F.paint.get("circle-stroke-opacity"),ke=void 0!==F.layout.get("circle-sort-key").constantOr(1);if(0!==ie.constantOr(1)||0!==fe.constantOr(1)&&0!==xe.constantOr(1)){for(var Ce=L.context,Ue=Ce.gl,$e=L.depthModeForSublayer(0,Ft.ReadOnly),at=Be.disabled,kt=L.colorModeForRenderPass(),Pt=[],St=0;St<G.length;St++){var Et=G[St],wt=z.getTile(Et),jt=wt.getBucket(F);if(jt){var Nt=jt.programConfigurations.get(F.id),Gt={programConfiguration:Nt,program:L.useProgram("circle",Nt),layoutVertexBuffer:jt.layoutVertexBuffer,indexBuffer:jt.indexBuffer,uniformValues:Po(L,Et,wt,F)};if(ke)for(var lr=0,yr=jt.segments.get();lr<yr.length;lr+=1){var Or=yr[lr];Pt.push({segments:new e.SegmentVector([Or]),sortKey:Or.sortKey,state:Gt})}else Pt.push({segments:jt.segments,sortKey:0,state:Gt})}}ke&&Pt.sort(function(ri,Jn){return ri.sortKey-Jn.sortKey});for(var Cr=0,tn=Pt;Cr<tn.length;Cr+=1){var en=tn[Cr],yn=en.state;yn.program.draw(Ce,Ue.TRIANGLES,$e,at,kt,he.disabled,yn.uniformValues,F.id,yn.layoutVertexBuffer,yn.indexBuffer,en.segments,F.paint,L.transform.zoom,yn.programConfiguration)}}}},heatmap:function(L,z,F,G){if(0!==F.paint.get("heatmap-opacity"))if("offscreen"===L.renderPass){var ie=L.context,fe=ie.gl,xe=Be.disabled,ke=new He([fe.ONE,fe.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(Et,wt,jt){var Nt=Et.gl;Et.activeTexture.set(Nt.TEXTURE1),Et.viewport.set([0,0,wt.width/4,wt.height/4]);var yr,Or,Cr,tn,en,Gt=jt.heatmapFbo;if(Gt)Nt.bindTexture(Nt.TEXTURE_2D,Gt.colorAttachment.get()),Et.bindFramebuffer.set(Gt.framebuffer);else{var lr=Nt.createTexture();Nt.bindTexture(Nt.TEXTURE_2D,lr),Nt.texParameteri(Nt.TEXTURE_2D,Nt.TEXTURE_WRAP_S,Nt.CLAMP_TO_EDGE),Nt.texParameteri(Nt.TEXTURE_2D,Nt.TEXTURE_WRAP_T,Nt.CLAMP_TO_EDGE),Nt.texParameteri(Nt.TEXTURE_2D,Nt.TEXTURE_MIN_FILTER,Nt.LINEAR),Nt.texParameteri(Nt.TEXTURE_2D,Nt.TEXTURE_MAG_FILTER,Nt.LINEAR),Cr=lr,tn=Gt=jt.heatmapFbo=Et.createFramebuffer(wt.width/4,wt.height/4,!1),(en=(yr=Et).gl).texImage2D(en.TEXTURE_2D,0,en.RGBA,(Or=wt).width/4,Or.height/4,0,en.RGBA,yr.extRenderToTextureHalfFloat?yr.extTextureHalfFloat.HALF_FLOAT_OES:en.UNSIGNED_BYTE,null),tn.colorAttachment.set(Cr)}})(ie,L,F),ie.clear({color:e.Color.transparent});for(var Ce=0;Ce<G.length;Ce++){var Ue=G[Ce];if(!z.hasRenderableParent(Ue)){var $e=z.getTile(Ue),at=$e.getBucket(F);if(at){var kt=at.programConfigurations.get(F.id);L.useProgram("heatmap",kt).draw(ie,fe.TRIANGLES,Ft.disabled,xe,ke,he.disabled,So(Ue.posMatrix,$e,L.transform.zoom,F.paint.get("heatmap-intensity")),F.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,F.paint,L.transform.zoom,kt)}}}ie.viewport.set([0,0,L.width,L.height])}else"translucent"===L.renderPass&&(L.context.setColorMode(L.colorModeForRenderPass()),function(Et,wt){var jt=Et.context,Nt=jt.gl,Gt=wt.heatmapFbo;if(Gt){jt.activeTexture.set(Nt.TEXTURE0),Nt.bindTexture(Nt.TEXTURE_2D,Gt.colorAttachment.get()),jt.activeTexture.set(Nt.TEXTURE1);var lr=wt.colorRampTexture;lr||(lr=wt.colorRampTexture=new e.Texture(jt,wt.colorRamp,Nt.RGBA)),lr.bind(Nt.LINEAR,Nt.CLAMP_TO_EDGE),Et.useProgram("heatmapTexture").draw(jt,Nt.TRIANGLES,Ft.disabled,Be.disabled,Et.colorModeForRenderPass(),he.disabled,function(yr,Or,Cr,tn){var en=e.create();e.ortho(en,0,yr.width,yr.height,0,0,1);var yn=yr.context.gl;return{u_matrix:en,u_world:[yn.drawingBufferWidth,yn.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Or.paint.get("heatmap-opacity")}}(Et,wt),wt.id,Et.viewportBuffer,Et.quadTriangleIndexBuffer,Et.viewportSegments,wt.paint,Et.transform.zoom)}}(L,F))},line:function(L,z,F,G){if("translucent"===L.renderPass){var ie=F.paint.get("line-opacity"),fe=F.paint.get("line-width");if(0!==ie.constantOr(1)&&0!==fe.constantOr(1)){var xe=L.depthModeForSublayer(0,Ft.ReadOnly),ke=L.colorModeForRenderPass(),Ce=F.paint.get("line-dasharray"),Ue=F.paint.get("line-pattern"),$e=Ue.constantOr(1),at=F.paint.get("line-gradient"),kt=F.getCrossfadeParameters(),Pt=$e?"linePattern":Ce?"lineSDF":at?"lineGradient":"line",St=L.context,Et=St.gl,wt=!0;if(at){St.activeTexture.set(Et.TEXTURE0);var jt=F.gradientTexture;if(!F.gradient)return;jt||(jt=F.gradientTexture=new e.Texture(St,F.gradient,Et.RGBA)),jt.bind(Et.LINEAR,Et.CLAMP_TO_EDGE)}for(var Nt=0,Gt=G;Nt<Gt.length;Nt+=1){var lr=Gt[Nt],yr=z.getTile(lr);if(!$e||yr.patternsLoaded()){var Or=yr.getBucket(F);if(Or){var Cr=Or.programConfigurations.get(F.id),tn=L.context.program.get(),en=L.useProgram(Pt,Cr),yn=wt||en.program!==tn,pn=Ue.constantOr(null);if(pn&&yr.imageAtlas){var Yn=yr.imageAtlas,ti=Yn.patternPositions[pn.to.toString()],gi=Yn.patternPositions[pn.from.toString()];ti&&gi&&Cr.setConstantPatternPositions(ti,gi)}var Jr=$e?je(L,yr,F,kt):Ce?We(L,yr,F,Ce,kt):at?Zi(L,yr,F):mo(L,yr,F);$e?(St.activeTexture.set(Et.TEXTURE0),yr.imageAtlasTexture.bind(Et.LINEAR,Et.CLAMP_TO_EDGE),Cr.updatePaintBuffers(kt)):Ce&&(yn||L.lineAtlas.dirty)&&(St.activeTexture.set(Et.TEXTURE0),L.lineAtlas.bind(St)),en.draw(St,Et.TRIANGLES,xe,L.stencilModeForClipping(lr),ke,he.disabled,Jr,F.id,Or.layoutVertexBuffer,Or.indexBuffer,Or.segments,F.paint,L.transform.zoom,Cr),wt=!1}}}}}},fill:function(L,z,F,G){var ie=F.paint.get("fill-color"),fe=F.paint.get("fill-opacity");if(0!==fe.constantOr(1)){var xe=L.colorModeForRenderPass(),ke=F.paint.get("fill-pattern"),Ce=L.opaquePassEnabledForLayer()&&!ke.constantOr(1)&&1===ie.constantOr(e.Color.transparent).a&&1===fe.constantOr(0)?"opaque":"translucent";if(L.renderPass===Ce){var Ue=L.depthModeForSublayer(1,"opaque"===L.renderPass?Ft.ReadWrite:Ft.ReadOnly);Vn(L,z,F,G,Ue,xe,!1)}if("translucent"===L.renderPass&&F.paint.get("fill-antialias")){var $e=L.depthModeForSublayer(F.getPaintProperty("fill-outline-color")?2:0,Ft.ReadOnly);Vn(L,z,F,G,$e,xe,!0)}}},"fill-extrusion":function(L,z,F,G){var ie=F.paint.get("fill-extrusion-opacity");if(0!==ie&&"translucent"===L.renderPass){var fe=new Ft(L.context.gl.LEQUAL,Ft.ReadWrite,L.depthRangeFor3D);if(1!==ie||F.paint.get("fill-extrusion-pattern").constantOr(1))bi(L,z,F,G,fe,Be.disabled,He.disabled),bi(L,z,F,G,fe,L.stencilModeFor3D(),L.colorModeForRenderPass());else{var xe=L.colorModeForRenderPass();bi(L,z,F,G,fe,Be.disabled,xe)}}},hillshade:function(L,z,F,G){if("offscreen"===L.renderPass||"translucent"===L.renderPass){for(var ie=L.context,fe=z.getSource().maxzoom,xe=L.depthModeForSublayer(0,Ft.ReadOnly),ke=L.colorModeForRenderPass(),Ce="translucent"===L.renderPass?L.stencilConfigForOverlap(G):[{},G],Ue=Ce[0],$e=0,at=Ce[1];$e<at.length;$e+=1){var kt=at[$e],Pt=z.getTile(kt);Pt.needsHillshadePrepare&&"offscreen"===L.renderPass?Gi(L,Pt,F,fe,xe,Be.disabled,ke):"translucent"===L.renderPass&&Li(L,Pt,F,xe,Ue[kt.overscaledZ],ke)}ie.viewport.set([0,0,L.width,L.height])}},raster:function(L,z,F,G){if("translucent"===L.renderPass&&0!==F.paint.get("raster-opacity")&&G.length)for(var ie=L.context,fe=ie.gl,xe=z.getSource(),ke=L.useProgram("raster"),Ce=L.colorModeForRenderPass(),Ue=xe instanceof Z?[{},G]:L.stencilConfigForOverlap(G),$e=Ue[0],at=Ue[1],kt=at[at.length-1].overscaledZ,Pt=!L.options.moving,St=0,Et=at;St<Et.length;St+=1){var wt=Et[St],jt=L.depthModeForSublayer(wt.overscaledZ-kt,1===F.paint.get("raster-opacity")?Ft.ReadWrite:Ft.ReadOnly,fe.LESS),Nt=z.getTile(wt),Gt=L.transform.calculatePosMatrix(wt.toUnwrapped(),Pt);Nt.registerFadeDuration(F.paint.get("raster-fade-duration"));var lr=z.findLoadedParent(wt,0),yr=ji(Nt,lr,z,F,L.transform),Or=void 0,Cr=void 0,tn="nearest"===F.paint.get("raster-resampling")?fe.NEAREST:fe.LINEAR;ie.activeTexture.set(fe.TEXTURE0),Nt.texture.bind(tn,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST),ie.activeTexture.set(fe.TEXTURE1),lr?(lr.texture.bind(tn,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST),Or=Math.pow(2,lr.tileID.overscaledZ-Nt.tileID.overscaledZ),Cr=[Nt.tileID.canonical.x*Or%1,Nt.tileID.canonical.y*Or%1]):Nt.texture.bind(tn,fe.CLAMP_TO_EDGE,fe.LINEAR_MIPMAP_NEAREST);var en=yt(Gt,Cr||[0,0],Or||1,yr,F);xe instanceof Z?ke.draw(ie,fe.TRIANGLES,jt,Be.disabled,Ce,he.disabled,en,F.id,xe.boundsBuffer,L.quadTriangleIndexBuffer,xe.boundsSegments):ke.draw(ie,fe.TRIANGLES,jt,$e[wt.overscaledZ],Ce,he.disabled,en,F.id,L.rasterBoundsBuffer,L.quadTriangleIndexBuffer,L.rasterBoundsSegments)}},background:function(L,z,F){var G=F.paint.get("background-color"),ie=F.paint.get("background-opacity");if(0!==ie){var fe=L.context,xe=fe.gl,ke=L.transform,Ce=ke.tileSize,Ue=F.paint.get("background-pattern");if(!L.isPatternMissing(Ue)){var $e=!Ue&&1===G.a&&1===ie&&L.opaquePassEnabledForLayer()?"opaque":"translucent";if(L.renderPass===$e){var at=Be.disabled,kt=L.depthModeForSublayer(0,"opaque"===$e?Ft.ReadWrite:Ft.ReadOnly),Pt=L.colorModeForRenderPass(),St=L.useProgram(Ue?"backgroundPattern":"background"),Et=ke.coveringTiles({tileSize:Ce});Ue&&(fe.activeTexture.set(xe.TEXTURE0),L.imageManager.bind(L.context));for(var wt=F.getCrossfadeParameters(),jt=0,Nt=Et;jt<Nt.length;jt+=1){var Gt=Nt[jt],lr=L.transform.calculatePosMatrix(Gt.toUnwrapped()),yr=Ue?vr(lr,ie,L,Ue,{tileID:Gt,tileSize:Ce},wt):ir(lr,ie,G);St.draw(fe,xe.TRIANGLES,kt,at,Pt,he.disabled,yr,F.id,L.tileExtentBuffer,L.quadTriangleIndexBuffer,L.tileExtentSegments)}}}}},debug:function(L,z,F){for(var G=0;G<F.length;G++)Bt(L,z,F[G])},custom:function(L,z,F){var G=L.context,ie=F.implementation;if("offscreen"===L.renderPass){var fe=ie.prerender;fe&&(L.setCustomLayerDefaults(),G.setColorMode(L.colorModeForRenderPass()),fe.call(ie,G.gl,L.transform.customLayerMatrix()),G.setDirty(),L.setBaseState())}else if("translucent"===L.renderPass){L.setCustomLayerDefaults(),G.setColorMode(L.colorModeForRenderPass()),G.setStencilMode(Be.disabled);var xe="3d"===ie.renderingMode?new Ft(L.context.gl.LEQUAL,Ft.ReadWrite,L.depthRangeFor3D):L.depthModeForSublayer(0,Ft.ReadOnly);G.setDepthMode(xe),ie.render(G.gl,L.transform.customLayerMatrix()),G.setDirty(),L.setBaseState(),G.bindFramebuffer.set(null)}}},kn=function(L,z){this.context=new be(L),this.transform=z,this._tileTextures={},this.setup(),this.numSublayers=ze.maxUnderzooming+ze.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Zr,this.gpuTimers={}};kn.prototype.resize=function(L,z){if(this.width=L*e.browser.devicePixelRatio,this.height=z*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var F=0,G=this.style._order;F<G.length;F+=1)this.style._layers[G[F]].resize()},kn.prototype.setup=function(){var L=this.context,z=new e.StructArrayLayout2i4;z.emplaceBack(0,0),z.emplaceBack(e.EXTENT,0),z.emplaceBack(0,e.EXTENT),z.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=L.createVertexBuffer(z,Dn.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var F=new e.StructArrayLayout2i4;F.emplaceBack(0,0),F.emplaceBack(e.EXTENT,0),F.emplaceBack(0,e.EXTENT),F.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=L.createVertexBuffer(F,Dn.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var G=new e.StructArrayLayout4i8;G.emplaceBack(0,0,0,0),G.emplaceBack(e.EXTENT,0,e.EXTENT,0),G.emplaceBack(0,e.EXTENT,0,e.EXTENT),G.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=L.createVertexBuffer(G,X.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ie=new e.StructArrayLayout2i4;ie.emplaceBack(0,0),ie.emplaceBack(1,0),ie.emplaceBack(0,1),ie.emplaceBack(1,1),this.viewportBuffer=L.createVertexBuffer(ie,Dn.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var fe=new e.StructArrayLayout1ui2;fe.emplaceBack(0),fe.emplaceBack(1),fe.emplaceBack(3),fe.emplaceBack(2),fe.emplaceBack(0),this.tileBorderIndexBuffer=L.createIndexBuffer(fe);var xe=new e.StructArrayLayout3ui6;xe.emplaceBack(0,1,2),xe.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=L.createIndexBuffer(xe),this.emptyTexture=new e.Texture(L,{width:1,height:1,data:new Uint8Array([0,0,0,0])},L.gl.RGBA);var ke=this.context.gl;this.stencilClearMode=new Be({func:ke.ALWAYS,mask:0},0,255,ke.ZERO,ke.ZERO,ke.ZERO)},kn.prototype.clearStencil=function(){var L=this.context,z=L.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var F=e.create();e.ortho(F,0,this.width,this.height,0,0,1),e.scale(F,F,[z.drawingBufferWidth,z.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(L,z.TRIANGLES,Ft.disabled,this.stencilClearMode,He.disabled,he.disabled,io(F),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},kn.prototype._renderTileClippingMasks=function(L,z){if(this.currentStencilSource!==L.source&&L.isTileClipped()&&z&&z.length){this.currentStencilSource=L.source;var F=this.context,G=F.gl;this.nextStencilID+z.length>256&&this.clearStencil(),F.setColorMode(He.disabled),F.setDepthMode(Ft.disabled);var ie=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var fe=0,xe=z;fe<xe.length;fe+=1){var ke=xe[fe],Ce=this._tileClippingMaskIDs[ke.key]=this.nextStencilID++;ie.draw(F,G.TRIANGLES,Ft.disabled,new Be({func:G.ALWAYS,mask:0},Ce,255,G.KEEP,G.KEEP,G.REPLACE),He.disabled,he.disabled,io(ke.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},kn.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var L=this.nextStencilID++,z=this.context.gl;return new Be({func:z.NOTEQUAL,mask:255},L,255,z.KEEP,z.KEEP,z.REPLACE)},kn.prototype.stencilModeForClipping=function(L){var z=this.context.gl;return new Be({func:z.EQUAL,mask:255},this._tileClippingMaskIDs[L.key],0,z.KEEP,z.KEEP,z.REPLACE)},kn.prototype.stencilConfigForOverlap=function(L){var z,F=this.context.gl,G=L.sort(function(Ce,Ue){return Ue.overscaledZ-Ce.overscaledZ}),ie=G[G.length-1].overscaledZ,fe=G[0].overscaledZ-ie+1;if(fe>1){this.currentStencilSource=void 0,this.nextStencilID+fe>256&&this.clearStencil();for(var xe={},ke=0;ke<fe;ke++)xe[ke+ie]=new Be({func:F.GEQUAL,mask:255},ke+this.nextStencilID,255,F.KEEP,F.KEEP,F.REPLACE);return this.nextStencilID+=fe,[xe,G]}return[(z={},z[ie]=Be.disabled,z),G]},kn.prototype.colorModeForRenderPass=function(){var L=this.context.gl;return this._showOverdrawInspector?new He([L.CONSTANT_COLOR,L.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?He.unblended:He.alphaBlended},kn.prototype.depthModeForSublayer=function(L,z,F){if(!this.opaquePassEnabledForLayer())return Ft.disabled;var G=1-((1+this.currentLayer)*this.numSublayers+L)*this.depthEpsilon;return new Ft(F||this.context.gl.LEQUAL,z,[G,G])},kn.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},kn.prototype.render=function(L,z){var F=this;this.style=L,this.options=z,this.lineAtlas=L.lineAtlas,this.imageManager=L.imageManager,this.glyphManager=L.glyphManager,this.symbolFadeChange=L.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var G=this.style._order,ie=this.style.sourceCaches;for(var fe in ie){var xe=ie[fe];xe.used&&xe.prepare(this.context)}var ke,Ce,Ue={},$e={},at={};for(var kt in ie){var Pt=ie[kt];Ue[kt]=Pt.getVisibleCoordinates(),$e[kt]=Ue[kt].slice().reverse(),at[kt]=Pt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var St=0;St<G.length;St++)if(this.style._layers[G[St]].is3D()){this.opaquePassCutoff=St;break}this.renderPass="offscreen";for(var wt=0,jt=G;wt<jt.length;wt+=1){var Gt=this.style._layers[jt[wt]];if(Gt.hasOffscreenPass()&&!Gt.isHidden(this.transform.zoom)){var lr=$e[Gt.source];("custom"===Gt.type||lr.length)&&this.renderLayer(this,ie[Gt.source],Gt,lr)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:z.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=z.showOverdrawInspector,this.depthRangeFor3D=[0,1-(L._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=G.length-1;this.currentLayer>=0;this.currentLayer--){var yr=this.style._layers[G[this.currentLayer]],Or=ie[yr.source],Cr=Ue[yr.source];this._renderTileClippingMasks(yr,Cr),this.renderLayer(this,Or,yr,Cr)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<G.length;this.currentLayer++){var tn=this.style._layers[G[this.currentLayer]],en=ie[tn.source],yn=("symbol"===tn.type?at:$e)[tn.source];this._renderTileClippingMasks(tn,Ue[tn.source]),this.renderLayer(this,en,tn,yn)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(pn){pn.source&&!pn.isHidden(F.transform.zoom)&&(pn.source!==(Ce&&Ce.id)&&(Ce=F.style.sourceCaches[pn.source]),(!ke||ke.getSource().maxzoom<Ce.getSource().maxzoom)&&(ke=Ce))}),ke&&Ur.debug(this,ke,ke.getVisibleCoordinates())),this.options.showPadding&&function ca(L){var z=L.transform.padding;ot(L,L.transform.height-(z.top||0),3,Yi),ot(L,z.bottom||0,3,_a),tt(L,z.left||0,3,da),tt(L,L.transform.width-(z.right||0),3,aa);var G,ie,fe,xe,F=L.transform.centerPoint;Ge(G=L,(ie=F.x)-1,(fe=L.transform.height-F.y)-10,2,20,xe=oa),Ge(G,ie-10,fe-1,20,2,xe)}(this),this.context.setDefault()},kn.prototype.renderLayer=function(L,z,F,G){F.isHidden(this.transform.zoom)||("background"===F.type||"custom"===F.type||G.length)&&(this.id=F.id,this.gpuTimingStart(F),Ur[F.type](L,z,F,G,this.style.placement.variableOffsets),this.gpuTimingEnd())},kn.prototype.gpuTimingStart=function(L){if(this.options.gpuTiming){var z=this.context.extTimerQuery,F=this.gpuTimers[L.id];F||(F=this.gpuTimers[L.id]={calls:0,cpuTime:0,query:z.createQueryEXT()}),F.calls++,z.beginQueryEXT(z.TIME_ELAPSED_EXT,F.query)}},kn.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var L=this.context.extTimerQuery;L.endQueryEXT(L.TIME_ELAPSED_EXT)}},kn.prototype.collectGpuTimers=function(){var L=this.gpuTimers;return this.gpuTimers={},L},kn.prototype.queryGpuTimers=function(L){var z={};for(var F in L){var G=L[F],ie=this.context.extTimerQuery,fe=ie.getQueryObjectEXT(G.query,ie.QUERY_RESULT_EXT)/1e6;ie.deleteQueryEXT(G.query),z[F]=fe}return z},kn.prototype.translatePosMatrix=function(L,z,F,G,ie){if(!F[0]&&!F[1])return L;var fe=ie?"map"===G?this.transform.angle:0:"viewport"===G?-this.transform.angle:0;if(fe){var xe=Math.sin(fe),ke=Math.cos(fe);F=[F[0]*ke-F[1]*xe,F[0]*xe+F[1]*ke]}var Ce=[ie?F[0]:wn(z,F[0],this.transform.zoom),ie?F[1]:wn(z,F[1],this.transform.zoom),0],Ue=new Float32Array(16);return e.translate(Ue,L,Ce),Ue},kn.prototype.saveTileTexture=function(L){var z=this._tileTextures[L.size[0]];z?z.push(L):this._tileTextures[L.size[0]]=[L]},kn.prototype.getTileTexture=function(L){var z=this._tileTextures[L];return z&&z.length>0?z.pop():null},kn.prototype.isPatternMissing=function(L){if(!L)return!1;if(!L.from||!L.to)return!0;var z=this.imageManager.getPattern(L.from.toString()),F=this.imageManager.getPattern(L.to.toString());return!z||!F},kn.prototype.useProgram=function(L,z){this.cache=this.cache||{};var F=""+L+(z?z.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[F]||(this.cache[F]=new $o(this.context,Ko[L],z,wr[L],this._showOverdrawInspector)),this.cache[F]},kn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},kn.prototype.setBaseState=function(){var L=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(L.FUNC_ADD)},kn.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},kn.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ft=function(L,z){this.points=L,this.planes=z};ft.fromInvProjectionMatrix=function(L,z,F){var G=Math.pow(2,F),ie=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(xe){return e.transformMat4([],xe,L)}).map(function(xe){return e.scale$1([],xe,1/xe[3]/z*G)}),fe=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(xe){var ke=e.sub([],ie[xe[0]],ie[xe[1]]),Ce=e.sub([],ie[xe[2]],ie[xe[1]]),Ue=e.normalize([],e.cross([],ke,Ce)),$e=-e.dot(Ue,ie[xe[1]]);return Ue.concat($e)});return new ft(ie,fe)};var zt=function(L,z){this.min=L,this.max=z,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};zt.prototype.quadrant=function(L){for(var z=[L%2==0,L<2],F=e.clone$2(this.min),G=e.clone$2(this.max),ie=0;ie<z.length;ie++)F[ie]=z[ie]?this.min[ie]:this.center[ie],G[ie]=z[ie]?this.center[ie]:this.max[ie];return G[2]=this.max[2],new zt(F,G)},zt.prototype.distanceX=function(L){return Math.max(Math.min(this.max[0],L[0]),this.min[0])-L[0]},zt.prototype.distanceY=function(L){return Math.max(Math.min(this.max[1],L[1]),this.min[1])-L[1]},zt.prototype.intersects=function(L){for(var z=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],F=!0,G=0;G<L.planes.length;G++){for(var ie=L.planes[G],fe=0,xe=0;xe<z.length;xe++)fe+=e.dot$1(ie,z[xe])>=0;if(0===fe)return 0;fe!==z.length&&(F=!1)}if(F)return 2;for(var ke=0;ke<3;ke++){for(var Ce=Number.MAX_VALUE,Ue=-Number.MAX_VALUE,$e=0;$e<L.points.length;$e++){var at=L.points[$e][ke]-this.min[ke];Ce=Math.min(Ce,at),Ue=Math.max(Ue,at)}if(Ue<0||Ce>this.max[ke]-this.min[ke])return 0}return 1};var sr=function(L,z,F,G){if(void 0===L&&(L=0),void 0===z&&(z=0),void 0===F&&(F=0),void 0===G&&(G=0),isNaN(L)||L<0||isNaN(z)||z<0||isNaN(F)||F<0||isNaN(G)||G<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=L,this.bottom=z,this.left=F,this.right=G};sr.prototype.interpolate=function(L,z,F){return null!=z.top&&null!=L.top&&(this.top=e.number(L.top,z.top,F)),null!=z.bottom&&null!=L.bottom&&(this.bottom=e.number(L.bottom,z.bottom,F)),null!=z.left&&null!=L.left&&(this.left=e.number(L.left,z.left,F)),null!=z.right&&null!=L.right&&(this.right=e.number(L.right,z.right,F)),this},sr.prototype.getCenter=function(L,z){var F=e.clamp((this.left+L-this.right)/2,0,L),G=e.clamp((this.top+z-this.bottom)/2,0,z);return new e.Point(F,G)},sr.prototype.equals=function(L){return this.top===L.top&&this.bottom===L.bottom&&this.left===L.left&&this.right===L.right},sr.prototype.clone=function(){return new sr(this.top,this.bottom,this.left,this.right)},sr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Yt=function(L,z,F,G,ie){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===ie||ie,this._minZoom=L||0,this._maxZoom=z||22,this._minPitch=F??0,this._maxPitch=G??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new sr,this._posMatrixCache={},this._alignedPosMatrixCache={}},hr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Yt.prototype.clone=function(){var L=new Yt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return L.tileSize=this.tileSize,L.latRange=this.latRange,L.width=this.width,L.height=this.height,L._center=this._center,L.zoom=this.zoom,L.angle=this.angle,L._fov=this._fov,L._pitch=this._pitch,L._unmodified=this._unmodified,L._edgeInsets=this._edgeInsets.clone(),L._calcMatrices(),L},hr.minZoom.get=function(){return this._minZoom},hr.minZoom.set=function(L){this._minZoom!==L&&(this._minZoom=L,this.zoom=Math.max(this.zoom,L))},hr.maxZoom.get=function(){return this._maxZoom},hr.maxZoom.set=function(L){this._maxZoom!==L&&(this._maxZoom=L,this.zoom=Math.min(this.zoom,L))},hr.minPitch.get=function(){return this._minPitch},hr.minPitch.set=function(L){this._minPitch!==L&&(this._minPitch=L,this.pitch=Math.max(this.pitch,L))},hr.maxPitch.get=function(){return this._maxPitch},hr.maxPitch.set=function(L){this._maxPitch!==L&&(this._maxPitch=L,this.pitch=Math.min(this.pitch,L))},hr.renderWorldCopies.get=function(){return this._renderWorldCopies},hr.renderWorldCopies.set=function(L){void 0===L?L=!0:null===L&&(L=!1),this._renderWorldCopies=L},hr.worldSize.get=function(){return this.tileSize*this.scale},hr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},hr.size.get=function(){return new e.Point(this.width,this.height)},hr.bearing.get=function(){return-this.angle/Math.PI*180},hr.bearing.set=function(L){var z=-e.wrap(L,-180,180)*Math.PI/180;this.angle!==z&&(this._unmodified=!1,this.angle=z,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},hr.pitch.get=function(){return this._pitch/Math.PI*180},hr.pitch.set=function(L){var z=e.clamp(L,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==z&&(this._unmodified=!1,this._pitch=z,this._calcMatrices())},hr.fov.get=function(){return this._fov/Math.PI*180},hr.fov.set=function(L){L=Math.max(.01,Math.min(60,L)),this._fov!==L&&(this._unmodified=!1,this._fov=L/180*Math.PI,this._calcMatrices())},hr.zoom.get=function(){return this._zoom},hr.zoom.set=function(L){var z=Math.min(Math.max(L,this.minZoom),this.maxZoom);this._zoom!==z&&(this._unmodified=!1,this._zoom=z,this.scale=this.zoomScale(z),this.tileZoom=Math.floor(z),this.zoomFraction=z-this.tileZoom,this._constrain(),this._calcMatrices())},hr.center.get=function(){return this._center},hr.center.set=function(L){L.lat===this._center.lat&&L.lng===this._center.lng||(this._unmodified=!1,this._center=L,this._constrain(),this._calcMatrices())},hr.padding.get=function(){return this._edgeInsets.toJSON()},hr.padding.set=function(L){this._edgeInsets.equals(L)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,L,1),this._calcMatrices())},hr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Yt.prototype.isPaddingEqual=function(L){return this._edgeInsets.equals(L)},Yt.prototype.interpolatePadding=function(L,z,F){this._unmodified=!1,this._edgeInsets.interpolate(L,z,F),this._constrain(),this._calcMatrices()},Yt.prototype.coveringZoomLevel=function(L){var z=(L.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/L.tileSize));return Math.max(0,z)},Yt.prototype.getVisibleUnwrappedCoordinates=function(L){var z=[new e.UnwrappedTileID(0,L)];if(this._renderWorldCopies)for(var F=this.pointCoordinate(new e.Point(0,0)),G=this.pointCoordinate(new e.Point(this.width,0)),ie=this.pointCoordinate(new e.Point(this.width,this.height)),fe=this.pointCoordinate(new e.Point(0,this.height)),xe=Math.floor(Math.min(F.x,G.x,ie.x,fe.x)),ke=Math.floor(Math.max(F.x,G.x,ie.x,fe.x)),Ce=xe-1;Ce<=ke+1;Ce++)0!==Ce&&z.push(new e.UnwrappedTileID(Ce,L));return z},Yt.prototype.coveringTiles=function(L){var z=this.coveringZoomLevel(L),F=z;if(void 0!==L.minzoom&&z<L.minzoom)return[];void 0!==L.maxzoom&&z>L.maxzoom&&(z=L.maxzoom);var G=e.MercatorCoordinate.fromLngLat(this.center),ie=Math.pow(2,z),fe=[ie*G.x,ie*G.y,0],xe=ft.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,z),ke=L.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ke=z);var Ce=function(yn){return{aabb:new zt([yn*ie,0,0],[(yn+1)*ie,ie,0]),zoom:0,x:0,y:0,wrap:yn,fullyVisible:!1}},Ue=[],$e=[],at=z,kt=L.reparseOverscaled?F:z;if(this._renderWorldCopies)for(var Pt=1;Pt<=3;Pt++)Ue.push(Ce(-Pt)),Ue.push(Ce(Pt));for(Ue.push(Ce(0));Ue.length>0;){var St=Ue.pop(),Et=St.x,wt=St.y,jt=St.fullyVisible;if(!jt){var Nt=St.aabb.intersects(xe);if(0===Nt)continue;jt=2===Nt}var Gt=St.aabb.distanceX(fe),lr=St.aabb.distanceY(fe),yr=Math.max(Math.abs(Gt),Math.abs(lr));if(St.zoom===at||yr>3+(1<<at-St.zoom)-2&&St.zoom>=ke)$e.push({tileID:new e.OverscaledTileID(St.zoom===at?kt:St.zoom,St.wrap,St.zoom,Et,wt),distanceSq:e.sqrLen([fe[0]-.5-Et,fe[1]-.5-wt])});else for(var Cr=0;Cr<4;Cr++){var tn=(Et<<1)+Cr%2,en=(wt<<1)+(Cr>>1);Ue.push({aabb:St.aabb.quadrant(Cr),zoom:St.zoom+1,x:tn,y:en,wrap:St.wrap,fullyVisible:jt})}}return $e.sort(function(yn,pn){return yn.distanceSq-pn.distanceSq}).map(function(yn){return yn.tileID})},Yt.prototype.resize=function(L,z){this.width=L,this.height=z,this.pixelsToGLUnits=[2/L,-2/z],this._constrain(),this._calcMatrices()},hr.unmodified.get=function(){return this._unmodified},Yt.prototype.zoomScale=function(L){return Math.pow(2,L)},Yt.prototype.scaleZoom=function(L){return Math.log(L)/Math.LN2},Yt.prototype.project=function(L){var z=e.clamp(L.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(L.lng)*this.worldSize,e.mercatorYfromLat(z)*this.worldSize)},Yt.prototype.unproject=function(L){return new e.MercatorCoordinate(L.x/this.worldSize,L.y/this.worldSize).toLngLat()},hr.point.get=function(){return this.project(this.center)},Yt.prototype.setLocationAtPoint=function(L,z){var F=this.pointCoordinate(z),G=this.pointCoordinate(this.centerPoint),ie=this.locationCoordinate(L),fe=new e.MercatorCoordinate(ie.x-(F.x-G.x),ie.y-(F.y-G.y));this.center=this.coordinateLocation(fe),this._renderWorldCopies&&(this.center=this.center.wrap())},Yt.prototype.locationPoint=function(L){return this.coordinatePoint(this.locationCoordinate(L))},Yt.prototype.pointLocation=function(L){return this.coordinateLocation(this.pointCoordinate(L))},Yt.prototype.locationCoordinate=function(L){return e.MercatorCoordinate.fromLngLat(L)},Yt.prototype.coordinateLocation=function(L){return L.toLngLat()},Yt.prototype.pointCoordinate=function(L){var z=[L.x,L.y,0,1],F=[L.x,L.y,1,1];e.transformMat4(z,z,this.pixelMatrixInverse),e.transformMat4(F,F,this.pixelMatrixInverse);var G=z[3],ie=F[3],ke=z[1]/G,Ce=F[1]/ie,Ue=z[2]/G,$e=F[2]/ie,at=Ue===$e?0:(0-Ue)/($e-Ue);return new e.MercatorCoordinate(e.number(z[0]/G,F[0]/ie,at)/this.worldSize,e.number(ke,Ce,at)/this.worldSize)},Yt.prototype.coordinatePoint=function(L){var z=[L.x*this.worldSize,L.y*this.worldSize,0,1];return e.transformMat4(z,z,this.pixelMatrix),new e.Point(z[0]/z[3],z[1]/z[3])},Yt.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Yt.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Yt.prototype.setMaxBounds=function(L){L?(this.lngRange=[L.getWest(),L.getEast()],this.latRange=[L.getSouth(),L.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Yt.prototype.calculatePosMatrix=function(L,z){void 0===z&&(z=!1);var F=L.key,G=z?this._alignedPosMatrixCache:this._posMatrixCache;if(G[F])return G[F];var ie=L.canonical,fe=this.worldSize/this.zoomScale(ie.z),xe=ie.x+Math.pow(2,ie.z)*L.wrap,ke=e.identity(new Float64Array(16));return e.translate(ke,ke,[xe*fe,ie.y*fe,0]),e.scale(ke,ke,[fe/e.EXTENT,fe/e.EXTENT,1]),e.multiply(ke,z?this.alignedProjMatrix:this.projMatrix,ke),G[F]=new Float32Array(ke),G[F]},Yt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Yt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var L,z,F,G,ie=-90,fe=90,xe=-180,ke=180,Ce=this.size,Ue=this._unmodified;if(this.latRange){var $e=this.latRange;ie=e.mercatorYfromLat($e[1])*this.worldSize,L=(fe=e.mercatorYfromLat($e[0])*this.worldSize)-ie<Ce.y?Ce.y/(fe-ie):0}if(this.lngRange){var at=this.lngRange;xe=e.mercatorXfromLng(at[0])*this.worldSize,z=(ke=e.mercatorXfromLng(at[1])*this.worldSize)-xe<Ce.x?Ce.x/(ke-xe):0}var kt=this.point,Pt=Math.max(z||0,L||0);if(Pt)return this.center=this.unproject(new e.Point(z?(ke+xe)/2:kt.x,L?(fe+ie)/2:kt.y)),this.zoom+=this.scaleZoom(Pt),this._unmodified=Ue,void(this._constraining=!1);if(this.latRange){var St=kt.y,Et=Ce.y/2;St-Et<ie&&(G=ie+Et),St+Et>fe&&(G=fe-Et)}if(this.lngRange){var wt=kt.x,jt=Ce.x/2;wt-jt<xe&&(F=xe+jt),wt+jt>ke&&(F=ke-jt)}void 0===F&&void 0===G||(this.center=this.unproject(new e.Point(void 0!==F?F:kt.x,void 0!==G?G:kt.y))),this._unmodified=Ue,this._constraining=!1}},Yt.prototype._calcMatrices=function(){if(this.height){var z=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var F=Math.PI/2+this._pitch,G=this._fov*(.5+z.y/this.height),ie=Math.sin(G)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-F-G,.01,Math.PI-.01)),fe=this.point,xe=fe.x,ke=fe.y,Ce=1.01*(Math.cos(Math.PI/2-this._pitch)*ie+this.cameraToCenterDistance),Ue=this.height/50,$e=new Float64Array(16);e.perspective($e,this._fov,this.width/this.height,Ue,Ce),$e[8]=2*-z.x/this.width,$e[9]=2*z.y/this.height,e.scale($e,$e,[1,-1,1]),e.translate($e,$e,[0,0,-this.cameraToCenterDistance]),e.rotateX($e,$e,this._pitch),e.rotateZ($e,$e,this.angle),e.translate($e,$e,[-xe,-ke,0]),this.mercatorMatrix=e.scale([],$e,[this.worldSize,this.worldSize,this.worldSize]),e.scale($e,$e,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=$e,this.invProjMatrix=e.invert([],this.projMatrix);var at=this.width%2/2,kt=this.height%2/2,Pt=Math.cos(this.angle),St=Math.sin(this.angle),Et=xe-Math.round(xe)+Pt*at+St*kt,wt=ke-Math.round(ke)+Pt*kt+St*at,jt=new Float64Array($e);if(e.translate(jt,jt,[Et>.5?Et-1:Et,wt>.5?wt-1:wt,0]),this.alignedProjMatrix=jt,$e=e.create(),e.scale($e,$e,[this.width/2,-this.height/2,1]),e.translate($e,$e,[1,-1,0]),this.labelPlaneMatrix=$e,$e=e.create(),e.scale($e,$e,[1,-1,1]),e.translate($e,$e,[-1,-1,0]),e.scale($e,$e,[2/this.width,2/this.height,1]),this.glCoordMatrix=$e,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!($e=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=$e,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Yt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var L=this.pointCoordinate(new e.Point(0,0)),z=[L.x*this.worldSize,L.y*this.worldSize,0,1];return e.transformMat4(z,z,this.pixelMatrix)[3]/this.cameraToCenterDistance},Yt.prototype.getCameraPoint=function(){var z=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,z))},Yt.prototype.getCameraQueryGeometry=function(L){var z=this.getCameraPoint();if(1===L.length)return[L[0],z];for(var F=z.x,G=z.y,ie=z.x,fe=z.y,xe=0,ke=L;xe<ke.length;xe+=1){var Ce=ke[xe];F=Math.min(F,Ce.x),G=Math.min(G,Ce.y),ie=Math.max(ie,Ce.x),fe=Math.max(fe,Ce.y)}return[new e.Point(F,G),new e.Point(ie,G),new e.Point(ie,fe),new e.Point(F,fe),new e.Point(F,G)]},Object.defineProperties(Yt.prototype,hr);var Ir=function(L){var z,G,ie,fe;this._hashName=L&&encodeURIComponent(L),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(z=this._updateHashUnthrottled.bind(this),300,G=!1,ie=null,fe=function(){ie=null,G&&(z(),ie=setTimeout(fe,300),G=!1)},function(){return G=!0,ie||fe(),ie})};Ir.prototype.addTo=function(L){return this._map=L,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ir.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ir.prototype.getHashString=function(L){var z=this._map.getCenter(),F=Math.round(100*this._map.getZoom())/100,G=Math.ceil((F*Math.LN2+Math.log(512/360/.5))/Math.LN10),ie=Math.pow(10,G),fe=Math.round(z.lng*ie)/ie,xe=Math.round(z.lat*ie)/ie,ke=this._map.getBearing(),Ce=this._map.getPitch(),Ue="";if(Ue+=L?"/"+fe+"/"+xe+"/"+F:F+"/"+xe+"/"+fe,(ke||Ce)&&(Ue+="/"+Math.round(10*ke)/10),Ce&&(Ue+="/"+Math.round(Ce)),this._hashName){var $e=this._hashName,at=!1,kt=e.window.location.hash.slice(1).split("&").map(function(Pt){var St=Pt.split("=")[0];return St===$e?(at=!0,St+"="+Ue):Pt}).filter(function(Pt){return Pt});return at||kt.push($e+"="+Ue),"#"+kt.join("&")}return"#"+Ue},Ir.prototype._getCurrentHash=function(){var L,z=this,F=e.window.location.hash.replace("#","");return this._hashName?(F.split("&").map(function(G){return G.split("=")}).forEach(function(G){G[0]===z._hashName&&(L=G)}),(L&&L[1]||"").split("/")):F.split("/")},Ir.prototype._onHashChange=function(){var L=this._getCurrentHash();if(L.length>=3&&!L.some(function(F){return isNaN(F)})){var z=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(L[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+L[2],+L[1]],zoom:+L[0],bearing:z,pitch:+(L[4]||0)}),!0}return!1},Ir.prototype._updateHashUnthrottled=function(){var L=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",L)}catch{}};var Gr={linearity:.3,easing:e.bezier(0,0,.3,1)},$r=e.extend({deceleration:2500,maxSpeed:1400},Gr),dn=e.extend({deceleration:20,maxSpeed:1400},Gr),hn=e.extend({deceleration:1e3,maxSpeed:360},Gr),_n=e.extend({deceleration:1e3,maxSpeed:90},Gr),Cn=function(L){this._map=L,this.clear()};function mn(L,z){(!L.duration||L.duration<z.duration)&&(L.duration=z.duration,L.easing=z.easing)}function Ln(L,z,F){var G=F.maxSpeed,ie=F.linearity,fe=F.deceleration,xe=e.clamp(L*ie/(z/1e3),-G,G),ke=Math.abs(xe)/(fe*ie);return{easing:F.easing,duration:1e3*ke,amount:xe*(ke/2)}}Cn.prototype.clear=function(){this._inertiaBuffer=[]},Cn.prototype.record=function(L){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:L})},Cn.prototype._drainInertiaBuffer=function(){for(var L=this._inertiaBuffer,z=e.browser.now();L.length>0&&z-L[0].time>160;)L.shift()},Cn.prototype._onMoveEnd=function(L){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var z={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},F=0,G=this._inertiaBuffer;F<G.length;F+=1){var ie=G[F].settings;z.zoom+=ie.zoomDelta||0,z.bearing+=ie.bearingDelta||0,z.pitch+=ie.pitchDelta||0,ie.panDelta&&z.pan._add(ie.panDelta),ie.around&&(z.around=ie.around),ie.pinchAround&&(z.pinchAround=ie.pinchAround)}var fe=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,xe={};if(z.pan.mag()){var ke=Ln(z.pan.mag(),fe,e.extend({},$r,L||{}));xe.offset=z.pan.mult(ke.amount/z.pan.mag()),xe.center=this._map.transform.center,mn(xe,ke)}if(z.zoom){var Ce=Ln(z.zoom,fe,dn);xe.zoom=this._map.transform.zoom+Ce.amount,mn(xe,Ce)}if(z.bearing){var Ue=Ln(z.bearing,fe,hn);xe.bearing=this._map.transform.bearing+e.clamp(Ue.amount,-179,179),mn(xe,Ue)}if(z.pitch){var $e=Ln(z.pitch,fe,_n);xe.pitch=this._map.transform.pitch+$e.amount,mn(xe,$e)}if(xe.zoom||xe.bearing){var at=void 0===z.pinchAround?z.around:z.pinchAround;xe.around=at?this._map.unproject(at):this._map.getCenter()}return this.clear(),e.extend(xe,{noMoveStart:!0})}};var Un=function(L){function z(G,ie,fe,xe){void 0===xe&&(xe={});var ke=i.mousePos(ie.getCanvasContainer(),fe),Ce=ie.unproject(ke);L.call(this,G,e.extend({point:ke,lngLat:Ce,originalEvent:fe},xe)),this._defaultPrevented=!1,this.target=ie}L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z;var F={defaultPrevented:{configurable:!0}};return z.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(z.prototype,F),z}(e.Event),Wn=function(L){function z(G,ie,fe){var xe="touchend"===G?fe.changedTouches:fe.touches,ke=i.touchPos(ie.getCanvasContainer(),xe),Ce=ke.map(function(at){return ie.unproject(at)}),Ue=ke.reduce(function(at,kt,Pt,St){return at.add(kt.div(St.length))},new e.Point(0,0)),$e=ie.unproject(Ue);L.call(this,G,{points:ke,point:Ue,lngLats:Ce,lngLat:$e,originalEvent:fe}),this._defaultPrevented=!1}L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z;var F={defaultPrevented:{configurable:!0}};return z.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(z.prototype,F),z}(e.Event),fi=function(L){function z(G,ie,fe){L.call(this,G,{originalEvent:fe}),this._defaultPrevented=!1}L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z;var F={defaultPrevented:{configurable:!0}};return z.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(z.prototype,F),z}(e.Event),Qr=function(L,z){this._map=L,this._clickTolerance=z.clickTolerance};Qr.prototype.reset=function(){delete this._mousedownPos},Qr.prototype.wheel=function(L){return this._firePreventable(new fi(L.type,this._map,L))},Qr.prototype.mousedown=function(L,z){return this._mousedownPos=z,this._firePreventable(new Un(L.type,this._map,L))},Qr.prototype.mouseup=function(L){this._map.fire(new Un(L.type,this._map,L))},Qr.prototype.click=function(L,z){this._mousedownPos&&this._mousedownPos.dist(z)>=this._clickTolerance||this._map.fire(new Un(L.type,this._map,L))},Qr.prototype.dblclick=function(L){return this._firePreventable(new Un(L.type,this._map,L))},Qr.prototype.mouseover=function(L){this._map.fire(new Un(L.type,this._map,L))},Qr.prototype.mouseout=function(L){this._map.fire(new Un(L.type,this._map,L))},Qr.prototype.touchstart=function(L){return this._firePreventable(new Wn(L.type,this._map,L))},Qr.prototype.touchmove=function(L){this._map.fire(new Wn(L.type,this._map,L))},Qr.prototype.touchend=function(L){this._map.fire(new Wn(L.type,this._map,L))},Qr.prototype.touchcancel=function(L){this._map.fire(new Wn(L.type,this._map,L))},Qr.prototype._firePreventable=function(L){if(this._map.fire(L),L.defaultPrevented)return{}},Qr.prototype.isEnabled=function(){return!0},Qr.prototype.isActive=function(){return!1},Qr.prototype.enable=function(){},Qr.prototype.disable=function(){};var li=function(L){this._map=L};li.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},li.prototype.mousemove=function(L){this._map.fire(new Un(L.type,this._map,L))},li.prototype.mousedown=function(){this._delayContextMenu=!0},li.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Un("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},li.prototype.contextmenu=function(L){this._delayContextMenu?this._contextMenuEvent=L:this._map.fire(new Un(L.type,this._map,L)),this._map.listens("contextmenu")&&L.preventDefault()},li.prototype.isEnabled=function(){return!0},li.prototype.isActive=function(){return!1},li.prototype.enable=function(){},li.prototype.disable=function(){};var Fn=function(L,z){this._map=L,this._el=L.getCanvasContainer(),this._container=L.getContainer(),this._clickTolerance=z.clickTolerance||1};function qn(L,z){for(var F={},G=0;G<L.length;G++)F[L[G].identifier]=z[G];return F}Fn.prototype.isEnabled=function(){return!!this._enabled},Fn.prototype.isActive=function(){return!!this._active},Fn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Fn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Fn.prototype.mousedown=function(L,z){this.isEnabled()&&L.shiftKey&&0===L.button&&(i.disableDrag(),this._startPos=this._lastPos=z,this._active=!0)},Fn.prototype.mousemoveWindow=function(L,z){if(this._active){var F=z;if(!(this._lastPos.equals(F)||!this._box&&F.dist(this._startPos)<this._clickTolerance)){var G=this._startPos;this._lastPos=F,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",L));var ie=Math.min(G.x,F.x),fe=Math.max(G.x,F.x),xe=Math.min(G.y,F.y),ke=Math.max(G.y,F.y);i.setTransform(this._box,"translate("+ie+"px,"+xe+"px)"),this._box.style.width=fe-ie+"px",this._box.style.height=ke-xe+"px"}}},Fn.prototype.mouseupWindow=function(L,z){var F=this;if(this._active&&0===L.button){var G=this._startPos,ie=z;if(this.reset(),i.suppressClick(),G.x!==ie.x||G.y!==ie.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:L})),{cameraAnimation:function(fe){return fe.fitScreenCoordinates(G,ie,F._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",L)}},Fn.prototype.keydown=function(L){this._active&&27===L.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",L))},Fn.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},Fn.prototype._fireEvent=function(L,z){return this._map.fire(new e.Event(L,{originalEvent:z}))};var oi=function(L){this.reset(),this.numTouches=L.numTouches};oi.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},oi.prototype.touchstart=function(L,z,F){(this.centroid||F.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=L.timeStamp),F.length===this.numTouches&&(this.centroid=function(G){for(var ie=new e.Point(0,0),fe=0,xe=G;fe<xe.length;fe+=1)ie._add(xe[fe]);return ie.div(G.length)}(z),this.touches=qn(F,z)))},oi.prototype.touchmove=function(L,z,F){if(!this.aborted&&this.centroid){var G=qn(F,z);for(var ie in this.touches){var xe=G[ie];(!xe||xe.dist(this.touches[ie])>30)&&(this.aborted=!0)}}},oi.prototype.touchend=function(L,z,F){if((!this.centroid||L.timeStamp-this.startTime>500)&&(this.aborted=!0),0===F.length){var G=!this.aborted&&this.centroid;if(this.reset(),G)return G}};var Pi=function(L){this.singleTap=new oi(L),this.numTaps=L.numTaps,this.reset()};Pi.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Pi.prototype.touchstart=function(L,z,F){this.singleTap.touchstart(L,z,F)},Pi.prototype.touchmove=function(L,z,F){this.singleTap.touchmove(L,z,F)},Pi.prototype.touchend=function(L,z,F){var G=this.singleTap.touchend(L,z,F);if(G){var ie=L.timeStamp-this.lastTime<500,fe=!this.lastTap||this.lastTap.dist(G)<30;if(ie&&fe||this.reset(),this.count++,this.lastTime=L.timeStamp,this.lastTap=G,this.count===this.numTaps)return this.reset(),G}};var zi=function(){this._zoomIn=new Pi({numTouches:1,numTaps:2}),this._zoomOut=new Pi({numTouches:2,numTaps:1}),this.reset()};zi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},zi.prototype.touchstart=function(L,z,F){this._zoomIn.touchstart(L,z,F),this._zoomOut.touchstart(L,z,F)},zi.prototype.touchmove=function(L,z,F){this._zoomIn.touchmove(L,z,F),this._zoomOut.touchmove(L,z,F)},zi.prototype.touchend=function(L,z,F){var G=this,ie=this._zoomIn.touchend(L,z,F),fe=this._zoomOut.touchend(L,z,F);return ie?(this._active=!0,L.preventDefault(),setTimeout(function(){return G.reset()},0),{cameraAnimation:function(xe){return xe.easeTo({duration:300,zoom:xe.getZoom()+1,around:xe.unproject(ie)},{originalEvent:L})}}):fe?(this._active=!0,L.preventDefault(),setTimeout(function(){return G.reset()},0),{cameraAnimation:function(xe){return xe.easeTo({duration:300,zoom:xe.getZoom()-1,around:xe.unproject(fe)},{originalEvent:L})}}):void 0},zi.prototype.touchcancel=function(){this.reset()},zi.prototype.enable=function(){this._enabled=!0},zi.prototype.disable=function(){this._enabled=!1,this.reset()},zi.prototype.isEnabled=function(){return this._enabled},zi.prototype.isActive=function(){return this._active};var zn=function(L){this.reset(),this._clickTolerance=L.clickTolerance||1};zn.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},zn.prototype._correctButton=function(L,z){return!1},zn.prototype._move=function(L,z){return{}},zn.prototype.mousedown=function(L,z){if(!this._lastPoint){var F=i.mouseButton(L);this._correctButton(L,F)&&(this._lastPoint=z,this._eventButton=F)}},zn.prototype.mousemoveWindow=function(L,z){var F=this._lastPoint;if(F&&(L.preventDefault(),this._moved||!(z.dist(F)<this._clickTolerance)))return this._moved=!0,this._lastPoint=z,this._move(F,z)},zn.prototype.mouseupWindow=function(L){i.mouseButton(L)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},zn.prototype.enable=function(){this._enabled=!0},zn.prototype.disable=function(){this._enabled=!1,this.reset()},zn.prototype.isEnabled=function(){return this._enabled},zn.prototype.isActive=function(){return this._active};var Vi=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.mousedown=function(F,G){L.prototype.mousedown.call(this,F,G),this._lastPoint&&(this._active=!0)},z.prototype._correctButton=function(F,G){return 0===G&&!F.ctrlKey},z.prototype._move=function(F,G){return{around:G,panDelta:G.sub(F)}},z}(zn),Di=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype._correctButton=function(F,G){return 0===G&&F.ctrlKey||2===G},z.prototype._move=function(F,G){var ie=.8*(G.x-F.x);if(ie)return this._active=!0,{bearingDelta:ie}},z.prototype.contextmenu=function(F){F.preventDefault()},z}(zn),_i=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype._correctButton=function(F,G){return 0===G&&F.ctrlKey||2===G},z.prototype._move=function(F,G){var ie=-.5*(G.y-F.y);if(ie)return this._active=!0,{pitchDelta:ie}},z.prototype.contextmenu=function(F){F.preventDefault()},z}(zn),Ui=function(L){this._minTouches=1,this._clickTolerance=L.clickTolerance||1,this.reset()};Ui.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Ui.prototype.touchstart=function(L,z,F){return this._calculateTransform(L,z,F)},Ui.prototype.touchmove=function(L,z,F){if(this._active)return L.preventDefault(),this._calculateTransform(L,z,F)},Ui.prototype.touchend=function(L,z,F){this._calculateTransform(L,z,F),this._active&&F.length<this._minTouches&&this.reset()},Ui.prototype.touchcancel=function(){this.reset()},Ui.prototype._calculateTransform=function(L,z,F){F.length>0&&(this._active=!0);var G=qn(F,z),ie=new e.Point(0,0),fe=new e.Point(0,0),xe=0;for(var ke in G){var Ce=G[ke],Ue=this._touches[ke];Ue&&(ie._add(Ce),fe._add(Ce.sub(Ue)),xe++,G[ke]=Ce)}if(this._touches=G,!(xe<this._minTouches)&&fe.mag()){var $e=fe.div(xe);if(this._sum._add($e),!(this._sum.mag()<this._clickTolerance))return{around:ie.div(xe),panDelta:$e}}},Ui.prototype.enable=function(){this._enabled=!0},Ui.prototype.disable=function(){this._enabled=!1,this.reset()},Ui.prototype.isEnabled=function(){return this._enabled},Ui.prototype.isActive=function(){return this._active};var Ii=function(){this.reset()};function sa(L,z,F){for(var G=0;G<L.length;G++)if(L[G].identifier===F)return z[G]}function ci(L,z){return Math.log(L/z)/Math.LN2}Ii.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ii.prototype._start=function(L){},Ii.prototype._move=function(L,z,F){return{}},Ii.prototype.touchstart=function(L,z,F){this._firstTwoTouches||F.length<2||(this._firstTwoTouches=[F[0].identifier,F[1].identifier],this._start([z[0],z[1]]))},Ii.prototype.touchmove=function(L,z,F){if(this._firstTwoTouches){L.preventDefault();var G=this._firstTwoTouches,fe=G[1],xe=sa(F,z,G[0]),ke=sa(F,z,fe);if(xe&&ke){var Ce=this._aroundCenter?null:xe.add(ke).div(2);return this._move([xe,ke],Ce,L)}}},Ii.prototype.touchend=function(L,z,F){if(this._firstTwoTouches){var G=this._firstTwoTouches,fe=G[1],xe=sa(F,z,G[0]),ke=sa(F,z,fe);xe&&ke||(this._active&&i.suppressClick(),this.reset())}},Ii.prototype.touchcancel=function(){this.reset()},Ii.prototype.enable=function(L){this._enabled=!0,this._aroundCenter=!!L&&"center"===L.around},Ii.prototype.disable=function(){this._enabled=!1,this.reset()},Ii.prototype.isEnabled=function(){return this._enabled},Ii.prototype.isActive=function(){return this._active};var Qi=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.reset=function(){L.prototype.reset.call(this),delete this._distance,delete this._startDistance},z.prototype._start=function(F){this._startDistance=this._distance=F[0].dist(F[1])},z.prototype._move=function(F,G){var ie=this._distance;if(this._distance=F[0].dist(F[1]),this._active||!(Math.abs(ci(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ci(this._distance,ie),pinchAround:G}},z}(Ii);function qa(L,z){return 180*L.angleWith(z)/Math.PI}var Yo=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.reset=function(){L.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},z.prototype._start=function(F){this._startVector=this._vector=F[0].sub(F[1]),this._minDiameter=F[0].dist(F[1])},z.prototype._move=function(F,G){var ie=this._vector;if(this._vector=F[0].sub(F[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:qa(this._vector,ie),pinchAround:G}},z.prototype._isBelowThreshold=function(F){this._minDiameter=Math.min(this._minDiameter,F.mag());var G=25/(Math.PI*this._minDiameter)*360,ie=qa(F,this._startVector);return Math.abs(ie)<G},z}(Ii);function Fo(L){return Math.abs(L.y)>Math.abs(L.x)}var xo=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.reset=function(){L.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},z.prototype._start=function(F){this._lastPoints=F,Fo(F[0].sub(F[1]))&&(this._valid=!1)},z.prototype._move=function(F,G,ie){var fe=F[0].sub(this._lastPoints[0]),xe=F[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(fe,xe,ie.timeStamp),this._valid)return this._lastPoints=F,this._active=!0,{pitchDelta:(fe.y+xe.y)/2*-.5}},z.prototype.gestureBeginsVertically=function(F,G,ie){if(void 0!==this._valid)return this._valid;var fe=F.mag()>=2,xe=G.mag()>=2;if(fe||xe){if(!fe||!xe)return void 0===this._firstMove&&(this._firstMove=ie),ie-this._firstMove<100&&void 0;var ke=F.y>0==G.y>0;return Fo(F)&&Fo(G)&&ke}},z}(Ii),ki={panStep:100,bearingStep:15,pitchStep:10},wa=function(){var L=ki;this._panStep=L.panStep,this._bearingStep=L.bearingStep,this._pitchStep=L.pitchStep};function bo(L){return L*(2-L)}wa.prototype.reset=function(){this._active=!1},wa.prototype.keydown=function(L){var z=this;if(!(L.altKey||L.ctrlKey||L.metaKey)){var F=0,G=0,ie=0,fe=0,xe=0;switch(L.keyCode){case 61:case 107:case 171:case 187:F=1;break;case 189:case 109:case 173:F=-1;break;case 37:L.shiftKey?G=-1:(L.preventDefault(),fe=-1);break;case 39:L.shiftKey?G=1:(L.preventDefault(),fe=1);break;case 38:L.shiftKey?ie=1:(L.preventDefault(),xe=-1);break;case 40:L.shiftKey?ie=-1:(L.preventDefault(),xe=1);break;default:return}return{cameraAnimation:function(ke){var Ce=ke.getZoom();ke.easeTo({duration:300,easeId:"keyboardHandler",easing:bo,zoom:F?Math.round(Ce)+F*(L.shiftKey?2:1):Ce,bearing:ke.getBearing()+G*z._bearingStep,pitch:ke.getPitch()+ie*z._pitchStep,offset:[-fe*z._panStep,-xe*z._panStep],center:ke.getCenter()},{originalEvent:L})}}}},wa.prototype.enable=function(){this._enabled=!0},wa.prototype.disable=function(){this._enabled=!1,this.reset()},wa.prototype.isEnabled=function(){return this._enabled},wa.prototype.isActive=function(){return this._active};var ea=function(L,z){this._map=L,this._el=L.getCanvasContainer(),this._handler=z,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ea.prototype.setZoomRate=function(L){this._defaultZoomRate=L},ea.prototype.setWheelZoomRate=function(L){this._wheelZoomRate=L},ea.prototype.isEnabled=function(){return!!this._enabled},ea.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},ea.prototype.isZooming=function(){return!!this._zooming},ea.prototype.enable=function(L){this.isEnabled()||(this._enabled=!0,this._aroundCenter=L&&"center"===L.around)},ea.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ea.prototype.wheel=function(L){if(this.isEnabled()){var z=L.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*L.deltaY:L.deltaY,F=e.browser.now(),G=F-(this._lastWheelEventTime||0);this._lastWheelEventTime=F,0!==z&&z%4.000244140625==0?this._type="wheel":0!==z&&Math.abs(z)<4?this._type="trackpad":G>400?(this._type=null,this._lastValue=z,this._timeout=setTimeout(this._onTimeout,40,L)):this._type||(this._type=Math.abs(G*z)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,z+=this._lastValue)),L.shiftKey&&z&&(z/=4),this._type&&(this._lastWheelEvent=L,this._delta-=z,this._active||this._start(L)),L.preventDefault()}},ea.prototype._onTimeout=function(L){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(L)},ea.prototype._start=function(L){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var z=i.mousePos(this._el,L);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(z)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ea.prototype.renderFrame=function(){return this._onScrollFrame()},ea.prototype._onScrollFrame=function(){var L=this;if(this._frameId&&(this._frameId=null,this.isActive())){var z=this._map.transform;if(0!==this._delta){var F="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,G=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&0!==G&&(G=1/G);var ie="number"==typeof this._targetZoom?z.zoomScale(this._targetZoom):z.scale;this._targetZoom=Math.min(z.maxZoom,Math.max(z.minZoom,z.scaleZoom(ie*G))),"wheel"===this._type&&(this._startZoom=z.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var fe,xe="number"==typeof this._targetZoom?this._targetZoom:z.zoom,ke=this._startZoom,Ce=this._easing,Ue=!1;if("wheel"===this._type&&ke&&Ce){var $e=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),at=Ce($e);fe=e.number(ke,xe,at),$e<1?this._frameId||(this._frameId=!0):Ue=!0}else fe=xe,Ue=!0;return this._active=!0,Ue&&(this._active=!1,this._finishTimeout=setTimeout(function(){L._zooming=!1,L._handler._triggerRenderFrame(),delete L._targetZoom,delete L._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ue,zoomDelta:fe-z.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ea.prototype._smoothOutEasing=function(L){var z=e.ease;if(this._prevEase){var F=this._prevEase,G=(e.browser.now()-F.start)/F.duration,ie=F.easing(G+.01)-F.easing(G),fe=.27/Math.sqrt(ie*ie+1e-4)*.01,xe=Math.sqrt(.0729-fe*fe);z=e.bezier(fe,xe,.25,1)}return this._prevEase={start:e.browser.now(),duration:L,easing:z},z},ea.prototype.reset=function(){this._active=!1};var Ca=function(L,z){this._clickZoom=L,this._tapZoom=z};Ca.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ca.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ca.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ca.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ka=function(){this.reset()};Ka.prototype.reset=function(){this._active=!1},Ka.prototype.dblclick=function(L,z){return L.preventDefault(),{cameraAnimation:function(F){F.easeTo({duration:300,zoom:F.getZoom()+(L.shiftKey?-1:1),around:F.unproject(z)},{originalEvent:L})}}},Ka.prototype.enable=function(){this._enabled=!0},Ka.prototype.disable=function(){this._enabled=!1,this.reset()},Ka.prototype.isEnabled=function(){return this._enabled},Ka.prototype.isActive=function(){return this._active};var ua=function(){this._tap=new Pi({numTouches:1,numTaps:1}),this.reset()};ua.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ua.prototype.touchstart=function(L,z,F){this._swipePoint||(this._tapTime&&L.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?F.length>0&&(this._swipePoint=z[0],this._swipeTouch=F[0].identifier):this._tap.touchstart(L,z,F))},ua.prototype.touchmove=function(L,z,F){if(this._tapTime){if(this._swipePoint){if(F[0].identifier!==this._swipeTouch)return;var G=z[0],ie=G.y-this._swipePoint.y;return this._swipePoint=G,L.preventDefault(),this._active=!0,{zoomDelta:ie/128}}}else this._tap.touchmove(L,z,F)},ua.prototype.touchend=function(L,z,F){this._tapTime?this._swipePoint&&0===F.length&&this.reset():this._tap.touchend(L,z,F)&&(this._tapTime=L.timeStamp)},ua.prototype.touchcancel=function(){this.reset()},ua.prototype.enable=function(){this._enabled=!0},ua.prototype.disable=function(){this._enabled=!1,this.reset()},ua.prototype.isEnabled=function(){return this._enabled},ua.prototype.isActive=function(){return this._active};var go=function(L,z,F){this._el=L,this._mousePan=z,this._touchPan=F};go.prototype.enable=function(L){this._inertiaOptions=L||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},go.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},go.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},go.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var fa=function(L,z,F){this._pitchWithRotate=L.pitchWithRotate,this._mouseRotate=z,this._mousePitch=F};fa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},fa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},fa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},fa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ao=function(L,z,F,G){this._el=L,this._touchZoom=z,this._touchRotate=F,this._tapDragZoom=G,this._rotationDisabled=!1,this._enabled=!0};ao.prototype.enable=function(L){this._touchZoom.enable(L),this._rotationDisabled||this._touchRotate.enable(L),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ao.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ao.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ao.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ao.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ao.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var us=function(L){return L.zoom||L.drag||L.pitch||L.rotate},es=function(L){function z(){L.apply(this,arguments)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z}(e.Event);function Is(L){return L.panDelta&&L.panDelta.mag()||L.zoomDelta||L.bearingDelta||L.pitchDelta}var ja=function(L,z){this._map=L,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Cn(L),this._bearingSnap=z.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(z),e.bindAll(["handleEvent","handleWindowEvent"],this);var F=this._el;this._listeners=[[F,"touchstart",{passive:!1}],[F,"touchmove",{passive:!1}],[F,"touchend",void 0],[F,"touchcancel",void 0],[F,"mousedown",void 0],[F,"mousemove",void 0],[F,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[F,"mouseover",void 0],[F,"mouseout",void 0],[F,"dblclick",void 0],[F,"click",void 0],[F,"keydown",{capture:!1}],[F,"keyup",void 0],[F,"wheel",{passive:!1}],[F,"contextmenu",void 0],[e.window,"blur",void 0]];for(var G=0,ie=this._listeners;G<ie.length;G+=1){var fe=ie[G],xe=fe[0];i.addEventListener(xe,fe[1],xe===e.window.document?this.handleWindowEvent:this.handleEvent,fe[2])}};ja.prototype.destroy=function(){for(var L=0,z=this._listeners;L<z.length;L+=1){var F=z[L],G=F[0];i.removeEventListener(G,F[1],G===e.window.document?this.handleWindowEvent:this.handleEvent,F[2])}},ja.prototype._addDefaultHandlers=function(L){var z=this._map,F=z.getCanvasContainer();this._add("mapEvent",new Qr(z,L));var G=z.boxZoom=new Fn(z,L);this._add("boxZoom",G);var ie=new zi,fe=new Ka;z.doubleClickZoom=new Ca(fe,ie),this._add("tapZoom",ie),this._add("clickZoom",fe);var xe=new ua;this._add("tapDragZoom",xe);var ke=z.touchPitch=new xo;this._add("touchPitch",ke);var Ce=new Di(L),Ue=new _i(L);z.dragRotate=new fa(L,Ce,Ue),this._add("mouseRotate",Ce,["mousePitch"]),this._add("mousePitch",Ue,["mouseRotate"]);var $e=new Vi(L),at=new Ui(L);z.dragPan=new go(F,$e,at),this._add("mousePan",$e),this._add("touchPan",at,["touchZoom","touchRotate"]);var kt=new Yo,Pt=new Qi;z.touchZoomRotate=new ao(F,Pt,kt,xe),this._add("touchRotate",kt,["touchPan","touchZoom"]),this._add("touchZoom",Pt,["touchPan","touchRotate"]);var St=z.scrollZoom=new ea(z,this);this._add("scrollZoom",St,["mousePan"]);var Et=z.keyboard=new wa;this._add("keyboard",Et),this._add("blockableMapEvent",new li(z));for(var wt=0,jt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];wt<jt.length;wt+=1){var Nt=jt[wt];L.interactive&&L[Nt]&&z[Nt].enable(L[Nt])}},ja.prototype._add=function(L,z,F){this._handlers.push({handlerName:L,handler:z,allowed:F}),this._handlersById[L]=z},ja.prototype.stop=function(){if(!this._updatingCamera){for(var L=0,z=this._handlers;L<z.length;L+=1)z[L].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ja.prototype.isActive=function(){for(var L=0,z=this._handlers;L<z.length;L+=1)if(z[L].handler.isActive())return!0;return!1},ja.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ja.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ja.prototype.isMoving=function(){return Boolean(us(this._eventsInProgress))||this.isZooming()},ja.prototype._blockedByActive=function(L,z,F){for(var G in L)if(G!==F&&(!z||z.indexOf(G)<0))return!0;return!1},ja.prototype.handleWindowEvent=function(L){this.handleEvent(L,L.type+"Window")},ja.prototype._getMapTouches=function(L){for(var z=[],F=0,G=L;F<G.length;F+=1){var ie=G[F];this._el.contains(ie.target)&&z.push(ie)}return z},ja.prototype.handleEvent=function(L,z){if("blur"!==L.type){this._updatingCamera=!0;for(var F="renderFrame"===L.type?void 0:L,G={needsRenderFrame:!1},ie={},fe={},xe=L.touches?this._getMapTouches(L.touches):void 0,ke=xe?i.touchPos(this._el,xe):i.mousePos(this._el,L),Ce=0,Ue=this._handlers;Ce<Ue.length;Ce+=1){var $e=Ue[Ce],at=$e.handlerName,kt=$e.handler,Pt=$e.allowed;if(kt.isEnabled()){var St=void 0;this._blockedByActive(fe,Pt,at)?kt.reset():kt[z||L.type]&&(St=kt[z||L.type](L,ke,xe),this.mergeHandlerResult(G,ie,St,at,F),St&&St.needsRenderFrame&&this._triggerRenderFrame()),(St||kt.isActive())&&(fe[at]=kt)}}var Et={};for(var wt in this._previousActiveHandlers)fe[wt]||(Et[wt]=F);this._previousActiveHandlers=fe,(Object.keys(Et).length||Is(G))&&(this._changes.push([G,ie,Et]),this._triggerRenderFrame()),(Object.keys(fe).length||Is(G))&&this._map._stop(!0),this._updatingCamera=!1;var jt=G.cameraAnimation;jt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],jt(this._map))}else this.stop()},ja.prototype.mergeHandlerResult=function(L,z,F,G,ie){if(F){e.extend(L,F);var fe={handlerName:G,originalEvent:F.originalEvent||ie};void 0!==F.zoomDelta&&(z.zoom=fe),void 0!==F.panDelta&&(z.drag=fe),void 0!==F.pitchDelta&&(z.pitch=fe),void 0!==F.bearingDelta&&(z.rotate=fe)}},ja.prototype._applyChanges=function(){for(var L={},z={},F={},G=0,ie=this._changes;G<ie.length;G+=1){var fe=ie[G],xe=fe[0],ke=fe[1],Ce=fe[2];xe.panDelta&&(L.panDelta=(L.panDelta||new e.Point(0,0))._add(xe.panDelta)),xe.zoomDelta&&(L.zoomDelta=(L.zoomDelta||0)+xe.zoomDelta),xe.bearingDelta&&(L.bearingDelta=(L.bearingDelta||0)+xe.bearingDelta),xe.pitchDelta&&(L.pitchDelta=(L.pitchDelta||0)+xe.pitchDelta),void 0!==xe.around&&(L.around=xe.around),void 0!==xe.pinchAround&&(L.pinchAround=xe.pinchAround),xe.noInertia&&(L.noInertia=xe.noInertia),e.extend(z,ke),e.extend(F,Ce)}this._updateMapTransform(L,z,F),this._changes=[]},ja.prototype._updateMapTransform=function(L,z,F){var G=this._map,ie=G.transform;if(!Is(L))return this._fireEvents(z,F);var fe=L.panDelta,xe=L.zoomDelta,ke=L.bearingDelta,Ce=L.pitchDelta,Ue=L.around,$e=L.pinchAround;void 0!==$e&&(Ue=$e),G._stop(!0),Ue=Ue||G.transform.centerPoint;var at=ie.pointLocation(fe?Ue.sub(fe):Ue);ke&&(ie.bearing+=ke),Ce&&(ie.pitch+=Ce),xe&&(ie.zoom+=xe),ie.setLocationAtPoint(at,Ue),this._map._update(),L.noInertia||this._inertia.record(L),this._fireEvents(z,F)},ja.prototype._fireEvents=function(L,z){var F=this,G=us(this._eventsInProgress),ie=us(L),fe={};for(var xe in L)this._eventsInProgress[xe]||(fe[xe+"start"]=L[xe].originalEvent),this._eventsInProgress[xe]=L[xe];for(var Ce in!G&&ie&&this._fireEvent("movestart",ie.originalEvent),fe)this._fireEvent(Ce,fe[Ce]);for(var Ue in L.rotate&&(this._bearingChanged=!0),ie&&this._fireEvent("move",ie.originalEvent),L)this._fireEvent(Ue,L[Ue].originalEvent);var at,kt={};for(var Pt in this._eventsInProgress){var St=this._eventsInProgress[Pt],Et=St.handlerName,wt=St.originalEvent;this._handlersById[Et].isActive()||(delete this._eventsInProgress[Pt],kt[Pt+"end"]=at=z[Et]||wt)}for(var jt in kt)this._fireEvent(jt,kt[jt]);var Nt=us(this._eventsInProgress);if((G||ie)&&!Nt){this._updatingCamera=!0;var Gt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),lr=function(yr){return 0!==yr&&-F._bearingSnap<yr&&yr<F._bearingSnap};Gt?(lr(Gt.bearing||this._map.getBearing())&&(Gt.bearing=0),this._map.easeTo(Gt,{originalEvent:at})):(this._map.fire(new e.Event("moveend",{originalEvent:at})),lr(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ja.prototype._fireEvent=function(L,z){this._map.fire(new e.Event(L,z?{originalEvent:z}:{}))},ja.prototype._triggerRenderFrame=function(){var L=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(z){delete L._frameId,L.handleEvent(new es("renderFrame",{timeStamp:z})),L._applyChanges()}))};var Os=function(L){function z(F,G){L.call(this),this._moving=!1,this._zooming=!1,this.transform=F,this._bearingSnap=G.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},z.prototype.setCenter=function(F,G){return this.jumpTo({center:F},G)},z.prototype.panBy=function(F,G,ie){return F=e.Point.convert(F).mult(-1),this.panTo(this.transform.center,e.extend({offset:F},G),ie)},z.prototype.panTo=function(F,G,ie){return this.easeTo(e.extend({center:F},G),ie)},z.prototype.getZoom=function(){return this.transform.zoom},z.prototype.setZoom=function(F,G){return this.jumpTo({zoom:F},G),this},z.prototype.zoomTo=function(F,G,ie){return this.easeTo(e.extend({zoom:F},G),ie)},z.prototype.zoomIn=function(F,G){return this.zoomTo(this.getZoom()+1,F,G),this},z.prototype.zoomOut=function(F,G){return this.zoomTo(this.getZoom()-1,F,G),this},z.prototype.getBearing=function(){return this.transform.bearing},z.prototype.setBearing=function(F,G){return this.jumpTo({bearing:F},G),this},z.prototype.getPadding=function(){return this.transform.padding},z.prototype.setPadding=function(F,G){return this.jumpTo({padding:F},G),this},z.prototype.rotateTo=function(F,G,ie){return this.easeTo(e.extend({bearing:F},G),ie)},z.prototype.resetNorth=function(F,G){return this.rotateTo(0,e.extend({duration:1e3},F),G),this},z.prototype.resetNorthPitch=function(F,G){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},F),G),this},z.prototype.snapToNorth=function(F,G){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(F,G):this},z.prototype.getPitch=function(){return this.transform.pitch},z.prototype.setPitch=function(F,G){return this.jumpTo({pitch:F},G),this},z.prototype.cameraForBounds=function(F,G){return F=e.LngLatBounds.convert(F),this._cameraForBoxAndBearing(F.getNorthWest(),F.getSouthEast(),0,G)},z.prototype._cameraForBoxAndBearing=function(F,G,ie,fe){var xe={top:0,bottom:0,right:0,left:0};if("number"==typeof(fe=e.extend({padding:xe,offset:[0,0],maxZoom:this.transform.maxZoom},fe)).padding){var ke=fe.padding;fe.padding={top:ke,bottom:ke,right:ke,left:ke}}fe.padding=e.extend(xe,fe.padding);var Ce=this.transform,Ue=Ce.padding,$e=Ce.project(e.LngLat.convert(F)),at=Ce.project(e.LngLat.convert(G)),kt=$e.rotate(-ie*Math.PI/180),Pt=at.rotate(-ie*Math.PI/180),St=new e.Point(Math.max(kt.x,Pt.x),Math.max(kt.y,Pt.y)),Et=new e.Point(Math.min(kt.x,Pt.x),Math.min(kt.y,Pt.y)),wt=St.sub(Et),jt=(Ce.width-(Ue.left+Ue.right+fe.padding.left+fe.padding.right))/wt.x,Nt=(Ce.height-(Ue.top+Ue.bottom+fe.padding.top+fe.padding.bottom))/wt.y;if(!(Nt<0||jt<0)){var Gt=Math.min(Ce.scaleZoom(Ce.scale*Math.min(jt,Nt)),fe.maxZoom),lr=e.Point.convert(fe.offset),Cr=new e.Point(lr.x+(fe.padding.left-fe.padding.right)/2,lr.y+(fe.padding.top-fe.padding.bottom)/2).mult(Ce.scale/Ce.zoomScale(Gt));return{center:Ce.unproject($e.add(at).div(2).sub(Cr)),zoom:Gt,bearing:ie}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},z.prototype.fitBounds=function(F,G,ie){return this._fitInternal(this.cameraForBounds(F,G),G,ie)},z.prototype.fitScreenCoordinates=function(F,G,ie,fe,xe){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(F)),this.transform.pointLocation(e.Point.convert(G)),ie,fe),fe,xe)},z.prototype._fitInternal=function(F,G,ie){return F?(delete(G=e.extend(F,G)).padding,G.linear?this.easeTo(G,ie):this.flyTo(G,ie)):this},z.prototype.jumpTo=function(F,G){this.stop();var ie=this.transform,fe=!1,xe=!1,ke=!1;return"zoom"in F&&ie.zoom!==+F.zoom&&(fe=!0,ie.zoom=+F.zoom),void 0!==F.center&&(ie.center=e.LngLat.convert(F.center)),"bearing"in F&&ie.bearing!==+F.bearing&&(xe=!0,ie.bearing=+F.bearing),"pitch"in F&&ie.pitch!==+F.pitch&&(ke=!0,ie.pitch=+F.pitch),null==F.padding||ie.isPaddingEqual(F.padding)||(ie.padding=F.padding),this.fire(new e.Event("movestart",G)).fire(new e.Event("move",G)),fe&&this.fire(new e.Event("zoomstart",G)).fire(new e.Event("zoom",G)).fire(new e.Event("zoomend",G)),xe&&this.fire(new e.Event("rotatestart",G)).fire(new e.Event("rotate",G)).fire(new e.Event("rotateend",G)),ke&&this.fire(new e.Event("pitchstart",G)).fire(new e.Event("pitch",G)).fire(new e.Event("pitchend",G)),this.fire(new e.Event("moveend",G))},z.prototype.easeTo=function(F,G){var ie=this;this._stop(!1,F.easeId),(!1===(F=e.extend({offset:[0,0],duration:500,easing:e.ease},F)).animate||!F.essential&&e.browser.prefersReducedMotion)&&(F.duration=0);var fe=this.transform,xe=this.getZoom(),ke=this.getBearing(),Ce=this.getPitch(),Ue=this.getPadding(),$e="zoom"in F?+F.zoom:xe,at="bearing"in F?this._normalizeBearing(F.bearing,ke):ke,kt="pitch"in F?+F.pitch:Ce,Pt="padding"in F?F.padding:fe.padding,St=e.Point.convert(F.offset),Et=fe.centerPoint.add(St),wt=fe.pointLocation(Et),jt=e.LngLat.convert(F.center||wt);this._normalizeCenter(jt);var Nt,Gt,lr=fe.project(wt),yr=fe.project(jt).sub(lr),Or=fe.zoomScale($e-xe);F.around&&(Nt=e.LngLat.convert(F.around),Gt=fe.locationPoint(Nt));var Cr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||$e!==xe,this._rotating=this._rotating||ke!==at,this._pitching=this._pitching||kt!==Ce,this._padding=!fe.isPaddingEqual(Pt),this._easeId=F.easeId,this._prepareEase(G,F.noMoveStart,Cr),clearTimeout(this._easeEndTimeoutID),this._ease(function(tn){if(ie._zooming&&(fe.zoom=e.number(xe,$e,tn)),ie._rotating&&(fe.bearing=e.number(ke,at,tn)),ie._pitching&&(fe.pitch=e.number(Ce,kt,tn)),ie._padding&&(fe.interpolatePadding(Ue,Pt,tn),Et=fe.centerPoint.add(St)),Nt)fe.setLocationAtPoint(Nt,Gt);else{var en=fe.zoomScale(fe.zoom-xe),yn=$e>xe?Math.min(2,Or):Math.max(.5,Or),pn=Math.pow(yn,1-tn),Yn=fe.unproject(lr.add(yr.mult(tn*pn)).mult(en));fe.setLocationAtPoint(fe.renderWorldCopies?Yn.wrap():Yn,Et)}ie._fireMoveEvents(G)},function(tn){ie._afterEase(G,tn)},F),this},z.prototype._prepareEase=function(F,G,ie){void 0===ie&&(ie={}),this._moving=!0,G||ie.moving||this.fire(new e.Event("movestart",F)),this._zooming&&!ie.zooming&&this.fire(new e.Event("zoomstart",F)),this._rotating&&!ie.rotating&&this.fire(new e.Event("rotatestart",F)),this._pitching&&!ie.pitching&&this.fire(new e.Event("pitchstart",F))},z.prototype._fireMoveEvents=function(F){this.fire(new e.Event("move",F)),this._zooming&&this.fire(new e.Event("zoom",F)),this._rotating&&this.fire(new e.Event("rotate",F)),this._pitching&&this.fire(new e.Event("pitch",F))},z.prototype._afterEase=function(F,G){if(!this._easeId||!G||this._easeId!==G){delete this._easeId;var ie=this._zooming,fe=this._rotating,xe=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,ie&&this.fire(new e.Event("zoomend",F)),fe&&this.fire(new e.Event("rotateend",F)),xe&&this.fire(new e.Event("pitchend",F)),this.fire(new e.Event("moveend",F))}},z.prototype.flyTo=function(F,G){var ie=this;if(!F.essential&&e.browser.prefersReducedMotion){var fe=e.pick(F,["center","zoom","bearing","pitch","around"]);return this.jumpTo(fe,G)}this.stop(),F=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},F);var xe=this.transform,ke=this.getZoom(),Ce=this.getBearing(),Ue=this.getPitch(),$e=this.getPadding(),at="zoom"in F?e.clamp(+F.zoom,xe.minZoom,xe.maxZoom):ke,kt="bearing"in F?this._normalizeBearing(F.bearing,Ce):Ce,Pt="pitch"in F?+F.pitch:Ue,St="padding"in F?F.padding:xe.padding,Et=xe.zoomScale(at-ke),wt=e.Point.convert(F.offset),jt=xe.centerPoint.add(wt),Nt=xe.pointLocation(jt),Gt=e.LngLat.convert(F.center||Nt);this._normalizeCenter(Gt);var lr=xe.project(Nt),yr=xe.project(Gt).sub(lr),Or=F.curve,Cr=Math.max(xe.width,xe.height),tn=Cr/Et,en=yr.mag();if("minZoom"in F){var yn=e.clamp(Math.min(F.minZoom,ke,at),xe.minZoom,xe.maxZoom),pn=Cr/xe.zoomScale(yn-ke);Or=Math.sqrt(pn/en*2)}var Yn=Or*Or;function ti(ai){var Mi=(tn*tn-Cr*Cr+(ai?-1:1)*Yn*Yn*en*en)/(2*(ai?tn:Cr)*Yn*en);return Math.log(Math.sqrt(Mi*Mi+1)-Mi)}function gi(ai){return(Math.exp(ai)-Math.exp(-ai))/2}function Jr(ai){return(Math.exp(ai)+Math.exp(-ai))/2}var In=ti(0),ri=function(ai){return Jr(In)/Jr(In+Or*ai)},Jn=function(ai){return Cr*((Jr(In)*(gi(Mi=In+Or*ai)/Jr(Mi))-gi(In))/Yn)/en;var Mi},ui=(ti(1)-In)/Or;if(Math.abs(en)<1e-6||!isFinite(ui)){if(Math.abs(Cr-tn)<1e-6)return this.easeTo(F,G);var yi=tn<Cr?-1:1;ui=Math.abs(Math.log(tn/Cr))/Or,Jn=function(){return 0},ri=function(ai){return Math.exp(yi*Or*ai)}}return F.duration="duration"in F?+F.duration:1e3*ui/("screenSpeed"in F?+F.screenSpeed/Or:+F.speed),F.maxDuration&&F.duration>F.maxDuration&&(F.duration=0),this._zooming=!0,this._rotating=Ce!==kt,this._pitching=Pt!==Ue,this._padding=!xe.isPaddingEqual(St),this._prepareEase(G,!1),this._ease(function(ai){var Mi=ai*ui,wi=1/ri(Mi);xe.zoom=1===ai?at:ke+xe.scaleZoom(wi),ie._rotating&&(xe.bearing=e.number(Ce,kt,ai)),ie._pitching&&(xe.pitch=e.number(Ue,Pt,ai)),ie._padding&&(xe.interpolatePadding($e,St,ai),jt=xe.centerPoint.add(wt));var Ri=1===ai?Gt:xe.unproject(lr.add(yr.mult(Jn(Mi))).mult(wi));xe.setLocationAtPoint(xe.renderWorldCopies?Ri.wrap():Ri,jt),ie._fireMoveEvents(G)},function(){return ie._afterEase(G)},F),this},z.prototype.isEasing=function(){return!!this._easeFrameId},z.prototype.stop=function(){return this._stop()},z.prototype._stop=function(F,G){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var ie=this._onEaseEnd;delete this._onEaseEnd,ie.call(this,G)}if(!F){var fe=this.handlers;fe&&fe.stop()}return this},z.prototype._ease=function(F,G,ie){!1===ie.animate||0===ie.duration?(F(1),G()):(this._easeStart=e.browser.now(),this._easeOptions=ie,this._onEaseFrame=F,this._onEaseEnd=G,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},z.prototype._renderFrameCallback=function(){var F=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(F)),F<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},z.prototype._normalizeBearing=function(F,G){F=e.wrap(F,-180,180);var ie=Math.abs(F-G);return Math.abs(F-360-G)<ie&&(F-=360),Math.abs(F+360-G)<ie&&(F+=360),F},z.prototype._normalizeCenter=function(F){var G=this.transform;if(G.renderWorldCopies&&!G.lngRange){var ie=F.lng-G.center.lng;F.lng+=ie>180?-360:ie<-180?360:0}},z}(e.Evented),Va=function(L){void 0===L&&(L={}),this.options=L,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Va.prototype.getDefaultPosition=function(){return"bottom-right"},Va.prototype.onAdd=function(L){var z=this.options&&this.options.compact;return this._map=L,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),z&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===z&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Va.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Va.prototype._updateEditLink=function(){var L=this._editLink;L||(L=this._editLink=this._container.querySelector(".mapbox-improve-map"));var z=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(L){var F=z.reduce(function(G,ie,fe){return ie.value&&(G+=ie.key+"="+ie.value+(fe<z.length-1?"&":"")),G},"?");L.href=e.config.FEEDBACK_URL+"/"+F+(this._map._hash?this._map._hash.getHashString(!0):""),L.rel="noopener nofollow"}},Va.prototype._updateData=function(L){!L||"metadata"!==L.sourceDataType&&"style"!==L.dataType||(this._updateAttributions(),this._updateEditLink())},Va.prototype._updateAttributions=function(){if(this._map.style){var L=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?L=L.concat(this.options.customAttribution.map(function(ke){return"string"!=typeof ke?"":ke})):"string"==typeof this.options.customAttribution&&L.push(this.options.customAttribution)),this._map.style.stylesheet){var z=this._map.style.stylesheet;this.styleOwner=z.owner,this.styleId=z.id}var F=this._map.style.sourceCaches;for(var G in F){var ie=F[G];if(ie.used){var fe=ie.getSource();fe.attribution&&L.indexOf(fe.attribution)<0&&L.push(fe.attribution)}}L.sort(function(ke,Ce){return ke.length-Ce.length});var xe=(L=L.filter(function(ke,Ce){for(var Ue=Ce+1;Ue<L.length;Ue++)if(L[Ue].indexOf(ke)>=0)return!1;return!0})).join(" | ");xe!==this._attribHTML&&(this._attribHTML=xe,L.length?(this._innerContainer.innerHTML=xe,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Va.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var ts=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};ts.prototype.onAdd=function(L){this._map=L,this._container=i.create("div","mapboxgl-ctrl");var z=i.create("a","mapboxgl-ctrl-logo");return z.target="_blank",z.rel="noopener nofollow",z.href="https://www.mapbox.com/",z.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),z.setAttribute("rel","noopener nofollow"),this._container.appendChild(z),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ts.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ts.prototype.getDefaultPosition=function(){return"bottom-left"},ts.prototype._updateLogo=function(L){L&&"metadata"!==L.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},ts.prototype._logoRequired=function(){if(this._map.style){var L=this._map.style.sourceCaches;for(var z in L)if(L[z].getSource().mapbox_logo)return!0;return!1}},ts.prototype._updateCompact=function(){var L=this._container.children;if(L.length){var z=L[0];this._map.getCanvasContainer().offsetWidth<250?z.classList.add("mapboxgl-compact"):z.classList.remove("mapboxgl-compact")}};var mi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};mi.prototype.add=function(L){var z=++this._id;return this._queue.push({callback:L,id:z,cancelled:!1}),z},mi.prototype.remove=function(L){for(var z=this._currentlyRunning,F=0,G=z?this._queue.concat(z):this._queue;F<G.length;F+=1){var ie=G[F];if(ie.id===L)return void(ie.cancelled=!0)}},mi.prototype.run=function(L){void 0===L&&(L=0);var z=this._currentlyRunning=this._queue;this._queue=[];for(var F=0,G=z;F<G.length;F+=1){var ie=G[F];if(!ie.cancelled&&(ie.callback(L),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},mi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ai={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ds=e.window.HTMLImageElement,zs=e.window.HTMLElement,rs=e.window.ImageBitmap,Io={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ho=function(L){function z(G){var ie=this;if(null!=(G=e.extend({},Io,G)).minZoom&&null!=G.maxZoom&&G.minZoom>G.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=G.minPitch&&null!=G.maxPitch&&G.minPitch>G.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=G.minPitch&&G.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=G.maxPitch&&G.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var fe=new Yt(G.minZoom,G.maxZoom,G.minPitch,G.maxPitch,G.renderWorldCopies);if(L.call(this,fe,G),this._interactive=G.interactive,this._maxTileCacheSize=G.maxTileCacheSize,this._failIfMajorPerformanceCaveat=G.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=G.preserveDrawingBuffer,this._antialias=G.antialias,this._trackResize=G.trackResize,this._bearingSnap=G.bearingSnap,this._refreshExpiredTiles=G.refreshExpiredTiles,this._fadeDuration=G.fadeDuration,this._crossSourceCollisions=G.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=G.collectResourceTiming,this._renderTaskQueue=new mi,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Ai,G.locale),this._requestManager=new e.RequestManager(G.transformRequest,G.accessToken),"string"==typeof G.container){if(this._container=e.window.document.getElementById(G.container),!this._container)throw new Error("Container '"+G.container+"' not found.")}else{if(!(G.container instanceof zs))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=G.container}if(G.maxBounds&&this.setMaxBounds(G.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ie._update(!1)}),this.on("moveend",function(){return ie._update(!1)}),this.on("zoom",function(){return ie._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ja(this,G),this._hash=G.hash&&new Ir("string"==typeof G.hash&&G.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:G.center,zoom:G.zoom,bearing:G.bearing,pitch:G.pitch}),G.bounds&&(this.resize(),this.fitBounds(G.bounds,e.extend({},G.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=G.localIdeographFontFamily,G.style&&this.setStyle(G.style,{localIdeographFontFamily:G.localIdeographFontFamily}),G.attributionControl&&this.addControl(new Va({customAttribution:G.customAttribution})),this.addControl(new ts,G.logoPosition),this.on("style.load",function(){ie.transform.unmodified&&ie.jumpTo(ie.style.stylesheet)}),this.on("data",function(ke){ie._update("style"===ke.dataType),ie.fire(new e.Event(ke.dataType+"data",ke))}),this.on("dataloading",function(ke){ie.fire(new e.Event(ke.dataType+"dataloading",ke))})}L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z;var F={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return z.prototype._getMapId=function(){return this._mapId},z.prototype.addControl=function(G,ie){if(void 0===ie&&G.getDefaultPosition&&(ie=G.getDefaultPosition()),void 0===ie&&(ie="top-right"),!G||!G.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var fe=G.onAdd(this);this._controls.push(G);var xe=this._controlPositions[ie];return-1!==ie.indexOf("bottom")?xe.insertBefore(fe,xe.firstChild):xe.appendChild(fe),this},z.prototype.removeControl=function(G){if(!G||!G.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var ie=this._controls.indexOf(G);return ie>-1&&this._controls.splice(ie,1),G.onRemove(this),this},z.prototype.resize=function(G){var ie=this._containerDimensions(),fe=ie[0],xe=ie[1];this._resizeCanvas(fe,xe),this.transform.resize(fe,xe),this.painter.resize(fe,xe);var ke=!this._moving;return ke&&(this.stop(),this.fire(new e.Event("movestart",G)).fire(new e.Event("move",G))),this.fire(new e.Event("resize",G)),ke&&this.fire(new e.Event("moveend",G)),this},z.prototype.getBounds=function(){return this.transform.getBounds()},z.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},z.prototype.setMaxBounds=function(G){return this.transform.setMaxBounds(e.LngLatBounds.convert(G)),this._update()},z.prototype.setMinZoom=function(G){if((G=G??-2)>=-2&&G<=this.transform.maxZoom)return this.transform.minZoom=G,this._update(),this.getZoom()<G&&this.setZoom(G),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},z.prototype.getMinZoom=function(){return this.transform.minZoom},z.prototype.setMaxZoom=function(G){if((G=G??22)>=this.transform.minZoom)return this.transform.maxZoom=G,this._update(),this.getZoom()>G&&this.setZoom(G),this;throw new Error("maxZoom must be greater than the current minZoom")},z.prototype.getMaxZoom=function(){return this.transform.maxZoom},z.prototype.setMinPitch=function(G){if((G=G??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(G>=0&&G<=this.transform.maxPitch)return this.transform.minPitch=G,this._update(),this.getPitch()<G&&this.setPitch(G),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},z.prototype.getMinPitch=function(){return this.transform.minPitch},z.prototype.setMaxPitch=function(G){if((G=G??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(G>=this.transform.minPitch)return this.transform.maxPitch=G,this._update(),this.getPitch()>G&&this.setPitch(G),this;throw new Error("maxPitch must be greater than the current minPitch")},z.prototype.getMaxPitch=function(){return this.transform.maxPitch},z.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},z.prototype.setRenderWorldCopies=function(G){return this.transform.renderWorldCopies=G,this._update()},z.prototype.project=function(G){return this.transform.locationPoint(e.LngLat.convert(G))},z.prototype.unproject=function(G){return this.transform.pointLocation(e.Point.convert(G))},z.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},z.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},z.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},z.prototype._createDelegatedListener=function(G,ie,fe){var xe,ke=this;if("mouseenter"===G||"mouseover"===G){var Ce=!1;return{layer:ie,listener:fe,delegates:{mousemove:function($e){var at=ke.getLayer(ie)?ke.queryRenderedFeatures($e.point,{layers:[ie]}):[];at.length?Ce||(Ce=!0,fe.call(ke,new Un(G,ke,$e.originalEvent,{features:at}))):Ce=!1},mouseout:function(){Ce=!1}}}}if("mouseleave"===G||"mouseout"===G){var Ue=!1;return{layer:ie,listener:fe,delegates:{mousemove:function($e){(ke.getLayer(ie)?ke.queryRenderedFeatures($e.point,{layers:[ie]}):[]).length?Ue=!0:Ue&&(Ue=!1,fe.call(ke,new Un(G,ke,$e.originalEvent)))},mouseout:function($e){Ue&&(Ue=!1,fe.call(ke,new Un(G,ke,$e.originalEvent)))}}}}return{layer:ie,listener:fe,delegates:(xe={},xe[G]=function($e){var at=ke.getLayer(ie)?ke.queryRenderedFeatures($e.point,{layers:[ie]}):[];at.length&&($e.features=at,fe.call(ke,$e),delete $e.features)},xe)}},z.prototype.on=function(G,ie,fe){if(void 0===fe)return L.prototype.on.call(this,G,ie);var xe=this._createDelegatedListener(G,ie,fe);for(var ke in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[G]=this._delegatedListeners[G]||[],this._delegatedListeners[G].push(xe),xe.delegates)this.on(ke,xe.delegates[ke]);return this},z.prototype.once=function(G,ie,fe){if(void 0===fe)return L.prototype.once.call(this,G,ie);var xe=this._createDelegatedListener(G,ie,fe);for(var ke in xe.delegates)this.once(ke,xe.delegates[ke]);return this},z.prototype.off=function(G,ie,fe){var xe=this;return void 0===fe?L.prototype.off.call(this,G,ie):(this._delegatedListeners&&this._delegatedListeners[G]&&function(ke){for(var Ce=ke[G],Ue=0;Ue<Ce.length;Ue++){var $e=Ce[Ue];if($e.layer===ie&&$e.listener===fe){for(var at in $e.delegates)xe.off(at,$e.delegates[at]);return Ce.splice(Ue,1),xe}}}(this._delegatedListeners),this)},z.prototype.queryRenderedFeatures=function(G,ie){if(!this.style)return[];var fe;if(void 0!==ie||void 0===G||G instanceof e.Point||Array.isArray(G)||(ie=G,G=void 0),ie=ie||{},(G=G||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof G[0])fe=[e.Point.convert(G)];else{var xe=e.Point.convert(G[0]),ke=e.Point.convert(G[1]);fe=[xe,new e.Point(ke.x,xe.y),ke,new e.Point(xe.x,ke.y),xe]}return this.style.queryRenderedFeatures(fe,ie,this.transform)},z.prototype.querySourceFeatures=function(G,ie){return this.style.querySourceFeatures(G,ie)},z.prototype.setStyle=function(G,ie){return!1!==(ie=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},ie)).diff&&ie.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&G?(this._diffStyle(G,ie),this):(this._localIdeographFontFamily=ie.localIdeographFontFamily,this._updateStyle(G,ie))},z.prototype._getUIString=function(G){var ie=this._locale[G];if(null==ie)throw new Error("Missing UI string '"+G+"'");return ie},z.prototype._updateStyle=function(G,ie){return this.style&&(this.style.setEventedParent(null),this.style._remove()),G?(this.style=new En(this,ie||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof G?this.style.loadURL(G):this.style.loadJSON(G),this):(delete this.style,this)},z.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new En(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},z.prototype._diffStyle=function(G,ie){var fe=this;if("string"==typeof G){var xe=this._requestManager.normalizeStyleURL(G),ke=this._requestManager.transformRequest(xe,e.ResourceType.Style);e.getJSON(ke,function(Ce,Ue){Ce?fe.fire(new e.ErrorEvent(Ce)):Ue&&fe._updateDiff(Ue,ie)})}else"object"==typeof G&&this._updateDiff(G,ie)},z.prototype._updateDiff=function(G,ie){try{this.style.setState(G)&&this._update(!0)}catch(fe){e.warnOnce("Unable to perform style diff: "+(fe.message||fe.error||fe)+".  Rebuilding the style from scratch."),this._updateStyle(G,ie)}},z.prototype.getStyle=function(){if(this.style)return this.style.serialize()},z.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},z.prototype.addSource=function(G,ie){return this._lazyInitEmptyStyle(),this.style.addSource(G,ie),this._update(!0)},z.prototype.isSourceLoaded=function(G){var ie=this.style&&this.style.sourceCaches[G];if(void 0!==ie)return ie.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+G+"'")))},z.prototype.areTilesLoaded=function(){var G=this.style&&this.style.sourceCaches;for(var ie in G){var fe=G[ie]._tiles;for(var xe in fe){var ke=fe[xe];if("loaded"!==ke.state&&"errored"!==ke.state)return!1}}return!0},z.prototype.addSourceType=function(G,ie,fe){return this._lazyInitEmptyStyle(),this.style.addSourceType(G,ie,fe)},z.prototype.removeSource=function(G){return this.style.removeSource(G),this._update(!0)},z.prototype.getSource=function(G){return this.style.getSource(G)},z.prototype.addImage=function(G,ie,fe){void 0===fe&&(fe={});var xe=fe.pixelRatio;void 0===xe&&(xe=1);var ke=fe.sdf;void 0===ke&&(ke=!1);var Ce=fe.stretchX,Ue=fe.stretchY,$e=fe.content;if(this._lazyInitEmptyStyle(),ie instanceof Ds||rs&&ie instanceof rs){var at=e.browser.getImageData(ie);this.style.addImage(G,{data:new e.RGBAImage({width:at.width,height:at.height},at.data),pixelRatio:xe,stretchX:Ce,stretchY:Ue,content:$e,sdf:ke,version:0})}else{if(void 0===ie.width||void 0===ie.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Nt=ie;this.style.addImage(G,{data:new e.RGBAImage({width:ie.width,height:ie.height},new Uint8Array(ie.data)),pixelRatio:xe,stretchX:Ce,stretchY:Ue,content:$e,sdf:ke,version:0,userImage:Nt}),Nt.onAdd&&Nt.onAdd(this,G)}},z.prototype.updateImage=function(G,ie){var fe=this.style.getImage(G);if(!fe)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var xe=ie instanceof Ds||rs&&ie instanceof rs?e.browser.getImageData(ie):ie,ke=xe.width,Ce=xe.height,Ue=xe.data;return void 0===ke||void 0===Ce?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ke!==fe.data.width||Ce!==fe.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(fe.data.replace(Ue,!(ie instanceof Ds||rs&&ie instanceof rs)),void this.style.updateImage(G,fe))},z.prototype.hasImage=function(G){return G?!!this.style.getImage(G):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},z.prototype.removeImage=function(G){this.style.removeImage(G)},z.prototype.loadImage=function(G,ie){e.getImage(this._requestManager.transformRequest(G,e.ResourceType.Image),ie)},z.prototype.listImages=function(){return this.style.listImages()},z.prototype.addLayer=function(G,ie){return this._lazyInitEmptyStyle(),this.style.addLayer(G,ie),this._update(!0)},z.prototype.moveLayer=function(G,ie){return this.style.moveLayer(G,ie),this._update(!0)},z.prototype.removeLayer=function(G){return this.style.removeLayer(G),this._update(!0)},z.prototype.getLayer=function(G){return this.style.getLayer(G)},z.prototype.setLayerZoomRange=function(G,ie,fe){return this.style.setLayerZoomRange(G,ie,fe),this._update(!0)},z.prototype.setFilter=function(G,ie,fe){return void 0===fe&&(fe={}),this.style.setFilter(G,ie,fe),this._update(!0)},z.prototype.getFilter=function(G){return this.style.getFilter(G)},z.prototype.setPaintProperty=function(G,ie,fe,xe){return void 0===xe&&(xe={}),this.style.setPaintProperty(G,ie,fe,xe),this._update(!0)},z.prototype.getPaintProperty=function(G,ie){return this.style.getPaintProperty(G,ie)},z.prototype.setLayoutProperty=function(G,ie,fe,xe){return void 0===xe&&(xe={}),this.style.setLayoutProperty(G,ie,fe,xe),this._update(!0)},z.prototype.getLayoutProperty=function(G,ie){return this.style.getLayoutProperty(G,ie)},z.prototype.setLight=function(G,ie){return void 0===ie&&(ie={}),this._lazyInitEmptyStyle(),this.style.setLight(G,ie),this._update(!0)},z.prototype.getLight=function(){return this.style.getLight()},z.prototype.setFeatureState=function(G,ie){return this.style.setFeatureState(G,ie),this._update()},z.prototype.removeFeatureState=function(G,ie){return this.style.removeFeatureState(G,ie),this._update()},z.prototype.getFeatureState=function(G){return this.style.getFeatureState(G)},z.prototype.getContainer=function(){return this._container},z.prototype.getCanvasContainer=function(){return this._canvasContainer},z.prototype.getCanvas=function(){return this._canvas},z.prototype._containerDimensions=function(){var G=0,ie=0;return this._container&&(G=this._container.clientWidth||400,ie=this._container.clientHeight||300),[G,ie]},z.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},z.prototype._setupContainer=function(){var G=this._container;G.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",G)).style.visibility="hidden",this._detectMissingCSS();var ie=this._canvasContainer=i.create("div","mapboxgl-canvas-container",G);this._interactive&&ie.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",ie),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var fe=this._containerDimensions();this._resizeCanvas(fe[0],fe[1]);var xe=this._controlContainer=i.create("div","mapboxgl-control-container",G),ke=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ce){ke[Ce]=i.create("div","mapboxgl-ctrl-"+Ce,xe)})},z.prototype._resizeCanvas=function(G,ie){var fe=e.browser.devicePixelRatio||1;this._canvas.width=fe*G,this._canvas.height=fe*ie,this._canvas.style.width=G+"px",this._canvas.style.height=ie+"px"},z.prototype._setupPainter=function(){var G=e.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ie=this._canvas.getContext("webgl",G)||this._canvas.getContext("experimental-webgl",G);ie?(this.painter=new kn(ie,this.transform),e.webpSupported.testSupport(ie)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},z.prototype._contextLost=function(G){G.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:G}))},z.prototype._contextRestored=function(G){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:G}))},z.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},z.prototype._update=function(G){return this.style?(this._styleDirty=this._styleDirty||G,this._sourcesDirty=!0,this.triggerRepaint(),this):this},z.prototype._requestRenderFrame=function(G){return this._update(),this._renderTaskQueue.add(G)},z.prototype._cancelRenderFrame=function(G){this._renderTaskQueue.remove(G)},z.prototype._render=function(G){var ie,fe=this,xe=0,ke=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(ie=ke.createQueryEXT(),ke.beginQueryEXT(ke.TIME_ELAPSED_EXT,ie),xe=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(G),!this._removed){var Ce=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ue=this.transform.zoom,$e=e.browser.now();this.style.zoomHistory.update(Ue,$e);var at=new e.EvaluationParameters(Ue,{now:$e,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),kt=at.crossFadingFactor();1===kt&&kt===this._crossFadingFactor||(Ce=!0,this._crossFadingFactor=kt),this.style.update(at)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Ce)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Pt=e.browser.now()-xe;ke.endQueryEXT(ke.TIME_ELAPSED_EXT,ie),setTimeout(function(){var Et=ke.getQueryObjectEXT(ie,ke.QUERY_RESULT_EXT)/1e6;ke.deleteQueryEXT(ie),fe.fire(new e.Event("gpu-timing-frame",{cpuTime:Pt,gpuTime:Et}))},50)}if(this.listens("gpu-timing-layer")){var St=this.painter.collectGpuTimers();setTimeout(function(){var Et=fe.painter.queryGpuTimers(St);fe.fire(new e.Event("gpu-timing-layer",{layerTimes:Et}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},z.prototype.remove=function(){this._hash&&this._hash.remove();for(var G=0,ie=this._controls;G<ie.length;G+=1)ie[G].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var fe=this.painter.context.gl.getExtension("WEBGL_lose_context");fe&&fe.loseContext(),Zs(this._canvasContainer),Zs(this._controlContainer),Zs(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},z.prototype.triggerRepaint=function(){var G=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(ie){G._frame=null,G._render(ie)}))},z.prototype._onWindowOnline=function(){this._update()},z.prototype._onWindowResize=function(G){this._trackResize&&this.resize({originalEvent:G})._update()},F.showTileBoundaries.get=function(){return!!this._showTileBoundaries},F.showTileBoundaries.set=function(G){this._showTileBoundaries!==G&&(this._showTileBoundaries=G,this._update())},F.showPadding.get=function(){return!!this._showPadding},F.showPadding.set=function(G){this._showPadding!==G&&(this._showPadding=G,this._update())},F.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},F.showCollisionBoxes.set=function(G){this._showCollisionBoxes!==G&&(this._showCollisionBoxes=G,G?this.style._generateCollisionBoxes():this._update())},F.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},F.showOverdrawInspector.set=function(G){this._showOverdrawInspector!==G&&(this._showOverdrawInspector=G,this._update())},F.repaint.get=function(){return!!this._repaint},F.repaint.set=function(G){this._repaint!==G&&(this._repaint=G,this.triggerRepaint())},F.vertices.get=function(){return!!this._vertices},F.vertices.set=function(G){this._vertices=G,this._update()},z.prototype._setCacheLimits=function(G,ie){e.setCacheLimits(G,ie)},F.version.get=function(){return e.version},Object.defineProperties(z.prototype,F),z}(Os);function Zs(L){L.parentNode&&L.parentNode.removeChild(L)}var _s={showCompass:!0,showZoom:!0,visualizePitch:!1},ta=function(L){var z=this;this.options=e.extend({},_s,L),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(F){return F.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(F){return z._map.zoomIn({},{originalEvent:F})}),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(F){return z._map.zoomOut({},{originalEvent:F})}),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(F){z.options.visualizePitch?z._map.resetNorthPitch({},{originalEvent:F}):z._map.resetNorth({},{originalEvent:F})}),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ta.prototype._updateZoomButtons=function(){var L=this._map.getZoom();this._zoomInButton.disabled=L===this._map.getMaxZoom(),this._zoomOutButton.disabled=L===this._map.getMinZoom()},ta.prototype._rotateCompassArrow=function(){var L=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=L},ta.prototype.onAdd=function(L){return this._map=L,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ha(this._map,this._compass,this.options.visualizePitch)),this._container},ta.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ta.prototype._createButton=function(L,z){var F=i.create("button",L,this._container);return F.type="button",F.addEventListener("click",z),F},ta.prototype._setButtonTitle=function(L,z){var F=this._map._getUIString("NavigationControl."+z);L.title=F,L.setAttribute("aria-label",F)};var ha=function(L,z,F){void 0===F&&(F=!1),this._clickTolerance=10,this.element=z,this.mouseRotate=new Di({clickTolerance:L.dragRotate._mouseRotate._clickTolerance}),this.map=L,F&&(this.mousePitch=new _i({clickTolerance:L.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(z,"mousedown",this.mousedown),i.addEventListener(z,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(z,"touchmove",this.touchmove),i.addEventListener(z,"touchend",this.touchend),i.addEventListener(z,"touchcancel",this.reset)};function gs(L,z,F){if(L=new e.LngLat(L.lng,L.lat),z){var G=new e.LngLat(L.lng-360,L.lat),ie=new e.LngLat(L.lng+360,L.lat),fe=F.locationPoint(L).distSqr(z);F.locationPoint(G).distSqr(z)<fe?L=G:F.locationPoint(ie).distSqr(z)<fe&&(L=ie)}for(;Math.abs(L.lng-F.center.lng)>180;){var xe=F.locationPoint(L);if(xe.x>=0&&xe.y>=0&&xe.x<=F.width&&xe.y<=F.height)break;L.lng>F.center.lng?L.lng-=360:L.lng+=360}return L}ha.prototype.down=function(L,z){this.mouseRotate.mousedown(L,z),this.mousePitch&&this.mousePitch.mousedown(L,z),i.disableDrag()},ha.prototype.move=function(L,z){var F=this.map,G=this.mouseRotate.mousemoveWindow(L,z);if(G&&G.bearingDelta&&F.setBearing(F.getBearing()+G.bearingDelta),this.mousePitch){var ie=this.mousePitch.mousemoveWindow(L,z);ie&&ie.pitchDelta&&F.setPitch(F.getPitch()+ie.pitchDelta)}},ha.prototype.off=function(){var L=this.element;i.removeEventListener(L,"mousedown",this.mousedown),i.removeEventListener(L,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(L,"touchmove",this.touchmove),i.removeEventListener(L,"touchend",this.touchend),i.removeEventListener(L,"touchcancel",this.reset),this.offTemp()},ha.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(e.window,"mousemove",this.mousemove),i.removeEventListener(e.window,"mouseup",this.mouseup)},ha.prototype.mousedown=function(L){this.down(e.extend({},L,{ctrlKey:!0,preventDefault:function(){return L.preventDefault()}}),i.mousePos(this.element,L)),i.addEventListener(e.window,"mousemove",this.mousemove),i.addEventListener(e.window,"mouseup",this.mouseup)},ha.prototype.mousemove=function(L){this.move(L,i.mousePos(this.element,L))},ha.prototype.mouseup=function(L){this.mouseRotate.mouseupWindow(L),this.mousePitch&&this.mousePitch.mouseupWindow(L),this.offTemp()},ha.prototype.touchstart=function(L){1!==L.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,L.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return L.preventDefault()}},this._startPos))},ha.prototype.touchmove=function(L){1!==L.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,L.targetTouches)[0],this.move({preventDefault:function(){return L.preventDefault()}},this._lastPos))},ha.prototype.touchend=function(L){0===L.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ha.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var fs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ra(L,z,F){var G=L.classList;for(var ie in fs)G.remove("mapboxgl-"+F+"-anchor-"+ie);G.add("mapboxgl-"+F+"-anchor-"+z)}var vs,ws=function(L){function z(F,G){var ie=this;if(L.call(this),(F instanceof e.window.HTMLElement||G)&&(F=e.extend({element:F},G)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=F&&F.anchor||"center",this._color=F&&F.color||"#3FB1CE",this._draggable=F&&F.draggable||!1,this._state="inactive",this._rotation=F&&F.rotation||0,this._rotationAlignment=F&&F.rotationAlignment||"auto",this._pitchAlignment=F&&F.pitchAlignment&&"auto"!==F.pitchAlignment?F.pitchAlignment:this._rotationAlignment,F&&F.element)this._element=F.element,this._offset=e.Point.convert(F&&F.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var fe=i.createNS("http://www.w3.org/2000/svg","svg");fe.setAttributeNS(null,"display","block"),fe.setAttributeNS(null,"height","41px"),fe.setAttributeNS(null,"width","27px"),fe.setAttributeNS(null,"viewBox","0 0 27 41");var xe=i.createNS("http://www.w3.org/2000/svg","g");xe.setAttributeNS(null,"stroke","none"),xe.setAttributeNS(null,"stroke-width","1"),xe.setAttributeNS(null,"fill","none"),xe.setAttributeNS(null,"fill-rule","evenodd");var ke=i.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"fill-rule","nonzero");var Ce=i.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Ce.setAttributeNS(null,"fill","#000000");for(var Ue=0,$e=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ue<$e.length;Ue+=1){var at=$e[Ue],kt=i.createNS("http://www.w3.org/2000/svg","ellipse");kt.setAttributeNS(null,"opacity","0.04"),kt.setAttributeNS(null,"cx","10.5"),kt.setAttributeNS(null,"cy","5.80029008"),kt.setAttributeNS(null,"rx",at.rx),kt.setAttributeNS(null,"ry",at.ry),Ce.appendChild(kt)}var Pt=i.createNS("http://www.w3.org/2000/svg","g");Pt.setAttributeNS(null,"fill",this._color);var St=i.createNS("http://www.w3.org/2000/svg","path");St.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Pt.appendChild(St);var Et=i.createNS("http://www.w3.org/2000/svg","g");Et.setAttributeNS(null,"opacity","0.25"),Et.setAttributeNS(null,"fill","#000000");var wt=i.createNS("http://www.w3.org/2000/svg","path");wt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Et.appendChild(wt);var jt=i.createNS("http://www.w3.org/2000/svg","g");jt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),jt.setAttributeNS(null,"fill","#FFFFFF");var Nt=i.createNS("http://www.w3.org/2000/svg","g");Nt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Gt=i.createNS("http://www.w3.org/2000/svg","circle");Gt.setAttributeNS(null,"fill","#000000"),Gt.setAttributeNS(null,"opacity","0.25"),Gt.setAttributeNS(null,"cx","5.5"),Gt.setAttributeNS(null,"cy","5.5"),Gt.setAttributeNS(null,"r","5.4999962");var lr=i.createNS("http://www.w3.org/2000/svg","circle");lr.setAttributeNS(null,"fill","#FFFFFF"),lr.setAttributeNS(null,"cx","5.5"),lr.setAttributeNS(null,"cy","5.5"),lr.setAttributeNS(null,"r","5.4999962"),Nt.appendChild(Gt),Nt.appendChild(lr),ke.appendChild(Ce),ke.appendChild(Pt),ke.appendChild(Et),ke.appendChild(jt),ke.appendChild(Nt),fe.appendChild(ke),this._element.appendChild(fe),this._offset=e.Point.convert(F&&F.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(yr){yr.preventDefault()}),this._element.addEventListener("mousedown",function(yr){yr.preventDefault()}),this._element.addEventListener("focus",function(){var yr=ie._map.getContainer();yr.scrollTop=0,yr.scrollLeft=0}),Ra(this._element,this._anchor,"marker"),this._popup=null}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.addTo=function(F){return this.remove(),this._map=F,F.getCanvasContainer().appendChild(this._element),F.on("move",this._update),F.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},z.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},z.prototype.getLngLat=function(){return this._lngLat},z.prototype.setLngLat=function(F){return this._lngLat=e.LngLat.convert(F),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},z.prototype.getElement=function(){return this._element},z.prototype.setPopup=function(F){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),F){if(!("offset"in F.options)){var G=Math.sqrt(Math.pow(13.5,2)/2);F.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[G,-1*(24.6+G)],"bottom-right":[-G,-1*(24.6+G)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=F,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},z.prototype._onKeyPress=function(F){var G=F.code,ie=F.charCode||F.keyCode;"Space"!==G&&"Enter"!==G&&32!==ie&&13!==ie||this.togglePopup()},z.prototype._onMapClick=function(F){var G=F.originalEvent.target,ie=this._element;this._popup&&(G===ie||ie.contains(G))&&this.togglePopup()},z.prototype.getPopup=function(){return this._popup},z.prototype.togglePopup=function(){var F=this._popup;return F?(F.isOpen()?F.remove():F.addTo(this._map),this):this},z.prototype._update=function(F){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=gs(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var G="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?G="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(G="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var ie="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?ie="rotateX(0deg)":"map"===this._pitchAlignment&&(ie="rotateX("+this._map.getPitch()+"deg)"),F&&"moveend"!==F.type||(this._pos=this._pos.round()),i.setTransform(this._element,fs[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+ie+" "+G)}},z.prototype.getOffset=function(){return this._offset},z.prototype.setOffset=function(F){return this._offset=e.Point.convert(F),this._update(),this},z.prototype._onMove=function(F){this._pos=F.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},z.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},z.prototype._addDragHandler=function(F){this._element.contains(F.originalEvent.target)&&(F.preventDefault(),this._positionDelta=F.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},z.prototype.setDraggable=function(F){return this._draggable=!!F,this._map&&(F?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},z.prototype.isDraggable=function(){return this._draggable},z.prototype.setRotation=function(F){return this._rotation=F||0,this._update(),this},z.prototype.getRotation=function(){return this._rotation},z.prototype.setRotationAlignment=function(F){return this._rotationAlignment=F||"auto",this._update(),this},z.prototype.getRotationAlignment=function(){return this._rotationAlignment},z.prototype.setPitchAlignment=function(F){return this._pitchAlignment=F&&"auto"!==F?F:this._rotationAlignment,this._update(),this},z.prototype.getPitchAlignment=function(){return this._pitchAlignment},z}(e.Evented),xs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ts=0,hs=!1,Ws=function(L){function z(F){L.call(this),this.options=e.extend({},xs,F),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.onAdd=function(F){var G;return this._map=F,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),G=this._setupUI,void 0!==vs?G(vs):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(ie){G(vs="denied"!==ie.state)}):G(vs=!!e.window.navigator.geolocation),this._container},z.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ts=0,hs=!1},z.prototype._isOutOfMapMaxBounds=function(F){var G=this._map.getMaxBounds(),ie=F.coords;return G&&(ie.longitude<G.getWest()||ie.longitude>G.getEast()||ie.latitude<G.getSouth()||ie.latitude>G.getNorth())},z.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},z.prototype._onSuccess=function(F){if(this._map){if(this._isOutOfMapMaxBounds(F))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",F)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=F,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(F),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(F),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",F)),this._finish()}},z.prototype._updateCamera=function(F){var G=new e.LngLat(F.coords.longitude,F.coords.latitude),ie=F.coords.accuracy,fe=this._map.getBearing(),xe=e.extend({bearing:fe},this.options.fitBoundsOptions);this._map.fitBounds(G.toBounds(ie),xe,{geolocateSource:!0})},z.prototype._updateMarker=function(F){if(F){var G=new e.LngLat(F.coords.longitude,F.coords.latitude);this._accuracyCircleMarker.setLngLat(G).addTo(this._map),this._userLocationDotMarker.setLngLat(G).addTo(this._map),this._accuracy=F.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},z.prototype._updateCircleRadius=function(){var F=this._map._container.clientHeight/2,G=this._map.unproject([0,F]),ie=this._map.unproject([1,F]),fe=G.distanceTo(ie),xe=Math.ceil(2*this._accuracy/fe);this._circleElement.style.width=xe+"px",this._circleElement.style.height=xe+"px"},z.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},z.prototype._onError=function(F){if(this._map){if(this.options.trackUserLocation)if(1===F.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var G=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=G,this._geolocateButton.setAttribute("aria-label",G),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===F.code&&hs)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",F)),this._finish()}},z.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},z.prototype._setupUI=function(F){var G=this;if(this._container.addEventListener("contextmenu",function(xe){return xe.preventDefault()}),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===F){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var ie=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=ie,this._geolocateButton.setAttribute("aria-label",ie)}else{var fe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=fe,this._geolocateButton.setAttribute("aria-label",fe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ws(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ws({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(xe){xe.geolocateSource||"ACTIVE_LOCK"!==G._watchState||xe.originalEvent&&"resize"===xe.originalEvent.type||(G._watchState="BACKGROUND",G._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),G._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),G.fire(new e.Event("trackuserlocationend")))})},z.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ts--,hs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var F;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ts>1?(F={maximumAge:6e5,timeout:0},hs=!0):(F=this.options.positionOptions,hs=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,F)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},z.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},z}(e.Evented),il={maxWidth:100,unit:"metric"},ys=function(L){this.options=e.extend({},il,L),e.bindAll(["_onMove","setUnit"],this)};function Xs(L,z,F){var G=F&&F.maxWidth||100,ie=L._container.clientHeight/2,fe=L.unproject([0,ie]),xe=L.unproject([G,ie]),ke=fe.distanceTo(xe);if(F&&"imperial"===F.unit){var Ce=3.2808*ke;Ce>5280?ks(z,G,Ce/5280,L._getUIString("ScaleControl.Miles")):ks(z,G,Ce,L._getUIString("ScaleControl.Feet"))}else F&&"nautical"===F.unit?ks(z,G,ke/1852,L._getUIString("ScaleControl.NauticalMiles")):ke>=1e3?ks(z,G,ke/1e3,L._getUIString("ScaleControl.Kilometers")):ks(z,G,ke,L._getUIString("ScaleControl.Meters"))}function ks(L,z,F,G){var ie,fe,xe,Ue,$e,ke=(ie=F,(fe=Math.pow(10,(""+Math.floor(ie)).length-1))*(xe=(xe=ie/fe)>=10?10:xe>=5?5:xe>=3?3:xe>=2?2:xe>=1?1:(Ue=xe,$e=Math.pow(10,Math.ceil(-Math.log(Ue)/Math.LN10)),Math.round(Ue*$e)/$e)));L.style.width=z*(ke/F)+"px",L.innerHTML=ke+"&nbsp;"+G}ys.prototype.getDefaultPosition=function(){return"bottom-left"},ys.prototype._onMove=function(){Xs(this._map,this._container,this.options)},ys.prototype.onAdd=function(L){return this._map=L,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",L.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ys.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ys.prototype.setUnit=function(L){this.options.unit=L,Xs(this._map,this._container,this.options)};var oo=function(L){this._fullscreen=!1,L&&L.container&&(L.container instanceof e.window.HTMLElement?this._container=L.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};oo.prototype.onAdd=function(L){return this._map=L,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},oo.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},oo.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},oo.prototype._setupUI=function(){var L=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",L).setAttribute("aria-hidden",!0),L.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},oo.prototype._updateTitle=function(){var L=this._getTitle();this._fullscreenButton.setAttribute("aria-label",L),this._fullscreenButton.title=L},oo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},oo.prototype._isFullscreen=function(){return this._fullscreen},oo.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},oo.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var al={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},ol=function(L){function z(F){L.call(this),this.options=e.extend(Object.create(al),F),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return L&&(z.__proto__=L),(z.prototype=Object.create(L&&L.prototype)).constructor=z,z.prototype.addTo=function(F){return this._map&&this.remove(),this._map=F,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},z.prototype.isOpen=function(){return!!this._map},z.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},z.prototype.getLngLat=function(){return this._lngLat},z.prototype.setLngLat=function(F){return this._lngLat=e.LngLat.convert(F),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},z.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},z.prototype.getElement=function(){return this._container},z.prototype.setText=function(F){return this.setDOMContent(e.window.document.createTextNode(F))},z.prototype.setHTML=function(F){var G,ie=e.window.document.createDocumentFragment(),fe=e.window.document.createElement("body");for(fe.innerHTML=F;G=fe.firstChild;)ie.appendChild(G);return this.setDOMContent(ie)},z.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},z.prototype.setMaxWidth=function(F){return this.options.maxWidth=F,this._update(),this},z.prototype.setDOMContent=function(F){return this._createContent(),this._content.appendChild(F),this._update(),this},z.prototype.addClassName=function(F){this._container&&this._container.classList.add(F)},z.prototype.removeClassName=function(F){this._container&&this._container.classList.remove(F)},z.prototype.toggleClassName=function(F){if(this._container)return this._container.classList.toggle(F)},z.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},z.prototype._onMouseUp=function(F){this._update(F.point)},z.prototype._onMouseMove=function(F){this._update(F.point)},z.prototype._onDrag=function(F){this._update(F.point)},z.prototype._update=function(F){var G=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(kt){return G._container.classList.add(kt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=gs(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||F)){var fe=this._pos=this._trackPointer&&F?F:this._map.project(this._lngLat),xe=this.options.anchor,ke=function kt(Pt){if(Pt){if("number"==typeof Pt){var St=Math.round(Math.sqrt(.5*Math.pow(Pt,2)));return{center:new e.Point(0,0),top:new e.Point(0,Pt),"top-left":new e.Point(St,St),"top-right":new e.Point(-St,St),bottom:new e.Point(0,-Pt),"bottom-left":new e.Point(St,-St),"bottom-right":new e.Point(-St,-St),left:new e.Point(Pt,0),right:new e.Point(-Pt,0)}}if(Pt instanceof e.Point||Array.isArray(Pt)){var Et=e.Point.convert(Pt);return{center:Et,top:Et,"top-left":Et,"top-right":Et,bottom:Et,"bottom-left":Et,"bottom-right":Et,left:Et,right:Et}}return{center:e.Point.convert(Pt.center||[0,0]),top:e.Point.convert(Pt.top||[0,0]),"top-left":e.Point.convert(Pt["top-left"]||[0,0]),"top-right":e.Point.convert(Pt["top-right"]||[0,0]),bottom:e.Point.convert(Pt.bottom||[0,0]),"bottom-left":e.Point.convert(Pt["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(Pt["bottom-right"]||[0,0]),left:e.Point.convert(Pt.left||[0,0]),right:e.Point.convert(Pt.right||[0,0])}}return kt(new e.Point(0,0))}(this.options.offset);if(!xe){var Ce,Ue=this._container.offsetWidth,$e=this._container.offsetHeight;Ce=fe.y+ke.bottom.y<$e?["top"]:fe.y>this._map.transform.height-$e?["bottom"]:[],fe.x<Ue/2?Ce.push("left"):fe.x>this._map.transform.width-Ue/2&&Ce.push("right"),xe=0===Ce.length?"bottom":Ce.join("-")}var at=fe.add(ke[xe]).round();i.setTransform(this._container,fs[xe]+" translate("+at.x+"px,"+at.y+"px)"),Ra(this._container,xe,"popup")}},z.prototype._onClose=function(){this.remove()},z}(e.Evented),ce={version:e.version,supported:n,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Ho,NavigationControl:ta,GeolocateControl:Ws,AttributionControl:Va,ScaleControl:ys,FullscreenControl:oo,Popup:ol,Marker:ws,Style:En,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){ht().acquire(lt)},clearPrewarmedResources:function(){var L=Mt;L&&(L.isPreloaded()&&1===L.numActive()?(L.release(lt),Mt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(L){e.config.ACCESS_TOKEN=L},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(L){e.config.API_URL=L},get workerCount(){return st.workerCount},set workerCount(L){st.workerCount=L},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(L){e.config.MAX_PARALLEL_IMAGE_REQUESTS=L},clearStorage:function(L){e.clearTileCache(L)},workerUrl:""};return ce}),k},"object"==typeof Q&&void 0!==$?$.exports=g():(m=m||self).mapboxgl=g()},{}],240:[function(v,$,Q){"use strict";$.exports=Math.log2||function(m){return Math.log(m)*Math.LOG2E}},{}],241:[function(v,$,Q){"use strict";$.exports=function(g,k){k||(k=g,g=window);var x=0,e=0,n=0,i={shift:!1,alt:!1,control:!1,meta:!1},l=!1;function r(y){var u=!1;return"altKey"in y&&(u=u||y.altKey!==i.alt,i.alt=!!y.altKey),"shiftKey"in y&&(u=u||y.shiftKey!==i.shift,i.shift=!!y.shiftKey),"ctrlKey"in y&&(u=u||y.ctrlKey!==i.control,i.control=!!y.ctrlKey),"metaKey"in y&&(u=u||y.metaKey!==i.meta,i.meta=!!y.metaKey),u}function d(y,u){var _=m.x(u),b=m.y(u);"buttons"in u&&(y=0|u.buttons),(y!==x||_!==e||b!==n||r(u))&&(x=0|y,e=_||0,n=b||0,k&&k(x,e,n,i))}function f(y){d(0,y)}function t(){(x||e||n||i.shift||i.alt||i.meta||i.control)&&(e=n=0,x=0,i.shift=i.alt=i.control=i.meta=!1,k&&k(0,0,0,i))}function h(y){r(y)&&k&&k(x,e,n,i)}function s(y){0===m.buttons(y)?d(0,y):d(x,y)}function o(y){d(x|m.buttons(y),y)}function p(y){d(x&~m.buttons(y),y)}function c(){l||(l=!0,g.addEventListener("mousemove",s),g.addEventListener("mousedown",o),g.addEventListener("mouseup",p),g.addEventListener("mouseleave",f),g.addEventListener("mouseenter",f),g.addEventListener("mouseout",f),g.addEventListener("mouseover",f),g.addEventListener("blur",t),g.addEventListener("keyup",h),g.addEventListener("keydown",h),g.addEventListener("keypress",h),g!==window&&(window.addEventListener("blur",t),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}c();var a={element:g};return Object.defineProperties(a,{enabled:{get:function(){return l},set:function(y){y?c():!l||(l=!1,g.removeEventListener("mousemove",s),g.removeEventListener("mousedown",o),g.removeEventListener("mouseup",p),g.removeEventListener("mouseleave",f),g.removeEventListener("mouseenter",f),g.removeEventListener("mouseout",f),g.removeEventListener("mouseover",f),g.removeEventListener("blur",t),g.removeEventListener("keyup",h),g.removeEventListener("keydown",h),g.removeEventListener("keypress",h),g!==window&&(window.removeEventListener("blur",t),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))},enumerable:!0},buttons:{get:function(){return x},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return i},enumerable:!0}}),a};var m=v("mouse-event")},{"mouse-event":243}],242:[function(v,$,Q){var m={left:0,top:0};$.exports=function(g,k,x){k=k||g.currentTarget||g.srcElement,Array.isArray(x)||(x=[0,0]);var l,e=g.clientX||0,n=g.clientY||0,i=(l=k)===window||l===document||l===document.body?m:l.getBoundingClientRect();return x[0]=e-i.left,x[1]=n-i.top,x}},{}],243:[function(v,$,Q){"use strict";function m(g){return g.target||g.srcElement||window}Q.buttons=function(g){if("object"==typeof g){if("buttons"in g)return g.buttons;if("which"in g){if(2===(k=g.which))return 4;if(3===k)return 2;if(k>0)return 1<<k-1}else if("button"in g){var k;if(1===(k=g.button))return 4;if(2===k)return 2;if(k>=0)return 1<<k}}return 0},Q.element=m,Q.x=function(g){if("object"==typeof g){if("offsetX"in g)return g.offsetX;var k=m(g).getBoundingClientRect();return g.clientX-k.left}return 0},Q.y=function(g){if("object"==typeof g){if("offsetY"in g)return g.offsetY;var k=m(g).getBoundingClientRect();return g.clientY-k.top}return 0}},{}],244:[function(v,$,Q){"use strict";var m=v("to-px");$.exports=function(g,k,x){"function"==typeof g&&(x=!!k,k=g,g=window);var e=m("ex",g),n=function(i){x&&i.preventDefault();var l=i.deltaX||0,r=i.deltaY||0,d=i.deltaZ||0,f=1;switch(i.deltaMode){case 1:f=e;break;case 2:f=window.innerHeight}if(r*=f,d*=f,(l*=f)||r||d)return k(l,r,d,i)};return g.addEventListener("wheel",n),n}},{"to-px":315}],245:[function(v,$,Q){(function(m,g){(function(){var k,x,e;e=function(){"use strict";var k,x,e,n=Object.prototype.toString,i=void 0!==g?function(y){return g(y)}:setTimeout;try{Object.defineProperty({},"x",{}),k=function(y,u,_,b){return Object.defineProperty(y,u,{value:_,writable:!0,configurable:!1!==b})}}catch{k=function(u,_,b){return u[_]=b,u}}function l(y,u){e.add(y,u),x||(x=i(e.drain))}function r(y){var u,_=typeof y;return null==y||"object"!=_&&"function"!=_||(u=y.then),"function"==typeof u&&u}function d(){for(var y=0;y<this.chain.length;y++)f(this,1===this.state?this.chain[y].success:this.chain[y].failure,this.chain[y]);this.chain.length=0}function f(y,u,_){var b,w;try{!1===u?_.reject(y.msg):(b=!0===u?y.msg:u.call(void 0,y.msg))===_.promise?_.reject(TypeError("Promise-chain cycle")):(w=r(b))?w.call(b,_.resolve,_.reject):_.resolve(b)}catch(T){_.reject(T)}}function t(y){var u,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(u=r(y))?l(function(){var b=new o(_);try{u.call(y,function(){t.apply(b,arguments)},function(){h.apply(b,arguments)})}catch(w){h.call(b,w)}}):(_.msg=y,_.state=1,_.chain.length>0&&l(d,_))}catch(b){h.call(new o(_),b)}}}function h(y){var u=this;u.triggered||(u.triggered=!0,u.def&&(u=u.def),u.msg=y,u.state=2,u.chain.length>0&&l(d,u))}function s(y,u,_,b){for(var w=0;w<u.length;w++)!function(T){y.resolve(u[T]).then(function(C){_(T,C)},b)}(w)}function o(y){this.def=y,this.triggered=!1}function p(y){this.promise=y,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function c(y){if("function"!=typeof y)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var u=new p(this);this.then=function(_,b){var w={success:"function"!=typeof _||_,failure:"function"==typeof b&&b};return w.promise=new this.constructor(function(T,C){if("function"!=typeof T||"function"!=typeof C)throw TypeError("Not a function");w.resolve=T,w.reject=C}),u.chain.push(w),0!==u.state&&l(d,u),w.promise},this.catch=function(_){return this.then(void 0,_)};try{y.call(void 0,function(_){t.call(u,_)},function(_){h.call(u,_)})}catch(_){h.call(u,_)}}e=function(){var y,u,_;function b(w,T){this.fn=w,this.self=T,this.next=void 0}return{add:function(w,T){_=new b(w,T),u?u.next=_:y=_,u=_,_=void 0},drain:function(){var w=y;for(y=u=x=void 0;w;)w.fn.call(w.self),w=w.next}}}();var a=k({},"constructor",c,!1);return c.prototype=a,k(a,"__NPO__",0,!1),k(c,"resolve",function(y){return y&&"object"==typeof y&&1===y.__NPO__?y:new this(function(u,_){if("function"!=typeof u||"function"!=typeof _)throw TypeError("Not a function");u(y)})}),k(c,"reject",function(y){return new this(function(u,_){if("function"!=typeof u||"function"!=typeof _)throw TypeError("Not a function");_(y)})}),k(c,"all",function(y){var u=this;return"[object Array]"!=n.call(y)?u.reject(TypeError("Not an array")):0===y.length?u.resolve([]):new u(function(_,b){if("function"!=typeof _||"function"!=typeof b)throw TypeError("Not a function");var w=y.length,T=Array(w),C=0;s(u,y,function(M,I){T[M]=I,++C===w&&_(T)},b)})}),k(c,"race",function(y){var u=this;return"[object Array]"!=n.call(y)?u.reject(TypeError("Not an array")):new u(function(_,b){if("function"!=typeof _||"function"!=typeof b)throw TypeError("Not a function");s(u,y,function(w,T){_(T)},b)})}),c},(x=void 0!==m?m:this)[k="Promise"]=x[k]||e(),void 0!==$&&$.exports&&($.exports=x[k])}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},v("timers").setImmediate)},{timers:312}],246:[function(v,$,Q){var m=Math.PI,g=i(120);function k(l,r,d,f){return["C",l,r,d,f,d,f]}function x(l,r,d,f,t,h){return["C",l/3+2/3*d,r/3+2/3*f,t/3+2/3*d,h/3+2/3*f,t,h]}function e(l,r,d,f,t,h,s,o,p,c){if(c)I=c[0],P=c[1],C=c[2],M=c[3];else{var a=n(l,r,-t);r=a.y;var y=((l=a.x)-(o=(a=n(o,p,-t)).x))/2,u=(r-(p=a.y))/2,_=y*y/(d*d)+u*u/(f*f);_>1&&(d*=_=Math.sqrt(_),f*=_);var b=d*d,w=f*f,T=(h==s?-1:1)*Math.sqrt(Math.abs((b*w-b*u*u-w*y*y)/(b*u*u+w*y*y)));T==1/0&&(T=1);var C=T*d*u/f+(l+o)/2,M=T*-f*y/d+(r+p)/2,I=Math.asin(((r-M)/f).toFixed(9)),P=Math.asin(((p-M)/f).toFixed(9));(I=l<C?m-I:I)<0&&(I=2*m+I),(P=o<C?m-P:P)<0&&(P=2*m+P),s&&I>P&&(I-=2*m),!s&&P>I&&(P-=2*m)}if(Math.abs(P-I)>g){var S=P,E=o,R=p;P=I+g*(s&&P>I?1:-1);var D=e(o=C+d*Math.cos(P),p=M+f*Math.sin(P),d,f,t,0,s,E,R,[P,S,C,M])}var j=Math.tan((P-I)/4),H=4/3*d*j,Y=4/3*f*j,X=[2*l-(l+H*Math.sin(I)),2*r-(r-Y*Math.cos(I)),o+H*Math.sin(P),p-Y*Math.cos(P),o,p];if(c)return X;D&&(X=X.concat(D));for(var Z=0;Z<X.length;){var W=n(X[Z],X[Z+1],t);X[Z++]=W.x,X[Z++]=W.y}return X}function n(l,r,d){return{x:l*Math.cos(d)-r*Math.sin(d),y:l*Math.sin(d)+r*Math.cos(d)}}function i(l){return l*(m/180)}$.exports=function(l){for(var r,d=[],f=0,t=0,h=0,s=0,o=null,p=null,c=0,a=0,y=0,u=l.length;y<u;y++){var _=l[y],b=_[0];switch(b){case"M":h=_[1],s=_[2];break;case"A":(_=e(c,a,_[1],_[2],i(_[3]),_[4],_[5],_[6],_[7])).unshift("C"),_.length>7&&(d.push(_.splice(0,7)),_.unshift("C"));break;case"S":var w=c,T=a;"C"!=r&&"S"!=r||(w+=w-f,T+=T-t),_=["C",w,T,_[1],_[2],_[3],_[4]];break;case"T":"Q"==r||"T"==r?(o=2*c-o,p=2*a-p):(o=c,p=a),_=x(c,a,o,p,_[1],_[2]);break;case"Q":o=_[1],p=_[2],_=x(c,a,_[1],_[2],_[3],_[4]);break;case"L":_=k(c,a,_[1],_[2]);break;case"H":_=k(c,a,_[1],a);break;case"V":_=k(c,a,c,_[1]);break;case"Z":_=k(c,a,h,s)}r=b,c=_[_.length-2],a=_[_.length-1],_.length>4?(f=_[_.length-4],t=_[_.length-3]):(f=c,t=a),d.push(_)}return d}},{}],247:[function(v,$,Q){"use strict";var m=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;function x(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}$.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},i=0;i<10;i++)n["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(n).map(function(r){return n[r]}).join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(r){l[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch{return!1}}()?Object.assign:function(e,n){for(var i,l,r=x(e),d=1;d<arguments.length;d++){for(var f in i=Object(arguments[d]))g.call(i,f)&&(r[f]=i[f]);if(m){l=m(i);for(var t=0;t<l.length;t++)k.call(i,l[t])&&(r[l[t]]=i[l[t]])}}return r}},{}],248:[function(v,$,Q){"use strict";function m(x,e){if("string"!=typeof x)return[x];var n=[x];"string"==typeof e||Array.isArray(e)?e={brackets:e}:e||(e={});var i=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],l=e.escape||"___",r=!!e.flat;i.forEach(function(f){var t=new RegExp(["\\",f[0],"[^\\",f[0],"\\",f[1],"]*\\",f[1]].join("")),h=[];function s(o,p,c){var a=n.push(o.slice(f[0].length,-f[1].length))-1;return h.push(a),l+a+l}n.forEach(function(o,p){for(var c,a=0;o!=c;)if(c=o,o=o.replace(t,s),a++>1e4)throw Error("References have circular dependency. Please, check them.");n[p]=o}),h=h.reverse(),n=n.map(function(o){return h.forEach(function(p){o=o.replace(new RegExp("(\\"+l+p+"\\"+l+")","g"),f[0]+"$1"+f[1])}),o})});var d=new RegExp("\\"+l+"([0-9]+)\\"+l);return r?n:function f(t,h,s){for(var o,p=[],c=0;o=d.exec(t);){if(c++>1e4)throw Error("Circular references in parenthesis");p.push(t.slice(0,o.index)),p.push(f(h[o[1]],h)),t=t.slice(o.index+o[0].length)}return p.push(t),p}(n[0],n)}function g(x,e){if(e&&e.flat){var n,i=e&&e.escape||"___",l=x[0];if(!l)return"";for(var r=new RegExp("\\"+i+"([0-9]+)\\"+i),d=0;l!=n;){if(d++>1e4)throw Error("Circular references in "+x);n=l,l=l.replace(r,f)}return l}return x.reduce(function t(h,s){return Array.isArray(s)&&(s=s.reduce(t,"")),h+s},"");function f(t,h){if(null==x[h])throw Error("Reference "+h+"is undefined");return x[h]}}function k(x,e){return Array.isArray(x)?g(x,e):m(x,e)}k.parse=m,k.stringify=g,$.exports=k},{}],249:[function(v,$,Q){"use strict";var m=v("pick-by-alias");$.exports=function(g){var k;return arguments.length>1&&(g=arguments),"string"==typeof g?g=g.split(/\s/).map(parseFloat):"number"==typeof g&&(g=[g]),g.length&&"number"==typeof g[0]?k=1===g.length?{width:g[0],height:g[0],x:0,y:0}:2===g.length?{width:g[0],height:g[1],x:0,y:0}:{x:g[0],y:g[1],width:g[2]-g[0]||0,height:g[3]-g[1]||0}:g&&((k={x:(g=m(g,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:g.top||0}).width=null==g.width?g.right?g.right-k.x:0:g.width,k.height=null==g.height?g.bottom?g.bottom-k.y:0:g.height),k}},{"pick-by-alias":253}],250:[function(v,$,Q){$.exports=function(x){var e=[];return x.replace(g,function(n,i,l){var f,r=i.toLowerCase();for(f=void 0,l=(f=l.match(k))?f.map(Number):[],"m"==r&&l.length>2&&(e.push([i].concat(l.splice(0,2))),r="l",i="m"==i?"l":"L");;){if(l.length==m[r])return l.unshift(i),e.push(l);if(l.length<m[r])throw new Error("malformed path data");e.push([i].concat(l.splice(0,m[r])))}}),e};var m={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},g=/([astvzqmhlc])([^astvzqmhlc]*)/gi,k=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(v,$,Q){$.exports=function(m,g){g||(g=[0,""]),m=String(m);var k=parseFloat(m,10);return g[0]=k,g[1]=m.match(/[\d.\-\+]*\s*(.*)/)[1]||"",g}},{}],252:[function(v,$,Q){(function(m){(function(){(function(){var g,k,x,e,n,i;typeof performance<"u"&&null!==performance&&performance.now?$.exports=function(){return performance.now()}:null!=m&&m.hrtime?($.exports=function(){return(g()-n)/1e6},k=m.hrtime,e=(g=function(){var l;return 1e9*(l=k())[0]+l[1]})(),i=1e9*m.uptime(),n=e-i):Date.now?($.exports=function(){return Date.now()-x},x=Date.now()):($.exports=function(){return(new Date).getTime()-x},x=(new Date).getTime())}).call(this)}).call(this)}).call(this,v("_process"))},{_process:278}],253:[function(v,$,Q){"use strict";$.exports=function(k,x,e){var n,i,l={};if("string"==typeof x&&(x=g(x)),Array.isArray(x)){var r={};for(i=0;i<x.length;i++)r[x[i]]=!0;x=r}for(n in x)x[n]=g(x[n]);var d={};for(n in x){var f=x[n];if(Array.isArray(f))for(i=0;i<f.length;i++){var t=f[i];if(e&&(d[t]=!0),t in k){if(l[n]=k[t],e)for(var h=i;h<f.length;h++)d[f[h]]=!0;break}}else n in k&&(x[n]&&(l[n]=k[n]),e&&(d[n]=!0))}if(e)for(n in k)d[n]||(l[n]=k[n]);return l};var m={};function g(k){return m[k]?m[k]:("string"==typeof k&&(k=m[k]=k.split(/\s*,\s*|\s+/)),k)}},{}],254:[function(v,$,Q){$.exports=function(m,g,k,x){var e=m[0],n=m[1],i=!1;void 0===k&&(k=0),void 0===x&&(x=g.length);for(var l=x-k,r=0,d=l-1;r<l;d=r++){var f=g[r+k][0],t=g[r+k][1],s=g[d+k][1];t>n!=s>n&&e<(g[d+k][0]-f)*(n-t)/(s-t)+f&&(i=!i)}return i}},{}],255:[function(v,$,Q){var m,g=v("./lib/build-log"),k=v("./lib/epsilon"),x=v("./lib/intersecter"),e=v("./lib/segment-chainer"),n=v("./lib/segment-selector"),i=v("./lib/geojson"),l=!1,r=k();function d(f,t,h){var s=m.segments(f),o=m.segments(t),p=h(m.combine(s,o));return m.polygon(p)}m={buildLog:function(f){return!0===f?l=g():!1===f&&(l=!1),!1!==l&&l.list},epsilon:function(f){return r.epsilon(f)},segments:function(f){var t=x(!0,r,l);return f.regions.forEach(t.addRegion),{segments:t.calculate(f.inverted),inverted:f.inverted}},combine:function(f,t){return{combined:x(!1,r,l).calculate(f.segments,f.inverted,t.segments,t.inverted),inverted1:f.inverted,inverted2:t.inverted}},selectUnion:function(f){return{segments:n.union(f.combined,l),inverted:f.inverted1||f.inverted2}},selectIntersect:function(f){return{segments:n.intersect(f.combined,l),inverted:f.inverted1&&f.inverted2}},selectDifference:function(f){return{segments:n.difference(f.combined,l),inverted:f.inverted1&&!f.inverted2}},selectDifferenceRev:function(f){return{segments:n.differenceRev(f.combined,l),inverted:!f.inverted1&&f.inverted2}},selectXor:function(f){return{segments:n.xor(f.combined,l),inverted:f.inverted1!==f.inverted2}},polygon:function(f){return{regions:e(f.segments,r,l),inverted:f.inverted}},polygonFromGeoJSON:function(f){return i.toPolygon(m,f)},polygonToGeoJSON:function(f){return i.fromPolygon(m,r,f)},union:function(f,t){return d(f,t,m.selectUnion)},intersect:function(f,t){return d(f,t,m.selectIntersect)},difference:function(f,t){return d(f,t,m.selectDifference)},differenceRev:function(f,t){return d(f,t,m.selectDifferenceRev)},xor:function(f,t){return d(f,t,m.selectXor)}},"object"==typeof window&&(window.PolyBool=m),$.exports=m},{"./lib/build-log":256,"./lib/epsilon":257,"./lib/geojson":258,"./lib/intersecter":259,"./lib/segment-chainer":261,"./lib/segment-selector":262}],256:[function(v,$,Q){$.exports=function(){var m,g=0,k=!1;function x(e,n){return m.list.push({type:e,data:n?JSON.parse(JSON.stringify(n)):void 0}),m}return m={list:[],segmentId:function(){return g++},checkIntersection:function(e,n){return x("check",{seg1:e,seg2:n})},segmentChop:function(e,n){return x("div_seg",{seg:e,pt:n}),x("chop",{seg:e,pt:n})},statusRemove:function(e){return x("pop_seg",{seg:e})},segmentUpdate:function(e){return x("seg_update",{seg:e})},segmentNew:function(e,n){return x("new_seg",{seg:e,primary:n})},segmentRemove:function(e){return x("rem_seg",{seg:e})},tempStatus:function(e,n,i){return x("temp_status",{seg:e,above:n,below:i})},rewind:function(e){return x("rewind",{seg:e})},status:function(e,n,i){return x("status",{seg:e,above:n,below:i})},vert:function(e){return e===k?m:(k=e,x("vert",{x:e}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),x("log",{txt:e})},reset:function(){return x("reset")},selected:function(e){return x("selected",{segs:e})},chainStart:function(e){return x("chain_start",{seg:e})},chainRemoveHead:function(e,n){return x("chain_rem_head",{index:e,pt:n})},chainRemoveTail:function(e,n){return x("chain_rem_tail",{index:e,pt:n})},chainNew:function(e,n){return x("chain_new",{pt1:e,pt2:n})},chainMatch:function(e){return x("chain_match",{index:e})},chainClose:function(e){return x("chain_close",{index:e})},chainAddHead:function(e,n){return x("chain_add_head",{index:e,pt:n})},chainAddTail:function(e,n){return x("chain_add_tail",{index:e,pt:n})},chainConnect:function(e,n){return x("chain_con",{index1:e,index2:n})},chainReverse:function(e){return x("chain_rev",{index:e})},chainJoin:function(e,n){return x("chain_join",{index1:e,index2:n})},done:function(){return x("done")}}}},{}],257:[function(v,$,Q){$.exports=function(m){"number"!=typeof m&&(m=1e-10);var g={epsilon:function(k){return"number"==typeof k&&(m=k),m},pointAboveOrOnLine:function(k,x,e){var n=x[0],i=x[1];return(e[0]-n)*(k[1]-i)-(e[1]-i)*(k[0]-n)>=-m},pointBetween:function(k,x,e){var i=e[0]-x[0],r=e[1]-x[1],d=(k[0]-x[0])*i+(k[1]-x[1])*r;return!(d<m||d-(i*i+r*r)>-m)},pointsSameX:function(k,x){return Math.abs(k[0]-x[0])<m},pointsSameY:function(k,x){return Math.abs(k[1]-x[1])<m},pointsSame:function(k,x){return g.pointsSameX(k,x)&&g.pointsSameY(k,x)},pointsCompare:function(k,x){return g.pointsSameX(k,x)?g.pointsSameY(k,x)?0:k[1]<x[1]?-1:1:k[0]<x[0]?-1:1},pointsCollinear:function(k,x,e){return Math.abs((k[0]-x[0])*(x[1]-e[1])-(x[0]-e[0])*(k[1]-x[1]))<m},linesIntersect:function(k,x,e,n){var i=x[0]-k[0],l=x[1]-k[1],r=n[0]-e[0],d=n[1]-e[1],f=i*d-l*r;if(Math.abs(f)<m)return!1;var t=k[0]-e[0],h=k[1]-e[1],s=(r*h-d*t)/f,o=(i*h-l*t)/f,p={alongA:0,alongB:0,pt:[k[0]+s*i,k[1]+s*l]};return p.alongA=s<=-m?-2:s<m?-1:s-1<=-m?0:s-1<m?1:2,p.alongB=o<=-m?-2:o<m?-1:o-1<=-m?0:o-1<m?1:2,p},pointInsideRegion:function(k,x){for(var e=k[0],n=k[1],i=x[x.length-1][0],l=x[x.length-1][1],r=!1,d=0;d<x.length;d++){var f=x[d][0],t=x[d][1];t-n>m!=l-n>m&&(i-f)*(n-t)/(l-t)+f-e>m&&(r=!r),i=f,l=t}return r}};return g}},{}],258:[function(v,$,Q){$.exports={toPolygon:function(g,k){function x(i){if(i.length<=0)return g.segments({inverted:!1,regions:[]});function l(f){var t=f.slice(0,f.length-1);return g.segments({inverted:!1,regions:[t]})}for(var r=l(i[0]),d=1;d<i.length;d++)r=g.selectDifference(g.combine(r,l(i[d])));return r}if("Polygon"===k.type)return g.polygon(x(k.coordinates));if("MultiPolygon"===k.type){for(var e=g.segments({inverted:!1,regions:[]}),n=0;n<k.coordinates.length;n++)e=g.selectUnion(g.combine(e,x(k.coordinates[n])));return g.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(g,k,x){function e(o,p){return k.pointInsideRegion([.5*(o[0][0]+o[1][0]),.5*(o[0][1]+o[1][1])],p)}function n(o){return{region:o,children:[]}}x=g.polygon(g.segments(x));var i=n(null);function l(o,p){for(var c=0;c<o.children.length;c++)if(e(p,(y=o.children[c]).region))return void l(y,p);var a=n(p);for(c=0;c<o.children.length;c++){var y;e((y=o.children[c]).region,p)&&(a.children.push(y),o.children.splice(c,1),c--)}o.children.push(a)}for(var r=0;r<x.regions.length;r++){var d=x.regions[r];d.length<3||l(i,d)}function f(o,p){for(var c=0,a=o[o.length-1][0],y=o[o.length-1][1],u=[],_=0;_<o.length;_++){var b=o[_][0],w=o[_][1];u.push([b,w]),c+=w*a-b*y,a=b,y=w}return c<0!==p&&u.reverse(),u.push([u[0][0],u[0][1]]),u}var t=[];function h(o){var p=[f(o.region,!1)];t.push(p);for(var c=0;c<o.children.length;c++)p.push(s(o.children[c]))}function s(o){for(var p=0;p<o.children.length;p++)h(o.children[p]);return f(o.region,!0)}for(r=0;r<i.children.length;r++)h(i.children[r]);return t.length<=0?{type:"Polygon",coordinates:[]}:1==t.length?{type:"Polygon",coordinates:t[0]}:{type:"MultiPolygon",coordinates:t}}}},{}],259:[function(v,$,Q){var m=v("./linked-list");$.exports=function(g,k,x){function e(f,t,h){return{id:x?x.segmentId():-1,start:f,end:t,myFill:{above:h.myFill.above,below:h.myFill.below},otherFill:null}}var n=m.create();function i(f,t){n.insertBefore(f,function(h){return s=f.isStart,p=t,c=h.isStart,y=h.other.pt,(0!==(u=k.pointsCompare(f.pt,a=h.pt))?u:k.pointsSame(p,y)?0:s!==c?s?1:-1:k.pointAboveOrOnLine(p,c?a:y,c?y:a)?1:-1)<0;var s,p,c,a,y,u})}function l(f,t){var s,p,h=(i(p=m.node({isStart:!0,pt:(s=f).start,seg:s,primary:t,other:null,status:null}),s.end),p);return function(s,o,p){var c=m.node({isStart:!1,pt:o.end,seg:o,primary:p,other:s,status:null});s.other=c,i(c,s.pt)}(h,f,t),h}function r(f,t){var s,o,h=e(t,f.seg.end,f.seg);return s=f,o=t,x&&x.segmentChop(s.seg,o),s.other.remove(),s.seg.end=o,s.other.pt=o,i(s.other,s.pt),l(h,f.primary)}function d(f,t){var h=m.create();function s(I){return h.findTransition(function(P){var S,E,R,D,j,H;return D=(S=I).seg.end,(k.pointsCollinear(R=S.seg.start,j=(E=P.ev).seg.start,H=E.seg.end)?k.pointsCollinear(D,j,H)||k.pointAboveOrOnLine(D,j,H)?1:-1:k.pointAboveOrOnLine(R,j,H)?1:-1)>0})}function o(I,P){var S=I.seg,E=P.seg,R=S.start,D=S.end,j=E.start,H=E.end;x&&x.checkIntersection(S,E);var Y=k.linesIntersect(R,D,j,H);if(!1===Y){if(!k.pointsCollinear(R,D,j)||k.pointsSame(R,H)||k.pointsSame(D,j))return!1;var X=k.pointsSame(R,j),Z=k.pointsSame(D,H);if(X&&Z)return P;var W=!X&&k.pointBetween(R,j,H),re=!Z&&k.pointBetween(D,j,H);if(X)return re?r(P,D):r(I,H),P;W&&(Z||(re?r(P,D):r(I,H)),r(P,R))}else 0===Y.alongA&&(-1===Y.alongB?r(I,j):0===Y.alongB?r(I,Y.pt):1===Y.alongB&&r(I,H)),0===Y.alongB&&(-1===Y.alongA?r(P,R):0===Y.alongA?r(P,Y.pt):1===Y.alongA&&r(P,D));return!1}for(var p=[];!n.isEmpty();){var c=n.getHead();if(x&&x.vert(c.pt[0]),c.isStart){let I=function(){if(y){var P=o(c,y);if(P)return P}return!!u&&o(c,u)};x&&x.segmentNew(c.seg,c.primary);var a=s(c),y=a.before?a.before.ev:null,u=a.after?a.after.ev:null;x&&x.tempStatus(c.seg,!!y&&y.seg,!!u&&u.seg);var _,w,b=I();if(b&&(g?(w=null===c.seg.myFill.below||c.seg.myFill.above!==c.seg.myFill.below)&&(b.seg.myFill.above=!b.seg.myFill.above):b.seg.otherFill=c.seg.myFill,x&&x.segmentUpdate(b.seg),c.other.remove(),c.remove()),n.getHead()!==c){x&&x.rewind(c.seg);continue}g?(w=null===c.seg.myFill.below||c.seg.myFill.above!==c.seg.myFill.below,c.seg.myFill.below=u?u.seg.myFill.above:f,c.seg.myFill.above=w?!c.seg.myFill.below:c.seg.myFill.below):null===c.seg.otherFill&&(c.seg.otherFill={above:_=u?c.primary===u.primary?u.seg.otherFill.above:u.seg.myFill.above:c.primary?t:f,below:_}),x&&x.status(c.seg,!!y&&y.seg,!!u&&u.seg),c.other.status=a.insert(m.node({ev:c}))}else{var T=c.status;if(null===T)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(h.exists(T.prev)&&h.exists(T.next)&&o(T.prev.ev,T.next.ev),x&&x.statusRemove(T.ev.seg),T.remove(),!c.primary){var C=c.seg.myFill;c.seg.myFill=c.seg.otherFill,c.seg.otherFill=C}p.push(c.seg)}n.getHead().remove()}return x&&x.done(),p}return g?{addRegion:function(f){for(var t,h,s,o=f[f.length-1],p=0;p<f.length;p++){var c=k.pointsCompare(t=o,o=f[p]);0!==c&&l((h=c<0?t:o,s=c<0?o:t,{id:x?x.segmentId():-1,start:h,end:s,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(f){return d(f,!1)}}:{calculate:function(f,t,h,s){return f.forEach(function(o){l(e(o.start,o.end,o),!0)}),h.forEach(function(o){l(e(o.start,o.end,o),!1)}),d(t,s)}}}},{"./linked-list":260}],260:[function(v,$,Q){$.exports={create:function(){var m={root:{root:!0,next:null},exists:function(g){return null!==g&&g!==m.root},isEmpty:function(){return null===m.root.next},getHead:function(){return m.root.next},insertBefore:function(g,k){for(var x=m.root,e=m.root.next;null!==e;){if(k(e))return g.prev=e.prev,g.next=e,e.prev.next=g,void(e.prev=g);x=e,e=e.next}x.next=g,g.prev=x,g.next=null},findTransition:function(g){for(var k=m.root,x=m.root.next;null!==x&&!g(x);)k=x,x=x.next;return{before:k===m.root?null:k,after:x,insert:function(e){return e.prev=k,e.next=x,k.next=e,null!==x&&(x.prev=e),e}}}};return m},node:function(m){return m.prev=null,m.next=null,m.remove=function(){m.prev.next=m.next,m.next&&(m.next.prev=m.prev),m.prev=null,m.next=null},m}}},{}],261:[function(v,$,Q){$.exports=function(m,g,k){var x=[],e=[];return m.forEach(function(n){var i=n.start,l=n.end;if(g.pointsSame(i,l))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{k&&k.chainStart(n);for(var r={index:0,matches_head:!1,matches_pt1:!1},d={index:0,matches_head:!1,matches_pt1:!1},f=r,t=0;t<x.length;t++){var h=(a=x[t])[0],s=a[a.length-1];if(g.pointsSame(h,i)){if(M(t,!0,!0))break}else if(g.pointsSame(h,l)){if(M(t,!0,!1))break}else if(g.pointsSame(s,i)){if(M(t,!1,!0))break}else if(g.pointsSame(s,l)&&M(t,!1,!1))break}if(f===r)return x.push([i,l]),void(k&&k.chainNew(i,l));if(f===d){k&&k.chainMatch(r.index);var o=r.index,p=r.matches_pt1?l:i,c=r.matches_head,a=x[o],y=c?a[0]:a[a.length-1],u=c?a[1]:a[a.length-2],_=c?a[a.length-1]:a[0],b=c?a[a.length-2]:a[1];return g.pointsCollinear(u,y,p)&&(c?(k&&k.chainRemoveHead(r.index,p),a.shift()):(k&&k.chainRemoveTail(r.index,p),a.pop()),y=u),g.pointsSame(_,p)?(x.splice(o,1),g.pointsCollinear(b,_,y)&&(c?(k&&k.chainRemoveTail(r.index,y),a.pop()):(k&&k.chainRemoveHead(r.index,y),a.shift())),k&&k.chainClose(r.index),void e.push(a)):void(c?(k&&k.chainAddHead(r.index,p),a.unshift(p)):(k&&k.chainAddTail(r.index,p),a.push(p)))}var w=r.index,T=d.index;k&&k.chainConnect(w,T);var C=x[w].length<x[T].length;r.matches_head?d.matches_head?C?(I(w),P(w,T)):(I(T),P(T,w)):P(T,w):d.matches_head?P(w,T):C?(I(w),P(T,w)):(I(T),P(w,T))}function M(S,E,R){return f.index=S,f.matches_head=E,f.matches_pt1=R,f===r?(f=d,!1):(f=null,!0)}function I(S){k&&k.chainReverse(S),x[S].reverse()}function P(S,E){var R=x[S],D=x[E],j=R[R.length-1],H=R[R.length-2],Y=D[0],X=D[1];g.pointsCollinear(H,j,Y)&&(k&&k.chainRemoveTail(S,j),R.pop(),j=H),g.pointsCollinear(j,Y,X)&&(k&&k.chainRemoveHead(E,Y),D.shift()),k&&k.chainJoin(S,E),x[S]=R.concat(D),x.splice(E,1)}}),e}},{}],262:[function(v,$,Q){function m(k,x,e){var n=[];return k.forEach(function(i){var l=(i.myFill.above?8:0)+(i.myFill.below?4:0)+(i.otherFill&&i.otherFill.above?2:0)+(i.otherFill&&i.otherFill.below?1:0);0!==x[l]&&n.push({id:e?e.segmentId():-1,start:i.start,end:i.end,myFill:{above:1===x[l],below:2===x[l]},otherFill:null})}),e&&e.selected(n),n}$.exports={union:function(k,x){return m(k,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],x)},intersect:function(k,x){return m(k,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],x)},difference:function(k,x){return m(k,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],x)},differenceRev:function(k,x){return m(k,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],x)},xor:function(k,x){return m(k,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],x)}}},{}],263:[function(v,$,Q){"use strict";var m=v("stream").Transform,g=v("stream-parser");function k(){m.call(this,{readableObjectMode:!0})}function x(e,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=e,n&&(this.code=n),i&&(this.statusCode=i)}(k.prototype=Object.create(m.prototype)).constructor=k,g(k.prototype),Q.ParserStream=k,Q.sliceEq=function(e,n,i){for(var l=n,r=0;r<i.length;)if(e[l++]!==i[r++])return!1;return!0},Q.str2arr=function(e,n){var i=[],l=0;if(n&&"hex"===n)for(;l<e.length;)i.push(parseInt(e.slice(l,l+2),16)),l+=2;else for(;l<e.length;l++)i.push(255&e.charCodeAt(l));return i},Q.readUInt16LE=function(e,n){return e[n]|e[n+1]<<8},Q.readUInt16BE=function(e,n){return e[n+1]|e[n]<<8},Q.readUInt32LE=function(e,n){return e[n]|e[n+1]<<8|e[n+2]<<16|16777216*e[n+3]},Q.readUInt32BE=function(e,n){return e[n+3]|e[n+2]<<8|e[n+1]<<16|16777216*e[n]},(x.prototype=Object.create(Error.prototype)).constructor=x,Q.ProbeError=x},{stream:286,"stream-parser":302}],264:[function(v,$,Q){"use strict";function m(x,e){var n=new Error(x);return n.code=e,n}function g(x){try{return decodeURIComponent(escape(x))}catch{return x}}function k(x,e,n){this.input=x.subarray(e,n),this.start=e;var i=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==i&&"MM\0*"!==i)throw m("invalid TIFF signature","EBADDATA");this.big_endian="M"===i[0]}k.prototype.each=function(x){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var n=this.ifds_to_read.shift();n.offset&&this.scan_ifd(n.id,n.offset,x)}},k.prototype.read_uint16=function(x){var e=this.input;if(x+2>e.length)throw m("unexpected EOF","EBADDATA");return this.big_endian?256*e[x]+e[x+1]:e[x]+256*e[x+1]},k.prototype.read_uint32=function(x){var e=this.input;if(x+4>e.length)throw m("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[x]+65536*e[x+1]+256*e[x+2]+e[x+3]:e[x]+256*e[x+1]+65536*e[x+2]+16777216*e[x+3]},k.prototype.is_subifd_link=function(x,e){return 0===x&&34665===e||0===x&&34853===e||34665===x&&40965===e},k.prototype.exif_format_length=function(x){switch(x){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},k.prototype.exif_format_read=function(x,e){var n;switch(x){case 1:case 2:return this.input[e];case 6:return(n=this.input[e])|33554430*(128&n);case 3:return this.read_uint16(e);case 8:return(n=this.read_uint16(e))|131070*(32768&n);case 4:return this.read_uint32(e);case 9:return 0|this.read_uint32(e);default:return null}},k.prototype.scan_ifd=function(x,e,n){var i=this.read_uint16(e);e+=2;for(var l=0;l<i;l++){var r=this.read_uint16(e),d=this.read_uint16(e+2),f=this.read_uint32(e+4),t=this.exif_format_length(d),h=f*t,s=h<=4?e+8:this.read_uint32(e+8),o=!1;if(s+h>this.input.length)throw m("unexpected EOF","EBADDATA");for(var p=[],c=s,a=0;a<f;a++,c+=t){var y=this.exif_format_read(d,c);if(null===y){p=null;break}p.push(y)}if(Array.isArray(p)&&2===d&&(p=g(String.fromCharCode.apply(null,p)))&&"\0"===p[p.length-1]&&(p=p.slice(0,-1)),this.is_subifd_link(x,r)&&Array.isArray(p)&&Number.isInteger(p[0])&&p[0]>0&&(this.ifds_to_read.push({id:r,offset:p[0]}),o=!0),!1===n({is_big_endian:this.big_endian,ifd:x,tag:r,format:d,count:f,entry_offset:e+this.start,data_length:h,data_offset:s+this.start,value:p,is_subifd_link:o}))return void(this.aborted=!0);e+=12}0===x&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},$.exports.ExifParser=k,$.exports.get_orientation=function(x){var e=0;try{return new k(x,0,x.length).each(function(n){if(0===n.ifd&&274===n.tag&&Array.isArray(n.value))return e=n.value[0],!1}),e}catch{return-1}}},{}],265:[function(v,$,Q){"use strict";var m=v("./common").readUInt16BE,g=v("./common").readUInt32BE;function k(r,d){if(r.length<4+d)return null;var f=g(r,d);return r.length<f+d||f<8?null:{boxtype:String.fromCharCode.apply(null,r.slice(d+4,d+8)),data:r.slice(d+8,d+f),end:d+f}}function x(r,d){for(var f=0;;){var t=k(r,f);if(!t)break;switch(t.boxtype){case"ispe":d.sizes.push({width:g(t.data,4),height:g(t.data,8)});break;case"irot":d.transforms.push({type:"irot",value:3&t.data[0]});break;case"imir":d.transforms.push({type:"imir",value:1&t.data[0]})}f=t.end}}function e(r,d,f){for(var t=0,h=0;h<f;h++)t=256*t+(r[d+h]||0);return t}function n(r,d){for(var f=r[4]>>4&15,t=15&r[4],h=r[5]>>4&15,s=m(r,6),o=8,p=0;p<s;p++){var c=m(r,o),a=m(r,o+=2),y=e(r,o+=2,h),u=m(r,o+=h);if(o+=2,0===a&&1===u){var _=e(r,o,f),b=e(r,o+f,t);d.item_loc[c]={length:b,offset:_+y}}o+=u*(f+t)}}function i(r,d){for(var f=m(r,4),t=6,h=0;h<f;h++){var s=k(r,t);if(!s)break;if("infe"===s.boxtype){for(var o=m(s.data,4),p="",c=8;c<s.data.length&&s.data[c];c++)p+=String.fromCharCode(s.data[c]);d.item_inf[p]=o}t=s.end}}function l(r,d){for(var f=0;;){var t=k(r,f);if(!t)break;"ipco"===t.boxtype&&x(t.data,d),f=t.end}}$.exports.unbox=k,$.exports.readSizeFromMeta=function(r){var d={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(c,a){for(var y=4;;){var u=k(c,y);if(!u)break;"iprp"===u.boxtype&&l(u.data,a),"iloc"===u.boxtype&&n(u.data,a),"iinf"===u.boxtype&&i(u.data,a),y=u.end}}(r,d),d.sizes.length){var f,t,h,s=(t=(f=d.sizes).reduce(function(c,a){return c.width>a.width||c.width===a.width&&c.height>a.height?c:a}),h=f.reduce(function(c,a){return c.height>a.height||c.height===a.height&&c.width>a.width?c:a}),t.width>h.height||t.width===h.height&&t.height>h.width?t:h),o=1;d.transforms.forEach(function(c){var a={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},y={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===c.type&&(o=0===c.value?y[o]:a[o=a[o=y[o]]]),"irot"===c.type)for(var u=0;u<c.value;u++)o=a[o]});var p=null;return d.item_inf.Exif&&(p=d.item_loc[d.item_inf.Exif]),{width:s.width,height:s.height,orientation:d.transforms.length?o:null,variants:d.sizes,exif_location:p}}},$.exports.getMimeType=function(r){var d=String.fromCharCode.apply(null,r.slice(0,4)),f={};f[d]=!0;for(var t=8;t<r.length;t+=4)f[String.fromCharCode.apply(null,r.slice(t,t+4))]=!0;if(f.mif1||f.msf1||f.miaf)return"avif"===d||"avis"===d||"avio"===d?{type:"avif",mime:"image/avif"}:"heic"===d||"heix"===d?{type:"heic",mime:"image/heic"}:"hevc"===d||"hevx"===d?{type:"heic",mime:"image/heic-sequence"}:f.avif||f.avis?{type:"avif",mime:"image/avif"}:f.heic||f.heix||f.hevc||f.hevx||f.heis?f.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":263}],266:[function(v,$,Q){"use strict";var m=v("../common").str2arr,g=v("../common").sliceEq,k=v("../common").readUInt32BE,x=v("../miaf_utils"),e=v("../exif_utils"),n=m("ftyp");$.exports=function(i){if(g(i,4,n)){var l=x.unbox(i,0);if(l){var r=x.getMimeType(l.data);if(r){for(var d,f=l.end;;){var t=x.unbox(i,f);if(!t)break;if(f=t.end,"mdat"===t.boxtype)return;if("meta"===t.boxtype){d=t.data;break}}if(d){var h=x.readSizeFromMeta(d);if(h){var s={width:h.width,height:h.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(h.variants.length>1&&(s.variants=h.variants),h.orientation&&(s.orientation=h.orientation),h.exif_location&&h.exif_location.offset+h.exif_location.length<=i.length){var o=k(i,h.exif_location.offset),p=i.slice(h.exif_location.offset+o+4,h.exif_location.offset+h.exif_location.length),c=e.get_orientation(p);c>0&&(s.orientation=c)}return s}}}}}}},{"../common":263,"../exif_utils":264,"../miaf_utils":265}],267:[function(v,$,Q){"use strict";var m=v("../common").str2arr,g=v("../common").sliceEq,k=v("../common").readUInt16LE,x=m("BM");$.exports=function(e){if(!(e.length<26)&&g(e,0,x))return{width:k(e,18),height:k(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":263}],268:[function(v,$,Q){"use strict";var m=v("../common").str2arr,g=v("../common").sliceEq,k=v("../common").readUInt16LE,x=m("GIF87a"),e=m("GIF89a");$.exports=function(n){if(!(n.length<10)&&(g(n,0,x)||g(n,0,e)))return{width:k(n,6),height:k(n,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":263}],269:[function(v,$,Q){"use strict";var m=v("../common").readUInt16LE;$.exports=function(g){var k=m(g,0),x=m(g,2),e=m(g,4);if(0===k&&1===x&&e){for(var n=[],i={width:0,height:0},l=0;l<e;l++){var r=g[6+16*l]||256,d=g[6+16*l+1]||256,f={width:r,height:d};n.push(f),(r>i.width||d>i.height)&&(i=f)}return{width:i.width,height:i.height,variants:n,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":263}],270:[function(v,$,Q){"use strict";var m=v("../common").readUInt16BE,g=v("../common").str2arr,k=v("../common").sliceEq,x=v("../exif_utils"),e=g("Exif\0\0");$.exports=function(n){if(!(n.length<2)&&255===n[0]&&216===n[1]&&255===n[2])for(var i=2;;){for(;;){if(n.length-i<2)return;if(255===n[i++])break}for(var l,r,d=n[i++];255===d;)d=n[i++];if(208<=d&&d<=217||1===d)l=0;else{if(!(192<=d&&d<=254)||n.length-i<2)return;l=m(n,i)-2,i+=2}if(217===d||218===d)return;if(225===d&&l>=10&&k(n,i,e)&&(r=x.get_orientation(n.slice(i+6,i+l))),l>=5&&192<=d&&d<=207&&196!==d&&200!==d&&204!==d){if(n.length-i<l)return;var f={width:m(n,i+3),height:m(n,i+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return r>0&&(f.orientation=r),f}i+=l}}},{"../common":263,"../exif_utils":264}],271:[function(v,$,Q){"use strict";var m=v("../common").str2arr,g=v("../common").sliceEq,k=v("../common").readUInt32BE,x=m("\x89PNG\r\n\x1a\n"),e=m("IHDR");$.exports=function(n){if(!(n.length<24)&&g(n,0,x)&&g(n,12,e))return{width:k(n,16),height:k(n,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":263}],272:[function(v,$,Q){"use strict";var m=v("../common").str2arr,g=v("../common").sliceEq,k=v("../common").readUInt32BE,x=m("8BPS\0\x01");$.exports=function(e){if(!(e.length<22)&&g(e,0,x))return{width:k(e,18),height:k(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":263}],273:[function(v,$,Q){"use strict";function m(r){return"number"==typeof r&&isFinite(r)&&r>0}var g=/<[-_.:a-zA-Z0-9][^>]*>/,k=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,x=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,n=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,i=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function l(r){return i.test(r)?r.match(i)[0]:"px"}$.exports=function(r){if(function(_){var b,w=0,T=_.length;for(239===_[0]&&187===_[1]&&191===_[2]&&(w=3);w<T&&(32===(b=_[w])||9===b||13===b||10===b);)w++;return w!==T&&60===_[w]}(r)){for(var d="",f=0;f<r.length;f++)d+=String.fromCharCode(r[f]);var t=(d.match(g)||[""])[0];if(k.test(t)){var h=(b=(_=t).match(x),w=_.match(e),T=_.match(n),{width:b&&(b[1]||b[2]),height:w&&(w[1]||w[2]),viewbox:T&&(T[1]||T[2])}),s=parseFloat(h.width),o=parseFloat(h.height);if(h.width&&h.height)return m(s)&&m(o)?{width:s,height:o,type:"svg",mime:"image/svg+xml",wUnits:l(h.width),hUnits:l(h.height)}:void 0;var p=(h.viewbox||"").split(" "),c={width:p[2],height:p[3]},a=parseFloat(c.width),y=parseFloat(c.height);if(m(a)&&m(y)&&l(c.width)===l(c.height)){var u=a/y;return h.width?m(s)?{width:s,height:s/u,type:"svg",mime:"image/svg+xml",wUnits:l(h.width),hUnits:l(h.width)}:void 0:h.height?m(o)?{width:o*u,height:o,type:"svg",mime:"image/svg+xml",wUnits:l(h.height),hUnits:l(h.height)}:void 0:{width:a,height:y,type:"svg",mime:"image/svg+xml",wUnits:l(c.width),hUnits:l(c.height)}}}}var _,b,w,T}},{}],274:[function(v,$,Q){"use strict";var m=v("../common").str2arr,g=v("../common").sliceEq,k=v("../common").readUInt16LE,x=v("../common").readUInt16BE,e=v("../common").readUInt32LE,n=v("../common").readUInt32BE,i=m("II*\0"),l=m("MM\0*");function r(t,h,s){return s?x(t,h):k(t,h)}function d(t,h,s){return s?n(t,h):e(t,h)}function f(t,h,s){var o=r(t,h+2,s);return 1!==d(t,h+4,s)||3!==o&&4!==o?null:3===o?r(t,h+8,s):d(t,h+8,s)}$.exports=function(t){if(!(t.length<8)&&(g(t,0,i)||g(t,0,l))){var h=77===t[0],s=d(t,4,h)-8;if(!(s<0)){var o=s+8;if(!(t.length-o<2)){var p=12*r(t,o+0,h);if(!(p<=0||(o+=2,t.length-o<p))){var c,a,y,u;for(c=0;c<p;c+=12)256===(u=r(t,o+c,h))?a=f(t,o+c,h):257===u&&(y=f(t,o+c,h));return a&&y?{width:a,height:y,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":263}],275:[function(v,$,Q){"use strict";var m=v("../common").str2arr,g=v("../common").sliceEq,k=v("../common").readUInt16LE,x=v("../common").readUInt32LE,e=v("../exif_utils"),n=m("RIFF"),i=m("WEBP");function l(f,t){if(157===f[t+3]&&1===f[t+4]&&42===f[t+5])return{width:16383&k(f,t+6),height:16383&k(f,t+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(f,t){if(47===f[t]){var h=x(f,t+1);return{width:1+(16383&h),height:1+(h>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function d(f,t){return{width:1+(f[t+6]<<16|f[t+5]<<8|f[t+4]),height:1+(f[t+9]<<t|f[t+8]<<8|f[t+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}$.exports=function(f){if(!(f.length<16)&&(g(f,0,n)||g(f,8,i))){var t=12,h=null,s=0,o=x(f,4)+8;if(!(o>f.length)){for(;t+8<o;)if(0!==f[t]){var p=String.fromCharCode.apply(null,f.slice(t,t+4)),c=x(f,t+4);"VP8 "===p&&c>=10?h=h||l(f,t+8):"VP8L"===p&&c>=9?h=h||r(f,t+8):"VP8X"===p&&c>=10?h=h||d(f,t+8):"EXIF"===p&&(s=e.get_orientation(f.slice(t+8,t+8+c)),t=1/0),t+=8+c}else t++;if(h)return s>0&&(h.orientation=s),h}}}},{"../common":263,"../exif_utils":264}],276:[function(v,$,Q){"use strict";$.exports={avif:v("./parse_sync/avif"),bmp:v("./parse_sync/bmp"),gif:v("./parse_sync/gif"),ico:v("./parse_sync/ico"),jpeg:v("./parse_sync/jpeg"),png:v("./parse_sync/png"),psd:v("./parse_sync/psd"),svg:v("./parse_sync/svg"),tiff:v("./parse_sync/tiff"),webp:v("./parse_sync/webp")}},{"./parse_sync/avif":266,"./parse_sync/bmp":267,"./parse_sync/gif":268,"./parse_sync/ico":269,"./parse_sync/jpeg":270,"./parse_sync/png":271,"./parse_sync/psd":272,"./parse_sync/svg":273,"./parse_sync/tiff":274,"./parse_sync/webp":275}],277:[function(v,$,Q){"use strict";var m=v("./lib/parsers_sync");$.exports=function(g){return function(k){for(var x=Object.keys(m),e=0;e<x.length;e++){var n=m[x[e]](k);if(n)return n}return null}(g)},$.exports.parsers=m},{"./lib/parsers_sync":276}],278:[function(v,$,Q){var m,g,k=$.exports={};function x(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function n(o){if(m===setTimeout)return setTimeout(o,0);if((m===x||!m)&&setTimeout)return m=setTimeout,setTimeout(o,0);try{return m(o,0)}catch{try{return m.call(null,o,0)}catch{return m.call(this,o,0)}}}!function(){try{m="function"==typeof setTimeout?setTimeout:x}catch{m=x}try{g="function"==typeof clearTimeout?clearTimeout:e}catch{g=e}}();var i,l=[],r=!1,d=-1;function f(){r&&i&&(r=!1,i.length?l=i.concat(l):d=-1,l.length&&t())}function t(){if(!r){var o=n(f);r=!0;for(var p=l.length;p;){for(i=l,l=[];++d<p;)i&&i[d].run();d=-1,p=l.length}i=null,r=!1,function(c){if(g===clearTimeout)return clearTimeout(c);if((g===e||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(c);try{g(c)}catch{try{return g.call(null,c)}catch{return g.call(this,c)}}}(o)}}function h(o,p){this.fun=o,this.array=p}function s(){}k.nextTick=function(o){var p=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)p[c-1]=arguments[c];l.push(new h(o,p)),1!==l.length||r||n(t)},h.prototype.run=function(){this.fun.apply(null,this.array)},k.title="browser",k.browser=!0,k.env={},k.argv=[],k.version="",k.versions={},k.on=s,k.addListener=s,k.once=s,k.off=s,k.removeListener=s,k.removeAllListeners=s,k.emit=s,k.prependListener=s,k.prependOnceListener=s,k.listeners=function(o){return[]},k.binding=function(o){throw new Error("process.binding is not supported")},k.cwd=function(){return"/"},k.chdir=function(o){throw new Error("process.chdir is not supported")},k.umask=function(){return 0}},{}],279:[function(v,$,Q){(function(m){(function(){for(var g=v("performance-now"),k=typeof window>"u"?m:window,x=["moz","webkit"],e="AnimationFrame",n=k["request"+e],i=k["cancel"+e]||k["cancelRequest"+e],l=0;!n&&l<x.length;l++)n=k[x[l]+"Request"+e],i=k[x[l]+"Cancel"+e]||k[x[l]+"CancelRequest"+e];if(!n||!i){var r=0,d=0,f=[];n=function(t){if(0===f.length){var h=g(),s=Math.max(0,1e3/60-(h-r));r=s+h,setTimeout(function(){var o=f.slice(0);f.length=0;for(var p=0;p<o.length;p++)if(!o[p].cancelled)try{o[p].callback(r)}catch(c){setTimeout(function(){throw c},0)}},Math.round(s))}return f.push({handle:++d,callback:t,cancelled:!1}),d},i=function(t){for(var h=0;h<f.length;h++)f[h].handle===t&&(f[h].cancelled=!0)}}$.exports=function(t){return n.call(k,t)},$.exports.cancel=function(){i.apply(k,arguments)},$.exports.polyfill=function(t){t||(t=k),t.requestAnimationFrame=n,t.cancelAnimationFrame=i}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":252}],280:[function(v,$,Q){"use strict";var m=v("array-bounds"),g=v("color-normalize"),k=v("update-diff"),x=v("pick-by-alias"),e=v("object-assign"),n=v("flatten-vertex-data"),i=v("to-float32"),l=i.float32,r=i.fract32;$.exports=function(f,t){if("function"==typeof f?(t||(t={}),t.regl=f):t=f,t.length&&(t.positions=t),!(f=t.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var h,s,o,p,c,a,y=f._gl,u={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},_=[];return p=f.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),s=f.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),o=f.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),c=f.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),a=f.buffer({usage:"static",type:"float",data:d}),C(t),h=f({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:f.prop("range"),lineWidth:f.prop("lineWidth"),capSize:f.prop("capSize"),opacity:f.prop("opacity"),scale:f.prop("scale"),translate:f.prop("translate"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),viewport:function(I,P){return[P.viewport.x,P.viewport.y,I.viewportWidth,I.viewportHeight]}},attributes:{color:{buffer:p,offset:function(I,P){return 4*P.offset},divisor:1},position:{buffer:s,offset:function(I,P){return 8*P.offset},divisor:1},positionFract:{buffer:o,offset:function(I,P){return 8*P.offset},divisor:1},error:{buffer:c,offset:function(I,P){return 16*P.offset},divisor:1},direction:{buffer:a,stride:24,offset:0},lineOffset:{buffer:a,stride:24,offset:8},capOffset:{buffer:a,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport"),stencil:!1,instances:f.prop("count"),count:d.length}),e(b,{update:C,draw:w,destroy:M,regl:f,gl:y,canvas:y.canvas,groups:_}),b;function b(I){I?C(I):null===I&&M(),w()}function w(I){if("number"==typeof I)return T(I);I&&!Array.isArray(I)&&(I=[I]),f._refresh(),_.forEach(function(P,S){P&&(I&&(P.draw=!!I[S]),P.draw?T(S):P.draw=!0)})}function T(I){"number"==typeof I&&(I=_[I]),null!=I&&I&&I.count&&I.color&&I.opacity&&I.positions&&I.positions.length>1&&(I.scaleRatio=[I.scale[0]*I.viewport.width,I.scale[1]*I.viewport.height],h(I),I.after&&I.after(I))}function C(I){if(I){null!=I.length?"number"==typeof I[0]&&(I=[{positions:I}]):Array.isArray(I)||(I=[I]);var P=0,S=0;if(b.groups=_=I.map(function(X,Z){var W=_[Z];return X&&("function"==typeof X?X={after:X}:"number"==typeof X[0]&&(X={positions:X}),X=x(X,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),W||(_[Z]=W={id:Z,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},X=e({},u,X)),k(W,X,[{lineWidth:function(re){return.5*+re},capSize:function(re){return.5*+re},opacity:parseFloat,errors:function(re){return re=n(re),S+=re.length,re},positions:function(re,U){return re=n(re,"float64"),U.count=Math.floor(re.length/2),U.bounds=m(re,2),U.offset=P,P+=U.count,re}},{color:function(re,U){var B=U.count;if(re||(re="transparent"),!Array.isArray(re)||"number"==typeof re[0]){var V=re;re=Array(B);for(var ee=0;ee<B;ee++)re[ee]=V}if(re.length<B)throw Error("Not enough colors");for(var N=new Uint8Array(4*B),K=0;K<B;K++){var J=g(re[K],"uint8");N.set(J,4*K)}return N},range:function(re,U,B){return re||(re=U.bounds),U.scale=[1/(re[2]-re[0]),1/(re[3]-re[1])],U.translate=[-re[0],-re[1]],U.scaleFract=r(U.scale),U.translateFract=r(U.translate),re},viewport:function(re){var U;return Array.isArray(re)?U={x:re[0],y:re[1],width:re[2]-re[0],height:re[3]-re[1]}:re?((U={x:re.x||re.left||0,y:re.y||re.top||0}).width=re.right?re.right-U.x:re.w||re.width||0,U.height=re.bottom?re.bottom-U.y:re.h||re.height||0):U={x:0,y:0,width:y.drawingBufferWidth,height:y.drawingBufferHeight},U}}])),W}),P||S){var E=_.reduce(function(X,Z,W){return X+(Z?Z.count:0)},0),R=new Float64Array(2*E),D=new Uint8Array(4*E),j=new Float32Array(4*E);_.forEach(function(X,Z){if(X){var W=X.positions,U=X.offset,V=X.errors;X.count&&(D.set(X.color,4*U),j.set(V,4*U),R.set(W,2*U))}});var H=l(R);s(H);var Y=r(R,H);o(Y),p(D),c(j)}}}function M(){s.destroy(),o.destroy(),p.destroy(),c.destroy(),a.destroy()}};var d=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":314,"update-diff":330}],281:[function(v,$,Q){"use strict";var m=v("color-normalize"),g=v("array-bounds"),k=v("object-assign"),x=v("glslify"),e=v("pick-by-alias"),n=v("flatten-vertex-data"),i=v("earcut"),l=v("array-normalize"),r=v("to-float32"),d=r.float32,f=r.fract32,t=v("es6-weak-map"),h=v("parse-rect"),s=v("array-find-index");function o(p,c){if(!(this instanceof o))return new o(p,c);if("function"==typeof p?(c||(c={}),c.regl=p):c=p,c.length&&(c.positions=c),!(p=c.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=p._gl,this.regl=p,this.passes=[],this.shaders=o.shaders.has(p)?o.shaders.get(p):o.shaders.set(p,o.createShaders(p)).get(p),this.update(c)}$.exports=o,o.dashMult=2,o.maxPatternLength=256,o.precisionThreshold=3e6,o.maxPoints=1e4,o.maxLines=2048,o.shaders=new t,o.createShaders=function(p){var c,a=p.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),y={primitive:"triangle strip",instances:p.prop("count"),count:4,offset:0,uniforms:{miterMode:function(_,b){return"round"===b.join?2:1},miterLimit:p.prop("miterLimit"),scale:p.prop("scale"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),thickness:p.prop("thickness"),dashTexture:p.prop("dashTexture"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),dashLength:p.prop("dashLength"),viewport:function(_,b){return[b.viewport.x,b.viewport.y,_.viewportWidth,_.viewportHeight]},depth:p.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(_,b){return!b.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:p.prop("viewport")},viewport:p.prop("viewport")},u=p(k({vert:x(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:x(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:a,divisor:0,stride:8,offset:0},lineTop:{buffer:a,divisor:0,stride:8,offset:4},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},y));try{c=p(k({cull:{enable:!0,face:"back"},vert:x(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:x(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:a,divisor:0,stride:8,offset:0},lineTop:{buffer:a,divisor:0,stride:8,offset:4},aColor:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:p.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},y))}catch{c=u}return{fill:p({primitive:"triangle",elements:function(_,b){return b.triangles},offset:0,vert:x(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:x(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:p.prop("scale"),color:p.prop("fill"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),viewport:function(_,b){return[b.viewport.x,b.viewport.y,_.viewportWidth,_.viewportHeight]}},attributes:{position:{buffer:p.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8}},blend:y.blend,depth:{enable:!1},scissor:y.scissor,stencil:y.stencil,viewport:y.viewport}),rect:u,miter:c}},o.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},o.prototype.render=function(){for(var p,c=[],a=arguments.length;a--;)c[a]=arguments[a];c.length&&(p=this).update.apply(p,c),this.draw()},o.prototype.draw=function(){for(var p=this,c=[],a=arguments.length;a--;)c[a]=arguments[a];return(c.length?c:this.passes).forEach(function(y,u){var _;if(y&&Array.isArray(y))return(_=p).draw.apply(_,y);"number"==typeof y&&(y=p.passes[y]),y&&y.count>1&&y.opacity&&(p.regl._refresh(),y.fill&&y.triangles&&y.triangles.length>2&&p.shaders.fill(y),y.thickness&&(y.scale[0]*y.viewport.width>o.precisionThreshold||y.scale[1]*y.viewport.height>o.precisionThreshold||"rect"===y.join||!y.join&&(y.thickness<=2||y.count>=o.maxPoints)?p.shaders.rect(y):p.shaders.miter(y)))}),this},o.prototype.update=function(p){var c=this;if(p){null!=p.length?"number"==typeof p[0]&&(p=[{positions:p}]):Array.isArray(p)||(p=[p]);var a=this.regl,y=this.gl;if(p.forEach(function(T,C){var M=c.passes[C];if(void 0!==T)if(null!==T){if("number"==typeof T[0]&&(T={positions:T}),T=e(T,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),M||(c.passes[C]=M={id:C,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:a.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:a.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:a.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:a.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},T=k({},o.defaults,T)),null!=T.thickness&&(M.thickness=parseFloat(T.thickness)),null!=T.opacity&&(M.opacity=parseFloat(T.opacity)),null!=T.miterLimit&&(M.miterLimit=parseFloat(T.miterLimit)),null!=T.overlay&&(M.overlay=!!T.overlay,C<o.maxLines&&(M.depth=2*(o.maxLines-1-C%o.maxLines)/o.maxLines-1)),null!=T.join&&(M.join=T.join),null!=T.hole&&(M.hole=T.hole),null!=T.fill&&(M.fill=T.fill?m(T.fill,"uint8"):null),null!=T.viewport&&(M.viewport=h(T.viewport)),M.viewport||(M.viewport=h([y.drawingBufferWidth,y.drawingBufferHeight])),null!=T.close&&(M.close=T.close),null===T.positions&&(T.positions=[]),T.positions){var I,P;if(T.positions.x&&T.positions.y){var S=T.positions.x,E=T.positions.y;P=M.count=Math.max(S.length,E.length),I=new Float64Array(2*P);for(var R=0;R<P;R++)I[2*R]=S[R],I[2*R+1]=E[R]}else I=n(T.positions,"float64"),P=M.count=Math.floor(I.length/2);var D=M.bounds=g(I,2);if(M.fill){for(var j=[],H={},Y=0,X=0,Z=0,W=M.count;X<W;X++){var re=I[2*X],U=I[2*X+1];isNaN(re)||isNaN(U)||null==re||null==U?(re=I[2*Y],U=I[2*Y+1],H[X]=Y):Y=X,j[Z++]=re,j[Z++]=U}if(T.splitNull){M.count-1 in H||(H[M.count]=M.count-1);var B=Object.keys(H).map(Number).sort(function(xt,Ht){return xt-Ht}),V=[],ee=0,N=null!=M.hole?M.hole[0]:null;if(null!=N){var K=s(B,function(xt){return xt>=N});(B=B.slice(0,K)).push(N)}for(var J=function(xt){var Ht=j.slice(2*ee,2*B[xt]).concat(N?j.slice(2*N):[]),Zt=(M.hole||[]).map(function(Xt){return Xt-N+(B[xt]-ee)}),$t=i(Ht,Zt);$t=$t.map(function(Xt){return Xt+ee+(Xt+ee<B[xt]?0:N-B[xt])}),V.push.apply(V,$t),ee=B[xt]+1},te=0;te<B.length;te++)J(te);for(var ae=0,le=V.length;ae<le;ae++)null!=H[V[ae]]&&(V[ae]=H[V[ae]]);M.triangles=V}else{for(var se=i(j,M.hole||[]),ve=0,ue=se.length;ve<ue;ve++)null!=H[se[ve]]&&(se[ve]=H[se[ve]]);M.triangles=se}}var ye=new Float64Array(I);l(ye,2,D);var Me=new Float64Array(2*P+6);M.close?I[0]===I[2*P-2]&&I[1]===I[2*P-1]?(Me[0]=ye[2*P-4],Me[1]=ye[2*P-3]):(Me[0]=ye[2*P-2],Me[1]=ye[2*P-1]):(Me[0]=ye[0],Me[1]=ye[1]),Me.set(ye,2),M.close?I[0]===I[2*P-2]&&I[1]===I[2*P-1]?(Me[2*P+2]=ye[2],Me[2*P+3]=ye[3],M.count-=1):(Me[2*P+2]=ye[0],Me[2*P+3]=ye[1],Me[2*P+4]=ye[2],Me[2*P+5]=ye[3]):(Me[2*P+2]=ye[2*P-2],Me[2*P+3]=ye[2*P-1],Me[2*P+4]=ye[2*P-2],Me[2*P+5]=ye[2*P-1]);var pe=d(Me);M.positionBuffer(pe);var ge=f(Me,pe);M.positionFractBuffer(ge)}if(T.range?M.range=T.range:M.range||(M.range=M.bounds),(T.range||T.positions)&&M.count){var we=M.bounds,Te=M.range[2]-M.range[0],Ee=M.range[3]-M.range[1];M.scale=[(we[2]-we[0])/Te,(we[3]-we[1])/Ee],M.translate=[-M.range[0]/Te+we[0]/Te||0,-M.range[1]/Ee+we[1]/Ee||0],M.scaleFract=f(M.scale),M.translateFract=f(M.translate)}if(T.dashes){var Ae,De=0;if(!T.dashes||T.dashes.length<2)De=1,Ae=new Uint8Array([255,255,255,255,255,255,255,255]);else{De=0;for(var Ie=0;Ie<T.dashes.length;++Ie)De+=T.dashes[Ie];Ae=new Uint8Array(De*o.dashMult);for(var Oe=0,Xe=255,Fe=0;Fe<2;Fe++)for(var Pe=0;Pe<T.dashes.length;++Pe){for(var Re=0,qe=T.dashes[Pe]*o.dashMult*.5;Re<qe;++Re)Ae[Oe++]=Xe;Xe^=255}}M.dashLength=De,M.dashTexture({channels:1,data:Ae,width:Ae.length,height:1,mag:"linear",min:"linear"},0,0)}if(T.color){var Qe=M.count,ct=T.color;ct||(ct="transparent");var bt=new Uint8Array(4*Qe+4);if(Array.isArray(ct)&&"number"!=typeof ct[0]){for(var Tt=0;Tt<Qe;Tt++){var _t=m(ct[Tt],"uint8");bt.set(_t,4*Tt)}bt.set(m(ct[0],"uint8"),4*Qe)}else for(var nt=m(ct,"uint8"),Ke=0;Ke<Qe+1;Ke++)bt.set(nt,4*Ke);M.colorBuffer({usage:"dynamic",type:"uint8",data:bt})}}else c.passes[C]=null}),p.length<this.passes.length){for(var u=p.length;u<this.passes.length;u++){var _=this.passes[u];_&&(_.colorBuffer.destroy(),_.positionBuffer.destroy(),_.dashTexture.destroy())}this.passes.length=p.length}for(var b=[],w=0;w<this.passes.length;w++)null!==this.passes[w]&&b.push(this.passes[w]);return this.passes=b,this}},o.prototype.destroy=function(){return this.passes.forEach(function(p){p.colorBuffer.destroy(),p.positionBuffer.destroy(),p.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314}],282:[function(v,$,Q){"use strict";function m(u,_){return function(b){if(Array.isArray(b))return b}(u)||function(b,w){var T=null==b?null:typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(null!=T){var C,M,I=[],P=!0,S=!1;try{for(T=T.call(b);!(P=(C=T.next()).done)&&(I.push(C.value),!w||I.length!==w);P=!0);}catch(E){S=!0,M=E}finally{try{P||null==T.return||T.return()}finally{if(S)throw M}}return I}}(u,_)||k(u,_)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(u){return function(_){if(Array.isArray(_))return x(_)}(u)||function(_){if(typeof Symbol<"u"&&null!=_[Symbol.iterator]||null!=_["@@iterator"])return Array.from(_)}(u)||k(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(u,_){if(u){if("string"==typeof u)return x(u,_);var b=Object.prototype.toString.call(u).slice(8,-1);return"Object"===b&&u.constructor&&(b=u.constructor.name),"Map"===b||"Set"===b?Array.from(u):"Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?x(u,_):void 0}}function x(u,_){(null==_||_>u.length)&&(_=u.length);for(var b=0,w=new Array(_);b<_;b++)w[b]=u[b];return w}var e=v("color-normalize"),n=v("array-bounds"),i=v("color-id"),l=v("@plotly/point-cluster"),r=v("object-assign"),d=v("glslify"),f=v("pick-by-alias"),t=v("update-diff"),h=v("flatten-vertex-data"),s=v("is-iexplorer"),o=v("to-float32"),p=v("parse-rect"),c=a;function a(u,_){var b=this;if(!(this instanceof a))return new a(u,_);"function"==typeof u?(_||(_={}),_.regl=u):(_=u,u=null),_&&_.length&&(_.positions=_);var w,T=(u=_.regl)._gl,C=[];this.tooManyColors=s,w=u.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),r(this,{regl:u,gl:T,groups:[],markerCache:[null],markerTextures:[null],palette:C,paletteIds:{},paletteTexture:w,maxColors:255,maxSize:100,canvas:T.canvas}),this.update(_);var M={uniforms:{constPointSize:!!_.constPointSize,opacity:u.prop("opacity"),paletteSize:function(S,E){return[b.tooManyColors?0:255,w.height]},pixelRatio:u.context("pixelRatio"),scale:u.prop("scale"),scaleFract:u.prop("scaleFract"),translate:u.prop("translate"),translateFract:u.prop("translateFract"),markerTexture:u.prop("markerTexture"),paletteTexture:w},attributes:{x:function(S,E){return E.xAttr||{buffer:E.positionBuffer,stride:8,offset:0}},y:function(S,E){return E.yAttr||{buffer:E.positionBuffer,stride:8,offset:4}},xFract:function(S,E){return E.xAttr?{constant:[0,0]}:{buffer:E.positionFractBuffer,stride:8,offset:0}},yFract:function(S,E){return E.yAttr?{constant:[0,0]}:{buffer:E.positionFractBuffer,stride:8,offset:4}},size:function(S,E){return E.size.length?{buffer:E.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*E.size/b.maxSize)]}},borderSize:function(S,E){return E.borderSize.length?{buffer:E.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*E.borderSize/b.maxSize)]}},colorId:function(S,E){return E.color.length?{buffer:E.colorBuffer,stride:b.tooManyColors?8:4,offset:0}:{constant:b.tooManyColors?C.slice(4*E.color,4*E.color+4):[E.color]}},borderColorId:function(S,E){return E.borderColor.length?{buffer:E.colorBuffer,stride:b.tooManyColors?8:4,offset:b.tooManyColors?4:2}:{constant:b.tooManyColors?C.slice(4*E.borderColor,4*E.borderColor+4):[E.borderColor]}},isActive:function(S,E){return!0===E.activation?{constant:[1]}:E.activation?E.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:u.prop("viewport")},viewport:u.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:u.prop("elements"),count:u.prop("count"),offset:u.prop("offset"),primitive:"points"},I=r({},M);I.frag=d(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),I.vert=d(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=u(I);var P=r({},M);P.frag=d(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),P.vert=d(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),s&&(P.frag=P.frag.replace("smoothstep","smoothStep"),I.frag=I.frag.replace("smoothstep","smoothStep")),this.drawCircle=u(P)}a.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},a.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},a.prototype.draw=function(){for(var u=this,_=arguments.length,b=new Array(_),w=0;w<_;w++)b[w]=arguments[w];var T=this.groups;if(1===b.length&&Array.isArray(b[0])&&(null===b[0][0]||Array.isArray(b[0][0]))&&(b=b[0]),this.regl._refresh(),b.length)for(var C=0;C<b.length;C++)this.drawItem(C,b[C]);else T.forEach(function(M,I){u.drawItem(I)});return this},a.prototype.drawItem=function(u,_){var b=this.groups,w=b[u];if("number"==typeof _&&(u=_,w=b[_],_=null),w&&w.count&&w.opacity){w.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,w,_));for(var T=[],C=1;C<w.activation.length;C++)w.activation[C]&&(!0===w.activation[C]||w.activation[C].data.length)&&T.push.apply(T,g(this.getMarkerDrawOptions(C,w,_)));T.length&&this.drawMarker(T)}},a.prototype.getMarkerDrawOptions=function(u,_,b){var w=_.range,T=_.tree,C=_.viewport,M=_.activation,I=_.selectionBuffer,P=_.count;if(!T)return b?[r({},_,{markerTexture:this.markerTextures[u],activation:M[u],count:b.length,elements:b,offset:0})]:[r({},_,{markerTexture:this.markerTextures[u],activation:M[u],offset:0})];var S=[],E=T.range(w,{lod:!0,px:[(w[2]-w[0])/C.width,(w[3]-w[1])/C.height]});if(b){for(var R=M[u].data,D=new Uint8Array(P),j=0;j<b.length;j++){var H=b[j];D[H]=R?R[H]:1}I.subdata(D)}for(var Y=E.length;Y--;){var X=m(E[Y],2),Z=X[0];S.push(r({},_,{markerTexture:this.markerTextures[u],activation:b?I:M[u],offset:Z,count:X[1]-Z}))}return S},a.prototype.update=function(){for(var u=this,_=arguments.length,b=new Array(_),w=0;w<_;w++)b[w]=arguments[w];if(b.length){1===b.length&&Array.isArray(b[0])&&(b=b[0]);var T=this.groups,C=this.gl,M=this.regl,I=this.maxSize,P=this.maxColors,S=this.palette;this.groups=T=b.map(function(E,R){var D=T[R];if(void 0===E)return D;null===E?E={positions:null}:"function"==typeof E?E={ondraw:E}:"number"==typeof E[0]&&(E={positions:E}),null===(E=f(E,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(E.positions=[]),null!=E.tooManyColors&&(u.tooManyColors=E.tooManyColors),D||(T[R]=D={id:R,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:M.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},E=r({},a.defaults,E)),E.positions&&!("marker"in E)&&(E.marker=D.marker,delete D.marker),E.marker&&!("positions"in E)&&(E.positions=D.positions,delete D.positions);var j=0,H=0;if(t(D,E,[{snap:!0,size:function(ue,ye){return null==ue&&(ue=a.defaults.size),j+=ue&&ue.length?1:0,ue},borderSize:function(ue,ye){return null==ue&&(ue=a.defaults.borderSize),j+=ue&&ue.length?1:0,ue},opacity:parseFloat,color:function(ue,ye){return null==ue&&(ue=a.defaults.color),ue=u.updateColor(ue),H++,ue},borderColor:function(ue,ye){return null==ue&&(ue=a.defaults.borderColor),ue=u.updateColor(ue),H++,ue},bounds:function(ue,ye,Me){return"range"in Me||(Me.range=null),ue},positions:function(ue,ye,Me){var pe=ye.snap,ge=ye.positionBuffer,we=ye.positionFractBuffer,oe=ye.selectionBuffer;if(ue.x||ue.y)return ye.xAttr=ue.x.length?{buffer:M.buffer(ue.x),offset:0,stride:4,count:ue.x.length}:{buffer:ue.x.buffer,offset:4*ue.x.offset||0,stride:4*(ue.x.stride||1),count:ue.x.count},ye.yAttr=ue.y.length?{buffer:M.buffer(ue.y),offset:0,stride:4,count:ue.y.length}:{buffer:ue.y.buffer,offset:4*ue.y.offset||0,stride:4*(ue.y.stride||1),count:ue.y.count},ye.count=Math.max(ye.xAttr.count,ye.yAttr.count),ue;ue=h(ue,"float64");var de=ye.count=Math.floor(ue.length/2),Te=ye.bounds=de?n(ue,2):null;if(Me.range||ye.range||(delete ye.range,Me.range=Te),Me.marker||ye.marker||(delete ye.marker,Me.marker=null),pe&&(!0===pe||de>pe)?ye.tree=l(ue,{bounds:Te}):pe&&pe.length&&(ye.tree=pe),ye.tree){var Ee={primitive:"points",usage:"static",data:ye.tree,type:"uint32"};ye.elements?ye.elements(Ee):ye.elements=M.elements(Ee)}var Ae=o.float32(ue);return ge({data:Ae,usage:"dynamic"}),we({data:o.fract32(ue,Ae),usage:"dynamic"}),oe({data:new Uint8Array(de),type:"uint8",usage:"stream"}),ue}},{marker:function(ue,ye,Me){var pe=ye.activation;if(pe.forEach(function(Ae){return Ae&&Ae.destroy&&Ae.destroy()}),pe.length=0,ue&&"number"!=typeof ue[0]){for(var ge=[],we=0,oe=Math.min(ue.length,ye.count);we<oe;we++){var de=u.addMarker(ue[we]);ge[de]||(ge[de]=new Uint8Array(ye.count)),ge[de][we]=1}for(var Te=0;Te<ge.length;Te++)if(ge[Te]){var Ee={data:ge[Te],type:"uint8",usage:"static"};pe[Te]?pe[Te](Ee):pe[Te]=M.buffer(Ee),pe[Te].data=ge[Te]}}else pe[u.addMarker(ue)]=!0;return ue},range:function(ue,ye,Me){var pe=ye.bounds;if(pe)return ue||(ue=pe),ye.scale=[1/(ue[2]-ue[0]),1/(ue[3]-ue[1])],ye.translate=[-ue[0],-ue[1]],ye.scaleFract=o.fract(ye.scale),ye.translateFract=o.fract(ye.translate),ue},viewport:function(ue){return p(ue||[C.drawingBufferWidth,C.drawingBufferHeight])}}]),j){var X=D.count,Z=D.size,W=D.borderSize,re=D.sizeBuffer,U=new Uint8Array(2*X);if(Z.length||W.length)for(var B=0;B<X;B++)U[2*B]=Math.round(255*(null==Z[B]?Z:Z[B])/I),U[2*B+1]=Math.round(255*(null==W[B]?W:W[B])/I);re({data:U,usage:"dynamic"})}if(H){var V,N=D.count,K=D.color,J=D.borderColor,te=D.colorBuffer;if(u.tooManyColors){if(K.length||J.length){V=new Uint8Array(8*N);for(var ae=0;ae<N;ae++){var le=K[ae];V[8*ae]=S[4*le],V[8*ae+1]=S[4*le+1],V[8*ae+2]=S[4*le+2],V[8*ae+3]=S[4*le+3];var se=J[ae];V[8*ae+4]=S[4*se],V[8*ae+5]=S[4*se+1],V[8*ae+6]=S[4*se+2],V[8*ae+7]=S[4*se+3]}}}else if(K.length||J.length){V=new Uint8Array(4*N+2);for(var ve=0;ve<N;ve++)null!=K[ve]&&(V[4*ve]=K[ve]%P,V[4*ve+1]=Math.floor(K[ve]/P)),null!=J[ve]&&(V[4*ve+2]=J[ve]%P,V[4*ve+3]=Math.floor(J[ve]/P))}te({data:V||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return D})}},a.prototype.addMarker=function(u){var _,b=this.markerTextures,w=this.regl,T=this.markerCache,C=null==u?0:T.indexOf(u);if(C>=0)return C;if(u instanceof Uint8Array||u instanceof Uint8ClampedArray)_=u;else{_=new Uint8Array(u.length);for(var M=0,I=u.length;M<I;M++)_[M]=255*u[M]}var P=Math.floor(Math.sqrt(_.length));return C=b.length,T.push(u),b.push(w.texture({channels:1,data:_,radius:P,mag:"linear",min:"linear"})),C},a.prototype.updateColor=function(u){var _=this.paletteIds,b=this.palette,w=this.maxColors;Array.isArray(u)||(u=[u]);var T=[];if("number"==typeof u[0]){var C=[];if(Array.isArray(u))for(var M=0;M<u.length;M+=4)C.push(u.slice(M,M+4));else for(var I=0;I<u.length;I+=4)C.push(u.subarray(I,I+4));u=C}for(var P=0;P<u.length;P++){var S=u[P];S=e(S,"uint8");var E=i(S,!1);if(null==_[E]){var R=b.length;_[E]=Math.floor(R/4),b[R]=S[0],b[R+1]=S[1],b[R+2]=S[2],b[R+3]=S[3]}T[P]=_[E]}return!this.tooManyColors&&b.length>4*w&&(this.tooManyColors=!0),this.updatePalette(b),1===T.length?T[0]:T},a.prototype.updatePalette=function(u){if(!this.tooManyColors){var _=this.maxColors,b=this.paletteTexture,w=Math.ceil(.25*u.length/_);if(w>1)for(var T=.25*(u=u.slice()).length%_;T<w*_;T++)u.push(0,0,0,0);b.height<w&&b.resize(_,w),b.subimage({width:Math.min(.25*u.length,_),height:w,data:u},0,0)}},a.prototype.destroy=function(){return this.groups.forEach(function(u){u.sizeBuffer.destroy(),u.positionBuffer.destroy(),u.positionFractBuffer.destroy(),u.colorBuffer.destroy(),u.activation.forEach(function(_){return _&&_.destroy&&_.destroy()}),u.selectionBuffer.destroy(),u.elements&&u.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(u){return u&&u.destroy&&u.destroy()}),this};var y=v("object-assign");$.exports=function(u,_){var b=new c(u,_),w=b.render.bind(b);return y(w,{render:w,update:b.update.bind(b),draw:b.draw.bind(b),destroy:b.destroy.bind(b),regl:b.regl,gl:b.gl,canvas:b.gl.canvas,groups:b.groups,markers:b.markerCache,palette:b.palette}),w}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314,"update-diff":330}],283:[function(v,$,Q){"use strict";var m=v("regl-scatter2d"),g=v("pick-by-alias"),k=v("array-bounds"),x=v("raf"),e=v("array-range"),n=v("parse-rect"),i=v("flatten-vertex-data");function l(t,h){if(!(this instanceof l))return new l(t,h);this.traces=[],this.passes={},this.regl=t,this.scatter=m(t),this.canvas=this.scatter.canvas}function r(t,h,s){return(null!=t.id?t.id:t)<<16|(255&h)<<8|255&s}function d(t,h,s){var o,p,c,a,y=t[h],u=t[s];return y.length>2?(o=y[1],p=y[3]):y.length?(o=y[0],p=y[1]):(o=y.y,p=y.y+y.height),u.length>2?(c=u[0],a=u[2]):u.length?(c=u[0],a=u[1]):(c=u.x,a=u.x+u.width),[c,o,a,p]}function f(t){if("number"==typeof t)return[t,t,t,t];if(2===t.length)return[t[0],t[1],t[0],t[1]];var h=n(t);return[h.x,h.y,h.x+h.width,h.y+h.height]}$.exports=l,l.prototype.render=function(){for(var t,h=this,s=[],o=arguments.length;o--;)s[o]=arguments[o];return s.length&&(t=this).update.apply(t,s),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=x(function(){h.draw(),h.dirty=!0,h.planned=null})):(this.draw(),this.dirty=!0,x(function(){h.dirty=!1})),this)},l.prototype.update=function(){for(var t,h=[],s=arguments.length;s--;)h[s]=arguments[s];if(h.length){for(var o=0;o<h.length;o++)this.updateItem(o,h[o]);this.traces=this.traces.filter(Boolean);for(var p=[],c=0,a=0;a<this.traces.length;a++){for(var y=this.traces[a],u=this.traces[a].passes,_=0;_<u.length;_++)p.push(this.passes[u[_]]);y.passOffset=c,c+=y.passes.length}return(t=this.scatter).update.apply(t,p),this}},l.prototype.updateItem=function(t,h){var s=this.regl;if(null===h)return this.traces[t]=null,this;if(!h)return this;var o,p=g(h,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),c=this.traces[t]||(this.traces[t]={id:t,buffer:s.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:n([s._gl.drawingBufferWidth,s._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=p.color&&(c.color=p.color),null!=p.size&&(c.size=p.size),null!=p.marker&&(c.marker=p.marker),null!=p.borderColor&&(c.borderColor=p.borderColor),null!=p.borderSize&&(c.borderSize=p.borderSize),null!=p.opacity&&(c.opacity=p.opacity),p.viewport&&(c.viewport=n(p.viewport)),null!=p.diagonal&&(c.diagonal=p.diagonal),null!=p.upper&&(c.upper=p.upper),null!=p.lower&&(c.lower=p.lower),p.data){c.buffer(i(p.data)),c.columns=p.data.length,c.count=p.data[0].length,c.bounds=[];for(var a=0;a<c.columns;a++)c.bounds[a]=k(p.data[a],1)}p.range&&(c.range=p.range,o=c.range&&"number"!=typeof c.range[0]),p.domain&&(c.domain=p.domain);var y=!1;null!=p.padding&&(Array.isArray(p.padding)&&p.padding.length===c.columns&&"number"==typeof p.padding[p.padding.length-1]?(c.padding=p.padding.map(f),y=!0):c.padding=f(p.padding));var u=c.columns,_=c.count,b=c.viewport.width,w=c.viewport.height,T=c.viewport.x,C=c.viewport.y,M=b/u,I=w/u;c.passes=[];for(var P=0;P<u;P++)for(var S=0;S<u;S++)if((c.diagonal||S!==P)&&(c.upper||!(P>S))&&(c.lower||!(P<S))){var E=r(c.id,P,S),R=this.passes[E]||(this.passes[E]={});if(p.data&&(R.positions=p.transpose?{x:{buffer:c.buffer,offset:S,count:_,stride:u},y:{buffer:c.buffer,offset:P,count:_,stride:u}}:{x:{buffer:c.buffer,offset:S*_,count:_},y:{buffer:c.buffer,offset:P*_,count:_}},R.bounds=d(c.bounds,P,S)),p.domain||p.viewport||p.data){var D=y?d(c.padding,P,S):c.padding;if(c.domain){var j=d(c.domain,P,S);R.viewport=[T+j[0]*b+D[0],C+j[1]*w+D[1],T+j[2]*b-D[2],C+j[3]*w-D[3]]}else R.viewport=[T+S*M+M*D[0],C+P*I+I*D[1],T+(S+1)*M-M*D[2],C+(P+1)*I-I*D[3]]}p.color&&(R.color=c.color),p.size&&(R.size=c.size),p.marker&&(R.marker=c.marker),p.borderSize&&(R.borderSize=c.borderSize),p.borderColor&&(R.borderColor=c.borderColor),p.opacity&&(R.opacity=c.opacity),p.range&&(R.range=o?d(c.range,P,S):c.range||R.bounds),c.passes.push(E)}return this},l.prototype.draw=function(){for(var t,h=[],s=arguments.length;s--;)h[s]=arguments[s];if(h.length){for(var o=[],p=0;p<h.length;p++)if("number"==typeof h[p]){var c=this.traces[h[p]],y=c.passOffset;o.push.apply(o,e(y,y+c.passes.length))}else if(h[p].length){var u=h[p],_=this.traces[p],b=_.passes,w=_.passOffset;b=b.map(function(T,C){o[w+C]=u})}(t=this.scatter).draw.apply(t,o)}else this.scatter.draw();return this},l.prototype.destroy=function(){return this.traces.forEach(function(t){t.buffer&&t.buffer.destroy&&t.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:279,"regl-scatter2d":282}],284:[function(v,$,Q){var g;g=function(){function m(he,be){this.id=K++,this.type=he,this.data=be}function g(he){return"["+function be(ze){if(0===ze.length)return[];var Ve=ze.charAt(0),Je=ze.charAt(ze.length-1);if(1<ze.length&&Ve===Je&&('"'===Ve||"'"===Ve))return['"'+ze.substr(1,ze.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ve=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ze))return be(ze.substr(0,Ve.index)).concat(be(Ve[1])).concat(be(ze.substr(Ve.index+Ve[0].length)));if(1===(Ve=ze.split(".")).length)return['"'+ze.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(ze=[],Je=0;Je<Ve.length;++Je)ze=ze.concat(be(Ve[Je]));return ze}(he).join("][")+"]"}function k(he){return"string"==typeof he?he.split():he}function x(he){return"string"==typeof he?document.querySelector(he):he}function n(he,be){for(var ze=Array(he),Ve=0;Ve<he;++Ve)ze[Ve]=be(Ve);return ze}function i(he){var be,ze;return be=(65535<he)<<4,be|=ze=(255<(he>>>=be))<<3,(be|=ze=(15<(he>>>=ze))<<2)|(ze=(3<(he>>>=ze))<<1)|he>>>ze>>1}function l(){function he(Ve){e:{for(var Je=16;268435456>=Je;Je*=16)if(Ve<=Je){Ve=Je;break e}Ve=0}return 0<(Je=ze[i(Ve)>>2]).length?Je.pop():new ArrayBuffer(Ve)}function be(Ve){ze[i(Ve.byteLength)>>2].push(Ve)}var ze=n(8,function(){return[]});return{alloc:he,free:be,allocType:function(Ve,Je){var Ye=null;switch(Ve){case 5120:Ye=new Int8Array(he(Je),0,Je);break;case 5121:Ye=new Uint8Array(he(Je),0,Je);break;case 5122:Ye=new Int16Array(he(2*Je),0,Je);break;case 5123:Ye=new Uint16Array(he(2*Je),0,Je);break;case 5124:Ye=new Int32Array(he(4*Je),0,Je);break;case 5125:Ye=new Uint32Array(he(4*Je),0,Je);break;case 5126:Ye=new Float32Array(he(4*Je),0,Je);break;default:return null}return Ye.length!==Je?Ye.subarray(0,Je):Ye},freeType:function(Ve){be(Ve.buffer)}}}function r(he){return!!he&&"object"==typeof he&&Array.isArray(he.shape)&&Array.isArray(he.stride)&&"number"==typeof he.offset&&he.shape.length===he.stride.length&&(Array.isArray(he.data)||ve(he.data))}function d(he,be,ze,Ve,Je,Ye){for(var lt=0;lt<be;++lt)for(var st=he[lt],Mt=0;Mt<ze;++Mt)for(var Dt=st[Mt],ht=0;ht<Ve;++ht)Je[Ye++]=Dt[ht]}function f(he){return 0|Me[Object.prototype.toString.call(he)]}function t(he,be){for(var ze=0;ze<be.length;++ze)he[ze]=be[ze]}function h(he,be,ze,Ve,Je,Ye,lt){for(var st=0,Mt=0;Mt<ze;++Mt)for(var Dt=0;Dt<Ve;++Dt)he[st++]=be[Je*Mt+Ye*Dt+lt]}function p(he){for(var be=le.allocType(5123,he.length),ze=0;ze<he.length;++ze)if(isNaN(he[ze]))be[ze]=65535;else if(1/0===he[ze])be[ze]=31744;else if(-1/0===he[ze])be[ze]=64512;else{Ee[0]=he[ze];var Ve=(Ye=Ae[0])>>>31<<15,Je=(Ye<<1>>>24)-127,Ye=Ye>>13&1023;be[ze]=-24>Je?Ve:-14>Je?Ve+(Ye+1024>>-14-Je):15<Je?Ve+31744:Ve+(Je+15<<10)+Ye}return be}function c(he){return Array.isArray(he)||ve(he)}function a(he){return"[object "+he+"]"}function y(he){return Array.isArray(he)&&(0===he.length||"number"==typeof he[0])}function u(he){return!(!Array.isArray(he)||0===he.length||!c(he[0]))}function _(he){return Object.prototype.toString.call(he)}function b(he){if(!he)return!1;var be=_(he);return 0<=ct.indexOf(be)||y(he)||u(he)||r(he)}function w(he,be){36193===he.type?(he.data=p(be),le.freeType(be)):he.data=be}function T(he,be,ze,Ve,Je,Ye){if(he=void 0!==Tt[he]?Tt[he]:Oe[he]*bt[be],Ye&&(he*=6),Je){for(Ve=0;1<=ze;)Ve+=he*ze*ze,ze/=2;return Ve}return he*ze*Ve}function I(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function R(he,be){return he>>>be|he<<32-be}function D(he,be){var ze=(65535&he)+(65535&be);return(he>>16)+(be>>16)+(ze>>16)<<16|65535&ze}function j(he){return Array.prototype.slice.call(he)}function H(he){return j(he).join("")}function X(he){return Array.isArray(he)||ve(he)||r(he)}function Z(he){return he.sort(function(be,ze){return"viewport"===be?-1:"viewport"===ze?1:be<ze?-1:1})}function W(he,be,ze,Ve){this.thisDep=he,this.contextDep=be,this.propDep=ze,this.append=Ve}function re(he){return he&&!(he.thisDep||he.contextDep||he.propDep)}function U(he){return new W(!1,!1,!1,he)}function B(he,be){var ze=he.type;if(0===ze)return new W(!0,1<=(ze=he.data.length),2<=ze,be);if(4===ze)return new W((ze=he.data).thisDep,ze.contextDep,ze.propDep,be);if(5===ze)return new W(!1,!1,!1,be);if(6===ze){for(var Ve=ze=!1,Je=!1,Ye=0;Ye<he.data.length;++Ye){var lt=he.data[Ye];1===lt.type?Je=!0:2===lt.type?Ve=!0:3===lt.type?ze=!0:0===lt.type?(ze=!0,1<=(lt=lt.data)&&(Ve=!0),2<=lt&&(Je=!0)):4===lt.type&&(ze=ze||lt.data.thisDep,Ve=Ve||lt.data.contextDep,Je=Je||lt.data.propDep)}return new W(ze,Ve,Je,be)}return new W(3===ze,2===ze,1===ze,be)}function V(he,be,ze,Ve,Je,Ye,lt,st,Mt,Dt,ht,mt,Ot,At,It,Se){function Ze(Rt){return Rt.replace(".","_")}function it(Rt,fr,gr){var jr=Ze(Rt);Xn.push(Rt),fn[jr]=nn[jr]=!!gr,Mn[jr]=fr}function dt(Rt,fr,gr){var jr=Ze(Rt);Xn.push(Rt),Array.isArray(gr)?(nn[jr]=gr.slice(),fn[jr]=gr.slice()):nn[jr]=fn[jr]=gr,On[jr]=fr}function Ct(){var Rt=function Y(he){function be(){var ht=[],mt=[];return N(function(){ht.push.apply(ht,j(arguments))},{def:function(){var Ot="v"+Je++;return mt.push(Ot),0<arguments.length&&(ht.push(Ot,"="),ht.push.apply(ht,j(arguments)),ht.push(";")),Ot},toString:function(){return H([0<mt.length?"var "+mt.join(",")+";":"",H(ht)])}})}function ze(){function ht(Se,Ze){Ot(Se,Ze,"=",mt.def(Se,Ze),";")}var mt=be(),Ot=be(),At=mt.toString,It=Ot.toString;return N(function(){mt.apply(mt,j(arguments))},{def:mt.def,entry:mt,exit:Ot,save:ht,set:function(Se,Ze,it){ht(Se,Ze),mt(Se,Ze,"=",it,";")},toString:function(){return At()+It()}})}var Ve=he&&he.cache,Je=0,Ye=[],lt=[],st=[],Mt=be(),Dt={};return{global:Mt,link:function(ht,mt){var Ot=mt&&mt.stable;if(!Ot)for(var At=0;At<lt.length;++At)if(lt[At]===ht&&!st[At])return Ye[At];return At="g"+Je++,Ye.push(At),lt.push(ht),st.push(Ot),At},block:be,proc:function(ht,mt){function Ot(){var Ze="a"+At.length;return At.push(Ze),Ze}var At=[];mt=mt||0;for(var It=0;It<mt;++It)Ot();var Se=(It=ze()).toString;return Dt[ht]=N(It,{arg:Ot,toString:function(){return H(["function(",At.join(),"){",Se(),"}"])}})},scope:ze,cond:function(){var ht=H(arguments),mt=ze(),Ot=ze(),At=mt.toString,It=Ot.toString;return N(mt,{then:function(){return mt.apply(mt,j(arguments)),this},else:function(){return Ot.apply(Ot,j(arguments)),this},toString:function(){var Se=It();return Se&&(Se="else{"+Se+"}"),H(["if(",ht,"){",At(),"}",Se])}})},compile:function(){var ht=['"use strict";',Mt,"return {"];Object.keys(Dt).forEach(function(At){ht.push('"',At,'":',Dt[At].toString(),",")}),ht.push("}");var mt,Ot=H(ht).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Ve&&(mt=function(At){for(var It,Se="",Ze=0;Ze<At.length;Ze++)It=At.charCodeAt(Ze),Se+="0123456789abcdef".charAt(It>>>4&15)+"0123456789abcdef".charAt(15&It);return Se}(function(At){for(var It=Array(At.length>>2),Se=0;Se<It.length;Se++)It[Se]=0;for(Se=0;Se<8*At.length;Se+=8)It[Se>>5]|=(255&At.charCodeAt(Se/8))<<24-Se%32;var Ze,it,dt,Ct,Ut,Jt,qt,pr,Sr,mr,tr,rr=8*At.length;for(At=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Se=Array(64),It[rr>>5]|=128<<24-rr%32,It[15+(rr+64>>9<<4)]=rr,pr=0;pr<It.length;pr+=16){for(rr=At[0],Ze=At[1],it=At[2],dt=At[3],Ct=At[4],Ut=At[5],Jt=At[6],qt=At[7],Sr=0;64>Sr;Sr++){var ar;16>Sr?Se[Sr]=It[Sr+pr]:(mr=Sr,tr=D(tr=R(tr=Se[Sr-2],17)^R(tr,19)^tr>>>10,Se[Sr-7]),ar=R(ar=Se[Sr-15],7)^R(ar,18)^ar>>>3,Se[mr]=D(D(tr,ar),Se[Sr-16])),mr=D(D(D(D(qt,mr=R(mr=Ct,6)^R(mr,11)^R(mr,25)),Ct&Ut^~Ct&Jt),Ht[Sr]),Se[Sr]),tr=D(qt=R(qt=rr,2)^R(qt,13)^R(qt,22),rr&Ze^rr&it^Ze&it),qt=Jt,Jt=Ut,Ut=Ct,Ct=D(dt,mr),dt=it,it=Ze,Ze=rr,rr=D(mr,tr)}At[0]=D(rr,At[0]),At[1]=D(Ze,At[1]),At[2]=D(it,At[2]),At[3]=D(dt,At[3]),At[4]=D(Ct,At[4]),At[5]=D(Ut,At[5]),At[6]=D(Jt,At[6]),At[7]=D(qt,At[7])}for(It="",Se=0;Se<32*At.length;Se+=8)It+=String.fromCharCode(At[Se>>5]>>>24-Se%32&255);return It}(function(At){for(var It,Se,Ze="",it=-1;++it<At.length;)It=At.charCodeAt(it),Se=it+1<At.length?At.charCodeAt(it+1):0,55296<=It&&56319>=It&&56320<=Se&&57343>=Se&&(It=65536+((1023&It)<<10)+(1023&Se),it++),127>=It?Ze+=String.fromCharCode(It):2047>=It?Ze+=String.fromCharCode(192|It>>>6&31,128|63&It):65535>=It?Ze+=String.fromCharCode(224|It>>>12&15,128|It>>>6&63,128|63&It):2097151>=It&&(Ze+=String.fromCharCode(240|It>>>18&7,128|It>>>12&63,128|It>>>6&63,128|63&It));return Ze}(Ot))),Ve[mt])?Ve[mt].apply(null,lt):(Ot=Function.apply(null,Ye.concat(Ot)),Ve&&(Ve[mt]=Ot),Ot.apply(null,lt))}}}({cache:It}),fr=Rt.link,gr=Rt.global;Rt.id=br++,Rt.batchId="0";var jr=fr(si),Br=Rt.shared={props:"a0"};Object.keys(si).forEach(function(Mr){Br[Mr]=gr.def(jr,".",Mr)});var Fr=Rt.next={},Er=Rt.current={};Object.keys(On).forEach(function(Mr){Array.isArray(nn[Mr])&&(Fr[Mr]=gr.def(Br.next,".",Mr),Er[Mr]=gr.def(Br.current,".",Mr))});var _r=Rt.constants={};Object.keys(or).forEach(function(Mr){_r[Mr]=gr.def(JSON.stringify(or[Mr]))}),Rt.invoke=function(Mr,Pr){switch(Pr.type){case 0:var Wr=["this",Br.context,Br.props,Rt.batchId];return Mr.def(fr(Pr.data),".call(",Wr.slice(0,Math.max(Pr.data.length+1,4)),")");case 1:return Mr.def(Br.props,Pr.data);case 2:return Mr.def(Br.context,Pr.data);case 3:return Mr.def("this",Pr.data);case 4:return Pr.data.append(Rt,Mr),Pr.data.ref;case 5:return Pr.data.toString();case 6:return Pr.data.map(function(Zr){return Rt.invoke(Mr,Zr)})}},Rt.attribCache={};var kr={};return Rt.scopeAttrib=function(Mr){if((Mr=be.id(Mr))in kr)return kr[Mr];var Pr=Dt.scope[Mr];return Pr||(Pr=Dt.scope[Mr]=new An),kr[Mr]=fr(Pr)},Rt}function Sr(Rt,fr,gr,jr,Br){function Fr(bn){var Tn=_r[bn];Tn&&(Mr[bn]=Tn)}var bn,En,Dn,Bn,Er=function(bn,Tn){if("string"==typeof(En=bn.static).frag&&"string"==typeof En.vert){if(0<Object.keys(Tn.dynamic).length)return null;var En=Tn.static,Dn=Object.keys(En);if(0<Dn.length&&"number"==typeof En[Dn[0]]){for(var Bn=[],Kn=0;Kn<Dn.length;++Kn)Bn.push([0|En[Dn[Kn]],Dn[Kn]]);return Bn}}return null}(Rt,fr),_r=function(bn,Tn,En){function Dn(Ti){if(Ti in Bn){var Pn=Bn[Ti];Ti=!0;var ei,Qn,Bi=0|Pn.x,ma=0|Pn.y;return"width"in Pn?ei=0|Pn.width:Ti=!1,"height"in Pn?Qn=0|Pn.height:Ti=!1,new W(!Ti&&Tn&&Tn.thisDep,!Ti&&Tn&&Tn.contextDep,!Ti&&Tn&&Tn.propDep,function(Xa,Ji){var qi=Xa.shared.context,Ha=ei;"width"in Pn||(Ha=Ji.def(qi,".","framebufferWidth","-",Bi));var Ni=Qn;return"height"in Pn||(Ni=Ji.def(qi,".","framebufferHeight","-",ma)),[Bi,ma,Ha,Ni]})}if(Ti in Kn){var Sa=Kn[Ti];return Ti=B(Sa,function(Xa,Ji){var qi=Xa.invoke(Ji,Sa),Ha=Xa.shared.context,Ni=Ji.def(qi,".x|0"),Ja=Ji.def(qi,".y|0");return[Ni,Ja,Ji.def('"width" in ',qi,"?",qi,".width|0:","(",Ha,".","framebufferWidth","-",Ni,")"),qi=Ji.def('"height" in ',qi,"?",qi,".height|0:","(",Ha,".","framebufferHeight","-",Ja,")")]}),Tn&&(Ti.thisDep=Ti.thisDep||Tn.thisDep,Ti.contextDep=Ti.contextDep||Tn.contextDep,Ti.propDep=Ti.propDep||Tn.propDep),Ti}return Tn?new W(Tn.thisDep,Tn.contextDep,Tn.propDep,function(Xa,Ji){var qi=Xa.shared.context;return[0,0,Ji.def(qi,".","framebufferWidth"),Ji.def(qi,".","framebufferHeight")]}):null}var Bn=bn.static,Kn=bn.dynamic;if(bn=Dn("viewport")){var Ci=bn;bn=new W(bn.thisDep,bn.contextDep,bn.propDep,function(Ti,Pn){var ei=Ci.append(Ti,Pn),Qn=Ti.shared.context;return Pn.set(Qn,".viewportWidth",ei[2]),Pn.set(Qn,".viewportHeight",ei[3]),ei})}return{viewport:bn,scissor_box:Dn("scissor.box")}}(Rt,Wr=function Ut(Rt,fr){var gr=Rt.static,jr=Rt.dynamic;if("framebuffer"in gr){var Br=gr.framebuffer;return Br?(Br=st.getFramebuffer(Br),U(function(Er,_r){var kr=Er.link(Br),Mr=Er.shared;return _r.set(Mr.framebuffer,".next",kr),_r.set(Mr=Mr.context,".framebufferWidth",kr+".width"),_r.set(Mr,".framebufferHeight",kr+".height"),kr})):U(function(Er,_r){var kr=Er.shared;return _r.set(kr.framebuffer,".next","null"),_r.set(kr=kr.context,".framebufferWidth",kr+".drawingBufferWidth"),_r.set(kr,".framebufferHeight",kr+".drawingBufferHeight"),"null"})}if("framebuffer"in jr){var Fr=jr.framebuffer;return B(Fr,function(Er,_r){var kr=Er.invoke(_r,Fr),Mr=Er.shared,Pr=Mr.framebuffer;return kr=_r.def(Pr,".getFramebuffer(",kr,")"),_r.set(Pr,".next",kr),_r.set(Mr=Mr.context,".framebufferWidth",kr+"?"+kr+".width:"+Mr+".drawingBufferWidth"),_r.set(Mr,".framebufferHeight",kr+"?"+kr+".height:"+Mr+".drawingBufferHeight"),kr})}return null}(Rt)),kr=function qt(Rt,fr){function gr(ln,bn){if(ln in jr){var Tn=0|jr[ln];return bn?Fr.offset=Tn:Fr.instances=Tn,U(function(Dn,Bn){return bn&&(Dn.OFFSET=Tn),Tn})}if(ln in Br){var En=Br[ln];return B(En,function(Dn,Bn){var Kn=Dn.invoke(Bn,En);return bn&&(Dn.OFFSET=Kn),Kn})}if(bn){if(kr)return U(function(Dn,Bn){return Dn.OFFSET=0});if(Er)return new W(_r.thisDep,_r.contextDep,_r.propDep,function(Dn,Bn){return Bn.def(Dn.shared.vao+".currentVAO?"+Dn.shared.vao+".currentVAO.offset:0")})}else if(Er)return new W(_r.thisDep,_r.contextDep,_r.propDep,function(Dn,Bn){return Bn.def(Dn.shared.vao+".currentVAO?"+Dn.shared.vao+".currentVAO.instances:-1")});return null}var jr=Rt.static,Br=Rt.dynamic,Fr={},Er=!1,_r=function(){if("vao"in jr){var ln=jr.vao;return null!==ln&&null===Dt.getVAO(ln)&&(ln=Dt.createVAO(ln)),Er=!0,Fr.vao=ln,U(function(Tn){var En=Dt.getVAO(ln);return En?Tn.link(En):"null"})}if("vao"in Br){Er=!0;var bn=Br.vao;return B(bn,function(Tn,En){var Dn=Tn.invoke(En,bn);return En.def(Tn.shared.vao+".getVAO("+Dn+")")})}return null}(),kr=!1,Mr=function(){if("elements"in jr){var ln=jr.elements;if(Fr.elements=ln,X(ln)){var bn=Fr.elements=Ye.create(ln,!0);ln=Ye.getElements(bn),kr=!0}else ln&&(ln=Ye.getElements(ln),kr=!0);return(bn=U(function(En,Dn){if(ln){var Bn=En.link(ln);return En.ELEMENTS=Bn}return En.ELEMENTS=null})).value=ln,bn}if("elements"in Br){kr=!0;var Tn=Br.elements;return B(Tn,function(En,Dn){var Bn=(Kn=En.shared).isBufferArgs,Kn=Kn.elements,Ci=En.invoke(Dn,Tn),Ti=Dn.def("null");return Bn=Dn.def(Bn,"(",Ci,")"),Ci=En.cond(Bn).then(Ti,"=",Kn,".createStream(",Ci,");").else(Ti,"=",Kn,".getElements(",Ci,");"),Dn.entry(Ci),Dn.exit(En.cond(Bn).then(Kn,".destroyStream(",Ti,");")),En.ELEMENTS=Ti})}return Er?new W(_r.thisDep,_r.contextDep,_r.propDep,function(En,Dn){return Dn.def(En.shared.vao+".currentVAO?"+En.shared.elements+".getElements("+En.shared.vao+".currentVAO.elements):null")}):null}(),Pr=gr("offset",!0),Wr=function(){if("primitive"in jr){var ln=jr.primitive;return Fr.primitive=ln,U(function(Tn,En){return Te[ln]})}if("primitive"in Br){var bn=Br.primitive;return B(bn,function(Tn,En){var Dn=Tn.constants.primTypes,Bn=Tn.invoke(En,bn);return En.def(Dn,"[",Bn,"]")})}return kr?re(Mr)?U(Mr.value?function(Tn,En){return En.def(Tn.ELEMENTS,".primType")}:function(){return 4}):new W(Mr.thisDep,Mr.contextDep,Mr.propDep,function(Tn,En){var Dn=Tn.ELEMENTS;return En.def(Dn,"?",Dn,".primType:",4)}):Er?new W(_r.thisDep,_r.contextDep,_r.propDep,function(Tn,En){return En.def(Tn.shared.vao+".currentVAO?"+Tn.shared.vao+".currentVAO.primitive:4")}):null}(),Zr=function(){if("count"in jr){var ln=0|jr.count;return Fr.count=ln,U(function(){return ln})}if("count"in Br){var bn=Br.count;return B(bn,function(Tn,En){return Tn.invoke(En,bn)})}return kr?re(Mr)?Mr?Pr?new W(Pr.thisDep,Pr.contextDep,Pr.propDep,function(Tn,En){return En.def(Tn.ELEMENTS,".vertCount-",Tn.OFFSET)}):U(function(Tn,En){return En.def(Tn.ELEMENTS,".vertCount")}):U(function(){return-1}):new W(Mr.thisDep||Pr.thisDep,Mr.contextDep||Pr.contextDep,Mr.propDep||Pr.propDep,function(Tn,En){var Dn=Tn.ELEMENTS;return Tn.OFFSET?En.def(Dn,"?",Dn,".vertCount-",Tn.OFFSET,":-1"):En.def(Dn,"?",Dn,".vertCount:-1")}):Er?new W(_r.thisDep,_r.contextDep,_r.propDep,function(Tn,En){return En.def(Tn.shared.vao,".currentVAO?",Tn.shared.vao,".currentVAO.count:-1")}):null}(),rn=gr("instances",!1);return{elements:Mr,primitive:Wr,count:Zr,instances:rn,offset:Pr,vao:_r,vaoActive:Er,elementsActive:kr,static:Fr}}(Rt),Mr=(En=(bn=Rt).static,Dn=bn.dynamic,Bn={},Xn.forEach(function(Kn){function Ci(Pn,ei){if(Kn in En){var Qn=Pn(En[Kn]);Bn[Ti]=U(function(){return Qn})}else if(Kn in Dn){var Bi=Dn[Kn];Bn[Ti]=B(Bi,function(ma,Sa){return ei(ma,Sa,ma.invoke(Sa,Bi))})}}var Ti=Ze(Kn);switch(Kn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return Ci(function(Pn){return Pn},function(Pn,ei,Qn){return Qn});case"depth.func":return Ci(function(Pn){return cr[Pn]},function(Pn,ei,Qn){return ei.def(Pn.constants.compareFuncs,"[",Qn,"]")});case"depth.range":return Ci(function(Pn){return Pn},function(Pn,ei,Qn){return[ei.def("+",Qn,"[0]"),ei=ei.def("+",Qn,"[1]")]});case"blend.func":return Ci(function(Pn){return[Xt["srcRGB"in Pn?Pn.srcRGB:Pn.src],Xt["dstRGB"in Pn?Pn.dstRGB:Pn.dst],Xt["srcAlpha"in Pn?Pn.srcAlpha:Pn.src],Xt["dstAlpha"in Pn?Pn.dstAlpha:Pn.dst]]},function(Pn,ei,Qn){function Bi(Ji,qi){return ei.def('"',Ji,qi,'" in ',Qn,"?",Qn,".",Ji,qi,":",Qn,".",Ji)}Pn=Pn.constants.blendFuncs;var ma=Bi("src","RGB"),Sa=Bi("dst","RGB"),Xa=(ma=ei.def(Pn,"[",ma,"]"),ei.def(Pn,"[",Bi("src","Alpha"),"]"));return[ma,Sa=ei.def(Pn,"[",Sa,"]"),Xa,Pn=ei.def(Pn,"[",Bi("dst","Alpha"),"]")]});case"blend.equation":return Ci(function(Pn){return"string"==typeof Pn?[ii[Pn],ii[Pn]]:"object"==typeof Pn?[ii[Pn.rgb],ii[Pn.alpha]]:void 0},function(Pn,ei,Qn){var Bi=Pn.constants.blendEquations,ma=ei.def(),Sa=ei.def();return(Pn=Pn.cond("typeof ",Qn,'==="string"')).then(ma,"=",Sa,"=",Bi,"[",Qn,"];"),Pn.else(ma,"=",Bi,"[",Qn,".rgb];",Sa,"=",Bi,"[",Qn,".alpha];"),ei(Pn),[ma,Sa]});case"blend.color":return Ci(function(Pn){return n(4,function(ei){return+Pn[ei]})},function(Pn,ei,Qn){return n(4,function(Bi){return ei.def("+",Qn,"[",Bi,"]")})});case"stencil.mask":return Ci(function(Pn){return 0|Pn},function(Pn,ei,Qn){return ei.def(Qn,"|0")});case"stencil.func":return Ci(function(Pn){return[cr[Pn.cmp||"keep"],Pn.ref||0,"mask"in Pn?Pn.mask:-1]},function(Pn,ei,Qn){return[Pn=ei.def('"cmp" in ',Qn,"?",Pn.constants.compareFuncs,"[",Qn,".cmp]",":",7680),ei.def(Qn,".ref|0"),ei=ei.def('"mask" in ',Qn,"?",Qn,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Ci(function(Pn){return["stencil.opBack"===Kn?1029:1028,Ft[Pn.fail||"keep"],Ft[Pn.zfail||"keep"],Ft[Pn.zpass||"keep"]]},function(Pn,ei,Qn){function Bi(Sa){return ei.def('"',Sa,'" in ',Qn,"?",ma,"[",Qn,".",Sa,"]:",7680)}var ma=Pn.constants.stencilOps;return["stencil.opBack"===Kn?1029:1028,Bi("fail"),Bi("zfail"),Bi("zpass")]});case"polygonOffset.offset":return Ci(function(Pn){return[0|Pn.factor,0|Pn.units]},function(Pn,ei,Qn){return[ei.def(Qn,".factor|0"),ei=ei.def(Qn,".units|0")]});case"cull.face":return Ci(function(Pn){var ei=0;return"front"===Pn?ei=1028:"back"===Pn&&(ei=1029),ei},function(Pn,ei,Qn){return ei.def(Qn,'==="front"?',1028,":",1029)});case"frontFace":return Ci(function(Pn){return Be[Pn]},function(Pn,ei,Qn){return ei.def(Qn+'==="cw"?2304:2305')});case"colorMask":return Ci(function(Pn){return Pn.map(function(ei){return!!ei})},function(Pn,ei,Qn){return n(4,function(Bi){return"!!"+Qn+"["+Bi+"]"})});case"sample.coverage":return Ci(function(Pn){return["value"in Pn?Pn.value:1,!!Pn.invert]},function(Pn,ei,Qn){return[ei.def('"value" in ',Qn,"?+",Qn,".value:1"),ei=ei.def("!!",Qn,".invert")]})}}),Bn),Pr=function Jt(Rt,fr,gr){function jr(Mr){if(Mr in Br){var Pr=be.id(Br[Mr]);return(Mr=U(function(){return Pr})).id=Pr,Mr}if(Mr in Fr){var Wr=Fr[Mr];return B(Wr,function(Zr,rn){var ln=Zr.invoke(rn,Wr);return rn.def(Zr.shared.strings,".id(",ln,")")})}return null}var Br=Rt.static,Fr=Rt.dynamic,Er=jr("frag"),_r=jr("vert"),kr=null;return re(Er)&&re(_r)?(kr=ht.program(_r.id,Er.id,null,gr),Rt=U(function(Mr,Pr){return Mr.link(kr)})):Rt=new W(Er&&Er.thisDep||_r&&_r.thisDep,Er&&Er.contextDep||_r&&_r.contextDep,Er&&Er.propDep||_r&&_r.propDep,function(Mr,Pr){var Wr,Zr,rn=Mr.shared.shader;return Wr=Er?Er.append(Mr,Pr):Pr.def(rn,".","frag"),Zr=_r?_r.append(Mr,Pr):Pr.def(rn,".","vert"),Pr.def(rn+".program("+Zr+","+Wr+")")}),{frag:Er,vert:_r,progVar:Rt,program:kr}}(Rt,0,Er);Fr("viewport"),Fr(Ze("scissor.box"));var Wr,Zr=0<Object.keys(Mr).length;if((Wr={framebuffer:Wr,draw:kr,shader:Pr,state:Mr,dirty:Zr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(bn){var Tn,En=bn.static;if(bn=bn.dynamic,"profile"in En){var Dn=!!En.profile;(Tn=U(function(Kn,Ci){return Dn})).enable=Dn}else if("profile"in bn){var Bn=bn.profile;Tn=B(Bn,function(Kn,Ci){return Kn.invoke(Ci,Bn)})}return Tn}(Rt),Wr.uniforms=function(bn,Tn){var En=bn.static,Dn=bn.dynamic,Bn={};return Object.keys(En).forEach(function(Kn){var Ci,Ti=En[Kn];if("number"==typeof Ti||"boolean"==typeof Ti)Ci=U(function(){return Ti});else if("function"==typeof Ti){var Pn=Ti._reglType;"texture2d"===Pn||"textureCube"===Pn?Ci=U(function(ei){return ei.link(Ti)}):"framebuffer"!==Pn&&"framebufferCube"!==Pn||(Ci=U(function(ei){return ei.link(Ti.color[0])}))}else c(Ti)&&(Ci=U(function(ei){return ei.global.def("[",n(Ti.length,function(Qn){return Ti[Qn]}),"]")}));Ci.value=Ti,Bn[Kn]=Ci}),Object.keys(Dn).forEach(function(Kn){var Ci=Dn[Kn];Bn[Kn]=B(Ci,function(Ti,Pn){return Ti.invoke(Pn,Ci)})}),Bn}(gr),Wr.drawVAO=Wr.scopeVAO=kr.vao,!Wr.drawVAO&&Pr.program&&!Er&&ze.angle_instanced_arrays&&kr.static.elements){var rn=!0;if(Rt=Pr.program.attributes.map(function(bn){return bn=fr.static[bn],rn=rn&&!!bn,bn}),rn&&0<Rt.length){var ln=Dt.getVAO(Dt.createVAO({attributes:Rt,elements:kr.static.elements}));Wr.drawVAO=new W(null,null,null,function(bn,Tn){return bn.link(ln)}),Wr.useVAO=!0}}return Er?Wr.useVAO=!0:Wr.attributes=function pr(Rt,fr){var gr=Rt.static,jr=Rt.dynamic,Br={};return Object.keys(gr).forEach(function(Fr){var Er=gr[Fr],_r=be.id(Fr),kr=new An;if(X(Er))kr.state=1,kr.buffer=Je.getBuffer(Je.create(Er,34962,!1,!0)),kr.type=0;else if(Pr=Je.getBuffer(Er))kr.state=1,kr.buffer=Pr,kr.type=0;else if("constant"in Er){var Mr=Er.constant;kr.buffer="null",kr.state=2,"number"==typeof Mr?kr.x=Mr:Zt.forEach(function(Tn,En){En<Mr.length&&(kr[Tn]=Mr[En])})}else{var Pr=X(Er.buffer)?Je.getBuffer(Je.create(Er.buffer,34962,!1,!0)):Je.getBuffer(Er.buffer),Wr=0|Er.offset,Zr=0|Er.stride,rn=0|Er.size,ln=!!Er.normalized,bn=0;"type"in Er&&(bn=pe[Er.type]),Er=0|Er.divisor,kr.buffer=Pr,kr.state=1,kr.size=rn,kr.normalized=ln,kr.type=bn||Pr.dtype,kr.offset=Wr,kr.stride=Zr,kr.divisor=Er}Br[Fr]=U(function(Tn,En){var Dn=Tn.attribCache;if(_r in Dn)return Dn[_r];var Bn={isStream:!1};return Object.keys(kr).forEach(function(Kn){Bn[Kn]=kr[Kn]}),kr.buffer&&(Bn.buffer=Tn.link(kr.buffer),Bn.type=Bn.type||Bn.buffer+".dtype"),Dn[_r]=Bn})}),Object.keys(jr).forEach(function(Fr){var Er=jr[Fr];Br[Fr]=B(Er,function(_r,kr){function Mr(Dn){kr(ln[Dn],"=",Pr,".",Dn,"|0;")}var Pr=_r.invoke(kr,Er),Wr=_r.shared,Zr=_r.constants,rn=Wr.isBufferArgs,ln=(Wr=Wr.buffer,{isStream:kr.def(!1)}),bn=new An;bn.state=1,Object.keys(bn).forEach(function(Dn){ln[Dn]=kr.def(""+bn[Dn])});var Tn=ln.buffer,En=ln.type;return kr("if(",rn,"(",Pr,")){",ln.isStream,"=true;",Tn,"=",Wr,".createStream(",34962,",",Pr,");",En,"=",Tn,".dtype;","}else{",Tn,"=",Wr,".getBuffer(",Pr,");","if(",Tn,"){",En,"=",Tn,".dtype;",'}else if("constant" in ',Pr,"){",ln.state,"=",2,";","if(typeof "+Pr+'.constant === "number"){',ln[Zt[0]],"=",Pr,".constant;",Zt.slice(1).map(function(Dn){return ln[Dn]}).join("="),"=0;","}else{",Zt.map(function(Dn,Bn){return ln[Dn]+"="+Pr+".constant.length>"+Bn+"?"+Pr+".constant["+Bn+"]:0;"}).join(""),"}}else{","if(",rn,"(",Pr,".buffer)){",Tn,"=",Wr,".createStream(",34962,",",Pr,".buffer);","}else{",Tn,"=",Wr,".getBuffer(",Pr,".buffer);","}",En,'="type" in ',Pr,"?",Zr.glTypes,"[",Pr,".type]:",Tn,".dtype;",ln.normalized,"=!!",Pr,".normalized;"),Mr("size"),Mr("offset"),Mr("stride"),Mr("divisor"),kr("}}"),kr.exit("if(",ln.isStream,"){",Wr,".destroyStream(",Tn,");","}"),ln})}),Br}(fr),Wr.context=function(bn){var Tn=bn.static,En=bn.dynamic,Dn={};return Object.keys(Tn).forEach(function(Bn){var Kn=Tn[Bn];Dn[Bn]=U(function(Ci,Ti){return"number"==typeof Kn||"boolean"==typeof Kn?""+Kn:Ci.link(Kn)})}),Object.keys(En).forEach(function(Bn){var Kn=En[Bn];Dn[Bn]=B(Kn,function(Ci,Ti){return Ci.invoke(Ti,Kn)})}),Dn}(jr),Wr}function mr(Rt,fr,gr){var jr=Rt.shared.context,Br=Rt.scope();Object.keys(gr).forEach(function(Fr){fr.save(jr,"."+Fr);var Er=gr[Fr].append(Rt,fr);Array.isArray(Er)?Br(jr,".",Fr,"=[",Er.join(),"];"):Br(jr,".",Fr,"=",Er,";")}),fr(Br)}function tr(Rt,fr,gr,jr){var Br,Fr=(_r=Rt.shared).gl,Er=_r.framebuffer;sn&&(Br=fr.def(_r.extensions,".webgl_draw_buffers"));var _r=(kr=Rt.constants).drawBuffer,kr=kr.backBuffer;Rt=gr?gr.append(Rt,fr):fr.def(Er,".next"),jr||fr("if(",Rt,"!==",Er,".cur){"),fr("if(",Rt,"){",Fr,".bindFramebuffer(",36160,",",Rt,".framebuffer);"),sn&&fr(Br,".drawBuffersWEBGL(",_r,"[",Rt,".colorAttachments.length]);"),fr("}else{",Fr,".bindFramebuffer(",36160,",null);"),sn&&fr(Br,".drawBuffersWEBGL(",kr,");"),fr("}",Er,".cur=",Rt,";"),jr||fr("}")}function rr(Rt,fr,gr){var jr=Rt.shared,Br=jr.gl,Fr=Rt.current,Er=Rt.next,_r=jr.current,kr=jr.next,Mr=Rt.cond(_r,".dirty");Xn.forEach(function(Pr){var Wr,Zr;if(!((Pr=Ze(Pr))in gr.state))if(Pr in Er){Wr=Er[Pr],Zr=Fr[Pr];var rn=n(nn[Pr].length,function(ln){return Mr.def(Wr,"[",ln,"]")});Mr(Rt.cond(rn.map(function(ln,bn){return ln+"!=="+Zr+"["+bn+"]"}).join("||")).then(Br,".",On[Pr],"(",rn,");",rn.map(function(ln,bn){return Zr+"["+bn+"]="+ln}).join(";"),";"))}else Wr=Mr.def(kr,".",Pr),rn=Rt.cond(Wr,"!==",_r,".",Pr),Mr(rn),Pr in Mn?rn(Rt.cond(Wr).then(Br,".enable(",Mn[Pr],");").else(Br,".disable(",Mn[Pr],");"),_r,".",Pr,"=",Wr,";"):rn(Br,".",On[Pr],"(",Wr,");",_r,".",Pr,"=",Wr,";")}),0===Object.keys(gr.state).length&&Mr(_r,".dirty=false;"),fr(Mr)}function ar(Rt,fr,gr,jr){var Br,Fr=Rt.shared,Er=Rt.current,_r=Fr.current,kr=Fr.gl;Z(Object.keys(gr)).forEach(function(Mr){var Pr=gr[Mr];if(!jr||jr(Pr)){var Wr=Pr.append(Rt,fr);if(Mn[Mr]){var Zr=Mn[Mr];re(Pr)?(Br=Rt.link(Wr,{stable:!0}),fr(Rt.cond(Br).then(kr,".enable(",Zr,");").else(kr,".disable(",Zr,");")),fr(_r,".",Mr,"=",Br,";")):(fr(Rt.cond(Wr).then(kr,".enable(",Zr,");").else(kr,".disable(",Zr,");")),fr(_r,".",Mr,"=",Wr,";"))}else if(c(Wr)){var rn=Er[Mr];fr(kr,".",On[Mr],"(",Wr,");",Wr.map(function(ln,bn){return rn+"["+bn+"]="+ln}).join(";"),";")}else re(Pr)?(Br=Rt.link(Wr,{stable:!0}),fr(kr,".",On[Mr],"(",Br,");",_r,".",Mr,"=",Br,";")):fr(kr,".",On[Mr],"(",Wr,");",_r,".",Mr,"=",Wr,";")}})}function dr(Rt,fr){Vr&&(Rt.instancing=fr.def(Rt.shared.extensions,".angle_instanced_arrays"))}function xr(Rt,fr,gr,jr,Br){function Fr(){return typeof performance>"u"?"Date.now()":"performance.now()"}function Er(bn){bn(Mr=fr.def(),"=",Fr(),";"),"string"==typeof Br?bn(Zr,".count+=",Br,";"):bn(Zr,".count++;"),At&&(jr?bn(Pr=fr.def(),"=",ln,".getNumPendingQueries();"):bn(ln,".beginQuery(",Zr,");"))}function _r(bn){bn(Zr,".cpuTime+=",Fr(),"-",Mr,";"),At&&(jr?bn(ln,".pushScopeStats(",Pr,",",ln,".getNumPendingQueries(),",Zr,");"):bn(ln,".endQuery();"))}function kr(bn){var Tn=fr.def(rn,".profile");fr(rn,".profile=",bn,";"),fr.exit(rn,".profile=",Tn,";")}var Mr,Pr,Wr=Rt.shared,Zr=Rt.stats,rn=Wr.current,ln=Wr.timer;if(gr=gr.profile){if(re(gr))return void(gr.enable?(Er(fr),_r(fr.exit),kr("true")):kr("false"));kr(gr=gr.append(Rt,fr))}else gr=fr.def(rn,".profile");Er(Wr=Rt.block()),fr("if(",gr,"){",Wr,"}"),_r(Rt=Rt.block()),fr.exit("if(",gr,"){",Rt,"}")}function Lr(Rt,fr,gr,jr,Br){var Er=Rt.shared;jr.forEach(function(_r){var kr,Mr=_r.name,Pr=gr.attributes[Mr];if(Pr){if(!Br(Pr))return;kr=Pr.append(Rt,fr)}else{if(!Br(He))return;var Wr=Rt.scopeAttrib(Mr);kr={},Object.keys(new An).forEach(function(Zr){kr[Zr]=fr.def(Wr,".",Zr)})}!function Fr(_r,kr,Mr){function Pr(){fr("if(!",ln,".buffer){",Zr,".enableVertexAttribArray(",rn,");}");var Dn,Bn=Mr.type;Dn=Mr.size?fr.def(Mr.size,"||",kr):kr,fr("if(",ln,".type!==",Bn,"||",ln,".size!==",Dn,"||",En.map(function(Kn){return ln+"."+Kn+"!=="+Mr[Kn]}).join("||"),"){",Zr,".bindBuffer(",34962,",",bn,".buffer);",Zr,".vertexAttribPointer(",[rn,Dn,Bn,Mr.normalized,Mr.stride,Mr.offset],");",ln,".type=",Bn,";",ln,".size=",Dn,";",En.map(function(Kn){return ln+"."+Kn+"="+Mr[Kn]+";"}).join(""),"}"),Vr&&fr("if(",ln,".divisor!==",Bn=Mr.divisor,"){",Rt.instancing,".vertexAttribDivisorANGLE(",[rn,Bn],");",ln,".divisor=",Bn,";}")}function Wr(){fr("if(",ln,".buffer){",Zr,".disableVertexAttribArray(",rn,");",ln,".buffer=null;","}if(",Zt.map(function(Dn,Bn){return ln+"."+Dn+"!=="+Tn[Bn]}).join("||"),"){",Zr,".vertexAttrib4f(",rn,",",Tn,");",Zt.map(function(Dn,Bn){return ln+"."+Dn+"="+Tn[Bn]+";"}).join(""),"}")}var Zr=Er.gl,rn=fr.def(_r,".location"),ln=fr.def(Er.attributes,"[",rn,"]"),bn=Mr.buffer,Tn=[Mr.x,Mr.y,Mr.z,Mr.w],En=["buffer","normalized","offset","stride"];1===(_r=Mr.state)?Pr():2===_r?Wr():(fr("if(",_r,"===",1,"){"),Pr(),fr("}else{"),Wr(),fr("}"))}(Rt.link(_r),function(Zr){switch(Zr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(_r.info.type),kr)})}function zr(Rt,fr,gr,jr,Br,Fr){for(var Er,_r=Rt.shared,kr=_r.gl,Mr=0;Mr<jr.length;++Mr){var Pr,Wr=(ln=jr[Mr]).name,Zr=ln.info.type,rn=gr.uniforms[Wr],ln=Rt.link(ln)+".location";if(rn){if(!Br(rn))continue;if(re(rn)){if(Wr=rn.value,35678===Zr||35680===Zr)fr(kr,".uniform1i(",ln,",",(Zr=Rt.link(Wr._texture||Wr.color[0]._texture))+".bind());"),fr.exit(Zr,".unbind();");else if(35674===Zr||35675===Zr||35676===Zr)rn=2,35675===Zr?rn=3:35676===Zr&&(rn=4),fr(kr,".uniformMatrix",rn,"fv(",ln,",false,",Wr=Rt.global.def("new Float32Array(["+Array.prototype.slice.call(Wr)+"])"),");");else{switch(Zr){case 5126:Er="1f";break;case 35664:Er="2f";break;case 35665:Er="3f";break;case 35666:Er="4f";break;case 35670:case 5124:Er="1i";break;case 35671:case 35667:Er="2i";break;case 35672:case 35668:Er="3i";break;case 35673:case 35669:Er="4i"}fr(kr,".uniform",Er,"(",ln,",",c(Wr)?Array.prototype.slice.call(Wr):Wr,");")}continue}Pr=rn.append(Rt,fr)}else{if(!Br(He))continue;Pr=fr.def(_r.uniforms,"[",be.id(Wr),"]")}switch(35678===Zr?fr("if(",Pr,"&&",Pr,'._reglType==="framebuffer"){',Pr,"=",Pr,".color[0];","}"):35680===Zr&&fr("if(",Pr,"&&",Pr,'._reglType==="framebufferCube"){',Pr,"=",Pr,".color[0];","}"),Wr=1,Zr){case 35678:case 35680:Zr=fr.def(Pr,"._texture"),fr(kr,".uniform1i(",ln,",",Zr,".bind());"),fr.exit(Zr,".unbind();");continue;case 5124:case 35670:Er="1i";break;case 35667:case 35671:Er="2i",Wr=2;break;case 35668:case 35672:Er="3i",Wr=3;break;case 35669:case 35673:Er="4i",Wr=4;break;case 5126:Er="1f";break;case 35664:Er="2f",Wr=2;break;case 35665:Er="3f",Wr=3;break;case 35666:Er="4f",Wr=4;break;case 35674:Er="Matrix2fv";break;case 35675:Er="Matrix3fv";break;case 35676:Er="Matrix4fv"}if("M"===Er.charAt(0)){fr(kr,".uniform",Er,"(",ln,","),ln=Math.pow(Zr-35674+2,2);var bn=Rt.global.def("new Float32Array(",ln,")");Array.isArray(Pr)?fr("false,(",n(ln,function(En){return bn+"["+En+"]="+Pr[En]}),",",bn,")"):fr("false,(Array.isArray(",Pr,")||",Pr," instanceof Float32Array)?",Pr,":(",n(ln,function(En){return bn+"["+En+"]="+Pr+"["+En+"]"}),",",bn,")"),fr(");")}else{if(1<Wr){Zr=[];var Tn=[];for(rn=0;rn<Wr;++rn)Array.isArray(Pr)?Tn.push(Pr[rn]):Tn.push(fr.def(Pr+"["+rn+"]")),Fr&&Zr.push(fr.def());Fr&&fr("if(!",Rt.batchId,"||",Zr.map(function(En,Dn){return En+"!=="+Tn[Dn]}).join("||"),"){",Zr.map(function(En,Dn){return En+"="+Tn[Dn]+";"}).join("")),fr(kr,".uniform",Er,"(",ln,",",Tn.join(","),");")}else Fr&&(Zr=fr.def(),fr("if(!",Rt.batchId,"||",Zr,"!==",Pr,"){",Zr,"=",Pr,";")),fr(kr,".uniform",Er,"(",ln,",",Pr,");");Fr&&fr("}")}}}function Hr(Rt,fr,gr,jr){function Br(Bn){var Kn=Zr[Bn];return Kn?Kn.append(Rt,Kn.contextDep&&jr.contextDynamic||Kn.propDep?gr:fr):fr.def(Wr,".",Bn)}function Fr(){function Bn(){gr(kr,".drawElementsInstancedANGLE(",[ln,Tn,En,bn+"<<(("+En+"-5121)>>1)",_r],");")}function Kn(){gr(kr,".drawArraysInstancedANGLE(",[ln,bn,Tn,_r],");")}rn&&"null"!==rn?Dn?Bn():(gr("if(",rn,"){"),Bn(),gr("}else{"),Kn(),gr("}")):Kn()}function Er(){function Bn(){gr(Pr+".drawElements("+[ln,Tn,En,bn+"<<(("+En+"-5121)>>1)"]+");")}function Kn(){gr(Pr+".drawArrays("+[ln,bn,Tn]+");")}rn&&"null"!==rn?Dn?Bn():(gr("if(",rn,"){"),Bn(),gr("}else{"),Kn(),gr("}")):Kn()}var _r,kr,Bn,Kn,Mr=Rt.shared,Pr=Mr.gl,Wr=Mr.draw,Zr=jr.draw,rn=(Kn=fr,(Bn=Zr.elements)?((Bn.contextDep&&jr.contextDynamic||Bn.propDep)&&(Kn=gr),Bn=Bn.append(Rt,Kn),Zr.elementsActive&&Kn("if("+Bn+")"+Pr+".bindBuffer(34963,"+Bn+".buffer.buffer);")):(Bn=Kn.def(),Kn(Bn,"=",Wr,".","elements",";","if(",Bn,"){",Pr,".bindBuffer(",34963,",",Bn,".buffer.buffer);}","else if(",Mr.vao,".currentVAO){",Bn,"=",Rt.shared.elements+".getElements("+Mr.vao,".currentVAO.elements);",xn?"":"if("+Bn+")"+Pr+".bindBuffer(34963,"+Bn+".buffer.buffer);","}")),Bn),ln=Br("primitive"),bn=Br("offset"),Tn=function(){var Bn=Zr.count,Kn=fr;return Bn?((Bn.contextDep&&jr.contextDynamic||Bn.propDep)&&(Kn=gr),Bn=Bn.append(Rt,Kn)):Bn=Kn.def(Wr,".","count"),Bn}();if("number"==typeof Tn){if(0===Tn)return}else gr("if(",Tn,"){"),gr.exit("}");Vr&&(_r=Br("instances"),kr=Rt.instancing);var En=rn+".type",Dn=Zr.elements&&re(Zr.elements)&&!Zr.vaoActive;Vr&&("number"!=typeof _r||0<=_r)?"string"==typeof _r?(gr("if(",_r,">0){"),Fr(),gr("}else if(",_r,"<0){"),Er(),gr("}")):Fr():Er()}function Xr(Rt,fr,gr,jr,Br){return Br=(fr=Ct()).proc("body",Br),Vr&&(fr.instancing=Br.def(fr.shared.extensions,".angle_instanced_arrays")),Rt(fr,Br,gr,jr),fr.compile().body}function cn(Rt,fr,gr,jr){dr(Rt,fr),gr.useVAO?gr.drawVAO?fr(Rt.shared.vao,".setVAO(",gr.drawVAO.append(Rt,fr),");"):fr(Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"):(fr(Rt.shared.vao,".setVAO(null);"),Lr(Rt,fr,gr,jr.attributes,function(){return!0})),zr(Rt,fr,gr,jr.uniforms,function(){return!0},!1),Hr(Rt,fr,fr,gr)}function an(Rt,fr,gr,jr){function Br(){return!0}Rt.batchId="a1",dr(Rt,fr),Lr(Rt,fr,gr,jr.attributes,Br),zr(Rt,fr,gr,jr.uniforms,Br,!1),Hr(Rt,fr,fr,gr)}function Nn(Rt,fr,gr,jr){function Br(Wr){return Wr.contextDep&&Er||Wr.propDep}function Fr(Wr){return!Br(Wr)}dr(Rt,fr);var Er=gr.contextDep,_r=fr.def(),kr=fr.def();Rt.shared.props=kr,Rt.batchId=_r;var Mr=Rt.scope(),Pr=Rt.scope();fr(Mr.entry,"for(",_r,"=0;",_r,"<","a1",";++",_r,"){",kr,"=","a0","[",_r,"];",Pr,"}",Mr.exit),gr.needsContext&&mr(Rt,Pr,gr.context),gr.needsFramebuffer&&tr(Rt,Pr,gr.framebuffer),ar(Rt,Pr,gr.state,Br),gr.profile&&Br(gr.profile)&&xr(Rt,Pr,gr,!1,!0),jr?(gr.useVAO?gr.drawVAO?Br(gr.drawVAO)?Pr(Rt.shared.vao,".setVAO(",gr.drawVAO.append(Rt,Pr),");"):Mr(Rt.shared.vao,".setVAO(",gr.drawVAO.append(Rt,Mr),");"):Mr(Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"):(Mr(Rt.shared.vao,".setVAO(null);"),Lr(Rt,Mr,gr,jr.attributes,Fr),Lr(Rt,Pr,gr,jr.attributes,Br)),zr(Rt,Mr,gr,jr.uniforms,Fr,!1),zr(Rt,Pr,gr,jr.uniforms,Br,!0),Hr(Rt,Mr,Pr,gr)):(fr=Rt.global.def("{}"),jr=gr.shader.progVar.append(Rt,Pr),kr=Pr.def(jr,".id"),Mr=Pr.def(fr,"[",kr,"]"),Pr(Rt.shared.gl,".useProgram(",jr,".program);","if(!",Mr,"){",Mr,"=",fr,"[",kr,"]=",Rt.link(function(Wr){return Xr(an,Rt,gr,Wr,2)}),"(",jr,");}",Mr,".call(this,a0[",_r,"],",_r,");"))}function wn(Rt,fr,gr){var jr=fr.static[gr];if(jr&&function(Pr){if("object"==typeof Pr&&!c(Pr)){for(var Wr=Object.keys(Pr),Zr=0;Zr<Wr.length;++Zr)if(J.isDynamic(Pr[Wr[Zr]]))return!0;return!1}}(jr)){var Br=Rt.global,Fr=Object.keys(jr),Er=!1,_r=!1,kr=!1,Mr=Rt.global.def("{}");Fr.forEach(function(Pr){var Wr=jr[Pr];if(J.isDynamic(Wr))"function"==typeof Wr&&(Wr=jr[Pr]=J.unbox(Wr)),Pr=B(Wr,null),Er=Er||Pr.thisDep,kr=kr||Pr.propDep,_r=_r||Pr.contextDep;else{switch(Br(Mr,".",Pr,"="),typeof Wr){case"number":Br(Wr);break;case"string":Br('"',Wr,'"');break;case"object":Array.isArray(Wr)&&Br("[",Wr.join(),"]");break;default:Br(Rt.link(Wr))}Br(";")}}),fr.dynamic[gr]=new J.DynamicVariable(4,{thisDep:Er,contextDep:_r,propDep:kr,ref:Mr,append:function(Pr,Wr){Fr.forEach(function(Zr){var rn=jr[Zr];J.isDynamic(rn)&&(rn=Pr.invoke(Wr,rn),Wr(Mr,".",Zr,"=",rn,";"))})}}),delete fr.static[gr]}}var An=Dt.Record,ii={add:32774,subtract:32778,"reverse subtract":32779};ze.ext_blend_minmax&&(ii.min=32775,ii.max=32776);var Vr=ze.angle_instanced_arrays,sn=ze.webgl_draw_buffers,xn=ze.oes_vertex_array_object,nn={dirty:!0,profile:Se.profile},fn={},Xn=[],Mn={},On={};it("dither",3024),it("blend.enable",3042),dt("blend.color","blendColor",[0,0,0,0]),dt("blend.equation","blendEquationSeparate",[32774,32774]),dt("blend.func","blendFuncSeparate",[1,0,1,0]),it("depth.enable",2929,!0),dt("depth.func","depthFunc",513),dt("depth.range","depthRange",[0,1]),dt("depth.mask","depthMask",!0),dt("colorMask","colorMask",[!0,!0,!0,!0]),it("cull.enable",2884),dt("cull.face","cullFace",1029),dt("frontFace","frontFace",2305),dt("lineWidth","lineWidth",1),it("polygonOffset.enable",32823),dt("polygonOffset.offset","polygonOffset",[0,0]),it("sample.alpha",32926),it("sample.enable",32928),dt("sample.coverage","sampleCoverage",[1,!1]),it("stencil.enable",2960),dt("stencil.mask","stencilMask",-1),dt("stencil.func","stencilFunc",[519,0,-1]),dt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),dt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),it("scissor.enable",3089),dt("scissor.box","scissor",[0,0,he.drawingBufferWidth,he.drawingBufferHeight]),dt("viewport","viewport",[0,0,he.drawingBufferWidth,he.drawingBufferHeight]);var si={gl:he,context:Ot,strings:be,next:fn,current:nn,draw:mt,elements:Ye,buffer:Je,shader:ht,attributes:Dt.state,vao:Dt,uniforms:Mt,framebuffer:st,extensions:ze,timer:At,isBufferArgs:X},or={primTypes:Te,compareFuncs:cr,blendFuncs:Xt,blendEquations:ii,stencilOps:Ft,glTypes:pe,orientationType:Be};sn&&(or.backBuffer=[1029],or.drawBuffer=n(Ve.maxDrawbuffers,function(Rt){return 0===Rt?[0]:n(Rt,function(fr){return 36064+fr})}));var br=0;return{next:fn,current:nn,procs:function(){var Rt=Ct(),fr=Rt.proc("poll"),gr=Rt.proc("refresh"),jr=Rt.block();fr(jr),gr(jr);var Br,Fr=(kr=Rt.shared).gl,Er=kr.next,_r=kr.current;jr(_r,".dirty=false;"),tr(Rt,fr),tr(Rt,gr,null,!0),Vr&&(Br=Rt.link(Vr)),ze.oes_vertex_array_object&&gr(Rt.link(ze.oes_vertex_array_object),".bindVertexArrayOES(null);");var kr=gr.def(kr.attributes),Mr=gr.def(0),Pr=Rt.cond(Mr,".buffer");Pr.then(Fr,".enableVertexAttribArray(i);",Fr,".bindBuffer(",34962,",",Mr,".buffer.buffer);",Fr,".vertexAttribPointer(i,",Mr,".size,",Mr,".type,",Mr,".normalized,",Mr,".stride,",Mr,".offset);").else(Fr,".disableVertexAttribArray(i);",Fr,".vertexAttrib4f(i,",Mr,".x,",Mr,".y,",Mr,".z,",Mr,".w);",Mr,".buffer=null;");var Wr=Rt.link(Ve.maxAttributes,{stable:!0});return gr("for(var i=0;i<",Wr,";++i){",Mr,"=",kr,"[i];",Pr,"}"),Vr&&gr("for(var i=0;i<",Wr,";++i){",Br,".vertexAttribDivisorANGLE(i,",kr,"[i].divisor);","}"),gr(Rt.shared.vao,".currentVAO=null;",Rt.shared.vao,".setVAO(",Rt.shared.vao,".targetVAO);"),Object.keys(Mn).forEach(function(Zr){var rn=Mn[Zr],ln=jr.def(Er,".",Zr),bn=Rt.block();bn("if(",ln,"){",Fr,".enable(",rn,")}else{",Fr,".disable(",rn,")}",_r,".",Zr,"=",ln,";"),gr(bn),fr("if(",ln,"!==",_r,".",Zr,"){",bn,"}")}),Object.keys(On).forEach(function(Zr){var rn,ln,bn=On[Zr],Tn=nn[Zr],En=Rt.block();En(Fr,".",bn,"("),c(Tn)?(bn=Tn.length,rn=Rt.global.def(Er,".",Zr),ln=Rt.global.def(_r,".",Zr),En(n(bn,function(Dn){return rn+"["+Dn+"]"}),");",n(bn,function(Dn){return ln+"["+Dn+"]="+rn+"["+Dn+"];"}).join("")),fr("if(",n(bn,function(Dn){return rn+"["+Dn+"]!=="+ln+"["+Dn+"]"}).join("||"),"){",En,"}")):(rn=jr.def(Er,".",Zr),ln=jr.def(_r,".",Zr),En(rn,");",_r,".",Zr,"=",rn,";"),fr("if(",rn,"!==",ln,"){",En,"}")),gr(En)}),Rt.compile()}(),compile:function(Rt,fr,gr,jr,Br){var Fr=Ct();Fr.stats=Fr.link(Br),Object.keys(fr.static).forEach(function(_r){wn(Fr,fr,_r)}),$t.forEach(function(_r){wn(Fr,Rt,_r)});var Er=Sr(Rt,fr,gr,jr);return Er.shader.program&&(Er.shader.program.attributes.sort(function(_r,kr){return _r.name<kr.name?-1:1}),Er.shader.program.uniforms.sort(function(_r,kr){return _r.name<kr.name?-1:1})),function(_r,kr){var Mr=_r.proc("draw",1);dr(_r,Mr),mr(_r,Mr,kr.context),tr(_r,Mr,kr.framebuffer),rr(_r,Mr,kr),ar(_r,Mr,kr.state),xr(_r,Mr,kr,!1,!0);var Pr=kr.shader.progVar.append(_r,Mr);if(Mr(_r.shared.gl,".useProgram(",Pr,".program);"),kr.shader.program)cn(_r,Mr,kr,kr.shader.program);else{Mr(_r.shared.vao,".setVAO(null);");var Wr=_r.global.def("{}"),Zr=Mr.def(Pr,".id"),rn=Mr.def(Wr,"[",Zr,"]");Mr(_r.cond(rn).then(rn,".call(this,a0);").else(rn,"=",Wr,"[",Zr,"]=",_r.link(function(ln){return Xr(cn,_r,kr,ln,1)}),"(",Pr,");",rn,".call(this,a0);"))}0<Object.keys(kr.state).length&&Mr(_r.shared.current,".dirty=true;"),_r.shared.vao&&Mr(_r.shared.vao,".setVAO(null);")}(Fr,Er),function on(Rt,fr){function gr(_r){var kr=fr.shader[_r];kr&&(kr=kr.append(Rt,jr),isNaN(kr)?jr.set(Br.shader,"."+_r,kr):jr.set(Br.shader,"."+_r,Rt.link(kr,{stable:!0})))}var jr=Rt.proc("scope",3);Rt.batchId="a2";var Br=Rt.shared,Fr=Br.current;if(mr(Rt,jr,fr.context),fr.framebuffer&&fr.framebuffer.append(Rt,jr),Z(Object.keys(fr.state)).forEach(function(_r){var kr=fr.state[_r],Mr=kr.append(Rt,jr);c(Mr)?Mr.forEach(function(Pr,Wr){isNaN(Pr)?jr.set(Rt.next[_r],"["+Wr+"]",Pr):jr.set(Rt.next[_r],"["+Wr+"]",Rt.link(Pr,{stable:!0}))}):re(kr)?jr.set(Br.next,"."+_r,Rt.link(Mr,{stable:!0})):jr.set(Br.next,"."+_r,Mr)}),xr(Rt,jr,fr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(_r){var kr=fr.draw[_r];kr&&(kr=kr.append(Rt,jr),isNaN(kr)?jr.set(Br.draw,"."+_r,kr):jr.set(Br.draw,"."+_r,Rt.link(kr),{stable:!0}))}),Object.keys(fr.uniforms).forEach(function(_r){var kr=fr.uniforms[_r].append(Rt,jr);Array.isArray(kr)&&(kr="["+kr.map(function(Mr){return isNaN(Mr)?Mr:Rt.link(Mr,{stable:!0})})+"]"),jr.set(Br.uniforms,"["+Rt.link(be.id(_r),{stable:!0})+"]",kr)}),Object.keys(fr.attributes).forEach(function(_r){var kr=fr.attributes[_r].append(Rt,jr),Mr=Rt.scopeAttrib(_r);Object.keys(new An).forEach(function(Pr){jr.set(Mr,"."+Pr,kr[Pr])})}),fr.scopeVAO){var Er=fr.scopeVAO.append(Rt,jr);isNaN(Er)?jr.set(Br.vao,".targetVAO",Er):jr.set(Br.vao,".targetVAO",Rt.link(Er,{stable:!0}))}gr("vert"),gr("frag"),0<Object.keys(fr.state).length&&(jr(Fr,".dirty=true;"),jr.exit(Fr,".dirty=true;")),jr("a1(",Rt.shared.context,",a0,",Rt.batchId,");")}(Fr,Er),function(_r,kr){function Mr(Tn){return Tn.contextDep&&Wr||Tn.propDep}var Pr=_r.proc("batch",2);_r.batchId="0",dr(_r,Pr);var Wr=!1,Zr=!0;Object.keys(kr.context).forEach(function(Tn){Wr=Wr||kr.context[Tn].propDep}),Wr||(mr(_r,Pr,kr.context),Zr=!1);var rn=!1;if((ln=kr.framebuffer)?(ln.propDep?Wr=rn=!0:ln.contextDep&&Wr&&(rn=!0),rn||tr(_r,Pr,ln)):tr(_r,Pr,null),kr.state.viewport&&kr.state.viewport.propDep&&(Wr=!0),rr(_r,Pr,kr),ar(_r,Pr,kr.state,function(Tn){return!Mr(Tn)}),kr.profile&&Mr(kr.profile)||xr(_r,Pr,kr,!1,"a1"),kr.contextDep=Wr,kr.needsContext=Zr,kr.needsFramebuffer=rn,(Zr=kr.shader.progVar).contextDep&&Wr||Zr.propDep)Nn(_r,Pr,kr,null);else if(Zr=Zr.append(_r,Pr),Pr(_r.shared.gl,".useProgram(",Zr,".program);"),kr.shader.program)Nn(_r,Pr,kr,kr.shader.program);else{Pr(_r.shared.vao,".setVAO(null);");var ln=_r.global.def("{}"),bn=(rn=Pr.def(Zr,".id"),Pr.def(ln,"[",rn,"]"));Pr(_r.cond(bn).then(bn,".call(this,a0,a1);").else(bn,"=",ln,"[",rn,"]=",_r.link(function(Tn){return Xr(Nn,_r,kr,Tn,2)}),"(",Zr,");",bn,".call(this,a0,a1);"))}0<Object.keys(kr.state).length&&Pr(_r.shared.current,".dirty=true;"),_r.shared.vao&&Pr(_r.shared.vao,".setVAO(null);")}(Fr,Er),N(Fr.compile(),{destroy:function(){Er.shader.program.destroy()}})}}}function ee(he,be){for(var ze=0;ze<he.length;++ze)if(he[ze]===be)return ze;return-1}var N=function(he,be){for(var ze=Object.keys(be),Ve=0;Ve<ze.length;++Ve)he[ze[Ve]]=be[ze[Ve]];return he},K=0,J={DynamicVariable:m,define:function(he,be){return new m(he,g(be+""))},isDynamic:function(he){return"function"==typeof he&&!he._reglType||he instanceof m},unbox:function he(be,ze){return"function"==typeof be?new m(0,be):"number"==typeof be||"boolean"==typeof be?new m(5,be):Array.isArray(be)?new m(6,be.map(function(Ve,Je){return he(Ve,ze+"["+Je+"]")})):be instanceof m?be:void 0},accessor:g},te={next:"function"==typeof requestAnimationFrame?function(he){return requestAnimationFrame(he)}:function(he){return setTimeout(he,16)},cancel:"function"==typeof cancelAnimationFrame?function(he){return cancelAnimationFrame(he)}:clearTimeout},ae=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},le=l();le.zero=l();var ve=function(he){return he instanceof Uint8Array||he instanceof Uint16Array||he instanceof Uint32Array||he instanceof Int8Array||he instanceof Int16Array||he instanceof Int32Array||he instanceof Float32Array||he instanceof Float64Array||he instanceof Uint8ClampedArray},ue=function(he){return Object.keys(he).map(function(be){return he[be]})},ye={shape:function(he){for(var be=[];he.length;he=he[0])be.push(he.length);return be},flatten:function(he,be,ze,Ve){var Je=1;if(be.length)for(var Ye=0;Ye<be.length;++Ye)Je*=be[Ye];else Je=0;switch(ze=Ve||le.allocType(ze,Je),be.length){case 0:break;case 1:for(Ve=be[0],be=0;be<Ve;++be)ze[be]=he[be];break;case 2:for(Ve=be[0],be=be[1],Ye=Je=0;Ye<Ve;++Ye)for(var lt=he[Ye],st=0;st<be;++st)ze[Je++]=lt[st];break;case 3:d(he,be[0],be[1],be[2],ze,0);break;default:!function Mt(Dt,ht,mt,Ot,At){for(var It=1,Se=mt+1;Se<ht.length;++Se)It*=ht[Se];var Ze=ht[mt];if(ht.length-mt==4){var it=ht[mt+1],dt=ht[mt+2];for(ht=ht[mt+3],Se=0;Se<Ze;++Se)d(Dt[Se],it,dt,ht,Ot,At),At+=It}else for(Se=0;Se<Ze;++Se)Mt(Dt[Se],ht,mt+1,Ot,At),At+=It}(he,be,0,ze,0)}return ze}},Me={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},pe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ge={dynamic:35048,stream:35040,static:35044},we=ye.flatten,oe=ye.shape,de=[];de[5120]=1,de[5122]=2,de[5124]=4,de[5121]=1,de[5123]=2,de[5125]=4,de[5126]=4;var Te={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ee=new Float32Array(1),Ae=new Uint32Array(Ee.buffer),De=[9984,9986,9985,9987],Ie=[0,6409,6410,6407,6408],Oe={};Oe[6409]=Oe[6406]=Oe[6402]=1,Oe[34041]=Oe[6410]=2,Oe[6407]=Oe[35904]=3,Oe[6408]=Oe[35906]=4;var Xe=a("HTMLCanvasElement"),Fe=a("OffscreenCanvas"),Pe=a("CanvasRenderingContext2D"),Re=a("ImageBitmap"),qe=a("HTMLImageElement"),Qe=a("HTMLVideoElement"),ct=Object.keys(Me).concat([Xe,Fe,Pe,Re,qe,Qe]),bt=[];bt[5121]=1,bt[5126]=4,bt[36193]=2,bt[5123]=2,bt[5125]=4;var Tt=[];Tt[32854]=2,Tt[32855]=2,Tt[36194]=2,Tt[34041]=4,Tt[33776]=.5,Tt[33777]=.5,Tt[33778]=1,Tt[33779]=1,Tt[35986]=.5,Tt[35987]=1,Tt[34798]=1,Tt[35840]=.5,Tt[35841]=.25,Tt[35842]=.5,Tt[35843]=.25,Tt[36196]=.5;var _t=[];_t[32854]=2,_t[32855]=2,_t[36194]=2,_t[33189]=2,_t[36168]=1,_t[34041]=4,_t[35907]=4,_t[34836]=16,_t[34842]=8,_t[34843]=6;var Ke=[];Ke[6408]=4,Ke[6407]=3;var xt=[];xt[5121]=1,xt[5126]=4,xt[36193]=2;var Ht=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Zt=["x","y","z","w"],$t="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Xt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},cr={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ft={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Be={cw:2304,ccw:2305},He=new W(!1,!1,!1,function(){});return function(he){function be(){if(0===an.length)Ut&&Ut.update(),An=null;else{An=te.next(be),ht();for(var Vr=an.length-1;0<=Vr;--Vr){var sn=an[Vr];sn&&sn(Sr,null,0)}At.flush(),Ut&&Ut.update()}}function ze(){!An&&0<an.length&&(An=te.next(be))}function Ve(){An&&(te.cancel(be),An=null)}function Je(Vr){Vr.preventDefault(),Ve(),Nn.forEach(function(sn){sn()})}function Ye(Vr){At.getError(),Se.restore(),dr.restore(),tr.restore(),xr.restore(),Lr.restore(),zr.restore(),ar.restore(),Ut&&Ut.restore(),Hr.procs.refresh(),ze(),on.forEach(function(sn){sn()})}function lt(Vr){function sn(Rt,fr){var gr={},jr={};return Object.keys(Rt).forEach(function(Br){var Fr=Rt[Br];if(J.isDynamic(Fr))jr[Br]=J.unbox(Fr,Br);else{if(fr&&Array.isArray(Fr))for(var Er=0;Er<Fr.length;++Er)if(J.isDynamic(Fr[Er]))return void(jr[Br]=J.unbox(Fr,Br));gr[Br]=Fr}}),{dynamic:jr,static:gr}}var xn=sn(Vr.context||{},!0),nn=sn(Vr.uniforms||{},!0),fn=sn(Vr.attributes||{},!1);Vr=sn(function(Rt){function fr(jr){if(jr in gr){var Br=gr[jr];delete gr[jr],Object.keys(Br).forEach(function(Fr){gr[jr+"."+Fr]=Br[Fr]})}}var gr=N({},Rt);return delete gr.uniforms,delete gr.attributes,delete gr.context,delete gr.vao,"stencil"in gr&&gr.stencil.op&&(gr.stencil.opBack=gr.stencil.opFront=gr.stencil.op,delete gr.stencil.op),fr("blend"),fr("depth"),fr("cull"),fr("stencil"),fr("polygonOffset"),fr("scissor"),fr("sample"),"vao"in Rt&&(gr.vao=Rt.vao),gr}(Vr),!1);var Xn={gpuTime:0,cpuTime:0,count:0},Mn=Hr.compile(Vr,fn,nn,xn,Xn),On=Mn.draw,si=Mn.batch,or=Mn.scope,br=[];return N(function(Rt,fr){var gr;if("function"==typeof Rt)return or.call(this,null,Rt,0);if("function"==typeof fr)if("number"==typeof Rt)for(gr=0;gr<Rt;++gr)or.call(this,null,fr,gr);else{if(!Array.isArray(Rt))return or.call(this,Rt,fr,0);for(gr=0;gr<Rt.length;++gr)or.call(this,Rt[gr],fr,gr)}else if("number"==typeof Rt){if(0<Rt)return si.call(this,function(jr){for(;br.length<jr;)br.push(null);return br}(0|Rt),0|Rt)}else{if(!Array.isArray(Rt))return On.call(this,Rt);if(Rt.length)return si.call(this,Rt,Rt.length)}},{stats:Xn,destroy:function(){Mn.destroy()}})}function st(Vr,sn){var xn=0;Hr.procs.poll();var nn=sn.color;nn&&(At.clearColor(+nn[0]||0,+nn[1]||0,+nn[2]||0,+nn[3]||0),xn|=16384),"depth"in sn&&(At.clearDepth(+sn.depth),xn|=256),"stencil"in sn&&(At.clearStencil(0|sn.stencil),xn|=1024),At.clear(xn)}function Mt(Vr){return an.push(Vr),ze(),{cancel:function(){var sn=ee(an,Vr);an[sn]=function xn(){var nn=ee(an,xn);an[nn]=an[an.length-1],--an.length,0>=an.length&&Ve()}}}}function Dt(){var Vr=Xr.viewport,sn=Xr.scissor_box;Vr[0]=Vr[1]=sn[0]=sn[1]=0,Sr.viewportWidth=Sr.framebufferWidth=Sr.drawingBufferWidth=Vr[2]=sn[2]=At.drawingBufferWidth,Sr.viewportHeight=Sr.framebufferHeight=Sr.drawingBufferHeight=Vr[3]=sn[3]=At.drawingBufferHeight}function ht(){Sr.tick+=1,Sr.time=Ot(),Dt(),Hr.procs.poll()}function mt(){xr.refresh(),Dt(),Hr.procs.refresh(),Ut&&Ut.update()}function Ot(){return(ae()-Jt)/1e3}if(!(he=function e(he){var be,ze,Ve,Je,Ye=he||{};he={};var lt=[],st=[],Mt=typeof window>"u"?1:window.devicePixelRatio,Dt=!1,ht={},mt=function(At){},Ot=function(){};if("string"==typeof Ye?be=document.querySelector(Ye):"object"==typeof Ye&&("string"==typeof Ye.nodeName&&"function"==typeof Ye.appendChild&&"function"==typeof Ye.getBoundingClientRect?be=Ye:"function"==typeof Ye.drawArrays||"function"==typeof Ye.drawElements?Ve=(Je=Ye).canvas:("gl"in Ye?Je=Ye.gl:"canvas"in Ye?Ve=x(Ye.canvas):"container"in Ye&&(ze=x(Ye.container)),"attributes"in Ye&&(he=Ye.attributes),"extensions"in Ye&&(lt=k(Ye.extensions)),"optionalExtensions"in Ye&&(st=k(Ye.optionalExtensions)),"onDone"in Ye&&(mt=Ye.onDone),"profile"in Ye&&(Dt=!!Ye.profile),"pixelRatio"in Ye&&(Mt=+Ye.pixelRatio),"cachedCode"in Ye&&(ht=Ye.cachedCode))),be&&("canvas"===be.nodeName.toLowerCase()?Ve=be:ze=be),!Je){if(!Ve){if(!(be=function(At,It,Se){function Ze(){var Ct=window.innerWidth,Ut=window.innerHeight;At!==document.body&&(Ct=(Ut=dt.getBoundingClientRect()).right-Ut.left,Ut=Ut.bottom-Ut.top),dt.width=Se*Ct,dt.height=Se*Ut}var it,dt=document.createElement("canvas");return N(dt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),At.appendChild(dt),At===document.body&&(dt.style.position="absolute",N(At.style,{margin:0,padding:0})),At!==document.body&&"function"==typeof ResizeObserver?(it=new ResizeObserver(function(){setTimeout(Ze)})).observe(At):window.addEventListener("resize",Ze,!1),Ze(),{canvas:dt,onDestroy:function(){it?it.disconnect():window.removeEventListener("resize",Ze),At.removeChild(dt)}}}(ze||document.body,0,Mt)))return null;Ve=be.canvas,Ot=be.onDestroy}void 0===he.premultipliedAlpha&&(he.premultipliedAlpha=!0),Je=function(At,It){function Se(Ze){try{return At.getContext(Ze,It)}catch{return null}}return Se("webgl")||Se("experimental-webgl")||Se("webgl-experimental")}(Ve,he)}return Je?{gl:Je,canvas:Ve,container:ze,extensions:lt,optionalExtensions:st,pixelRatio:Mt,profile:Dt,cachedCode:ht,onDone:mt,onDestroy:Ot}:(Ot(),mt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(he)))return null;var At=he.gl,It=At.getContextAttributes();At.isContextLost();var Se=function(Vr,sn){function xn(Mn){var On;Mn=Mn.toLowerCase();try{On=nn[Mn]=Vr.getExtension(Mn)}catch{}return!!On}for(var nn={},fn=0;fn<sn.extensions.length;++fn){var Xn=sn.extensions[fn];if(!xn(Xn))return sn.onDestroy(),sn.onDone('"'+Xn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return sn.optionalExtensions.forEach(xn),{extensions:nn,restore:function(){Object.keys(nn).forEach(function(Mn){if(nn[Mn]&&!xn(Mn))throw Error("(regl): error restoring extension "+Mn)})}}}(At,he);if(!Se)return null;var Vr,sn,Ze=(Vr={"":0},sn=[""],{id:function(xn){var nn=Vr[xn];return nn||(nn=Vr[xn]=sn.length,sn.push(xn),nn)},str:function(xn){return sn[xn]}}),it={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},dt=he.cachedCode||{},Ct=Se.extensions,Ut=function(Vr,sn){function xn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function nn(br,Rt,fr){var gr=Mn.pop()||new xn;gr.startQueryIndex=br,gr.endQueryIndex=Rt,gr.sum=0,gr.stats=fr,On.push(gr)}if(!sn.ext_disjoint_timer_query)return null;var fn=[],Xn=[],Mn=[],On=[],si=[],or=[];return{beginQuery:function(br){var Rt=fn.pop()||sn.ext_disjoint_timer_query.createQueryEXT();sn.ext_disjoint_timer_query.beginQueryEXT(35007,Rt),Xn.push(Rt),nn(Xn.length-1,Xn.length,br)},endQuery:function(){sn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:nn,update:function(){var br,Rt;if(0!==(br=Xn.length)){or.length=Math.max(or.length,br+1),si.length=Math.max(si.length,br+1),si[0]=0;var fr=or[0]=0;for(Rt=br=0;Rt<Xn.length;++Rt){var gr=Xn[Rt];sn.ext_disjoint_timer_query.getQueryObjectEXT(gr,34919)?(fr+=sn.ext_disjoint_timer_query.getQueryObjectEXT(gr,34918),fn.push(gr)):Xn[br++]=gr,si[Rt+1]=fr,or[Rt+1]=br}for(Xn.length=br,Rt=br=0;Rt<On.length;++Rt){var jr=(fr=On[Rt]).startQueryIndex;fr.sum+=si[gr=fr.endQueryIndex]-si[jr],(gr=or[gr])===(jr=or[jr])?(fr.stats.gpuTime+=fr.sum/1e6,Mn.push(fr)):(fr.startQueryIndex=jr,fr.endQueryIndex=gr,On[br++]=fr)}On.length=br}},getNumPendingQueries:function(){return Xn.length},clear:function(){fn.push.apply(fn,Xn);for(var br=0;br<fn.length;br++)sn.ext_disjoint_timer_query.deleteQueryEXT(fn[br]);Xn.length=0,fn.length=0},restore:function(){Xn.length=0,fn.length=0}}}(0,Ct),Jt=ae(),qt=At.drawingBufferWidth,pr=At.drawingBufferHeight,Sr={tick:0,time:0,viewportWidth:qt,viewportHeight:pr,framebufferWidth:qt,framebufferHeight:pr,drawingBufferWidth:qt,drawingBufferHeight:pr,pixelRatio:he.pixelRatio},mr=(qt={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(he,be){var ze=1;be.ext_texture_filter_anisotropic&&(ze=he.getParameter(34047));var Ve=1,Je=1;be.webgl_draw_buffers&&(Ve=he.getParameter(34852),Je=he.getParameter(36063));var Ye=!!be.oes_texture_float;if(Ye){Ye=he.createTexture(),he.bindTexture(3553,Ye),he.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var lt=he.createFramebuffer();if(he.bindFramebuffer(36160,lt),he.framebufferTexture2D(36160,36064,3553,Ye,0),he.bindTexture(3553,null),36053!==he.checkFramebufferStatus(36160))Ye=!1;else{he.viewport(0,0,1,1),he.clearColor(1,0,0,1),he.clear(16384);var st=le.allocType(5126,4);he.readPixels(0,0,1,1,6408,5126,st),he.getError()?Ye=!1:(he.deleteFramebuffer(lt),he.deleteTexture(Ye),Ye=1===st[0]),le.freeType(st)}}return st=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(st=he.createTexture(),lt=le.allocType(5121,36),he.activeTexture(33984),he.bindTexture(34067,st),he.texImage2D(34069,0,6408,3,3,0,6408,5121,lt),le.freeType(lt),he.bindTexture(34067,null),he.deleteTexture(st),st=!he.getError()),{colorBits:[he.getParameter(3410),he.getParameter(3411),he.getParameter(3412),he.getParameter(3413)],depthBits:he.getParameter(3414),stencilBits:he.getParameter(3415),subpixelBits:he.getParameter(3408),extensions:Object.keys(be).filter(function(Mt){return!!be[Mt]}),maxAnisotropic:ze,maxDrawbuffers:Ve,maxColorAttachments:Je,pointSizeDims:he.getParameter(33901),lineWidthDims:he.getParameter(33902),maxViewportDims:he.getParameter(3386),maxCombinedTextureUnits:he.getParameter(35661),maxCubeMapSize:he.getParameter(34076),maxRenderbufferSize:he.getParameter(34024),maxTextureUnits:he.getParameter(34930),maxTextureSize:he.getParameter(3379),maxAttributes:he.getParameter(34921),maxVertexUniforms:he.getParameter(36347),maxVertexTextureUnits:he.getParameter(35660),maxVaryingVectors:he.getParameter(36348),maxFragmentUniforms:he.getParameter(36349),glsl:he.getParameter(35724),renderer:he.getParameter(7937),vendor:he.getParameter(7936),version:he.getParameter(7938),readFloat:Ye,npotTextureCube:st}}(At,Ct)),tr=function s(he,be,ze,Ve){function Je(mt){this.id=Mt++,this.buffer=he.createBuffer(),this.type=mt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,ze.profile&&(this.stats={size:0})}function Ye(mt,Ot,At){mt.byteLength=Ot.byteLength,he.bufferData(mt.type,Ot,At)}function lt(mt,Ot,At,It,Se,Ze){if(mt.usage=At,Array.isArray(Ot)){if(mt.dtype=It||5126,0<Ot.length)if(Array.isArray(Ot[0])){Se=oe(Ot);for(var it=It=1;it<Se.length;++it)It*=Se[it];mt.dimension=It,Ye(mt,Ot=we(Ot,Se,mt.dtype),At),Ze?mt.persistentData=Ot:le.freeType(Ot)}else"number"==typeof Ot[0]?(mt.dimension=Se,t(Se=le.allocType(mt.dtype,Ot.length),Ot),Ye(mt,Se,At),Ze?mt.persistentData=Se:le.freeType(Se)):ve(Ot[0])&&(mt.dimension=Ot[0].length,mt.dtype=It||f(Ot[0])||5126,Ye(mt,Ot=we(Ot,[Ot.length,Ot[0].length],mt.dtype),At),Ze?mt.persistentData=Ot:le.freeType(Ot))}else if(ve(Ot))mt.dtype=It||f(Ot),mt.dimension=Se,Ye(mt,Ot,At),Ze&&(mt.persistentData=new Uint8Array(new Uint8Array(Ot.buffer)));else if(r(Ot)){var dt=Ot.stride,Ct=(it=Ot.offset,0),Ut=0,Jt=0,qt=0;1===(Se=Ot.shape).length?(Ct=Se[0],Ut=1,Jt=dt[0],qt=0):2===Se.length&&(Ct=Se[0],Ut=Se[1],Jt=dt[0],qt=dt[1]),mt.dtype=It||f(Ot.data)||5126,mt.dimension=Ut,h(Se=le.allocType(mt.dtype,Ct*Ut),Ot.data,Ct,Ut,Jt,qt,it),Ye(mt,Se,At),Ze?mt.persistentData=Se:le.freeType(Se)}else Ot instanceof ArrayBuffer&&(mt.dtype=5121,mt.dimension=Se,Ye(mt,Ot,At),Ze&&(mt.persistentData=new Uint8Array(new Uint8Array(Ot))))}function st(mt){be.bufferCount--,Ve(mt),he.deleteBuffer(mt.buffer),mt.buffer=null,delete Dt[mt.id]}var Mt=0,Dt={};Je.prototype.bind=function(){he.bindBuffer(this.type,this.buffer)},Je.prototype.destroy=function(){st(this)};var ht=[];return ze.profile&&(be.getTotalBufferSize=function(){var mt=0;return Object.keys(Dt).forEach(function(Ot){mt+=Dt[Ot].stats.size}),mt}),{create:function(mt,Ot,At,It){function Se(it){var dt=35044,Ct=null,Ut=0,Jt=0,qt=1;return Array.isArray(it)||ve(it)||r(it)||it instanceof ArrayBuffer?Ct=it:"number"==typeof it?Ut=0|it:it&&("data"in it&&(Ct=it.data),"usage"in it&&(dt=ge[it.usage]),"type"in it&&(Jt=pe[it.type]),"dimension"in it&&(qt=0|it.dimension),"length"in it&&(Ut=0|it.length)),Ze.bind(),Ct?lt(Ze,Ct,dt,Jt,qt,It):(Ut&&he.bufferData(Ze.type,Ut,dt),Ze.dtype=Jt||5121,Ze.usage=dt,Ze.dimension=qt,Ze.byteLength=Ut),ze.profile&&(Ze.stats.size=Ze.byteLength*de[Ze.dtype]),Se}be.bufferCount++;var Ze=new Je(Ot);return Dt[Ze.id]=Ze,At||Se(mt),Se._reglType="buffer",Se._buffer=Ze,Se.subdata=function(it,dt){var Ct,Ut=0|(dt||0);if(Ze.bind(),ve(it)||it instanceof ArrayBuffer)he.bufferSubData(Ze.type,Ut,it);else if(Array.isArray(it)){if(0<it.length)if("number"==typeof it[0]){var Jt=le.allocType(Ze.dtype,it.length);t(Jt,it),he.bufferSubData(Ze.type,Ut,Jt),le.freeType(Jt)}else(Array.isArray(it[0])||ve(it[0]))&&(Ct=oe(it),Jt=we(it,Ct,Ze.dtype),he.bufferSubData(Ze.type,Ut,Jt),le.freeType(Jt))}else if(r(it)){var qt=it.stride,pr=Jt=0,Sr=0,mr=0;1===(Ct=it.shape).length?(Jt=Ct[0],pr=1,Sr=qt[0],mr=0):2===Ct.length&&(Jt=Ct[0],pr=Ct[1],Sr=qt[0],mr=qt[1]),Ct=Array.isArray(it.data)?Ze.dtype:f(it.data),h(Ct=le.allocType(Ct,Jt*pr),it.data,Jt,pr,Sr,mr,it.offset),he.bufferSubData(Ze.type,Ut,Ct),le.freeType(Ct)}return Se},ze.profile&&(Se.stats=Ze.stats),Se.destroy=function(){st(Ze)},Se},createStream:function(mt,Ot){var At=ht.pop();return At||(At=new Je(mt)),At.bind(),lt(At,Ot,35040,0,1,!1),At},destroyStream:function(mt){ht.push(mt)},clear:function(){ue(Dt).forEach(st),ht.forEach(st)},getBuffer:function(mt){return mt&&mt._buffer instanceof Je?mt._buffer:null},restore:function(){ue(Dt).forEach(function(mt){mt.buffer=he.createBuffer(),he.bindBuffer(mt.type,mt.buffer),he.bufferData(mt.type,mt.persistentData||mt.byteLength,mt.usage)})},_initBuffer:lt}}(At,it,he,function(Vr){return ar.destroyBuffer(Vr)}),rr=function o(he,be,ze,Ve){function Je(mt){this.id=Mt++,st[this.id]=this,this.buffer=mt,this.primType=4,this.type=this.vertCount=0}function Ye(mt,Ot,At,It,Se,Ze,it){var dt;if(mt.buffer.bind(),Ot?((dt=it)||ve(Ot)&&(!r(Ot)||ve(Ot.data))||(dt=be.oes_element_index_uint?5125:5123),ze._initBuffer(mt.buffer,Ot,At,dt,3)):(he.bufferData(34963,Ze,At),mt.buffer.dtype=dt||5121,mt.buffer.usage=At,mt.buffer.dimension=3,mt.buffer.byteLength=Ze),dt=it,!it){switch(mt.buffer.dtype){case 5121:case 5120:dt=5121;break;case 5123:case 5122:dt=5123;break;case 5125:case 5124:dt=5125}mt.buffer.dtype=dt}mt.type=dt,0>(Ot=Se)&&(Ot=mt.buffer.byteLength,5123===dt?Ot>>=1:5125===dt&&(Ot>>=2)),mt.vertCount=Ot,Ot=It,0>It&&(Ot=4,1===(It=mt.buffer.dimension)&&(Ot=0),2===It&&(Ot=1),3===It&&(Ot=4)),mt.primType=Ot}function lt(mt){Ve.elementsCount--,delete st[mt.id],mt.buffer.destroy(),mt.buffer=null}var st={},Mt=0,Dt={uint8:5121,uint16:5123};be.oes_element_index_uint&&(Dt.uint32=5125),Je.prototype.bind=function(){this.buffer.bind()};var ht=[];return{create:function(mt,Ot){function At(Ze){if(Ze)if("number"==typeof Ze)It(Ze),Se.primType=4,Se.vertCount=0|Ze,Se.type=5121;else{var it=null,dt=35044,Ct=-1,Ut=-1,Jt=0,qt=0;Array.isArray(Ze)||ve(Ze)||r(Ze)?it=Ze:("data"in Ze&&(it=Ze.data),"usage"in Ze&&(dt=ge[Ze.usage]),"primitive"in Ze&&(Ct=Te[Ze.primitive]),"count"in Ze&&(Ut=0|Ze.count),"type"in Ze&&(qt=Dt[Ze.type]),"length"in Ze?Jt=0|Ze.length:(Jt=Ut,5123===qt||5122===qt?Jt*=2:5125!==qt&&5124!==qt||(Jt*=4))),Ye(Se,it,dt,Ct,Ut,Jt,qt)}else It(),Se.primType=4,Se.vertCount=0,Se.type=5121;return At}var It=ze.create(null,34963,!0),Se=new Je(It._buffer);return Ve.elementsCount++,At(mt),At._reglType="elements",At._elements=Se,At.subdata=function(Ze,it){return It.subdata(Ze,it),At},At.destroy=function(){lt(Se)},At},createStream:function(mt){var Ot=ht.pop();return Ot||(Ot=new Je(ze.create(null,34963,!0,!1)._buffer)),Ye(Ot,mt,35040,-1,-1,0,0),Ot},destroyStream:function(mt){ht.push(mt)},getElements:function(mt){return"function"==typeof mt&&mt._elements instanceof Je?mt._elements:null},clear:function(){ue(st).forEach(lt)}}}(At,Ct,tr,it),ar=function P(he,be,ze,Ve,Je,Ye,lt){function st(){this.id=++ht,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var At=be.oes_vertex_array_object;this.vao=At?At.createVertexArrayOES():null,mt[this.id]=this,this.buffers=[]}var Mt=ze.maxAttributes,Dt=Array(Mt);for(ze=0;ze<Mt;++ze)Dt[ze]=new I;var ht=0,mt={},Ot={Record:I,scope:{},state:Dt,currentVAO:null,targetVAO:null,restore:be.oes_vertex_array_object?function(){be.oes_vertex_array_object&&ue(mt).forEach(function(At){At.refresh()})}:function(){},createVAO:function(At){function It(Ze){var it;Array.isArray(Ze)?(it=Ze,Se.elements&&Se.ownsElements&&Se.elements.destroy(),Se.elements=null,Se.ownsElements=!1,Se.offset=0,Se.count=0,Se.instances=-1,Se.primitive=4):(Ze.elements?(it=Ze.elements,Se.ownsElements?("function"==typeof it&&"elements"===it._reglType?Se.elements.destroy():Se.elements(it),Se.ownsElements=!1):Ye.getElements(Ze.elements)?(Se.elements=Ze.elements,Se.ownsElements=!1):(Se.elements=Ye.create(Ze.elements),Se.ownsElements=!0)):(Se.elements=null,Se.ownsElements=!1),it=Ze.attributes,Se.offset=0,Se.count=-1,Se.instances=-1,Se.primitive=4,Se.elements&&(Se.count=Se.elements._elements.vertCount,Se.primitive=Se.elements._elements.primType),"offset"in Ze&&(Se.offset=0|Ze.offset),"count"in Ze&&(Se.count=0|Ze.count),"instances"in Ze&&(Se.instances=0|Ze.instances),"primitive"in Ze&&(Se.primitive=Te[Ze.primitive])),Ze={};var dt=Se.attributes;dt.length=it.length;for(var Ct=0;Ct<it.length;++Ct){var Ut,Jt=it[Ct],qt=dt[Ct]=new I,pr=Jt.data||Jt;Array.isArray(pr)||ve(pr)||r(pr)?(Se.buffers[Ct]&&(Ut=Se.buffers[Ct],ve(pr)&&Ut._buffer.byteLength>=pr.byteLength?Ut.subdata(pr):(Ut.destroy(),Se.buffers[Ct]=null)),Se.buffers[Ct]||(Ut=Se.buffers[Ct]=Je.create(Jt,34962,!1,!0)),qt.buffer=Je.getBuffer(Ut),qt.size=0|qt.buffer.dimension,qt.normalized=!1,qt.type=qt.buffer.dtype,qt.offset=0,qt.stride=0,qt.divisor=0,qt.state=1,Ze[Ct]=1):Je.getBuffer(Jt)?(qt.buffer=Je.getBuffer(Jt),qt.size=0|qt.buffer.dimension,qt.normalized=!1,qt.type=qt.buffer.dtype,qt.offset=0,qt.stride=0,qt.divisor=0,qt.state=1):Je.getBuffer(Jt.buffer)?(qt.buffer=Je.getBuffer(Jt.buffer),qt.size=0|(+Jt.size||qt.buffer.dimension),qt.normalized=!!Jt.normalized||!1,qt.type="type"in Jt?pe[Jt.type]:qt.buffer.dtype,qt.offset=0|(Jt.offset||0),qt.stride=0|(Jt.stride||0),qt.divisor=0|(Jt.divisor||0),qt.state=1):"x"in Jt&&(qt.x=+Jt.x||0,qt.y=+Jt.y||0,qt.z=+Jt.z||0,qt.w=+Jt.w||0,qt.state=2)}for(Ut=0;Ut<Se.buffers.length;++Ut)!Ze[Ut]&&Se.buffers[Ut]&&(Se.buffers[Ut].destroy(),Se.buffers[Ut]=null);return Se.refresh(),It}var Se=new st;return Ve.vaoCount+=1,It.destroy=function(){for(var Ze=0;Ze<Se.buffers.length;++Ze)Se.buffers[Ze]&&Se.buffers[Ze].destroy();Se.buffers.length=0,Se.ownsElements&&(Se.elements.destroy(),Se.elements=null,Se.ownsElements=!1),Se.destroy()},It._vao=Se,It._reglType="vao",It(At)},getVAO:function(At){return"function"==typeof At&&At._vao?At._vao:null},destroyBuffer:function(At){for(var It=0;It<Dt.length;++It){var Se=Dt[It];Se.buffer===At&&(he.disableVertexAttribArray(It),Se.buffer=null)}},setVAO:be.oes_vertex_array_object?function(At){At!==Ot.currentVAO&&(be.oes_vertex_array_object.bindVertexArrayOES(At?At.vao:null),Ot.currentVAO=At)}:function(At){if(At!==Ot.currentVAO){if(At)At.bindAttrs();else{for(var It=be.angle_instanced_arrays,Se=0;Se<Dt.length;++Se){var Ze=Dt[Se];Ze.buffer?(he.enableVertexAttribArray(Se),Ze.buffer.bind(),he.vertexAttribPointer(Se,Ze.size,Ze.type,Ze.normalized,Ze.stride,Ze.offfset),It&&Ze.divisor&&It.vertexAttribDivisorANGLE(Se,Ze.divisor)):(he.disableVertexAttribArray(Se),he.vertexAttrib4f(Se,Ze.x,Ze.y,Ze.z,Ze.w))}he.bindBuffer(34963,lt.elements?lt.elements.buffer.buffer:null)}Ot.currentVAO=At}},clear:be.oes_vertex_array_object?function(){ue(mt).forEach(function(At){At.destroy()})}:function(){}};return st.prototype.bindAttrs=function(){for(var At=be.angle_instanced_arrays,It=this.attributes,Se=0;Se<It.length;++Se){var Ze=It[Se];Ze.buffer?(he.enableVertexAttribArray(Se),he.bindBuffer(34962,Ze.buffer.buffer),he.vertexAttribPointer(Se,Ze.size,Ze.type,Ze.normalized,Ze.stride,Ze.offset),At&&Ze.divisor&&At.vertexAttribDivisorANGLE(Se,Ze.divisor)):(he.disableVertexAttribArray(Se),he.vertexAttrib4f(Se,Ze.x,Ze.y,Ze.z,Ze.w))}for(At=It.length;At<Mt;++At)he.disableVertexAttribArray(At);(At=Ye.getElements(this.elements))?he.bindBuffer(34963,At.buffer.buffer):he.bindBuffer(34963,null)},st.prototype.refresh=function(){var At=be.oes_vertex_array_object;At&&(At.bindVertexArrayOES(this.vao),this.bindAttrs(),Ot.currentVAO=null,At.bindVertexArrayOES(null))},st.prototype.destroy=function(){if(this.vao){var At=be.oes_vertex_array_object;this===Ot.currentVAO&&(Ot.currentVAO=null,At.bindVertexArrayOES(null)),At.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),mt[this.id]&&(delete mt[this.id],--Ve.vaoCount)},Ot}(At,Ct,mr,it,tr,rr,qt),dr=function S(he,be,ze,Ve){function Je(It,Se,Ze,it){this.name=It,this.id=Se,this.location=Ze,this.info=it}function Ye(It,Se){for(var Ze=0;Ze<It.length;++Ze)if(It[Ze].id===Se.id)return void(It[Ze].location=Se.location);It.push(Se)}function lt(It,Se,Ze){if(!(dt=(Ze=35632===It?Dt:ht)[Se])){var it=be.str(Se),dt=he.createShader(It);he.shaderSource(dt,it),he.compileShader(dt),Ze[Se]=dt}return dt}function st(It,Se){this.id=At++,this.fragId=It,this.vertId=Se,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ve.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Mt(It,Se,Ze){var it;it=lt(35632,It.fragId);var dt=lt(35633,It.vertId);if(Se=It.program=he.createProgram(),he.attachShader(Se,it),he.attachShader(Se,dt),Ze)for(it=0;it<Ze.length;++it)he.bindAttribLocation(Se,(dt=Ze[it])[0],dt[1]);he.linkProgram(Se),dt=he.getProgramParameter(Se,35718),Ve.profile&&(It.stats.uniformsCount=dt);var Ct=It.uniforms;for(it=0;it<dt;++it)if(Ze=he.getActiveUniform(Se,it))if(1<Ze.size)for(var Ut=0;Ut<Ze.size;++Ut){var Jt=Ze.name.replace("[0]","["+Ut+"]");Ye(Ct,new Je(Jt,be.id(Jt),he.getUniformLocation(Se,Jt),Ze))}else Ye(Ct,new Je(Ze.name,be.id(Ze.name),he.getUniformLocation(Se,Ze.name),Ze));for(dt=he.getProgramParameter(Se,35721),Ve.profile&&(It.stats.attributesCount=dt),It=It.attributes,it=0;it<dt;++it)(Ze=he.getActiveAttrib(Se,it))&&Ye(It,new Je(Ze.name,be.id(Ze.name),he.getAttribLocation(Se,Ze.name),Ze))}var Dt={},ht={},mt={},Ot=[],At=0;return Ve.profile&&(ze.getMaxUniformsCount=function(){var It=0;return Ot.forEach(function(Se){Se.stats.uniformsCount>It&&(It=Se.stats.uniformsCount)}),It},ze.getMaxAttributesCount=function(){var It=0;return Ot.forEach(function(Se){Se.stats.attributesCount>It&&(It=Se.stats.attributesCount)}),It}),{clear:function(){var It=he.deleteShader.bind(he);ue(Dt).forEach(It),Dt={},ue(ht).forEach(It),ht={},Ot.forEach(function(Se){he.deleteProgram(Se.program)}),Ot.length=0,mt={},ze.shaderCount=0},program:function(It,Se,Ze,it){var dt=mt[Se];dt||(dt=mt[Se]={});var Ct=dt[It];if(Ct&&(Ct.refCount++,!it))return Ct;var Ut=new st(Se,It);return ze.shaderCount++,Mt(Ut,Ze,it),Ct||(dt[It]=Ut),Ot.push(Ut),N(Ut,{destroy:function(){if(Ut.refCount--,0>=Ut.refCount){he.deleteProgram(Ut.program);var Jt=Ot.indexOf(Ut);Ot.splice(Jt,1),ze.shaderCount--}0>=dt[Ut.vertId].refCount&&(he.deleteShader(ht[Ut.vertId]),delete ht[Ut.vertId],delete mt[Ut.fragId][Ut.vertId]),Object.keys(mt[Ut.fragId]).length||(he.deleteShader(Dt[Ut.fragId]),delete Dt[Ut.fragId],delete mt[Ut.fragId])}})},restore:function(){Dt={},ht={};for(var It=0;It<Ot.length;++It)Mt(Ot[It],null,Ot[It].attributes.map(function(Se){return[Se.location,Se.name]}))},shader:lt,frag:-1,vert:-1}}(At,Ze,it,he),xr=function C(he,be,ze,Ve,Je,Ye,lt){function st(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Mt(or,br){or.internalformat=br.internalformat,or.format=br.format,or.type=br.type,or.compressed=br.compressed,or.premultiplyAlpha=br.premultiplyAlpha,or.flipY=br.flipY,or.unpackAlignment=br.unpackAlignment,or.colorSpace=br.colorSpace,or.width=br.width,or.height=br.height,or.channels=br.channels}function Dt(or,br){if("object"==typeof br&&br){"premultiplyAlpha"in br&&(or.premultiplyAlpha=br.premultiplyAlpha),"flipY"in br&&(or.flipY=br.flipY),"alignment"in br&&(or.unpackAlignment=br.alignment),"colorSpace"in br&&(or.colorSpace=Hr[br.colorSpace]),"type"in br&&(or.type=Xr[br.type]);var Rt=or.width,fr=or.height,gr=or.channels,jr=!1;"shape"in br?(Rt=br.shape[0],fr=br.shape[1],3===br.shape.length&&(gr=br.shape[2],jr=!0)):("radius"in br&&(Rt=fr=br.radius),"width"in br&&(Rt=br.width),"height"in br&&(fr=br.height),"channels"in br&&(gr=br.channels,jr=!0)),or.width=0|Rt,or.height=0|fr,or.channels=0|gr,Rt=!1,"format"in br&&(fr=or.internalformat=cn[Rt=br.format],or.format=xn[fr],Rt in Xr&&!("type"in br)&&(or.type=Xr[Rt]),Rt in an&&(or.compressed=!0),Rt=!0),!jr&&Rt?or.channels=Oe[or.format]:jr&&!Rt&&or.channels!==Ie[or.format]&&(or.format=or.internalformat=Ie[or.channels])}}function ht(or){he.pixelStorei(37440,or.flipY),he.pixelStorei(37441,or.premultiplyAlpha),he.pixelStorei(37443,or.colorSpace),he.pixelStorei(3317,or.unpackAlignment)}function mt(){st.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ot(or,br){var Rt=null;if(b(br)?Rt=br:br&&(Dt(or,br),"x"in br&&(or.xOffset=0|br.x),"y"in br&&(or.yOffset=0|br.y),b(br.data)&&(Rt=br.data)),br.copy){var fr=Je.viewportWidth,gr=Je.viewportHeight;or.width=or.width||fr-or.xOffset,or.height=or.height||gr-or.yOffset,or.needsCopy=!0}else if(Rt){if(ve(Rt))or.channels=or.channels||4,or.data=Rt,"type"in br||5121!==or.type||(or.type=0|Me[Object.prototype.toString.call(Rt)]);else if(y(Rt)){switch(or.channels=or.channels||4,gr=(fr=Rt).length,or.type){case 5121:case 5123:case 5125:case 5126:(gr=le.allocType(or.type,gr)).set(fr),or.data=gr;break;case 36193:or.data=p(fr)}or.alignment=1,or.needsFree=!0}else if(r(Rt)){fr=Rt.data,Array.isArray(fr)||5121!==or.type||(or.type=0|Me[Object.prototype.toString.call(fr)]);var jr,Br,Fr,Er,_r=Rt.stride;3===(gr=Rt.shape).length?(Fr=gr[2],Er=_r[2]):Er=Fr=1,jr=gr[0],Br=gr[1],gr=_r[0],_r=_r[1],or.alignment=1,or.width=jr,or.height=Br,or.channels=Fr,or.format=or.internalformat=Ie[Fr],or.needsFree=!0,jr=Er,Rt=Rt.offset;for(var kr=le.allocType(36193===or.type?5126:or.type,(Fr=or.width)*(Er=or.height)*(Br=or.channels)),Mr=0,Pr=0;Pr<Er;++Pr)for(var Wr=0;Wr<Fr;++Wr)for(var Zr=0;Zr<Br;++Zr)kr[Mr++]=fr[gr*Wr+_r*Pr+jr*Zr+Rt];w(or,kr)}else if(_(Rt)===Xe||_(Rt)===Fe||_(Rt)===Pe)or.element=_(Rt)===Xe||_(Rt)===Fe?Rt:Rt.canvas,or.width=or.element.width,or.height=or.element.height,or.channels=4;else if(_(Rt)===Re)or.element=Rt,or.width=Rt.width,or.height=Rt.height,or.channels=4;else if(_(Rt)===qe)or.element=Rt,or.width=Rt.naturalWidth,or.height=Rt.naturalHeight,or.channels=4;else if(_(Rt)===Qe)or.element=Rt,or.width=Rt.videoWidth,or.height=Rt.videoHeight,or.channels=4;else if(u(Rt)){for(fr=or.width||Rt[0].length,gr=or.height||Rt.length,_r=or.channels,_r=c(Rt[0][0])?_r||Rt[0][0].length:_r||1,jr=ye.shape(Rt),Fr=1,Er=0;Er<jr.length;++Er)Fr*=jr[Er];Fr=le.allocType(36193===or.type?5126:or.type,Fr),ye.flatten(Rt,jr,"",Fr),w(or,Fr),or.alignment=1,or.width=fr,or.height=gr,or.channels=_r,or.format=or.internalformat=Ie[_r],or.needsFree=!0}}else or.width=or.width||1,or.height=or.height||1,or.channels=or.channels||4}function At(or,br,Rt,fr,gr){var jr=or.element,Br=or.data,Fr=or.internalformat,Er=or.format,_r=or.type,kr=or.width,Mr=or.height;ht(or),jr?he.texSubImage2D(br,gr,Rt,fr,Er,_r,jr):or.compressed?he.compressedTexSubImage2D(br,gr,Rt,fr,Fr,kr,Mr,Br):or.needsCopy?(Ve(),he.copyTexSubImage2D(br,gr,Rt,fr,or.xOffset,or.yOffset,kr,Mr)):he.texSubImage2D(br,gr,Rt,fr,kr,Mr,Er,_r,Br)}function It(){return nn.pop()||new mt}function Se(or){or.needsFree&&le.freeType(or.data),mt.call(or),nn.push(or)}function Ze(){st.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function it(or,br,Rt){var fr=or.images[0]=It();or.mipmask=1,fr.width=or.width=br,fr.height=or.height=Rt,fr.channels=or.channels=4}function dt(or,br){var Rt=null;if(b(br))Mt(Rt=or.images[0]=It(),or),Ot(Rt,br),or.mipmask=1;else if(Dt(or,br),Array.isArray(br.mipmap))for(var fr=br.mipmap,gr=0;gr<fr.length;++gr)Mt(Rt=or.images[gr]=It(),or),Rt.width>>=gr,Rt.height>>=gr,Ot(Rt,fr[gr]),or.mipmask|=1<<gr;else Mt(Rt=or.images[0]=It(),or),Ot(Rt,br),or.mipmask=1;Mt(or,or.images[0])}function Ct(or,br){for(var Rt=or.images,fr=0;fr<Rt.length&&Rt[fr];++fr){var gr=Rt[fr],jr=br,Br=fr,Fr=gr.element,Er=gr.data,_r=gr.internalformat,kr=gr.format,Mr=gr.type,Pr=gr.width,Wr=gr.height;ht(gr),Fr?he.texImage2D(jr,Br,kr,kr,Mr,Fr):gr.compressed?he.compressedTexImage2D(jr,Br,_r,Pr,Wr,0,Er):gr.needsCopy?(Ve(),he.copyTexImage2D(jr,Br,kr,gr.xOffset,gr.yOffset,Pr,Wr,0)):he.texImage2D(jr,Br,kr,Pr,Wr,0,kr,Mr,Er||null)}}function Ut(){var or=fn.pop()||new Ze;st.call(or);for(var br=or.mipmask=0;16>br;++br)or.images[br]=null;return or}function Jt(or){for(var br=or.images,Rt=0;Rt<br.length;++Rt)br[Rt]&&Se(br[Rt]),br[Rt]=null;fn.push(or)}function qt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function pr(or,br){"min"in br&&(or.minFilter=zr[br.min],0<=De.indexOf(or.minFilter)&&!("faces"in br)&&(or.genMipmaps=!0)),"mag"in br&&(or.magFilter=Lr[br.mag]);var Rt=or.wrapS,fr=or.wrapT;if("wrap"in br){var gr=br.wrap;"string"==typeof gr?Rt=fr=xr[gr]:Array.isArray(gr)&&(Rt=xr[gr[0]],fr=xr[gr[1]])}else"wrapS"in br&&(Rt=xr[br.wrapS]),"wrapT"in br&&(fr=xr[br.wrapT]);if(or.wrapS=Rt,or.wrapT=fr,"anisotropic"in br&&(or.anisotropic=br.anisotropic),"mipmap"in br){switch(Rt=!1,typeof br.mipmap){case"string":or.mipmapHint=dr[br.mipmap],Rt=or.genMipmaps=!0;break;case"boolean":Rt=or.genMipmaps=br.mipmap;break;case"object":or.genMipmaps=!1,Rt=!0}!Rt||"min"in br||(or.minFilter=9984)}}function Sr(or,br){he.texParameteri(br,10241,or.minFilter),he.texParameteri(br,10240,or.magFilter),he.texParameteri(br,10242,or.wrapS),he.texParameteri(br,10243,or.wrapT),be.ext_texture_filter_anisotropic&&he.texParameteri(br,34046,or.anisotropic),or.genMipmaps&&(he.hint(33170,or.mipmapHint),he.generateMipmap(br))}function mr(or){st.call(this),this.mipmask=0,this.internalformat=6408,this.id=Xn++,this.refCount=1,this.target=or,this.texture=he.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new qt,lt.profile&&(this.stats={size:0})}function tr(or){he.activeTexture(33984),he.bindTexture(or.target,or.texture)}function rr(){var or=si[0];or?he.bindTexture(or.target,or.texture):he.bindTexture(3553,null)}function ar(or){var br=or.texture,Rt=or.unit,fr=or.target;0<=Rt&&(he.activeTexture(33984+Rt),he.bindTexture(fr,null),si[Rt]=null),he.deleteTexture(br),or.texture=null,or.params=null,or.pixels=null,or.refCount=0,delete Mn[or.id],Ye.textureCount--}var dr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},xr={repeat:10497,clamp:33071,mirror:33648},Lr={nearest:9728,linear:9729},zr=N({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Lr),Hr={none:0,browser:37444},Xr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},cn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},an={};be.ext_srgb&&(cn.srgb=35904,cn.srgba=35906),be.oes_texture_float&&(Xr.float32=Xr.float=5126),be.oes_texture_half_float&&(Xr.float16=Xr["half float"]=36193),be.webgl_depth_texture&&(N(cn,{depth:6402,"depth stencil":34041}),N(Xr,{uint16:5123,uint32:5125,"depth stencil":34042})),be.webgl_compressed_texture_s3tc&&N(an,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),be.webgl_compressed_texture_atc&&N(an,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),be.webgl_compressed_texture_pvrtc&&N(an,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),be.webgl_compressed_texture_etc1&&(an["rgb etc1"]=36196);var Nn=Array.prototype.slice.call(he.getParameter(34467));Object.keys(an).forEach(function(or){var br=an[or];0<=Nn.indexOf(br)&&(cn[or]=br)});var on=Object.keys(cn);ze.textureFormats=on;var wn=[];Object.keys(cn).forEach(function(or){wn[cn[or]]=or});var An=[];Object.keys(Xr).forEach(function(or){An[Xr[or]]=or});var ii=[];Object.keys(Lr).forEach(function(or){ii[Lr[or]]=or});var Vr=[];Object.keys(zr).forEach(function(or){Vr[zr[or]]=or});var sn=[];Object.keys(xr).forEach(function(or){sn[xr[or]]=or});var xn=on.reduce(function(or,br){var Rt=cn[br];return or[Rt]=6409===Rt||6406===Rt||6409===Rt||6410===Rt||6402===Rt||34041===Rt||be.ext_srgb&&(35904===Rt||35906===Rt)?Rt:32855===Rt||0<=br.indexOf("rgba")?6408:6407,or},{}),nn=[],fn=[],Xn=0,Mn={},On=ze.maxTextureUnits,si=Array(On).map(function(){return null});return N(mr.prototype,{bind:function(){this.bindCount+=1;var or=this.unit;if(0>or){for(var br=0;br<On;++br){var Rt=si[br];if(Rt){if(0<Rt.bindCount)continue;Rt.unit=-1}si[br]=this,or=br;break}lt.profile&&Ye.maxTextureUnits<or+1&&(Ye.maxTextureUnits=or+1),this.unit=or,he.activeTexture(33984+or),he.bindTexture(this.target,this.texture)}return or},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ar(this)}}),lt.profile&&(Ye.getTotalTextureSize=function(){var or=0;return Object.keys(Mn).forEach(function(br){or+=Mn[br].stats.size}),or}),{create2D:function(or,br){function Rt(gr,jr){var Br=fr.texInfo;qt.call(Br);var Fr=Ut();return"number"==typeof gr?it(Fr,0|gr,"number"==typeof jr?0|jr:0|gr):gr?(pr(Br,gr),dt(Fr,gr)):it(Fr,1,1),Br.genMipmaps&&(Fr.mipmask=(Fr.width<<1)-1),fr.mipmask=Fr.mipmask,Mt(fr,Fr),fr.internalformat=Fr.internalformat,Rt.width=Fr.width,Rt.height=Fr.height,tr(fr),Ct(Fr,3553),Sr(Br,3553),rr(),Jt(Fr),lt.profile&&(fr.stats.size=T(fr.internalformat,fr.type,Fr.width,Fr.height,Br.genMipmaps,!1)),Rt.format=wn[fr.internalformat],Rt.type=An[fr.type],Rt.mag=ii[Br.magFilter],Rt.min=Vr[Br.minFilter],Rt.wrapS=sn[Br.wrapS],Rt.wrapT=sn[Br.wrapT],Rt}var fr=new mr(3553);return Mn[fr.id]=fr,Ye.textureCount++,Rt(or,br),Rt.subimage=function(gr,jr,Br,Fr){jr|=0,Br|=0,Fr|=0;var Er=It();return Mt(Er,fr),Er.width=0,Er.height=0,Ot(Er,gr),Er.width=Er.width||(fr.width>>Fr)-jr,Er.height=Er.height||(fr.height>>Fr)-Br,tr(fr),At(Er,3553,jr,Br,Fr),rr(),Se(Er),Rt},Rt.resize=function(gr,jr){var Br=0|gr,Fr=0|jr||Br;if(Br===fr.width&&Fr===fr.height)return Rt;Rt.width=fr.width=Br,Rt.height=fr.height=Fr,tr(fr);for(var Er=0;fr.mipmask>>Er;++Er){var _r=Br>>Er,kr=Fr>>Er;if(!_r||!kr)break;he.texImage2D(3553,Er,fr.format,_r,kr,0,fr.format,fr.type,null)}return rr(),lt.profile&&(fr.stats.size=T(fr.internalformat,fr.type,Br,Fr,!1,!1)),Rt},Rt._reglType="texture2d",Rt._texture=fr,lt.profile&&(Rt.stats=fr.stats),Rt.destroy=function(){fr.decRef()},Rt},createCube:function(or,br,Rt,fr,gr,jr){function Br(_r,kr,Mr,Pr,Wr,Zr){var rn,ln=Fr.texInfo;for(qt.call(ln),rn=0;6>rn;++rn)Er[rn]=Ut();if("number"!=typeof _r&&_r){if("object"==typeof _r)if(kr)dt(Er[0],_r),dt(Er[1],kr),dt(Er[2],Mr),dt(Er[3],Pr),dt(Er[4],Wr),dt(Er[5],Zr);else if(pr(ln,_r),Dt(Fr,_r),"faces"in _r)for(_r=_r.faces,rn=0;6>rn;++rn)Mt(Er[rn],Fr),dt(Er[rn],_r[rn]);else for(rn=0;6>rn;++rn)dt(Er[rn],_r)}else for(_r=0|_r||1,rn=0;6>rn;++rn)it(Er[rn],_r,_r);for(Mt(Fr,Er[0]),Fr.mipmask=ln.genMipmaps?(Er[0].width<<1)-1:Er[0].mipmask,Fr.internalformat=Er[0].internalformat,Br.width=Er[0].width,Br.height=Er[0].height,tr(Fr),rn=0;6>rn;++rn)Ct(Er[rn],34069+rn);for(Sr(ln,34067),rr(),lt.profile&&(Fr.stats.size=T(Fr.internalformat,Fr.type,Br.width,Br.height,ln.genMipmaps,!0)),Br.format=wn[Fr.internalformat],Br.type=An[Fr.type],Br.mag=ii[ln.magFilter],Br.min=Vr[ln.minFilter],Br.wrapS=sn[ln.wrapS],Br.wrapT=sn[ln.wrapT],rn=0;6>rn;++rn)Jt(Er[rn]);return Br}var Fr=new mr(34067);Mn[Fr.id]=Fr,Ye.cubeCount++;var Er=Array(6);return Br(or,br,Rt,fr,gr,jr),Br.subimage=function(_r,kr,Mr,Pr,Wr){Mr|=0,Pr|=0,Wr|=0;var Zr=It();return Mt(Zr,Fr),Zr.width=0,Zr.height=0,Ot(Zr,kr),Zr.width=Zr.width||(Fr.width>>Wr)-Mr,Zr.height=Zr.height||(Fr.height>>Wr)-Pr,tr(Fr),At(Zr,34069+_r,Mr,Pr,Wr),rr(),Se(Zr),Br},Br.resize=function(_r){if((_r|=0)!==Fr.width){Br.width=Fr.width=_r,Br.height=Fr.height=_r,tr(Fr);for(var kr=0;6>kr;++kr)for(var Mr=0;Fr.mipmask>>Mr;++Mr)he.texImage2D(34069+kr,Mr,Fr.format,_r>>Mr,_r>>Mr,0,Fr.format,Fr.type,null);return rr(),lt.profile&&(Fr.stats.size=T(Fr.internalformat,Fr.type,Br.width,Br.height,!1,!0)),Br}},Br._reglType="textureCube",Br._texture=Fr,lt.profile&&(Br.stats=Fr.stats),Br.destroy=function(){Fr.decRef()},Br},clear:function(){for(var or=0;or<On;++or)he.activeTexture(33984+or),he.bindTexture(3553,null),si[or]=null;ue(Mn).forEach(ar),Ye.cubeCount=0,Ye.textureCount=0},getTexture:function(or){return null},restore:function(){for(var or=0;or<On;++or){var br=si[or];br&&(br.bindCount=0,br.unit=-1,si[or]=null)}ue(Mn).forEach(function(Rt){Rt.texture=he.createTexture(),he.bindTexture(Rt.target,Rt.texture);for(var fr=0;32>fr;++fr)if(0!=(Rt.mipmask&1<<fr))if(3553===Rt.target)he.texImage2D(3553,fr,Rt.internalformat,Rt.width>>fr,Rt.height>>fr,0,Rt.internalformat,Rt.type,null);else for(var gr=0;6>gr;++gr)he.texImage2D(34069+gr,fr,Rt.internalformat,Rt.width>>fr,Rt.height>>fr,0,Rt.internalformat,Rt.type,null);Sr(Rt.texInfo,Rt.target)})},refresh:function(){for(var or=0;or<On;++or){var br=si[or];br&&(br.bindCount=0,br.unit=-1,si[or]=null),he.activeTexture(33984+or),he.bindTexture(3553,null),he.bindTexture(34067,null)}}}}(At,Ct,mr,function(){Hr.procs.poll()},Sr,it,he),Lr=function(he,be,ze,Ve,Je){function Ye(mt){this.id=Dt++,this.refCount=1,this.renderbuffer=mt,this.format=32854,this.height=this.width=0,Je.profile&&(this.stats={size:0})}function lt(mt){var Ot=mt.renderbuffer;he.bindRenderbuffer(36161,null),he.deleteRenderbuffer(Ot),mt.renderbuffer=null,mt.refCount=0,delete ht[mt.id],Ve.renderbufferCount--}var st={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};be.ext_srgb&&(st.srgba=35907),be.ext_color_buffer_half_float&&(st.rgba16f=34842,st.rgb16f=34843),be.webgl_color_buffer_float&&(st.rgba32f=34836);var Mt=[];Object.keys(st).forEach(function(mt){Mt[st[mt]]=mt});var Dt=0,ht={};return Ye.prototype.decRef=function(){0>=--this.refCount&&lt(this)},Je.profile&&(Ve.getTotalRenderbufferSize=function(){var mt=0;return Object.keys(ht).forEach(function(Ot){mt+=ht[Ot].stats.size}),mt}),{create:function(mt,Ot){function At(Se,Ze){var it=0,dt=0,Ct=32854;if("object"==typeof Se&&Se?("shape"in Se?(it=0|(dt=Se.shape)[0],dt=0|dt[1]):("radius"in Se&&(it=dt=0|Se.radius),"width"in Se&&(it=0|Se.width),"height"in Se&&(dt=0|Se.height)),"format"in Se&&(Ct=st[Se.format])):"number"==typeof Se?(it=0|Se,dt="number"==typeof Ze?0|Ze:it):Se||(it=dt=1),it!==It.width||dt!==It.height||Ct!==It.format)return At.width=It.width=it,At.height=It.height=dt,It.format=Ct,he.bindRenderbuffer(36161,It.renderbuffer),he.renderbufferStorage(36161,Ct,it,dt),Je.profile&&(It.stats.size=_t[It.format]*It.width*It.height),At.format=Mt[It.format],At}var It=new Ye(he.createRenderbuffer());return ht[It.id]=It,Ve.renderbufferCount++,At(mt,Ot),At.resize=function(Se,Ze){var it=0|Se,dt=0|Ze||it;return it===It.width&&dt===It.height||(At.width=It.width=it,At.height=It.height=dt,he.bindRenderbuffer(36161,It.renderbuffer),he.renderbufferStorage(36161,It.format,it,dt),Je.profile&&(It.stats.size=_t[It.format]*It.width*It.height)),At},At._reglType="renderbuffer",At._renderbuffer=It,Je.profile&&(At.stats=It.stats),At.destroy=function(){It.decRef()},At},clear:function(){ue(ht).forEach(lt)},restore:function(){ue(ht).forEach(function(mt){mt.renderbuffer=he.createRenderbuffer(),he.bindRenderbuffer(36161,mt.renderbuffer),he.renderbufferStorage(36161,mt.format,mt.width,mt.height)}),he.bindRenderbuffer(36161,null)}}}(At,Ct,0,it,he),zr=function M(he,be,ze,Ve,Je,Ye){function lt(mr,tr,rr){this.target=mr,this.texture=tr,this.renderbuffer=rr;var ar=mr=0;tr?(mr=tr.width,ar=tr.height):rr&&(mr=rr.width,ar=rr.height),this.width=mr,this.height=ar}function st(mr){mr&&(mr.texture&&mr.texture._texture.decRef(),mr.renderbuffer&&mr.renderbuffer._renderbuffer.decRef())}function Mt(mr,tr,rr){mr&&(mr.texture?mr.texture._texture.refCount+=1:mr.renderbuffer._renderbuffer.refCount+=1)}function Dt(mr,tr){tr&&(tr.texture?he.framebufferTexture2D(36160,mr,tr.target,tr.texture._texture.texture,0):he.framebufferRenderbuffer(36160,mr,36161,tr.renderbuffer._renderbuffer.renderbuffer))}function ht(mr){var tr=3553,rr=null,ar=null,dr=mr;return"object"==typeof mr&&(dr=mr.data,"target"in mr&&(tr=0|mr.target)),"texture2d"===(mr=dr._reglType)||"textureCube"===mr?rr=dr:"renderbuffer"===mr&&(ar=dr,tr=36161),new lt(tr,rr,ar)}function mt(mr,tr,rr,ar,dr){return rr?((mr=Ve.create2D({width:mr,height:tr,format:ar,type:dr}))._texture.refCount=0,new lt(3553,mr,null)):((mr=Je.create({width:mr,height:tr,format:ar}))._renderbuffer.refCount=0,new lt(36161,null,mr))}function Ot(mr){return mr&&(mr.texture||mr.renderbuffer)}function At(mr,tr,rr){mr&&(mr.texture?mr.texture.resize(tr,rr):mr.renderbuffer&&mr.renderbuffer.resize(tr,rr),mr.width=tr,mr.height=rr)}function It(){this.id=pr++,Sr[this.id]=this,this.framebuffer=he.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Se(mr){mr.colorAttachments.forEach(st),st(mr.depthAttachment),st(mr.stencilAttachment),st(mr.depthStencilAttachment)}function Ze(mr){he.deleteFramebuffer(mr.framebuffer),mr.framebuffer=null,Ye.framebufferCount--,delete Sr[mr.id]}function it(mr){var tr;he.bindFramebuffer(36160,mr.framebuffer);var rr=mr.colorAttachments;for(tr=0;tr<rr.length;++tr)Dt(36064+tr,rr[tr]);for(tr=rr.length;tr<ze.maxColorAttachments;++tr)he.framebufferTexture2D(36160,36064+tr,3553,null,0);he.framebufferTexture2D(36160,33306,3553,null,0),he.framebufferTexture2D(36160,36096,3553,null,0),he.framebufferTexture2D(36160,36128,3553,null,0),Dt(36096,mr.depthAttachment),Dt(36128,mr.stencilAttachment),Dt(33306,mr.depthStencilAttachment),he.checkFramebufferStatus(36160),he.isContextLost(),he.bindFramebuffer(36160,Ct.next?Ct.next.framebuffer:null),Ct.cur=Ct.next,he.getError()}function dt(mr,tr){function rr(dr,xr){var Lr,zr=0,Hr=0,Xr=!0,cn=!0;Lr=null;var an=!0,Nn="rgba",on="uint8",wn=1,An=null,ii=null,Vr=null,sn=!1;"number"==typeof dr?(zr=0|dr,Hr=0|xr||zr):dr?("shape"in dr?(zr=(Hr=dr.shape)[0],Hr=Hr[1]):("radius"in dr&&(zr=Hr=dr.radius),"width"in dr&&(zr=dr.width),"height"in dr&&(Hr=dr.height)),("color"in dr||"colors"in dr)&&(Lr=dr.color||dr.colors,Array.isArray(Lr)),Lr||("colorCount"in dr&&(wn=0|dr.colorCount),"colorTexture"in dr&&(an=!!dr.colorTexture,Nn="rgba4"),"colorType"in dr&&(on=dr.colorType,!an)&&("half float"===on||"float16"===on?Nn="rgba16f":"float"!==on&&"float32"!==on||(Nn="rgba32f")),"colorFormat"in dr&&(0<=Ut.indexOf(Nn=dr.colorFormat)?an=!0:0<=Jt.indexOf(Nn)&&(an=!1))),("depthTexture"in dr||"depthStencilTexture"in dr)&&(sn=!(!dr.depthTexture&&!dr.depthStencilTexture)),"depth"in dr&&("boolean"==typeof dr.depth?Xr=dr.depth:(An=dr.depth,cn=!1)),"stencil"in dr&&("boolean"==typeof dr.stencil?cn=dr.stencil:(ii=dr.stencil,Xr=!1)),"depthStencil"in dr&&("boolean"==typeof dr.depthStencil?Xr=cn=dr.depthStencil:(Vr=dr.depthStencil,cn=Xr=!1))):zr=Hr=1;var xn=null,nn=null,fn=null,Xn=null;if(Array.isArray(Lr))xn=Lr.map(ht);else if(Lr)xn=[ht(Lr)];else for(xn=Array(wn),Lr=0;Lr<wn;++Lr)xn[Lr]=mt(zr,Hr,an,Nn,on);for(zr=zr||xn[0].width,Hr=Hr||xn[0].height,An?nn=ht(An):Xr&&!cn&&(nn=mt(zr,Hr,sn,"depth","uint32")),ii?fn=ht(ii):cn&&!Xr&&(fn=mt(zr,Hr,!1,"stencil","uint8")),Vr?Xn=ht(Vr):!An&&!ii&&cn&&Xr&&(Xn=mt(zr,Hr,sn,"depth stencil","depth stencil")),Xr=null,Lr=0;Lr<xn.length;++Lr)Mt(xn[Lr]),xn[Lr]&&xn[Lr].texture&&(cn=Ke[xn[Lr].texture._texture.format]*xt[xn[Lr].texture._texture.type],null===Xr&&(Xr=cn));return Mt(nn),Mt(fn),Mt(Xn),Se(ar),ar.width=zr,ar.height=Hr,ar.colorAttachments=xn,ar.depthAttachment=nn,ar.stencilAttachment=fn,ar.depthStencilAttachment=Xn,rr.color=xn.map(Ot),rr.depth=Ot(nn),rr.stencil=Ot(fn),rr.depthStencil=Ot(Xn),rr.width=ar.width,rr.height=ar.height,it(ar),rr}var ar=new It;return Ye.framebufferCount++,rr(mr,tr),N(rr,{resize:function(dr,xr){var Lr=Math.max(0|dr,1),zr=Math.max(0|xr||Lr,1);if(Lr===ar.width&&zr===ar.height)return rr;for(var Hr=ar.colorAttachments,Xr=0;Xr<Hr.length;++Xr)At(Hr[Xr],Lr,zr);return At(ar.depthAttachment,Lr,zr),At(ar.stencilAttachment,Lr,zr),At(ar.depthStencilAttachment,Lr,zr),ar.width=rr.width=Lr,ar.height=rr.height=zr,it(ar),rr},_reglType:"framebuffer",_framebuffer:ar,destroy:function(){Ze(ar),Se(ar)},use:function(dr){Ct.setFBO({framebuffer:rr},dr)}})}var Ct={cur:null,next:null,dirty:!1,setFBO:null},Ut=["rgba"],Jt=["rgba4","rgb565","rgb5 a1"];be.ext_srgb&&Jt.push("srgba"),be.ext_color_buffer_half_float&&Jt.push("rgba16f","rgb16f"),be.webgl_color_buffer_float&&Jt.push("rgba32f");var qt=["uint8"];be.oes_texture_half_float&&qt.push("half float","float16"),be.oes_texture_float&&qt.push("float","float32");var pr=0,Sr={};return N(Ct,{getFramebuffer:function(mr){return"function"==typeof mr&&"framebuffer"===mr._reglType&&(mr=mr._framebuffer)instanceof It?mr:null},create:dt,createCube:function(mr){function tr(ar){var dr,xr={color:null},Lr=0,zr=null;dr="rgba";var Hr="uint8",Xr=1;if("number"==typeof ar?Lr=0|ar:ar?("shape"in ar?Lr=ar.shape[0]:("radius"in ar&&(Lr=0|ar.radius),"width"in ar?Lr=0|ar.width:"height"in ar&&(Lr=0|ar.height)),("color"in ar||"colors"in ar)&&(zr=ar.color||ar.colors,Array.isArray(zr)),zr||("colorCount"in ar&&(Xr=0|ar.colorCount),"colorType"in ar&&(Hr=ar.colorType),"colorFormat"in ar&&(dr=ar.colorFormat)),"depth"in ar&&(xr.depth=ar.depth),"stencil"in ar&&(xr.stencil=ar.stencil),"depthStencil"in ar&&(xr.depthStencil=ar.depthStencil)):Lr=1,zr)if(Array.isArray(zr))for(ar=[],dr=0;dr<zr.length;++dr)ar[dr]=zr[dr];else ar=[zr];else for(ar=Array(Xr),zr={radius:Lr,format:dr,type:Hr},dr=0;dr<Xr;++dr)ar[dr]=Ve.createCube(zr);for(xr.color=Array(ar.length),dr=0;dr<ar.length;++dr)Xr=ar[dr],Lr=Lr||Xr.width,xr.color[dr]={target:34069,data:ar[dr]};for(dr=0;6>dr;++dr){for(Xr=0;Xr<ar.length;++Xr)xr.color[Xr].target=34069+dr;0<dr&&(xr.depth=rr[0].depth,xr.stencil=rr[0].stencil,xr.depthStencil=rr[0].depthStencil),rr[dr]?rr[dr](xr):rr[dr]=dt(xr)}return N(tr,{width:Lr,height:Lr,color:ar})}var rr=Array(6);return tr(mr),N(tr,{faces:rr,resize:function(ar){var dr=0|ar;if(dr===tr.width)return tr;var xr=tr.color;for(ar=0;ar<xr.length;++ar)xr[ar].resize(dr);for(ar=0;6>ar;++ar)rr[ar].resize(dr);return tr.width=tr.height=dr,tr},_reglType:"framebufferCube",destroy:function(){rr.forEach(function(ar){ar.destroy()})}})},clear:function(){ue(Sr).forEach(Ze)},restore:function(){Ct.cur=null,Ct.next=null,Ct.dirty=!0,ue(Sr).forEach(function(mr){mr.framebuffer=he.createFramebuffer(),it(mr)})}})}(At,Ct,mr,xr,Lr,it),Hr=V(At,Ze,Ct,mr,tr,rr,0,zr,{},ar,dr,qt,Sr,Ut,dt,he),Xr=(Ze=function E(he,be,ze,Ve,Je,Ye,lt){function st(Mt){var Dt;Dt=null===be.next?5121:be.next.colorAttachments[0].texture._texture.type;var ht=0,mt=0,Ot=Ve.framebufferWidth,At=Ve.framebufferHeight,It=null;return ve(Mt)?It=Mt:Mt&&(ht=0|Mt.x,mt=0|Mt.y,Ot=0|(Mt.width||Ve.framebufferWidth-ht),At=0|(Mt.height||Ve.framebufferHeight-mt),It=Mt.data||null),ze(),Mt=Ot*At*4,It||(5121===Dt?It=new Uint8Array(Mt):5126===Dt&&(It=It||new Float32Array(Mt))),he.pixelStorei(3333,4),he.readPixels(ht,mt,Ot,At,6408,Dt,It),It}return function(Mt){return Mt&&"framebuffer"in Mt?(be.setFBO({framebuffer:(Dt=Mt).framebuffer},function(){ht=st(Dt)}),ht):st(Mt);var Dt,ht}}(At,zr,Hr.procs.poll,Sr),Hr.next),cn=At.canvas,an=[],Nn=[],on=[],wn=[he.onDestroy],An=null;cn&&(cn.addEventListener("webglcontextlost",Je,!1),cn.addEventListener("webglcontextrestored",Ye,!1));var ii=zr.setFBO=lt({framebuffer:J.define.call(null,1,"framebuffer")});return mt(),It=N(lt,{clear:function(Vr){if("framebuffer"in Vr)if(Vr.framebuffer&&"framebufferCube"===Vr.framebuffer_reglType)for(var sn=0;6>sn;++sn)ii(N({framebuffer:Vr.framebuffer.faces[sn]},Vr),st);else ii(Vr,st);else st(0,Vr)},prop:J.define.bind(null,1),context:J.define.bind(null,2),this:J.define.bind(null,3),draw:lt({}),buffer:function(Vr){return tr.create(Vr,34962,!1,!1)},elements:function(Vr){return rr.create(Vr,!1)},texture:xr.create2D,cube:xr.createCube,renderbuffer:Lr.create,framebuffer:zr.create,framebufferCube:zr.createCube,vao:ar.createVAO,attributes:It,frame:Mt,on:function(Vr,sn){var xn;switch(Vr){case"frame":return Mt(sn);case"lost":xn=Nn;break;case"restore":xn=on;break;case"destroy":xn=wn}return xn.push(sn),{cancel:function(){for(var nn=0;nn<xn.length;++nn)if(xn[nn]===sn){xn[nn]=xn[xn.length-1],xn.pop();break}}}},limits:mr,hasExtension:function(Vr){return 0<=mr.extensions.indexOf(Vr.toLowerCase())},read:Ze,destroy:function(){an.length=0,Ve(),cn&&(cn.removeEventListener("webglcontextlost",Je),cn.removeEventListener("webglcontextrestored",Ye)),dr.clear(),zr.clear(),Lr.clear(),ar.clear(),xr.clear(),rr.clear(),tr.clear(),Ut&&Ut.clear(),wn.forEach(function(Vr){Vr()})},_gl:At,_refresh:mt,poll:function(){ht(),Ut&&Ut.update()},now:Ot,stats:it,getCachedCode:function(){return dt},preloadCachedCode:function(Vr){Object.entries(Vr).forEach(function(sn){dt[sn[0]]=sn[1]})}}),he.onDone(null,It),It}},"object"==typeof Q&&void 0!==$?$.exports=g():this.createREGL=g()},{}],285:[function(v,$,Q){var m=v("buffer"),g=m.Buffer;function k(e,n){for(var i in e)n[i]=e[i]}function x(e,n,i){return g(e,n,i)}g.from&&g.alloc&&g.allocUnsafe&&g.allocUnsafeSlow?$.exports=m:(k(m,Q),Q.Buffer=x),x.prototype=Object.create(g.prototype),k(g,x),x.from=function(e,n,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return g(e,n,i)},x.alloc=function(e,n,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var l=g(e);return void 0!==n?"string"==typeof i?l.fill(n,i):l.fill(n):l.fill(0),l},x.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return g(e)},x.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return m.SlowBuffer(e)}},{buffer:85}],286:[function(v,$,Q){$.exports=g;var m=v("events").EventEmitter;function g(){m.call(this)}v("inherits")(g,m),g.Readable=v("readable-stream/lib/_stream_readable.js"),g.Writable=v("readable-stream/lib/_stream_writable.js"),g.Duplex=v("readable-stream/lib/_stream_duplex.js"),g.Transform=v("readable-stream/lib/_stream_transform.js"),g.PassThrough=v("readable-stream/lib/_stream_passthrough.js"),g.finished=v("readable-stream/lib/internal/streams/end-of-stream.js"),g.pipeline=v("readable-stream/lib/internal/streams/pipeline.js"),g.Stream=g,g.prototype.pipe=function(k,x){var e=this;function n(h){k.writable&&!1===k.write(h)&&e.pause&&e.pause()}function i(){e.readable&&e.resume&&e.resume()}e.on("data",n),k.on("drain",i),k._isStdio||x&&!1===x.end||(e.on("end",r),e.on("close",d));var l=!1;function r(){l||(l=!0,k.end())}function d(){l||(l=!0,"function"==typeof k.destroy&&k.destroy())}function f(h){if(t(),0===m.listenerCount(this,"error"))throw h}function t(){e.removeListener("data",n),k.removeListener("drain",i),e.removeListener("end",r),e.removeListener("close",d),e.removeListener("error",f),k.removeListener("error",f),e.removeListener("end",t),e.removeListener("close",t),k.removeListener("close",t)}return e.on("error",f),k.on("error",f),e.on("end",t),e.on("close",t),k.on("close",t),k.emit("pipe",e),k}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":288,"readable-stream/lib/_stream_passthrough.js":289,"readable-stream/lib/_stream_readable.js":290,"readable-stream/lib/_stream_transform.js":291,"readable-stream/lib/_stream_writable.js":292,"readable-stream/lib/internal/streams/end-of-stream.js":296,"readable-stream/lib/internal/streams/pipeline.js":298}],287:[function(v,$,Q){"use strict";var m={};function g(x,e,n){n||(n=Error);var i=function(l){var r,d;function f(t,h,s){return l.call(this,"string"==typeof e?e:e(t,h,s))||this}return d=l,(r=f).prototype=Object.create(d.prototype),r.prototype.constructor=r,r.__proto__=d,f}(n);i.prototype.name=n.name,i.prototype.code=x,m[x]=i}function k(x,e){if(Array.isArray(x)){var n=x.length;return x=x.map(function(i){return String(i)}),n>2?"one of ".concat(e," ").concat(x.slice(0,n-1).join(", "),", or ")+x[n-1]:2===n?"one of ".concat(e," ").concat(x[0]," or ").concat(x[1]):"of ".concat(e," ").concat(x[0])}return"of ".concat(e," ").concat(String(x))}g("ERR_INVALID_OPT_VALUE",function(x,e){return'The value "'+e+'" is invalid for option "'+x+'"'},TypeError),g("ERR_INVALID_ARG_TYPE",function(x,e,n){var i,d,t,s;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(i="must not be",e=e.replace(/^not /,"")):i="must be",t=x,(void 0===s||s>t.length)&&(s=t.length)," argument"===t.substring(s-" argument".length,s))d="The ".concat(x," ").concat(i," ").concat(k(e,"type"));else{var f=function(t,h,s){return"number"!=typeof s&&(s=0),!(s+".".length>t.length)&&-1!==t.indexOf(".",s)}(x)?"property":"argument";d='The "'.concat(x,'" ').concat(f," ").concat(i," ").concat(k(e,"type"))}return d+". Received type ".concat(typeof n)},TypeError),g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),g("ERR_METHOD_NOT_IMPLEMENTED",function(x){return"The "+x+" method is not implemented"}),g("ERR_STREAM_PREMATURE_CLOSE","Premature close"),g("ERR_STREAM_DESTROYED",function(x){return"Cannot call "+x+" after a stream was destroyed"}),g("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),g("ERR_STREAM_WRITE_AFTER_END","write after end"),g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),g("ERR_UNKNOWN_ENCODING",function(x){return"Unknown encoding: "+x},TypeError),g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),$.exports.codes=m},{}],288:[function(v,$,Q){(function(m){(function(){"use strict";var g=Object.keys||function(f){var t=[];for(var h in f)t.push(h);return t};$.exports=l;var k=v("./_stream_readable"),x=v("./_stream_writable");v("inherits")(l,k);for(var e=g(x.prototype),n=0;n<e.length;n++){var i=e[n];l.prototype[i]||(l.prototype[i]=x.prototype[i])}function l(f){if(!(this instanceof l))return new l(f);k.call(this,f),x.call(this,f),this.allowHalfOpen=!0,f&&(!1===f.readable&&(this.readable=!1),!1===f.writable&&(this.writable=!1),!1===f.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",r)))}function r(){this._writableState.ended||m.nextTick(d,this)}function d(f){f.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(f){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}})}).call(this)}).call(this,v("_process"))},{"./_stream_readable":290,"./_stream_writable":292,_process:278,inherits:231}],289:[function(v,$,Q){"use strict";$.exports=g;var m=v("./_stream_transform");function g(k){if(!(this instanceof g))return new g(k);m.call(this,k)}v("inherits")(g,m),g.prototype._transform=function(k,x,e){e(null,k)}},{"./_stream_transform":291,inherits:231}],290:[function(v,$,Q){(function(m,g){(function(){"use strict";var k;$.exports=T,T.ReadableState=w,v("events");var l,x=function(U,B){return U.listeners(B).length},e=v("./internal/streams/stream"),n=v("buffer").Buffer,i=g.Uint8Array||function(){},r=v("util");l=r&&r.debuglog?r.debuglog("stream"):function(){};var d,f,t,h=v("./internal/streams/buffer_list"),s=v("./internal/streams/destroy"),o=v("./internal/streams/state").getHighWaterMark,p=v("../errors").codes,c=p.ERR_INVALID_ARG_TYPE,a=p.ERR_STREAM_PUSH_AFTER_EOF,y=p.ERR_METHOD_NOT_IMPLEMENTED,u=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;v("inherits")(T,e);var _=s.errorOrDestroy,b=["error","close","destroy","pause","resume"];function w(U,B,V){k=k||v("./_stream_duplex"),"boolean"!=typeof V&&(V=B instanceof k),this.objectMode=!!(U=U||{}).objectMode,V&&(this.objectMode=this.objectMode||!!U.readableObjectMode),this.highWaterMark=o(this,U,"readableHighWaterMark",V),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==U.emitClose,this.autoDestroy=!!U.autoDestroy,this.destroyed=!1,this.defaultEncoding=U.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,U.encoding&&(d||(d=v("string_decoder/").StringDecoder),this.decoder=new d(U.encoding),this.encoding=U.encoding)}function T(U){if(k=k||v("./_stream_duplex"),!(this instanceof T))return new T(U);this._readableState=new w(U,this,this instanceof k),this.readable=!0,U&&("function"==typeof U.read&&(this._read=U.read),"function"==typeof U.destroy&&(this._destroy=U.destroy)),e.call(this)}function C(U,B,V,ee,N){l("readableAddChunk",B);var K,te,ae,le,se,J=U._readableState;if(null===B)J.reading=!1,function(te,ae){if(l("onEofChunk"),!ae.ended){if(ae.decoder){var le=ae.decoder.end();le&&le.length&&(ae.buffer.push(le),ae.length+=ae.objectMode?1:le.length)}ae.ended=!0,ae.sync?P(te):(ae.needReadable=!1,ae.emittedReadable||(ae.emittedReadable=!0,S(te)))}}(U,J);else if(N||(te=J,n.isBuffer(se=ae=B)||se instanceof i||"string"==typeof ae||void 0===ae||te.objectMode||(le=new c("chunk",["string","Buffer","Uint8Array"],ae)),K=le),K)_(U,K);else if(J.objectMode||B&&B.length>0)if("string"==typeof B||J.objectMode||Object.getPrototypeOf(B)===n.prototype||(B=function(te){return n.from(te)}(B)),ee)J.endEmitted?_(U,new u):M(U,J,B,!0);else if(J.ended)_(U,new a);else{if(J.destroyed)return!1;J.reading=!1,J.decoder&&!V?(B=J.decoder.write(B),J.objectMode||0!==B.length?M(U,J,B,!1):E(U,J)):M(U,J,B,!1)}else ee||(J.reading=!1,E(U,J));return!J.ended&&(J.length<J.highWaterMark||0===J.length)}function M(U,B,V,ee){B.flowing&&0===B.length&&!B.sync?(B.awaitDrain=0,U.emit("data",V)):(B.length+=B.objectMode?1:V.length,ee?B.buffer.unshift(V):B.buffer.push(V),B.needReadable&&P(U)),E(U,B)}function I(U,B){return U<=0||0===B.length&&B.ended?0:B.objectMode?1:U!=U?B.flowing&&B.length?B.buffer.head.data.length:B.length:(U>B.highWaterMark&&(B.highWaterMark=((V=U)>=1073741824?V=1073741824:(V--,V|=V>>>1,V|=V>>>2,V|=V>>>4,V|=V>>>8,V|=V>>>16,V++),V)),U<=B.length?U:B.ended?B.length:(B.needReadable=!0,0));var V}function P(U){var B=U._readableState;l("emitReadable",B.needReadable,B.emittedReadable),B.needReadable=!1,B.emittedReadable||(l("emitReadable",B.flowing),B.emittedReadable=!0,m.nextTick(S,U))}function S(U){var B=U._readableState;l("emitReadable_",B.destroyed,B.length,B.ended),B.destroyed||!B.length&&!B.ended||(U.emit("readable"),B.emittedReadable=!1),B.needReadable=!B.flowing&&!B.ended&&B.length<=B.highWaterMark,Y(U)}function E(U,B){B.readingMore||(B.readingMore=!0,m.nextTick(R,U,B))}function R(U,B){for(;!B.reading&&!B.ended&&(B.length<B.highWaterMark||B.flowing&&0===B.length);){var V=B.length;if(l("maybeReadMore read 0"),U.read(0),V===B.length)break}B.readingMore=!1}function D(U){var B=U._readableState;B.readableListening=U.listenerCount("readable")>0,B.resumeScheduled&&!B.paused?B.flowing=!0:U.listenerCount("data")>0&&U.resume()}function j(U){l("readable nexttick read 0"),U.read(0)}function H(U,B){l("resume",B.reading),B.reading||U.read(0),B.resumeScheduled=!1,U.emit("resume"),Y(U),B.flowing&&!B.reading&&U.read(0)}function Y(U){var B=U._readableState;for(l("flow",B.flowing);B.flowing&&null!==U.read(););}function X(U,B){return 0===B.length?null:(B.objectMode?V=B.buffer.shift():!U||U>=B.length?(V=B.decoder?B.buffer.join(""):1===B.buffer.length?B.buffer.first():B.buffer.concat(B.length),B.buffer.clear()):V=B.buffer.consume(U,B.decoder),V);var V}function Z(U){var B=U._readableState;l("endReadable",B.endEmitted),B.endEmitted||(B.ended=!0,m.nextTick(W,B,U))}function W(U,B){if(l("endReadableNT",U.endEmitted,U.length),!U.endEmitted&&0===U.length&&(U.endEmitted=!0,B.readable=!1,B.emit("end"),U.autoDestroy)){var V=B._writableState;(!V||V.autoDestroy&&V.finished)&&B.destroy()}}function re(U,B){for(var V=0,ee=U.length;V<ee;V++)if(U[V]===B)return V;return-1}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(U){this._readableState&&(this._readableState.destroyed=U)}}),T.prototype.destroy=s.destroy,T.prototype._undestroy=s.undestroy,T.prototype._destroy=function(U,B){B(U)},T.prototype.push=function(U,B){var V,ee=this._readableState;return ee.objectMode?V=!0:"string"==typeof U&&((B=B||ee.defaultEncoding)!==ee.encoding&&(U=n.from(U,B),B=""),V=!0),C(this,U,B,!1,V)},T.prototype.unshift=function(U){return C(this,U,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(U){d||(d=v("string_decoder/").StringDecoder);var B=new d(U);this._readableState.decoder=B,this._readableState.encoding=this._readableState.decoder.encoding;for(var V=this._readableState.buffer.head,ee="";null!==V;)ee+=B.write(V.data),V=V.next;return this._readableState.buffer.clear(),""!==ee&&this._readableState.buffer.push(ee),this._readableState.length=ee.length,this},T.prototype.read=function(U){l("read",U),U=parseInt(U,10);var B=this._readableState,V=U;if(0!==U&&(B.emittedReadable=!1),0===U&&B.needReadable&&((0!==B.highWaterMark?B.length>=B.highWaterMark:B.length>0)||B.ended))return l("read: emitReadable",B.length,B.ended),0===B.length&&B.ended?Z(this):P(this),null;if(0===(U=I(U,B))&&B.ended)return 0===B.length&&Z(this),null;var ee,N=B.needReadable;return l("need readable",N),(0===B.length||B.length-U<B.highWaterMark)&&l("length less than watermark",N=!0),B.ended||B.reading?l("reading or ended",N=!1):N&&(l("do read"),B.reading=!0,B.sync=!0,0===B.length&&(B.needReadable=!0),this._read(B.highWaterMark),B.sync=!1,B.reading||(U=I(V,B))),null===(ee=U>0?X(U,B):null)?(B.needReadable=B.length<=B.highWaterMark,U=0):(B.length-=U,B.awaitDrain=0),0===B.length&&(B.ended||(B.needReadable=!0),V!==U&&B.ended&&Z(this)),null!==ee&&this.emit("data",ee),ee},T.prototype._read=function(U){_(this,new y("_read()"))},T.prototype.pipe=function(U,B){var V=this,ee=this._readableState;switch(ee.pipesCount){case 0:ee.pipes=U;break;case 1:ee.pipes=[ee.pipes,U];break;default:ee.pipes.push(U)}ee.pipesCount+=1,l("pipe count=%d opts=%j",ee.pipesCount,B);var N=B&&!1===B.end||U===m.stdout||U===m.stderr?ye:J;function J(){l("onend"),U.end()}ee.endEmitted?m.nextTick(N):V.once("end",N),U.on("unpipe",function K(Me,pe){l("onunpipe"),Me===V&&pe&&!1===pe.hasUnpiped&&(pe.hasUnpiped=!0,l("cleanup"),U.removeListener("close",ve),U.removeListener("finish",ue),U.removeListener("drain",te),U.removeListener("error",se),U.removeListener("unpipe",K),V.removeListener("end",J),V.removeListener("end",ye),V.removeListener("data",le),ae=!0,!ee.awaitDrain||U._writableState&&!U._writableState.needDrain||te())});var Me,te=(Me=V,function(){var pe=Me._readableState;l("pipeOnDrain",pe.awaitDrain),pe.awaitDrain&&pe.awaitDrain--,0===pe.awaitDrain&&x(Me,"data")&&(pe.flowing=!0,Y(Me))});U.on("drain",te);var ae=!1;function le(Me){l("ondata");var pe=U.write(Me);l("dest.write",pe),!1===pe&&((1===ee.pipesCount&&ee.pipes===U||ee.pipesCount>1&&-1!==re(ee.pipes,U))&&!ae&&(l("false write response, pause",ee.awaitDrain),ee.awaitDrain++),V.pause())}function se(Me){l("onerror",Me),ye(),U.removeListener("error",se),0===x(U,"error")&&_(U,Me)}function ve(){U.removeListener("finish",ue),ye()}function ue(){l("onfinish"),U.removeListener("close",ve),ye()}function ye(){l("unpipe"),V.unpipe(U)}return V.on("data",le),function(Me,pe,ge){if("function"==typeof Me.prependListener)return Me.prependListener(pe,ge);Me._events&&Me._events[pe]?Array.isArray(Me._events[pe])?Me._events[pe].unshift(ge):Me._events[pe]=[ge,Me._events[pe]]:Me.on(pe,ge)}(U,"error",se),U.once("close",ve),U.once("finish",ue),U.emit("pipe",V),ee.flowing||(l("pipe resume"),V.resume()),U},T.prototype.unpipe=function(U){var B=this._readableState,V={hasUnpiped:!1};if(0===B.pipesCount)return this;if(1===B.pipesCount)return U&&U!==B.pipes||(U||(U=B.pipes),B.pipes=null,B.pipesCount=0,B.flowing=!1,U&&U.emit("unpipe",this,V)),this;if(!U){var ee=B.pipes,N=B.pipesCount;B.pipes=null,B.pipesCount=0,B.flowing=!1;for(var K=0;K<N;K++)ee[K].emit("unpipe",this,{hasUnpiped:!1});return this}var J=re(B.pipes,U);return-1===J||(B.pipes.splice(J,1),B.pipesCount-=1,1===B.pipesCount&&(B.pipes=B.pipes[0]),U.emit("unpipe",this,V)),this},T.prototype.addListener=T.prototype.on=function(U,B){var V=e.prototype.on.call(this,U,B),ee=this._readableState;return"data"===U?(ee.readableListening=this.listenerCount("readable")>0,!1!==ee.flowing&&this.resume()):"readable"===U&&(ee.endEmitted||ee.readableListening||(ee.readableListening=ee.needReadable=!0,ee.flowing=!1,ee.emittedReadable=!1,l("on readable",ee.length,ee.reading),ee.length?P(this):ee.reading||m.nextTick(j,this))),V},T.prototype.removeListener=function(U,B){var V=e.prototype.removeListener.call(this,U,B);return"readable"===U&&m.nextTick(D,this),V},T.prototype.removeAllListeners=function(U){var B=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==U&&void 0!==U||m.nextTick(D,this),B},T.prototype.resume=function(){var V,U=this._readableState;return U.flowing||(l("resume"),U.flowing=!U.readableListening,this,(V=U).resumeScheduled||(V.resumeScheduled=!0,m.nextTick(H,this,V))),U.paused=!1,this},T.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(U){var B=this,V=this._readableState,ee=!1;for(var N in U.on("end",function(){if(l("wrapped end"),V.decoder&&!V.ended){var J=V.decoder.end();J&&J.length&&B.push(J)}B.push(null)}),U.on("data",function(J){l("wrapped data"),V.decoder&&(J=V.decoder.write(J)),V.objectMode&&null==J||(V.objectMode||J&&J.length)&&(B.push(J)||(ee=!0,U.pause()))}),U)void 0===this[N]&&"function"==typeof U[N]&&(this[N]=function(J){return function(){return U[J].apply(U,arguments)}}(N));for(var K=0;K<b.length;K++)U.on(b[K],this.emit.bind(this,b[K]));return this._read=function(J){l("wrapped _read",J),ee&&(ee=!1,U.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=v("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(U){this._readableState&&(this._readableState.flowing=U)}}),T._fromList=X,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(U,B){return void 0===t&&(t=v("./internal/streams/from")),t(T,U,B)})}).call(this)}).call(this,v("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/async_iterator":293,"./internal/streams/buffer_list":294,"./internal/streams/destroy":295,"./internal/streams/from":297,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,events:84,inherits:231,"string_decoder/":301,util:83}],291:[function(v,$,Q){"use strict";$.exports=l;var m=v("../errors").codes,g=m.ERR_METHOD_NOT_IMPLEMENTED,k=m.ERR_MULTIPLE_CALLBACK,x=m.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=m.ERR_TRANSFORM_WITH_LENGTH_0,n=v("./_stream_duplex");function i(f,t){var h=this._transformState;h.transforming=!1;var s=h.writecb;if(null===s)return this.emit("error",new k);h.writechunk=null,h.writecb=null,null!=t&&this.push(t),s(f);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function l(f){if(!(this instanceof l))return new l(f);n.call(this,f),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&("function"==typeof f.transform&&(this._transform=f.transform),"function"==typeof f.flush&&(this._flush=f.flush)),this.on("prefinish",r)}function r(){var f=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(t,h){d(f,t,h)})}function d(f,t,h){if(t)return f.emit("error",t);if(null!=h&&f.push(h),f._writableState.length)throw new e;if(f._transformState.transforming)throw new x;return f.push(null)}v("inherits")(l,n),l.prototype.push=function(f,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,f,t)},l.prototype._transform=function(f,t,h){h(new g("_transform()"))},l.prototype._write=function(f,t,h){var s=this._transformState;if(s.writecb=h,s.writechunk=f,s.writeencoding=t,!s.transforming){var o=this._readableState;(s.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},l.prototype._read=function(f){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(f,t){n.prototype._destroy.call(this,f,function(h){t(h)})}},{"../errors":287,"./_stream_duplex":288,inherits:231}],292:[function(v,$,Q){(function(m,g){(function(){"use strict";function k(R){var D=this;this.next=null,this.entry=null,this.finish=function(){!function(j,H,Y){var X=j.entry;for(j.entry=null;X;){var Z=X.callback;H.pendingcb--,Z(undefined),X=X.next}H.corkedRequestsFree.next=j}(D,R)}}var x;$.exports=T,T.WritableState=w;var r,e={deprecate:v("util-deprecate")},n=v("./internal/streams/stream"),i=v("buffer").Buffer,l=g.Uint8Array||function(){},d=v("./internal/streams/destroy"),f=v("./internal/streams/state").getHighWaterMark,t=v("../errors").codes,h=t.ERR_INVALID_ARG_TYPE,s=t.ERR_METHOD_NOT_IMPLEMENTED,o=t.ERR_MULTIPLE_CALLBACK,p=t.ERR_STREAM_CANNOT_PIPE,c=t.ERR_STREAM_DESTROYED,a=t.ERR_STREAM_NULL_VALUES,y=t.ERR_STREAM_WRITE_AFTER_END,u=t.ERR_UNKNOWN_ENCODING,_=d.errorOrDestroy;function b(){}function w(R,D,j){x=x||v("./_stream_duplex"),"boolean"!=typeof j&&(j=D instanceof x),this.objectMode=!!(R=R||{}).objectMode,j&&(this.objectMode=this.objectMode||!!R.writableObjectMode),this.highWaterMark=f(this,R,"writableHighWaterMark",j),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===R.decodeStrings),this.defaultEncoding=R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Y){!function(X,Z){var V,W=X._writableState,re=W.sync,U=W.writecb;if("function"!=typeof U)throw new o;if((V=W).writing=!1,V.writecb=null,V.length-=V.writelen,V.writelen=0,Z)!function(V,ee,N,K,J){--ee.pendingcb,N?(m.nextTick(J,K),m.nextTick(E,V,ee),V._writableState.errorEmitted=!0,_(V,K)):(J(K),V._writableState.errorEmitted=!0,_(V,K),E(V,ee))}(X,W,re,Z,U);else{var B=P(W)||X.destroyed;B||W.corked||W.bufferProcessing||!W.bufferedRequest||I(X,W),re?m.nextTick(M,X,W,B,U):M(X,W,B,U)}}(D,Y)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==R.emitClose,this.autoDestroy=!!R.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new k(this)}function T(R){var D=this instanceof(x=x||v("./_stream_duplex"));if(!D&&!r.call(T,this))return new T(R);this._writableState=new w(R,this,D),this.writable=!0,R&&("function"==typeof R.write&&(this._write=R.write),"function"==typeof R.writev&&(this._writev=R.writev),"function"==typeof R.destroy&&(this._destroy=R.destroy),"function"==typeof R.final&&(this._final=R.final)),n.call(this)}function C(R,D,j,H,Y,X,Z){D.writelen=H,D.writecb=Z,D.writing=!0,D.sync=!0,D.destroyed?D.onwrite(new c("write")):j?R._writev(Y,D.onwrite):R._write(Y,X,D.onwrite),D.sync=!1}function M(R,D,j,H){var Y,X;j||(Y=R,0===(X=D).length&&X.needDrain&&(X.needDrain=!1,Y.emit("drain"))),D.pendingcb--,H(),E(R,D)}function I(R,D){D.bufferProcessing=!0;var j=D.bufferedRequest;if(R._writev&&j&&j.next){var Y=new Array(D.bufferedRequestCount),X=D.corkedRequestsFree;X.entry=j;for(var Z=0,W=!0;j;)Y[Z]=j,j.isBuf||(W=!1),j=j.next,Z+=1;Y.allBuffers=W,C(R,D,!0,D.length,Y,"",X.finish),D.pendingcb++,D.lastBufferedRequest=null,X.next?(D.corkedRequestsFree=X.next,X.next=null):D.corkedRequestsFree=new k(D),D.bufferedRequestCount=0}else{for(;j;){var re=j.chunk;if(C(R,D,!1,D.objectMode?1:re.length,re,j.encoding,j.callback),j=j.next,D.bufferedRequestCount--,D.writing)break}null===j&&(D.lastBufferedRequest=null)}D.bufferedRequest=j,D.bufferProcessing=!1}function P(R){return R.ending&&0===R.length&&null===R.bufferedRequest&&!R.finished&&!R.writing}function S(R,D){R._final(function(j){D.pendingcb--,j&&_(R,j),D.prefinished=!0,R.emit("prefinish"),E(R,D)})}function E(R,D){var Y,X,j=P(D);if(j&&(Y=R,(X=D).prefinished||X.finalCalled||("function"!=typeof Y._final||X.destroyed?(X.prefinished=!0,Y.emit("prefinish")):(X.pendingcb++,X.finalCalled=!0,m.nextTick(S,Y,X))),0===D.pendingcb&&(D.finished=!0,R.emit("finish"),D.autoDestroy))){var H=R._readableState;(!H||H.autoDestroy&&H.endEmitted)&&R.destroy()}return j}v("inherits")(T,n),w.prototype.getBuffer=function(){for(var R=this.bufferedRequest,D=[];R;)D.push(R),R=R.next;return D},function(){try{Object.defineProperty(w.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(r=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(R){return!!r.call(this,R)||this===T&&R&&R._writableState instanceof w}})):r=function(R){return R instanceof this},T.prototype.pipe=function(){_(this,new p)},T.prototype.write=function(R,D,j){var H,W,re,U,Y=this._writableState,X=!1,Z=!Y.objectMode&&(i.isBuffer(H=R)||H instanceof l);return Z&&!i.isBuffer(R)&&(R=i.from(R)),"function"==typeof D&&(j=D,D=null),Z?D="buffer":D||(D=Y.defaultEncoding),"function"!=typeof j&&(j=b),Y.ending?(W=this,re=j,U=new y,_(W,U),m.nextTick(re,U)):(Z||function(W,re,U,B){var V;return null===U?V=new a:"string"==typeof U||re.objectMode||(V=new h("chunk",["string","Buffer"],U)),!V||(_(W,V),m.nextTick(B,V),!1)}(this,Y,R,j))&&(Y.pendingcb++,X=function(W,re,U,B,V,ee){if(!U){var N=(le=B,(ae=re).objectMode||!1===ae.decodeStrings||"string"!=typeof le||(le=i.from(le,V)),le);B!==N&&(U=!0,V="buffer",B=N)}var ae,le,K=re.objectMode?1:B.length;re.length+=K;var J=re.length<re.highWaterMark;if(J||(re.needDrain=!0),re.writing||re.corked){var te=re.lastBufferedRequest;re.lastBufferedRequest={chunk:B,encoding:V,isBuf:U,callback:ee,next:null},te?te.next=re.lastBufferedRequest:re.bufferedRequest=re.lastBufferedRequest,re.bufferedRequestCount+=1}else C(W,re,!1,K,B,V,ee);return J}(this,Y,Z,R,D,j)),X},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,R.writing||R.corked||R.bufferProcessing||!R.bufferedRequest||I(this,R))},T.prototype.setDefaultEncoding=function(R){if("string"==typeof R&&(R=R.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((R+"").toLowerCase())>-1))throw new u(R);return this._writableState.defaultEncoding=R,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(R,D,j){j(new s("_write()"))},T.prototype._writev=null,T.prototype.end=function(R,D,j){var Y,X,Z,H=this._writableState;return"function"==typeof R?(j=R,R=null,D=null):"function"==typeof D&&(j=D,D=null),null!=R&&this.write(R,D),H.corked&&(H.corked=1,this.uncork()),H.ending||(Y=this,Z=j,(X=H).ending=!0,E(Y,X),Z&&(X.finished?m.nextTick(Z):Y.once("finish",Z)),X.ended=!0,Y.writable=!1),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=R)}}),T.prototype.destroy=d.destroy,T.prototype._undestroy=d.undestroy,T.prototype._destroy=function(R,D){D(R)}}).call(this)}).call(this,v("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/destroy":295,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,inherits:231,"util-deprecate":331}],293:[function(v,$,Q){(function(m){(function(){"use strict";var g;function k(c,a,y){return a in c?Object.defineProperty(c,a,{value:y,enumerable:!0,configurable:!0,writable:!0}):c[a]=y,c}var x=v("./end-of-stream"),e=Symbol("lastResolve"),n=Symbol("lastReject"),i=Symbol("error"),l=Symbol("ended"),r=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function t(c,a){return{value:c,done:a}}function h(c){var a=c[e];if(null!==a){var y=c[f].read();null!==y&&(c[r]=null,c[e]=null,c[n]=null,a(t(y,!1)))}}function s(c){m.nextTick(h,c)}var o=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((k(g={get stream(){return this[f]},next:function(){var c=this,a=this[i];if(null!==a)return Promise.reject(a);if(this[l])return Promise.resolve(t(void 0,!0));if(this[f].destroyed)return new Promise(function(b,w){m.nextTick(function(){c[i]?w(c[i]):b(t(void 0,!0))})});var y,b,w,u=this[r];if(u)y=new Promise((b=u,w=this,function(T,C){b.then(function(){w[l]?T(t(void 0,!0)):w[d](T,C)},C)}));else{var _=this[f].read();if(null!==_)return Promise.resolve(t(_,!1));y=new Promise(this[d])}return this[r]=y,y}},Symbol.asyncIterator,function(){return this}),k(g,"return",function(){var c=this;return new Promise(function(a,y){c[f].destroy(null,function(u){u?y(u):a(t(void 0,!0))})})}),g),o);$.exports=function(c){var a,y=Object.create(p,(k(a={},f,{value:c,writable:!0}),k(a,e,{value:null,writable:!0}),k(a,n,{value:null,writable:!0}),k(a,i,{value:null,writable:!0}),k(a,l,{value:c._readableState.endEmitted,writable:!0}),k(a,d,{value:function(u,_){var b=y[f].read();b?(y[r]=null,y[e]=null,y[n]=null,u(t(b,!1))):(y[e]=u,y[n]=_)},writable:!0}),a));return y[r]=null,x(c,function(u){if(u&&"ERR_STREAM_PREMATURE_CLOSE"!==u.code){var _=y[n];return null!==_&&(y[r]=null,y[e]=null,y[n]=null,_(u)),void(y[i]=u)}var b=y[e];null!==b&&(y[r]=null,y[e]=null,y[n]=null,b(t(void 0,!0))),y[l]=!0}),c.on("readable",s.bind(null,y)),y}}).call(this)}).call(this,v("_process"))},{"./end-of-stream":296,_process:278}],294:[function(v,$,Q){"use strict";function m(i,l){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(i);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(i,f).enumerable})),r.push.apply(r,d)}return r}function g(i,l,r){return l in i?Object.defineProperty(i,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[l]=r,i}function k(i,l){for(var r=0;r<l.length;r++){var d=l[r];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}var x=v("buffer").Buffer,e=v("util").inspect,n=e&&e.custom||"inspect";$.exports=function(){function i(){(function(f,t){if(!(f instanceof t))throw new TypeError("Cannot call a class as a function")})(this,i),this.head=null,this.tail=null,this.length=0}var l,r;return l=i,(r=[{key:"push",value:function(f){var t={data:f,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(f){var t={data:f,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var f=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,f}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(f){if(0===this.length)return"";for(var t=this.head,h=""+t.data;t=t.next;)h+=f+t.data;return h}},{key:"concat",value:function(f){if(0===this.length)return x.alloc(0);for(var o=x.allocUnsafe(f>>>0),p=this.head,c=0;p;)x.prototype.copy.call(p.data,o,c),c+=p.data.length,p=p.next;return o}},{key:"consume",value:function(f,t){var h;return f<this.head.data.length?(h=this.head.data.slice(0,f),this.head.data=this.head.data.slice(f)):h=f===this.head.data.length?this.shift():t?this._getString(f):this._getBuffer(f),h}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(f){var t=this.head,h=1,s=t.data;for(f-=s.length;t=t.next;){var o=t.data,p=f>o.length?o.length:f;if(s+=p===o.length?o:o.slice(0,f),0==(f-=p)){p===o.length?(++h,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=o.slice(p));break}++h}return this.length-=h,s}},{key:"_getBuffer",value:function(f){var t=x.allocUnsafe(f),h=this.head,s=1;for(h.data.copy(t),f-=h.data.length;h=h.next;){var o=h.data,p=f>o.length?o.length:f;if(o.copy(t,t.length-f,0,p),0==(f-=p)){p===o.length?(++s,this.head=h.next?h.next:this.tail=null):(this.head=h,h.data=o.slice(p));break}++s}return this.length-=s,t}},{key:n,value:function(f,t){return e(this,function(h){for(var s=1;s<arguments.length;s++){var o=null!=arguments[s]?arguments[s]:{};s%2?m(Object(o),!0).forEach(function(p){g(h,p,o[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach(function(p){Object.defineProperty(h,p,Object.getOwnPropertyDescriptor(o,p))})}return h}({},t,{depth:0,customInspect:!1}))}}])&&k(l.prototype,r),i}()},{buffer:85,util:83}],295:[function(v,$,Q){(function(m){(function(){"use strict";function g(e,n){x(e,n),k(e)}function k(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function x(e,n){e.emit("error",n)}$.exports={destroy:function(e,n){var i=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(n?n(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,m.nextTick(x,this,e)):m.nextTick(x,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(d){!n&&d?i._writableState?i._writableState.errorEmitted?m.nextTick(k,i):(i._writableState.errorEmitted=!0,m.nextTick(g,i,d)):m.nextTick(g,i,d):n?(m.nextTick(k,i),n(d)):m.nextTick(k,i)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,n){var i=e._readableState,l=e._writableState;i&&i.autoDestroy||l&&l.autoDestroy?e.destroy(n):e.emit("error",n)}}}).call(this)}).call(this,v("_process"))},{_process:278}],296:[function(v,$,Q){"use strict";var m=v("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function g(){}$.exports=function k(x,e,n){if("function"==typeof e)return k(x,null,e);var c,a;e||(e={}),c=n||g,a=!1,n=function(){if(!a){a=!0;for(var y=arguments.length,u=new Array(y),_=0;_<y;_++)u[_]=arguments[_];c.apply(this,u)}};var i=e.readable||!1!==e.readable&&x.readable,l=e.writable||!1!==e.writable&&x.writable,r=function(){x.writable||f()},d=x._writableState&&x._writableState.finished,f=function(){l=!1,d=!0,i||n.call(x)},t=x._readableState&&x._readableState.endEmitted,h=function(){i=!1,t=!0,l||n.call(x)},s=function(c){n.call(x,c)},o=function(){var c;return i&&!t?(x._readableState&&x._readableState.ended||(c=new m),n.call(x,c)):l&&!d?(x._writableState&&x._writableState.ended||(c=new m),n.call(x,c)):void 0},p=function(){x.req.on("finish",f)};return function(c){return c.setHeader&&"function"==typeof c.abort}(x)?(x.on("complete",f),x.on("abort",o),x.req?p():x.on("request",p)):l&&!x._writableState&&(x.on("end",r),x.on("close",r)),x.on("end",h),x.on("finish",f),!1!==e.error&&x.on("error",s),x.on("close",o),function(){x.removeListener("complete",f),x.removeListener("abort",o),x.removeListener("request",p),x.req&&x.req.removeListener("finish",f),x.removeListener("end",r),x.removeListener("close",r),x.removeListener("finish",f),x.removeListener("end",h),x.removeListener("error",s),x.removeListener("close",o)}}},{"../../../errors":287}],297:[function(v,$,Q){$.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],298:[function(v,$,Q){"use strict";var m,g=v("../../../errors").codes,k=g.ERR_MISSING_ARGS,x=g.ERR_STREAM_DESTROYED;function e(d){if(d)throw d}function n(d,f,t,h){var p,c;p=h,c=!1,h=function(){c||(c=!0,p.apply(void 0,arguments))};var s=!1;d.on("close",function(){s=!0}),void 0===m&&(m=v("./end-of-stream")),m(d,{readable:f,writable:t},function(p){if(p)return h(p);s=!0,h()});var o=!1;return function(p){if(!s&&!o)return o=!0,function(c){return c.setHeader&&"function"==typeof c.abort}(d)?d.abort():"function"==typeof d.destroy?d.destroy():void h(p||new x("pipe"))}}function i(d){d()}function l(d,f){return d.pipe(f)}function r(d){return d.length?"function"!=typeof d[d.length-1]?e:d.pop():e}$.exports=function(){for(var d=arguments.length,f=new Array(d),t=0;t<d;t++)f[t]=arguments[t];var h,s=r(f);if(Array.isArray(f[0])&&(f=f[0]),f.length<2)throw new k("streams");var o=f.map(function(p,c){var a=c<f.length-1;return n(p,a,c>0,function(y){h||(h=y),y&&o.forEach(i),a||(o.forEach(i),s(h))})});return f.reduce(l)}},{"../../../errors":287,"./end-of-stream":296}],299:[function(v,$,Q){"use strict";var m=v("../../../errors").codes.ERR_INVALID_OPT_VALUE;$.exports={getHighWaterMark:function(g,k,x,e){var i,n=null!=(i=k).highWaterMark?i.highWaterMark:e?i[x]:null;if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new m(e?x:"highWaterMark",n);return Math.floor(n)}return g.objectMode?16:16384}}},{"../../../errors":287}],300:[function(v,$,Q){$.exports=v("events").EventEmitter},{events:84}],301:[function(v,$,Q){"use strict";var m=v("safe-buffer").Buffer,g=m.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function k(t){var h;switch(this.encoding=function(s){var o=function(p){if(!p)return"utf8";for(var c;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(c)return;p=(""+p).toLowerCase(),c=!0}}(s);if("string"!=typeof o&&(m.isEncoding===g||!g(s)))throw new Error("Unknown encoding: "+s);return o||s}(t),this.encoding){case"utf16le":this.text=n,this.end=i,h=4;break;case"utf8":this.fillLast=e,h=4;break;case"base64":this.text=l,this.end=r,h=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(h)}function x(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function e(t){var h=this.lastTotal-this.lastNeed,s=function(o,p,c){if(128!=(192&p[0]))return o.lastNeed=0,"\ufffd";if(o.lastNeed>1&&p.length>1){if(128!=(192&p[1]))return o.lastNeed=1,"\ufffd";if(o.lastNeed>2&&p.length>2&&128!=(192&p[2]))return o.lastNeed=2,"\ufffd"}}(this,t);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,h,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,h,0,t.length),void(this.lastNeed-=t.length))}function n(t,h){if((t.length-h)%2==0){var s=t.toString("utf16le",h);if(s){var o=s.charCodeAt(s.length-1);if(o>=55296&&o<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",h,t.length-1)}function i(t){var h=t&&t.length?this.write(t):"";return this.lastNeed?h+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):h}function l(t,h){var s=(t.length-h)%3;return 0===s?t.toString("base64",h):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",h,t.length-s))}function r(t){var h=t&&t.length?this.write(t):"";return this.lastNeed?h+this.lastChar.toString("base64",0,3-this.lastNeed):h}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}Q.StringDecoder=k,k.prototype.write=function(t){if(0===t.length)return"";var h,s;if(this.lastNeed){if(void 0===(h=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?h?h+this.text(t,s):this.text(t,s):h||""},k.prototype.end=function(t){var h=t&&t.length?this.write(t):"";return this.lastNeed?h+"\ufffd":h},k.prototype.text=function(t,h){var s=function(p,c,a){var y=c.length-1;if(y<a)return 0;var u=x(c[y]);return u>=0?(u>0&&(p.lastNeed=u-1),u):--y<a||-2===u?0:(u=x(c[y]))>=0?(u>0&&(p.lastNeed=u-2),u):--y<a||-2===u?0:(u=x(c[y]))>=0?(u>0&&(2===u?u=0:p.lastNeed=u-3),u):0}(this,t,h);if(!this.lastNeed)return t.toString("utf8",h);this.lastTotal=s;var o=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,o),t.toString("utf8",h,o)},k.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":285}],302:[function(v,$,Q){(function(m,g){(function(){var k=v("assert"),x=v("debug")("stream-parser");function e(s){x("initializing parser stream"),s._parserBytesLeft=0,s._parserBuffers=[],s._parserBuffered=0,s._parserState=-1,s._parserCallback=null,"function"==typeof s.push&&(s._parserOutput=s.push.bind(s)),s._parserInit=!0}function n(s,o){k(!this._parserCallback,'there is already a "callback" set!'),k(isFinite(s)&&s>0,'can only buffer a finite number of bytes > 0, got "'+s+'"'),this._parserInit||e(this),x("buffering %o bytes",s),this._parserBytesLeft=s,this._parserCallback=o,this._parserState=0}function i(s,o){k(!this._parserCallback,'there is already a "callback" set!'),k(s>0,'can only skip > 0 bytes, got "'+s+'"'),this._parserInit||e(this),x("skipping %o bytes",s),this._parserBytesLeft=s,this._parserCallback=o,this._parserState=1}function l(s,o){k(!this._parserCallback,'There is already a "callback" set!'),k(s>0,'can only pass through > 0 bytes, got "'+s+'"'),this._parserInit||e(this),x("passing through %o bytes",s),this._parserBytesLeft=s,this._parserCallback=o,this._parserState=2}function r(s,o,p){this._parserInit||e(this),x("write(%o bytes)",s.length),"function"==typeof o&&(p=o),t(this,s,null,p)}function d(s,o,p){this._parserInit||e(this),x("transform(%o bytes)",s.length),"function"!=typeof o&&(o=this._parserOutput),t(this,s,o,p)}function f(s,o,p,c){if(s._parserBytesLeft-=o.length,x("%o bytes left for stream piece",s._parserBytesLeft),0===s._parserState?(s._parserBuffers.push(o),s._parserBuffered+=o.length):2===s._parserState&&p(o),0!==s._parserBytesLeft)return c;var a=s._parserCallback;if(a&&0===s._parserState&&s._parserBuffers.length>1&&(o=g.concat(s._parserBuffers,s._parserBuffered)),0!==s._parserState&&(o=null),s._parserCallback=null,s._parserBuffered=0,s._parserState=-1,s._parserBuffers.splice(0),a){var y=[];o&&y.push(o),p&&y.push(p);var u=a.length>y.length;u&&y.push(h(c));var _=a.apply(s,y);if(!u||c===_)return c}}$.exports=function(s){var o=s&&"function"==typeof s._transform;if(!(o||s&&"function"==typeof s._write))throw new Error("must pass a Writable or Transform stream in");x("extending Parser into stream"),s._bytes=n,s._skipBytes=i,o&&(s._passthrough=l),o?s._transform=d:s._write=r};var t=h(function s(o,p,c,a){return o._parserBytesLeft<=0?a(new Error("got data but not currently parsing anything")):p.length<=o._parserBytesLeft?function(){return f(o,p,c,a)}:function(){var y=p.slice(0,o._parserBytesLeft);return f(o,y,c,function(u){return u?a(u):p.length>y.length?function(){return s(o,p.slice(y.length),c,a)}:void 0})}});function h(s){return function(){for(var o=s.apply(this,arguments);"function"==typeof o;)o=o();return o}}}).call(this)}).call(this,v("_process"),v("buffer").Buffer)},{_process:278,assert:75,buffer:85,debug:303}],303:[function(v,$,Q){(function(m){(function(){function g(){var k;try{k=Q.storage.debug}catch{}return!k&&void 0!==m&&"env"in m&&(k=m.env.DEBUG),k}(Q=$.exports=v("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},Q.formatArgs=function(k){var x=this.useColors;if(k[0]=(x?"%c":"")+this.namespace+(x?" %c":" ")+k[0]+(x?"%c ":" ")+"+"+Q.humanize(this.diff),x){var e="color: "+this.color;k.splice(1,0,e,"color: inherit");var n=0,i=0;k[0].replace(/%[a-zA-Z%]/g,function(l){"%%"!==l&&(n++,"%c"===l&&(i=n))}),k.splice(i,0,e)}},Q.save=function(k){try{null==k?Q.storage.removeItem("debug"):Q.storage.debug=k}catch{}},Q.load=g,Q.useColors=function(){return!!(typeof window<"u"&&window.process&&"renderer"===window.process.type)||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},Q.storage=typeof chrome<"u"&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),Q.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],Q.formatters.j=function(k){try{return JSON.stringify(k)}catch(x){return"[UnexpectedJSONParseError]: "+x.message}},Q.enable(g())}).call(this)}).call(this,v("_process"))},{"./debug":304,_process:278}],304:[function(v,$,Q){var m;function g(k){function x(){if(x.enabled){var e=x,n=+new Date;e.diff=n-(m||n),e.prev=m,e.curr=n,m=n;for(var l=new Array(arguments.length),r=0;r<l.length;r++)l[r]=arguments[r];l[0]=Q.coerce(l[0]),"string"!=typeof l[0]&&l.unshift("%O");var d=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,function(t,h){if("%%"===t)return t;d++;var s=Q.formatters[h];return"function"==typeof s&&(t=s.call(e,l[d]),l.splice(d,1),d--),t}),Q.formatArgs.call(e,l),(x.log||Q.log||console.log.bind(console)).apply(e,l)}}return x.namespace=k,x.enabled=Q.enabled(k),x.useColors=Q.useColors(),x.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return Q.colors[Math.abs(i)%Q.colors.length]}(k),"function"==typeof Q.init&&Q.init(x),x}(Q=$.exports=g.debug=g.default=g).coerce=function(k){return k instanceof Error?k.stack||k.message:k},Q.disable=function(){Q.enable("")},Q.enable=function(k){Q.save(k),Q.names=[],Q.skips=[];for(var x=("string"==typeof k?k:"").split(/[\s,]+/),e=x.length,n=0;n<e;n++)x[n]&&("-"===(k=x[n].replace(/\*/g,".*?"))[0]?Q.skips.push(new RegExp("^"+k.substr(1)+"$")):Q.names.push(new RegExp("^"+k+"$")))},Q.enabled=function(k){var x,e;for(x=0,e=Q.skips.length;x<e;x++)if(Q.skips[x].test(k))return!1;for(x=0,e=Q.names.length;x<e;x++)if(Q.names[x].test(k))return!0;return!1},Q.humanize=v("ms"),Q.names=[],Q.skips=[],Q.formatters={}},{ms:305}],305:[function(v,$,Q){var m=1e3,g=6e4,k=60*g,x=24*k;function e(n,i,l){if(!(n<i))return n<1.5*i?Math.floor(n/i)+" "+l:Math.ceil(n/i)+" "+l+"s"}$.exports=function(n,i){i=i||{};var l,d,r=typeof n;if("string"===r&&n.length>0)return function(d){if(!((d=String(d)).length>100)){var f=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(d);if(f){var t=parseFloat(f[1]);switch((f[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"days":case"day":case"d":return t*x;case"hours":case"hour":case"hrs":case"hr":case"h":return t*k;case"minutes":case"minute":case"mins":case"min":case"m":return t*g;case"seconds":case"second":case"secs":case"sec":case"s":return t*m;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}(n);if("number"===r&&!1===isNaN(n))return i.long?e(l=n,x,"day")||e(l,k,"hour")||e(l,g,"minute")||e(l,m,"second")||l+" ms":(d=n)>=x?Math.round(d/x)+"d":d>=k?Math.round(d/k)+"h":d>=g?Math.round(d/g)+"m":d>=m?Math.round(d/m)+"s":d+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))}},{}],306:[function(v,$,Q){"use strict";var m=v("parenthesis");$.exports=function(g,k,x){if(null==g)throw Error("First argument should be a string");if(null==k)throw Error("Separator should be a string or a RegExp");x?("string"==typeof x||Array.isArray(x))&&(x={ignore:x}):x={},null==x.escape&&(x.escape=!0),null==x.ignore?x.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof x.ignore&&(x.ignore=[x.ignore]),x.ignore=x.ignore.map(function(f){return 1===f.length&&(f+=f),f}));var e=m.parse(g,{flat:!0,brackets:x.ignore}),n=e[0].split(k);if(x.escape){for(var i=[],l=0;l<n.length;l++){var r=n[l];"\\"===r[r.length-1]&&"\\"!==r[r.length-2]?(i.push(r+k+n[l+1]),l++):i.push(r)}n=i}for(l=0;l<n.length;l++)e[0]=n[l],n[l]=m.stringify(e,{flat:!0});return n}},{parenthesis:248}],307:[function(v,$,Q){"use strict";$.exports=function(m){for(var g=m.length,k=new Array(g),x=new Array(g),e=new Array(g),n=new Array(g),i=new Array(g),l=new Array(g),r=0;r<g;++r)k[r]=-1,x[r]=0,e[r]=!1,n[r]=0,i[r]=-1,l[r]=[];var d,f=0,t=[],h=[];function s(c){var a=[c],y=[c];for(k[c]=x[c]=f,e[c]=!0,f+=1;y.length>0;){var u=m[c=y[y.length-1]];if(n[c]<u.length){for(var _=n[c];_<u.length;++_){var b=u[_];if(k[b]<0){k[b]=x[b]=f,e[b]=!0,f+=1,a.push(b),y.push(b);break}e[b]&&(x[c]=0|Math.min(x[c],x[b])),i[b]>=0&&l[c].push(i[b])}n[c]=_}else{if(x[c]===k[c]){var w=[],T=[],C=0;for(_=a.length-1;_>=0;--_){var M=a[_];if(e[M]=!1,w.push(M),T.push(l[M]),C+=l[M].length,i[M]=t.length,M===c){a.length=_;break}}t.push(w);var I=new Array(C);for(_=0;_<T.length;_++)for(var P=0;P<T[_].length;P++)I[--C]=T[_][P];h.push(I)}y.pop()}}}for(r=0;r<g;++r)k[r]<0&&s(r);for(r=0;r<h.length;r++){var o=h[r];if(0!==o.length){o.sort(function(c,a){return c-a}),d=[o[0]];for(var p=1;p<o.length;p++)o[p]!==o[p-1]&&d.push(o[p]);h[r]=d}}return{components:t,adjacencyList:h}}},{}],308:[function(v,$,Q){"use strict";Object.defineProperty(Q,"__esModule",{value:!0});var g=2*Math.PI,k=function(n,i,l,r,d,f,t){var h=n.x,s=n.y;return{x:r*(h*=i)-d*(s*=l)+f,y:d*h+r*s+t}},x=function(n,i){var l=1.5707963267948966===i?.551915024494:-1.5707963267948966===i?-.551915024494:1.3333333333333333*Math.tan(i/4),r=Math.cos(n),d=Math.sin(n),f=Math.cos(n+i),t=Math.sin(n+i);return[{x:r-d*l,y:d+r*l},{x:f+t*l,y:t-f*l},{x:f,y:t}]},e=function(n,i,l,r){var d=n*l+i*r;return d>1&&(d=1),d<-1&&(d=-1),(n*r-i*l<0?-1:1)*Math.acos(d)};Q.default=function(n){var i=n.px,l=n.py,r=n.cx,d=n.cy,f=n.rx,t=n.ry,h=n.xAxisRotation,s=void 0===h?0:h,o=n.largeArcFlag,p=void 0===o?0:o,c=n.sweepFlag,a=void 0===c?0:c,y=[];if(0===f||0===t)return[];var u=Math.sin(s*g/360),_=Math.cos(s*g/360),b=_*(i-r)/2+u*(l-d)/2,w=-u*(i-r)/2+_*(l-d)/2;if(0===b&&0===w)return[];f=Math.abs(f),t=Math.abs(t);var T=Math.pow(b,2)/Math.pow(f,2)+Math.pow(w,2)/Math.pow(t,2);T>1&&(f*=Math.sqrt(T),t*=Math.sqrt(T));var M=function(n,i){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(l,r){var d=[],f=!0,t=!1,h=void 0;try{for(var s,o=l[Symbol.iterator]();!(f=(s=o.next()).done)&&(d.push(s.value),!r||d.length!==r);f=!0);}catch(p){t=!0,h=p}finally{try{!f&&o.return&&o.return()}finally{if(t)throw h}}return d}(n,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(H,Y,X,Z,W,re,U,B,V,ee,N,K){var J=Math.pow(W,2),te=Math.pow(re,2),ae=Math.pow(N,2),le=Math.pow(K,2),se=J*te-J*le-te*ae;se<0&&(se=0),se/=J*le+te*ae;var ve=(se=Math.sqrt(se)*(U===B?-1:1))*W/re*K,ue=se*-re/W*N,ye=ee*ve-V*ue+(H+X)/2,Me=V*ve+ee*ue+(Y+Z)/2,pe=(N-ve)/W,ge=(K-ue)/re,we=(-N-ve)/W,oe=(-K-ue)/re,de=e(1,0,pe,ge),Te=e(pe,ge,we,oe);return 0===B&&Te>0&&(Te-=g),1===B&&Te<0&&(Te+=g),[ye,Me,de,Te]}(i,l,r,d,f,t,p,a,u,_,b,w),4),I=M[0],P=M[1],S=M[2],E=M[3],R=Math.abs(E)/(g/4);Math.abs(1-R)<1e-7&&(R=1);var D=Math.max(Math.ceil(R),1);E/=D;for(var j=0;j<D;j++)y.push(x(S,E)),S+=E;return y.map(function(H){var Y=k(H[0],f,t,_,u,I,P),X=Y.x,Z=Y.y,W=k(H[1],f,t,_,u,I,P),re=W.x,U=W.y,B=k(H[2],f,t,_,u,I,P);return{x1:X,y1:Z,x2:re,y2:U,x:B.x,y:B.y}})},$.exports=Q.default},{}],309:[function(v,$,Q){"use strict";var m=v("parse-svg-path"),g=v("abs-svg-path"),k=v("normalize-svg-path"),x=v("is-svg-path"),e=v("assert");$.exports=function(n){if(Array.isArray(n)&&1===n.length&&"string"==typeof n[0]&&(n=n[0]),"string"==typeof n&&(e(x(n),"String is not an SVG path."),n=m(n)),e(Array.isArray(n),"Argument should be a string or an array of path segments."),n=g(n),!(n=k(n)).length)return[0,0,0,0];for(var i=[1/0,1/0,-1/0,-1/0],l=0,r=n.length;l<r;l++)for(var d=n[l].slice(1),f=0;f<d.length;f+=2)d[f+0]<i[0]&&(i[0]=d[f+0]),d[f+1]<i[1]&&(i[1]=d[f+1]),d[f+0]>i[2]&&(i[2]=d[f+0]),d[f+1]>i[3]&&(i[3]=d[f+1]);return i}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":310,"parse-svg-path":250}],310:[function(v,$,Q){"use strict";$.exports=function(x){for(var e,n=[],i=0,l=0,r=0,d=0,f=null,t=null,h=0,s=0,o=0,p=x.length;o<p;o++){var c=x[o],a=c[0];switch(a){case"M":r=c[1],d=c[2];break;case"A":var y=m({px:h,py:s,cx:c[6],cy:c[7],rx:c[1],ry:c[2],xAxisRotation:c[3],largeArcFlag:c[4],sweepFlag:c[5]});if(!y.length)continue;for(var u,_=0;_<y.length;_++)c=["C",(u=y[_]).x1,u.y1,u.x2,u.y2,u.x,u.y],_<y.length-1&&n.push(c);break;case"S":var b=h,w=s;"C"!=e&&"S"!=e||(b+=b-i,w+=w-l),c=["C",b,w,c[1],c[2],c[3],c[4]];break;case"T":"Q"==e||"T"==e?(f=2*h-f,t=2*s-t):(f=h,t=s),c=k(h,s,f,t,c[1],c[2]);break;case"Q":f=c[1],t=c[2],c=k(h,s,c[1],c[2],c[3],c[4]);break;case"L":c=g(h,s,c[1],c[2]);break;case"H":c=g(h,s,c[1],s);break;case"V":c=g(h,s,h,c[1]);break;case"Z":c=g(h,s,r,d)}e=a,h=c[c.length-2],s=c[c.length-1],c.length>4?(i=c[c.length-4],l=c[c.length-3]):(i=h,l=s),n.push(c)}return n};var m=v("svg-arc-to-cubic-bezier");function g(x,e,n,i){return["C",x,e,n,i,n,i]}function k(x,e,n,i,l,r){return["C",x/3+2/3*n,e/3+2/3*i,l/3+2/3*n,r/3+2/3*i,l,r]}},{"svg-arc-to-cubic-bezier":308}],311:[function(v,$,Q){"use strict";var m,g=v("svg-path-bounds"),k=v("parse-svg-path"),x=v("draw-svg-path"),e=v("is-svg-path"),n=v("bitmap-sdf"),i=document.createElement("canvas"),l=i.getContext("2d");$.exports=function(r,d){if(!e(r))throw Error("Argument should be valid svg path string");var f,t;d||(d={}),d.shape?(f=d.shape[0],t=d.shape[1]):(f=i.width=d.w||d.width||200,t=i.height=d.h||d.height||200);var h=Math.min(f,t),s=d.stroke||0,o=d.viewbox||d.viewBox||g(r),p=[f/(o[2]-o[0]),t/(o[3]-o[1])],c=Math.min(p[0]||0,p[1]||0)/2;if(l.fillStyle="black",l.fillRect(0,0,f,t),l.fillStyle="white",s&&("number"!=typeof s&&(s=1),l.strokeStyle=s>0?"white":"black",l.lineWidth=Math.abs(s)),l.translate(.5*f,.5*t),l.scale(c,c),function(){if(null!=m)return m;var u=document.createElement("canvas").getContext("2d");if(u.canvas.width=u.canvas.height=1,!window.Path2D)return m=!1;var _=new Path2D("M0,0h1v1h-1v-1Z");u.fillStyle="black",u.fill(_);var b=u.getImageData(0,0,1,1);return m=b&&b.data&&255===b.data[3]}()){var a=new Path2D(r);l.fill(a),s&&l.stroke(a)}else{var y=k(r);x(l,y),l.fill(),s&&l.stroke()}return l.setTransform(1,0,0,1,0,0),n(l,{cutoff:null!=d.cutoff?d.cutoff:.5,radius:null!=d.radius?d.radius:.5*h})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":309}],312:[function(v,$,Q){(function(m,g){(function(){var k=v("process/browser.js").nextTick,x=Function.prototype.apply,e=Array.prototype.slice,n={},i=0;function l(r,d){this._id=r,this._clearFn=d}Q.setTimeout=function(){return new l(x.call(setTimeout,window,arguments),clearTimeout)},Q.setInterval=function(){return new l(x.call(setInterval,window,arguments),clearInterval)},Q.clearTimeout=Q.clearInterval=function(r){r.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},Q.enroll=function(r,d){clearTimeout(r._idleTimeoutId),r._idleTimeout=d},Q.unenroll=function(r){clearTimeout(r._idleTimeoutId),r._idleTimeout=-1},Q._unrefActive=Q.active=function(r){clearTimeout(r._idleTimeoutId);var d=r._idleTimeout;d>=0&&(r._idleTimeoutId=setTimeout(function(){r._onTimeout&&r._onTimeout()},d))},Q.setImmediate="function"==typeof m?m:function(r){var d=i++,f=!(arguments.length<2)&&e.call(arguments,1);return n[d]=!0,k(function(){n[d]&&(f?r.apply(null,f):r.call(null),Q.clearImmediate(d))}),d},Q.clearImmediate="function"==typeof g?g:function(r){delete n[r]}}).call(this)}).call(this,v("timers").setImmediate,v("timers").clearImmediate)},{"process/browser.js":278,timers:312}],313:[function(v,$,Q){!function(m){var g=/^\s+/,k=/\s+$/,x=0,e=m.round,n=m.min,i=m.max,l=m.random;function r(V,ee){if(ee=ee||{},(V=V||"")instanceof r)return V;if(!(this instanceof r))return new r(V,ee);var K,Me,pe,J,te,ae,le,se,ve,ue,N=(J={r:0,g:0,b:0},te=1,ae=null,le=null,se=null,ve=!1,ue=!1,"string"==typeof(K=V)&&(K=function(ge){ge=ge.replace(g,"").replace(k,"").toLowerCase();var we,oe=!1;if(I[ge])ge=I[ge],oe=!0;else if("transparent"==ge)return{r:0,g:0,b:0,a:0,format:"name"};return(we=U.rgb.exec(ge))?{r:we[1],g:we[2],b:we[3]}:(we=U.rgba.exec(ge))?{r:we[1],g:we[2],b:we[3],a:we[4]}:(we=U.hsl.exec(ge))?{h:we[1],s:we[2],l:we[3]}:(we=U.hsla.exec(ge))?{h:we[1],s:we[2],l:we[3],a:we[4]}:(we=U.hsv.exec(ge))?{h:we[1],s:we[2],v:we[3]}:(we=U.hsva.exec(ge))?{h:we[1],s:we[2],v:we[3],a:we[4]}:(we=U.hex8.exec(ge))?{r:D(we[1]),g:D(we[2]),b:D(we[3]),a:X(we[4]),format:oe?"name":"hex8"}:(we=U.hex6.exec(ge))?{r:D(we[1]),g:D(we[2]),b:D(we[3]),format:oe?"name":"hex"}:(we=U.hex4.exec(ge))?{r:D(we[1]+""+we[1]),g:D(we[2]+""+we[2]),b:D(we[3]+""+we[3]),a:X(we[4]+""+we[4]),format:oe?"name":"hex8"}:!!(we=U.hex3.exec(ge))&&{r:D(we[1]+""+we[1]),g:D(we[2]+""+we[2]),b:D(we[3]+""+we[3]),format:oe?"name":"hex"}}(K)),"object"==typeof K&&(B(K.r)&&B(K.g)&&B(K.b)?(Me=K.g,pe=K.b,J={r:255*E(K.r,255),g:255*E(Me,255),b:255*E(pe,255)},ve=!0,ue="%"===String(K.r).substr(-1)?"prgb":"rgb"):B(K.h)&&B(K.s)&&B(K.v)?(ae=H(K.s),le=H(K.v),J=function(ge,we,oe){ge=6*E(ge,360),we=E(we,100),oe=E(oe,100);var de=m.floor(ge),Te=ge-de,Ee=oe*(1-we),Ae=oe*(1-Te*we),De=oe*(1-(1-Te)*we),Ie=de%6;return{r:255*[oe,Ae,Ee,Ee,De,oe][Ie],g:255*[De,oe,oe,Ae,Ee,Ee][Ie],b:255*[Ee,Ee,De,oe,oe,Ae][Ie]}}(K.h,ae,le),ve=!0,ue="hsv"):B(K.h)&&B(K.s)&&B(K.l)&&(ae=H(K.s),se=H(K.l),J=function(ge,we,oe){var de,Te,Ee;function Ae(Oe,Xe,Fe){return Fe<0&&(Fe+=1),Fe>1&&(Fe-=1),Fe<1/6?Oe+6*(Xe-Oe)*Fe:Fe<.5?Xe:Fe<2/3?Oe+(Xe-Oe)*(2/3-Fe)*6:Oe}if(ge=E(ge,360),we=E(we,100),oe=E(oe,100),0===we)de=Te=Ee=oe;else{var De=oe<.5?oe*(1+we):oe+we-oe*we,Ie=2*oe-De;de=Ae(Ie,De,ge+1/3),Te=Ae(Ie,De,ge),Ee=Ae(Ie,De,ge-1/3)}return{r:255*de,g:255*Te,b:255*Ee}}(K.h,ae,se),ve=!0,ue="hsl"),K.hasOwnProperty("a")&&(te=K.a)),te=S(te),{ok:ve,format:K.format||ue,r:n(255,i(J.r,0)),g:n(255,i(J.g,0)),b:n(255,i(J.b,0)),a:te});this._originalInput=V,this._r=N.r,this._g=N.g,this._b=N.b,this._a=N.a,this._roundA=e(100*this._a)/100,this._format=ee.format||N.format,this._gradientType=ee.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=N.ok,this._tc_id=x++}function d(V,ee,N){V=E(V,255),ee=E(ee,255),N=E(N,255);var K,J,te=i(V,ee,N),ae=n(V,ee,N),le=(te+ae)/2;if(te==ae)K=J=0;else{var se=te-ae;switch(J=le>.5?se/(2-te-ae):se/(te+ae),te){case V:K=(ee-N)/se+(ee<N?6:0);break;case ee:K=(N-V)/se+2;break;case N:K=(V-ee)/se+4}K/=6}return{h:K,s:J,l:le}}function f(V,ee,N){V=E(V,255),ee=E(ee,255),N=E(N,255);var K,J,te=i(V,ee,N),ae=n(V,ee,N),le=te,se=te-ae;if(J=0===te?0:se/te,te==ae)K=0;else{switch(te){case V:K=(ee-N)/se+(ee<N?6:0);break;case ee:K=(N-V)/se+2;break;case N:K=(V-ee)/se+4}K/=6}return{h:K,s:J,v:le}}function t(V,ee,N,K){var J=[j(e(V).toString(16)),j(e(ee).toString(16)),j(e(N).toString(16))];return K&&J[0].charAt(0)==J[0].charAt(1)&&J[1].charAt(0)==J[1].charAt(1)&&J[2].charAt(0)==J[2].charAt(1)?J[0].charAt(0)+J[1].charAt(0)+J[2].charAt(0):J.join("")}function h(V,ee,N,K){return[j(Y(K)),j(e(V).toString(16)),j(e(ee).toString(16)),j(e(N).toString(16))].join("")}function s(V,ee){ee=0===ee?0:ee||10;var N=r(V).toHsl();return N.s-=ee/100,N.s=R(N.s),r(N)}function o(V,ee){ee=0===ee?0:ee||10;var N=r(V).toHsl();return N.s+=ee/100,N.s=R(N.s),r(N)}function p(V){return r(V).desaturate(100)}function c(V,ee){ee=0===ee?0:ee||10;var N=r(V).toHsl();return N.l+=ee/100,N.l=R(N.l),r(N)}function a(V,ee){ee=0===ee?0:ee||10;var N=r(V).toRgb();return N.r=i(0,n(255,N.r-e(-ee/100*255))),N.g=i(0,n(255,N.g-e(-ee/100*255))),N.b=i(0,n(255,N.b-e(-ee/100*255))),r(N)}function y(V,ee){ee=0===ee?0:ee||10;var N=r(V).toHsl();return N.l-=ee/100,N.l=R(N.l),r(N)}function u(V,ee){var N=r(V).toHsl(),K=(N.h+ee)%360;return N.h=K<0?360+K:K,r(N)}function _(V){var ee=r(V).toHsl();return ee.h=(ee.h+180)%360,r(ee)}function b(V){var ee=r(V).toHsl(),N=ee.h;return[r(V),r({h:(N+120)%360,s:ee.s,l:ee.l}),r({h:(N+240)%360,s:ee.s,l:ee.l})]}function w(V){var ee=r(V).toHsl(),N=ee.h;return[r(V),r({h:(N+90)%360,s:ee.s,l:ee.l}),r({h:(N+180)%360,s:ee.s,l:ee.l}),r({h:(N+270)%360,s:ee.s,l:ee.l})]}function T(V){var ee=r(V).toHsl(),N=ee.h;return[r(V),r({h:(N+72)%360,s:ee.s,l:ee.l}),r({h:(N+216)%360,s:ee.s,l:ee.l})]}function C(V,ee,N){ee=ee||6,N=N||30;var K=r(V).toHsl(),J=360/N,te=[r(V)];for(K.h=(K.h-(J*ee>>1)+720)%360;--ee;)K.h=(K.h+J)%360,te.push(r(K));return te}function M(V,ee){ee=ee||6;for(var N=r(V).toHsv(),K=N.h,J=N.s,te=N.v,ae=[],le=1/ee;ee--;)ae.push(r({h:K,s:J,v:te})),te=(te+le)%1;return ae}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var V=this.toRgb();return(299*V.r+587*V.g+114*V.b)/1e3},getLuminance:function(){var V,ee,N,K=this.toRgb();return ee=K.g/255,N=K.b/255,.2126*((V=K.r/255)<=.03928?V/12.92:m.pow((V+.055)/1.055,2.4))+.7152*(ee<=.03928?ee/12.92:m.pow((ee+.055)/1.055,2.4))+.0722*(N<=.03928?N/12.92:m.pow((N+.055)/1.055,2.4))},setAlpha:function(V){return this._a=S(V),this._roundA=e(100*this._a)/100,this},toHsv:function(){var V=f(this._r,this._g,this._b);return{h:360*V.h,s:V.s,v:V.v,a:this._a}},toHsvString:function(){var V=f(this._r,this._g,this._b),ee=e(360*V.h),N=e(100*V.s),K=e(100*V.v);return 1==this._a?"hsv("+ee+", "+N+"%, "+K+"%)":"hsva("+ee+", "+N+"%, "+K+"%, "+this._roundA+")"},toHsl:function(){var V=d(this._r,this._g,this._b);return{h:360*V.h,s:V.s,l:V.l,a:this._a}},toHslString:function(){var V=d(this._r,this._g,this._b),ee=e(360*V.h),N=e(100*V.s),K=e(100*V.l);return 1==this._a?"hsl("+ee+", "+N+"%, "+K+"%)":"hsla("+ee+", "+N+"%, "+K+"%, "+this._roundA+")"},toHex:function(V){return t(this._r,this._g,this._b,V)},toHexString:function(V){return"#"+this.toHex(V)},toHex8:function(V){return N=this._g,K=this._b,J=this._a,te=V,ae=[j(e(this._r).toString(16)),j(e(N).toString(16)),j(e(K).toString(16)),j(Y(J))],te&&ae[0].charAt(0)==ae[0].charAt(1)&&ae[1].charAt(0)==ae[1].charAt(1)&&ae[2].charAt(0)==ae[2].charAt(1)&&ae[3].charAt(0)==ae[3].charAt(1)?ae[0].charAt(0)+ae[1].charAt(0)+ae[2].charAt(0)+ae[3].charAt(0):ae.join("");var N,K,J,te,ae},toHex8String:function(V){return"#"+this.toHex8(V)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*E(this._r,255))+"%",g:e(100*E(this._g,255))+"%",b:e(100*E(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+e(100*E(this._r,255))+"%, "+e(100*E(this._g,255))+"%, "+e(100*E(this._b,255))+"%)":"rgba("+e(100*E(this._r,255))+"%, "+e(100*E(this._g,255))+"%, "+e(100*E(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(P[t(this._r,this._g,this._b,!0)]||!1)},toFilter:function(V){var ee="#"+h(this._r,this._g,this._b,this._a),N=ee,K=this._gradientType?"GradientType = 1, ":"";if(V){var J=r(V);N="#"+h(J._r,J._g,J._b,J._a)}return"progid:DXImageTransform.Microsoft.gradient("+K+"startColorstr="+ee+",endColorstr="+N+")"},toString:function(V){var ee=!!V;V=V||this._format;var N=!1;return ee||!(this._a<1&&this._a>=0)||"hex"!==V&&"hex6"!==V&&"hex3"!==V&&"hex4"!==V&&"hex8"!==V&&"name"!==V?("rgb"===V&&(N=this.toRgbString()),"prgb"===V&&(N=this.toPercentageRgbString()),"hex"!==V&&"hex6"!==V||(N=this.toHexString()),"hex3"===V&&(N=this.toHexString(!0)),"hex4"===V&&(N=this.toHex8String(!0)),"hex8"===V&&(N=this.toHex8String()),"name"===V&&(N=this.toName()),"hsl"===V&&(N=this.toHslString()),"hsv"===V&&(N=this.toHsvString()),N||this.toHexString()):"name"===V&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(V,ee){var N=V.apply(null,[this].concat([].slice.call(ee)));return this._r=N._r,this._g=N._g,this._b=N._b,this.setAlpha(N._a),this},lighten:function(){return this._applyModification(c,arguments)},brighten:function(){return this._applyModification(a,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(s,arguments)},saturate:function(){return this._applyModification(o,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(u,arguments)},_applyCombination:function(V,ee){return V.apply(null,[this].concat([].slice.call(ee)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(M,arguments)},splitcomplement:function(){return this._applyCombination(T,arguments)},triad:function(){return this._applyCombination(b,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},r.fromRatio=function(V,ee){if("object"==typeof V){var N={};for(var K in V)V.hasOwnProperty(K)&&(N[K]="a"===K?V[K]:H(V[K]));V=N}return r(V,ee)},r.equals=function(V,ee){return!(!V||!ee)&&r(V).toRgbString()==r(ee).toRgbString()},r.random=function(){return r.fromRatio({r:l(),g:l(),b:l()})},r.mix=function(V,ee,N){N=0===N?0:N||50;var K=r(V).toRgb(),J=r(ee).toRgb(),te=N/100;return r({r:(J.r-K.r)*te+K.r,g:(J.g-K.g)*te+K.g,b:(J.b-K.b)*te+K.b,a:(J.a-K.a)*te+K.a})},r.readability=function(V,ee){var N=r(V),K=r(ee);return(m.max(N.getLuminance(),K.getLuminance())+.05)/(m.min(N.getLuminance(),K.getLuminance())+.05)},r.isReadable=function(V,ee,N){var K,J,ae,le,se,te=r.readability(V,ee);switch(J=!1,(ae=N,"AA"!==(le=((ae=ae||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==le&&(le="AA"),"small"!==(se=(ae.size||"small").toLowerCase())&&"large"!==se&&(se="small"),K={level:le,size:se}).level+K.size){case"AAsmall":case"AAAlarge":J=te>=4.5;break;case"AAlarge":J=te>=3;break;case"AAAsmall":J=te>=7}return J},r.mostReadable=function(V,ee,N){var K,J,te,ae,le=null,se=0;J=(N=N||{}).includeFallbackColors,te=N.level,ae=N.size;for(var ve=0;ve<ee.length;ve++)(K=r.readability(V,ee[ve]))>se&&(se=K,le=r(ee[ve]));return r.isReadable(V,le,{level:te,size:ae})||!J?le:(N.includeFallbackColors=!1,r.mostReadable(V,["#fff","#000"],N))};var I=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=r.hexNames=function(V){var ee={};for(var N in V)V.hasOwnProperty(N)&&(ee[V[N]]=N);return ee}(I);function S(V){return V=parseFloat(V),(isNaN(V)||V<0||V>1)&&(V=1),V}function E(V,ee){var K;"string"==typeof(K=V)&&-1!=K.indexOf(".")&&1===parseFloat(K)&&(V="100%");var N=function(K){return"string"==typeof K&&-1!=K.indexOf("%")}(V);return V=n(ee,i(0,parseFloat(V))),N&&(V=parseInt(V*ee,10)/100),m.abs(V-ee)<1e-6?1:V%ee/parseFloat(ee)}function R(V){return n(1,i(0,V))}function D(V){return parseInt(V,16)}function j(V){return 1==V.length?"0"+V:""+V}function H(V){return V<=1&&(V=100*V+"%"),V}function Y(V){return m.round(255*parseFloat(V)).toString(16)}function X(V){return D(V)/255}var Z,W,re,U=(W="[\\s|\\(]+("+(Z="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Z+")[,|\\s]+("+Z+")\\s*\\)?",re="[\\s|\\(]+("+Z+")[,|\\s]+("+Z+")[,|\\s]+("+Z+")[,|\\s]+("+Z+")\\s*\\)?",{CSS_UNIT:new RegExp(Z),rgb:new RegExp("rgb"+W),rgba:new RegExp("rgba"+re),hsl:new RegExp("hsl"+W),hsla:new RegExp("hsla"+re),hsv:new RegExp("hsv"+W),hsva:new RegExp("hsva"+re),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function B(V){return!!U.CSS_UNIT.exec(V)}void 0!==$&&$.exports?$.exports=r:window.tinycolor=r}(Math)},{}],314:[function(v,$,Q){"use strict";$.exports=g,$.exports.float32=$.exports.float=g,$.exports.fract32=$.exports.fract=function(k,x){if(k.length){if(k instanceof Float32Array)return new Float32Array(k.length);x instanceof Float32Array||(x=g(k));for(var e=0,n=x.length;e<n;e++)x[e]=k[e]-x[e];return x}return g(k-g(k))};var m=new Float32Array(1);function g(k){return k.length?k instanceof Float32Array?k:new Float32Array(k):(m[0]=k,m[0])}},{}],315:[function(v,$,Q){"use strict";var m=v("parse-unit");function g(x,e){var n=m(getComputedStyle(x).getPropertyValue(e));return n[0]*k(n[1],x)}function k(x,e){switch(e=e||document.body,x=(x||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),x){case"%":return e.clientHeight/100;case"ch":case"ex":return function(n,i){var l=document.createElement("div");l.style["font-size"]="128"+n,i.appendChild(l);var r=g(l,"font-size")/128;return i.removeChild(l),r}(x,e);case"em":return g(e,"font-size");case"rem":return g(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}$.exports=k},{"parse-unit":251}],316:[function(v,$,Q){var m,g;m=this,g=function(m){"use strict";function g(h){return h}function k(h){if(null==h)return g;var s,o,p=h.scale[0],c=h.scale[1],a=h.translate[0],y=h.translate[1];return function(u,_){_||(s=o=0);var b=2,w=u.length,T=new Array(w);for(T[0]=(s+=u[0])*p+a,T[1]=(o+=u[1])*c+y;b<w;)T[b]=u[b],++b;return T}}function x(h){var s,o=k(h.transform),p=1/0,c=p,a=-p,y=-p;function u(b){(b=o(b))[0]<p&&(p=b[0]),b[0]>a&&(a=b[0]),b[1]<c&&(c=b[1]),b[1]>y&&(y=b[1])}function _(b){switch(b.type){case"GeometryCollection":b.geometries.forEach(_);break;case"Point":u(b.coordinates);break;case"MultiPoint":b.coordinates.forEach(u)}}for(s in h.arcs.forEach(function(b){for(var w,T=-1,C=b.length;++T<C;)(w=o(b[T],T))[0]<p&&(p=w[0]),w[0]>a&&(a=w[0]),w[1]<c&&(c=w[1]),w[1]>y&&(y=w[1])}),h.objects)_(h.objects[s]);return[p,c,a,y]}function e(h,s){var o=s.id,p=s.bbox,c=null==s.properties?{}:s.properties,a=n(h,s);return null==o&&null==p?{type:"Feature",properties:c,geometry:a}:null==p?{type:"Feature",id:o,properties:c,geometry:a}:{type:"Feature",id:o,bbox:p,properties:c,geometry:a}}function n(h,s){var o=k(h.transform),p=h.arcs;function c(b,w){w.length&&w.pop();for(var T=p[b<0?~b:b],C=0,M=T.length;C<M;++C)w.push(o(T[C],C));b<0&&function(I,P){for(var S,E=I.length,R=E-P;R<--E;)S=I[R],I[R++]=I[E],I[E]=S}(w,M)}function a(b){return o(b)}function y(b){for(var w=[],T=0,C=b.length;T<C;++T)c(b[T],w);return w.length<2&&w.push(w[0]),w}function u(b){for(var w=y(b);w.length<4;)w.push(w[0]);return w}function _(b){return b.map(u)}return function b(w){var T,C=w.type;switch(C){case"GeometryCollection":return{type:C,geometries:w.geometries.map(b)};case"Point":T=a(w.coordinates);break;case"MultiPoint":T=w.coordinates.map(a);break;case"LineString":T=y(w.arcs);break;case"MultiLineString":T=w.arcs.map(y);break;case"Polygon":T=_(w.arcs);break;case"MultiPolygon":T=w.arcs.map(_);break;default:return null}return{type:C,coordinates:T}}(s)}function i(h,s){var o={},p={},c={},a=[],y=-1;function u(_,b){for(var w in _){var T=_[w];delete b[T.start],delete T.start,delete T.end,T.forEach(function(C){o[C<0?~C:C]=1}),a.push(T)}}return s.forEach(function(_,b){var w,T=h.arcs[_<0?~_:_];T.length<3&&!T[1][0]&&!T[1][1]&&(w=s[++y],s[y]=_,s[b]=w)}),s.forEach(function(_){var b,w,S,E,R,D,T=(D=(R=h.arcs[(S=_)<0?~S:S])[0],h.transform?(E=[0,0],R.forEach(function(j){E[0]+=j[0],E[1]+=j[1]})):E=R[R.length-1],S<0?[E,D]:[D,E]),C=T[0],M=T[1];if(b=c[C])if(delete c[b.end],b.push(_),b.end=M,w=p[M]){delete p[w.start];var I=w===b?b:b.concat(w);p[I.start=b.start]=c[I.end=w.end]=I}else p[b.start]=c[b.end]=b;else if(b=p[M])if(delete p[b.start],b.unshift(_),b.start=C,w=c[C]){delete c[w.end];var P=w===b?b:w.concat(b);p[P.start=w.start]=c[P.end=b.end]=P}else p[b.start]=c[b.end]=b;else p[(b=[_]).start=C]=c[b.end=M]=b}),u(c,p),u(p,c),s.forEach(function(_){o[_<0?~_:_]||a.push([_])}),a}function l(h,s,o){var p,c,a;if(arguments.length>1)p=r(0,s,o);else for(c=0,p=new Array(a=h.arcs.length);c<a;++c)p[c]=c;return{type:"MultiLineString",arcs:i(h,p)}}function r(h,s,o){var p,c=[],a=[];function y(b){var w=b<0?~b:b;(a[w]||(a[w]=[])).push({i:b,g:p})}function u(b){b.forEach(y)}function _(b){b.forEach(u)}return function b(w){switch(p=w,w.type){case"GeometryCollection":w.geometries.forEach(b);break;case"LineString":u(w.arcs);break;case"MultiLineString":case"Polygon":_(w.arcs);break;case"MultiPolygon":w.arcs.forEach(_)}}(s),a.forEach(null==o?function(b){c.push(b[0].i)}:function(b){o(b[0].g,b[b.length-1].g)&&c.push(b[0].i)}),c}function d(h,s){var o={},p=[],c=[];function a(u){u.forEach(function(_){_.forEach(function(b){(o[b=b<0?~b:b]||(o[b]=[])).push(u)})}),p.push(u)}function y(u){return function(_){for(var b,w=-1,T=_.length,C=_[T-1],M=0;++w<T;)M+=(b=C)[0]*(C=_[w])[1]-b[1]*C[0];return Math.abs(M)}(n(h,{type:"Polygon",arcs:[u]}).coordinates[0])}return s.forEach(function u(_){switch(_.type){case"GeometryCollection":_.geometries.forEach(u);break;case"Polygon":a(_.arcs);break;case"MultiPolygon":_.arcs.forEach(a)}}),p.forEach(function(u){if(!u._){var _=[],b=[u];for(u._=1,c.push(_);u=b.pop();)_.push(u),u.forEach(function(w){w.forEach(function(T){o[T<0?~T:T].forEach(function(C){C._||(C._=1,b.push(C))})})})}}),p.forEach(function(u){delete u._}),{type:"MultiPolygon",arcs:c.map(function(u){var _,b=[];if(u.forEach(function(I){I.forEach(function(P){P.forEach(function(S){o[S<0?~S:S].length<2&&b.push(S)})})}),(_=(b=i(h,b)).length)>1)for(var w,T,C=1,M=y(b[0]);C<_;++C)(w=y(b[C]))>M&&(T=b[0],b[0]=b[C],b[C]=T,M=w);return b}).filter(function(u){return u.length>0})}}function f(h,s){for(var o=0,p=h.length;o<p;){var c=o+p>>>1;h[c]<s?o=c+1:p=c}return o}function t(h){if(null==h)return g;var s,o,p=h.scale[0],c=h.scale[1],a=h.translate[0],y=h.translate[1];return function(u,_){_||(s=o=0);var b=2,w=u.length,T=new Array(w),C=Math.round((u[0]-a)/p),M=Math.round((u[1]-y)/c);for(T[0]=C-s,s=C,T[1]=M-o,o=M;b<w;)T[b]=u[b],++b;return T}}m.bbox=x,m.feature=function(h,s){return"string"==typeof s&&(s=h.objects[s]),"GeometryCollection"===s.type?{type:"FeatureCollection",features:s.geometries.map(function(o){return e(h,o)})}:e(h,s)},m.merge=function(h){return n(h,d.apply(this,arguments))},m.mergeArcs=d,m.mesh=function(h){return n(h,l.apply(this,arguments))},m.meshArcs=l,m.neighbors=function(h){var s={},o=h.map(function(){return[]});function p(I,P){I.forEach(function(S){S<0&&(S=~S);var E=s[S];E?E.push(P):s[S]=[P]})}function c(I,P){I.forEach(function(S){p(S,P)})}var a={LineString:p,MultiLineString:c,Polygon:c,MultiPolygon:function(I,P){I.forEach(function(S){c(S,P)})}};for(var y in h.forEach(function I(P,S){"GeometryCollection"===P.type?P.geometries.forEach(function(E){I(E,S)}):P.type in a&&a[P.type](P.arcs,S)}),s)for(var u=s[y],_=u.length,b=0;b<_;++b)for(var w=b+1;w<_;++w){var T,C=u[b],M=u[w];(T=o[C])[y=f(T,M)]!==M&&T.splice(y,0,M),(T=o[M])[y=f(T,C)]!==C&&T.splice(y,0,C)}return o},m.quantize=function(h,s){if(h.transform)throw new Error("already quantized");if(s&&s.scale)u=h.bbox;else{if(!((o=Math.floor(s))>=2))throw new Error("n must be \u22652");var o,p=(u=h.bbox||x(h))[0],c=u[1],a=u[2],y=u[3];s={scale:[a-p?(a-p)/(o-1):1,y-c?(y-c)/(o-1):1],translate:[p,c]}}var u,_,b=t(s),w=h.objects,T={};function C(I){return b(I)}function M(I){var P;switch(I.type){case"GeometryCollection":P={type:"GeometryCollection",geometries:I.geometries.map(M)};break;case"Point":P={type:"Point",coordinates:C(I.coordinates)};break;case"MultiPoint":P={type:"MultiPoint",coordinates:I.coordinates.map(C)};break;default:return I}return null!=I.id&&(P.id=I.id),null!=I.bbox&&(P.bbox=I.bbox),null!=I.properties&&(P.properties=I.properties),P}for(_ in w)T[_]=M(w[_]);return{type:"Topology",bbox:u,transform:s,objects:T,arcs:h.arcs.map(function(I){var P,S=0,E=1,R=I.length,D=new Array(R);for(D[0]=b(I[0],0);++S<R;)((P=b(I[S],S))[0]||P[1])&&(D[E++]=P);return 1===E&&(D[E++]=[0,0]),D.length=E,D})}},m.transform=k,m.untransform=t,Object.defineProperty(m,"__esModule",{value:!0})},g("object"==typeof Q&&void 0!==$?Q:(m=m||self).topojson=m.topojson||{})},{}],317:[function(v,$,Q){"use strict";var m=v("../prototype/is");$.exports=function(g){if("function"!=typeof g||!hasOwnProperty.call(g,"length"))return!1;try{if("number"!=typeof g.length||"function"!=typeof g.call||"function"!=typeof g.apply)return!1}catch{return!1}return!m(g)}},{"../prototype/is":324}],318:[function(v,$,Q){"use strict";var m=v("../value/is"),g=v("../object/is"),k=v("../string/coerce"),x=v("./to-short-string"),e=function(n,i){return n.replace("%v",x(i))};$.exports=function(n,i,l){if(!g(l))throw new TypeError(e(i,n));if(!m(n)){if("default"in l)return l.default;if(l.isOptional)return null}var r=k(l.errorMessage);throw m(r)||(r=i),new TypeError(e(r,n))}},{"../object/is":321,"../string/coerce":325,"../value/is":327,"./to-short-string":320}],319:[function(v,$,Q){"use strict";$.exports=function(m){try{return m.toString()}catch{try{return String(m)}catch{return null}}}},{}],320:[function(v,$,Q){"use strict";var m=v("./safe-to-string"),g=/[\n\r\u2028\u2029]/g;$.exports=function(k){var x=m(k);return null===x?"<Non-coercible to string value>":(x.length>100&&(x=x.slice(0,99)+"\u2026"),x=x.replace(g,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":319}],321:[function(v,$,Q){"use strict";var m=v("../value/is"),g={object:!0,function:!0,undefined:!0};$.exports=function(k){return!!m(k)&&hasOwnProperty.call(g,typeof k)}},{"../value/is":327}],322:[function(v,$,Q){"use strict";var m=v("../lib/resolve-exception"),g=v("./is");$.exports=function(k){return g(k)?k:m(k,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":318,"./is":323}],323:[function(v,$,Q){"use strict";var m=v("../function/is"),g=/^\s*class[\s{/}]/,k=Function.prototype.toString;$.exports=function(x){return!!m(x)&&!g.test(k.call(x))}},{"../function/is":317}],324:[function(v,$,Q){"use strict";var m=v("../object/is");$.exports=function(g){if(!m(g))return!1;try{return!!g.constructor&&g.constructor.prototype===g}catch{return!1}}},{"../object/is":321}],325:[function(v,$,Q){"use strict";var m=v("../value/is"),g=v("../object/is"),k=Object.prototype.toString;$.exports=function(x){if(!m(x))return null;if(g(x)){var e=x.toString;if("function"!=typeof e||e===k)return null}try{return""+x}catch{return null}}},{"../object/is":321,"../value/is":327}],326:[function(v,$,Q){"use strict";var m=v("../lib/resolve-exception"),g=v("./is");$.exports=function(k){return g(k)?k:m(k,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":318,"./is":327}],327:[function(v,$,Q){"use strict";$.exports=function(m){return null!=m}},{}],328:[function(v,$,Q){(function(m){(function(){"use strict";var g=v("bit-twiddle"),k=v("dup"),x=v("buffer").Buffer;m.__TYPEDARRAY_POOL||(m.__TYPEDARRAY_POOL={UINT8:k([32,0]),UINT16:k([32,0]),UINT32:k([32,0]),BIGUINT64:k([32,0]),INT8:k([32,0]),INT16:k([32,0]),INT32:k([32,0]),BIGINT64:k([32,0]),FLOAT:k([32,0]),DOUBLE:k([32,0]),DATA:k([32,0]),UINT8C:k([32,0]),BUFFER:k([32,0])});var e=typeof Uint8ClampedArray<"u",n=typeof BigUint64Array<"u",i=typeof BigInt64Array<"u",l=m.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=k([32,0])),l.BIGUINT64||(l.BIGUINT64=k([32,0])),l.BIGINT64||(l.BIGINT64=k([32,0])),l.BUFFER||(l.BUFFER=k([32,0]));var r=l.DATA,d=l.BUFFER;function f(M){if(M){var P=g.log2(M.length||M.byteLength);r[P].push(M)}}function t(M){M=g.nextPow2(M);var I=g.log2(M),P=r[I];return P.length>0?P.pop():new ArrayBuffer(M)}function h(M){return new Uint8Array(t(M),0,M)}function s(M){return new Uint16Array(t(2*M),0,M)}function o(M){return new Uint32Array(t(4*M),0,M)}function p(M){return new Int8Array(t(M),0,M)}function c(M){return new Int16Array(t(2*M),0,M)}function a(M){return new Int32Array(t(4*M),0,M)}function y(M){return new Float32Array(t(4*M),0,M)}function u(M){return new Float64Array(t(8*M),0,M)}function _(M){return e?new Uint8ClampedArray(t(M),0,M):h(M)}function b(M){return n?new BigUint64Array(t(8*M),0,M):null}function w(M){return i?new BigInt64Array(t(8*M),0,M):null}function T(M){return new DataView(t(M),0,M)}function C(M){M=g.nextPow2(M);var I=g.log2(M),P=d[I];return P.length>0?P.pop():new x(M)}Q.free=function(M){if(x.isBuffer(M))d[g.log2(M.length)].push(M);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(M)&&(M=M.buffer),!M)return;var P=0|g.log2(M.length||M.byteLength);r[P].push(M)}},Q.freeUint8=Q.freeUint16=Q.freeUint32=Q.freeBigUint64=Q.freeInt8=Q.freeInt16=Q.freeInt32=Q.freeBigInt64=Q.freeFloat32=Q.freeFloat=Q.freeFloat64=Q.freeDouble=Q.freeUint8Clamped=Q.freeDataView=function(M){f(M.buffer)},Q.freeArrayBuffer=f,Q.freeBuffer=function(M){d[g.log2(M.length)].push(M)},Q.malloc=function(M,I){if(void 0===I||"arraybuffer"===I)return t(M);switch(I){case"uint8":return h(M);case"uint16":return s(M);case"uint32":return o(M);case"int8":return p(M);case"int16":return c(M);case"int32":return a(M);case"float":case"float32":return y(M);case"double":case"float64":return u(M);case"uint8_clamped":return _(M);case"bigint64":return w(M);case"biguint64":return b(M);case"buffer":return C(M);case"data":case"dataview":return T(M);default:return null}return null},Q.mallocArrayBuffer=t,Q.mallocUint8=h,Q.mallocUint16=s,Q.mallocUint32=o,Q.mallocInt8=p,Q.mallocInt16=c,Q.mallocInt32=a,Q.mallocFloat32=Q.mallocFloat=y,Q.mallocFloat64=Q.mallocDouble=u,Q.mallocUint8Clamped=_,Q.mallocBigUint64=b,Q.mallocBigInt64=w,Q.mallocDataView=T,Q.mallocBuffer=C,Q.clearCache=function(){for(var M=0;M<32;++M)l.UINT8[M].length=0,l.UINT16[M].length=0,l.UINT32[M].length=0,l.INT8[M].length=0,l.INT16[M].length=0,l.INT32[M].length=0,l.FLOAT[M].length=0,l.DOUBLE[M].length=0,l.BIGUINT64[M].length=0,l.BIGINT64[M].length=0,l.UINT8C[M].length=0,r[M].length=0,d[M].length=0}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],329:[function(v,$,Q){var m=/[\'\"]/;$.exports=function(g){return g?(m.test(g.charAt(0))&&(g=g.substr(1)),m.test(g.charAt(g.length-1))&&(g=g.substr(0,g.length-1)),g):""}},{}],330:[function(v,$,Q){"use strict";$.exports=function(m,g,k){Array.isArray(k)||(k=[].slice.call(arguments,2));for(var x=0,e=k.length;x<e;x++){var n=k[x];for(var i in n)if((void 0===g[i]||Array.isArray(g[i])||m[i]!==g[i])&&i in g){var l;if(!0===n[i])l=g[i];else if(!1===n[i]||"function"==typeof n[i]&&void 0===(l=n[i](g[i],m,g)))continue;m[i]=l}}return m}},{}],331:[function(v,$,Q){(function(m){(function(){function g(k){try{if(!m.localStorage)return!1}catch{return!1}var x=m.localStorage[k];return null!=x&&"true"===String(x).toLowerCase()}$.exports=function(k,x){if(g("noDeprecation"))return k;var e=!1;return function(){if(!e){if(g("throwDeprecation"))throw new Error(x);g("traceDeprecation")?console.trace(x):console.warn(x),e=!0}return k.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],332:[function(v,$,Q){var m=v("get-canvas-context");$.exports=function(g){return m("webgl",g)}},{"get-canvas-context":194}],333:[function(v,$,Q){var m=v("../main"),g=v("object-assign"),k=m.instance();function x(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}g(x.prototype=new m.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(f,t){if("string"==typeof f){var h=f.match(n);return h?h[0]:""}var s=this._validateYear(f),o=f.month(),p=""+this.toChineseMonth(s,o);return t&&p.length<2&&(p="0"+p),this.isIntercalaryMonth(s,o)&&(p+="i"),p},monthNames:function(f){if("string"==typeof f){var t=f.match(i);return t?t[0]:""}var h=this._validateYear(f),s=f.month(),o=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(h,s)-1];return this.isIntercalaryMonth(h,s)&&(o="\u95f0"+o),o},monthNamesShort:function(f){if("string"==typeof f){var t=f.match(l);return t?t[0]:""}var h=this._validateYear(f),s=f.month(),o=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(h,s)-1];return this.isIntercalaryMonth(h,s)&&(o="\u95f0"+o),o},parseMonth:function(f,t){f=this._validateYear(f);var h,s=parseInt(t);if(isNaN(s))"\u95f0"===t[0]&&(h=!0,t=t.substring(1)),"\u6708"===t[t.length-1]&&(t=t.substring(0,t.length-1)),s=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(t);else{var o=t[t.length-1];h="i"===o||"I"===o}return this.toMonthIndex(f,s,h)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(f,t){if(f.year&&(f=f.year()),"number"!=typeof f||f<1888||f>2111)throw t.replace(/\{0\}/,this.local.name);return f},toMonthIndex:function(f,t,h){var s=this.intercalaryMonth(f);if(h&&t!==s||t<1||t>12)throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return s?!h&&t<=s?t-1:t:t-1},toChineseMonth:function(f,t){f.year&&(t=(f=f.year()).month());var h=this.intercalaryMonth(f);if(t<0||t>(h?12:11))throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return h?t<h?t+1:t:t+1},intercalaryMonth:function(f){return f=this._validateYear(f),r[f-r[0]]>>13},isIntercalaryMonth:function(f,t){f.year&&(t=(f=f.year()).month());var h=this.intercalaryMonth(f);return!!h&&h===t},leapYear:function(f){return 0!==this.intercalaryMonth(f)},weekOfYear:function(f,t,h){var s,o=this._validateYear(f,m.local.invalidyear),p=d[o-d[0]];(s=k.newDate(p>>9&4095,p>>5&15,31&p)).add(4-(s.dayOfWeek()||7),"d");var u=this.toJD(f,t,h)-s.toJD();return 1+Math.floor(u/7)},monthsInYear:function(f){return this.leapYear(f)?13:12},daysInMonth:function(f,t){f.year&&(t=f.month(),f=f.year()),f=this._validateYear(f);var h=r[f-r[0]];if(t>(h>>13?12:11))throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return h&1<<12-t?30:29},weekDay:function(f,t,h){return(this.dayOfWeek(f,t,h)||7)<6},toJD:function(f,t,h){var s=this._validate(f,p,h,m.local.invalidDate);f=this._validateYear(s.year()),t=s.month(),h=s.day();var o=this.isIntercalaryMonth(f,t),p=this.toChineseMonth(f,t),c=function(a,y,u,_,b){var w,T,C;if("object"==typeof a)T=a,w=y||{};else{var M;if(!("number"==typeof a&&a>=1888&&a<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof y&&y>=1&&y<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof u&&u>=1&&u<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof _?(M=!1,w=_):(M=!!_,w={}),T={year:a,month:y,day:u,isIntercalary:M}}C=T.day-1;var I,P=r[T.year-r[0]],S=P>>13;I=S&&(T.month>S||T.isIntercalary)?T.month:T.month-1;for(var E=0;E<I;E++)C+=P&1<<12-E?30:29;var R=d[T.year-d[0]],D=new Date(R>>9&4095,(R>>5&15)-1,(31&R)+C);return w.year=D.getFullYear(),w.month=1+D.getMonth(),w.day=D.getDate(),w}(f,p,h,o);return k.toJD(c.year,c.month,c.day)},fromJD:function(f){var t=k.fromJD(f),h=function(o,p,c,a){var y,u;if("object"==typeof o)y=o,u=p||{};else{if(!("number"==typeof o&&o>=1888&&o<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof p&&p>=1&&p<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof c&&c>=1&&c<=31))throw new Error("Solar day outside range 1 - 31");y={year:o,month:p,day:c},u={}}var _=d[y.year-d[0]];u.year=(y.year<<9|y.month<<5|y.day)>=_?y.year:y.year-1,_=d[u.year-d[0]];var w,T=new Date(_>>9&4095,(_>>5&15)-1,31&_),C=new Date(y.year,y.month-1,y.day);w=Math.round((C-T)/864e5);var M,I=r[u.year-r[0]];for(M=0;M<13;M++){var P=I&1<<12-M?30:29;if(w<P)break;w-=P}var S=I>>13;return!S||M<S?(u.isIntercalary=!1,u.month=1+M):M===S?(u.isIntercalary=!0,u.month=M):(u.isIntercalary=!1,u.month=M),u.day=1+w,u}(t.year(),t.month(),t.day()),s=this.toMonthIndex(h.year,h.month,h.isIntercalary);return this.newDate(h.year,s,h.day)},fromString:function(f){var t=f.match(e),h=this._validateYear(+t[1]),p=this.toMonthIndex(h,+t[2],!!t[3]);return this.newDate(h,p,+t[4])},add:function(f,t,h){var s=f.year(),o=f.month(),p=this.isIntercalaryMonth(s,o),c=this.toChineseMonth(s,o),a=Object.getPrototypeOf(x.prototype).add.call(this,f,t,h);if("y"===h){var y=a.year(),u=a.month(),_=this.isIntercalaryMonth(y,c),b=this.toMonthIndex(y,c,!(!p||!_));b!==u&&a.month(b)}return a}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,n=/^\d?\d[iI]?/m,i=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,l=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;m.calendars.chinese=x;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],d=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":347,"object-assign":247}],334:[function(v,$,Q){var m=v("../main");function k(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}v("object-assign")(k.prototype=new m.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var e=this._validate(x,this.minMonth,this.minDay,m.local.invalidYear);return(x=e.year()+(e.year()<0?1:0))%4==3||x%4==-1},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear),13},weekOfYear:function(x,e,n){var i=this.newDate(x,e,n);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(x,e){var n=this._validate(x,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(x,e,n){return(this.dayOfWeek(x,e,n)||7)<6},toJD:function(x,e,n){var i=this._validate(x,e,n,m.local.invalidDate);return(x=i.year())<0&&x++,i.day()+30*(i.month()-1)+365*(x-1)+Math.floor(x/4)+this.jdEpoch-1},fromJD:function(x){var e=Math.floor(x)+.5-this.jdEpoch,n=Math.floor((e-Math.floor((e+366)/1461))/365)+1;n<=0&&n--,e=Math.floor(x)+.5-this.newDate(n,1,1).toJD();var i=Math.floor(e/30)+1;return this.newDate(n,i,e-30*(i-1)+1)}}),m.calendars.coptic=k},{"../main":347,"object-assign":247}],335:[function(v,$,Q){var m=v("../main");function k(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}v("object-assign")(k.prototype=new m.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),400},weekOfYear:function(e,n,i){var l=this.newDate(e,n,i);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/8)+1},daysInMonth:function(e,n){var i=this._validate(e,n,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,n,i){return(this._validate(e,n,i,m.local.invalidDate).day()+1)%8},weekDay:function(e,n,i){var l=this.dayOfWeek(e,n,i);return l>=2&&l<=6},extraInfo:function(e,n,i){var l=this._validate(e,n,i,m.local.invalidDate);return{century:x[Math.floor((l.year()-1)/100)+1]||""}},toJD:function(e,n,i){var l=this._validate(e,n,i,m.local.invalidDate);return e=l.year()+(l.year()<0?1:0),n=l.month(),(i=l.day())+(n>1?16:0)+(n>2?32*(n-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var n=Math.floor(e/400)+1;e-=400*(n-1),e+=e>15?16:0;var i=Math.floor(e/32)+1;return this.newDate(n<=0?n-1:n,i,e-32*(i-1)+1)}});var x={20:"Fruitbat",21:"Anchovy"};m.calendars.discworld=k},{"../main":347,"object-assign":247}],336:[function(v,$,Q){var m=v("../main");function k(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}v("object-assign")(k.prototype=new m.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var e=this._validate(x,this.minMonth,this.minDay,m.local.invalidYear);return(x=e.year()+(e.year()<0?1:0))%4==3||x%4==-1},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear),13},weekOfYear:function(x,e,n){var i=this.newDate(x,e,n);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(x,e){var n=this._validate(x,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(x,e,n){return(this.dayOfWeek(x,e,n)||7)<6},toJD:function(x,e,n){var i=this._validate(x,e,n,m.local.invalidDate);return(x=i.year())<0&&x++,i.day()+30*(i.month()-1)+365*(x-1)+Math.floor(x/4)+this.jdEpoch-1},fromJD:function(x){var e=Math.floor(x)+.5-this.jdEpoch,n=Math.floor((e-Math.floor((e+366)/1461))/365)+1;n<=0&&n--,e=Math.floor(x)+.5-this.newDate(n,1,1).toJD();var i=Math.floor(e/30)+1;return this.newDate(n,i,e-30*(i-1)+1)}}),m.calendars.ethiopian=k},{"../main":347,"object-assign":247}],337:[function(v,$,Q){var m=v("../main");function k(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function x(e,n){return e-n*Math.floor(e/n)}v("object-assign")(k.prototype=new m.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return this._leapYear(n.year())},_leapYear:function(e){return x(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,n,i){var l=this.newDate(e,n,i);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,n){return e.year&&(n=e.month(),e=e.year()),this._validate(e,n,this.minDay,m.local.invalidMonth),12===n&&this.leapYear(e)||8===n&&5===x(this.daysInYear(e),10)?30:9===n&&3===x(this.daysInYear(e),10)?29:this.daysPerMonth[n-1]},weekDay:function(e,n,i){return 6!==this.dayOfWeek(e,n,i)},extraInfo:function(e,n,i){var l=this._validate(e,n,i,m.local.invalidDate);return{yearType:(this.leapYear(l)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(l)%10-3]}},toJD:function(e,n,i){var l=this._validate(e,n,i,m.local.invalidDate);e=l.year(),n=l.month(),i=l.day();var r=e<=0?e+1:e,d=this.jdEpoch+this._delay1(r)+this._delay2(r)+i+1;if(n<7){for(var f=7;f<=this.monthsInYear(e);f++)d+=this.daysInMonth(e,f);for(f=1;f<n;f++)d+=this.daysInMonth(e,f)}else for(f=7;f<n;f++)d+=this.daysInMonth(e,f);return d},_delay1:function(e){var n=Math.floor((235*e-234)/19),l=29*n+Math.floor((12084+13753*n)/25920);return x(3*(l+1),7)<3&&l++,l},_delay2:function(e){var n=this._delay1(e-1),i=this._delay1(e);return this._delay1(e+1)-i==356?2:i-n==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var n=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===n?1:n+1,7,1);)n++;for(var i=e<this.toJD(n,1,1)?7:1;e>this.toJD(n,i,this.daysInMonth(n,i));)i++;var l=e-this.toJD(n,i,1)+1;return this.newDate(n,i,l)}}),m.calendars.hebrew=k},{"../main":347,"object-assign":247}],338:[function(v,$,Q){var m=v("../main");function k(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}v("object-assign")(k.prototype=new m.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(x){return(11*this._validate(x,this.minMonth,this.minDay,m.local.invalidYear).year()+14)%30<11},weekOfYear:function(x,e,n){var i=this.newDate(x,e,n);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(x){return this.leapYear(x)?355:354},daysInMonth:function(x,e){var n=this._validate(x,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(x,e,n){return 5!==this.dayOfWeek(x,e,n)},toJD:function(x,e,n){var i=this._validate(x,e,n,m.local.invalidDate);return x=i.year(),e=i.month(),x=x<=0?x+1:x,(n=i.day())+Math.ceil(29.5*(e-1))+354*(x-1)+Math.floor((3+11*x)/30)+this.jdEpoch-1},fromJD:function(x){x=Math.floor(x)+.5;var e=Math.floor((30*(x-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var n=Math.min(12,Math.ceil((x-29-this.toJD(e,1,1))/29.5)+1),i=x-this.toJD(e,n,1)+1;return this.newDate(e,n,i)}}),m.calendars.islamic=k},{"../main":347,"object-assign":247}],339:[function(v,$,Q){var m=v("../main");function k(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}v("object-assign")(k.prototype=new m.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var e=this._validate(x,this.minMonth,this.minDay,m.local.invalidYear);return(x=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(x,e,n){var i=this.newDate(x,e,n);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(x,e){var n=this._validate(x,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(x,e,n){return(this.dayOfWeek(x,e,n)||7)<6},toJD:function(x,e,n){var i=this._validate(x,e,n,m.local.invalidDate);return x=i.year(),e=i.month(),n=i.day(),x<0&&x++,e<=2&&(x--,e+=12),Math.floor(365.25*(x+4716))+Math.floor(30.6001*(e+1))+n-1524.5},fromJD:function(x){var e=Math.floor(x+.5)+1524,n=Math.floor((e-122.1)/365.25),i=Math.floor(365.25*n),l=Math.floor((e-i)/30.6001),r=l-Math.floor(l<14?1:13),d=n-Math.floor(r>2?4716:4715),f=e-i-Math.floor(30.6001*l);return d<=0&&d--,this.newDate(d,r,f)}}),m.calendars.julian=k},{"../main":347,"object-assign":247}],340:[function(v,$,Q){var m=v("../main");function k(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}function x(n,i){return n-i*Math.floor(n/i)}function e(n,i){return x(n-1,i)+1}v("object-assign")(k.prototype=new m.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(n){return this._validate(n,this.minMonth,this.minDay,m.local.invalidYear),!1},formatYear:function(n){n=this._validate(n,this.minMonth,this.minDay,m.local.invalidYear).year();var i=Math.floor(n/400);return n%=400,n+=n<0?400:0,i+"."+Math.floor(n/20)+"."+n%20},forYear:function(n){if((n=n.split(".")).length<3)throw"Invalid Mayan year";for(var i=0,l=0;l<n.length;l++){var r=parseInt(n[l],10);if(Math.abs(r)>19||l>0&&r<0)throw"Invalid Mayan year";i=20*i+r}return i},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,m.local.invalidYear),18},weekOfYear:function(n,i,l){return this._validate(n,i,l,m.local.invalidDate),0},daysInYear:function(n){return this._validate(n,this.minMonth,this.minDay,m.local.invalidYear),360},daysInMonth:function(n,i){return this._validate(n,i,this.minDay,m.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(n,i,l){return this._validate(n,i,l,m.local.invalidDate).day()},weekDay:function(n,i,l){return this._validate(n,i,l,m.local.invalidDate),!0},extraInfo:function(n,i,l){var r=this._validate(n,i,l,m.local.invalidDate).toJD(),d=this._toHaab(r),f=this._toTzolkin(r);return{haabMonthName:this.local.haabMonths[d[0]-1],haabMonth:d[0],haabDay:d[1],tzolkinDayName:this.local.tzolkinMonths[f[0]-1],tzolkinDay:f[0],tzolkinTrecena:f[1]}},_toHaab:function(n){var i=x(8+(n-=this.jdEpoch)+340,365);return[Math.floor(i/20)+1,x(i,20)]},_toTzolkin:function(n){return[e(20+(n-=this.jdEpoch),20),e(n+4,13)]},toJD:function(n,i,l){var r=this._validate(n,i,l,m.local.invalidDate);return r.day()+20*r.month()+360*r.year()+this.jdEpoch},fromJD:function(n){n=Math.floor(n)+.5-this.jdEpoch;var i=Math.floor(n/360);n%=360,n+=n<0?360:0;var l=Math.floor(n/20);return this.newDate(i,l,n%20)}}),m.calendars.mayan=k},{"../main":347,"object-assign":247}],341:[function(v,$,Q){var m=v("../main"),g=v("object-assign");function k(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}k.prototype=new m.baseCalendar;var x=m.instance("gregorian");g(k.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear);return x.leapYear(n.year()+(n.year()<1?1:0)+1469)},weekOfYear:function(e,n,i){var l=this.newDate(e,n,i);return l.add(1-(l.dayOfWeek()||7),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(e,n){var i=this._validate(e,n,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(12===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(e,n,i){return(this.dayOfWeek(e,n,i)||7)<6},toJD:function(e,n,i){var l=this._validate(e,n,i,m.local.invalidMonth);(e=l.year())<0&&e++;for(var r=l.day(),d=1;d<l.month();d++)r+=this.daysPerMonth[d-1];return r+x.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var n=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(n+1,1,1);)n++;for(var i=e-Math.floor(this.toJD(n,1,1)+.5)+1,l=1;i>this.daysInMonth(n,l);)i-=this.daysInMonth(n,l),l++;return this.newDate(n,l,i)}}),m.calendars.nanakshahi=k},{"../main":347,"object-assign":247}],342:[function(v,$,Q){var m=v("../main");function k(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}v("object-assign")(k.prototype=new m.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(x){return this.daysInYear(x)!==this.daysPerYear},weekOfYear:function(x,e,n){var i=this.newDate(x,e,n);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(x){if(x=this._validate(x,this.minMonth,this.minDay,m.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[x])return this.daysPerYear;for(var e=0,n=this.minMonth;n<=12;n++)e+=this.NEPALI_CALENDAR_DATA[x][n];return e},daysInMonth:function(x,e){return x.year&&(e=x.month(),x=x.year()),this._validate(x,e,this.minDay,m.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[x]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[x][e]},weekDay:function(x,e,n){return 6!==this.dayOfWeek(x,e,n)},toJD:function(x,e,n){var i=this._validate(x,e,n,m.local.invalidDate);x=i.year(),e=i.month(),n=i.day();var l=m.instance(),r=0,d=e,f=x;this._createMissingCalendarData(x);var t=x-(d>9||9===d&&n>=this.NEPALI_CALENDAR_DATA[f][0]?56:57);for(9!==e&&(r=n,d--);9!==d;)d<=0&&(d=12,f--),r+=this.NEPALI_CALENDAR_DATA[f][d],d--;return 9===e?(r+=n-this.NEPALI_CALENDAR_DATA[f][0])<0&&(r+=l.daysInYear(t)):r+=this.NEPALI_CALENDAR_DATA[f][9]-this.NEPALI_CALENDAR_DATA[f][0],l.newDate(t,1,1).add(r,"d").toJD()},fromJD:function(x){var e=m.instance().fromJD(x),n=e.year(),i=e.dayOfYear(),l=n+56;this._createMissingCalendarData(l);for(var r=9,f=this.NEPALI_CALENDAR_DATA[l][r]-this.NEPALI_CALENDAR_DATA[l][0]+1;i>f;)++r>12&&(r=1,l++),f+=this.NEPALI_CALENDAR_DATA[l][r];return this.newDate(l,r,this.NEPALI_CALENDAR_DATA[l][r]-(f-i))},_createMissingCalendarData:function(x){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var n=x-1;n<x+2;n++)void 0===this.NEPALI_CALENDAR_DATA[n]&&(this.NEPALI_CALENDAR_DATA[n]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),m.calendars.nepali=k},{"../main":347,"object-assign":247}],343:[function(v,$,Q){var m=v("../main");function k(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function x(e,n){return e-n*Math.floor(e/n)}v("object-assign")(k.prototype=new m.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return 682*((n.year()-(n.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,n,i){var l=this.newDate(e,n,i);return l.add(-(l.dayOfWeek()+1)%7,"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(e,n){var i=this._validate(e,n,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(12===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(e,n,i){return 5!==this.dayOfWeek(e,n,i)},toJD:function(e,n,i){var l=this._validate(e,n,i,m.local.invalidDate);e=l.year(),n=l.month(),i=l.day();var r=e-(e>=0?474:473),d=474+x(r,2820);return i+(n<=7?31*(n-1):30*(n-1)+6)+Math.floor((682*d-110)/2816)+365*(d-1)+1029983*Math.floor(r/2820)+this.jdEpoch-1},fromJD:function(e){var n=(e=Math.floor(e)+.5)-this.toJD(475,1,1),i=Math.floor(n/1029983),l=x(n,1029983),r=2820;if(1029982!==l){var d=Math.floor(l/366),f=x(l,366);r=Math.floor((2134*d+2816*f+2815)/1028522)+d+1}var t=r+2820*i+474,h=e-this.toJD(t=t<=0?t-1:t,1,1)+1,s=h<=186?Math.ceil(h/31):Math.ceil((h-6)/30),o=e-this.toJD(t,s,1)+1;return this.newDate(t,s,o)}}),m.calendars.persian=k,m.calendars.jalali=k},{"../main":347,"object-assign":247}],344:[function(v,$,Q){var m=v("../main"),g=v("object-assign"),k=m.instance();function x(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}g(x.prototype=new m.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(n.year()),k.leapYear(e)},weekOfYear:function(e,n,i){var l=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(l.year()),k.weekOfYear(e,l.month(),l.day())},daysInMonth:function(e,n){var i=this._validate(e,n,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(e,n,i){return(this.dayOfWeek(e,n,i)||7)<6},toJD:function(e,n,i){var l=this._validate(e,n,i,m.local.invalidDate);return e=this._t2gYear(l.year()),k.toJD(e,l.month(),l.day())},fromJD:function(e){var n=k.fromJD(e),i=this._g2tYear(n.year());return this.newDate(i,n.month(),n.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),m.calendars.taiwan=x},{"../main":347,"object-assign":247}],345:[function(v,$,Q){var m=v("../main"),g=v("object-assign"),k=m.instance();function x(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}g(x.prototype=new m.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(n.year()),k.leapYear(e)},weekOfYear:function(e,n,i){var l=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(l.year()),k.weekOfYear(e,l.month(),l.day())},daysInMonth:function(e,n){var i=this._validate(e,n,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(2===i.month()&&this.leapYear(i.year())?1:0)},weekDay:function(e,n,i){return(this.dayOfWeek(e,n,i)||7)<6},toJD:function(e,n,i){var l=this._validate(e,n,i,m.local.invalidDate);return e=this._t2gYear(l.year()),k.toJD(e,l.month(),l.day())},fromJD:function(e){var n=k.fromJD(e),i=this._g2tYear(n.year());return this.newDate(i,n.month(),n.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),m.calendars.thai=x},{"../main":347,"object-assign":247}],346:[function(v,$,Q){var m=v("../main");function k(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}v("object-assign")(k.prototype=new m.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return 355===this.daysInYear(n.year())},weekOfYear:function(e,n,i){var l=this.newDate(e,n,i);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var n=0,i=1;i<=12;i++)n+=this.daysInMonth(e,i);return n},daysInMonth:function(e,n){for(var i=this._validate(e,n,this.minDay,m.local.invalidMonth).toJD()-24e5+.5,l=0,r=0;r<x.length;r++){if(x[r]>i)return x[l]-x[l-1];l++}return 30},weekDay:function(e,n,i){return 5!==this.dayOfWeek(e,n,i)},toJD:function(e,n,i){var l=this._validate(e,n,i,m.local.invalidDate),r=12*(l.year()-1)+l.month()-15292;return l.day()+x[r-1]-1+24e5-.5},fromJD:function(e){for(var n=e-24e5+.5,i=0,l=0;l<x.length&&!(x[l]>n);l++)i++;var r=i+15292,d=Math.floor((r-1)/12);return this.newDate(d+1,r-12*d,n-x[i-1]+1)},isValid:function(e,n,i){var l=m.baseCalendar.prototype.isValid.apply(this,arguments);return l&&(l=(e=null!=e.year?e.year:e)>=1276&&e<=1500),l},_validate:function(e,n,i,l){var r=m.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw l.replace(/\{0\}/,this.local.name);return r}}),m.calendars.ummalqura=k;var x=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":347,"object-assign":247}],347:[function(v,$,Q){var m=v("object-assign");function g(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function k(l,r,d,f){if(this._calendar=l,this._year=r,this._month=d,this._day=f,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function x(l,r){return"000000".substring(0,r-(l=""+l).length)+l}function e(){this.shortYearCutoff="+10"}function n(l){this.local=this.regionalOptions[l]||this.regionalOptions[""]}m(g.prototype,{instance:function(l,r){l=(l||"gregorian").toLowerCase();var d=this._localCals[l+"-"+(r=r||"")];if(!d&&this.calendars[l]&&(d=new this.calendars[l](r),this._localCals[l+"-"+r]=d),!d)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,l);return d},newDate:function(l,r,d,f,t){return(f=(null!=l&&l.year?l.calendar():"string"==typeof f?this.instance(f,t):f)||this.instance()).newDate(l,r,d)},substituteDigits:function(l){return function(r){return(r+"").replace(/[0-9]/g,function(d){return l[d]})}},substituteChineseDigits:function(l,r){return function(d){for(var f="",t=0;d>0;){var h=d%10;f=(0===h?"":l[h]+r[t])+f,t++,d=Math.floor(d/10)}return 0===f.indexOf(l[1]+r[1])&&(f=f.substr(1)),f||l[0]}}}),m(k.prototype,{newDate:function(l,r,d){return this._calendar.newDate(l??this,r,d)},year:function(l){return 0===arguments.length?this._year:this.set(l,"y")},month:function(l){return 0===arguments.length?this._month:this.set(l,"m")},day:function(l){return 0===arguments.length?this._day:this.set(l,"d")},date:function(l,r,d){if(!this._calendar.isValid(l,r,d))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=l,this._month=r,this._day=d,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(l,r){return this._calendar.add(this,l,r)},set:function(l,r){return this._calendar.set(this,l,r)},compareTo:function(l){if(this._calendar.name!==l._calendar.name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,l._calendar.local.name);var r=this._year!==l._year?this._year-l._year:this._month!==l._month?this.monthOfYear()-l.monthOfYear():this._day-l._day;return 0===r?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(l){return this._calendar.fromJD(l)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(l){return this._calendar.fromJSDate(l)},toString:function(){return(this.year()<0?"-":"")+x(Math.abs(this.year()),4)+"-"+x(this.month(),2)+"-"+x(this.day(),2)}}),m(e.prototype,{_validateLevel:0,newDate:function(l,r,d){return null==l?this.today():(l.year&&(this._validate(l,r,d,i.local.invalidDate||i.regionalOptions[""].invalidDate),d=l.day(),r=l.month(),l=l.year()),new k(this,l,r,d))},today:function(){return this.fromJSDate(new Date)},epoch:function(l){return this._validate(l,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(l){var r=this._validate(l,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+x(Math.abs(r.year()),4)},monthsInYear:function(l){return this._validate(l,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),12},monthOfYear:function(l,r){var d=this._validate(l,r,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return(d.month()+this.monthsInYear(d)-this.firstMonth)%this.monthsInYear(d)+this.minMonth},fromMonthOfYear:function(l,r){var d=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(l)+this.minMonth;return this._validate(l,d,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth),d},daysInYear:function(l){var r=this._validate(l,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(l,r,d){var f=this._validate(l,r,d,i.local.invalidDate||i.regionalOptions[""].invalidDate);return f.toJD()-this.newDate(f.year(),this.fromMonthOfYear(f.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(l,r,d){var f=this._validate(l,r,d,i.local.invalidDate||i.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(f))+2)%this.daysInWeek()},extraInfo:function(l,r,d){return this._validate(l,r,d,i.local.invalidDate||i.regionalOptions[""].invalidDate),{}},add:function(l,r,d){return this._validate(l,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate),this._correctAdd(l,this._add(l,r,d),r,d)},_add:function(l,r,d){if(this._validateLevel++,"d"===d||"w"===d){var f=l.toJD()+r*("w"===d?this.daysInWeek():1),t=l.calendar().fromJD(f);return this._validateLevel--,[t.year(),t.month(),t.day()]}try{var h=l.year()+("y"===d?r:0),s=l.monthOfYear()+("m"===d?r:0);t=l.day(),"y"===d?(l.month()!==this.fromMonthOfYear(h,s)&&(s=this.newDate(h,l.month(),this.minDay).monthOfYear()),s=Math.min(s,this.monthsInYear(h)),t=Math.min(t,this.daysInMonth(h,this.fromMonthOfYear(h,s)))):"m"===d&&(function(p){for(;s<p.minMonth;)h--,s+=p.monthsInYear(h);for(var c=p.monthsInYear(h);s>c-1+p.minMonth;)h++,s-=c,c=p.monthsInYear(h)}(this),t=Math.min(t,this.daysInMonth(h,this.fromMonthOfYear(h,s))));var o=[h,this.fromMonthOfYear(h,s),t];return this._validateLevel--,o}catch(p){throw this._validateLevel--,p}},_correctAdd:function(l,r,d,f){if(!(this.hasYearZero||"y"!==f&&"m"!==f||0!==r[0]&&l.year()>0==r[0]>0)){var t={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[f];r=this._add(l,d*t[0]+(d<0?-1:1)*t[1],t[2])}return l.date(r[0],r[1],r[2])},set:function(l,r,d){this._validate(l,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate);var f="y"===d?r:l.year(),t="m"===d?r:l.month(),h="d"===d?r:l.day();return"y"!==d&&"m"!==d||(h=Math.min(h,this.daysInMonth(f,t))),l.date(f,t,h)},isValid:function(l,r,d){this._validateLevel++;var f=this.hasYearZero||0!==l;if(f){var t=this.newDate(l,r,this.minDay);f=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(t)&&d>=this.minDay&&d-this.minDay<this.daysInMonth(t)}return this._validateLevel--,f},toJSDate:function(l,r,d){var f=this._validate(l,r,d,i.local.invalidDate||i.regionalOptions[""].invalidDate);return i.instance().fromJD(this.toJD(f)).toJSDate()},fromJSDate:function(l){return this.fromJD(i.instance().fromJSDate(l).toJD())},_validate:function(l,r,d,f){if(l.year){if(0===this._validateLevel&&this.name!==l.calendar().name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,l.calendar().local.name);return l}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(l,r,d))throw f.replace(/\{0\}/,this.local.name);var t=this.newDate(l,r,d);return this._validateLevel--,t}catch(h){throw this._validateLevel--,h}}}),m(n.prototype=new e,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){var r=this._validate(l,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return(l=r.year()+(r.year()<0?1:0))%4==0&&(l%100!=0||l%400==0)},weekOfYear:function(l,r,d){var f=this.newDate(l,r,d);return f.add(4-(f.dayOfWeek()||7),"d"),Math.floor((f.dayOfYear()-1)/7)+1},daysInMonth:function(l,r){var d=this._validate(l,r,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return this.daysPerMonth[d.month()-1]+(2===d.month()&&this.leapYear(d.year())?1:0)},weekDay:function(l,r,d){return(this.dayOfWeek(l,r,d)||7)<6},toJD:function(l,r,d){var f=this._validate(l,r,d,i.local.invalidDate||i.regionalOptions[""].invalidDate);l=f.year(),r=f.month(),d=f.day(),l<0&&l++,r<3&&(r+=12,l--);var t=Math.floor(l/100),h=2-t+Math.floor(t/4);return Math.floor(365.25*(l+4716))+Math.floor(30.6001*(r+1))+d+h-1524.5},fromJD:function(l){var r=Math.floor(l+.5),d=Math.floor((r-1867216.25)/36524.25),f=1524+(d=r+1+d-Math.floor(d/4)),t=Math.floor((f-122.1)/365.25),h=Math.floor(365.25*t),s=Math.floor((f-h)/30.6001),o=f-h-Math.floor(30.6001*s),p=s-(s>13.5?13:1),c=t-(p>2.5?4716:4715);return c<=0&&c--,this.newDate(c,p,o)},toJSDate:function(l,r,d){var f=this._validate(l,r,d,i.local.invalidDate||i.regionalOptions[""].invalidDate),t=new Date(f.year(),f.month()-1,f.day());return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setHours(t.getHours()>12?t.getHours()+2:0),t},fromJSDate:function(l){return this.newDate(l.getFullYear(),l.getMonth()+1,l.getDate())}});var i=$.exports=new g;i.cdate=k,i.baseCalendar=e,i.calendars.gregorian=n},{"object-assign":247}],348:[function(v,$,Q){var m=v("object-assign"),g=v("./main");m(g.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),g.local=g.regionalOptions[""],m(g.cdate.prototype,{formatDate:function(k,x){return"string"!=typeof k&&(x=k,k=""),this._calendar.formatDate(k||"",this,x)}}),m(g.baseCalendar.prototype,{UNIX_EPOCH:g.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:g.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(k,x,e){if("string"!=typeof k&&(e=x,x=k,k=""),!x)return"";if(x.calendar()!==this)throw g.local.invalidFormat||g.regionalOptions[""].invalidFormat;k=k||this.local.dateFormat;for(var i,l,r,d=(e=e||{}).dayNamesShort||this.local.dayNamesShort,f=e.dayNames||this.local.dayNames,t=e.monthNumbers||this.local.monthNumbers,h=e.monthNamesShort||this.local.monthNamesShort,s=e.monthNames||this.local.monthNames,o=function(C,M){for(var I=1;T+I<k.length&&k.charAt(T+I)===C;)I++;return T+=I-1,Math.floor(I/(M||1))>1},p=function(C,M,I,P){var S=""+M;if(o(C,P))for(;S.length<I;)S="0"+S;return S},c=this,y=function(C,M){return M?"function"==typeof s?s.call(c,C):s[C.month()-c.minMonth]:"function"==typeof h?h.call(c,C):h[C.month()-c.minMonth]},u=this.local.digits,_=function(C){return e.localNumbers&&u?u(C):C},b="",w=!1,T=0;T<k.length;T++)if(w)"'"!==k.charAt(T)||o("'")?b+=k.charAt(T):w=!1;else switch(k.charAt(T)){case"d":b+=_(p("d",x.day(),2));break;case"D":b+=("D",i=x.dayOfWeek(),l=d,r=f,o("D")?r[i]:l[i]);break;case"o":b+=p("o",x.dayOfYear(),3);break;case"w":b+=p("w",x.weekOfYear(),2);break;case"m":b+=(C=x,"function"==typeof t?t.call(c,C,o("m")):_(p("m",C.month(),2)));break;case"M":b+=y(x,o("M"));break;case"y":b+=o("y",2)?x.year():(x.year()%100<10?"0":"")+x.year()%100;break;case"Y":o("Y",2),b+=x.formatYear();break;case"J":b+=x.toJD();break;case"@":b+=(x.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":b+=(x.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":o("'")?b+="'":w=!0;break;default:b+=k.charAt(T)}var C;return b},parseDate:function(k,x,e){if(null==x)throw g.local.invalidArguments||g.regionalOptions[""].invalidArguments;if(""===(x="object"==typeof x?x.toString():x+""))return null;k=k||this.local.dateFormat;var n=(e=e||{}).shortYearCutoff||this.shortYearCutoff;n="string"!=typeof n?n:this.today().year()%100+parseInt(n,10);for(var i=e.dayNamesShort||this.local.dayNamesShort,l=e.dayNames||this.local.dayNames,r=e.parseMonth||this.local.parseMonth,d=e.monthNumbers||this.local.monthNumbers,f=e.monthNamesShort||this.local.monthNamesShort,t=e.monthNames||this.local.monthNames,h=-1,s=-1,o=-1,p=-1,c=-1,a=!1,y=!1,u=function(R,D){for(var j=1;P+j<k.length&&k.charAt(P+j)===R;)j++;return P+=j-1,Math.floor(j/(D||1))>1},_=function(R,D){var j=u(R,D),H=[2,3,j?4:2,j?4:2,10,11,20]["oyYJ@!".indexOf(R)+1],Y=new RegExp("^-?\\d{1,"+H+"}"),X=x.substring(I).match(Y);if(!X)throw(g.local.missingNumberAt||g.regionalOptions[""].missingNumberAt).replace(/\{0\}/,I);return I+=X[0].length,parseInt(X[0],10)},b=this,w=function(){if("function"==typeof d){u("m");var R=d.call(b,x.substring(I));return I+=R.length,R}return _("m")},T=function(R,D,j,H){for(var Y=u(R,H)?j:D,X=0;X<Y.length;X++)if(x.substr(I,Y[X].length).toLowerCase()===Y[X].toLowerCase())return I+=Y[X].length,X+b.minMonth;throw(g.local.unknownNameAt||g.regionalOptions[""].unknownNameAt).replace(/\{0\}/,I)},C=function(){if("function"==typeof t){var R=u("M")?t.call(b,x.substring(I)):f.call(b,x.substring(I));return I+=R.length,R}return T("M",f,t)},M=function(){if(x.charAt(I)!==k.charAt(P))throw(g.local.unexpectedLiteralAt||g.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,I);I++},I=0,P=0;P<k.length;P++)if(y)"'"!==k.charAt(P)||u("'")?M():y=!1;else switch(k.charAt(P)){case"d":p=_("d");break;case"D":T("D",i,l);break;case"o":c=_("o");break;case"w":_("w");break;case"m":o=w();break;case"M":o=C();break;case"y":var S=P;a=!u("y",2),P=S,s=_("y",2);break;case"Y":s=_("Y",2);break;case"J":h=_("J")+.5,"."===x.charAt(I)&&(I++,_("J"));break;case"@":h=_("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":h=_("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":I=x.length;break;case"'":u("'")?M():y=!0;break;default:M()}if(I<x.length)throw g.local.unexpectedText||g.regionalOptions[""].unexpectedText;if(-1===s?s=this.today().year():s<100&&a&&(s+=-1===n?1900:this.today().year()-this.today().year()%100-(s<=n?0:100)),"string"==typeof o&&(o=r.call(this,s,o)),c>-1){p=c;for(var E=this.daysInMonth(s,o=1);p>E;E=this.daysInMonth(s,o))o++,p-=E}return h>-1?this.fromJD(h):this.newDate(s,o,p)},determineDate:function(k,x,e,n,i){e&&"object"!=typeof e&&(i=n,n=e,e=null),"string"!=typeof n&&(i=n,n="");var l=this;return x=x?x.newDate():null,null==k?x:"string"==typeof k?function(r){try{return l.parseDate(n,r,i)}catch{}for(var d=((r=r.toLowerCase()).match(/^c/)&&e?e.newDate():null)||l.today(),f=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,t=f.exec(r);t;)d.add(parseInt(t[1],10),t[2]||"d"),t=f.exec(r);return d}(k):"number"==typeof k?isNaN(k)||k===1/0||k===-1/0?x:l.today().add(k,"d"):l.newDate(k)}})},{"./main":347,"object-assign":247}],349:[function(v,$,Q){"use strict";$.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],350:[function(v,$,Q){"use strict";var m=v("./arrow_paths"),g=v("../../plots/font_attributes"),k=v("../../plots/cartesian/constants"),x=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),$.exports=x("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:g({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",k.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",k.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",k.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",k.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:g({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/font_attributes":594,"./arrow_paths":349}],351:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/cartesian/axes"),k=v("./draw").draw;function x(n){m.filterVisible(n._fullLayout.annotations).forEach(function(l){var r=g.getFromId(n,l.xref),d=g.getFromId(n,l.yref),f=g.getRefType(l.xref),t=g.getRefType(l.yref);l._extremes={},"range"===f&&e(l,r),"range"===t&&e(l,d)})}function e(n,i){var l,r=i._id,d=r.charAt(0),f=n[d],t=n["a"+d],o=n["_"+d+"padplus"],p=n["_"+d+"padminus"],c={x:1,y:-1}[d]*n[d+"shift"],a=3*n.arrowsize*n.arrowwidth||0,y=a+c,u=a-c,_=3*n.startarrowsize*n.arrowwidth||0,b=_+c,w=_-c;if(n["a"+d+"ref"]===n[d+"ref"]){var T=g.findExtremes(i,[i.r2c(f)],{ppadplus:y,ppadminus:u}),C=g.findExtremes(i,[i.r2c(t)],{ppadplus:Math.max(o,b),ppadminus:Math.max(p,w)});l={min:[T.min[0],C.min[0]],max:[T.max[0],C.max[0]]}}else b=t?b+t:b,w=t?w-t:w,l=g.findExtremes(i,[i.r2c(f)],{ppadplus:Math.max(o,y,b),ppadminus:Math.max(p,u,w)});n._extremes[r]=l}$.exports=function(n){if(m.filterVisible(n._fullLayout.annotations).length&&n._fullData.length)return m.syncOrAsync([k,x],n)}},{"../../lib":515,"../../plots/cartesian/axes":566,"./draw":356}],352:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../registry"),k=v("../../plot_api/plot_template").arrayEditor;function x(n,i){var l,r,d,f,t,h,s,o=n._fullLayout.annotations,p=[],c=[],a=[],y=(i||[]).length;for(l=0;l<o.length;l++)if(f=(d=o[l]).clicktoshow){for(r=0;r<y;r++)if(h=(t=i[r]).xaxis,s=t.yaxis,h._id===d.xref&&s._id===d.yref&&h.d2r(t.x)===e(d._xclick,h)&&s.d2r(t.y)===e(d._yclick,s)){(d.visible?"onout"===f?c:a:p).push(l);break}r===y&&d.visible&&"onout"===f&&c.push(l)}return{on:p,off:c,explicitOff:a}}function e(n,i){return"log"===i.type?i.l2r(n):i.d2r(n)}$.exports={hasClickToShow:function(n,i){var l=x(n,i);return l.on.length>0||l.explicitOff.length>0},onClick:function(n,i){var l,r,d=x(n,i),f=d.on,t=d.off.concat(d.explicitOff),h={},s=n._fullLayout.annotations;if(f.length||t.length){for(l=0;l<f.length;l++)(r=k(n.layout,"annotations",s[f[l]])).modifyItem("visible",!0),m.extendFlat(h,r.getUpdateObj());for(l=0;l<t.length;l++)(r=k(n.layout,"annotations",s[t[l]])).modifyItem("visible",!1),m.extendFlat(h,r.getUpdateObj());return g.call("update",n,{},h)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647}],353:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../color");$.exports=function(k,x,e,n){n("opacity");var i=n("bgcolor"),l=n("bordercolor"),r=g.opacity(l);n("borderpad");var d=n("borderwidth"),f=n("showarrow");if(n("text",f?" ":e._dfltTitle.annotation),n("textangle"),m.coerceFont(n,"font",e.font),n("width"),n("align"),n("height")&&n("valign"),f){var t,h,s=n("arrowside");-1!==s.indexOf("end")&&(t=n("arrowhead"),h=n("arrowsize")),-1!==s.indexOf("start")&&(n("startarrowhead",t),n("startarrowsize",h)),n("arrowcolor",r?x.bordercolor:g.defaultLine),n("arrowwidth",2*(r&&d||1)),n("standoff"),n("startstandoff")}var o=n("hovertext"),p=e.hoverlabel||{};if(o){var c=n("hoverlabel.bgcolor",p.bgcolor||(g.opacity(i)?g.rgb(i):g.defaultLine)),a=n("hoverlabel.bordercolor",p.bordercolor||g.contrast(c));m.coerceFont(n,"hoverlabel.font",{family:p.font.family,size:p.font.size,color:p.font.color||a})}n("captureevents",!!o)}},{"../../lib":515,"../color":367}],354:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib/to_log_range");$.exports=function(k,x,e,n){x=x||{};var i="log"===e&&"linear"===x.type;if(i||"linear"===e&&"log"===x.type)for(var r,d,f=k._fullLayout.annotations,t=x._id.charAt(0),h=0;h<f.length;h++)d="annotations["+h+"].",(r=f[h])[t+"ref"]===x._id&&s(t),r["a"+t+"ref"]===x._id&&s("a"+t);function s(o){var p=r[o],c=null;c=i?g(p,x.range):Math.pow(10,p),m(c)||(c=null),n(d+o,c)}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],355:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/cartesian/axes"),k=v("../../plots/array_container_defaults"),x=v("./common_defaults"),e=v("./attributes");function n(i,l,r){function d(C,M){return m.coerce(i,l,e,C,M)}var f=d("visible"),t=d("clicktoshow");if(f||t){x(i,l,r,d);for(var h=l.showarrow,s=["x","y"],o=[-10,-30],p={_fullLayout:r},c=0;c<2;c++){var a=s[c],y=g.coerceRef(i,l,p,a,"","paper");if("paper"!==y&&g.getFromId(p,y)._annIndices.push(l._index),g.coercePosition(l,p,d,y,a,.5),h){var u="a"+a,_=g.coerceRef(i,l,p,u,"pixel",["pixel","paper"]);"pixel"!==_&&_!==y&&(_=l[u]="pixel"),g.coercePosition(l,p,d,_,u,"pixel"===_?o[c]:.4)}d(a+"anchor"),d(a+"shift")}if(m.noneOrAll(i,l,["x","y"]),h&&m.noneOrAll(i,l,["ax","ay"]),t){var w=d("xclick"),T=d("yclick");l._xclick=void 0===w?l.x:g.cleanPosition(w,p,l.xref),l._yclick=void 0===T?l.y:g.cleanPosition(T,p,l.yref)}}}$.exports=function(i,l){k(i,l,{name:"annotations",handleItemDefaults:n})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":350,"./common_defaults":353}],356:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../registry"),k=v("../../plots/plots"),x=v("../../lib"),e=x.strTranslate,n=v("../../plots/cartesian/axes"),i=v("../color"),l=v("../drawing"),r=v("../fx"),d=v("../../lib/svg_text_utils"),f=v("../../lib/setcursor"),t=v("../dragelement"),h=v("../../plot_api/plot_template").arrayEditor,s=v("./draw_arrow_head");function o(a,y){var u=a._fullLayout.annotations[y]||{},_=n.getFromId(a,u.xref),b=n.getFromId(a,u.yref);_&&_.setScale(),b&&b.setScale(),c(a,u,y,!1,_,b)}function p(a,y,u,_,b){var w=b[u],T=b[u+"ref"],C=-1!==u.indexOf("y"),M="domain"===n.getRefType(T),I=C?_.h:_.w;return a?M?w+(C?-y:y)/a._length:a.p2r(a.r2p(w)+y):w+(C?-y:y)/I}function c(a,y,u,_,b,w){var T,C,M=a._fullLayout,I=a._fullLayout._size,P=a._context.edits;_?(T="annotation-"+_,C=_+".annotations"):(T="annotation",C="annotations");var S=h(a.layout,C,y),E=S.modifyBase,R=S.modifyItem,D=S.getUpdateObj;M._infolayer.selectAll("."+T+'[data-index="'+u+'"]').remove();var j="clip"+M._uid+"_ann"+u;if(y._input&&!1!==y.visible){var H={x:{},y:{}},Y=+y.textangle||0,X=M._infolayer.append("g").classed(T,!0).attr("data-index",String(u)).style("opacity",y.opacity),Z=X.append("g").classed("annotation-text-g",!0),W=P[y.showarrow?"annotationTail":"annotationPosition"],re=y.captureevents||P.annotationText||W,U=Z.append("g").style("pointer-events",re?"all":null).call(f,"pointer").on("click",function(){a._dragging=!1,a.emit("plotly_clickannotation",se(m.event))});y.hovertext&&U.on("mouseover",function(){var ye=y.hoverlabel,Me=ye.font,pe=this.getBoundingClientRect(),ge=a.getBoundingClientRect();r.loneHover({x0:pe.left-ge.left,x1:pe.right-ge.left,y:(pe.top+pe.bottom)/2-ge.top,text:y.hovertext,color:ye.bgcolor,borderColor:ye.bordercolor,fontFamily:Me.family,fontSize:Me.size,fontColor:Me.color},{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:a})}).on("mouseout",function(){r.loneUnhover(M._hoverlayer.node())});var B=y.borderwidth,ee=B+y.borderpad,N=U.append("rect").attr("class","bg").style("stroke-width",B+"px").call(i.stroke,y.bordercolor).call(i.fill,y.bgcolor),K=y.width||y.height,J=M._topclips.selectAll("#"+j).data(K?[0]:[]);J.enter().append("clipPath").classed("annclip",!0).attr("id",j).append("rect"),J.exit().remove();var te=y.font,ae=M._meta?x.templateString(y.text,M._meta):y.text,le=U.append("text").classed("annotation-text",!0).text(ae);P.annotationText?le.call(d.makeEditable,{delegate:U,gd:a}).call(ve).on("edit",function(ye){y.text=ye,this.call(ve),R("text",ye),b&&b.autorange&&E(b._name+".autorange",!0),w&&w.autorange&&E(w._name+".autorange",!0),g.call("_guiRelayout",a,D())}):le.call(ve)}else m.selectAll("#"+j).remove();function se(ye){var Me={index:u,annotation:y._input,fullAnnotation:y,event:ye};return _&&(Me.subplotId=_),Me}function ve(ye){return ye.call(l.font,te).attr({"text-anchor":{left:"start",right:"end"}[y.align]||"middle"}),d.convertToTspans(ye,a,ue),ye}function ue(){var ye=le.selectAll("a");1===ye.size()&&ye.text()===le.text()&&U.insert("a",":first-child").attr({"xlink:xlink:href":ye.attr("xlink:href"),"xlink:xlink:show":ye.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(N.node());var Me=U.select(".annotation-text-math-group"),pe=!Me.empty(),ge=l.bBox((pe?Me:le).node()),we=ge.width,oe=ge.height,de=y.width||we,Te=y.height||oe,Ee=Math.round(de+2*ee),Ae=Math.round(Te+2*ee);function De(ht,mt){return"auto"===mt&&(mt=ht<1/3?"left":ht>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[mt]}for(var Ie=!1,Oe=["x","y"],Xe=0;Xe<Oe.length;Xe++){var Fe,Pe,Re,qe,Qe,ct=Oe[Xe],bt=y[ct+"ref"]||ct,Tt=y["a"+ct+"ref"],_t={x:b,y:w}[ct],nt=(Y+("x"===ct?0:-90))*Math.PI/180,Ke=Ee*Math.cos(nt),xt=Ae*Math.sin(nt),Ht=Math.abs(Ke)+Math.abs(xt),Zt=y[ct+"anchor"],$t=y[ct+"shift"]*("x"===ct?1:-1),Xt=H[ct],cr=n.getRefType(bt);if(_t&&"domain"!==cr){var Ft=_t.r2fraction(y[ct]);(Ft<0||Ft>1)&&(Tt===bt?((Ft=_t.r2fraction(y["a"+ct]))<0||Ft>1)&&(Ie=!0):Ie=!0),Fe=_t._offset+_t.r2p(y[ct]),qe=.5}else{var Be="domain"===cr;"x"===ct?(Re=y[ct],Fe=Be?_t._offset+_t._length*Re:Fe=I.l+I.w*Re):(Re=1-y[ct],Fe=Be?_t._offset+_t._length*Re:Fe=I.t+I.h*Re),qe=y.showarrow?.5:Re}if(y.showarrow){Xt.head=Fe;var He=y["a"+ct];if(Qe=Ke*De(.5,y.xanchor)-xt*De(.5,y.yanchor),Tt===bt){var he=n.getRefType(Tt);"domain"===he?("y"===ct&&(He=1-He),Xt.tail=_t._offset+_t._length*He):Xt.tail="paper"===he?"y"===ct?I.t+I.h*(He=1-He):I.l+I.w*He:_t._offset+_t.r2p(He),Pe=Qe}else Xt.tail=Fe+He,Pe=Qe+He;Xt.text=Xt.tail+Qe;var be=M["x"===ct?"width":"height"];if("paper"===bt&&(Xt.head=x.constrain(Xt.head,1,be-1)),"pixel"===Tt){var ze=-Math.max(Xt.tail-3,Xt.text),Ve=Math.min(Xt.tail+3,Xt.text)-be;ze>0?(Xt.tail+=ze,Xt.text+=ze):Ve>0&&(Xt.tail-=Ve,Xt.text-=Ve)}Xt.tail+=$t,Xt.head+=$t}else Pe=Qe=Ht*De(qe,Zt),Xt.text=Fe+Qe;Xt.text+=$t,Qe+=$t,y["_"+ct+"padplus"]=Ht/2+(Pe+=$t),y["_"+ct+"padminus"]=Ht/2-Pe,y["_"+ct+"size"]=Ht,y["_"+ct+"shift"]=Qe}if(Ie)U.remove();else{var Je=0,Ye=0;"left"!==y.align&&(Je=(de-we)*("center"===y.align?.5:1)),"top"!==y.valign&&(Ye=(Te-oe)*("middle"===y.valign?.5:1)),pe?Me.select("svg").attr({x:ee+Je-1,y:ee+Ye}).call(l.setClipUrl,K?j:null,a):le.call(d.positionText,ee+Je-ge.left,ee+Ye-ge.top).call(l.setClipUrl,K?j:null,a),J.select("rect").call(l.setRect,ee,ee,de,Te),N.call(l.setRect,B/2,B/2,Ee-B,Ae-B),U.call(l.setTranslate,Math.round(H.x.text-Ee/2),Math.round(H.y.text-Ae/2)),Z.attr({transform:"rotate("+Y+","+H.x.text+","+H.y.text+")"});var Mt,Dt=function(ht,mt){X.selectAll(".annotation-arrow-g").remove();var Ot=H.x.head,At=H.y.head,It=H.x.tail+ht,Se=H.y.tail+mt,Ze=H.x.text+ht,it=H.y.text+mt,dt=x.rotationXYMatrix(Y,Ze,it),Ct=x.apply2DTransform(dt),Ut=x.apply2DTransform2(dt),Jt=+N.attr("width"),qt=+N.attr("height"),pr=Ze-.5*Jt,Sr=pr+Jt,mr=it-.5*qt,tr=mr+qt,rr=[[pr,mr,pr,tr],[pr,tr,Sr,tr],[Sr,tr,Sr,mr],[Sr,mr,pr,mr]].map(Ut);if(!rr.reduce(function(wn,An){return wn^!!x.segmentsIntersect(Ot,At,Ot+1e6,At+1e6,An[0],An[1],An[2],An[3])},!1)){rr.forEach(function(wn){var An=x.segmentsIntersect(It,Se,Ot,At,wn[0],wn[1],wn[2],wn[3]);An&&(It=An.x,Se=An.y)});var ar=y.arrowwidth,dr=y.arrowcolor,xr=y.arrowside,Lr=X.append("g").style({opacity:i.opacity(dr)}).classed("annotation-arrow-g",!0),zr=Lr.append("path").attr("d","M"+It+","+Se+"L"+Ot+","+At).style("stroke-width",ar+"px").call(i.stroke,i.rgb(dr));if(s(zr,xr,y),P.annotationPosition&&zr.node().parentNode&&!_){var Hr=Ot,Xr=At;if(y.standoff){var cn=Math.sqrt(Math.pow(Ot-It,2)+Math.pow(At-Se,2));Hr+=y.standoff*(It-Ot)/cn,Xr+=y.standoff*(Se-At)/cn}var an,Nn,on=Lr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(It-Hr)+","+(Se-Xr),transform:e(Hr,Xr)}).style("stroke-width",ar+6+"px").call(i.stroke,"rgba(0,0,0,0)").call(i.fill,"rgba(0,0,0,0)");t.init({element:on.node(),gd:a,prepFn:function(){var wn=l.getTranslate(U);an=wn.x,Nn=wn.y,b&&b.autorange&&E(b._name+".autorange",!0),w&&w.autorange&&E(w._name+".autorange",!0)},moveFn:function(wn,An){var ii=Ct(an,Nn),Vr=ii[0]+wn,sn=ii[1]+An;U.call(l.setTranslate,Vr,sn),R("x",p(b,wn,"x",I,y)),R("y",p(w,An,"y",I,y)),y.axref===y.xref&&R("ax",p(b,wn,"ax",I,y)),y.ayref===y.yref&&R("ay",p(w,An,"ay",I,y)),Lr.attr("transform",e(wn,An)),Z.attr({transform:"rotate("+Y+","+Vr+","+sn+")"})},doneFn:function(){g.call("_guiRelayout",a,D());var wn=document.querySelector(".js-notes-box-panel");wn&&wn.redraw(wn.selectedObj)}})}}};y.showarrow&&Dt(0,0),W&&t.init({element:U.node(),gd:a,prepFn:function(){Mt=Z.attr("transform")},moveFn:function(ht,mt){var Ot="pointer";if(y.showarrow)R("ax",y.axref===y.xref?p(b,ht,"ax",I,y):y.ax+ht),R("ay",y.ayref===y.yref?p(w,mt,"ay",I.w,y):y.ay+mt),Dt(ht,mt);else{if(_)return;var At,It;if(b)At=p(b,ht,"x",I,y);else{var Se=y._xsize/I.w;At=t.align(y.x+(y._xshift-y.xshift)/I.w-Se/2+ht/I.w,Se,0,1,y.xanchor)}if(w)It=p(w,mt,"y",I,y);else{var it=y._ysize/I.h;It=t.align(y.y-(y._yshift+y.yshift)/I.h-it/2-mt/I.h,it,0,1,y.yanchor)}R("x",At),R("y",It),b&&w||(Ot=t.getCursor(b?.5:At,w?.5:It,y.xanchor,y.yanchor))}Z.attr({transform:e(ht,mt)+Mt}),f(U,Ot)},clickFn:function(ht,mt){y.captureevents&&a.emit("plotly_clickannotation",se(mt))},doneFn:function(){f(U),g.call("_guiRelayout",a,D());var ht=document.querySelector(".js-notes-box-panel");ht&&ht.redraw(ht.selectedObj)}})}}}$.exports={draw:function(a){var y=a._fullLayout;y._infolayer.selectAll(".annotation").remove();for(var u=0;u<y.annotations.length;u++)y.annotations[u].visible&&o(a,u);return k.previousPromises(a)},drawOne:o,drawRaw:c}},{"../../lib":515,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../fx":407,"./draw_arrow_head":357,"@plotly/d3":58}],357:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../color"),k=v("./arrow_paths"),x=v("../../lib"),e=x.strScale,n=x.strRotate,i=x.strTranslate;$.exports=function(l,r,d){var f,t,h,s,o=l.node(),p=k[d.arrowhead||0],c=k[d.startarrowhead||0],a=(d.arrowwidth||1)*(d.arrowsize||1),y=(d.arrowwidth||1)*(d.startarrowsize||1),u=r.indexOf("start")>=0,_=r.indexOf("end")>=0,b=p.backoff*a+d.standoff,w=c.backoff*y+d.startstandoff;if("line"===o.nodeName){f={x:+l.attr("x1"),y:+l.attr("y1")},t={x:+l.attr("x2"),y:+l.attr("y2")};var T=f.x-t.x,C=f.y-t.y;if(s=(h=Math.atan2(C,T))+Math.PI,b&&w&&b+w>Math.sqrt(T*T+C*C))return void X();if(b){if(b*b>T*T+C*C)return void X();var M=b*Math.cos(h),I=b*Math.sin(h);t.x+=M,t.y+=I,l.attr({x2:t.x,y2:t.y})}if(w){if(w*w>T*T+C*C)return void X();var P=w*Math.cos(h),S=w*Math.sin(h);f.x-=P,f.y-=S,l.attr({x1:f.x,y1:f.y})}}else if("path"===o.nodeName){var E=o.getTotalLength(),R="";if(E<b+w)return void X();var D=o.getPointAtLength(0),j=o.getPointAtLength(.1);h=Math.atan2(D.y-j.y,D.x-j.x),f=o.getPointAtLength(Math.min(w,E)),R="0px,"+w+"px,";var H=o.getPointAtLength(E),Y=o.getPointAtLength(E-.1);s=Math.atan2(H.y-Y.y,H.x-Y.x),t=o.getPointAtLength(Math.max(0,E-b)),l.style("stroke-dasharray",R+=E-(R?w+b:b)+"px,"+E+"px")}function X(){l.style("stroke-dasharray","0px,100px")}function Z(W,re,U,B){W.path&&(W.noRotate&&(U=0),m.select(o.parentNode).append("path").attr({class:l.attr("class"),d:W.path,transform:i(re.x,re.y)+n(180*U/Math.PI)+e(B)}).style({fill:g.rgb(d.arrowcolor),"stroke-width":0}))}u&&Z(c,f,h,y),_&&Z(p,t,s,a)}},{"../../lib":515,"../color":367,"./arrow_paths":349,"@plotly/d3":58}],358:[function(v,$,Q){"use strict";var m=v("./draw"),g=v("./click");$.exports={moduleType:"component",name:"annotations",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("annotations"),calcAutorange:v("./calc_autorange"),draw:m.draw,drawOne:m.drawOne,drawRaw:m.drawRaw,hasClickToShow:g.hasClickToShow,onClick:g.onClick,convertCoords:v("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":350,"./calc_autorange":351,"./click":352,"./convert_coords":354,"./defaults":355,"./draw":356}],359:[function(v,$,Q){"use strict";var m=v("../annotations/attributes"),g=v("../../plot_api/edit_types").overrideAll,k=v("../../plot_api/plot_template").templatedArray;$.exports=g(k("annotation",{visible:m.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:m.xanchor,xshift:m.xshift,yanchor:m.yanchor,yshift:m.yshift,text:m.text,textangle:m.textangle,font:m.font,width:m.width,height:m.height,opacity:m.opacity,align:m.align,valign:m.valign,bgcolor:m.bgcolor,bordercolor:m.bordercolor,borderpad:m.borderpad,borderwidth:m.borderwidth,showarrow:m.showarrow,arrowcolor:m.arrowcolor,arrowhead:m.arrowhead,startarrowhead:m.startarrowhead,arrowside:m.arrowside,arrowsize:m.arrowsize,startarrowsize:m.startarrowsize,arrowwidth:m.arrowwidth,standoff:m.standoff,startstandoff:m.startstandoff,hovertext:m.hovertext,hoverlabel:m.hoverlabel,captureevents:m.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../annotations/attributes":350}],360:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/cartesian/axes");function k(x,e){var n=e.fullSceneLayout.domain,i=e.fullLayout._size,l={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};x._xa={},m.extendFlat(x._xa,l),g.setConvert(x._xa),x._xa._offset=i.l+n.x[0]*i.w,x._xa.l2p=function(){return.5*(1+x._pdata[0]/x._pdata[3])*i.w*(n.x[1]-n.x[0])},x._ya={},m.extendFlat(x._ya,l),g.setConvert(x._ya),x._ya._offset=i.t+(1-n.y[1])*i.h,x._ya.l2p=function(){return.5*(1-x._pdata[1]/x._pdata[3])*i.h*(n.y[1]-n.y[0])}}$.exports=function(x){for(var e=x.fullSceneLayout.annotations,n=0;n<e.length;n++)k(e[n],x);x.fullLayout._infolayer.selectAll(".annotation-"+x.id).remove()}},{"../../lib":515,"../../plots/cartesian/axes":566}],361:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/cartesian/axes"),k=v("../../plots/array_container_defaults"),x=v("../annotations/common_defaults"),e=v("./attributes");function n(i,l,r,d){function f(h,s){return m.coerce(i,l,e,h,s)}function t(h){var s=h+"axis",o={_fullLayout:{}};return o._fullLayout[s]=r[s],g.coercePosition(l,o,f,h,h,.5)}f("visible")&&(x(i,l,d.fullLayout,f),t("x"),t("y"),t("z"),m.noneOrAll(i,l,["x","y","z"]),l.xref="x",l.yref="y",l.zref="z",f("xanchor"),f("yanchor"),f("xshift"),f("yshift"),l.showarrow&&(l.axref="pixel",l.ayref="pixel",f("ax",-10),f("ay",-30),m.noneOrAll(i,l,["ax","ay"])))}$.exports=function(i,l,r){k(i,l,{name:"annotations",handleItemDefaults:n,fullLayout:r.fullLayout})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../annotations/common_defaults":353,"./attributes":359}],362:[function(v,$,Q){"use strict";var m=v("../annotations/draw").drawRaw,g=v("../../plots/gl3d/project"),k=["x","y","z"];$.exports=function(x){for(var e=x.fullSceneLayout,n=x.dataScale,i=e.annotations,l=0;l<i.length;l++){for(var r=i[l],d=!1,f=0;f<3;f++){var t=k[f],s=e[t+"axis"].r2fraction(r[t]);if(s<0||s>1){d=!0;break}}d?x.fullLayout._infolayer.select(".annotation-"+x.id+'[data-index="'+l+'"]').remove():(r._pdata=g(x.glplot.cameraParams,[e.xaxis.r2l(r.x)*n[0],e.yaxis.r2l(r.y)*n[1],e.zaxis.r2l(r.z)*n[2]]),m(x.graphDiv,r,l,x.id,r._xa,r._ya))}}},{"../../plots/gl3d/project":616,"../annotations/draw":356}],363:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../lib");$.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:v("./attributes")}}},layoutAttributes:v("./attributes"),handleDefaults:v("./defaults"),includeBasePlot:function(k,x){var e=m.subplotsRegistry.gl3d;if(e)for(var n=e.attrRegex,i=Object.keys(k),l=0;l<i.length;l++){var r=i[l];n.test(r)&&(k[r].annotations||[]).length&&(g.pushUnique(x._basePlotModules,e),g.pushUnique(x._subplots.gl3d,r))}},convert:v("./convert"),draw:v("./draw")}},{"../../lib":515,"../../registry":647,"./attributes":359,"./convert":360,"./defaults":361,"./draw":362}],364:[function(v,$,Q){"use strict";$.exports=v("world-calendars/dist/main"),v("world-calendars/dist/plus"),v("world-calendars/dist/calendars/chinese"),v("world-calendars/dist/calendars/coptic"),v("world-calendars/dist/calendars/discworld"),v("world-calendars/dist/calendars/ethiopian"),v("world-calendars/dist/calendars/hebrew"),v("world-calendars/dist/calendars/islamic"),v("world-calendars/dist/calendars/julian"),v("world-calendars/dist/calendars/mayan"),v("world-calendars/dist/calendars/nanakshahi"),v("world-calendars/dist/calendars/nepali"),v("world-calendars/dist/calendars/persian"),v("world-calendars/dist/calendars/taiwan"),v("world-calendars/dist/calendars/thai"),v("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":333,"world-calendars/dist/calendars/coptic":334,"world-calendars/dist/calendars/discworld":335,"world-calendars/dist/calendars/ethiopian":336,"world-calendars/dist/calendars/hebrew":337,"world-calendars/dist/calendars/islamic":338,"world-calendars/dist/calendars/julian":339,"world-calendars/dist/calendars/mayan":340,"world-calendars/dist/calendars/nanakshahi":341,"world-calendars/dist/calendars/nepali":342,"world-calendars/dist/calendars/persian":343,"world-calendars/dist/calendars/taiwan":344,"world-calendars/dist/calendars/thai":345,"world-calendars/dist/calendars/ummalqura":346,"world-calendars/dist/main":347,"world-calendars/dist/plus":348}],365:[function(v,$,Q){"use strict";var m=v("./calendars"),g=v("../../lib"),k=v("../../constants/numerical"),x=k.EPOCHJD,e=k.ONEDAY,n={valType:"enumerated",values:g.sortObjectKeys(m.calendars),editType:"calc",dflt:"gregorian"},i=function(c,a,y,u){var _={};return _[y]=n,g.coerce(c,a,_,y,u)},l={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function d(c){return r[c]||(r[c]=m.instance(c))}function f(c){return g.extendFlat({},n,{description:c})}function t(c){return"Sets the calendar system to use with `"+c+"` date data."}var h={xcalendar:f(t("x"))},s=g.extendFlat({},h,{ycalendar:f(t("y"))}),o=g.extendFlat({},s,{zcalendar:f(t("z"))}),p=f(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));$.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:s,bar:s,box:s,heatmap:s,contour:s,histogram:s,histogram2d:s,histogram2dcontour:s,scatter3d:o,surface:o,mesh3d:o,scattergl:s,ohlc:h,candlestick:h},layout:{calendar:f(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:p},yaxis:{calendar:p},scene:{xaxis:{calendar:p},yaxis:{calendar:p},zaxis:{calendar:p}},polar:{radialaxis:{calendar:p}}},transforms:{filter:{valuecalendar:f(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:f(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:n,handleDefaults:i,handleTraceDefaults:function(c,a,y,u){for(var _=0;_<y.length;_++)i(c,a,y[_]+"calendar",u.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:d,worldCalFmt:function(c,a,y){for(var u,_,b,w,T,C=Math.floor((a+.05)/e)+x,M=d(y).fromJD(C),I=0;-1!==(I=c.indexOf("%",I));)"0"===(u=c.charAt(I+1))||"-"===u||"_"===u?(b=3,_=c.charAt(I+2),"_"===u&&(u="-")):(_=u,u="0",b=2),(w=l[_])?(T="##"===w?"##":M.formatDate(w[u]),c=c.substr(0,I)+T+c.substr(I+b),I+=T.length):I+=b;return c}}},{"../../constants/numerical":491,"../../lib":515,"./calendars":364}],366:[function(v,$,Q){"use strict";Q.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Q.defaultLine="#444",Q.lightLine="#eee",Q.background="#fff",Q.borderLine="#BEC8D9",Q.lightFraction=1e3/11},{}],367:[function(v,$,Q){"use strict";var m=v("tinycolor2"),g=v("fast-isnumeric"),k=v("../../lib/array").isTypedArray,x=$.exports={},e=v("./attributes");x.defaults=e.defaults;var n=x.defaultLine=e.defaultLine;x.lightLine=e.lightLine;var i=x.background=e.background;function l(r){if(g(r)||"string"!=typeof r)return r;var d=r.trim();if("rgb"!==d.substr(0,3))return r;var f=d.match(/^rgba?\s*\(([^()]*)\)$/);if(!f)return r;var t=f[1].trim().split(/\s*[\s,]\s*/),h="a"===d.charAt(3)&&4===t.length;if(!h&&3!==t.length)return r;for(var s=0;s<t.length;s++){if(!(t[s].length&&(t[s]=Number(t[s]),t[s]>=0)))return r;if(3===s)t[s]>1&&(t[s]=1);else if(t[s]>=1)return r}var o=Math.round(255*t[0])+", "+Math.round(255*t[1])+", "+Math.round(255*t[2]);return h?"rgba("+o+", "+t[3]+")":"rgb("+o+")"}x.tinyRGB=function(r){var d=r.toRgb();return"rgb("+Math.round(d.r)+", "+Math.round(d.g)+", "+Math.round(d.b)+")"},x.rgb=function(r){return x.tinyRGB(m(r))},x.opacity=function(r){return r?m(r).getAlpha():0},x.addOpacity=function(r,d){var f=m(r).toRgb();return"rgba("+Math.round(f.r)+", "+Math.round(f.g)+", "+Math.round(f.b)+", "+d+")"},x.combine=function(r,d){var f=m(r).toRgb();if(1===f.a)return m(r).toRgbString();var t=m(d||i).toRgb(),h=1===t.a?t:{r:255*(1-t.a)+t.r*t.a,g:255*(1-t.a)+t.g*t.a,b:255*(1-t.a)+t.b*t.a};return m({r:h.r*(1-f.a)+f.r*f.a,g:h.g*(1-f.a)+f.g*f.a,b:h.b*(1-f.a)+f.b*f.a}).toRgbString()},x.contrast=function(r,d,f){var t=m(r);return 1!==t.getAlpha()&&(t=m(x.combine(r,i))),(t.isDark()?d?t.lighten(d):i:f?t.darken(f):n).toString()},x.stroke=function(r,d){var f=m(d);r.style({stroke:x.tinyRGB(f),"stroke-opacity":f.getAlpha()})},x.fill=function(r,d){var f=m(d);r.style({fill:x.tinyRGB(f),"fill-opacity":f.getAlpha()})},x.clean=function(r){if(r&&"object"==typeof r){var d,f,t,h,s=Object.keys(r);for(d=0;d<s.length;d++)if(h=r[t=s[d]],"color"===t.substr(t.length-5))if(Array.isArray(h))for(f=0;f<h.length;f++)h[f]=l(h[f]);else r[t]=l(h);else if("colorscale"===t.substr(t.length-10)&&Array.isArray(h))for(f=0;f<h.length;f++)Array.isArray(h[f])&&(h[f][1]=l(h[f][1]));else if(Array.isArray(h)){var o=h[0];if(!Array.isArray(o)&&o&&"object"==typeof o)for(f=0;f<h.length;f++)x.clean(h[f])}else h&&"object"==typeof h&&!k(h)&&x.clean(h)}}},{"../../lib/array":497,"./attributes":366,"fast-isnumeric":190,tinycolor2:313}],368:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/layout_attributes"),g=v("../../plots/font_attributes"),k=v("../../lib/extend").extendFlat,x=v("../../plot_api/edit_types").overrideAll;$.exports=x({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:m.linecolor,outlinewidth:m.linewidth,bordercolor:m.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:k({},m.ticks,{dflt:""}),ticklabeloverflow:k({},m.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,ticklabelstep:m.ticklabelstep,showticklabels:m.showticklabels,tickfont:g({}),tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,tickprefix:m.tickprefix,showtickprefix:m.showtickprefix,ticksuffix:m.ticksuffix,showticksuffix:m.showticksuffix,separatethousands:m.separatethousands,exponentformat:m.exponentformat,minexponent:m.minexponent,showexponent:m.showexponent,title:{text:{valType:"string"},font:g({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:g({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],369:[function(v,$,Q){"use strict";$.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],370:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plot_api/plot_template"),k=v("../../plots/cartesian/tick_value_defaults"),x=v("../../plots/cartesian/tick_mark_defaults"),e=v("../../plots/cartesian/tick_label_defaults"),n=v("../../plots/cartesian/prefix_suffix_defaults"),i=v("./attributes");$.exports=function(l,r,d){var f=g.newContainer(r,"colorbar"),t=l.colorbar||{};function h(C,M){return m.coerce(t,f,i,C,M)}var s=d.margin||{t:0,b:0,l:0,r:0},o=d.width-s.l-s.r,p=d.height-s.t-s.b,c="v"===h("orientation"),a=h("thicknessmode");h("thickness","fraction"===a?30/(c?o:p):30);var y=h("lenmode");h("len","fraction"===y?1:c?p:o),h("x",c?1.02:.5),h("xanchor",c?"left":"center"),h("xpad"),h("y",c?.5:1.02),h("yanchor",c?"middle":"bottom"),h("ypad"),m.noneOrAll(t,f,["x","y"]),h("outlinecolor"),h("outlinewidth"),h("bordercolor"),h("borderwidth"),h("bgcolor");var u=m.coerce(t,f,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:c?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");h("ticklabeloverflow",-1!==u.indexOf("inside")?"hide past domain":"hide past div"),k(t,f,h,"linear");var _=d.font,b={outerTicks:!1,font:_};-1!==u.indexOf("inside")&&(b.bgColor="black"),n(t,f,h,"linear",b),e(t,f,h,"linear",b),x(t,f,h,"linear",b),h("title.text",d._dfltTitle.colorbar);var w=f.tickfont,T=m.extendFlat({},w,{color:_.color,size:m.bigFont(w.size)});m.coerceFont(h,"title.font",T),h("title.side",c?"top":"right")}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"./attributes":368}],371:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("tinycolor2"),k=v("../../plots/plots"),x=v("../../registry"),e=v("../../plots/cartesian/axes"),n=v("../dragelement"),i=v("../../lib"),l=i.strTranslate,r=v("../../lib/extend").extendFlat,d=v("../../lib/setcursor"),f=v("../drawing"),t=v("../color"),h=v("../titles"),s=v("../../lib/svg_text_utils"),o=v("../colorscale/helpers").flipScale,p=v("../../plots/cartesian/axis_defaults"),c=v("../../plots/cartesian/position_defaults"),a=v("../../plots/cartesian/layout_attributes"),y=v("../../constants/alignment"),u=y.LINE_SPACING,_=y.FROM_TL,b=y.FROM_BR,w=v("./constants").cn;$.exports={draw:function(T){var C=T._fullLayout._infolayer.selectAll("g."+w.colorbar).data(function(M){var I,P,S,E,R=M._fullLayout,D=M.calcdata,j=[];function H(K){return r(K,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Y(){"function"==typeof E.calc?E.calc(M,S,I):(I._fillgradient=P.reversescale?o(P.colorscale):P.colorscale,I._zrange=[P[E.min],P[E.max]])}for(var X=0;X<D.length;X++){var W=(S=D[X][0].trace)._module.colorbar;if(!0===S.visible&&W)for(var re=Array.isArray(W),U=re?W:[W],B=0;B<U.length;B++){var V=(E=U[B]).container;(P=V?S[V]:S)&&P.showscale&&((I=H(P.colorbar))._id="cb"+S.uid+(re&&V?"-"+V:""),I._traceIndex=S.index,I._propPrefix=(V?V+".":"")+"colorbar.",I._meta=S._meta,Y(),j.push(I))}}for(var ee in R._colorAxes)if((P=R[ee]).showscale){var N=R._colorAxes[ee];(I=H(P.colorbar))._id="cb"+ee,I._propPrefix=ee+".colorbar.",I._meta=R._meta,E={min:"cmin",max:"cmax"},"heatmap"!==N[0]&&(E.calc=(S=N[1])._module.colorbar.calc),Y(),j.push(I)}return j}(T),function(M){return M._id});C.enter().append("g").attr("class",function(M){return M._id}).classed(w.colorbar,!0),C.each(function(M){var I=m.select(this);i.ensureSingle(I,"rect",w.cbbg),i.ensureSingle(I,"g",w.cbfills),i.ensureSingle(I,"g",w.cblines),i.ensureSingle(I,"g",w.cbaxis,function(S){S.classed(w.crisp,!0)}),i.ensureSingle(I,"g",w.cbtitleunshift,function(S){S.append("g").classed(w.cbtitle,!0)}),i.ensureSingle(I,"rect",w.cboutline);var S,E,R,D,j,H,Y,X,P=function(S,E,R){var D="v"===E.orientation,j=E.len,H=E.lenmode,Y=E.thickness,X=E.thicknessmode,Z=E.outlinewidth,W=E.borderwidth,re=E.bgcolor,U=E.xanchor,B=E.yanchor,V=E.xpad,ee=E.ypad,N=E.x,K=D?E.y:1-E.y,J=R._fullLayout,te=J._size,ae=E._fillcolor,le=E._line,se=E.title,ve=se.side,ue=E._zrange||m.extent(("function"==typeof ae?ae:le.color).domain()),ye="function"==typeof le.color?le.color:function(){return le.color},Me="function"==typeof ae?ae:function(){return ae},pe=E._levels,ge=function(cr,Ft,Be){var He,he,be=Ft._levels,ze=[],Ve=[],Je=be.end+be.size/100,Ye=be.size,lt=1.001*Be[0]-.001*Be[1],st=1.001*Be[1]-.001*Be[0];for(he=0;he<1e5&&(He=be.start+he*Ye,!(Ye>0?He>=Je:He<=Je));he++)He>lt&&He<st&&ze.push(He);if(Ft._fillgradient)Ve=[0];else if("function"==typeof Ft._fillcolor){var Mt=Ft._filllevels;if(Mt)for(Je=Mt.end+Mt.size/100,Ye=Mt.size,he=0;he<1e5&&(He=Mt.start+he*Ye,!(Ye>0?He>=Je:He<=Je));he++)He>Be[0]&&He<Be[1]&&Ve.push(He);else(Ve=ze.map(function(Dt){return Dt-be.size/2})).push(Ve[Ve.length-1]+be.size)}else Ft._fillcolor&&"string"==typeof Ft._fillcolor&&(Ve=[0]);return be.size<0&&(ze.reverse(),Ve.reverse()),{line:ze,fill:Ve}}(0,E,ue),we=ge.fill,oe=ge.line,de=Math.round(Y*("fraction"===X?D?te.w:te.h:1)),Te=de/(D?te.w:te.h),Ee=Math.round(j*("fraction"===H?D?te.h:te.w:1)),Ae=Ee/(D?te.h:te.w),De=Math.round(D?N*te.w+V:K*te.h+ee),Ie={center:.5,right:1}[U]||0,Oe={top:1,middle:.5}[B]||0,Xe=D?N-Ie*Te:K-Oe*Te,Fe=D?K-Oe*Ae:N-Ie*Ae,Pe=Math.round(D?te.h*(1-Fe):te.w*Fe);E._lenFrac=Ae,E._thickFrac=Te,E._uFrac=Xe,E._vFrac=Fe;var Re=E._axis=function(cr,Ft,Be){var He=cr._fullLayout,he="v"===Ft.orientation,be={type:"linear",range:Be,tickmode:Ft.tickmode,nticks:Ft.nticks,tick0:Ft.tick0,dtick:Ft.dtick,tickvals:Ft.tickvals,ticktext:Ft.ticktext,ticks:Ft.ticks,ticklen:Ft.ticklen,tickwidth:Ft.tickwidth,tickcolor:Ft.tickcolor,showticklabels:Ft.showticklabels,ticklabelposition:Ft.ticklabelposition,ticklabeloverflow:Ft.ticklabeloverflow,ticklabelstep:Ft.ticklabelstep,tickfont:Ft.tickfont,tickangle:Ft.tickangle,tickformat:Ft.tickformat,exponentformat:Ft.exponentformat,minexponent:Ft.minexponent,separatethousands:Ft.separatethousands,showexponent:Ft.showexponent,showtickprefix:Ft.showtickprefix,tickprefix:Ft.tickprefix,showticksuffix:Ft.showticksuffix,ticksuffix:Ft.ticksuffix,title:Ft.title,showline:!0,anchor:"free",side:he?"right":"bottom",position:1},ze=he?"y":"x",Ve={type:"linear",_id:ze+Ft._id},Je={letter:ze,font:He.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:He.calendar};function Ye(lt,st){return i.coerce(be,Ve,a,lt,st)}return p(be,Ve,Ye,Je,He),c(be,Ve,Ye,Je),Ve}(R,E,ue);Re.position=Te+(D?N+V/te.w:K+ee/te.h);var qe=-1!==["top","bottom"].indexOf(ve);if(D&&qe&&(Re.title.side=ve,Re.titlex=N+V/te.w,Re.titley=Fe+("top"===se.side?Ae-ee/te.h:ee/te.h)),D||qe||(Re.title.side=ve,Re.titley=K+ee/te.h,Re.titlex=Fe+V/te.w),le.color&&"auto"===E.tickmode){Re.tickmode="linear",Re.tick0=pe.start;var Qe=pe.size,ct=i.constrain(Ee/50,4,15)+1,bt=(ue[1]-ue[0])/((E.nticks||ct)*Qe);if(bt>1){var Tt=Math.pow(10,Math.floor(Math.log(bt)/Math.LN10));Qe*=Tt*i.roundUp(bt/Tt,[2,5,10]),(Math.abs(pe.start)/pe.size+1e-6)%1<2e-6&&(Re.tick0=0)}Re.dtick=Qe}Re.domain=D?[Fe+ee/te.h,Fe+Ae-ee/te.h]:[Fe+V/te.w,Fe+Ae-V/te.w],Re.setScale(),S.attr("transform",l(Math.round(te.l),Math.round(te.t)));var _t,nt=S.select("."+w.cbtitleunshift).attr("transform",l(-Math.round(te.l),-Math.round(te.t))),Ke=Re.ticklabelposition,xt=Re.title.font.size,Ht=S.select("."+w.cbaxis),Zt=0,$t=0;function Xt(cr,Ft){var Be={propContainer:Re,propName:E._propPrefix+"title",traceIndex:E._traceIndex,_meta:E._meta,placeholder:J._dfltTitle.colorbar,containerGroup:S.select("."+w.cbtitle)},He="h"===cr.charAt(0)?cr.substr(1):"h"+cr;S.selectAll("."+He+",."+He+"-math-group").remove(),h.draw(R,cr,r(Be,Ft||{}))}return i.syncOrAsync([k.previousPromises,function(){var cr,Ft;(D&&qe||!D&&!qe)&&("top"===ve&&(cr=V+te.l+te.w*N,Ft=ee+te.t+te.h*(1-Fe-Ae)+3+.75*xt),"bottom"===ve&&(cr=V+te.l+te.w*N,Ft=ee+te.t+te.h*(1-Fe)-3-.25*xt),"right"===ve&&(Ft=ee+te.t+te.h*K+3+.75*xt,cr=V+te.l+te.w*Fe),Xt(Re._id+"title",{attributes:{x:cr,y:Ft,"text-anchor":D?"start":"middle"}}))},function(){if(!D&&!qe||D&&qe){var cr,Ft=S.select("."+w.cbtitle),Be=Ft.select("text"),He=[-Z/2,Z/2],he=Ft.select(".h"+Re._id+"title-math-group").node(),be=15.6;if(Be.node()&&(be=parseInt(Be.node().style.fontSize,10)*u),he?(cr=f.bBox(he),$t=cr.width,(Zt=cr.height)>be&&(He[1]-=(Zt-be)/2)):Be.node()&&!Be.classed(w.jsPlaceholder)&&(cr=f.bBox(Be.node()),$t=cr.width,Zt=cr.height),D){if(Zt){if(Zt+=5,"top"===ve)Re.domain[1]-=Zt/te.h,He[1]*=-1;else{Re.domain[0]+=Zt/te.h;var ze=s.lineCount(Be);He[1]+=(1-ze)*be}Ft.attr("transform",l(He[0],He[1])),Re.setScale()}}else $t&&("right"===ve&&(Re.domain[0]+=($t+xt/2)/te.w),Ft.attr("transform",l(He[0],He[1])),Re.setScale())}S.selectAll("."+w.cbfills+",."+w.cblines).attr("transform",D?l(0,Math.round(te.h*(1-Re.domain[1]))):l(Math.round(te.w*Re.domain[0]),0)),Ht.attr("transform",D?l(0,Math.round(-te.t)):l(Math.round(-te.l),0));var Ve=S.select("."+w.cbfills).selectAll("rect."+w.cbfill).attr("style","").data(we);Ve.enter().append("rect").classed(w.cbfill,!0).style("stroke","none"),Ve.exit().remove();var Je=ue.map(Re.c2p).map(Math.round).sort(function(Dt,ht){return Dt-ht});Ve.each(function(Dt,ht){var mt=[0===ht?ue[0]:(we[ht]+we[ht-1])/2,ht===we.length-1?ue[1]:(we[ht]+we[ht+1])/2].map(Re.c2p).map(Math.round);D&&(mt[1]=i.constrain(mt[1]+(mt[1]>mt[0])?1:-1,Je[0],Je[1]));var Ot=m.select(this).attr(D?"x":"y",De).attr(D?"y":"x",m.min(mt)).attr(D?"width":"height",Math.max(de,2)).attr(D?"height":"width",Math.max(m.max(mt)-m.min(mt),2));if(E._fillgradient)f.gradient(Ot,R,E._id,D?"vertical":"horizontalreversed",E._fillgradient,"fill");else{var At=Me(Dt).replace("e-","");Ot.attr("fill",g(At).toHexString())}});var Ye=S.select("."+w.cblines).selectAll("path."+w.cbline).data(le.color&&le.width?oe:[]);Ye.enter().append("path").classed(w.cbline,!0),Ye.exit().remove(),Ye.each(function(Dt){var ht=De,mt=Math.round(Re.c2p(Dt))+le.width/2%1;m.select(this).attr("d","M"+(D?ht+","+mt:mt+","+ht)+(D?"h":"v")+de).call(f.lineGroupStyle,le.width,ye(Dt),le.dash)}),Ht.selectAll("g."+Re._id+"tick,path").remove();var lt=De+de+(Z||0)/2-("outside"===E.ticks?1:0),st=e.calcTicks(Re),Mt=e.getTickSigns(Re)[2];return e.drawTicks(R,Re,{vals:"inside"===Re.ticks?e.clipEnds(Re,st):st,layer:Ht,path:e.makeTickPath(Re,lt,Mt),transFn:e.makeTransTickFn(Re)}),e.drawLabels(R,Re,{vals:st,layer:Ht,transFn:e.makeTransTickLabelFn(Re),labelFns:e.makeLabelFns(Re,lt)})},function(){if(D&&!qe||!D&&qe){var cr,Ft,Be=Re.position||0,He=Re._offset+Re._length/2;if("right"===ve)Ft=He,cr=te.l+te.w*Be+10+xt*(Re.showticklabels?1:.5);else if(cr=He,"bottom"===ve&&(Ft=te.t+te.h*Be+10+(-1===Ke.indexOf("inside")?Re.tickfont.size:0)+("intside"!==Re.ticks&&E.ticklen||0)),"top"===ve){var he=se.text.split("<br>").length;Ft=te.t+te.h*Be+10-de-u*xt*he}Xt((D?"h":"v")+Re._id+"title",{avoid:{selection:m.select(R).selectAll("g."+Re._id+"tick"),side:ve,offsetTop:D?0:te.t,offsetLeft:D?te.l:0,maxShift:D?J.width:J.height},attributes:{x:cr,y:Ft,"text-anchor":"middle"},transform:{rotate:D?-90:0,offset:0}})}},k.previousPromises,function(){var cr,Ft=de+Z/2;-1===Ke.indexOf("inside")&&(cr=f.bBox(Ht.node()),Ft+=D?cr.width:cr.height),_t=nt.select("text");var Be=0,He=D&&"top"===ve,he=!D&&"right"===ve,be=0;if(_t.node()&&!_t.classed(w.jsPlaceholder)){var ze,Ve=nt.select(".h"+Re._id+"title-math-group").node();Ve&&(D&&qe||!D&&!qe)?(Be=(cr=f.bBox(Ve)).width,ze=cr.height):(Be=(cr=f.bBox(nt.node())).right-te.l-(D?De:Pe),ze=cr.bottom-te.t-(D?Pe:De),D||"top"!==ve||(Ft+=cr.height,be=cr.height)),he&&(_t.attr("transform",l(Be/2+xt/2,0)),Be*=2),Ft=Math.max(Ft,D?Be:ze)}var Je=2*(D?V:ee)+Ft+W+Z/2,Ye=0;!D&&se.text&&"bottom"===B&&K<=0&&(Je+=Ye=Je/2,be+=Ye),J._hColorbarMoveTitle=Ye,J._hColorbarMoveCBTitle=be;var lt=W+Z;S.select("."+w.cbbg).attr("x",(D?De:Pe)-lt/2-(D?V:0)).attr("y",(D?Pe:De)-(D?Ee:ee+be-Ye)).attr(D?"width":"height",Math.max(Je-Ye,2)).attr(D?"height":"width",Math.max(Ee+lt,2)).call(t.fill,re).call(t.stroke,E.bordercolor).style("stroke-width",W);var st=he?Math.max(Be-10,0):0;if(S.selectAll("."+w.cboutline).attr("x",(D?De:Pe+V)+st).attr("y",(D?Pe+ee-Ee:De)+(He?Zt:0)).attr(D?"width":"height",Math.max(de,2)).attr(D?"height":"width",Math.max(Ee-(D?2*ee+Zt:2*V+st),2)).call(t.stroke,E.outlinecolor).style({fill:"none","stroke-width":Z}),S.attr("transform",l(te.l-(D?Ie*Je:0),te.t-(D?0:(1-Oe)*Je-be))),!D&&(W||g(re).getAlpha()&&!g.equals(J.paper_bgcolor,re))){var Mt=Ht.selectAll("text"),Dt=Mt[0].length,ht=S.select("."+w.cbbg).node(),mt=f.bBox(ht),Ot=f.getTranslate(S);Mt.each(function(Ct,Ut){var Jt=Dt-1;if(0===Ut||Ut===Jt){var qt,pr=f.bBox(this),Sr=f.getTranslate(this);Ut===Jt?(qt=mt.right+Ot.x+Pe-W-2+N-(pr.right+Sr.x))>0&&(qt=0):0===Ut&&(qt=mt.left+Ot.x+Pe+W+2-(pr.left+Sr.x))<0&&(qt=0),qt&&(Dt<3?this.setAttribute("transform","translate("+qt+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var At={},It=_[U],Se=b[U],Ze=_[B],it=b[B],dt=Je-de;D?("pixels"===H?(At.y=K,At.t=Ee*Ze,At.b=Ee*it):(At.t=At.b=0,At.yt=K+j*Ze,At.yb=K-j*it),"pixels"===X?(At.x=N,At.l=Je*It,At.r=Je*Se):(At.l=dt*It,At.r=dt*Se,At.xl=N-Y*It,At.xr=N+Y*Se)):("pixels"===H?(At.x=N,At.l=Ee*It,At.r=Ee*Se):(At.l=At.r=0,At.xl=N+j*It,At.xr=N-j*Se),"pixels"===X?(At.y=1-K,At.t=Je*Ze,At.b=Je*it):(At.t=dt*Ze,At.b=dt*it,At.yt=K-Y*Ze,At.yb=K+Y*it)),k.autoMargin(R,E._id,At)}],R)}(I,M,T);P&&P.then&&(T._promises||[]).push(P),T._context.edits.colorbarPosition&&(Y="v"===(E=M).orientation,X=(R=T)._fullLayout._size,n.init({element:(S=I).node(),gd:R,prepFn:function(){D=S.attr("transform"),d(S)},moveFn:function(Z,W){S.attr("transform",D+l(Z,W)),j=n.align((Y?E._uFrac:E._vFrac)+Z/X.w,Y?E._thickFrac:E._lenFrac,0,1,E.xanchor),H=n.align((Y?E._vFrac:1-E._uFrac)-W/X.h,Y?E._lenFrac:E._thickFrac,0,1,E.yanchor);var re=n.getCursor(j,H,E.xanchor,E.yanchor);d(S,re)},doneFn:function(){if(d(S),void 0!==j&&void 0!==H){var Z={};Z[E._propPrefix+"x"]=j,Z[E._propPrefix+"y"]=H,void 0!==E._traceIndex?x.call("_guiRestyle",R,Z,E._traceIndex):x.call("_guiRelayout",R,Z)}}}))}),C.exit().each(function(M){k.autoMargin(T,M._id)}).remove(),C.order()}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/extend":505,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"../../plots/plots":628,"../../registry":647,"../color":367,"../colorscale/helpers":378,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":369,"@plotly/d3":58,tinycolor2:313}],372:[function(v,$,Q){"use strict";var m=v("../../lib");$.exports=function(g){return m.isPlainObject(g.colorbar)}},{"../../lib":515}],373:[function(v,$,Q){"use strict";$.exports={moduleType:"component",name:"colorbar",attributes:v("./attributes"),supplyDefaults:v("./defaults"),draw:v("./draw").draw,hasColorbar:v("./has_colorbar")}},{"./attributes":368,"./defaults":370,"./draw":371,"./has_colorbar":372}],374:[function(v,$,Q){"use strict";var m=v("../colorbar/attributes"),g=v("../../lib/regex").counter,k=v("../../lib/sort_object_keys"),x=v("./scales.js").scales;function e(n){return"`"+n+"`"}k(x),$.exports=function(n,i){n=n||"";var l,r=(i=i||{}).cLetter||"c",d=("onlyIfNumerical"in i||Boolean(n),"noScale"in i?i.noScale:"marker.line"===n),f="showScaleDflt"in i?i.showScaleDflt:"z"===r,t="string"==typeof i.colorscaleDflt?x[i.colorscaleDflt]:null,h=i.editTypeOverride||"",s=n?n+".":"";"colorAttr"in i?l=i.colorAttr:e(s+(l={z:"z",c:"color"}[r]));var o=r+"auto",p=r+"min",c=r+"max",a=r+"mid",y=(e(s+o),e(s+p),e(s+c),{});y[p]=y[c]=void 0;var u={};u[o]=!1;var _={};return"color"===l&&(_.color={valType:"color",arrayOk:!0,editType:h||"style"},i.anim&&(_.color.anim=!0)),_[o]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:y},_[p]={valType:"number",dflt:null,editType:h||"plot",impliedEdits:u},_[c]={valType:"number",dflt:null,editType:h||"plot",impliedEdits:u},_[a]={valType:"number",dflt:null,editType:"calc",impliedEdits:y},_.colorscale={valType:"colorscale",editType:"calc",dflt:t,impliedEdits:{autocolorscale:!1}},_.autocolorscale={valType:"boolean",dflt:!1!==i.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},_.reversescale={valType:"boolean",dflt:!1,editType:"plot"},d||(_.showscale={valType:"boolean",dflt:f,editType:"calc"},_.colorbar=m),i.noColorAxis||(_.coloraxis={valType:"subplotid",regex:g("coloraxis"),dflt:null,editType:"calc"}),_}},{"../../lib/regex":532,"../../lib/sort_object_keys":538,"../colorbar/attributes":368,"./scales.js":382}],375:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib"),k=v("./helpers").extractOpts;$.exports=function(x,e,n){var l=x._fullLayout,r=n.vals,d=n.containerStr,f=d?g.nestedProperty(e,d).get():e,t=k(f),h=!1!==t.auto,s=t.min,o=t.max,p=t.mid,c=function(){return g.aggNums(Math.min,null,r)},a=function(){return g.aggNums(Math.max,null,r)};void 0===s?s=c():h&&(s=f._colorAx&&m(s)?Math.min(s,c()):c()),void 0===o?o=a():h&&(o=f._colorAx&&m(o)?Math.max(o,a()):a()),h&&void 0!==p&&(o-p>p-s?s=p-(o-p):o-p<p-s&&(o=p+(p-s))),s===o&&(s-=.5,o+=.5),t._sync("min",s),t._sync("max",o),t.autocolorscale&&t._sync("colorscale",s*o<0?l.colorscale.diverging:s>=0?l.colorscale.sequential:l.colorscale.sequentialminus)}},{"../../lib":515,"./helpers":378,"fast-isnumeric":190}],376:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./helpers").hasColorscale,k=v("./helpers").extractOpts;$.exports=function(x,e){function n(h,s){var o=h["_"+s];void 0!==o&&(h[s]=o)}function i(h,s){var o=s.container?m.nestedProperty(h,s.container).get():h;if(o)if(o.coloraxis)o._colorAx=e[o.coloraxis];else{var p=k(o),c=p.auto;(c||void 0===p.min)&&n(o,s.min),(c||void 0===p.max)&&n(o,s.max),p.autocolorscale&&n(o,"colorscale")}}for(var l=0;l<x.length;l++){var r=x[l],d=r._module.colorbar;if(d)if(Array.isArray(d))for(var f=0;f<d.length;f++)i(r,d[f]);else i(r,d);g(r,"marker.line")&&i(r,{container:"marker.line",min:"cmin",max:"cmax"})}for(var t in e._colorAxes)i(e[t],{min:"cmin",max:"cmax"})}},{"../../lib":515,"./helpers":378}],377:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib"),k=v("../colorbar/has_colorbar"),x=v("../colorbar/defaults"),e=v("./scales").isValid,n=v("../../registry").traceIs;function i(l,r){var d=r.slice(0,r.length-1);return r?g.nestedProperty(l,d).get()||{}:l}$.exports=function l(r,d,f,t,h){var s=h.prefix,o=h.cLetter,p="_module"in d,c=i(r,s),a=i(d,s),y=i(d._template||{},s)||{},u=function(){return delete r.coloraxis,delete d.coloraxis,l(r,d,f,t,h)};if(p){var _=f._colorAxes||{},b=t(s+"coloraxis");if(b){var w=n(d,"contour")&&g.nestedProperty(d,"contours.coloring").get()||"heatmap",T=_[b];return void(T?(T[2].push(u),T[0]!==w&&(T[0]=!1,g.warn(["Ignoring coloraxis:",b,"setting","as it is linked to incompatible colorscales."].join(" ")))):_[b]=[w,d,[u]])}}var C=c[o+"min"],M=c[o+"max"],I=m(C)&&m(M)&&C<M;t(s+o+"auto",!I)?t(s+o+"mid"):(t(s+o+"min"),t(s+o+"max"));var P,S,E=c.colorscale,R=y.colorscale;void 0!==E&&(P=!e(E)),void 0!==R&&(P=!e(R)),t(s+"autocolorscale",P),t(s+"colorscale"),t(s+"reversescale"),"marker.line."!==s&&(s&&p&&(S=k(c)),t(s+"showscale",S)&&(s&&y&&(a._template=y),x(c,a,f)))}},{"../../lib":515,"../../registry":647,"../colorbar/defaults":370,"../colorbar/has_colorbar":372,"./scales":382,"fast-isnumeric":190}],378:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("tinycolor2"),k=v("fast-isnumeric"),x=v("../../lib"),e=v("../color"),n=v("./scales").isValid,i=["showscale","autocolorscale","colorscale","reversescale","colorbar"],l=["min","max","mid","auto"];function r(s){var o,p,c,a=s._colorAx,y=a||s,u={};for(p=0;p<i.length;p++)u[c=i[p]]=y[c];if(a)for(o="c",p=0;p<l.length;p++)u[c=l[p]]=y["c"+c];else{var _;for(p=0;p<l.length;p++)((_="c"+(c=l[p]))in y||(_="z"+c)in y)&&(u[c]=y[_]);o=_.charAt(0)}return u._sync=function(b,w){var T=-1!==l.indexOf(b)?o+b:b;y[T]=y["_"+T]=w},u}function d(s){for(var o=r(s),p=o.min,c=o.max,a=o.reversescale?f(o.colorscale):o.colorscale,y=a.length,u=new Array(y),_=new Array(y),b=0;b<y;b++){var w=a[b];u[b]=p+w[0]*(c-p),_[b]=w[1]}return{domain:u,range:_}}function f(s){for(var o=s.length,p=new Array(o),c=o-1,a=0;c>=0;c--,a++){var y=s[c];p[a]=[1-y[0],y[1]]}return p}function t(s,o){o=o||{};for(var p=s.domain,c=s.range,a=c.length,y=new Array(a),u=0;u<a;u++){var _=g(c[u]).toRgb();y[u]=[_.r,_.g,_.b,_.a]}var b,w=m.scale.linear().domain(p).range(y).clamp(!0),T=o.noNumericCheck,C=o.returnArray;return(b=T&&C?w:T?function(M){return h(w(M))}:C?function(M){return k(M)?w(M):g(M).isValid()?M:e.defaultLine}:function(M){return k(M)?h(w(M)):g(M).isValid()?M:e.defaultLine}).domain=w.domain,b.range=function(){return c},b}function h(s){return g({r:s[0],g:s[1],b:s[2],a:s[3]}).toRgbString()}$.exports={hasColorscale:function(s,o,p){var c=o?x.nestedProperty(s,o).get()||{}:s,a=c[p||"color"],y=!1;if(x.isArrayOrTypedArray(a))for(var u=0;u<a.length;u++)if(k(a[u])){y=!0;break}return x.isPlainObject(c)&&(y||!0===c.showscale||k(c.cmin)&&k(c.cmax)||n(c.colorscale)||x.isPlainObject(c.colorbar))},extractOpts:r,extractScale:d,flipScale:f,makeColorScaleFunc:t,makeColorScaleFuncFromTrace:function(s,o){return t(d(s),o)}}},{"../../lib":515,"../color":367,"./scales":382,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],379:[function(v,$,Q){"use strict";var m=v("./scales"),g=v("./helpers");$.exports={moduleType:"component",name:"colorscale",attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),handleDefaults:v("./defaults"),crossTraceDefaults:v("./cross_trace_defaults"),calc:v("./calc"),scales:m.scales,defaultScale:m.defaultScale,getScale:m.get,isValidScale:m.isValid,hasColorscale:g.hasColorscale,extractOpts:g.extractOpts,extractScale:g.extractScale,flipScale:g.flipScale,makeColorScaleFunc:g.makeColorScaleFunc,makeColorScaleFuncFromTrace:g.makeColorScaleFuncFromTrace}},{"./attributes":374,"./calc":375,"./cross_trace_defaults":376,"./defaults":377,"./helpers":378,"./layout_attributes":380,"./layout_defaults":381,"./scales":382}],380:[function(v,$,Q){"use strict";var m=v("../../lib/extend").extendFlat,g=v("./attributes"),k=v("./scales").scales;$.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:k.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:k.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:k.RdBu,editType:"calc"}},coloraxis:m({_isSubplotObj:!0,editType:"calc"},g("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":505,"./attributes":374,"./scales":382}],381:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plot_api/plot_template"),k=v("./layout_attributes"),x=v("./defaults");$.exports=function(e,n){function i(o,p){return m.coerce(e,n,k,o,p)}i("colorscale.sequential"),i("colorscale.sequentialminus"),i("colorscale.diverging");var l,r,d=n._colorAxes;function f(o,p){return m.coerce(l,r,k.coloraxis,o,p)}for(var t in d){var h=d[t];if(h[0])l=e[t]||{},(r=g.newContainer(n,t,"coloraxis"))._name=t,x(l,r,n,f,{prefix:"",cLetter:"c"});else{for(var s=0;s<h[2].length;s++)h[2][s]();delete n._colorAxes[t]}}}},{"../../lib":515,"../../plot_api/plot_template":555,"./defaults":377,"./layout_attributes":380}],382:[function(v,$,Q){"use strict";var m=v("tinycolor2"),g={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},k=g.RdBu;function x(e){var n=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var i=0;i<e.length;i++){var l=e[i];if(2!==l.length||+l[0]<n||!m(l[1]).isValid())return!1;n=+l[0]}return!0}$.exports={scales:g,defaultScale:k,get:function(e,n){if(n||(n=k),!e)return n;function i(){try{e=g[e]||JSON.parse(e)}catch{e=n}}return"string"==typeof e&&(i(),"string"==typeof e&&i()),x(e)?e:n},isValid:function(e){return void 0!==g[e]||x(e)}}},{tinycolor2:313}],383:[function(v,$,Q){"use strict";$.exports=function(m,g,k,x,e){var n=(m-k)/(x-k),i=n+g/(x-k),l=(n+i)/2;return"left"===e||"bottom"===e?n:"center"===e||"middle"===e?l:"right"===e||"top"===e?i:n<2/3-l?n:i>4/3-l?i:l}},{}],384:[function(v,$,Q){"use strict";var m=v("../../lib"),g=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];$.exports=function(k,x,e,n){return k="left"===e?0:"center"===e?1:"right"===e?2:m.constrain(Math.floor(3*k),0,2),x="bottom"===n?0:"middle"===n?1:"top"===n?2:m.constrain(Math.floor(3*x),0,2),g[x][k]}},{"../../lib":515}],385:[function(v,$,Q){"use strict";Q.selectMode=function(m){return"lasso"===m||"select"===m},Q.drawMode=function(m){return"drawclosedpath"===m||"drawopenpath"===m||"drawline"===m||"drawrect"===m||"drawcircle"===m},Q.openMode=function(m){return"drawline"===m||"drawopenpath"===m},Q.rectMode=function(m){return"select"===m||"drawline"===m||"drawrect"===m||"drawcircle"===m},Q.freeMode=function(m){return"lasso"===m||"drawclosedpath"===m||"drawopenpath"===m},Q.selectingOrDrawing=function(m){return Q.freeMode(m)||Q.rectMode(m)}},{}],386:[function(v,$,Q){"use strict";var m=v("mouse-event-offset"),g=v("has-hover"),k=v("has-passive-events"),x=v("../../lib").removeElement,e=v("../../plots/cartesian/constants"),n=$.exports={};n.align=v("./align"),n.getCursor=v("./cursor");var i=v("./unhover");function l(){var d=document.createElement("div");d.className="dragcover";var f=d.style;return f.position="fixed",f.left=0,f.right=0,f.top=0,f.bottom=0,f.zIndex=999999999,f.background="none",document.body.appendChild(d),d}function r(d){return m(d.changedTouches?d.changedTouches[0]:d,document.body)}n.unhover=i.wrapped,n.unhoverRaw=i.raw,n.init=function(d){var f,t,h,s,o,p,c,a,y=d.gd,u=1,_=y._context.doubleClickDelay,b=d.element;y._mouseDownTime||(y._mouseDownTime=0),b.style.pointerEvents="all",b.onmousedown=T,k?(b._ontouchstart&&b.removeEventListener("touchstart",b._ontouchstart),b._ontouchstart=T,b.addEventListener("touchstart",T,{passive:!1})):b.ontouchstart=T;var w=d.clampFn||function(I,P,S){return Math.abs(I)<S&&(I=0),Math.abs(P)<S&&(P=0),[I,P]};function T(I){y._dragged=!1,y._dragging=!0;var P=r(I);f=P[0],t=P[1],c=I.target,p=I,a=2===I.buttons||I.ctrlKey,void 0===I.clientX&&void 0===I.clientY&&(I.clientX=f,I.clientY=t),(h=(new Date).getTime())-y._mouseDownTime<_?u+=1:(u=1,y._mouseDownTime=h),d.prepFn&&d.prepFn(I,f,t),g&&!a?(o=l()).style.cursor=window.getComputedStyle(b).cursor:g||(o=document,s=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(b).cursor),document.addEventListener("mouseup",M),document.addEventListener("touchend",M),!1!==d.dragmode&&(I.preventDefault(),document.addEventListener("mousemove",C),document.addEventListener("touchmove",C,{passive:!1}))}function C(I){I.preventDefault();var P=r(I),E=w(P[0]-f,P[1]-t,d.minDrag||e.MINDRAG),R=E[0],D=E[1];(R||D)&&(y._dragged=!0,n.unhover(y,I)),y._dragged&&d.moveFn&&!a&&(y._dragdata={element:b,dx:R,dy:D},d.moveFn(R,D))}function M(I){if(delete y._dragdata,!1!==d.dragmode&&(I.preventDefault(),document.removeEventListener("mousemove",C),document.removeEventListener("touchmove",C)),document.removeEventListener("mouseup",M),document.removeEventListener("touchend",M),g?x(o):s&&(o.documentElement.style.cursor=s,s=null),y._dragging){if(y._dragging=!1,(new Date).getTime()-y._mouseDownTime>_&&(u=Math.max(u-1,1)),y._dragged)d.doneFn&&d.doneFn();else if(d.clickFn&&d.clickFn(u,p),!a){var P;try{P=new MouseEvent("click",I)}catch{var S=r(I);(P=document.createEvent("MouseEvents")).initMouseEvent("click",I.bubbles,I.cancelable,I.view,I.detail,I.screenX,I.screenY,S[0],S[1],I.ctrlKey,I.altKey,I.shiftKey,I.metaKey,I.button,I.relatedTarget)}c.dispatchEvent(P)}y._dragging=!1,y._dragged=!1}else y._dragged=!1}},n.coverSlip=l},{"../../lib":515,"../../plots/cartesian/constants":573,"./align":383,"./cursor":384,"./unhover":387,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],387:[function(v,$,Q){"use strict";var m=v("../../lib/events"),g=v("../../lib/throttle"),k=v("../../lib/dom").getGraphDiv,x=v("../fx/constants"),e=$.exports={};e.wrapped=function(n,i,l){(n=k(n))._fullLayout&&g.clear(n._fullLayout._uid+x.HOVERID),e.raw(n,i,l)},e.raw=function(n,i){var l=n._fullLayout,r=n._hoverdata;i||(i={}),i.target&&!n._dragged&&!1===m.triggerHandler(n,"plotly_beforehover",i)||(l._hoverlayer.selectAll("g").remove(),l._hoverlayer.selectAll("line").remove(),l._hoverlayer.selectAll("circle").remove(),n._hoverdata=void 0,i.target&&r&&n.emit("plotly_unhover",{event:i,points:r}))}},{"../../lib/dom":503,"../../lib/events":504,"../../lib/throttle":542,"../fx/constants":401}],388:[function(v,$,Q){"use strict";Q.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},Q.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],389:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=g.numberFormat,x=v("fast-isnumeric"),e=v("tinycolor2"),n=v("../../registry"),i=v("../color"),l=v("../colorscale"),r=g.strTranslate,d=v("../../lib/svg_text_utils"),f=v("../../constants/xmlns_namespaces"),t=v("../../constants/alignment").LINE_SPACING,h=v("../../constants/interactions").DESELECTDIM,s=v("../../traces/scatter/subtypes"),o=v("../../traces/scatter/make_bubble_size_func"),p=v("../../components/fx/helpers").appendArrayPointValue,c=$.exports={};function a(pe,ge,we){var oe=ge.fillpattern,de=oe&&c.getPatternAttr(oe.shape,0,"");if(de){var Te=c.getPatternAttr(oe.bgcolor,0,null),Ee=c.getPatternAttr(oe.fgcolor,0,null),Ae=oe.fgopacity,De=c.getPatternAttr(oe.size,0,8),Ie=c.getPatternAttr(oe.solidity,0,.3);c.pattern(pe,"point",we,ge.uid,de,De,Ie,void 0,oe.fillmode,Te,Ee,Ae)}else ge.fillcolor&&pe.call(i.fill,ge.fillcolor)}c.font=function(pe,ge,we,oe){g.isPlainObject(ge)&&(oe=ge.color,we=ge.size,ge=ge.family),ge&&pe.style("font-family",ge),we+1&&pe.style("font-size",we+"px"),oe&&pe.call(i.fill,oe)},c.setPosition=function(pe,ge,we){pe.attr("x",ge).attr("y",we)},c.setSize=function(pe,ge,we){pe.attr("width",ge).attr("height",we)},c.setRect=function(pe,ge,we,oe,de){pe.call(c.setPosition,ge,we).call(c.setSize,oe,de)},c.translatePoint=function(pe,ge,we,oe){var de=we.c2p(pe.x),Te=oe.c2p(pe.y);return!!(x(de)&&x(Te)&&ge.node())&&("text"===ge.node().nodeName?ge.attr("x",de).attr("y",Te):ge.attr("transform",r(de,Te)),!0)},c.translatePoints=function(pe,ge,we){pe.each(function(oe){var de=m.select(this);c.translatePoint(oe,de,ge,we)})},c.hideOutsideRangePoint=function(pe,ge,we,oe,de,Te){ge.attr("display",we.isPtWithinRange(pe,de)&&oe.isPtWithinRange(pe,Te)?null:"none")},c.hideOutsideRangePoints=function(pe,ge){if(ge._hasClipOnAxisFalse){var we=ge.xaxis,oe=ge.yaxis;pe.each(function(de){var Te=de[0].trace,Ee=Te.xcalendar,Ae=Te.ycalendar,De=n.traceIs(Te,"bar-like")?".bartext":".point,.textpoint";pe.selectAll(De).each(function(Ie){c.hideOutsideRangePoint(Ie,m.select(this),we,oe,Ee,Ae)})})}},c.crispRound=function(pe,ge,we){return ge&&x(ge)?pe._context.staticPlot?ge:ge<1?1:Math.round(ge):we||0},c.singleLineStyle=function(pe,ge,we,oe,de){ge.style("fill","none");var Te=(((pe||[])[0]||{}).trace||{}).line||{},Ee=we||Te.width||0,Ae=de||Te.dash||"";i.stroke(ge,oe||Te.color),c.dashLine(ge,Ae,Ee)},c.lineGroupStyle=function(pe,ge,we,oe){pe.style("fill","none").each(function(de){var Te=(((de||[])[0]||{}).trace||{}).line||{},Ee=ge||Te.width||0,Ae=oe||Te.dash||"";m.select(this).call(i.stroke,we||Te.color).call(c.dashLine,Ae,Ee)})},c.dashLine=function(pe,ge,we){ge=c.dashStyle(ge,we=+we||0),pe.style({"stroke-dasharray":ge,"stroke-width":we+"px"})},c.dashStyle=function(pe,ge){ge=+ge||1;var we=Math.max(ge,3);return"solid"===pe?pe="":"dot"===pe?pe=we+"px,"+we+"px":"dash"===pe?pe=3*we+"px,"+3*we+"px":"longdash"===pe?pe=5*we+"px,"+5*we+"px":"dashdot"===pe?pe=3*we+"px,"+we+"px,"+we+"px,"+we+"px":"longdashdot"===pe&&(pe=5*we+"px,"+2*we+"px,"+we+"px,"+2*we+"px"),pe},c.singleFillStyle=function(pe,ge){var we=m.select(pe.node());a(pe,((we.data()[0]||[])[0]||{}).trace||{},ge)},c.fillGroupStyle=function(pe,ge){pe.style("stroke-width",0).each(function(we){var oe=m.select(this);we[0].trace&&a(oe,we[0].trace,ge)})};var y=v("./symbol_defs");c.symbolNames=[],c.symbolFuncs=[],c.symbolBackOffs=[],c.symbolNeedLines={},c.symbolNoDot={},c.symbolNoFill={},c.symbolList=[],Object.keys(y).forEach(function(pe){var ge=y[pe],we=ge.n;c.symbolList.push(we,String(we),pe,we+100,String(we+100),pe+"-open"),c.symbolNames[we]=pe,c.symbolFuncs[we]=ge.f,c.symbolBackOffs[we]=ge.backoff||0,ge.needLine&&(c.symbolNeedLines[we]=!0),ge.noDot?c.symbolNoDot[we]=!0:c.symbolList.push(we+200,String(we+200),pe+"-dot",we+300,String(we+300),pe+"-open-dot"),ge.noFill&&(c.symbolNoFill[we]=!0)});var u=c.symbolNames.length;function _(pe,ge,we,oe){return c.symbolFuncs[pe%100](ge,we,oe)+(pe>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}c.symbolNumber=function(pe){if(x(pe))pe=+pe;else if("string"==typeof pe){var ge=0;pe.indexOf("-open")>0&&(ge=100,pe=pe.replace("-open","")),pe.indexOf("-dot")>0&&(ge+=200,pe=pe.replace("-dot","")),(pe=c.symbolNames.indexOf(pe))>=0&&(pe+=ge)}return pe%100>=u||pe>=400?0:Math.floor(Math.max(pe,0))};var b={x1:1,x2:0,y1:0,y2:0},w={x1:0,x2:0,y1:1,y2:0},T=k("~f"),C={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:w},verticalreversed:{node:"linearGradient",attrs:w,reversed:!0}};c.gradient=function(pe,ge,we,oe,de,Te){for(var Ee=de.length,Ae=C[oe],De=new Array(Ee),Ie=0;Ie<Ee;Ie++)Ae.reversed?De[Ee-1-Ie]=[T(100*(1-de[Ie][0])),de[Ie][1]]:De[Ie]=[T(100*de[Ie][0]),de[Ie][1]];var Oe=ge._fullLayout,Xe="g"+Oe._uid+"-"+we,Fe=Oe._defs.select(".gradients").selectAll("#"+Xe).data([oe+De.join(";")],g.identity);Fe.exit().remove(),Fe.enter().append(Ae.node).each(function(){var Pe=m.select(this);Ae.attrs&&Pe.attr(Ae.attrs),Pe.attr("id",Xe);var Re=Pe.selectAll("stop").data(De);Re.exit().remove(),Re.enter().append("stop"),Re.each(function(qe){var Qe=e(qe[1]);m.select(this).attr({offset:qe[0]+"%","stop-color":i.tinyRGB(Qe),"stop-opacity":Qe.getAlpha()})})}),pe.style(Te,U(Xe,ge)).style(Te+"-opacity",null),pe.classed("gradient_filled",!0)},c.pattern=function(pe,ge,we,oe,de,Te,Ee,Ae,De,Ie,Oe,Xe){var Fe="legend"===ge;Ae&&("overlay"===De?Oe=i.contrast(Ie=Ae):(Ie=void 0,Oe=Ae));var Pe,Re,qe,Qe,ct,bt,Tt,_t,Ke,Ht=we._fullLayout,Zt="p"+Ht._uid+"-"+oe,$t={},Xt=e(Oe),cr=i.tinyRGB(Xt),Ft=Xe*Xt.getAlpha();switch(de){case"/":Pe=Te*Math.sqrt(2),Re=Te*Math.sqrt(2),bt="path",$t={d:qe="M-"+Pe/4+","+Re/4+"l"+Pe/2+",-"+Re/2+"M0,"+Re+"L"+Pe+",0M"+Pe/4*3+","+Re/4*5+"l"+Pe/2+",-"+Re/2,opacity:Ft,stroke:cr,"stroke-width":(Qe=Ee*Te)+"px"};break;case"\\":Pe=Te*Math.sqrt(2),Re=Te*Math.sqrt(2),bt="path",$t={d:qe="M"+Pe/4*3+",-"+Re/4+"l"+Pe/2+","+Re/2+"M0,0L"+Pe+","+Re+"M-"+Pe/4+","+Re/4*3+"l"+Pe/2+","+Re/2,opacity:Ft,stroke:cr,"stroke-width":(Qe=Ee*Te)+"px"};break;case"x":Pe=Te*Math.sqrt(2),Re=Te*Math.sqrt(2),qe="M-"+Pe/4+","+Re/4+"l"+Pe/2+",-"+Re/2+"M0,"+Re+"L"+Pe+",0M"+Pe/4*3+","+Re/4*5+"l"+Pe/2+",-"+Re/2+"M"+Pe/4*3+",-"+Re/4+"l"+Pe/2+","+Re/2+"M0,0L"+Pe+","+Re+"M-"+Pe/4+","+Re/4*3+"l"+Pe/2+","+Re/2,Qe=Te-Te*Math.sqrt(1-Ee),bt="path",$t={d:qe,opacity:Ft,stroke:cr,"stroke-width":Qe+"px"};break;case"|":bt="path",bt="path",$t={d:qe="M"+(Pe=Te)/2+",0L"+Pe/2+","+(Re=Te),opacity:Ft,stroke:cr,"stroke-width":(Qe=Ee*Te)+"px"};break;case"-":bt="path",bt="path",$t={d:qe="M0,"+(Re=Te)/2+"L"+(Pe=Te)+","+Re/2,opacity:Ft,stroke:cr,"stroke-width":(Qe=Ee*Te)+"px"};break;case"+":bt="path",qe="M"+(Pe=Te)/2+",0L"+Pe/2+","+(Re=Te)+"M0,"+Re/2+"L"+Pe+","+Re/2,Qe=Te-Te*Math.sqrt(1-Ee),bt="path",$t={d:qe,opacity:Ft,stroke:cr,"stroke-width":Qe+"px"};break;case".":Pe=Te,Re=Te,Ee<Math.PI/4?ct=Math.sqrt(Ee*Te*Te/Math.PI):(Tt=Ee,_t=Math.PI/4,1,ct=(Ke=Te/2)+(Te/Math.sqrt(2)-Ke)*(Tt-_t)/(1-_t)),bt="circle",$t={cx:Pe/2,cy:Re/2,r:ct,opacity:Ft,fill:cr}}var Be=[de||"noSh",Ie||"noBg",Oe||"noFg",Te,Ee].join(";"),He=Ht._defs.select(".patterns").selectAll("#"+Zt).data([Be],g.identity);He.exit().remove(),He.enter().append("pattern").each(function(){var he=m.select(this);if(he.attr({id:Zt,width:Pe+"px",height:Re+"px",patternUnits:"userSpaceOnUse",patternTransform:Fe?"scale(0.8)":""}),Ie){var be=e(Ie),ze=i.tinyRGB(be),Ve=be.getAlpha(),Je=he.selectAll("rect").data([0]);Je.exit().remove(),Je.enter().append("rect").attr({width:Pe+"px",height:Re+"px",fill:ze,"fill-opacity":Ve})}var Ye=he.selectAll(bt).data([0]);Ye.exit().remove(),Ye.enter().append(bt).attr($t)}),pe.style("fill",U(Zt,we)).style("fill-opacity",null),pe.classed("pattern_filled",!0)},c.initGradients=function(pe){g.ensureSingle(pe._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),m.select(pe).selectAll(".gradient_filled").classed("gradient_filled",!1)},c.initPatterns=function(pe){g.ensureSingle(pe._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),m.select(pe).selectAll(".pattern_filled").classed("pattern_filled",!1)},c.getPatternAttr=function(pe,ge,we){return pe&&g.isArrayOrTypedArray(pe)?ge<pe.length?pe[ge]:we:pe},c.pointStyle=function(pe,ge,we){if(pe.size()){var oe=c.makePointStyleFns(ge);pe.each(function(de){c.singlePointStyle(de,m.select(this),ge,oe,we)})}},c.singlePointStyle=function(pe,ge,we,oe,de){var Te=we.marker,Ee=Te.line;if(ge.style("opacity",oe.selectedOpacityFn?oe.selectedOpacityFn(pe):void 0===pe.mo?Te.opacity:pe.mo),oe.ms2mrc){var Ae;Ae="various"===pe.ms||"various"===Te.size?3:oe.ms2mrc(pe.ms),pe.mrc=Ae,oe.selectedSizeFn&&(Ae=pe.mrc=oe.selectedSizeFn(pe));var De=c.symbolNumber(pe.mx||Te.symbol)||0;pe.om=De%200>=100;var Ie=Me(pe,we),Oe=ee(pe,we);ge.attr("d",_(De,Ae,Ie,Oe))}var Xe,Fe,Pe,Re=!1;if(pe.so?(Pe=Ee.outlierwidth,Fe=Ee.outliercolor,Xe=Te.outliercolor):(Pe=(pe.mlw+1||(Ee||{}).width+1||(pe.trace?(pe.trace.marker.line||{}).width:0)+1)-1||0,Fe="mlc"in pe?pe.mlcc=oe.lineScale(pe.mlc):g.isArrayOrTypedArray(Ee.color)?i.defaultLine:Ee.color,g.isArrayOrTypedArray(Te.color)&&(Xe=i.defaultLine,Re=!0),Xe="mc"in pe?pe.mcc=oe.markerScale(pe.mc):Te.color||"rgba(0,0,0,0)",oe.selectedColorFn&&(Xe=oe.selectedColorFn(pe))),pe.om)ge.call(i.stroke,Xe).style({"stroke-width":(Pe||1)+"px",fill:"none"});else{ge.style("stroke-width",(pe.isBlank?0:Pe)+"px");var Qe=Te.gradient,ct=pe.mgt;ct?Re=!0:ct=Qe&&Qe.type,g.isArrayOrTypedArray(ct)&&(C[ct=ct[0]]||(ct=0));var bt=Te.pattern,Tt=bt&&c.getPatternAttr(bt.shape,pe.i,"");if(ct&&"none"!==ct){var _t=pe.mgc;_t?Re=!0:_t=Qe.color;var nt=we.uid;Re&&(nt+="-"+pe.i),c.gradient(ge,de,nt,ct,[[0,_t],[1,Xe]],"fill")}else if(Tt){var Ke=c.getPatternAttr(bt.bgcolor,pe.i,null),xt=c.getPatternAttr(bt.fgcolor,pe.i,null),Ht=bt.fgopacity,Zt=c.getPatternAttr(bt.size,pe.i,8),$t=c.getPatternAttr(bt.solidity,pe.i,.3),Xt=pe.mcc||g.isArrayOrTypedArray(bt.shape)||g.isArrayOrTypedArray(bt.bgcolor)||g.isArrayOrTypedArray(bt.size)||g.isArrayOrTypedArray(bt.solidity),cr=we.uid;Xt&&(cr+="-"+pe.i),c.pattern(ge,"point",de,cr,Tt,Zt,$t,pe.mcc,bt.fillmode,Ke,xt,Ht)}else i.fill(ge,Xe);Pe&&i.stroke(ge,Fe)}},c.makePointStyleFns=function(pe){var ge={},we=pe.marker;return ge.markerScale=c.tryColorscale(we,""),ge.lineScale=c.tryColorscale(we,"line"),n.traceIs(pe,"symbols")&&(ge.ms2mrc=s.isBubble(pe)?o(pe):function(){return(we.size||6)/2}),pe.selectedpoints&&g.extendFlat(ge,c.makeSelectedPointStyleFns(pe)),ge},c.makeSelectedPointStyleFns=function(pe){var ge={},de=pe.marker||{},Te=(pe.selected||{}).marker||{},Ee=(pe.unselected||{}).marker||{},De=Te.opacity,Ie=Ee.opacity,Oe=void 0!==De,Xe=void 0!==Ie;(g.isArrayOrTypedArray(de.opacity)||Oe||Xe)&&(ge.selectedOpacityFn=function(_t){var nt=void 0===_t.mo?de.opacity:_t.mo;return _t.selected?Oe?De:nt:Xe?Ie:h*nt});var Fe=de.color,Pe=Te.color,Re=Ee.color;(Pe||Re)&&(ge.selectedColorFn=function(_t){var nt=_t.mcc||Fe;return _t.selected?Pe||nt:Re||nt});var qe=de.size,Qe=Te.size,ct=Ee.size,bt=void 0!==Qe,Tt=void 0!==ct;return n.traceIs(pe,"symbols")&&(bt||Tt)&&(ge.selectedSizeFn=function(_t){var nt=_t.mrc||qe/2;return _t.selected?bt?Qe/2:nt:Tt?ct/2:nt}),ge},c.makeSelectedTextStyleFns=function(pe){var ge={},Ae=(pe.textfont||{}).color,De=((pe.selected||{}).textfont||{}).color,Ie=((pe.unselected||{}).textfont||{}).color;return ge.selectedTextColorFn=function(Oe){var Xe=Oe.tc||Ae;return Oe.selected?De||Xe:Ie||(De?Xe:i.addOpacity(Xe,h))},ge},c.selectedPointStyle=function(pe,ge){if(pe.size()&&ge.selectedpoints){var we=c.makeSelectedPointStyleFns(ge),oe=ge.marker||{},de=[];we.selectedOpacityFn&&de.push(function(Te,Ee){Te.style("opacity",we.selectedOpacityFn(Ee))}),we.selectedColorFn&&de.push(function(Te,Ee){i.fill(Te,we.selectedColorFn(Ee))}),we.selectedSizeFn&&de.push(function(Te,Ee){var Ae=Ee.mx||oe.symbol||0,De=we.selectedSizeFn(Ee);Te.attr("d",_(c.symbolNumber(Ae),De,Me(Ee,ge),ee(Ee,ge))),Ee.mrc2=De}),de.length&&pe.each(function(Te){for(var Ee=m.select(this),Ae=0;Ae<de.length;Ae++)de[Ae](Ee,Te)})}},c.tryColorscale=function(pe,ge){var we=ge?g.nestedProperty(pe,ge).get():pe;return we&&(we.colorscale||we._colorAx)&&g.isArrayOrTypedArray(we.color)?l.makeColorScaleFuncFromTrace(we):g.identity};var S,E,M={start:1,end:-1,middle:0,bottom:1,top:-1};function I(pe,ge,we,oe,de){var Te=m.select(pe.node().parentNode),Ee=-1!==ge.indexOf("top")?"top":-1!==ge.indexOf("bottom")?"bottom":"middle",Ae=-1!==ge.indexOf("left")?"end":-1!==ge.indexOf("right")?"start":"middle",De=oe?oe/.8+1:0,Ie=(d.lineCount(pe)-1)*t+1,Oe=M[Ae]*De,Xe=.75*we+M[Ee]*De+(M[Ee]-1)*Ie*we/2;pe.attr("text-anchor",Ae),de||Te.attr("transform",r(Oe,Xe))}function P(pe,ge){var we=pe.ts||ge.textfont.size;return x(we)&&we>0?we:0}function R(pe,ge,we){return we&&(pe=Z(pe)),ge?j(pe[1]):D(pe[0])}function D(pe){var ge=m.round(pe,2);return S=ge,ge}function j(pe){var ge=m.round(pe,2);return E=ge,ge}function H(pe,ge,we,oe){var de=pe[0]-ge[0],Te=pe[1]-ge[1],Ee=we[0]-ge[0],Ae=we[1]-ge[1],De=Math.pow(de*de+Te*Te,.25),Ie=Math.pow(Ee*Ee+Ae*Ae,.25),Oe=(Ie*Ie*de-De*De*Ee)*oe,Xe=(Ie*Ie*Te-De*De*Ae)*oe,Fe=3*Ie*(De+Ie),Pe=3*De*(De+Ie);return[[D(ge[0]+(Fe&&Oe/Fe)),j(ge[1]+(Fe&&Xe/Fe))],[D(ge[0]-(Pe&&Oe/Pe)),j(ge[1]-(Pe&&Xe/Pe))]]}c.textPointStyle=function(pe,ge,we){if(pe.size()){var oe;if(ge.selectedpoints){var de=c.makeSelectedTextStyleFns(ge);oe=de.selectedTextColorFn}var Te=ge.texttemplate,Ee=we._fullLayout;pe.each(function(Ae){var De=m.select(this),Ie=Te?g.extractOption(Ae,ge,"txt","texttemplate"):g.extractOption(Ae,ge,"tx","text");if(Ie||0===Ie){if(Te){var Oe=ge._module.formatLabels,Xe=Oe?Oe(Ae,ge,Ee):{},Fe={};p(Fe,ge,Ae.i),Ie=g.texttemplateString(Ie,Xe,Ee._d3locale,Fe,Ae,ge._meta||{})}var Re=Ae.tp||ge.textposition,qe=P(Ae,ge),Qe=oe?oe(Ae):Ae.tc||ge.textfont.color;De.call(c.font,Ae.tf||ge.textfont.family,qe,Qe).text(Ie).call(d.convertToTspans,we).call(I,Re,qe,Ae.mrc)}else De.remove()})}},c.selectedTextStyle=function(pe,ge){if(pe.size()&&ge.selectedpoints){var we=c.makeSelectedTextStyleFns(ge);pe.each(function(oe){var de=m.select(this),Te=we.selectedTextColorFn(oe),Ee=oe.tp||ge.textposition,Ae=P(oe,ge);i.fill(de,Te);var De=n.traceIs(ge,"bar-like");I(de,Ee,Ae,oe.mrc2||oe.mrc,De)})}},c.smoothopen=function(pe,ge){if(pe.length<3)return"M"+pe.join("L");var we,oe="M"+pe[0],de=[];for(we=1;we<pe.length-1;we++)de.push(H(pe[we-1],pe[we],pe[we+1],ge));for(oe+="Q"+de[0][0]+" "+pe[1],we=2;we<pe.length-1;we++)oe+="C"+de[we-2][1]+" "+de[we-1][0]+" "+pe[we];return oe+"Q"+de[pe.length-3][1]+" "+pe[pe.length-1]},c.smoothclosed=function(pe,ge){if(pe.length<3)return"M"+pe.join("L")+"Z";var we,oe="M"+pe[0],de=pe.length-1,Te=[H(pe[de],pe[0],pe[1],ge)];for(we=1;we<de;we++)Te.push(H(pe[we-1],pe[we],pe[we+1],ge));for(Te.push(H(pe[de-1],pe[de],pe[0],ge)),we=1;we<=de;we++)oe+="C"+Te[we-1][1]+" "+Te[we][0]+" "+pe[we];return oe+"C"+Te[de][1]+" "+Te[0][0]+" "+pe[0]+"Z"};var Y={hv:function(pe,ge,we){return"H"+D(ge[0])+"V"+R(ge,1,we)},vh:function(pe,ge,we){return"V"+j(ge[1])+"H"+R(ge,0,we)},hvh:function(pe,ge,we){return"H"+D((pe[0]+ge[0])/2)+"V"+j(ge[1])+"H"+R(ge,0,we)},vhv:function(pe,ge,we){return"V"+j((pe[1]+ge[1])/2)+"H"+D(ge[0])+"V"+R(ge,1,we)}},X=function(pe,ge,we){return"L"+R(ge,0,we)+","+R(ge,1,we)};function Z(pe,ge){var we=pe.backoff,oe=pe.trace,de=pe.d,Te=pe.i;if(we&&oe&&oe.marker&&oe.marker.angle%360==0&&oe.line&&"spline"!==oe.line.shape){var Ee=g.isArrayOrTypedArray(we),Ae=pe,De=ge?ge[0]:S||0,Ie=ge?ge[1]:E||0,Oe=Ae[0],Xe=Ae[1],Re=Math.atan2(Xe-Ie,Oe-De),qe=Ee?we[Te]:we;if("auto"===qe){var Qe=Ae.i;"scatter"===oe.type&&Qe--;var ct=Ae.marker;qe=ct?c.symbolBackOffs[c.symbolNumber(ct.symbol)]*ct.size:0,qe+=c.getMarkerStandoff(de[Qe],oe)||0}var bt=Oe-qe*Math.cos(Re),Tt=Xe-qe*Math.sin(Re);(bt<=Oe&&bt>=De||bt>=Oe&&bt<=De)&&(Tt<=Xe&&Tt>=Ie||Tt>=Xe&&Tt<=Ie)&&(pe=[bt,Tt])}return pe}c.steps=function(pe){var ge=Y[pe]||X;return function(we){for(var oe="M"+D(we[0][0])+","+j(we[0][1]),de=we.length,Te=1;Te<de;Te++)oe+=ge(we[Te-1],we[Te],Te===de-1);return oe}},c.applyBackoff=Z,c.makeTester=function(){var pe=g.ensureSingleById(m.select("body"),"svg","js-plotly-tester",function(we){we.attr(f.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),ge=g.ensureSingle(pe,"path","js-reference-point",function(we){we.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});c.tester=pe,c.testref=ge},c.savedBBoxes={};var W=0;function re(pe){var ge=pe.getAttribute("data-unformatted");if(null!==ge)return ge+pe.getAttribute("data-math")+pe.getAttribute("text-anchor")+pe.getAttribute("style")}function U(pe,ge){if(!pe)return null;var we=ge._context,oe=we._exportedPlot?"":we._baseUrl||"";return oe?"url('"+oe+"#"+pe+"')":"url(#"+pe+")"}c.bBox=function(pe,ge,we){var oe,de,Te;if(we||(we=re(pe)),we){if(oe=c.savedBBoxes[we])return g.extendFlat({},oe)}else if(1===pe.childNodes.length){var Ee=pe.childNodes[0];if(we=re(Ee)){var Ae=+Ee.getAttribute("x")||0,De=+Ee.getAttribute("y")||0,Ie=Ee.getAttribute("transform");if(!Ie){var Oe=c.bBox(Ee,!1,we);return Ae&&(Oe.left+=Ae,Oe.right+=Ae),De&&(Oe.top+=De,Oe.bottom+=De),Oe}if(oe=c.savedBBoxes[we+="~"+Ae+"~"+De+"~"+Ie])return g.extendFlat({},oe)}}ge?de=pe:(Te=c.tester.node(),de=pe.cloneNode(!0),Te.appendChild(de)),m.select(de).attr("transform",null).call(d.positionText,0,0);var Xe=de.getBoundingClientRect(),Fe=c.testref.node().getBoundingClientRect();ge||Te.removeChild(de);var Pe={height:Xe.height,width:Xe.width,left:Xe.left-Fe.left,top:Xe.top-Fe.top,right:Xe.right-Fe.left,bottom:Xe.bottom-Fe.top};return W>=1e4&&(c.savedBBoxes={},W=0),we&&(c.savedBBoxes[we]=Pe),W++,g.extendFlat({},Pe)},c.setClipUrl=function(pe,ge,we){pe.attr("clip-path",U(ge,we))},c.getTranslate=function(pe){var ge=(pe[pe.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(we,oe,de){return[oe,de].join(" ")}).split(" ");return{x:+ge[0]||0,y:+ge[1]||0}},c.setTranslate=function(pe,ge,we){var de=pe.attr?"attr":"setAttribute",Te=pe[pe.attr?"attr":"getAttribute"]("transform")||"";return ge=ge||0,we=we||0,Te=Te.replace(/(\btranslate\(.*?\);?)/,"").trim(),Te=(Te+=r(ge,we)).trim(),pe[de]("transform",Te),Te},c.getScale=function(pe){var ge=(pe[pe.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(we,oe,de){return[oe,de].join(" ")}).split(" ");return{x:+ge[0]||1,y:+ge[1]||1}},c.setScale=function(pe,ge,we){var de=pe.attr?"attr":"setAttribute",Te=pe[pe.attr?"attr":"getAttribute"]("transform")||"";return ge=ge||1,we=we||1,Te=Te.replace(/(\bscale\(.*?\);?)/,"").trim(),Te=(Te+="scale("+ge+","+we+")").trim(),pe[de]("transform",Te),Te};var B=/\s*sc.*/;c.setPointGroupScale=function(pe,ge,we){if(ge=ge||1,we=we||1,pe){var oe=1===ge&&1===we?"":"scale("+ge+","+we+")";pe.each(function(){var de=(this.getAttribute("transform")||"").replace(B,"");de=(de+=oe).trim(),this.setAttribute("transform",de)})}};var V=/translate\([^)]*\)\s*$/;function ee(pe,ge){var we;return pe&&(we=pe.mf),void 0===we&&(we=ge.marker&&ge.marker.standoff||0),ge._geo||ge._xA?we:-we}c.setTextPointsScale=function(pe,ge,we){pe&&pe.each(function(){var oe,de=m.select(this),Te=de.select("text");if(Te.node()){var Ee=parseFloat(Te.attr("x")||0),Ae=parseFloat(Te.attr("y")||0),De=(de.attr("transform")||"").match(V);oe=1===ge&&1===we?[]:[r(Ee,Ae),"scale("+ge+","+we+")",r(-Ee,-Ae)],De&&oe.push(De),de.attr("transform",oe.join(""))}})},c.getMarkerStandoff=ee;var N,K,J,te,ae,le,se=Math.atan2,ve=Math.cos,ue=Math.sin;function ye(pe,ge){var we=ge[0],oe=ge[1];return[we*ve(pe)-oe*ue(pe),we*ue(pe)+oe*ve(pe)]}function Me(pe,ge){var we,oe,de=pe.ma;void 0===de&&(de=ge.marker.angle||0);var Te=ge.marker.angleref;if("previous"===Te||"north"===Te){if(ge._geo){var Ee=ge._geo.project(pe.lonlat);we=Ee[0],oe=Ee[1]}else{var Ae=ge._xA,De=ge._yA;if(!Ae||!De)return 90;we=Ae.c2p(pe.x),oe=De.c2p(pe.y)}if(ge._geo){var Ie,Oe=pe.lonlat[0],Xe=pe.lonlat[1],Fe=ge._geo.project([Oe,Xe+1e-5]),Pe=ge._geo.project([Oe+1e-5,Xe]),Re=se(Pe[1]-oe,Pe[0]-we),qe=se(Fe[1]-oe,Fe[0]-we);if("north"===Te)Ie=de/180*Math.PI;else if("previous"===Te){var Qe=Oe/180*Math.PI,ct=Xe/180*Math.PI,bt=N/180*Math.PI,Tt=K/180*Math.PI,_t=bt-Qe,nt=ve(Tt)*ue(_t),Ke=ue(Tt)*ve(ct)-ve(Tt)*ue(ct)*ve(_t);Ie=-se(nt,Ke)-Math.PI,N=Oe,K=Xe}var xt=ye(Re,[ve(Ie),0]),Ht=ye(qe,[ue(Ie),0]);de=se(xt[1]+Ht[1],xt[0]+Ht[0])/Math.PI*180,"previous"!==Te||le===ge.uid&&pe.i===ae+1||(de=null)}if("previous"===Te&&!ge._geo)if(le===ge.uid&&pe.i===ae+1&&x(we)&&x(oe)){var Zt=we-J,$t=oe-te,Xt=ge.line&&ge.line.shape||"",cr=Xt.slice(Xt.length-1);"h"===cr&&($t=0),"v"===cr&&(Zt=0),de+=se($t,Zt)/Math.PI*180+90}else de=null}return J=we,te=oe,ae=pe.i,le=ge.uid,de}c.getMarkerAngle=Me},{"../../components/fx/helpers":403,"../../constants/alignment":483,"../../constants/interactions":490,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../registry":647,"../../traces/scatter/make_bubble_size_func":953,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale":379,"./symbol_defs":390,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],390:[function(v,$,Q){"use strict";var m,g,k,x,e=v("parse-svg-path"),n=v("@plotly/d3").round,i=Math.sqrt(2),l=Math.sqrt(3),r=Math.PI,d=Math.cos,f=Math.sin;function t(s){return null===s}function h(s,o,p){if(!(s&&s%360!=0||o))return p;if(k===s&&x===o&&m===p)return g;function c(E,R){var D=d(E),j=f(E),H=R[0],Y=R[1]+(o||0);return[H*D-Y*j,H*j+Y*D]}k=s,x=o,m=p;for(var a=s/180*r,y=0,u=0,_=e(p),b="",w=0;w<_.length;w++){var T=_[w],C=T[0],M=y,I=u;if("M"===C||"L"===C)y=+T[1],u=+T[2];else if("m"===C||"l"===C)y+=+T[1],u+=+T[2];else if("H"===C)y=+T[1];else if("h"===C)y+=+T[1];else if("V"===C)u=+T[1];else if("v"===C)u+=+T[1];else if("A"===C){y=+T[1],u=+T[2];var P=c(a,[+T[6],+T[7]]);T[6]=P[0],T[7]=P[1],T[3]=+T[3]+s}"H"!==C&&"V"!==C||(C="L"),"h"!==C&&"v"!==C||(C="l"),"m"!==C&&"l"!==C||(y-=M,u-=I);var S=c(a,[y,u]);"H"!==C&&"V"!==C||(C="L"),"M"!==C&&"L"!==C&&"m"!==C&&"l"!==C||(T[1]=S[0],T[2]=S[1]),T[0]=C,b+=T[0]+T.slice(1).join(",")}return g=b,b}$.exports={circle:{n:0,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2),a="M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z";return p?h(o,p,a):a}},square:{n:1,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2);return h(o,p,"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z")}},diamond:{n:2,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(1.3*s,2);return h(o,p,"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"Z")}},cross:{n:3,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(.4*s,2),a=n(1.2*s,2);return h(o,p,"M"+a+","+c+"H"+c+"V"+a+"H-"+c+"V"+c+"H-"+a+"V-"+c+"H-"+c+"V-"+a+"H"+c+"V-"+c+"H"+a+"Z")}},x:{n:4,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(.8*s/i,2),a="l"+c+","+c,y="l"+c+",-"+c,u="l-"+c+",-"+c,_="l-"+c+","+c;return h(o,p,"M0,"+c+a+y+u+y+u+_+u+_+a+_+a+"Z")}},"triangle-up":{n:5,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(2*s/l,2);return h(o,p,"M-"+c+","+n(s/2,2)+"H"+c+"L0,-"+n(s,2)+"Z")}},"triangle-down":{n:6,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(2*s/l,2);return h(o,p,"M-"+c+",-"+n(s/2,2)+"H"+c+"L0,"+n(s,2)+"Z")}},"triangle-left":{n:7,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(2*s/l,2);return h(o,p,"M"+n(s/2,2)+",-"+c+"V"+c+"L-"+n(s,2)+",0Z")}},"triangle-right":{n:8,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(2*s/l,2);return h(o,p,"M-"+n(s/2,2)+",-"+c+"V"+c+"L"+n(s,2)+",0Z")}},"triangle-ne":{n:9,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(.6*s,2),a=n(1.2*s,2);return h(o,p,"M-"+a+",-"+c+"H"+c+"V"+a+"Z")}},"triangle-se":{n:10,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(.6*s,2),a=n(1.2*s,2);return h(o,p,"M"+c+",-"+a+"V"+c+"H-"+a+"Z")}},"triangle-sw":{n:11,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(.6*s,2),a=n(1.2*s,2);return h(o,p,"M"+a+","+c+"H-"+c+"V-"+a+"Z")}},"triangle-nw":{n:12,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(.6*s,2),a=n(1.2*s,2);return h(o,p,"M-"+c+","+a+"V-"+c+"H"+a+"Z")}},pentagon:{n:13,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(.951*s,2),a=n(.588*s,2),y=n(-s,2),u=n(-.309*s,2);return h(o,p,"M"+c+","+u+"L"+a+","+n(.809*s,2)+"H-"+a+"L-"+c+","+u+"L0,"+y+"Z")}},hexagon:{n:14,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2),a=n(s/2,2),y=n(s*l/2,2);return h(o,p,"M"+y+",-"+a+"V"+a+"L0,"+c+"L-"+y+","+a+"V-"+a+"L0,-"+c+"Z")}},hexagon2:{n:15,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2),a=n(s/2,2),y=n(s*l/2,2);return h(o,p,"M-"+a+","+y+"H"+a+"L"+c+",0L"+a+",-"+y+"H-"+a+"L-"+c+",0Z")}},octagon:{n:16,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(.924*s,2),a=n(.383*s,2);return h(o,p,"M-"+a+",-"+c+"H"+a+"L"+c+",-"+a+"V"+a+"L"+a+","+c+"H-"+a+"L-"+c+","+a+"V-"+a+"Z")}},star:{n:17,f:function(s,o,p){if(t(o))return"M0,0Z";var c=1.4*s,a=n(.225*c,2),y=n(.951*c,2),u=n(.363*c,2),_=n(.588*c,2),b=n(-c,2),w=n(-.309*c,2),T=n(.118*c,2),C=n(.809*c,2);return h(o,p,"M"+a+","+w+"H"+y+"L"+u+","+T+"L"+_+","+C+"L0,"+n(.382*c,2)+"L-"+_+","+C+"L-"+u+","+T+"L-"+y+","+w+"H-"+a+"L0,"+b+"Z")}},hexagram:{n:18,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(.66*s,2),a=n(.38*s,2),y=n(.76*s,2);return h(o,p,"M-"+y+",0l-"+a+",-"+c+"h"+y+"l"+a+",-"+c+"l"+a+","+c+"h"+y+"l-"+a+","+c+"l"+a+","+c+"h-"+y+"l-"+a+","+c+"l-"+a+",-"+c+"h-"+y+"Z")}},"star-triangle-up":{n:19,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s*l*.8,2),a=n(.8*s,2),y=n(1.6*s,2),u=n(4*s,2),_="A "+u+","+u+" 0 0 1 ";return h(o,p,"M-"+c+","+a+_+c+","+a+_+"0,-"+y+_+"-"+c+","+a+"Z")}},"star-triangle-down":{n:20,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s*l*.8,2),a=n(.8*s,2),y=n(1.6*s,2),u=n(4*s,2),_="A "+u+","+u+" 0 0 1 ";return h(o,p,"M"+c+",-"+a+_+"-"+c+",-"+a+_+"0,"+y+_+c+",-"+a+"Z")}},"star-square":{n:21,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(1.1*s,2),a=n(2*s,2),y="A "+a+","+a+" 0 0 1 ";return h(o,p,"M-"+c+",-"+c+y+"-"+c+","+c+y+c+","+c+y+c+",-"+c+y+"-"+c+",-"+c+"Z")}},"star-diamond":{n:22,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(1.4*s,2),a=n(1.9*s,2),y="A "+a+","+a+" 0 0 1 ";return h(o,p,"M-"+c+",0"+y+"0,"+c+y+c+",0"+y+"0,-"+c+y+"-"+c+",0Z")}},"diamond-tall":{n:23,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(.7*s,2),a=n(1.4*s,2);return h(o,p,"M0,"+a+"L"+c+",0L0,-"+a+"L-"+c+",0Z")}},"diamond-wide":{n:24,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(1.4*s,2),a=n(.7*s,2);return h(o,p,"M0,"+a+"L"+c+",0L0,-"+a+"L-"+c+",0Z")}},hourglass:{n:25,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2);return h(o,p,"M"+c+","+c+"H-"+c+"L"+c+",-"+c+"H-"+c+"Z")},noDot:!0},bowtie:{n:26,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2);return h(o,p,"M"+c+","+c+"V-"+c+"L-"+c+","+c+"V-"+c+"Z")},noDot:!0},"circle-cross":{n:27,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2);return h(o,p,"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2),a=n(s/i,2);return h(o,p,"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a+"M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2);return h(o,p,"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2);return h(o,p,"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c+"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(1.3*s,2);return h(o,p,"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"ZM0,-"+c+"V"+c+"M-"+c+",0H"+c)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(1.3*s,2),a=n(.65*s,2);return h(o,p,"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"ZM-"+a+",-"+a+"L"+a+","+a+"M-"+a+","+a+"L"+a+",-"+a)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(1.4*s,2);return h(o,p,"M0,"+c+"V-"+c+"M"+c+",0H-"+c)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2);return h(o,p,"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(1.2*s,2),a=n(.85*s,2);return h(o,p,"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s/2,2),a=n(s,2);return h(o,p,"M"+c+","+a+"V-"+a+"M"+(c-a)+",-"+a+"V"+a+"M"+a+","+c+"H-"+a+"M-"+a+","+(c-a)+"H"+a)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(1.2*s,2),a=n(1.6*s,2),y=n(.8*s,2);return h(o,p,"M-"+c+","+y+"L0,0M"+c+","+y+"L0,0M0,-"+a+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(1.2*s,2),a=n(1.6*s,2),y=n(.8*s,2);return h(o,p,"M-"+c+",-"+y+"L0,0M"+c+",-"+y+"L0,0M0,"+a+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(1.2*s,2),a=n(1.6*s,2),y=n(.8*s,2);return h(o,p,"M"+y+","+c+"L0,0M"+y+",-"+c+"L0,0M-"+a+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(1.2*s,2),a=n(1.6*s,2),y=n(.8*s,2);return h(o,p,"M-"+y+","+c+"L0,0M-"+y+",-"+c+"L0,0M"+a+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(1.4*s,2);return h(o,p,"M"+c+",0H-"+c)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(1.4*s,2);return h(o,p,"M0,"+c+"V-"+c)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2);return h(o,p,"M"+c+",-"+c+"L-"+c+","+c)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2);return h(o,p,"M"+c+","+c+"L-"+c+",-"+c)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2);return h(o,p,"M0,0L-"+c+","+n(2*s,2)+"H"+c+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2);return h(o,p,"M0,0L-"+c+",-"+n(2*s,2)+"H"+c+"Z")},noDot:!0},"arrow-left":{n:47,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(2*s,2),a=n(s,2);return h(o,p,"M0,0L"+c+",-"+a+"V"+a+"Z")},noDot:!0},"arrow-right":{n:48,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(2*s,2),a=n(s,2);return h(o,p,"M0,0L-"+c+",-"+a+"V"+a+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2);return h(o,p,"M-"+c+",0H"+c+"M0,0L-"+c+","+n(2*s,2)+"H"+c+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(s,2);return h(o,p,"M-"+c+",0H"+c+"M0,0L-"+c+",-"+n(2*s,2)+"H"+c+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(2*s,2),a=n(s,2);return h(o,p,"M0,-"+a+"V"+a+"M0,0L"+c+",-"+a+"V"+a+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(s,o,p){if(t(o))return"M0,0Z";var c=n(2*s,2),a=n(s,2);return h(o,p,"M0,-"+a+"V"+a+"M0,0L-"+c+",-"+a+"V"+a+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(s,o,p){if(t(o))return"M0,0Z";var c=r/2.5,a=2*s*d(c),y=2*s*f(c);return h(o,p,"M0,0L"+-a+","+y+"L"+a+","+y+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(s,o,p){if(t(o))return"M0,0Z";var c=r/4,a=2*s*d(c),y=2*s*f(c);return h(o,p,"M0,0L"+-a+","+y+"A "+2*s+","+2*s+" 0 0 1 "+a+","+y+"Z")},backoff:.4,noDot:!0}}},{"@plotly/d3":58,"parse-svg-path":250}],391:[function(v,$,Q){"use strict";$.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],392:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../registry"),k=v("../../plots/cartesian/axes"),x=v("../../lib"),e=v("./compute_error");function n(i,l,r,d){var f=l["error_"+d]||{},t=[];if(f.visible&&-1!==["linear","log"].indexOf(r.type)){for(var h=e(f),s=0;s<i.length;s++){var o=i[s],p=o.i;if(void 0===p)p=s;else if(null===p)continue;var c=o[d];if(m(r.c2l(c))){var a=h(c,p);if(m(a[0])&&m(a[1])){var y=o[d+"s"]=c-a[0],u=o[d+"h"]=c+a[1];t.push(y,u)}}}var b=l._extremes[r._id],w=k.findExtremes(r,t,x.extendFlat({tozero:b.opts.tozero},{padded:!0}));b.min=b.min.concat(w.min),b.max=b.max.concat(w.max)}}$.exports=function(i){for(var l=i.calcdata,r=0;r<l.length;r++){var d=l[r],f=d[0].trace;if(!0===f.visible&&g.traceIs(f,"errorBarsOK")){var t=k.getFromId(i,f.xaxis),h=k.getFromId(i,f.yaxis);n(d,f,t,"x"),n(d,f,h,"y")}}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./compute_error":393,"fast-isnumeric":190}],393:[function(v,$,Q){"use strict";function m(g,k){return"percent"===g?function(x){return Math.abs(x*k/100)}:"constant"===g?function(){return Math.abs(k)}:"sqrt"===g?function(x){return Math.sqrt(Math.abs(x))}:void 0}$.exports=function(g){var k=g.type,x=g.symmetric;if("data"===k){var e=g.array||[];if(x)return function(r,d){var f=+e[d];return[f,f]};var n=g.arrayminus||[];return function(r,d){var f=+e[d],t=+n[d];return isNaN(f)&&isNaN(t)?[NaN,NaN]:[t||0,f||0]}}var i=m(k,g.value),l=m(k,g.valueminus);return x||void 0===g.valueminus?function(r){var d=i(r);return[d,d]}:function(r){return[l(r),i(r)]}}},{}],394:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../registry"),k=v("../../lib"),x=v("../../plot_api/plot_template"),e=v("./attributes");$.exports=function(n,i,l,r){var d="error_"+r.axis,f=x.newContainer(i,d),t=n[d]||{};function h(c,a){return k.coerce(t,f,e,c,a)}if(!1!==h("visible",void 0!==t.array||void 0!==t.value||"sqrt"===t.type)){var s=h("type","array"in t?"data":"percent"),o=!0;"sqrt"!==s&&(o=h("symmetric",!(("data"===s?"arrayminus":"valueminus")in t))),"data"===s?(h("array"),h("traceref"),o||(h("arrayminus"),h("tracerefminus"))):"percent"!==s&&"constant"!==s||(h("value"),o||h("valueminus"));var p="copy_"+r.inherit+"style";r.inherit&&(i["error_"+r.inherit]||{}).visible&&h(p,!(t.color||m(t.thickness)||m(t.width))),r.inherit&&f[p]||(h("color",l),h("thickness"),h("width",g.traceIs(i,"gl3d")?0:4))}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"./attributes":391,"fast-isnumeric":190}],395:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plot_api/edit_types").overrideAll,k=v("./attributes"),x={error_x:m.extendFlat({},k),error_y:m.extendFlat({},k)};delete x.error_x.copy_zstyle,delete x.error_y.copy_zstyle,delete x.error_y.copy_ystyle;var e={error_x:m.extendFlat({},k),error_y:m.extendFlat({},k),error_z:m.extendFlat({},k)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,$.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:x,bar:x,histogram:x,scatter3d:g(e,"calc","nested"),scattergl:g(x,"calc","nested")}},supplyDefaults:v("./defaults"),calc:v("./calc"),makeComputeError:v("./compute_error"),plot:v("./plot"),style:v("./style"),hoverInfo:function(n,i,l){(i.error_y||{}).visible&&(l.yerr=n.yh-n.y,i.error_y.symmetric||(l.yerrneg=n.y-n.ys)),(i.error_x||{}).visible&&(l.xerr=n.xh-n.x,i.error_x.symmetric||(l.xerrneg=n.x-n.xs))}}},{"../../lib":515,"../../plot_api/edit_types":548,"./attributes":391,"./calc":392,"./compute_error":393,"./defaults":394,"./plot":396,"./style":397}],396:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("fast-isnumeric"),k=v("../drawing"),x=v("../../traces/scatter/subtypes");$.exports=function(e,n,i,l){var r=i.xaxis,d=i.yaxis,f=l&&l.duration>0;n.each(function(t){var h,s=t[0].trace,o=s.error_x||{},p=s.error_y||{};s.ids&&(h=function(u){return u.id});var c=x.hasMarkers(s)&&s.marker.maxdisplayed>0;p.visible||o.visible||(t=[]);var a=m.select(this).selectAll("g.errorbar").data(t,h);if(a.exit().remove(),t.length){o.visible||a.selectAll("path.xerror").remove(),p.visible||a.selectAll("path.yerror").remove(),a.style("opacity",1);var y=a.enter().append("g").classed("errorbar",!0);f&&y.style("opacity",0).transition().duration(l.duration).style("opacity",1),k.setClipUrl(a,i.layerClipId,e),a.each(function(u){var P,S,E,R,_=m.select(this),b=(E=d,R={x:(S=r).c2p((P=u).x),y:E.c2p(P.y)},void 0!==P.yh&&(R.yh=E.c2p(P.yh),R.ys=E.c2p(P.ys),g(R.ys)||(R.noYS=!0,R.ys=E.c2p(P.ys,!0))),void 0!==P.xh&&(R.xh=S.c2p(P.xh),R.xs=S.c2p(P.xs),g(R.xs)||(R.noXS=!0,R.xs=S.c2p(P.xs,!0))),R);if(!c||u.vis){var w,T=_.select("path.yerror");if(p.visible&&g(b.x)&&g(b.yh)&&g(b.ys)){var C=p.width;w="M"+(b.x-C)+","+b.yh+"h"+2*C+"m-"+C+",0V"+b.ys,b.noYS||(w+="m-"+C+",0h"+2*C),T.size()?f&&(T=T.transition().duration(l.duration).ease(l.easing)):T=_.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),T.attr("d",w)}else T.remove();var M=_.select("path.xerror");if(o.visible&&g(b.y)&&g(b.xh)&&g(b.xs)){var I=(o.copy_ystyle?p:o).width;w="M"+b.xh+","+(b.y-I)+"v"+2*I+"m0,-"+I+"H"+b.xs,b.noXS||(w+="m0,-"+I+"v"+2*I),M.size()?f&&(M=M.transition().duration(l.duration).ease(l.easing)):M=_.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),M.attr("d",w)}else M.remove()}})}})}},{"../../traces/scatter/subtypes":961,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],397:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../color");$.exports=function(k){k.each(function(x){var e=x[0].trace,n=e.error_y||{},i=e.error_x||{},l=m.select(this);l.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(g.stroke,n.color),i.copy_ystyle&&(i=n),l.selectAll("path.xerror").style("stroke-width",i.thickness+"px").call(g.stroke,i.color)})}},{"../color":367,"@plotly/d3":58}],398:[function(v,$,Q){"use strict";var m=v("../../plots/font_attributes"),g=v("./layout_attributes").hoverlabel,k=v("../../lib/extend").extendFlat;$.exports={hoverlabel:{bgcolor:k({},g.bgcolor,{arrayOk:!0}),bordercolor:k({},g.bordercolor,{arrayOk:!0}),font:m({arrayOk:!0,editType:"none"}),align:k({},g.align,{arrayOk:!0}),namelength:k({},g.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":505,"../../plots/font_attributes":594,"./layout_attributes":408}],399:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../registry");function k(x,e,n,i){i=i||m.identity,Array.isArray(x)&&(e[0][n]=i(x))}$.exports=function(x){var e=x.calcdata,n=x._fullLayout;function i(t){return function(h){return m.coerceHoverinfo({hoverinfo:h},{_module:t._module},n)}}for(var l=0;l<e.length;l++){var r=e[l],d=r[0].trace;if(!g.traceIs(d,"pie-like")){var f=g.traceIs(d,"2dMap")?k:m.fillArray;f(d.hoverinfo,r,"hi",i(d)),d.hovertemplate&&f(d.hovertemplate,r,"ht"),d.hoverlabel&&(f(d.hoverlabel.bgcolor,r,"hbg"),f(d.hoverlabel.bordercolor,r,"hbc"),f(d.hoverlabel.font.size,r,"hts"),f(d.hoverlabel.font.color,r,"htc"),f(d.hoverlabel.font.family,r,"htf"),f(d.hoverlabel.namelength,r,"hnl"),f(d.hoverlabel.align,r,"hta"))}}}},{"../../lib":515,"../../registry":647}],400:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("./hover").hover;$.exports=function(k,x,e){var n=m.getComponentMethod("annotations","onClick")(k,k._hoverdata);function i(){k.emit("plotly_click",{points:k._hoverdata,event:x})}void 0!==e&&g(k,x,e,!0),k._hoverdata&&x&&x.target&&(n&&n.then?n.then(i):i(),x.stopImmediatePropagation&&x.stopImmediatePropagation())}},{"../../registry":647,"./hover":404}],401:[function(v,$,Q){"use strict";$.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],402:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./attributes"),k=v("./hoverlabel_defaults");$.exports=function(x,e,n,i){var l=m.extendFlat({},i.hoverlabel);e.hovertemplate&&(l.namelength=-1),k(x,e,function(r,d){return m.coerce(x,e,g,r,d)},l)}},{"../../lib":515,"./attributes":398,"./hoverlabel_defaults":405}],403:[function(v,$,Q){"use strict";var m=v("../../lib");Q.getSubplot=function(i){return i.subplot||i.xaxis+i.yaxis||i.geo},Q.isTraceInSubplots=function(i,l){if("splom"===i.type){for(var r=i.xaxes||[],d=i.yaxes||[],f=0;f<r.length;f++)for(var t=0;t<d.length;t++)if(-1!==l.indexOf(r[f]+d[t]))return!0;return!1}return-1!==l.indexOf(Q.getSubplot(i))},Q.flat=function(i,l){for(var r=new Array(i.length),d=0;d<i.length;d++)r[d]=l;return r},Q.p2c=function(i,l){for(var r=new Array(i.length),d=0;d<i.length;d++)r[d]=i[d].p2c(l);return r},Q.getDistanceFunction=function(i,l,r,d){return"closest"===i?d||Q.quadrature(l,r):"x"===i.charAt(0)?l:r},Q.getClosest=function(i,l,r){if(!1!==r.index)r.index>=0&&r.index<i.length?r.distance=0:r.index=!1;else for(var d=0;d<i.length;d++){var f=l(i[d]);f<=r.distance&&(r.index=d,r.distance=f)}return r},Q.inbox=function(i,l,r){return i*l<0||0===i?r:1/0},Q.quadrature=function(i,l){return function(r){var d=i(r),f=l(r);return Math.sqrt(d*d+f*f)}},Q.makeEventData=function(i,l,r){var d="index"in i?i.index:i.pointNumber,f={data:l._input,fullData:l,curveNumber:l.index,pointNumber:d};if(l._indexToPoints){var t=l._indexToPoints[d];1===t.length?f.pointIndex=t[0]:f.pointIndices=t}else f.pointIndex=d;return l._module.eventData?f=l._module.eventData(f,i,l,r,d):("xVal"in i?f.x=i.xVal:"x"in i&&(f.x=i.x),"yVal"in i?f.y=i.yVal:"y"in i&&(f.y=i.y),i.xa&&(f.xaxis=i.xa),i.ya&&(f.yaxis=i.ya),void 0!==i.zLabelVal&&(f.z=i.zLabelVal)),Q.appendArrayPointValue(f,l,d),f},Q.appendArrayPointValue=function(i,l,r){var d=l._arrayAttrs;if(d)for(var f=0;f<d.length;f++){var t=d[f],h=k(t);if(void 0===i[h]){var s=x(m.nestedProperty(l,t).get(),r);void 0!==s&&(i[h]=s)}}},Q.appendArrayMultiPointValues=function(i,l,r){var d=l._arrayAttrs;if(d)for(var f=0;f<d.length;f++){var t=d[f],h=k(t);if(void 0===i[h]){for(var s=m.nestedProperty(l,t).get(),o=new Array(r.length),p=0;p<r.length;p++)o[p]=x(s,r[p]);i[h]=o}}};var g={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function k(i){return g[i]||i}function x(i,l){return Array.isArray(l)?Array.isArray(i)&&Array.isArray(i[l[0]])?i[l[0]][l[1]]:void 0:i[l]}var e={x:!0,y:!0},n={"x unified":!0,"y unified":!0};Q.isUnifiedHover=function(i){return"string"==typeof i&&!!n[i]},Q.isXYhover=function(i){return"string"==typeof i&&!!e[i]}},{"../../lib":515}],404:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("fast-isnumeric"),k=v("tinycolor2"),x=v("../../lib"),e=x.strTranslate,n=x.strRotate,i=v("../../lib/events"),l=v("../../lib/svg_text_utils"),r=v("../../lib/override_cursor"),d=v("../drawing"),f=v("../color"),t=v("../dragelement"),h=v("../../plots/cartesian/axes"),s=v("../../registry"),o=v("./helpers"),p=v("./constants"),c=v("../legend/defaults"),a=v("../legend/draw"),y=p.YANGLE,u=Math.PI*y/180,_=1/Math.sin(u),b=Math.cos(u),w=Math.sin(u),T=p.HOVERARROWSIZE,C=p.HOVERTEXTPAD,M={box:!0,ohlc:!0,violin:!0,candlestick:!0},I={scatter:!0,scattergl:!0,splom:!0};function P(B){return[B.trace.index,B.index,B.x0,B.y0,B.name,B.attr,B.xa?B.xa._id:"",B.ya?B.ya._id:""].join(",")}Q.hover=function(B,V,ee,N){B=x.getGraphDiv(B);var K=V.target;x.throttle(B._fullLayout._uid+p.HOVERID,p.HOVERMINTIME,function(){!function(J,te,ae,le,se){ae||(ae="xy");var ve=Array.isArray(ae)?ae:[ae],ue=J._fullLayout,ye=ue._plots||[],Me=ye[ae],pe=ue._has("cartesian");if(Me){var ge=Me.overlays.map(function(Vr){return Vr.id});ve=ve.concat(ge)}for(var we=ve.length,oe=new Array(we),de=new Array(we),Te=!1,Ee=0;Ee<we;Ee++){var Ae=ve[Ee];if(ye[Ae])Te=!0,oe[Ee]=ye[Ae].xaxis,de[Ee]=ye[Ae].yaxis;else{if(!ue[Ae]||!ue[Ae]._subplot)return void x.warn("Unrecognized subplot: "+Ae);var De=ue[Ae]._subplot;oe[Ee]=De.xaxis,de[Ee]=De.yaxis}}var Ie=te.hovermode||ue.hovermode;if(Ie&&!Te&&(Ie="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(Ie)||!J.calcdata||J.querySelector(".zoombox")||J._dragging)return t.unhoverRaw(J,te);var Oe=ue.hoverdistance;-1===Oe&&(Oe=1/0);var Xe=ue.spikedistance;-1===Xe&&(Xe=1/0);var Fe,Pe,Re,qe,Qe,ct,bt,Tt,_t,nt,Ke,xt,Ht,Zt=[],$t=[],Xt={hLinePoint:null,vLinePoint:null},cr=!1;if(Array.isArray(te))for(Ie="array",Re=0;Re<te.length;Re++)(Qe=J.calcdata[te[Re].curveNumber||0])&&(ct=Qe[0].trace,"skip"!==Qe[0].trace.hoverinfo&&($t.push(Qe),"h"===ct.orientation&&(cr=!0)));else{for(qe=0;qe<J.calcdata.length;qe++)"skip"!==(ct=(Qe=J.calcdata[qe])[0].trace).hoverinfo&&o.isTraceInSubplots(ct,ve)&&($t.push(Qe),"h"===ct.orientation&&(cr=!0));var Ft,Be;if(se){if(!1===i.triggerHandler(J,"plotly_beforehover",te))return;var He=se.getBoundingClientRect();Ft=te.clientX-He.left,Be=te.clientY-He.top,ue._calcInverseTransform(J);var he=x.apply3DTransform(ue._invTransform)(Ft,Be);if(Be=he[1],(Ft=he[0])<0||Ft>oe[0]._length||Be<0||Be>de[0]._length)return t.unhoverRaw(J,te)}else Ft="xpx"in te?te.xpx:oe[0]._length/2,Be="ypx"in te?te.ypx:de[0]._length/2;if(te.pointerX=Ft+oe[0]._offset,te.pointerY=Be+de[0]._offset,Fe="xval"in te?o.flat(ve,te.xval):o.p2c(oe,Ft),Pe="yval"in te?o.flat(ve,te.yval):o.p2c(de,Be),!g(Fe[0])||!g(Pe[0]))return x.warn("Fx.hover failed",te,J),t.unhoverRaw(J,te)}var be=1/0;function ze(Vr,sn){for(qe=0;qe<$t.length;qe++)if((Qe=$t[qe])&&Qe[0]&&Qe[0].trace&&!0===(ct=Qe[0].trace).visible&&0!==ct._length&&-1===["carpet","contourcarpet"].indexOf(ct._module.name)){if("splom"===ct.type?bt=ve[Tt=0]:(bt=o.getSubplot(ct),Tt=ve.indexOf(bt)),o.isUnifiedHover(_t=Ie)&&(_t=_t.charAt(0)),xt={cd:Qe,trace:ct,xa:oe[Tt],ya:de[Tt],maxHoverDistance:Oe,maxSpikeDistance:Xe,index:!1,distance:Math.min(be,Oe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:f.defaultLine,name:ct.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ue[bt]&&(xt.subplot=ue[bt]._subplot),ue._splomScenes&&ue._splomScenes[ct.uid]&&(xt.scene=ue._splomScenes[ct.uid]),Ht=Zt.length,"array"===_t){var xn=te[qe];"pointNumber"in xn?(xt.index=xn.pointNumber,_t="closest"):(_t="","xval"in xn&&(nt=xn.xval,_t="x"),"yval"in xn&&(Ke=xn.yval,_t=_t?"closest":"y"))}else void 0!==Vr&&void 0!==sn?(nt=Vr,Ke=sn):(nt=Fe[Tt],Ke=Pe[Tt]);if(0!==Oe)if(ct._module&&ct._module.hoverPoints){var nn=ct._module.hoverPoints(xt,nt,Ke,_t,{finiteRange:!0,hoverLayer:ue._hoverlayer});if(nn)for(var fn,Xn=0;Xn<nn.length;Xn++)g((fn=nn[Xn]).x0)&&g(fn.y0)&&Zt.push(j(fn,Ie))}else x.log("Unrecognized trace type in hover:",ct);if("closest"===Ie&&Zt.length>Ht&&(Zt.splice(0,Ht),be=Zt[0].distance),pe&&0!==Xe&&0===Zt.length){xt.distance=Xe,xt.index=!1;var Mn=ct._module.hoverPoints(xt,nt,Ke,"closest",{hoverLayer:ue._hoverlayer});if(Mn&&(Mn=Mn.filter(function(fr){return fr.spikeDistance<=Xe})),Mn&&Mn.length){var On,si=Mn.filter(function(fr){return fr.xa.showspikes&&"hovered data"!==fr.xa.spikesnap});if(si.length){var or=si[0];g(or.x0)&&g(or.y0)&&(On=Je(or),(!Xt.vLinePoint||Xt.vLinePoint.spikeDistance>On.spikeDistance)&&(Xt.vLinePoint=On))}var br=Mn.filter(function(fr){return fr.ya.showspikes&&"hovered data"!==fr.ya.spikesnap});if(br.length){var Rt=br[0];g(Rt.x0)&&g(Rt.y0)&&(On=Je(Rt),(!Xt.hLinePoint||Xt.hLinePoint.spikeDistance>On.spikeDistance)&&(Xt.hLinePoint=On))}}}}}function Ve(Vr,sn,xn){for(var nn,fn=null,Xn=1/0,Mn=0;Mn<Vr.length;Mn++)nn=Vr[Mn].spikeDistance,xn&&0===Mn&&(nn=-1/0),nn<=Xn&&nn<=sn&&(fn=Vr[Mn],Xn=nn);return fn}function Je(Vr){return Vr?{xa:Vr.xa,ya:Vr.ya,x:void 0!==Vr.xSpike?Vr.xSpike:(Vr.x0+Vr.x1)/2,y:void 0!==Vr.ySpike?Vr.ySpike:(Vr.y0+Vr.y1)/2,distance:Vr.distance,spikeDistance:Vr.spikeDistance,curveNumber:Vr.trace.index,color:Vr.color,pointNumber:Vr.index}:null}ze();var Ye={fullLayout:ue,container:ue._hoverlayer,event:te},lt=J._spikepoints;J._spikepoints={vLinePoint:Xt.vLinePoint,hLinePoint:Xt.hLinePoint};var Mt=function(){Zt.sort(function(Vr,sn){return Vr.distance-sn.distance}),Zt=function(Vr,sn){for(var xn=sn.charAt(0),nn=[],fn=[],Xn=[],Mn=0;Mn<Vr.length;Mn++){var On=Vr[Mn];s.traceIs(On.trace,"bar-like")||s.traceIs(On.trace,"box-violin")?Xn.push(On):On.trace[xn+"period"]?fn.push(On):nn.push(On)}return nn.concat(fn).concat(Xn)}(Zt,Ie)};Mt();var Dt=Ie.charAt(0),ht=("x"===Dt||"y"===Dt)&&Zt[0]&&I[Zt[0].trace.type];if(pe&&0!==Xe&&0!==Zt.length){var mt=Ve(Zt.filter(function(Vr){return Vr.ya.showspikes}),Xe,ht);Xt.hLinePoint=Je(mt);var Ot=Ve(Zt.filter(function(Vr){return Vr.xa.showspikes}),Xe,ht);Xt.vLinePoint=Je(Ot)}if(0===Zt.length){var At=t.unhoverRaw(J,te);return!pe||null===Xt.hLinePoint&&null===Xt.vLinePoint||Y(lt)&&H(J,Xt,Ye),At}if(pe&&Y(lt)&&H(J,Xt,Ye),o.isXYhover(_t)&&0!==Zt[0].length&&"splom"!==Zt[0].trace.type){var It=Zt[0],Se=(Zt=M[It.trace.type]?Zt.filter(function(Vr){return Vr.trace.index===It.trace.index}):[It]).length;ze(Z("x",It,ue),Z("y",It,ue));var dt,Ct=[],Ut={},Jt=0,qt=function(Vr){var sn=M[Vr.trace.type]?P(Vr):Vr.trace.index;if(Ut[sn]){var xn=Ut[sn]-1,nn=Ct[xn];xn>0&&Math.abs(Vr.distance)<Math.abs(nn.distance)&&(Ct[xn]=Vr)}else Jt++,Ut[sn]=Jt,Ct.push(Vr)};for(dt=0;dt<Se;dt++)qt(Zt[dt]);for(dt=Zt.length-1;dt>Se-1;dt--)qt(Zt[dt]);Zt=Ct,Mt()}var pr=J._hoverdata,Sr=[],mr=W(J),tr=re(J);for(Re=0;Re<Zt.length;Re++){var rr=Zt[Re],ar=o.makeEventData(rr,rr.trace,rr.cd);if(!1!==rr.hovertemplate){var dr=!1;rr.cd[rr.index]&&rr.cd[rr.index].ht&&(dr=rr.cd[rr.index].ht),rr.hovertemplate=dr||rr.trace.hovertemplate||!1}if(rr.xa&&rr.ya){var xr=rr.x0+rr.xa._offset,Lr=rr.x1+rr.xa._offset,zr=rr.y0+rr.ya._offset,Hr=rr.y1+rr.ya._offset,Xr=Math.min(xr,Lr),cn=Math.max(xr,Lr),an=Math.min(zr,Hr),Nn=Math.max(zr,Hr);ar.bbox={x0:Xr+tr,x1:cn+tr,y0:an+mr,y1:Nn+mr}}rr.eventData=[ar],Sr.push(ar)}J._hoverdata=Sr;var on="y"===Ie&&($t.length>1||Zt.length>1)||"closest"===Ie&&cr&&Zt.length>1,wn=f.combine(ue.plot_bgcolor||f.background,ue.paper_bgcolor),An=E(Zt,{gd:J,hovermode:Ie,rotateLabels:on,bgColor:wn,container:ue._hoverlayer,outerContainer:ue._paper.node(),commonLabelOpts:ue.hoverlabel,hoverdistance:ue.hoverdistance});if(o.isUnifiedHover(Ie)||(function(Vr,sn,xn){var nn,fn,Xn,Mn,On,si,or,br=0,Rt=1,fr=Vr.size(),gr=new Array(fr),jr=0;function Br(Zr){var rn=Zr[0],ln=Zr[Zr.length-1];if(Xn=ln.pos+ln.dp+ln.size-rn.pmax,(fn=rn.pmin-rn.pos-rn.dp+rn.size)>.01){for(On=Zr.length-1;On>=0;On--)Zr[On].dp+=fn;nn=!1}if(!(Xn<.01)){if(fn<-.01){for(On=Zr.length-1;On>=0;On--)Zr[On].dp-=Xn;nn=!1}if(nn){var bn=0;for(Mn=0;Mn<Zr.length;Mn++)(si=Zr[Mn]).pos+si.dp+si.size>rn.pmax&&bn++;for(Mn=Zr.length-1;Mn>=0&&!(bn<=0);Mn--)(si=Zr[Mn]).pos>rn.pmax-1&&(si.del=!0,bn--);for(Mn=0;Mn<Zr.length&&!(bn<=0);Mn++)if((si=Zr[Mn]).pos<rn.pmin+1)for(si.del=!0,bn--,Xn=2*si.size,On=Zr.length-1;On>=0;On--)Zr[On].dp-=Xn;for(Mn=Zr.length-1;Mn>=0&&!(bn<=0);Mn--)(si=Zr[Mn]).pos+si.dp+si.size>rn.pmax&&(si.del=!0,bn--)}}}for(Vr.each(function(Zr){var rn=Zr[sn],ln="x"===rn._id.charAt(0),bn=rn.range;0===jr&&bn&&bn[0]>bn[1]!==ln&&(Rt=-1),gr[jr++]=[{datum:Zr,traceIndex:Zr.trace.index,dp:0,pos:Zr.pos,posref:Zr.posref,size:Zr.by*(ln?_:1)/2,pmin:0,pmax:ln?xn.width:xn.height}]}),gr.sort(function(Zr,rn){return Zr[0].posref-rn[0].posref||Rt*(rn[0].traceIndex-Zr[0].traceIndex)});!nn&&br<=fr;){for(br++,nn=!0,Mn=0;Mn<gr.length-1;){var Fr=gr[Mn],Er=gr[Mn+1],_r=Fr[Fr.length-1],kr=Er[0];if((fn=_r.pos+_r.dp+_r.size-kr.pos-kr.dp+kr.size)>.01&&_r.pmin===kr.pmin&&_r.pmax===kr.pmax){for(On=Er.length-1;On>=0;On--)Er[On].dp+=fn;for(Fr.push.apply(Fr,Er),gr.splice(Mn+1,1),or=0,On=Fr.length-1;On>=0;On--)or+=Fr[On].dp;for(Xn=or/Fr.length,On=Fr.length-1;On>=0;On--)Fr[On].dp-=Xn;nn=!1}else Mn++}gr.forEach(Br)}for(Mn=gr.length-1;Mn>=0;Mn--){var Mr=gr[Mn];for(On=Mr.length-1;On>=0;On--){var Pr=Mr[On],Wr=Pr.datum;Wr.offset=Pr.dp,Wr.del=Pr.del}}}(An,on?"xa":"ya",ue),D(An,on,ue._invScaleX,ue._invScaleY)),se&&se.tagName){var ii=s.getComponentMethod("annotations","hasClickToShow")(J,Sr);r(m.select(se),ii?"pointer":"")}!se||le||!function(Vr,sn,xn){if(!xn||xn.length!==Vr._hoverdata.length)return!0;for(var nn=xn.length-1;nn>=0;nn--){var fn=xn[nn],Xn=Vr._hoverdata[nn];if(fn.curveNumber!==Xn.curveNumber||String(fn.pointNumber)!==String(Xn.pointNumber)||String(fn.pointNumbers)!==String(Xn.pointNumbers))return!0}return!1}(J,0,pr)||(pr&&J.emit("plotly_unhover",{event:te,points:pr}),J.emit("plotly_hover",{event:te,points:J._hoverdata,xaxes:oe,yaxes:de,xvals:Fe,yvals:Pe}))}(B,V,ee,N,K)})},Q.loneHover=function(B,V){var ee=!0;Array.isArray(B)||(ee=!1,B=[B]);var N=V.gd,K=W(N),J=re(N),te=E(B.map(function(se){var ve=se._x0||se.x0||se.x||0,ue=se._x1||se.x1||se.x||0,ye=se._y0||se.y0||se.y||0,Me=se._y1||se.y1||se.y||0,pe=se.eventData;if(pe){var ge=Math.min(ve,ue),we=Math.max(ve,ue),oe=Math.min(ye,Me),de=Math.max(ye,Me),Te=se.trace;if(s.traceIs(Te,"gl3d")){var Ee=N._fullLayout[Te.scene]._scene.container,Ae=Ee.offsetLeft,De=Ee.offsetTop;ge+=Ae,we+=Ae,oe+=De,de+=De}pe.bbox={x0:ge+J,x1:we+J,y0:oe+K,y1:de+K},V.inOut_bbox&&V.inOut_bbox.push(pe.bbox)}else pe=!1;return{color:se.color||f.defaultLine,x0:se.x0||se.x||0,x1:se.x1||se.x||0,y0:se.y0||se.y||0,y1:se.y1||se.y||0,xLabel:se.xLabel,yLabel:se.yLabel,zLabel:se.zLabel,text:se.text,name:se.name,idealAlign:se.idealAlign,borderColor:se.borderColor,fontFamily:se.fontFamily,fontSize:se.fontSize,fontColor:se.fontColor,nameLength:se.nameLength,textAlign:se.textAlign,trace:se.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:se.hovertemplate||!1,hovertemplateLabels:se.hovertemplateLabels||!1,eventData:pe}}),{gd:N,hovermode:"closest",rotateLabels:!1,bgColor:V.bgColor||f.background,container:m.select(V.container),outerContainer:V.outerContainer||V.container}),ae=0,le=0;return te.sort(function(se,ve){return se.y0-ve.y0}).each(function(se,ve){var ue=se.y0-se.by/2;se.offset=ue-5<ae?ae-ue+5:0,ae=ue+se.by+se.offset,ve===V.anchorIndex&&(le=se.offset)}).each(function(se){se.offset-=le}),D(te,!1,N._fullLayout._invScaleX,N._fullLayout._invScaleY),ee?te:te.node()};var S=/<extra>([\s\S]*)<\/extra>/;function E(B,V){var ee=V.gd,N=ee._fullLayout,K=V.hovermode,J=V.rotateLabels,te=V.bgColor,ae=V.container,le=V.outerContainer,se=V.commonLabelOpts||{};if(0===B.length)return[[]];var ve=V.fontFamily||p.HOVERFONT,ue=V.fontSize||p.HOVERFONTSIZE,ye=B[0],Me=ye.xa,pe=ye.ya,ge=K.charAt(0),we=ge+"Label",oe=ye[we];if(void 0===oe&&"multicategory"===Me.type)for(var de=0;de<B.length&&void 0===(oe=B[de][we]);de++);var Te=U(ee,le),Ee=Te.top,Ae=Te.width,De=Te.height,Ie=void 0!==oe&&ye.distance<=V.hoverdistance&&("x"===K||"y"===K);if(Ie){var Oe,Xe,Fe=!0;for(Oe=0;Oe<B.length;Oe++)if(Fe&&void 0===B[Oe].zLabel&&(Fe=!1),Xe=B[Oe].hoverinfo||B[Oe].trace.hoverinfo){var Pe=Array.isArray(Xe)?Xe:Xe.split("+");if(-1===Pe.indexOf("all")&&-1===Pe.indexOf(K)){Ie=!1;break}}Fe&&(Ie=!1)}var Re=ae.selectAll("g.axistext").data(Ie?[0]:[]);if(Re.enter().append("g").classed("axistext",!0),Re.exit().remove(),Re.each(function(){var Ot=m.select(this),At=x.ensureSingle(Ot,"path","",function(Hr){Hr.style({"stroke-width":"1px"})}),It=x.ensureSingle(Ot,"text","",function(Hr){Hr.attr("data-notex",1)}),Se=se.bgcolor||f.defaultLine,Ze=se.bordercolor||f.contrast(Se),it=f.contrast(Se),dt={family:se.font.family||ve,size:se.font.size||ue,color:se.font.color||it};At.style({fill:Se,stroke:Ze}),It.text(oe).call(d.font,dt).call(l.positionText,0,0).call(l.convertToTspans,ee),Ot.attr("transform","");var Ct,Ut,Jt=U(ee,It.node());if("x"===K){var qt="top"===Me.side?"-":"";It.attr("text-anchor","middle").call(l.positionText,0,"top"===Me.side?Ee-Jt.bottom-T-C:Ee-Jt.top+T+C),Ut=pe._offset+("top"===Me.side?0:pe._length);var pr=Jt.width/2+C;(Ct=Me._offset+(ye.x0+ye.x1)/2)<pr?(Ct=pr,At.attr("d","M-"+(pr-T)+",0L-"+(pr-2*T)+","+qt+T+"H"+(C+Jt.width/2)+"v"+qt+(2*C+Jt.height)+"H-"+pr+"V"+qt+T+"Z")):Ct>N.width-pr?(Ct=N.width-pr,At.attr("d","M"+(pr-T)+",0L"+pr+","+qt+T+"v"+qt+(2*C+Jt.height)+"H-"+pr+"V"+qt+T+"H"+(pr-2*T)+"Z")):At.attr("d","M0,0L"+T+","+qt+T+"H"+(C+Jt.width/2)+"v"+qt+(2*C+Jt.height)+"H-"+(C+Jt.width/2)+"V"+qt+T+"H-"+T+"Z")}else{var Sr,mr,tr;"right"===pe.side?(Sr="start",mr=1,tr="",Ct=Me._offset+Me._length):(Sr="end",mr=-1,tr="-",Ct=Me._offset),Ut=pe._offset+(ye.y0+ye.y1)/2,It.attr("text-anchor",Sr),At.attr("d","M0,0L"+tr+T+","+T+"V"+(C+Jt.height/2)+"h"+tr+(2*C+Jt.width)+"V-"+(C+Jt.height/2)+"H"+tr+T+"V-"+T+"Z");var rr,ar=Jt.height/2,dr=Ee-Jt.top-ar,xr="clip"+N._uid+"commonlabel"+pe._id;if(Ct<Jt.width+2*C+T){rr="M-"+(T+C)+"-"+ar+"h-"+(Jt.width-C)+"V"+ar+"h"+(Jt.width-C)+"Z";var Lr=Jt.width-Ct+C;l.positionText(It,Lr,dr),"end"===Sr&&It.selectAll("tspan").each(function(){var Hr=m.select(this),Xr=d.tester.append("text").text(Hr.text()).call(d.font,dt),cn=U(ee,Xr.node());Math.round(cn.width)<Math.round(Jt.width)&&Hr.attr("x",Lr-cn.width),Xr.remove()})}else l.positionText(It,mr*(C+T),dr),rr=null;var zr=N._topclips.selectAll("#"+xr).data(rr?[0]:[]);zr.enter().append("clipPath").attr("id",xr).append("path"),zr.exit().remove(),zr.select("path").attr("d",rr),d.setClipUrl(It,rr?xr:null,ee)}Ot.attr("transform",e(Ct,Ut))}),o.isUnifiedHover(K)){ae.selectAll("g.hovertext").remove();var qe=B.filter(function(Ot){return"none"!==Ot.hoverinfo});if(0===qe.length)return;var Qe=N.hoverlabel,ct=Qe.font,Tt={font:ct};c({showlegend:!0,legend:{title:{text:oe,font:ct},font:ct,bgcolor:Qe.bgcolor,bordercolor:Qe.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:N.legend?N.legend.traceorder:void 0,orientation:"v"}},Tt,ee._fullData);var _t=Tt.legend;_t.entries=[];for(var nt=0;nt<qe.length;nt++){var Ke=qe[nt];if("none"!==Ke.hoverinfo){var xt=R(Ke,!0,K,N,oe),Ht=xt[0],Zt=xt[1];Ke.name=Zt,Ke.text=""!==Zt?Zt+" : "+Ht:Ht;var $t=Ke.cd[Ke.index];$t&&($t.mc&&(Ke.mc=$t.mc),$t.mcc&&(Ke.mc=$t.mcc),$t.mlc&&(Ke.mlc=$t.mlc),$t.mlcc&&(Ke.mlc=$t.mlcc),$t.mlw&&(Ke.mlw=$t.mlw),$t.mrc&&(Ke.mrc=$t.mrc),$t.dir&&(Ke.dir=$t.dir)),Ke._distinct=!0,_t.entries.push([Ke])}}_t.entries.sort(function(Ot,At){return Ot[0].trace.index-At[0].trace.index}),_t.layer=ae,_t._inHover=!0,_t._groupTitleFont=Qe.grouptitlefont,a(ee,_t);var Xt,cr,Ft,Be,He=ae.select("g.legend"),he=U(ee,He.node()),be=he.width+2*C,ze=he.height+2*C,Ve=qe[0],Je=(Ve.x0+Ve.x1)/2,Ye=(Ve.y0+Ve.y1)/2,lt=!(s.traceIs(Ve.trace,"bar-like")||s.traceIs(Ve.trace,"box-violin"));"y"===ge?lt?(cr=Ye-C,Xt=Ye+C):(cr=Math.min.apply(null,qe.map(function(Ot){return Math.min(Ot.y0,Ot.y1)})),Xt=Math.max.apply(null,qe.map(function(Ot){return Math.max(Ot.y0,Ot.y1)}))):cr=Xt=x.mean(qe.map(function(Ot){return(Ot.y0+Ot.y1)/2}))-ze/2,"x"===ge?lt?(Ft=Je+C,Be=Je-C):(Ft=Math.max.apply(null,qe.map(function(Ot){return Math.max(Ot.x0,Ot.x1)})),Be=Math.min.apply(null,qe.map(function(Ot){return Math.min(Ot.x0,Ot.x1)}))):Ft=Be=x.mean(qe.map(function(Ot){return(Ot.x0+Ot.x1)/2}))-be/2;var st,Mt,Dt=Me._offset,ht=pe._offset;return Be+=Dt-be,cr+=ht-ze,st=(Ft+=Dt)+be<Ae&&Ft>=0?Ft:Be+be<Ae&&Be>=0?Be:Dt+be<Ae?Dt:Ft-Je<Je-Be+be?Ae-be:0,Mt=(Xt+=ht)+ze<De&&Xt>=0?Xt:cr+ze<De&&cr>=0?cr:ht+ze<De?ht:Xt-Ye<Ye-cr+ze?De-ze:0,He.attr("transform",e((st+=C)-1,(Mt+=C)-1)),He}var mt=ae.selectAll("g.hovertext").data(B,function(Ot){return P(Ot)});return mt.enter().append("g").classed("hovertext",!0).each(function(){var Ot=m.select(this);Ot.append("rect").call(f.fill,f.addOpacity(te,.8)),Ot.append("text").classed("name",!0),Ot.append("path").style("stroke-width","1px"),Ot.append("text").classed("nums",!0).call(d.font,ve,ue)}),mt.exit().remove(),mt.each(function(Ot){var At=m.select(this).attr("transform",""),It=Ot.color;Array.isArray(It)&&(It=It[Ot.eventData[0].pointNumber]);var Se=Ot.bgcolor||It,Ze=f.combine(f.opacity(Se)?Se:f.defaultLine,te),it=f.combine(f.opacity(It)?It:f.defaultLine,te),dt=Ot.borderColor||f.contrast(Ze),Ct=R(Ot,Ie,K,N,oe,At),Ut=Ct[0],Jt=Ct[1],qt=At.select("text.nums").call(d.font,Ot.fontFamily||ve,Ot.fontSize||ue,Ot.fontColor||dt).text(Ut).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,ee),pr=At.select("text.name"),Sr=0,mr=0;if(Jt&&Jt!==Ut){pr.call(d.font,Ot.fontFamily||ve,Ot.fontSize||ue,it).text(Jt).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,ee);var tr=U(ee,pr.node());Sr=tr.width+2*C,mr=tr.height+2*C}else pr.remove(),At.select("rect").remove();At.select("path").style({fill:Ze,stroke:dt});var rr=Ot.xa._offset+(Ot.x0+Ot.x1)/2,ar=Ot.ya._offset+(Ot.y0+Ot.y1)/2,dr=Math.abs(Ot.x1-Ot.x0),xr=Math.abs(Ot.y1-Ot.y0),Lr=U(ee,qt.node()),zr=Lr.width/N._invScaleX,Hr=Lr.height/N._invScaleY;Ot.ty0=(Ee-Lr.top)/N._invScaleY,Ot.bx=zr+2*C,Ot.by=Math.max(Hr+2*C,mr),Ot.anchor="start",Ot.txwidth=zr,Ot.tx2width=Sr,Ot.offset=0;var Xr,cn,an=(zr+T+C+Sr)*N._invScaleX;if(J)Ot.pos=rr,Xr=ar+xr/2+an<=De,cn=ar-xr/2-an>=0,"top"!==Ot.idealAlign&&Xr||!cn?Xr?(ar+=xr/2,Ot.anchor="start"):Ot.anchor="middle":(ar-=xr/2,Ot.anchor="end");else if(Ot.pos=ar,Xr=rr+dr/2+an<=Ae,cn=rr-dr/2-an>=0,"left"!==Ot.idealAlign&&Xr||!cn)if(Xr)rr+=dr/2,Ot.anchor="start";else{Ot.anchor="middle";var Nn=an/2,on=rr+Nn-Ae,wn=rr-Nn;on>0&&(rr-=on),wn<0&&(rr+=-wn)}else rr-=dr/2,Ot.anchor="end";qt.attr("text-anchor",Ot.anchor),Sr&&pr.attr("text-anchor",Ot.anchor),At.attr("transform",e(rr,ar)+(J?n(y):""))}),mt}function R(B,V,ee,N,K,J){var te="",ae="";void 0!==B.nameOverride&&(B.name=B.nameOverride),B.name&&(B.trace._meta&&(B.name=x.templateString(B.name,B.trace._meta)),te=X(B.name,B.nameLength));var le=ee.charAt(0);void 0!==B.zLabel?(void 0!==B.xLabel&&(ae+="x: "+B.xLabel+"<br>"),void 0!==B.yLabel&&(ae+="y: "+B.yLabel+"<br>"),"choropleth"!==B.trace.type&&"choroplethmapbox"!==B.trace.type&&(ae+=(ae?"z: ":"")+B.zLabel)):V&&B[le+"Label"]===K?ae=B[("x"===le?"y":"x")+"Label"]||"":void 0===B.xLabel?void 0!==B.yLabel&&"scattercarpet"!==B.trace.type&&(ae=B.yLabel):ae=void 0===B.yLabel?B.xLabel:"("+B.xLabel+", "+B.yLabel+")",!B.text&&0!==B.text||Array.isArray(B.text)||(ae+=(ae?"<br>":"")+B.text),void 0!==B.extraText&&(ae+=(ae?"<br>":"")+B.extraText),J&&""===ae&&!B.hovertemplate&&(""===te&&J.remove(),ae=te);var ve=B.hovertemplate||!1;if(ve){var ue=B.hovertemplateLabels||B;B[le+"Label"]!==K&&(ue[le+"other"]=ue[le+"Val"],ue[le+"otherLabel"]=ue[le+"Label"]),ae=(ae=x.hovertemplateString(ve,ue,N._d3locale,B.eventData[0]||{},B.trace._meta)).replace(S,function(ye,Me){return te=X(Me,B.nameLength),""})}return[ae,te]}function D(B,V,ee,N){var K=function(te){return te*ee},J=function(te){return te*N};B.each(function(te){var ae=m.select(this);if(te.del)return ae.remove();var le=ae.select("text.nums"),se=te.anchor,ve="end"===se?-1:1,ue={start:1,end:-1,middle:0}[se],ye=ue*(T+C),Me=ye+ue*(te.txwidth+C),pe=0,ge=te.offset,we="middle"===se;we&&(ye-=te.tx2width/2,Me+=te.txwidth/2+C),V&&(ge*=-w,pe=te.offset*b),ae.select("path").attr("d",we?"M-"+K(te.bx/2+te.tx2width/2)+","+J(ge-te.by/2)+"h"+K(te.bx)+"v"+J(te.by)+"h-"+K(te.bx)+"Z":"M0,0L"+K(ve*T+pe)+","+J(T+ge)+"v"+J(te.by/2-T)+"h"+K(ve*te.bx)+"v-"+J(te.by)+"H"+K(ve*T+pe)+"V"+J(ge-T)+"Z");var oe=pe+ye,de=ge+te.ty0-te.by/2+C,Te=te.textAlign||"auto";"auto"!==Te&&("left"===Te&&"start"!==se?(le.attr("text-anchor","start"),oe=we?-te.bx/2-te.tx2width/2+C:-te.bx-C):"right"===Te&&"end"!==se&&(le.attr("text-anchor","end"),oe=we?te.bx/2-te.tx2width/2-C:te.bx+C)),le.call(l.positionText,K(oe),J(de)),te.tx2width&&(ae.select("text.name").call(l.positionText,K(Me+ue*C+pe),J(ge+te.ty0-te.by/2+C)),ae.select("rect").call(d.setRect,K(Me+(ue-1)*te.tx2width/2+pe),J(ge-te.by/2-1),K(te.tx2width),J(te.by+2)))})}function j(B,V){var ee=B.index,N=B.trace||{},K=B.cd[0],J=B.cd[ee]||{};function te(ye){return ye||g(ye)&&0===ye}var ae=Array.isArray(ee)?function(ye,Me){var pe=x.castOption(K,ee,ye);return te(pe)?pe:x.extractOption({},N,"",Me)}:function(ye,Me){return x.extractOption(J,N,ye,Me)};function le(ye,Me,pe){var ge=ae(Me,pe);te(ge)&&(B[ye]=ge)}if(le("hoverinfo","hi","hoverinfo"),le("bgcolor","hbg","hoverlabel.bgcolor"),le("borderColor","hbc","hoverlabel.bordercolor"),le("fontFamily","htf","hoverlabel.font.family"),le("fontSize","hts","hoverlabel.font.size"),le("fontColor","htc","hoverlabel.font.color"),le("nameLength","hnl","hoverlabel.namelength"),le("textAlign","hta","hoverlabel.align"),B.posref="y"===V||"closest"===V&&"h"===N.orientation?B.xa._offset+(B.x0+B.x1)/2:B.ya._offset+(B.y0+B.y1)/2,B.x0=x.constrain(B.x0,0,B.xa._length),B.x1=x.constrain(B.x1,0,B.xa._length),B.y0=x.constrain(B.y0,0,B.ya._length),B.y1=x.constrain(B.y1,0,B.ya._length),void 0!==B.xLabelVal&&(B.xLabel="xLabel"in B?B.xLabel:h.hoverLabelText(B.xa,B.xLabelVal,N.xhoverformat),B.xVal=B.xa.c2d(B.xLabelVal)),void 0!==B.yLabelVal&&(B.yLabel="yLabel"in B?B.yLabel:h.hoverLabelText(B.ya,B.yLabelVal,N.yhoverformat),B.yVal=B.ya.c2d(B.yLabelVal)),void 0!==B.zLabelVal&&void 0===B.zLabel&&(B.zLabel=String(B.zLabelVal)),!(isNaN(B.xerr)||"log"===B.xa.type&&B.xerr<=0)){var se=h.tickText(B.xa,B.xa.c2l(B.xerr),"hover").text;B.xLabel+=void 0!==B.xerrneg?" +"+se+" / -"+h.tickText(B.xa,B.xa.c2l(B.xerrneg),"hover").text:" \xb1 "+se,"x"===V&&(B.distance+=1)}if(!(isNaN(B.yerr)||"log"===B.ya.type&&B.yerr<=0)){var ve=h.tickText(B.ya,B.ya.c2l(B.yerr),"hover").text;B.yLabel+=void 0!==B.yerrneg?" +"+ve+" / -"+h.tickText(B.ya,B.ya.c2l(B.yerrneg),"hover").text:" \xb1 "+ve,"y"===V&&(B.distance+=1)}var ue=B.hoverinfo||B.trace.hoverinfo;return ue&&"all"!==ue&&(-1===(ue=Array.isArray(ue)?ue:ue.split("+")).indexOf("x")&&(B.xLabel=void 0),-1===ue.indexOf("y")&&(B.yLabel=void 0),-1===ue.indexOf("z")&&(B.zLabel=void 0),-1===ue.indexOf("text")&&(B.text=void 0),-1===ue.indexOf("name")&&(B.name=void 0)),B}function H(B,V,ee){var N,K,J=ee.container,te=ee.fullLayout,ae=te._size,le=ee.event,se=!!V.hLinePoint,ve=!!V.vLinePoint;if(J.selectAll(".spikeline").remove(),ve||se){var ue=f.combine(te.plot_bgcolor,te.paper_bgcolor);if(se){var ye,Me,pe=V.hLinePoint;N=pe&&pe.xa,"cursor"===(K=pe&&pe.ya).spikesnap?(ye=le.pointerX,Me=le.pointerY):(ye=N._offset+pe.x,Me=K._offset+pe.y);var ge,we,oe=k.readability(pe.color,ue)<1.5?f.contrast(ue):pe.color,de=K.spikemode,Te=K.spikethickness,Ee=K.spikecolor||oe,Ae=h.getPxPosition(B,K);if(-1!==de.indexOf("toaxis")||-1!==de.indexOf("across")){if(-1!==de.indexOf("toaxis")&&(ge=Ae,we=ye),-1!==de.indexOf("across")){var De=K._counterDomainMin,Ie=K._counterDomainMax;"free"===K.anchor&&(De=Math.min(De,K.position),Ie=Math.max(Ie,K.position)),ge=ae.l+De*ae.w,we=ae.l+Ie*ae.w}J.insert("line",":first-child").attr({x1:ge,x2:we,y1:Me,y2:Me,"stroke-width":Te,stroke:Ee,"stroke-dasharray":d.dashStyle(K.spikedash,Te)}).classed("spikeline",!0).classed("crisp",!0),J.insert("line",":first-child").attr({x1:ge,x2:we,y1:Me,y2:Me,"stroke-width":Te+2,stroke:ue}).classed("spikeline",!0).classed("crisp",!0)}-1!==de.indexOf("marker")&&J.insert("circle",":first-child").attr({cx:Ae+("right"!==K.side?Te:-Te),cy:Me,r:Te,fill:Ee}).classed("spikeline",!0)}if(ve){var Oe,Xe,Fe=V.vLinePoint;K=Fe&&Fe.ya,"cursor"===(N=Fe&&Fe.xa).spikesnap?(Oe=le.pointerX,Xe=le.pointerY):(Oe=N._offset+Fe.x,Xe=K._offset+Fe.y);var Pe,Re,qe=k.readability(Fe.color,ue)<1.5?f.contrast(ue):Fe.color,Qe=N.spikemode,ct=N.spikethickness,bt=N.spikecolor||qe,Tt=h.getPxPosition(B,N);if(-1!==Qe.indexOf("toaxis")||-1!==Qe.indexOf("across")){if(-1!==Qe.indexOf("toaxis")&&(Pe=Tt,Re=Xe),-1!==Qe.indexOf("across")){var _t=N._counterDomainMin,nt=N._counterDomainMax;"free"===N.anchor&&(_t=Math.min(_t,N.position),nt=Math.max(nt,N.position)),Pe=ae.t+(1-nt)*ae.h,Re=ae.t+(1-_t)*ae.h}J.insert("line",":first-child").attr({x1:Oe,x2:Oe,y1:Pe,y2:Re,"stroke-width":ct,stroke:bt,"stroke-dasharray":d.dashStyle(N.spikedash,ct)}).classed("spikeline",!0).classed("crisp",!0),J.insert("line",":first-child").attr({x1:Oe,x2:Oe,y1:Pe,y2:Re,"stroke-width":ct+2,stroke:ue}).classed("spikeline",!0).classed("crisp",!0)}-1!==Qe.indexOf("marker")&&J.insert("circle",":first-child").attr({cx:Oe,cy:Tt-("top"!==N.side?ct:-ct),r:ct,fill:bt}).classed("spikeline",!0)}}}function Y(B,V){return!V||V.vLinePoint!==B._spikepoints.vLinePoint||V.hLinePoint!==B._spikepoints.hLinePoint}function X(B,V){return l.plainText(B||"",{len:V,allowedTags:["br","sub","sup","b","i","em"]})}function Z(B,V,ee){var N=V[B+"a"],K=V[B+"Val"],J=V.cd[0];if("category"===N.type||"multicategory"===N.type)K=N._categoriesMap[K];else if("date"===N.type){var te=V.trace[B+"periodalignment"];if(te){var ae=V.cd[V.index],le=ae[B+"Start"];void 0===le&&(le=ae[B]);var se=ae[B+"End"];void 0===se&&(se=ae[B]);var ve=se-le;"end"===te?K+=ve:"middle"===te&&(K+=ve/2)}K=N.d2c(K)}return J&&J.t&&J.t.posLetter===N._id&&("group"!==ee.boxmode&&"group"!==ee.violinmode||(K+=J.t.dPos)),K}function W(B){return B.offsetTop+B.clientTop}function re(B){return B.offsetLeft+B.clientLeft}function U(B,V){var ee=B._fullLayout,N=V.getBoundingClientRect(),K=N.x,J=N.y,te=K+N.width,ae=J+N.height,le=x.apply3DTransform(ee._invTransform)(K,J),se=x.apply3DTransform(ee._invTransform)(te,ae),ve=le[0],ue=le[1],ye=se[0],Me=se[1];return{x:ve,y:ue,width:ye-ve,height:Me-ue,top:Math.min(ue,Me),left:Math.min(ve,ye),right:Math.max(ve,ye),bottom:Math.max(ue,Me)}}},{"../../lib":515,"../../lib/events":504,"../../lib/override_cursor":526,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../legend/defaults":419,"../legend/draw":420,"./constants":401,"./helpers":403,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],405:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../color"),k=v("./helpers").isUnifiedHover;$.exports=function(x,e,n,i){i=i||{};var l=e.legend;function r(d){i.font[d]||(i.font[d]=l?e.legend.font[d]:e.font[d])}e&&k(e.hovermode)&&(i.font||(i.font={}),r("size"),r("family"),r("color"),l?(i.bgcolor||(i.bgcolor=g.combine(e.legend.bgcolor,e.paper_bgcolor)),i.bordercolor||(i.bordercolor=e.legend.bordercolor)):i.bgcolor||(i.bgcolor=e.paper_bgcolor)),n("hoverlabel.bgcolor",i.bgcolor),n("hoverlabel.bordercolor",i.bordercolor),n("hoverlabel.namelength",i.namelength),m.coerceFont(n,"hoverlabel.font",i.font),n("hoverlabel.align",i.align)}},{"../../lib":515,"../color":367,"./helpers":403}],406:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./layout_attributes");$.exports=function(k,x){function e(n,i){return void 0!==x[n]?x[n]:m.coerce(k,x,g,n,i)}return e("clickmode"),e("hovermode")}},{"../../lib":515,"./layout_attributes":408}],407:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=v("../dragelement"),x=v("./helpers"),e=v("./layout_attributes"),n=v("./hover");$.exports={moduleType:"component",name:"fx",constants:v("./constants"),schema:{layout:e},attributes:v("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:v("./layout_global_defaults"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),getDistanceFunction:x.getDistanceFunction,getClosest:x.getClosest,inbox:x.inbox,quadrature:x.quadrature,appendArrayPointValue:x.appendArrayPointValue,castHoverOption:function(i,l,r){return g.castOption(i,l,"hoverlabel."+r)},castHoverinfo:function(i,l,r){return g.castOption(i,r,"hoverinfo",function(d){return g.coerceHoverinfo({hoverinfo:d},{_module:i._module},l)})},hover:n.hover,unhover:k.unhover,loneHover:n.loneHover,loneUnhover:function(i){var l=g.isD3Selection(i)?i:m.select(i);l.selectAll("g.hovertext").remove(),l.selectAll(".spikeline").remove()},click:v("./click")}},{"../../lib":515,"../dragelement":386,"./attributes":398,"./calc":399,"./click":400,"./constants":401,"./defaults":402,"./helpers":403,"./hover":404,"./layout_attributes":408,"./layout_defaults":409,"./layout_global_defaults":410,"@plotly/d3":58}],408:[function(v,$,Q){"use strict";var m=v("./constants"),g=v("../../plots/font_attributes"),k=g({editType:"none"});k.family.dflt=m.HOVERFONT,k.size.dflt=m.HOVERFONTSIZE,$.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:k,grouptitlefont:g({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":594,"./constants":401}],409:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./layout_attributes"),k=v("./hovermode_defaults"),x=v("./hoverlabel_defaults");$.exports=function(e,n){function i(f,t){return m.coerce(e,n,g,f,t)}k(e,n)&&(i("hoverdistance"),i("spikedistance")),"select"===i("dragmode")&&i("selectdirection");var l=n._has("mapbox"),r=n._has("geo"),d=n._basePlotModules.length;"zoom"===n.dragmode&&((l||r)&&1===d||l&&r&&2===d)&&(n.dragmode="pan"),x(e,n,i),m.coerceFont(i,"hoverlabel.grouptitlefont",n.hoverlabel.font)}},{"../../lib":515,"./hoverlabel_defaults":405,"./hovermode_defaults":406,"./layout_attributes":408}],410:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./hoverlabel_defaults"),k=v("./layout_attributes");$.exports=function(x,e){g(x,e,function(n,i){return m.coerce(x,e,k,n,i)})}},{"../../lib":515,"./hoverlabel_defaults":405,"./layout_attributes":408}],411:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../lib/regex").counter,k=v("../../plots/domain").attributes,x=v("../../plots/cartesian/constants").idRegex,e=v("../../plot_api/plot_template"),n={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[g("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[x.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[x.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:k({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function i(d,f,t){var h=f[t+"axes"],s=Object.keys((d._splomAxes||{})[t]||{});return Array.isArray(h)?h:s.length?s:void 0}function l(d,f,t,h,s,o){var p=f(d+"gap",t),c=f("domain."+d);f(d+"side",h);for(var a=new Array(s),y=c[0],u=(c[1]-y)/(s-p),_=u*(1-p),b=0;b<s;b++){var w=y+u*b;a[o?s-1-b:b]=[w,w+_]}return a}function r(d,f,t,h,s){var o,p=new Array(t);function c(a,y){-1!==f.indexOf(y)&&void 0===h[y]?(p[a]=y,h[y]=a):p[a]=""}if(Array.isArray(d))for(o=0;o<t;o++)c(o,d[o]);else for(c(0,s),o=1;o<t;o++)c(o,s+(o+1));return p}$.exports={moduleType:"component",name:"grid",schema:{layout:{grid:n}},layoutAttributes:n,sizeDefaults:function(d,f){var t=d.grid||{},h=i(f,t,"x"),s=i(f,t,"y");if(d.grid||h||s){var o,p,c=Array.isArray(t.subplots)&&Array.isArray(t.subplots[0]),a=Array.isArray(h),y=Array.isArray(s),u=a&&h!==t.xaxes&&y&&s!==t.yaxes;c?(o=t.subplots.length,p=t.subplots[0].length):(y&&(o=s.length),a&&(p=h.length));var _=e.newContainer(f,"grid"),b=S("rows",o),w=S("columns",p);if(b*w>1){!c&&!a&&!y&&"independent"===S("pattern")&&(c=!0),_._hasSubplotGrid=c;var T,C,M="top to bottom"===S("roworder"),P=c?.3:.1;u&&f._splomGridDflt&&(T=f._splomGridDflt.xside,C=f._splomGridDflt.yside),_._domains={x:l("x",S,c?.2:.1,T,w),y:l("y",S,P,C,b,M)}}else delete f.grid}function S(E,R){return m.coerce(t,_,n,E,R)}},contentDefaults:function(d,f){var t=f.grid;if(t&&t._domains){var h,s,o,p,c,a,y,u=d.grid||{},_=f._subplots,b=t._hasSubplotGrid,w=t.rows,T=t.columns,C="independent"===t.pattern,M=t._axisMap={};if(b){var I=u.subplots||[];a=t.subplots=new Array(w);var P=1;for(h=0;h<w;h++){var S=a[h]=new Array(T),E=I[h]||[];for(s=0;s<T;s++)if(C?(c=1===P?"xy":"x"+P+"y"+P,P++):c=E[s],S[s]="",-1!==_.cartesian.indexOf(c)){if(y=c.indexOf("y"),o=c.slice(0,y),p=c.slice(y),void 0!==M[o]&&M[o]!==s||void 0!==M[p]&&M[p]!==h)continue;S[s]=c,M[o]=s,M[p]=h}}}else{var R=i(f,u,"x"),D=i(f,u,"y");t.xaxes=r(R,_.xaxis,T,M,"x"),t.yaxes=r(D,_.yaxis,w,M,"y")}var j=t._anchors={},H="top to bottom"===t.roworder;for(var Y in M){var X,Z,W,re=Y.charAt(0),U=t[re+"side"];if(U.length<8)j[Y]="free";else if("x"===re){if("t"===U.charAt(0)===H?(X=0,Z=1,W=w):(X=w-1,Z=-1,W=-1),b){var B=M[Y];for(h=X;h!==W;h+=Z)if((c=a[h][B])&&(y=c.indexOf("y"),c.slice(0,y)===Y)){j[Y]=c.slice(y);break}}else for(h=X;h!==W;h+=Z)if(-1!==_.cartesian.indexOf(Y+(p=t.yaxes[h]))){j[Y]=p;break}}else if("l"===U.charAt(0)?(X=0,Z=1,W=T):(X=T-1,Z=-1,W=-1),b){var V=M[Y];for(h=X;h!==W;h+=Z)if((c=a[V][h])&&(y=c.indexOf("y"),c.slice(y)===Y)){j[Y]=c.slice(0,y);break}}else for(h=X;h!==W;h+=Z)if(-1!==_.cartesian.indexOf((o=t.xaxes[h])+Y)){j[Y]=o;break}}}}}},{"../../lib":515,"../../lib/regex":532,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/domain":593}],412:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/constants"),g=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),$.exports=g("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573}],413:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib/to_log_range");$.exports=function(k,x,e,n){x=x||{};var i="log"===e&&"linear"===x.type;if(i||"linear"===e&&"log"===x.type)for(var r,d,f=k._fullLayout.images,t=x._id.charAt(0),h=0;h<f.length;h++)if(d="images["+h+"].",(r=f[h])[t+"ref"]===x._id){var s=r[t],o=r["size"+t],p=null,c=null;if(i){p=g(s,x.range);var a=o/Math.pow(10,p)/2;c=2*Math.log(a+Math.sqrt(1+a*a))/Math.LN10}else c=(p=Math.pow(10,s))*(Math.pow(10,o/2)-Math.pow(10,-o/2));m(p)?m(c)||(c=null):(p=null,c=null),n(d+t,p),n(d+"size"+t,c)}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],414:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/cartesian/axes"),k=v("../../plots/array_container_defaults"),x=v("./attributes");function e(n,i,l){function r(p,c){return m.coerce(n,i,x,p,c)}var d=r("source");if(!r("visible",!!d))return i;r("layer"),r("xanchor"),r("yanchor"),r("sizex"),r("sizey"),r("sizing"),r("opacity");for(var f={_fullLayout:l},t=["x","y"],h=0;h<2;h++){var s=t[h],o=g.coerceRef(n,i,f,s,"paper",void 0);"paper"!==o&&g.getFromId(f,o)._imgIndices.push(i._index),g.coercePosition(i,f,r,o,s,0)}return i}$.exports=function(n,i){k(n,i,{name:"images",handleItemDefaults:e})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":412}],415:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../drawing"),k=v("../../plots/cartesian/axes"),x=v("../../plots/cartesian/axis_ids"),e=v("../../constants/xmlns_namespaces");$.exports=function(n){var i,l,r=n._fullLayout,d=[],f={},t=[];for(l=0;l<r.images.length;l++){var h=r.images[l];if(h.visible)if("below"===h.layer&&"paper"!==h.xref&&"paper"!==h.yref){i=x.ref2id(h.xref)+x.ref2id(h.yref);var s=r._plots[i];if(!s){t.push(h);continue}s.mainplot&&(i=s.mainplot.id),f[i]||(f[i]=[]),f[i].push(h)}else"above"===h.layer?d.push(h):t.push(h)}var o={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},p={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function c(T){var C=m.select(this);if(this._imgSrc!==T.source)if(C.attr("xmlns",e.svg),T.source&&"data:"===T.source.slice(0,5))C.attr("xlink:href",T.source),this._imgSrc=T.source;else{var M=new Promise(function(I){var P=new Image;function S(){C.remove(),I()}this.img=P,P.setAttribute("crossOrigin","anonymous"),P.onerror=S,P.onload=function(){var E=document.createElement("canvas");E.width=this.width,E.height=this.height,E.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var R=E.toDataURL("image/png");C.attr("xlink:href",R),I()},C.on("error",S),P.src=T.source,this._imgSrc=T.source}.bind(this));n._promises.push(M)}}function a(T){var C,M,I=m.select(this),P=k.getFromId(n,T.xref),S=k.getFromId(n,T.yref),E="domain"===k.getRefType(T.xref),R="domain"===k.getRefType(T.yref),D=r._size;C=void 0!==P?"string"==typeof T.xref&&E?P._length*T.sizex:Math.abs(P.l2p(T.sizex)-P.l2p(0)):T.sizex*D.w,M=void 0!==S?"string"==typeof T.yref&&R?S._length*T.sizey:Math.abs(S.l2p(T.sizey)-S.l2p(0)):T.sizey*D.h;var j,H,Y=C*o[T.xanchor].offset,X=M*p[T.yanchor].offset,Z=o[T.xanchor].sizing+p[T.yanchor].sizing;switch(j=void 0!==P?"string"==typeof T.xref&&E?P._length*T.x+P._offset:P.r2p(T.x)+P._offset:T.x*D.w+D.l,j+=Y,H=void 0!==S?"string"==typeof T.yref&&R?S._length*(1-T.y)+S._offset:S.r2p(T.y)+S._offset:D.h-T.y*D.h+D.t,H+=X,T.sizing){case"fill":Z+=" slice";break;case"stretch":Z="none"}I.attr({x:j,y:H,width:C,height:M,preserveAspectRatio:Z,opacity:T.opacity});var W=(P&&"domain"!==k.getRefType(T.xref)?P._id:"")+(S&&"domain"!==k.getRefType(T.yref)?S._id:"");g.setClipUrl(I,W?"clip"+r._uid+W:null,n)}var y=r._imageLowerLayer.selectAll("image").data(t),u=r._imageUpperLayer.selectAll("image").data(d);y.enter().append("image"),u.enter().append("image"),y.exit().remove(),u.exit().remove(),y.each(function(T){c.bind(this)(T),a.bind(this)(T)}),u.each(function(T){c.bind(this)(T),a.bind(this)(T)});var _=Object.keys(r._plots);for(l=0;l<_.length;l++){var b=r._plots[i=_[l]];if(b.imagelayer){var w=b.imagelayer.selectAll("image").data(f[i]||[]);w.enter().append("image"),w.exit().remove(),w.each(function(T){c.bind(this)(T),a.bind(this)(T)})}}}},{"../../constants/xmlns_namespaces":492,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../drawing":389,"@plotly/d3":58}],416:[function(v,$,Q){"use strict";$.exports={moduleType:"component",name:"images",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("images"),draw:v("./draw"),convertCoords:v("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":412,"./convert_coords":413,"./defaults":414,"./draw":415}],417:[function(v,$,Q){"use strict";var m=v("../../plots/font_attributes"),g=v("../color/attributes");$.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:g.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:m({editType:"legend"}),grouptitlefont:m({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:m({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":594,"../color/attributes":366}],418:[function(v,$,Q){"use strict";$.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],419:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../lib"),k=v("../../plot_api/plot_template"),x=v("../../plots/attributes"),e=v("./attributes"),n=v("../../plots/layout_attributes"),i=v("./helpers");$.exports=function(l,r,d){var f,t=l.legend||{},h=k.newContainer(r,"legend");function s(S,E){return g.coerce(t,h,e,S,E)}for(var o=function(S,E){return g.coerce(f._input,f,x,S,E)},p=r.font||{},c=g.coerceFont(s,"grouptitlefont",g.extendFlat({},p,{size:Math.round(1.1*p.size)})),a=0,y=!1,u="normal",_=0;_<d.length;_++)(f=d[_]).visible&&((f.showlegend||f._dfltShowLegend&&!(f._module&&f._module.attributes&&f._module.attributes.showlegend&&!1===f._module.attributes.showlegend.dflt))&&(a++,f.showlegend&&(y=!0,(m.traceIs(f,"pie-like")||!0===f._input.showlegend)&&a++),g.coerceFont(o,"legendgrouptitle.font",c)),(m.traceIs(f,"bar")&&"stack"===r.barmode||-1!==["tonextx","tonexty"].indexOf(f.fill))&&(u=i.isGrouped({traceorder:u})?"grouped+reversed":"reversed"),void 0!==f.legendgroup&&""!==f.legendgroup&&(u=i.isReversed({traceorder:u})?"reversed+grouped":"grouped"));var b=g.coerce(l,r,n,"showlegend",y&&a>1);if(!1===b&&(r.legend=void 0),(!1!==b||t.uirevision)&&(s("uirevision",r.uirevision),!1!==b)){s("bgcolor",r.paper_bgcolor),s("bordercolor"),s("borderwidth");var w,T,C,M=g.coerceFont(s,"font",r.font),I="h"===s("orientation");if(I?(w=0,m.getComponentMethod("rangeslider","isVisible")(l.xaxis)?(T=1.1,C="bottom"):(T=-.1,C="top")):(w=1.02,T=1,C="auto"),s("traceorder",u),i.isGrouped(r.legend)&&s("tracegroupgap"),s("entrywidth"),s("entrywidthmode"),s("itemsizing"),s("itemwidth"),s("itemclick"),s("itemdoubleclick"),s("groupclick"),s("x",w),s("xanchor"),s("y",T),s("yanchor",C),s("valign"),g.noneOrAll(t,h,["x","y"]),s("title.text")){s("title.side",I?"left":"top");var P=g.extendFlat({},M,{size:g.bigFont(M.size)});g.coerceFont(s,"title.font",P)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/layout_attributes":619,"../../registry":647,"./attributes":417,"./helpers":423}],420:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=v("../../plots/plots"),x=v("../../registry"),e=v("../../lib/events"),n=v("../dragelement"),i=v("../drawing"),l=v("../color"),r=v("../../lib/svg_text_utils"),d=v("./handle_click"),f=v("./constants"),t=v("../../constants/alignment"),h=t.LINE_SPACING,s=t.FROM_TL,o=t.FROM_BR,p=v("./get_legend_data"),c=v("./style"),a=v("./helpers");function y(I,P,S){var E=I[0],j=E.trace.legendwidth||P.entrywidth;return"fraction"===P.entrywidthmode?P._maxWidth*j:S+(j||E.width)}function u(I,P,S,E,R){var D=S.data()[0][0].trace,j={event:R,node:S.node(),curveNumber:D.index,expandedIndex:D._expandedIndex,data:I.data,layout:I.layout,frames:I._transitionData._frames,config:I._context,fullData:I._fullData,fullLayout:I._fullLayout};D._group&&(j.group=D._group),x.traceIs(D,"pie-like")&&(j.label=S.datum()[0].label),!1!==e.triggerHandler(I,"plotly_legendclick",j)&&(1===E?P._clickTimeout=setTimeout(function(){I._fullLayout&&d(S,I,E)},I._context.doubleClickDelay):2===E&&(P._clickTimeout&&clearTimeout(P._clickTimeout),I._legendMouseDownTime=0,!1!==e.triggerHandler(I,"plotly_legenddoubleclick",j)&&d(S,I,E)))}function _(I,P,S){var E,R,D=I.data()[0][0],j=D.trace,H=x.traceIs(j,"pie-like"),Y=!S._inHover&&P._context.edits.legendText&&!H,X=S._maxNameLength;D.groupTitle?(E=D.groupTitle.text,R=D.groupTitle.font):(R=S.font,S.entries?E=D.text:(E=H?D.label:j.name,j._meta&&(E=g.templateString(E,j._meta))));var Z=g.ensureSingle(I,"text","legendtext");Z.attr("text-anchor","start").call(i.font,R).text(Y?b(E,X):E),r.positionText(Z,S.itemwidth+2*f.itemGap,0),Y?Z.call(r.makeEditable,{gd:P,text:E}).call(T,I,P,S).on("edit",function(re){this.text(b(re,X)).call(T,I,P,S);var U=D.trace._fullInput||{},B={};if(x.hasTransform(U,"groupby")){var V=x.getTransformIndices(U,"groupby"),N=g.keyedContainer(U,"transforms["+V[V.length-1]+"].styles","target","value.name");N.set(D.trace._group,re),B=N.constructUpdate()}else B.name=re;return x.call("_guiRestyle",P,B,j.index)}):T(Z,I,P,S)}function b(I,P){var S=Math.max(4,P);if(I&&I.trim().length>=S/2)return I;for(var E=S-(I=I||"").length;E>0;E--)I+=" ";return I}function w(I,P){var S,E=P._context.doubleClickDelay,R=1,D=g.ensureSingle(I,"rect","legendtoggle",function(j){P._context.staticPlot||j.style("cursor","pointer").attr("pointer-events","all"),j.call(l.fill,"rgba(0,0,0,0)")});P._context.staticPlot||(D.on("mousedown",function(){(S=(new Date).getTime())-P._legendMouseDownTime<E?R+=1:(R=1,P._legendMouseDownTime=S)}),D.on("mouseup",function(){if(!P._dragged&&!P._editing){var j=P._fullLayout.legend;(new Date).getTime()-P._legendMouseDownTime>E&&(R=Math.max(R-1,1)),u(P,j,I,R,m.event)}}))}function T(I,P,S,E,R){E._inHover&&I.attr("data-notex",!0),r.convertToTspans(I,S,function(){!function(D,j,H,Y){var X=D.data()[0][0];if(H._inHover||!X||X.trace.showlegend){var Z=D.select("g[class*=math-group]"),W=Z.node();H||(H=j._fullLayout.legend);var B,V,U=H.borderwidth,ee=(1===Y?H.title.font:X.groupTitle?X.groupTitle.font:H.font).size*h;if(W){var N=i.bBox(W);B=N.height,V=N.width,1===Y?i.setTranslate(Z,U,U+.75*B):i.setTranslate(Z,0,.25*B)}else{var K=D.select(1===Y?".legendtitletext":".legendtext"),J=r.lineCount(K),te=K.node();if(B=ee*J,V=te?i.bBox(te).width:0,1===Y)"left"===H.title.side&&(V+=2*f.itemGap),r.positionText(K,U+f.titlePad,U+ee);else{var ae=2*f.itemGap+H.itemwidth;X.groupTitle&&(ae=f.itemGap,V-=H.itemwidth),r.positionText(K,ae,-ee*((J-1)/2-.3))}}1===Y?(H._titleWidth=V,H._titleHeight=B):(X.lineHeight=ee,X.height=Math.max(B,16)+3,X.width=V)}else D.remove()}(P,S,E,R)})}function C(I){return g.isRightAnchor(I)?"right":g.isCenterAnchor(I)?"center":"left"}function M(I){return g.isBottomAnchor(I)?"bottom":g.isMiddleAnchor(I)?"middle":"top"}$.exports=function(I,P){return P||(P=I._fullLayout.legend||{}),function(S,E){var R,D,j=S._fullLayout,H="legend"+j._uid,Y=E._inHover;if(Y?(R=E.layer,H+="-hover"):R=j._infolayer,R){if(S._legendMouseDownTime||(S._legendMouseDownTime=0),Y){if(!E.entries)return;D=p(E.entries,E)}else{if(!S.calcdata)return;D=j.showlegend&&p(S.calcdata,E)}var X=j.hiddenlabels||[];if(!(Y||j.showlegend&&D.length))return R.selectAll(".legend").remove(),j._topdefs.select("#"+H).remove(),k.autoMargin(S,"legend");var Z=g.ensureSingle(R,"g","legend",function(J){Y||J.attr("pointer-events","all")}),W=g.ensureSingleById(j._topdefs,"clipPath",H,function(J){J.append("rect")}),re=g.ensureSingle(Z,"rect","bg",function(J){J.attr("shape-rendering","crispEdges")});re.call(l.stroke,E.bordercolor).call(l.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px");var U=g.ensureSingle(Z,"g","scrollbox"),B=E.title;if(E._titleWidth=0,E._titleHeight=0,B.text){var V=g.ensureSingle(U,"text","legendtitletext");V.attr("text-anchor","start").call(i.font,B.font).text(B.text),T(V,U,S,E,1)}else U.selectAll(".legendtitletext").remove();var ee=g.ensureSingle(Z,"rect","scrollbar",function(J){J.attr(f.scrollBarEnterAttrs).call(l.fill,f.scrollBarColor)}),N=U.selectAll("g.groups").data(D);N.enter().append("g").attr("class","groups"),N.exit().remove();var K=N.selectAll("g.traces").data(g.identity);K.enter().append("g").attr("class","traces"),K.exit().remove(),K.style("opacity",function(J){var te=J[0].trace;return x.traceIs(te,"pie-like")?-1!==X.indexOf(J[0].label)?.5:1:"legendonly"===te.visible?.5:1}).each(function(){m.select(this).call(_,S,E)}).call(c,S,E).each(function(){Y||m.select(this).call(w,S)}),g.syncOrAsync([k.previousPromises,function(){return function(J,te,ae,le){var se=J._fullLayout;le||(le=se.legend);var ve=se._size,ue=a.isVertical(le),ye=a.isGrouped(le),Me="fraction"===le.entrywidthmode,pe=le.borderwidth,ge=2*pe,we=f.itemGap,oe=le.itemwidth+2*we,de=2*(pe+we),Te=M(le),Ee=le.y<0||0===le.y&&"top"===Te,Ae=le.y>1||1===le.y&&"bottom"===Te,De=le.tracegroupgap,Ie={};le._maxHeight=Math.max(Ee||Ae?se.height/2:ve.h,30);var Oe=0;le._width=0,le._height=0;var He,he,be,ze,Xe=(he=0,be=0,(ze=(He=le).title.side)&&(-1!==ze.indexOf("left")&&(he=He._titleWidth),-1!==ze.indexOf("top")&&(be=He._titleHeight)),[he,be]);if(ue)ae.each(function(He){var he=He[0].height;i.setTranslate(this,pe+Xe[0],pe+Xe[1]+le._height+he/2+we),le._height+=he,le._width=Math.max(le._width,He[0].width)}),Oe=oe+le._width,le._width+=we+oe+ge,le._height+=de,ye&&(te.each(function(He,he){i.setTranslate(this,0,he*le.tracegroupgap)}),le._height+=(le._lgroupsLength-1)*le.tracegroupgap);else{var Fe=C(le),qe=Ae||Ee,Qe=se.width/2;le._maxWidth=Math.max(le.x<0||0===le.x&&"right"===Fe?qe&&"left"===Fe?ve.l+ve.w:Qe:le.x>1||1===le.x&&"left"===Fe?qe&&"right"===Fe?ve.r+ve.w:Qe:ve.w,2*oe);var ct=0,bt=0;ae.each(function(He){var he=y(He,le,oe);ct=Math.max(ct,he),bt+=he}),Oe=null;var Tt=0;if(ye){var _t=0,nt=0,Ke=0;te.each(function(){var He=0,he=0;m.select(this).selectAll("g.traces").each(function(ze){var Ve=y(ze,le,oe),Je=ze[0].height;i.setTranslate(this,Xe[0],Xe[1]+pe+we+Je/2+he),he+=Je,He=Math.max(He,Ve),Ie[ze[0].trace.legendgroup]=He});var be=He+we;nt>0&&be+pe+nt>le._maxWidth?(Tt=Math.max(Tt,nt),nt=0,Ke+=_t+De,_t=he):_t=Math.max(_t,he),i.setTranslate(this,nt,Ke),nt+=be}),le._width=Math.max(Tt,nt)+pe,le._height=Ke+_t+de}else{var xt=ae.size(),Ht=bt+ge+(xt-1)*we<le._maxWidth,Zt=0,$t=0,Xt=0,cr=0;ae.each(function(He){var he=He[0].height,be=y(He,le,oe),ze=Ht?be:ct;Me||(ze+=we),ze+pe+$t-we>=le._maxWidth&&(Tt=Math.max(Tt,cr),$t=0,Xt+=Zt,le._height+=Zt,Zt=0),i.setTranslate(this,Xe[0]+pe+$t,Xe[1]+pe+Xt+he/2+we),cr=$t+be+we,$t+=ze,Zt=Math.max(Zt,he)}),Ht?(le._width=$t+ge,le._height=Zt+de):(le._width=Math.max(Tt,cr)+ge,le._height+=Zt+de)}}le._width=Math.ceil(Math.max(le._width+Xe[0],le._titleWidth+2*(pe+f.titlePad))),le._height=Math.ceil(Math.max(le._height+Xe[1],le._titleHeight+2*(pe+f.itemGap))),le._effHeight=Math.min(le._height,le._maxHeight);var Ft=J._context.edits,Be=Ft.legendText||Ft.legendPosition;ae.each(function(He){var he=m.select(this).select(".legendtoggle"),be=He[0].height,ze=He[0].trace.legendgroup,Ve=y(He,le,oe);ye&&""!==ze&&(Ve=Ie[ze]);var Je=Be?oe:Oe||Ve;ue||Me||(Je+=we/2),i.setRect(he,0,-be/2,Je,be)})}(S,N,K,E)},function(){var J,te,ae,le,Pe,Re,qe,Qe,se=j._size,ve=E.borderwidth;if(!Y){if(qe=C(Re=(Pe=S)._fullLayout.legend),Qe=M(Re),k.autoMargin(Pe,"legend",{x:Re.x,y:Re.y,l:Re._width*s[qe],r:Re._width*o[qe],b:Re._effHeight*o[Qe],t:Re._effHeight*s[Qe]}))return;var ue=se.l+se.w*E.x-s[C(E)]*E._width,ye=se.t+se.h*(1-E.y)-s[M(E)]*E._effHeight;if(j.margin.autoexpand){var Me=ue,pe=ye;ue=g.constrain(ue,0,j.width-E._width),ye=g.constrain(ye,0,j.height-E._effHeight),ue!==Me&&g.log("Constrain legend.x to make legend fit inside graph"),ye!==pe&&g.log("Constrain legend.y to make legend fit inside graph")}i.setTranslate(Z,ue,ye)}if(ee.on(".drag",null),Z.on("wheel",null),Y||E._height<=E._maxHeight||S._context.staticPlot){var ge=E._effHeight;Y&&(ge=E._height),re.attr({width:E._width-ve,height:ge-ve,x:ve/2,y:ve/2}),i.setTranslate(U,0,0),W.select("rect").attr({width:E._width-2*ve,height:ge-2*ve,x:ve,y:ve}),i.setClipUrl(U,H,S),i.setRect(ee,0,0,0,0),delete E._scrollY}else{var we,de,Te=Math.max(f.scrollBarMinHeight,E._effHeight*E._effHeight/E._height),Ee=E._effHeight-Te-2*f.scrollBarMargin,Ae=E._height-E._effHeight,De=Ee/Ae,Ie=Math.min(E._scrollY||0,Ae);re.attr({width:E._width-2*ve+f.scrollBarWidth+f.scrollBarMargin,height:E._effHeight-ve,x:ve/2,y:ve/2}),W.select("rect").attr({width:E._width-2*ve+f.scrollBarWidth+f.scrollBarMargin,height:E._effHeight-2*ve,x:ve,y:ve+Ie}),i.setClipUrl(U,H,S),Fe(Ie,Te,De),Z.on("wheel",function(){Fe(Ie=g.constrain(E._scrollY+m.event.deltaY/Ee*Ae,0,Ae),Te,De),0!==Ie&&Ie!==Ae&&m.event.preventDefault()});var Oe=m.behavior.drag().on("dragstart",function(){var Pe=m.event.sourceEvent;we="touchstart"===Pe.type?Pe.changedTouches[0].clientY:Pe.clientY,de=Ie}).on("drag",function(){var Pe=m.event.sourceEvent;2===Pe.buttons||Pe.ctrlKey||Fe(Ie=function(Re,qe,Qe){return g.constrain((Qe-qe)/De+Re,0,Ae)}(de,we,"touchmove"===Pe.type?Pe.changedTouches[0].clientY:Pe.clientY),Te,De)});ee.call(Oe);var Xe=m.behavior.drag().on("dragstart",function(){var Pe=m.event.sourceEvent;"touchstart"===Pe.type&&(we=Pe.changedTouches[0].clientY,de=Ie)}).on("drag",function(){var Pe=m.event.sourceEvent;"touchmove"===Pe.type&&Fe(Ie=function(Re,qe,Qe){return g.constrain((qe-Qe)/De+Re,0,Ae)}(de,we,Pe.changedTouches[0].clientY),Te,De)});U.call(Xe)}function Fe(Pe,Re,qe){E._scrollY=S._fullLayout.legend._scrollY=Pe,i.setTranslate(U,0,-Pe),i.setRect(ee,E._width,f.scrollBarMargin+Pe*qe,f.scrollBarWidth,Re),W.select("rect").attr("y",ve+Pe)}S._context.edits.legendPosition&&(Z.classed("cursor-move",!0),n.init({element:Z.node(),gd:S,prepFn:function(){var Pe=i.getTranslate(Z);ae=Pe.x,le=Pe.y},moveFn:function(Pe,Re){var qe=ae+Pe,Qe=le+Re;i.setTranslate(Z,qe,Qe),J=n.align(qe,0,se.l,se.l+se.w,E.xanchor),te=n.align(Qe,0,se.t+se.h,se.t,E.yanchor)},doneFn:function(){void 0!==J&&void 0!==te&&x.call("_guiRelayout",S,{"legend.x":J,"legend.y":te})},clickFn:function(Pe,Re){var qe=R.selectAll("g.traces").filter(function(){var Qe=this.getBoundingClientRect();return Re.clientX>=Qe.left&&Re.clientX<=Qe.right&&Re.clientY>=Qe.top&&Re.clientY<=Qe.bottom});qe.size()>0&&u(S,Z,qe,Pe,Re)}}))}],S)}}(I,P)}},{"../../constants/alignment":483,"../../lib":515,"../../lib/events":504,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":418,"./get_legend_data":421,"./handle_click":422,"./helpers":423,"./style":425,"@plotly/d3":58}],421:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("./helpers");$.exports=function(k,x){var e,n,i=x._inHover,l=g.isGrouped(x),r=g.isReversed(x),d={},f=[],t=!1,h={},s=0,o=0;function p(D,j){if(""!==D&&g.isGrouped(x))-1===f.indexOf(D)?(f.push(D),t=!0,d[D]=[j]):d[D].push(j);else{var H="~~i"+s;f.push(H),d[H]=[j],s++}}for(e=0;e<k.length;e++){var c=k[e],a=c[0],y=a.trace,u=y.legendgroup;if(i||y.visible&&y.showlegend)if(m.traceIs(y,"pie-like"))for(h[u]||(h[u]={}),n=0;n<c.length;n++){var _=c[n].label;h[u][_]||(p(u,{label:_,color:c[n].color,i:c[n].i,trace:y,pts:c[n].pts}),h[u][_]=!0,o=Math.max(o,(_||"").length))}else p(u,a),o=Math.max(o,(y.name||"").length)}if(!f.length)return[];var b=!t||!l,w=[];for(e=0;e<f.length;e++){var T=d[f[e]];w.push(b?T[0]:T)}for(b&&(w=[w]),e=0;e<w.length;e++){var C=1/0;for(n=0;n<w[e].length;n++){var M=w[e][n].trace.legendrank;C>M&&(C=M)}w[e][0]._groupMinRank=C,w[e][0]._preGroupSort=e}var I=function(D,j){return D.trace.legendrank-j.trace.legendrank||D._preSort-j._preSort};for(w.forEach(function(D,j){D[0]._preGroupSort=j}),w.sort(function(D,j){return D[0]._groupMinRank-j[0]._groupMinRank||D[0]._preGroupSort-j[0]._preGroupSort}),e=0;e<w.length;e++){w[e].forEach(function(D,j){D._preSort=j}),w[e].sort(I);var P=w[e][0].trace,S=null;for(n=0;n<w[e].length;n++){var E=w[e][n].trace.legendgrouptitle;if(E&&E.text){S=E,i&&(E.font=x._groupTitleFont);break}}if(r&&w[e].reverse(),S){var R=!1;for(n=0;n<w[e].length;n++)if(m.traceIs(w[e][n].trace,"pie-like")){R=!0;break}w[e].unshift({i:-1,groupTitle:S,noClick:R,trace:{showlegend:P.showlegend,legendgroup:P.legendgroup,visible:"toggleitem"===x.groupclick||P.visible}})}for(n=0;n<w[e].length;n++)w[e][n]=[w[e][n]]}return x._lgroupsLength=w.length,x._maxNameLength=o,w}},{"../../registry":647,"./helpers":423}],422:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../registry"),k=!0;$.exports=function(x,e,n){var i=e._fullLayout;if(!e._dragged&&!e._editing){var l,r=i.legend.itemclick,d=i.legend.itemdoubleclick,f=i.legend.groupclick;if(1===n&&"toggle"===r&&"toggleothers"===d&&k&&e.data&&e._context.showTips&&m.notifier(m._(e,"Double-click on legend to isolate one trace"),"long"),k=!1,1===n?l=r:2===n&&(l=d),l){var t="togglegroup"===f,h=i.hiddenlabels?i.hiddenlabels.slice():[],s=x.data()[0][0];if(!s.groupTitle||!s.noClick){var o,p,c,a,y,u=e._fullData,_=s.trace,b=_.legendgroup,w={},T=[],C=[],M=[];if(g.traceIs(_,"pie-like")){var I=s.label,P=h.indexOf(I);"toggle"===l?-1===P?h.push(I):h.splice(P,1):"toggleothers"===l&&(h=[],e.calcdata[0].forEach(function(V){I!==V.label&&h.push(V.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===h.length&&-1===P&&(h=[])),g.call("_guiRelayout",e,"hiddenlabels",h)}else{var S,E=b&&b.length,R=[];if(E)for(o=0;o<u.length;o++)(S=u[o]).visible&&S.legendgroup===b&&R.push(o);if("toggle"===l){var D;switch(_.visible){case!0:D="legendonly";break;case!1:D=!1;break;case"legendonly":D=!0}if(E)if(t)for(o=0;o<u.length;o++)!1!==u[o].visible&&u[o].legendgroup===b&&B(u[o],D);else B(_,D);else B(_,D)}else if("toggleothers"===l){var Y,Z=!0;for(o=0;o<u.length;o++)if(Y=!0!==u[o].showlegend,!(u[o]===_||Y||E&&u[o].legendgroup===b||!0!==u[o].visible||g.traceIs(u[o],"notLegendIsolatable"))){Z=!1;break}for(o=0;o<u.length;o++)if(!1!==u[o].visible&&!g.traceIs(u[o],"notLegendIsolatable"))switch(_.visible){case"legendonly":B(u[o],!0);break;case!0:Y=!0!==u[o].showlegend&&!u[o].legendgroup,B(u[o],!!(u[o]===_||E&&u[o].legendgroup===b||Y)||!!Z||"legendonly")}}for(o=0;o<C.length;o++)if(c=C[o]){var W=c.constructUpdate(),re=Object.keys(W);for(p=0;p<re.length;p++)(w[a=re[p]]=w[a]||[])[M[o]]=W[a]}for(y=Object.keys(w),o=0;o<y.length;o++)for(a=y[o],p=0;p<T.length;p++)w[a].hasOwnProperty(p)||(w[a][p]=void 0);g.call("_guiRestyle",e,w,T)}}}}function U(V,ee,N){var K=T.indexOf(V),J=w[ee];return J||(J=w[ee]=[]),-1===T.indexOf(V)&&(T.push(V),K=T.length-1),J[K]=N,K}function B(V,ee){if(!s.groupTitle||t){var N=V._fullInput;if(g.hasTransform(N,"groupby")){var K=C[N.index];if(!K){var J=g.getTransformIndices(N,"groupby");K=m.keyedContainer(N,"transforms["+J[J.length-1]+"].styles","target","value.visible"),C[N.index]=K}var ae=K.get(V._group);void 0===ae&&(ae=!0),!1!==ae&&K.set(V._group,ee),M[N.index]=U(N.index,"visible",!1!==N.visible)}else U(N.index,"visible",!1!==N.visible&&ee)}}}},{"../../lib":515,"../../registry":647}],423:[function(v,$,Q){"use strict";Q.isGrouped=function(m){return-1!==(m.traceorder||"").indexOf("grouped")},Q.isVertical=function(m){return"h"!==m.orientation},Q.isReversed=function(m){return-1!==(m.traceorder||"").indexOf("reversed")}},{}],424:[function(v,$,Q){"use strict";$.exports={moduleType:"component",name:"legend",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),draw:v("./draw"),style:v("./style")}},{"./attributes":417,"./defaults":419,"./draw":420,"./style":425}],425:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../registry"),k=v("../../lib"),x=k.strTranslate,e=v("../drawing"),n=v("../color"),i=v("../colorscale/helpers").extractOpts,l=v("../../traces/scatter/subtypes"),r=v("../../traces/pie/style_one"),d=v("../../traces/pie/helpers").castOption,f=v("./constants");function t(o,p){return(p?"radial":"horizontal")+(o?"":"reversed")}function h(o){var p=o[0].trace,c=p.contours,a=l.hasLines(p),y=l.hasMarkers(p),u=p.visible&&p.fill&&"none"!==p.fill,_=!1,b=!1;if(c){var w=c.coloring;"lines"===w?_=!0:a="none"===w||"heatmap"===w||c.showlines,"constraint"===c.type?u="="!==c._operation:"fill"!==w&&"heatmap"!==w||(b=!0)}return{showMarker:y,showLine:a,showFill:u,showGradientLine:_,showGradientFill:b,anyLine:a||_,anyFill:u||b}}function s(o,p,c){return o&&k.isArrayOrTypedArray(o)?p:o>c?c:o}$.exports=function(o,p,c){c||(c=p._fullLayout.legend);var y="constant"===c.itemsizing,u=c.itemwidth,b=x((u+2*f.itemGap)/2,0),w=function(M,I,P,S){var E;if(M+1)E=M;else{if(!(I&&I.width>0))return 0;E=I.width}return y?S:Math.min(E,P)};function T(M,I,P){var S=M[0].trace,E=S.marker||{},R=E.line||{},D=P?S.visible&&S.type===P:g.traceIs(S,"bar"),j=m.select(I).select("g.legendpoints").selectAll("path.legend"+P).data(D?[M]:[]);j.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",b),j.exit().remove(),j.each(function(H){var Y=m.select(this),X=H[0],Z=w(X.mlw,E.line,5,2);Y.style("stroke-width",Z+"px");var W=X.mcc;if(!c._inHover&&"mc"in X){var re=i(E),U=re.mid;void 0===U&&(U=(re.max+re.min)/2),W=e.tryColorscale(E,"")(U)}var B=W||X.mc||E.color,V=E.pattern,ee=V&&e.getPatternAttr(V.shape,0,"");if(ee){var N=e.getPatternAttr(V.bgcolor,0,null),K=e.getPatternAttr(V.fgcolor,0,null),J=V.fgopacity,te=s(V.size,8,10),ae=s(V.solidity,.5,1);Y.call(e.pattern,"legend",p,"legend-"+S.uid,ee,te,ae,W,V.fillmode,N,K,J)}else Y.call(n.fill,B);Z&&n.stroke(Y,X.mlc||R.color)})}function C(M,I,P){var S=M[0],E=S.trace,R=P?E.visible&&E.type===P:g.traceIs(E,P),D=m.select(I).select("g.legendpoints").selectAll("path.legend"+P).data(R?[M]:[]);if(D.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",b),D.exit().remove(),D.size()){var j=(E.marker||{}).line,H=w(d(j.width,S.pts),j,5,2),Y=k.minExtend(E,{marker:{line:{width:H}}});Y.marker.line.color=j.color;var X=k.minExtend(S,{trace:Y});r(D,X,Y)}}o.each(function(M){var I=m.select(this),P=k.ensureSingle(I,"g","layers");P.style("opacity",M[0].trace.opacity);var S=c.valign,E=M[0].lineHeight,R=M[0].height;P.attr("transform","middle"!==S&&E&&R?x(0,{top:1,bottom:-1}[S]*(.5*(E-R+3))):null),P.selectAll("g.legendfill").data([M]).enter().append("g").classed("legendfill",!0),P.selectAll("g.legendlines").data([M]).enter().append("g").classed("legendlines",!0);var j=P.selectAll("g.legendsymbols").data([M]);j.enter().append("g").classed("legendsymbols",!0),j.selectAll("g.legendpoints").data([M]).enter().append("g").classed("legendpoints",!0)}).each(function(M){var I,P=M[0].trace,S=[];if(P.visible)switch(P.type){case"histogram2d":case"heatmap":S=[["M-15,-2V4H15V-2Z"]],I=!0;break;case"choropleth":case"choroplethmapbox":S=[["M-6,-6V6H6V-6Z"]],I=!0;break;case"densitymapbox":S=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],I="radial";break;case"cone":S=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],I=!1;break;case"streamtube":S=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],I=!1;break;case"surface":S=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],I=!0;break;case"mesh3d":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],I=!1;break;case"volume":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],I=!0;break;case"isosurface":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],I=!1}var E=m.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(S);E.enter().append("path").classed("legend3dandfriends",!0).attr("transform",b).style("stroke-miterlimit",1),E.exit().remove(),E.each(function(R,D){var j,H=m.select(this),Y=i(P),X=Y.colorscale,Z=Y.reversescale;if(X){if(!I){var W=X.length;j=0===D?X[Z?W-1:0][1]:1===D?X[Z?0:W-1][1]:X[Math.floor((W-1)/2)][1]}}else{var re=P.vertexcolor||P.facecolor||P.color;j=k.isArrayOrTypedArray(re)?re[D]||re[0]:re}H.attr("d",R[0]),j?H.call(n.fill,j):H.call(function(U){U.size()&&e.gradient(U,p,"legendfill-"+P.uid,t(Z,"radial"===I),X,"fill")})})}).each(function(M){var I=M[0].trace,P="waterfall"===I.type;if(M[0]._distinct&&P){var S=M[0].trace[M[0].dir].marker;return M[0].mc=S.color,M[0].mlw=S.line.width,M[0].mlc=S.line.color,T(M,this,"waterfall")}var E=[];I.visible&&P&&(E=M[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var R=m.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(E);R.enter().append("path").classed("legendwaterfall",!0).attr("transform",b).style("stroke-miterlimit",1),R.exit().remove(),R.each(function(D){var j=m.select(this),H=I[D[0]].marker,Y=w(void 0,H.line,5,2);j.attr("d",D[1]).style("stroke-width",Y+"px").call(n.fill,H.color),Y&&j.call(n.stroke,H.line.color)})}).each(function(M){T(M,this,"funnel")}).each(function(M){T(M,this)}).each(function(M){var I=M[0].trace,P=m.select(this).select("g.legendpoints").selectAll("path.legendbox").data(I.visible&&g.traceIs(I,"box-violin")?[M]:[]);P.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",b),P.exit().remove(),P.each(function(){var S=m.select(this);if("all"!==I.boxpoints&&"all"!==I.points||0!==n.opacity(I.fillcolor)||0!==n.opacity((I.line||{}).color)){var E=w(void 0,I.line,5,2);S.style("stroke-width",E+"px").call(n.fill,I.fillcolor),E&&n.stroke(S,I.line.color)}else{var R=k.minExtend(I,{marker:{size:y?12:k.constrain(I.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});P.call(e.pointStyle,R,p)}})}).each(function(M){C(M,this,"funnelarea")}).each(function(M){C(M,this,"pie")}).each(function(M){var I,P,S=h(M),E=S.showFill,R=S.showLine,D=S.showGradientLine,j=S.showGradientFill,H=S.anyFill,Y=S.anyLine,X=M[0],Z=X.trace,W=i(Z),re=W.colorscale,U=W.reversescale,B=l.hasMarkers(Z)||!H?"M5,0":Y?"M5,-2":"M5,-3",V=m.select(this),ee=V.select(".legendfill").selectAll("path").data(E||j?[M]:[]);if(ee.enter().append("path").classed("js-fill",!0),ee.exit().remove(),ee.attr("d",B+"h"+u+"v6h-"+u+"z").call(function(J){J.size()&&(E?e.fillGroupStyle(J,p):e.gradient(J,p,"legendfill-"+Z.uid,t(U),re,"fill"))}),R||D){var N=w(void 0,Z.line,10,5);P=k.minExtend(Z,{line:{width:N}}),I=[k.minExtend(X,{trace:P})]}var K=V.select(".legendlines").selectAll("path").data(R||D?[I]:[]);K.enter().append("path").classed("js-line",!0),K.exit().remove(),K.attr("d",B+(D?"l"+u+",0.0001":"h"+u)).call(R?e.lineGroupStyle:function(J){if(J.size()){var te="legendline-"+Z.uid;e.lineGroupStyle(J),e.gradient(J,p,te,t(U),re,"stroke")}})}).each(function(M){var I,P,S=h(M),D=S.showLine,j=S.showMarker,H=M[0],Y=H.trace,X=!j&&!S.anyLine&&!S.anyFill&&l.hasText(Y);function Z(K,J,te,ae){var le=k.nestedProperty(Y,K).get(),se=k.isArrayOrTypedArray(le)&&J?J(le):le;if(y&&se&&void 0!==ae&&(se=ae),te){if(se<te[0])return te[0];if(se>te[1])return te[1]}return se}function W(K){return H._distinct&&H.index&&K[H.index]?K[H.index]:K[0]}if(j||X||D){var re={},U={};if(j){re.mc=Z("marker.color",W),re.mx=Z("marker.symbol",W),re.mo=Z("marker.opacity",k.mean,[.2,1]),re.mlc=Z("marker.line.color",W),re.mlw=Z("marker.line.width",k.mean,[0,5],2),U.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var B=Z("marker.size",k.mean,[2,16],12);re.ms=B,U.marker.size=B}D&&(U.line={width:Z("line.width",W,[0,10],5)}),X&&(re.tx="Aa",re.tp=Z("textposition",W),re.ts=10,re.tc=Z("textfont.color",W),re.tf=Z("textfont.family",W)),I=[k.minExtend(H,re)],(P=k.minExtend(Y,U)).selectedpoints=null,P.texttemplate=null}var V=m.select(this).select("g.legendpoints"),ee=V.selectAll("path.scatterpts").data(j?I:[]);ee.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",b),ee.exit().remove(),ee.call(e.pointStyle,P,p),j&&(I[0].mrc=3);var N=V.selectAll("g.pointtext").data(X?I:[]);N.enter().append("g").classed("pointtext",!0).append("text").attr("transform",b),N.exit().remove(),N.selectAll("text").call(e.textPointStyle,P,p)}).each(function(M){var I=M[0].trace,P=m.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(I.visible&&"candlestick"===I.type?[M,M]:[]);P.enter().append("path").classed("legendcandle",!0).attr("d",function(S,E){return E?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",b).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(S,E){var R=m.select(this),D=I[E?"increasing":"decreasing"],j=w(void 0,D.line,5,2);R.style("stroke-width",j+"px").call(n.fill,D.fillcolor),j&&n.stroke(R,D.line.color)})}).each(function(M){var I=M[0].trace,P=m.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(I.visible&&"ohlc"===I.type?[M,M]:[]);P.enter().append("path").classed("legendohlc",!0).attr("d",function(S,E){return E?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",b).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(S,E){var R=m.select(this),D=I[E?"increasing":"decreasing"],j=w(void 0,D.line,5,2);R.style("fill","none").call(e.dashLine,D.line.dash,j),j&&n.stroke(R,D.line.color)})})}},{"../../lib":515,"../../registry":647,"../../traces/pie/helpers":915,"../../traces/pie/style_one":921,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale/helpers":378,"../drawing":389,"./constants":418,"@plotly/d3":58}],426:[function(v,$,Q){"use strict";v("./constants"),$.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":428}],427:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../plots/plots"),k=v("../../plots/cartesian/axis_ids"),x=v("../../fonts/ploticon"),e=v("../shapes/draw").eraseActiveShape,n=v("../../lib"),i=n._,l=$.exports={};function r(a,y){var u,_,b=y.currentTarget,w=b.getAttribute("data-attr"),T=b.getAttribute("data-val")||!0,C=a._fullLayout,M={},I=k.list(a,null,!0),P=C._cartesianSpikesEnabled;if("zoom"===w){var S,E="in"===T?.5:2,R=(1+E)/2,D=(1-E)/2;for(_=0;_<I.length;_++)if(!(u=I[_]).fixedrange)if(S=u._name,"auto"===T)M[S+".autorange"]=!0;else if("reset"===T){if(void 0===u._rangeInitial)M[S+".autorange"]=!0;else{var j=u._rangeInitial.slice();M[S+".range[0]"]=j[0],M[S+".range[1]"]=j[1]}void 0!==u._showSpikeInitial&&(M[S+".showspikes"]=u._showSpikeInitial,"on"!==P||u._showSpikeInitial||(P="off"))}else{var H=[u.r2l(u.range[0]),u.r2l(u.range[1])],Y=[R*H[0]+D*H[1],R*H[1]+D*H[0]];M[S+".range[0]"]=u.l2r(Y[0]),M[S+".range[1]"]=u.l2r(Y[1])}}else"hovermode"!==w||"x"!==T&&"y"!==T||b.setAttribute("data-val",T=C._isHoriz?"y":"x"),M[w]=T;C._cartesianSpikesEnabled=P,m.call("_guiRelayout",a,M)}function d(a,y){for(var u=y.currentTarget,_=u.getAttribute("data-attr"),b=u.getAttribute("data-val")||!0,w=a._fullLayout._subplots.gl3d||[],T={},C=_.split("."),M=0;M<w.length;M++)T[w[M]+"."+C[1]]=b;T.dragmode="pan"===b?b:"zoom",m.call("_guiRelayout",a,T)}function f(a,y){for(var u=y.currentTarget.getAttribute("data-attr"),_="resetLastSave"===u,b="resetDefault"===u,w=a._fullLayout,T=w._subplots.gl3d||[],C={},M=0;M<T.length;M++){var I,P=T[M],S=P+".camera",E=P+".aspectratio",R=P+".aspectmode",D=w[P]._scene;_?(C[S+".up"]=D.viewInitial.up,C[S+".eye"]=D.viewInitial.eye,C[S+".center"]=D.viewInitial.center,I=!0):b&&(C[S+".up"]=null,C[S+".eye"]=null,C[S+".center"]=null,I=!0),I&&(C[E+".x"]=D.viewInitial.aspectratio.x,C[E+".y"]=D.viewInitial.aspectratio.y,C[E+".z"]=D.viewInitial.aspectratio.z,C[R]=D.viewInitial.aspectmode)}m.call("_guiRelayout",a,C)}function t(a,y){var u=y.currentTarget,_=u._previousVal,b=a._fullLayout,w=b._subplots.gl3d||[],T=["xaxis","yaxis","zaxis"],C={},M={};if(_)M=_,u._previousVal=null;else{for(var I=0;I<w.length;I++){var P=w[I],S=b[P],E=P+".hovermode";C[E]=S.hovermode,M[E]=!1;for(var R=0;R<3;R++){var D=T[R],j=P+"."+D+".showspikes";M[j]=!1,C[j]=S[D].showspikes}}u._previousVal=C}return M}function h(a,y){for(var u=y.currentTarget,_=u.getAttribute("data-attr"),b=u.getAttribute("data-val")||!0,w=a._fullLayout,T=w._subplots.geo||[],C=0;C<T.length;C++){var M=T[C];if("zoom"===_){var P=w[M].projection.scale;m.call("_guiRelayout",a,M+".projection.scale","in"===b?2*P:.5*P)}}"reset"===_&&c(a,"geo")}function s(a){var y=a._fullLayout;return!y.hovermode&&(y._has("cartesian")?y._isHoriz?"y":"x":"closest")}function o(a){var y=s(a);m.call("_guiRelayout",a,"hovermode",y)}function p(a,y){for(var u=y.currentTarget.getAttribute("data-val"),_=a._fullLayout,b=_._subplots.mapbox||[],w={},T=0;T<b.length;T++){var C=b[T],M=_[C].zoom;w[C+".zoom"]="in"===u?1.05*M:M/1.05}m.call("_guiRelayout",a,w)}function c(a,y){for(var u=a._fullLayout,_=u._subplots[y]||[],b={},w=0;w<_.length;w++)for(var T=_[w],C=u[T]._subplot.viewInitial,M=Object.keys(C),I=0;I<M.length;I++){var P=M[I];b[T+"."+P]=C[P]}m.call("_guiRelayout",a,b)}l.toImage={name:"toImage",title:function(a){return i(a,"png"===((a._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:x.camera,click:function(a){var y=a._context.toImageButtonOptions,u={format:y.format||"png"};n.notifier(i(a,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==u.format&&n.isIE()&&(n.notifier(i(a,"IE only supports svg.  Changing format to svg."),"long"),u.format="svg"),["filename","width","height","scale"].forEach(function(_){_ in y&&(u[_]=y[_])}),m.call("downloadImage",a,u).then(function(_){n.notifier(i(a,"Snapshot succeeded")+" - "+_,"long")}).catch(function(){n.notifier(i(a,"Sorry, there was a problem downloading your snapshot!"),"long")})}},l.sendDataToCloud={name:"sendDataToCloud",title:function(a){return i(a,"Edit in Chart Studio")},icon:x.disk,click:function(a){g.sendDataToCloud(a)}},l.editInChartStudio={name:"editInChartStudio",title:function(a){return i(a,"Edit in Chart Studio")},icon:x.pencil,click:function(a){g.sendDataToCloud(a)}},l.zoom2d={name:"zoom2d",_cat:"zoom",title:function(a){return i(a,"Zoom")},attr:"dragmode",val:"zoom",icon:x.zoombox,click:r},l.pan2d={name:"pan2d",_cat:"pan",title:function(a){return i(a,"Pan")},attr:"dragmode",val:"pan",icon:x.pan,click:r},l.select2d={name:"select2d",_cat:"select",title:function(a){return i(a,"Box Select")},attr:"dragmode",val:"select",icon:x.selectbox,click:r},l.lasso2d={name:"lasso2d",_cat:"lasso",title:function(a){return i(a,"Lasso Select")},attr:"dragmode",val:"lasso",icon:x.lasso,click:r},l.drawclosedpath={name:"drawclosedpath",title:function(a){return i(a,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:x.drawclosedpath,click:r},l.drawopenpath={name:"drawopenpath",title:function(a){return i(a,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:x.drawopenpath,click:r},l.drawline={name:"drawline",title:function(a){return i(a,"Draw line")},attr:"dragmode",val:"drawline",icon:x.drawline,click:r},l.drawrect={name:"drawrect",title:function(a){return i(a,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:x.drawrect,click:r},l.drawcircle={name:"drawcircle",title:function(a){return i(a,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:x.drawcircle,click:r},l.eraseshape={name:"eraseshape",title:function(a){return i(a,"Erase active shape")},icon:x.eraseshape,click:e},l.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(a){return i(a,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:r},l.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(a){return i(a,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:r},l.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(a){return i(a,"Autoscale")},attr:"zoom",val:"auto",icon:x.autoscale,click:r},l.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(a){return i(a,"Reset axes")},attr:"zoom",val:"reset",icon:x.home,click:r},l.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(a){return i(a,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:x.tooltip_basic,gravity:"ne",click:r},l.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(a){return i(a,"Compare data on hover")},attr:"hovermode",val:function(a){return a._fullLayout._isHoriz?"y":"x"},icon:x.tooltip_compare,gravity:"ne",click:r},l.zoom3d={name:"zoom3d",_cat:"zoom",title:function(a){return i(a,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:x.zoombox,click:d},l.pan3d={name:"pan3d",_cat:"pan",title:function(a){return i(a,"Pan")},attr:"scene.dragmode",val:"pan",icon:x.pan,click:d},l.orbitRotation={name:"orbitRotation",title:function(a){return i(a,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:x["3d_rotate"],click:d},l.tableRotation={name:"tableRotation",title:function(a){return i(a,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:x["z-axis"],click:d},l.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(a){return i(a,"Reset camera to default")},attr:"resetDefault",icon:x.home,click:f},l.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(a){return i(a,"Reset camera to last save")},attr:"resetLastSave",icon:x.movie,click:f},l.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(a){return i(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:function(a,y){var u=t(a,y);m.call("_guiRelayout",a,u)}},l.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(a){return i(a,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:h},l.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(a){return i(a,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:h},l.resetGeo={name:"resetGeo",_cat:"reset",title:function(a){return i(a,"Reset")},attr:"reset",val:null,icon:x.autoscale,click:h},l.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(a){return i(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:o},l.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(a){return i(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:o},l.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(a){return i(a,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:x.tooltip_basic,gravity:"ne",click:o},l.resetViewSankey={name:"resetSankeyGroup",title:function(a){return i(a,"Reset view")},icon:x.home,click:function(a){for(var y={"node.groups":[],"node.x":[],"node.y":[]},u=0;u<a._fullData.length;u++){var _=a._fullData[u]._viewInitial;y["node.groups"].push(_.node.groups.slice()),y["node.x"].push(_.node.x.slice()),y["node.y"].push(_.node.y.slice())}m.call("restyle",a,y)}},l.toggleHover={name:"toggleHover",title:function(a){return i(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:function(a,y){var u=t(a,y);u.hovermode=s(a),m.call("_guiRelayout",a,u)}},l.resetViews={name:"resetViews",title:function(a){return i(a,"Reset views")},icon:x.home,click:function(a,y){var u=y.currentTarget;u.setAttribute("data-attr","zoom"),u.setAttribute("data-val","reset"),r(a,y),u.setAttribute("data-attr","resetLastSave"),f(a,y),c(a,"geo"),c(a,"mapbox")}},l.toggleSpikelines={name:"toggleSpikelines",title:function(a){return i(a,"Toggle Spike Lines")},icon:x.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(a){var y=a._fullLayout;y._cartesianSpikesEnabled="on"===y._cartesianSpikesEnabled?"off":"on",m.call("_guiRelayout",a,function(_){for(var b="on"===_._fullLayout._cartesianSpikesEnabled,w=k.list(_,null,!0),T={},C=0;C<w.length;C++){var M=w[C];T[M._name+".showspikes"]=!!b||M._showSpikeInitial}return T}(a))}},l.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(a){return i(a,"Reset view")},attr:"reset",icon:x.home,click:function(a){c(a,"mapbox")}},l.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(a){return i(a,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:p},l.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(a){return i(a,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:p}},{"../../fonts/ploticon":494,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../shapes/draw":462}],428:[function(v,$,Q){"use strict";var m=v("./buttons"),g=Object.keys(m),k=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],x=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(k),e=[];g.forEach(function(n){!function(i){if(-1===x.indexOf(i._cat||i.name)){var l=i.name,r=(i._cat||i.name).toLowerCase();-1===e.indexOf(l)&&e.push(l),-1===e.indexOf(r)&&e.push(r)}}(m[n])}),e.sort(),$.exports={DRAW_MODES:k,backButtons:x,foreButtons:e}},{"./buttons":427}],429:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../color"),k=v("../../plot_api/plot_template"),x=v("./attributes");$.exports=function(e,n){var i=e.modebar||{},l=k.newContainer(n,"modebar");function r(f,t){return m.coerce(i,l,x,f,t)}r("orientation"),r("bgcolor",g.addOpacity(n.paper_bgcolor,.5));var d=g.contrast(g.rgb(n.modebar.bgcolor));r("color",g.addOpacity(d,.3)),r("activecolor",g.addOpacity(d,.7)),r("uirevision",n.uirevision),r("add"),r("remove")}},{"../../lib":515,"../../plot_api/plot_template":555,"../color":367,"./attributes":426}],430:[function(v,$,Q){"use strict";$.exports={moduleType:"component",name:"modebar",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),manage:v("./manage")}},{"./attributes":426,"./defaults":429,"./manage":431}],431:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axis_ids"),g=v("../../traces/scatter/subtypes"),k=v("../../registry"),x=v("../fx/helpers").isUnifiedHover,e=v("./modebar"),n=v("./buttons"),i=v("./constants").DRAW_MODES,l=v("../../lib").extendDeep;$.exports=function(r){var d=r._fullLayout,f=r._context,t=d._modeBar;if(f.displayModeBar||f.watermark){if(!Array.isArray(f.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(f.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var h,s=f.modeBarButtons;h=Array.isArray(s)&&s.length?function(o){for(var p=l([],o),c=0;c<p.length;c++)for(var a=p[c],y=0;y<a.length;y++){var u=a[y];if("string"==typeof u){if(void 0===n[u])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));p[c][y]=n[u]}}return p}(s):!f.displayModeBar&&f.watermark?[]:function(o){var p=o._fullLayout,c=o._fullData,a=o._context;function y(le,se){if("string"==typeof se){if(se.toLowerCase()===le.toLowerCase())return!0}else if(se.name===le||(se._cat||se.name)===le.toLowerCase())return!0;return!1}var u=p.modebar.add;"string"==typeof u&&(u=[u]);var _=p.modebar.remove;"string"==typeof _&&(_=[_]);var b=a.modeBarButtonsToAdd.concat(u.filter(function(le){for(var se=0;se<a.modeBarButtonsToRemove.length;se++)if(y(le,a.modeBarButtonsToRemove[se]))return!1;return!0})),w=a.modeBarButtonsToRemove.concat(_.filter(function(le){for(var se=0;se<a.modeBarButtonsToAdd.length;se++)if(y(le,a.modeBarButtonsToAdd[se]))return!1;return!0})),T=p._has("cartesian"),C=p._has("gl3d"),M=p._has("geo"),I=p._has("pie"),P=p._has("funnelarea"),S=p._has("gl2d"),E=p._has("ternary"),R=p._has("mapbox"),D=p._has("polar"),j=p._has("smith"),H=p._has("sankey"),Y=function(le){for(var se=m.list({_fullLayout:le},null,!0),ve=0;ve<se.length;ve++)if(!se[ve].fixedrange)return!1;return!0}(p),X=x(p.hovermode),Z=[];function W(le){if(le.length){for(var se=[],ve=0;ve<le.length;ve++){for(var ue=le[ve],ye=n[ue],Me=ye.name.toLowerCase(),pe=(ye._cat||ye.name).toLowerCase(),ge=!1,we=0;we<w.length;we++){var oe=w[we].toLowerCase();if(oe===Me||oe===pe){ge=!0;break}}ge||se.push(n[ue])}Z.push(se)}}var re=["toImage"];a.showEditInChartStudio?re.push("editInChartStudio"):a.showSendToCloud&&re.push("sendDataToCloud"),W(re);var U=[],B=[],V=[],ee=[];(T||S||I||P||E)+M+C+R+D+j>1?(B=["toggleHover"],V=["resetViews"]):M?(U=["zoomInGeo","zoomOutGeo"],B=["hoverClosestGeo"],V=["resetGeo"]):C?(B=["hoverClosest3d"],V=["resetCameraDefault3d","resetCameraLastSave3d"]):R?(U=["zoomInMapbox","zoomOutMapbox"],B=["toggleHover"],V=["resetViewMapbox"]):S?B=["hoverClosestGl2d"]:I?B=["hoverClosestPie"]:H?(B=["hoverClosestCartesian","hoverCompareCartesian"],V=["resetViewSankey"]):B=["toggleHover"],T&&(B=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(le){for(var se=0;se<le.length;se++)if(!k.traceIs(le[se],"noHover"))return!1;return!0}(c)||X)&&(B=[]),!T&&!S||Y||(U=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==V[0]&&(V=["resetScale2d"])),C?ee=["zoom3d","pan3d","orbitRotation","tableRotation"]:(T||S)&&!Y||E?ee=["zoom2d","pan2d"]:R||M?ee=["pan2d"]:D&&(ee=["zoom2d"]),function(le){for(var se=!1,ve=0;ve<le.length&&!se;ve++){var ue=le[ve];ue._module&&ue._module.selectPoints&&(k.traceIs(ue,"scatter-like")?(g.hasMarkers(ue)||g.hasText(ue))&&(se=!0):k.traceIs(ue,"box-violin")&&"all"!==ue.boxpoints&&"all"!==ue.points||(se=!0))}return se}(c)&&ee.push("select2d","lasso2d");var N=[],K=function(le){-1===N.indexOf(le)&&-1!==B.indexOf(le)&&N.push(le)};if(Array.isArray(b)){for(var J=[],te=0;te<b.length;te++){var ae=b[te];"string"==typeof ae?(ae=ae.toLowerCase(),-1!==i.indexOf(ae)?(p._has("mapbox")||p._has("cartesian"))&&ee.push(ae):"togglespikelines"===ae?K("toggleSpikelines"):"togglehover"===ae?K("toggleHover"):"hovercompare"===ae?K("hoverCompareCartesian"):"hoverclosest"===ae?(K("hoverClosestCartesian"),K("hoverClosestGeo"),K("hoverClosest3d"),K("hoverClosestGl2d"),K("hoverClosestPie")):"v1hovermode"===ae&&(K("toggleHover"),K("hoverClosestCartesian"),K("hoverCompareCartesian"),K("hoverClosestGeo"),K("hoverClosest3d"),K("hoverClosestGl2d"),K("hoverClosestPie"))):J.push(ae)}b=J}return W(ee),W(U.concat(V)),W(N),function(le,se){if(se.length)if(Array.isArray(se[0]))for(var ve=0;ve<se.length;ve++)le.push(se[ve]);else le.push(se);return le}(Z,b)}(r),t?t.update(r,h):d._modeBar=e(r,h)}else t&&(t.destroy(),delete d._modeBar)}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../../traces/scatter/subtypes":961,"../fx/helpers":403,"./buttons":427,"./constants":428,"./modebar":432}],432:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("fast-isnumeric"),k=v("../../lib"),x=v("../../fonts/ploticon"),e=v("../../version").version,n=new DOMParser;function i(r){this.container=r.container,this.element=document.createElement("div"),this.update(r.graphInfo,r.buttons),this.container.appendChild(this.element)}var l=i.prototype;l.update=function(r,d){this.graphInfo=r;var f=this.graphInfo._context,t=this.graphInfo._fullLayout,h="modebar-"+t._uid;this.element.setAttribute("id",h),this._uid=h,this.element.className="modebar","hover"===f.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===t.modebar.orientation&&(this.element.className+=" vertical",d=d.reverse());var s=t.modebar,o="hover"===f.displayModeBar?".js-plotly-plot .plotly:hover ":"";k.deleteRelatedStyleRule(h),k.addRelatedStyleRule(h,o+"#"+h+" .modebar-group","background-color: "+s.bgcolor),k.addRelatedStyleRule(h,"#"+h+" .modebar-btn .icon path","fill: "+s.color),k.addRelatedStyleRule(h,"#"+h+" .modebar-btn:hover .icon path","fill: "+s.activecolor),k.addRelatedStyleRule(h,"#"+h+" .modebar-btn.active .icon path","fill: "+s.activecolor);var p=!this.hasButtons(d),c=this.hasLogo!==f.displaylogo,a=this.locale!==f.locale;if(this.locale=f.locale,(p||c||a)&&(this.removeAllButtons(),this.updateButtons(d),f.watermark||f.displaylogo)){var y=this.getLogo();f.watermark&&(y.className=y.className+" watermark"),"v"===t.modebar.orientation?this.element.insertBefore(y,this.element.childNodes[0]):this.element.appendChild(y),this.hasLogo=!0}this.updateActiveButton()},l.updateButtons=function(r){var d=this;this.buttons=r,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(f){var t=d.createGroup();f.forEach(function(h){var s=h.name;if(!s)throw new Error("must provide button 'name' in button config");if(-1!==d.buttonsNames.indexOf(s))throw new Error("button name '"+s+"' is taken");d.buttonsNames.push(s);var o=d.createButton(h);d.buttonElements.push(o),t.appendChild(o)}),d.element.appendChild(t)})},l.createGroup=function(){var r=document.createElement("div");return r.className="modebar-group",r},l.createButton=function(r){var d=this,f=document.createElement("a");f.setAttribute("rel","tooltip"),f.className="modebar-btn";var t=r.title;void 0===t?t=r.name:"function"==typeof t&&(t=t(this.graphInfo)),(t||0===t)&&f.setAttribute("data-title",t),void 0!==r.attr&&f.setAttribute("data-attr",r.attr);var h=r.val;if(void 0!==h&&("function"==typeof h&&(h=h(this.graphInfo)),f.setAttribute("data-val",h)),"function"!=typeof r.click)throw new Error("must provide button 'click' function in button config");f.addEventListener("click",function(o){r.click(d.graphInfo,o),d.updateActiveButton(o.currentTarget)}),f.setAttribute("data-toggle",r.toggle||!1),r.toggle&&m.select(f).classed("active",!0);var s=r.icon;return f.appendChild("function"==typeof s?s():this.createIcon(s||x.question)),f.setAttribute("data-gravity",r.gravity||"n"),f},l.createIcon=function(r){var d,f=g(r.height)?Number(r.height):r.ascent-r.descent,t="http://www.w3.org/2000/svg";if(r.path){(d=document.createElementNS(t,"svg")).setAttribute("viewBox",[0,0,r.width,f].join(" ")),d.setAttribute("class","icon");var h=document.createElementNS(t,"path");h.setAttribute("d",r.path),r.transform?h.setAttribute("transform",r.transform):void 0!==r.ascent&&h.setAttribute("transform","matrix(1 0 0 -1 0 "+r.ascent+")"),d.appendChild(h)}return r.svg&&(d=n.parseFromString(r.svg,"application/xml").childNodes[0]),d.setAttribute("height","1em"),d.setAttribute("width","1em"),d},l.updateActiveButton=function(r){var d=this.graphInfo._fullLayout,f=void 0!==r?r.getAttribute("data-attr"):null;this.buttonElements.forEach(function(t){var h=t.getAttribute("data-val")||!0,s=t.getAttribute("data-attr"),o="true"===t.getAttribute("data-toggle"),p=m.select(t);if(o)s===f&&p.classed("active",!p.classed("active"));else{var c=null===s?s:k.nestedProperty(d,s).get();p.classed("active",c===h)}})},l.hasButtons=function(r){var d=this.buttons;if(!d||r.length!==d.length)return!1;for(var f=0;f<r.length;++f){if(r[f].length!==d[f].length)return!1;for(var t=0;t<r[f].length;t++)if(r[f][t].name!==d[f][t].name)return!1}return!0},l.getLogo=function(){var r=this.createGroup(),d=document.createElement("a");return d.href="https://plotly.com/",d.target="_blank",d.setAttribute("data-title",k._(this.graphInfo,"Produced with Plotly.js")+" (v"+e+")"),d.className="modebar-btn plotlyjsicon modebar-btn--logo",d.appendChild(this.createIcon(x.newplotlylogo)),r.appendChild(d),r},l.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},l.destroy=function(){k.removeElement(this.container.querySelector(".modebar")),k.deleteRelatedStyleRule(this._uid)},$.exports=function(r,d){var f=r._fullLayout,t=new i({graphInfo:r,container:f._modebardiv.node(),buttons:d});return f._privateplot&&m.select(t.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),t}},{"../../fonts/ploticon":494,"../../lib":515,"../../version":1132,"@plotly/d3":58,"fast-isnumeric":190}],433:[function(v,$,Q){"use strict";var m=v("../../plots/font_attributes"),g=v("../color/attributes"),k=(0,v("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});$.exports={visible:{valType:"boolean",editType:"plot"},buttons:k,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:m({editType:"plot"}),bgcolor:{valType:"color",dflt:g.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:g.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../color/attributes":366}],434:[function(v,$,Q){"use strict";$.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],435:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../color"),k=v("../../plot_api/plot_template"),x=v("../../plots/array_container_defaults"),e=v("./attributes"),n=v("./constants");function i(l,r,d,f){var t=f.calendar;function h(o,p){return m.coerce(l,r,e.buttons,o,p)}if(h("visible")){var s=h("step");"all"!==s&&(!t||"gregorian"===t||"month"!==s&&"year"!==s?h("stepmode"):r.stepmode="backward",h("count")),h("label")}}$.exports=function(l,r,d,f,t){var h=l.rangeselector||{},s=k.newContainer(r,"rangeselector");function o(a,y){return m.coerce(h,s,e,a,y)}if(o("visible",x(h,s,{name:"buttons",handleItemDefaults:i,calendar:t}).length>0)){var p=function(a,y,u){for(var _=u.filter(function(C){return y[C].anchor===a._id}),b=0,w=0;w<_.length;w++){var T=y[_[w]].domain;T&&(b=Math.max(T[1],b))}return[a.domain[0],b+n.yPad]}(r,d,f);o("x",p[0]),o("y",p[1]),m.noneOrAll(l,r,["x","y"]),o("xanchor"),o("yanchor"),m.coerceFont(o,"font",d.font);var c=o("bgcolor");o("activecolor",g.contrast(c,n.lightAmount,n.darkAmount)),o("bordercolor"),o("borderwidth")}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../color":367,"./attributes":433,"./constants":434}],436:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../registry"),k=v("../../plots/plots"),x=v("../color"),e=v("../drawing"),n=v("../../lib"),i=n.strTranslate,l=v("../../lib/svg_text_utils"),r=v("../../plots/cartesian/axis_ids"),d=v("../../constants/alignment"),f=d.LINE_SPACING,t=d.FROM_TL,h=d.FROM_BR,s=v("./constants"),o=v("./get_update_object");function p(y){return y._id}function c(y,u,_){var w,T,b=n.ensureSingle(y,"rect","selector-rect",function(w){w.attr("shape-rendering","crispEdges")});b.attr({rx:s.rx,ry:s.ry}),b.call(x.stroke,u.bordercolor).call(x.fill,(w=u,T=_,T._isActive||T._isHovered?w.activecolor:w.bgcolor)).style("stroke-width",u.borderwidth+"px")}function a(y,u,_,b){var w,T;n.ensureSingle(y,"text","selector-text",function(w){w.attr("text-anchor","middle")}).call(e.font,u.font).text((w=_,T=b._fullLayout._meta,w.label?T?n.templateString(w.label,T):w.label:"all"===w.step?"all":w.count+w.step.charAt(0))).call(function(w){l.convertToTspans(w,b)})}$.exports=function(y){var u=y._fullLayout._infolayer.selectAll(".rangeselector").data(function(_){for(var b=r.list(_,"x",!0),w=[],T=0;T<b.length;T++){var C=b[T];C.rangeselector&&C.rangeselector.visible&&w.push(C)}return w}(y),p);u.enter().append("g").classed("rangeselector",!0),u.exit().remove(),u.style({cursor:"pointer","pointer-events":"all"}),u.each(function(_){var b=m.select(this),w=_,T=w.rangeselector,C=b.selectAll("g.button").data(n.filterVisible(T.buttons));C.enter().append("g").classed("button",!0),C.exit().remove(),C.each(function(M){var I=m.select(this),P=o(w,M);M._isActive=function(S,E,R){if("all"===E.step)return!0===S.autorange;var D=Object.keys(R);return S.range[0]===R[D[0]]&&S.range[1]===R[D[1]]}(w,M,P),I.call(c,T,M),I.call(a,T,M,y),I.on("click",function(){y._dragged||g.call("_guiRelayout",y,P)}),I.on("mouseover",function(){M._isHovered=!0,I.call(c,T,M)}),I.on("mouseout",function(){M._isHovered=!1,I.call(c,T,M)})}),function(M,I,P,S,E){var R=0,D=0,j=P.borderwidth;I.each(function(){var re=m.select(this).select(".selector-text"),B=Math.max(P.font.size*f*l.lineCount(re),16)+3;D=Math.max(D,B)}),I.each(function(){var re=m.select(this),U=re.select(".selector-rect"),B=re.select(".selector-text"),V=B.node()&&e.bBox(B.node()).width,ee=P.font.size*f,N=l.lineCount(B),K=Math.max(V+10,s.minButtonWidth);re.attr("transform",i(j+R,j)),U.attr({x:0,y:0,width:K,height:D}),l.positionText(B,K/2,D/2-(N-1)*ee/2+3),R+=K+5});var H=M._fullLayout._size,Y=H.l+H.w*P.x,X=H.t+H.h*(1-P.y),Z="left";n.isRightAnchor(P)&&(Y-=R,Z="right"),n.isCenterAnchor(P)&&(Y-=R/2,Z="center");var W="top";n.isBottomAnchor(P)&&(X-=D,W="bottom"),n.isMiddleAnchor(P)&&(X-=D/2,W="middle"),R=Math.ceil(R),D=Math.ceil(D),Y=Math.round(Y),X=Math.round(X),k.autoMargin(M,S+"-range-selector",{x:P.x,y:P.y,l:R*t[Z],r:R*h[Z],b:D*h[W],t:D*t[W]}),E.attr("transform",i(Y,X))}(y,C,T,w._name,b)})}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"./constants":434,"./get_update_object":437,"@plotly/d3":58}],437:[function(v,$,Q){"use strict";var m=v("d3-time"),g=v("../../lib").titleCase;$.exports=function(k,x){var e=k._name,n={};if("all"===x.step)n[e+".autorange"]=!0;else{var i=function(l,r){var d,f=l.range,t=new Date(l.r2l(f[1])),s=m["utc"+g(r.step)],o=r.count;switch(r.stepmode){case"backward":d=l.l2r(+s.offset(t,-o));break;case"todate":var p=s.offset(t,-o);d=l.l2r(+s.ceil(p))}return[d,f[1]]}(k,x);n[e+".range[0]"]=i[0],n[e+".range[1]"]=i[1]}return n}},{"../../lib":515,"d3-time":122}],438:[function(v,$,Q){"use strict";$.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:v("./attributes")}}},layoutAttributes:v("./attributes"),handleDefaults:v("./defaults"),draw:v("./draw")}},{"./attributes":433,"./defaults":435,"./draw":436}],439:[function(v,$,Q){"use strict";var m=v("../color/attributes");$.exports={bgcolor:{valType:"color",dflt:m.background,editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":366}],440:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axis_ids").list,g=v("../../plots/cartesian/autorange").getAutoRange,k=v("./constants");$.exports=function(x){for(var e=m(x,"x",!0),n=0;n<e.length;n++){var i=e[n],l=i[k.name];l&&l.visible&&l.autorange&&(l._input.autorange=!0,l._input.range=l.range=g(x,i))}}},{"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"./constants":441}],441:[function(v,$,Q){"use strict";$.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],442:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plot_api/plot_template"),k=v("../../plots/cartesian/axis_ids"),x=v("./attributes"),e=v("./oppaxis_attributes");$.exports=function(n,i,l){var r=n[l],d=i[l];if(r.rangeslider||i._requestRangeslider[d._id]){m.isPlainObject(r.rangeslider)||(r.rangeslider={});var f,t,h=r.rangeslider,s=g.newContainer(d,"rangeslider");if(b("visible")){b("bgcolor",i.plot_bgcolor),b("bordercolor"),b("borderwidth"),b("thickness"),b("autorange",!d.isValidRange(h.range)),b("range");var o=i._subplots;if(o)for(var p=o.cartesian.filter(function(T){return T.substr(0,T.indexOf("y"))===k.name2id(l)}).map(function(T){return T.substr(T.indexOf("y"),T.length)}),c=m.simpleMap(p,k.id2name),a=0;a<c.length;a++){var y=c[a];f=h[y]||{},t=g.newContainer(s,y,"yaxis");var u,_=i[y];f.range&&_.isValidRange(f.range)&&(u="fixed"),"match"!==w("rangemode",u)&&w("range",_.range.slice())}s._input=h}}function b(T,C){return m.coerce(h,s,x,T,C)}function w(T,C){return m.coerce(f,t,e,T,C)}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_ids":570,"./attributes":439,"./oppaxis_attributes":446}],443:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../registry"),k=v("../../plots/plots"),x=v("../../lib"),e=x.strTranslate,n=v("../drawing"),i=v("../color"),l=v("../titles"),r=v("../../plots/cartesian"),d=v("../../plots/cartesian/axis_ids"),f=v("../dragelement"),t=v("../../lib/setcursor"),h=v("./constants");function s(u,_,b,w){var T=x.ensureSingle(u,"rect",h.bgClassName,function(P){P.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),C=w.borderwidth%2==0?w.borderwidth:w.borderwidth-1,M=-w._offsetShift,I=n.crispRound(_,w.borderwidth);T.attr({width:w._width+C,height:w._height+C,transform:e(M,M),"stroke-width":I}).call(i.stroke,w.bordercolor).call(i.fill,w.bgcolor)}function o(u,_,b,w){x.ensureSingleById(_._fullLayout._topdefs,"clipPath",w._clipId,function(C){C.append("rect").attr({x:0,y:0})}).select("rect").attr({width:w._width,height:w._height})}function p(u,_,b,w){var T,C=_.calcdata,M=u.selectAll("g."+h.rangePlotClassName).data(b._subplotsWith,x.identity);M.enter().append("g").attr("class",function(I){return h.rangePlotClassName+" "+I}).call(n.setClipUrl,w._clipId,_),M.order(),M.exit().remove(),M.each(function(I,P){var S=m.select(this),E=0===P,R=d.getFromId(_,I,"y"),D=R._name,j=w[D],H={data:[],layout:{xaxis:{type:b.type,domain:[0,1],range:w.range.slice(),calendar:b.calendar},width:w._width,height:w._height,margin:{t:0,b:0,l:0,r:0}},_context:_._context};b.rangebreaks&&(H.layout.xaxis.rangebreaks=b.rangebreaks),H.layout[D]={type:R.type,domain:[0,1],range:"match"!==j.rangemode?j.range.slice():R.range.slice(),calendar:R.calendar},R.rangebreaks&&(H.layout[D].rangebreaks=R.rangebreaks),k.supplyDefaults(H);var Y=H._fullLayout.xaxis,X=H._fullLayout[D];Y.clearCalc(),Y.setScale(),X.clearCalc(),X.setScale();var Z={id:I,plotgroup:S,xaxis:Y,yaxis:X,isRangePlot:!0};E?T=Z:(Z.mainplot="xy",Z.mainplotinfo=T),r.rangePlot(_,Z,function(W,re){for(var U=[],B=0;B<W.length;B++){var V=W[B],ee=V[0].trace;ee.xaxis+ee.yaxis===re&&U.push(V)}return U}(C,I))})}function c(u,_,b,w,T){x.ensureSingle(u,"rect",h.maskMinClassName,function(C){C.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(i.fill,h.maskColor),x.ensureSingle(u,"rect",h.maskMaxClassName,function(C){C.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(i.fill,h.maskColor),"match"!==T.rangemode&&(x.ensureSingle(u,"rect",h.maskMinOppAxisClassName,function(C){C.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).call(i.fill,h.maskOppAxisColor),x.ensureSingle(u,"rect",h.maskMaxOppAxisClassName,function(C){C.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).style("border-top",h.maskOppBorder).call(i.fill,h.maskOppAxisColor))}function a(u,_,b,w){_._context.staticPlot||x.ensureSingle(u,"rect",h.slideBoxClassName,function(T){T.attr({y:0,cursor:h.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:w._height,fill:h.slideBoxFill})}function y(u,_,b,w){var T=x.ensureSingle(u,"g",h.grabberMinClassName),C=x.ensureSingle(u,"g",h.grabberMaxClassName),M={x:0,width:h.handleWidth,rx:h.handleRadius,fill:i.background,stroke:i.defaultLine,"stroke-width":h.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(w._height/4),height:Math.round(w._height/2)};x.ensureSingle(T,"rect",h.handleMinClassName,function(S){S.attr(M)}).attr(I),x.ensureSingle(C,"rect",h.handleMaxClassName,function(S){S.attr(M)}).attr(I);var P={width:h.grabAreaWidth,x:0,y:0,fill:h.grabAreaFill,cursor:_._context.staticPlot?void 0:h.grabAreaCursor};x.ensureSingle(T,"rect",h.grabAreaMinClassName,function(S){S.attr(P)}).attr("height",w._height),x.ensureSingle(C,"rect",h.grabAreaMaxClassName,function(S){S.attr(P)}).attr("height",w._height)}$.exports=function(u){for(var _=u._fullLayout,b=_._rangeSliderData,w=0;w<b.length;w++){var T=b[w][h.name];T._clipId=T._id+"-"+_._uid}var C=_._infolayer.selectAll("g."+h.containerClassName).data(b,function(M){return M._name});C.exit().each(function(M){_._topdefs.select("#"+M[h.name]._clipId).remove()}).remove(),0!==b.length&&(C.enter().append("g").classed(h.containerClassName,!0).attr("pointer-events","all"),C.each(function(M){var I=m.select(this),P=M[h.name],S=_[d.id2name(M.anchor)],E=P[d.id2name(M.anchor)];if(P.range){var R,D=x.simpleMap(P.range,M.r2l),j=x.simpleMap(M.range,M.r2l);R=j[0]<j[1]?[Math.min(D[0],j[0]),Math.max(D[1],j[1])]:[Math.max(D[0],j[0]),Math.min(D[1],j[1])],P.range=P._input.range=x.simpleMap(R,M.l2r)}M.cleanRange("rangeslider.range");var H=_._size,Y=M.domain;P._width=H.w*(Y[1]-Y[0]);var X=Math.round(H.l+H.w*Y[0]),Z=Math.round(H.t+H.h*(1-M._counterDomainMin)+("bottom"===M.side?M._depth:0)+P._offsetShift+h.extraPad);I.attr("transform",e(X,Z)),P._rl=x.simpleMap(P.range,M.r2l);var W=P._rl[0],re=P._rl[1],U=re-W;if(P.p2d=function(le){return le/P._width*U+W},P.d2p=function(le){return(le-W)/U*P._width},M.rangebreaks){var B=M.locateBreaks(W,re);if(B.length){var V,ee,N=0;for(V=0;V<B.length;V++)N+=(ee=B[V]).max-ee.min;var K=P._width/(re-W-N),J=[-K*W];for(V=0;V<B.length;V++)J.push(J[J.length-1]-K*((ee=B[V]).max-ee.min));for(P.d2p=function(le){for(var se=J[0],ve=0;ve<B.length;ve++){var ue=B[ve];if(le>=ue.max)se=J[ve+1];else if(le<ue.min)break}return se+K*le},V=0;V<B.length;V++)(ee=B[V]).pmin=P.d2p(ee.min),ee.pmax=P.d2p(ee.max);P.p2d=function(le){for(var se=J[0],ve=0;ve<B.length;ve++){var ue=B[ve];if(le>=ue.pmax)se=J[ve+1];else if(le<ue.pmin)break}return(le-se)/K}}}if("match"!==E.rangemode){var te=S.r2l(E.range[0]),ae=S.r2l(E.range[1])-te;P.d2pOppAxis=function(le){return(le-te)/ae*P._height}}I.call(s,u,M,P).call(o,u,M,P).call(p,u,M,P).call(c,u,M,P,E).call(a,u,M,P).call(y,u,M,P),function(le,se,ve,ue){if(!se._context.staticPlot){var ye=le.select("rect."+h.slideBoxClassName).node(),Me=le.select("rect."+h.grabAreaMinClassName).node(),pe=le.select("rect."+h.grabAreaMaxClassName).node();le.on("mousedown",ge),le.on("touchstart",ge)}function ge(){var we=m.event,oe=we.target,de=we.clientX||we.touches[0].clientX,Te=de-le.node().getBoundingClientRect().left,Ee=ue.d2p(ve._rl[0]),Ae=ue.d2p(ve._rl[1]),De=f.coverSlip();function Ie(Xe){var Fe,Pe,Re,qe=+(Xe.clientX||Xe.touches[0].clientX)-de;switch(oe){case ye:Re="ew-resize",Fe=Ee+qe,Pe=Ae+qe;break;case Me:Re="col-resize",Fe=Ee+qe,Pe=Ae;break;case pe:Re="col-resize",Fe=Ee,Pe=Ae+qe;break;default:Re="ew-resize",Fe=Te,Pe=Te+qe}if(Pe<Fe){var Qe=Pe;Pe=Fe,Fe=Qe}ue._pixelMin=Fe,ue._pixelMax=Pe,t(m.select(De),Re),function(ct,bt,Tt,_t){function nt(Ht){return Tt.l2r(x.constrain(Ht,_t._rl[0],_t._rl[1]))}var Ke=nt(_t.p2d(_t._pixelMin)),xt=nt(_t.p2d(_t._pixelMax));window.requestAnimationFrame(function(){g.call("_guiRelayout",bt,Tt._name+".range",[Ke,xt])})}(0,se,ve,ue)}function Oe(){De.removeEventListener("mousemove",Ie),De.removeEventListener("mouseup",Oe),this.removeEventListener("touchmove",Ie),this.removeEventListener("touchend",Oe),x.removeElement(De)}this.addEventListener("touchmove",Ie),this.addEventListener("touchend",Oe),De.addEventListener("mousemove",Ie),De.addEventListener("mouseup",Oe)}}(I,u,M,P),function(le,se,ve,ue,ye,Me){var pe=h.handleWidth/2;function ge(Oe){return x.constrain(Oe,0,ue._width)}function we(Oe){return x.constrain(Oe,0,ue._height)}function oe(Oe){return x.constrain(Oe,-pe,ue._width+pe)}var de=ge(ue.d2p(ve._rl[0])),Te=ge(ue.d2p(ve._rl[1]));if(le.select("rect."+h.slideBoxClassName).attr("x",de).attr("width",Te-de),le.select("rect."+h.maskMinClassName).attr("width",de),le.select("rect."+h.maskMaxClassName).attr("x",Te).attr("width",ue._width-Te),"match"!==Me.rangemode){var Ee=ue._height-we(ue.d2pOppAxis(ye._rl[1])),Ae=ue._height-we(ue.d2pOppAxis(ye._rl[0]));le.select("rect."+h.maskMinOppAxisClassName).attr("x",de).attr("height",Ee).attr("width",Te-de),le.select("rect."+h.maskMaxOppAxisClassName).attr("x",de).attr("y",Ae).attr("height",ue._height-Ae).attr("width",Te-de),le.select("rect."+h.slideBoxClassName).attr("y",Ee).attr("height",Ae-Ee)}var De=Math.round(oe(de-pe))-.5,Ie=Math.round(oe(Te-pe))+.5;le.select("g."+h.grabberMinClassName).attr("transform",e(De,.5)),le.select("g."+h.grabberMaxClassName).attr("transform",e(Ie,.5))}(I,0,M,P,S,E),"bottom"===M.side&&l.draw(u,M._id+"title",{propContainer:M,propName:M._name+".title",placeholder:_._dfltTitle.x,attributes:{x:M._offset+M._length/2,y:Z+P._height+P._offsetShift+10+1.5*M.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":515,"../../lib/setcursor":536,"../../plots/cartesian":578,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":441,"@plotly/d3":58}],444:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axis_ids"),g=v("../../lib/svg_text_utils"),k=v("./constants"),x=v("../../constants/alignment").LINE_SPACING,e=k.name;function n(i){var l=i&&i[e];return l&&l.visible}Q.isVisible=n,Q.makeData=function(i){var l=m.list({_fullLayout:i},"x",!0),r=i.margin,d=[];if(!i._has("gl2d"))for(var f=0;f<l.length;f++){var t=l[f];if(n(t)){d.push(t);var h=t[e];h._id=e+t._id,h._height=(i.height-r.b-r.t)*h.thickness,h._offsetShift=Math.floor(h.borderwidth/2)}}i._rangeSliderData=d},Q.autoMarginOpts=function(i,l){var r=i._fullLayout,d=l[e],f=l._id.charAt(0),t=0,h=0;return"bottom"===l.side&&(t=l._depth,l.title.text!==r._dfltTitle[f]&&(h=1.5*l.title.font.size+10+d._offsetShift,h+=(l.title.text.match(g.BR_TAG_ALL)||[]).length*l.title.font.size*x)),{x:0,y:l._counterDomainMin,l:0,r:0,t:0,b:d._height+t+Math.max(r.margin.b,h),pad:k.extraPad+2*d._offsetShift}}},{"../../constants/alignment":483,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"./constants":441}],445:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./attributes"),k=v("./oppaxis_attributes"),x=v("./helpers");$.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:m.extendFlat({},g,{yaxis:k})}}},layoutAttributes:v("./attributes"),handleDefaults:v("./defaults"),calcAutorange:v("./calc_autorange"),draw:v("./draw"),isVisible:x.isVisible,makeData:x.makeData,autoMarginOpts:x.autoMarginOpts}},{"../../lib":515,"./attributes":439,"./calc_autorange":440,"./defaults":442,"./draw":443,"./helpers":444,"./oppaxis_attributes":446}],446:[function(v,$,Q){"use strict";$.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],447:[function(v,$,Q){"use strict";var m=v("../annotations/attributes"),g=v("../../traces/scatter/attributes").line,k=v("../drawing/attributes").dash,x=v("../../lib/extend").extendFlat,e=v("../../plot_api/edit_types").overrideAll,n=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),$.exports=e(n("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:x({},m.xref,{}),yref:x({},m.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:g.color,width:x({},g.width,{min:1,dflt:1}),dash:x({},k,{dflt:"dot"})}}),"arraydraw","from-root")},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],448:[function(v,$,Q){"use strict";$.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},{}],449:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/cartesian/axes"),k=v("../../plots/array_container_defaults"),x=v("./attributes"),e=v("../shapes/helpers");function n(i,l,r){function d(I,P){return m.coerce(i,l,x,I,P)}var f=d("path"),t="path"!==d("type",f?"path":"rect");t&&delete l.path,d("opacity"),d("line.color"),d("line.width"),d("line.dash");for(var h=["x","y"],s=0;s<2;s++){var o,p,c,a=h[s],y={_fullLayout:r},u=g.coerceRef(i,l,y,a);if((o=g.getFromId(y,u))._selectionIndices.push(l._index),c=e.rangeToShapePosition(o),p=e.shapePositionToRange(o),t){var _=a+"0",b=a+"1",w=i[_],T=i[b];i[_]=p(i[_],!0),i[b]=p(i[b],!0),g.coercePosition(l,y,d,u,_),g.coercePosition(l,y,d,u,b);var C=l[_],M=l[b];void 0!==C&&void 0!==M&&(l[_]=c(C),l[b]=c(M),i[_]=w,i[b]=T)}}t&&m.noneOrAll(i,l,["x0","x1","y0","y1"])}$.exports=function(i,l){k(i,l,{name:"selections",handleItemDefaults:n});for(var r=l.selections,d=0;d<r.length;d++){var f=r[d];f&&void 0===f.path&&(void 0!==f.x0&&void 0!==f.x1&&void 0!==f.y0&&void 0!==f.y1||(l.selections[d]=null))}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../shapes/helpers":469,"./attributes":447}],450:[function(v,$,Q){"use strict";var m=v("../shapes/draw_newshape/helpers").readPaths,g=v("../shapes/display_outlines"),k=v("../shapes/handle_outline").clearOutlineControllers,x=v("../color"),e=v("../drawing"),n=v("../../plot_api/plot_template").arrayEditor,i=v("../shapes/helpers"),l=i.getPathString;function r(s){var o=s._fullLayout;for(var p in k(s),o._selectionLayer.selectAll("path").remove(),o._plots){var c=o._plots[p].selectionLayer;c&&c.selectAll("path").remove()}for(var a=0;a<o.selections.length;a++)f(s,a)}function d(s){return s._context.editSelection}function f(s,o){s._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+o+'"]').remove();var p=i.makeSelectionsOptionsAndPlotinfo(s,o),c=p.options,a=p.plotinfo;c._input&&function(y){var u=l(s,c),_={"data-index":o,"fill-rule":"evenodd",d:u},b=c.opacity,w="rgba(0,0,0,0)",T=c.line.color||x.contrast(s._fullLayout.plot_bgcolor),C=c.line.width,M=c.line.dash;C||(C=5,M="solid");var I=d(s)&&s._fullLayout._activeSelectionIndex===o;I&&(w=s._fullLayout.activeselection.fillcolor,b=s._fullLayout.activeselection.opacity);for(var P=[],S=1;S>=0;S--){var E=y.append("path").attr(_).style("opacity",S?.1:b).call(x.stroke,T).call(x.fill,w).call(e.dashLine,S?"solid":M,S?4+C:C);if(t(E,s,c),I){var R=n(s.layout,"selections",c);E.style({cursor:"move"});var D={element:E.node(),plotinfo:a,gd:s,editHelpers:R,isActiveSelection:!0},j=m(u,s);g(j,E,D)}else E.style("pointer-events",S?"all":"none");P[S]=E}var H=P[0];P[1].node().addEventListener("click",function(){return function(Y,X){if(d(Y)){var Z=+X.node().getAttribute("data-index");if(Z>=0){if(Z===Y._fullLayout._activeSelectionIndex)return void h(Y);Y._fullLayout._activeSelectionIndex=Z,Y._fullLayout._deactivateSelection=h,r(Y)}}}(s,H)})}(s._fullLayout._selectionLayer)}function t(s,o,p){e.setClipUrl(s,"clip"+o._fullLayout._uid+(p.xref+p.yref),o)}function h(s){d(s)&&s._fullLayout._activeSelectionIndex>=0&&(k(s),delete s._fullLayout._activeSelectionIndex,r(s))}$.exports={draw:r,drawOne:f,activateLastSelection:function(s){d(s)&&(s._fullLayout._activeSelectionIndex=s._fullLayout.selections.length-1,s._fullLayout._deactivateSelection=h,r(s))}}},{"../../plot_api/plot_template":555,"../color":367,"../drawing":389,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/handle_outline":468,"../shapes/helpers":469}],451:[function(v,$,Q){"use strict";var m=v("../../drawing/attributes").dash,g=v("../../../lib/extend").extendFlat;$.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:g({},m,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],452:[function(v,$,Q){"use strict";$.exports=function(m,g,k){k("newselection.mode"),k("newselection.line.width")&&(k("newselection.line.color"),k("newselection.line.dash")),k("activeselection.fillcolor"),k("activeselection.opacity")}},{}],453:[function(v,$,Q){"use strict";var m=v("../../dragelement/helpers").selectMode,g=v("../../shapes/handle_outline").clearOutline,k=v("../../shapes/draw_newshape/helpers"),x=k.readPaths,e=k.writePaths,n=k.fixDatesForPaths;$.exports=function(i,l){if(i.length){var r=i[0][0];if(r){var d=r.getAttribute("d"),f=l.gd,t=f._fullLayout.newselection,h=l.plotinfo,s=h.xaxis,o=h.yaxis,p=l.isActiveSelection,c=l.dragmode,a=(f.layout||{}).selections||[];if(!m(c)&&void 0!==p){var y=f._fullLayout._activeSelectionIndex;if(y<a.length)switch(f._fullLayout.selections[y].type){case"rect":c="select";break;case"path":c="lasso"}}var u,_=x(d,f,h,p),b={xref:s._id,yref:o._id,opacity:t.opacity,line:{color:t.line.color,width:t.line.width,dash:t.line.dash}};1===_.length&&(u=_[0]),u&&5===u.length&&"select"===c?(b.type="rect",b.x0=u[0][1],b.y0=u[0][2],b.x1=u[2][1],b.y1=u[2][2]):(b.type="path",s&&o&&n(_,s,o),b.path=e(_),u=null),g(f);for(var w=l.editHelpers,T=(w||{}).modifyItem,C=[],M=0;M<a.length;M++){var I=f._fullLayout.selections[M];if(I){if(C[M]=I._input,void 0!==p&&M===f._fullLayout._activeSelectionIndex){var P=b;switch(I.type){case"rect":T("x0",P.x0),T("x1",P.x1),T("y0",P.y0),T("y1",P.y1);break;case"path":T("path",P.path)}}}else C[M]=I}return void 0===p?(C.push(b),C):w?w.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../shapes/draw_newshape/helpers":466,"../../shapes/handle_outline":468}],454:[function(v,$,Q){"use strict";var m=v("../../lib").strTranslate;function g(k,x){switch(k.type){case"log":return k.p2d(x);case"date":return k.p2r(x,0,k.calendar);default:return k.p2r(x)}}$.exports={p2r:g,r2p:function(k,x){switch(k.type){case"log":return k.d2p(x);case"date":return k.r2p(x,0,k.calendar);default:return k.r2p(x)}},axValue:function(k){var x="y"===k._id.charAt(0)?1:0;return function(e){return g(k,e[x])}},getTransform:function(k){return m(k.xaxis._offset,k.yaxis._offset)}}},{"../../lib":515}],455:[function(v,$,Q){"use strict";var m=v("./draw"),g=v("./select");$.exports={moduleType:"component",name:"selections",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),supplyDrawNewSelectionDefaults:v("./draw_newselection/defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("selections"),draw:m.draw,drawOne:m.drawOne,reselect:g.reselect,prepSelect:g.prepSelect,clearOutline:g.clearOutline,clearSelectionsCache:g.clearSelectionsCache,selectOnClick:g.selectOnClick}},{"../../plots/cartesian/include_components":577,"./attributes":447,"./defaults":449,"./draw":450,"./draw_newselection/defaults":452,"./select":456}],456:[function(v,$,Q){"use strict";var m=v("polybooljs"),g=v("point-in-polygon/nested"),k=v("../../registry"),x=v("../drawing").dashStyle,e=v("../color"),n=v("../fx"),i=v("../fx/helpers").makeEventData,l=v("../dragelement/helpers"),r=l.freeMode,d=l.rectMode,f=l.drawMode,t=l.openMode,h=l.selectMode,s=v("../shapes/helpers"),o=v("../shapes/constants"),p=v("../shapes/display_outlines"),c=v("../shapes/handle_outline").clearOutline,a=v("../shapes/draw_newshape/helpers"),y=a.handleEllipse,u=a.readPaths,_=v("../shapes/draw_newshape/newshapes"),b=v("./draw_newselection/newselections"),w=v("./draw").activateLastSelection,T=v("../../lib"),C=T.sorterAsc,M=v("../../lib/polygon"),I=v("../../lib/throttle"),P=v("../../plots/cartesian/axis_ids").getFromId,S=v("../../lib/clear_gl_canvases"),E=v("../../plot_api/subroutines").redrawReglTraces,R=v("./constants"),D=R.MINSELECT,j=M.filter,H=M.tester,Y=v("./helpers"),X=Y.p2r,Z=Y.axValue,W=Y.getTransform;function re(Oe){return void 0!==Oe.subplot}function U(Oe,Xe,Fe,Pe,Re,qe,Qe){var ct,bt,Tt,_t,nt,Ke,xt,Ht,Zt,be,$t=Xe._hoverdata,Xt=Xe._fullLayout.clickmode.indexOf("event")>-1,cr=[];if((be=$t)&&Array.isArray(be)&&!0!==be[0].hoverOnBox){N(Oe,Xe,qe);var Ft=function(be,ze){var Ve,Je,Ye=be[0],lt=-1,st=[];for(Je=0;Je<ze.length;Je++)if(Ye.fullData._expandedIndex===(Ve=ze[Je]).cd[0].trace._expandedIndex){if(!0===Ye.hoverOnBox)break;void 0!==Ye.pointNumber?lt=Ye.pointNumber:void 0!==Ye.binNumber&&(lt=Ye.binNumber,st=Ye.pointNumbers);break}return{pointNumber:lt,pointNumbers:st,searchInfo:Ve}}($t,ct=te(Xe,Fe,Pe,Re));if(Ft.pointNumbers.length>0?function(be,ze){var Ve,Je,Ye,lt=[];for(Ye=0;Ye<be.length;Ye++)(Ve=be[Ye]).cd[0].trace.selectedpoints&&Ve.cd[0].trace.selectedpoints.length>0&&lt.push(Ve);if(1===lt.length&&lt[0]===ze.searchInfo&&(Je=ze.searchInfo.cd[0].trace).selectedpoints.length===ze.pointNumbers.length){for(Ye=0;Ye<ze.pointNumbers.length;Ye++)if(Je.selectedpoints.indexOf(ze.pointNumbers[Ye])<0)return!1;return!0}return!1}(ct,Ft):function(be){var Ve,Je,Ye=0;for(Je=0;Je<be.length;Je++)if((Ve=be[Je].cd[0].trace).selectedpoints&&(Ve.selectedpoints.length>1||(Ye+=Ve.selectedpoints.length)>1))return!1;return 1===Ye}(ct)&&(Ke=le(Ft))){for(Qe&&Qe.remove(),Zt=0;Zt<ct.length;Zt++)(bt=ct[Zt])._module.selectPoints(bt,!1);se(Xe,ct),K(qe),Xt&&Ie(Xe)}else{for(xt=Oe.shiftKey&&(void 0!==Ke?Ke:le(Ft)),Tt=function(be,ze,Ve){return{pointNumber:be,searchInfo:ze,subtract:!!Ve}}(Ft.pointNumber,Ft.searchInfo,xt),_t=ee(qe.selectionDefs.concat([Tt])),Zt=0;Zt<ct.length;Zt++)if(nt=ue(ct[Zt]._module.selectPoints(ct[Zt],_t),ct[Zt]),cr.length)for(var Be=0;Be<nt.length;Be++)cr.push(nt[Be]);else cr=nt;if(se(Xe,ct,Ht={points:cr}),Tt&&qe&&qe.selectionDefs.push(Tt),Qe){var He=qe.mergedPolygons,he=t(qe.dragmode);p(ye(He,he),Qe,qe)}Xt&&De(Xe,Ht)}}}function B(Oe){return"pointNumber"in Oe&&"searchInfo"in Oe}function V(Oe){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Xe,Fe,Pe,Re){return Re.cd[0].trace._expandedIndex===Oe.searchInfo.cd[0].trace._expandedIndex&&Pe===Oe.pointNumber},isRect:!1,degenerate:!1,subtract:!!Oe.subtract}}function ee(Oe){if(Oe.length){for(var Xe=[],Fe=B(Oe[0])?0:Oe[0][0][0],Pe=Fe,Re=B(Oe[0])?0:Oe[0][0][1],qe=Re,Qe=0;Qe<Oe.length;Qe++)if(B(Oe[Qe]))Xe.push(V(Oe[Qe]));else{var ct=H(Oe[Qe]);ct.subtract=!!Oe[Qe].subtract,Xe.push(ct),Fe=Math.min(Fe,ct.xmin),Pe=Math.max(Pe,ct.xmax),Re=Math.min(Re,ct.ymin),qe=Math.max(qe,ct.ymax)}return{xmin:Fe,xmax:Pe,ymin:Re,ymax:qe,pts:[],contains:function(bt,Tt,_t,nt){for(var Ke=!1,xt=0;xt<Xe.length;xt++)Xe[xt].contains(bt,Tt,_t,nt)&&(Ke=!Xe[xt].subtract);return Ke},isRect:!1,degenerate:!1}}}function N(Oe,Xe,Fe){var Pe=Xe._fullLayout,Re=Fe.plotinfo,qe=Fe.dragmode,Qe=Pe._lastSelectedSubplot&&Pe._lastSelectedSubplot===Re.id,ct=(Oe.shiftKey||Oe.altKey)&&!(f(qe)&&t(qe));Qe&&ct&&Re.selection&&Re.selection.selectionDefs&&!Fe.selectionDefs?(Fe.selectionDefs=Re.selection.selectionDefs,Fe.mergedPolygons=Re.selection.mergedPolygons):ct&&Re.selection||K(Fe),Qe||(c(Xe),Pe._lastSelectedSubplot=Re.id)}function K(Oe,Xe){var Fe=Oe.dragmode,Pe=Oe.plotinfo,Re=Oe.gd;Re._fullLayout._activeShapeIndex>=0&&Re._fullLayout._deactivateShape(Re),Re._fullLayout._activeSelectionIndex>=0&&Re._fullLayout._deactivateSelection(Re);var qe=Re._fullLayout._zoomlayer,Qe=f(Fe),ct=h(Fe);if(Qe||ct){var bt,Tt,_t=qe.selectAll(".select-outline-"+Pe.id);_t&&Re._fullLayout._outlining&&(Qe&&(bt=_(_t,Oe)),bt&&k.call("_guiRelayout",Re,{shapes:bt}),ct&&!re(Oe)&&(Tt=b(_t,Oe)),Tt&&(Re._fullLayout._noEmitSelectedAtStart=!0,k.call("_guiRelayout",Re,{selections:Tt}).then(function(){Xe&&w(Re)})),Re._fullLayout._outlining=!1)}Pe.selection={},Pe.selection.selectionDefs=Oe.selectionDefs=[],Pe.selection.mergedPolygons=Oe.mergedPolygons=[]}function J(Oe){return Oe._id}function te(Oe,Xe,Fe,Pe){if(!Oe.calcdata)return[];var Re,qe,Qe,ct=[],bt=Xe.map(J),Tt=Fe.map(J);for(Qe=0;Qe<Oe.calcdata.length;Qe++)if(!0===(qe=(Re=Oe.calcdata[Qe])[0].trace).visible&&qe._module&&qe._module.selectPoints)if(!re({subplot:Pe})||qe.subplot!==Pe&&qe.geo!==Pe)if("splom"===qe.type){if(qe._xaxes[bt[0]]&&qe._yaxes[Tt[0]]){var _t=ae(qe._module,Re,Xe[0],Fe[0]);_t.scene=Oe._fullLayout._splomScenes[qe.uid],ct.push(_t)}}else if("sankey"===qe.type){var nt=ae(qe._module,Re,Xe[0],Fe[0]);ct.push(nt)}else{if(-1===bt.indexOf(qe.xaxis)||-1===Tt.indexOf(qe.yaxis))continue;ct.push(ae(qe._module,Re,P(Oe,qe.xaxis),P(Oe,qe.yaxis)))}else ct.push(ae(qe._module,Re,Xe[0],Fe[0]));return ct}function ae(Oe,Xe,Fe,Pe){return{_module:Oe,cd:Xe,xaxis:Fe,yaxis:Pe}}function le(Oe){var Xe=Oe.searchInfo.cd[0].trace,Pe=Oe.pointNumbers;return!!Xe.selectedpoints&&Xe.selectedpoints.indexOf(Pe.length>0?Pe[0]:Oe.pointNumber)>-1}function se(Oe,Xe,Fe){var Pe,Re;for(Pe=0;Pe<Xe.length;Pe++){var qe=Xe[Pe].cd[0].trace._fullInput,Qe=Oe._fullLayout._tracePreGUI[qe.uid]||{};void 0===Qe.selectedpoints&&(Qe.selectedpoints=qe._input.selectedpoints||null)}if(Fe){var ct=Fe.points||[];for(Pe=0;Pe<Xe.length;Pe++)(Re=Xe[Pe].cd[0].trace)._input.selectedpoints=Re._fullInput.selectedpoints=[],Re._fullInput!==Re&&(Re.selectedpoints=[]);for(var bt=0;bt<ct.length;bt++){var Tt=ct[bt],_t=Tt.data,nt=Tt.fullData,Ke=Tt.pointIndex,xt=Tt.pointIndices;xt?([].push.apply(_t.selectedpoints,xt),Re._fullInput!==Re&&[].push.apply(nt.selectedpoints,xt)):(_t.selectedpoints.push(Ke),Re._fullInput!==Re&&nt.selectedpoints.push(Ke))}}else for(Pe=0;Pe<Xe.length;Pe++)delete(Re=Xe[Pe].cd[0].trace).selectedpoints,delete Re._input.selectedpoints,Re._fullInput!==Re&&delete Re._fullInput.selectedpoints;!function(Ht,Zt){for(var $t=!1,Xt=0;Xt<Zt.length;Xt++){var cr=Zt[Xt],Ft=cr.cd;k.traceIs(Ft[0].trace,"regl")&&($t=!0);var Be=cr._module,He=Be.styleOnSelect||Be.style;He&&(He(Ht,Ft,Ft[0].node3),Ft[0].nodeRangePlot3&&He(Ht,Ft,Ft[0].nodeRangePlot3))}$t&&(S(Ht),E(Ht))}(Oe,Xe)}function ve(Oe,Xe,Fe){for(var Pe=(Fe?m.difference:m.union)({regions:Oe},{regions:[Xe]}).regions.reverse(),Re=0;Re<Pe.length;Re++){var qe=Pe[Re];qe.subtract=de(qe,Pe.slice(0,Re))}return Pe}function ue(Oe,Xe){if(Array.isArray(Oe))for(var Fe=Xe.cd,Pe=Xe.cd[0].trace,Re=0;Re<Oe.length;Re++)Oe[Re]=i(Oe[Re],Pe,Fe);return Oe}function ye(Oe,Xe){for(var Fe=[],Pe=0;Pe<Oe.length;Pe++){Fe[Pe]=[];for(var Re=0;Re<Oe[Pe].length;Re++){Fe[Pe][Re]=[],Fe[Pe][Re][0]=Re?"L":"M";for(var qe=0;qe<Oe[Pe][Re].length;qe++)Fe[Pe][Re].push(Oe[Pe][Re][qe])}Xe||Fe[Pe].push(["Z",Fe[Pe][0][1],Fe[Pe][0][2]])}return Fe}function Me(Oe,Xe){for(var Fe,Pe,Re=[],qe=[],Qe=0;Qe<Xe.length;Qe++){var ct=Xe[Qe];Pe=ct._module.selectPoints(ct,Oe),qe.push(Pe),Fe=ue(Pe,ct),Re=Re.concat(Fe)}return Re}function pe(Oe,Xe,Fe,Pe,Re){var qe,Qe,ct,bt=!!Pe;Re&&(qe=Re.plotinfo,Qe=Re.xaxes[0]._id,ct=Re.yaxes[0]._id);var Tt=[],_t=[],nt=oe(Oe),Ke=Oe._fullLayout;if(qe){var xt=Ke._zoomlayer,Ht=Ke.dragmode,Zt=f(Ht),$t=h(Ht);if(Zt||$t){var Xt=P(Oe,Qe,"x"),cr=P(Oe,ct,"y");if(Xt&&cr){var Ft=xt.selectAll(".select-outline-"+qe.id);if(Ft&&Oe._fullLayout._outlining&&Ft.length){for(var Be=Ft[0][0].getAttribute("d"),He=u(Be,Oe,qe),he=[],be=0;be<He.length;be++){for(var ze=He[be],Ve=[],Je=0;Je<ze.length;Je++)Ve.push([Te(Xt,ze[Je][1]),Te(cr,ze[Je][2])]);Ve.xref=Qe,Ve.yref=ct,Ve.subtract=de(Ve,he),he.push(Ve)}nt=nt.concat(he)}}}}var Ye=Qe&&ct?[Qe+ct]:Ke._subplots.cartesian;!function(zr){var Hr=zr.calcdata;if(Hr)for(var Xr=0;Xr<Hr.length;Xr++){var an=zr._fullLayout._splomScenes;if(an){var Nn=an[Hr[Xr][0].trace.uid];Nn&&(Nn.selectBatch=[])}}}(Oe);for(var lt={},st=0;st<Ye.length;st++){var Mt=Ye[st],Dt=Mt.indexOf("y"),ht=Mt.slice(0,Dt),mt=Mt.slice(Dt),Ot=Qe&&ct?Fe:void 0;if(Ot=we(nt,ht,mt,Ot)){var At=Pe;if(!bt){var It=P(Oe,ht,"x"),Se=P(Oe,mt,"y");At=te(Oe,[It],[Se],Mt);for(var Ze=0;Ze<At.length;Ze++){var it=At[Ze],dt=it.cd[0],Ct=dt.trace;if("scattergl"===it._module.name&&!dt.t.xpx){var Ut=Ct.x,Jt=Ct.y,qt=Ct._length;dt.t.xpx=[],dt.t.ypx=[];for(var pr=0;pr<qt;pr++)dt.t.xpx[pr]=It.c2p(Ut[pr]),dt.t.ypx[pr]=Se.c2p(Jt[pr])}"splom"===it._module.name&&(lt[Ct.uid]||(lt[Ct.uid]=!0))}}var Sr=Me(Ot,At);Tt=Tt.concat(Sr),_t=_t.concat(At)}}var mr={points:Tt};se(Oe,_t,mr);var tr=Ke.clickmode.indexOf("event")>-1&&Xe;if(!qe&&Xe){var rr=oe(Oe,!0);if(rr.length){var ar=rr[0].xref,dr=rr[0].yref;if(ar&&dr){var xr=Ee(rr);Ae([P(Oe,ar,"x"),P(Oe,dr,"y")])(mr,xr)}}Oe._fullLayout._noEmitSelectedAtStart?Oe._fullLayout._noEmitSelectedAtStart=!1:tr&&De(Oe,mr),Ke._reselect=!1}if(!qe&&Ke._deselect){var Lr=Ke._deselect;(function(zr,Hr,Xr){for(var cn=0;cn<Xr.length;cn++){var an=Xr[cn];if(an.xaxis&&an.xaxis._id===zr&&an.yaxis&&an.yaxis._id===Hr)return!0}return!1})(Qe=Lr.xref,ct=Lr.yref,_t)||ge(Oe,Qe,ct,Pe),tr&&(mr.points.length?De(Oe,mr):Ie(Oe)),Ke._deselect=!1}return{eventData:mr,selectionTesters:Fe}}function ge(Oe,Xe,Fe,Pe){Pe=te(Oe,[P(Oe,Xe,"x")],[P(Oe,Fe,"y")],Xe+Fe);for(var Re=0;Re<Pe.length;Re++){var qe=Pe[Re];qe._module.selectPoints(qe,!1)}se(Oe,Pe)}function we(Oe,Xe,Fe,Pe){for(var Re,qe=0;qe<Oe.length;qe++){var Qe=Oe[qe];Xe===Qe.xref&&Fe===Qe.yref&&(Re?Pe=ee(Re=ve(Re,Qe,!!Qe.subtract)):(Re=[Qe],Pe=H(Qe)))}return Pe}function oe(Oe,Xe){for(var Fe=[],Pe=Oe._fullLayout,Re=Pe.selections,qe=Re.length,Qe=0;Qe<qe;Qe++)if(!Xe||Qe===Pe._activeSelectionIndex){var ct=Re[Qe];if(ct){var bt,Tt,_t,nt,Ke,xt=ct.xref,Ht=ct.yref,Zt=P(Oe,xt,"x"),$t=P(Oe,Ht,"y");if("rect"===ct.type){Ke=[];var Xt=Te(Zt,ct.x0),cr=Te(Zt,ct.x1),Ft=Te($t,ct.y0),Be=Te($t,ct.y1);Ke=[[Xt,Ft],[Xt,Be],[cr,Be],[cr,Ft]],bt=Math.min(Xt,cr),Tt=Math.max(Xt,cr),_t=Math.min(Ft,Be),nt=Math.max(Ft,Be),Ke.xmin=bt,Ke.xmax=Tt,Ke.ymin=_t,Ke.ymax=nt,Ke.xref=xt,Ke.yref=Ht,Ke.subtract=!1,Ke.isRect=!0,Fe.push(Ke)}else if("path"===ct.type)for(var He=ct.path.split("Z"),he=[],be=0;be<He.length;be++){var ze=He[be];if(ze){var Ve=s.extractPathCoords(ze+="Z",o.paramIsX,"raw"),Je=s.extractPathCoords(ze,o.paramIsY,"raw");bt=1/0,Tt=-1/0,_t=1/0,nt=-1/0,Ke=[];for(var Ye=0;Ye<Ve.length;Ye++){var lt=Te(Zt,Ve[Ye]),st=Te($t,Je[Ye]);Ke.push([lt,st]),bt=Math.min(lt,bt),Tt=Math.max(lt,Tt),_t=Math.min(st,_t),nt=Math.max(st,nt)}Ke.xmin=bt,Ke.xmax=Tt,Ke.ymin=_t,Ke.ymax=nt,Ke.xref=xt,Ke.yref=Ht,Ke.subtract=de(Ke,he),he.push(Ke),Fe.push(Ke)}}}}return Fe}function de(Oe,Xe){for(var Fe=!1,Pe=0;Pe<Xe.length;Pe++)for(var Re=Xe[Pe],qe=0;qe<Oe.length;qe++)if(g(Oe[qe],Re)){Fe=!Fe;break}return Fe}function Te(Oe,Xe){return"date"===Oe.type&&(Xe=Xe.replace("_"," ")),"log"===Oe.type?Oe.c2p(Xe):Oe.r2p(Xe,null,Oe.calendar)}function Ee(Oe){for(var Xe=Oe.length,Fe=[],Pe=0;Pe<Xe;Pe++){var Re=Oe[Pe];Fe=(Fe=Fe.concat(Re)).concat([Re[0]])}return(qe=Fe).isRect=5===qe.length&&qe[0][0]===qe[4][0]&&qe[0][1]===qe[4][1]&&qe[0][0]===qe[1][0]&&qe[2][0]===qe[3][0]&&qe[0][1]===qe[3][1]&&qe[1][1]===qe[2][1]||qe[0][1]===qe[1][1]&&qe[2][1]===qe[3][1]&&qe[0][0]===qe[3][0]&&qe[1][0]===qe[2][0],qe.isRect&&(qe.xmin=Math.min(qe[0][0],qe[2][0]),qe.xmax=Math.max(qe[0][0],qe[2][0]),qe.ymin=Math.min(qe[0][1],qe[2][1]),qe.ymax=Math.max(qe[0][1],qe[2][1])),qe;var qe}function Ae(Oe){return function(Xe,Fe){for(var Pe,Re,qe=0;qe<Oe.length;qe++){var Qe=Oe[qe],ct=Qe._id,bt=ct.charAt(0);if(Fe.isRect){Pe||(Pe={});var Tt=Fe[bt+"min"],_t=Fe[bt+"max"];void 0!==Tt&&void 0!==_t&&(Pe[ct]=[X(Qe,Tt),X(Qe,_t)].sort(C))}else Re||(Re={}),Re[ct]=Fe.map(Z(Qe))}Pe&&(Xe.range=Pe),Re&&(Xe.lassoPoints=Re)}}function De(Oe,Xe){Xe&&(Xe.selections=(Oe.layout||{}).selections||[]),Oe.emit("plotly_selected",Xe)}function Ie(Oe){Oe.emit("plotly_deselect",null)}$.exports={reselect:pe,prepSelect:function(Oe,Xe,Fe,Pe,Re){var qe=!re(Pe),Qe=r(Re),ct=d(Re),bt=t(Re),Tt=f(Re),_t=h(Re),nt="drawcircle"===Re,Ke="drawline"===Re||nt,xt=Pe.gd,Ht=xt._fullLayout,Zt=_t&&"immediate"===Ht.newselection.mode&&qe,$t=Ht._zoomlayer,Xt=Pe.element.getBoundingClientRect(),cr=Pe.plotinfo,Ft=W(cr),Be=Xe-Xt.left,He=Fe-Xt.top;Ht._calcInverseTransform(xt);var be,ze,Ve,Je,Ye,lt,st,he=T.apply3DTransform(Ht._invTransform)(Be,He),Mt=Ht._invScaleX,Dt=Ht._invScaleY,ht=Be=he[0],mt=He=he[1],Ot="M"+Be+","+He,At=Pe.xaxes[0],It=Pe.yaxes[0],Se=At._length,Ze=It._length,it=Oe.altKey&&!(f(Re)&&bt);N(Oe,xt,Pe),Qe&&(be=j([[Be,He]],R.BENDPX));var dt=$t.selectAll("path.select-outline-"+cr.id).data([1]),Ct=Tt?Ht.newshape:Ht.newselection,Ut=Tt&&!bt?Ct.fillcolor:"rgba(0,0,0,0)",Jt=Ct.line.color||(qe?e.contrast(xt._fullLayout.plot_bgcolor):"#7f7f7f");dt.enter().append("path").attr("class","select-outline select-outline-"+cr.id).style({opacity:Tt?Ct.opacity/2:1,"stroke-dasharray":x(Ct.line.dash,Ct.line.width),"stroke-width":Ct.line.width+"px","shape-rendering":"crispEdges"}).call(e.stroke,Jt).call(e.fill,Ut).attr("fill-rule","evenodd").classed("cursor-move",!!Tt).attr("transform",Ft).attr("d",Ot+"Z");var qt=$t.append("path").attr("class","zoombox-corners").style({fill:e.background,stroke:e.defaultLine,"stroke-width":1}).attr("transform",Ft).attr("d","M0,0Z"),pr=Ht._uid+R.SELECTID,Sr=[],mr=te(xt,Pe.xaxes,Pe.yaxes,Pe.subplot);Zt&&!Oe.shiftKey&&(Pe._clearSubplotSelections=function(){if(qe){var rr=At._id,ar=It._id;ge(xt,rr,ar,mr);for(var dr=(xt.layout||{}).selections||[],xr=[],Lr=!1,zr=0;zr<dr.length;zr++){var Hr=Ht.selections[zr];Hr.xref!==rr||Hr.yref!==ar?xr.push(dr[zr]):Lr=!0}Lr&&(xt._fullLayout._noEmitSelectedAtStart=!0,k.call("_guiRelayout",xt,{selections:xr}))}});var rr,tr=(rr=Pe).plotinfo.fillRangeItems||Ae(rr.xaxes.concat(rr.yaxes));Pe.moveFn=function(rr,ar){Pe._clearSubplotSelections&&(Pe._clearSubplotSelections(),Pe._clearSubplotSelections=void 0),ht=Math.max(0,Math.min(Se,Mt*rr+Be)),mt=Math.max(0,Math.min(Ze,Dt*ar+He));var dr=Math.abs(ht-Be),xr=Math.abs(mt-He);if(ct){var Lr,zr,Hr;if(_t){var Xr=Ht.selectdirection;switch(Lr="any"===Xr?xr<Math.min(.6*dr,D)?"h":dr<Math.min(.6*xr,D)?"v":"d":Xr){case"h":zr=nt?Ze/2:0,Hr=Ze;break;case"v":zr=nt?Se/2:0,Hr=Se}}if(Tt)switch(Ht.newshape.drawdirection){case"vertical":Lr="h",zr=nt?Ze/2:0,Hr=Ze;break;case"horizontal":Lr="v",zr=nt?Se/2:0,Hr=Se;break;case"ortho":dr<xr?(Lr="h",zr=He,Hr=mt):(Lr="v",zr=Be,Hr=ht);break;default:Lr="d"}"h"===Lr?((Je=Ke?y(nt,[ht,zr],[ht,Hr]):[[Be,zr],[Be,Hr],[ht,Hr],[ht,zr]]).xmin=Ke?ht:Math.min(Be,ht),Je.xmax=Ke?ht:Math.max(Be,ht),Je.ymin=Math.min(zr,Hr),Je.ymax=Math.max(zr,Hr),qt.attr("d","M"+Je.xmin+","+(He-D)+"h-4v"+2*D+"h4ZM"+(Je.xmax-1)+","+(He-D)+"h4v"+2*D+"h-4Z")):"v"===Lr?((Je=Ke?y(nt,[zr,mt],[Hr,mt]):[[zr,He],[zr,mt],[Hr,mt],[Hr,He]]).xmin=Math.min(zr,Hr),Je.xmax=Math.max(zr,Hr),Je.ymin=Ke?mt:Math.min(He,mt),Je.ymax=Ke?mt:Math.max(He,mt),qt.attr("d","M"+(Be-D)+","+Je.ymin+"v-4h"+2*D+"v4ZM"+(Be-D)+","+(Je.ymax-1)+"v4h"+2*D+"v-4Z")):"d"===Lr&&((Je=Ke?y(nt,[Be,He],[ht,mt]):[[Be,He],[Be,mt],[ht,mt],[ht,He]]).xmin=Math.min(Be,ht),Je.xmax=Math.max(Be,ht),Je.ymin=Math.min(He,mt),Je.ymax=Math.max(He,mt),qt.attr("d","M0,0Z"))}else Qe&&(be.addPt([ht,mt]),Je=be.filtered);if(Pe.selectionDefs&&Pe.selectionDefs.length?(Ve=ve(Pe.mergedPolygons,Je,it),Je.subtract=it,ze=ee(Pe.selectionDefs.concat([Je]))):(Ve=[Je],ze=H(Je)),p(ye(Ve,bt),dt,Pe),_t){var cn,an=pe(xt,!1),Nn=an.eventData?an.eventData.points.slice():[];an=pe(xt,!1,ze,mr,Pe),ze=an.selectionTesters,st=an.eventData,cn=be?be.filtered:Ee(Ve),I.throttle(pr,R.SELECTDELAY,function(){for(var on=(Sr=Me(ze,mr)).slice(),wn=0;wn<Nn.length;wn++){for(var An=Nn[wn],ii=!1,Vr=0;Vr<on.length;Vr++)if(on[Vr].curveNumber===An.curveNumber&&on[Vr].pointNumber===An.pointNumber){ii=!0;break}ii||on.push(An)}on.length&&(st||(st={}),st.points=on),tr(st,cn),xt.emit("plotly_selecting",st)})}},Pe.clickFn=function(rr,ar){if(qt.remove(),xt._fullLayout._activeShapeIndex>=0)xt._fullLayout._deactivateShape(xt);else if(!Tt){var dr=Ht.clickmode;I.done(pr).then(function(){if(I.clear(pr),2===rr){for(dt.remove(),Ye=0;Ye<mr.length;Ye++)(lt=mr[Ye])._module.selectPoints(lt,!1);if(se(xt,mr),K(Pe),Ie(xt),mr.length){var xr=mr[0].xaxis,Lr=mr[0].yaxis;if(xr&&Lr){for(var zr=[],Hr=xt._fullLayout.selections,Xr=0;Xr<Hr.length;Xr++){var cn=Hr[Xr];cn&&(cn.xref===xr._id&&cn.yref===Lr._id||zr.push(cn))}zr.length<Hr.length&&(xt._fullLayout._noEmitSelectedAtStart=!0,k.call("_guiRelayout",xt,{selections:zr}))}}}else dr.indexOf("select")>-1&&U(ar,xt,Pe.xaxes,Pe.yaxes,Pe.subplot,Pe,dt),"event"===dr&&De(xt,void 0);n.click(xt,ar)}).catch(T.error)}},Pe.doneFn=function(){qt.remove(),I.done(pr).then(function(){I.clear(pr),!Zt&&Je&&Pe.selectionDefs&&(Je.subtract=it,Pe.selectionDefs.push(Je),Pe.mergedPolygons.length=0,[].push.apply(Pe.mergedPolygons,Ve)),(Zt||Tt)&&K(Pe,Zt),Pe.doneFnCompleted&&Pe.doneFnCompleted(Sr),_t&&De(xt,st)}).catch(T.error)}},clearOutline:c,clearSelectionsCache:K,selectOnClick:U}},{"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/polygon":527,"../../lib/throttle":542,"../../plot_api/subroutines":556,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../color":367,"../dragelement/helpers":385,"../drawing":389,"../fx":407,"../fx/helpers":403,"../shapes/constants":459,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/draw_newshape/newshapes":467,"../shapes/handle_outline":468,"../shapes/helpers":469,"./constants":448,"./draw":450,"./draw_newselection/newselections":453,"./helpers":454,"point-in-polygon/nested":254,polybooljs:255}],457:[function(v,$,Q){"use strict";var m=v("../annotations/attributes"),g=v("../../traces/scatter/attributes").line,k=v("../drawing/attributes").dash,x=v("../../lib/extend").extendFlat,e=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),$.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:x({},m.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:x({},m.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:x({},g.color,{editType:"arraydraw"}),width:x({},g.width,{editType:"calc+arraydraw"}),dash:x({},k,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],458:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/cartesian/axes"),k=v("./constants"),x=v("./helpers");function e(r){return i(r.line.width,r.xsizemode,r.x0,r.x1,r.path,!1)}function n(r){return i(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function i(r,d,f,t,h,s){var o=r/2,p=s;if("pixel"===d){var c=h?x.extractPathCoords(h,s?k.paramIsY:k.paramIsX):[f,t],a=m.aggNums(Math.max,null,c),y=m.aggNums(Math.min,null,c),u=y<0?Math.abs(y)+o:o,_=a>0?a+o:o;return{ppad:o,ppadplus:p?u:_,ppadminus:p?_:u}}return{ppad:o}}function l(r,d,f,t,h){var s="category"===r.type||"multicategory"===r.type?r.r2c:r.d2c;if(void 0!==d)return[s(d),s(f)];if(t){var o,p,c,a,y=1/0,u=-1/0,_=t.match(k.segmentRE);for("date"===r.type&&(s=x.decodeDate(s)),o=0;o<_.length;o++)void 0!==(p=h[_[o].charAt(0)].drawn)&&(!(c=_[o].substr(1).match(k.paramRE))||c.length<p||((a=s(c[p]))<y&&(y=a),a>u&&(u=a)));return u>=y?[y,u]:void 0}}$.exports=function(r){var f=m.filterVisible(r._fullLayout.shapes);if(f.length&&r._fullData.length)for(var t=0;t<f.length;t++){var h,s,o=f[t];o._extremes={};var p=g.getRefType(o.xref),c=g.getRefType(o.yref);if("paper"!==o.xref&&"domain"!==p){var a="pixel"===o.xsizemode?o.xanchor:o.x0,y="pixel"===o.xsizemode?o.xanchor:o.x1;(s=l(h=g.getFromId(r,o.xref),a,y,o.path,k.paramIsX))&&(o._extremes[h._id]=g.findExtremes(h,s,e(o)))}if("paper"!==o.yref&&"domain"!==c){var u="pixel"===o.ysizemode?o.yanchor:o.y0,_="pixel"===o.ysizemode?o.yanchor:o.y1;(s=l(h=g.getFromId(r,o.yref),u,_,o.path,k.paramIsY))&&(o._extremes[h._id]=g.findExtremes(h,s,n(o)))}}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459,"./helpers":469}],459:[function(v,$,Q){"use strict";$.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],460:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/cartesian/axes"),k=v("../../plots/array_container_defaults"),x=v("./attributes"),e=v("./helpers");function n(i,l,r){function d(E,R){return m.coerce(i,l,x,E,R)}if(d("visible")){var f=d("path"),t="path"!==d("type",f?"path":"rect");t&&delete l.path,d("editable"),d("layer"),d("opacity"),d("fillcolor"),d("fillrule"),d("line.width")&&(d("line.color"),d("line.dash"));for(var h=d("xsizemode"),s=d("ysizemode"),o=["x","y"],p=0;p<2;p++){var c,a,y,u=o[p],_=u+"anchor",b="x"===u?h:s,w={_fullLayout:r},T=g.coerceRef(i,l,w,u,void 0,"paper");if("range"===g.getRefType(T)?((c=g.getFromId(w,T))._shapeIndices.push(l._index),y=e.rangeToShapePosition(c),a=e.shapePositionToRange(c)):a=y=m.identity,t){var C=u+"0",M=u+"1",I=i[C],P=i[M];i[C]=a(i[C],!0),i[M]=a(i[M],!0),"pixel"===b?(d(C,0),d(M,10)):(g.coercePosition(l,w,d,T,C,.25),g.coercePosition(l,w,d,T,M,.75)),l[C]=y(l[C]),l[M]=y(l[M]),i[C]=I,i[M]=P}if("pixel"===b){var S=i[_];i[_]=a(i[_],!0),g.coercePosition(l,w,d,T,_,.25),l[_]=y(l[_]),i[_]=S}}t&&m.noneOrAll(i,l,["x0","x1","y0","y1"])}}$.exports=function(i,l){k(i,l,{name:"shapes",handleItemDefaults:n})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":457,"./helpers":469}],461:[function(v,$,Q){"use strict";var m=v("../../lib").strTranslate,g=v("../dragelement"),k=v("../dragelement/helpers"),x=k.drawMode,e=k.selectMode,n=v("../../registry"),i=v("../color"),l=v("./draw_newshape/constants"),r=l.i000,d=l.i090,f=l.i180,t=l.i270,h=v("./handle_outline").clearOutlineControllers,s=v("./draw_newshape/helpers"),o=s.pointsOnRectangle,p=s.pointsOnEllipse,c=s.writePaths,a=v("./draw_newshape/newshapes"),y=v("../selections/draw_newselection/newselections");function u(_,b){var w,T,C,P=_.length;return T=_[w=(b+1)%P][1],C=_[w][2],T===_[b][1]&&C===_[b][2]&&(T=_[w=(b+2)%P][1],C=_[w][2]),[w,T,C]}$.exports=function _(b,w,T,C){C||(C=0);var M=T.gd;function I(){_(b,w,T,C++),p(b[0])&&P({redrawing:!0})}function P(J){var te={};void 0!==T.isActiveShape&&(T.isActiveShape=!1,te=a(w,T)),void 0!==T.isActiveSelection&&(T.isActiveSelection=!1,te=y(w,T),M._fullLayout._reselect=!0),Object.keys(te).length&&n.call((J||{}).redrawing?"relayout":"_guiRelayout",M,te)}var S,E,R,D,j,H=M._fullLayout._zoomlayer,Y=T.dragmode,X=x(Y),Z=e(Y);function W(J){R=+J.srcElement.getAttribute("data-i"),D=+J.srcElement.getAttribute("data-j"),S[R][D].moveFn=re}function re(J,te){if(b.length){var ae=j[R][D][1],le=j[R][D][2],se=b[R],ve=se.length;if(o(se)){var ue=J,ye=te;T.isActiveSelection&&(u(se,D)[1]===se[D][1]?ye=0:ue=0);for(var Me=0;Me<ve;Me++)if(Me!==D){var pe=se[Me];pe[1]===se[D][1]&&(pe[1]=ae+ue),pe[2]===se[D][2]&&(pe[2]=le+ye)}if(se[D][1]=ae+ue,se[D][2]=le+ye,!o(se))for(var ge=0;ge<ve;ge++)for(var we=0;we<se[ge].length;we++)se[ge][we]=j[R][ge][we]}else se[D][1]=ae+J,se[D][2]=le+te;I()}}function U(){P()}function B(J,te){if(2===J){R=+te.srcElement.getAttribute("data-i"),D=+te.srcElement.getAttribute("data-j");var ae=b[R];o(ae)||p(ae)||function(){if(b.length&&b[R]&&b[R].length){for(var le=[],se=0;se<b[R].length;se++)se!==D&&le.push(b[R][se]);le.length>1&&(2!==le.length||"Z"!==le[1][0])&&(0===D&&(le[0][0]="M"),b[R]=le,I(),P())}}()}}function V(J,te){(function(ae,le){if(b.length)for(var se=0;se<b.length;se++)for(var ve=0;ve<b[se].length;ve++)for(var ue=0;ue+2<b[se][ve].length;ue+=2)b[se][ve][ue+1]=j[se][ve][ue+1]+ae,b[se][ve][ue+2]=j[se][ve][ue+2]+le})(J,te),I()}(X||Z)&&(M._fullLayout._outlining=!0),h(M),w.attr("d",c(b)),C||!T.isActiveShape&&!T.isActiveSelection||(j=function(J,te){for(var ae=0;ae<te.length;ae++){var le=te[ae];J[ae]=[];for(var se=0;se<le.length;se++){J[ae][se]=[];for(var ve=0;ve<le[se].length;ve++)J[ae][se][ve]=le[se][ve]}}return J}([],b),function(J){S=[];for(var te=0;te<b.length;te++){var ae=b[te],le=o(ae),se=!le&&p(ae);S[te]=[];for(var ve=ae.length,ue=0;ue<ve;ue++)if("Z"!==ae[ue][0]&&(!se||ue===r||ue===d||ue===f||ue===t)){var ye,Me=le&&T.isActiveSelection;Me&&(ye=u(ae,ue));var pe=ae[ue][1],ge=ae[ue][2],we=J.append(Me?"rect":"circle").attr("data-i",te).attr("data-j",ue).style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Me){var oe=ye[1]-pe,de=ye[2]-ge,Te=de?5:Math.max(Math.min(25,Math.abs(oe)-5),5),Ee=oe?5:Math.max(Math.min(25,Math.abs(de)-5),5);we.classed(de?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Te).attr("height",Ee).attr("x",pe-Te/2).attr("y",ge-Ee/2).attr("transform",m(oe/2,de/2))}else we.classed("cursor-grab",!0).attr("r",5).attr("cx",pe).attr("cy",ge);S[te][ue]={element:we.node(),gd:M,prepFn:W,doneFn:U,clickFn:B},g.init(S[te][ue])}}}(H.append("g").attr("class","outline-controllers")),E=[],b.length&&(E[0]={element:w[0][0],gd:M,prepFn:function ee(J){(R=+J.srcElement.getAttribute("data-i"))||(R=0),E[R].moveFn=V},doneFn:function N(){P()},clickFn:function K(J){2===J&&function(te){if(e(te._fullLayout.dragmode)){h(te);var ae=te._fullLayout._activeSelectionIndex,le=(te.layout||{}).selections||[];if(ae<le.length){for(var se=[],ve=0;ve<le.length;ve++)ve!==ae&&se.push(le[ve]);delete te._fullLayout._activeSelectionIndex;var ue=te._fullLayout.selections[ae];te._fullLayout._deselect={xref:ue.xref,yref:ue.yref},n.call("_guiRelayout",te,{selections:se})}}}(M)}},g.init(E[0])))}},{"../../lib":515,"../../registry":647,"../color":367,"../dragelement":386,"../dragelement/helpers":385,"../selections/draw_newselection/newselections":453,"./draw_newshape/constants":464,"./draw_newshape/helpers":466,"./draw_newshape/newshapes":467,"./handle_outline":468}],462:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../lib"),k=v("../../plots/cartesian/axes"),x=v("./draw_newshape/helpers").readPaths,e=v("./display_outlines"),n=v("./handle_outline").clearOutlineControllers,i=v("../color"),l=v("../drawing"),r=v("../../plot_api/plot_template").arrayEditor,d=v("../dragelement"),f=v("../../lib/setcursor"),t=v("./constants"),h=v("./helpers"),s=h.getPathString;function o(b){var w=b._fullLayout;for(var T in w._shapeUpperLayer.selectAll("path").remove(),w._shapeLowerLayer.selectAll("path").remove(),w._plots){var C=w._plots[T].shapelayer;C&&C.selectAll("path").remove()}for(var M=0;M<w.shapes.length;M++)w.shapes[M].visible&&a(b,M)}function p(b){return!!b._fullLayout._outlining}function c(b){return!b._context.edits.shapePosition}function a(b,w){b._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+w+'"]').remove();var T=h.makeShapesOptionsAndPlotinfo(b,w),C=T.options,M=T.plotinfo;C._input&&!1!==C.visible&&function I(P){var S=s(b,C),E={"data-index":w,"fill-rule":C.fillrule,d:S},R=C.opacity,D=C.fillcolor,j=C.line.width?C.line.color:"rgba(0,0,0,0)",H=C.line.width,Y=C.line.dash;H||!0!==C.editable||(H=5,Y="solid");var X="Z"!==S[S.length-1],Z=c(b)&&C.editable&&b._fullLayout._activeShapeIndex===w;Z&&(D=X?"rgba(0,0,0,0)":b._fullLayout.activeshape.fillcolor,R=b._fullLayout.activeshape.opacity);var W,re=P.append("path").attr(E).style("opacity",R).call(i.stroke,j).call(i.fill,D).call(l.dashLine,Y,H);if(y(re,b,C),(Z||b._context.edits.shapePosition)&&(W=r(b.layout,"shapes",C)),Z){re.style({cursor:"move"});var U={element:re.node(),plotinfo:M,gd:b,editHelpers:W,isActiveShape:!0},B=x(S,b);e(B,re,U)}else b._context.edits.shapePosition?function(V,ee,N,K,J,te){var ae,le,se,ve,ue,ye,Me,pe,ge,we,oe,de,Te,Ee,Ae,De,Ie="pixel"===N.xsizemode,Oe="pixel"===N.ysizemode,Xe="line"===N.type,Fe="path"===N.type,Pe=te.modifyItem,Re=k.getFromId(V,N.xref),qe=k.getRefType(N.xref),Qe=k.getFromId(V,N.yref),ct=k.getRefType(N.yref),bt=h.getDataToPixel(V,Re,!1,qe),Tt=h.getDataToPixel(V,Qe,!0,ct),_t=h.getPixelToData(V,Re,!1,qe),nt=h.getPixelToData(V,Qe,!0,ct),Ke=Xe?function(){var Ft=Math.max(N.line.width,10),Be=J.append("g").attr("data-index",K);Be.append("path").attr("d",ee.attr("d")).style({cursor:"move","stroke-width":Ft,"stroke-opacity":"0"});var He={"fill-opacity":"0"},he=Math.max(Ft/2,10);return Be.append("circle").attr({"data-line-point":"start-point",cx:Ie?bt(N.xanchor)+N.x0:bt(N.x0),cy:Oe?Tt(N.yanchor)-N.y0:Tt(N.y0),r:he}).style(He).classed("cursor-grab",!0),Be.append("circle").attr({"data-line-point":"end-point",cx:Ie?bt(N.xanchor)+N.x1:bt(N.x1),cy:Oe?Tt(N.yanchor)-N.y1:Tt(N.y1),r:he}).style(He).classed("cursor-grab",!0),Be}():ee,xt={element:Ke.node(),gd:V,prepFn:function(Ft){var Be,He,he,be,ze,Ve,Je,Ye;p(V)||(Ie&&(ue=bt(N.xanchor)),Oe&&(ye=Tt(N.yanchor)),"path"===N.type?Ae=N.path:(ae=Ie?N.x0:bt(N.x0),le=Oe?N.y0:Tt(N.y0),se=Ie?N.x1:bt(N.x1),ve=Oe?N.y1:Tt(N.y1)),ae<se?(ge=ae,Te="x0",we=se,Ee="x1"):(ge=se,Te="x1",we=ae,Ee="x0"),!Oe&&le<ve||Oe&&le>ve?(Me=le,oe="y0",pe=ve,de="y1"):(Me=ve,oe="y1",pe=le,de="y0"),Ht(Ft),Xt(J,N),Be=ee,ze=(He=N).yref,Ve=k.getFromId(he=V,be=He.xref),Je=k.getFromId(he,ze),Ye="","paper"===be||Ve.autorange||(Ye+=be),"paper"===ze||Je.autorange||(Ye+=ze),l.setClipUrl(Be,Ye?"clip"+he._fullLayout._uid+Ye:null,he),xt.moveFn="move"===De?Zt:$t,xt.altKey=Ft.altKey)},doneFn:function(){p(V)||(f(ee),cr(J),y(ee,V,N),m.call("_guiRelayout",V,te.getUpdateObj()))},clickFn:function(){p(V)||cr(J)}};function Ht(Ft){if(p(V))De=null;else if(Xe)De="path"===Ft.target.tagName?"move":"start-point"===Ft.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Be=xt.element.getBoundingClientRect(),He=Be.right-Be.left,he=Be.bottom-Be.top,Ve=!Fe&&He>10&&he>10&&!Ft.shiftKey?d.getCursor((Ft.clientX-Be.left)/He,1-(Ft.clientY-Be.top)/he):"move";f(ee,Ve),De=Ve.split("-")[0]}}function Zt(Ft,Be){if("path"===N.type){var He=function(ze){return ze},he=He,be=He;Ie?Pe("xanchor",N.xanchor=_t(ue+Ft)):(he=function(ze){return _t(bt(ze)+Ft)},Re&&"date"===Re.type&&(he=h.encodeDate(he))),Oe?Pe("yanchor",N.yanchor=nt(ye+Be)):(be=function(ze){return nt(Tt(ze)+Be)},Qe&&"date"===Qe.type&&(be=h.encodeDate(be))),Pe("path",N.path=u(Ae,he,be))}else Ie?Pe("xanchor",N.xanchor=_t(ue+Ft)):(Pe("x0",N.x0=_t(ae+Ft)),Pe("x1",N.x1=_t(se+Ft))),Oe?Pe("yanchor",N.yanchor=nt(ye+Be)):(Pe("y0",N.y0=nt(le+Be)),Pe("y1",N.y1=nt(ve+Be)));ee.attr("d",s(V,N)),Xt(J,N)}function $t(Ft,Be){if(Fe){var He=function(Se){return Se},he=He,be=He;Ie?Pe("xanchor",N.xanchor=_t(ue+Ft)):(he=function(Se){return _t(bt(Se)+Ft)},Re&&"date"===Re.type&&(he=h.encodeDate(he))),Oe?Pe("yanchor",N.yanchor=nt(ye+Be)):(be=function(Se){return nt(Tt(Se)+Be)},Qe&&"date"===Qe.type&&(be=h.encodeDate(be))),Pe("path",N.path=u(Ae,he,be))}else if(Xe){if("resize-over-start-point"===De){var ze=ae+Ft,Ve=Oe?le-Be:le+Be;Pe("x0",N.x0=Ie?ze:_t(ze)),Pe("y0",N.y0=Oe?Ve:nt(Ve))}else if("resize-over-end-point"===De){var Je=se+Ft,Ye=Oe?ve-Be:ve+Be;Pe("x1",N.x1=Ie?Je:_t(Je)),Pe("y1",N.y1=Oe?Ye:nt(Ye))}}else{var lt=function(Se){return-1!==De.indexOf(Se)},st=lt("n"),Mt=lt("s"),Dt=lt("w"),ht=lt("e"),mt=st?Me+Be:Me,Ot=Mt?pe+Be:pe,At=Dt?ge+Ft:ge,It=ht?we+Ft:we;Oe&&(st&&(mt=Me-Be),Mt&&(Ot=pe-Be)),(!Oe&&Ot-mt>10||Oe&&mt-Ot>10)&&(Pe(oe,N[oe]=Oe?mt:nt(mt)),Pe(de,N[de]=Oe?Ot:nt(Ot))),It-At>10&&(Pe(Te,N[Te]=Ie?At:_t(At)),Pe(Ee,N[Ee]=Ie?It:_t(It)))}ee.attr("d",s(V,N)),Xt(J,N)}function Xt(Ft,Be){(Ie||Oe)&&function(){var He="path"!==Be.type,he=Ft.selectAll(".visual-cue").data([0]);he.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var be=bt(Ie?Be.xanchor:g.midRange(He?[Be.x0,Be.x1]:h.extractPathCoords(Be.path,t.paramIsX))),ze=Tt(Oe?Be.yanchor:g.midRange(He?[Be.y0,Be.y1]:h.extractPathCoords(Be.path,t.paramIsY)));be=h.roundPositionForSharpStrokeRendering(be,1),ze=h.roundPositionForSharpStrokeRendering(ze,1),he.attr("d",Ie&&Oe?"M"+(be-1-1)+","+(ze-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":Ie?"M"+(be-1-1)+","+(ze-9-1)+"v18 h2 v-18 Z":"M"+(be-9-1)+","+(ze-1-1)+"h18 v2 h-18 Z")}()}function cr(Ft){Ft.selectAll(".visual-cue").remove()}d.init(xt),Ke.node().onmousemove=Ht}(b,re,C,w,P,W):!0===C.editable&&re.style("pointer-events",X||i.opacity(D)*R<=.5?"stroke":"all");re.node().addEventListener("click",function(){return function(V,ee){if(c(V)){var N=+ee.node().getAttribute("data-index");if(N>=0){if(N===V._fullLayout._activeShapeIndex)return void _(V);V._fullLayout._activeShapeIndex=N,V._fullLayout._deactivateShape=_,o(V)}}}(b,re)})}("below"!==C.layer?b._fullLayout._shapeUpperLayer:"paper"===C.xref||"paper"===C.yref?b._fullLayout._shapeLowerLayer:M._hadPlotinfo?(M.mainplotinfo||M).shapelayer:b._fullLayout._shapeLowerLayer)}function y(b,w,T){var C=(T.xref+T.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");l.setClipUrl(b,C?"clip"+w._fullLayout._uid+C:null,w)}function u(b,w,T){return b.replace(t.segmentRE,function(C){var M=0,I=C.charAt(0),P=t.paramIsX[I],S=t.paramIsY[I],E=t.numParams[I];return I+C.substr(1).replace(t.paramRE,function(R){return M>=E||(P[M]?R=w(R):S[M]&&(R=T(R)),M++),R})})}function _(b){c(b)&&b._fullLayout._activeShapeIndex>=0&&(n(b),delete b._fullLayout._activeShapeIndex,o(b))}$.exports={draw:o,drawOne:a,eraseActiveShape:function(b){if(c(b)){n(b);var w=b._fullLayout._activeShapeIndex,T=(b.layout||{}).shapes||[];if(w<T.length){for(var C=[],M=0;M<T.length;M++)M!==w&&C.push(T[M]);delete b._fullLayout._activeShapeIndex,m.call("_guiRelayout",b,{shapes:C})}}}}},{"../../lib":515,"../../lib/setcursor":536,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":459,"./display_outlines":461,"./draw_newshape/helpers":466,"./handle_outline":468,"./helpers":469}],463:[function(v,$,Q){"use strict";var m=v("../../drawing/attributes").dash,g=v("../../../lib/extend").extendFlat;$.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:g({},m,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],464:[function(v,$,Q){"use strict";$.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],465:[function(v,$,Q){"use strict";var m=v("../../color");$.exports=function(g,k,x){x("newshape.drawdirection"),x("newshape.layer"),x("newshape.fillcolor"),x("newshape.fillrule"),x("newshape.opacity"),x("newshape.line.width")&&(x("newshape.line.color",m.contrast((g||{}).plot_bgcolor||"#FFF")),x("newshape.line.dash")),x("activeshape.fillcolor"),x("activeshape.opacity")}},{"../../color":367}],466:[function(v,$,Q){"use strict";var m=v("parse-svg-path"),g=v("./constants"),k=g.CIRCLE_SIDES,x=g.SQRT2,e=v("../../selections/helpers"),n=e.p2r,i=e.r2p,l=[0,3,4,5,6,1,2],r=[0,3,4,1,2];function d(t,h){return Math.abs(t-h)<=1e-6}function f(t,h){var s=h[1]-t[1],o=h[2]-t[2];return Math.sqrt(s*s+o*o)}Q.writePaths=function(t){var h=t.length;if(!h)return"M0,0Z";for(var s="",o=0;o<h;o++)for(var p=t[o].length,c=0;c<p;c++){var a=t[o][c][0];if("Z"===a)s+="Z";else for(var y=t[o][c].length,u=0;u<y;u++){var _=u;"Q"===a||"S"===a?_=r[u]:"C"===a&&(_=l[u]),s+=t[o][c][_],u>0&&u<y-1&&(s+=",")}}return s},Q.readPaths=function(t,h,s,o){var p,c,a,y=m(t),u=[],_=-1,b=0,w=0,T=function(){c=b,a=w};T();for(var C=0;C<y.length;C++){var E=[],R=y[C][0],D=R;switch(R){case"M":u[++_]=[],E.push([D,b=+y[C][1],w=+y[C][2]]),T();break;case"Q":case"S":E.push([D,b=+y[C][3],w=+y[C][4],+y[C][1],+y[C][2]]);break;case"C":E.push([D,b=+y[C][5],w=+y[C][6],+y[C][1],+y[C][2],+y[C][3],+y[C][4]]);break;case"T":case"L":E.push([D,b=+y[C][1],w=+y[C][2]]);break;case"H":E.push([D="L",b=+y[C][1],w]);break;case"V":E.push([D="L",b,w=+y[C][1]]);break;case"A":D="L";var j=+y[C][1],H=+y[C][2];+y[C][4]||(j=-j,H=-H);var Y=b-j,X=w;for(p=1;p<=k/2;p++){var Z=2*Math.PI*p/k;E.push([D,Y+j*Math.cos(Z),X+H*Math.sin(Z)])}break;case"Z":b===c&&w===a||E.push([D,b=c,w=a])}for(var W=(s||{}).domain,re=h._fullLayout._size,U=s&&"pixel"===s.xsizemode,B=s&&"pixel"===s.ysizemode,V=!1===o,ee=0;ee<E.length;ee++){for(p=0;p+2<7;p+=2){var N=E[ee][p+1],K=E[ee][p+2];void 0!==N&&void 0!==K&&(b=N,w=K,s&&(s.xaxis&&s.xaxis.p2r?(V&&(N-=s.xaxis._offset),N=U?i(s.xaxis,s.xanchor)+N:n(s.xaxis,N)):(V&&(N-=re.l),W?N=W.x[0]+N/re.w:N/=re.w),s.yaxis&&s.yaxis.p2r?(V&&(K-=s.yaxis._offset),K=B?i(s.yaxis,s.yanchor)-K:n(s.yaxis,K)):(V&&(K-=re.t),K=W?W.y[1]-K/re.h:1-K/re.h)),E[ee][p+1]=N,E[ee][p+2]=K)}u[_].push(E[ee].slice())}}return u},Q.pointsOnRectangle=function(t){if(5!==t.length)return!1;for(var h=1;h<3;h++)if(!d(t[0][h]-t[1][h],t[3][h]-t[2][h])||!d(t[0][h]-t[3][h],t[1][h]-t[2][h]))return!1;return!(!d(t[0][1],t[1][1])&&!d(t[0][1],t[3][1])||!(f(t[0],t[1])*f(t[0],t[3])))},Q.pointsOnEllipse=function(t){var h=t.length;if(h!==k+1)return!1;h=k;for(var s=0;s<h;s++){var o=(2*h-s)%h,p=(h/2+o)%h;if(!d(f(t[s],t[(h/2+s)%h]),f(t[o],t[p])))return!1}return!0},Q.handleEllipse=function(t,h,s){if(!t)return[h,s];var o=Q.ellipseOver({x0:h[0],y0:h[1],x1:s[0],y1:s[1]}),p=(o.x1+o.x0)/2,c=(o.y1+o.y0)/2,a=(o.x1-o.x0)/2,y=(o.y1-o.y0)/2;a||(a=y/=x),y||(y=a/=x);for(var u=[],_=0;_<k;_++){var b=2*_*Math.PI/k;u.push([p+a*Math.cos(b),c+y*Math.sin(b)])}return u},Q.ellipseOver=function(t){var h=t.x0,s=t.y0,o=t.x1,p=t.y1,c=o-h,a=p-s,y=((h-=c)+o)/2,u=((s-=a)+p)/2;return{x0:y-(c*=x),y0:u-(a*=x),x1:y+c,y1:u+a}},Q.fixDatesForPaths=function(t,h,s){var o="date"===h.type,p="date"===s.type;if(!o&&!p)return t;for(var c=0;c<t.length;c++)for(var a=0;a<t[c].length;a++)for(var y=0;y+2<t[c][a].length;y+=2)o&&(t[c][a][y+1]=t[c][a][y+1].replace(" ","_")),p&&(t[c][a][y+2]=t[c][a][y+2].replace(" ","_"));return t}},{"../../selections/helpers":454,"./constants":464,"parse-svg-path":250}],467:[function(v,$,Q){"use strict";var m=v("../../dragelement/helpers"),g=m.drawMode,k=m.openMode,x=v("./constants"),e=x.i000,n=x.i090,i=x.i180,l=x.i270,r=x.cos45,d=x.sin45,f=v("../../selections/helpers"),t=f.p2r,h=f.r2p,s=v(".././handle_outline").clearOutline,o=v("./helpers"),p=o.readPaths,c=o.writePaths,a=o.ellipseOver,y=o.fixDatesForPaths;$.exports=function(u,_){if(u.length){var b=u[0][0];if(b){var w=b.getAttribute("d"),T=_.gd,C=T._fullLayout.newshape,M=_.plotinfo,I=M.xaxis,P=M.yaxis,S=!!M.domain||!M.xaxis,E=!!M.domain||!M.yaxis,R=_.isActiveShape,D=_.dragmode,j=(T.layout||{}).shapes||[];if(!g(D)&&void 0!==R){var H=T._fullLayout._activeShapeIndex;if(H<j.length)switch(T._fullLayout.shapes[H].type){case"rect":D="drawrect";break;case"circle":D="drawcircle";break;case"line":D="drawline";break;case"path":var Y=j[H].path||"";D="Z"===Y[Y.length-1]?"drawclosedpath":"drawopenpath"}}var X,Z=k(D),W=p(w,T,M,R),re={editable:!0,xref:S?"paper":I._id,yref:E?"paper":P._id,layer:C.layer,opacity:C.opacity,line:{color:C.line.color,width:C.line.width,dash:C.line.dash}};if(Z||(re.fillcolor=C.fillcolor,re.fillrule=C.fillrule),1===W.length&&(X=W[0]),X&&5===X.length&&"drawrect"===D)re.type="rect",re.x0=X[0][1],re.y0=X[0][2],re.x1=X[2][1],re.y1=X[2][2];else if(X&&"drawline"===D)re.type="line",re.x0=X[0][1],re.y0=X[0][2],re.x1=X[1][1],re.y1=X[1][2];else if(X&&"drawcircle"===D){re.type="circle";var U=X[e][1],B=X[n][1],V=X[i][1],ee=X[l][1],N=X[e][2],K=X[n][2],J=X[i][2],te=X[l][2],ae=M.xaxis&&("date"===M.xaxis.type||"log"===M.xaxis.type),le=M.yaxis&&("date"===M.yaxis.type||"log"===M.yaxis.type);ae&&(U=h(M.xaxis,U),B=h(M.xaxis,B),V=h(M.xaxis,V),ee=h(M.xaxis,ee)),le&&(N=h(M.yaxis,N),K=h(M.yaxis,K),J=h(M.yaxis,J),te=h(M.yaxis,te));var se=(B+ee)/2,ve=(N+J)/2,ue=a({x0:se,y0:ve,x1:se+(ee-B+V-U)/2*r,y1:ve+(te-K+J-N)/2*d});ae&&(ue.x0=t(M.xaxis,ue.x0),ue.x1=t(M.xaxis,ue.x1)),le&&(ue.y0=t(M.yaxis,ue.y0),ue.y1=t(M.yaxis,ue.y1)),re.x0=ue.x0,re.y0=ue.y0,re.x1=ue.x1,re.y1=ue.y1}else re.type="path",I&&P&&y(W,I,P),re.path=c(W),X=null;s(T);for(var ye=_.editHelpers,Me=(ye||{}).modifyItem,pe=[],ge=0;ge<j.length;ge++){var we=T._fullLayout.shapes[ge];if(pe[ge]=we._input,void 0!==R&&ge===T._fullLayout._activeShapeIndex){var oe=re;switch(we.type){case"line":case"rect":case"circle":Me("x0",oe.x0),Me("x1",oe.x1),Me("y0",oe.y0),Me("y1",oe.y1);break;case"path":Me("path",oe.path)}}}return void 0===R?(pe.push(re),pe):ye?ye.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../selections/helpers":454,".././handle_outline":468,"./constants":464,"./helpers":466}],468:[function(v,$,Q){"use strict";$.exports={clearOutlineControllers:function(m){var g=m._fullLayout._zoomlayer;g&&g.selectAll(".outline-controllers").remove()},clearOutline:function(m){var g=m._fullLayout._zoomlayer;g&&g.selectAll(".select-outline").remove(),m._fullLayout._outlining=!1}}},{}],469:[function(v,$,Q){"use strict";var m=v("./constants"),g=v("../../lib"),k=v("../../plots/cartesian/axes");Q.rangeToShapePosition=function(x){return"log"===x.type?x.r2d:function(e){return e}},Q.shapePositionToRange=function(x){return"log"===x.type?x.d2r:function(e){return e}},Q.decodeDate=function(x){return function(e){return e.replace&&(e=e.replace("_"," ")),x(e)}},Q.encodeDate=function(x){return function(e){return x(e).replace(" ","_")}},Q.extractPathCoords=function(x,e,n){var i=[];return x.match(m.segmentRE).forEach(function(l){var r=e[l.charAt(0)].drawn;if(void 0!==r){var d=l.substr(1).match(m.paramRE);if(d&&!(d.length<r)){var f=d[r],t=n?f:g.cleanNumber(f);i.push(t)}}}),i},Q.getDataToPixel=function(x,e,n,i){var l,r=x._fullLayout._size;if(e)if("domain"===i)l=function(f){return e._length*(n?1-f:f)+e._offset};else{var d=Q.shapePositionToRange(e);l=function(f){return e._offset+e.r2p(d(f,!0))},"date"===e.type&&(l=Q.decodeDate(l))}else l=n?function(f){return r.t+r.h*(1-f)}:function(f){return r.l+r.w*f};return l},Q.getPixelToData=function(x,e,n,i){var l,r=x._fullLayout._size;if(e)if("domain"===i)l=function(f){var t=(f-e._offset)/e._length;return n?1-t:t};else{var d=Q.rangeToShapePosition(e);l=function(f){return d(e.p2r(f-e._offset))}}else l=n?function(f){return 1-(f-r.t)/r.h}:function(f){return(f-r.l)/r.w};return l},Q.roundPositionForSharpStrokeRendering=function(x,e){var n=1===Math.round(e%2),i=Math.round(x);return n?i+.5:i},Q.makeShapesOptionsAndPlotinfo=function(x,e){var n=x._fullLayout.shapes[e]||{},i=x._fullLayout._plots[n.xref+n.yref];return i?i._hadPlotinfo=!0:(i={},n.xref&&"paper"!==n.xref&&(i.xaxis=x._fullLayout[n.xref+"axis"]),n.yref&&"paper"!==n.yref&&(i.yaxis=x._fullLayout[n.yref+"axis"])),i.xsizemode=n.xsizemode,i.ysizemode=n.ysizemode,i.xanchor=n.xanchor,i.yanchor=n.yanchor,{options:n,plotinfo:i}},Q.makeSelectionsOptionsAndPlotinfo=function(x,e){var n=x._fullLayout.selections[e]||{},i=x._fullLayout._plots[n.xref+n.yref];return i?i._hadPlotinfo=!0:(i={},n.xref&&(i.xaxis=x._fullLayout[n.xref+"axis"]),n.yref&&(i.yaxis=x._fullLayout[n.yref+"axis"])),{options:n,plotinfo:i}},Q.getPathString=function(x,e){var n,i,l,r,d,f,t,h,P,S,E,D,j,H,Y,s=e.type,o=k.getRefType(e.xref),p=k.getRefType(e.yref),c=k.getFromId(x,e.xref),a=k.getFromId(x,e.yref),y=x._fullLayout._size;if(c?"domain"===o?i=function(P){return c._offset+c._length*P}:(n=Q.shapePositionToRange(c),i=function(P){return c._offset+c.r2p(n(P,!0))}):i=function(P){return y.l+y.w*P},a?"domain"===p?r=function(P){return a._offset+a._length*(1-P)}:(l=Q.shapePositionToRange(a),r=function(P){return a._offset+a.r2p(l(P,!0))}):r=function(P){return y.t+y.h*(1-P)},"path"===s)return c&&"date"===c.type&&(i=Q.decodeDate(i)),a&&"date"===a.type&&(r=Q.decodeDate(r)),S=i,E=r,D=(P=e).xsizemode,j=P.ysizemode,H=P.xanchor,Y=P.yanchor,P.path.replace(m.segmentRE,function(X){var Z=0,W=X.charAt(0),re=m.paramIsX[W],U=m.paramIsY[W],B=m.numParams[W],V=X.substr(1).replace(m.paramRE,function(ee){return re[Z]?ee="pixel"===D?S(H)+Number(ee):S(ee):U[Z]&&(ee="pixel"===j?E(Y)-Number(ee):E(ee)),++Z>B&&(ee="X"),ee});return Z>B&&(V=V.replace(/[\s,]*X.*/,""),g.log("Ignoring extra params in segment "+X)),W+V});if("pixel"===e.xsizemode){var u=i(e.xanchor);d=u+e.x0,f=u+e.x1}else d=i(e.x0),f=i(e.x1);if("pixel"===e.ysizemode){var _=r(e.yanchor);t=_-e.y0,h=_-e.y1}else t=r(e.y0),h=r(e.y1);if("line"===s)return"M"+d+","+t+"L"+f+","+h;if("rect"===s)return"M"+d+","+t+"H"+f+"V"+h+"H"+d+"Z";var b=(d+f)/2,w=(t+h)/2,T=Math.abs(b-d),C=Math.abs(w-t),M="A"+T+","+C,I=b+T+","+w;return"M"+I+M+" 0 1,1 "+b+","+(w-C)+M+" 0 0,1 "+I+"Z"}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459}],470:[function(v,$,Q){"use strict";var m=v("./draw");$.exports={moduleType:"component",name:"shapes",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),supplyDrawNewShapeDefaults:v("./draw_newshape/defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("shapes"),calcAutorange:v("./calc_autorange"),draw:m.draw,drawOne:m.drawOne}},{"../../plots/cartesian/include_components":577,"./attributes":457,"./calc_autorange":458,"./defaults":460,"./draw":462,"./draw_newshape/defaults":465}],471:[function(v,$,Q){"use strict";var m=v("../../plots/font_attributes"),g=v("../../plots/pad_attributes"),k=v("../../lib/extend").extendDeepAll,x=v("../../plot_api/edit_types").overrideAll,e=v("../../plots/animation_attributes"),n=v("../../plot_api/plot_template").templatedArray,i=v("./constants"),l=n("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});$.exports=x(n("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:l,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:k(g({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:m({})},font:m({}),activebgcolor:{valType:"color",dflt:i.gripBgActiveColor},bgcolor:{valType:"color",dflt:i.railBgColor},bordercolor:{valType:"color",dflt:i.railBorderColor},borderwidth:{valType:"number",min:0,dflt:i.railBorderWidth},ticklen:{valType:"number",min:0,dflt:i.tickLength},tickcolor:{valType:"color",dflt:i.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:i.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/animation_attributes":560,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"./constants":472}],472:[function(v,$,Q){"use strict";$.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],473:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/array_container_defaults"),k=v("./attributes"),x=v("./constants").name,e=k.steps;function n(l,r,d){function f(p,c){return m.coerce(l,r,k,p,c)}for(var t=g(l,r,{name:"steps",handleItemDefaults:i}),h=0,s=0;s<t.length;s++)t[s].visible&&h++;if(h<2?r.visible=!1:f("visible")){r._stepCount=h;var o=r._visibleSteps=m.filterVisible(t);(t[f("active")]||{}).visible||(r.active=o[0]._index),f("x"),f("y"),m.noneOrAll(l,r,["x","y"]),f("xanchor"),f("yanchor"),f("len"),f("lenmode"),f("pad.t"),f("pad.r"),f("pad.b"),f("pad.l"),m.coerceFont(f,"font",d.font),f("currentvalue.visible")&&(f("currentvalue.xanchor"),f("currentvalue.prefix"),f("currentvalue.suffix"),f("currentvalue.offset"),m.coerceFont(f,"currentvalue.font",r.font)),f("transition.duration"),f("transition.easing"),f("bgcolor"),f("activebgcolor"),f("bordercolor"),f("borderwidth"),f("ticklen"),f("tickwidth"),f("tickcolor"),f("minorticklen")}}function i(l,r){function d(t,h){return m.coerce(l,r,e,t,h)}if("skip"===l.method||Array.isArray(l.args)?d("visible"):r.visible=!1){d("method"),d("args");var f=d("label","step-"+r._index);d("value",f),d("execute")}}$.exports=function(l,r){g(l,r,{name:x,handleItemDefaults:n})}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":471,"./constants":472}],474:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../plots/plots"),k=v("../color"),x=v("../drawing"),e=v("../../lib"),n=e.strTranslate,i=v("../../lib/svg_text_utils"),l=v("../../plot_api/plot_template").arrayEditor,r=v("./constants"),d=v("../../constants/alignment"),f=d.LINE_SPACING,t=d.FROM_TL,h=d.FROM_BR;function s(E){return r.autoMarginIdRoot+E._index}function o(E){return E._index}function p(E,R){var D=x.tester.selectAll("g."+r.labelGroupClass).data(R._visibleSteps);D.enter().append("g").classed(r.labelGroupClass,!0);var j=0,H=0;D.each(function(ee){var N=y(m.select(this),{step:ee},R).node();if(N){var K=x.bBox(N);H=Math.max(H,K.height),j=Math.max(j,K.width)}}),D.remove();var Y=R._dims={};Y.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var X=E._fullLayout._size;if(Y.lx=X.l+X.w*R.x,Y.ly=X.t+X.h*(1-R.y),Y.outerLength="fraction"===R.lenmode?Math.round(X.w*R.len):R.len,Y.inputAreaStart=0,Y.inputAreaLength=Math.round(Y.outerLength-R.pad.l-R.pad.r),Y.labelStride=Math.max(1,Math.ceil((j+r.labelPadding)/((Y.inputAreaLength-2*r.stepInset)/(R._stepCount-1)))),Y.labelHeight=H,Y.currentValueMaxWidth=0,Y.currentValueHeight=0,Y.currentValueTotalHeight=0,Y.currentValueMaxLines=1,R.currentvalue.visible){var re=x.tester.append("g");D.each(function(ee){var N=c(re,R,ee.label),K=N.node()&&x.bBox(N.node())||{width:0,height:0},J=i.lineCount(N);Y.currentValueMaxWidth=Math.max(Y.currentValueMaxWidth,Math.ceil(K.width)),Y.currentValueHeight=Math.max(Y.currentValueHeight,Math.ceil(K.height)),Y.currentValueMaxLines=Math.max(Y.currentValueMaxLines,J)}),Y.currentValueTotalHeight=Y.currentValueHeight+R.currentvalue.offset,re.remove()}Y.height=Y.currentValueTotalHeight+r.tickOffset+R.ticklen+r.labelOffset+Y.labelHeight+R.pad.t+R.pad.b;var U="left";e.isRightAnchor(R)&&(Y.lx-=Y.outerLength,U="right"),e.isCenterAnchor(R)&&(Y.lx-=Y.outerLength/2,U="center");var B="top";e.isBottomAnchor(R)&&(Y.ly-=Y.height,B="bottom"),e.isMiddleAnchor(R)&&(Y.ly-=Y.height/2,B="middle"),Y.outerLength=Math.ceil(Y.outerLength),Y.height=Math.ceil(Y.height),Y.lx=Math.round(Y.lx),Y.ly=Math.round(Y.ly);var V={y:R.y,b:Y.height*h[B],t:Y.height*t[B]};"fraction"===R.lenmode?(V.l=0,V.xl=R.x-R.len*t[U],V.r=0,V.xr=R.x+R.len*h[U]):(V.x=R.x,V.l=Y.outerLength*t[U],V.r=Y.outerLength*h[U]),g.autoMargin(E,s(R),V)}function c(E,R,D){if(R.currentvalue.visible){var j,H,Y=R._dims;switch(R.currentvalue.xanchor){case"right":j=Y.inputAreaLength-r.currentValueInset-Y.currentValueMaxWidth,H="left";break;case"center":j=.5*Y.inputAreaLength,H="middle";break;default:j=r.currentValueInset,H="left"}var X=e.ensureSingle(E,"text",r.labelClass,function(V){V.attr({"text-anchor":H,"data-notex":1})}),Z=R.currentvalue.prefix?R.currentvalue.prefix:"";if("string"==typeof D)Z+=D;else{var W=R.steps[R.active].label,re=R._gd._fullLayout._meta;re&&(W=e.templateString(W,re)),Z+=W}R.currentvalue.suffix&&(Z+=R.currentvalue.suffix),X.call(x.font,R.currentvalue.font).text(Z).call(i.convertToTspans,R._gd);var U=i.lineCount(X);return i.positionText(X,j,(Y.currentValueMaxLines+1-U)*R.currentvalue.font.size*f),X}}function a(E,R,D){e.ensureSingle(E,"rect",r.gripRectClass,function(j){j.call(w,R,E,D).style("pointer-events","all")}).attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(k.stroke,D.bordercolor).call(k.fill,D.bgcolor).style("stroke-width",D.borderwidth+"px")}function y(E,R,D){var j=e.ensureSingle(E,"text",r.labelClass,function(X){X.attr({"text-anchor":"middle","data-notex":1})}),H=R.step.label,Y=D._gd._fullLayout._meta;return Y&&(H=e.templateString(H,Y)),j.call(x.font,D.font).text(H).call(i.convertToTspans,D._gd),j}function u(E,R){var D=e.ensureSingle(E,"g",r.labelsClass),j=R._dims,H=D.selectAll("g."+r.labelGroupClass).data(j.labelSteps);H.enter().append("g").classed(r.labelGroupClass,!0),H.exit().remove(),H.each(function(Y){var X=m.select(this);X.call(y,Y,R),x.setTranslate(X,M(R,Y.fraction),r.tickOffset+R.ticklen+R.font.size*f+r.labelOffset+j.currentValueTotalHeight)})}function _(E,R,D,j,H){var Y=Math.round(j*(D._stepCount-1)),X=D._visibleSteps[Y]._index;X!==D.active&&b(E,R,D,X,!0,H)}function b(E,R,D,j,H,Y){var X=D.active;D.active=j,l(E.layout,r.name,D).applyUpdate("active",j);var Z=D.steps[D.active];R.call(C,D,Y),R.call(c,D),E.emit("plotly_sliderchange",{slider:D,step:D.steps[D.active],interaction:H,previousActive:X}),Z&&Z.method&&H&&(R._nextMethod?(R._nextMethod.step=Z,R._nextMethod.doCallback=H,R._nextMethod.doTransition=Y):(R._nextMethod={step:Z,doCallback:H,doTransition:Y},R._nextMethodRaf=window.requestAnimationFrame(function(){var W=R._nextMethod.step;W.method&&(W.execute&&g.executeAPICommand(E,W.method,W.args),R._nextMethod=null,R._nextMethodRaf=null)})))}function w(E,R,D){var j=D.node(),H=m.select(R);function Y(){return D.data()[0]}function X(){var Z=Y();R.emit("plotly_sliderstart",{slider:Z});var W=D.select("."+r.gripRectClass);m.event.stopPropagation(),m.event.preventDefault(),W.call(k.fill,Z.activebgcolor);var re=I(Z,m.mouse(j)[0]);function U(){var V=Y(),ee=I(V,m.mouse(j)[0]);_(R,D,V,ee,!1)}function B(){var V=Y();V._dragging=!1,W.call(k.fill,V.bgcolor),H.on("mouseup",null),H.on("mousemove",null),H.on("touchend",null),H.on("touchmove",null),R.emit("plotly_sliderend",{slider:V,step:V.steps[V.active]})}_(R,D,Z,re,!0),Z._dragging=!0,H.on("mousemove",U),H.on("touchmove",U),H.on("mouseup",B),H.on("touchend",B)}E.on("mousedown",X),E.on("touchstart",X)}function T(E,R){var D=E.selectAll("rect."+r.tickRectClass).data(R._visibleSteps),j=R._dims;D.enter().append("rect").classed(r.tickRectClass,!0),D.exit().remove(),D.attr({width:R.tickwidth+"px","shape-rendering":"crispEdges"}),D.each(function(H,Y){var X=Y%j.labelStride==0,Z=m.select(this);Z.attr({height:X?R.ticklen:R.minorticklen}).call(k.fill,R.tickcolor),x.setTranslate(Z,M(R,Y/(R._stepCount-1))-.5*R.tickwidth,(X?r.tickOffset:r.minorTickOffset)+j.currentValueTotalHeight)})}function C(E,R,D){for(var j=E.select("rect."+r.gripRectClass),H=0,Y=0;Y<R._stepCount;Y++)if(R._visibleSteps[Y]._index===R.active){H=Y;break}var X=M(R,H/(R._stepCount-1));if(!R._invokingCommand){var Z=j;D&&R.transition.duration>0&&(Z=Z.transition().duration(R.transition.duration).ease(R.transition.easing)),Z.attr("transform",n(X-.5*r.gripWidth,R._dims.currentValueTotalHeight))}}function M(E,R){var D=E._dims;return D.inputAreaStart+r.stepInset+(D.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,R))}function I(E,R){var D=E._dims;return Math.min(1,Math.max(0,(R-r.stepInset-D.inputAreaStart)/(D.inputAreaLength-2*r.stepInset-2*D.inputAreaStart)))}function P(E,R,D){var j=D._dims,H=e.ensureSingle(E,"rect",r.railTouchRectClass,function(Y){Y.call(w,R,E,D).style("pointer-events","all")});H.attr({width:j.inputAreaLength,height:Math.max(j.inputAreaWidth,r.tickOffset+D.ticklen+j.labelHeight)}).call(k.fill,D.bgcolor).attr("opacity",0),x.setTranslate(H,0,j.currentValueTotalHeight)}function S(E,R){var D=R._dims,j=D.inputAreaLength-2*r.railInset,H=e.ensureSingle(E,"rect",r.railRectClass);H.attr({width:j,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(k.stroke,R.bordercolor).call(k.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px"),x.setTranslate(H,r.railInset,.5*(D.inputAreaWidth-r.railWidth)+D.currentValueTotalHeight)}$.exports=function(E){var R=E._fullLayout,D=function(W,re){for(var U=W[r.name],B=[],V=0;V<U.length;V++){var ee=U[V];ee.visible&&(ee._gd=re,B.push(ee))}return B}(R,E),j=R._infolayer.selectAll("g."+r.containerClassName).data(D.length>0?[0]:[]);function H(W){W._commandObserver&&(W._commandObserver.remove(),delete W._commandObserver),g.autoMargin(E,s(W))}if(j.enter().append("g").classed(r.containerClassName,!0).style("cursor","ew-resize"),j.exit().each(function(){m.select(this).selectAll("g."+r.groupClassName).each(H)}).remove(),0!==D.length){var Y=j.selectAll("g."+r.groupClassName).data(D,o);Y.enter().append("g").classed(r.groupClassName,!0),Y.exit().each(H).remove();for(var X=0;X<D.length;X++)p(E,D[X]);Y.each(function(W){var re=m.select(this);(function(U){var B=U._dims;B.labelSteps=[];for(var V=U._stepCount,ee=0;ee<V;ee+=B.labelStride)B.labelSteps.push({fraction:ee/(V-1),step:U._visibleSteps[ee]})})(W),g.manageCommandObserver(E,W,W._visibleSteps,function(U){var B=re.data()[0];B.active!==U.index&&(B._dragging||b(E,re,B,U.index,!1,!0))}),function(U,B,V){(V.steps[V.active]||{}).visible||(V.active=V._visibleSteps[0]._index),B.call(c,V).call(S,V).call(u,V).call(T,V).call(P,U,V).call(a,U,V);var ee=V._dims;x.setTranslate(B,ee.lx+V.pad.l,ee.ly+V.pad.t),B.call(C,V,!1),B.call(c,V)}(E,m.select(this),W)})}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":472,"@plotly/d3":58}],475:[function(v,$,Q){"use strict";var m=v("./constants");$.exports={moduleType:"component",name:m.name,layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),draw:v("./draw")}},{"./attributes":471,"./constants":472,"./defaults":473,"./draw":474}],476:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("fast-isnumeric"),k=v("../../plots/plots"),x=v("../../registry"),e=v("../../lib"),n=e.strTranslate,i=v("../drawing"),l=v("../color"),r=v("../../lib/svg_text_utils"),d=v("../../constants/interactions"),f=v("../../constants/alignment").OPPOSITE_SIDE,t=/ [XY][0-9]* /;$.exports={draw:function(h,s,o){var p,a=o.propName,y=o.placeholder,u=o.traceIndex,_=o.avoid||{},b=o.attributes,w=o.transform,T=o.containerGroup,C=h._fullLayout,M=1,I=!1,P=o.propContainer.title,S=(P&&P.text?P.text:"").trim(),E=P&&P.font?P.font:{},R=E.family,D=E.size,j=E.color;"title.text"===a?p="titleText":-1!==a.indexOf("axis")?p="axisTitleText":a.indexOf(!0)&&(p="colorbarTitleText");var H=h._context.edits[p];""===S?M=0:S.replace(t," % ")===y.replace(t," % ")&&(M=.2,I=!0,H||(S="")),o._meta?S=e.templateString(S,o._meta):C._meta&&(S=e.templateString(S,C._meta));var Y,X=S||H;T||(T=e.ensureSingle(C._infolayer,"g","g-"+s),Y=C._hColorbarMoveTitle);var Z=T.selectAll("text").data(X?[0]:[]);if(Z.enter().append("text"),Z.text(S).attr("class",s),Z.exit().remove(),!X)return T;function W(B){e.syncOrAsync([re,U],B)}function re(B){var V;return!w&&Y&&(w={}),w?(V="",w.rotate&&(V+="rotate("+[w.rotate,b.x,b.y]+")"),(w.offset||Y)&&(V+=n(0,(w.offset||0)-(Y||0)))):V=null,B.attr("transform",V),B.style({"font-family":R,"font-size":m.round(D,2)+"px",fill:l.rgb(j),opacity:M*l.opacity(j),"font-weight":k.fontWeight}).attr(b).call(r.convertToTspans,h),k.previousPromises(h)}function U(B){var V=m.select(B.node().parentNode);if(_&&_.selection&&_.side&&S){V.attr("transform",null);var ee=f[_.side],N="left"===_.side||"top"===_.side?-1:1,K=g(_.pad)?_.pad:2,J=i.bBox(V.node()),ae=_.maxShift||N*({left:0,top:0,right:C.width,bottom:C.height}[_.side]-J[_.side]),le=0;if(ae<0)le=ae;else{var se=_.offsetLeft||0,ve=_.offsetTop||0;J.left-=se,J.right-=se,J.top-=ve,J.bottom-=ve,_.selection.each(function(){var ye=i.bBox(this);e.bBoxIntersect(J,ye,K)&&(le=Math.max(le,N*(ye[_.side]-J[ee])+K))}),le=Math.min(ae,le)}if(le>0||ae<0){var ue={left:[-le,0],right:[le,0],top:[0,-le],bottom:[0,le]}[_.side];V.attr("transform",n(ue[0],ue[1]))}}}return Z.call(W),H&&(S?Z.on(".opacity",null):(M=0,I=!0,Z.text(y).on("mouseover.opacity",function(){m.select(this).transition().duration(d.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){m.select(this).transition().duration(d.HIDE_PLACEHOLDER).style("opacity",0)})),Z.call(r.makeEditable,{gd:h}).on("edit",function(B){void 0!==u?x.call("_guiRestyle",h,a,B,u):x.call("_guiRelayout",h,a,B)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(W)}).on("input",function(B){this.text(B||" ").call(r.positionText,b.x,b.y)})),Z.classed("js-placeholder",I),T}}},{"../../constants/alignment":483,"../../constants/interactions":490,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],477:[function(v,$,Q){"use strict";var m=v("../../plots/font_attributes"),g=v("../color/attributes"),k=v("../../lib/extend").extendFlat,x=v("../../plot_api/edit_types").overrideAll,e=v("../../plots/pad_attributes"),n=v("../../plot_api/plot_template").templatedArray,i=n("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});$.exports=x(n("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:i,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:k(e({editType:"arraydraw"}),{}),font:m({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:g.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"../color/attributes":366}],478:[function(v,$,Q){"use strict";$.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],479:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/array_container_defaults"),k=v("./attributes"),x=v("./constants").name,e=k.buttons;function n(l,r,d){function f(t,h){return m.coerce(l,r,k,t,h)}f("visible",g(l,r,{name:"buttons",handleItemDefaults:i}).length>0)&&(f("active"),f("direction"),f("type"),f("showactive"),f("x"),f("y"),m.noneOrAll(l,r,["x","y"]),f("xanchor"),f("yanchor"),f("pad.t"),f("pad.r"),f("pad.b"),f("pad.l"),m.coerceFont(f,"font",d.font),f("bgcolor",d.paper_bgcolor),f("bordercolor"),f("borderwidth"))}function i(l,r){function d(f,t){return m.coerce(l,r,e,f,t)}d("visible","skip"===l.method||Array.isArray(l.args))&&(d("method"),d("args"),d("args2"),d("label"),d("execute"))}$.exports=function(l,r){g(l,r,{name:x,handleItemDefaults:n})}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":477,"./constants":478}],480:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../plots/plots"),k=v("../color"),x=v("../drawing"),e=v("../../lib"),n=v("../../lib/svg_text_utils"),i=v("../../plot_api/plot_template").arrayEditor,l=v("../../constants/alignment").LINE_SPACING,r=v("./constants"),d=v("./scrollbox");function f(M){return M._index}function t(M,I){return+M.attr(r.menuIndexAttrName)===I._index}function h(M,I,P,S,E,R,D,j){I.active=D,i(M.layout,r.name,I).applyUpdate("active",D),"buttons"===I.type?o(M,S,null,null,I):"dropdown"===I.type&&(E.attr(r.menuIndexAttrName,"-1"),s(M,S,E,R,I),j||o(M,S,E,R,I))}function s(M,I,P,S,E){var R=e.ensureSingle(I,"g",r.headerClassName,function(Z){Z.style("pointer-events","all")}),D=E._dims,Y={y:E.pad.t,yPad:0,x:E.pad.l,xPad:0,index:0},X={width:D.headerWidth,height:D.headerHeight};R.call(p,E,E.buttons[E.active]||r.blankHeaderOpts,M).call(T,E,Y,X),e.ensureSingle(I,"text",r.headerArrowClassName,function(Z){Z.attr("text-anchor","end").call(x.font,E.font).text(r.arrowSymbol[E.direction])}).attr({x:D.headerWidth-r.arrowOffsetX+E.pad.l,y:D.headerHeight/2+r.textOffsetY+E.pad.t}),R.on("click",function(){P.call(C,String(t(P,E)?-1:E._index)),o(M,I,P,S,E)}),R.on("mouseover",function(){R.call(u)}),R.on("mouseout",function(){R.call(_,E)}),x.setTranslate(I,D.lx,D.ly)}function o(M,I,P,S,E){P||(P=I).attr("pointer-events","all");var R=-1==+P.attr(r.menuIndexAttrName)&&"buttons"!==E.type?[]:E.buttons,D="dropdown"===E.type?r.dropdownButtonClassName:r.buttonClassName,j=P.selectAll("g."+D).data(e.filterVisible(R)),H=j.enter().append("g").classed(D,!0),Y=j.exit();"dropdown"===E.type?(H.attr("opacity","0").transition().attr("opacity","1"),Y.transition().attr("opacity","0").remove()):Y.remove();var X=0,Z=0,W=E._dims,re=-1!==["up","down"].indexOf(E.direction);"dropdown"===E.type&&(re?Z=W.headerHeight+r.gapButtonHeader:X=W.headerWidth+r.gapButtonHeader),"dropdown"===E.type&&"up"===E.direction&&(Z=-r.gapButtonHeader+r.gapButton-W.openHeight),"dropdown"===E.type&&"left"===E.direction&&(X=-r.gapButtonHeader+r.gapButton-W.openWidth);var V,ee,N,U={x:W.lx+X+E.pad.l,y:W.ly+Z+E.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},B={l:U.x+E.borderwidth,t:U.y+E.borderwidth};j.each(function(V,ee){var N=m.select(this);N.call(p,E,V,M).call(T,E,U),N.on("click",function(){m.event.defaultPrevented||(V.execute&&(V.args2&&E.active===ee?(h(M,E,0,I,P,S,-1),g.executeAPICommand(M,V.method,V.args2)):(h(M,E,0,I,P,S,ee),g.executeAPICommand(M,V.method,V.args))),M.emit("plotly_buttonclicked",{menu:E,button:V,active:E.active}))}),N.on("mouseover",function(){N.call(u)}),N.on("mouseout",function(){N.call(_,E),j.call(y,E)})}),j.call(y,E),re?(B.w=Math.max(W.openWidth,W.headerWidth),B.h=U.y-B.t):(B.w=U.x-B.l,B.h=Math.max(W.openHeight,W.headerHeight)),B.direction=E.direction,S&&(j.size()?function(V,ee,N,K,J,te){var ae,le,se,ve=J.direction,ye=J._dims,Me=J.active;if("up"===ve||"down"===ve)for(le=0,se=0;se<Me;se++)le+=ye.heights[se]+r.gapButton;else for(ae=0,se=0;se<Me;se++)ae+=ye.widths[se]+r.gapButton;K.enable(te,ae,le),K.hbar&&K.hbar.attr("opacity","0").transition().attr("opacity","1"),K.vbar&&K.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,S,E,B):(N=!!(V=S).vbar,(ee=!!V.hbar)&&V.hbar.transition().attr("opacity","0").each("end",function(){ee=!1,N||V.disable()}),N&&V.vbar.transition().attr("opacity","0").each("end",function(){N=!1,ee||V.disable()})))}function p(M,I,P,S){M.call(c,I).call(a,I,P,S)}function c(M,I){e.ensureSingle(M,"rect",r.itemRectClassName,function(P){P.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})}).call(k.stroke,I.bordercolor).call(k.fill,I.bgcolor).style("stroke-width",I.borderwidth+"px")}function a(M,I,P,S){var E=e.ensureSingle(M,"text",r.itemTextClassName,function(j){j.attr({"text-anchor":"start","data-notex":1})}),R=P.label,D=S._fullLayout._meta;D&&(R=e.templateString(R,D)),E.call(x.font,I.font).text(R).call(n.convertToTspans,S)}function y(M,I){var P=I.active;M.each(function(S,E){var R=m.select(this);E===P&&I.showactive&&R.select("rect."+r.itemRectClassName).call(k.fill,r.activeColor)})}function u(M){M.select("rect."+r.itemRectClassName).call(k.fill,r.hoverColor)}function _(M,I){M.select("rect."+r.itemRectClassName).call(k.fill,I.bgcolor)}function b(M,I){var P=I._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},S=x.tester.selectAll("g."+r.dropdownButtonClassName).data(e.filterVisible(I.buttons));S.enter().append("g").classed(r.dropdownButtonClassName,!0);var E=-1!==["up","down"].indexOf(I.direction);S.each(function(X,Z){var W=m.select(this);W.call(p,I,X,M);var re=W.select("."+r.itemTextClassName),U=re.node()&&x.bBox(re.node()).width,B=Math.max(U+r.textPadX,r.minWidth),V=I.font.size*l,ee=n.lineCount(re),N=Math.max(V*ee,r.minHeight)+r.textOffsetY;N=Math.ceil(N),B=Math.ceil(B),P.widths[Z]=B,P.heights[Z]=N,P.height1=Math.max(P.height1,N),P.width1=Math.max(P.width1,B),E?(P.totalWidth=Math.max(P.totalWidth,B),P.openWidth=P.totalWidth,P.totalHeight+=N+r.gapButton,P.openHeight+=N+r.gapButton):(P.totalWidth+=B+r.gapButton,P.openWidth+=B+r.gapButton,P.totalHeight=Math.max(P.totalHeight,N),P.openHeight=P.totalHeight)}),E?P.totalHeight-=r.gapButton:P.totalWidth-=r.gapButton,P.headerWidth=P.width1+r.arrowPadX,P.headerHeight=P.height1,"dropdown"===I.type&&(E?(P.width1+=r.arrowPadX,P.totalHeight=P.height1):P.totalWidth=P.width1,P.totalWidth+=r.arrowPadX),S.remove();var R=P.totalWidth+I.pad.l+I.pad.r,D=P.totalHeight+I.pad.t+I.pad.b,j=M._fullLayout._size;P.lx=j.l+j.w*I.x,P.ly=j.t+j.h*(1-I.y);var H="left";e.isRightAnchor(I)&&(P.lx-=R,H="right"),e.isCenterAnchor(I)&&(P.lx-=R/2,H="center");var Y="top";e.isBottomAnchor(I)&&(P.ly-=D,Y="bottom"),e.isMiddleAnchor(I)&&(P.ly-=D/2,Y="middle"),P.totalWidth=Math.ceil(P.totalWidth),P.totalHeight=Math.ceil(P.totalHeight),P.lx=Math.round(P.lx),P.ly=Math.round(P.ly),g.autoMargin(M,w(I),{x:I.x,y:I.y,l:R*({right:1,center:.5}[H]||0),r:R*({left:1,center:.5}[H]||0),b:D*({top:1,middle:.5}[Y]||0),t:D*({bottom:1,middle:.5}[Y]||0)})}function w(M){return r.autoMarginIdRoot+M._index}function T(M,I,P,S){S=S||{};var E=M.select("."+r.itemRectClassName),R=M.select("."+r.itemTextClassName),D=I.borderwidth,j=P.index,H=I._dims;x.setTranslate(M,D+P.x,D+P.y);var Y=-1!==["up","down"].indexOf(I.direction),X=S.height||(Y?H.heights[j]:H.height1);E.attr({x:0,y:0,width:S.width||(Y?H.width1:H.widths[j]),height:X});var Z=I.font.size*l,W=(n.lineCount(R)-1)*Z/2;n.positionText(R,r.textOffsetX,X/2-W+r.textOffsetY),Y?P.y+=H.heights[j]+P.yPad:P.x+=H.widths[j]+P.xPad,P.index++}function C(M,I){M.attr(r.menuIndexAttrName,I||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}$.exports=function(M){var I=M._fullLayout,P=e.filterVisible(I[r.name]);function S(Z){g.autoMargin(M,w(Z))}var E=I._menulayer.selectAll("g."+r.containerClassName).data(P.length>0?[0]:[]);if(E.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),E.exit().each(function(){m.select(this).selectAll("g."+r.headerGroupClassName).each(S)}).remove(),0!==P.length){var R=E.selectAll("g."+r.headerGroupClassName).data(P,f);R.enter().append("g").classed(r.headerGroupClassName,!0);for(var D=e.ensureSingle(E,"g",r.dropdownButtonGroupClassName,function(Z){Z.style("pointer-events","all")}),j=0;j<P.length;j++)b(M,P[j]);var X=new d(M,D,"updatemenus"+I._uid);R.enter().size()&&(D.node().parentNode.appendChild(D.node()),D.call(C)),R.exit().each(function(Z){D.call(C),S(Z)}).remove(),R.each(function(Z){var W=m.select(this),re="dropdown"===Z.type?D:null;g.manageCommandObserver(M,Z,Z.buttons,function(U){h(M,Z,0,W,re,X,U.index,!0)}),"dropdown"===Z.type?(s(M,W,D,X,Z),t(D,Z)&&o(M,W,D,X,Z)):o(M,W,null,null,Z)})}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":478,"./scrollbox":482,"@plotly/d3":58}],481:[function(v,$,Q){arguments[4][475][0].apply(Q,arguments)},{"./attributes":477,"./constants":478,"./defaults":479,"./draw":480,dup:475}],482:[function(v,$,Q){"use strict";$.exports=e;var m=v("@plotly/d3"),g=v("../color"),k=v("../drawing"),x=v("../../lib");function e(n,i,l){this.gd=n,this.container=i,this.id=l,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(n,i,l){var r=this.gd._fullLayout,d=r.width,f=r.height;this.position=n;var t,h,s,o,p=this.position.l,c=this.position.w,a=this.position.t,y=this.position.h,u=this.position.direction,_="down"===u,b="left"===u,w="up"===u,T=c,C=y;_||b||"right"===u||w||(this.position.direction="down",_=!0),_||w?(h=(t=p)+T,_?(s=a,C=(o=Math.min(s+C,f))-s):C=(o=a+C)-(s=Math.max(o-C,0))):(o=(s=a)+C,b?T=(h=p+T)-(t=Math.max(h-T,0)):(t=p,T=(h=Math.min(t+T,d))-t)),this._box={l:t,t:s,w:T,h:C};var M=c>T,I=e.barLength+2*e.barPad,P=e.barWidth+2*e.barPad,S=p,E=a+y;E+P>f&&(E=f-P);var R=this.container.selectAll("rect.scrollbar-horizontal").data(M?[0]:[]);R.exit().on(".drag",null).remove(),R.enter().append("rect").classed("scrollbar-horizontal",!0).call(g.fill,e.barColor),M?(this.hbar=R.attr({rx:e.barRadius,ry:e.barRadius,x:S,y:E,width:I,height:P}),this._hbarXMin=S+I/2,this._hbarTranslateMax=T-I):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var D=y>C,j=e.barWidth+2*e.barPad,H=e.barLength+2*e.barPad,Y=p+c,X=a;Y+j>d&&(Y=d-j);var Z=this.container.selectAll("rect.scrollbar-vertical").data(D?[0]:[]);Z.exit().on(".drag",null).remove(),Z.enter().append("rect").classed("scrollbar-vertical",!0).call(g.fill,e.barColor),D?(this.vbar=Z.attr({rx:e.barRadius,ry:e.barRadius,x:Y,y:X,width:j,height:H}),this._vbarYMin=X+H/2,this._vbarTranslateMax=C-H):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var W=this.id,re=t-.5,U=D?h+j+.5:h+.5,B=s-.5,V=M?o+P+.5:o+.5,ee=r._topdefs.selectAll("#"+W).data(M||D?[0]:[]);if(ee.exit().remove(),ee.enter().append("clipPath").attr("id",W).append("rect"),M||D?(this._clipRect=ee.select("rect").attr({x:Math.floor(re),y:Math.floor(B),width:Math.ceil(U)-Math.floor(re),height:Math.ceil(V)-Math.floor(B)}),this.container.call(k.setClipUrl,W,this.gd),this.bg.attr({x:p,y:a,width:c,height:y})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(k.setClipUrl,null),delete this._clipRect),M||D){var N=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(N);var K=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault(),m.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));M&&this.hbar.on(".drag",null).call(K),D&&this.vbar.on(".drag",null).call(K)}this.setTranslate(i,l)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(k.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var n=this.translateX,i=this.translateY;this.hbar&&(n-=m.event.dx),this.vbar&&(i-=m.event.dy),this.setTranslate(n,i)},e.prototype._onBoxWheel=function(){var n=this.translateX,i=this.translateY;this.hbar&&(n+=m.event.deltaY),this.vbar&&(i+=m.event.deltaY),this.setTranslate(n,i)},e.prototype._onBarDrag=function(){var n=this.translateX,i=this.translateY;if(this.hbar){var l=n+this._hbarXMin,r=l+this._hbarTranslateMax;n=(x.constrain(m.event.x,l,r)-l)/(r-l)*(this.position.w-this._box.w)}if(this.vbar){var d=i+this._vbarYMin,f=d+this._vbarTranslateMax;i=(x.constrain(m.event.y,d,f)-d)/(f-d)*(this.position.h-this._box.h)}this.setTranslate(n,i)},e.prototype.setTranslate=function(n,i){var l=this.position.w-this._box.w,r=this.position.h-this._box.h;n=x.constrain(n||0,0,l),i=x.constrain(i||0,0,r),this.translateX=n,this.translateY=i,this.container.call(k.setTranslate,this._box.l-this.position.l-n,this._box.t-this.position.t-i),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+n-.5),y:Math.floor(this.position.t+i-.5)}),this.hbar&&this.hbar.call(k.setTranslate,n+n/l*this._hbarTranslateMax,i),this.vbar&&this.vbar.call(k.setTranslate,n,i+i/r*this._vbarTranslateMax)}},{"../../lib":515,"../color":367,"../drawing":389,"@plotly/d3":58}],483:[function(v,$,Q){"use strict";$.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],484:[function(v,$,Q){"use strict";$.exports={axisRefDescription:function(m,g,k){return["If set to a",m,"axis id (e.g. *"+m+"* or","*"+m+"2*), the `"+m+"` position refers to a",m,"coordinate. If set to *paper*, the `"+m+"`","position refers to the distance from the",g,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",g,"("+k+"). If set to a",m,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",g,"of the domain of that axis: e.g.,","*"+m+"2 domain* refers to the domain of the second",m," axis and a",m,"position of 0.5 refers to the","point between the",g,"and the",k,"of the domain of the","second",m,"axis."].join(" ")}}},{}],485:[function(v,$,Q){"use strict";$.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],486:[function(v,$,Q){"use strict";$.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],487:[function(v,$,Q){"use strict";$.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],488:[function(v,$,Q){"use strict";$.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],489:[function(v,$,Q){"use strict";$.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],490:[function(v,$,Q){"use strict";$.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],491:[function(v,$,Q){"use strict";$.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],492:[function(v,$,Q){"use strict";Q.xmlns="http://www.w3.org/2000/xmlns/",Q.svg="http://www.w3.org/2000/svg",Q.xlink="http://www.w3.org/1999/xlink",Q.svgAttrs={xmlns:Q.svg,"xmlns:xlink":Q.xlink}},{}],493:[function(v,$,Q){"use strict";Q.version=v("./version").version,v("native-promise-only"),v("../build/plotcss");for(var m=v("./registry"),g=Q.register=m.register,k=v("./plot_api"),x=Object.keys(k),e=0;e<x.length;e++){var n=x[e];"_"!==n.charAt(0)&&(Q[n]=k[n]),g({moduleType:"apiMethod",name:n,fn:k[n]})}g(v("./traces/scatter")),g([v("./components/legend"),v("./components/fx"),v("./components/annotations"),v("./components/annotations3d"),v("./components/selections"),v("./components/shapes"),v("./components/images"),v("./components/updatemenus"),v("./components/sliders"),v("./components/rangeslider"),v("./components/rangeselector"),v("./components/grid"),v("./components/errorbars"),v("./components/colorscale"),v("./components/colorbar"),v("./components/modebar")]),g([v("./locale-en"),v("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(g(window.PlotlyLocales),delete window.PlotlyLocales),Q.Icons=v("./fonts/ploticon");var i=v("./components/fx"),l=v("./plots/plots");Q.Plots={resize:l.resize,graphJson:l.graphJson,sendDataToCloud:l.sendDataToCloud},Q.Fx={hover:i.hover,unhover:i.unhover,loneHover:i.loneHover,loneUnhover:i.loneUnhover},Q.Snapshot=v("./snapshot"),Q.PlotSchema=v("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":358,"./components/annotations3d":363,"./components/colorbar":373,"./components/colorscale":379,"./components/errorbars":395,"./components/fx":407,"./components/grid":411,"./components/images":416,"./components/legend":424,"./components/modebar":430,"./components/rangeselector":438,"./components/rangeslider":445,"./components/selections":455,"./components/shapes":470,"./components/sliders":475,"./components/updatemenus":481,"./fonts/ploticon":494,"./locale-en":546,"./locale-en-us":545,"./plot_api":550,"./plot_api/plot_schema":554,"./plots/plots":628,"./registry":647,"./snapshot":652,"./traces/scatter":948,"./version":1132,"native-promise-only":245}],494:[function(v,$,Q){"use strict";$.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},{}],495:[function(v,$,Q){"use strict";Q.isLeftAnchor=function(m){return"left"===m.xanchor||"auto"===m.xanchor&&m.x<=1/3},Q.isCenterAnchor=function(m){return"center"===m.xanchor||"auto"===m.xanchor&&m.x>1/3&&m.x<2/3},Q.isRightAnchor=function(m){return"right"===m.xanchor||"auto"===m.xanchor&&m.x>=2/3},Q.isTopAnchor=function(m){return"top"===m.yanchor||"auto"===m.yanchor&&m.y>=2/3},Q.isMiddleAnchor=function(m){return"middle"===m.yanchor||"auto"===m.yanchor&&m.y>1/3&&m.y<2/3},Q.isBottomAnchor=function(m){return"bottom"===m.yanchor||"auto"===m.yanchor&&m.y<=1/3}},{}],496:[function(v,$,Q){"use strict";var m=v("./mod"),g=m.mod,k=m.modHalf,x=Math.PI,e=2*x;function n(d){return Math.abs(d[1]-d[0])>e-1e-14}function i(d,f){return k(f-d,e)}function l(d,f){if(n(f))return!0;var t,h;f[0]<f[1]?(t=f[0],h=f[1]):(t=f[1],h=f[0]),(t=g(t,e))>(h=g(h,e))&&(h+=e);var s=g(d,e),o=s+e;return s>=t&&s<=h||o>=t&&o<=h}function r(d,f,t,h,s,o,p){s=s||0,o=o||0;var c,a,y,u,_,b=n([t,h]);function w(I,P){return[I*Math.cos(P)+s,o-I*Math.sin(P)]}b?(c=0,a=x,y=e):t<h?(c=t,y=h):(c=h,y=t),d<f?(u=d,_=f):(u=f,_=d);var T,C=Math.abs(y-c)<=x?0:1;function M(I,P,S){return"A"+[I,I]+" "+[0,C,S]+" "+w(I,P)}return b?T=null===u?"M"+w(_,c)+M(_,a,0)+M(_,y,0)+"Z":"M"+w(u,c)+M(u,a,0)+M(u,y,0)+"ZM"+w(_,c)+M(_,a,1)+M(_,y,1)+"Z":null===u?(T="M"+w(_,c)+M(_,y,0),p&&(T+="L0,0Z")):T="M"+w(u,c)+"L"+w(_,c)+M(_,y,0)+"L"+w(u,y)+M(u,c,1)+"Z",T}$.exports={deg2rad:function(d){return d/180*x},rad2deg:function(d){return d/x*180},angleDelta:i,angleDist:function(d,f){return Math.abs(i(d,f))},isFullCircle:n,isAngleInsideSector:l,isPtInsideSector:function(d,f,t,h){return!!l(f,h)&&(t[0]<t[1]?(s=t[0],o=t[1]):(s=t[1],o=t[0]),d>=s&&d<=o);var s,o},pathArc:function(d,f,t,h,s){return r(null,d,f,t,h,s,0)},pathSector:function(d,f,t,h,s){return r(null,d,f,t,h,s,1)},pathAnnulus:function(d,f,t,h,s,o){return r(d,f,t,h,s,o,1)}}},{"./mod":522}],497:[function(v,$,Q){"use strict";var m=Array.isArray,g=ArrayBuffer,k=DataView;function x(i){return g.isView(i)&&!(i instanceof k)}function e(i){return m(i)||x(i)}function n(i,l,r){if(e(i)){if(e(i[0])){for(var d=r,f=0;f<i.length;f++)d=l(d,i[f].length);return d}return i.length}return 0}Q.isTypedArray=x,Q.isArrayOrTypedArray=e,Q.isArray1D=function(i){return!e(i[0])},Q.ensureArray=function(i,l){return m(i)||(i=[]),i.length=l,i},Q.concat=function(){var i,l,r,d,f,t,h,s,o=[],p=!0,c=0;for(r=0;r<arguments.length;r++)(t=(d=arguments[r]).length)&&(l?o.push(d):(l=d,f=t),m(d)?i=!1:(p=!1,c?i!==d.constructor&&(i=!1):i=d.constructor),c+=t);if(!c)return[];if(!o.length)return l;if(p)return l.concat.apply(l,o);if(i){for((h=new i(c)).set(l),r=0;r<o.length;r++)h.set(d=o[r],f),f+=d.length;return h}for(h=new Array(c),s=0;s<l.length;s++)h[s]=l[s];for(r=0;r<o.length;r++){for(d=o[r],s=0;s<d.length;s++)h[f+s]=d[s];f+=s}return h},Q.maxRowLength=function(i){return n(i,Math.max,0)},Q.minRowLength=function(i){return n(i,Math.min,1/0)}},{}],498:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../constants/numerical").BADNUM,k=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;$.exports=function(x){return"string"==typeof x&&(x=x.replace(k,"")),m(x)?Number(x):g}},{"../constants/numerical":491,"fast-isnumeric":190}],499:[function(v,$,Q){"use strict";$.exports=function(m){var g=m._fullLayout;g._glcanvas&&g._glcanvas.size()&&g._glcanvas.each(function(k){k.regl&&k.regl.clear({color:!0,depth:!0})})}},{}],500:[function(v,$,Q){"use strict";$.exports=function(m){m._responsiveChartHandler&&(window.removeEventListener("resize",m._responsiveChartHandler),delete m._responsiveChartHandler)}},{}],501:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("tinycolor2"),k=v("../plots/attributes"),x=v("../components/colorscale/scales"),e=v("../components/color"),n=v("../constants/interactions").DESELECTDIM,i=v("./nested_property"),l=v("./regex").counter,r=v("./mod").modHalf,d=v("./array").isArrayOrTypedArray;function f(t,h){var s=Q.valObjectMeta[h.valType];if(h.arrayOk&&d(t))return!0;if(s.validateFunction)return s.validateFunction(t,h);var o={},p=o;return s.coerceFunction(t,{set:function(a){p=a}},o,h),p!==o}Q.valObjectMeta={data_array:{coerceFunction:function(t,h,s){d(t)?h.set(t):void 0!==s&&h.set(s)}},enumerated:{coerceFunction:function(t,h,s,o){o.coerceNumber&&(t=+t),-1===o.values.indexOf(t)?h.set(s):h.set(t)},validateFunction:function(t,h){h.coerceNumber&&(t=+t);for(var s=h.values,o=0;o<s.length;o++){var p=String(s[o]);if("/"===p.charAt(0)&&"/"===p.charAt(p.length-1)){if(new RegExp(p.substr(1,p.length-2)).test(t))return!0}else if(t===s[o])return!0}return!1}},boolean:{coerceFunction:function(t,h,s){h.set(!0===t||!1===t?t:s)}},number:{coerceFunction:function(t,h,s,o){!m(t)||void 0!==o.min&&t<o.min||void 0!==o.max&&t>o.max?h.set(s):h.set(+t)}},integer:{coerceFunction:function(t,h,s,o){t%1||!m(t)||void 0!==o.min&&t<o.min||void 0!==o.max&&t>o.max?h.set(s):h.set(+t)}},string:{coerceFunction:function(t,h,s,o){h.set("string"!=typeof t?!0!==o.strict&&"number"==typeof t?String(t):s:o.noBlank&&!t?s:t)}},color:{coerceFunction:function(t,h,s){g(t).isValid()?h.set(t):h.set(s)}},colorlist:{coerceFunction:function(t,h,s){Array.isArray(t)&&t.length&&t.every(function(o){return g(o).isValid()})?h.set(t):h.set(s)}},colorscale:{coerceFunction:function(t,h,s){h.set(x.get(t,s))}},angle:{coerceFunction:function(t,h,s){"auto"===t?h.set("auto"):m(t)?h.set(r(+t,360)):h.set(s)}},subplotid:{coerceFunction:function(t,h,s,o){var p=o.regex||l(s);"string"==typeof t&&p.test(t)?h.set(t):h.set(s)},validateFunction:function(t,h){var s=h.dflt;return t===s||"string"==typeof t&&!!l(s).test(t)}},flaglist:{coerceFunction:function(t,h,s,o){if(-1===(o.extras||[]).indexOf(t))if("string"==typeof t){for(var p=t.split("+"),c=0;c<p.length;){var a=p[c];-1===o.flags.indexOf(a)||p.indexOf(a)<c?p.splice(c,1):c++}h.set(p.length?p.join("+"):s)}else h.set(s);else h.set(t)}},any:{coerceFunction:function(t,h,s){h.set(void 0===t?s:t)}},info_array:{coerceFunction:function(t,h,s,o){function p(E,R,D){var j;return void 0===D&&(D=R.dflt),Q.valObjectMeta[R.valType].coerceFunction(E,{set:function(Y){j=Y}},D,R),j}var c=2===o.dimensions||"1-2"===o.dimensions&&Array.isArray(t)&&Array.isArray(t[0]);if(Array.isArray(t)){var a,y,u,b,w,T=o.items,C=[],M=Array.isArray(T),I=M&&c&&Array.isArray(T[0]),P=c&&M&&!I,S=M&&!P?T.length:t.length;if(s=Array.isArray(s)?s:[],c)for(a=0;a<S;a++)for(C[a]=[],u=Array.isArray(t[a])?t[a]:[],b=P?T.length:M?T[a].length:u.length,y=0;y<b;y++)void 0!==(w=p(u[y],P?T[y]:M?T[a][y]:T,(s[a]||[])[y]))&&(C[a][y]=w);else for(a=0;a<S;a++)void 0!==(w=p(t[a],M?T[a]:T,s[a]))&&(C[a]=w);h.set(C)}else h.set(s)},validateFunction:function(t,h){if(!Array.isArray(t))return!1;var s=h.items,o=Array.isArray(s),p=2===h.dimensions;if(!h.freeLength&&t.length!==s.length)return!1;for(var c=0;c<t.length;c++)if(p){if(!Array.isArray(t[c])||!h.freeLength&&t[c].length!==s[c].length)return!1;for(var a=0;a<t[c].length;a++)if(!f(t[c][a],o?s[c][a]:s))return!1}else if(!f(t[c],o?s[c]:s))return!1;return!0}}},Q.coerce=function(t,h,s,o,p){var c=i(s,o).get(),a=i(t,o),y=i(h,o),u=a.get(),_=h._template;if(void 0===u&&_&&(u=i(_,o).get(),_=0),void 0===p&&(p=c.dflt),c.arrayOk&&d(u))return y.set(u),u;var b=Q.valObjectMeta[c.valType].coerceFunction;b(u,y,p,c);var w=y.get();return _&&w===p&&!f(u,c)&&(b(u=i(_,o).get(),y,p,c),w=y.get()),w},Q.coerce2=function(t,h,s,o,p){var c=i(t,o),a=Q.coerce(t,h,s,o,p);return null!=c.get()&&a},Q.coerceFont=function(t,h,s){var o={};return o.family=t(h+".family",(s=s||{}).family),o.size=t(h+".size",s.size),o.color=t(h+".color",s.color),o},Q.coercePattern=function(t,h,s,o){if(t(h+".shape")){t(h+".solidity"),t(h+".size");var p="overlay"===t(h+".fillmode");if(!o){var c=t(h+".bgcolor",p?s:void 0);t(h+".fgcolor",p?e.contrast(c):s)}t(h+".fgopacity",p?.5:1)}},Q.coerceHoverinfo=function(t,h,s){var o,p=h._module.attributes,c=p.hoverinfo?p:k,a=c.hoverinfo;if(1===s._dataLength){var y="all"===a.dflt?a.flags.slice():a.dflt.split("+");y.splice(y.indexOf("name"),1),o=y.join("+")}return Q.coerce(t,h,c,"hoverinfo",o)},Q.coerceSelectionMarkerOpacity=function(t,h){if(t.marker){var s,o,p=t.marker.opacity;void 0!==p&&(d(p)||t.selected||t.unselected||(s=p,o=n*p),h("selected.marker.opacity",s),h("unselected.marker.opacity",o))}},Q.validate=f},{"../components/color":367,"../components/colorscale/scales":382,"../constants/interactions":490,"../plots/attributes":562,"./array":497,"./mod":522,"./nested_property":523,"./regex":532,"fast-isnumeric":190,tinycolor2:313}],502:[function(v,$,Q){"use strict";var m,g,k=v("d3-time-format").timeFormat,x=v("fast-isnumeric"),e=v("./loggers"),n=v("./mod").mod,i=v("../constants/numerical"),l=i.BADNUM,r=i.ONEDAY,d=i.ONEHOUR,f=i.ONEMIN,t=i.ONESEC,h=i.EPOCHJD,s=v("../registry"),o=v("d3-time-format").utcFormat,p=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,c=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,a=(new Date).getFullYear()-70;function y(R){return R&&s.componentsRegistry.calendars&&"string"==typeof R&&"gregorian"!==R}function u(R,D){return String(R+Math.pow(10,D)).substr(1)}Q.dateTick0=function(R,D){var Y,X,j=(X=!!D,y(Y=R)?X?s.getComponentMethod("calendars","CANONICAL_SUNDAY")[Y]:s.getComponentMethod("calendars","CANONICAL_TICK")[Y]:X?"2000-01-02":"2000-01-01");if(D<2)return j;var H=Q.dateTime2ms(j,R);return Q.ms2DateTime(H+=r*(D-1),0,R)},Q.dfltRange=function(R){return y(R)?s.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},Q.isJSDate=function(R){return"object"==typeof R&&null!==R&&"function"==typeof R.getTime},Q.dateTime2ms=function(R,D){if(Q.isJSDate(R)){var j=R.getTimezoneOffset()*f,H=(R.getUTCMinutes()-R.getMinutes())*f+(R.getUTCSeconds()-R.getSeconds())*t+(R.getUTCMilliseconds()-R.getMilliseconds());if(H){var Y=3*f;j=j-Y/2+n(H-j+Y/2,Y)}return(R=Number(R)-j)>=m&&R<=g?R:l}if("string"!=typeof R&&"number"!=typeof R)return l;R=String(R);var X=y(D),Z=R.charAt(0);!X||"G"!==Z&&"g"!==Z||(R=R.substr(1),D="");var W=X&&"chinese"===D.substr(0,7),re=R.match(W?c:p);if(!re)return l;var U=re[1],B=re[3]||"1",V=Number(re[5]||1),ee=Number(re[7]||0),N=Number(re[9]||0),K=Number(re[11]||0);if(X){if(2===U.length)return l;var J;U=Number(U);try{var te=s.getComponentMethod("calendars","getCal")(D);if(W){var ae="i"===B.charAt(B.length-1);B=parseInt(B,10),J=te.newDate(U,te.toMonthIndex(U,B,ae),V)}else J=te.newDate(U,Number(B),V)}catch{return l}return J?(J.toJD()-h)*r+ee*d+N*f+K*t:l}U=2===U.length?(Number(U)+2e3-a)%100+a:Number(U),B-=1;var le=new Date(Date.UTC(2e3,B,V,ee,N));return le.setUTCFullYear(U),le.getUTCMonth()!==B||le.getUTCDate()!==V?l:le.getTime()+K*t},m=Q.MIN_MS=Q.dateTime2ms("-9999"),g=Q.MAX_MS=Q.dateTime2ms("9999-12-31 23:59:59.9999"),Q.isDateTime=function(R,D){return Q.dateTime2ms(R,D)!==l};var _=90*r,b=3*d,w=5*f;function T(R,D,j,H,Y){if((D||j||H||Y)&&(R+=" "+u(D,2)+":"+u(j,2),(H||Y)&&(R+=":"+u(H,2),Y))){for(var X=4;Y%10==0;)X-=1,Y/=10;R+="."+u(Y,X)}return R}Q.ms2DateTime=function(R,D,j){if("number"!=typeof R||!(R>=m&&R<=g))return l;D||(D=0);var H,Y,X,Z,W,re,U=Math.floor(10*n(R+.05,1)),B=Math.round(R-U/10);if(y(j)){var V=Math.floor(B/r)+h,ee=Math.floor(n(R,r));try{H=s.getComponentMethod("calendars","getCal")(j).fromJD(V).formatDate("yyyy-mm-dd")}catch{H=o("G%Y-%m-%d")(new Date(B))}if("-"===H.charAt(0))for(;H.length<11;)H="-0"+H.substr(1);else for(;H.length<10;)H="0"+H;Y=D<_?Math.floor(ee/d):0,X=D<_?Math.floor(ee%d/f):0,Z=D<b?Math.floor(ee%f/t):0,W=D<w?ee%t*10+U:0}else re=new Date(B),H=o("%Y-%m-%d")(re),Y=D<_?re.getUTCHours():0,X=D<_?re.getUTCMinutes():0,Z=D<b?re.getUTCSeconds():0,W=D<w?10*re.getUTCMilliseconds()+U:0;return T(H,Y,X,Z,W)},Q.ms2DateTimeLocal=function(R){if(!(R>=m+r&&R<=g-r))return l;var D=Math.floor(10*n(R+.05,1)),j=new Date(Math.round(R-D/10));return T(k("%Y-%m-%d")(j),j.getHours(),j.getMinutes(),j.getSeconds(),10*j.getUTCMilliseconds()+D)},Q.cleanDate=function(R,D,j){if(R===l)return D;if(Q.isJSDate(R)||"number"==typeof R&&isFinite(R)){if(y(j))return e.error("JS Dates and milliseconds are incompatible with world calendars",R),D;if(!(R=Q.ms2DateTimeLocal(+R))&&void 0!==D)return D}else if(!Q.isDateTime(R,j))return e.error("unrecognized date",R),D;return R};var C=/%\d?f/g,M=/%h/g,I={1:"1",2:"1",3:"2",4:"2"};function P(R,D,j,H){R=R.replace(C,function(X){var Z=Math.min(+X.charAt(1)||6,6);return(D/1e3%1+2).toFixed(Z).substr(2).replace(/0+$/,"")||"0"});var Y=new Date(Math.floor(D+.05));if(R=R.replace(M,function(){return I[j("%q")(Y)]}),y(H))try{R=s.getComponentMethod("calendars","worldCalFmt")(R,D,H)}catch{return"Invalid"}return j(R)(Y)}var S=[59,59.9,59.99,59.999,59.9999];Q.formatDate=function(R,D,j,H,Y,X){if(Y=y(Y)&&Y,!D)if("y"===j)D=X.year;else if("m"===j)D=X.month;else{if("d"!==j)return function(Z,W){var re=n(Z+.05,r),U=u(Math.floor(re/d),2)+":"+u(n(Math.floor(re/f),60),2);if("M"!==W){x(W)||(W=0);var B=(100+Math.min(n(Z/t,60),S[W])).toFixed(W).substr(1);W>0&&(B=B.replace(/0+$/,"").replace(/[\.]$/,"")),U+=":"+B}return U}(R,j)+"\n"+P(X.dayMonthYear,R,H,Y);D=X.dayMonth+"\n"+X.year}return P(D,R,H,Y)};var E=3*r;Q.incrementMonth=function(R,D,j){j=y(j)&&j;var H=n(R,r);if(R=Math.round(R-H),j)try{var Y=Math.round(R/r)+h,X=s.getComponentMethod("calendars","getCal")(j),Z=X.fromJD(Y);return D%12?X.add(Z,D,"m"):X.add(Z,D/12,"y"),(Z.toJD()-h)*r+H}catch{e.error("invalid ms "+R+" in calendar "+j)}var W=new Date(R+E);return W.setUTCMonth(W.getUTCMonth()+D)+H-E},Q.findExactDates=function(R,D){for(var j,H,Y=0,X=0,Z=0,W=0,re=y(D)&&s.getComponentMethod("calendars","getCal")(D),U=0;U<R.length;U++)if(x(H=R[U])){if(!(H%r))if(re)try{1===(j=re.fromJD(H/r+h)).day()?1===j.month()?Y++:X++:Z++}catch{}else 1===(j=new Date(H)).getUTCDate()?0===j.getUTCMonth()?Y++:X++:Z++}else W++;Z+=X+=Y;var B=R.length-W;return{exactYears:Y/B,exactMonths:X/B,exactDays:Z/B}}},{"../constants/numerical":491,"../registry":647,"./loggers":519,"./mod":522,"d3-time-format":120,"fast-isnumeric":190}],503:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("./loggers"),k=v("./matrix"),x=v("gl-mat4");function e(d){var f=d&&d.parentNode;f&&f.removeChild(d)}function n(d,f,t){var h="plotly.js-style-"+d,s=document.getElementById(h);s||((s=document.createElement("style")).setAttribute("id",h),s.appendChild(document.createTextNode("")),document.head.appendChild(s));var o=s.sheet;o.insertRule?o.insertRule(f+"{"+t+"}",0):o.addRule?o.addRule(f,t,0):g.warn("addStyleRule failed")}function i(d){var f=window.getComputedStyle(d,null),t=f.getPropertyValue("-webkit-transform")||f.getPropertyValue("-moz-transform")||f.getPropertyValue("-ms-transform")||f.getPropertyValue("-o-transform")||f.getPropertyValue("transform");return"none"===t?null:t.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(h){return+h})}function l(d){for(var f=[];r(d);)f.push(d),d=d.parentNode;return f}function r(d){return d&&(d instanceof Element||d instanceof HTMLElement)}$.exports={getGraphDiv:function(d){var f;if("string"==typeof d){if(null===(f=document.getElementById(d)))throw new Error("No DOM element with id '"+d+"' exists on the page.");return f}if(null==d)throw new Error("DOM element provided is null or undefined");return d},isPlotDiv:function(d){var f=m.select(d);return f.node()instanceof HTMLElement&&f.size()&&f.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(d,f){n("global",d,f)},addRelatedStyleRule:n,deleteRelatedStyleRule:function(d){var t=document.getElementById("plotly.js-style-"+d);t&&e(t)},getFullTransformMatrix:function(d){var f=l(d),t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return f.forEach(function(h){var s=i(h);if(s){var o=k.convertCssMatrix(s);t=x.multiply(t,t,o)}}),t},getElementTransformMatrix:i,getElementAndAncestors:l,equalDomRects:function(d,f){return d&&f&&d.x===f.x&&d.y===f.y&&d.top===f.top&&d.left===f.left&&d.right===f.right&&d.bottom===f.bottom}}},{"./loggers":519,"./matrix":521,"@plotly/d3":58,"gl-mat4":210}],504:[function(v,$,Q){"use strict";var m=v("events").EventEmitter;$.exports={init:function(k){if(k._ev instanceof m)return k;var x=new m,e=new m;return k._ev=x,k._internalEv=e,k.on=x.on.bind(x),k.once=x.once.bind(x),k.removeListener=x.removeListener.bind(x),k.removeAllListeners=x.removeAllListeners.bind(x),k._internalOn=e.on.bind(e),k._internalOnce=e.once.bind(e),k._removeInternalListener=e.removeListener.bind(e),k._removeAllInternalListeners=e.removeAllListeners.bind(e),k.emit=function(n,i){typeof jQuery<"u"&&jQuery(k).trigger(n,i),x.emit(n,i),e.emit(n,i)},k},triggerHandler:function(k,x,e){var n,i;typeof jQuery<"u"&&(n=jQuery(k).triggerHandler(x,e));var l=k._ev;if(!l)return n;var r,d=l._events[x];if(!d)return n;function f(t){return t.listener?(l.removeListener(x,t.listener),t.fired?void 0:(t.fired=!0,t.listener.apply(l,[e]))):t.apply(l,[e])}for(d=Array.isArray(d)?d:[d],r=0;r<d.length-1;r++)f(d[r]);return i=f(d[r]),void 0!==n?n:i},purge:function(k){return delete k._ev,delete k.on,delete k.once,delete k.removeListener,delete k.removeAllListeners,delete k.emit,delete k._ev,delete k._internalEv,delete k._internalOn,delete k._internalOnce,delete k._removeInternalListener,delete k._removeAllInternalListeners,k}}},{events:84}],505:[function(v,$,Q){"use strict";var m=v("./is_plain_object.js"),g=Array.isArray;function k(x,e,n,i){var l,r,d,f,t,h,s=x[0],o=x.length;if(2===o&&g(s)&&g(x[1])&&0===s.length){if(function(c,a){var y,u;for(y=0;y<c.length;y++){if(null!==(u=c[y])&&"object"==typeof u)return!1;void 0!==u&&(a[y]=u)}return!0}(x[1],s))return s;s.splice(0,s.length)}for(var p=1;p<o;p++)for(r in l=x[p])d=s[r],f=l[r],i&&g(f)?s[r]=f:e&&f&&(m(f)||(t=g(f)))?(t?(t=!1,h=d&&g(d)?d:[]):h=d&&m(d)?d:{},s[r]=k([h,f],e,n,i)):(void 0!==f||n)&&(s[r]=f);return s}Q.extendFlat=function(){return k(arguments,!1,!1,!1)},Q.extendDeep=function(){return k(arguments,!0,!1,!1)},Q.extendDeepAll=function(){return k(arguments,!0,!0,!1)},Q.extendDeepNoArrays=function(){return k(arguments,!0,!1,!0)}},{"./is_plain_object.js":516}],506:[function(v,$,Q){"use strict";$.exports=function(m){for(var g={},k=[],x=0,e=0;e<m.length;e++){var n=m[e];1!==g[n]&&(g[n]=1,k[x++]=n)}return k}},{}],507:[function(v,$,Q){"use strict";function m(k){return!0===k.visible}function g(k){var x=k[0].trace;return!0===x.visible&&0!==x._length}$.exports=function(k){for(var x,e=(x=k,Array.isArray(x)&&Array.isArray(x[0])&&x[0][0]&&x[0][0].trace?g:m),n=[],i=0;i<k.length;i++){var l=k[i];e(l)&&n.push(l)}return n}},{}],508:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("country-regex"),k=v("@turf/area"),x=v("@turf/centroid"),e=v("@turf/bbox"),n=v("./identity"),i=v("./loggers"),l=v("./is_plain_object"),r=v("./nested_property"),d=v("./polygon"),f=Object.keys(g),t={"ISO-3":n,"USA-states":n,"country names":function(s){for(var o=0;o<f.length;o++){var p=f[o];if(new RegExp(g[p]).test(s.trim().toLowerCase()))return p}return i.log("Unrecognized country name: "+s+"."),!1}};function h(s){var o=s.geojson,p=window.PlotlyGeoAssets||{},c="string"==typeof o?p[o]:o;return l(c)?c:(i.error("Oops ... something went wrong when fetching "+o),!1)}$.exports={locationToFeature:function(s,o,p){if(!o||"string"!=typeof o)return!1;var c,a,y,u=t[s](o);if(u){if("USA-states"===s)for(c=[],y=0;y<p.length;y++)(a=p[y]).properties&&a.properties.gu&&"USA"===a.properties.gu&&c.push(a);else c=p;for(y=0;y<c.length;y++)if((a=c[y]).id===u)return a;i.log(["Location with id",u,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(s){var o,p,c,a,y=s.geometry,u=y.coordinates,_=s.id,b=[];function w(T){for(var C=0;C<T.length-1;C++)if(T[C][0]>0&&T[C+1][0]<0)return C;return null}switch(o="RUS"===_||"FJI"===_?function(T){var C;if(null===w(T))C=T;else for(C=new Array(T.length),a=0;a<T.length;a++)C[a]=[T[a][0]<0?T[a][0]+360:T[a][0],T[a][1]];b.push(d.tester(C))}:"ATA"===_?function(T){var C=w(T);if(null===C)return b.push(d.tester(T));var M=new Array(T.length+1),I=0;for(a=0;a<T.length;a++)a>C?M[I++]=[T[a][0]+360,T[a][1]]:a===C?(M[I++]=T[a],M[I++]=[T[a][0],-90]):M[I++]=T[a];var P=d.tester(M);P.pts.pop(),b.push(P)}:function(T){b.push(d.tester(T))},y.type){case"MultiPolygon":for(p=0;p<u.length;p++)for(c=0;c<u[p].length;c++)o(u[p][c]);break;case"Polygon":for(p=0;p<u.length;p++)o(u[p])}return b},getTraceGeojson:h,extractTraceFeature:function(s){var o=s[0].trace,p=h(o);if(!p)return!1;var c,a={},y=[];for(c=0;c<o._length;c++){var u=s[c];(u.loc||0===u.loc)&&(a[u.loc]=u)}function _(T){var C=r(T,o.featureidkey||"id").get(),M=a[C];if(M){var I=T.geometry;if("Polygon"===I.type||"MultiPolygon"===I.type){var P={type:"Feature",id:C,geometry:I,properties:{}};P.properties.ct=function(S){var E,R=S.geometry;if("MultiPolygon"===R.type)for(var D=R.coordinates,j=0,H=0;H<D.length;H++){var Y={type:"Polygon",coordinates:D[H]},X=k.default(Y);X>j&&(j=X,E=Y)}else E=R;return x.default(E).geometry.coordinates}(P),M.fIn=T,M.fOut=P,y.push(P)}else i.log(["Location",M.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete a[C]}switch(p.type){case"FeatureCollection":var b=p.features;for(c=0;c<b.length;c++)_(b[c]);break;case"Feature":_(p);break;default:return i.warn(["Invalid GeoJSON type",(p.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var w in a)i.log(["Location *"+w+"*","does not have a matching feature with id-key","*"+o.featureidkey+"*."].join(" "));return y},fetchTraceGeoData:function(s){var o=window.PlotlyGeoAssets||{},p=[];function c(_){return new Promise(function(b,w){m.json(_,function(T,C){return T?(delete o[_],w(new Error(404===T.status?'GeoJSON at URL "'+_+'" does not exist.':"Unexpected error while fetching from "+_))):(o[_]=C,b(C))})})}function a(_){return new Promise(function(b,w){var T=0,C=setInterval(function(){return o[_]&&"pending"!==o[_]?(clearInterval(C),b(o[_])):T>100?(clearInterval(C),w("Unexpected error while fetching from "+_)):void T++},50)})}for(var y=0;y<s.length;y++){var u=s[y][0].trace.geojson;"string"==typeof u&&(o[u]?"pending"===o[u]&&p.push(a(u)):(o[u]="pending",p.push(c(u))))}return p},computeBbox:function(s){return e.default(s)}}},{"./identity":513,"./is_plain_object":516,"./loggers":519,"./nested_property":523,"./polygon":527,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],509:[function(v,$,Q){"use strict";var m=v("../constants/numerical").BADNUM;Q.calcTraceToLineCoords=function(g){for(var k=g[0].trace.connectgaps,x=[],e=[],n=0;n<g.length;n++){var i=g[n].lonlat;i[0]!==m?e.push(i):!k&&e.length>0&&(x.push(e),e=[])}return e.length>0&&x.push(e),x},Q.makeLine=function(g){return 1===g.length?{type:"LineString",coordinates:g[0]}:{type:"MultiLineString",coordinates:g}},Q.makePolygon=function(g){if(1===g.length)return{type:"Polygon",coordinates:g};for(var k=new Array(g.length),x=0;x<g.length;x++)k[x]=[g[x]];return{type:"MultiPolygon",coordinates:k}},Q.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":491}],510:[function(v,$,Q){"use strict";var m,g,k,x=v("./mod").mod;function e(i,l,r,d,f,t,h,s){var o=r-i,p=f-i,c=h-f,a=d-l,y=t-l,u=s-t,_=o*u-c*a;if(0===_)return null;var b=(p*u-c*y)/_,w=(p*a-o*y)/_;return w<0||w>1||b<0||b>1?null:{x:i+o*b,y:l+a*b}}function n(i,l,r,d,f){var t=d*i+f*l;if(t<0)return d*d+f*f;if(t>r){var h=d-i,s=f-l;return h*h+s*s}var o=d*l-f*i;return o*o/r}Q.segmentsIntersect=e,Q.segmentDistance=function(i,l,r,d,f,t,h,s){if(e(i,l,r,d,f,t,h,s))return 0;var o=r-i,p=d-l,c=h-f,a=s-t,y=o*o+p*p,u=c*c+a*a,_=Math.min(n(o,p,y,f-i,t-l),n(o,p,y,h-i,s-l),n(c,a,u,i-f,l-t),n(c,a,u,r-f,d-t));return Math.sqrt(_)},Q.getTextLocation=function(i,l,r,d){if(i===g&&d===k||(m={},g=i,k=d),m[r])return m[r];var f=i.getPointAtLength(x(r-d/2,l)),t=i.getPointAtLength(x(r+d/2,l)),h=Math.atan((t.y-f.y)/(t.x-f.x)),s=i.getPointAtLength(x(r,l)),o={x:(4*s.x+f.x+t.x)/6,y:(4*s.y+f.y+t.y)/6,theta:h};return m[r]=o,o},Q.clearLocationCache=function(){g=null},Q.getVisibleSegment=function(i,l,r){var d,f,t=l.left,h=l.right,s=l.top,o=l.bottom,p=0,c=i.getTotalLength(),a=c;function y(_){var b=i.getPointAtLength(_);0===_?d=b:_===c&&(f=b);var w=b.x<t?t-b.x:b.x>h?b.x-h:0,T=b.y<s?s-b.y:b.y>o?b.y-o:0;return Math.sqrt(w*w+T*T)}for(var u=y(p);u;){if((p+=u+r)>a)return;u=y(p)}for(u=y(a);u;){if(p>(a-=u+r))return;u=y(a)}return{min:p,max:a,len:a-p,total:c,isClosed:0===p&&a===c&&Math.abs(d.x-f.x)<.1&&Math.abs(d.y-f.y)<.1}},Q.findPointOnPath=function(i,l,r,d){for(var f,t,h,s=(d=d||{}).pathLength||i.getTotalLength(),o=d.tolerance||.001,p=d.iterationLimit||30,c=i.getPointAtLength(0)[r]>i.getPointAtLength(s)[r]?-1:1,a=0,y=0,u=s;a<p;){if(h=(t=i.getPointAtLength(f=(y+u)/2))[r]-l,Math.abs(h)<o)return t;c*h>0?u=f:y=f,a++}return t}},{"./mod":522}],511:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("tinycolor2"),k=v("color-normalize"),x=v("../components/colorscale"),e=v("../components/color/attributes").defaultLine,n=v("./array").isArrayOrTypedArray,i=k(e);function l(f,t){var h=f;return h[3]*=t,h}function r(f){if(m(f))return i;var t=k(f);return t.length?t:i}function d(f){return m(f)?f:1}$.exports={formatColor:function(f,t,h){var s,o,p,c,a,y=f.color,u=n(y),_=n(t),b=x.extractOpts(f),w=[];if(s=void 0!==b.colorscale?x.makeColorScaleFuncFromTrace(f):r,o=u?function(C,M){return void 0===C[M]?i:k(s(C[M]))}:r,p=_?function(C,M){return void 0===C[M]?1:d(C[M])}:d,u||_)for(var T=0;T<h;T++)c=o(y,T),a=p(t,T),w[T]=l(c,a);else w=l(k(y),t);return w},parseColorScale:function(f){var t=x.extractOpts(f),h=t.colorscale;return t.reversescale&&(h=x.flipScale(t.colorscale)),h.map(function(s){var o=s[0],p=g(s[1]).toRgb();return{index:o,rgb:[p.r,p.g,p.b,p.a]}})}}},{"../components/color/attributes":366,"../components/colorscale":379,"./array":497,"color-normalize":89,"fast-isnumeric":190,tinycolor2:313}],512:[function(v,$,Q){"use strict";var m=v("./identity");function g(k){return[k]}$.exports={keyFun:function(k){return k.key},repeat:g,descend:m,wrap:g,unwrap:function(k){return k[0]}}},{"./identity":513}],513:[function(v,$,Q){"use strict";$.exports=function(m){return m}},{}],514:[function(v,$,Q){"use strict";$.exports=function(m,g){if(!g)return m;var k=1/Math.abs(g),x=k>1?(k*m+k*g)/k:m+g,e=String(x).length;if(e>16){var n=String(g).length;if(e>=String(m).length+n){var i=parseFloat(x).toPrecision(12);-1===i.indexOf("e+")&&(x=+i)}}return x}},{}],515:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("d3-time-format").utcFormat,k=v("d3-format").format,x=v("fast-isnumeric"),e=v("../constants/numerical"),n=e.FP_SAFE,i=-n,l=e.BADNUM,r=$.exports={};r.adjustFormat=function(U){return!U||/^\d[.]\df/.test(U)||/[.]\d%/.test(U)?U:"0.f"===U?"~f":/^\d%/.test(U)?"~%":/^\ds/.test(U)?"~s":!/^[~,.0$]/.test(U)&&/[&fps]/.test(U)?"~"+U:U};var d={};r.warnBadFormat=function(U){var B=String(U);d[B]||(d[B]=1,r.warn('encountered bad format: "'+B+'"'))},r.noFormat=function(U){return String(U)},r.numberFormat=function(U){var B;try{B=k(r.adjustFormat(U))}catch{return r.warnBadFormat(U),r.noFormat}return B},r.nestedProperty=v("./nested_property"),r.keyedContainer=v("./keyed_container"),r.relativeAttr=v("./relative_attr"),r.isPlainObject=v("./is_plain_object"),r.toLogRange=v("./to_log_range"),r.relinkPrivateKeys=v("./relink_private");var f=v("./array");r.isTypedArray=f.isTypedArray,r.isArrayOrTypedArray=f.isArrayOrTypedArray,r.isArray1D=f.isArray1D,r.ensureArray=f.ensureArray,r.concat=f.concat,r.maxRowLength=f.maxRowLength,r.minRowLength=f.minRowLength;var t=v("./mod");r.mod=t.mod,r.modHalf=t.modHalf;var h=v("./coerce");r.valObjectMeta=h.valObjectMeta,r.coerce=h.coerce,r.coerce2=h.coerce2,r.coerceFont=h.coerceFont,r.coercePattern=h.coercePattern,r.coerceHoverinfo=h.coerceHoverinfo,r.coerceSelectionMarkerOpacity=h.coerceSelectionMarkerOpacity,r.validate=h.validate;var s=v("./dates");r.dateTime2ms=s.dateTime2ms,r.isDateTime=s.isDateTime,r.ms2DateTime=s.ms2DateTime,r.ms2DateTimeLocal=s.ms2DateTimeLocal,r.cleanDate=s.cleanDate,r.isJSDate=s.isJSDate,r.formatDate=s.formatDate,r.incrementMonth=s.incrementMonth,r.dateTick0=s.dateTick0,r.dfltRange=s.dfltRange,r.findExactDates=s.findExactDates,r.MIN_MS=s.MIN_MS,r.MAX_MS=s.MAX_MS;var o=v("./search");r.findBin=o.findBin,r.sorterAsc=o.sorterAsc,r.sorterDes=o.sorterDes,r.distinctVals=o.distinctVals,r.roundUp=o.roundUp,r.sort=o.sort,r.findIndexOfMin=o.findIndexOfMin,r.sortObjectKeys=v("./sort_object_keys");var p=v("./stats");r.aggNums=p.aggNums,r.len=p.len,r.mean=p.mean,r.median=p.median,r.midRange=p.midRange,r.variance=p.variance,r.stdev=p.stdev,r.interp=p.interp;var c=v("./matrix");r.init2dArray=c.init2dArray,r.transposeRagged=c.transposeRagged,r.dot=c.dot,r.translationMatrix=c.translationMatrix,r.rotationMatrix=c.rotationMatrix,r.rotationXYMatrix=c.rotationXYMatrix,r.apply3DTransform=c.apply3DTransform,r.apply2DTransform=c.apply2DTransform,r.apply2DTransform2=c.apply2DTransform2,r.convertCssMatrix=c.convertCssMatrix,r.inverseTransformMatrix=c.inverseTransformMatrix;var a=v("./angles");r.deg2rad=a.deg2rad,r.rad2deg=a.rad2deg,r.angleDelta=a.angleDelta,r.angleDist=a.angleDist,r.isFullCircle=a.isFullCircle,r.isAngleInsideSector=a.isAngleInsideSector,r.isPtInsideSector=a.isPtInsideSector,r.pathArc=a.pathArc,r.pathSector=a.pathSector,r.pathAnnulus=a.pathAnnulus;var y=v("./anchor_utils");r.isLeftAnchor=y.isLeftAnchor,r.isCenterAnchor=y.isCenterAnchor,r.isRightAnchor=y.isRightAnchor,r.isTopAnchor=y.isTopAnchor,r.isMiddleAnchor=y.isMiddleAnchor,r.isBottomAnchor=y.isBottomAnchor;var u=v("./geometry2d");r.segmentsIntersect=u.segmentsIntersect,r.segmentDistance=u.segmentDistance,r.getTextLocation=u.getTextLocation,r.clearLocationCache=u.clearLocationCache,r.getVisibleSegment=u.getVisibleSegment,r.findPointOnPath=u.findPointOnPath;var _=v("./extend");r.extendFlat=_.extendFlat,r.extendDeep=_.extendDeep,r.extendDeepAll=_.extendDeepAll,r.extendDeepNoArrays=_.extendDeepNoArrays;var b=v("./loggers");r.log=b.log,r.warn=b.warn,r.error=b.error;var w=v("./regex");r.counterRegex=w.counter;var T=v("./throttle");r.throttle=T.throttle,r.throttleDone=T.done,r.clearThrottle=T.clear;var C=v("./dom");function M(U){var B={};for(var V in U)for(var ee=U[V],N=0;N<ee.length;N++)B[ee[N]]=+V;return B}r.getGraphDiv=C.getGraphDiv,r.isPlotDiv=C.isPlotDiv,r.removeElement=C.removeElement,r.addStyleRule=C.addStyleRule,r.addRelatedStyleRule=C.addRelatedStyleRule,r.deleteRelatedStyleRule=C.deleteRelatedStyleRule,r.getFullTransformMatrix=C.getFullTransformMatrix,r.getElementTransformMatrix=C.getElementTransformMatrix,r.getElementAndAncestors=C.getElementAndAncestors,r.equalDomRects=C.equalDomRects,r.clearResponsive=v("./clear_responsive"),r.preserveDrawingBuffer=v("./preserve_drawing_buffer"),r.makeTraceGroups=v("./make_trace_groups"),r._=v("./localize"),r.notifier=v("./notifier"),r.filterUnique=v("./filter_unique"),r.filterVisible=v("./filter_visible"),r.pushUnique=v("./push_unique"),r.increment=v("./increment"),r.cleanNumber=v("./clean_number"),r.ensureNumber=function(U){return x(U)?(U=Number(U))>n||U<i?l:U:l},r.isIndex=function(U,B){return!(void 0!==B&&U>=B)&&x(U)&&U>=0&&U%1==0},r.noop=v("./noop"),r.identity=v("./identity"),r.repeat=function(U,B){for(var V=new Array(B),ee=0;ee<B;ee++)V[ee]=U;return V},r.swapAttrs=function(U,B,V,ee){V||(V="x"),ee||(ee="y");for(var N=0;N<B.length;N++){var K=B[N],J=r.nestedProperty(U,K.replace("?",V)),te=r.nestedProperty(U,K.replace("?",ee)),ae=J.get();J.set(te.get()),te.set(ae)}},r.raiseToTop=function(U){U.parentNode.appendChild(U)},r.cancelTransition=function(U){return U.transition().duration(0)},r.constrain=function(U,B,V){return B>V?Math.max(V,Math.min(B,U)):Math.max(B,Math.min(V,U))},r.bBoxIntersect=function(U,B,V){return U.left<=B.right+(V=V||0)&&B.left<=U.right+V&&U.top<=B.bottom+V&&B.top<=U.bottom+V},r.simpleMap=function(U,B,V,ee,N){for(var K=U.length,J=new Array(K),te=0;te<K;te++)J[te]=B(U[te],V,ee,N);return J},r.randstr=function U(B,V,ee,N){if(ee||(ee=16),void 0===V&&(V=24),V<=0)return"0";var K,J,te=Math.log(Math.pow(2,V))/Math.log(ee),ae="";for(K=2;te===1/0;K*=2)te=Math.log(Math.pow(2,V/K))/Math.log(ee)*K;var le=te-Math.floor(te);for(K=0;K<Math.floor(te);K++)ae=Math.floor(Math.random()*ee).toString(ee)+ae;le&&(J=Math.pow(ee,le),ae=Math.floor(Math.random()*J).toString(ee)+ae);var se=parseInt(ae,ee);return B&&B[ae]||se!==1/0&&se>=Math.pow(2,V)?N>10?(r.warn("randstr failed uniqueness"),ae):U(B,V,ee,(N||0)+1):ae},r.OptionControl=function(U,B){U||(U={}),B||(B="opt");var V={optionList:[],_newoption:function(ee){ee[B]=U,V[ee.name]=ee,V.optionList.push(ee)}};return V["_"+B]=U,V},r.smooth=function(U,B){if((B=Math.round(B)||0)<2)return U;var V,ee,N,K,J=U.length,te=2*J,ae=2*B-1,le=new Array(ae),se=new Array(J);for(V=0;V<ae;V++)le[V]=(1-Math.cos(Math.PI*(V+1)/B))/(2*B);for(V=0;V<J;V++){for(K=0,ee=0;ee<ae;ee++)(N=V+ee+1-B)<-J?N-=te*Math.round(N/te):N>=te&&(N-=te*Math.floor(N/te)),N<0?N=-1-N:N>=J&&(N=te-1-N),K+=U[N]*le[ee];se[V]=K}return se},r.syncOrAsync=function(U,B,V){var ee;function N(){return r.syncOrAsync(U,B,V)}for(;U.length;)if((ee=(0,U.splice(0,1)[0])(B))&&ee.then)return ee.then(N);return V&&V(B)},r.stripTrailingSlash=function(U){return"/"===U.substr(-1)?U.substr(0,U.length-1):U},r.noneOrAll=function(U,B,V){if(U){var ee,N=!1,K=!0;for(ee=0;ee<V.length;ee++)null!=U[V[ee]]?N=!0:K=!1;if(N&&!K)for(ee=0;ee<V.length;ee++)U[V[ee]]=B[V[ee]]}},r.mergeArray=function(U,B,V,ee){var N="function"==typeof ee;if(r.isArrayOrTypedArray(U))for(var K=Math.min(U.length,B.length),J=0;J<K;J++){var te=U[J];B[J][V]=N?ee(te):te}},r.mergeArrayCastPositive=function(U,B,V){return r.mergeArray(U,B,V,function(ee){var N=+ee;return isFinite(N)&&N>0?N:0})},r.fillArray=function(U,B,V,ee){if(ee=ee||r.identity,r.isArrayOrTypedArray(U))for(var N=0;N<B.length;N++)B[N][V]=ee(U[N])},r.castOption=function(U,B,V,ee){ee=ee||r.identity;var N=r.nestedProperty(U,V).get();return r.isArrayOrTypedArray(N)?Array.isArray(B)&&r.isArrayOrTypedArray(N[B[0]])?ee(N[B[0]][B[1]]):ee(N[B]):N},r.extractOption=function(U,B,V,ee){if(V in U)return U[V];var N=r.nestedProperty(B,ee).get();return Array.isArray(N)?void 0:N},r.tagSelected=function(U,B,V){var ee,N,K=B.selectedpoints,J=B._indexToPoints;J&&(ee=M(J));for(var te=0;te<K.length;te++){var ae=K[te];if(r.isIndex(ae)||r.isArrayOrTypedArray(ae)&&r.isIndex(ae[0])&&r.isIndex(ae[1])){var le=ee?ee[ae]:ae,se=V?V[le]:le;void 0!==(N=se)&&N<U.length&&(U[se].selected=1)}}},r.selIndices2selPoints=function(U){var B=U.selectedpoints,V=U._indexToPoints;if(V){for(var ee=M(V),N=[],K=0;K<B.length;K++){var J=B[K];if(r.isIndex(J)){var te=ee[J];r.isIndex(te)&&N.push(te)}}return N}return B},r.getTargetArray=function(U,B){var V=B.target;if("string"==typeof V&&V){var ee=r.nestedProperty(U,V).get();return!!Array.isArray(ee)&&ee}return!!Array.isArray(V)&&V},r.minExtend=function(U,B){var V={};"object"!=typeof B&&(B={});var ee,N,K,J=Object.keys(U);for(ee=0;ee<J.length;ee++)K=U[N=J[ee]],"_"!==N.charAt(0)&&"function"!=typeof K&&(V[N]="module"===N?K:Array.isArray(K)?"colorscale"===N?K.slice():K.slice(0,3):r.isTypedArray(K)?K.subarray(0,3):K&&"object"==typeof K?r.minExtend(U[N],B[N]):K);for(J=Object.keys(B),ee=0;ee<J.length;ee++)"object"==typeof(K=B[N=J[ee]])&&N in V&&"object"==typeof V[N]||(V[N]=K);return V},r.titleCase=function(U){return U.charAt(0).toUpperCase()+U.substr(1)},r.containsAny=function(U,B){for(var V=0;V<B.length;V++)if(-1!==U.indexOf(B[V]))return!0;return!1},r.isIE=function(){return void 0!==window.navigator.msSaveBlob};var I=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return I.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;r.isIOS=function(){return P.test(window.navigator.userAgent)};var S=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var U=S.exec(window.navigator.userAgent);if(U&&2===U.length){var B=parseInt(U[1]);if(!isNaN(B))return B}return null},r.isD3Selection=function(U){return U instanceof m.selection},r.ensureSingle=function(U,B,V,ee){var N=U.select(B+(V?"."+V:""));if(N.size())return N;var K=U.append(B);return V&&K.classed(V,!0),ee&&K.call(ee),K},r.ensureSingleById=function(U,B,V,ee){var N=U.select(B+"#"+V);if(N.size())return N;var K=U.append(B).attr("id",V);return ee&&K.call(ee),K},r.objectFromPath=function(U,B){for(var V,ee=U.split("."),N=V={},K=0;K<ee.length;K++){var J=ee[K],te=null,ae=ee[K].match(/(.*)\[([0-9]+)\]/);ae?(te=ae[2],(V=V[J=ae[1]]=[])[te]=K===ee.length-1?B:{},V=V[te]):(V[J]=K===ee.length-1?B:{},V=V[J])}return N};var E=/^([^\[\.]+)\.(.+)?/,R=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;r.expandObjectPaths=function(U){var B,V,ee,N,K,J,te;if("object"==typeof U&&!Array.isArray(U))for(V in U)U.hasOwnProperty(V)&&((B=V.match(E))?(N=U[V],ee=B[1],delete U[V],U[ee]=r.extendDeepNoArrays(U[ee]||{},r.objectFromPath(V,r.expandObjectPaths(N))[ee])):(B=V.match(R))?(N=U[V],ee=B[1],K=parseInt(B[2]),delete U[V],U[ee]=U[ee]||[],"."===B[3]?(te=B[4],J=U[ee][K]=U[ee][K]||{},r.extendDeepNoArrays(J,r.objectFromPath(te,r.expandObjectPaths(N)))):U[ee][K]=r.expandObjectPaths(N)):U[V]=r.expandObjectPaths(U[V]));return U},r.numSeparate=function(U,B,V){if(V||(V=!1),"string"!=typeof B||0===B.length)throw new Error("Separator string required for formatting!");"number"==typeof U&&(U=String(U));var ee=/(\d+)(\d{3})/,N=B.charAt(0),K=B.charAt(1),J=U.split("."),te=J[0],ae=J.length>1?N+J[1]:"";if(K&&(J.length>1||te.length>4||V))for(;ee.test(te);)te=te.replace(ee,"$1"+K+"$2");return te+ae},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;r.templateString=function(U,B){var V={};return U.replace(r.TEMPLATE_STRING_REGEX,function(ee,N){var K;return D.test(N)?K=B[N]:(V[N]=V[N]||r.nestedProperty(B,N).get,K=V[N]()),r.isValidTextValue(K)?K:""})};var j={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return X.apply(j,arguments)};var H={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return X.apply(H,arguments)};var Y=/^[:|\|]/;function X(U,B,V){var ee=this,N=arguments;B||(B={});var K={};return U.replace(r.TEMPLATE_STRING_REGEX,function(J,te,ae){var le,se,ve,ue="_xother"===te||"_yother"===te,ye="_xother_"===te||"_yother_"===te,Me="xother_"===te||"yother_"===te,pe="xother"===te||"yother"===te||ue||Me||ye,ge=te;if((ue||ye)&&(ge=ge.substring(1)),(Me||ye)&&(ge=ge.substring(0,ge.length-1)),pe){if(void 0===(le=B[ge]))return""}else for(ve=3;ve<N.length;ve++)if(se=N[ve]){if(se.hasOwnProperty(ge)){le=se[ge];break}if(D.test(ge)||(le=r.nestedProperty(se,ge).get(),(le=K[ge]||r.nestedProperty(se,ge).get())&&(K[ge]=le)),void 0!==le)break}if(void 0===le&&ee)return ee.count<ee.max&&(r.warn("Variable '"+ge+"' in "+ee.name+" could not be found!"),le=J),ee.count===ee.max&&r.warn("Too many "+ee.name+" warnings - additional warnings will be suppressed"),ee.count++,J;if(ae){var we;if(":"===ae[0]&&(le=(we=V?V.numberFormat:r.numberFormat)(ae.replace(Y,""))(le)),"|"===ae[0]){we=V?V.timeFormat:g;var oe=r.dateTime2ms(le);le=r.formatDate(oe,ae.replace(Y,""),!1,we)}}else{var de=ge+"Label";B.hasOwnProperty(de)&&(le=B[de])}return pe&&(le="("+le+")",(ue||ye)&&(le=" "+le),(Me||ye)&&(le+=" ")),le})}r.subplotSort=function(U,B){for(var V=Math.min(U.length,B.length)+1,ee=0,N=0,K=0;K<V;K++){var J=U.charCodeAt(K)||0,te=B.charCodeAt(K)||0,ae=J>=48&&J<=57,le=te>=48&&te<=57;if(ae&&(ee=10*ee+J-48),le&&(N=10*N+te-48),!ae||!le){if(ee!==N)return ee-N;if(J!==te)return J-te}}return N-ee};var Z=2e9;r.seedPseudoRandom=function(){Z=2e9},r.pseudoRandom=function(){var U=Z;return Z=(69069*Z+1)%4294967296,Math.abs(Z-U)<429496729?r.pseudoRandom():Z/4294967296},r.fillText=function(U,B,V){var ee=Array.isArray(V)?function(J){V.push(J)}:function(J){V.text=J},N=r.extractOption(U,B,"htx","hovertext");if(r.isValidTextValue(N))return ee(N);var K=r.extractOption(U,B,"tx","text");return r.isValidTextValue(K)?ee(K):void 0},r.isValidTextValue=function(U){return U||0===U},r.formatPercent=function(U,B){B=B||0;for(var V=(Math.round(100*U*Math.pow(10,B))*Math.pow(.1,B)).toFixed(B)+"%",ee=0;ee<B;ee++)-1!==V.indexOf(".")&&(V=(V=V.replace("0%","%")).replace(".%","%"));return V},r.isHidden=function(U){var B=window.getComputedStyle(U).display;return!B||"none"===B},r.strTranslate=function(U,B){return U||B?"translate("+U+","+B+")":""},r.strRotate=function(U){return U?"rotate("+U+")":""},r.strScale=function(U){return 1!==U?"scale("+U+")":""},r.getTextTransform=function(U){var B=U.noCenter,V=U.textX,ee=U.textY,ae=U.rotate,le=U.scale;return le?le>1&&(le=1):le=0,r.strTranslate(U.targetX-le*(V+(U.anchorX||0)),U.targetY-le*(ee+(U.anchorY||0)))+r.strScale(le)+(ae?"rotate("+ae+(B?"":" "+V+" "+ee)+")":"")},r.setTransormAndDisplay=function(U,B){U.attr("transform",r.getTextTransform(B)),U.style("display",B.scale?null:"none")},r.ensureUniformFontSize=function(U,B){var V=r.extendFlat({},B);return V.size=Math.max(B.size,U._fullLayout.uniformtext.minsize||0),V},r.join2=function(U,B,V){var ee=U.length;return ee>1?U.slice(0,-1).join(B)+V+U[ee-1]:U.join(B)},r.bigFont=function(U){return Math.round(1.2*U)};var W=r.getFirefoxVersion(),re=null!==W&&W<86;r.getPositionFromD3Event=function(){return re?[m.event.layerX,m.event.layerY]:[m.event.offsetX,m.event.offsetY]}},{"../constants/numerical":491,"./anchor_utils":495,"./angles":496,"./array":497,"./clean_number":498,"./clear_responsive":500,"./coerce":501,"./dates":502,"./dom":503,"./extend":505,"./filter_unique":506,"./filter_visible":507,"./geometry2d":510,"./identity":513,"./increment":514,"./is_plain_object":516,"./keyed_container":517,"./localize":518,"./loggers":519,"./make_trace_groups":520,"./matrix":521,"./mod":522,"./nested_property":523,"./noop":524,"./notifier":525,"./preserve_drawing_buffer":529,"./push_unique":530,"./regex":532,"./relative_attr":533,"./relink_private":534,"./search":535,"./sort_object_keys":538,"./stats":539,"./throttle":542,"./to_log_range":543,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],516:[function(v,$,Q){"use strict";$.exports=function(m){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(m):"[object Object]"===Object.prototype.toString.call(m)&&Object.getPrototypeOf(m).hasOwnProperty("hasOwnProperty")}},{}],517:[function(v,$,Q){"use strict";var m=v("./nested_property"),g=/^\w*$/;$.exports=function(k,x,e,n){var i,l,r;e=e||"name",n=n||"value";var d={};x&&x.length?(r=m(k,x),l=r.get()):l=k,x=x||"";var f={};if(l)for(i=0;i<l.length;i++)f[l[i][e]]=i;var t=g.test(n),h={set:function(s,o){var p=null===o?4:0;if(!l){if(!r||4===p)return;r.set(l=[])}var c=f[s];if(void 0===c){if(4===p)return;p|=3,f[s]=c=l.length}else o!==(t?l[c][n]:m(l[c],n).get())&&(p|=2);var a=l[c]=l[c]||{};return a[e]=s,t?a[n]=o:m(a,n).set(o),null!==o&&(p&=-5),d[c]=d[c]|p,h},get:function(s){if(l){var o=f[s];return void 0===o?void 0:t?l[o][n]:m(l[o],n).get()}},rename:function(s,o){var p=f[s];return void 0===p||(d[p]=1|d[p],f[o]=p,delete f[s],l[p][e]=o),h},remove:function(s){var o=f[s];if(void 0===o)return h;var p=l[o];if(Object.keys(p).length>2)return d[o]=2|d[o],h.set(s,null);if(t){for(i=o;i<l.length;i++)d[i]=3|d[i];for(i=o;i<l.length;i++)f[l[i][e]]--;l.splice(o,1),delete f[s]}else m(p,n).set(null),d[o]=6|d[o];return h},constructUpdate:function(){for(var s,o,p={},c=Object.keys(d),a=0;a<c.length;a++)s=x+"["+(o=c[a])+"]",l[o]?(1&d[o]&&(p[s+"."+e]=l[o][e]),2&d[o]&&(p[s+"."+n]=t?4&d[o]?null:l[o][n]:4&d[o]?null:m(l[o],n).get())):p[s]=null;return p}};return h}},{"./nested_property":523}],518:[function(v,$,Q){"use strict";var m=v("../registry");$.exports=function(g,k){for(var x=g._context.locale,e=0;e<2;e++){for(var n=g._context.locales,i=0;i<2;i++){var l=(n[x]||{}).dictionary;if(l){var r=l[k];if(r)return r}n=m.localeRegistry}var d=x.split("-")[0];if(d===x)break;x=d}return k}},{"../registry":647}],519:[function(v,$,Q){"use strict";var m=v("../plot_api/plot_config").dfltConfig,g=v("./notifier"),k=$.exports={};k.log=function(){var x;if(m.logging>1){var e=["LOG:"];for(x=0;x<arguments.length;x++)e.push(arguments[x]);console.trace.apply(console,e)}if(m.notifyOnLogging>1){var n=[];for(x=0;x<arguments.length;x++)n.push(arguments[x]);g(n.join("<br>"),"long")}},k.warn=function(){var x;if(m.logging>0){var e=["WARN:"];for(x=0;x<arguments.length;x++)e.push(arguments[x]);console.trace.apply(console,e)}if(m.notifyOnLogging>0){var n=[];for(x=0;x<arguments.length;x++)n.push(arguments[x]);g(n.join("<br>"),"stick")}},k.error=function(){var x;if(m.logging>0){var e=["ERROR:"];for(x=0;x<arguments.length;x++)e.push(arguments[x]);console.error.apply(console,e)}if(m.notifyOnLogging>0){var n=[];for(x=0;x<arguments.length;x++)n.push(arguments[x]);g(n.join("<br>"),"stick")}}},{"../plot_api/plot_config":553,"./notifier":525}],520:[function(v,$,Q){"use strict";var m=v("@plotly/d3");$.exports=function(g,k,x){var e=g.selectAll("g."+x.replace(/\s/g,".")).data(k,function(i){return i[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",x),e.order();var n=g.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(i){i[0][n]=m.select(this)}),e}},{"@plotly/d3":58}],521:[function(v,$,Q){"use strict";var m=v("gl-mat4");Q.init2dArray=function(g,k){for(var x=new Array(g),e=0;e<g;e++)x[e]=new Array(k);return x},Q.transposeRagged=function(g){var k,x,e=0,n=g.length;for(k=0;k<n;k++)e=Math.max(e,g[k].length);var i=new Array(e);for(k=0;k<e;k++)for(i[k]=new Array(n),x=0;x<n;x++)i[k][x]=g[x][k];return i},Q.dot=function(g,k){if(!g.length||!k.length||g.length!==k.length)return null;var x,e,n=g.length;if(g[0].length)for(x=new Array(n),e=0;e<n;e++)x[e]=Q.dot(g[e],k);else if(k[0].length){var i=Q.transposeRagged(k);for(x=new Array(i.length),e=0;e<i.length;e++)x[e]=Q.dot(g,i[e])}else for(x=0,e=0;e<n;e++)x+=g[e]*k[e];return x},Q.translationMatrix=function(g,k){return[[1,0,g],[0,1,k],[0,0,1]]},Q.rotationMatrix=function(g){var k=g*Math.PI/180;return[[Math.cos(k),-Math.sin(k),0],[Math.sin(k),Math.cos(k),0],[0,0,1]]},Q.rotationXYMatrix=function(g,k,x){return Q.dot(Q.dot(Q.translationMatrix(k,x),Q.rotationMatrix(g)),Q.translationMatrix(-k,-x))},Q.apply3DTransform=function(g){return function(){var k=arguments,x=1===arguments.length?k[0]:[k[0],k[1],k[2]||0];return Q.dot(g,[x[0],x[1],x[2],1]).slice(0,3)}},Q.apply2DTransform=function(g){return function(){var k=arguments;3===k.length&&(k=k[0]);var x=1===arguments.length?k[0]:[k[0],k[1]];return Q.dot(g,[x[0],x[1],1]).slice(0,2)}},Q.apply2DTransform2=function(g){var k=Q.apply2DTransform(g);return function(x){return k(x.slice(0,2)).concat(k(x.slice(2,4)))}},Q.convertCssMatrix=function(g){if(g){var k=g.length;if(16===k)return g;if(6===k)return[g[0],g[1],0,0,g[2],g[3],0,0,0,0,1,0,g[4],g[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},Q.inverseTransformMatrix=function(g){var k=[];return m.invert(k,g),[[k[0],k[1],k[2],k[3]],[k[4],k[5],k[6],k[7]],[k[8],k[9],k[10],k[11]],[k[12],k[13],k[14],k[15]]]}},{"gl-mat4":210}],522:[function(v,$,Q){"use strict";$.exports={mod:function(m,g){var k=m%g;return k<0?k+g:k},modHalf:function(m,g){return Math.abs(m)>g/2?m-Math.round(m/g)*g:m}}},{}],523:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("./array").isArrayOrTypedArray;function k(d,f){return function(){var t,h,s,o,p,c=d;for(o=0;o<f.length-1;o++){if(-1===(t=f[o])){for(h=!0,s=[],p=0;p<c.length;p++)s[p]=k(c[p],f.slice(o+1))(),s[p]!==s[0]&&(h=!1);return h?s[0]:s}if("number"==typeof t&&!g(c)||"object"!=typeof(c=c[t])||null===c)return}if("object"==typeof c&&null!==c&&null!==(s=c[f[o]]))return s}}$.exports=function(d,f){if(m(f))f=String(f);else if("string"!=typeof f||"[-1]"===f.substr(f.length-4))throw"bad property string";for(var t,h,s,o=0,p=f.split(".");o<p.length;){if(t=String(p[o]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(t[1])p[o]=t[1];else{if(0!==o)throw"bad property string";p.splice(0,1)}for(h=t[2].substr(1,t[2].length-2).split("]["),s=0;s<h.length;s++)o++,p.splice(o,0,Number(h[s]))}o++}return"object"!=typeof d?{set:function(){throw"bad container"},get:function(){},astr:f,parts:p,obj:d}:{set:n(d,p,f),get:k(d,p),astr:f,parts:p,obj:d}};var x=/(^|\.)args\[/;function e(d,f){return void 0===d||null===d&&!f.match(x)}function n(d,f,t){return function(h){var s,o,p=d,c="",a=[[d,c]],y=e(h,t);for(o=0;o<f.length-1;o++){if("number"==typeof(s=f[o])&&!g(p))throw"array index but container is not an array";if(-1===s){if(y=!l(p,f.slice(o+1),h,t))break;return}if(!r(p,s,f[o+1],y))break;if("object"!=typeof(p=p[s])||null===p)throw"container is not an object";c=i(c,s),a.push([p,c])}if(y){if(o===f.length-1&&(delete p[f[o]],Array.isArray(p)&&+f[o]==p.length-1))for(;p.length&&void 0===p[p.length-1];)p.pop()}else p[f[o]]=h}}function i(d,f){var t=f;return m(f)?t="["+f+"]":d&&(t="."+f),d+t}function l(d,f,t,h){var s,o=g(t),p=!0,c=t,a=h.replace("-1",0),y=!o&&e(t,a),u=f[0];for(s=0;s<d.length;s++)a=h.replace("-1",s),o&&(y=e(c=t[s%t.length],a)),y&&(p=!1),r(d,s,u,y)&&n(d[s],f,h.replace("-1",s))(c);return p}function r(d,f,t,h){if(void 0===d[f]){if(h)return!1;d[f]="number"==typeof t?[]:{}}return!0}},{"./array":497,"fast-isnumeric":190}],524:[function(v,$,Q){"use strict";$.exports=function(){}},{}],525:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("fast-isnumeric"),k=[];$.exports=function(x,e){if(-1===k.indexOf(x)){k.push(x);var n=1e3;g(e)?n=e:"long"===e&&(n=3e3);var i=m.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0),i.selectAll(".notifier-note").data(k).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(r){var d=m.select(this);d.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){d.transition().call(l)});for(var f=d.append("p"),t=r.split(/<br\s*\/?>/g),h=0;h<t.length;h++)h&&f.append("br"),f.append("span").text(t[h]);"stick"===e?d.transition().duration(350).style("opacity",1):d.transition().duration(700).style("opacity",1).transition().delay(n).call(l)})}function l(r){r.duration(700).style("opacity",0).each("end",function(d){var f=k.indexOf(d);-1!==f&&k.splice(f,1),m.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],526:[function(v,$,Q){"use strict";var m=v("./setcursor"),g="data-savedcursor";$.exports=function(k,x){var e=k.attr(g);if(x){if(!e){for(var n=(k.attr("class")||"").split(" "),i=0;i<n.length;i++){var l=n[i];0===l.indexOf("cursor-")&&k.attr(g,l.substr(7)).classed(l,!1)}k.attr(g)||k.attr(g,"!!")}m(k,x)}else e&&(k.attr(g,null),"!!"===e?m(k):m(k,e))}},{"./setcursor":536}],527:[function(v,$,Q){"use strict";var m=v("./matrix").dot,g=v("../constants/numerical").BADNUM,k=$.exports={};k.tester=function(x){var e,n=x.slice(),i=n[0][0],l=i,r=n[0][1],d=r;for(n[n.length-1][0]===n[0][0]&&n[n.length-1][1]===n[0][1]||n.push(n[0]),e=1;e<n.length;e++)i=Math.min(i,n[e][0]),l=Math.max(l,n[e][0]),r=Math.min(r,n[e][1]),d=Math.max(d,n[e][1]);var f,t=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(t=!0,f=function(o){return o[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(t=!0,f=function(o){return o[1]===n[0][1]}));var h=!0,s=n[0];for(e=1;e<n.length;e++)if(s[0]!==n[e][0]||s[1]!==n[e][1]){h=!1;break}return{xmin:i,xmax:l,ymin:r,ymax:d,pts:n,contains:t?function(o,p){var c=o[0],a=o[1];return!(c===g||c<i||c>l||a===g||a<r||a>d||p&&f(o))}:function(o,p){var c=o[0],a=o[1];if(c===g||c<i||c>l||a===g||a<r||a>d)return!1;var y,u,_,b,w,T=n.length,C=n[0][0],M=n[0][1],I=0;for(y=1;y<T;y++)if(u=C,_=M,C=n[y][0],M=n[y][1],!(c<(b=Math.min(u,C))||c>Math.max(u,C)||a>Math.max(_,M)))if(a<Math.min(_,M))c!==b&&I++;else{if(a===(w=C===u?a:_+(c-u)*(M-_)/(C-u)))return 1!==y||!p;a<=w&&c!==b&&I++}return I%2==1},isRect:t,degenerate:h}},k.isSegmentBent=function(x,e,n,i){var l,r,d,f=x[e],t=[x[n][0]-f[0],x[n][1]-f[1]],h=m(t,t),s=Math.sqrt(h),o=[-t[1]/s,t[0]/s];for(l=e+1;l<n;l++)if((d=m(r=[x[l][0]-f[0],x[l][1]-f[1]],t))<0||d>h||Math.abs(m(r,o))>i)return!0;return!1},k.filter=function(x,e){var n=[x[0]],i=0,l=0;function r(d){x.push(d);var f=n.length,t=i;n.splice(l+1);for(var h=t+1;h<x.length;h++)(h===x.length-1||k.isSegmentBent(x,t,h+1,e))&&(n.push(x[h]),n.length<f-2&&(i=h,l=n.length-1),t=h)}return x.length>1&&r(x.pop()),{addPt:r,raw:x,filtered:n}}},{"../constants/numerical":491,"./matrix":521}],528:[function(v,$,Q){(function(m){(function(){"use strict";var g=v("./show_no_webgl_msg"),k=v("regl");$.exports=function(x,e,n){var i=x._fullLayout,l=!0;return i._glcanvas.each(function(r){if(r.regl)r.regl.preloadCachedCode(n);else if(!r.pick||i._has("parcoords")){try{r.regl=k({canvas:this,attributes:{antialias:!r.pick,preserveDrawingBuffer:!0},pixelRatio:x._context.plotGlPixelRatio||m.devicePixelRatio,extensions:e||[],cachedCode:n||{}})}catch{l=!1}r.regl||(l=!1),l&&this.addEventListener("webglcontextlost",function(d){x&&x.emit&&x.emit("plotly_webglcontextlost",{event:d,layer:r.key})},!1)}}),l||g({container:i._glcontainer.node()}),l}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":537,regl:284}],529:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("is-mobile");$.exports=function(k){var x,f;if("string"!=typeof(x=k&&k.hasOwnProperty("userAgent")?k.userAgent:(typeof navigator<"u"&&(f=navigator.userAgent),f&&f.headers&&"string"==typeof f.headers["user-agent"]&&(f=f.headers["user-agent"]),f)))return!0;var e=g({ua:{headers:{"user-agent":x}},tablet:!0,featureDetect:!1});if(!e)for(var n=x.split(" "),i=1;i<n.length;i++)if(-1!==n[i].indexOf("Safari"))for(var l=i-1;l>-1;l--){var r=n[l];if("Version/"===r.substr(0,8)){var d=r.substr(8).split(".")[0];if(m(d)&&(d=+d),d>=13)return!0}}return e}},{"fast-isnumeric":190,"is-mobile":234}],530:[function(v,$,Q){"use strict";$.exports=function(m,g){if(g instanceof RegExp){for(var k=g.toString(),x=0;x<m.length;x++)if(m[x]instanceof RegExp&&m[x].toString()===k)return m;m.push(g)}else!g&&0!==g||-1!==m.indexOf(g)||m.push(g);return m}},{}],531:[function(v,$,Q){"use strict";var m=v("../lib"),g=v("../plot_api/plot_config").dfltConfig,k={add:function(x,e,n,i,l){var r,d;x.undoQueue=x.undoQueue||{index:0,queue:[],sequence:!1},d=x.undoQueue.index,x.autoplay?x.undoQueue.inSequence||(x.autoplay=!1):(!x.undoQueue.sequence||x.undoQueue.beginSequence?(x.undoQueue.queue.splice(d,x.undoQueue.queue.length-d,r={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),x.undoQueue.index+=1):r=x.undoQueue.queue[d-1],x.undoQueue.beginSequence=!1,r&&(r.undo.calls.unshift(e),r.undo.args.unshift(n),r.redo.calls.push(i),r.redo.args.push(l)),x.undoQueue.queue.length>g.queueLength&&(x.undoQueue.queue.shift(),x.undoQueue.index--))},startSequence:function(x){x.undoQueue=x.undoQueue||{index:0,queue:[],sequence:!1},x.undoQueue.sequence=!0,x.undoQueue.beginSequence=!0},stopSequence:function(x){x.undoQueue=x.undoQueue||{index:0,queue:[],sequence:!1},x.undoQueue.sequence=!1,x.undoQueue.beginSequence=!1},undo:function(x){var e,n;if(!(void 0===x.undoQueue||isNaN(x.undoQueue.index)||x.undoQueue.index<=0)){for(x.undoQueue.index--,e=x.undoQueue.queue[x.undoQueue.index],x.undoQueue.inSequence=!0,n=0;n<e.undo.calls.length;n++)k.plotDo(x,e.undo.calls[n],e.undo.args[n]);x.undoQueue.inSequence=!1,x.autoplay=!1}},redo:function(x){var e,n;if(!(void 0===x.undoQueue||isNaN(x.undoQueue.index)||x.undoQueue.index>=x.undoQueue.queue.length)){for(e=x.undoQueue.queue[x.undoQueue.index],x.undoQueue.inSequence=!0,n=0;n<e.redo.calls.length;n++)k.plotDo(x,e.redo.calls[n],e.redo.args[n]);x.undoQueue.inSequence=!1,x.autoplay=!1,x.undoQueue.index++}},plotDo:function(x,e,n){x.autoplay=!0,n=function(i,l){for(var r,d=[],f=0;f<l.length;f++)d[f]=(r=l[f])===i?r:"object"==typeof r?Array.isArray(r)?m.extendDeep([],r):m.extendDeepAll({},r):r;return d}(x,n),e.apply(null,n)}};$.exports=k},{"../lib":515,"../plot_api/plot_config":553}],532:[function(v,$,Q){"use strict";Q.counter=function(m,g,k,x){var e=(g||"")+(k?"":"$"),n=!1===x?"":"^";return"xy"===m?new RegExp(n+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(n+m+"([2-9]|[1-9][0-9]+)?"+e)}},{}],533:[function(v,$,Q){"use strict";var m=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,g=/^[^\.\[\]]+$/;$.exports=function(k,x){for(;x;){var e=k.match(m);if(e)k=e[1];else{if(!k.match(g))throw new Error("bad relativeAttr call:"+[k,x]);k=""}if("^"!==x.charAt(0))break;x=x.slice(1)}return k&&"["!==x.charAt(0)?k+"."+x:k+x}},{}],534:[function(v,$,Q){"use strict";var m=v("./array").isArrayOrTypedArray,g=v("./is_plain_object");$.exports=function k(x,e){for(var n in e){var i=e[n],l=x[n];if(l!==i)if("_"===n.charAt(0)||"function"==typeof i){if(n in x)continue;x[n]=i}else if(m(i)&&m(l)&&g(i[0])){if("customdata"===n||"ids"===n)continue;for(var r=Math.min(i.length,l.length),d=0;d<r;d++)l[d]!==i[d]&&g(i[d])&&g(l[d])&&k(l[d],i[d])}else g(i)&&g(l)&&(k(l,i),Object.keys(l).length||delete x[n])}}},{"./array":497,"./is_plain_object":516}],535:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("./loggers"),k=v("./identity"),x=v("../constants/numerical").BADNUM;function e(r,d){return r<d}function n(r,d){return r<=d}function i(r,d){return r>d}function l(r,d){return r>=d}Q.findBin=function(r,d,f){if(m(d.start))return f?Math.ceil((r-d.start)/d.size-1e-9)-1:Math.floor((r-d.start)/d.size+1e-9);var t,h,s=0,o=d.length,p=0,c=o>1?(d[o-1]-d[0])/(o-1):1;for(h=c>=0?f?e:n:f?l:i,r+=1e-9*c*(f?-1:1)*(c>=0?1:-1);s<o&&p++<100;)h(d[t=Math.floor((s+o)/2)],r)?s=t+1:o=t;return p>90&&g.log("Long binary search..."),s-1},Q.sorterAsc=function(r,d){return r-d},Q.sorterDes=function(r,d){return d-r},Q.distinctVals=function(r){var d,f=r.slice();for(f.sort(Q.sorterAsc),d=f.length-1;d>-1&&f[d]===x;d--);for(var t,h=f[d]-f[0]||1,s=h/(d||1)/1e4,o=[],p=0;p<=d;p++){var c=f[p],a=c-t;void 0===t?(o.push(c),t=c):a>s&&(h=Math.min(h,a),o.push(c),t=c)}return{vals:o,minDiff:h}},Q.roundUp=function(r,d,f){for(var t,h=0,s=d.length-1,o=0,p=f?0:1,c=f?1:0,a=f?Math.ceil:Math.floor;h<s&&o++<100;)d[t=a((h+s)/2)]<=r?h=t+p:s=t-c;return d[h]},Q.sort=function(r,d){for(var f=0,t=0,h=1;h<r.length;h++){var s=d(r[h],r[h-1]);if(s<0?f=1:s>0&&(t=1),f&&t)return r.sort(d)}return t?r:r.reverse()},Q.findIndexOfMin=function(r,d){d=d||k;for(var f,t=1/0,h=0;h<r.length;h++){var s=d(r[h]);s<t&&(t=s,f=h)}return f}},{"../constants/numerical":491,"./identity":513,"./loggers":519,"fast-isnumeric":190}],536:[function(v,$,Q){"use strict";$.exports=function(m,g){(m.attr("class")||"").split(" ").forEach(function(k){0===k.indexOf("cursor-")&&m.classed(k,!1)}),g&&m.classed("cursor-"+g,!0)}},{}],537:[function(v,$,Q){"use strict";var m=v("../components/color"),g=function(){};$.exports=function(k){for(var x in k)"function"==typeof k[x]&&(k[x]=g);k.destroy=function(){k.container.parentNode.removeChild(k.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=m.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=m.lightLine,e.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",e.appendChild(n),k.container.appendChild(e),k.container.style.background="#FFFFFF",k.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":367}],538:[function(v,$,Q){"use strict";$.exports=function(m){return Object.keys(m).sort()}},{}],539:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("./array").isArrayOrTypedArray;Q.aggNums=function(k,x,e,n){var i,l;if((!n||n>e.length)&&(n=e.length),m(x)||(x=!1),g(e[0])){for(l=new Array(n),i=0;i<n;i++)l[i]=Q.aggNums(k,x,e[i]);e=l}for(i=0;i<n;i++)m(x)?m(e[i])&&(x=k(+x,+e[i])):x=e[i];return x},Q.len=function(k){return Q.aggNums(function(x){return x+1},0,k)},Q.mean=function(k,x){return x||(x=Q.len(k)),Q.aggNums(function(e,n){return e+n},0,k)/x},Q.midRange=function(k){if(void 0!==k&&0!==k.length)return(Q.aggNums(Math.max,null,k)+Q.aggNums(Math.min,null,k))/2},Q.variance=function(k,x,e){return x||(x=Q.len(k)),m(e)||(e=Q.mean(k,x)),Q.aggNums(function(n,i){return n+Math.pow(i-e,2)},0,k)/x},Q.stdev=function(k,x,e){return Math.sqrt(Q.variance(k,x,e))},Q.median=function(k){var x=k.slice().sort();return Q.interp(x,.5)},Q.interp=function(k,x){if(!m(x))throw"n should be a finite number";if((x=x*k.length-.5)<0)return k[0];if(x>k.length-1)return k[k.length-1];var e=x%1;return e*k[Math.ceil(x)]+(1-e)*k[Math.floor(x)]}},{"./array":497,"fast-isnumeric":190}],540:[function(v,$,Q){"use strict";var m=v("color-normalize");$.exports=function(g){return g?m(g):[0,0,0,1]}},{"color-normalize":89}],541:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../lib"),k=g.strTranslate,x=v("../constants/xmlns_namespaces"),e=v("../constants/alignment").LINE_SPACING,n=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;Q.convertToTspans=function(S,E,R){var D=S.text(),j=!S.attr("data-notex")&&E&&E._context.typesetMath&&typeof MathJax<"u"&&D.match(n),H=m.select(S.node().parentNode);if(!H.empty()){var Y=S.attr("class")?S.attr("class").split(" ")[0]:"text";return H.selectAll("svg."+(Y+="-math")).remove(),H.selectAll("g."+Y+"-group").remove(),S.style("display",null).attr({"data-unformatted":D,"data-math":"N"}),j?(E&&E._promises||[]).push(new Promise(function(Z){S.style("display","none");var W=parseInt(S.node().style.fontSize,10);!function(U,B,V){var ee,N,K,J,te=parseInt((MathJax.version||"").split(".")[0]);if(2===te||3===te){var ae=function(){var se="math-output-"+g.randstr({},64),ve=(J=m.select("body").append("div").attr({id:se}).style({visibility:"hidden",position:"absolute","font-size":B.fontSize+"px"}).text(U.replace(i,"\\lt ").replace(l,"\\gt "))).node();return 2===te?MathJax.Hub.Typeset(ve):MathJax.typeset([ve])},le=function(){var se=J.select(2===te?".MathJax_SVG":".MathJax"),ve=!se.empty()&&J.select("svg").node();if(ve){var ue,ye=ve.getBoundingClientRect();ue=2===te?m.select("body").select("#MathJax_SVG_glyphs"):se.select("defs"),V(se,ue,ye)}else g.log("There was an error in the tex syntax.",U),V();J.remove()};2===te?MathJax.Hub.Queue(function(){return N=g.extendDeepAll({},MathJax.Hub.config),K=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:r},displayAlign:"left"})},function(){if("SVG"!==(ee=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},ae,le,function(){if("SVG"!==ee)return MathJax.Hub.setRenderer(ee)},function(){return void 0!==K&&(MathJax.Hub.processSectionDelay=K),MathJax.Hub.Config(N)}):3===te&&(N=g.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=r,"svg"!==(ee=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ae(),le(),"svg"!==ee&&(MathJax.config.startup.output=ee),MathJax.config=N}))}else g.warn("No MathJax version:",MathJax.version)}(j[2],{fontSize:W},function(U,B,V){H.selectAll("svg."+Y).remove(),H.selectAll("g."+Y+"-group").remove();var ee=U&&U.select("svg");if(!ee||!ee.node())return X(),void Z();var N=H.append("g").classed(Y+"-group",!0).attr({"pointer-events":"none","data-unformatted":D,"data-math":"Y"});N.node().appendChild(ee.node()),B&&B.node()&&ee.node().insertBefore(B.node().cloneNode(!0),ee.node().firstChild);var K=V.width,J=V.height;ee.attr({class:Y,height:J,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var te=S.node().style.fill||"black",ae=ee.select("g");ae.attr({fill:te,stroke:te});var le=ae.node().getBoundingClientRect(),se=le.width,ve=le.height;(se>K||ve>J)&&(ee.style("overflow","hidden"),se=(le=ee.node().getBoundingClientRect()).width,ve=le.height);var ue=+S.attr("x"),ye=+S.attr("y"),Me=-(W||S.node().getBoundingClientRect().height)/4;if("y"===Y[0])N.attr({transform:"rotate("+[-90,ue,ye]+")"+k(-se/2,Me-ve/2)});else if("l"===Y[0])ye=Me-ve/2;else if("a"===Y[0]&&0!==Y.indexOf("atitle"))ue=0,ye=Me;else{var pe=S.attr("text-anchor");ue-=se*("middle"===pe?.5:"end"===pe?1:0),ye=ye+Me-ve/2}ee.attr({x:ue,y:ye}),R&&R.call(S,N),Z(N)})})):X(),S}function X(){H.empty()||(Y=S.attr("class")+"-math",H.select("svg."+Y).remove()),S.text("").style("white-space","pre"),function(Z,W){W=W.replace(s," ");var re,U=!1,B=[],V=-1;function ee(){V++;var oe=document.createElementNS(x.svg,"tspan");m.select(oe).attr({class:"line",dy:V*e+"em"}),Z.appendChild(oe),re=oe;var de=B;if(B=[{node:oe}],de.length>1)for(var Te=1;Te<de.length;Te++)N(de[Te])}function N(oe){var de,Te=oe.type,Ee={};if("a"===Te){de="a";var Ae=oe.target,De=oe.href,Ie=oe.popup;De&&(Ee={"xlink:xlink:show":"_blank"===Ae||"_"!==Ae.charAt(0)?"new":"replace",target:Ae,"xlink:xlink:href":De},Ie&&(Ee.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ie+'");return false;'))}else de="tspan";oe.style&&(Ee.style=oe.style);var Oe=document.createElementNS(x.svg,de);if("sup"===Te||"sub"===Te){K(re,"\u200b"),re.appendChild(Oe);var Xe=document.createElementNS(x.svg,"tspan");K(Xe,"\u200b"),m.select(Xe).attr("dy",t[Te]),Ee.dy=f[Te],re.appendChild(Oe),re.appendChild(Xe)}else re.appendChild(Oe);m.select(Oe).attr(Ee),re=oe.node=Oe,B.push(oe)}function K(oe,de){oe.appendChild(document.createTextNode(de))}function J(oe){if(1!==B.length){var de=B.pop();oe!==de.type&&g.log("Start tag <"+de.type+"> doesnt match end tag <"+oe+">. Pretending it did match.",W),re=B[B.length-1].node}else g.log("Ignoring unexpected end tag </"+oe+">.",W)}c.test(W)?ee():(re=Z,B=[{node:Z}]);for(var te=W.split(o),ae=0;ae<te.length;ae++){var le=te[ae],se=le.match(p),ve=se&&se[2].toLowerCase(),ue=d[ve];if("br"===ve)ee();else if(void 0===ue)K(re,M(le));else if(se[1])J(ve);else{var ye=se[4],Me={type:ve},pe=b(ye,a);if(pe?(pe=pe.replace(w,"$1 fill:"),ue&&(pe+=";"+ue)):ue&&(pe=ue),pe&&(Me.style=pe),"a"===ve){U=!0;var ge=b(ye,y);if(ge){var we=I(ge);we&&(Me.href=we,Me.target=b(ye,u)||"_blank",Me.popup=b(ye,_))}}N(Me)}}return U}(S.node(),D)&&S.style("pointer-events","all"),Q.positionText(S),R&&R.call(S)}};var i=/(<|&lt;|&#60;)/g,l=/(>|&gt;|&#62;)/g,r=[["$","$"],["\\(","\\)"]],d={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},f={sub:"0.3em",sup:"-0.6em"},t={sub:"-0.21em",sup:"0.42em"},h=["http:","https:","mailto:","",void 0,":"],s=Q.NEWLINES=/(\r\n?|\n)/g,o=/(<[^<>]*>)/,p=/<(\/?)([^ >]*)(\s+(.*))?>/i,c=/<br(\s+.*)?>/i;Q.BR_TAG_ALL=/<br(\s+.*)?>/gi;var a=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,y=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,u=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,_=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function b(S,E){if(!S)return null;var R=S.match(E),D=R&&(R[3]||R[4]);return D&&M(D)}var w=/(^|;)\s*color:/;Q.plainText=function(S,E){for(var R=void 0!==(E=E||{}).len&&-1!==E.len?E.len:1/0,D=void 0!==E.allowedTags?E.allowedTags:["br"],H=S.split(o),Y=[],X="",Z=0,W=0;W<H.length;W++){var re=H[W],U=re.match(p),B=U&&U[2].toLowerCase();if(B)-1!==D.indexOf(B)&&(Y.push(re),X=B);else{var V=re.length;if(Z+V<R)Y.push(re),Z+=V;else if(Z<R){var ee=R-Z;X&&("br"!==X||ee<=3||V<=3)&&Y.pop(),Y.push(R>3?re.substr(0,ee-3)+"...":re.substr(0,ee));break}X=""}}return Y.join("")};var T={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},C=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function M(S){return S.replace(C,function(E,R){return("#"===R.charAt(0)?function(D){if(!(D>1114111)){var j=String.fromCodePoint;if(j)return j(D);var H=String.fromCharCode;return D<=65535?H(D):H(55232+(D>>10),D%1024+56320)}}("x"===R.charAt(1)?parseInt(R.substr(2),16):parseInt(R.substr(1),10)):T[R])||E})}function I(S){var E=encodeURI(decodeURI(S)),R=document.createElement("a"),D=document.createElement("a");R.href=S,D.href=E;var H=D.protocol;return-1!==h.indexOf(R.protocol)&&-1!==h.indexOf(H)?E:""}function P(S,E,R){var D,j,H,Y=R.horizontalAlign,X=R.verticalAlign||"top",Z=S.node().getBoundingClientRect(),W=E.node().getBoundingClientRect();return j="bottom"===X?function(){return Z.bottom-D.height}:"middle"===X?function(){return Z.top+(Z.height-D.height)/2}:function(){return Z.top},H="right"===Y?function(){return Z.right-D.width}:"center"===Y?function(){return Z.left+(Z.width-D.width)/2}:function(){return Z.left},function(){D=this.node().getBoundingClientRect();var re=H()-W.left,U=j()-W.top,B=R.gd||{};if(R.gd){B._fullLayout._calcInverseTransform(B);var V=g.apply3DTransform(B._fullLayout._invTransform)(re,U);re=V[0],U=V[1]}return this.style({top:U+"px",left:re+"px","z-index":1e3}),this}}Q.convertEntities=M,Q.sanitizeHTML=function(S){S=S.replace(s," ");for(var E=document.createElement("p"),R=E,D=[],j=S.split(o),H=0;H<j.length;H++){var Y=j[H],X=Y.match(p),Z=X&&X[2].toLowerCase();if(Z in d)if(X[1])D.length&&(R=D.pop());else{var W=X[4],re=b(W,a),U=re?{style:re}:{};if("a"===Z){var B=b(W,y);if(B){var V=I(B);if(V){U.href=V;var ee=b(W,u);ee&&(U.target=ee)}}}var N=document.createElement(Z);R.appendChild(N),m.select(N).attr(U),R=N,D.push(N)}else R.appendChild(document.createTextNode(M(Y)))}return E.innerHTML},Q.lineCount=function(S){return S.selectAll("tspan.line").size()||1},Q.positionText=function(S,E,R){return S.each(function(){var D=m.select(this);function j(X,Z){return void 0===Z?null===(Z=D.attr(X))&&(D.attr(X,0),Z=0):D.attr(X,Z),Z}var H=j("x",E),Y=j("y",R);"text"===this.nodeName&&D.selectAll("tspan.line").attr({x:H,y:Y})})},Q.makeTextShadow=function(S){var E="1px ",R="1px ",D="1px ";return E+R+D+S+", -"+E+"-"+R+D+S+", "+E+"-"+R+D+S+", -"+E+R+D+S},Q.makeEditable=function(S,E){var R=E.gd,D=E.delegate,j=m.dispatch("edit","input","cancel"),H=D||S;if(S.style({"pointer-events":D?"none":"all"}),1!==S.size())throw new Error("boo");function Y(){var re,U,B,V,ee;re=m.select(R).select(".svg-container"),U=re.append("div"),B=S.node().style,V=parseFloat(B.fontSize||12),void 0===(ee=E.text)&&(ee=S.attr("data-unformatted")),U.classed("plugin-editable editable",!0).style({position:"absolute","font-family":B.fontFamily||"Arial","font-size":V,color:E.fill||B.fill||"black",opacity:1,"background-color":E.background||"transparent",outline:"#ffffff33 1px solid",margin:[-V/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ee).call(P(S,re,E)).on("blur",function(){R._editing=!1,S.text(this.textContent).style({opacity:1});var N,K=m.select(this).attr("class");(N=K?"."+K.split(" ")[0]+"-math-group":"[class*=-math-group]")&&m.select(S.node().parentNode).select(N).style({opacity:0});var J=this.textContent;m.select(this).transition().duration(0).remove(),m.select(document).on("mouseup",null),j.edit.call(S,J)}).on("focus",function(){var N=this;R._editing=!0,m.select(document).on("mouseup",function(){if(m.event.target===N)return!1;document.activeElement===U.node()&&U.node().blur()})}).on("keyup",function(){27===m.event.which?(R._editing=!1,S.style({opacity:1}),m.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),j.cancel.call(S,this.textContent)):(j.input.call(S,this.textContent),m.select(this).call(P(S,re,E)))}).on("keydown",function(){13===m.event.which&&this.blur()}).call(X),S.style({opacity:0});var Z,W=H.attr("class");(Z=W?"."+W.split(" ")[0]+"-math-group":"[class*=-math-group]")&&m.select(S.node().parentNode).select(Z).style({opacity:0})}function X(Z){var W=Z.node(),re=document.createRange();re.selectNodeContents(W);var U=window.getSelection();U.removeAllRanges(),U.addRange(re),W.focus()}return E.immediate?Y():H.on("click",Y),m.rebind(S,j,"on")}},{"../constants/alignment":483,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],542:[function(v,$,Q){"use strict";var m={};function g(k){k&&null!==k.timer&&(clearTimeout(k.timer),k.timer=null)}Q.throttle=function(k,x,e){var n=m[k],i=Date.now();if(!n){for(var l in m)m[l].ts<i-6e4&&delete m[l];n=m[k]={ts:0,timer:null}}function r(){e(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}g(n),i>n.ts+x?r():n.timer=setTimeout(function(){r(),n.timer=null},x)},Q.done=function(k){var x=m[k];return x&&x.timer?new Promise(function(e){var n=x.onDone;x.onDone=function(){n&&n(),e(),x.onDone=null}}):Promise.resolve()},Q.clear=function(k){if(k)g(m[k]),delete m[k];else for(var x in m)Q.clear(x)}},{}],543:[function(v,$,Q){"use strict";var m=v("fast-isnumeric");$.exports=function(g,k){if(g>0)return Math.log(g)/Math.LN10;var x=Math.log(Math.min(k[0],k[1]))/Math.LN10;return m(x)||(x=Math.log(Math.max(k[0],k[1]))/Math.LN10-6),x}},{"fast-isnumeric":190}],544:[function(v,$,Q){"use strict";var m=$.exports={},g=v("../plots/geo/constants").locationmodeToLayer,k=v("topojson-client").feature;m.getTopojsonName=function(x){return[x.scope.replace(/ /g,"-"),"_",x.resolution.toString(),"m"].join("")},m.getTopojsonPath=function(x,e){return x+e+".json"},m.getTopojsonFeatures=function(x,e){return k(e,e.objects[g[x.locationmode]]).features}},{"../plots/geo/constants":596,"topojson-client":316}],545:[function(v,$,Q){"use strict";$.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],546:[function(v,$,Q){"use strict";$.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],547:[function(v,$,Q){"use strict";var m=v("../registry");$.exports=function(g){for(var k,x,e=m.layoutArrayContainers,n=m.layoutArrayRegexes,i=g.split("[")[0],l=0;l<n.length;l++)if((x=g.match(n[l]))&&0===x.index){k=x[0];break}if(k||(k=e[e.indexOf(i)]),!k)return!1;var r=g.substr(k.length);return r?!!(x=r.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:k,index:Number(x[1]),property:x[3]||""}:{array:k,index:"",property:""}}},{"../registry":647}],548:[function(v,$,Q){"use strict";var m=v("../lib"),g=m.extendFlat,k=m.isPlainObject,x={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},n=x.flags.slice().concat(["fullReplot"]),i=e.flags.slice().concat("layoutReplot");function l(f){for(var t={},h=0;h<f.length;h++)t[f[h]]=!1;return t}function r(f,t,h){var s=g({},f);for(var o in s){var p=s[o];k(p)&&(s[o]=d(p,t,0,o))}return"from-root"===h&&(s.editType=t),s}function d(f,t,h,s){if(f.valType){var o=g({},f);if(o.editType=t,Array.isArray(f.items)){o.items=new Array(f.items.length);for(var p=0;p<f.items.length;p++)o.items[p]=d(f.items[p],t)}return o}return r(f,t,"_"===s.charAt(0)?"nested":"from-root")}$.exports={traces:x,layout:e,traceFlags:function(){return l(n)},layoutFlags:function(){return l(i)},update:function(f,t){var h=t.editType;if(h&&"none"!==h)for(var s=h.split("+"),o=0;o<s.length;o++)f[s[o]]=!0},overrideAll:r}},{"../lib":515}],549:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("gl-mat4/fromQuat"),k=v("../registry"),x=v("../lib"),e=v("../plots/plots"),n=v("../plots/cartesian/axis_ids"),i=v("../components/color"),l=n.cleanId,r=n.getFromTrace,d=k.traceIs;function f(u,_){var b=u[_],w=_.charAt(0);b&&"paper"!==b&&(u[_]=l(b,w,!0))}function t(u){function _(b,w){u[b]&&(!u.title||!u.title[w])&&(u.title||(u.title={}),u.title[w]=u[b],delete u[b])}u&&("string"!=typeof u.title&&"number"!=typeof u.title||(u.title={text:u.title}),_("titlefont","font"),_("titleposition","position"),_("titleside","side"),_("titleoffset","offset"))}function h(u){if(!x.isPlainObject(u))return!1;var _=u.name;return delete u.name,delete u.showlegend,("string"==typeof _||"number"==typeof _)&&String(_)}function s(u,_,b,w){if(b&&!w)return u;if(w&&!b||!u.trim())return _;if(!_.trim())return u;var T,C=Math.min(u.length,_.length);for(T=0;T<C&&u.charAt(T)===_.charAt(T);T++);return u.substr(0,T).trim()}function o(u){var _="middle",b="center";return"string"==typeof u&&(-1!==u.indexOf("top")?_="top":-1!==u.indexOf("bottom")&&(_="bottom"),-1!==u.indexOf("left")?b="left":-1!==u.indexOf("right")&&(b="right")),_+" "+b}function p(u,_){return _ in u&&"object"==typeof u[_]&&0===Object.keys(u[_]).length}Q.clearPromiseQueue=function(u){Array.isArray(u._promises)&&u._promises.length>0&&x.log("Clearing previous rejected promises from queue."),u._promises=[]},Q.cleanLayout=function(u){var _,b;u||(u={}),u.xaxis1&&(u.xaxis||(u.xaxis=u.xaxis1),delete u.xaxis1),u.yaxis1&&(u.yaxis||(u.yaxis=u.yaxis1),delete u.yaxis1),u.scene1&&(u.scene||(u.scene=u.scene1),delete u.scene1);var w=(e.subplotsRegistry.cartesian||{}).attrRegex,T=(e.subplotsRegistry.polar||{}).attrRegex,C=(e.subplotsRegistry.ternary||{}).attrRegex,M=(e.subplotsRegistry.gl3d||{}).attrRegex,I=Object.keys(u);for(_=0;_<I.length;_++){var P=I[_];if(w&&w.test(P)){var S=u[P];S.anchor&&"free"!==S.anchor&&(S.anchor=l(S.anchor)),S.overlaying&&(S.overlaying=l(S.overlaying)),S.type||(S.isdate?S.type="date":S.islog?S.type="log":!1===S.isdate&&!1===S.islog&&(S.type="linear")),"withzero"!==S.autorange&&"tozero"!==S.autorange||(S.autorange=!0,S.rangemode="tozero"),delete S.islog,delete S.isdate,delete S.categories,p(S,"domain")&&delete S.domain,void 0!==S.autotick&&(void 0===S.tickmode&&(S.tickmode=S.autotick?"auto":"linear"),delete S.autotick),t(S)}else if(T&&T.test(P))t(u[P].radialaxis);else if(C&&C.test(P)){var E=u[P];t(E.aaxis),t(E.baxis),t(E.caxis)}else if(M&&M.test(P)){var R=u[P],D=R.cameraposition;if(Array.isArray(D)&&4===D[0].length){var H=D[1],Y=D[2],X=g([],D[0]),Z=[];for(b=0;b<3;++b)Z[b]=H[b]+Y*X[2+4*b];R.camera={eye:{x:Z[0],y:Z[1],z:Z[2]},center:{x:H[0],y:H[1],z:H[2]},up:{x:0,y:0,z:1}},delete R.cameraposition}t(R.xaxis),t(R.yaxis),t(R.zaxis)}}var W=Array.isArray(u.annotations)?u.annotations.length:0;for(_=0;_<W;_++){var re=u.annotations[_];x.isPlainObject(re)&&(re.ref&&("paper"===re.ref?(re.xref="paper",re.yref="paper"):"data"===re.ref&&(re.xref="x",re.yref="y"),delete re.ref),f(re,"xref"),f(re,"yref"))}var U=Array.isArray(u.shapes)?u.shapes.length:0;for(_=0;_<U;_++){var B=u.shapes[_];x.isPlainObject(B)&&(f(B,"xref"),f(B,"yref"))}var V=Array.isArray(u.images)?u.images.length:0;for(_=0;_<V;_++){var ee=u.images[_];x.isPlainObject(ee)&&(f(ee,"xref"),f(ee,"yref"))}var N=u.legend;return N&&(N.x>3?(N.x=1.02,N.xanchor="left"):N.x<-2&&(N.x=-.02,N.xanchor="right"),N.y>3?(N.y=1.02,N.yanchor="bottom"):N.y<-2&&(N.y=-.02,N.yanchor="top")),t(u),"rotate"===u.dragmode&&(u.dragmode="orbit"),i.clean(u),u.template&&u.template.layout&&Q.cleanLayout(u.template.layout),u},Q.cleanData=function(u){for(var _=0;_<u.length;_++){var b,w=u[_];if("histogramy"===w.type&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var T=i.defaults,C=w.error_y.color||(d(w,"bar")?i.defaultLine:T[_%T.length]);w.error_y.color=i.addOpacity(i.rgb(C),i.opacity(C)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&("h"!==w.bardir||!d(w,"bar")&&"histogram"!==w.type.substr(0,9)||(w.orientation="h",Q.swapXYData(w)),delete w.bardir),"histogramy"===w.type&&Q.swapXYData(w),"histogramx"!==w.type&&"histogramy"!==w.type||(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=l(w.xaxis,"x")),w.yaxis&&(w.yaxis=l(w.yaxis,"y")),d(w,"gl3d")&&w.scene&&(w.scene=e.subplotsRegistry.gl3d.cleanId(w.scene)),!d(w,"pie-like")&&!d(w,"bar-like"))if(Array.isArray(w.textposition))for(b=0;b<w.textposition.length;b++)w.textposition[b]=o(w.textposition[b]);else w.textposition&&(w.textposition=o(w.textposition));var M=k.getModule(w);if(M&&M.colorbar){var I=M.colorbar.container,P=I?w[I]:w;P&&P.colorscale&&("YIGnBu"===P.colorscale&&(P.colorscale="YlGnBu"),"YIOrRd"===P.colorscale&&(P.colorscale="YlOrRd"))}if("surface"===w.type&&x.isPlainObject(w.contours)){var S=["x","y","z"];for(b=0;b<S.length;b++){var E=w.contours[S[b]];x.isPlainObject(E)&&(E.highlightColor&&(E.highlightcolor=E.highlightColor,delete E.highlightColor),E.highlightWidth&&(E.highlightwidth=E.highlightWidth,delete E.highlightWidth))}}if("candlestick"===w.type||"ohlc"===w.type){var R=!1!==(w.increasing||{}).showlegend,D=!1!==(w.decreasing||{}).showlegend,j=h(w.increasing),H=h(w.decreasing);if(!1!==j&&!1!==H){var Y=s(j,H,R,D);Y&&(w.name=Y)}else!j&&!H||w.name||(w.name=j||H)}if(Array.isArray(w.transforms)){var X=w.transforms;for(b=0;b<X.length;b++){var Z=X[b];if(x.isPlainObject(Z))switch(Z.type){case"filter":Z.filtersrc&&(Z.target=Z.filtersrc,delete Z.filtersrc),Z.calendar&&(Z.valuecalendar||(Z.valuecalendar=Z.calendar),delete Z.calendar);break;case"groupby":if(Z.styles=Z.styles||Z.style,Z.styles&&!Array.isArray(Z.styles)){var W=Z.styles,re=Object.keys(W);Z.styles=[];for(var U=0;U<re.length;U++)Z.styles.push({target:re[U],value:W[re[U]]})}}}}p(w,"line")&&delete w.line,"marker"in w&&(p(w.marker,"line")&&delete w.marker.line,p(w,"marker")&&delete w.marker),i.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),t(w),w.colorbar&&t(w.colorbar),w.marker&&w.marker.colorbar&&t(w.marker.colorbar),w.line&&w.line.colorbar&&t(w.line.colorbar),w.aaxis&&t(w.aaxis),w.baxis&&t(w.baxis)}},Q.swapXYData=function(u){var _;if(x.swapAttrs(u,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(u.z)&&Array.isArray(u.z[0])&&(u.transpose?delete u.transpose:u.transpose=!0),u.error_x&&u.error_y){var b=u.error_y,w="copy_ystyle"in b?b.copy_ystyle:!(b.color||b.thickness||b.width);x.swapAttrs(u,["error_?.copy_ystyle"]),w&&x.swapAttrs(u,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof u.hoverinfo){var T=u.hoverinfo.split("+");for(_=0;_<T.length;_++)"x"===T[_]?T[_]="y":"y"===T[_]&&(T[_]="x");u.hoverinfo=T.join("+")}},Q.coerceTraceIndices=function(u,_){if(m(_))return[_];if(!Array.isArray(_)||!_.length)return u.data.map(function(T,C){return C});if(Array.isArray(_)){for(var b=[],w=0;w<_.length;w++)x.isIndex(_[w],u.data.length)?b.push(_[w]):x.warn("trace index (",_[w],") is not a number or is out of bounds");return b}return _},Q.manageArrayContainers=function(u,_,b){var w=u.obj,T=u.parts,C=T.length,M=T[C-1],I=m(M);if(I&&null===_){var P=T.slice(0,C-1).join(".");x.nestedProperty(w,P).get().splice(M,1)}else I&&void 0===u.get()&&void 0===u.get()&&(b[u.astr]=null),u.set(_)};var c=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function a(u){var _=u.search(c);if(_>0)return u.substr(0,_)}Q.hasParent=function(u,_){for(var b=a(_);b;){if(b in u)return!0;b=a(b)}return!1};var y=["x","y","z"];Q.clearAxisTypes=function(u,_,b){for(var w=0;w<_.length;w++)for(var T=u._fullData[w],C=0;C<3;C++){var M=r(u,T,y[C]);if(M&&"log"!==M.type){var I=M._name,P=M._id.substr(1);if("scene"===P.substr(0,5)){if(void 0!==b[P])continue;I=P+"."+I}var S=I+".type";void 0===b[I]&&void 0===b[S]&&x.nestedProperty(u.layout,S).set(null)}}}},{"../components/color":367,"../lib":515,"../plots/cartesian/axis_ids":570,"../plots/plots":628,"../registry":647,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],550:[function(v,$,Q){"use strict";var m=v("./plot_api");Q._doPlot=m._doPlot,Q.newPlot=m.newPlot,Q.restyle=m.restyle,Q.relayout=m.relayout,Q.redraw=m.redraw,Q.update=m.update,Q._guiRestyle=m._guiRestyle,Q._guiRelayout=m._guiRelayout,Q._guiUpdate=m._guiUpdate,Q._storeDirectGUIEdit=m._storeDirectGUIEdit,Q.react=m.react,Q.extendTraces=m.extendTraces,Q.prependTraces=m.prependTraces,Q.addTraces=m.addTraces,Q.deleteTraces=m.deleteTraces,Q.moveTraces=m.moveTraces,Q.purge=m.purge,Q.addFrames=m.addFrames,Q.deleteFrames=m.deleteFrames,Q.animate=m.animate,Q.setPlotConfig=m.setPlotConfig,Q.toImage=v("./to_image"),Q.validate=v("./validate"),Q.downloadImage=v("../snapshot/download");var g=v("./template_api");Q.makeTemplate=g.makeTemplate,Q.validateTemplate=g.validateTemplate},{"../snapshot/download":649,"./plot_api":552,"./template_api":557,"./to_image":558,"./validate":559}],551:[function(v,$,Q){"use strict";var m=v("../lib/is_plain_object"),g=v("../lib/noop"),k=v("../lib/loggers"),x=v("../lib/search").sorterAsc,e=v("../registry");Q.containerArrayMatch=v("./container_array_match");var n=Q.isAddVal=function(l){return"add"===l||m(l)},i=Q.isRemoveVal=function(l){return null===l||"remove"===l};Q.applyContainerArrayChanges=function(l,r,d,f,t){var h=r.astr,s=e.getComponentMethod(h,"supplyLayoutDefaults"),o=e.getComponentMethod(h,"draw"),p=e.getComponentMethod(h,"drawOne"),c=f.replot||f.recalc||s===g||o===g,a=l.layout,y=l._fullLayout;if(d[""]){Object.keys(d).length>1&&k.warn("Full array edits are incompatible with other edits",h);var u=d[""][""];if(i(u))r.set(null);else{if(!Array.isArray(u))return k.warn("Unrecognized full array edit value",h,u),!0;r.set(u)}return!c&&(s(a,y),o(l),!0)}var _,b,w,T,C,M,I,S=Object.keys(d).map(Number).sort(x),E=r.get(),R=E||[],D=t(y,h).get(),j=[],H=-1,Y=R.length;for(_=0;_<S.length;_++)if(T=d[w=S[_]],C=Object.keys(T),I=n(M=T[""]),w<0||w>R.length-(I?0:1))k.warn("index out of range",h,w);else if(void 0!==M)C.length>1&&k.warn("Insertion & removal are incompatible with edits to the same index.",h,w),i(M)?j.push(w):I?("add"===M&&(M={}),R.splice(w,0,M),D&&D.splice(w,0,{})):k.warn("Unrecognized full object edit value",h,w,M),-1===H&&(H=w);else for(b=0;b<C.length;b++)t(R[w],C[b],h+"["+w+"].").set(T[C[b]]);for(_=j.length-1;_>=0;_--)R.splice(j[_],1),D&&D.splice(j[_],1);if(R.length?E||r.set(R):r.set(null),c)return!1;if(s(a,y),p!==g){var X;if(-1===H)X=S;else{for(Y=Math.max(R.length,Y),X=[],_=0;_<S.length&&!((w=S[_])>=H);_++)X.push(w);for(_=H;_<Y;_++)X.push(_)}for(_=0;_<X.length;_++)p(l,X[_])}else o(l);return!0}},{"../lib/is_plain_object":516,"../lib/loggers":519,"../lib/noop":524,"../lib/search":535,"../registry":647,"./container_array_match":547}],552:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("fast-isnumeric"),k=v("has-hover"),x=v("../lib"),e=x.nestedProperty,n=v("../lib/events"),i=v("../lib/queue"),l=v("../registry"),r=v("./plot_schema"),d=v("../plots/plots"),f=v("../plots/cartesian/axes"),t=v("../components/drawing"),h=v("../components/color"),s=v("../plots/cartesian/graph_interact").initInteractions,o=v("../constants/xmlns_namespaces"),p=v("../components/selections").clearOutline,c=v("./plot_config").dfltConfig,a=v("./manage_arrays"),y=v("./helpers"),u=v("./subroutines"),_=v("./edit_types"),b=v("../plots/cartesian/constants").AX_NAME_PATTERN,w=0;function T(oe){var de=oe._fullLayout;de._redrawFromAutoMarginCount?de._redrawFromAutoMarginCount--:oe.emit("plotly_afterplot")}function C(oe,de){try{oe._fullLayout._paper.style("background",de)}catch(Te){x.error(Te)}}function M(oe,de){C(oe,h.combine(de,"white"))}function I(oe,de){if(!oe._context){oe._context=x.extendDeep({},c);var Te=m.select("base");oe._context._baseUrl=Te.size()&&Te.attr("href")?window.location.href.split("#")[0]:""}var Ee,Ae,De,Ie=oe._context;if(de){for(Ae=Object.keys(de),Ee=0;Ee<Ae.length;Ee++)"editable"!==(De=Ae[Ee])&&"edits"!==De&&De in Ie&&(Ie[De]="setBackground"===De&&"opaque"===de[De]?M:de[De]);de.plot3dPixelRatio&&!Ie.plotGlPixelRatio&&(Ie.plotGlPixelRatio=Ie.plot3dPixelRatio);var Oe=de.editable;if(void 0!==Oe)for(Ie.editable=Oe,Ae=Object.keys(Ie.edits),Ee=0;Ee<Ae.length;Ee++)Ie.edits[Ae[Ee]]=Oe;if(de.edits)for(Ae=Object.keys(de.edits),Ee=0;Ee<Ae.length;Ee++)(De=Ae[Ee])in Ie.edits&&(Ie.edits[De]=de.edits[De]);Ie._exportedPlot=de._exportedPlot}Ie.staticPlot&&(Ie.editable=!1,Ie.edits={},Ie.autosizable=!1,Ie.scrollZoom=!1,Ie.doubleClick=!1,Ie.showTips=!1,Ie.showLink=!1,Ie.displayModeBar=!1),"hover"!==Ie.displayModeBar||k||(Ie.displayModeBar=!0),"transparent"!==Ie.setBackground&&"function"==typeof Ie.setBackground||(Ie.setBackground=C),Ie._hasZeroHeight=Ie._hasZeroHeight||0===oe.clientHeight,Ie._hasZeroWidth=Ie._hasZeroWidth||0===oe.clientWidth;var Xe=Ie.scrollZoom,Fe=Ie._scrollZoom={};if(!0===Xe)Fe.cartesian=1,Fe.gl3d=1,Fe.geo=1,Fe.mapbox=1;else if("string"==typeof Xe){var Pe=Xe.split("+");for(Ee=0;Ee<Pe.length;Ee++)Fe[Pe[Ee]]=1}else!1!==Xe&&(Fe.gl3d=1,Fe.geo=1,Fe.mapbox=1)}function P(oe,de){var Te,Ee,Ae=de+1,De=[];for(Te=0;Te<oe.length;Te++)(Ee=oe[Te])<0?De.push(Ae+Ee):De.push(Ee);return De}function S(oe,de,Te){var Ee,Ae;for(Ee=0;Ee<de.length;Ee++){if((Ae=de[Ee])!==parseInt(Ae,10))throw new Error("all values in "+Te+" must be integers");if(Ae>=oe.data.length||Ae<-oe.data.length)throw new Error(Te+" must be valid indices for gd.data.");if(de.indexOf(Ae,Ee+1)>-1||Ae>=0&&de.indexOf(-oe.data.length+Ae)>-1||Ae<0&&de.indexOf(oe.data.length+Ae)>-1)throw new Error("each index in "+Te+" must be unique.")}}function E(oe,de,Te){if(!Array.isArray(oe.data))throw new Error("gd.data must be an array.");if(void 0===de)throw new Error("currentIndices is a required argument.");if(Array.isArray(de)||(de=[de]),S(oe,de,"currentIndices"),void 0===Te||Array.isArray(Te)||(Te=[Te]),void 0!==Te&&S(oe,Te,"newIndices"),void 0!==Te&&de.length!==Te.length)throw new Error("current and new indices must be of equal length.")}function R(oe,de,Te,Ee,Ae){!function(qe,Qe,ct,bt){var Tt=x.isPlainObject(bt);if(!Array.isArray(qe.data))throw new Error("gd.data must be an array");if(!x.isPlainObject(Qe))throw new Error("update must be a key:value object");if(void 0===ct)throw new Error("indices must be an integer or array of integers");for(var _t in S(qe,ct,"indices"),Qe){if(!Array.isArray(Qe[_t])||Qe[_t].length!==ct.length)throw new Error("attribute "+_t+" must be an array of length equal to indices array length");if(Tt&&(!(_t in bt)||!Array.isArray(bt[_t])||bt[_t].length!==Qe[_t].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(oe,de,Te,Ee);for(var De=function(qe,Qe,ct,bt){var _t,nt,Ke,xt,Ht=x.isPlainObject(bt),Zt=[];for(var $t in Array.isArray(ct)||(ct=[ct]),ct=P(ct,qe.data.length-1),Qe)for(var Xt=0;Xt<ct.length;Xt++){if(_t=(nt=e(qe.data[ct[Xt]],$t)).get(),!x.isArrayOrTypedArray(Ke=Qe[$t][Xt]))throw new Error("attribute: "+$t+" index: "+Xt+" must be an array");if(!x.isArrayOrTypedArray(_t))throw new Error("cannot extend missing or non-array attribute: "+$t);if(_t.constructor!==Ke.constructor)throw new Error("cannot extend array with an array of a different type: "+$t);g(xt=Ht?bt[$t][Xt]:bt)||(xt=-1),Zt.push({prop:nt,target:_t,insert:Ke,maxp:Math.floor(xt)})}return Zt}(oe,de,Te,Ee),Ie={},Oe={},Xe=0;Xe<De.length;Xe++){var Fe=De[Xe].prop,Re=Ae(De[Xe].target,De[Xe].insert,De[Xe].maxp);Fe.set(Re[0]),Array.isArray(Ie[Fe.astr])||(Ie[Fe.astr]=[]),Ie[Fe.astr].push(Re[1]),Array.isArray(Oe[Fe.astr])||(Oe[Fe.astr]=[]),Oe[Fe.astr].push(De[Xe].target.length)}return{update:Ie,maxPoints:Oe}}function D(oe,de){var Te=new oe.constructor(oe.length+de.length);return Te.set(oe),Te.set(de,oe.length),Te}function j(oe,de,Te,Ee){oe=x.getGraphDiv(oe),y.clearPromiseQueue(oe);var Ae={};if("string"==typeof de)Ae[de]=Te;else{if(!x.isPlainObject(de))return x.warn("Restyle fail.",de,Te,Ee),Promise.reject();Ae=x.extendFlat({},de),void 0===Ee&&(Ee=Te)}Object.keys(Ae).length&&(oe.changed=!0);var De=y.coerceTraceIndices(oe,Ee),Ie=Z(oe,Ae,De),Oe=Ie.flags;Oe.calc&&(oe.calcdata=void 0),Oe.clearAxisTypes&&y.clearAxisTypes(oe,De,{});var Xe=[];Oe.fullReplot?Xe.push(Q._doPlot):(Xe.push(d.previousPromises),d.supplyDefaults(oe),Oe.markerSize&&(d.doCalcdata(oe),B(Xe)),Oe.style&&Xe.push(u.doTraceStyle),Oe.colorbars&&Xe.push(u.doColorBars),Xe.push(T)),Xe.push(d.rehover,d.redrag,d.reselect),i.add(oe,j,[oe,Ie.undoit,Ie.traces],j,[oe,Ie.redoit,Ie.traces]);var Fe=x.syncOrAsync(Xe,oe);return Fe&&Fe.then||(Fe=Promise.resolve()),Fe.then(function(){return oe.emit("plotly_restyle",Ie.eventData),oe})}function H(oe){return void 0===oe?null:oe}function Y(oe,de){return de?function(Te,Ee,Ae){var De=e(Te,Ee),Ie=De.set;return De.set=function(Oe){X((Ae||"")+Ee,De.get(),Oe,oe),Ie(Oe)},De}:e}function X(oe,de,Te,Ee){if(Array.isArray(de)||Array.isArray(Te))for(var Ae=Array.isArray(de)?de:[],De=Array.isArray(Te)?Te:[],Ie=Math.max(Ae.length,De.length),Oe=0;Oe<Ie;Oe++)X(oe+"["+Oe+"]",Ae[Oe],De[Oe],Ee);else if(x.isPlainObject(de)||x.isPlainObject(Te)){var Xe=x.isPlainObject(de)?de:{},Fe=x.isPlainObject(Te)?Te:{},Pe=x.extendFlat({},Xe,Fe);for(var Re in Pe)X(oe+"."+Re,Xe[Re],Fe[Re],Ee)}else void 0===Ee[oe]&&(Ee[oe]=H(de))}function Z(oe,de,Te){var Ee,Ae=oe._fullLayout,De=oe._fullData,Ie=oe.data,Oe=Ae._guiEditing,Xe=Y(Ae._preGUI,Oe),Fe=x.extendDeepAll({},de);W(de);var Pe,Re=_.traceFlags(),qe={},Qe={};function ct(){return Te.map(function(){})}function bt(it){var dt=f.id2name(it);-1===Pe.indexOf(dt)&&Pe.push(dt)}function Tt(it){return"LAYOUT"+it+".autorange"}function _t(it){return"LAYOUT"+it+".range"}function nt(it){for(var dt=it;dt<De.length;dt++)if(De[dt]._input===Ie[it])return De[dt]}function Ke(it,dt,Ct){if(Array.isArray(it))it.forEach(function(qt){Ke(qt,dt,Ct)});else if(!(it in de)&&!y.hasParent(de,it)){var Ut;if("LAYOUT"===it.substr(0,6))Ut=Xe(oe.layout,it.replace("LAYOUT",""));else{var Jt=Te[Ct];Ut=Y(Ae._tracePreGUI[nt(Jt)._fullInput.uid],Oe)(Ie[Jt],it)}it in Qe||(Qe[it]=ct()),void 0===Qe[it][Ct]&&(Qe[it][Ct]=H(Ut.get())),void 0!==dt&&Ut.set(dt)}}function xt(it){return function(dt){return De[dt][it]}}function Ht(it){return function(dt,Ct){return!1===dt?De[Te[Ct]][it]:null}}for(var Zt in de){if(y.hasParent(de,Zt))throw new Error("cannot set "+Zt+" and a parent attribute simultaneously");var $t,Xt,cr,Ft,Be,He,he=de[Zt];if("autobinx"!==Zt&&"autobiny"!==Zt||(Zt=Zt.charAt(Zt.length-1)+"bins",he=Array.isArray(he)?he.map(Ht(Zt)):!1===he?Te.map(xt(Zt)):null),qe[Zt]=he,"LAYOUT"!==Zt.substr(0,6)){for(Qe[Zt]=ct(),Ee=0;Ee<Te.length;Ee++)if($t=Ie[Te[Ee]],Xt=nt(Te[Ee]),Ft=(cr=Y(Ae._tracePreGUI[Xt._fullInput.uid],Oe)($t,Zt)).get(),void 0!==(Be=Array.isArray(he)?he[Ee%he.length]:he)){var be=cr.parts[cr.parts.length-1],ze=Zt.substr(0,Zt.length-be.length-1),Ve=ze?ze+".":"",Je=ze?e(Xt,ze).get():Xt;if((He=r.getTraceValObject(Xt,cr.parts))&&He.impliedEdits&&null!==Be)for(var Ye in He.impliedEdits)Ke(x.relativeAttr(Zt,Ye),He.impliedEdits[Ye],Ee);else if("thicknessmode"!==be&&"lenmode"!==be||Ft===Be||"fraction"!==Be&&"pixels"!==Be||!Je){if("type"===Zt&&("pie"===Be!=("pie"===Ft)||"funnelarea"===Be!=("funnelarea"===Ft))){var lt="x",st="y";"bar"!==Be&&"bar"!==Ft||"h"!==$t.orientation||(lt="y",st="x"),x.swapAttrs($t,["?","?src"],"labels",lt),x.swapAttrs($t,["d?","?0"],"label",lt),x.swapAttrs($t,["?","?src"],"values",st),"pie"===Ft||"funnelarea"===Ft?(e($t,"marker.color").set(e($t,"marker.colors").get()),Ae._pielayer.selectAll("g.trace").remove()):l.traceIs($t,"cartesian")&&e($t,"marker.colors").set(e($t,"marker.color").get())}}else{var Mt=Ae._size,Dt=Je.orient,ht="top"===Dt||"bottom"===Dt;if("thicknessmode"===be){var mt=ht?Mt.h:Mt.w;Ke(Ve+"thickness",Je.thickness*("fraction"===Be?1/mt:mt),Ee)}else{var Ot=ht?Mt.w:Mt.h;Ke(Ve+"len",Je.len*("fraction"===Be?1/Ot:Ot),Ee)}}if(Qe[Zt][Ee]=H(Ft),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Zt)){if("orientation"===Zt){cr.set(Be);var At=$t.x&&!$t.y?"h":"v";if((cr.get()||At)===Xt.orientation)continue}else"orientationaxes"===Zt&&($t.orientation={v:"h",h:"v"}[Xt.orientation]);y.swapXYData($t),Re.calc=Re.clearAxisTypes=!0}else-1!==d.dataArrayContainers.indexOf(cr.parts[0])?(y.manageArrayContainers(cr,Be,Qe),Re.calc=!0):(He?He.arrayOk&&!l.traceIs(Xt,"regl")&&(x.isArrayOrTypedArray(Be)||x.isArrayOrTypedArray(Ft))?Re.calc=!0:_.update(Re,He):Re.calc=!0,cr.set(Be))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(Zt)&&f.swap(oe,Te),"orientationaxes"===Zt){var It=e(oe.layout,"hovermode"),Se=It.get();"x"===Se?It.set("y"):"y"===Se?It.set("x"):"x unified"===Se?It.set("y unified"):"y unified"===Se&&It.set("x unified")}if(-1!==["orientation","type"].indexOf(Zt)){for(Pe=[],Ee=0;Ee<Te.length;Ee++){var Ze=Ie[Te[Ee]];l.traceIs(Ze,"cartesian")&&(bt(Ze.xaxis||"x"),bt(Ze.yaxis||"y"))}Ke(Pe.map(Tt),!0,0),Ke(Pe.map(_t),[0,1],0)}}else cr=Xe(oe.layout,Zt.replace("LAYOUT","")),Qe[Zt]=[H(cr.get())],cr.set(Array.isArray(he)?he[0]:he),Re.calc=!0}return(Re.calc||Re.plot)&&(Re.fullReplot=!0),{flags:Re,undoit:Qe,redoit:qe,traces:Te,eventData:x.extendDeepNoArrays([],[Fe,Te])}}function W(oe){var de,Te,Ee,Ae=x.counterRegex("axis",".title",!1,!1),De=/colorbar\.title$/,Ie=Object.keys(oe);for(de=0;de<Ie.length;de++)Ee=oe[Te=Ie[de]],"title"!==Te&&!Ae.test(Te)&&!De.test(Te)||"string"!=typeof Ee&&"number"!=typeof Ee?Te.indexOf("titlefont")>-1&&-1===Te.indexOf("grouptitlefont")?Oe(Te,Te.replace("titlefont","title.font")):Te.indexOf("titleposition")>-1?Oe(Te,Te.replace("titleposition","title.position")):Te.indexOf("titleside")>-1?Oe(Te,Te.replace("titleside","title.side")):Te.indexOf("titleoffset")>-1&&Oe(Te,Te.replace("titleoffset","title.offset")):Oe(Te,Te.replace("title","title.text"));function Oe(Xe,Fe){oe[Fe]=oe[Xe],delete oe[Xe]}}function re(oe,de,Te){oe=x.getGraphDiv(oe),y.clearPromiseQueue(oe);var Ee={};if("string"==typeof de)Ee[de]=Te;else{if(!x.isPlainObject(de))return x.warn("Relayout fail.",de,Te),Promise.reject();Ee=x.extendFlat({},de)}Object.keys(Ee).length&&(oe.changed=!0);var Ae=K(oe,Ee),De=Ae.flags;De.calc&&(oe.calcdata=void 0);var Ie=[d.previousPromises];De.layoutReplot?Ie.push(u.layoutReplot):Object.keys(Ee).length&&(U(oe,De,Ae)||d.supplyDefaults(oe),De.legend&&Ie.push(u.doLegend),De.layoutstyle&&Ie.push(u.layoutStyles),De.axrange&&B(Ie,Ae.rangesAltered),De.ticks&&Ie.push(u.doTicksRelayout),De.modebar&&Ie.push(u.doModeBar),De.camera&&Ie.push(u.doCamera),De.colorbars&&Ie.push(u.doColorBars),Ie.push(T)),Ie.push(d.rehover,d.redrag,d.reselect),i.add(oe,re,[oe,Ae.undoit],re,[oe,Ae.redoit]);var Oe=x.syncOrAsync(Ie,oe);return Oe&&Oe.then||(Oe=Promise.resolve(oe)),Oe.then(function(){return oe.emit("plotly_relayout",Ae.eventData),oe})}function U(oe,de,Te){var Ee=oe._fullLayout;if(!de.axrange)return!1;for(var Ae in de)if("axrange"!==Ae&&de[Ae])return!1;for(var De in Te.rangesAltered){var Ie=f.id2name(De),Oe=oe.layout[Ie],Xe=Ee[Ie];if(Xe.autorange=Oe.autorange,Oe.range&&(Xe.range=Oe.range.slice()),Xe.cleanRange(),Xe._matchGroup)for(var Fe in Xe._matchGroup)if(Fe!==De){var Pe=Ee[f.id2name(Fe)];Pe.autorange=Xe.autorange,Pe.range=Xe.range.slice(),Pe._input.range=Xe.range.slice()}}return!0}function B(oe,de){oe.push(p,u.doAutoRangeAndConstraints,de?function(Ee){var Ae=[];for(var De in de){var Ie=f.getFromId(Ee,De);if(Ae.push(De),-1!==(Ie.ticklabelposition||"").indexOf("inside")&&Ie._anchorAxis&&Ae.push(Ie._anchorAxis._id),Ie._matchGroup)for(var Oe in Ie._matchGroup)de[Oe]||Ae.push(Oe)}return f.draw(Ee,Ae,{skipTitle:!0})}:function(Ee){return f.draw(Ee,"redraw")},u.drawData,u.finalDraw)}var V=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ee=/^[xyz]axis[0-9]*\.autorange$/,N=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function K(oe,de){var Te,Ee,Ae,De=oe.layout,Ie=oe._fullLayout,Xe=Y(Ie._preGUI,Ie._guiEditing),Fe=Object.keys(de),Pe=f.list(oe),Re=x.extendDeepAll({},de),qe={};for(W(de),Fe=Object.keys(de),Ee=0;Ee<Fe.length;Ee++)if(0===Fe[Ee].indexOf("allaxes")){for(Ae=0;Ae<Pe.length;Ae++){var Qe=Pe[Ae]._id.substr(1),ct=-1!==Qe.indexOf("scene")?Qe+".":"",bt=Fe[Ee].replace("allaxes",ct+Pe[Ae]._name);de[bt]||(de[bt]=de[Fe[Ee]])}delete de[Fe[Ee]]}var Tt=_.layoutFlags(),_t={},nt={};function Ke(Jt,qt){if(Array.isArray(Jt))Jt.forEach(function(Sr){Ke(Sr,qt)});else if(!(Jt in de)&&!y.hasParent(de,Jt)){var pr=Xe(De,Jt);Jt in nt||(nt[Jt]=H(pr.get())),void 0!==qt&&pr.set(qt)}}var xt,Ht={};function Zt(Jt){var qt=f.name2id(Jt.split(".")[0]);return Ht[qt]=1,qt}for(var $t in de){if(y.hasParent(de,$t))throw new Error("cannot set "+$t+" and a parent attribute simultaneously");for(var Xt=Xe(De,$t),cr=de[$t],Ft=Xt.parts.length-1;Ft>0&&"string"!=typeof Xt.parts[Ft];)Ft--;var Be=Xt.parts[Ft],He=Xt.parts[Ft-1]+"."+Be,he=Xt.parts.slice(0,Ft).join("."),be=e(oe.layout,he).get(),ze=e(Ie,he).get(),Ve=Xt.get();if(void 0!==cr){_t[$t]=cr,nt[$t]="reverse"===Be?cr:H(Ve);var Je=r.getLayoutValObject(Ie,Xt.parts);if(Je&&Je.impliedEdits&&null!==cr)for(var Ye in Je.impliedEdits)Ke(x.relativeAttr($t,Ye),Je.impliedEdits[Ye]);if(-1!==["width","height"].indexOf($t))if(cr){Ke("autosize",null);var lt="height"===$t?"width":"height";Ke(lt,Ie[lt])}else Ie[$t]=oe._initialAutoSize[$t];else if("autosize"===$t)Ke("width",cr?null:Ie.width),Ke("height",cr?null:Ie.height);else if(He.match(V))Zt(He),e(Ie,he+"._inputRange").set(null);else if(He.match(ee)){Zt(He),e(Ie,he+"._inputRange").set(null);var st=e(Ie,he).get();st._inputDomain&&(st._input.domain=st._inputDomain.slice())}else He.match(N)&&e(Ie,he+"._inputDomain").set(null);if("type"===Be){xt=be;var Mt="linear"===ze.type&&"log"===cr;if(Mt||"log"===ze.type&&"linear"===cr){if(xt&&xt.range)if(ze.autorange)Mt&&(xt.range=xt.range[1]>xt.range[0]?[1,2]:[2,1]);else{var ht=xt.range[0],mt=xt.range[1];Mt?(ht<=0&&mt<=0&&Ke(he+".autorange",!0),ht<=0?ht=mt/1e6:mt<=0&&(mt=ht/1e6),Ke(he+".range[0]",Math.log(ht)/Math.LN10),Ke(he+".range[1]",Math.log(mt)/Math.LN10)):(Ke(he+".range[0]",Math.pow(10,ht)),Ke(he+".range[1]",Math.pow(10,mt)))}else Ke(he+".autorange",!0);Array.isArray(Ie._subplots.polar)&&Ie._subplots.polar.length&&Ie[Xt.parts[0]]&&"radialaxis"===Xt.parts[1]&&delete Ie[Xt.parts[0]]._subplot.viewInitial["radialaxis.range"],l.getComponentMethod("annotations","convertCoords")(oe,ze,cr,Ke),l.getComponentMethod("images","convertCoords")(oe,ze,cr,Ke)}else Ke(he+".autorange",!0),Ke(he+".range",null);e(Ie,he+"._inputRange").set(null)}else if(Be.match(b)){var Ot=e(Ie,$t).get(),At=(cr||{}).type;At&&"-"!==At||(At="linear"),l.getComponentMethod("annotations","convertCoords")(oe,Ot,At,Ke),l.getComponentMethod("images","convertCoords")(oe,Ot,At,Ke)}var It=a.containerArrayMatch($t);if(It){Te=It.array;var Se=It.property,Ze=Je||{editType:"calc"};""!==(Ee=It.index)&&""===Se&&(a.isAddVal(cr)?nt[$t]=null:a.isRemoveVal(cr)?nt[$t]=(e(De,Te).get()||[])[Ee]:x.warn("unrecognized full object value",de)),_.update(Tt,Ze),qe[Te]||(qe[Te]={});var it=qe[Te][Ee];it||(it=qe[Te][Ee]={}),it[Se]=cr,delete de[$t]}else"reverse"===Be?(be.range?be.range.reverse():(Ke(he+".autorange",!0),be.range=[1,0]),ze.autorange?Tt.calc=!0:Tt.plot=!0):("dragmode"===$t&&(!1===cr&&!1!==Ve||!1!==cr&&!1===Ve)||Ie._has("scatter-like")&&Ie._has("regl")&&"dragmode"===$t&&("lasso"===cr||"select"===cr)&&"lasso"!==Ve&&"select"!==Ve||Ie._has("gl2d")?Tt.plot=!0:Je?_.update(Tt,Je):Tt.calc=!0,Xt.set(cr))}}for(Te in qe)a.applyContainerArrayChanges(oe,Xe(De,Te),qe[Te],Tt,Xe)||(Tt.plot=!0);for(var dt in Ht){var Ct=(xt=f.getFromId(oe,dt))&&xt._constraintGroup;if(Ct)for(var Ut in Tt.calc=!0,Ct)Ht[Ut]||(f.getFromId(oe,Ut)._constraintShrinkable=!0)}return(J(oe)||de.height||de.width)&&(Tt.plot=!0),(Tt.plot||Tt.calc)&&(Tt.layoutReplot=!0),{flags:Tt,rangesAltered:Ht,undoit:nt,redoit:_t,eventData:Re}}function J(oe){var de=oe._fullLayout,Te=de.width,Ee=de.height;return oe.layout.autosize&&d.plotAutoSize(oe,oe.layout,de),de.width!==Te||de.height!==Ee}function te(oe,de,Te,Ee){oe=x.getGraphDiv(oe),y.clearPromiseQueue(oe),x.isPlainObject(de)||(de={}),x.isPlainObject(Te)||(Te={}),Object.keys(de).length&&(oe.changed=!0),Object.keys(Te).length&&(oe.changed=!0);var Ae=y.coerceTraceIndices(oe,Ee),De=Z(oe,x.extendFlat({},de),Ae),Ie=De.flags,Oe=K(oe,x.extendFlat({},Te)),Xe=Oe.flags;(Ie.calc||Xe.calc)&&(oe.calcdata=void 0),Ie.clearAxisTypes&&y.clearAxisTypes(oe,Ae,Te);var Fe=[];Xe.layoutReplot?Fe.push(u.layoutReplot):Ie.fullReplot?Fe.push(Q._doPlot):(Fe.push(d.previousPromises),U(oe,Xe,Oe)||d.supplyDefaults(oe),Ie.style&&Fe.push(u.doTraceStyle),(Ie.colorbars||Xe.colorbars)&&Fe.push(u.doColorBars),Xe.legend&&Fe.push(u.doLegend),Xe.layoutstyle&&Fe.push(u.layoutStyles),Xe.axrange&&B(Fe,Oe.rangesAltered),Xe.ticks&&Fe.push(u.doTicksRelayout),Xe.modebar&&Fe.push(u.doModeBar),Xe.camera&&Fe.push(u.doCamera),Fe.push(T)),Fe.push(d.rehover,d.redrag,d.reselect),i.add(oe,te,[oe,De.undoit,Oe.undoit,De.traces],te,[oe,De.redoit,Oe.redoit,De.traces]);var Pe=x.syncOrAsync(Fe,oe);return Pe&&Pe.then||(Pe=Promise.resolve(oe)),Pe.then(function(){return oe.emit("plotly_update",{data:De.eventData,layout:Oe.eventData}),oe})}function ae(oe){return function(de){de._fullLayout._guiEditing=!0;var Te=oe.apply(null,arguments);return de._fullLayout._guiEditing=!1,Te}}var le=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],se=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ve(oe,de){for(var Te=0;Te<de.length;Te++){var Ee=de[Te],Ae=oe.match(Ee.pattern);if(Ae){var De=Ae[1]||"";return{head:De,tail:oe.substr(De.length+1),attr:Ee.attr}}}}function ue(oe,de){var Te=e(de,oe).get();if(void 0!==Te)return Te;var Ee=oe.split(".");for(Ee.pop();Ee.length>1;)if(Ee.pop(),void 0!==(Te=e(de,Ee.join(".")+".uirevision").get()))return Te;return de.uirevision}function ye(oe,de){for(var Te=0;Te<de.length;Te++)if(de[Te]._fullInput.uid===oe)return Te;return-1}function Me(oe,de,Te){for(var Ee=0;Ee<de.length;Ee++)if(de[Ee].uid===oe)return Ee;return!de[Te]||de[Te].uid?-1:Te}function pe(oe,de){var Te=x.isPlainObject(oe),Ee=Array.isArray(oe);return Te||Ee?(Te&&x.isPlainObject(de)||Ee&&Array.isArray(de))&&JSON.stringify(oe)===JSON.stringify(de):oe===de}function ge(oe,de,Te,Ee){var Ae,De,Ie,Oe=Ee.getValObject,Xe=Ee.flags,Fe=Ee.immutable,Pe=Ee.inArray,Re=Ee.arrayIndex;function qe(){var be=Ae.editType;Pe&&-1!==be.indexOf("arraydraw")?x.pushUnique(Xe.arrays[Pe],Re):(_.update(Xe,Ae),"none"!==be&&Xe.nChanges++,Ee.transition&&Ae.anim&&Xe.nChangesAnim++,(V.test(Ie)||ee.test(Ie))&&(Xe.rangesAltered[Te[0]]=1),N.test(Ie)&&e(de,"_inputDomain").set(null),"datarevision"===De&&(Xe.newDataRevision=1))}function Qe(be){return"data_array"===be.valType||be.arrayOk}for(De in oe){if(Xe.calc&&!Ee.transition)return;var ct=oe[De],bt=de[De],Tt=Te.concat(De);if(Ie=Tt.join("."),"_"!==De.charAt(0)&&"function"!=typeof ct&&ct!==bt){if(("tick0"===De||"dtick"===De)&&"geo"!==Te[0]){var _t=de.tickmode;if("auto"===_t||"array"===_t||!_t)continue}if(("range"!==De||!de.autorange)&&("zmin"!==De&&"zmax"!==De||"contourcarpet"!==de.type)&&(Ae=Oe(Tt))&&(!Ae._compareAsJSON||JSON.stringify(ct)!==JSON.stringify(bt))){var nt,Ke=Ae.valType,xt=Qe(Ae),Ht=Array.isArray(ct),Zt=Array.isArray(bt);if(Ht&&Zt){var $t="_input_"+De,Xt=oe[$t],cr=de[$t];if(Array.isArray(Xt)&&Xt===cr)continue}if(void 0===bt)xt&&Ht?Xe.calc=!0:qe();else if(Ae._isLinkedToArray){var Ft=[],Be=!1;Pe||(Xe.arrays[De]=Ft);var He=Math.min(ct.length,bt.length),he=Math.max(ct.length,bt.length);if(He!==he){if("arraydraw"!==Ae.editType){qe();continue}Be=!0}for(nt=0;nt<He;nt++)ge(ct[nt],bt[nt],Tt.concat(nt),x.extendFlat({inArray:De,arrayIndex:nt},Ee));if(Be)for(nt=He;nt<he;nt++)Ft.push(nt)}else!Ke&&x.isPlainObject(ct)?ge(ct,bt,Tt,Ee):xt?Ht&&Zt?(Fe&&(Xe.calc=!0),(Fe||Ee.newDataRevision)&&qe()):Ht!==Zt?Xe.calc=!0:qe():Ht&&Zt&&ct.length===bt.length&&String(ct)===String(bt)||qe()}}}for(De in de)if(!(De in oe)&&"_"!==De.charAt(0)&&"function"!=typeof de[De]){if(Qe(Ae=Oe(Te.concat(De)))&&Array.isArray(de[De]))return void(Xe.calc=!0);qe()}}function we(oe){var de=oe._fullLayout,Te=oe.getBoundingClientRect();if(!x.equalDomRects(Te,de._lastBBox)){var Ee=de._invTransform=x.inverseTransformMatrix(x.getFullTransformMatrix(oe));de._invScaleX=Math.sqrt(Ee[0][0]*Ee[0][0]+Ee[0][1]*Ee[0][1]+Ee[0][2]*Ee[0][2]),de._invScaleY=Math.sqrt(Ee[1][0]*Ee[1][0]+Ee[1][1]*Ee[1][1]+Ee[1][2]*Ee[1][2]),de._lastBBox=Te}}Q.animate=function(oe,de,Te){if(oe=x.getGraphDiv(oe),!x.isPlotDiv(oe))throw new Error("This element is not a Plotly plot: "+oe+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ee=oe._transitionData;Ee._frameQueue||(Ee._frameQueue=[]);var Ae=(Te=d.supplyAnimationDefaults(Te)).transition,De=Te.frame;function Ie(Fe){return Array.isArray(Ae)?Fe>=Ae.length?Ae[0]:Ae[Fe]:Ae}function Oe(Fe){return Array.isArray(De)?Fe>=De.length?De[0]:De[Fe]:De}function Xe(Fe,Pe){var Re=0;return function(){if(Fe&&++Re===Pe)return Fe()}}return void 0===Ee._frameWaitingCnt&&(Ee._frameWaitingCnt=0),new Promise(function(Fe,Pe){function qe(){oe.emit("plotly_animating"),Ee._lastFrameAt=-1/0,Ee._timeToNext=0,Ee._runningTransitions=0,Ee._currentFrame=null;var Xt=function(){Ee._animationRaf=window.requestAnimationFrame(Xt),Date.now()-Ee._lastFrameAt>Ee._timeToNext&&function Re(){Ee._currentFrame&&Ee._currentFrame.onComplete&&Ee._currentFrame.onComplete();var Xt=Ee._currentFrame=Ee._frameQueue.shift();if(Xt){var cr=Xt.name?Xt.name.toString():null;oe._fullLayout._currentFrame=cr,Ee._lastFrameAt=Date.now(),Ee._timeToNext=Xt.frameOpts.duration,d.transition(oe,Xt.frame.data,Xt.frame.layout,y.coerceTraceIndices(oe,Xt.frame.traces),Xt.frameOpts,Xt.transitionOpts).then(function(){Xt.onComplete&&Xt.onComplete()}),oe.emit("plotly_animatingframe",{name:cr,frame:Xt.frame,animation:{frame:Xt.frameOpts,transition:Xt.transitionOpts}})}else oe.emit("plotly_animated"),window.cancelAnimationFrame(Ee._animationRaf),Ee._animationRaf=null}()};Xt()}var Qe,ct,bt=0;function Tt(Xt){return Xt.transitionOpts=Array.isArray(Ae)?bt>=Ae.length?Ae[bt]:Ae[0]:Ae,bt++,Xt}var _t=[],nt=null==de,Ke=Array.isArray(de);if(nt||Ke||!x.isPlainObject(de)){if(nt||-1!==["string","number"].indexOf(typeof de))for(Qe=0;Qe<Ee._frames.length;Qe++)(ct=Ee._frames[Qe])&&(nt||String(ct.group)===String(de))&&_t.push({type:"byname",name:String(ct.name),data:Tt({name:ct.name})});else if(Ke)for(Qe=0;Qe<de.length;Qe++){var xt=de[Qe];-1!==["number","string"].indexOf(typeof xt)?(xt=String(xt),_t.push({type:"byname",name:xt,data:Tt({name:xt})})):x.isPlainObject(xt)&&_t.push({type:"object",data:Tt(x.extendFlat({},xt))})}}else _t.push({type:"object",data:Tt(x.extendFlat({},de))});for(Qe=0;Qe<_t.length;Qe++)if("byname"===(ct=_t[Qe]).type&&!Ee._frameHash[ct.data.name])return x.warn('animate failure: frame not found: "'+ct.data.name+'"'),void Pe();-1!==["next","immediate"].indexOf(Te.mode)&&function(){if(0!==Ee._frameQueue.length){for(;Ee._frameQueue.length;){var Xt=Ee._frameQueue.pop();Xt.onInterrupt&&Xt.onInterrupt()}oe.emit("plotly_animationinterrupted",[])}}(),"reverse"===Te.direction&&_t.reverse();var Ht=oe._fullLayout._currentFrame;if(Ht&&Te.fromcurrent){var Zt=-1;for(Qe=0;Qe<_t.length;Qe++)if("byname"===(ct=_t[Qe]).type&&ct.name===Ht){Zt=Qe;break}if(Zt>0&&Zt<_t.length-1){var $t=[];for(Qe=0;Qe<_t.length;Qe++)ct=_t[Qe],("byname"!==_t[Qe].type||Qe>Zt)&&$t.push(ct);_t=$t}}_t.length>0?function(Xt){if(0!==Xt.length){for(var cr=0;cr<Xt.length;cr++){var Ft;Ft="byname"===Xt[cr].type?d.computeFrame(oe,Xt[cr].name):Xt[cr].data;var Be=Oe(cr),He=Ie(cr);He.duration=Math.min(He.duration,Be.duration);var he={frame:Ft,name:Xt[cr].name,frameOpts:Be,transitionOpts:He};cr===Xt.length-1&&(he.onComplete=Xe(Fe,2),he.onInterrupt=Pe),Ee._frameQueue.push(he)}"immediate"===Te.mode&&(Ee._lastFrameAt=-1/0),Ee._animationRaf||qe()}}(_t):(oe.emit("plotly_animated"),Fe())})},Q.addFrames=function(oe,de,Te){if(oe=x.getGraphDiv(oe),null==de)return Promise.resolve();if(!x.isPlotDiv(oe))throw new Error("This element is not a Plotly plot: "+oe+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Ee,Ae,De,Ie,Oe=oe._transitionData._frames,Xe=oe._transitionData._frameHash;if(!Array.isArray(de))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+de);var Fe=Oe.length+2*de.length,Pe=[],Re={};for(Ee=de.length-1;Ee>=0;Ee--)if(x.isPlainObject(de[Ee])){var qe=de[Ee].name,Qe=(Xe[qe]||Re[qe]||{}).name,ct=de[Ee].name;Qe&&ct&&"number"==typeof ct&&(Xe[Qe]||Re[Qe])&&w<5&&(w++,x.warn('addFrames: overwriting frame "'+(Xe[Qe]||Re[Qe]).name+'" with a frame whose name of type "number" also equates to "'+Qe+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===w&&x.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Re[qe]={name:qe},Pe.push({frame:d.supplyFrameDefaults(de[Ee]),index:Te&&null!=Te[Ee]?Te[Ee]:Fe+Ee})}Pe.sort(function($t,Xt){return $t.index>Xt.index?-1:$t.index<Xt.index?1:0});var Tt=[],_t=[],nt=Oe.length;for(Ee=Pe.length-1;Ee>=0;Ee--){if("number"==typeof(Ae=Pe[Ee].frame).name&&x.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Ae.name)for(;Xe[Ae.name="frame "+oe._transitionData._counter++];);if(Xe[Ae.name]){for(De=0;De<Oe.length&&(Oe[De]||{}).name!==Ae.name;De++);Tt.push({type:"replace",index:De,value:Ae}),_t.unshift({type:"replace",index:De,value:Oe[De]})}else Ie=Math.max(0,Math.min(Pe[Ee].index,nt)),Tt.push({type:"insert",index:Ie,value:Ae}),_t.unshift({type:"delete",index:Ie}),nt++}return i&&i.add(oe,d.modifyFrames,[oe,_t],d.modifyFrames,[oe,Tt]),d.modifyFrames(oe,Tt)},Q.deleteFrames=function(oe,de){if(oe=x.getGraphDiv(oe),!x.isPlotDiv(oe))throw new Error("This element is not a Plotly plot: "+oe);var Te,Ee,Ae=oe._transitionData._frames,De=[],Ie=[];if(!de)for(de=[],Te=0;Te<Ae.length;Te++)de.push(Te);for((de=de.slice()).sort(),Te=de.length-1;Te>=0;Te--)De.push({type:"delete",index:Ee=de[Te]}),Ie.unshift({type:"insert",index:Ee,value:Ae[Ee]});return i&&i.add(oe,d.modifyFrames,[oe,Ie],d.modifyFrames,[oe,De]),d.modifyFrames(oe,De)},Q.addTraces=function oe(de,Te,Ee){de=x.getGraphDiv(de);var Ae,De,Ie=[],Oe=Q.deleteTraces,Xe=oe,Fe=[de,Ie],Pe=[de,Te];for(function(Re,qe,Qe){var ct,bt;if(!Array.isArray(Re.data))throw new Error("gd.data must be an array.");if(void 0===qe)throw new Error("traces must be defined.");for(Array.isArray(qe)||(qe=[qe]),ct=0;ct<qe.length;ct++)if("object"!=typeof(bt=qe[ct])||Array.isArray(bt)||null===bt)throw new Error("all values in traces array must be non-array objects");if(void 0===Qe||Array.isArray(Qe)||(Qe=[Qe]),void 0!==Qe&&Qe.length!==qe.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(de,Te,Ee),Array.isArray(Te)||(Te=[Te]),Te=Te.map(function(Re){return x.extendFlat({},Re)}),y.cleanData(Te),Ae=0;Ae<Te.length;Ae++)de.data.push(Te[Ae]);for(Ae=0;Ae<Te.length;Ae++)Ie.push(-Te.length+Ae);if(void 0===Ee)return De=Q.redraw(de),i.add(de,Oe,Fe,Xe,Pe),De;Array.isArray(Ee)||(Ee=[Ee]);try{E(de,Ie,Ee)}catch(Re){throw de.data.splice(de.data.length-Te.length,Te.length),Re}return i.startSequence(de),i.add(de,Oe,Fe,Xe,Pe),De=Q.moveTraces(de,Ie,Ee),i.stopSequence(de),De},Q.deleteTraces=function oe(de,Te){de=x.getGraphDiv(de);var Ee,Ae,De=[],Ie=Q.addTraces,Oe=oe,Xe=[de,De,Te],Fe=[de,Te];if(void 0===Te)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Te)||(Te=[Te]),S(de,Te,"indices"),(Te=P(Te,de.data.length-1)).sort(x.sorterDes),Ee=0;Ee<Te.length;Ee+=1)Ae=de.data.splice(Te[Ee],1)[0],De.push(Ae);var Pe=Q.redraw(de);return i.add(de,Ie,Xe,Oe,Fe),Pe},Q.extendTraces=function oe(de,Te,Ee,Ae){function De(Fe,Pe,Re){var qe,Qe;if(x.isTypedArray(Fe))if(Re<0){var ct=new Fe.constructor(0),bt=D(Fe,Pe);Re<0?(qe=bt,Qe=ct):(qe=ct,Qe=bt)}else if(qe=new Fe.constructor(Re),Qe=new Fe.constructor(Fe.length+Pe.length-Re),Re===Pe.length)qe.set(Pe),Qe.set(Fe);else if(Re<Pe.length){var Tt=Pe.length-Re;qe.set(Pe.subarray(Tt)),Qe.set(Fe),Qe.set(Pe.subarray(0,Tt),Fe.length)}else{var _t=Re-Pe.length,nt=Fe.length-_t;qe.set(Fe.subarray(nt)),qe.set(Pe,_t),Qe.set(Fe.subarray(0,nt))}else qe=Fe.concat(Pe),Qe=Re>=0&&Re<qe.length?qe.splice(0,qe.length-Re):[];return[qe,Qe]}var Ie=R(de=x.getGraphDiv(de),Te,Ee,Ae,De),Oe=Q.redraw(de);return i.add(de,Q.prependTraces,[de,Ie.update,Ee,Ie.maxPoints],oe,arguments),Oe},Q.moveTraces=function oe(de,Te,Ee){var Ae,De=[],Ie=[],Oe=oe,Xe=oe,Fe=[de=x.getGraphDiv(de),Ee,Te],Pe=[de,Te,Ee];if(E(de,Te,Ee),Te=Array.isArray(Te)?Te:[Te],void 0===Ee)for(Ee=[],Ae=0;Ae<Te.length;Ae++)Ee.push(-Te.length+Ae);for(Ee=Array.isArray(Ee)?Ee:[Ee],Te=P(Te,de.data.length-1),Ee=P(Ee,de.data.length-1),Ae=0;Ae<de.data.length;Ae++)-1===Te.indexOf(Ae)&&De.push(de.data[Ae]);for(Ae=0;Ae<Te.length;Ae++)Ie.push({newIndex:Ee[Ae],trace:de.data[Te[Ae]]});for(Ie.sort(function(qe,Qe){return qe.newIndex-Qe.newIndex}),Ae=0;Ae<Ie.length;Ae+=1)De.splice(Ie[Ae].newIndex,0,Ie[Ae].trace);de.data=De;var Re=Q.redraw(de);return i.add(de,Oe,Fe,Xe,Pe),Re},Q.prependTraces=function oe(de,Te,Ee,Ae){function De(Fe,Pe,Re){var qe,Qe;if(x.isTypedArray(Fe))if(Re<=0){var ct=new Fe.constructor(0),bt=D(Pe,Fe);Re<0?(qe=bt,Qe=ct):(qe=ct,Qe=bt)}else if(qe=new Fe.constructor(Re),Qe=new Fe.constructor(Fe.length+Pe.length-Re),Re===Pe.length)qe.set(Pe),Qe.set(Fe);else if(Re<Pe.length){var Tt=Pe.length-Re;qe.set(Pe.subarray(0,Tt)),Qe.set(Pe.subarray(Tt)),Qe.set(Fe,Tt)}else{var _t=Re-Pe.length;qe.set(Pe),qe.set(Fe.subarray(0,_t),Pe.length),Qe.set(Fe.subarray(_t))}else qe=Pe.concat(Fe),Qe=Re>=0&&Re<qe.length?qe.splice(Re,qe.length):[];return[qe,Qe]}var Ie=R(de=x.getGraphDiv(de),Te,Ee,Ae,De),Oe=Q.redraw(de);return i.add(de,Q.extendTraces,[de,Ie.update,Ee,Ie.maxPoints],oe,arguments),Oe},Q.newPlot=function(oe,de,Te,Ee){return oe=x.getGraphDiv(oe),d.cleanPlot([],{},oe._fullData||[],oe._fullLayout||{}),d.purge(oe),Q._doPlot(oe,de,Te,Ee)},Q._doPlot=function(oe,de,Te,Ee){var Ae;if(oe=x.getGraphDiv(oe),n.init(oe),x.isPlainObject(de)){var De=de;de=De.data,Te=De.layout,Ee=De.config,Ae=De.frames}if(!1===n.triggerHandler(oe,"plotly_beforeplot",[de,Te,Ee]))return Promise.reject();de||Te||x.isPlotDiv(oe)||x.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",oe),I(oe,Ee),Te||(Te={}),m.select(oe).classed("js-plotly-plot",!0),t.makeTester(),Array.isArray(oe._promises)||(oe._promises=[]);var Ie=0===(oe.data||[]).length&&Array.isArray(de);Array.isArray(de)&&(y.cleanData(de),Ie?oe.data=de:oe.data.push.apply(oe.data,de),oe.empty=!1),oe.layout&&!Ie||(oe.layout=y.cleanLayout(Te)),d.supplyDefaults(oe);var Oe=oe._fullLayout,Xe=Oe._has("cartesian");Oe._replotting=!0,(Ie||Oe._shouldCreateBgLayer)&&(function(_t){var nt=m.select(_t),Ke=_t._fullLayout;if(Ke._calcInverseTransform=we,Ke._calcInverseTransform(_t),Ke._container=nt.selectAll(".plot-container").data([0]),Ke._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Ke._paperdiv=Ke._container.selectAll(".svg-container").data([0]),Ke._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Ke._glcontainer=Ke._paperdiv.selectAll(".gl-container").data([{}]),Ke._glcontainer.enter().append("div").classed("gl-container",!0),Ke._paperdiv.selectAll(".main-svg").remove(),Ke._paperdiv.select(".modebar-container").remove(),Ke._paper=Ke._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Ke._toppaper=Ke._paperdiv.append("svg").classed("main-svg",!0),Ke._modebardiv=Ke._paperdiv.append("div"),delete Ke._modeBar,Ke._hoverpaper=Ke._paperdiv.append("svg").classed("main-svg",!0),!Ke._uid){var xt={};m.selectAll("defs").each(function(){this.id&&(xt[this.id.split("-")[1]]=1)}),Ke._uid=x.randstr(xt)}Ke._paperdiv.selectAll(".main-svg").attr(o.svgAttrs),Ke._defs=Ke._paper.append("defs").attr("id","defs-"+Ke._uid),Ke._clips=Ke._defs.append("g").classed("clips",!0),Ke._topdefs=Ke._toppaper.append("defs").attr("id","topdefs-"+Ke._uid),Ke._topclips=Ke._topdefs.append("g").classed("clips",!0),Ke._bgLayer=Ke._paper.append("g").classed("bglayer",!0),Ke._draggers=Ke._paper.append("g").classed("draglayer",!0);var Ht=Ke._paper.append("g").classed("layer-below",!0);Ke._imageLowerLayer=Ht.append("g").classed("imagelayer",!0),Ke._shapeLowerLayer=Ht.append("g").classed("shapelayer",!0),Ke._cartesianlayer=Ke._paper.append("g").classed("cartesianlayer",!0),Ke._polarlayer=Ke._paper.append("g").classed("polarlayer",!0),Ke._smithlayer=Ke._paper.append("g").classed("smithlayer",!0),Ke._ternarylayer=Ke._paper.append("g").classed("ternarylayer",!0),Ke._geolayer=Ke._paper.append("g").classed("geolayer",!0),Ke._funnelarealayer=Ke._paper.append("g").classed("funnelarealayer",!0),Ke._pielayer=Ke._paper.append("g").classed("pielayer",!0),Ke._iciclelayer=Ke._paper.append("g").classed("iciclelayer",!0),Ke._treemaplayer=Ke._paper.append("g").classed("treemaplayer",!0),Ke._sunburstlayer=Ke._paper.append("g").classed("sunburstlayer",!0),Ke._indicatorlayer=Ke._toppaper.append("g").classed("indicatorlayer",!0),Ke._glimages=Ke._paper.append("g").classed("glimages",!0);var Zt=Ke._toppaper.append("g").classed("layer-above",!0);Ke._imageUpperLayer=Zt.append("g").classed("imagelayer",!0),Ke._shapeUpperLayer=Zt.append("g").classed("shapelayer",!0),Ke._selectionLayer=Ke._toppaper.append("g").classed("selectionlayer",!0),Ke._infolayer=Ke._toppaper.append("g").classed("infolayer",!0),Ke._menulayer=Ke._toppaper.append("g").classed("menulayer",!0),Ke._zoomlayer=Ke._toppaper.append("g").classed("zoomlayer",!0),Ke._hoverlayer=Ke._hoverpaper.append("g").classed("hoverlayer",!0),Ke._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),_t.emit("plotly_framework")}(oe),Oe._shouldCreateBgLayer&&delete Oe._shouldCreateBgLayer),t.initGradients(oe),t.initPatterns(oe),Ie&&f.saveShowSpikeInitial(oe);var Fe=!oe.calcdata||oe.calcdata.length!==(oe._fullData||[]).length;Fe&&d.doCalcdata(oe);for(var Pe=0;Pe<oe.calcdata.length;Pe++)oe.calcdata[Pe][0].trace=oe._fullData[Pe];oe._context.responsive?oe._responsiveChartHandler||(oe._responsiveChartHandler=function(){x.isHidden(oe)||d.resize(oe)},window.addEventListener("resize",oe._responsiveChartHandler)):x.clearResponsive(oe);var Re=x.extendFlat({},Oe._size),qe=0;function Qe(){if(d.clearAutoMarginIds(oe),u.drawMarginPushers(oe),f.allowAutoMargin(oe),Oe._has("pie"))for(var _t=oe._fullData,nt=0;nt<_t.length;nt++){var Ke=_t[nt];"pie"===Ke.type&&Ke.automargin&&d.allowAutoMargin(oe,"pie."+Ke.uid+".automargin")}return d.doAutoMargin(oe),d.previousPromises(oe)}function ct(){oe._transitioning||(u.doAutoRangeAndConstraints(oe),Ie&&f.saveRangeInitial(oe),l.getComponentMethod("rangeslider","calcAutorange")(oe))}var bt=[d.previousPromises,function(){if(Ae)return Q.addFrames(oe,Ae)},function _t(){for(var nt=Oe._basePlotModules,Ke=0;Ke<nt.length;Ke++)nt[Ke].drawFramework&&nt[Ke].drawFramework(oe);!Oe._glcanvas&&Oe._has("gl")&&(Oe._glcanvas=Oe._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function($t){return $t.key}),Oe._glcanvas.enter().append("canvas").attr("class",function($t){return"gl-canvas gl-canvas-"+$t.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var xt=oe._context.plotGlPixelRatio;if(Oe._glcanvas){Oe._glcanvas.attr("width",Oe.width*xt).attr("height",Oe.height*xt).style("width",Oe.width+"px").style("height",Oe.height+"px");var Ht=Oe._glcanvas.data()[0].regl;if(Ht&&(Math.floor(Oe.width*xt)!==Ht._gl.drawingBufferWidth||Math.floor(Oe.height*xt)!==Ht._gl.drawingBufferHeight)){var Zt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!qe)return x.log(Zt+" Clearing graph and plotting again."),d.cleanPlot([],{},oe._fullData,Oe),d.supplyDefaults(oe),Oe=oe._fullLayout,d.doCalcdata(oe),qe++,_t();x.error(Zt)}}return"h"===Oe.modebar.orientation?Oe._modebardiv.style("height",null).style("width","100%"):Oe._modebardiv.style("width",null).style("height",Oe.height+"px"),d.previousPromises(oe)},Qe,function(){if(d.didMarginChange(Re,Oe._size))return x.syncOrAsync([Qe,u.layoutStyles],oe)}];Xe&&bt.push(function(){if(Fe)return x.syncOrAsync([l.getComponentMethod("shapes","calcAutorange"),l.getComponentMethod("annotations","calcAutorange"),ct],oe);ct()}),bt.push(u.layoutStyles),Xe&&bt.push(function(){return f.draw(oe,Ie?"":"redraw")},function(_t){_t._fullLayout._insideTickLabelsAutorange&&re(_t,_t._fullLayout._insideTickLabelsAutorange).then(function(){_t._fullLayout._insideTickLabelsAutorange=void 0})}),bt.push(u.drawData,u.finalDraw,s,d.addLinks,d.rehover,d.redrag,d.reselect,d.doAutoMargin,function(_t){_t._fullLayout._insideTickLabelsAutorange&&Ie&&f.saveRangeInitial(_t,!0)},d.previousPromises);var Tt=x.syncOrAsync(bt,oe);return Tt&&Tt.then||(Tt=Promise.resolve()),Tt.then(function(){return T(oe),oe})},Q.purge=function(oe){var de=(oe=x.getGraphDiv(oe))._fullLayout||{};return d.cleanPlot([],{},oe._fullData||[],de),d.purge(oe),n.purge(oe),de._container&&de._container.remove(),delete oe._context,oe},Q.react=function(oe,de,Te,Ee){var Ae,De;oe=x.getGraphDiv(oe),y.clearPromiseQueue(oe);var he,be,ze,Ve,Je,Ye,Ie=oe._fullData,Oe=oe._fullLayout;if(x.isPlotDiv(oe)&&Ie&&Oe){if(x.isPlainObject(de)){var Xe=de;de=Xe.data,Te=Xe.layout,Ee=Xe.config,Ae=Xe.frames}var Fe=!1;if(Ee){var Pe=x.extendDeep({},oe._context);oe._context=void 0,I(oe,Ee),Fe=function he(be,ze){var Ve;for(Ve in be)if("_"!==Ve.charAt(0)){var Je=be[Ve],Ye=ze[Ve];if(Je!==Ye)if(x.isPlainObject(Je)&&x.isPlainObject(Ye)){if(he(Je,Ye))return!0}else{if(!Array.isArray(Je)||!Array.isArray(Ye)||Je.length!==Ye.length)return!0;for(var lt=0;lt<Je.length;lt++)if(Je[lt]!==Ye[lt]&&(!x.isPlainObject(Je[lt])||!x.isPlainObject(Ye[lt])||he(Je[lt],Ye[lt])))return!0}}}(Pe,oe._context)}oe.data=de||[],y.cleanData(oe.data),oe.layout=Te||{},y.cleanLayout(oe.layout),function(he,be,ze,Ve){var Je,Ye,lt,st,Mt,Dt,ht,mt,Ot,At,It=Ve._preGUI,Se=[],Ze={},it={};for(Je in It){if(Mt=ve(Je,le)){if(Ot=Mt.head,At=Mt.tail,(st=(lt=e(Ve,Ye=Mt.attr||Ot+".uirevision").get())&&ue(Ye,be))&&st===lt){if(null===(Dt=It[Je])&&(Dt=void 0),pe(mt=(ht=e(be,Je)).get(),Dt)){void 0===mt&&"autorange"===At&&Se.push(Ot),ht.set(H(e(Ve,Je).get()));continue}if("autorange"===At||"range["===At.substr(0,6)){var Ut=It[Ot+".autorange"];if(Ut||null===Ut&&null===It[Ot+".range[0]"]&&null===It[Ot+".range[1]"]){if(!(Ot in Ze)){var Jt=e(be,Ot).get();Ze[Ot]=Jt&&(Jt.autorange||!1!==Jt.autorange&&(!Jt.range||2!==Jt.range.length))}if(Ze[Ot]){ht.set(H(e(Ve,Je).get()));continue}}}}}else x.warn("unrecognized GUI edit: "+Je);delete It[Je],Mt&&"range["===Mt.tail.substr(0,6)&&(it[Mt.head]=1)}for(var qt=0;qt<Se.length;qt++){var pr=Se[qt];if(it[pr]){var Sr=e(be,pr).get();Sr&&delete Sr.autorange}}var mr=Ve._tracePreGUI;for(var tr in mr){var rr,ar=mr[tr],dr=null;for(Je in ar){if(!dr){var xr=ye(tr,ze);if(xr<0){delete mr[tr];break}var Lr=Me(tr,he,(rr=ze[xr]._fullInput).index);if(Lr<0){delete mr[tr];break}dr=he[Lr]}if(Mt=ve(Je,se)){if(Mt.attr?st=(lt=e(Ve,Mt.attr).get())&&ue(Mt.attr,be):(lt=rr.uirevision,void 0===(st=dr.uirevision)&&(st=be.uirevision)),st&&st===lt&&(null===(Dt=ar[Je])&&(Dt=void 0),pe(mt=(ht=e(dr,Je)).get(),Dt))){ht.set(H(e(rr,Je).get()));continue}}else x.warn("unrecognized GUI edit: "+Je+" in trace uid "+tr);delete ar[Je]}}}(oe.data,oe.layout,Ie,Oe),d.supplyDefaults(oe,{skipUpdateCalc:!0});var Re=oe._fullData,qe=oe._fullLayout,Qe=void 0===qe.datarevision,ct=qe.transition,bt=(he=oe,be=Oe,ze=qe,Ve=Qe,Je=ct,(Ye=_.layoutFlags()).arrays={},Ye.rangesAltered={},Ye.nChanges=0,Ye.nChangesAnim=0,ge(be,ze,[],{getValObject:function lt(st){return r.getLayoutValObject(ze,st)},flags:Ye,immutable:Ve,transition:Je,gd:he}),(Ye.plot||Ye.calc)&&(Ye.layoutReplot=!0),Je&&Ye.nChanges&&Ye.nChangesAnim&&(Ye.anim=Ye.nChanges===Ye.nChangesAnim?"all":"some"),Ye),_t=function(he,be,ze,Ve,Je,Ye){var lt=be.length===ze.length;if(!Je&&!lt)return{fullReplot:!0,calc:!0};var st,Mt,Dt=_.traceFlags();Dt.arrays={},Dt.nChanges=0,Dt.nChangesAnim=0;var ht={getValObject:function(Ot){var At=r.getTraceValObject(Mt,Ot);return!Mt._module.animatable&&At.anim&&(At.anim=!1),At},flags:Dt,immutable:Ve,transition:Je,newDataRevision:Ye,gd:he},mt={};for(st=0;st<be.length;st++)if(ze[st]){if(d.hasMakesDataTransform(Mt=ze[st]._fullInput)&&(Mt=ze[st]),mt[Mt.uid])continue;mt[Mt.uid]=1,ge(be[st]._fullInput,Mt,[],ht)}return(Dt.calc||Dt.plot)&&(Dt.fullReplot=!0),Je&&Dt.nChanges&&Dt.nChangesAnim&&(Dt.anim=Dt.nChanges===Dt.nChangesAnim&&lt?"all":"some"),Dt}(oe,Ie,Re,Qe,ct,bt.newDataRevision);if(J(oe)&&(bt.layoutReplot=!0),_t.calc||bt.calc){oe.calcdata=void 0;for(var nt=Object.getOwnPropertyNames(qe),Ke=0;Ke<nt.length;Ke++){var xt=nt[Ke],Ht=xt.substring(0,5);if("xaxis"===Ht||"yaxis"===Ht){var Zt=qe[xt]._emptyCategories;Zt&&Zt()}}}else d.supplyDefaultsUpdateCalc(oe.calcdata,Re);var $t=[];if(Ae&&(oe._transitionData={},d.createTransitionData(oe),$t.push(function(){return Q.addFrames(oe,Ae)})),qe.transition&&!Fe&&(_t.anim||bt.anim))bt.ticks&&$t.push(u.doTicksRelayout),d.doCalcdata(oe),u.doAutoRangeAndConstraints(oe),$t.push(function(){return d.transitionFromReact(oe,_t,bt,Oe)});else if(_t.fullReplot||bt.layoutReplot||Fe)oe._fullLayout._skipDefaults=!0,$t.push(Q._doPlot);else{for(var Xt in bt.arrays){var cr=bt.arrays[Xt];if(cr.length){var Ft=l.getComponentMethod(Xt,"drawOne");if(Ft!==x.noop)for(var Be=0;Be<cr.length;Be++)Ft(oe,cr[Be]);else{var He=l.getComponentMethod(Xt,"draw");if(He===x.noop)throw new Error("cannot draw components: "+Xt);He(oe)}}}$t.push(d.previousPromises),_t.style&&$t.push(u.doTraceStyle),(_t.colorbars||bt.colorbars)&&$t.push(u.doColorBars),bt.legend&&$t.push(u.doLegend),bt.layoutstyle&&$t.push(u.layoutStyles),bt.axrange&&B($t),bt.ticks&&$t.push(u.doTicksRelayout),bt.modebar&&$t.push(u.doModeBar),bt.camera&&$t.push(u.doCamera),$t.push(T)}$t.push(d.rehover,d.redrag,d.reselect),(De=x.syncOrAsync($t,oe))&&De.then||(De=Promise.resolve(oe))}else De=Q.newPlot(oe,de,Te,Ee);return De.then(function(){return oe.emit("plotly_react",{data:de,layout:Te}),oe})},Q.redraw=function(oe){if(oe=x.getGraphDiv(oe),!x.isPlotDiv(oe))throw new Error("This element is not a Plotly plot: "+oe);return y.cleanData(oe.data),y.cleanLayout(oe.layout),oe.calcdata=void 0,Q._doPlot(oe).then(function(){return oe.emit("plotly_redraw"),oe})},Q.relayout=re,Q.restyle=j,Q.setPlotConfig=function(oe){return x.extendFlat(c,oe)},Q.update=te,Q._guiRelayout=ae(re),Q._guiRestyle=ae(j),Q._guiUpdate=ae(te),Q._storeDirectGUIEdit=function(oe,de,Te){for(var Ee in Te)X(Ee,e(oe,Ee).get(),Te[Ee],de)}},{"../components/color":367,"../components/drawing":389,"../components/selections":455,"../constants/xmlns_namespaces":492,"../lib":515,"../lib/events":504,"../lib/queue":531,"../plots/cartesian/axes":566,"../plots/cartesian/constants":573,"../plots/cartesian/graph_interact":576,"../plots/plots":628,"../registry":647,"./edit_types":548,"./helpers":549,"./manage_arrays":551,"./plot_config":553,"./plot_schema":554,"./subroutines":556,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],553:[function(v,$,Q){"use strict";var m={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},g={};(function k(x,e){for(var n in x){var i=x[n];i.valType?e[n]=i.dflt:(e[n]||(e[n]={}),k(i,e[n]))}})(m,g),$.exports={configAttributes:m,dfltConfig:g}},{}],554:[function(v,$,Q){"use strict";var m=v("../registry"),g=v("../lib"),k=v("../plots/attributes"),x=v("../plots/layout_attributes"),e=v("../plots/frame_attributes"),n=v("../plots/animation_attributes"),i=v("./plot_config").configAttributes,l=v("./edit_types"),r=g.extendDeepAll,d=g.isPlainObject,f=g.isArrayOrTypedArray,t=g.nestedProperty,h=g.valObjectMeta,s=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function o(b,w,T){if(!b)return!1;if(b._isLinkedToArray)if(p(w[T]))T++;else if(T<w.length)return!1;for(;T<w.length;T++){var C=b[w[T]];if(!d(C)||(b=C,T===w.length-1))break;if(b._isLinkedToArray){if(!p(w[++T]))return!1}else if("info_array"===b.valType){var M=w[++T];if(!p(M))return!1;var I=b.items;if(Array.isArray(I)){if(M>=I.length)return!1;if(2===b.dimensions){if(T++,w.length===T)return b;var P=w[T];if(!p(P))return!1;b=I[M][P]}else b=I[M]}else b=I}}return b}function p(b){return b===Math.round(b)&&b>=0}function c(){var b,w,T={};for(b in r(T,x),m.subplotsRegistry)if((w=m.subplotsRegistry[b]).layoutAttributes)if(Array.isArray(w.attr))for(var C=0;C<w.attr.length;C++)u(T,w,w.attr[C]);else u(T,w,"subplot"===w.attr?w.name:w.attr);for(b in m.componentsRegistry){var M=(w=m.componentsRegistry[b]).schema;if(M&&(M.subplots||M.layout)){var I=M.subplots;if(I&&I.xaxis&&!I.yaxis)for(var P in I.xaxis)delete T.yaxis[P]}else"colorscale"===w.name?r(T,w.layoutAttributes):w.layoutAttributes&&_(T,w.layoutAttributes,w.name)}return{layoutAttributes:y(T)}}function a(){var b={frames:r({},e)};return y(b),b.frames}function y(b){return Q.crawl(b,function(T,C,M){Q.isValObject(T)?!0!==T.arrayOk&&"data_array"!==T.valType||(M[C+"src"]={valType:"string",editType:"none"}):d(T)&&(T.role="object")}),Q.crawl(b,function(T,C,M){if(T){var I=T._isLinkedToArray;I&&(delete T._isLinkedToArray,M[C]={items:{}},M[C].items[I]=T,M[C].role="object")}}),function(w){!function T(C){for(var M in C)if(d(C[M]))T(C[M]);else if(Array.isArray(C[M]))for(var I=0;I<C[M].length;I++)T(C[M][I]);else C[M]instanceof RegExp&&(C[M]=C[M].toString())}(w)}(b),b}function u(b,w,T){var C=t(b,T),M=r({},w.layoutAttributes);M._isSubplotObj=!0,C.set(M)}function _(b,w,T){var C=t(b,T);C.set(r(C.get()||{},w))}Q.IS_SUBPLOT_OBJ="_isSubplotObj",Q.IS_LINKED_TO_ARRAY="_isLinkedToArray",Q.DEPRECATED="_deprecated",Q.UNDERSCORE_ATTRS=s,Q.get=function(){var b={};m.allTypes.forEach(function(T){b[T]=function(C){var M,I;I=(M=m.modules[C]._module).basePlotModule;var P={type:null},S=r({},k),E=r({},M.attributes);Q.crawl(E,function(j,H,Y,X,Z){t(S,Z).set(void 0),void 0===j&&t(E,Z).set(void 0)}),r(P,S),m.traceIs(C,"noOpacity")&&delete P.opacity,m.traceIs(C,"showLegend")||(delete P.showlegend,delete P.legendgroup),m.traceIs(C,"noHover")&&(delete P.hoverinfo,delete P.hoverlabel),M.selectPoints||delete P.selectedpoints,r(P,E),I.attributes&&r(P,I.attributes),P.type=C;var R={meta:M.meta||{},categories:M.categories||{},animatable:Boolean(M.animatable),type:C,attributes:y(P)};if(M.layoutAttributes){var D={};r(D,M.layoutAttributes),R.layoutAttributes=y(D)}return M.animatable||Q.crawl(R,function(j){Q.isValObject(j)&&"anim"in j&&delete j.anim}),R}(T)});var w={};return Object.keys(m.transformsRegistry).forEach(function(T){var C,I;w[T]=(I=r({},m.transformsRegistry[C=T].attributes),Object.keys(m.componentsRegistry).forEach(function(P){var S=m.componentsRegistry[P];S.schema&&S.schema.transforms&&S.schema.transforms[C]&&Object.keys(S.schema.transforms[C]).forEach(function(E){_(I,S.schema.transforms[C][E],E)})}),{attributes:y(I)})}),{defs:{valObjects:h,metaKeys:s.concat(["description","role","editType","impliedEdits"]),editType:{traces:l.traces,layout:l.layout},impliedEdits:{}},traces:b,layout:c(),transforms:w,frames:a(),animation:y(n),config:y(i)}},Q.crawl=function(b,w,T,C){var M=T||0;C=C||"",Object.keys(b).forEach(function(I){var P=b[I];if(-1===s.indexOf(I)){var S=(C?C+".":"")+I;w(P,I,b,M,S),Q.isValObject(P)||d(P)&&"impliedEdits"!==I&&Q.crawl(P,w,M+1,S)}})},Q.isValObject=function(b){return b&&void 0!==b.valType},Q.findArrayAttributes=function(b){var w,T,C=[],M=[],I=[];function P(j,H,Y,X){M=M.slice(0,X).concat([H]),I=I.slice(0,X).concat([j&&j._isLinkedToArray]),j&&("data_array"===j.valType||!0===j.arrayOk)&&("colorbar"!==M[X-1]||"ticktext"!==H&&"tickvals"!==H)&&function Z(W,re,U){var B=W[M[re]],V=U+M[re];if(re===M.length-1)f(B)&&C.push(T+V);else if(I[re]){if(Array.isArray(B))for(var ee=0;ee<B.length;ee++)d(B[ee])&&Z(B[ee],re+1,V+"["+ee+"].")}else d(B)&&Z(B,re+1,V+".")}(w,0,"")}w=b,T="",Q.crawl(k,P),b._module&&b._module.attributes&&Q.crawl(b._module.attributes,P);var S=b.transforms;if(S)for(var E=0;E<S.length;E++){var R=S[E],D=R._module;D&&(T="transforms["+E+"].",w=R,Q.crawl(D.attributes,P))}return C},Q.getTraceValObject=function(b,w){var T,C,M=w[0],I=1;if("transforms"===M){if(1===w.length)return k.transforms;var P=b.transforms;if(!Array.isArray(P)||!P.length)return!1;var S=w[1];if(!p(S)||S>=P.length)return!1;C=(T=(m.transformsRegistry[P[S].type]||{}).attributes)&&T[w[2]],I=3}else{var E=b._module;if(E||(E=(m.modules[b.type||k.type.dflt]||{})._module),!E)return!1;if(!(C=(T=E.attributes)&&T[M])){var R=E.basePlotModule;R&&R.attributes&&(C=R.attributes[M])}C||(C=k[M])}return o(C,w,I)},Q.getLayoutValObject=function(b,w){return o(function(T,C){var M,I,P,S,E=T._basePlotModules;if(E){var R;for(M=0;M<E.length;M++){if((P=E[M]).attrRegex&&P.attrRegex.test(C)){if(P.layoutAttrOverrides)return P.layoutAttrOverrides;!R&&P.layoutAttributes&&(R=P.layoutAttributes)}var D=P.baseLayoutAttrOverrides;if(D&&C in D)return D[C]}if(R)return R}var j=T._modules;if(j)for(M=0;M<j.length;M++)if((S=j[M].layoutAttributes)&&C in S)return S[C];for(I in m.componentsRegistry){if("colorscale"===(P=m.componentsRegistry[I]).name&&0===C.indexOf("coloraxis"))return P.layoutAttributes[C];if(!P.schema&&C===P.name)return P.layoutAttributes}return C in x&&x[C]}(b,w[0]),w,1)}},{"../lib":515,"../plots/animation_attributes":560,"../plots/attributes":562,"../plots/frame_attributes":595,"../plots/layout_attributes":619,"../registry":647,"./edit_types":548,"./plot_config":553}],555:[function(v,$,Q){"use strict";var m=v("../lib"),g=v("../plots/attributes"),k={name:{valType:"string",editType:"none"}};function x(n){return n&&"string"==typeof n}function e(n){return"s"!==n.charAt(n.length-1)&&m.warn("bad argument to arrayDefaultKey: "+n),n.substr(0,n.length-1)+"defaults"}k.templateitemname={valType:"string",editType:"calc"},Q.templatedArray=function(n,i){return i._isLinkedToArray=n,i.name=k.name,i.templateitemname=k.templateitemname,i},Q.traceTemplater=function(n){var i,l,r={};for(i in n)l=n[i],Array.isArray(l)&&l.length&&(r[i]=0);return{newTrace:function(d){var f={type:i=m.coerce(d,{},g,"type"),_template:null};if(i in r){var t=r[i]%(l=n[i]).length;r[i]++,f._template=l[t]}return f}}},Q.newContainer=function(n,i,l){var r=n._template,d=r&&(r[i]||l&&r[l]);return m.isPlainObject(d)||(d=null),n[i]={_template:d}},Q.arrayTemplater=function(n,i,l){var r=n._template,d=r&&r[e(i)],f=r&&r[i];Array.isArray(f)&&f.length||(f=[]);var t={};return{newItem:function(h){var s={name:h.name,_input:h},o=s.templateitemname=h.templateitemname;if(!x(o))return s._template=d,s;for(var p=0;p<f.length;p++){var c=f[p];if(c.name===o)return t[o]=1,s._template=c,s}return s[l]=h[l]||!1,s._template=!1,s},defaultItems:function(){for(var h=[],s=0;s<f.length;s++){var o=f[s],p=o.name;if(x(p)&&!t[p]){var c={_template:o,name:p,_input:{_templateitemname:p}};c.templateitemname=o.templateitemname,h.push(c),t[p]=1}}return h}}},Q.arrayDefaultKey=e,Q.arrayEditor=function(n,i,l){var r=(m.nestedProperty(n,i).get()||[]).length,d=l._index,f=d>=r&&(l._input||{})._templateitemname;f&&(d=r);var t,h=i+"["+d+"]";function s(){t={},f&&(t[h]={},t[h].templateitemname=f)}function o(c,a){f?m.nestedProperty(t[h],c).set(a):t[h+"."+c]=a}function p(){var c=t;return s(),c}return s(),{modifyBase:function(c,a){t[c]=a},modifyItem:o,getUpdateObj:p,applyUpdate:function(c,a){c&&o(c,a);var y=p();for(var u in y)m.nestedProperty(n,u).set(y[u])}}}},{"../lib":515,"../plots/attributes":562}],556:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../registry"),k=v("../plots/plots"),x=v("../lib"),e=v("../lib/clear_gl_canvases"),n=v("../components/color"),i=v("../components/drawing"),l=v("../components/titles"),r=v("../components/modebar"),d=v("../plots/cartesian/axes"),f=v("../constants/alignment"),t=v("../plots/cartesian/constraints"),h=t.enforce,s=t.clean,o=v("../plots/cartesian/autorange").doAutoRange;function p(w,T,C){for(var M=0;M<C.length;M++){var I=C[M][0],P=C[M][1];if(!(I[0]>=w[1]||I[1]<=w[0])&&P[0]<T[1]&&P[1]>T[0])return!0}return!1}function c(w){var T,C,M,I,P,S,E=w._fullLayout,R=E._size,D=R.p,j=d.list(w,"",!0);if(E._paperdiv.style({width:w._context.responsive&&E.autosize&&!w._context._hasZeroWidth&&!w.layout.width?"100%":E.width+"px",height:w._context.responsive&&E.autosize&&!w._context._hasZeroHeight&&!w.layout.height?"100%":E.height+"px"}).selectAll(".main-svg").call(i.setSize,E.width,E.height),w._context.setBackground(w,E.paper_bgcolor),Q.drawMainTitle(w),r.manage(w),!E._has("cartesian"))return k.previousPromises(w);function H(qe,Qe,ct){var bt=qe._lw/2;return"x"===qe._id.charAt(0)?Qe?"top"===ct?Qe._offset-D-bt:Qe._offset+Qe._length+D+bt:R.t+R.h*(1-(qe.position||0))+bt%1:Qe?"right"===ct?Qe._offset+Qe._length+D+bt:Qe._offset-D-bt:R.l+R.w*(qe.position||0)+bt%1}for(T=0;T<j.length;T++){var Y=(I=j[T])._anchorAxis;I._linepositions={},I._lw=i.crispRound(w,I.linewidth,1),I._mainLinePosition=H(I,Y,I.side),I._mainMirrorPosition=I.mirror&&Y?H(I,Y,f.OPPOSITE_SIDE[I.side]):null}var X=[],Z=[],W=[],re=1===n.opacity(E.paper_bgcolor)&&1===n.opacity(E.plot_bgcolor)&&E.paper_bgcolor===E.plot_bgcolor;for(C in E._plots)if((M=E._plots[C]).mainplot)M.bg&&M.bg.remove(),M.bg=void 0;else{var U=M.xaxis.domain,B=M.yaxis.domain,V=M.plotgroup;if(p(U,B,W)){var ee=V.node(),N=M.bg=x.ensureSingle(V,"rect","bg");ee.insertBefore(N.node(),ee.childNodes[0]),Z.push(C)}else V.select("rect.bg").remove(),W.push([U,B]),re||(X.push(C),Z.push(C))}var K,J,te,ae,le,se,ve,ue,ye,Me,pe,ge,we,oe=E._bgLayer.selectAll(".bg").data(X);for(oe.enter().append("rect").classed("bg",!0),oe.exit().remove(),oe.each(function(qe){E._plots[qe].bg=m.select(this)}),T=0;T<Z.length;T++)P=(M=E._plots[Z[T]]).xaxis,S=M.yaxis,M.bg&&void 0!==P._offset&&void 0!==S._offset&&M.bg.call(i.setRect,P._offset-D,S._offset-D,P._length+2*D,S._length+2*D).call(n.fill,E.plot_bgcolor).style("stroke-width",0);if(!E._hasOnlyLargeSploms)for(C in E._plots){P=(M=E._plots[C]).xaxis,S=M.yaxis;var de,Te,Ee=M.clipId="clip"+E._uid+C+"plot",Ae=x.ensureSingleById(E._clips,"clipPath",Ee,function(qe){qe.classed("plotclip",!0).append("rect")});M.clipRect=Ae.select("rect").attr({width:P._length,height:S._length}),i.setTranslate(M.plot,P._offset,S._offset),M._hasClipOnAxisFalse?(de=null,Te=Ee):(de=Ee,Te=null),i.setClipUrl(M.plot,de,w),M.layerClipId=Te}function De(qe){return"M"+K+","+qe+"H"+J}function Ie(qe){return"M"+P._offset+","+qe+"h"+P._length}function Oe(qe){return"M"+qe+","+ue+"V"+ve}function Xe(qe){return"M"+qe+","+S._offset+"v"+S._length}function Fe(qe,Qe,ct){if(!qe.showline||C!==qe._mainSubplot)return"";if(!qe._anchorAxis)return ct(qe._mainLinePosition);var bt=Qe(qe._mainLinePosition);return qe.mirror&&(bt+=Qe(qe._mainMirrorPosition)),bt}for(C in E._plots){S=(M=E._plots[C]).yaxis;var Pe="M0,0";a(P=M.xaxis,C)&&(le=u(P,"left",S,j),K=P._offset-(le?D+le:0),se=u(P,"right",S,j),J=P._offset+P._length+(se?D+se:0),te=H(P,S,"bottom"),ae=H(P,S,"top"),!(we=!P._anchorAxis||C!==P._mainSubplot)||"allticks"!==P.mirror&&"all"!==P.mirror||(P._linepositions[C]=[te,ae]),Pe=Fe(P,De,Ie),we&&P.showline&&("all"===P.mirror||"allticks"===P.mirror)&&(Pe+=De(te)+De(ae)),M.xlines.style("stroke-width",P._lw+"px").call(n.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),M.xlines.attr("d",Pe);var Re="M0,0";a(S,C)&&(pe=u(S,"bottom",P,j),ve=S._offset+S._length+(pe?D:0),ge=u(S,"top",P,j),ue=S._offset-(ge?D:0),ye=H(S,P,"left"),Me=H(S,P,"right"),!(we=!S._anchorAxis||C!==S._mainSubplot)||"allticks"!==S.mirror&&"all"!==S.mirror||(S._linepositions[C]=[ye,Me]),Re=Fe(S,Oe,Xe),we&&S.showline&&("all"===S.mirror||"allticks"===S.mirror)&&(Re+=Oe(ye)+Oe(Me)),M.ylines.style("stroke-width",S._lw+"px").call(n.stroke,S.showline?S.linecolor:"rgba(0,0,0,0)")),M.ylines.attr("d",Re)}return d.makeClipPaths(w),k.previousPromises(w)}function a(w,T){return(w.ticks||w.showline)&&(T===w._mainSubplot||"all"===w.mirror||"allticks"===w.mirror)}function y(w,T,C){if(!C.showline||!C._lw)return!1;if("all"===C.mirror||"allticks"===C.mirror)return!0;var M=C._anchorAxis;if(!M)return!1;var I=f.FROM_BL[T];return C.side===T?M.domain[I]===w.domain[I]:C.mirror&&M.domain[1-I]===w.domain[1-I]}function u(w,T,C,M){if(y(w,T,C))return C._lw;for(var I=0;I<M.length;I++){var P=M[I];if(P._mainAxis===C._mainAxis&&y(w,T,P))return P._lw}return 0}function _(w,T){var C=w.title,M=w._size,I=0;return"paper"===("start"===T?I=C.pad.l:"end"===T&&(I=-C.pad.r),C.xref)?M.l+M.w*C.x+I:w.width*C.x+I}function b(w,T){var C=w.title,M=w._size,I=0;return"0em"!==T&&T?T===f.CAP_SHIFT+"em"&&(I=C.pad.t):I=-C.pad.b,"auto"===C.y?M.t/2:"paper"===C.yref?M.t+M.h-M.h*C.y+I:w.height-w.height*C.y+I}Q.layoutStyles=function(w){return x.syncOrAsync([k.doAutoMargin,c],w)},Q.drawMainTitle=function(w){var P,S,T=w._fullLayout,C=(S="middle",x.isRightAnchor(P=T.title)?S="end":x.isLeftAnchor(P)&&(S="start"),S),M=function(I){var P=I.title,S="0em";return x.isTopAnchor(P)?S=f.CAP_SHIFT+"em":x.isMiddleAnchor(P)&&(S=f.MID_SHIFT+"em"),S}(T);l.draw(w,"gtitle",{propContainer:T,propName:"title.text",placeholder:T._dfltTitle.plot,attributes:{x:_(T,C),y:b(T,M),"text-anchor":C,dy:M}})},Q.doTraceStyle=function(w){var T,C=w.calcdata,M=[];for(T=0;T<C.length;T++){var I=C[T],P=I[0]||{},S=P.trace||{},E=S._module||{},R=E.arraysToCalcdata;R&&R(I,S);var D=E.editStyle;D&&M.push({fn:D,cd0:P})}if(M.length){for(T=0;T<M.length;T++){var j=M[T];j.fn(w,j.cd0)}e(w),Q.redrawReglTraces(w)}return k.style(w),g.getComponentMethod("legend","draw")(w),k.previousPromises(w)},Q.doColorBars=function(w){return g.getComponentMethod("colorbar","draw")(w),k.previousPromises(w)},Q.layoutReplot=function(w){var T=w.layout;return w.layout=void 0,g.call("_doPlot",w,"",T)},Q.doLegend=function(w){return g.getComponentMethod("legend","draw")(w),k.previousPromises(w)},Q.doTicksRelayout=function(w){return d.draw(w,"redraw"),w._fullLayout._hasOnlyLargeSploms&&(g.subplotsRegistry.splom.updateGrid(w),e(w),Q.redrawReglTraces(w)),Q.drawMainTitle(w),k.previousPromises(w)},Q.doModeBar=function(w){var T=w._fullLayout;r.manage(w);for(var C=0;C<T._basePlotModules.length;C++){var M=T._basePlotModules[C].updateFx;M&&M(w)}return k.previousPromises(w)},Q.doCamera=function(w){for(var T=w._fullLayout,C=T._subplots.gl3d,M=0;M<C.length;M++){var I=T[C[M]];I._scene.setViewport(I)}},Q.drawData=function(w){var T=w._fullLayout;e(w);for(var C=T._basePlotModules,M=0;M<C.length;M++)C[M].plot(w);return Q.redrawReglTraces(w),k.style(w),g.getComponentMethod("selections","draw")(w),g.getComponentMethod("shapes","draw")(w),g.getComponentMethod("annotations","draw")(w),g.getComponentMethod("images","draw")(w),T._replotting=!1,k.previousPromises(w)},Q.redrawReglTraces=function(w){var T=w._fullLayout;if(T._has("regl")){var C,M,I=w._fullData,P=[],S=[];for(T._hasOnlyLargeSploms&&T._splomGrid.draw(),C=0;C<I.length;C++){var E=I[C];!0===E.visible&&0!==E._length&&("splom"===E.type?T._splomScenes[E.uid].draw():"scattergl"===E.type?x.pushUnique(P,E.xaxis+E.yaxis):"scatterpolargl"===E.type&&x.pushUnique(S,E.subplot))}for(C=0;C<P.length;C++)(M=T._plots[P[C]])._scene&&M._scene.draw();for(C=0;C<S.length;C++)(M=T[S[C]]._subplot)._scene&&M._scene.draw()}},Q.doAutoRangeAndConstraints=function(w){for(var T,C=d.list(w,"",!0),M={},I=0;I<C.length;I++)if(!M[(T=C[I])._id]){M[T._id]=1,s(w,T),o(w,T);var P=T._matchGroup;if(P)for(var S in P){var E=d.getFromId(w,S);o(w,E,T.range),M[S]=1}}h(w)},Q.finalDraw=function(w){g.getComponentMethod("rangeslider","draw")(w),g.getComponentMethod("rangeselector","draw")(w)},Q.drawMarginPushers=function(w){g.getComponentMethod("legend","draw")(w),g.getComponentMethod("rangeselector","draw")(w),g.getComponentMethod("sliders","draw")(w),g.getComponentMethod("updatemenus","draw")(w),g.getComponentMethod("colorbar","draw")(w)}},{"../components/color":367,"../components/drawing":389,"../components/modebar":430,"../components/titles":476,"../constants/alignment":483,"../lib":515,"../lib/clear_gl_canvases":499,"../plots/cartesian/autorange":565,"../plots/cartesian/axes":566,"../plots/cartesian/constraints":574,"../plots/plots":628,"../registry":647,"@plotly/d3":58}],557:[function(v,$,Q){"use strict";var m=v("../lib"),g=m.isPlainObject,k=v("./plot_schema"),x=v("../plots/plots"),e=v("../plots/attributes"),n=v("./plot_template"),i=v("./plot_config").dfltConfig;function l(p,c){p=m.extendDeep({},p);var a,y,u=Object.keys(p).sort();function _(M,I,P){if(g(I)&&g(M))l(M,I);else if(Array.isArray(I)&&Array.isArray(M)){var S=n.arrayTemplater({_template:p},P);for(y=0;y<I.length;y++){var E=I[y],R=S.newItem(E)._template;R&&l(R,E)}var D=S.defaultItems();for(y=0;y<D.length;y++)I.push(D[y]._template);for(y=0;y<I.length;y++)delete I[y].templateitemname}}for(a=0;a<u.length;a++){var b=u[a],w=p[b];if(b in c?_(w,c[b],b):c[b]=w,r(b)===b)for(var T in c){var C=r(T);T===C||C!==b||T in p||_(w,c[T],b)}}}function r(p){return p.replace(/[0-9]+$/,"")}function d(p,c,a,y,u){var _=u&&a(u);for(var b in p){var w=p[b],T=h(p,b,y),C=h(p,b,u),M=a(C);if(!M){var I=r(b);I!==b&&(M=a(C=h(p,I,u)))}if(!(_&&_===M||!M||M._noTemplating||"data_array"===M.valType||M.arrayOk&&Array.isArray(w)))if(!M.valType&&g(w))d(w,c,a,T,C);else if(M._isLinkedToArray&&Array.isArray(w))for(var P=!1,S=0,E={},R=0;R<w.length;R++){var D=w[R];if(g(D)){var j=D.name;if(j)E[j]||(d(D,c,a,h(w,S,T),h(w,S,C)),S++,E[j]=1);else if(!P){var H=h(p,n.arrayDefaultKey(b),y),Y=h(w,S,T);d(D,c,a,Y,h(w,S,C));var X=m.nestedProperty(c,Y);m.nestedProperty(c,H).set(X.get()),X.set(null),P=!0}}}else m.nestedProperty(c,T).set(w)}}function f(p,c){return k.getLayoutValObject(p,m.nestedProperty({},c).parts)}function t(p,c){return k.getTraceValObject(p,m.nestedProperty({},c).parts)}function h(p,c,a){return a?Array.isArray(p)?a+"["+c+"]":a+"."+c:c}function s(p){for(var c=0;c<p.length;c++)if(g(p[c]))return!0}function o(p){var c;switch(p.code){case"data":c="The template has no key data.";break;case"layout":c="The template has no key layout.";break;case"missing":c=p.path?"There are no templates for item "+p.path+" with name "+p.templateitemname:"There are no templates for trace "+p.index+", of type "+p.traceType+".";break;case"unused":c=p.path?"The template item at "+p.path+" was not used in constructing the plot.":p.dataCount?"Some of the templates of type "+p.traceType+" were not used. The template has "+p.templateCount+" traces, the data only has "+p.dataCount+" of this type.":"The template has "+p.templateCount+" traces of type "+p.traceType+" but there are none in the data.";break;case"reused":c="Some of the templates of type "+p.traceType+" were used more than once. The template has "+p.templateCount+" traces, the data has "+p.dataCount+" of this type."}return p.msg=c,p}Q.makeTemplate=function(p){p=m.isPlainObject(p)?p:m.getGraphDiv(p),p=m.extendDeep({_context:i},{data:p.data,layout:p.layout}),x.supplyDefaults(p);var c=p.data||[],a=p.layout||{};a._basePlotModules=p._fullLayout._basePlotModules,a._modules=p._fullLayout._modules;var y={data:{},layout:{}};c.forEach(function(S){var E={};d(S,E,t.bind(null,S));var R=m.coerce(S,{},e,"type"),D=y.data[R];D||(D=y.data[R]=[]),D.push(E)}),d(a,y.layout,f.bind(null,a)),delete y.layout.template;var u=a.template;if(g(u)){var _,b,w,T,C,M,I=u.layout;g(I)&&l(I,y.layout);var P=u.data;if(g(P)){for(b in y.data)if(w=P[b],Array.isArray(w)){for(M=(C=y.data[b]).length,T=w.length,_=0;_<M;_++)l(w[_%T],C[_]);for(_=M;_<T;_++)C.push(m.extendDeep({},w[_]))}for(b in P)b in y.data||(y.data[b]=m.extendDeep([],P[b]))}}return y},Q.validateTemplate=function(p,c){var a=m.extendDeep({},{_context:i,data:p.data,layout:p.layout}),y=a.layout||{};g(c)||(c=y.template||{});var u=c.layout,_=c.data,b=[];a.layout=y,a.layout.template=c,x.supplyDefaults(a);var w=a._fullLayout,T=a._fullData,C={};if(g(u)?(function D(j,H){for(var Y in j)if("_"!==Y.charAt(0)&&g(j[Y])){var X,Z=r(Y),W=[];for(X=0;X<H.length;X++)W.push(h(j,Y,H[X])),Z!==Y&&W.push(h(j,Z,H[X]));for(X=0;X<W.length;X++)C[W[X]]=1;D(j[Y],W)}}(w,["layout"]),function D(j,H){for(var Y in j)if(-1===Y.indexOf("defaults")&&g(j[Y])){var X=h(j,Y,H);C[X]?D(j[Y],X):b.push({code:"unused",path:X})}}(u,"layout")):b.push({code:"layout"}),g(_)){for(var M,I={},P=0;P<T.length;P++){var S=T[P];I[M=S.type]=(I[M]||0)+1,S._fullInput._template||b.push({code:"missing",index:S._fullInput.index,traceType:M})}for(M in _){var E=_[M].length,R=I[M]||0;E>R?b.push({code:"unused",traceType:M,templateCount:E,dataCount:R}):R>E&&b.push({code:"reused",traceType:M,templateCount:E,dataCount:R})}}else b.push({code:"data"});if(function D(j,H){for(var Y in j)if("_"!==Y.charAt(0)){var X=j[Y],Z=h(j,Y,H);g(X)?(Array.isArray(j)&&!1===X._template&&X.templateitemname&&b.push({code:"missing",path:Z,templateitemname:X.templateitemname}),D(X,Z)):Array.isArray(X)&&s(X)&&D(X,Z)}}({data:T,layout:w},""),b.length)return b.map(o)}},{"../lib":515,"../plots/attributes":562,"../plots/plots":628,"./plot_config":553,"./plot_schema":554,"./plot_template":555}],558:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("./plot_api"),k=v("../plots/plots"),x=v("../lib"),e=v("../snapshot/helpers"),n=v("../snapshot/tosvg"),i=v("../snapshot/svgtoimg"),l=v("../version").version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};$.exports=function(d,f){var t,h,s,o;function p(R){return!(R in f)||x.validate(f[R],r[R])}if(f=f||{},x.isPlainObject(d)?(t=d.data||[],h=d.layout||{},s=d.config||{},o={}):(d=x.getGraphDiv(d),t=x.extendDeep([],d.data),h=x.extendDeep({},d.layout),s=d._context,o=d._fullLayout||{}),!p("width")&&null!==f.width||!p("height")&&null!==f.height)throw new Error("Height and width should be pixel values.");if(!p("format"))throw new Error("Export format is not "+x.join2(r.format.values,", "," or ")+".");var c={};function a(R,D){return x.coerce(f,c,r,R,D)}var y=a("format"),u=a("width"),_=a("height"),b=a("scale"),w=a("setBackground"),T=a("imageDataOnly"),C=document.createElement("div");C.style.position="absolute",C.style.left="-5000px",document.body.appendChild(C);var M=x.extendFlat({},h);u?M.width=u:null===f.width&&m(o.width)&&(M.width=o.width),_?M.height=_:null===f.height&&m(o.height)&&(M.height=o.height);var I=x.extendFlat({},s,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),P=e.getRedrawFunc(C);function S(){return new Promise(function(R){setTimeout(R,e.getDelay(C._fullLayout))})}function E(){return new Promise(function(R,D){var j=n(C,y,b),H=C._fullLayout.width,Y=C._fullLayout.height;function X(){g.purge(C),document.body.removeChild(C)}if("full-json"===y){var Z=k.graphJson(C,!1,"keepdata","object",!0,!0);return Z.version=l,Z=JSON.stringify(Z),X(),R(T?Z:e.encodeJSON(Z))}if(X(),"svg"===y)return R(T?j:e.encodeSVG(j));var W=document.createElement("canvas");W.id=x.randstr(),i({format:y,width:H,height:Y,scale:b,canvas:W,svg:j,promise:!0}).then(R).catch(D)})}return new Promise(function(R,D){g.newPlot(C,t,M,I).then(P).then(S).then(E).then(function(j){var H;R((H=j,T?H.replace(e.IMAGE_URL_PREFIX,""):H))}).catch(function(j){D(j)})})}},{"../lib":515,"../plots/plots":628,"../snapshot/helpers":651,"../snapshot/svgtoimg":653,"../snapshot/tosvg":655,"../version":1132,"./plot_api":552,"fast-isnumeric":190}],559:[function(v,$,Q){"use strict";var m=v("../lib"),g=v("../plots/plots"),k=v("./plot_schema"),x=v("./plot_config").dfltConfig,e=m.isPlainObject,n=Array.isArray,i=m.isArrayOrTypedArray;function l(c,a,y,u,_,b){b=b||[];for(var w=Object.keys(c),T=0;T<w.length;T++){var C=w[T];if("transforms"!==C){var M=b.slice();M.push(C);var I=c[C],P=a[C],S=s(y,C),E=(S||{}).valType,R="info_array"===E,D="colorscale"===E,j=(S||{}).items;if(h(y,C))if(e(I)&&e(P)&&"any"!==E)l(I,P,S,u,_,M);else if(R&&n(I)){I.length>P.length&&u.push(t("unused",_,M.concat(P.length)));var H,Y,Z,W,re=P.length,U=Array.isArray(j);if(U&&(re=Math.min(re,j.length)),2===S.dimensions)for(Y=0;Y<re;Y++)if(n(I[Y])){I[Y].length>P[Y].length&&u.push(t("unused",_,M.concat(Y,P[Y].length)));var B=P[Y].length;for(H=0;H<(U?Math.min(B,j[Y].length):B);H++)W=P[Y][H],m.validate(Z=I[Y][H],U?j[Y][H]:j)?W!==Z&&W!==+Z&&u.push(t("dynamic",_,M.concat(Y,H),Z,W)):u.push(t("value",_,M.concat(Y,H),Z))}else u.push(t("array",_,M.concat(Y),I[Y]));else for(Y=0;Y<re;Y++)W=P[Y],m.validate(Z=I[Y],U?j[Y]:j)?W!==Z&&W!==+Z&&u.push(t("dynamic",_,M.concat(Y),Z,W)):u.push(t("value",_,M.concat(Y),Z))}else if(S.items&&!R&&n(I)){var V,ee,N=j[Object.keys(j)[0]],K=[];for(V=0;V<P.length;V++){var J=P[V]._index||V;if((ee=M.slice()).push(J),e(I[J])&&e(P[V])){K.push(J);var te=I[J],ae=P[V];e(te)&&!1!==te.visible&&!1===ae.visible?u.push(t("invisible",_,ee)):l(te,ae,N,u,_,ee)}}for(V=0;V<I.length;V++)(ee=M.slice()).push(V),e(I[V])?-1===K.indexOf(V)&&u.push(t("unused",_,ee)):u.push(t("object",_,ee,I[V]))}else!e(I)&&e(P)?u.push(t("object",_,M,I)):i(I)||!i(P)||R||D?C in a?m.validate(I,S)?"enumerated"===S.valType&&(S.coerceNumber&&I!==+P||I!==P)&&u.push(t("dynamic",_,M,I,P)):u.push(t("value",_,M,I)):u.push(t("unused",_,M,I)):u.push(t("array",_,M,I));else u.push(t("schema",_,M))}}return u}function r(c,a){for(var y=c.layout.layoutAttributes,u=0;u<a.length;u++){var _=a[u],b=c.traces[_.type],w=b.layoutAttributes;w&&m.extendFlat(_.subplot?y[b.attributes.subplot.dflt]:y,w)}return y}$.exports=function(c,a){void 0===c&&(c=[]),void 0===a&&(a={});var y,u,_=k.get(),b=[],w={_context:m.extendFlat({},x)};n(c)?(w.data=m.extendDeep([],c),y=c):(w.data=[],y=[],b.push(t("array","data"))),e(a)?(w.layout=m.extendDeep({},a),u=a):(w.layout={},u={},arguments.length>1&&b.push(t("object","layout"))),g.supplyDefaults(w);for(var T=w._fullData,C=y.length,M=0;M<C;M++){var I=y[M],P=["data",M];if(e(I)){var S=T[M],E=S.type,R=_.traces[E].attributes;R.type={valType:"enumerated",values:[E]},!1===S.visible&&!1!==I.visible&&b.push(t("invisible",P)),l(I,S,R,b,P);var D=I.transforms,j=S.transforms;if(D){n(D)||b.push(t("array",P,["transforms"])),P.push("transforms");for(var H=0;H<D.length;H++){var Y=["transforms",H],X=D[H].type;if(e(D[H])){var Z=_.transforms[X]?_.transforms[X].attributes:{};Z.type={valType:"enumerated",values:Object.keys(_.transforms)},l(D[H],j[H],Z,b,P,Y)}else b.push(t("object",P,Y))}}}else b.push(t("object",P))}return l(u,w._fullLayout,r(_,T),b,"layout"),0===b.length?void 0:b};var d={object:function(c,a){return("layout"===c&&""===a?"The layout argument":"data"===c[0]&&""===a?"Trace "+c[1]+" in the data argument":f(c)+"key "+a)+" must be linked to an object container"},array:function(c,a){return("data"===c?"The data argument":f(c)+"key "+a)+" must be linked to an array container"},schema:function(c,a){return f(c)+"key "+a+" is not part of the schema"},unused:function(c,a,y){var u=e(y)?"container":"key";return f(c)+u+" "+a+" did not get coerced"},dynamic:function(c,a,y,u){return[f(c)+"key",a,"(set to '"+y+"')","got reset to","'"+u+"'","during defaults."].join(" ")},invisible:function(c,a){return(a?f(c)+"item "+a:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,a,y){return[f(c)+"key "+a,"is set to an invalid value ("+y+")"].join(" ")}};function f(c){return n(c)?"In data trace "+c[1]+", ":"In "+c+", "}function t(c,a,y,u,_){var b,w;y=y||"",n(a)?(b=a[0],w=a[1]):(b=a,w=null);var T=function(M){if(!n(M))return String(M);for(var I="",P=0;P<M.length;P++){var S=M[P];"number"==typeof S?I=I.substr(0,I.length-1)+"["+S+"]":I+=S,P<M.length-1&&(I+=".")}return I}(y),C=d[c](a,T,u,_);return m.log(C),{code:c,container:b,trace:w,path:y,astr:T,msg:C}}function h(c,a){var y=p(a),u=y.keyMinusId;return!!(u in c&&c[u]._isSubplotObj&&y.id)||a in c}function s(c,a){return a in c?c[a]:c[p(a).keyMinusId]}var o=m.counterRegex("([a-z]+)");function p(c){var a=c.match(o);return{keyMinusId:a&&a[1],id:a&&a[2]}}},{"../lib":515,"../plots/plots":628,"./plot_config":553,"./plot_schema":554}],560:[function(v,$,Q){"use strict";$.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],561:[function(v,$,Q){"use strict";var m=v("../lib"),g=v("../plot_api/plot_template");$.exports=function(k,x,e){var n,i,l=e.name,r=e.inclusionAttr||"visible",d=x[l],f=m.isArrayOrTypedArray(k[l])?k[l]:[],t=x[l]=[],h=g.arrayTemplater(x,l,r);for(n=0;n<f.length;n++){var s=f[n];m.isPlainObject(s)?i=h.newItem(s):(i=h.newItem({}))[r]=!1,i._index=n,!1!==i[r]&&e.handleItemDefaults(s,i,x,e),t.push(i)}var o=h.defaultItems();for(n=0;n<o.length;n++)(i=o[n])._index=t.length,e.handleItemDefaults({},i,x,e,{}),t.push(i);if(m.isArrayOrTypedArray(d)){var p=Math.min(d.length,t.length);for(n=0;n<p;n++)m.relinkPrivateKeys(t[n],d[n])}return t}},{"../lib":515,"../plot_api/plot_template":555}],562:[function(v,$,Q){"use strict";var m=v("./font_attributes"),g=v("../components/fx/attributes");$.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:m({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:g.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":398,"./font_attributes":594}],563:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib"),k=g.dateTime2ms,x=g.incrementMonth,e=v("../../constants/numerical").ONEAVGMONTH;$.exports=function(n,i,l,r){if("date"!==i.type)return{vals:r};var d=n[l+"periodalignment"];if(!d)return{vals:r};var f,t=n[l+"period"];if(m(t)){if((t=+t)<=0)return{vals:r}}else if("string"==typeof t&&"M"===t.charAt(0)){var h=+t.substring(1);if(!(h>0&&Math.round(h)===h))return{vals:r};f=h}for(var s=i.calendar,o="start"===d,p="end"===d,a=k(n[l+"period0"],s)||0,y=[],u=[],_=[],b=r.length,w=0;w<b;w++){var T,C,M,I=r[w];if(f){for(T=Math.round((I-a)/(f*e)),M=x(a,f*T,s);M>I;)M=x(M,-f,s);for(;M<=I;)M=x(M,f,s);C=x(M,-f,s)}else{for(M=a+(T=Math.round((I-a)/t))*t;M>I;)M-=t;for(;M<=I;)M+=t;C=M-t}y[w]=o?C:p?M:(C+M)/2,u[w]=C,_[w]=M}return{vals:y,starts:u,ends:_}}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],564:[function(v,$,Q){"use strict";$.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],565:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("fast-isnumeric"),k=v("../../lib"),x=v("../../constants/numerical").FP_SAFE,e=v("../../registry"),n=v("../../components/drawing"),i=v("./axis_ids"),l=i.getFromId,r=i.isLinked;function d(u,_){var b,w,T=[],C=u._fullLayout,M=t(C,_,0),I=t(C,_,1),P=h(u,_),S=P.min,E=P.max;if(0===S.length||0===E.length)return k.simpleMap(_.range,_.r2l);var R=S[0].val,D=E[0].val;for(b=1;b<S.length&&R===D;b++)R=Math.min(R,S[b].val);for(b=1;b<E.length&&R===D;b++)D=Math.max(D,E[b].val);var j=!1;if(_.range){var H=k.simpleMap(_.range,_.r2l);j=H[1]<H[0]}"reversed"===_.autorange&&(j=!0,_.autorange=!0);var Y,X,Z,W,re,U,B=_.rangemode,V="tozero"===B,ee="nonnegative"===B,N=_._length,K=N/10,J=0;for(b=0;b<S.length;b++)for(Y=S[b],w=0;w<E.length;w++)(U=(X=E[w]).val-Y.val-f(_,Y.val,X.val))>0&&((re=N-M(Y)-I(X))>K?U/re>J&&(Z=Y,W=X,J=U/re):U/N>J&&(Z={val:Y.val,nopad:1},W={val:X.val,nopad:1},J=U/N));if(R===D){var te=R-1,ae=R+1;if(V)if(0===R)T=[0,1];else{var le=(R>0?E:S).reduce(function(ve,ue){return Math.max(ve,I(ue))},0),se=R/(1-Math.min(.5,le/N));T=R>0?[0,se]:[se,0]}else T=ee?[Math.max(0,te),Math.max(1,ae)]:[te,ae]}else V?(Z.val>=0&&(Z={val:0,nopad:1}),W.val<=0&&(W={val:0,nopad:1})):ee&&(Z.val-J*M(Z)<0&&(Z={val:0,nopad:1}),W.val<=0&&(W={val:1,nopad:1})),J=(W.val-Z.val-f(_,Y.val,X.val))/(N-M(Z)-I(W)),T=[Z.val-J*M(Z),W.val+J*I(W)];return j&&T.reverse(),k.simpleMap(T,_.l2r||Number)}function f(u,_,b){var w=0;if(u.rangebreaks)for(var T=u.locateBreaks(_,b),C=0;C<T.length;C++){var M=T[C];w+=M.max-M.min}return w}function t(u,_,b){var w=.05*_._length,T=_._anchorAxis||{};if(-1!==(_.ticklabelposition||"").indexOf("inside")||-1!==(T.ticklabelposition||"").indexOf("inside")){var C="reversed"===_.autorange;if(!C){var M=k.simpleMap(_.range,_.r2l);C=M[1]<M[0]}C&&(b=!b)}var I=0;return r(u,_._id)||(I=function(P,S,E){var R=0,D="x"===S._id.charAt(0);for(var j in P._plots){var H=P._plots[j];if(S._id===H.xaxis._id||S._id===H.yaxis._id){var Y=(D?H.yaxis:H.xaxis)||{};if(-1!==(Y.ticklabelposition||"").indexOf("inside")&&(!E&&("left"===Y.side||"bottom"===Y.side)||E&&("top"===Y.side||"right"===Y.side))){if(Y._vals){var X=k.deg2rad(Y._tickAngles[Y._id+"tick"]||0),Z=Math.abs(Math.cos(X)),W=Math.abs(Math.sin(X));Y._vals[0].bb||Y._selections[Y._id+"tick"].each(function(N){var K=m.select(this);K.select(".text-math-group").empty()&&(N.bb=n.bBox(K.node()))});for(var U=0;U<Y._vals.length;U++){var B=Y._vals[U].bb;if(B){var V=6+B.width,ee=6+B.height;R=Math.max(R,D?Math.max(V*Z,ee*W):Math.max(ee*Z,V*W))}}}"inside"===Y.ticks&&"inside"===Y.ticklabelposition&&(R+=Y.ticklen||0)}}}return R}(u,_,b)),w=Math.max(I,w),"domain"===_.constrain&&_._inputDomain&&(w*=(_._inputDomain[1]-_._inputDomain[0])/(_.domain[1]-_.domain[0])),function(P){return P.nopad?0:P.pad+(P.extrapad?w:I)}}function h(u,_,b){var w,T,C,M=_._id,P=u._fullLayout,S=[],E=[];function R(X,Z){for(w=0;w<Z.length;w++){var W=X[Z[w]],re=(W._extremes||{})[M];if(!0===W.visible&&re){for(T=0;T<re.min.length;T++)s(S,(C=re.min[T]).val,C.pad,{extrapad:C.extrapad});for(T=0;T<re.max.length;T++)o(E,(C=re.max[T]).val,C.pad,{extrapad:C.extrapad})}}}if(R(u._fullData,_._traceIndices),R(P.annotations||[],_._annIndices||[]),R(P.shapes||[],_._shapeIndices||[]),_._matchGroup&&!b)for(var D in _._matchGroup)if(D!==_._id){var j=l(u,D),H=h(u,j,!0),Y=_._length/j._length;for(T=0;T<H.min.length;T++)s(S,(C=H.min[T]).val,C.pad*Y,{extrapad:C.extrapad});for(T=0;T<H.max.length;T++)o(E,(C=H.max[T]).val,C.pad*Y,{extrapad:C.extrapad})}return{min:S,max:E}}function s(u,_,b,w){p(u,_,b,w,a)}function o(u,_,b,w){p(u,_,b,w,y)}function p(u,_,b,w,T){for(var C=w.tozero,M=w.extrapad,I=!0,P=0;P<u.length&&I;P++){var S=u[P];if(T(S.val,_)&&S.pad>=b&&(S.extrapad||!M)){I=!1;break}T(_,S.val)&&S.pad<=b&&(M||!S.extrapad)&&(u.splice(P,1),P--)}if(I){var E=C&&0===_;u.push({val:_,pad:E?0:b,extrapad:!E&&M})}}function c(u){return g(u)&&Math.abs(u)<x}function a(u,_){return u<=_}function y(u,_){return u>=_}$.exports={getAutoRange:d,makePadFn:t,doAutoRange:function(u,_,b){if(_.setScale(),_.autorange){_.range=b?b.slice():d(u,_),_._r=_.range.slice(),_._rl=k.simpleMap(_._r,_.r2l);var w=_._input,T={};T[_._attr+".range"]=_.range,T[_._attr+".autorange"]=_.autorange,e.call("_storeDirectGUIEdit",u.layout,u._fullLayout._preGUI,T),w.range=_.range.slice(),w.autorange=_.autorange}var C=_._anchorAxis;if(C&&C.rangeslider){var M=C.rangeslider[_._name];M&&"auto"===M.rangemode&&(M.range=d(u,_)),C._input.rangeslider[_._name]=k.extendFlat({},M)}},findExtremes:function(u,_,b){b||(b={}),u._m||u.setScale();var w,T,C,M,I,P,S,E,R,D=[],j=[],H=_.length,Y=b.padded||!1,X=b.tozero&&("linear"===u.type||"-"===u.type),Z="log"===u.type,W=!1,re=b.vpadLinearized||!1;function U(ae){if(Array.isArray(ae))return W=!0,function(se){return Math.max(Number(ae[se]||0),0)};var le=Math.max(Number(ae||0),0);return function(){return le}}var B=U((u._m>0?b.ppadplus:b.ppadminus)||b.ppad||0),V=U((u._m>0?b.ppadminus:b.ppadplus)||b.ppad||0),ee=U(b.vpadplus||b.vpad),N=U(b.vpadminus||b.vpad);if(!W){if(E=1/0,R=-1/0,Z)for(w=0;w<H;w++)(T=_[w])<E&&T>0&&(E=T),T>R&&T<x&&(R=T);else for(w=0;w<H;w++)(T=_[w])<E&&T>-x&&(E=T),T>R&&T<x&&(R=T);_=[E,R],H=2}var K={tozero:X,extrapad:Y};function J(ae){g(C=_[ae])&&(P=B(ae),S=V(ae),re?(M=u.c2l(C)-N(ae),I=u.c2l(C)+ee(ae)):(E=C-N(ae),R=C+ee(ae),Z&&E<R/10&&(E=R/10),M=u.c2l(E),I=u.c2l(R)),X&&(M=Math.min(0,M),I=Math.max(0,I)),c(M)&&s(D,M,S,K),c(I)&&o(j,I,P,K))}var te=Math.min(6,H);for(w=0;w<te;w++)J(w);for(w=H-1;w>=te;w--)J(w);return{min:D,max:j,opts:b}},concatExtremes:h}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../../registry":647,"./axis_ids":570,"@plotly/d3":58,"fast-isnumeric":190}],566:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("fast-isnumeric"),k=v("../../plots/plots"),x=v("../../registry"),e=v("../../lib"),n=e.strTranslate,i=v("../../lib/svg_text_utils"),l=v("../../components/titles"),r=v("../../components/color"),d=v("../../components/drawing"),f=v("./layout_attributes"),t=v("./clean_ticks"),h=v("../../constants/numerical"),s=h.ONEMAXYEAR,o=h.ONEAVGYEAR,p=h.ONEMINYEAR,c=h.ONEMAXQUARTER,a=h.ONEAVGQUARTER,y=h.ONEMINQUARTER,u=h.ONEMAXMONTH,_=h.ONEAVGMONTH,b=h.ONEMINMONTH,w=h.ONEWEEK,T=h.ONEDAY,C=T/2,M=h.ONEHOUR,I=h.ONEMIN,P=h.ONESEC,S=h.MINUS_SIGN,E=h.BADNUM,R={K:"zeroline"},D={K:"gridline",L:"path"},j={K:"minor-gridline",L:"path"},H={K:"tick",L:"path"},Y={K:"tick",L:"text"},X={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},Z=v("../../constants/alignment"),W=Z.MID_SHIFT,re=Z.CAP_SHIFT,U=Z.LINE_SPACING,B=Z.OPPOSITE_SIDE,V=$.exports={};V.setConvert=v("./set_convert");var ee=v("./axis_autotype"),N=v("./axis_ids"),K=N.idSort,J=N.isLinked;V.id2name=N.id2name,V.name2id=N.name2id,V.cleanId=N.cleanId,V.list=N.list,V.listIds=N.listIds,V.getFromId=N.getFromId,V.getFromTrace=N.getFromTrace;var te=v("./autorange");function ae(he){var be=1e-4*(he[1]-he[0]);return[he[0]-be,he[1]+be]}V.getAutoRange=te.getAutoRange,V.findExtremes=te.findExtremes,V.coerceRef=function(he,be,ze,Ve,Je,Ye){var lt=Ve.charAt(Ve.length-1),st=ze._fullLayout._subplots[lt+"axis"],Mt=Ve+"ref",Dt={};return Je||(Je=st[0]||("string"==typeof Ye?Ye:Ye[0])),Ye||(Ye=Je),st=st.concat(st.map(function(ht){return ht+" domain"})),Dt[Mt]={valType:"enumerated",values:st.concat(Ye?"string"==typeof Ye?[Ye]:Ye:[]),dflt:Je},e.coerce(he,be,Dt,Mt)},V.getRefType=function(he){return void 0===he?he:"paper"===he?"paper":"pixel"===he?"pixel":/( domain)$/.test(he)?"domain":"range"},V.coercePosition=function(he,be,ze,Ve,Je,Ye){var lt,st;if("range"!==V.getRefType(Ve))lt=e.ensureNumber,st=ze(Je,Ye);else{var Mt=V.getFromId(be,Ve);st=ze(Je,Ye=Mt.fraction2r(Ye)),lt=Mt.cleanPos}he[Je]=lt(st)},V.cleanPosition=function(he,be,ze){return("paper"===ze||"pixel"===ze?e.ensureNumber:V.getFromId(be,ze).cleanPos)(he)},V.redrawComponents=function(he,be){be=be||V.listIds(he);var ze=he._fullLayout;function Ve(Je,Ye,lt,st){for(var Mt=x.getComponentMethod(Je,Ye),Dt={},ht=0;ht<be.length;ht++)for(var mt=ze[V.id2name(be[ht])][lt],Ot=0;Ot<mt.length;Ot++){var At=mt[Ot];if(!Dt[At]&&(Mt(he,At),Dt[At]=1,st))return}}Ve("annotations","drawOne","_annIndices"),Ve("shapes","drawOne","_shapeIndices"),Ve("images","draw","_imgIndices",!0),Ve("selections","drawOne","_selectionIndices")};var le=V.getDataConversions=function(he,be,ze,Ve){var Je,Ye="x"===ze||"y"===ze||"z"===ze?ze:Ve;if(Array.isArray(Ye)){if(Je={type:ee(Ve,void 0,{autotypenumbers:he._fullLayout.autotypenumbers}),_categories:[]},V.setConvert(Je),"category"===Je.type)for(var lt=0;lt<Ve.length;lt++)Je.d2c(Ve[lt])}else Je=V.getFromTrace(he,be,Ye);return Je?{d2c:Je.d2c,c2d:Je.c2d}:"ids"===Ye?{d2c:ve,c2d:ve}:{d2c:se,c2d:se}};function se(he){return+he}function ve(he){return String(he)}function ue(he,be){return Math.abs((he/be+.5)%1-.5)<.001}function ye(he,be){return Math.abs(he/be-1)<.001}function Me(he){return+he.substring(1)}function pe(he){var be=ae(e.simpleMap(he.range,he.r2l)),ze=Math.min(be[0],be[1]),Ve=Math.max(be[0],be[1]),Je="category"===he.type?he.d2l_noadd:he.d2l;"log"===he.type&&"L"!==String(he.dtick).charAt(0)&&(he.dtick="L"+Math.pow(10,Math.floor(Math.min(he.range[0],he.range[1]))-1));for(var Ye=[],lt=0;lt<=1;lt++)if(!lt||he.minor){var st=lt?he.minor.tickvals:he.tickvals,Mt=lt?[]:he.ticktext;if(st){Array.isArray(Mt)||(Mt=[]);for(var Dt=0;Dt<st.length;Dt++){var ht=Je(st[Dt]);if(ht>ze&&ht<Ve){var mt=void 0===Mt[Dt]?V.tickText(he,ht):Oe(he,ht,String(Mt[Dt]));lt&&(mt.minor=!0,mt.text=""),Ye.push(mt)}}}}return he.rangebreaks&&(Ye=Ye.filter(function(Ot){return he.maskBreaks(Ot.x)!==E})),Ye}V.getDataToCoordFunc=function(he,be,ze,Ve){return le(he,be,ze,Ve).d2c},V.counterLetter=function(he){var be=he.charAt(0);return"x"===be?"y":"y"===be?"x":void 0},V.minDtick=function(he,be,ze,Ve){-1===["log","category","multicategory"].indexOf(he.type)&&Ve?void 0===he._minDtick?(he._minDtick=be,he._forceTick0=ze):he._minDtick&&((he._minDtick/be+1e-6)%1<2e-6&&((ze-he._forceTick0)/be%1+1.000001)%1<2e-6?(he._minDtick=be,he._forceTick0=ze):((be/he._minDtick+1e-6)%1>2e-6||((ze-he._forceTick0)/he._minDtick%1+1.000001)%1>2e-6)&&(he._minDtick=0)):he._minDtick=0},V.saveRangeInitial=function(he,be){for(var ze=V.list(he,"",!0),Ve=!1,Je=0;Je<ze.length;Je++){var Ye=ze[Je],lt=void 0===Ye._rangeInitial;(lt&&!1===Ye.autorange||be&&(lt||Ye.range[0]!==Ye._rangeInitial[0]||Ye.range[1]!==Ye._rangeInitial[1]))&&(Ye._rangeInitial=Ye.range.slice(),Ve=!0)}return Ve},V.saveShowSpikeInitial=function(he,be){for(var ze=V.list(he,"",!0),Ve=!1,Je="on",Ye=0;Ye<ze.length;Ye++){var lt=ze[Ye],st=void 0===lt._showSpikeInitial;(st||be&&(st||lt.showspikes!==lt._showspikes))&&(lt._showSpikeInitial=lt.showspikes,Ve=!0),"on"!==Je||lt.showspikes||(Je="off")}return he._fullLayout._cartesianSpikesEnabled=Je,Ve},V.autoBin=function(he,be,ze,Ve,Je,Ye){var lt,st=e.aggNums(Math.min,null,he),Mt=e.aggNums(Math.max,null,he);if("category"===be.type||"multicategory"===be.type)return{start:st-.5,end:Mt+.5,size:Math.max(1,Math.round(Ye)||1),_dataSpan:Mt-st};if(Je||(Je=be.calendar),lt="log"===be.type?{type:"linear",range:[st,Mt]}:{type:be.type,range:e.simpleMap([st,Mt],be.c2r,0,Je),calendar:Je},V.setConvert(lt),Ye=Ye&&t.dtick(Ye,lt.type))lt.dtick=Ye,lt.tick0=t.tick0(void 0,lt.type,Je);else{var Dt;if(ze)Dt=(Mt-st)/ze;else{var ht=e.distinctVals(he),mt=Math.pow(10,Math.floor(Math.log(ht.minDiff)/Math.LN10)),Ot=mt*e.roundUp(ht.minDiff/mt,[.9,1.9,4.9,9.9],!0);Dt=Math.max(Ot,2*e.stdev(he)/Math.pow(he.length,Ve?.25:.4)),g(Dt)||(Dt=1)}V.autoTicks(lt,Dt)}var At,It=lt.dtick,Se=V.tickIncrement(V.tickFirst(lt),It,"reverse",Je);if("number"==typeof It)At=(Se=function(Ze,it,dt,Ct,Ut){var Jt=0,qt=0,pr=0,Sr=0;function mr(dr){return(1+100*(dr-Ze)/dt.dtick)%100<2}for(var tr=0;tr<it.length;tr++)it[tr]%1==0?pr++:g(it[tr])||Sr++,mr(it[tr])&&Jt++,mr(it[tr]+dt.dtick/2)&&qt++;var rr=it.length-Sr;if(pr===rr&&"date"!==dt.type)dt.dtick<1?Ze=Ct-.5*dt.dtick:(Ze-=.5)+dt.dtick<Ct&&(Ze+=dt.dtick);else if(qt<.1*rr&&(Jt>.3*rr||mr(Ct)||mr(Ut))){var ar=dt.dtick/2;Ze+=Ze+ar<Ct?ar:-ar}return Ze}(Se,he,lt,st,Mt))+(1+Math.floor((Mt-Se)/It))*It;else for("M"===lt.dtick.charAt(0)&&(Se=function(Ze,it,dt,Ct,Ut){var Jt=e.findExactDates(it,Ut);if(Jt.exactDays>.8){var qt=Number(dt.substr(1));Jt.exactYears>.8&&qt%12==0?Ze=V.tickIncrement(Ze,"M6","reverse")+1.5*T:Jt.exactMonths>.8?Ze=V.tickIncrement(Ze,"M1","reverse")+15.5*T:Ze-=C;var pr=V.tickIncrement(Ze,dt);if(pr<=Ct)return pr}return Ze}(Se,he,It,st,Je)),At=Se;At<=Mt;)At=V.tickIncrement(At,It,!1,Je);return{start:be.c2r(Se,0,Je),end:be.c2r(At,0,Je),size:It,_dataSpan:Mt-st}},V.prepMinorTicks=function(he,be,ze){if(!be.minor.dtick){delete he.dtick;var Ve,Je=be.dtick&&g(be._tmin);if(Je){var Ye=V.tickIncrement(be._tmin,be.dtick,!0);Ve=[be._tmin,.99*Ye+.01*be._tmin]}else{var lt=e.simpleMap(be.range,be.r2l);Ve=[lt[0],.8*lt[0]+.2*lt[1]]}if(he.range=e.simpleMap(Ve,be.l2r),he._isMinor=!0,V.prepTicks(he,ze),Je){var st=g(be.dtick),Mt=g(he.dtick),Dt=st?be.dtick:+be.dtick.substring(1),ht=Mt?he.dtick:+he.dtick.substring(1);st&&Mt?ue(Dt,ht)?Dt===2*w&&ht===2*T&&(he.dtick=w):he.dtick=Dt===2*w&&ht===3*T?w:Dt!==w||(be._input.minor||{}).nticks?ye(Dt/ht,2.5)?Dt/2:Dt:T:"M"===String(be.dtick).charAt(0)?Mt?he.dtick="M1":ue(Dt,ht)?Dt>=12&&2===ht&&(he.dtick="M3"):he.dtick=be.dtick:"L"===String(he.dtick).charAt(0)?"L"===String(be.dtick).charAt(0)?ue(Dt,ht)||(he.dtick=ye(Dt/ht,2.5)?be.dtick/2:be.dtick):he.dtick="D1":"D2"===he.dtick&&+be.dtick>1&&(he.dtick=1)}he.range=be.range}void 0===be.minor._tick0Init&&(he.tick0=be.tick0)},V.prepTicks=function(he,be){var ze=e.simpleMap(he.range,he.r2l,void 0,void 0,be);if("auto"===he.tickmode||!he.dtick){var Ve,Je=he.nticks;Je||("category"===he.type||"multicategory"===he.type?(Ve=he.tickfont?e.bigFont(he.tickfont.size||12):15,Je=he._length/Ve):(Ve="y"===he._id.charAt(0)?40:80,Je=e.constrain(he._length/Ve,4,9)+1),"radialaxis"===he._name&&(Je*=2)),he.minor&&"array"!==he.minor.tickmode||"array"===he.tickmode&&(Je*=100),he._roughDTick=Math.abs(ze[1]-ze[0])/Je,V.autoTicks(he,he._roughDTick),he._minDtick>0&&he.dtick<2*he._minDtick&&(he.dtick=he._minDtick,he.tick0=he.l2r(he._forceTick0))}"period"===he.ticklabelmode&&function(Ye){var lt;function st(){return!(g(Ye.dtick)||"M"!==Ye.dtick.charAt(0))}var Mt=st(),Dt=V.getTickFormat(Ye);if(Dt){var ht=Ye._dtickInit!==Ye.dtick;/%[fLQsSMX]/.test(Dt)||(/%[HI]/.test(Dt)?(lt=M,ht&&!Mt&&Ye.dtick<M&&(Ye.dtick=M)):/%p/.test(Dt)?(lt=C,ht&&!Mt&&Ye.dtick<C&&(Ye.dtick=C)):/%[Aadejuwx]/.test(Dt)?(lt=T,ht&&!Mt&&Ye.dtick<T&&(Ye.dtick=T)):/%[UVW]/.test(Dt)?(lt=w,ht&&!Mt&&Ye.dtick<w&&(Ye.dtick=w)):/%[Bbm]/.test(Dt)?(lt=_,ht&&(Mt?Me(Ye.dtick)<1:Ye.dtick<b)&&(Ye.dtick="M1")):/%[q]/.test(Dt)?(lt=a,ht&&(Mt?Me(Ye.dtick)<3:Ye.dtick<y)&&(Ye.dtick="M3")):/%[Yy]/.test(Dt)&&(lt=o,ht&&(Mt?Me(Ye.dtick)<12:Ye.dtick<p)&&(Ye.dtick="M12")))}(Mt=st())&&Ye.tick0===Ye._dowTick0&&(Ye.tick0=Ye._rawTick0),Ye._definedDelta=lt}(he),he.tick0||(he.tick0="date"===he.type?"2000-01-01":0),"date"===he.type&&he.dtick<.1&&(he.dtick=.1),Ie(he)},V.calcTicks=function(he,be){for(var ze,Ve,Je=he.type,Ye=he.calendar,lt=he.ticklabelstep,st="period"===he.ticklabelmode,Mt=e.simpleMap(he.range,he.r2l,void 0,void 0,be),Dt=Mt[1]<Mt[0],ht=Math.min(Mt[0],Mt[1]),mt=Math.max(Mt[0],Mt[1]),Ot=Math.max(1e3,he._length||0),At=[],It=[],Se=[],Ze=[],it=he.minor&&(he.minor.ticks||he.minor.showgrid),dt=1;dt>=(it?0:1);dt--){var Ct=!dt;dt?(he._dtickInit=he.dtick,he._tick0Init=he.tick0):(he.minor._dtickInit=he.minor.dtick,he.minor._tick0Init=he.minor.tick0);var Ut=dt?he:e.extendFlat({},he,he.minor);if(Ct?V.prepMinorTicks(Ut,he,be):V.prepTicks(Ut,be),"array"!==Ut.tickmode){var Jt=ae(Mt),qt=Jt[0],pr=Jt[1],Sr=g(Ut.dtick),mr="log"===Je&&!(Sr||"L"===Ut.dtick.charAt(0)),tr=V.tickFirst(Ut,be);if(dt){if(he._tmin=tr,tr<qt!==Dt)break;"category"!==Je&&"multicategory"!==Je||(pr=Dt?Math.max(-.5,pr):Math.min(he._categories.length-.5,pr))}var rr,ar,dr=null,xr=tr;dt&&(Sr?ar=he.dtick:"date"===Je?"string"==typeof he.dtick&&"M"===he.dtick.charAt(0)&&(ar=_*he.dtick.substring(1)):ar=he._roughDTick,rr=Math.round((he.r2l(xr)-he.r2l(he.tick0))/ar)-1);var Lr=Ut.dtick;for(Ut.rangebreaks&&Ut._tick0Init!==Ut.tick0&&(xr=Ft(xr,he),Dt||(xr=V.tickIncrement(xr,Lr,!Dt,Ye))),dt&&st&&(xr=V.tickIncrement(xr,Lr,!Dt,Ye),rr--);Dt?xr>=pr:xr<=pr;xr=V.tickIncrement(xr,Lr,Dt,Ye)){if(dt&&rr++,Ut.rangebreaks&&!Dt){if(xr<qt)continue;if(Ut.maskBreaks(xr)===E&&Ft(xr,Ut)>=mt)break}if(Se.length>Ot||xr===dr)break;dr=xr;var zr={value:xr};dt?(mr&&xr!==(0|xr)&&(zr.simpleLabel=!0),lt>1&&rr%lt&&(zr.skipLabel=!0),Se.push(zr)):(zr.minor=!0,Ze.push(zr))}}else dt?(Se=[],At=pe(he)):(Ze=[],It=pe(he))}if(it&&!("inside"===he.minor.ticks&&"outside"===he.ticks||"outside"===he.minor.ticks&&"inside"===he.ticks)){for(var Hr=Se.map(function(On){return On.value}),Xr=[],cn=0;cn<Ze.length;cn++){var an=Ze[cn],Nn=an.value;if(-1===Hr.indexOf(Nn)){for(var on=!1,wn=0;!on&&wn<Se.length;wn++)1e7+Se[wn].value===1e7+Nn&&(on=!0);on||Xr.push(an)}}Ze=Xr}if(st&&function(On,si,or){for(var br=0;br<On.length;br++){var Rt=On[br].value,fr=br,gr=br+1;br<On.length-1?(fr=br,gr=br+1):br>0?(fr=br-1,gr=br):(fr=br,gr=br);var jr,Er=Math.abs(On[gr].value-On[fr].value),_r=or||Er,kr=0;_r>=p?kr=Er>=p&&Er<=s?Er:o:or===a&&_r>=y?kr=Er>=y&&Er<=c?Er:a:_r>=b?kr=Er>=b&&Er<=u?Er:_:or===w&&_r>=w?kr=w:_r>=T?kr=T:or===C&&_r>=C?kr=C:or===M&&_r>=M&&(kr=M),kr>=Er&&(kr=Er,jr=!0);var Mr=Rt+kr;if(si.rangebreaks&&kr>0){for(var Pr=0,Wr=0;Wr<84;Wr++){var Zr=(Wr+.5)/84;si.maskBreaks(Rt*(1-Zr)+Zr*Mr)!==E&&Pr++}(kr*=Pr/84)||(On[br].drop=!0),jr&&Er>w&&(kr=Er)}(kr>0||0===br)&&(On[br].periodX=Rt+kr/2)}}(Se,he,he._definedDelta),he.rangebreaks){var An="y"===he._id.charAt(0),ii=1;"auto"===he.tickmode&&(ii=he.tickfont?he.tickfont.size:12);var Vr=NaN;for(ze=Se.length-1;ze>-1;ze--)if(Se[ze].drop)Se.splice(ze,1);else{Se[ze].value=Ft(Se[ze].value,he);var sn=he.c2p(Se[ze].value);(An?Vr>sn-ii:Vr<sn+ii)?Se.splice(Dt?ze+1:ze,1):Vr=sn}}cr(he)&&360===Math.abs(Mt[1]-Mt[0])&&Se.pop(),he._tmax=(Se[Se.length-1]||{}).value,he._prevDateHead="",he._inCalcTicks=!0;var xn,nn,fn=function(On){On.text="",he._prevDateHead=Ve};for(Se=Se.concat(Ze),ze=0;ze<Se.length;ze++){var Mn=Se[ze].value;Se[ze].minor?It.push({x:Mn,minor:!0}):(Ve=he._prevDateHead,xn=V.tickText(he,Mn,!1,Se[ze].simpleLabel),void 0!==(nn=Se[ze].periodX)&&(xn.periodX=nn,(nn>mt||nn<ht)&&(nn>mt&&(xn.periodX=mt),nn<ht&&(xn.periodX=ht),fn(xn))),Se[ze].skipLabel&&fn(xn),At.push(xn))}return At=At.concat(It),he._inCalcTicks=!1,st&&At.length&&(At[0].noTick=!0),At};var ge=[2,5,10],we=[1,2,3,6,12],oe=[1,2,5,10,15,30],de=[1,2,3,7,14],Te=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ee=[-.301,0,.301,.699,1],Ae=[15,30,45,90,180];function De(he,be,ze){return be*e.roundUp(he/be,ze)}function Ie(he){var be=he.dtick;if(he._tickexponent=0,g(be)||"string"==typeof be||(be=1),"category"!==he.type&&"multicategory"!==he.type||(he._tickround=null),"date"===he.type){var ze=he.r2l(he.tick0),Ve=he.l2r(ze).replace(/(^-|i)/g,""),Je=Ve.length;if("M"===String(be).charAt(0))he._tickround=Je>10||"01-01"!==Ve.substr(5)?"d":+be.substr(1)%12==0?"y":"m";else if(be>=T&&Je<=10||be>=15*T)he._tickround="d";else if(be>=I&&Je<=16||be>=M)he._tickround="M";else if(be>=P&&Je<=19||be>=I)he._tickround="S";else{var Ye=he.l2r(ze+be).replace(/^-/,"").length;he._tickround=Math.max(Je,Ye)-20,he._tickround<0&&(he._tickround=4)}}else if(g(be)||"L"===be.charAt(0)){var lt=he.range.map(he.r2d||Number);g(be)||(be=Number(be.substr(1))),he._tickround=2-Math.floor(Math.log(be)/Math.LN10+.01);var st=Math.max(Math.abs(lt[0]),Math.abs(lt[1])),Mt=Math.floor(Math.log(st)/Math.LN10+.01),Dt=void 0===he.minexponent?3:he.minexponent;Math.abs(Mt)>Dt&&(he._tickexponent=Fe(he.exponentformat)&&!Pe(Mt)?3*Math.round((Mt-1)/3):Mt)}else he._tickround=null}function Oe(he,be,ze){var Ve=he.tickfont||{};return{x:be,dx:0,dy:0,text:ze||"",fontSize:Ve.size,font:Ve.family,fontColor:Ve.color}}V.autoTicks=function(he,be,ze){var Ve;function Je(mt){return Math.pow(mt,Math.floor(Math.log(be)/Math.LN10))}if("date"===he.type){he.tick0=e.dateTick0(he.calendar,0);var Ye=2*be;if(Ye>o)be/=o,Ve=Je(10),he.dtick="M"+12*De(be,Ve,ge);else if(Ye>_)he.dtick="M"+De(be/=_,1,we);else if(Ye>T){if(he.dtick=De(be,T,he._hasDayOfWeekBreaks?[1,2,7,14]:de),!ze){var lt=V.getTickFormat(he),st="period"===he.ticklabelmode;st&&(he._rawTick0=he.tick0),he.tick0=/%[uVW]/.test(lt)?e.dateTick0(he.calendar,2):e.dateTick0(he.calendar,1),st&&(he._dowTick0=he.tick0)}}else Ye>M?he.dtick=De(be,M,we):Ye>I?he.dtick=De(be,I,oe):Ye>P?he.dtick=De(be,P,oe):(Ve=Je(10),he.dtick=De(be,Ve,ge))}else if("log"===he.type){he.tick0=0;var Mt=e.simpleMap(he.range,he.r2l);if(he._isMinor&&(be*=1.5),be>.7)he.dtick=Math.ceil(be);else if(Math.abs(Mt[1]-Mt[0])<1){var Dt=1.5*Math.abs((Mt[1]-Mt[0])/be);be=Math.abs(Math.pow(10,Mt[1])-Math.pow(10,Mt[0]))/Dt,Ve=Je(10),he.dtick="L"+De(be,Ve,ge)}else he.dtick=be>.3?"D2":"D1"}else"category"===he.type||"multicategory"===he.type?(he.tick0=0,he.dtick=Math.ceil(Math.max(be,1))):cr(he)?(he.tick0=0,he.dtick=De(be,Ve=1,Ae)):(he.tick0=0,Ve=Je(10),he.dtick=De(be,Ve,ge));if(0===he.dtick&&(he.dtick=1),!g(he.dtick)&&"string"!=typeof he.dtick){var ht=he.dtick;throw he.dtick=1,"ax.dtick error: "+String(ht)}},V.tickIncrement=function(he,be,ze,Ve){var Je=ze?-1:1;if(g(be))return e.increment(he,Je*be);var Ye=be.charAt(0),lt=Je*Number(be.substr(1));if("M"===Ye)return e.incrementMonth(he,lt,Ve);if("L"===Ye)return Math.log(Math.pow(10,he)+lt)/Math.LN10;if("D"===Ye){var st="D2"===be?Ee:Te,Mt=he+.01*Je,Dt=e.roundUp(e.mod(Mt,1),st,ze);return Math.floor(Mt)+Math.log(m.round(Math.pow(10,Dt),1))/Math.LN10}throw"unrecognized dtick "+String(be)},V.tickFirst=function(he,be){var ze=he.r2l||Number,Ve=e.simpleMap(he.range,ze,void 0,void 0,be),Je=Ve[1]<Ve[0],Ye=Je?Math.floor:Math.ceil,lt=ae(Ve)[0],st=he.dtick,Mt=ze(he.tick0);if(g(st)){var Dt=Ye((lt-Mt)/st)*st+Mt;return"category"!==he.type&&"multicategory"!==he.type||(Dt=e.constrain(Dt,0,he._categories.length-1)),Dt}var ht=st.charAt(0),mt=Number(st.substr(1));if("M"===ht){for(var Ot,At,It,Se=0,Ze=Mt;Se<10;){if(((Ot=V.tickIncrement(Ze,st,Je,he.calendar))-lt)*(Ze-lt)<=0)return Je?Math.min(Ze,Ot):Math.max(Ze,Ot);At=(lt-(Ze+Ot)/2)/(Ot-Ze),It=ht+(Math.abs(Math.round(At))||1)*mt,Ze=V.tickIncrement(Ze,It,At<0?!Je:Je,he.calendar),Se++}return e.error("tickFirst did not converge",he),Ze}if("L"===ht)return Math.log(Ye((Math.pow(10,lt)-Mt)/mt)*mt+Mt)/Math.LN10;if("D"===ht){var it="D2"===st?Ee:Te,dt=e.roundUp(e.mod(lt,1),it,Je);return Math.floor(lt)+Math.log(m.round(Math.pow(10,dt),1))/Math.LN10}throw"unrecognized dtick "+String(st)},V.tickText=function(he,be,ze,Ve){var Je,Ye=Oe(he,be),lt="array"===he.tickmode,st=ze||lt,Mt=he.type,Dt="category"===Mt?he.d2l_noadd:he.d2l;if(lt&&Array.isArray(he.ticktext)){var ht=e.simpleMap(he.range,he.r2l),mt=(Math.abs(ht[1]-ht[0])-(he._lBreaks||0))/1e4;for(Je=0;Je<he.ticktext.length&&!(Math.abs(be-Dt(he.tickvals[Je]))<mt);Je++);if(Je<he.ticktext.length)return Ye.text=String(he.ticktext[Je]),Ye}function Ot(Se){return void 0===Se||(ze?"none"===Se:"all"!==Se&&be!=={first:he._tmin,last:he._tmax}[Se])}var Ze,it,At=ze?"never":"none"!==he.exponentformat&&Ot(he.showexponent)?"hide":"";if("date"===Mt?function(Se,Ze,it,dt){var Ct=Se._tickround,Ut=it&&Se.hoverformat||V.getTickFormat(Se);dt&&(Ct=g(Ct)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Ct]);var Jt,qt=e.formatDate(Ze.x,Ut,Ct,Se._dateFormat,Se.calendar,Se._extraFormat),pr=qt.indexOf("\n");if(-1!==pr&&(Jt=qt.substr(pr+1),qt=qt.substr(0,pr)),dt&&("00:00:00"===qt||"00:00"===qt?(qt=Jt,Jt=""):8===qt.length&&(qt=qt.replace(/:00$/,""))),Jt)if(it)"d"===Ct?qt+=", "+Jt:qt=Jt+(qt?", "+qt:"");else if(Se._inCalcTicks&&Se._prevDateHead===Jt){var Sr=Be(Se),mr=Se._trueSide||Se.side;(!Sr&&"top"===mr||Sr&&"bottom"===mr)&&(qt+="<br> ")}else Se._prevDateHead=Jt,qt+="<br>"+Jt;Ze.text=qt}(he,Ye,ze,st):"log"===Mt?function(Se,Ze,it,dt,Ct){var Ut=Se.dtick,Jt=Ze.x,qt=Se.tickformat,pr="string"==typeof Ut&&Ut.charAt(0);if("never"===Ct&&(Ct=""),dt&&"L"!==pr&&(Ut="L3",pr="L"),qt||"L"===pr)Ze.text=Re(Math.pow(10,Jt),Se,Ct,dt);else if(g(Ut)||"D"===pr&&e.mod(Jt+.01,1)<.1){var Sr=Math.round(Jt),mr=Math.abs(Sr),tr=Se.exponentformat;"power"===tr||Fe(tr)&&Pe(Sr)?(Ze.text=0===Sr?1:1===Sr?"10":"10<sup>"+(Sr>1?"":S)+mr+"</sup>",Ze.fontSize*=1.25):("e"===tr||"E"===tr)&&mr>2?Ze.text="1"+tr+(Sr>0?"+":S)+mr:(Ze.text=Re(Math.pow(10,Jt),Se,"","fakehover"),"D1"===Ut&&"y"===Se._id.charAt(0)&&(Ze.dy-=Ze.fontSize/6))}else{if("D"!==pr)throw"unrecognized dtick "+String(Ut);Ze.text=String(Math.round(Math.pow(10,e.mod(Jt,1)))),Ze.fontSize*=.75}if("D1"===Se.dtick){var rr=String(Ze.text).charAt(0);"0"!==rr&&"1"!==rr||("y"===Se._id.charAt(0)?Ze.dx-=Ze.fontSize/4:(Ze.dy+=Ze.fontSize/2,Ze.dx+=(Se.range[1]>Se.range[0]?1:-1)*Ze.fontSize*(Jt<0?.5:.25)))}}(he,Ye,0,st,At):"category"===Mt?(Ze=Ye,void 0===(it=he._categories[Math.round(Ze.x)])&&(it=""),Ze.text=String(it)):"multicategory"===Mt?function(Se,Ze,it){var dt=Math.round(Ze.x),Ct=Se._categories[dt]||[],Ut=void 0===Ct[1]?"":String(Ct[1]),Jt=void 0===Ct[0]?"":String(Ct[0]);it?Ze.text=Jt+" - "+Ut:(Ze.text=Ut,Ze.text2=Jt)}(he,Ye,ze):cr(he)?function(Se,Ze,it,dt,Ct){if("radians"!==Se.thetaunit||it)Ze.text=Re(Ze.x,Se,Ct,dt);else{var Ut=Ze.x/180;if(0===Ut)Ze.text="0";else{var Jt=function(pr){function Sr(ar,dr){return Math.abs(ar-dr)<=1e-6}var mr=function(ar){for(var dr=1;!Sr(Math.round(ar*dr)/dr,ar);)dr*=10;return dr}(pr),tr=pr*mr,rr=Math.abs(function ar(dr,xr){return Sr(xr,0)?dr:ar(xr,dr%xr)}(tr,mr));return[Math.round(tr/rr),Math.round(mr/rr)]}(Ut);if(Jt[1]>=100)Ze.text=Re(e.deg2rad(Ze.x),Se,Ct,dt);else{var qt=Ze.x<0;Ze.text=1===Jt[1]?1===Jt[0]?"\u03c0":Jt[0]+"\u03c0":["<sup>",Jt[0],"</sup>","\u2044","<sub>",Jt[1],"</sub>","\u03c0"].join(""),qt&&(Ze.text=S+Ze.text)}}}}(he,Ye,ze,st,At):function(Se,Ze,it,dt,Ct){"never"===Ct?Ct="":"all"===Se.showexponent&&Math.abs(Ze.x/Se.dtick)<1e-6&&(Ct="hide"),Ze.text=Re(Ze.x,Se,Ct,dt)}(he,Ye,0,st,At),Ve||(he.tickprefix&&!Ot(he.showtickprefix)&&(Ye.text=he.tickprefix+Ye.text),he.ticksuffix&&!Ot(he.showticksuffix)&&(Ye.text+=he.ticksuffix)),"boundaries"===he.tickson||he.showdividers){var It=function(Se){var Ze=he.l2p(Se);return Ze>=0&&Ze<=he._length?Se:null};Ye.xbnd=[It(Ye.x-.5),It(Ye.x+he.dtick-.5)]}return Ye},V.hoverLabelText=function(he,be,ze){ze&&(he=e.extendFlat({},he,{hoverformat:ze}));var Ve=Array.isArray(be)?be[0]:be,Je=Array.isArray(be)?be[1]:void 0;if(void 0!==Je&&Je!==Ve)return V.hoverLabelText(he,Ve,ze)+" - "+V.hoverLabelText(he,Je,ze);var Ye="log"===he.type&&Ve<=0,lt=V.tickText(he,he.c2l(Ye?-Ve:Ve),"hover").text;return Ye?0===Ve?"0":S+lt:lt};var Xe=["f","p","n","\u03bc","m","","k","M","G","T"];function Fe(he){return"SI"===he||"B"===he}function Pe(he){return he>14||he<-15}function Re(he,be,ze,Ve){var Je=he<0,Ye=be._tickround,lt=ze||be.exponentformat||"B",st=be._tickexponent,Mt=V.getTickFormat(be),Dt=be.separatethousands;if(Ve){var ht={exponentformat:lt,minexponent:be.minexponent,dtick:"none"===be.showexponent?be.dtick:g(he)&&Math.abs(he)||1,range:"none"===be.showexponent?be.range.map(be.r2d):[0,he||1]};Ie(ht),Ye=(Number(ht._tickround)||0)+4,st=ht._tickexponent,be.hoverformat&&(Mt=be.hoverformat)}if(Mt)return be._numFormat(Mt)(he).replace(/-/g,S);var mt,Ot=Math.pow(10,-Ye)/2;if("none"===lt&&(st=0),(he=Math.abs(he))<Ot)he="0",Je=!1;else{if(he+=Ot,st&&(he*=Math.pow(10,-st),Ye+=st),0===Ye)he=String(Math.floor(he));else if(Ye<0){he=(he=String(Math.round(he))).substr(0,he.length+Ye);for(var At=Ye;At<0;At++)he+="0"}else{var It=(he=String(he)).indexOf(".")+1;It&&(he=he.substr(0,It+Ye).replace(/\.?0+$/,""))}he=e.numSeparate(he,be._separators,Dt)}return st&&"hide"!==lt&&(Fe(lt)&&Pe(st)&&(lt="power"),mt=st<0?S+-st:"power"!==lt?"+"+st:String(st),"e"===lt||"E"===lt?he+=lt+mt:"power"===lt?he+="\xd710<sup>"+mt+"</sup>":"B"===lt&&9===st?he+="B":Fe(lt)&&(he+=Xe[st/3+5])),Je?S+he:he}function qe(he,be){if(he){var ze=Object.keys(X).reduce(function(Ve,Je){return-1!==be.indexOf(Je)&&X[Je].forEach(function(Ye){Ve[Ye]=1}),Ve},{});Object.keys(he).forEach(function(Ve){ze[Ve]||(1===Ve.length?he[Ve]=0:delete he[Ve])})}}function Qe(he,be){for(var ze=[],Ve={},Je=0;Je<be.length;Je++){var Ye=be[Je];Ve[Ye.text2]?Ve[Ye.text2].push(Ye.x):Ve[Ye.text2]=[Ye.x]}for(var lt in Ve)ze.push(Oe(he,e.interp(Ve[lt],.5),lt));return ze}function ct(he){return void 0!==he.periodX?he.periodX:he.x}function bt(he){return[he.text,he.x,he.axInfo,he.font,he.fontSize,he.fontColor].join("_")}function Tt(he){var be=he.title.font.size,ze=(he.title.text.match(i.BR_TAG_ALL)||[]).length;return he.title.hasOwnProperty("standoff")?ze?be*(re+ze*U):be*re:ze?be*(ze+1)*U:be}function _t(he,be){var ze=he.l2p(be);return ze>1&&ze<he._length-1}function nt(he){var be=m.select(he),ze=be.select(".text-math-group");return ze.empty()?be.select("text"):ze}function Ke(he){return he._id+".automargin"}function xt(he){return Ke(he)+".mirror"}function Ht(he){return he._id+".rangeslider"}function Zt(he,be){for(var ze=0;ze<be.length;ze++)-1===he.indexOf(be[ze])&&he.push(be[ze])}function $t(he,be,ze){var Ve,Je,Ye=[],lt=[],st=he.layout;for(Ve=0;Ve<be.length;Ve++)Ye.push(V.getFromId(he,be[Ve]));for(Ve=0;Ve<ze.length;Ve++)lt.push(V.getFromId(he,ze[Ve]));var Mt=Object.keys(f),Dt=["anchor","domain","overlaying","position","side","tickangle","editType"],ht=["linear","log"];for(Ve=0;Ve<Mt.length;Ve++){var mt=Mt[Ve],Ot=Ye[0][mt],At=lt[0][mt],It=!0,Se=!1,Ze=!1;if("_"!==mt.charAt(0)&&"function"!=typeof Ot&&-1===Dt.indexOf(mt)){for(Je=1;Je<Ye.length&&It;Je++){var it=Ye[Je][mt];"type"===mt&&-1!==ht.indexOf(Ot)&&-1!==ht.indexOf(it)&&Ot!==it?Se=!0:it!==Ot&&(It=!1)}for(Je=1;Je<lt.length&&It;Je++){var dt=lt[Je][mt];"type"===mt&&-1!==ht.indexOf(At)&&-1!==ht.indexOf(dt)&&At!==dt?Ze=!0:lt[Je][mt]!==At&&(It=!1)}It&&(Se&&(st[Ye[0]._name].type="linear"),Ze&&(st[lt[0]._name].type="linear"),Xt(st,mt,Ye,lt,he._fullLayout._dfltTitle))}}for(Ve=0;Ve<he._fullLayout.annotations.length;Ve++){var Ct=he._fullLayout.annotations[Ve];-1!==be.indexOf(Ct.xref)&&-1!==ze.indexOf(Ct.yref)&&e.swapAttrs(st.annotations[Ve],["?"])}}function Xt(he,be,ze,Ve,Je){var Ye,lt=e.nestedProperty,st=lt(he[ze[0]._name],be).get(),Mt=lt(he[Ve[0]._name],be).get();for("title"===be&&(st&&st.text===Je.x&&(st.text=Je.y),Mt&&Mt.text===Je.y&&(Mt.text=Je.x)),Ye=0;Ye<ze.length;Ye++)lt(he,ze[Ye]._name+"."+be).set(Mt);for(Ye=0;Ye<Ve.length;Ye++)lt(he,Ve[Ye]._name+"."+be).set(st)}function cr(he){return"angularaxis"===he._id}function Ft(he,be){for(var ze=be._rangebreaks.length,Ve=0;Ve<ze;Ve++){var Je=be._rangebreaks[Ve];if(he>=Je.min&&he<Je.max)return Je.max}return he}function Be(he){return-1!==(he.ticklabelposition||"").indexOf("inside")}function He(he,be){Be(he._anchorAxis||{})&&he._hideCounterAxisInsideTickLabels&&he._hideCounterAxisInsideTickLabels(be)}V.getTickFormat=function(he){var be,ze,Ve,Je,Ye,lt,st,Mt,Ot,At,It,Se,Ze,it;function Dt(Ot){return"string"!=typeof Ot?Ot:Number(Ot.replace("M",""))*_}function ht(Ot,At){var It=["L","D"];if(typeof Ot==typeof At){if("number"==typeof Ot)return Ot-At;var Se=It.indexOf(Ot.charAt(0)),Ze=It.indexOf(At.charAt(0));return Se===Ze?Number(Ot.replace(/(L|D)/g,""))-Number(At.replace(/(L|D)/g,"")):Se-Ze}return"number"==typeof Ot?1:-1}if(he.tickformatstops&&he.tickformatstops.length>0)switch(he.type){case"date":case"linear":for(be=0;be<he.tickformatstops.length;be++)if((Ve=he.tickformatstops[be]).enabled&&(Je=he.dtick,lt=void 0,void 0,void 0,lt=Dt||function(Ot){return Ot},Mt=(Ye=Ve.dtickrange)[1],(!(st=Ye[0])&&"number"!=typeof st||lt(st)<=lt(Je))&&(!Mt&&"number"!=typeof Mt||lt(Mt)>=lt(Je)))){ze=Ve;break}break;case"log":for(be=0;be<he.tickformatstops.length;be++)if((Ve=he.tickformatstops[be]).enabled&&(It=void 0,Se=void 0,Ze=void 0,it=void 0,It=null===(At=Ve.dtickrange)[0],Se=null===At[1],Ze=ht(Ot=he.dtick,At[0])>=0,it=ht(Ot,At[1])<=0,(It||Ze)&&(Se||it))){ze=Ve;break}}return ze?ze.value:he.tickformat},V.getSubplots=function(he,be){var ze=he._fullLayout._subplots,Ve=ze.cartesian.concat(ze.gl2d||[]),Je=be?V.findSubplotsWithAxis(Ve,be):Ve;return Je.sort(function(Ye,lt){var st=Ye.substr(1).split("y"),Mt=lt.substr(1).split("y");return st[0]===Mt[0]?+st[1]-+Mt[1]:+st[0]-+Mt[0]}),Je},V.findSubplotsWithAxis=function(he,be){for(var ze=new RegExp("x"===be._id.charAt(0)?"^"+be._id+"y":be._id+"$"),Ve=[],Je=0;Je<he.length;Je++){var Ye=he[Je];ze.test(Ye)&&Ve.push(Ye)}return Ve},V.makeClipPaths=function(he){var be=he._fullLayout;if(!be._hasOnlyLargeSploms){var ze,Ve,Je={_offset:0,_length:be.width,_id:""},Ye={_offset:0,_length:be.height,_id:""},lt=V.list(he,"x",!0),st=V.list(he,"y",!0),Mt=[];for(ze=0;ze<lt.length;ze++)for(Mt.push({x:lt[ze],y:Ye}),Ve=0;Ve<st.length;Ve++)0===ze&&Mt.push({x:Je,y:st[Ve]}),Mt.push({x:lt[ze],y:st[Ve]});var Dt=be._clips.selectAll(".axesclip").data(Mt,function(ht){return ht.x._id+ht.y._id});Dt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(ht){return"clip"+be._uid+ht.x._id+ht.y._id}).append("rect"),Dt.exit().remove(),Dt.each(function(ht){m.select(this).select("rect").attr({x:ht.x._offset||0,y:ht.y._offset||0,width:ht.x._length||1,height:ht.y._length||1})})}},V.draw=function(he,be,ze){var Ve=he._fullLayout;"redraw"===be&&Ve._paper.selectAll("g.subplot").each(function(Ye){var st=Ve._plots[Ye[0]];if(st){var Mt=st.xaxis,Dt=st.yaxis;st.xaxislayer.selectAll("."+Mt._id+"tick").remove(),st.yaxislayer.selectAll("."+Dt._id+"tick").remove(),st.xaxislayer.selectAll("."+Mt._id+"tick2").remove(),st.yaxislayer.selectAll("."+Dt._id+"tick2").remove(),st.xaxislayer.selectAll("."+Mt._id+"divider").remove(),st.yaxislayer.selectAll("."+Dt._id+"divider").remove(),st.minorGridlayer&&st.minorGridlayer.selectAll("path").remove(),st.gridlayer&&st.gridlayer.selectAll("path").remove(),st.zerolinelayer&&st.zerolinelayer.selectAll("path").remove(),Ve._infolayer.select(".g-"+Mt._id+"title").remove(),Ve._infolayer.select(".g-"+Dt._id+"title").remove()}});var Je=be&&"redraw"!==be?be:V.listIds(he);return e.syncOrAsync(Je.map(function(Ye){return function(){if(Ye){var lt=V.getFromId(he,Ye),st=V.drawOne(he,lt,ze);return lt._r=lt.range.slice(),lt._rl=e.simpleMap(lt._r,lt.r2l),st}}}))},V.drawOne=function(he,be,ze){var Ve,Je,Ye;ze=ze||{},be.setScale();var lt=he._fullLayout,st=be._id,Mt=st.charAt(0),Dt=V.counterLetter(st),ht=lt._plots[be._mainSubplot];if(ht){var mt=ht[Mt+"axislayer"],Ot=be._mainLinePosition,At=be._mainMirrorPosition,It=be._vals=V.calcTicks(be),Se=[be.mirror,Ot,At].join("_");for(Ve=0;Ve<It.length;Ve++)It[Ve].axInfo=Se;be._selections={},be._tickAngles&&(be._prevTickAngles=be._tickAngles),be._tickAngles={},be._depth=null;var Ze={};if(be.visible){var it,dt,Ct=V.makeTransTickFn(be),Ut=V.makeTransTickLabelFn(be),Jt="inside"===be.ticks,qt="outside"===be.ticks;if("boundaries"===be.tickson){var pr=function(or,br){var Rt,fr=[],gr=function(jr,Br){var Fr=jr.xbnd[Br];null!==Fr&&fr.push(e.extendFlat({},jr,{x:Fr}))};if(br.length){for(Rt=0;Rt<br.length;Rt++)gr(br[Rt],0);gr(br[Rt-1],1)}return fr}(0,It);dt=V.clipEnds(be,pr),it=Jt?dt:pr}else dt=V.clipEnds(be,It),it=Jt&&"period"!==be.ticklabelmode?dt:It;var Sr,mr=be._gridVals=dt,tr=function(or,br){var Rt,fr,gr=[],jr=br.length&&br[br.length-1].x<br[0].x,Br=function(Er,_r){var kr=Er.xbnd[_r];null!==kr&&gr.push(e.extendFlat({},Er,{x:kr}))};if(or.showdividers&&br.length){for(Rt=0;Rt<br.length;Rt++){var Fr=br[Rt];Fr.text2!==fr&&Br(Fr,jr?1:0),fr=Fr.text2}Br(br[Rt-1],jr?0:1)}return gr}(be,It);if(!lt._hasOnlyLargeSploms){var rr=be._subplotsWith,ar={};for(Ve=0;Ve<rr.length;Ve++){var dr=(Ye=lt._plots[Je=rr[Ve]])[Dt+"axis"],xr=dr._mainAxis._id;if(!ar[xr]){ar[xr]=1;var Lr="x"===Mt?"M0,"+dr._offset+"v"+dr._length:"M"+dr._offset+",0h"+dr._length;V.drawGrid(he,be,{vals:mr,counterAxis:dr,layer:Ye.gridlayer.select("."+st),minorLayer:Ye.minorGridlayer.select("."+st),path:Lr,transFn:Ct}),V.drawZeroLine(he,be,{counterAxis:dr,layer:Ye.zerolinelayer,path:Lr,transFn:Ct})}}}var zr=V.getTickSigns(be),Hr=V.getTickSigns(be,"minor");if(be.ticks||be.minor&&be.minor.ticks){var Xr,cn,an,Nn,on=V.makeTickPath(be,Ot,zr[2]),wn=V.makeTickPath(be,Ot,Hr[2],{minor:!0});if(be._anchorAxis&&be.mirror&&!0!==be.mirror?(Xr=V.makeTickPath(be,At,zr[3]),cn=V.makeTickPath(be,At,Hr[3],{minor:!0}),an=on+Xr,Nn=wn+cn):(Xr="",cn="",an=on,Nn=wn),be.showdividers&&qt&&"boundaries"===be.tickson){var An={};for(Ve=0;Ve<tr.length;Ve++)An[tr[Ve].x]=1;Sr=function(or){return An[or.x]?Xr:an}}else Sr=function(or){return or.minor?Nn:an}}if(V.drawTicks(he,be,{vals:it,layer:mt,path:Sr,transFn:Ct}),"allticks"===be.mirror){var ii=Object.keys(be._linepositions||{});for(Ve=0;Ve<ii.length;Ve++){Ye=lt._plots[Je=ii[Ve]];var Vr=be._linepositions[Je]||[],xn=Vr[1],nn=Vr[2],fn=V.makeTickPath(be,Vr[0],nn?zr[0]:Hr[0],{minor:nn})+V.makeTickPath(be,xn,nn?zr[1]:Hr[1],{minor:nn});V.drawTicks(he,be,{vals:it,layer:Ye[Mt+"axislayer"],path:fn,transFn:Ct})}}var Xn=[];if(Xn.push(function(){return V.drawLabels(he,be,{vals:It,layer:mt,plotinfo:Ye,transFn:Ut,labelFns:V.makeLabelFns(be,Ot)})}),"multicategory"===be.type){var Mn={x:2,y:10}[Mt];Xn.push(function(){var or={x:"height",y:"width"}[Mt],br=si()[or]+Mn+(be._tickAngles[st+"tick"]?be.tickfont.size*U:0);return V.drawLabels(he,be,{vals:Qe(be,It),layer:mt,cls:st+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Ct,labelFns:V.makeLabelFns(be,Ot+br*zr[4])})}),Xn.push(function(){return be._depth=zr[4]*(si("tick2")[be.side]-Ot),or=he,br=be,gr=(Rt={vals:tr,layer:mt,path:V.makeTickPath(be,Ot,zr[4],{len:be._depth}),transFn:Ct}).vals,(jr=Rt.layer.selectAll("path."+(fr=br._id+"divider")).data(gr,bt)).exit().remove(),jr.enter().insert("path",":first-child").classed(fr,1).classed("crisp",1).call(r.stroke,br.dividercolor).style("stroke-width",d.crispRound(or,br.dividerwidth,1)+"px"),void jr.attr("transform",Rt.transFn).attr("d",Rt.path);var or,br,Rt,fr,gr,jr})}else be.title.hasOwnProperty("standoff")&&Xn.push(function(){be._depth=zr[4]*(si()[be.side]-Ot)});var On=x.getComponentMethod("rangeslider","isVisible")(be);return Xn.push(function(){var or,br,Rt,fr,gr=be.side.charAt(0),jr=B[be.side].charAt(0),Br=V.getPxPosition(he,be),Fr=qt?be.ticklen:0;if((be.automargin||On)&&("multicategory"===be.type?or=si("tick2"):(or=si(),"x"===Mt&&"b"===gr&&(be._depth=Math.max(or.width>0?or.bottom-Br:0,Fr)))),be.automargin){br={x:0,y:0,r:0,l:0,t:0,b:0};var Er=[0,1];if("x"===Mt){if("b"===gr?br[gr]=be._depth:(br[gr]=be._depth=Math.max(or.width>0?Br-or.top:0,Fr),Er.reverse()),or.width>0){var _r=or.right-(be._offset+be._length);_r>0&&(br.xr=1,br.r=_r);var kr=be._offset-or.left;kr>0&&(br.xl=0,br.l=kr)}}else if("l"===gr?br[gr]=be._depth=Math.max(or.height>0?Br-or.left:0,Fr):(br[gr]=be._depth=Math.max(or.height>0?or.right-Br:0,Fr),Er.reverse()),or.height>0){var Mr=or.bottom-(be._offset+be._length);Mr>0&&(br.yb=0,br.b=Mr);var Pr=be._offset-or.top;Pr>0&&(br.yt=1,br.t=Pr)}br[Dt]="free"===be.anchor?be.position:be._anchorAxis.domain[Er[0]],be.title.text!==lt._dfltTitle[Mt]&&(br[gr]+=Tt(be)+(be.title.standoff||0)),be.mirror&&"free"!==be.anchor&&((Rt={x:0,y:0,r:0,l:0,t:0,b:0})[jr]=be.linewidth,be.mirror&&!0!==be.mirror&&(Rt[jr]+=Fr),!0===be.mirror||"ticks"===be.mirror?Rt[Dt]=be._anchorAxis.domain[Er[1]]:"all"!==be.mirror&&"allticks"!==be.mirror||(Rt[Dt]=[be._counterDomainMin,be._counterDomainMax][Er[1]]))}On&&(fr=x.getComponentMethod("rangeslider","autoMarginOpts")(he,be)),"string"==typeof be.automargin&&(qe(br,be.automargin),qe(Rt,be.automargin)),k.autoMargin(he,Ke(be),br),k.autoMargin(he,xt(be),Rt),k.autoMargin(he,Ht(be),fr)}),ze.skipTitle||On&&"bottom"===be.side||Xn.push(function(){return function(or,br){var Rt,fr=or._fullLayout,gr=br._id,jr=gr.charAt(0),Br=br.title.font.size;if(br.title.hasOwnProperty("standoff"))Rt=br._depth+br.title.standoff+Tt(br);else{var Fr=Be(br);if("multicategory"===br.type)Rt=br._depth;else{var Er=1.5*Br;Fr&&(Er=.5*Br,"outside"===br.ticks&&(Er+=br.ticklen)),Rt=10+Er+(br.linewidth?br.linewidth-1:0)}Fr||(Rt+="x"===jr?"top"===br.side?Br*(br.showticklabels?1:0):Br*(br.showticklabels?1.5:.5):"right"===br.side?Br*(br.showticklabels?1:.5):Br*(br.showticklabels?.5:0))}var _r,kr,Mr,Pr,Wr=V.getPxPosition(or,br);if("x"===jr?(kr=br._offset+br._length/2,Mr="top"===br.side?Wr-Rt:Wr+Rt):(Mr=br._offset+br._length/2,kr="right"===br.side?Wr+Rt:Wr-Rt,_r={rotate:"-90",offset:0}),"multicategory"!==br.type){var Zr=br._selections[br._id+"tick"];if(Pr={selection:Zr,side:br.side},Zr&&Zr.node()&&Zr.node().parentNode){var rn=d.getTranslate(Zr.node().parentNode);Pr.offsetLeft=rn.x,Pr.offsetTop=rn.y}br.title.hasOwnProperty("standoff")&&(Pr.pad=0)}return l.draw(or,gr+"title",{propContainer:br,propName:br._name+".title.text",placeholder:fr._dfltTitle[jr],avoid:Pr,transform:_r,attributes:{x:kr,y:Mr,"text-anchor":"middle"}})}(he,be)}),e.syncOrAsync(Xn)}}function si(or){var Rt,fr,gr,jr,Br,Fr,br=st+(or||"tick");return Ze[br]||(Ze[br]=((Rt=be)._selections[fr=br].size()?(gr=1/0,jr=-1/0,Br=1/0,Fr=-1/0,Rt._selections[fr].each(function(){var Er=nt(this),_r=d.bBox(Er.node().parentNode);gr=Math.min(gr,_r.top),jr=Math.max(jr,_r.bottom),Br=Math.min(Br,_r.left),Fr=Math.max(Fr,_r.right)})):(gr=0,jr=0,Br=0,Fr=0),{top:gr,bottom:jr,left:Br,right:Fr,height:jr-gr,width:Fr-Br})),Ze[br]}},V.getTickSigns=function(he,be){var ze=he._id.charAt(0),Je=he.side==={x:"top",y:"right"}[ze]?1:-1,Ye=[-1,1,Je,-Je];return"inside"!==(be?(he.minor||{}).ticks:he.ticks)==("x"===ze)&&(Ye=Ye.map(function(lt){return-lt})),he.side&&Ye.push({l:-1,t:-1,r:1,b:1}[he.side.charAt(0)]),Ye},V.makeTransTickFn=function(he){return"x"===he._id.charAt(0)?function(be){return n(he._offset+he.l2p(be.x),0)}:function(be){return n(0,he._offset+he.l2p(be.x))}},V.makeTransTickLabelFn=function(he){var be=function(Je){var Ye=Je.ticklabelposition||"",lt=function(it){return-1!==Ye.indexOf(it)},st=lt("top"),Mt=lt("left"),Dt=lt("right"),ht=lt("bottom"),mt=lt("inside"),Ot=ht||Mt||st||Dt;if(!Ot&&!mt)return[0,0];var At=Je.side,It=Ot?(Je.tickwidth||0)/2:0,Se=3,Ze=Je.tickfont?Je.tickfont.size:12;return(ht||st)&&(It+=Ze*re,Se+=(Je.linewidth||0)/2),(Mt||Dt)&&(It+=(Je.linewidth||0)/2,Se+=3),mt&&"top"===At&&(Se-=Ze*(1-re)),(Mt||st)&&(It=-It),"bottom"!==At&&"right"!==At||(Se=-Se),[Ot?It:0,mt?Se:0]}(he),ze=be[0],Ve=be[1];return"x"===he._id.charAt(0)?function(Je){return n(ze+he._offset+he.l2p(ct(Je)),Ve)}:function(Je){return n(Ve,ze+he._offset+he.l2p(ct(Je)))}},V.makeTickPath=function(he,be,ze,Ve){Ve||(Ve={});var Je=Ve.minor;if(Je&&!he.minor)return"";var Ye=void 0!==Ve.len?Ve.len:Je?he.minor.ticklen:he.ticklen,lt=he._id.charAt(0),st=(he.linewidth||1)/2;return"x"===lt?"M0,"+(be+st*ze)+"v"+Ye*ze:"M"+(be+st*ze)+",0h"+Ye*ze},V.makeLabelFns=function(he,be,ze){var Ve=he.ticklabelposition||"",Je=function(rr){return-1!==Ve.indexOf(rr)},Ye=Je("top"),lt=Je("left"),st=Je("right"),Mt=Je("bottom")||lt||Ye||st,Dt=Je("inside"),ht="inside"===Ve&&"inside"===he.ticks||!Dt&&"outside"===he.ticks&&"boundaries"!==he.tickson,mt=0,Ot=0,At=ht?he.ticklen:0;if(Dt?At*=-1:Mt&&(At=0),ht&&(mt+=At,ze)){var It=e.deg2rad(ze);mt=At*Math.cos(It)+1,Ot=At*Math.sin(It)}he.showticklabels&&(ht||he.showline)&&(mt+=.2*he.tickfont.size);var Se,Ze,it,dt,Ct,Ut={labelStandoff:mt+=(he.linewidth||1)/2*(Dt?-1:1),labelShift:Ot},Jt=0,qt=he.side,pr=he._id.charAt(0),Sr=he.tickangle;if("x"===pr)dt=(Ct=!Dt&&"bottom"===qt||Dt&&"top"===qt)?1:-1,Dt&&(dt*=-1),Se=Ot*dt,Ze=be+mt*dt,it=Ct?1:-.2,90===Math.abs(Sr)&&(Dt?it+=W:it=-90===Sr&&"bottom"===qt?re:90===Sr&&"top"===qt?W:.5,Jt=W/2*(Sr/90)),Ut.xFn=function(rr){return rr.dx+Se+Jt*rr.fontSize},Ut.yFn=function(rr){return rr.dy+Ze+rr.fontSize*it},Ut.anchorFn=function(rr,ar){if(Mt){if(lt)return"end";if(st)return"start"}return g(ar)&&0!==ar&&180!==ar?ar*dt<0!==Dt?"end":"start":"middle"},Ut.heightFn=function(rr,ar,dr){return ar<-60||ar>60?-.5*dr:"top"===he.side!==Dt?-dr:0};else if("y"===pr){if(dt=(Ct=!Dt&&"left"===qt||Dt&&"right"===qt)?1:-1,Dt&&(dt*=-1),Se=mt,Ze=Ot*dt,it=0,Dt||90!==Math.abs(Sr)||(it=-90===Sr&&"left"===qt||90===Sr&&"right"===qt?re:.5),Dt){var mr=g(Sr)?+Sr:0;if(0!==mr){var tr=e.deg2rad(mr);Jt=Math.abs(Math.sin(tr))*re*dt,it=0}}Ut.xFn=function(rr){return rr.dx+be-(Se+rr.fontSize*it)*dt+Jt*rr.fontSize},Ut.yFn=function(rr){return rr.dy+Ze+rr.fontSize*W},Ut.anchorFn=function(rr,ar){return g(ar)&&90===Math.abs(ar)?"middle":Ct?"end":"start"},Ut.heightFn=function(rr,ar,dr){return"right"===he.side&&(ar*=-1),ar<-30?-dr:ar<30?-.5*dr:0}}return Ut},V.drawTicks=function(he,be,ze){ze=ze||{};var Ve=be._id+"tick",Je=[].concat(be.minor&&be.minor.ticks?ze.vals.filter(function(lt){return lt.minor&&!lt.noTick}):[]).concat(be.ticks?ze.vals.filter(function(lt){return!lt.minor&&!lt.noTick}):[]),Ye=ze.layer.selectAll("path."+Ve).data(Je,bt);Ye.exit().remove(),Ye.enter().append("path").classed(Ve,1).classed("ticks",1).classed("crisp",!1!==ze.crisp).each(function(lt){return r.stroke(m.select(this),lt.minor?be.minor.tickcolor:be.tickcolor)}).style("stroke-width",function(lt){return d.crispRound(he,lt.minor?be.minor.tickwidth:be.tickwidth,1)+"px"}).attr("d",ze.path).style("display",null),He(be,[H]),Ye.attr("transform",ze.transFn)},V.drawGrid=function(he,be,ze){ze=ze||{};var Ve=be._id+"grid",Je=be.minor&&be.minor.showgrid,Ye=Je?ze.vals.filter(function(it){return it.minor}):[],lt=be.showgrid?ze.vals.filter(function(it){return!it.minor}):[],st=ze.counterAxis;if(st&&V.shouldShowZeroLine(he,be,st))for(var Mt="array"===be.tickmode,Dt=0;Dt<lt.length;Dt++){var ht=lt[Dt].x;if(Mt?!ht:Math.abs(ht)<be.dtick/100){if(lt=lt.slice(0,Dt).concat(lt.slice(Dt+1)),!Mt)break;Dt--}}be._gw=d.crispRound(he,be.gridwidth,1);for(var mt=Je?d.crispRound(he,be.minor.gridwidth,1):0,Ot=ze.layer,At=ze.minorLayer,It=1;It>=0;It--){var Se=It?Ot:At;if(Se){var Ze=Se.selectAll("path."+Ve).data(It?lt:Ye,bt);Ze.exit().remove(),Ze.enter().append("path").classed(Ve,1).classed("crisp",!1!==ze.crisp),Ze.attr("transform",ze.transFn).attr("d",ze.path).each(function(it){return r.stroke(m.select(this),it.minor?be.minor.gridcolor:be.gridcolor||"#ddd")}).style("stroke-dasharray",function(it){return d.dashStyle(it.minor?be.minor.griddash:be.griddash,it.minor?be.minor.gridwidth:be.gridwidth)}).style("stroke-width",function(it){return(it.minor?mt:be._gw)+"px"}).style("display",null),"function"==typeof ze.path&&Ze.attr("d",ze.path)}}He(be,[D,j])},V.drawZeroLine=function(he,be,ze){var Ve=be._id+"zl",Je=V.shouldShowZeroLine(he,be,(ze=ze||ze).counterAxis),Ye=ze.layer.selectAll("path."+Ve).data(Je?[{x:0,id:be._id}]:[]);Ye.exit().remove(),Ye.enter().append("path").classed(Ve,1).classed("zl",1).classed("crisp",!1!==ze.crisp).each(function(){ze.layer.selectAll("path").sort(function(lt,st){return K(lt.id,st.id)})}),Ye.attr("transform",ze.transFn).attr("d",ze.path).call(r.stroke,be.zerolinecolor||r.defaultLine).style("stroke-width",d.crispRound(he,be.zerolinewidth,be._gw||1)+"px").style("display",null),He(be,[R])},V.drawLabels=function(he,be,ze){ze=ze||{};var Ve=he._fullLayout,Je=be._id,Ye=Je.charAt(0),lt=ze.cls||Je+"tick",st=ze.vals.filter(function(dt){return dt.text}),Mt=ze.labelFns,Dt=ze.secondary?0:be.tickangle,ht=(be._prevTickAngles||{})[lt],mt=ze.layer.selectAll("g."+lt).data(be.showticklabels?st:[],bt),Ot=[];function At(dt,Ct){dt.each(function(Ut){var Jt=m.select(this),qt=Jt.select(".text-math-group"),pr=Mt.anchorFn(Ut,Ct),Sr=ze.transFn.call(Jt.node(),Ut)+(g(Ct)&&0!=+Ct?" rotate("+Ct+","+Mt.xFn(Ut)+","+(Mt.yFn(Ut)-Ut.fontSize/2)+")":""),mr=i.lineCount(Jt),tr=U*Ut.fontSize,rr=Mt.heightFn(Ut,g(Ct)?+Ct:0,(mr-1)*tr);if(rr&&(Sr+=n(0,rr)),qt.empty()){var ar=Jt.select("text");ar.attr({transform:Sr,"text-anchor":pr}),ar.style("opacity",1),be._adjustTickLabelsOverflow&&be._adjustTickLabelsOverflow()}else{var dr=d.bBox(qt.node()).width*{end:-.5,start:.5}[pr];qt.attr("transform",Sr+n(dr,0))}})}mt.enter().append("g").classed(lt,1).append("text").attr("text-anchor","middle").each(function(dt){var Ct=m.select(this),Ut=he._promises.length;Ct.call(i.positionText,Mt.xFn(dt),Mt.yFn(dt)).call(d.font,dt.font,dt.fontSize,dt.fontColor).text(dt.text).call(i.convertToTspans,he),he._promises[Ut]?Ot.push(he._promises.pop().then(function(){At(Ct,Dt)})):At(Ct,Dt)}),He(be,[Y]),mt.exit().remove(),ze.repositionOnUpdate&&mt.each(function(dt){m.select(this).select("text").call(i.positionText,Mt.xFn(dt),Mt.yFn(dt))}),be._adjustTickLabelsOverflow=function(){var dt=be.ticklabeloverflow;if(dt&&"allow"!==dt){var Ct=-1!==dt.indexOf("hide"),Ut="x"===be._id.charAt(0),Jt=0,qt=Ut?he._fullLayout.width:he._fullLayout.height;if(-1!==dt.indexOf("domain")){var pr=e.simpleMap(be.range,be.r2l);Jt=be.l2p(pr[0])+be._offset,qt=be.l2p(pr[1])+be._offset}var Sr=Math.min(Jt,qt),mr=Math.max(Jt,qt),tr=be.side,rr=1/0,ar=-1/0;for(var dr in mt.each(function(zr){var Hr=m.select(this);if(Hr.select(".text-math-group").empty()){var Xr=d.bBox(Hr.node()),cn=0;Ut?(Xr.right>mr||Xr.left<Sr)&&(cn=1):(Xr.bottom>mr||Xr.top+(be.tickangle?0:zr.fontSize/4)<Sr)&&(cn=1);var an=Hr.select("text");cn?Ct&&an.style("opacity",0):(an.style("opacity",1),rr="bottom"===tr||"right"===tr?Math.min(rr,Ut?Xr.top:Xr.left):-1/0,ar="top"===tr||"left"===tr?Math.max(ar,Ut?Xr.bottom:Xr.right):1/0)}}),Ve._plots){var xr=Ve._plots[dr];if(be._id===xr.xaxis._id||be._id===xr.yaxis._id){var Lr=Ut?xr.yaxis:xr.xaxis;Lr&&(Lr["_visibleLabelMin_"+be._id]=rr,Lr["_visibleLabelMax_"+be._id]=ar)}}}},be._hideCounterAxisInsideTickLabels=function(dt){var Ct="x"===be._id.charAt(0),Ut=[];for(var Jt in Ve._plots){var qt=Ve._plots[Jt];be._id!==qt.xaxis._id&&be._id!==qt.yaxis._id||Ut.push(Ct?qt.yaxis:qt.xaxis)}Ut.forEach(function(pr,Sr){pr&&Be(pr)&&(dt||[R,j,D,H,Y]).forEach(function(mr){var tr="tick"===mr.K&&"text"===mr.L&&"period"===be.ticklabelmode,rr=Ve._plots[be._mainSubplot];(mr.K===R.K?rr.zerolinelayer.selectAll("."+be._id+"zl"):mr.K===j.K?rr.minorGridlayer.selectAll("."+be._id):mr.K===D.K?rr.gridlayer.selectAll("."+be._id):rr[be._id.charAt(0)+"axislayer"]).each(function(){var ar=m.select(this);mr.L&&(ar=ar.selectAll(mr.L)),ar.each(function(dr){var xr=be.l2p(tr?ct(dr):dr.x)+be._offset,Lr=m.select(this);xr<be["_visibleLabelMax_"+pr._id]&&xr>be["_visibleLabelMin_"+pr._id]?Lr.style("display","none"):"tick"!==mr.K||Sr||Lr.style("display",null)})})})})},At(mt,ht+1?ht:Dt);var It=null;be._selections&&(be._selections[lt]=mt);var Se=[function(){return Ot.length&&Promise.all(Ot)}];be.automargin&&Ve._redrawFromAutoMarginCount&&90===ht?(It=90,Se.push(function(){At(mt,ht)})):Se.push(function(){if(At(mt,Dt),st.length&&"x"===Ye&&!g(Dt)&&("log"!==be.type||"D"!==String(be.dtick).charAt(0))){It=0;var dt,Ct=0,Ut=[];if(mt.each(function(Hr){Ct=Math.max(Ct,Hr.fontSize);var Xr=be.l2p(Hr.x),cn=nt(this),an=d.bBox(cn.node());Ut.push({top:0,bottom:10,height:10,left:Xr-an.width/2,right:Xr+an.width/2+2,width:an.width+2})}),"boundaries"!==be.tickson&&!be.showdividers||ze.secondary){var Jt=st.length,qt=Math.abs((st[Jt-1].x-st[0].x)*be._m)/(Jt-1),pr=be.ticklabelposition||"",Sr=function(Hr){return-1!==pr.indexOf(Hr)},mr=Sr("top"),tr=Sr("left"),rr=Sr("right"),ar=Sr("bottom")||tr||mr||rr?(be.tickwidth||0)+6:0,dr=qt<2.5*Ct||"multicategory"===be.type||"realaxis"===be._name;for(dt=0;dt<Ut.length-1;dt++)if(e.bBoxIntersect(Ut[dt],Ut[dt+1],ar)){It=dr?90:30;break}}else{var xr=2;for(be.ticks&&(xr+=be.tickwidth/2),dt=0;dt<Ut.length;dt++){var Lr=st[dt].xbnd,zr=Ut[dt];if(null!==Lr[0]&&zr.left-be.l2p(Lr[0])<xr||null!==Lr[1]&&be.l2p(Lr[1])-zr.right<xr){It=90;break}}}It&&At(mt,It)}}),be._tickAngles&&Se.push(function(){be._tickAngles[lt]=null===It?g(Dt)?Dt:0:It});var Ze=be._anchorAxis;Ze&&Ze.autorange&&Be(be)&&!J(Ve,be._id)&&(Ve._insideTickLabelsAutorange||(Ve._insideTickLabelsAutorange={}),Ve._insideTickLabelsAutorange[Ze._name+".autorange"]=Ze.autorange,Se.push(function(){mt.each(function(dt,Ct){var Ut=nt(this);Ut.select(".text-math-group").empty()&&(be._vals[Ct].bb=d.bBox(Ut.node()))})}));var it=e.syncOrAsync(Se);return it&&it.then&&he._promises.push(it),it},V.getPxPosition=function(he,be){var ze,Ve=he._fullLayout._size,Je=be._id.charAt(0),Ye=be.side;return"free"!==be.anchor?ze=be._anchorAxis:"x"===Je?ze={_offset:Ve.t+(1-(be.position||0))*Ve.h,_length:0}:"y"===Je&&(ze={_offset:Ve.l+(be.position||0)*Ve.w,_length:0}),"top"===Ye||"left"===Ye?ze._offset:"bottom"===Ye||"right"===Ye?ze._offset+ze._length:void 0},V.shouldShowZeroLine=function(he,be,ze){var Ve=e.simpleMap(be.range,be.r2l);return Ve[0]*Ve[1]<=0&&be.zeroline&&("linear"===be.type||"-"===be.type)&&!(be.rangebreaks&&be.maskBreaks(0)===E)&&(_t(be,0)||!function(Je,Ye,lt,st){var Mt=lt._mainAxis;if(Mt){var Dt=Je._fullLayout,ht=Ye._id.charAt(0),mt=V.counterLetter(Ye._id),Ot=Ye._offset+(Math.abs(st[0])<Math.abs(st[1])==("x"===ht)?0:Ye._length),It=Dt._plots[lt._mainSubplot];if(!(It.mainplotinfo||It).overlays.length)return At(lt);for(var Se=V.list(Je,mt),Ze=0;Ze<Se.length;Ze++){var it=Se[Ze];if(it._mainAxis===Mt&&At(it))return!0}}function At(dt){if(!dt.showline||!dt.linewidth)return!1;var Ct=Math.max((dt.linewidth+Ye.zerolinewidth)/2,1);function Ut(pr){return"number"==typeof pr&&Math.abs(pr-Ot)<Ct}if(Ut(dt._mainLinePosition)||Ut(dt._mainMirrorPosition))return!0;var Jt=dt._linepositions||{};for(var qt in Jt)if(Ut(Jt[qt][0])||Ut(Jt[qt][1]))return!0}}(he,be,ze,Ve)||function(Je,Ye){for(var lt=Je._fullData,st=Ye._mainSubplot,Mt=Ye._id.charAt(0),Dt=0;Dt<lt.length;Dt++){var ht=lt[Dt];if(!0===ht.visible&&ht.xaxis+ht.yaxis===st&&(x.traceIs(ht,"bar-like")&&ht.orientation==={x:"h",y:"v"}[Mt]||ht.fill&&ht.fill.charAt(ht.fill.length-1)===Mt))return!0}return!1}(he,be))},V.clipEnds=function(he,be){return be.filter(function(ze){return _t(he,ze.x)})},V.allowAutoMargin=function(he){for(var be=V.list(he,"",!0),ze=0;ze<be.length;ze++){var Ve=be[ze];Ve.automargin&&(k.allowAutoMargin(he,Ke(Ve)),Ve.mirror&&k.allowAutoMargin(he,xt(Ve))),x.getComponentMethod("rangeslider","isVisible")(Ve)&&k.allowAutoMargin(he,Ht(Ve))}},V.swap=function(he,be){for(var ze=function(Je,Ye){var lt,st,Mt=[];for(lt=0;lt<Ye.length;lt++){var Dt=[],ht=Je._fullData[Ye[lt]].xaxis,mt=Je._fullData[Ye[lt]].yaxis;if(ht&&mt){for(st=0;st<Mt.length;st++)-1===Mt[st].x.indexOf(ht)&&-1===Mt[st].y.indexOf(mt)||Dt.push(st);if(Dt.length){var Ot,At=Mt[Dt[0]];if(Dt.length>1)for(st=1;st<Dt.length;st++)Zt(At.x,(Ot=Mt[Dt[st]]).x),Zt(At.y,Ot.y);Zt(At.x,[ht]),Zt(At.y,[mt])}else Mt.push({x:[ht],y:[mt]})}}return Mt}(he,be),Ve=0;Ve<ze.length;Ve++)$t(he,ze[Ve].x,ze[Ve].y)}},{"../../components/color":367,"../../components/drawing":389,"../../components/titles":476,"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"./autorange":565,"./axis_autotype":567,"./axis_ids":570,"./clean_ticks":572,"./layout_attributes":579,"./set_convert":585,"@plotly/d3":58,"fast-isnumeric":190}],567:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib"),k=v("../../constants/numerical").BADNUM,x=g.isArrayOrTypedArray,e=g.isDateTime,n=g.cleanNumber,i=Math.round;function l(d,f){return f?m(d):"number"==typeof d}function r(d){return Math.max(1,(d-1)/1e3)}$.exports=function(d,f,t){var y,h=d,s=t.noMultiCategory;if(x(h)&&!h.length)return"-";if(!s&&x((y=h)[0])&&x(y[1]))return"multicategory";if(s&&Array.isArray(h[0])){for(var o=[],p=0;p<h.length;p++)if(x(h[p]))for(var c=0;c<h[p].length;c++)o.push(h[p][c]);h=o}if(function(y,u){for(var _=y.length,b=r(_),w=0,T=0,C={},M=0;M<_;M+=b){var P=y[i(M)],S=String(P);C[S]||(C[S]=1,e(P,u)&&w++,m(P)&&T++)}return w>2*T}(h,f))return"date";var a="strict"!==t.autotypenumbers;return function(y,u){for(var _=y.length,b=r(_),w=0,T=0,C={},M=0;M<_;M+=b){var P=y[i(M)],S=String(P);if(!C[S]){C[S]=1;var E=typeof P;"boolean"===E?T++:(u?n(P)!==k:"number"===E)?w++:"string"===E&&T++}}return T>2*w}(h,a)?"category":function(y,u){for(var _=y.length,b=0;b<_;b++)if(l(y[b],u))return!0;return!1}(h,a)?"linear":"-"}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],568:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../registry"),k=v("../../lib"),x=v("../../plot_api/plot_template"),e=v("../array_container_defaults"),n=v("./layout_attributes"),i=v("./tick_value_defaults"),l=v("./tick_mark_defaults"),r=v("./tick_label_defaults"),d=v("./prefix_suffix_defaults"),f=v("./category_order_defaults"),t=v("./line_grid_defaults"),h=v("./set_convert"),s=v("./constants").WEEKDAY_PATTERN,o=v("./constants").HOUR_PATTERN;function p(y,u,_){function b(E,R){return k.coerce(y,u,n.rangebreaks,E,R)}if(b("enabled")){var w=b("bounds");if(w&&w.length>=2){var T,C,M="";if(2===w.length)for(T=0;T<2;T++)if(C=a(w[T])){M=s;break}var I=b("pattern",M);if(I===s)for(T=0;T<2;T++)(C=a(w[T]))&&(u.bounds[T]=w[T]=C-1);if(I)for(T=0;T<2;T++)switch(C=w[T],I){case s:if(!m(C)||(C=+C)!==Math.floor(C)||C<0||C>=7)return void(u.enabled=!1);u.bounds[T]=w[T]=C;break;case o:if(!m(C)||(C=+C)<0||C>24)return void(u.enabled=!1);u.bounds[T]=w[T]=C}if(!1===_.autorange){var P=_.range;if(P[0]<P[1]){if(w[0]<P[0]&&w[1]>P[1])return void(u.enabled=!1)}else if(w[0]>P[0]&&w[1]<P[1])return void(u.enabled=!1)}}else{var S=b("values");if(!S||!S.length)return void(u.enabled=!1);b("dvalue")}}}$.exports=function(y,u,_,b,w){var T,C=b.letter,M=b.font||{},I=b.splomStash||{},P=_("visible",!b.visibleDflt),E=u.type||(u._template||{}).type||"-";"date"===E&&(g.getComponentMethod("calendars","handleDefaults")(y,u,"calendar",b.calendar),b.noTicklabelmode||(T=_("ticklabelmode")));var R="";b.noTicklabelposition&&"multicategory"!==E||(R=k.coerce(y,u,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===T?["outside","inside"]:"x"===C?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),b.noTicklabeloverflow||_("ticklabeloverflow",-1!==R.indexOf("inside")?"hide past domain":"category"===E||"multicategory"===E?"allow":"hide past div"),h(u,w);var D=!u.isValidRange(y.range);D&&b.reverseDflt&&(D="reversed"),!_("autorange",D)||"linear"!==E&&"-"!==E||_("rangemode"),_("range"),u.cleanRange(),f(y,u,_,b),"category"===E||b.noHover||_("hoverformat");var j=_("color"),H=j!==n.color.dflt?j:M.color,Y=I.label||w._dfltTitle[C];if(d(y,u,_,E,b),!P)return u;_("title.text",Y),k.coerceFont(_,"title.font",{family:M.family,size:k.bigFont(M.size),color:H}),i(y,u,_,E);var X=b.hasMinor;if(X&&(x.newContainer(u,"minor"),i(y,u,_,E,{isMinor:!0})),r(y,u,_,E,b),l(y,u,_,b),X){var Z=b.isMinor;b.isMinor=!0,l(y,u,_,b),b.isMinor=Z}t(y,u,_,{dfltColor:j,bgColor:b.bgColor,showGrid:b.showGrid,hasMinor:X,attributes:n}),!X||u.minor.ticks||u.minor.showgrid||delete u.minor,(u.showline||u.ticks)&&_("mirror"),b.automargin&&_("automargin");var W,re="multicategory"===E;if(b.noTickson||"category"!==E&&!re||!u.ticks&&!u.showgrid||(re&&(W="boundaries"),"boundaries"===_("tickson",W)&&delete u.ticklabelposition),re&&_("showdividers")&&(_("dividercolor"),_("dividerwidth")),"date"===E)if(e(y,u,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:p}),u.rangebreaks.length){for(var U=0;U<u.rangebreaks.length;U++)if(u.rangebreaks[U].pattern===s){u._hasDayOfWeekBreaks=!0;break}if(h(u,w),w._has("scattergl")||w._has("splom"))for(var B=0;B<b.data.length;B++){var V=b.data[B];"scattergl"!==V.type&&"splom"!==V.type||(V.visible=!1,k.warn(V.type+" traces do not work on axes with rangebreaks. Setting trace "+V.index+" to `visible: false`."))}}else delete u.rangebreaks;return u};var c={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function a(y){if("string"==typeof y)return c[y.substr(0,3).toLowerCase()]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../array_container_defaults":561,"./category_order_defaults":571,"./constants":573,"./layout_attributes":579,"./line_grid_defaults":581,"./prefix_suffix_defaults":583,"./set_convert":585,"./tick_label_defaults":587,"./tick_mark_defaults":588,"./tick_value_defaults":589,"fast-isnumeric":190}],569:[function(v,$,Q){"use strict";var m=v("../../constants/docs"),g=m.FORMAT_LINK,k=m.DATE_FORMAT_LINK;function x(n,i){return["Sets the "+n+" formatting rule"+(i?"for `"+i+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+g+"."].join(" ")}function e(n,i){return x(n,i)+[" And for dates see: "+k+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}$.exports={axisHoverFormat:function(n,i){return{valType:"string",dflt:"",editType:"none",description:(i?x:e)("hover text",n)+["By default the values are formatted using "+(i?"generic number format":"`"+n+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:x,descriptionWithDates:e}},{"../../constants/docs":486}],570:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("./constants");function k(x,e){if(e&&e.length)for(var n=0;n<e.length;n++)if(e[n][x])return!0;return!1}Q.id2name=function(x){if("string"==typeof x&&x.match(g.AX_ID_PATTERN)){var e=x.split(" ")[0].substr(1);return"1"===e&&(e=""),x.charAt(0)+"axis"+e}},Q.name2id=function(x){if(x.match(g.AX_NAME_PATTERN)){var e=x.substr(5);return"1"===e&&(e=""),x.charAt(0)+e}},Q.cleanId=function(x,e,n){var i=/( domain)$/.test(x);if("string"==typeof x&&x.match(g.AX_ID_PATTERN)&&(!e||x.charAt(0)===e)&&(!i||n)){var l=x.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===l&&(l=""),x.charAt(0)+l+(i&&n?" domain":"")}},Q.list=function(x,e,n){var i=x._fullLayout;if(!i)return[];var l,r=Q.listIds(x,e),d=new Array(r.length);for(l=0;l<r.length;l++){var f=r[l];d[l]=i[f.charAt(0)+"axis"+f.substr(1)]}if(!n){var t=i._subplots.gl3d||[];for(l=0;l<t.length;l++){var h=i[t[l]];e?d.push(h[e+"axis"]):d.push(h.xaxis,h.yaxis,h.zaxis)}}return d},Q.listIds=function(x,e){var n=x._fullLayout;if(!n)return[];var i=n._subplots;return e?i[e+"axis"]:i.xaxis.concat(i.yaxis)},Q.getFromId=function(x,e,n){var i=x._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===n?e=e.replace(/y[0-9]*/,""):"y"===n&&(e=e.replace(/x[0-9]*/,"")),i[Q.id2name(e)]},Q.getFromTrace=function(x,e,n){var i=x._fullLayout,l=null;if(m.traceIs(e,"gl3d")){var r=e.scene;"scene"===r.substr(0,5)&&(l=i[r][n+"axis"])}else l=Q.getFromId(x,e[n+"axis"]||n);return l},Q.idSort=function(x,e){var n=x.charAt(0),i=e.charAt(0);return n!==i?n>i?1:-1:+(x.substr(1)||1)-+(e.substr(1)||1)},Q.ref2id=function(x){return!!/^[xyz]/.test(x)&&x.split(" ")[0]},Q.isLinked=function(x,e){return k(e,x._axisMatchGroups)||k(e,x._axisConstraintGroups)}},{"../../registry":647,"./constants":573}],571:[function(v,$,Q){"use strict";$.exports=function(m,g,k,x){if("category"===g.type){var e,n=m.categoryarray,i=Array.isArray(n)&&n.length>0;i&&(e="array");var l,r=k("categoryorder",e);"array"===r&&(l=k("categoryarray")),i||"array"!==r||(r=g.categoryorder="trace"),"trace"===r?g._initialCategories=[]:"array"===r?g._initialCategories=l.slice():(l=function(d,f){var t,h,s,o=f.dataAttr||d._id.charAt(0),p={};if(f.axData)t=f.axData;else for(t=[],h=0;h<f.data.length;h++){var c=f.data[h];c[o+"axis"]===d._id&&t.push(c)}for(h=0;h<t.length;h++){var a=t[h][o];for(s=0;s<a.length;s++){var y=a[s];null!=y&&(p[y]=1)}}return Object.keys(p)}(g,x).sort(),"category ascending"===r?g._initialCategories=l:"category descending"===r&&(g._initialCategories=l.reverse()))}}},{}],572:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib"),k=v("../../constants/numerical"),x=k.ONEDAY,e=k.ONEWEEK;Q.dtick=function(n,i){var l="log"===i,r="date"===i,d="category"===i,f=r?x:1;if(!n)return f;if(m(n))return(n=Number(n))<=0?f:d?Math.max(1,Math.round(n)):r?Math.max(.1,n):n;if("string"!=typeof n||!r&&!l)return f;var t=n.charAt(0),h=n.substr(1);return(h=m(h)?Number(h):0)<=0||!(r&&"M"===t&&h===Math.round(h)||l&&"L"===t||l&&"D"===t&&(1===h||2===h))?f:n},Q.tick0=function(n,i,l,r){return"date"===i?g.cleanDate(n,g.dateTick0(l,r%e==0?1:0)):"D1"!==r&&"D2"!==r?m(n)?Number(n):0:void 0}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],573:[function(v,$,Q){"use strict";var m=v("../../lib/regex").counter;$.exports={idRegex:{x:m("x","( domain)?"),y:m("y","( domain)?")},attrRegex:m("[xy]axis"),xAxisMatch:m("xaxis"),yAxisMatch:m("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":532}],574:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./autorange"),k=v("./axis_ids").id2name,x=v("./layout_attributes"),e=v("./scale_zoom"),n=v("./set_convert"),i=v("../../constants/numerical").ALMOST_EQUAL,l=v("../../constants/alignment").FROM_BL;function r(p,c,a){var y=a.axIds,u=a.layoutOut,_=a.hasImage,b=u._axisConstraintGroups,w=u._axisMatchGroups,T=c._id,C=T.charAt(0),M=((u._splomAxes||{})[C]||{})[T]||{},I=c._id,P="x"===I.charAt(0);function S(ee,N){return m.coerce(p,c,x,ee,N)}c._matchGroup=null,c._constraintGroup=null,S("constrain",_?"domain":"range"),m.coerce(p,c,{constraintoward:{valType:"enumerated",values:P?["left","center","right"]:["bottom","middle","top"],dflt:P?"center":"middle"}},"constraintoward");var E,R,D=c.type,j=[];for(E=0;E<y.length;E++)(R=y[E])!==I&&u[k(R)].type===D&&j.push(R);var H=f(b,I);if(H){var Y=[];for(E=0;E<j.length;E++)H[R=j[E]]||Y.push(R);j=Y}var X,Z,W=j.length;W&&(p.matches||M.matches)&&(X=m.coerce(p,c,{matches:{valType:"enumerated",values:j,dflt:-1!==j.indexOf(M.matches)?M.matches:void 0}},"matches"));var re=_&&!P?c.anchor:void 0;if(W&&!X&&(p.scaleanchor||re)&&(Z=m.coerce(p,c,{scaleanchor:{valType:"enumerated",values:j}},"scaleanchor",re)),X){c._matchGroup=t(w,I,X,1);var U=u[k(X)],B=d(u,c)/d(u,U);P!==("x"===X.charAt(0))&&(B=(P?"x":"y")+B),t(b,I,X,B)}else p.matches&&-1!==y.indexOf(p.matches)&&m.warn("ignored "+c._name+'.matches: "'+p.matches+'" to avoid an infinite loop');if(Z){var V=S("scaleratio");V||(V=c.scaleratio=1),t(b,I,Z,V)}else p.scaleanchor&&-1!==y.indexOf(p.scaleanchor)&&m.warn("ignored "+c._name+'.scaleanchor: "'+p.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function d(p,c){var a=c.domain;return a||(a=p[k(c.overlaying)].domain),a[1]-a[0]}function f(p,c){for(var a=0;a<p.length;a++)if(p[a][c])return p[a];return null}function t(p,c,a,y){var u,_,b,w,T,C=f(p,c);null===C?((C={})[c]=1,T=p.length,p.push(C)):T=p.indexOf(C);var M=Object.keys(C);for(u=0;u<p.length;u++)if(b=p[u],u!==T&&b[a]){var I=b[a];for(_=0;_<M.length;_++)b[w=M[_]]=h(I,h(y,C[w]));return void p.splice(T,1)}if(1!==y)for(_=0;_<M.length;_++){var P=M[_];C[P]=h(y,C[P])}C[a]=1}function h(p,c){var a,y,u="",_="";"string"==typeof p&&(a=(u=p.match(/^[xy]*/)[0]).length,p=+p.substr(a)),"string"==typeof c&&(y=(_=c.match(/^[xy]*/)[0]).length,c=+c.substr(y));var b=p*c;return a||y?a&&y&&u.charAt(0)!==_.charAt(0)?a===y?b:(a>y?u.substr(y):_.substr(a))+b:u+_+p*c:b}function s(p,c){for(var a=c._size,y=a.h/a.w,u={},_=Object.keys(p),b=0;b<_.length;b++){var w=_[b],T=p[w];if("string"==typeof T){var C=T.match(/^[xy]*/)[0],M=C.length;T=+T.substr(M);for(var I="y"===C.charAt(0)?y:1/y,P=0;P<M;P++)T*=I}u[w]=T}return u}function o(p,c){var a=p._inputDomain,u=a[0]+(a[1]-a[0])*l[p.constraintoward];p.domain=p._input.domain=[u+(a[0]-u)/c,u+(a[1]-u)/c],p.setScale()}Q.handleDefaults=function(p,c,a){var y,u,_,b,w,T,C,M,I=a.axIds,P=a.axHasImage,S=c._axisConstraintGroups=[],E=c._axisMatchGroups=[];for(y=0;y<I.length;y++)r(w=p[b=k(I[y])],T=c[b],{axIds:I,layoutOut:c,hasImage:P[b]});function R(U,B){for(y=0;y<U.length;y++)for(_ in u=U[y])c[k(_)][B]=u}for(R(E,"_matchGroup"),y=0;y<S.length;y++)for(_ in u=S[y])if((T=c[k(_)]).fixedrange){for(var D in u){var j=k(D);!1===(p[j]||{}).fixedrange&&m.warn("fixedrange was specified as false for axis "+j+" but was overridden because another axis in its constraint group has fixedrange true"),c[j].fixedrange=!0}break}for(y=0;y<S.length;){for(_ in u=S[y]){(T=c[k(_)])._matchGroup&&Object.keys(T._matchGroup).length===Object.keys(u).length&&(S.splice(y,1),y--);break}y++}R(S,"_constraintGroup");var H=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],Y=!1,X=!1;function Z(){M=T[C],"rangebreaks"===C&&(X=T._hasDayOfWeekBreaks)}for(y=0;y<E.length;y++){u=E[y];for(var W=0;W<H.length;W++){var re;for(_ in C=H[W],M=null,u)if(w=p[b=k(_)],C in(T=c[b])){if(!T.matches&&(re=T,C in w)){Z();break}null===M&&C in w&&Z()}if("range"===C&&M&&(Y=!0),"autorange"===C&&null===M&&Y&&(M=!1),null===M&&C in re&&(M=re[C]),null!==M)for(_ in u)(T=c[k(_)])[C]="range"===C?M.slice():M,"rangebreaks"===C&&(T._hasDayOfWeekBreaks=X,n(T,c))}}},Q.enforce=function(p){var c,a,y,u,_,b,w,T,C=p._fullLayout,M=C._axisConstraintGroups||[];for(c=0;c<M.length;c++){y=s(M[c],C);var I=Object.keys(y),P=1/0,S=0,E=1/0,R={},D={},j=!1;for(a=0;a<I.length;a++)D[u=I[a]]=_=C[k(u)],_._inputDomain?_.domain=_._inputDomain.slice():_._inputDomain=_.domain.slice(),_._inputRange||(_._inputRange=_.range.slice()),_.setScale(),R[u]=b=Math.abs(_._m)/y[u],P=Math.min(P,b),"domain"!==_.constrain&&_._constraintShrinkable||(E=Math.min(E,b)),delete _._constraintShrinkable,S=Math.max(S,b),"domain"===_.constrain&&(j=!0);if(!(P>i*S)||j)for(a=0;a<I.length;a++)if(b=R[u=I[a]],w=(_=D[u]).constrain,b!==E||"domain"===w)if(T=b/E,"range"===w)e(_,T);else{var H=_._inputDomain,Y=(_.domain[1]-_.domain[0])/(H[1]-H[0]),X=(_.r2l(_.range[1])-_.r2l(_.range[0]))/(_.r2l(_._inputRange[1])-_.r2l(_._inputRange[0]));if((T/=Y)*X<1){_.domain=_._input.domain=H.slice(),e(_,T);continue}if(X<1&&(_.range=_._input.range=_._inputRange.slice(),T*=X),_.autorange){var Z=_.r2l(_.range[0]),W=_.r2l(_.range[1]),re=(Z+W)/2,U=re,B=re,V=Math.abs(W-re),ee=re-V*T*1.0001,N=re+V*T*1.0001,K=g.makePadFn(C,_,0),J=g.makePadFn(C,_,1);o(_,T);var te,ae,le=Math.abs(_._m),se=g.concatExtremes(p,_),ve=se.min,ue=se.max;for(ae=0;ae<ve.length;ae++)(te=ve[ae].val-K(ve[ae])/le)>ee&&te<U&&(U=te);for(ae=0;ae<ue.length;ae++)(te=ue[ae].val+J(ue[ae])/le)<N&&te>B&&(B=te);T/=(B-U)/(2*V),U=_.l2r(U),B=_.l2r(B),_.range=_._input.range=Z<W?[U,B]:[B,U]}o(_,T)}}},Q.getAxisGroup=function(p,c){for(var a=p._axisMatchGroups,y=0;y<a.length;y++)if(a[y][c])return"g"+y;return c},Q.clean=function(p,c){if(c._inputDomain){for(var a=!1,y=c._id,u=p._fullLayout._axisConstraintGroups,_=0;_<u.length;_++)if(u[_][y]){a=!0;break}a&&"domain"===c.constrain||(c._input.domain=c.domain=c._inputDomain,delete c._inputDomain)}}},{"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"./autorange":565,"./axis_ids":570,"./layout_attributes":579,"./scale_zoom":584,"./set_convert":585}],575:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=g.numberFormat,x=v("tinycolor2"),e=v("has-passive-events"),n=v("../../registry"),i=g.strTranslate,l=v("../../lib/svg_text_utils"),r=v("../../components/color"),d=v("../../components/drawing"),f=v("../../components/fx"),t=v("./axes"),h=v("../../lib/setcursor"),s=v("../../components/dragelement"),o=v("../../components/dragelement/helpers"),p=o.selectingOrDrawing,c=o.freeMode,a=v("../../constants/alignment").FROM_TL,y=v("../../lib/clear_gl_canvases"),u=v("../../plot_api/subroutines").redrawReglTraces,_=v("../plots"),b=v("./axis_ids").getFromId,w=v("../../components/selections").prepSelect,T=v("../../components/selections").clearOutline,C=v("../../components/selections").selectOnClick,M=v("./scale_zoom"),I=v("./constants"),P=I.MINDRAG,S=I.MINZOOM,E=!0;function R(te,ae,le,se){var ve=g.ensureSingle(te.draglayer,ae,le,function(ue){ue.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",te.id)});return ve.call(h,se),ve.node()}function D(te,ae,le,se,ve,ue,ye){var Me=R(te,"rect",ae,le);return m.select(Me).call(d.setRect,se,ve,ue,ye),Me}function j(te,ae){for(var le=0;le<te.length;le++)if(!te[le].fixedrange)return ae;return""}function H(te,ae,le,se,ve){for(var ue=0;ue<te.length;ue++){var ye=te[ue];if(!ye.fixedrange)if(ye.rangebreaks){var Me="y"===ye._id.charAt(0),ge=Me?1-le:le;se[ye._name+".range[0]"]=ye.l2r(ye.p2l((Me?1-ae:ae)*ye._length)),se[ye._name+".range[1]"]=ye.l2r(ye.p2l(ge*ye._length))}else{var we=ye._rl[0],oe=ye._rl[1]-we;se[ye._name+".range[0]"]=ye.l2r(we+oe*ae),se[ye._name+".range[1]"]=ye.l2r(we+oe*le)}}if(ve&&ve.length){var de=(ae+(1-le))/2;H(ve,de,1-de,se,[])}}function Y(te,ae){for(var le=0;le<te.length;le++){var se=te[le];if(!se.fixedrange)if(se.rangebreaks){var ve=se._length,ue=(se.p2l(0+ae)-se.p2l(0)+(se.p2l(ve+ae)-se.p2l(ve)))/2;se.range=[se.l2r(se._rl[0]-ue),se.l2r(se._rl[1]-ue)]}else se.range=[se.l2r(se._rl[0]-ae/se._m),se.l2r(se._rl[1]-ae/se._m)]}}function X(te){return 1-(te>=0?Math.min(te,.9):1/(1/Math.max(te,-.3)+3.222))}function Z(te,ae,le,se,ve){return te.append("path").attr("class","zoombox").style({fill:ae>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(le,se)).attr("d",ve+"Z")}function W(te,ae,le){return te.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(ae,le)).attr("d","M0,0Z")}function re(te,ae,le,se,ve,ue){te.attr("d",se+"M"+le.l+","+le.t+"v"+le.h+"h"+le.w+"v-"+le.h+"h-"+le.w+"Z"),U(te,ae,ve,ue)}function U(te,ae,le,se){le||(te.transition().style("fill",se>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ae.transition().style("opacity",1).duration(200))}function B(te){m.select(te).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function V(te){E&&te.data&&te._context.showTips&&(g.notifier(g._(te,"Double-click to zoom back out"),"long"),E=!1)}function ee(te){var ae=Math.floor(Math.min(te.b-te.t,te.r-te.l,S)/2);return"M"+(te.l-3.5)+","+(te.t-.5+ae)+"h3v"+-ae+"h"+ae+"v-3h-"+(ae+3)+"ZM"+(te.r+3.5)+","+(te.t-.5+ae)+"h-3v"+-ae+"h"+-ae+"v-3h"+(ae+3)+"ZM"+(te.r+3.5)+","+(te.b+.5-ae)+"h-3v"+ae+"h"+-ae+"v3h"+(ae+3)+"ZM"+(te.l-3.5)+","+(te.b+.5-ae)+"h3v"+ae+"h"+ae+"v3h-"+(ae+3)+"Z"}function N(te,ae,le,se,ve){for(var ue,ye,Me,pe,ge=!1,we={},oe={},de=(ve||{}).xaHash,Te=(ve||{}).yaHash,Ee=0;Ee<ae.length;Ee++){var Ae=ae[Ee];for(ue in le)if(Ae[ue]){for(Me in Ae)ve&&(de[Me]||Te[Me])||("x"===Me.charAt(0)?le:se)[Me]||(we[Me]=ue);for(ye in se)ve&&(de[ye]||Te[ye])||!Ae[ye]||(ge=!0)}for(ye in se)if(Ae[ye])for(pe in Ae)ve&&(de[pe]||Te[pe])||("x"===pe.charAt(0)?le:se)[pe]||(oe[pe]=ye)}ge&&(g.extendFlat(we,oe),oe={});var De={},Ie=[];for(Me in we){var Oe=b(te,Me);Ie.push(Oe),De[Oe._id]=Oe}var Xe={},Fe=[];for(pe in oe){var Pe=b(te,pe);Fe.push(Pe),Xe[Pe._id]=Pe}return{xaHash:De,yaHash:Xe,xaxes:Ie,yaxes:Fe,xLinks:we,yLinks:oe,isSubplotConstrained:ge}}function K(te,ae){if(e){var le=void 0!==te.onwheel?"wheel":"mousewheel";te._onwheel&&te.removeEventListener(le,te._onwheel),te._onwheel=ae,te.addEventListener(le,ae,{passive:!1})}else void 0!==te.onwheel?te.onwheel=ae:void 0!==te.onmousewheel?te.onmousewheel=ae:te.isAddedWheelEvent||(te.isAddedWheelEvent=!0,te.addEventListener("wheel",ae,{passive:!1}))}function J(te){var ae=[];for(var le in te)ae.push(te[le]);return ae}$.exports={makeDragBox:function(te,ae,le,se,ve,ue,ye,Me){var pe,ge,we,oe,de,Te,Ee,Ae,De,Ie,Oe,Xe,Fe,Pe,Re,qe,Qe,ct,bt,Tt,_t,nt,Ke,xt=te._fullLayout._zoomlayer,Ht=ye+Me==="nsew",Zt=1===(ye+Me).length;function $t(){if(De=(pe=ae.xaxis)._length,Ie=(ge=ae.yaxis)._length,Ee=pe._offset,Ae=ge._offset,(we={})[pe._id]=pe,(oe={})[ge._id]=ge,ye&&Me)for(var tr=ae.overlays,rr=0;rr<tr.length;rr++){var ar=tr[rr].xaxis;we[ar._id]=ar;var dr=tr[rr].yaxis;oe[dr._id]=dr}de=J(we),Te=J(oe),Fe=j(de,Me),Pe=j(Te,ye),Re=!Pe&&!Fe,Xe=N(te,te._fullLayout._axisMatchGroups,we,oe);var xr=(Oe=N(te,te._fullLayout._axisConstraintGroups,we,oe,Xe)).isSubplotConstrained||Xe.isSubplotConstrained;qe=Me||xr,Qe=ye||xr;var Lr=te._fullLayout;ct=Lr._has("scattergl"),bt=Lr._has("splom"),Tt=Lr._has("svg")}$t();var tr,Xt=(tr=Pe+Fe)?"nsew"===tr?Ht?"":"pan"===te._fullLayout.dragmode?"move":"crosshair":tr.toLowerCase()+"-resize":"pointer",cr=D(ae,ye+Me+"drag",Xt,le,se,ve,ue);if(Re&&!Ht)return cr.onmousedown=null,cr.style.pointerEvents="none",cr;var Ft,Be,He,he,be,ze,Ve,Je,Ye,lt,st={element:cr,gd:te,plotinfo:ae};function Mt(){st.plotinfo.selection=!1,T(te)}function Dt(tr,rr){var an,Nn,on,wn,An,ar=st.gd;if(ar._fullLayout._activeShapeIndex>=0)ar._fullLayout._deactivateShape(ar);else{var dr=ar._fullLayout.clickmode;if(B(ar),2!==tr||Zt||function Ut(){if(!te._transitioningWithDuration){var tr=te._context.doubleClick,rr=[];Fe&&(rr=rr.concat(de)),Pe&&(rr=rr.concat(Te)),Xe.xaxes&&(rr=rr.concat(Xe.xaxes)),Xe.yaxes&&(rr=rr.concat(Xe.yaxes));var ar,dr,xr,Lr={};if("reset+autosize"===tr)for(tr="autosize",dr=0;dr<rr.length;dr++)if((ar=rr[dr])._rangeInitial&&(ar.range[0]!==ar._rangeInitial[0]||ar.range[1]!==ar._rangeInitial[1])||!ar._rangeInitial&&!ar.autorange){tr="reset";break}if("autosize"===tr)for(dr=0;dr<rr.length;dr++)(ar=rr[dr]).fixedrange||(Lr[ar._name+".autorange"]=!0);else if("reset"===tr)for((Fe||Oe.isSubplotConstrained)&&(rr=rr.concat(Oe.xaxes)),Pe&&!Oe.isSubplotConstrained&&(rr=rr.concat(Oe.yaxes)),Oe.isSubplotConstrained&&(Fe?Pe||(rr=rr.concat(Te)):rr=rr.concat(de)),dr=0;dr<rr.length;dr++)(ar=rr[dr]).fixedrange||(ar._rangeInitial?(Lr[ar._name+".range[0]"]=(xr=ar._rangeInitial)[0],Lr[ar._name+".range[1]"]=xr[1]):Lr[ar._name+".autorange"]=!0);te.emit("plotly_doubleclick",null),n.call("_guiRelayout",te,Lr)}}(),Ht)dr.indexOf("select")>-1&&C(rr,ar,de,Te,ae.id,st),dr.indexOf("event")>-1&&f.click(ar,rr,ae.id);else if(1===tr&&Zt){var xr=ye?ge:pe,Lr="s"===ye||"w"===Me?0:1,zr=xr._name+".range["+Lr+"]",Hr=(wn=(an=xr).range[Nn=Lr],An=Math.abs(wn-an.range[1-Nn]),"date"===an.type?wn:"log"===an.type?(on=Math.ceil(Math.max(0,-Math.log(An)/Math.LN10))+3,k("."+on+"g")(Math.pow(10,wn))):(on=Math.floor(Math.log(Math.abs(wn))/Math.LN10)-Math.floor(Math.log(An)/Math.LN10)+4,k("."+String(on)+"g")(wn))),Xr="left",cn="middle";if(xr.fixedrange)return;ye?(cn="n"===ye?"top":"bottom","right"===xr.side&&(Xr="right")):"e"===Me&&(Xr="right"),ar._context.showAxisRangeEntryBoxes&&m.select(cr).call(l.makeEditable,{gd:ar,immediate:!0,background:ar._fullLayout.paper_bgcolor,text:String(Hr),fill:xr.tickfont?xr.tickfont.color:"#444",horizontalAlign:Xr,verticalAlign:cn}).on("edit",function(an){var Nn=xr.d2r(an);void 0!==Nn&&n.call("_guiRelayout",ar,zr,Nn)})}}}function ht(tr,rr){if(te._transitioningWithDuration)return!1;var cn,an,ar=Math.max(0,Math.min(De,nt*tr+Ft)),dr=Math.max(0,Math.min(Ie,Ke*rr+Be)),xr=Math.abs(ar-Ft),Lr=Math.abs(dr-Be);function zr(){Ve="",He.r=He.l,He.t=He.b,Ye.attr("d","M0,0Z")}if(He.l=Math.min(Ft,ar),He.r=Math.max(Ft,ar),He.t=Math.min(Be,dr),He.b=Math.max(Be,dr),Oe.isSubplotConstrained)xr>S||Lr>S?(Ve="xy",xr/De>Lr/Ie?(Lr=xr*Ie/De,Be>dr?He.t=Be-Lr:He.b=Be+Lr):(xr=Lr*De/Ie,Ft>ar?He.l=Ft-xr:He.r=Ft+xr),Ye.attr("d",ee(He))):zr();else if(Xe.isSubplotConstrained)if(xr>S||Lr>S){Ve="xy";var Hr=Math.min(He.l/De,(Ie-He.b)/Ie),Xr=Math.max(He.r/De,(Ie-He.t)/Ie);He.l=Hr*De,He.r=Xr*De,He.b=(1-Hr)*Ie,He.t=(1-Xr)*Ie,Ye.attr("d",ee(He))}else zr();else!Pe||Lr<Math.min(Math.max(.6*xr,P),S)?xr<P||!Fe?zr():(He.t=0,He.b=Ie,Ve="x",Ye.attr("d","M"+((cn=He).l-.5)+","+((an=Be)-S-.5)+"h-3v"+(2*S+1)+"h3ZM"+(cn.r+.5)+","+(an-S-.5)+"h3v"+(2*S+1)+"h-3Z")):!Fe||xr<Math.min(.6*Lr,S)?(He.l=0,He.r=De,Ve="y",Ye.attr("d",function(cn,an){return"M"+(an-S-.5)+","+(cn.t-.5)+"v-3h"+(2*S+1)+"v3ZM"+(an-S-.5)+","+(cn.b+.5)+"v3h"+(2*S+1)+"v-3Z"}(He,Ft))):(Ve="xy",Ye.attr("d",ee(He)));He.w=He.r-He.l,He.h=He.b-He.t,Ve&&(lt=!0),te._dragged=lt,re(Je,Ye,He,be,ze,he),mt(),te.emit("plotly_relayouting",_t),ze=!0}function mt(){_t={},"xy"!==Ve&&"x"!==Ve||(H(de,He.l/De,He.r/De,_t,Oe.xaxes),dt("x",_t)),"xy"!==Ve&&"y"!==Ve||(H(Te,(Ie-He.b)/Ie,(Ie-He.t)/Ie,_t,Oe.yaxes),dt("y",_t))}function Ot(){mt(),B(te),Jt(),V(te)}st.prepFn=function(tr,rr,ar){var dr=st.dragmode,xr=te._fullLayout.dragmode;xr!==dr&&(st.dragmode=xr),$t(),nt=te._fullLayout._invScaleX,Ke=te._fullLayout._invScaleY,Re||(Ht?tr.shiftKey?"pan"===xr?xr="zoom":p(xr)||(xr="pan"):tr.ctrlKey&&(xr="pan"):xr="pan"),st.minDrag=c(xr)?1:void 0,p(xr)?(st.xaxes=de,st.yaxes=Te,w(tr,rr,ar,st,xr)):(st.clickFn=Dt,p(dr)&&Mt(),Re||("zoom"===xr?(st.moveFn=ht,st.doneFn=Ot,st.minDrag=1,function(Lr,zr,Hr){var Xr=cr.getBoundingClientRect();Ft=zr-Xr.left,Be=Hr-Xr.top,te._fullLayout._calcInverseTransform(te);var cn=g.apply3DTransform(te._fullLayout._invTransform)(Ft,Be);He={l:Ft=cn[0],r:Ft,w:0,t:Be=cn[1],b:Be,h:0},he=te._hmpixcount?te._hmlumcount/te._hmpixcount:x(te._fullLayout.plot_bgcolor).getLuminance(),ze=!1,Ve="xy",lt=!1,Je=Z(xt,he,Ee,Ae,be="M0,0H"+De+"V"+Ie+"H0V0"),Ye=W(xt,Ee,Ae)}(0,rr,ar)):"pan"===xr&&(st.moveFn=it,st.doneFn=Jt))),te._fullLayout._redrag=function(){var Lr=te._dragdata;Lr&&Lr.element===cr&&(p(te._fullLayout.dragmode)||($t(),qt([0,0,De,Ie]),st.moveFn(Lr.dx,Lr.dy)))}},s.init(st);var At=[0,0,De,Ie],It=null,Se=I.REDRAWDELAY,Ze=ae.mainplot?te._fullLayout._plots[ae.mainplot]:ae;function it(tr,rr){if(tr*=nt,rr*=Ke,!te._transitioningWithDuration){if(te._fullLayout._replotting=!0,"ew"===Fe||"ns"===Pe){var ar=Fe?-tr:0,dr=Pe?-rr:0;if(Xe.isSubplotConstrained){if(Fe&&Pe){var xr=(tr/De-rr/Ie)/2;ar=-(tr=xr*De),dr=-(rr=-xr*Ie)}Pe?ar=-dr*De/Ie:dr=-ar*Ie/De}return Fe&&(Y(de,tr),dt("x")),Pe&&(Y(Te,rr),dt("y")),qt([ar,dr,De,Ie]),Ct(),void te.emit("plotly_relayouting",_t)}var Lr,zr,Hr="w"===Fe==("n"===Pe)?1:-1;if(Fe&&Pe&&(Oe.isSubplotConstrained||Xe.isSubplotConstrained)){var Xr=(tr/De+Hr*rr/Ie)/2;tr=Xr*De,rr=Hr*Xr*Ie}if("w"===Fe?tr=on(de,0,tr):"e"===Fe?tr=on(de,1,-tr):Fe||(tr=0),"n"===Pe?rr=on(Te,1,rr):"s"===Pe?rr=on(Te,0,-rr):Pe||(rr=0),Lr="w"===Fe?tr:0,zr="n"===Pe?rr:0,Oe.isSubplotConstrained&&!Xe.isSubplotConstrained||Xe.isSubplotConstrained&&Fe&&Pe&&Hr>0){var cn;if(Xe.isSubplotConstrained||!Fe&&1===Pe.length){for(cn=0;cn<de.length;cn++)de[cn].range=de[cn]._r.slice(),M(de[cn],1-rr/Ie);Lr=(tr=rr*De/Ie)/2}if(Xe.isSubplotConstrained||!Pe&&1===Fe.length){for(cn=0;cn<Te.length;cn++)Te[cn].range=Te[cn]._r.slice(),M(Te[cn],1-tr/De);zr=(rr=tr*Ie/De)/2}}Xe.isSubplotConstrained&&Pe||dt("x"),Xe.isSubplotConstrained&&Fe||dt("y");var an=De-tr,Nn=Ie-rr;!Xe.isSubplotConstrained||Fe&&Pe||(Fe?(zr=Lr?0:tr*Ie/De,Nn=an*Ie/De):(Lr=zr?0:rr*De/Ie,an=Nn*De/Ie)),qt([Lr,zr,an,Nn]),Ct(),te.emit("plotly_relayouting",_t)}function on(wn,An,ii){for(var Vr,sn,xn=1-An,nn=0;nn<wn.length;nn++){var fn=wn[nn];if(!fn.fixedrange){Vr=fn,sn=fn._rl[xn]+(fn._rl[An]-fn._rl[xn])/X(ii/fn._length);var Xn=fn.l2r(sn);!1!==Xn&&void 0!==Xn&&(fn.range[An]=Xn)}}return Vr._length*(Vr._rl[An]-sn)/(Vr._rl[An]-Vr._rl[xn])}}function dt(tr,rr){for(var ar=Xe.isSubplotConstrained?{x:Te,y:de}[tr]:Xe[tr+"axes"],dr=Xe.isSubplotConstrained?{x:de,y:Te}[tr]:[],xr=0;xr<ar.length;xr++){var Lr=ar[xr],zr=Lr._id,Hr=Xe.xLinks[zr]||Xe.yLinks[zr],Xr=dr[0]||we[Hr]||oe[Hr];Xr&&(rr?(rr[Lr._name+".range[0]"]=rr[Xr._name+".range[0]"],rr[Lr._name+".range[1]"]=rr[Xr._name+".range[1]"]):Lr.range=Xr.range.slice())}}function Ct(){var tr,rr=[];function ar(Lr){for(tr=0;tr<Lr.length;tr++)Lr[tr].fixedrange||rr.push(Lr[tr]._id)}for(qe&&(ar(de),ar(Oe.xaxes),ar(Xe.xaxes)),Qe&&(ar(Te),ar(Oe.yaxes),ar(Xe.yaxes)),_t={},tr=0;tr<rr.length;tr++){var xr=b(te,rr[tr]);t.drawOne(te,xr,{skipTitle:!0}),_t[xr._name+".range[0]"]=xr.range[0],_t[xr._name+".range[1]"]=xr.range[1]}t.redrawComponents(te,rr)}function Jt(){qt([0,0,De,Ie]),g.syncOrAsync([_.previousPromises,function(){te._fullLayout._replotting=!1,n.call("_guiRelayout",te,_t)}],te)}function qt(tr){var rr,ar,dr,xr,Lr=te._fullLayout,zr=Lr._plots,Hr=Lr._subplots.cartesian;if(bt&&n.subplotsRegistry.splom.drag(te),ct)for(rr=0;rr<Hr.length;rr++)if(dr=(ar=zr[Hr[rr]]).xaxis,xr=ar.yaxis,ar._scene){var Xr=g.simpleMap(dr.range,dr.r2l),cn=g.simpleMap(xr.range,xr.r2l);ar._scene.update({range:[Xr[0],cn[0],Xr[1],cn[1]]})}if((bt||ct)&&(y(te),u(te)),Tt){var an=tr[2]/pe._length,Nn=tr[3]/ge._length;for(rr=0;rr<Hr.length;rr++){dr=(ar=zr[Hr[rr]]).xaxis,xr=ar.yaxis;var on,wn,An,ii,sn=(Qe||Xe.isSubplotConstrained)&&!xr.fixedrange&&oe[xr._id];if((qe||Xe.isSubplotConstrained)&&!dr.fixedrange&&we[dr._id]?(on=an,An=Me||Xe.isSubplotConstrained?tr[0]:mr(dr,on)):Xe.xaHash[dr._id]?(on=an,An=tr[0]*dr._length/pe._length):Xe.yaHash[dr._id]?(on=Nn,An="ns"===Pe?-tr[1]*dr._length/ge._length:mr(dr,on,{n:"top",s:"bottom"}[Pe])):An=Sr(dr,on=pr(dr,an,Nn)),sn?(wn=Nn,ii=ye||Xe.isSubplotConstrained?tr[1]:mr(xr,wn)):Xe.yaHash[xr._id]?(wn=Nn,ii=tr[1]*xr._length/ge._length):Xe.xaHash[xr._id]?(wn=an,ii="ew"===Fe?-tr[0]*xr._length/pe._length:mr(xr,wn,{e:"right",w:"left"}[Fe])):ii=Sr(xr,wn=pr(xr,an,Nn)),on||wn){on||(on=1),wn||(wn=1);var xn=dr._offset-An/on,nn=xr._offset-ii/wn;ar.clipRect.call(d.setTranslate,An,ii).call(d.setScale,on,wn),ar.plot.call(d.setTranslate,xn,nn).call(d.setScale,1/on,1/wn),on===ar.xScaleFactor&&wn===ar.yScaleFactor||(d.setPointGroupScale(ar.zoomScalePts,on,wn),d.setTextPointsScale(ar.zoomScaleTxt,on,wn)),d.hideOutsideRangePoints(ar.clipOnAxisFalseTraces,ar),ar.xScaleFactor=on,ar.yScaleFactor=wn}}}}function pr(tr,rr,ar){return tr.fixedrange?0:qe&&Oe.xaHash[tr._id]?rr:Qe&&(Oe.isSubplotConstrained?Oe.xaHash:Oe.yaHash)[tr._id]?ar:0}function Sr(tr,rr){return rr?(tr.range=tr._r.slice(),M(tr,rr),mr(tr,rr)):0}function mr(tr,rr,ar){return tr._length*(1-rr)*a[ar||tr.constraintoward||"middle"]}return ye.length*Me.length!=1&&K(cr,function(tr){if(te._context._scrollZoom.cartesian||te._fullLayout._enablescrollzoom){if(Mt(),te._transitioningWithDuration)return tr.preventDefault(),void tr.stopPropagation();$t(),clearTimeout(It);var rr=-tr.deltaY;if(isFinite(rr)||(rr=tr.wheelDelta/10),isFinite(rr)){var ar,dr=Math.exp(-Math.min(Math.max(rr,-20),20)/200),xr=Ze.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Lr=(tr.clientX-xr.left)/xr.width,zr=(xr.bottom-tr.clientY)/xr.height;if(qe){for(Me||(Lr=.5),ar=0;ar<de.length;ar++)Hr(de[ar],Lr,dr);dt("x"),At[2]*=dr,At[0]+=At[2]*Lr*(1/dr-1)}if(Qe){for(ye||(zr=.5),ar=0;ar<Te.length;ar++)Hr(Te[ar],zr,dr);dt("y"),At[3]*=dr,At[1]+=At[3]*(1-zr)*(1/dr-1)}qt(At),Ct(),te.emit("plotly_relayouting",_t),It=setTimeout(function(){te._fullLayout&&(At=[0,0,De,Ie],Jt())},Se),tr.preventDefault()}else g.log("Did not find wheel motion attributes: ",tr)}function Hr(Xr,cn,an){if(!Xr.fixedrange){var Nn=g.simpleMap(Xr.range,Xr.r2l),on=Nn[0]+(Nn[1]-Nn[0])*cn;Xr.range=Nn.map(function(wn){return Xr.l2r(on+(wn-on)*an)})}}}),cr},makeDragger:R,makeRectDragger:D,makeZoombox:Z,makeCorners:W,updateZoombox:re,xyCorners:ee,transitionZoombox:U,removeZoombox:B,showDoubleClickNotifier:V,attachWheelEventHandler:K}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/subroutines":556,"../../registry":647,"../plots":628,"./axes":566,"./axis_ids":570,"./constants":573,"./scale_zoom":584,"@plotly/d3":58,"has-passive-events":229,tinycolor2:313}],576:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/fx"),k=v("../../components/dragelement"),x=v("../../lib/setcursor"),e=v("./dragbox").makeDragBox,n=v("./constants").DRAGGERSIZE;Q.initInteractions=function(i){var l=i._fullLayout;if(i._context.staticPlot)m.select(i).selectAll(".drag").remove();else if(l._has("cartesian")||l._has("splom")){Object.keys(l._plots||{}).sort(function(d,f){if((l._plots[d].mainplot&&!0)===(l._plots[f].mainplot&&!0)){var t=d.split("y"),h=f.split("y");return t[0]===h[0]?Number(t[1]||1)-Number(h[1]||1):Number(t[0]||1)-Number(h[0]||1)}return l._plots[d].mainplot?1:-1}).forEach(function(d){var f=l._plots[d],t=f.xaxis,h=f.yaxis;if(!f.mainplot){var s=e(i,f,t._offset,h._offset,t._length,h._length,"ns","ew");s.onmousemove=function(c){i._fullLayout._rehover=function(){i._fullLayout._hoversubplot===d&&i._fullLayout._plots[d]&&g.hover(i,c,d)},g.hover(i,c,d),i._fullLayout._lasthover=s,i._fullLayout._hoversubplot=d},s.onmouseout=function(c){i._dragging||(i._fullLayout._hoversubplot=null,k.unhover(i,c))},i._context.showAxisDragHandles&&(e(i,f,t._offset-n,h._offset-n,n,n,"n","w"),e(i,f,t._offset+t._length,h._offset-n,n,n,"n","e"),e(i,f,t._offset-n,h._offset+h._length,n,n,"s","w"),e(i,f,t._offset+t._length,h._offset+h._length,n,n,"s","e"))}if(i._context.showAxisDragHandles){if(d===t._mainSubplot){var o=t._mainLinePosition;"top"===t.side&&(o-=n),e(i,f,t._offset+.1*t._length,o,.8*t._length,n,"","ew"),e(i,f,t._offset,o,.1*t._length,n,"","w"),e(i,f,t._offset+.9*t._length,o,.1*t._length,n,"","e")}if(d===h._mainSubplot){var p=h._mainLinePosition;"right"!==h.side&&(p-=n),e(i,f,p,h._offset+.1*h._length,n,.8*h._length,"ns",""),e(i,f,p,h._offset+.9*h._length,n,.1*h._length,"s",""),e(i,f,p,h._offset,n,.1*h._length,"n","")}}});var r=l._hoverlayer.node();r.onmousemove=function(d){d.target=i._fullLayout._lasthover,g.hover(i,d,l._hoversubplot)},r.onclick=function(d){d.target=i._fullLayout._lasthover,g.click(i,d)},r.onmousedown=function(d){i._fullLayout._lasthover.onmousedown(d)},Q.updateFx(i)}},Q.updateFx=function(i){var l=i._fullLayout;x(l._draggers,"pan"===l.dragmode?"move":"crosshair")}},{"../../components/dragelement":386,"../../components/fx":407,"../../lib/setcursor":536,"./constants":573,"./dragbox":575,"@plotly/d3":58}],577:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../lib"),k=v("./axis_ids");$.exports=function(x){return function(e,n){var i=e[x];if(Array.isArray(i))for(var l=m.subplotsRegistry.cartesian,r=l.idRegex,d=n._subplots,f=d.xaxis,t=d.yaxis,h=d.cartesian,s=n._has("cartesian")||n._has("gl2d"),o=0;o<i.length;o++){var p=i[o];if(g.isPlainObject(p)){var c=k.cleanId(p.xref,"x",!1),a=k.cleanId(p.yref,"y",!1),y=r.x.test(c),u=r.y.test(a);if(y||u){s||g.pushUnique(n._basePlotModules,l);var _=!1;y&&-1===f.indexOf(c)&&(f.push(c),_=!0),u&&-1===t.indexOf(a)&&(t.push(a),_=!0),_&&y&&u&&h.push(c+a)}}}}}},{"../../lib":515,"../../registry":647,"./axis_ids":570}],578:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../registry"),k=v("../../lib"),x=v("../plots"),e=v("../../components/drawing"),n=v("../get_data").getModuleCalcData,i=v("./axis_ids"),l=v("./constants"),r=v("../../constants/xmlns_namespaces"),d=k.ensureSingle;function f(p,c,a){return k.ensureSingle(p,c,a,function(y){y.datum(a)})}function t(p,c,a,y,u){for(var _,b,w,T=l.traceLayerClasses,C=p._fullLayout,M=C._modules,I=[],P=[],S=0;S<M.length;S++){var E=(_=M[S]).name,R=g.modules[E].categories;if(R.svg){var D=_.layerName||E+"layer",j=_.plot;w=(b=n(a,j))[0],a=b[1],w.length&&I.push({i:T.indexOf(D),className:D,plotMethod:j,cdModule:w}),R.zoomScale&&P.push("."+D)}}I.sort(function(X,Z){return X.i-Z.i});var H=c.plot.selectAll("g.mlayer").data(I,function(X){return X.className});if(H.enter().append("g").attr("class",function(X){return X.className}).classed("mlayer",!0).classed("rangeplot",c.isRangePlot),H.exit().remove(),H.order(),H.each(function(X){var Z=m.select(this),W=X.className;X.plotMethod(p,c,X.cdModule,Z,y,u),-1===l.clipOnAxisFalseQuery.indexOf("."+W)&&e.setClipUrl(Z,c.layerClipId,p)}),C._has("scattergl")&&(_=g.getModule("scattergl"),w=n(a,_)[0],_.plot(p,c,w)),!p._context.staticPlot&&(c._hasClipOnAxisFalse&&(c.clipOnAxisFalseTraces=c.plot.selectAll(l.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var Y=c.plot.selectAll(P.join(",")).selectAll(".trace");c.zoomScalePts=Y.selectAll("path.point"),c.zoomScaleTxt=Y.selectAll(".textpoint")}}function h(p,c){var a=c.plotgroup,y=c.id,u=l.layerValue2layerClass[c.xaxis.layer],_=l.layerValue2layerClass[c.yaxis.layer],b=p._fullLayout._hasOnlyLargeSploms;if(c.mainplot){var w=c.mainplotinfo,T=w.plotgroup,C=y+"-x",M=y+"-y";c.minorGridlayer=w.minorGridlayer,c.gridlayer=w.gridlayer,c.zerolinelayer=w.zerolinelayer,d(w.overlinesBelow,"path",C),d(w.overlinesBelow,"path",M),d(w.overaxesBelow,"g",C),d(w.overaxesBelow,"g",M),c.plot=d(w.overplot,"g",y),d(w.overlinesAbove,"path",C),d(w.overlinesAbove,"path",M),d(w.overaxesAbove,"g",C),d(w.overaxesAbove,"g",M),c.xlines=T.select(".overlines-"+u).select("."+C),c.ylines=T.select(".overlines-"+_).select("."+M),c.xaxislayer=T.select(".overaxes-"+u).select("."+C),c.yaxislayer=T.select(".overaxes-"+_).select("."+M)}else if(b)c.xlines=d(a,"path","xlines-above"),c.ylines=d(a,"path","ylines-above"),c.xaxislayer=d(a,"g","xaxislayer-above"),c.yaxislayer=d(a,"g","yaxislayer-above");else{var I=d(a,"g","layer-subplot");c.shapelayer=d(I,"g","shapelayer"),c.imagelayer=d(I,"g","imagelayer"),c.minorGridlayer=d(a,"g","minor-gridlayer"),c.gridlayer=d(a,"g","gridlayer"),c.zerolinelayer=d(a,"g","zerolinelayer"),d(a,"path","xlines-below"),d(a,"path","ylines-below"),c.overlinesBelow=d(a,"g","overlines-below"),d(a,"g","xaxislayer-below"),d(a,"g","yaxislayer-below"),c.overaxesBelow=d(a,"g","overaxes-below"),c.plot=d(a,"g","plot"),c.overplot=d(a,"g","overplot"),c.xlines=d(a,"path","xlines-above"),c.ylines=d(a,"path","ylines-above"),c.overlinesAbove=d(a,"g","overlines-above"),d(a,"g","xaxislayer-above"),d(a,"g","yaxislayer-above"),c.overaxesAbove=d(a,"g","overaxes-above"),c.xlines=a.select(".xlines-"+u),c.ylines=a.select(".ylines-"+_),c.xaxislayer=a.select(".xaxislayer-"+u),c.yaxislayer=a.select(".yaxislayer-"+_)}b||(f(c.minorGridlayer,"g",c.xaxis._id),f(c.minorGridlayer,"g",c.yaxis._id),c.minorGridlayer.selectAll("g").map(function(P){return P[0]}).sort(i.idSort),f(c.gridlayer,"g",c.xaxis._id),f(c.gridlayer,"g",c.yaxis._id),c.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(i.idSort)),c.xlines.style("fill","none").classed("crisp",!0),c.ylines.style("fill","none").classed("crisp",!0)}function s(p,c){if(p){var a={};for(var y in p.each(function(w){var T=w[0];m.select(this).remove(),o(T,c),a[T]=!0}),c._plots)for(var u=c._plots[y].overlays||[],_=0;_<u.length;_++){var b=u[_];a[b.id]&&b.plot.selectAll(".trace").remove()}}}function o(p,c){c._draggers.selectAll("g."+p).remove(),c._defs.select("#clip"+c._uid+p+"plot").remove()}Q.name="cartesian",Q.attr=["xaxis","yaxis"],Q.idRoot=["x","y"],Q.idRegex=l.idRegex,Q.attrRegex=l.attrRegex,Q.attributes=v("./attributes"),Q.layoutAttributes=v("./layout_attributes"),Q.supplyLayoutDefaults=v("./layout_defaults"),Q.transitionAxes=v("./transition_axes"),Q.finalizeSubplots=function(p,c){var a,y,u,_=c._subplots,b=_.xaxis,w=_.yaxis,T=_.cartesian,C=T.concat(_.gl2d||[]),M={},I={};for(a=0;a<C.length;a++){var P=C[a].split("y");M[P[0]]=1,I["y"+P[1]]=1}for(a=0;a<b.length;a++)M[y=b[a]]||(u=(p[i.id2name(y)]||{}).anchor,l.idRegex.y.test(u)||(u="y"),T.push(y+u),C.push(y+u),I[u]||(I[u]=1,k.pushUnique(w,u)));for(a=0;a<w.length;a++)I[u=w[a]]||(y=(p[i.id2name(u)]||{}).anchor,l.idRegex.x.test(y)||(y="x"),T.push(y+u),C.push(y+u),M[y]||(M[y]=1,k.pushUnique(b,y)));if(!C.length){for(var S in y="",u="",p)l.attrRegex.test(S)&&("x"===S.charAt(0)?(!y||+S.substr(5)<+y.substr(5))&&(y=S):(!u||+S.substr(5)<+u.substr(5))&&(u=S));y=y?i.name2id(y):"x",u=u?i.name2id(u):"y",b.push(y),w.push(u),T.push(y+u)}},Q.plot=function(p,c,a,y){var u,_=p._fullLayout,b=_._subplots.cartesian,w=p.calcdata;if(!Array.isArray(c))for(c=[],u=0;u<w.length;u++)c.push(u);for(u=0;u<b.length;u++){for(var T,C=b[u],M=_._plots[C],I=[],P=0;P<w.length;P++){var S=w[P],E=S[0].trace;E.xaxis+E.yaxis===C&&((-1!==c.indexOf(E.index)||E.carpet)&&(T&&T[0].trace.xaxis+T[0].trace.yaxis===C&&-1!==["tonextx","tonexty","tonext"].indexOf(E.fill)&&-1===I.indexOf(T)&&I.push(T),I.push(S)),T=S)}t(p,M,I,a,y)}},Q.clean=function(p,c,a,y){var u,_,b,w=y._plots||{},T=c._plots||{},C=y._subplots||{};if(y._hasOnlyLargeSploms&&!c._hasOnlyLargeSploms)for(b in w)(u=w[b]).plotgroup&&u.plotgroup.remove();var M=y._has&&y._has("gl"),I=c._has&&c._has("gl");if(M&&!I)for(b in w)(u=w[b])._scene&&u._scene.destroy();if(C.xaxis&&C.yaxis){var P=i.listIds({_fullLayout:y});for(_=0;_<P.length;_++){var S=P[_];c[i.id2name(S)]||y._infolayer.selectAll(".g-"+S+"title").remove()}}var E=y._has&&y._has("cartesian"),R=c._has&&c._has("cartesian");if(E&&!R)s(y._cartesianlayer.selectAll(".subplot"),y),y._defs.selectAll(".axesclip").remove(),delete y._axisConstraintGroups,delete y._axisMatchGroups;else if(C.cartesian)for(_=0;_<C.cartesian.length;_++){var D=C.cartesian[_];T[D]||(y._cartesianlayer.selectAll("."+D+",."+D+"-x,."+D+"-y").remove(),o(D,y))}},Q.drawFramework=function(p){var c=p._fullLayout,a=function(u){var _,b,w,T,C,M,I=u._fullLayout,P=I._subplots.cartesian,S=P.length,E=[],R=[];for(_=0;_<S;_++){var H=(C=(T=I._plots[w=P[_]]).xaxis)._mainAxis._id+(M=T.yaxis)._mainAxis._id,Y=I._plots[H];T.overlays=[],H!==w&&Y?(T.mainplot=H,T.mainplotinfo=Y,R.push(w)):(T.mainplot=void 0,T.mainplotinfo=void 0,E.push(w))}for(_=0;_<R.length;_++)(T=I._plots[w=R[_]]).mainplotinfo.overlays.push(T);var X=E.concat(R),Z=new Array(S);for(_=0;_<S;_++){var W=[w=X[_],(C=(T=I._plots[w]).xaxis).layer,(M=T.yaxis).layer,C.overlaying||"",M.overlaying||""];for(b=0;b<T.overlays.length;b++)W.push(T.overlays[b].id);Z[_]=W}return Z}(p),y=c._cartesianlayer.selectAll(".subplot").data(a,String);y.enter().append("g").attr("class",function(u){return"subplot "+u[0]}),y.order(),y.exit().call(s,c),y.each(function(u){var _=u[0],b=c._plots[_];b.plotgroup=m.select(this),h(p,b),b.draglayer=d(c._draggers,"g",_)})},Q.rangePlot=function(p,c,a){h(p,c),t(p,c,a),x.style(p)},Q.toSVG=function(p){var c=p._fullLayout._glimages,a=m.select(p).selectAll(".svg-container");a.filter(function(y,u){return u===a.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var y=this.toDataURL("image/png");c.append("svg:image").attr({xmlns:r.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},Q.updateFx=v("./graph_interact").updateFx},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../registry":647,"../get_data":602,"../plots":628,"./attributes":564,"./axis_ids":570,"./constants":573,"./graph_interact":576,"./layout_attributes":579,"./layout_defaults":580,"./transition_axes":590,"@plotly/d3":58}],579:[function(v,$,Q){"use strict";var m=v("../font_attributes"),g=v("../../components/color/attributes"),k=v("../../components/drawing/attributes").dash,x=v("../../lib/extend").extendFlat,e=v("../../plot_api/plot_template").templatedArray,n=v("../../plots/cartesian/axis_format_attributes").descriptionWithDates,i=v("../../constants/numerical").ONEDAY,l=v("./constants"),r=l.HOUR_PATTERN,d=l.WEEKDAY_PATTERN,f={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function t(T){return{valType:"integer",min:0,dflt:T?5:0,editType:"ticks"}}var h={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},s={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},o={valType:"data_array",editType:"ticks"},p={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function c(T){var C={valType:"number",min:0,editType:"ticks"};return T||(C.dflt=5),C}function a(T){var C={valType:"number",min:0,editType:"ticks"};return T||(C.dflt=1),C}var y={valType:"color",dflt:g.defaultLine,editType:"ticks"},u={valType:"color",dflt:g.lightLine,editType:"ticks"};function _(T){var C={valType:"number",min:0,editType:"ticks"};return T||(C.dflt=1),C}var b=x({},k,{editType:"ticks"}),w={valType:"boolean",editType:"ticks"};$.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:g.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:m({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,r,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:i},editType:"calc"}),tickmode:f,nticks:t(),tick0:h,dtick:s,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:o,ticktext:{valType:"data_array",editType:"ticks"},ticks:p,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:c(),tickwidth:a(),tickcolor:y,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:x({},k,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:m({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:n("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:n("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:g.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:w,gridcolor:u,gridwidth:_(),griddash:b,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:g.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:g.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},minor:{tickmode:f,nticks:t("minor"),tick0:h,dtick:s,tickvals:o,ticks:p,ticklen:c("minor"),tickwidth:a("minor"),tickcolor:y,gridcolor:u,gridwidth:_("minor"),griddash:b,showgrid:w,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:m({editType:"ticks"})}}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../constants/numerical":491,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../font_attributes":594,"./constants":573}],580:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/color"),k=v("../../components/fx/helpers").isUnifiedHover,x=v("../../components/fx/hovermode_defaults"),e=v("../../plot_api/plot_template"),n=v("../layout_attributes"),i=v("./layout_attributes"),l=v("./type_defaults"),r=v("./axis_defaults"),d=v("./constraints"),f=v("./position_defaults"),t=v("./axis_ids"),h=t.id2name,s=t.name2id,o=v("./constants").AX_ID_PATTERN,p=v("../../registry"),c=p.traceIs,a=p.getComponentMethod;function y(u,_,b){Array.isArray(u[_])?u[_].push(b):u[_]=[b]}$.exports=function(u,_,b){var w,T,C=_.autotypenumbers,M={},I={},P={},S={},E={},R={},D={},j={},H={},Y={};for(w=0;w<b.length;w++){var X=b[w];if(c(X,"cartesian")||c(X,"gl2d")){var Z,W;if(X.xaxis)Z=h(X.xaxis),y(M,Z,X);else if(X.xaxes)for(T=0;T<X.xaxes.length;T++)y(M,h(X.xaxes[T]),X);if(X.yaxis)W=h(X.yaxis),y(M,W,X);else if(X.yaxes)for(T=0;T<X.yaxes.length;T++)y(M,h(X.yaxes[T]),X);"funnel"===X.type?"h"===X.orientation?(Z&&(I[Z]=!0),W&&(D[W]=!0)):W&&(P[W]=!0):"image"===X.type?(W&&(j[W]=!0),Z&&(j[Z]=!0)):(W&&(E[W]=!0,R[W]=!0),c(X,"carpet")&&("carpet"!==X.type||X._cheater)||Z&&(S[Z]=!0)),"carpet"===X.type&&X._cheater&&Z&&(I[Z]=!0),c(X,"2dMap")&&(H[Z]=!0,H[W]=!0),c(X,"oriented")&&(Y["h"===X.orientation?W:Z]=!0)}}var re=_._subplots,U=re.xaxis,B=re.yaxis,V=m.simpleMap(U,h),ee=m.simpleMap(B,h),N=V.concat(ee),K=g.background;U.length&&B.length&&(K=m.coerce(u,_,n,"plot_bgcolor"));var J,te,ae,le,se,ve=g.combine(K,_.paper_bgcolor);function ue(){se._traceIndices=(M[J]||[]).map(function(xt){return xt._expandedIndex}),se._annIndices=[],se._shapeIndices=[],se._selectionIndices=[],se._imgIndices=[],se._subplotsWith=[],se._counterAxes=[],se._name=se._attr=J,se._id=te}function ye(Ke,xt){return m.coerce(le,se,i,Ke,xt)}function Me(Ke,xt){return m.coerce2(le,se,i,Ke,xt)}function pe(Ke){return"x"===Ke?B:U}function ge(Ke,xt){for(var Ht="x"===Ke?V:ee,Zt=[],$t=0;$t<Ht.length;$t++){var Xt=Ht[$t];Xt===xt||(u[Xt]||{}).overlaying||Zt.push(s(Xt))}return Zt}var we={x:pe("x"),y:pe("y")},oe=we.x.concat(we.y),de={},Te=[];function Ee(){var Ke=le.matches;o.test(Ke)&&-1===oe.indexOf(Ke)&&(de[Ke]=le.type,Te=Object.keys(de))}var Ae=x(u,_),De=k(Ae);for(w=0;w<N.length;w++){te=s(J=N[w]),ae=J.charAt(0),m.isPlainObject(u[J])||(u[J]={}),le=u[J],se=e.newContainer(_,J,ae+"axis"),ue();var Xe={hasMinor:!0,letter:ae,font:_.font,outerTicks:H[J],showGrid:!Y[J],data:M[J]||[],bgColor:ve,calendar:_.calendar,automargin:!0,visibleDflt:"x"===ae&&!S[J]&&I[J]||"y"===ae&&!E[J]&&P[J],reverseDflt:"y"===ae&&(!R[J]&&D[J]||j[J]),autotypenumbersDflt:C,splomStash:((_._splomAxes||{})[ae]||{})[te]};ye("uirevision",_.uirevision),l(le,se,ye,Xe),r(le,se,ye,Xe,_);var Fe=De&&ae===Ae.charAt(0),Pe=Me("spikecolor",De?se.color:void 0),Re=Me("spikethickness",De?1.5:void 0),qe=Me("spikedash",De?"dot":void 0),Qe=Me("spikemode",De?"across":void 0),ct=Me("spikesnap");ye("showspikes",!!(Fe||Pe||Re||qe||Qe||ct))||(delete se.spikecolor,delete se.spikethickness,delete se.spikedash,delete se.spikemode,delete se.spikesnap),f(le,se,ye,{letter:ae,counterAxes:we[ae],overlayableAxes:ge(ae,J),grid:_.grid}),ye("title.standoff"),Ee(),se._input=le}for(w=0;w<Te.length;){te=Te[w++],ae=(J=h(te)).charAt(0),m.isPlainObject(u[J])||(u[J]={}),le=u[J],se=e.newContainer(_,J,ae+"axis"),ue();var bt={letter:ae,font:_.font,outerTicks:H[J],showGrid:!Y[J],data:[],bgColor:ve,calendar:_.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:C,splomStash:((_._splomAxes||{})[ae]||{})[te]};ye("uirevision",_.uirevision),se.type=de[te]||"linear",r(le,se,ye,bt,_),f(le,se,ye,{letter:ae,counterAxes:we[ae],overlayableAxes:ge(ae,J),grid:_.grid}),ye("fixedrange"),Ee(),se._input=le}var Tt=a("rangeslider","handleDefaults"),_t=a("rangeselector","handleDefaults");for(w=0;w<V.length;w++)le=u[J=V[w]],se=_[J],Tt(u,_,J),"date"===se.type&&_t(le,se,_,ee,se.calendar),ye("fixedrange");for(w=0;w<ee.length;w++){le=u[J=ee[w]];var nt=_[h((se=_[J]).anchor)];ye("fixedrange",a("rangeslider","isVisible")(nt))}d.handleDefaults(u,_,{axIds:oe.concat(Te).sort(t.idSort),axHasImage:j})}},{"../../components/color":367,"../../components/fx/helpers":403,"../../components/fx/hovermode_defaults":406,"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../layout_attributes":619,"./axis_defaults":568,"./axis_ids":570,"./constants":573,"./constraints":574,"./layout_attributes":579,"./position_defaults":582,"./type_defaults":591}],581:[function(v,$,Q){"use strict";var m=v("tinycolor2").mix,g=v("../../components/color/attributes"),k=v("../../lib");$.exports=function(x,e,n,i){var l=(i=i||{}).dfltColor;function r(u,_){return k.coerce2(x,e,i.attributes,u,_)}var d=r("linecolor",l),f=r("linewidth");n("showline",i.showLine||!!d||!!f)||(delete e.linecolor,delete e.linewidth);var t=r("gridcolor",m(l,i.bgColor,i.blend||g.lightFraction).toRgbString()),h=r("gridwidth"),s=r("griddash");if(n("showgrid",i.showGrid||!!t||!!h||!!s)||(delete e.gridcolor,delete e.gridwidth,delete e.griddash),i.hasMinor){var o=r("minor.gridcolor",m(e.gridcolor,i.bgColor,67).toRgbString()),p=r("minor.gridwidth",e.gridwidth||1),c=r("minor.griddash",e.griddash||"solid");n("minor.showgrid",!!o||!!p||!!c)||(delete e.minor.gridcolor,delete e.minor.gridwidth,delete e.minor.griddash)}if(!i.noZeroLine){var a=r("zerolinecolor",l),y=r("zerolinewidth");n("zeroline",i.showGrid||!!a||!!y)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":366,"../../lib":515,tinycolor2:313}],582:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib");$.exports=function(k,x,e,n){var i,l,r,d,f=n.counterAxes||[],t=n.overlayableAxes||[],h=n.letter,s=n.grid;s&&(i=s._anchors[x._id],(l=s._domains[h][s._axisMap[x._id]])&&(r=s[h+"side"].split(" ")[0],d=s.domain[h]["right"===r||"top"===r?1:0])),l=l||[0,1],i=i||(m(k.position)?"free":f[0]||"free"),r=r||("x"===h?"bottom":"left"),d=d||0,"free"===g.coerce(k,x,{anchor:{valType:"enumerated",values:["free"].concat(f),dflt:i}},"anchor")&&e("position",d),g.coerce(k,x,{side:{valType:"enumerated",values:"x"===h?["bottom","top"]:["left","right"],dflt:r}},"side");var o=!1;if(t.length&&(o=g.coerce(k,x,{overlaying:{valType:"enumerated",values:[!1].concat(t),dflt:!1}},"overlaying")),!o){var p=e("domain",l);p[0]>p[1]-1/4096&&(x.domain=l),g.noneOrAll(k.domain,x.domain,l)}return e("layer"),x}},{"../../lib":515,"fast-isnumeric":190}],583:[function(v,$,Q){"use strict";var m=v("./show_dflt");$.exports=function(g,k,x,e,n){n||(n={});var i=n.tickSuffixDflt,l=m(g);x("tickprefix")&&x("showtickprefix",l),x("ticksuffix",i)&&x("showticksuffix",l)}},{"./show_dflt":586}],584:[function(v,$,Q){"use strict";var m=v("../../constants/alignment").FROM_BL;$.exports=function(g,k,x){void 0===x&&(x=m[g.constraintoward||"center"]);var e=[g.r2l(g.range[0]),g.r2l(g.range[1])],n=e[0]+(e[1]-e[0])*x;g.range=g._input.range=[g.l2r(n+(e[0]-n)*k),g.l2r(n+(e[1]-n)*k)],g.setScale()}},{"../../constants/alignment":483}],585:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("d3-time-format").utcFormat,k=v("../../lib"),x=k.numberFormat,e=v("fast-isnumeric"),n=k.cleanNumber,i=k.ms2DateTime,l=k.dateTime2ms,r=k.ensureNumber,d=k.isArrayOrTypedArray,f=v("../../constants/numerical"),t=f.FP_SAFE,h=f.BADNUM,s=f.LOG_CLIP,o=f.ONEWEEK,p=f.ONEDAY,c=f.ONEHOUR,a=f.ONEMIN,y=f.ONESEC,u=v("./axis_ids"),_=v("./constants"),b=_.HOUR_PATTERN,w=_.WEEKDAY_PATTERN;function T(M){return Math.pow(10,M)}function C(M){return null!=M}$.exports=function(M,I){I=I||{};var P=M._id||"x",S=P.charAt(0);function E(N,K){if(N>0)return Math.log(N)/Math.LN10;if(N<=0&&K&&M.range&&2===M.range.length){var J=M.range[0],te=M.range[1];return.5*(J+te-2*s*Math.abs(J-te))}return h}function R(N,K,J,te){if((te||{}).msUTC&&e(N))return+N;var ae=l(N,J||M.calendar);if(ae===h){if(!e(N))return h;N=+N;var le=Math.floor(10*k.mod(N+.05,1)),se=Math.round(N-le/10);ae=l(new Date(se))+le/10}return ae}function D(N,K,J){return i(N,K,J||M.calendar)}function j(N){return M._categories[Math.round(N)]}function H(N){if(C(N)){if(void 0===M._categoriesMap&&(M._categoriesMap={}),void 0!==M._categoriesMap[N])return M._categoriesMap[N];M._categories.push("number"==typeof N?String(N):N);var K=M._categories.length-1;return M._categoriesMap[N]=K,K}return h}function Y(N){if(M._categoriesMap)return M._categoriesMap[N]}function X(N){var K=Y(N);return void 0!==K?K:e(N)?+N:void 0}function Z(N){return e(N)?+N:Y(N)}function W(N,K,J){return m.round(J+K*N,2)}function re(N,K,J){return(N-J)/K}var U=function(N){return e(N)?W(N,M._m,M._b):h},B=function(N){return re(N,M._m,M._b)};if(M.rangebreaks){var V="y"===S;U=function(N){if(!e(N))return h;var K=M._rangebreaks.length;if(!K)return W(N,M._m,M._b);var J=V;M.range[0]>M.range[1]&&(J=!J);for(var te=J?-1:1,ae=te*N,le=0,se=0;se<K;se++){var ve=te*M._rangebreaks[se].min,ue=te*M._rangebreaks[se].max;if(ae<ve)break;if(!(ae>ue)){le=ae<(ve+ue)/2?se:se+1;break}le=se+1}var ye=M._B[le]||0;return isFinite(ye)?W(N,M._m2,ye):0},B=function(N){var K=M._rangebreaks.length;if(!K)return re(N,M._m,M._b);for(var J=0,te=0;te<K&&!(N<M._rangebreaks[te].pmin);te++)N>M._rangebreaks[te].pmax&&(J=te+1);return re(N,M._m2,M._B[J])}}M.c2l="log"===M.type?E:r,M.l2c="log"===M.type?T:r,M.l2p=U,M.p2l=B,M.c2p="log"===M.type?function(N,K){return U(E(N,K))}:U,M.p2c="log"===M.type?function(N){return T(B(N))}:B,-1!==["linear","-"].indexOf(M.type)?(M.d2r=M.r2d=M.d2c=M.r2c=M.d2l=M.r2l=n,M.c2d=M.c2r=M.l2d=M.l2r=r,M.d2p=M.r2p=function(N){return M.l2p(n(N))},M.p2d=M.p2r=B,M.cleanPos=r):"log"===M.type?(M.d2r=M.d2l=function(N,K){return E(n(N),K)},M.r2d=M.r2c=function(N){return T(n(N))},M.d2c=M.r2l=n,M.c2d=M.l2r=r,M.c2r=E,M.l2d=T,M.d2p=function(N,K){return M.l2p(M.d2r(N,K))},M.p2d=function(N){return T(B(N))},M.r2p=function(N){return M.l2p(n(N))},M.p2r=B,M.cleanPos=r):"date"===M.type?(M.d2r=M.r2d=k.identity,M.d2c=M.r2c=M.d2l=M.r2l=R,M.c2d=M.c2r=M.l2d=M.l2r=D,M.d2p=M.r2p=function(N,K,J){return M.l2p(R(N,0,J))},M.p2d=M.p2r=function(N,K,J){return D(B(N),K,J)},M.cleanPos=function(N){return k.cleanDate(N,h,M.calendar)}):"category"===M.type?(M.d2c=M.d2l=H,M.r2d=M.c2d=M.l2d=j,M.d2r=M.d2l_noadd=X,M.r2c=function(N){var K=Z(N);return void 0!==K?K:M.fraction2r(.5)},M.l2r=M.c2r=r,M.r2l=Z,M.d2p=function(N){return M.l2p(M.r2c(N))},M.p2d=function(N){return j(B(N))},M.r2p=M.d2p,M.p2r=B,M.cleanPos=function(N){return"string"==typeof N&&""!==N?N:r(N)}):"multicategory"===M.type&&(M.r2d=M.c2d=M.l2d=j,M.d2r=M.d2l_noadd=X,M.r2c=function(N){var K=X(N);return void 0!==K?K:M.fraction2r(.5)},M.r2c_just_indices=Y,M.l2r=M.c2r=r,M.r2l=X,M.d2p=function(N){return M.l2p(M.r2c(N))},M.p2d=function(N){return j(B(N))},M.r2p=M.d2p,M.p2r=B,M.cleanPos=function(N){return Array.isArray(N)||"string"==typeof N&&""!==N?N:r(N)},M.setupMultiCategory=function(N){var K,J,te=M._traceIndices,ae=M._matchGroup;if(ae&&0===M._categories.length)for(var le in ae)if(le!==P){var se=I[u.id2name(le)];te=te.concat(se._traceIndices)}var ve=[[0,{}],[0,{}]],ue=[];for(K=0;K<te.length;K++){var ye=N[te[K]];if(S in ye){var Me=ye[S],pe=ye._length||k.minRowLength(Me);if(d(Me[0])&&d(Me[1]))for(J=0;J<pe;J++){var ge=Me[0][J],we=Me[1][J];C(ge)&&C(we)&&(ue.push([ge,we]),ge in ve[0][1]||(ve[0][1][ge]=ve[0][0]++),we in ve[1][1]||(ve[1][1][we]=ve[1][0]++))}}}for(ue.sort(function(oe,de){var Te=ve[0][1],Ee=Te[oe[0]]-Te[de[0]];if(Ee)return Ee;var Ae=ve[1][1];return Ae[oe[1]]-Ae[de[1]]}),K=0;K<ue.length;K++)H(ue[K])}),M.fraction2r=function(N){var K=M.r2l(M.range[0]),J=M.r2l(M.range[1]);return M.l2r(K+N*(J-K))},M.r2fraction=function(N){var K=M.r2l(M.range[0]),J=M.r2l(M.range[1]);return(M.r2l(N)-K)/(J-K)},M.cleanRange=function(N,K){K||(K={}),N||(N="range");var J,te,ae=k.nestedProperty(M,N).get();if(te=(te="date"===M.type?k.dfltRange(M.calendar):"y"===S?_.DFLTRANGEY:"realaxis"===M._name?[0,1]:K.dfltRange||_.DFLTRANGEX).slice(),"tozero"!==M.rangemode&&"nonnegative"!==M.rangemode||(te[0]=0),ae&&2===ae.length)for("date"!==M.type||M.autorange||(ae[0]=k.cleanDate(ae[0],h,M.calendar),ae[1]=k.cleanDate(ae[1],h,M.calendar)),J=0;J<2;J++)if("date"===M.type){if(!k.isDateTime(ae[J],M.calendar)){M[N]=te;break}if(M.r2l(ae[0])===M.r2l(ae[1])){var le=k.constrain(M.r2l(ae[0]),k.MIN_MS+1e3,k.MAX_MS-1e3);ae[0]=M.l2r(le-1e3),ae[1]=M.l2r(le+1e3);break}}else{if(!e(ae[J])){if(!e(ae[1-J])){M[N]=te;break}ae[J]=ae[1-J]*(J?10:.1)}if(ae[J]<-t?ae[J]=-t:ae[J]>t&&(ae[J]=t),ae[0]===ae[1]){var se=Math.max(1,Math.abs(1e-6*ae[0]));ae[0]-=se,ae[1]+=se}}else k.nestedProperty(M,N).set(te)},M.setScale=function(N){var K=I._size;if(M.overlaying){var J=u.getFromId({_fullLayout:I},M.overlaying);M.domain=J.domain}var te=N&&M._r?"_r":"range",ae=M.calendar;M.cleanRange(te);var le,se,ve=M.r2l(M[te][0],ae),ue=M.r2l(M[te][1],ae),ye="y"===S;if(ye?(M._offset=K.t+(1-M.domain[1])*K.h,M._length=K.h*(M.domain[1]-M.domain[0]),M._m=M._length/(ve-ue),M._b=-M._m*ue):(M._offset=K.l+M.domain[0]*K.w,M._length=K.w*(M.domain[1]-M.domain[0]),M._m=M._length/(ue-ve),M._b=-M._m*ve),M._rangebreaks=[],M._lBreaks=0,M._m2=0,M._B=[],M.rangebreaks&&(M._rangebreaks=M.locateBreaks(Math.min(ve,ue),Math.max(ve,ue)),M._rangebreaks.length)){for(le=0;le<M._rangebreaks.length;le++)se=M._rangebreaks[le],M._lBreaks+=Math.abs(se.max-se.min);var Me=ye;ve>ue&&(Me=!Me),Me&&M._rangebreaks.reverse();var pe=Me?-1:1;for(M._m2=pe*M._length/(Math.abs(ue-ve)-M._lBreaks),M._B.push(-M._m2*(ye?ue:ve)),le=0;le<M._rangebreaks.length;le++)M._B.push(M._B[M._B.length-1]-pe*M._m2*((se=M._rangebreaks[le]).max-se.min));for(le=0;le<M._rangebreaks.length;le++)(se=M._rangebreaks[le]).pmin=U(se.min),se.pmax=U(se.max)}if(!isFinite(M._m)||!isFinite(M._b)||M._length<0)throw I._replotting=!1,new Error("Something went wrong with axis scaling")},M.maskBreaks=function(N){var K,J,te,ae,le,se=M.rangebreaks||[];se._cachedPatterns||(se._cachedPatterns=se.map(function(ge){return ge.enabled&&ge.bounds?k.simpleMap(ge.bounds,ge.pattern?n:M.d2c):null})),se._cachedValues||(se._cachedValues=se.map(function(ge){return ge.enabled&&ge.values?k.simpleMap(ge.values,M.d2c).sort(k.sorterAsc):null}));for(var ve=0;ve<se.length;ve++){var ue=se[ve];if(ue.enabled)if(ue.bounds){switch(J=(K=se._cachedPatterns[ve])[0],te=K[1],ue.pattern){case w:ae=(le=new Date(N)).getUTCDay(),J>te&&(te+=7,ae<J&&(ae+=7));break;case b:ae=(le=new Date(N)).getUTCHours()+(le.getUTCMinutes()/60+le.getUTCSeconds()/3600+le.getUTCMilliseconds()/36e5),J>te&&(te+=24,ae<J&&(ae+=24));break;case"":ae=N}if(ae>=J&&ae<te)return h}else for(var Me=se._cachedValues[ve],pe=0;pe<Me.length;pe++)if(te=(J=Me[pe])+ue.dvalue,N>=J&&N<te)return h}return N},M.locateBreaks=function(N,K){var J,te,ae,le,se=[];if(!M.rangebreaks)return se;var ve=M.rangebreaks.slice().sort(function(Ae,De){return Ae.pattern===w&&De.pattern===b?-1:De.pattern===w&&Ae.pattern===b?1:0}),ue=function(Ae,De){if((Ae=k.constrain(Ae,N,K))!==(De=k.constrain(De,N,K))){for(var Ie=!0,Oe=0;Oe<se.length;Oe++){var Xe=se[Oe];Ae<Xe.max&&De>=Xe.min&&(Ae<Xe.min&&(Xe.min=Ae),De>Xe.max&&(Xe.max=De),Ie=!1)}Ie&&se.push({min:Ae,max:De})}};for(J=0;J<ve.length;J++){var ye=ve[J];if(ye.enabled)if(ye.bounds){var Me=N,pe=K;ye.pattern&&(Me=Math.floor(Me)),ae=(te=k.simpleMap(ye.bounds,ye.pattern?n:M.r2l))[0],le=te[1];var ge,we,oe=new Date(Me);switch(ye.pattern){case w:we=o,ge=(le-ae+(le<ae?7:0))*p,Me+=ae*p-(oe.getUTCDay()*p+oe.getUTCHours()*c+oe.getUTCMinutes()*a+oe.getUTCSeconds()*y+oe.getUTCMilliseconds());break;case b:we=p,ge=(le-ae+(le<ae?24:0))*c,Me+=ae*c-(oe.getUTCHours()*c+oe.getUTCMinutes()*a+oe.getUTCSeconds()*y+oe.getUTCMilliseconds());break;default:Me=Math.min(te[0],te[1]),ge=we=(pe=Math.max(te[0],te[1]))-Me}for(var de=Me;de<pe;de+=we)ue(de,de+ge)}else for(var Te=k.simpleMap(ye.values,M.d2c),Ee=0;Ee<Te.length;Ee++)ue(ae=Te[Ee],le=ae+ye.dvalue)}return se.sort(function(Ae,De){return Ae.min-De.min}),se},M.makeCalcdata=function(N,K,J){var te,ae,le,se,ve=M.type,ue="date"===ve&&N[K+"calendar"];if(K in N){if(te=N[K],se=N._length||k.minRowLength(te),k.isTypedArray(te)&&("linear"===ve||"log"===ve)){if(se===te.length)return te;if(te.subarray)return te.subarray(0,se)}if("multicategory"===ve)return function(pe,ge){for(var we=new Array(ge),oe=0;oe<ge;oe++)we[oe]=Y([(pe[0]||[])[oe],(pe[1]||[])[oe]]);return we}(te,se);for(ae=new Array(se),le=0;le<se;le++)ae[le]=M.d2c(te[le],0,ue,J)}else{var ye=K+"0"in N?M.d2c(N[K+"0"],0,ue):0,Me=N["d"+K]?Number(N["d"+K]):1;for(te=N[{x:"y",y:"x"}[K]],se=N._length||te.length,ae=new Array(se),le=0;le<se;le++)ae[le]=ye+le*Me}if(M.rangebreaks)for(le=0;le<se;le++)ae[le]=M.maskBreaks(ae[le]);return ae},M.isValidRange=function(N){return Array.isArray(N)&&2===N.length&&e(M.r2l(N[0]))&&e(M.r2l(N[1]))},M.isPtWithinRange=function(N,K){var J=M.c2l(N[S],null,K),te=M.r2l(M.range[0]),ae=M.r2l(M.range[1]);return te<ae?te<=J&&J<=ae:ae<=J&&J<=te},M._emptyCategories=function(){M._categories=[],M._categoriesMap={}},M.clearCalc=function(){var N=M._matchGroup;if(N){var K=null,J=null;for(var te in N){var ae=I[u.id2name(te)];if(ae._categories){K=ae._categories,J=ae._categoriesMap;break}}K&&J?(M._categories=K,M._categoriesMap=J):M._emptyCategories()}else M._emptyCategories();if(M._initialCategories)for(var le=0;le<M._initialCategories.length;le++)H(M._initialCategories[le])},M.sortByInitialCategories=function(){var N=[];if(M._emptyCategories(),M._initialCategories)for(var K=0;K<M._initialCategories.length;K++)H(M._initialCategories[K]);N=N.concat(M._traceIndices);var J=M._matchGroup;for(var te in J)if(P!==te){var ae=I[u.id2name(te)];ae._categories=M._categories,ae._categoriesMap=M._categoriesMap,N=N.concat(ae._traceIndices)}return N};var ee=I._d3locale;"date"===M.type&&(M._dateFormat=ee?ee.timeFormat:g,M._extraFormat=I._extraFormat),M._separators=I.separators,M._numFormat=ee?ee.numberFormat:x,delete M._minDtick,delete M._forceTick0}},{"../../constants/numerical":491,"../../lib":515,"./axis_ids":570,"./constants":573,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],586:[function(v,$,Q){"use strict";$.exports=function(m){var g=["showexponent","showtickprefix","showticksuffix"].filter(function(k){return void 0!==m[k]});if(g.every(function(k){return m[k]===m[g[0]]})||1===g.length)return m[g[0]]}},{}],587:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/color").contrast,k=v("./layout_attributes"),x=v("./show_dflt"),e=v("../array_container_defaults");function n(i,l){function r(d,f){return m.coerce(i,l,k.tickformatstops,d,f)}r("enabled")&&(r("dtickrange"),r("value"))}$.exports=function(i,l,r,d,f){f||(f={});var t=x(i);if(r("showticklabels")){var h=f.font||{},s=l.color,o=-1!==(l.ticklabelposition||"").indexOf("inside")?g(f.bgColor):s&&s!==k.color.dflt?s:h.color;if(m.coerceFont(r,"tickfont",{family:h.family,size:h.size,color:o}),f.noTicklabelstep||"multicategory"===d||"log"===d||r("ticklabelstep"),f.noAng||r("tickangle"),"category"!==d){var p=r("tickformat");e(i,l,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:n}),l.tickformatstops.length||delete l.tickformatstops,f.noExp||p||"date"===d||(r("showexponent",t),r("exponentformat"),r("minexponent"),r("separatethousands"))}}}},{"../../components/color":367,"../../lib":515,"../array_container_defaults":561,"./layout_attributes":579,"./show_dflt":586}],588:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./layout_attributes");$.exports=function(k,x,e,n){var i=n.isMinor,l=i?k.minor||{}:k,r=i?x.minor:x,d=i?g.minor:g,f=i?"minor.":"",t=m.coerce2(l,r,d,"ticklen",i?.6*(x.ticklen||5):void 0),h=m.coerce2(l,r,d,"tickwidth",i?x.tickwidth||1:void 0),s=m.coerce2(l,r,d,"tickcolor",(i?x.tickcolor:void 0)||r.color);e(f+"ticks",!i&&n.outerTicks||t||h||s?"outside":"")||(delete r.ticklen,delete r.tickwidth,delete r.tickcolor)}},{"../../lib":515,"./layout_attributes":579}],589:[function(v,$,Q){"use strict";var m=v("./clean_ticks"),g=v("../../lib").isArrayOrTypedArray;$.exports=function(k,x,e,n,i){i||(i={});var l=i.isMinor,r=l?k.minor||{}:k,d=l?x.minor:x,f=l?"minor.":"";function t(a){var y=r[a];return void 0!==y?y:(d._template||{})[a]}var h=t("tick0"),s=t("dtick"),o=t("tickvals"),p=e(f+"tickmode",g(o)?"array":s?"linear":"auto");if("auto"===p)e(f+"nticks");else if("linear"===p){var c=d.dtick=m.dtick(s,n);d.tick0=m.tick0(h,n,x.calendar,c)}else"multicategory"!==n&&(void 0===e(f+"tickvals")?d.tickmode="auto":l||e("ticktext"))}},{"../../lib":515,"./clean_ticks":572}],590:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../registry"),k=v("../../lib"),x=v("../../components/drawing"),e=v("./axes");$.exports=function(n,i,l,r){var d=n._fullLayout;if(0!==i.length){var f,t,h,s;r&&(f=r());var o=m.ease(l.easing);return n._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(s),s=null,function(){for(var a={},y=0;y<i.length;y++){var u=i[y],b=u.plotinfo.yaxis;u.xr0&&(a[u.plotinfo.xaxis._name+".range"]=u.xr0.slice()),u.yr0&&(a[b._name+".range"]=u.yr0.slice())}return g.call("relayout",n,a).then(function(){for(var w=0;w<i.length;w++)p(i[w].plotinfo)})}()}),t=Date.now(),s=window.requestAnimationFrame(function a(){h=Date.now();for(var y=Math.min(1,(h-t)/l.duration),u=o(y),_=0;_<i.length;_++)c(i[_],u);h-t>l.duration?(function(){for(var b={},w=0;w<i.length;w++){var T=i[w],M=T.plotinfo.yaxis;T.xr1&&(b[T.plotinfo.xaxis._name+".range"]=T.xr1.slice()),T.yr1&&(b[M._name+".range"]=T.yr1.slice())}f&&f(),g.call("relayout",n,b).then(function(){for(var I=0;I<i.length;I++)p(i[I].plotinfo)})}(),s=window.cancelAnimationFrame(a)):s=window.requestAnimationFrame(a)}),Promise.resolve()}function p(a){var y=a.xaxis,u=a.yaxis;d._defs.select("#"+a.clipId+"> rect").call(x.setTranslate,0,0).call(x.setScale,1,1),a.plot.call(x.setTranslate,y._offset,u._offset).call(x.setScale,1,1);var _=a.plot.selectAll(".scatterlayer .trace");_.selectAll(".point").call(x.setPointGroupScale,1,1),_.selectAll(".textpoint").call(x.setTextPointsScale,1,1),_.call(x.hideOutsideRangePoints,a)}function c(a,y){var u=a.plotinfo,_=u.xaxis,b=u.yaxis,w=_._length,T=b._length,C=!!a.xr1,M=!!a.yr1,I=[];if(C){var P=k.simpleMap(a.xr0,_.r2l),S=k.simpleMap(a.xr1,_.r2l),E=P[1]-P[0],R=S[1]-S[0];I[0]=(P[0]*(1-y)+y*S[0]-P[0])/(P[1]-P[0])*w,I[2]=w*(1-y+y*R/E),_.range[0]=_.l2r(P[0]*(1-y)+y*S[0]),_.range[1]=_.l2r(P[1]*(1-y)+y*S[1])}else I[0]=0,I[2]=w;if(M){var D=k.simpleMap(a.yr0,b.r2l),j=k.simpleMap(a.yr1,b.r2l),H=D[1]-D[0],Y=j[1]-j[0];I[1]=(D[1]*(1-y)+y*j[1]-D[1])/(D[0]-D[1])*T,I[3]=T*(1-y+y*Y/H),b.range[0]=_.l2r(D[0]*(1-y)+y*j[0]),b.range[1]=b.l2r(D[1]*(1-y)+y*j[1])}else I[1]=0,I[3]=T;e.drawOne(n,_,{skipTitle:!0}),e.drawOne(n,b,{skipTitle:!0}),e.redrawComponents(n,[_._id,b._id]);var X=C?w/I[2]:1,Z=M?T/I[3]:1,V=_._offset-(C?I[0]/I[2]*w:0),ee=b._offset-(M?I[1]/I[3]*T:0);u.clipRect.call(x.setTranslate,C?I[0]:0,M?I[1]:0).call(x.setScale,1/X,1/Z),u.plot.call(x.setTranslate,V,ee).call(x.setScale,X,Z),x.setPointGroupScale(u.zoomScalePts,1/X,1/Z),x.setTextPointsScale(u.zoomScaleTxt,1/X,1/Z)}e.redrawComponents(n)}},{"../../components/drawing":389,"../../lib":515,"../../registry":647,"./axes":566,"@plotly/d3":58}],591:[function(v,$,Q){"use strict";var m=v("../../registry").traceIs,g=v("./axis_autotype");function k(e){return{v:"x",h:"y"}[e.orientation||"v"]}function x(e,n){var i=k(e),l=m(e,"box-violin"),r=m(e._fullInput||{},"candlestick");return l&&!r&&n===i&&void 0===e[i]&&void 0===e[i+"0"]}$.exports=function(e,n,i,l){i("autotypenumbers",l.autotypenumbersDflt),"-"===i("type",(l.splomStash||{}).type)&&(function(r,d){if("-"===r.type){var f,t=r._id,h=t.charAt(0);-1!==t.indexOf("scene")&&(t=h);var s=function(b,w,T){for(var C=0;C<b.length;C++){var M=b[C];if("splom"===M.type&&M._length>0&&(M["_"+T+"axes"]||{})[w]||(M[T+"axis"]||T)===w&&(x(M,T)||(M[T]||[]).length||M[T+"0"]))return M}}(d,t,h);if(s){if("histogram"===s.type&&h==={v:"y",h:"x"}[s.orientation||"v"])return void(r.type="linear");var o=h+"calendar",p=s[o],c={noMultiCategory:!m(s,"cartesian")||m(s,"noMultiCategory")};if("box"===s.type&&s._hasPreCompStats&&h==={h:"x",v:"y"}[s.orientation||"v"]&&(c.noMultiCategory=!0),c.autotypenumbers=r.autotypenumbers,x(s,h)){var a=k(s),y=[];for(f=0;f<d.length;f++){var u=d[f];m(u,"box-violin")&&(u[h+"axis"]||h)===t&&(y.push(void 0!==u[a]?u[a][0]:void 0!==u.name?u.name:"text"),u[o]!==p&&(p=void 0))}r.type=g(y,p,c)}else if("splom"===s.type){var _=s.dimensions[s._axesDim[t]];_.visible&&(r.type=g(_.values,p,c))}else r.type=g(s[h]||[s[h+"0"]],p,c)}}}(n,l.data),"-"===n.type?n.type="linear":e.type=n.type)}},{"../../registry":647,"./axis_autotype":567}],592:[function(v,$,Q){"use strict";var m=v("../registry"),g=v("../lib");function k(i,l,r){var d,f,t,h=!1;if("data"===l.type)d=i._fullData[null!==l.traces?l.traces[0]:0];else{if("layout"!==l.type)return!1;d=i._fullLayout}return f=g.nestedProperty(d,l.prop).get(),(t=r[l.type]=r[l.type]||{}).hasOwnProperty(l.prop)&&t[l.prop]!==f&&(h=!0),t[l.prop]=f,{changed:h,value:f}}function x(i,l){var r=[],d=l[0],f={};if("string"==typeof d)f[d]=l[1];else{if(!g.isPlainObject(d))return r;f=d}return n(f,function(t,h,s){r.push({type:"layout",prop:t,value:s})},"",0),r}function e(i,l){var r,d,f,t,h=[];if(f=l[1],r=l[2],t={},"string"==typeof(d=l[0]))t[d]=f;else{if(!g.isPlainObject(d))return h;t=d,void 0===r&&(r=f)}return void 0===r&&(r=null),n(t,function(s,o,p){var c,a;if(Array.isArray(p)){a=p.slice();var y=Math.min(a.length,i.data.length);r&&(y=Math.min(y,r.length)),c=[];for(var u=0;u<y;u++)c[u]=r?r[u]:u}else a=p,c=r?r.slice():null;if(null===c)Array.isArray(a)&&(a=a[0]);else if(Array.isArray(c)){if(!Array.isArray(a)){var _=a;a=[];for(var b=0;b<c.length;b++)a[b]=_}a.length=Math.min(c.length,a.length)}h.push({type:"data",prop:s,traces:c,value:a})},"",0),h}function n(i,l,r,d){Object.keys(i).forEach(function(f){var t=i[f];if("_"!==f[0]){var h=r+(d>0?".":"")+f;g.isPlainObject(t)?n(t,l,h,d+1):l(h,f,t)}})}Q.manageCommandObserver=function(i,l,r,d){var f={},t=!0;l&&l._commandObserver&&(f=l._commandObserver),f.cache||(f.cache={}),f.lookupTable={};var h=Q.hasSimpleAPICommandBindings(i,r,f.lookupTable);if(l&&l._commandObserver){if(h)return f;if(l._commandObserver.remove)return l._commandObserver.remove(),l._commandObserver=null,f}if(h){k(i,h,f.cache),f.check=function(){if(t){var p=k(i,h,f.cache);return p.changed&&d&&void 0!==f.lookupTable[p.value]&&(f.disable(),Promise.resolve(d({value:p.value,type:h.type,prop:h.prop,traces:h.traces,index:f.lookupTable[p.value]})).then(f.enable,f.enable)),p.changed}};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],o=0;o<s.length;o++)i._internalOn(s[o],f.check);f.remove=function(){for(var p=0;p<s.length;p++)i._removeInternalListener(s[p],f.check)}}else g.log("Unable to automatically bind plot updates to API command"),f.lookupTable={},f.remove=function(){};return f.disable=function(){t=!1},f.enable=function(){t=!0},l&&(l._commandObserver=f),f},Q.hasSimpleAPICommandBindings=function(i,l,r){var d,f,t=l.length;for(d=0;d<t;d++){var h,s=l[d],o=s.method,p=s.args;if(Array.isArray(p)||(p=[]),!o)return!1;var c=Q.computeAPICommandBindings(i,o,p);if(1!==c.length)return!1;if(f){if((h=c[0]).type!==f.type||h.prop!==f.prop)return!1;if(Array.isArray(f.traces)){if(!Array.isArray(h.traces))return!1;h.traces.sort();for(var a=0;a<f.traces.length;a++)if(f.traces[a]!==h.traces[a])return!1}else if(h.prop!==f.prop)return!1}else f=c[0],Array.isArray(f.traces)&&f.traces.sort();var y=(h=c[0]).value;if(Array.isArray(y)){if(1!==y.length)return!1;y=y[0]}r&&(r[y]=d)}return f},Q.executeAPICommand=function(i,l,r){if("skip"===l)return Promise.resolve();var d=m.apiMethodRegistry[l],f=[i];Array.isArray(r)||(r=[]);for(var t=0;t<r.length;t++)f.push(r[t]);return d.apply(null,f).catch(function(h){return g.warn("API call to Plotly."+l+" rejected.",h),Promise.reject(h)})},Q.computeAPICommandBindings=function(i,l,r){var d,t;switch(Array.isArray(r)||(r=[]),l){case"restyle":d=e(i,r);break;case"relayout":d=x(0,r);break;case"update":d=e(i,[r[0],r[2]]).concat(x(0,[r[1]]));break;case"animate":t=r,d=Array.isArray(t[0])&&1===t[0].length&&-1!==["string","number"].indexOf(typeof t[0][0])?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[];break;default:d=[]}return d}},{"../lib":515,"../registry":647}],593:[function(v,$,Q){"use strict";var m=v("../lib/extend").extendFlat;Q.attributes=function(g,k){k=k||{};var x={valType:"info_array",editType:(g=g||{}).editType,items:[{valType:"number",min:0,max:1,editType:g.editType},{valType:"number",min:0,max:1,editType:g.editType}],dflt:[0,1]},e={x:m({},x,{}),y:m({},x,{}),editType:g.editType};return g.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:g.editType},e.column={valType:"integer",min:0,dflt:0,editType:g.editType}),e},Q.defaults=function(g,k,x,e){var n=e&&e.x||[0,1],i=e&&e.y||[0,1],l=k.grid;if(l){var r=x("domain.column");void 0!==r&&(r<l.columns?n=l._domains.x[r]:delete g.domain.column);var d=x("domain.row");void 0!==d&&(d<l.rows?i=l._domains.y[d]:delete g.domain.row)}var f=x("domain.x",n),t=x("domain.y",i);f[0]<f[1]||(g.domain.x=n.slice()),t[0]<t[1]||(g.domain.y=i.slice())}},{"../lib/extend":505}],594:[function(v,$,Q){"use strict";$.exports=function(m){var g=m.editType,k=m.colorEditType;void 0===k&&(k=g);var x={family:{valType:"string",noBlank:!0,strict:!0,editType:g},size:{valType:"number",min:1,editType:g},color:{valType:"color",editType:k},editType:g};return m.autoSize&&(x.size.dflt="auto"),m.autoColor&&(x.color.dflt="auto"),m.arrayOk&&(x.family.arrayOk=!0,x.size.arrayOk=!0,x.color.arrayOk=!0),x}},{}],595:[function(v,$,Q){"use strict";$.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],596:[function(v,$,Q){"use strict";Q.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},Q.axesNames=["lonaxis","lataxis"],Q.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},Q.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},Q.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},Q.clipPad=.001,Q.precision=.1,Q.landColor="#F0DC82",Q.waterColor="#3399FF",Q.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},Q.sphereSVG={type:"Sphere"},Q.fillLayers={ocean:1,land:1,lakes:1},Q.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},Q.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],Q.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],Q.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],597:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("d3-geo"),k=g.geoPath,x=g.geoDistance,e=v("d3-geo-projection"),n=v("../../registry"),i=v("../../lib"),l=i.strTranslate,r=v("../../components/color"),d=v("../../components/drawing"),f=v("../../components/fx"),t=v("../plots"),h=v("../cartesian/axes"),s=v("../cartesian/autorange").getAutoRange,o=v("../../components/dragelement"),p=v("../../components/selections").prepSelect,c=v("../../components/selections").clearOutline,a=v("../../components/selections").selectOnClick,y=v("./zoom"),u=v("./constants"),_=v("../../lib/geo_location_utils"),b=v("../../lib/topojson_utils"),w=v("topojson-client").feature;function T(I){this.id=I.id,this.graphDiv=I.graphDiv,this.container=I.container,this.topojsonURL=I.topojsonURL,this.isStatic=I.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var C=T.prototype;function M(I,P){var S=u.clipPad,E=I[0]+S,R=I[1]-S,D=P[0]+S,j=P[1]-S;E>0&&R<0&&(R+=360);var H=(R-E)/4;return{type:"Polygon",coordinates:[[[E,D],[E,j],[E+H,j],[E+2*H,j],[E+3*H,j],[R,j],[R,D],[R-H,D],[R-2*H,D],[R-3*H,D],[E,D]]]}}$.exports=function(I){return new T(I)},C.plot=function(I,P,S,E){var R=this;if(E)return R.update(I,P,!0);R._geoCalcData=I,R._fullLayout=P;var D=P[this.id],j=[],H=!1;for(var Y in u.layerNameToAdjective)if("frame"!==Y&&D["show"+Y]){H=!0;break}for(var X=!1,Z=0;Z<I.length;Z++){var W=I[0][0].trace;W._geo=R,W.locationmode&&(H=!0);var re=W.marker;if(re){var B=re.angleref;(re.angle||"north"===B||"previous"===B)&&(X=!0)}}if(this._hasMarkerAngles=X,H){var V=b.getTopojsonName(D);null!==R.topojson&&V===R.topojsonName||(R.topojsonName=V,void 0===PlotlyGeoAssets.topojson[R.topojsonName]&&j.push(R.fetchTopojson()))}j=j.concat(_.fetchTraceGeoData(I)),S.push(new Promise(function(ee,N){Promise.all(j).then(function(){R.topojson=PlotlyGeoAssets.topojson[R.topojsonName],R.update(I,P),ee()}).catch(N)}))},C.fetchTopojson=function(){var I=this,P=b.getTopojsonPath(I.topojsonURL,I.topojsonName);return new Promise(function(S,E){m.json(P,function(R,D){if(R)return E(404===R.status?new Error(["plotly.js could not find topojson file at",P+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",P].join(" ")));PlotlyGeoAssets.topojson[I.topojsonName]=D,S()})})},C.update=function(I,P,S){var E=P[this.id];this.hasChoropleth=!1;for(var R=0;R<I.length;R++){var D=I[R],j=D[0].trace;"choropleth"===j.type&&(this.hasChoropleth=!0),!0===j.visible&&j._length>0&&j._module.calcGeoJSON(D,P)}if(!S){if(this.updateProjection(I,P))return;this.viewInitial&&this.scope===E.scope||this.saveViewInitial(E)}this.scope=E.scope,this.updateBaseLayers(P,E),this.updateDims(P,E),this.updateFx(P,E),t.generalUpdatePerTraceModule(this.graphDiv,this,I,E);var H=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=H.selectAll(".point"),this.dataPoints.text=H.selectAll("text"),this.dataPaths.line=H.selectAll(".js-line");var Y=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Y.selectAll("path"),this._render()},C.updateProjection=function(I,P){var S=this.graphDiv,E=P[this.id],R=P._size,D=E.domain,j=E.projection,H=E.lonaxis,Y=E.lataxis,X=H._ax,Z=Y._ax,W=this.projection=function(oe){var de=oe.projection,Te=de.type,Ee=u.projNames[Te];Ee="geo"+i.titleCase(Ee);for(var Ae=(g[Ee]||e[Ee])(),De=oe._isSatellite?180*Math.acos(1/de.distance)/Math.PI:oe._isClipped?u.lonaxisSpan[Te]/2:null,Ie=["center","rotate","parallels","clipExtent"],Oe=function(Pe){return Pe?Ae:[]},Xe=0;Xe<Ie.length;Xe++){var Fe=Ie[Xe];"function"!=typeof Ae[Fe]&&(Ae[Fe]=Oe)}return Ae.isLonLatOverEdges=function(Pe){if(null===Ae(Pe))return!0;if(De){var Re=Ae.rotate();return x(Pe,[-Re[0],-Re[1]])>De*Math.PI/180}return!1},Ae.getPath=function(){return k().projection(Ae)},Ae.getBounds=function(Pe){return Ae.getPath().bounds(Pe)},Ae.precision(u.precision),oe._isSatellite&&Ae.tilt(de.tilt).distance(de.distance),De&&Ae.clipAngle(De-u.clipPad),Ae}(E),re=[[R.l+R.w*D.x[0],R.t+R.h*(1-D.y[1])],[R.l+R.w*D.x[1],R.t+R.h*(1-D.y[0])]],U=E.center||{},B=j.rotation||{},V=H.range||[],ee=Y.range||[];if(E.fitbounds){X._length=re[1][0]-re[0][0],Z._length=re[1][1]-re[0][1],X.range=s(S,X),Z.range=s(S,Z);var N=(X.range[0]+X.range[1])/2,K=(Z.range[0]+Z.range[1])/2;if(E._isScoped)U={lon:N,lat:K};else if(E._isClipped){U={lon:N,lat:K},B={lon:N,lat:K,roll:B.roll};var J=j.type,te=u.lonaxisSpan[J]/2||180,ae=u.lataxisSpan[J]/2||90;V=[N-te,N+te],ee=[K-ae,K+ae]}else U={lon:N,lat:K},B={lon:N,lat:B.lat,roll:B.roll}}W.center([U.lon-B.lon,U.lat-B.lat]).rotate([-B.lon,-B.lat,B.roll]).parallels(j.parallels);var le=M(V,ee);W.fitExtent(re,le);var se=this.bounds=W.getBounds(le),ve=this.fitScale=W.scale(),ue=W.translate();if(E.fitbounds){var ye=W.getBounds(M(X.range,Z.range)),Me=Math.min((se[1][0]-se[0][0])/(ye[1][0]-ye[0][0]),(se[1][1]-se[0][1])/(ye[1][1]-ye[0][1]));isFinite(Me)?W.scale(Me*ve):i.warn("Something went wrong during"+this.id+"fitbounds computations.")}else W.scale(j.scale*ve);var pe=this.midPt=[(se[0][0]+se[1][0])/2,(se[0][1]+se[1][1])/2];if(W.translate([ue[0]+(pe[0]-ue[0]),ue[1]+(pe[1]-ue[1])]).clipExtent(se),E._isAlbersUsa){var ge=W([U.lon,U.lat]),we=W.translate();W.translate([we[0]-(ge[0]-we[0]),we[1]-(ge[1]-we[1])])}},C.updateBaseLayers=function(I,P){var S=this,E=S.topojson,R=S.layers,D=S.basePaths;function j(W){return"lonaxis"===W||"lataxis"===W}function H(W){return Boolean(u.lineLayers[W])}function Y(W){return Boolean(u.fillLayers[W])}var X=(this.hasChoropleth?u.layersForChoropleth:u.layers).filter(function(W){return H(W)||Y(W)?P["show"+W]:!j(W)||P[W].showgrid}),Z=S.framework.selectAll(".layer").data(X,String);Z.exit().each(function(W){delete R[W],delete D[W],m.select(this).remove()}),Z.enter().append("g").attr("class",function(W){return"layer "+W}).each(function(W){var re=R[W]=m.select(this);"bg"===W?S.bgRect=re.append("rect").style("pointer-events","all"):j(W)?D[W]=re.append("path").style("fill","none"):"backplot"===W?re.append("g").classed("choroplethlayer",!0):"frontplot"===W?re.append("g").classed("scatterlayer",!0):H(W)?D[W]=re.append("path").style("fill","none").style("stroke-miterlimit",2):Y(W)&&(D[W]=re.append("path").style("stroke","none"))}),Z.order(),Z.each(function(W){var re=D[W],U=u.layerNameToAdjective[W];"frame"===W?re.datum(u.sphereSVG):H(W)||Y(W)?re.datum(w(E,E.objects[W])):j(W)&&re.datum(function(B,V,ee){var N,K,J,te=V[B],ae=u.scopeDefaults[V.scope];"lonaxis"===B?(N=ae.lonaxisRange,K=ae.lataxisRange,J=function(we,oe){return[we,oe]}):"lataxis"===B&&(N=ae.lataxisRange,K=ae.lonaxisRange,J=function(we,oe){return[oe,we]});var le={type:"linear",range:[N[0],N[1]-1e-6],tick0:te.tick0,dtick:te.dtick};h.setConvert(le,ee);var se=h.calcTicks(le);V.isScoped||"lonaxis"!==B||se.pop();for(var ve=se.length,ue=new Array(ve),ye=0;ye<ve;ye++)for(var Me=se[ye].x,pe=ue[ye]=[],ge=K[0];ge<K[1]+2.5;ge+=2.5)pe.push(J(Me,ge));return{type:"MultiLineString",coordinates:ue}}(W,P,I)).call(r.stroke,P[W].gridcolor).call(d.dashLine,P[W].griddash,P[W].gridwidth),H(W)?re.call(r.stroke,P[U+"color"]).call(d.dashLine,"",P[U+"width"]):Y(W)&&re.call(r.fill,P[U+"color"])})},C.updateDims=function(I,P){var S=this.bounds,E=(P.framewidth||0)/2,R=S[0][0]-E,D=S[0][1]-E,j=S[1][0]-R+E,H=S[1][1]-D+E;d.setRect(this.clipRect,R,D,j,H),this.bgRect.call(d.setRect,R,D,j,H).call(r.fill,P.bgcolor),this.xaxis._offset=R,this.xaxis._length=j,this.yaxis._offset=D,this.yaxis._length=H},C.updateFx=function(I,P){var S=this,E=S.graphDiv,R=S.bgRect,D=I.dragmode,j=I.clickmode;if(!S.isStatic){var H={element:S.bgRect.node(),gd:E,plotinfo:{id:S.id,xaxis:S.xaxis,yaxis:S.yaxis,fillRangeItems:function(X,Z){Z.isRect?(X.range={})[S.id]=[Y([Z.xmin,Z.ymin]),Y([Z.xmax,Z.ymax])]:(X.lassoPoints={})[S.id]=Z.map(Y)}},xaxes:[S.xaxis],yaxes:[S.yaxis],subplot:S.id,clickFn:function(X){2===X&&c(E)}};"pan"===D?(R.node().onmousedown=null,R.call(y(S,P)),R.on("dblclick.zoom",function(){var X=S.viewInitial,Z={};for(var W in X)Z[S.id+"."+W]=X[W];n.call("_guiRelayout",E,Z),E.emit("plotly_doubleclick",null)}),E._context._scrollZoom.geo||R.on("wheel.zoom",null)):"select"!==D&&"lasso"!==D||(R.on(".zoom",null),H.prepFn=function(X,Z,W){p(X,Z,W,H,D)},o.init(H)),R.on("mousemove",function(){var X=S.projection.invert(i.getPositionFromD3Event());if(!X)return o.unhover(E,m.event);S.xaxis.p2c=function(){return X[0]},S.yaxis.p2c=function(){return X[1]},f.hover(E,m.event,S.id)}),R.on("mouseout",function(){E._dragging||o.unhover(E,m.event)}),R.on("click",function(){"select"!==D&&"lasso"!==D&&(j.indexOf("select")>-1&&a(m.event,E,[S.xaxis],[S.yaxis],S.id,H),j.indexOf("event")>-1&&f.click(E,m.event))})}function Y(X){return S.projection.invert([X[0]+S.xaxis._offset,X[1]+S.yaxis._offset])}},C.makeFramework=function(){var I=this,P=I.graphDiv,S=P._fullLayout,E="clip"+S._uid+I.id;I.clipDef=S._clips.append("clipPath").attr("id",E),I.clipRect=I.clipDef.append("rect"),I.framework=m.select(I.container).append("g").attr("class","geo "+I.id).call(d.setClipUrl,E,P),I.project=function(R){var D=I.projection(R);return D?[D[0]-I.xaxis._offset,D[1]-I.yaxis._offset]:[null,null]},I.xaxis={_id:"x",c2p:function(R){return I.project(R)[0]}},I.yaxis={_id:"y",c2p:function(R){return I.project(R)[1]}},I.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},h.setConvert(I.mockAxis,S)},C.saveViewInitial=function(I){var S=I.center||{},E=I.projection,R=E.rotation||{};this.viewInitial={fitbounds:I.fitbounds,"projection.scale":E.scale},i.extendFlat(this.viewInitial,I._isScoped?{"center.lon":S.lon,"center.lat":S.lat}:I._isClipped?{"projection.rotation.lon":R.lon,"projection.rotation.lat":R.lat}:{"center.lon":S.lon,"center.lat":S.lat,"projection.rotation.lon":R.lon})},C.render=function(I){this._hasMarkerAngles&&I?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},C._render=function(){var I,P=this.projection,S=P.getPath();function E(D){var j=P(D.lonlat);return j?l(j[0],j[1]):null}function R(D){return P.isLonLatOverEdges(D.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",S);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(D){return S(D.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",R).attr("transform",E)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../registry":647,"../cartesian/autorange":565,"../cartesian/axes":566,"../plots":628,"./constants":596,"./zoom":601,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":316}],598:[function(v,$,Q){"use strict";var m=v("../../plots/get_data").getSubplotCalcData,g=v("../../lib").counterRegex,k=v("./geo"),x="geo",e=g(x),n={};n.geo={valType:"subplotid",dflt:x,editType:"calc"},$.exports={attr:x,name:x,idRoot:x,idRegex:e,attrRegex:e,attributes:n,layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),plot:function(i){for(var l=i._fullLayout,r=i.calcdata,d=l._subplots.geo,f=0;f<d.length;f++){var t=d[f],h=m(r,x,t),s=l[t]._subplot;s||(s=k({id:t,graphDiv:i,container:l._geolayer.node(),topojsonURL:i._context.topojsonURL,staticPlot:i._context.staticPlot}),l[t]._subplot=s),s.plot(h,l,i._promises)}},updateFx:function(i){for(var l=i._fullLayout,r=l._subplots.geo,d=0;d<r.length;d++){var f=l[r[d]];f._subplot.updateFx(l,f)}},clean:function(i,l,r,d){for(var f=d._subplots.geo||[],t=0;t<f.length;t++){var h=f[t],s=d[h]._subplot;!l[h]&&s&&(s.framework.remove(),s.clipDef.remove())}}}},{"../../lib":515,"../../plots/get_data":602,"./geo":597,"./layout_attributes":599,"./layout_defaults":600}],599:[function(v,$,Q){"use strict";var m=v("../../components/color/attributes"),g=v("../domain").attributes,k=v("../../components/drawing/attributes").dash,x=v("./constants"),e=v("../../plot_api/edit_types").overrideAll,n=v("../../lib/sort_object_keys"),i={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:m.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:k};($.exports=e({domain:g({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:n(x.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:n(x.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:m.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:x.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:x.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:x.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:x.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:m.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:m.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:m.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:m.background},lonaxis:i,lataxis:i},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../domain":593,"./constants":596}],600:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../subplot_defaults"),k=v("../get_data").getSubplotData,x=v("./constants"),e=v("./layout_attributes"),n=x.axesNames;function i(l,r,d,f){var t=k(f.fullData,"geo",f.id).map(function(B){return B._expandedIndex}),h=d("resolution"),s=d("scope"),o=x.scopeDefaults[s],p=d("projection.type",o.projType),c=r._isAlbersUsa="albers usa"===p;c&&(s=r.scope="usa");var a=r._isScoped="world"!==s,y=r._isSatellite="satellite"===p,u=r._isConic=-1!==p.indexOf("conic")||"albers"===p,_=r._isClipped=!!x.lonaxisSpan[p];if(!1===l.visible){var b=m.extendDeep({},r._template);b.showcoastlines=!1,b.showcountries=!1,b.showframe=!1,b.showlakes=!1,b.showland=!1,b.showocean=!1,b.showrivers=!1,b.showsubunits=!1,b.lonaxis&&(b.lonaxis.showgrid=!1),b.lataxis&&(b.lataxis.showgrid=!1),r._template=b}for(var w=d("visible"),T=0;T<n.length;T++){var C,M=n[T],I=[30,10][T];if(a)C=o[M+"Range"];else{var P=x[M+"Span"],S=(P[p]||P["*"])/2,E=d("projection.rotation."+M.substr(0,3),o.projRotate[T]);C=[E-S,E+S]}var R=d(M+".range",C);d(M+".tick0"),d(M+".dtick",I),d(M+".showgrid",!!w&&void 0)&&(d(M+".gridcolor"),d(M+".gridwidth"),d(M+".griddash")),r[M]._ax={type:"linear",_id:M.slice(0,3),_traceIndices:t,setScale:m.identity,c2l:m.identity,r2l:m.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var D=r.lonaxis.range,j=r.lataxis.range,H=D[0],Y=D[1];H>0&&Y<0&&(Y+=360);var X,Z,W,re=(H+Y)/2;if(!c){var U=a?o.projRotate:[re,0,0];X=d("projection.rotation.lon",U[0]),d("projection.rotation.lat",U[1]),d("projection.rotation.roll",U[2]),d("showcoastlines",!a&&w)&&(d("coastlinecolor"),d("coastlinewidth")),d("showocean",!!w&&void 0)&&d("oceancolor")}c?(Z=-96.6,W=38.7):(Z=a?re:X,W=(j[0]+j[1])/2),d("center.lon",Z),d("center.lat",W),y&&(d("projection.tilt"),d("projection.distance")),u&&d("projection.parallels",o.projParallels||[0,60]),d("projection.scale"),d("showland",!!w&&void 0)&&d("landcolor"),d("showlakes",!!w&&void 0)&&d("lakecolor"),d("showrivers",!!w&&void 0)&&(d("rivercolor"),d("riverwidth")),d("showcountries",a&&"usa"!==s&&w)&&(d("countrycolor"),d("countrywidth")),("usa"===s||"north america"===s&&50===h)&&(d("showsubunits",w),d("subunitcolor"),d("subunitwidth")),a||d("showframe",w)&&(d("framecolor"),d("framewidth")),d("bgcolor"),d("fitbounds")&&(delete r.projection.scale,a?(delete r.center.lon,delete r.center.lat):_?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}$.exports=function(l,r,d){g(l,r,d,{type:"geo",attributes:e,handleDefaults:i,fullData:d,partition:"y"})}},{"../../lib":515,"../get_data":602,"../subplot_defaults":641,"./constants":596,"./layout_attributes":599}],601:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=v("../../registry"),x=Math.PI/180,e=180/Math.PI,n={cursor:"pointer"},i={cursor:"auto"};function l(w,T){return m.behavior.zoom().translate(T.translate()).scale(T.scale())}function r(w,T,C){var M=w.id,I=w.graphDiv,P=I.layout,S=P[M],E=I._fullLayout,R=E[M],D={},j={};function H(Y,X){D[M+"."+Y]=g.nestedProperty(S,Y).get(),k.call("_storeDirectGUIEdit",P,E._preGUI,D);var Z=g.nestedProperty(R,Y);Z.get()!==X&&(Z.set(X),g.nestedProperty(S,Y).set(X),j[M+"."+Y]=X)}C(H),H("projection.scale",T.scale()/w.fitScale),H("fitbounds",!1),I.emit("plotly_relayout",j)}function d(w,T){var C=l(0,T);function M(I){var P=T.invert(w.midPt);I("center.lon",P[0]),I("center.lat",P[1])}return C.on("zoomstart",function(){m.select(this).style(n)}).on("zoom",function(){T.scale(m.event.scale).translate(m.event.translate),w.render(!0);var I=T.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":T.scale()/w.fitScale,"geo.center.lon":I[0],"geo.center.lat":I[1]})}).on("zoomend",function(){m.select(this).style(i),r(w,T,M)}),C}function f(w,T){var C,M,I,P,S,E,R,D,j,H=l(0,T);function Y(Z){return T.invert(Z)}function X(Z){var W=T.rotate(),re=T.invert(w.midPt);Z("projection.rotation.lon",-W[0]),Z("center.lon",re[0]),Z("center.lat",re[1])}return H.on("zoomstart",function(){m.select(this).style(n),C=m.mouse(this),M=T.rotate(),I=T.translate(),P=M,S=Y(C)}).on("zoom",function(){if(E=m.mouse(this),function(re){var U=Y(re);if(!U)return!0;var B=T(U);return Math.abs(B[0]-re[0])>2||Math.abs(B[1]-re[1])>2}(C))return H.scale(T.scale()),void H.translate(T.translate());T.scale(m.event.scale),T.translate([I[0],m.event.translate[1]]),S?Y(E)&&(D=Y(E),T.rotate(R=[P[0]+(D[0]-S[0]),M[1],M[2]]),P=R):S=Y(C=E),j=!0,w.render(!0);var Z=T.rotate(),W=T.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":T.scale()/w.fitScale,"geo.center.lon":W[0],"geo.center.lat":W[1],"geo.projection.rotation.lon":-Z[0]})}).on("zoomend",function(){m.select(this).style(i),j&&r(w,T,X)}),H}function t(w,T){var C,M={r:T.rotate(),k:T.scale()},I=l(0,T),P=function(Y){for(var X=0,Z=arguments.length,W=[];++X<Z;)W.push(arguments[X]);var re=m.dispatch.apply(null,W);return re.of=function(U,B){return function(V){var ee;try{ee=V.sourceEvent=m.event,V.target=Y,m.event=V,re[V.type].apply(U,B)}finally{m.event=ee}}},re}(I,"zoomstart","zoom","zoomend"),S=0,E=I.on;function R(Y){S++||Y({type:"zoomstart"})}function D(Y){Y({type:"zoom"})}function j(Y){--S||Y({type:"zoomend"})}function H(Y){var X=T.rotate();Y("projection.rotation.lon",-X[0]),Y("projection.rotation.lat",-X[1])}return I.on("zoomstart",function(){m.select(this).style(n);var Y=m.mouse(this),X=T.rotate(),Z=X,W=T.translate(),re=s(X);C=h(T,Y),E.call(I,"zoom",function(){var U=m.mouse(this);if(T.scale(M.k=m.event.scale),C){if(h(T,U)){T.rotate(X).translate(W);var B=h(T,U),V=p(C,B),ee=_(o(re,V)),N=M.r=c(ee,C,Z);isFinite(N[0])&&isFinite(N[1])&&isFinite(N[2])||(N=Z),T.rotate(N),Z=N}}else C=h(T,Y=U);D(P.of(this,arguments))}),R(P.of(this,arguments))}).on("zoomend",function(){m.select(this).style(i),E.call(I,"zoom",null),j(P.of(this,arguments)),r(w,T,H)}).on("zoom.redraw",function(){w.render(!0);var Y=T.rotate();w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":T.scale()/w.fitScale,"geo.projection.rotation.lon":-Y[0],"geo.projection.rotation.lat":-Y[1]})}),m.rebind(I,P,"on")}function h(w,T){var M,I,P,S,C=w.invert(T);return C&&isFinite(C[0])&&isFinite(C[1])&&(I=(M=C)[0]*x,P=M[1]*x,[(S=Math.cos(P))*Math.cos(I),S*Math.sin(I),Math.sin(P)])}function s(w){var T=.5*w[0]*x,C=.5*w[1]*x,M=.5*w[2]*x,I=Math.sin(T),P=Math.cos(T),S=Math.sin(C),E=Math.cos(C),R=Math.sin(M),D=Math.cos(M);return[P*E*D+I*S*R,I*E*D-P*S*R,P*S*D+I*E*R,P*E*R-I*S*D]}function o(w,T){var C=w[0],M=w[1],I=w[2],P=w[3],S=T[0],E=T[1],R=T[2],D=T[3];return[C*S-M*E-I*R-P*D,C*E+M*S+I*D-P*R,C*R-M*D+I*S+P*E,C*D+M*R-I*E+P*S]}function p(w,T){if(w&&T){var C=[(S=w)[1]*(E=T)[2]-S[2]*E[1],S[2]*E[0]-S[0]*E[2],S[0]*E[1]-S[1]*E[0]],M=Math.sqrt(b(C,C)),I=.5*Math.acos(Math.max(-1,Math.min(1,b(w,T)))),P=Math.sin(I)/M;return M&&[Math.cos(I),C[2]*P,-C[1]*P,C[0]*P]}var S,E}function c(w,T,C){var M=u(T,2,w[0]);M=u(M,1,w[1]),M=u(M,0,w[2]-C[2]);var I,P,S=T[0],E=T[1],R=T[2],D=M[0],j=M[1],H=M[2],Y=Math.atan2(E,S)*e,X=Math.sqrt(S*S+E*E);Math.abs(j)>X?(P=(j>0?90:-90)-Y,I=0):(P=Math.asin(j/X)*e-Y,I=Math.sqrt(X*X-j*j));var Z=180-P-2*Y,W=(Math.atan2(H,D)-Math.atan2(R,I))*e,re=(Math.atan2(H,D)-Math.atan2(R,-I))*e;return a(C[0],C[1],P,W)<=a(C[0],C[1],Z,re)?[P,W,C[2]]:[Z,re,C[2]]}function a(w,T,C,M){var I=y(C-w),P=y(M-T);return Math.sqrt(I*I+P*P)}function y(w){return(w%360+540)%360-180}function u(w,T,C){var M=C*x,I=w.slice(),P=0===T?1:0,S=2===T?1:2,E=Math.cos(M),R=Math.sin(M);return I[P]=w[P]*E-w[S]*R,I[S]=w[S]*E+w[P]*R,I}function _(w){return[Math.atan2(2*(w[0]*w[1]+w[2]*w[3]),1-2*(w[1]*w[1]+w[2]*w[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(w[0]*w[2]-w[3]*w[1]))))*e,Math.atan2(2*(w[0]*w[3]+w[1]*w[2]),1-2*(w[2]*w[2]+w[3]*w[3]))*e]}function b(w,T){for(var C=0,M=0,I=w.length;M<I;++M)C+=w[M]*T[M];return C}$.exports=function(w,T){return(T._isScoped?d:T._isClipped?t:f)(w,w.projection)}},{"../../lib":515,"../../registry":647,"@plotly/d3":58}],602:[function(v,$,Q){"use strict";var m=v("../registry"),g=v("./cartesian/constants").SUBPLOT_PATTERN;Q.getSubplotCalcData=function(k,x,e){var n=m.subplotsRegistry[x];if(!n)return[];for(var i=n.attr,l=[],r=0;r<k.length;r++){var d=k[r];d[0].trace[i]===e&&l.push(d)}return l},Q.getModuleCalcData=function(k,x){var e,n=[],i=[];if(!(e="string"==typeof x?m.getModule(x).plot:"function"==typeof x?x:x.plot))return[n,k];for(var l=0;l<k.length;l++){var r=k[l],d=r[0].trace;!0===d.visible&&0!==d._length&&(d._module.plot===e?n.push(r):i.push(r))}return[n,i]},Q.getSubplotData=function(k,x,e){if(!m.subplotsRegistry[x])return[];var n,i,l,r=m.subplotsRegistry[x].attr,d=[];if("gl2d"===x){var f=e.match(g);i="x"+f[1],l="y"+f[2]}for(var t=0;t<k.length;t++)n=k[t],"gl2d"===x&&m.traceIs(n,"gl2d")?n[r[0]]===i&&n[r[1]]===l&&d.push(n):n[r]===e&&d.push(n);return d}},{"../registry":647,"./cartesian/constants":573}],603:[function(v,$,Q){"use strict";var m=v("mouse-change"),g=v("mouse-wheel"),k=v("mouse-event-offset"),x=v("../cartesian/constants"),e=v("has-passive-events");function n(i,l){this.element=i,this.plot=l,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}$.exports=function(i){var l=i.mouseContainer,r=i.glplot,d=new n(l,r);function f(){i.xaxis.autorange=!1,i.yaxis.autorange=!1}function t(h,s,o){var p,c,a=i.calcDataBox(),y=r.viewBox,u=d.lastPos[0],_=d.lastPos[1],b=x.MINDRAG*r.pixelRatio,w=x.MINZOOM*r.pixelRatio;function T(E,R,D){var j=Math.min(R,D),H=Math.max(R,D);j!==H?(a[E]=j,a[E+2]=H,d.dataBox=a,i.setRanges(a)):(i.selectBox.selectBox=[0,0,1,1],i.glplot.setDirty())}switch(s*=r.pixelRatio,o=y[3]-y[1]-(o*=r.pixelRatio),i.fullLayout.dragmode){case"zoom":if(h){var C=s/(y[2]-y[0])*(a[2]-a[0])+a[0],M=o/(y[3]-y[1])*(a[3]-a[1])+a[1];d.boxInited||(d.boxStart[0]=C,d.boxStart[1]=M,d.dragStart[0]=s,d.dragStart[1]=o),d.boxEnd[0]=C,d.boxEnd[1]=M,d.boxInited=!0,d.boxEnabled||d.boxStart[0]===d.boxEnd[0]&&d.boxStart[1]===d.boxEnd[1]||(d.boxEnabled=!0);var I=Math.abs(d.dragStart[0]-s)<w,P=Math.abs(d.dragStart[1]-o)<w;if(!function(){for(var E=i.graphDiv._fullLayout._axisConstraintGroups,R=i.xaxis._id,D=i.yaxis._id,j=0;j<E.length;j++)if(-1!==E[j][R]){if(-1!==E[j][D])return!0;break}return!1}()||I&&P)I&&(d.boxEnd[0]=d.boxStart[0]),P&&(d.boxEnd[1]=d.boxStart[1]);else{p=d.boxEnd[0]-d.boxStart[0],c=d.boxEnd[1]-d.boxStart[1];var S=(a[3]-a[1])/(a[2]-a[0]);Math.abs(p*S)>Math.abs(c)?(d.boxEnd[1]=d.boxStart[1]+Math.abs(p)*S*(c>=0?1:-1),d.boxEnd[1]<a[1]?(d.boxEnd[1]=a[1],d.boxEnd[0]=d.boxStart[0]+(a[1]-d.boxStart[1])/Math.abs(S)):d.boxEnd[1]>a[3]&&(d.boxEnd[1]=a[3],d.boxEnd[0]=d.boxStart[0]+(a[3]-d.boxStart[1])/Math.abs(S))):(d.boxEnd[0]=d.boxStart[0]+Math.abs(c)/S*(p>=0?1:-1),d.boxEnd[0]<a[0]?(d.boxEnd[0]=a[0],d.boxEnd[1]=d.boxStart[1]+(a[0]-d.boxStart[0])*Math.abs(S)):d.boxEnd[0]>a[2]&&(d.boxEnd[0]=a[2],d.boxEnd[1]=d.boxStart[1]+(a[2]-d.boxStart[0])*Math.abs(S)))}}else d.boxEnabled?(c=d.boxStart[1]!==d.boxEnd[1],(p=d.boxStart[0]!==d.boxEnd[0])||c?(p&&(T(0,d.boxStart[0],d.boxEnd[0]),i.xaxis.autorange=!1),c&&(T(1,d.boxStart[1],d.boxEnd[1]),i.yaxis.autorange=!1),i.relayoutCallback()):i.glplot.setDirty(),d.boxEnabled=!1,d.boxInited=!1):d.boxInited&&(d.boxInited=!1);break;case"pan":d.boxEnabled=!1,d.boxInited=!1,h?(d.panning||(d.dragStart[0]=s,d.dragStart[1]=o),Math.abs(d.dragStart[0]-s)<b&&(s=d.dragStart[0]),Math.abs(d.dragStart[1]-o)<b&&(o=d.dragStart[1]),c=(_-o)*(a[3]-a[1])/(r.viewBox[3]-r.viewBox[1]),a[0]+=p=(u-s)*(a[2]-a[0])/(r.viewBox[2]-r.viewBox[0]),a[2]+=p,a[1]+=c,a[3]+=c,i.setRanges(a),d.panning=!0,d.lastInputTime=Date.now(),f(),i.cameraChanged(),i.handleAnnotations()):d.panning&&(d.panning=!1,i.relayoutCallback())}d.lastPos[0]=s,d.lastPos[1]=o}return d.mouseListener=m(l,t),l.addEventListener("touchstart",function(h){var s=k(h.changedTouches[0],l);t(0,s[0],s[1]),t(1,s[0],s[1]),h.preventDefault()},!!e&&{passive:!1}),l.addEventListener("touchmove",function(h){h.preventDefault();var s=k(h.changedTouches[0],l);t(1,s[0],s[1]),h.preventDefault()},!!e&&{passive:!1}),l.addEventListener("touchend",function(h){t(0,d.lastPos[0],d.lastPos[1]),h.preventDefault()},!!e&&{passive:!1}),d.wheelListener=g(l,function(h,s){if(!i.scrollZoom)return!1;var o=i.calcDataBox(),p=r.viewBox,c=d.lastPos[0],a=d.lastPos[1],y=Math.exp(5*s/(p[3]-p[1])),u=c/(p[2]-p[0])*(o[2]-o[0])+o[0],_=a/(p[3]-p[1])*(o[3]-o[1])+o[1];return o[0]=(o[0]-u)*y+u,o[2]=(o[2]-u)*y+u,o[1]=(o[1]-_)*y+_,o[3]=(o[3]-_)*y+_,i.setRanges(o),d.lastInputTime=Date.now(),f(),i.cameraChanged(),i.handleAnnotations(),i.relayoutCallback(),!0},!0),d}},{"../cartesian/constants":573,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],604:[function(v,$,Q){"use strict";var m=v("../cartesian/axes"),g=v("../../lib/str2rgbarray");function k(n){this.scene=n,this.gl=n.gl,this.pixelRatio=n.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var x=k.prototype,e=["xaxis","yaxis"];x.merge=function(n){var i,l,r,d,f,t,h,s,o,p,c;for(this.titleEnable=!1,this.backgroundColor=g(n.plot_bgcolor),p=0;p<2;++p){var a=(i=e[p]).charAt(0);for(r=(l=n[this.scene[i]._name]).title.text===this.scene.fullLayout._dfltTitle[a]?"":l.title.text,c=0;c<=2;c+=2)this.labelEnable[p+c]=!1,this.labels[p+c]=r,this.labelColor[p+c]=g(l.title.font.color),this.labelFont[p+c]=l.title.font.family,this.labelSize[p+c]=l.title.font.size,this.labelPad[p+c]=this.getLabelPad(i,l),this.tickEnable[p+c]=!1,this.tickColor[p+c]=g((l.tickfont||{}).color),this.tickAngle[p+c]="auto"===l.tickangle?0:Math.PI*-l.tickangle/180,this.tickPad[p+c]=this.getTickPad(l),this.tickMarkLength[p+c]=0,this.tickMarkWidth[p+c]=l.tickwidth||0,this.tickMarkColor[p+c]=g(l.tickcolor),this.borderLineEnable[p+c]=!1,this.borderLineColor[p+c]=g(l.linecolor),this.borderLineWidth[p+c]=l.linewidth||0;h=this.hasSharedAxis(l),f=this.hasAxisInDfltPos(i,l)&&!h,t=this.hasAxisInAltrPos(i,l)&&!h,d=l.mirror||!1,s=h?-1!==String(d).indexOf("all"):!!d,o=h?"allticks"===d:-1!==String(d).indexOf("ticks"),f?this.labelEnable[p]=!0:t&&(this.labelEnable[p+2]=!0),f?this.tickEnable[p]=l.showticklabels:t&&(this.tickEnable[p+2]=l.showticklabels),(f||s)&&(this.borderLineEnable[p]=l.showline),(t||s)&&(this.borderLineEnable[p+2]=l.showline),(f||o)&&(this.tickMarkLength[p]=this.getTickMarkLength(l)),(t||o)&&(this.tickMarkLength[p+2]=this.getTickMarkLength(l)),this.gridLineEnable[p]=l.showgrid,this.gridLineColor[p]=g(l.gridcolor),this.gridLineWidth[p]=l.gridwidth,this.zeroLineEnable[p]=l.zeroline,this.zeroLineColor[p]=g(l.zerolinecolor),this.zeroLineWidth[p]=l.zerolinewidth}},x.hasSharedAxis=function(n){var i=this.scene;return 0!==m.findSubplotsWithAxis(i.fullLayout._subplots.gl2d,n).indexOf(i.id)},x.hasAxisInDfltPos=function(n,i){var l=i.side;return"xaxis"===n?"bottom"===l:"yaxis"===n?"left"===l:void 0},x.hasAxisInAltrPos=function(n,i){var l=i.side;return"xaxis"===n?"top"===l:"yaxis"===n?"right"===l:void 0},x.getLabelPad=function(n,i){var l=i.title.font.size,r=i.showticklabels;return"xaxis"===n?"top"===i.side?l*(1.5+(r?1:0))-10:l*(1.5+(r?.5:0))-10:"yaxis"===n?"right"===i.side?10+l*(1.5+(r?1:.5)):10+l*(1.5+(r?.5:0)):void 0},x.getTickPad=function(n){return"outside"===n.ticks?10+n.ticklen:15},x.getTickMarkLength=function(n){if(!n.ticks)return 0;var i=n.ticklen;return"inside"===n.ticks?-i:i},$.exports=function(n){return new k(n)}},{"../../lib/str2rgbarray":540,"../cartesian/axes":566}],605:[function(v,$,Q){"use strict";var m=v("../../plot_api/edit_types").overrideAll,g=v("./scene2d"),k=v("../layout_attributes"),x=v("../../constants/xmlns_namespaces"),e=v("../cartesian/constants"),n=v("../cartesian"),i=v("../../components/fx/layout_attributes"),l=v("../get_data").getSubplotData;Q.name="gl2d",Q.attr=["xaxis","yaxis"],Q.idRoot=["x","y"],Q.idRegex=e.idRegex,Q.attrRegex=e.attrRegex,Q.attributes=v("../cartesian/attributes"),Q.supplyLayoutDefaults=function(r,d,f){d._has("cartesian")||n.supplyLayoutDefaults(r,d,f)},Q.layoutAttrOverrides=m(n.layoutAttributes,"plot","from-root"),Q.baseLayoutAttrOverrides=m({plot_bgcolor:k.plot_bgcolor,hoverlabel:i.hoverlabel},"plot","nested"),Q.plot=function(r){for(var d=r._fullLayout,f=r._fullData,t=d._subplots.gl2d,h=0;h<t.length;h++){var s=t[h],o=d._plots[s],p=l(f,"gl2d",s),c=o._scene2d;void 0===c&&(c=new g({id:s,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,plotGlPixelRatio:r._context.plotGlPixelRatio},d),o._scene2d=c),c.plot(p,r.calcdata,d,r.layout)}},Q.clean=function(r,d,f,t){for(var h=t._subplots.gl2d||[],s=0;s<h.length;s++){var o=h[s],p=t._plots[o];p._scene2d&&0===l(r,"gl2d",o).length&&(p._scene2d.destroy(),delete t._plots[o])}n.clean.apply(this,arguments)},Q.drawFramework=function(r){r._context.staticPlot||n.drawFramework(r)},Q.toSVG=function(r){for(var d=r._fullLayout,f=d._subplots.gl2d,t=0;t<f.length;t++){var h=d._plots[f[t]]._scene2d,s=h.toImage("png");d._glimages.append("svg:image").attr({xmlns:x.svg,"xlink:href":s,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),h.destroy()}},Q.updateFx=function(r){for(var d=r._fullLayout,f=d._subplots.gl2d,t=0;t<f.length;t++)d._plots[f[t]]._scene2d.updateFx(d.dragmode)}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../plot_api/edit_types":548,"../cartesian":578,"../cartesian/attributes":564,"../cartesian/constants":573,"../get_data":602,"../layout_attributes":619,"./scene2d":606}],606:[function(v,$,Q){"use strict";var m,g,k=v("../../registry"),x=v("../../plots/cartesian/axes"),e=v("../../components/fx"),n=v("../../../stackgl_modules").gl_plot2d,i=v("../../../stackgl_modules").gl_spikes2d,l=v("../../../stackgl_modules").gl_select_box,r=v("webgl-context"),d=v("./convert"),f=v("./camera"),t=v("../../lib/show_no_webgl_msg"),h=v("../cartesian/constraints"),s=h.enforce,o=h.clean,p=v("../cartesian/autorange").doAutoRange,c=v("../../components/dragelement/helpers"),a=c.drawMode,y=c.selectMode,u=["xaxis","yaxis"],_=v("../cartesian/constants").SUBPLOT_PATTERN;function b(T,C){this.container=T.container,this.graphDiv=T.graphDiv,this.pixelRatio=T.plotGlPixelRatio||window.devicePixelRatio,this.id=T.id,this.staticPlot=!!T.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(C),this.makeFramework(),this.stopped||(this.glplotOptions=d(this),this.glplotOptions.merge(C),this.glplot=n(this.glplotOptions),this.camera=f(this),this.traces={},this.spikes=i(this.glplot),this.selectBox=l(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}$.exports=b;var w=b.prototype;w.makeFramework=function(){if(this.staticPlot){if(!(g||(m=document.createElement("canvas"),g=r({canvas:m,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=m,this.gl=g}else{var T=this.container.querySelector(".gl-canvas-focus"),C=r({canvas:T,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!C)return t(this),void(this.stopped=!0);this.canvas=T,this.gl=C}var M=this.canvas;M.style.width="100%",M.style.height="100%",M.style.position="absolute",M.style.top="0px",M.style.left="0px",M.style["pointer-events"]="none",this.updateSize(M);var I=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",I.style["z-index"]=20,I.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var S=this.container;S.appendChild(I),S.appendChild(P);var E=this;P.addEventListener("mouseout",function(){E.isMouseOver=!1,E.unhover()}),P.addEventListener("mouseover",function(){E.isMouseOver=!0})},w.toImage=function(T){T||(T="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(m),this.updateSize(this.canvas);var C=this.glplot.gl,M=C.drawingBufferWidth,I=C.drawingBufferHeight;C.clearColor(1,1,1,0),C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),C.bindFramebuffer(C.FRAMEBUFFER,null);var P=new Uint8Array(M*I*4);C.readPixels(0,0,M,I,C.RGBA,C.UNSIGNED_BYTE,P);for(var S=0,E=I-1;S<E;++S,--E)for(var R=0;R<M;++R)for(var D=0;D<4;++D){var j=P[4*(M*S+R)+D];P[4*(M*S+R)+D]=P[4*(M*E+R)+D],P[4*(M*E+R)+D]=j}var H=document.createElement("canvas");H.width=M,H.height=I;var Y,X=H.getContext("2d",{willReadFrequently:!0}),Z=X.createImageData(M,I);switch(Z.data.set(P),X.putImageData(Z,0,0),T){case"jpeg":Y=H.toDataURL("image/jpeg");break;case"webp":Y=H.toDataURL("image/webp");break;default:Y=H.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(m),Y},w.updateSize=function(T){T||(T=this.canvas);var C=this.pixelRatio,M=this.fullLayout,P=M.height,S=0|Math.ceil(C*M.width),E=0|Math.ceil(C*P);return T.width===S&&T.height===E||(T.width=S,T.height=E),T},w.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var T=[x.calcTicks(this.xaxis),x.calcTicks(this.yaxis)],C=0;C<2;++C)for(var M=0;M<T[C].length;++M)T[C][M].text=T[C][M].text+"";return T},w.updateRefs=function(T){this.fullLayout=T;var C=this.id.match(_),I="yaxis"+C[2];this.xaxis=this.fullLayout["xaxis"+C[1]],this.yaxis=this.fullLayout[I]},w.relayoutCallback=function(){var T=this.graphDiv,C=this.xaxis,M=this.yaxis,I=T.layout,P={},S=P[C._name+".range"]=C.range.slice(),E=P[M._name+".range"]=M.range.slice();P[C._name+".autorange"]=C.autorange,P[M._name+".autorange"]=M.autorange,k.call("_storeDirectGUIEdit",T.layout,T._fullLayout._preGUI,P);var R=I[C._name];R.range=S,R.autorange=C.autorange;var D=I[M._name];D.range=E,D.autorange=M.autorange,P.lastInputTime=this.camera.lastInputTime,T.emit("plotly_relayout",P)},w.cameraChanged=function(){var T=this.camera;this.glplot.setDataBox(this.calcDataBox());var C=this.computeTickMarks();(function(M,I){for(var P=0;P<2;++P){var S=M[P],E=I[P];if(S.length!==E.length)return!0;for(var R=0;R<S.length;++R)if(S[R].x!==E[R].x)return!0}return!1})(C,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=C,this.glplotOptions.dataBox=T.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},w.handleAnnotations=function(){for(var T=this.graphDiv,C=this.fullLayout.annotations,M=0;M<C.length;M++){var I=C[M];I.xref===this.xaxis._id&&I.yref===this.yaxis._id&&k.getComponentMethod("annotations","drawOne")(T,M)}},w.destroy=function(){if(this.glplot){var T=this.traces;T&&Object.keys(T).map(function(C){T[C].dispose(),delete T[C]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},w.plot=function(T,C,M){var I=this.glplot;this.updateRefs(M),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(T,C),this.updateFx(M.dragmode);var P=M.width,S=M.height;this.updateSize(this.canvas);var E=this.glplotOptions;E.merge(M),E.screenBox=[0,0,P,S];var R={_fullLayout:{_axisConstraintGroups:M._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:M._size}};o(R,this.xaxis),o(R,this.yaxis);var D,j,H=M._size,Y=this.xaxis.domain,X=this.yaxis.domain;for(E.viewBox=[H.l+Y[0]*H.w,H.b+X[0]*H.h,P-H.r-(1-Y[1])*H.w,S-H.t-(1-X[1])*H.h],this.mouseContainer.style.width=H.w*(Y[1]-Y[0])+"px",this.mouseContainer.style.height=H.h*(X[1]-X[0])+"px",this.mouseContainer.height=H.h*(X[1]-X[0]),this.mouseContainer.style.left=H.l+Y[0]*H.w+"px",this.mouseContainer.style.top=H.t+(1-X[1])*H.h+"px",j=0;j<2;++j)(D=this[u[j]])._length=E.viewBox[j+2]-E.viewBox[j],p(this.graphDiv,D),D.setScale();s(R),E.ticks=this.computeTickMarks(),E.dataBox=this.calcDataBox(),E.merge(M),I.update(E),this.glplot.draw()},w.calcDataBox=function(){var T=this.xaxis,C=this.yaxis,M=T.range,I=C.range,P=T.r2l,S=C.r2l;return[P(M[0]),S(I[0]),P(M[1]),S(I[1])]},w.setRanges=function(T){var C=this.xaxis,M=this.yaxis,I=C.l2r,P=M.l2r;C.range=[I(T[0]),I(T[2])],M.range=[P(T[1]),P(T[3])]},w.updateTraces=function(T,C){var M,I,P,S=Object.keys(this.traces);this.fullData=T;e:for(M=0;M<S.length;M++){var E=S[M],R=this.traces[E];for(I=0;I<T.length;I++)if((P=T[I]).uid===E&&P.type===R.type)continue e;R.dispose(),delete this.traces[E]}for(M=0;M<T.length;M++){var D=C[M],j=this.traces[(P=T[M]).uid];j?j.update(P,D):(j=P._module.plot(this,P,D),this.traces[P.uid]=j)}this.glplot.objects.sort(function(H,Y){return H._trace.index-Y._trace.index})},w.updateFx=function(T){y(T)||a(T)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===T?"move":"zoom"===T?"crosshair":null},w.emitPointAction=function(T,C){for(var M,I=T.trace.uid,P=T.pointIndex,S=0;S<this.fullData.length;S++)this.fullData[S].uid===I&&(M=this.fullData[S]);var E={x:T.traceCoord[0],y:T.traceCoord[1],curveNumber:M.index,pointNumber:P,data:M._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(E,M,P),this.graphDiv.emit(C,{points:[E]})},w.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var T=this.glplot,C=this.camera,M=C.mouseListener,I=1===this.lastButtonState&&0===M.buttons,P=this.fullLayout;this.lastButtonState=M.buttons,this.cameraChanged();var S,E=M.x*T.pixelRatio,R=this.canvas.height-T.pixelRatio*M.y;if(C.boxEnabled&&"zoom"===P.dragmode){this.selectBox.enabled=!0;for(var D=this.selectBox.selectBox=[Math.min(C.boxStart[0],C.boxEnd[0]),Math.min(C.boxStart[1],C.boxEnd[1]),Math.max(C.boxStart[0],C.boxEnd[0]),Math.max(C.boxStart[1],C.boxEnd[1])],j=0;j<2;j++)C.boxStart[j]===C.boxEnd[j]&&(D[j]=T.dataBox[j],D[j+2]=T.dataBox[j+2]);T.setDirty()}else if(!C.panning&&this.isMouseOver){this.selectBox.enabled=!1;var H=P._size,Z=(S=T.pick(E/T.pixelRatio+H.l+this.xaxis.domain[0]*H.w,R/T.pixelRatio-(H.t+(1-this.yaxis.domain[1])*H.h)))&&S.object._trace.handlePick(S);if(Z&&I&&this.emitPointAction(Z,"plotly_click"),S&&"skip"!==S.object._trace.hoverinfo&&P.hovermode&&Z&&(!this.lastPickResult||this.lastPickResult.traceUid!==Z.trace.uid||this.lastPickResult.dataCoord[0]!==Z.dataCoord[0]||this.lastPickResult.dataCoord[1]!==Z.dataCoord[1])){var W=Z;this.lastPickResult={traceUid:Z.trace?Z.trace.uid:null,dataCoord:Z.dataCoord.slice()},this.spikes.update({center:S.dataCoord}),W.screenCoord=[((T.viewBox[2]-T.viewBox[0])*(S.dataCoord[0]-T.dataBox[0])/(T.dataBox[2]-T.dataBox[0])+T.viewBox[0])/T.pixelRatio,(this.canvas.height-(T.viewBox[3]-T.viewBox[1])*(S.dataCoord[1]-T.dataBox[1])/(T.dataBox[3]-T.dataBox[1])-T.viewBox[1])/T.pixelRatio],this.emitPointAction(Z,"plotly_hover");var re=this.fullData[W.trace.index]||{},U=W.pointIndex,B=e.castHoverinfo(re,P,U);if(B&&"all"!==B){var V=B.split("+");-1===V.indexOf("x")&&(W.traceCoord[0]=void 0),-1===V.indexOf("y")&&(W.traceCoord[1]=void 0),-1===V.indexOf("z")&&(W.traceCoord[2]=void 0),-1===V.indexOf("text")&&(W.textLabel=void 0),-1===V.indexOf("name")&&(W.name=void 0)}e.loneHover({x:W.screenCoord[0],y:W.screenCoord[1],xLabel:this.hoverFormatter("xaxis",W.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",W.traceCoord[1]),zLabel:W.traceCoord[2],text:W.textLabel,name:W.name,color:e.castHoverOption(re,U,"bgcolor")||W.color,borderColor:e.castHoverOption(re,U,"bordercolor"),fontFamily:e.castHoverOption(re,U,"font.family"),fontSize:e.castHoverOption(re,U,"font.size"),fontColor:e.castHoverOption(re,U,"font.color"),nameLength:e.castHoverOption(re,U,"namelength"),textAlign:e.castHoverOption(re,U,"align")},{container:this.svgContainer,gd:this.graphDiv})}}S||this.unhover(),T.draw()}},w.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},w.hoverFormatter=function(T,C){if(void 0!==C){var M=this[T];return x.tickText(M,M.c2l(C),"hover").text}}},{"../../../stackgl_modules":1133,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../lib/show_no_webgl_msg":537,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/constants":573,"../cartesian/constraints":574,"./camera":603,"./convert":604,"webgl-context":332}],607:[function(v,$,Q){"use strict";var m=v("../../plot_api/edit_types").overrideAll,g=v("../../components/fx/layout_attributes"),k=v("./scene"),x=v("../get_data").getSubplotData,e=v("../../lib"),n=v("../../constants/xmlns_namespaces");Q.name="gl3d",Q.attr="scene",Q.idRoot="scene",Q.idRegex=Q.attrRegex=e.counterRegex("scene"),Q.attributes=v("./layout/attributes"),Q.layoutAttributes=v("./layout/layout_attributes"),Q.baseLayoutAttrOverrides=m({hoverlabel:g.hoverlabel},"plot","nested"),Q.supplyLayoutDefaults=v("./layout/defaults"),Q.plot=function(i){for(var l=i._fullLayout,r=i._fullData,d=l._subplots.gl3d,f=0;f<d.length;f++){var t=d[f],h=x(r,"gl3d",t),s=l[t],o=s.camera,p=s._scene;p||(p=new k({id:t,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:o},l),s._scene=p),p.viewInitial||(p.viewInitial={up:{x:o.up.x,y:o.up.y,z:o.up.z},eye:{x:o.eye.x,y:o.eye.y,z:o.eye.z},center:{x:o.center.x,y:o.center.y,z:o.center.z}}),p.plot(h,l,i.layout)}},Q.clean=function(i,l,r,d){for(var f=d._subplots.gl3d||[],t=0;t<f.length;t++){var h=f[t];!l[h]&&d[h]._scene&&(d[h]._scene.destroy(),d._infolayer&&d._infolayer.selectAll(".annotation-"+h).remove())}},Q.toSVG=function(i){for(var l=i._fullLayout,r=l._subplots.gl3d,d=l._size,f=0;f<r.length;f++){var t=l[r[f]],h=t.domain,s=t._scene,o=s.toImage("png");l._glimages.append("svg:image").attr({xmlns:n.svg,"xlink:href":o,x:d.l+d.w*h.x[0],y:d.t+d.h*(1-h.y[1]),width:d.w*(h.x[1]-h.x[0]),height:d.h*(h.y[1]-h.y[0]),preserveAspectRatio:"none"}),s.destroy()}},Q.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var l=i.substr(5);return"1"===l&&(l=""),"scene"+l}},Q.updateFx=function(i){for(var l=i._fullLayout,r=l._subplots.gl3d,d=0;d<r.length;d++)l[r[d]]._scene.updateFx(l.dragmode,l.hovermode)}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../plot_api/edit_types":548,"../get_data":602,"./layout/attributes":608,"./layout/defaults":612,"./layout/layout_attributes":613,"./scene":617}],608:[function(v,$,Q){"use strict";$.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],609:[function(v,$,Q){"use strict";var m=v("../../../components/color"),g=v("../../cartesian/layout_attributes"),k=v("../../../lib/extend").extendFlat,x=v("../../../plot_api/edit_types").overrideAll;$.exports=x({visible:g.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:m.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:g.color,categoryorder:g.categoryorder,categoryarray:g.categoryarray,title:{text:g.title.text,font:g.title.font},type:k({},g.type,{values:["-","linear","log","date","category"]}),autotypenumbers:g.autotypenumbers,autorange:g.autorange,rangemode:g.rangemode,range:k({},g.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:g.ticks,mirror:g.mirror,ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:g.tickfont,tickangle:g.tickangle,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,showexponent:g.showexponent,exponentformat:g.exponentformat,minexponent:g.minexponent,separatethousands:g.separatethousands,tickformat:g.tickformat,tickformatstops:g.tickformatstops,hoverformat:g.hoverformat,showline:g.showline,linecolor:g.linecolor,linewidth:g.linewidth,showgrid:g.showgrid,gridcolor:k({},g.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:g.gridwidth,zeroline:g.zeroline,zerolinecolor:g.zerolinecolor,zerolinewidth:g.zerolinewidth,_deprecated:{title:g._deprecated.title,titlefont:g._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":367,"../../../lib/extend":505,"../../../plot_api/edit_types":548,"../../cartesian/layout_attributes":579}],610:[function(v,$,Q){"use strict";var m=v("tinycolor2").mix,g=v("../../../lib"),k=v("../../../plot_api/plot_template"),x=v("./axis_attributes"),e=v("../../cartesian/type_defaults"),n=v("../../cartesian/axis_defaults"),i=["xaxis","yaxis","zaxis"];$.exports=function(l,r,d){var f,t;function h(p,c){return g.coerce(f,t,x,p,c)}for(var s=0;s<i.length;s++){var o=i[s];f=l[o]||{},(t=k.newContainer(r,o))._id=o[0]+d.scene,t._name=o,e(f,t,h,d),n(f,t,h,{font:d.font,letter:o[0],data:d.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:d.bgColor,calendar:d.calendar},d.fullLayout),h("gridcolor",m(t.color,d.bgColor,13600/187).toRgbString()),h("title.text",o[0]),t.setScale=g.noop,h("showspikes")&&(h("spikesides"),h("spikethickness"),h("spikecolor",t.color)),h("showaxeslabels"),h("showbackground")&&h("backgroundcolor")}}},{"../../../lib":515,"../../../plot_api/plot_template":555,"../../cartesian/axis_defaults":568,"../../cartesian/type_defaults":591,"./axis_attributes":609,tinycolor2:313}],611:[function(v,$,Q){"use strict";var m=v("../../../lib/str2rgbarray"),g=v("../../../lib"),k=["xaxis","yaxis","zaxis"];function x(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}x.prototype.merge=function(e,n){for(var i=0;i<3;++i){var l=n[k[i]];l.visible?(this.labels[i]=e._meta?g.templateString(l.title.text,e._meta):l.title.text,"font"in l.title&&(l.title.font.color&&(this.labelColor[i]=m(l.title.font.color)),l.title.font.family&&(this.labelFont[i]=l.title.font.family),l.title.font.size&&(this.labelSize[i]=l.title.font.size)),"showline"in l&&(this.lineEnable[i]=l.showline),"linecolor"in l&&(this.lineColor[i]=m(l.linecolor)),"linewidth"in l&&(this.lineWidth[i]=l.linewidth),"showgrid"in l&&(this.gridEnable[i]=l.showgrid),"gridcolor"in l&&(this.gridColor[i]=m(l.gridcolor)),"gridwidth"in l&&(this.gridWidth[i]=l.gridwidth),"log"===l.type?this.zeroEnable[i]=!1:"zeroline"in l&&(this.zeroEnable[i]=l.zeroline),"zerolinecolor"in l&&(this.zeroLineColor[i]=m(l.zerolinecolor)),"zerolinewidth"in l&&(this.zeroLineWidth[i]=l.zerolinewidth),this.lineTickEnable[i]=!(!("ticks"in l)||!l.ticks),"ticklen"in l&&(this.lineTickLength[i]=this._defaultLineTickLength[i]=l.ticklen),"tickcolor"in l&&(this.lineTickColor[i]=m(l.tickcolor)),"tickwidth"in l&&(this.lineTickWidth[i]=l.tickwidth),"tickangle"in l&&(this.tickAngle[i]="auto"===l.tickangle?-3600:Math.PI*-l.tickangle/180),"showticklabels"in l&&(this.tickEnable[i]=l.showticklabels),"tickfont"in l&&(l.tickfont.color&&(this.tickColor[i]=m(l.tickfont.color)),l.tickfont.family&&(this.tickFont[i]=l.tickfont.family),l.tickfont.size&&(this.tickSize[i]=l.tickfont.size)),"mirror"in l?-1!==["ticks","all","allticks"].indexOf(l.mirror)?(this.lineTickMirror[i]=!0,this.lineMirror[i]=!0):!0===l.mirror?(this.lineTickMirror[i]=!1,this.lineMirror[i]=!0):(this.lineTickMirror[i]=!1,this.lineMirror[i]=!1):this.lineMirror[i]=!1,"showbackground"in l&&!1!==l.showbackground?(this.backgroundEnable[i]=!0,this.backgroundColor[i]=m(l.backgroundcolor)):this.backgroundEnable[i]=!1):(this.tickEnable[i]=!1,this.labelEnable[i]=!1,this.lineEnable[i]=!1,this.lineTickEnable[i]=!1,this.gridEnable[i]=!1,this.zeroEnable[i]=!1,this.backgroundEnable[i]=!1)}},$.exports=function(e,n){var i=new x;return i.merge(e,n),i}},{"../../../lib":515,"../../../lib/str2rgbarray":540}],612:[function(v,$,Q){"use strict";var m=v("../../../lib"),g=v("../../../components/color"),k=v("../../../registry"),x=v("../../subplot_defaults"),e=v("./axis_defaults"),n=v("./layout_attributes"),i=v("../../get_data").getSubplotData;function l(r,d,f,t){for(var h=f("bgcolor"),s=g.combine(h,t.paper_bgcolor),o=["up","center","eye"],p=0;p<o.length;p++)f("camera."+o[p]+".x"),f("camera."+o[p]+".y"),f("camera."+o[p]+".z");f("camera.projection.type");var c=!!f("aspectratio.x")&&!!f("aspectratio.y")&&!!f("aspectratio.z"),a=f("aspectmode",c?"manual":"auto");c||(r.aspectratio=d.aspectratio={x:1,y:1,z:1},"manual"===a&&(d.aspectmode="auto"),r.aspectmode=d.aspectmode);var y=i(t.fullData,"gl3d",t.id);e(r,d,{font:t.font,scene:t.id,data:y,bgColor:s,calendar:t.calendar,autotypenumbersDflt:t.autotypenumbersDflt,fullLayout:t.fullLayout}),k.getComponentMethod("annotations3d","handleDefaults")(r,d,t);var u=t.getDfltFromLayout("dragmode");if(!1!==u&&!u)if(u="orbit",r.camera&&r.camera.up){var _=r.camera.up.x,b=r.camera.up.y,w=r.camera.up.z;0!==w&&(_&&b&&w?w/Math.sqrt(_*_+b*b+w*w)>.999&&(u="turntable"):u="turntable")}else u="turntable";f("dragmode",u),f("hovermode",t.getDfltFromLayout("hovermode"))}$.exports=function(r,d,f){var t=d._basePlotModules.length>1;x(r,d,f,{type:"gl3d",attributes:n,handleDefaults:l,fullLayout:d,font:d.font,fullData:f,getDfltFromLayout:function(h){if(!t)return m.validate(r[h],n[h])?r[h]:void 0},autotypenumbersDflt:d.autotypenumbers,paper_bgcolor:d.paper_bgcolor,calendar:d.calendar})}},{"../../../components/color":367,"../../../lib":515,"../../../registry":647,"../../get_data":602,"../../subplot_defaults":641,"./axis_defaults":610,"./layout_attributes":613}],613:[function(v,$,Q){"use strict";var m=v("./axis_attributes"),g=v("../../domain").attributes,k=v("../../../lib/extend").extendFlat,x=v("../../../lib").counterRegex;function e(n,i,l){return{x:{valType:"number",dflt:n,editType:"camera"},y:{valType:"number",dflt:i,editType:"camera"},z:{valType:"number",dflt:l,editType:"camera"},editType:"camera"}}$.exports={_arrayAttrRegexps:[x("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:k(e(0,0,1),{}),center:k(e(0,0,0),{}),eye:k(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:g({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:m,yaxis:m,zaxis:m,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":515,"../../../lib/extend":505,"../../domain":593,"./axis_attributes":609}],614:[function(v,$,Q){"use strict";var m=v("../../../lib/str2rgbarray"),g=["xaxis","yaxis","zaxis"];function k(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}k.prototype.merge=function(x){for(var e=0;e<3;++e){var n=x[g[e]];n.visible?(this.enabled[e]=n.showspikes,this.colors[e]=m(n.spikecolor),this.drawSides[e]=n.spikesides,this.lineWidth[e]=n.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},$.exports=function(x){var e=new k;return e.merge(x),e}},{"../../../lib/str2rgbarray":540}],615:[function(v,$,Q){"use strict";$.exports=function(e){for(var n=e.axesOptions,i=e.glplot.axesPixels,l=e.fullSceneLayout,r=[[],[],[]],d=0;d<3;++d){var f=l[k[d]];if(f._length=(i[d].hi-i[d].lo)*i[d].pixelsPerDataUnit/e.dataScale[d],Math.abs(f._length)===1/0||isNaN(f._length))r[d]=[];else{f._input_range=f.range.slice(),f.range[0]=i[d].lo/e.dataScale[d],f.range[1]=i[d].hi/e.dataScale[d],f._m=1/(e.dataScale[d]*i[d].pixelsPerDataUnit),f.range[0]===f.range[1]&&(f.range[0]-=1,f.range[1]+=1);var t=f.tickmode;if("auto"===f.tickmode){f.tickmode="linear";var h=f.nticks||g.constrain(f._length/40,4,9);m.autoTicks(f,Math.abs(f.range[1]-f.range[0])/h)}for(var s=m.calcTicks(f,{msUTC:!0}),o=0;o<s.length;++o)s[o].x=s[o].x*e.dataScale[d],"date"===f.type&&(s[o].text=s[o].text.replace(/\<br\>/g," "));r[d]=s,f.tickmode=t}}for(n.ticks=r,d=0;d<3;++d)for(x[d]=.5*(e.glplot.bounds[0][d]+e.glplot.bounds[1][d]),o=0;o<2;++o)n.bounds[o][d]=e.glplot.bounds[o][d];e.contourLevels=function(p){for(var c=new Array(3),a=0;a<3;++a){for(var y=p[a],u=new Array(y.length),_=0;_<y.length;++_)u[_]=y[_].x;c[a]=u}return c}(r)};var m=v("../../cartesian/axes"),g=v("../../../lib"),k=["xaxis","yaxis","zaxis"],x=[0,0,0]},{"../../../lib":515,"../../cartesian/axes":566}],616:[function(v,$,Q){"use strict";function m(g,k){var x,e,n=[0,0,0,0];for(x=0;x<4;++x)for(e=0;e<4;++e)n[e]+=g[4*x+e]*k[x];return n}$.exports=function(g,k){return m(g.projection,m(g.view,m(g.model,[k[0],k[1],k[2],1])))}},{}],617:[function(v,$,Q){"use strict";var m,g,k=v("../../../stackgl_modules").gl_plot3d,x=k.createCamera,e=k.createScene,n=v("webgl-context"),i=v("has-passive-events"),l=v("../../registry"),r=v("../../lib"),d=r.preserveDrawingBuffer(),f=v("../../plots/cartesian/axes"),t=v("../../components/fx"),h=v("../../lib/str2rgbarray"),s=v("../../lib/show_no_webgl_msg"),o=v("./project"),p=v("./layout/convert"),c=v("./layout/spikes"),a=v("./layout/tick_marks");function y(T,C){var M=document.createElement("div"),I=T.container;this.graphDiv=T.graphDiv;var P=document.createElementNS("http://www.w3.org/2000/svg","svg");P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",P.style["z-index"]=20,P.style["pointer-events"]="none",M.appendChild(P),this.svgContainer=P,M.id=T.id,M.style.position="absolute",M.style.top=M.style.left="0px",M.style.width=M.style.height="100%",I.appendChild(M),this.fullLayout=C,this.id=T.id||"scene",this.fullSceneLayout=C[this.id],this.plotArgs=[[],{},{}],this.axesOptions=p(C,C[this.id]),this.spikeOptions=c(C[this.id]),this.container=M,this.staticMode=!!T.staticPlot,this.pixelRatio=this.pixelRatio||T.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=l.getComponentMethod("annotations3d","convert"),this.drawAnnotations=l.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var u=y.prototype;u.prepareOptions=function(){var T={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:d,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(g||(m=document.createElement("canvas"),g=n({canvas:m,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");T.gl=g,T.canvas=m}return T};var _=!0;u.tryCreatePlot=function(){var T=this.prepareOptions(),C=!0;try{this.glplot=e(T)}catch{if(this.staticMode||!_||d)C=!1;else{r.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{d=T.glOptions.preserveDrawingBuffer=!0,this.glplot=e(T)}catch{d=T.glOptions.preserveDrawingBuffer=!1,C=!1}}}return _=!1,C},u.initializeGLCamera=function(){var T=this.fullSceneLayout.camera;this.camera=x(this.container,{center:[T.center.x,T.center.y,T.center.z],eye:[T.eye.x,T.eye.y,T.eye.z],up:[T.up.x,T.up.y,T.up.z],_ortho:"orthographic"===T.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},u.initializeGLPlot=function(){var T=this;if(T.initializeGLCamera(),!T.tryCreatePlot())return s(T);T.traces={},T.make4thDimension();var C=T.graphDiv,M=C.layout,I=function(){var S={};return T.isCameraChanged(M)&&(S[T.id+".camera"]=T.getCamera()),T.isAspectChanged(M)&&(S[T.id+".aspectratio"]=T.glplot.getAspectratio(),"manual"!==M[T.id].aspectmode&&(T.fullSceneLayout.aspectmode=M[T.id].aspectmode=S[T.id+".aspectmode"]="manual")),S},P=function(S){if(!1!==S.fullSceneLayout.dragmode){var E=I();S.saveLayout(M),S.graphDiv.emit("plotly_relayout",E)}};return T.glplot.canvas&&(T.glplot.canvas.addEventListener("mouseup",function(){P(T)}),T.glplot.canvas.addEventListener("wheel",function(S){if(C._context._scrollZoom.gl3d){if(T.camera._ortho){var E=S.deltaX>S.deltaY?1.1:.9090909090909091,R=T.glplot.getAspectratio();T.glplot.setAspectratio({x:E*R.x,y:E*R.y,z:E*R.z})}P(T)}},!!i&&{passive:!1}),T.glplot.canvas.addEventListener("mousemove",function(){if(!1!==T.fullSceneLayout.dragmode&&0!==T.camera.mouseListener.buttons){var S=I();T.graphDiv.emit("plotly_relayouting",S)}}),T.staticMode||T.glplot.canvas.addEventListener("webglcontextlost",function(S){C&&C.emit&&C.emit("plotly_webglcontextlost",{event:S,layer:T.id})},!1)),T.glplot.oncontextloss=function(){T.recoverContext()},T.glplot.onrender=function(){T.render()},!0},u.render=function(){var T,C=this,M=C.graphDiv,I=C.svgContainer,P=C.container.getBoundingClientRect();M._fullLayout._calcInverseTransform(M);var R=P.width*M._fullLayout._invScaleX,D=P.height*M._fullLayout._invScaleY;I.setAttributeNS(null,"viewBox","0 0 "+R+" "+D),I.setAttributeNS(null,"width",R),I.setAttributeNS(null,"height",D),a(C),C.glplot.axes.update(C.axesOptions);for(var j=Object.keys(C.traces),H=null,Y=C.glplot.selection,X=0;X<j.length;++X)"skip"!==(T=C.traces[j[X]]).data.hoverinfo&&T.handlePick(Y)&&(H=T),T.setContourLevels&&T.setContourLevels();function Z(se,ve,ue){var ye=C.fullSceneLayout[se+"axis"];return"log"!==ye.type&&(ve=ye.d2l(ve)),f.hoverLabelText(ye,ve,ue)}if(null!==H){var re,W=o(C.glplot.cameraParams,Y.dataCoordinate),U=M._fullData[(T=H.data).index],B=Y.index,V={xLabel:Z("x",Y.traceCoordinate[0],T.xhoverformat),yLabel:Z("y",Y.traceCoordinate[1],T.yhoverformat),zLabel:Z("z",Y.traceCoordinate[2],T.zhoverformat)},ee=t.castHoverinfo(U,C.fullLayout,B),N=(ee||"").split("+"),K=ee&&"all"===ee;U.hovertemplate||K||(-1===N.indexOf("x")&&(V.xLabel=void 0),-1===N.indexOf("y")&&(V.yLabel=void 0),-1===N.indexOf("z")&&(V.zLabel=void 0),-1===N.indexOf("text")&&(Y.textLabel=void 0),-1===N.indexOf("name")&&(H.name=void 0));var J=[];"cone"===T.type||"streamtube"===T.type?(V.uLabel=Z("x",Y.traceCoordinate[3],T.uhoverformat),(K||-1!==N.indexOf("u"))&&J.push("u: "+V.uLabel),V.vLabel=Z("y",Y.traceCoordinate[4],T.vhoverformat),(K||-1!==N.indexOf("v"))&&J.push("v: "+V.vLabel),V.wLabel=Z("z",Y.traceCoordinate[5],T.whoverformat),(K||-1!==N.indexOf("w"))&&J.push("w: "+V.wLabel),V.normLabel=Y.traceCoordinate[6].toPrecision(3),(K||-1!==N.indexOf("norm"))&&J.push("norm: "+V.normLabel),"streamtube"===T.type&&(V.divergenceLabel=Y.traceCoordinate[7].toPrecision(3),(K||-1!==N.indexOf("divergence"))&&J.push("divergence: "+V.divergenceLabel)),Y.textLabel&&J.push(Y.textLabel),re=J.join("<br>")):"isosurface"===T.type||"volume"===T.type?(V.valueLabel=f.hoverLabelText(C._mockAxis,C._mockAxis.d2l(Y.traceCoordinate[3]),T.valuehoverformat),J.push("value: "+V.valueLabel),Y.textLabel&&J.push(Y.textLabel),re=J.join("<br>")):re=Y.textLabel;var te={x:Y.traceCoordinate[0],y:Y.traceCoordinate[1],z:Y.traceCoordinate[2],data:U._input,fullData:U,curveNumber:U.index,pointNumber:B};t.appendArrayPointValue(te,U,B),T._module.eventData&&(te=U._module.eventData(te,Y,U,{},B));var ae={points:[te]};if(C.fullSceneLayout.hovermode){var le=[];t.loneHover({trace:U,x:(.5+.5*W[0]/W[3])*R,y:(.5-.5*W[1]/W[3])*D,xLabel:V.xLabel,yLabel:V.yLabel,zLabel:V.zLabel,text:re,name:H.name,color:t.castHoverOption(U,B,"bgcolor")||H.color,borderColor:t.castHoverOption(U,B,"bordercolor"),fontFamily:t.castHoverOption(U,B,"font.family"),fontSize:t.castHoverOption(U,B,"font.size"),fontColor:t.castHoverOption(U,B,"font.color"),nameLength:t.castHoverOption(U,B,"namelength"),textAlign:t.castHoverOption(U,B,"align"),hovertemplate:r.castOption(U,B,"hovertemplate"),hovertemplateLabels:r.extendFlat({},te,V),eventData:[te]},{container:I,gd:M,inOut_bbox:le}),te.bbox=le[0]}M.emit(Y.buttons&&Y.distance<5?"plotly_click":"plotly_hover",ae),this.oldEventData=ae}else t.loneUnhover(I),this.oldEventData&&M.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;C.drawAnnotations(C)},u.recoverContext=function(){var T=this;T.glplot.dispose();var C=function(){T.glplot.gl.isContextLost()?requestAnimationFrame(C):T.initializeGLPlot()?T.plot.apply(T,T.plotArgs):r.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(C)};var b=["xaxis","yaxis","zaxis"];function w(T,C,M){for(var I=T.fullSceneLayout,P=0;P<3;P++){var S=b[P],E=S.charAt(0),R=I[S],D=C[E],j=C[E+"calendar"],H=C["_"+E+"length"];if(r.isArrayOrTypedArray(D))for(var Y,X=0;X<(H||D.length);X++)if(r.isArrayOrTypedArray(D[X]))for(var Z=0;Z<D[X].length;++Z)Y=R.d2l(D[X][Z],0,j),!isNaN(Y)&&isFinite(Y)&&(M[0][P]=Math.min(M[0][P],Y),M[1][P]=Math.max(M[1][P],Y));else Y=R.d2l(D[X],0,j),!isNaN(Y)&&isFinite(Y)&&(M[0][P]=Math.min(M[0][P],Y),M[1][P]=Math.max(M[1][P],Y));else M[0][P]=Math.min(M[0][P],0),M[1][P]=Math.max(M[1][P],H-1)}}u.plot=function(T,C,M){if(this.plotArgs=[T,C,M],!this.glplot.contextLost){var I,P,S,E,R,D,j=C[this.id],H=M[this.id];this.fullLayout=C,this.fullSceneLayout=j,this.axesOptions.merge(C,j),this.spikeOptions.merge(j),this.setViewport(j),this.updateFx(j.dragmode,j.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(h(j.bgcolor)),this.setConvert(R),T?Array.isArray(T)||(T=[T]):T=[];var Y=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(S=0;S<T.length;++S)!0===(I=T[S]).visible&&0!==I._length&&w(this,I,Y);!function(Te,Ee){for(var Ae=Te.fullSceneLayout,De=Ae.annotations||[],Ie=0;Ie<3;Ie++)for(var Oe=b[Ie],Xe=Oe.charAt(0),Fe=Ae[Oe],Pe=0;Pe<De.length;Pe++){var Re=De[Pe];if(Re.visible){var qe=Fe.r2l(Re[Xe]);!isNaN(qe)&&isFinite(qe)&&(Ee[0][Ie]=Math.min(Ee[0][Ie],qe),Ee[1][Ie]=Math.max(Ee[1][Ie],qe))}}}(this,Y);var X=[1,1,1];for(E=0;E<3;++E)X[E]=Y[1][E]===Y[0][E]?1:1/(Y[1][E]-Y[0][E]);for(this.dataScale=X,this.convertAnnotations(this),S=0;S<T.length;++S)!0===(I=T[S]).visible&&0!==I._length&&((P=this.traces[I.uid])?P.data.type===I.type?P.update(I):(P.dispose(),P=I._module.plot(this,I),this.traces[I.uid]=P):(P=I._module.plot(this,I),this.traces[I.uid]=P),P.name=I.name);var Z=Object.keys(this.traces);e:for(S=0;S<Z.length;++S){for(E=0;E<T.length;++E)if(T[E].uid===Z[S]&&!0===T[E].visible&&0!==T[E]._length)continue e;(P=this.traces[Z[S]]).dispose(),delete this.traces[Z[S]]}this.glplot.objects.sort(function(Te,Ee){return Te._trace.data.index-Ee._trace.data.index});var W,re=[[0,0,0],[0,0,0]],U=[],B={};for(S=0;S<3;++S){if((D=(R=j[b[S]]).type)in B?(B[D].acc*=X[S],B[D].count+=1):B[D]={acc:X[S],count:1},R.autorange){re[0][S]=1/0,re[1][S]=-1/0;var V=this.glplot.objects,ee=this.fullSceneLayout.annotations||[],N=R._name.charAt(0);for(E=0;E<V.length;E++){var K=V[E],J=K.bounds,te=K._trace.data._pad||0;re[0][S]="ErrorBars"===K.constructor.name&&R._lowerLogErrorBound?Math.min(re[0][S],R._lowerLogErrorBound):Math.min(re[0][S],J[0][S]/X[S]-te),re[1][S]=Math.max(re[1][S],J[1][S]/X[S]+te)}for(E=0;E<ee.length;E++){var ae=ee[E];if(ae.visible){var le=R.r2l(ae[N]);re[0][S]=Math.min(re[0][S],le),re[1][S]=Math.max(re[1][S],le)}}if("rangemode"in R&&"tozero"===R.rangemode&&(re[0][S]=Math.min(re[0][S],0),re[1][S]=Math.max(re[1][S],0)),re[0][S]>re[1][S])re[0][S]=-1,re[1][S]=1;else{var se=re[1][S]-re[0][S];re[0][S]-=se/32,re[1][S]+=se/32}if("reversed"===R.autorange){var ve=re[0][S];re[0][S]=re[1][S],re[1][S]=ve}}else{var ue=R.range;re[0][S]=R.r2l(ue[0]),re[1][S]=R.r2l(ue[1])}re[0][S]===re[1][S]&&(re[0][S]-=1,re[1][S]+=1),U[S]=re[1][S]-re[0][S],this.glplot.setBounds(S,{min:re[0][S]*X[S],max:re[1][S]*X[S]})}var ye=j.aspectmode;if("cube"===ye)W=[1,1,1];else if("manual"===ye){var Me=j.aspectratio;W=[Me.x,Me.y,Me.z]}else{if("auto"!==ye&&"data"!==ye)throw new Error("scene.js aspectRatio was not one of the enumerated types");var pe=[1,1,1];for(S=0;S<3;++S){var ge=B[D=(R=j[b[S]]).type];pe[S]=Math.pow(ge.acc,1/ge.count)/X[S]}W="data"===ye||Math.max.apply(null,pe)/Math.min.apply(null,pe)<=4?pe:[1,1,1]}j.aspectratio.x=H.aspectratio.x=W[0],j.aspectratio.y=H.aspectratio.y=W[1],j.aspectratio.z=H.aspectratio.z=W[2],this.glplot.setAspectratio(j.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:j.aspectratio.x,y:j.aspectratio.y,z:j.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=j.aspectmode);var we=j.domain||null,oe=C._size||null;if(we&&oe){var de=this.container.style;de.position="absolute",de.left=oe.l+we.x[0]*oe.w+"px",de.top=oe.t+(1-we.y[1])*oe.h+"px",de.width=oe.w*(we.x[1]-we.x[0])+"px",de.height=oe.h*(we.y[1]-we.y[0])+"px"}this.glplot.redraw()}},u.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},u.getCamera=function(){var T;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(T=this.camera).up[0],y:T.up[1],z:T.up[2]},center:{x:T.center[0],y:T.center[1],z:T.center[2]},eye:{x:T.eye[0],y:T.eye[1],z:T.eye[2]},projection:{type:!0===T._ortho?"orthographic":"perspective"}}},u.setViewport=function(T){var C,M=T.camera;this.camera.lookAt.apply(this,[[(C=M).eye.x,C.eye.y,C.eye.z],[C.center.x,C.center.y,C.center.z],[C.up.x,C.up.y,C.up.z]]),this.glplot.setAspectratio(T.aspectratio),"orthographic"===M.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},u.isCameraChanged=function(T){var C=this.getCamera(),M=r.nestedProperty(T,this.id+".camera").get();var R,D,j,H,Y,X,P=!1;if(void 0===M)P=!0;else{for(var S=0;S<3;S++)for(var E=0;E<3;E++)if(R=C,H=E,Y=void 0,X=void 0,X=["x","y","z"],!(D=M)[(Y=["up","center","eye"])[j=S]]||R[Y[j]][X[H]]!==D[Y[j]][X[H]]){P=!0;break}(!M.projection||C.projection&&C.projection.type!==M.projection.type)&&(P=!0)}return P},u.isAspectChanged=function(T){var C=this.glplot.getAspectratio(),M=r.nestedProperty(T,this.id+".aspectratio").get();return void 0===M||M.x!==C.x||M.y!==C.y||M.z!==C.z},u.saveLayout=function(T){var C,M,I,P,S,E,R=this.fullLayout,D=this.isCameraChanged(T),j=this.isAspectChanged(T),H=D||j;if(H){var Y={};D&&(C=this.getCamera(),I=(M=r.nestedProperty(T,this.id+".camera")).get(),Y[this.id+".camera"]=I),j&&(P=this.glplot.getAspectratio(),E=(S=r.nestedProperty(T,this.id+".aspectratio")).get(),Y[this.id+".aspectratio"]=E),l.call("_storeDirectGUIEdit",T,R._preGUI,Y),D&&(M.set(C),r.nestedProperty(R,this.id+".camera").set(C)),j&&(S.set(P),r.nestedProperty(R,this.id+".aspectratio").set(P),this.glplot.redraw())}return H},u.updateFx=function(T,C){var M=this.camera;if(M)if("orbit"===T)M.mode="orbit",M.keyBindingMode="rotate";else if("turntable"===T){M.up=[0,0,1],M.mode="turntable",M.keyBindingMode="rotate";var I=this.graphDiv,P=I._fullLayout,S=this.fullSceneLayout.camera,E=S.up.x,R=S.up.y,D=S.up.z;if(D/Math.sqrt(E*E+R*R+D*D)<.999){var j=this.id+".camera.up",H={x:0,y:0,z:1},Y={};Y[j]=H;var X=I.layout;l.call("_storeDirectGUIEdit",X,P._preGUI,Y),S.up=H,r.nestedProperty(X,j).set(H)}}else M.keyBindingMode=T;this.fullSceneLayout.hovermode=C},u.toImage=function(T){T||(T="png"),this.staticMode&&this.container.appendChild(m),this.glplot.redraw();var C=this.glplot.gl,M=C.drawingBufferWidth,I=C.drawingBufferHeight;C.bindFramebuffer(C.FRAMEBUFFER,null);var P=new Uint8Array(M*I*4);C.readPixels(0,0,M,I,C.RGBA,C.UNSIGNED_BYTE,P),function(j,H,Y){for(var X=0,Z=Y-1;X<Z;++X,--Z)for(var W=0;W<H;++W)for(var re=0;re<4;++re){var U=4*(H*X+W)+re,B=4*(H*Z+W)+re,V=j[U];j[U]=j[B],j[B]=V}}(P,M,I),function(j,H,Y){for(var X=0;X<Y;++X)for(var Z=0;Z<H;++Z){var W=4*(H*X+Z),re=j[W+3];if(re>0)for(var U=255/re,B=0;B<3;++B)j[W+B]=Math.min(U*j[W+B],255)}}(P,M,I);var S=document.createElement("canvas");S.width=M,S.height=I;var E,R=S.getContext("2d",{willReadFrequently:!0}),D=R.createImageData(M,I);switch(D.data.set(P),R.putImageData(D,0,0),T){case"jpeg":E=S.toDataURL("image/jpeg");break;case"webp":E=S.toDataURL("image/webp");break;default:E=S.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(m),E},u.setConvert=function(){for(var T=0;T<3;T++){var C=this.fullSceneLayout[b[T]];f.setConvert(C,this.fullLayout),C.setScale=r.noop}},u.make4thDimension=function(){var T=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},f.setConvert(this._mockAxis,T)},$.exports=y},{"../../../stackgl_modules":1133,"../../components/fx":407,"../../lib":515,"../../lib/show_no_webgl_msg":537,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../../registry":647,"./layout/convert":611,"./layout/spikes":614,"./layout/tick_marks":615,"./project":616,"has-passive-events":229,"webgl-context":332}],618:[function(v,$,Q){"use strict";$.exports=function(m,g,k,x){x=x||m.length;for(var e=new Array(x),n=0;n<x;n++)e[n]=[m[n],g[n],k[n]];return e}},{}],619:[function(v,$,Q){"use strict";var m=v("./font_attributes"),g=v("./animation_attributes"),k=v("../components/color/attributes"),x=v("../components/shapes/draw_newshape/attributes"),e=v("../components/selections/draw_newselection/attributes"),n=v("./pad_attributes"),i=v("../lib/extend").extendFlat,l=m({editType:"calc"});l.family.dflt='"Open Sans", verdana, arial, sans-serif',l.size.dflt=12,l.color.dflt=k.defaultLine,$.exports={font:l,title:{text:{valType:"string",editType:"layoutstyle"},font:m({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:i(n({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:k.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:k.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:k.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:x.newshape,activeshape:x.activeshape,newselection:e.newselection,activeselection:e.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:i({},g.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:m({editType:"layoutstyle"})}}},{"../components/color/attributes":366,"../components/selections/draw_newselection/attributes":451,"../components/shapes/draw_newshape/attributes":463,"../lib/extend":505,"./animation_attributes":560,"./font_attributes":594,"./pad_attributes":627}],620:[function(v,$,Q){"use strict";var m=v("../../lib/sort_object_keys"),g='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',k=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',g].join(" "),x=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:g,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:k,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:k,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:x,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:x,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},n=m(e);$.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:n,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",n.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":538}],621:[function(v,$,Q){"use strict";var m=v("../../lib");$.exports=function(g,k){var x=g.split(" "),e=x[0],n=x[1],i=m.isArrayOrTypedArray(k)?m.mean(k):k,l=.5+i/100,r=1.5+i/100,d=["",""],f=[0,0];switch(e){case"top":d[0]="top",f[1]=-r;break;case"bottom":d[0]="bottom",f[1]=r}switch(n){case"left":d[1]="right",f[0]=-l;break;case"right":d[1]="left",f[0]=l}return{anchor:d[0]&&d[1]?d.join("-"):d[0]?d[0]:d[1]?d[1]:"center",offset:f}}},{"../../lib":515}],622:[function(v,$,Q){"use strict";var m=v("mapbox-gl/dist/mapbox-gl-unminified"),g=v("../../lib"),k=g.strTranslate,x=g.strScale,e=v("../../plots/get_data").getSubplotCalcData,n=v("../../constants/xmlns_namespaces"),i=v("@plotly/d3"),l=v("../../components/drawing"),r=v("../../lib/svg_text_utils"),d=v("./mapbox"),f=Q.constants=v("./constants");function t(h){return"string"==typeof h&&(-1!==f.styleValuesMapbox.indexOf(h)||0===h.indexOf("mapbox://"))}Q.name="mapbox",Q.attr="subplot",Q.idRoot="mapbox",Q.idRegex=Q.attrRegex=g.counterRegex("mapbox"),Q.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},Q.layoutAttributes=v("./layout_attributes"),Q.supplyLayoutDefaults=v("./layout_defaults"),Q.plot=function(h){var s=h._fullLayout,o=h.calcdata,p=s._subplots.mapbox;if(m.version!==f.requiredVersion)throw new Error(f.wrongVersionErrorMsg);var c=function(w,T){var C=w._fullLayout;if(""===w._context.mapboxAccessToken)return"";for(var M=[],I=[],P=!1,S=!1,E=0;E<T.length;E++){var R=C[T[E]],D=R.accesstoken;t(R.style)&&(D?g.pushUnique(M,D):(t(R._input.style)&&(g.error("Uses Mapbox map style, but did not set an access token."),P=!0),S=!0)),D&&g.pushUnique(I,D)}if(S){var j=P?f.noAccessTokenErrorMsg:f.missingStyleErrorMsg;throw g.error(j),new Error(j)}return M.length?(M.length>1&&g.warn(f.multipleTokensErrorMsg),M[0]):(I.length&&g.log(["Listed mapbox access token(s)",I.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(h,p);m.accessToken=c;for(var a=0;a<p.length;a++){var y=p[a],u=e(o,"mapbox",y),_=s[y],b=_._subplot;b||(b=new d(h,y),s[y]._subplot=b),b.viewInitial||(b.viewInitial={center:g.extendFlat({},_.center),zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),b.plot(u,s,h._promises)}},Q.clean=function(h,s,o,p){for(var c=p._subplots.mapbox||[],a=0;a<c.length;a++){var y=c[a];!s[y]&&p[y]._subplot&&p[y]._subplot.destroy()}},Q.toSVG=function(h){for(var s=h._fullLayout,o=s._subplots.mapbox,p=s._size,c=0;c<o.length;c++){var a=s[o[c]],y=a.domain,u=a._subplot.toImage("png");s._glimages.append("svg:image").attr({xmlns:n.svg,"xlink:href":u,x:p.l+p.w*y.x[0],y:p.t+p.h*(1-y.y[1]),width:p.w*(y.x[1]-y.x[0]),height:p.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"});var _=i.select(a._subplot.div);if(null!==_.select(".mapboxgl-ctrl-logo").node().offsetParent){var b=s._glimages.append("g");b.attr("transform",k(p.l+p.w*y.x[0]+10,p.t+p.h*(1-y.y[0])-31)),b.append("path").attr("d",f.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),b.append("path").attr("d",f.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),b.append("path").attr("d",f.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),b.append("polygon").attr("points",f.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var w=_.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),T=s._glimages.append("g"),C=T.append("text");C.text(w).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":w});var M=l.bBox(C.node()),I=p.w*(y.x[1]-y.x[0]);if(M.width>I/2){var P=w.split("|").join("<br>");C.text(P).attr("data-unformatted",P).call(r.convertToTspans,h),M=l.bBox(C.node())}C.attr("transform",k(-3,8-M.height)),T.insert("rect",".static-attribution").attr({x:-M.width-6,y:-M.height-3,width:M.width+6,height:M.height+3,fill:"rgba(255, 255, 255, 0.75)"});var S=1;M.width+6>I&&(S=I/(M.width+6));var E=[p.l+p.w*y.x[1],p.t+p.h*(1-y.y[0])];T.attr("transform",k(E[0],E[1])+x(S))}},Q.updateFx=function(h){for(var s=h._fullLayout,o=s._subplots.mapbox,p=0;p<o.length;p++)s[o[p]]._subplot.updateFx(s)}},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/get_data":602,"./constants":620,"./layout_attributes":624,"./layout_defaults":625,"./mapbox":626,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],623:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../lib/svg_text_utils").sanitizeHTML,k=v("./convert_text_opts"),x=v("./constants");function e(r,d){this.subplot=r,this.uid=r.uid+"-"+d,this.index=d,this.idSource="source-"+this.uid,this.idLayer=x.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var n=e.prototype;function i(r){if(!r.visible)return!1;var d=r.source;if(Array.isArray(d)&&d.length>0){for(var f=0;f<d.length;f++)if("string"!=typeof d[f]||0===d[f].length)return!1;return!0}return m.isPlainObject(d)||"string"==typeof d&&d.length>0}function l(r){var d={},f={};switch(r.type){case"circle":m.extendFlat(f,{"circle-radius":r.circle.radius,"circle-color":r.color,"circle-opacity":r.opacity});break;case"line":m.extendFlat(f,{"line-width":r.line.width,"line-color":r.color,"line-opacity":r.opacity,"line-dasharray":r.line.dash});break;case"fill":m.extendFlat(f,{"fill-color":r.color,"fill-outline-color":r.fill.outlinecolor,"fill-opacity":r.opacity});break;case"symbol":var t=r.symbol,h=k(t.textposition,t.iconsize);m.extendFlat(d,{"icon-image":t.icon+"-15","icon-size":t.iconsize/10,"text-field":t.text,"text-size":t.textfont.size,"text-anchor":h.anchor,"text-offset":h.offset,"symbol-placement":t.placement}),m.extendFlat(f,{"icon-color":r.color,"text-color":t.textfont.color,"text-opacity":r.opacity});break;case"raster":m.extendFlat(f,{"raster-fade-duration":0,"raster-opacity":r.opacity})}return{layout:d,paint:f}}n.update=function(r){this.visible?this.needsNewImage(r)?this.updateImage(r):this.needsNewSource(r)?(this.removeLayer(),this.updateSource(r),this.updateLayer(r)):this.needsNewLayer(r)?this.updateLayer(r):this.updateStyle(r):(this.updateSource(r),this.updateLayer(r)),this.visible=i(r)},n.needsNewImage=function(r){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===r.sourcetype&&(this.source!==r.source||JSON.stringify(this.coordinates)!==JSON.stringify(r.coordinates))},n.needsNewSource=function(r){return this.sourceType!==r.sourcetype||JSON.stringify(this.source)!==JSON.stringify(r.source)||this.layerType!==r.type},n.needsNewLayer=function(r){return this.layerType!==r.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},n.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},n.updateImage=function(r){this.subplot.map.getSource(this.idSource).updateImage({url:r.source,coordinates:r.coordinates});var d=this.findFollowingMapboxLayerId(this.lookupBelow());null!==d&&this.subplot.map.moveLayer(this.idLayer,d)},n.updateSource=function(r){var t,h,s,o,p,d=this.subplot.map;if(d.getSource(this.idSource)&&d.removeSource(this.idSource),this.sourceType=r.sourcetype,this.source=r.source,i(r)){var f=(o=(t=r).source,p={type:s=t.sourcetype},"geojson"===s?h="data":"vector"===s?h="string"==typeof o?"url":"tiles":"raster"===s?(h="tiles",p.tileSize=256):"image"===s&&(h="url",p.coordinates=t.coordinates),p[h]=o,t.sourceattribution&&(p.attribution=g(t.sourceattribution)),p);d.addSource(this.idSource,f)}},n.findFollowingMapboxLayerId=function(r){if("traces"===r)for(var d=this.subplot.getMapLayers(),f=0;f<d.length;f++){var t=d[f].id;if("string"==typeof t&&0===t.indexOf(x.traceLayerPrefix)){r=t;break}}return r},n.updateLayer=function(r){var d=this.subplot,f=l(r),t=this.lookupBelow(),h=this.findFollowingMapboxLayerId(t);this.removeLayer(),i(r)&&d.addLayer({id:this.idLayer,source:this.idSource,"source-layer":r.sourcelayer||"",type:r.type,minzoom:r.minzoom,maxzoom:r.maxzoom,layout:f.layout,paint:f.paint},h),this.layerType=r.type,this.below=t},n.updateStyle=function(r){if(i(r)){var d=l(r);this.subplot.setOptions(this.idLayer,"setLayoutProperty",d.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",d.paint)}},n.removeLayer=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer)},n.dispose=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer),r.getSource(this.idSource)&&r.removeSource(this.idSource)},$.exports=function(r,d,f){var t=new e(r,d);return t.update(f),t}},{"../../lib":515,"../../lib/svg_text_utils":541,"./constants":620,"./convert_text_opts":621}],624:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/color").defaultLine,k=v("../domain").attributes,x=v("../font_attributes"),e=v("../../traces/scatter/attributes").textposition,n=v("../../plot_api/edit_types").overrideAll,i=v("../../plot_api/plot_template").templatedArray,l=v("./constants"),r=x({});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular",($.exports=n({_arrayAttrRegexps:[m.counterRegex("mapbox",".layers",!0)],domain:k({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:l.styleValuesMapbox.concat(l.styleValuesNonMapbox),dflt:l.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:i("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:g},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:g}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:r,textposition:m.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":367,"../../lib":515,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../domain":593,"../font_attributes":594,"./constants":620}],625:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../subplot_defaults"),k=v("../array_container_defaults"),x=v("./layout_attributes");function e(i,l,r,d){r("accesstoken",d.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch");var f=r("bounds.west"),t=r("bounds.east"),h=r("bounds.south"),s=r("bounds.north");void 0!==f&&void 0!==t&&void 0!==h&&void 0!==s||delete l.bounds,k(i,l,{name:"layers",handleItemDefaults:n}),l._input=i}function n(i,l){function r(s,o){return m.coerce(i,l,x.layers,s,o)}if(r("visible")){var d,f=r("sourcetype"),t="raster"===f||"image"===f;r("source"),r("sourceattribution"),"vector"===f&&r("sourcelayer"),"image"===f&&r("coordinates"),t&&(d="raster");var h=r("type",d);t&&"raster"!==h&&(h=l.type="raster",m.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),"circle"===h&&r("circle.radius"),"line"===h&&(r("line.width"),r("line.dash")),"fill"===h&&r("fill.outlinecolor"),"symbol"===h&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),m.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}$.exports=function(i,l,r){g(i,l,r,{type:"mapbox",attributes:x,handleDefaults:e,partition:"y",accessToken:l._mapboxAccessToken})}},{"../../lib":515,"../array_container_defaults":561,"../subplot_defaults":641,"./layout_attributes":624}],626:[function(v,$,Q){"use strict";var m=v("mapbox-gl/dist/mapbox-gl-unminified"),g=v("../../lib"),k=v("../../lib/geo_location_utils"),x=v("../../registry"),e=v("../cartesian/axes"),n=v("../../components/dragelement"),i=v("../../components/fx"),l=v("../../components/dragelement/helpers"),r=l.drawMode,d=l.selectMode,f=v("../../components/selections").prepSelect,t=v("../../components/selections").clearOutline,h=v("../../components/selections").clearSelectionsCache,s=v("../../components/selections").selectOnClick,o=v("./constants"),p=v("./layers");function c(w,T){this.id=T,this.gd=w;var C=w._fullLayout,M=w._context;this.container=C._glcontainer.node(),this.isStatic=M.staticPlot,this.uid=C._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(C),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var a=c.prototype;a.plot=function(w,T,C){var M,I=this;I.map&&T[I.id].accesstoken!==I.accessToken&&(I.map.remove(),I.map=null,I.styleObj=null,I.traceHash={},I.layerList=[]),M=new Promise(I.map?function(S,E){I.updateMap(w,T,S,E)}:function(S,E){I.createMap(w,T,S,E)}),C.push(M)},a.createMap=function(w,T,C,M){var I=this,P=T[I.id],S=I.styleObj=u(P.style);I.accessToken=P.accesstoken;var E=P.bounds,R=E?[[E.west,E.south],[E.east,E.north]]:null,D=I.map=new m.Map({container:I.div,style:S.style,center:b(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,maxBounds:R,interactive:!I.isStatic,preserveDrawingBuffer:I.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new m.AttributionControl({compact:!0}));D._canvas.style.left="0px",D._canvas.style.top="0px",I.rejectOnError(M),I.isStatic||I.initFx(w,T);var j=[];j.push(new Promise(function(H){D.once("load",H)})),j=j.concat(k.fetchTraceGeoData(w)),Promise.all(j).then(function(){I.fillBelowLookup(w,T),I.updateData(w),I.updateLayout(T),I.resolveOnRender(C)}).catch(M)},a.updateMap=function(w,T,C,M){var I=this,P=I.map,S=T[this.id];I.rejectOnError(M);var E=[],R=u(S.style);JSON.stringify(I.styleObj)!==JSON.stringify(R)&&(I.styleObj=R,P.setStyle(R.style),I.traceHash={},E.push(new Promise(function(D){P.once("styledata",D)}))),E=E.concat(k.fetchTraceGeoData(w)),Promise.all(E).then(function(){I.fillBelowLookup(w,T),I.updateData(w),I.updateLayout(T),I.resolveOnRender(C)}).catch(M)},a.fillBelowLookup=function(w,T){var C,M,I=T[this.id].layers,P=this.belowLookup={},S=!1;for(C=0;C<w.length;C++){var E=w[C][0].trace,R=E._module;"string"==typeof E.below?M=E.below:R.getBelow&&(M=R.getBelow(E,this)),""===M&&(S=!0),P["trace-"+E.uid]=M||""}for(C=0;C<I.length;C++){var D=I[C];P["layout-"+C]=M="string"==typeof D.below?D.below:S?"traces":""}var j,H,Y={};for(j in P)Y[M=P[j]]?Y[M].push(j):Y[M]=[j];for(M in Y){var X=Y[M];if(X.length>1)for(C=0;C<X.length;C++)0===(j=X[C]).indexOf("trace-")?(H=j.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):0===j.indexOf("layout-")&&(H=j.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))}};var y={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function u(w){var T={};return g.isPlainObject(w)?(T.id=w.id,T.style=w):"string"==typeof w?(T.id=w,T.style=-1!==o.styleValuesMapbox.indexOf(w)?_(w):o.stylesNonMapbox[w]?o.stylesNonMapbox[w]:w):(T.id=o.styleValueDflt,T.style=_(o.styleValueDflt)),T.transition={duration:0,delay:0},T}function _(w){return o.styleUrlPrefix+w+"-"+o.styleUrlSuffix}function b(w){return[w.lon,w.lat]}a.updateData=function(w){var T,C,M,I,P=this.traceHash,S=w.slice().sort(function(H,Y){return y[H[0].trace.type]-y[Y[0].trace.type]});for(M=0;M<S.length;M++){var E=S[M],R=!1;(T=P[(C=E[0].trace).uid])&&(T.type===C.type?(T.update(E),R=!0):T.dispose()),!R&&C._module&&(P[C.uid]=C._module.plot(this,E))}var D=Object.keys(P);e:for(M=0;M<D.length;M++){var j=D[M];for(I=0;I<w.length;I++)if(j===(C=w[I][0].trace).uid)continue e;(T=P[j]).dispose(),delete P[j]}},a.updateLayout=function(w){var T=this.map,C=w[this.id];this.dragging||this.wheeling||(T.setCenter(b(C.center)),T.setZoom(C.zoom),T.setBearing(C.bearing),T.setPitch(C.pitch)),this.updateLayers(w),this.updateFramework(w),this.updateFx(w),this.map.resize(),this.gd._context._scrollZoom.mapbox?T.scrollZoom.enable():T.scrollZoom.disable()},a.resolveOnRender=function(w){var T=this.map;T.on("render",function C(){T.loaded()&&(T.off("render",C),setTimeout(w,10))})},a.rejectOnError=function(w){var T=this.map;function C(){w(new Error(o.mapOnErrorMsg))}T.once("error",C),T.once("style.error",C),T.once("source.error",C),T.once("tile.error",C),T.once("layer.error",C)},a.createFramework=function(w){var T=this,C=T.div=document.createElement("div");C.id=T.uid,C.style.position="absolute",T.container.appendChild(C),T.xaxis={_id:"x",c2p:function(M){return T.project(M).x}},T.yaxis={_id:"y",c2p:function(M){return T.project(M).y}},T.updateFramework(w),T.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(T.mockAxis,w)},a.initFx=function(w,T){var C=this,M=C.gd,I=C.map;function P(){i.loneUnhover(T._hoverlayer)}function S(){var E=C.getView();M.emit("plotly_relayouting",C.getViewEditsWithDerived(E))}I.on("moveend",function(E){if(C.map){var R=M._fullLayout;if(E.originalEvent||C.wheeling){var D=R[C.id];x.call("_storeDirectGUIEdit",M.layout,R._preGUI,C.getViewEdits(D));var j=C.getView();D._input.center=D.center=j.center,D._input.zoom=D.zoom=j.zoom,D._input.bearing=D.bearing=j.bearing,D._input.pitch=D.pitch=j.pitch,M.emit("plotly_relayout",C.getViewEditsWithDerived(j))}E.originalEvent&&"mouseup"===E.originalEvent.type?C.dragging=!1:C.wheeling&&(C.wheeling=!1),R._rehover&&R._rehover()}}),I.on("wheel",function(){C.wheeling=!0}),I.on("mousemove",function(E){var R=C.div.getBoundingClientRect(),D=[E.originalEvent.offsetX,E.originalEvent.offsetY];E.target.getBoundingClientRect=function(){return R},C.xaxis.p2c=function(){return I.unproject(D).lng},C.yaxis.p2c=function(){return I.unproject(D).lat},M._fullLayout._rehover=function(){M._fullLayout._hoversubplot===C.id&&M._fullLayout[C.id]&&i.hover(M,E,C.id)},i.hover(M,E,C.id),M._fullLayout._hoversubplot=C.id}),I.on("dragstart",function(){C.dragging=!0,P()}),I.on("zoomstart",P),I.on("mouseout",function(){M._fullLayout._hoversubplot=null}),I.on("drag",S),I.on("zoom",S),I.on("dblclick",function(){var E=M._fullLayout[C.id];x.call("_storeDirectGUIEdit",M.layout,M._fullLayout._preGUI,C.getViewEdits(E));var R=C.viewInitial;I.setCenter(b(R.center)),I.setZoom(R.zoom),I.setBearing(R.bearing),I.setPitch(R.pitch);var D=C.getView();E._input.center=E.center=D.center,E._input.zoom=E.zoom=D.zoom,E._input.bearing=E.bearing=D.bearing,E._input.pitch=E.pitch=D.pitch,M.emit("plotly_doubleclick",null),M.emit("plotly_relayout",C.getViewEditsWithDerived(D))}),C.clearOutline=function(){h(C.dragOptions),t(C.dragOptions.gd)},C.onClickInPanFn=function(E){return function(R){var D=M._fullLayout.clickmode;D.indexOf("select")>-1&&s(R.originalEvent,M,[C.xaxis],[C.yaxis],C.id,E),D.indexOf("event")>-1&&i.click(M,R.originalEvent)}}},a.updateFx=function(w){var T=this,C=T.map;if(!T.isStatic){var P=w.dragmode;T.dragOptions=g.extendDeep(T.dragOptions||{},{dragmode:w.dragmode,element:T.div,gd:T.gd,plotinfo:{id:T.id,domain:w[T.id].domain,xaxis:T.xaxis,yaxis:T.yaxis,fillRangeItems:function(R,D){D.isRect?(R.range={})[T.id]=[E([D.xmin,D.ymin]),E([D.xmax,D.ymax])]:(R.lassoPoints={})[T.id]=D.map(E)}},xaxes:[T.xaxis],yaxes:[T.yaxis],subplot:T.id}),C.off("click",T.onClickInPanHandler),d(P)||r(P)?(C.dragPan.disable(),C.on("zoomstart",T.clearOutline),T.dragOptions.prepFn=function(R,D,j){f(R,D,j,T.dragOptions,P)},n.init(T.dragOptions)):(C.dragPan.enable(),C.off("zoomstart",T.clearOutline),T.div.onmousedown=null,T.div.ontouchstart=null,T.div.removeEventListener("touchstart",T.div._ontouchstart),T.onClickInPanHandler=T.onClickInPanFn(T.dragOptions),C.on("click",T.onClickInPanHandler))}function E(R){var D=T.map.unproject(R);return[D.lng,D.lat]}},a.updateFramework=function(w){var T=w[this.id].domain,C=w._size,M=this.div.style;M.width=C.w*(T.x[1]-T.x[0])+"px",M.height=C.h*(T.y[1]-T.y[0])+"px",M.left=C.l+T.x[0]*C.w+"px",M.top=C.t+(1-T.y[1])*C.h+"px",this.xaxis._offset=C.l+T.x[0]*C.w,this.xaxis._length=C.w*(T.x[1]-T.x[0]),this.yaxis._offset=C.t+(1-T.y[1])*C.h,this.yaxis._length=C.h*(T.y[1]-T.y[0])},a.updateLayers=function(w){var T,C=w[this.id].layers,M=this.layerList;if(C.length!==M.length){for(T=0;T<M.length;T++)M[T].dispose();for(M=this.layerList=[],T=0;T<C.length;T++)M.push(p(this,T,C[T]))}else for(T=0;T<C.length;T++)M[T].update(C[T])},a.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},a.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},a.setOptions=function(w,T,C){for(var M in C)this.map[T](w,M,C[M])},a.getMapLayers=function(){return this.map.getStyle().layers},a.addLayer=function(w,T){var C=this.map;if("string"==typeof T){if(""===T)return void C.addLayer(w,T);for(var M=this.getMapLayers(),I=0;I<M.length;I++)if(T===M[I].id)return void C.addLayer(w,T);g.warn(["Trying to add layer with *below* value",T,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}C.addLayer(w)},a.project=function(w){return this.map.project(new m.LngLat(w[0],w[1]))},a.getView=function(){var w=this.map,T=w.getCenter(),C={lon:T.lng,lat:T.lat},M=w.getCanvas(),I=parseInt(M.style.width),P=parseInt(M.style.height);return{center:C,zoom:w.getZoom(),bearing:w.getBearing(),pitch:w.getPitch(),_derived:{coordinates:[w.unproject([0,0]).toArray(),w.unproject([I,0]).toArray(),w.unproject([I,P]).toArray(),w.unproject([0,P]).toArray()]}}},a.getViewEdits=function(w){for(var T=this.id,C=["center","zoom","bearing","pitch"],M={},I=0;I<C.length;I++){var P=C[I];M[T+"."+P]=w[P]}return M},a.getViewEditsWithDerived=function(w){var T=this.id,C=this.getViewEdits(w);return C[T+"._derived"]=w._derived,C},$.exports=c},{"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../registry":647,"../cartesian/axes":566,"./constants":620,"./layers":623,"mapbox-gl/dist/mapbox-gl-unminified":239}],627:[function(v,$,Q){"use strict";$.exports=function(m){var g=m.editType;return{t:{valType:"number",dflt:0,editType:g},r:{valType:"number",dflt:0,editType:g},b:{valType:"number",dflt:0,editType:g},l:{valType:"number",dflt:0,editType:g},editType:g}}},{}],628:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("d3-time-format").timeFormatLocale,k=v("d3-format").formatLocale,x=v("fast-isnumeric"),e=v("../registry"),n=v("../plot_api/plot_schema"),i=v("../plot_api/plot_template"),l=v("../lib"),r=v("../components/color"),d=v("../constants/numerical").BADNUM,f=v("./cartesian/axis_ids"),t=v("../components/shapes/handle_outline").clearOutline,h=v("./animation_attributes"),s=v("./frame_attributes"),o=v("../plots/get_data").getModuleCalcData,p=l.relinkPrivateKeys,c=l._,a=$.exports={};l.extendFlat(a,e),a.attributes=v("./attributes"),a.attributes.type.values=a.allTypes,a.fontAttrs=v("./font_attributes"),a.layoutAttributes=v("./layout_attributes"),a.fontWeight="normal";var y=a.transformsRegistry,u=v("./command");a.executeAPICommand=u.executeAPICommand,a.computeAPICommandBindings=u.computeAPICommandBindings,a.manageCommandObserver=u.manageCommandObserver,a.hasSimpleAPICommandBindings=u.hasSimpleAPICommandBindings,a.redrawText=function(H){return H=l.getGraphDiv(H),new Promise(function(Y){setTimeout(function(){H._fullLayout&&(e.getComponentMethod("annotations","draw")(H),e.getComponentMethod("legend","draw")(H),e.getComponentMethod("colorbar","draw")(H),Y(a.previousPromises(H)))},300)})},a.resize=function(H){var Y;H=l.getGraphDiv(H);var X=new Promise(function(Z,W){H&&!l.isHidden(H)||W(new Error("Resize must be passed a displayed plot div element.")),H._redrawTimer&&clearTimeout(H._redrawTimer),H._resolveResize&&(Y=H._resolveResize),H._resolveResize=Z,H._redrawTimer=setTimeout(function(){if(!H.layout||H.layout.width&&H.layout.height||l.isHidden(H))Z(H);else{delete H.layout.width,delete H.layout.height;var re=H.changed;H.autoplay=!0,e.call("relayout",H,{autosize:!0}).then(function(){H.changed=re,H._resolveResize===Z&&(delete H._resolveResize,Z(H))})}},100)});return Y&&Y(X),X},a.previousPromises=function(H){if((H._promises||[]).length)return Promise.all(H._promises).then(function(){H._promises=[]})},a.addLinks=function(H){if(H._context.showLink||H._context.showSources){var Y=H._fullLayout,X=l.ensureSingle(Y._paper,"text","js-plot-link-container",function(V){V.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var ee=m.select(this);ee.append("tspan").classed("js-link-to-tool",!0),ee.append("tspan").classed("js-link-spacer",!0),ee.append("tspan").classed("js-sourcelinks",!0)})}),Z=X.node(),W={y:Y._paper.attr("height")-9};document.body.contains(Z)&&Z.getComputedTextLength()>=Y.width-20?(W["text-anchor"]="start",W.x=5):(W["text-anchor"]="end",W.x=Y._paper.attr("width")-7),X.attr(W);var re=X.select(".js-link-to-tool"),U=X.select(".js-link-spacer"),B=X.select(".js-sourcelinks");H._context.showSources&&H._context.showSources(H),H._context.showLink&&function(V,ee){ee.text("");var N=ee.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(V._context.linkText+" "+String.fromCharCode(187));if(V._context.sendData)N.on("click",function(){a.sendDataToCloud(V)});else{var K=window.location.pathname.split("/"),J=window.location.search;N.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+K[2].split(".")[0]+"/"+K[1]+J})}}(H,re),U.text(re.text()&&B.text()?" - ":"")}},a.sendDataToCloud=function(H){var Y=(window.PLOTLYENV||{}).BASE_URL||H._context.plotlyServerURL;if(Y){H.emit("plotly_beforeexport");var X=m.select(H).append("div").attr("id","hiddenform").style("display","none"),Z=X.append("form").attr({action:Y+"/external",method:"post",target:"_blank"});return Z.append("input").attr({type:"text",name:"data"}).node().value=a.graphJson(H,!1,"keepdata"),Z.node().submit(),X.remove(),H.emit("plotly_afterexport"),!1}};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],b=["year","month","dayMonth","dayMonthYear"];function w(H,Y){var X=H._context.locale;X||(X="en-US");var Z=!1,W={};function re(K){for(var J=!0,te=0;te<Y.length;te++){var ae=Y[te];W[ae]||(K[ae]?W[ae]=K[ae]:J=!1)}J&&(Z=!0)}for(var U=0;U<2;U++){for(var B=H._context.locales,V=0;V<2;V++){var ee=(B[X]||{}).format;if(ee&&(re(ee),Z))break;B=e.localeRegistry}var N=X.split("-")[0];if(Z||N===X)break;X=N}return Z||re(e.localeRegistry.en.format),W}function T(H,Y){var X={_fullLayout:Y},Z="x"===H._id.charAt(0),W=H._mainAxis._anchorAxis,re="",U="",B="";if(W&&(B=W._mainAxis._id,re=Z?H._id+B:B+H._id),!re||!Y._plots[re]){re="";for(var V=H._counterAxes,ee=0;ee<V.length;ee++){var N=V[ee],K=Z?H._id+N:N+H._id;U||(U=K);var J=f.getFromId(X,N);if(B&&J.overlaying===B){re=K;break}}}return re||U}function C(H){var Y=H.transforms;if(Array.isArray(Y)&&Y.length)for(var X=0;X<Y.length;X++){var Z=Y[X],W=Z._module||y[Z.type];if(W&&W.makesData)return!0}return!1}function M(H,Y,X,Z){for(var W=H.transforms,re=[H],U=0;U<W.length;U++){var B=W[U],V=y[B.type];V&&V.transform&&(re=V.transform(re,{transform:B,fullTrace:H,fullData:Y,layout:X,fullLayout:Z,transformIndex:U}))}return re}function I(H){return"string"==typeof H&&"px"===H.substr(H.length-2)&&parseFloat(H)}function P(H){var Y=H.margin;if(!H._size){var X=H._size={l:Math.round(Y.l),r:Math.round(Y.r),t:Math.round(Y.t),b:Math.round(Y.b),p:Math.round(Y.pad)};X.w=Math.round(H.width)-X.l-X.r,X.h=Math.round(H.height)-X.t-X.b}H._pushmargin||(H._pushmargin={}),H._pushmarginIds||(H._pushmarginIds={})}a.supplyDefaults=function(H,Y){var Pe,Re,X=Y&&Y.skipUpdateCalc,Z=H._fullLayout||{};if(Z._skipDefaults)delete Z._skipDefaults;else{var W,re=H._fullLayout={},U=H.layout||{},B=H._fullData||[],V=H._fullData=[],ee=H.data||[],N=H.calcdata||[],K=H._context||{};H._transitionData||a.createTransitionData(H),re._dfltTitle={plot:c(H,"Click to enter Plot title"),x:c(H,"Click to enter X axis title"),y:c(H,"Click to enter Y axis title"),colorbar:c(H,"Click to enter Colorscale title"),annotation:c(H,"new text")},re._traceWord=c(H,"trace");var J=w(H,_);if(re._mapboxAccessToken=K.mapboxAccessToken,Z._initialAutoSizeIsDone){var te=Z.width,ae=Z.height;a.supplyLayoutGlobalDefaults(U,re,J),U.width||(re.width=te),U.height||(re.height=ae),a.sanitizeMargins(re)}else{a.supplyLayoutGlobalDefaults(U,re,J);var le=!U.width||!U.height,se=re.autosize;le&&(se||K.autosizable)?a.plotAutoSize(H,U,re):le&&a.sanitizeMargins(re),!se&&le&&(U.width=re.width,U.height=re.height)}re._d3locale=((Pe=J).decimal=(Re=re.separators).charAt(0),Pe.thousands=Re.charAt(1),{numberFormat:function(qe){try{qe=k(Pe).format(l.adjustFormat(qe))}catch{return l.warnBadFormat(qe),l.noFormat}return qe},timeFormat:g(Pe).utcFormat}),re._extraFormat=w(H,b),re._initialAutoSizeIsDone=!0,re._dataLength=ee.length,re._modules=[],re._visibleModules=[],re._basePlotModules=[];var ue=re._subplots=function(){var Pe,Re,qe=e.collectableSubplotTypes,Qe={};if(!qe){qe=[];var ct=e.subplotsRegistry;for(var bt in ct){var Tt=ct[bt].attr;if(Tt&&(qe.push(bt),Array.isArray(Tt)))for(Re=0;Re<Tt.length;Re++)l.pushUnique(qe,Tt[Re])}}for(Pe=0;Pe<qe.length;Pe++)Qe[qe[Pe]]=[];return Qe}(),ye=re._splomAxes={x:{},y:{}},Me=re._splomSubplots={};re._splomGridDflt={},re._scatterStackOpts={},re._firstScatter={},re._alignmentOpts={},re._colorAxes={},re._requestRangeslider={},re._traceUids=function(Pe,Re){var qe,Qe,ct=Re.length,bt=[];for(qe=0;qe<Pe.length;qe++){var Tt=Pe[qe]._fullInput;Tt!==Qe&&bt.push(Tt),Qe=Tt}var _t=bt.length,nt=new Array(ct),Ke={};function xt($t,Xt){nt[Xt]=$t,Ke[$t]=1}function Ht($t,Xt){if($t&&"string"==typeof $t&&!Ke[$t])return xt($t,Xt),!0}for(qe=0;qe<ct;qe++){var Zt=Re[qe].uid;"number"==typeof Zt&&(Zt=String(Zt)),Ht(Zt,qe)||qe<_t&&Ht(bt[qe].uid,qe)||xt(l.randstr(Ke),qe)}return nt}(B,ee),re._globalTransforms=(H._context||{}).globalTransforms,a.supplyDataDefaults(ee,V,U,re);var pe=Object.keys(ye.x),ge=Object.keys(ye.y);if(pe.length>1&&ge.length>1){for(e.getComponentMethod("grid","sizeDefaults")(U,re),W=0;W<pe.length;W++)l.pushUnique(ue.xaxis,pe[W]);for(W=0;W<ge.length;W++)l.pushUnique(ue.yaxis,ge[W]);for(var we in Me)l.pushUnique(ue.cartesian,we)}if(re._has=a._hasPlotType.bind(re),B.length===V.length)for(W=0;W<V.length;W++)p(V[W],B[W]);a.supplyLayoutModuleDefaults(U,re,V,H._transitionData);var oe=re._visibleModules,de=[];for(W=0;W<oe.length;W++){var Te=oe[W].crossTraceDefaults;Te&&l.pushUnique(de,Te)}for(W=0;W<de.length;W++)de[W](V,re);re._hasOnlyLargeSploms=1===re._basePlotModules.length&&"splom"===re._basePlotModules[0].name&&pe.length>15&&ge.length>15&&0===re.shapes.length&&0===re.images.length,a.linkSubplots(V,re,B,Z),a.cleanPlot(V,re,B,Z);var Ee=!(!Z._has||!Z._has("gl2d")),Ae=!(!re._has||!re._has("gl2d")),De=!(!Z._has||!Z._has("cartesian"))||Ee,Ie=!(!re._has||!re._has("cartesian"))||Ae;De&&!Ie?Z._bgLayer.remove():Ie&&!De&&(re._shouldCreateBgLayer=!0),Z._zoomlayer&&!H._dragging&&t({_fullLayout:Z}),function(Pe,Re){var qe,Qe=[];Re.meta&&(qe=Re._meta={meta:Re.meta,layout:{meta:Re.meta}});for(var ct=0;ct<Pe.length;ct++){var bt=Pe[ct];bt.meta?Qe[bt.index]=bt._meta={meta:bt.meta}:Re.meta&&(bt._meta={meta:Re.meta}),Re.meta&&(bt._meta.layout={meta:Re.meta})}Qe.length&&(qe||(qe=Re._meta={}),qe.data=Qe)}(V,re),p(re,Z),e.getComponentMethod("colorscale","crossTraceDefaults")(V,re),re._preGUI||(re._preGUI={}),re._tracePreGUI||(re._tracePreGUI={});var Oe,Xe=re._tracePreGUI,Fe={};for(Oe in Xe)Fe[Oe]="old";for(W=0;W<V.length;W++)Fe[Oe=V[W]._fullInput.uid]||(Xe[Oe]={}),Fe[Oe]="new";for(Oe in Fe)"old"===Fe[Oe]&&delete Xe[Oe];P(re),e.getComponentMethod("rangeslider","makeData")(re),X||N.length!==V.length||a.supplyDefaultsUpdateCalc(N,V)}},a.supplyDefaultsUpdateCalc=function(H,Y){for(var X=0;X<Y.length;X++){var Z=Y[X],W=(H[X]||[])[0];if(W&&W.trace){var re=W.trace;if(re._hasCalcTransform){var U,B,V,ee=re._arrayAttrs;for(U=0;U<ee.length;U++)V=l.nestedProperty(re,B=ee[U]).get().slice(),l.nestedProperty(Z,B).set(V)}W.trace=Z}}},a.createTransitionData=function(H){H._transitionData||(H._transitionData={}),H._transitionData._frames||(H._transitionData._frames=[]),H._transitionData._frameHash||(H._transitionData._frameHash={}),H._transitionData._counter||(H._transitionData._counter=0),H._transitionData._interruptCallbacks||(H._transitionData._interruptCallbacks=[])},a._hasPlotType=function(H){var Y,X=this._basePlotModules||[];for(Y=0;Y<X.length;Y++)if(X[Y].name===H)return!0;var Z=this._modules||[];for(Y=0;Y<Z.length;Y++){var W=Z[Y].name;if(W===H)return!0;var re=e.modules[W];if(re&&re.categories[H])return!0}return!1},a.cleanPlot=function(H,Y,X,Z){var W,re,U=Z._basePlotModules||[];for(W=0;W<U.length;W++){var B=U[W];B.clean&&B.clean(H,Y,X,Z)}var V=Z._has&&Z._has("gl"),ee=Y._has&&Y._has("gl");V&&!ee&&void 0!==Z._glcontainer&&(Z._glcontainer.selectAll(".gl-canvas").remove(),Z._glcontainer.selectAll(".no-webgl").remove(),Z._glcanvas=null);var N=!!Z._infolayer;e:for(W=0;W<X.length;W++){var K=X[W].uid;for(re=0;re<H.length;re++)if(K===H[re].uid)continue e;N&&Z._infolayer.select(".cb"+K).remove()}},a.linkSubplots=function(H,Y,X,Z){var W,re,U=Z._plots||{},B=Y._plots={},V=Y._subplots,ee={_fullData:H,_fullLayout:Y},N=V.cartesian.concat(V.gl2d||[]);for(W=0;W<N.length;W++){var K,J=N[W],te=U[J],ae=f.getFromId(ee,J,"x"),le=f.getFromId(ee,J,"y");for(te?K=B[J]=te:(K=B[J]={}).id=J,ae._counterAxes.push(le._id),le._counterAxes.push(ae._id),ae._subplotsWith.push(J),le._subplotsWith.push(J),K.xaxis=ae,K.yaxis=le,K._hasClipOnAxisFalse=!1,re=0;re<H.length;re++){var se=H[re];if(se.xaxis===K.xaxis._id&&se.yaxis===K.yaxis._id&&!1===se.cliponaxis){K._hasClipOnAxisFalse=!0;break}}}var ve,ue=f.list(ee,null,!0);for(W=0;W<ue.length;W++){var ye=null;(ve=ue[W]).overlaying&&(ye=f.getFromId(ee,ve.overlaying))&&ye.overlaying&&(ve.overlaying=!1,ye=null),ve._mainAxis=ye||ve,ye&&(ve.domain=ye.domain.slice()),ve._anchorAxis="free"===ve.anchor?null:f.getFromId(ee,ve.anchor)}for(W=0;W<ue.length;W++)if((ve=ue[W])._counterAxes.sort(f.idSort),ve._subplotsWith.sort(l.subplotSort),ve._mainSubplot=T(ve,Y),ve._counterAxes.length&&(ve.spikemode&&-1!==ve.spikemode.indexOf("across")||ve.automargin&&ve.mirror&&"free"!==ve.anchor||e.getComponentMethod("rangeslider","isVisible")(ve))){var Me=1,pe=0;for(re=0;re<ve._counterAxes.length;re++){var ge=f.getFromId(ee,ve._counterAxes[re]);Me=Math.min(Me,ge.domain[0]),pe=Math.max(pe,ge.domain[1])}Me<pe&&(ve._counterDomainMin=Me,ve._counterDomainMax=pe)}},a.clearExpandedTraceDefaultColors=function(H){var Y,X,Z;for(X=[],(Y=H._module._colorAttrs)||(H._module._colorAttrs=Y=[],n.crawl(H._module.attributes,function(W,re,U,B){X[B]=re,X.length=B+1,"color"===W.valType&&void 0===W.dflt&&Y.push(X.join("."))})),Z=0;Z<Y.length;Z++)l.nestedProperty(H,"_input."+Y[Z]).get()||l.nestedProperty(H,Y[Z]).set(null)},a.supplyDataDefaults=function(H,Y,X,Z){var W,re,U,B=Z._modules,V=Z._visibleModules,ee=Z._basePlotModules,N=0,K=0;function J(we){Y.push(we);var oe=we._module;oe&&(l.pushUnique(B,oe),!0===we.visible&&l.pushUnique(V,oe),l.pushUnique(ee,we._module.basePlotModule),N++,!1!==we._input.visible&&K++)}Z._transformModules=[];var te={},ae=[],se=i.traceTemplater((X.template||{}).data||{});for(W=0;W<H.length;W++){if((re=se.newTrace(U=H[W])).uid=Z._traceUids[W],a.supplyTraceDefaults(U,re,K,Z,W),re.index=W,re._input=U,re._expandedIndex=N,re.transforms&&re.transforms.length)for(var ve=!1!==U.visible&&!1===re.visible,ue=M(re,Y,X,Z),ye=0;ye<ue.length;ye++){var Me=ue[ye],pe={_template:re._template,type:re.type,uid:re.uid+ye};ve&&!1===Me.visible&&delete Me.visible,a.supplyTraceDefaults(Me,pe,N,Z,W),p(pe,Me),pe.index=W,pe._input=U,pe._fullInput=re,pe._expandedIndex=N,pe._expandedInput=Me,J(pe)}else re._fullInput=re,re._expandedInput=re,J(re);e.traceIs(re,"carpetAxis")&&(te[re.carpet]=re),e.traceIs(re,"carpetDependent")&&ae.push(W)}for(W=0;W<ae.length;W++)if((re=Y[ae[W]]).visible){var ge=te[re.carpet];re._carpet=ge,ge&&ge.visible?(re.xaxis=ge.xaxis,re.yaxis=ge.yaxis):re.visible=!1}},a.supplyAnimationDefaults=function(H){var Y;H=H||{};var X={};function Z(W,re){return l.coerce(H||{},X,h,W,re)}if(Z("mode"),Z("direction"),Z("fromcurrent"),Array.isArray(H.frame))for(X.frame=[],Y=0;Y<H.frame.length;Y++)X.frame[Y]=a.supplyAnimationFrameDefaults(H.frame[Y]||{});else X.frame=a.supplyAnimationFrameDefaults(H.frame||{});if(Array.isArray(H.transition))for(X.transition=[],Y=0;Y<H.transition.length;Y++)X.transition[Y]=a.supplyAnimationTransitionDefaults(H.transition[Y]||{});else X.transition=a.supplyAnimationTransitionDefaults(H.transition||{});return X},a.supplyAnimationFrameDefaults=function(H){var Y={};function X(Z,W){return l.coerce(H||{},Y,h.frame,Z,W)}return X("duration"),X("redraw"),Y},a.supplyAnimationTransitionDefaults=function(H){var Y={};function X(Z,W){return l.coerce(H||{},Y,h.transition,Z,W)}return X("duration"),X("easing"),Y},a.supplyFrameDefaults=function(H){var Y={};function X(Z,W){return l.coerce(H,Y,s,Z,W)}return X("group"),X("name"),X("traces"),X("baseframe"),X("data"),X("layout"),Y},a.supplyTraceDefaults=function(H,Y,X,Z,W){var re,U=Z.colorway||r.defaults,B=U[X%U.length];function V(ue,ye){return l.coerce(H,Y,a.attributes,ue,ye)}var ee=V("visible");V("type"),V("name",Z._traceWord+" "+W),V("uirevision",Z.uirevision);var N=a.getModule(Y);if(Y._module=N,N){var K=N.basePlotModule,J=K.attr,te=K.attributes;if(J&&te){var ae=Z._subplots,le="";if(ee||"gl2d"!==K.name){if(Array.isArray(J))for(re=0;re<J.length;re++){var se=J[re],ve=l.coerce(H,Y,te,se);ae[se]&&l.pushUnique(ae[se],ve),le+=ve}else le=l.coerce(H,Y,te,J);ae[K.name]&&l.pushUnique(ae[K.name],le)}}}return ee&&(V("customdata"),V("ids"),V("meta"),e.traceIs(Y,"showLegend")?(l.coerce(H,Y,N.attributes.showlegend?N.attributes:a.attributes,"showlegend"),V("legendwidth"),V("legendgroup"),V("legendgrouptitle.text"),V("legendrank"),Y._dfltShowLegend=!0):Y._dfltShowLegend=!1,N&&N.supplyDefaults(H,Y,B,Z),e.traceIs(Y,"noOpacity")||V("opacity"),e.traceIs(Y,"notLegendIsolatable")&&(Y.visible=!!Y.visible),e.traceIs(Y,"noHover")||(Y.hovertemplate||l.coerceHoverinfo(H,Y,Z),"parcats"!==Y.type&&e.getComponentMethod("fx","supplyDefaults")(H,Y,B,Z)),N&&N.selectPoints&&V("selectedpoints"),a.supplyTransformDefaults(H,Y,Z)),Y},a.hasMakesDataTransform=C,a.supplyTransformDefaults=function(H,Y,X){if(Y._length||C(H)){var Z=X._globalTransforms||[],W=X._transformModules||[];if(Array.isArray(H.transforms)||0!==Z.length)for(var U=Z.concat(H.transforms||[]),B=Y.transforms=[],V=0;V<U.length;V++){var ee,N=U[V],K=N.type,J=y[K],te=!(N._module&&N._module===J),ae=J&&"function"==typeof J.transform;J||l.warn("Unrecognized transform type "+K+"."),J&&J.supplyDefaults&&(te||ae)?((ee=J.supplyDefaults(N,Y,X,H)).type=K,ee._module=J,l.pushUnique(W,J)):ee=l.extendFlat({},N),B.push(ee)}}},a.supplyLayoutGlobalDefaults=function(H,Y,X){function Z(V,ee){return l.coerce(H,Y,a.layoutAttributes,V,ee)}var W=H.template;l.isPlainObject(W)&&(Y.template=W,Y._template=W.layout,Y._dataTemplate=W.data),Z("autotypenumbers");var re=l.coerceFont(Z,"font");l.coerceFont(Z,"title.font",l.extendFlat({},re,{size:Math.round(1.4*re.size)})),Z("title.text",Y._dfltTitle.plot),Z("title.xref"),Z("title.yref"),Z("title.x"),Z("title.y"),Z("title.xanchor"),Z("title.yanchor"),Z("title.pad.t"),Z("title.pad.r"),Z("title.pad.b"),Z("title.pad.l"),Z("uniformtext.mode")&&Z("uniformtext.minsize"),Z("autosize",!(H.width&&H.height)),Z("width"),Z("height"),Z("minreducedwidth"),Z("minreducedheight"),Z("margin.l"),Z("margin.r"),Z("margin.t"),Z("margin.b"),Z("margin.pad"),Z("margin.autoexpand"),H.width&&H.height&&a.sanitizeMargins(Y),e.getComponentMethod("grid","sizeDefaults")(H,Y),Z("paper_bgcolor"),Z("separators",X.decimal+X.thousands),Z("hidesources"),Z("colorway"),Z("datarevision");var B=Z("uirevision");Z("editrevision",B),Z("selectionrevision",B),e.getComponentMethod("modebar","supplyLayoutDefaults")(H,Y),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(H,Y,Z),e.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(H,Y,Z),Z("meta"),l.isPlainObject(H.transition)&&(Z("transition.duration"),Z("transition.easing"),Z("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(H,Y,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(H,Y,Z)},a.plotAutoSize=function(H,Y,X){var Z,W,re=H._context||{},U=re.frameMargins,B=l.isPlotDiv(H);if(B&&H.emit("plotly_autosize"),re.fillFrame)Z=window.innerWidth,W=window.innerHeight,document.body.style.overflow="hidden";else{var V=B?window.getComputedStyle(H):{};if(Z=I(V.width)||I(V.maxWidth)||X.width,W=I(V.height)||I(V.maxHeight)||X.height,x(U)&&U>0){var ee=1-2*U;Z=Math.round(ee*Z),W=Math.round(ee*W)}}var N=a.layoutAttributes.width.min,K=a.layoutAttributes.height.min;Z<N&&(Z=N),W<K&&(W=K);var J=!Y.width&&Math.abs(X.width-Z)>1,te=!Y.height&&Math.abs(X.height-W)>1;(te||J)&&(J&&(X.width=Z),te&&(X.height=W)),H._initialAutoSize||(H._initialAutoSize={width:Z,height:W}),a.sanitizeMargins(X)},a.supplyLayoutModuleDefaults=function(H,Y,X,Z){var W,re,U,B=e.componentsRegistry,V=Y._basePlotModules,ee=e.subplotsRegistry.cartesian;for(W in B)(U=B[W]).includeBasePlot&&U.includeBasePlot(H,Y);for(var N in V.length||V.push(ee),Y._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(H,Y),ee.finalizeSubplots(H,Y)),Y._subplots)Y._subplots[N].sort(l.subplotSort);for(re=0;re<V.length;re++)(U=V[re]).supplyLayoutDefaults&&U.supplyLayoutDefaults(H,Y,X);var K=Y._modules;for(re=0;re<K.length;re++)(U=K[re]).supplyLayoutDefaults&&U.supplyLayoutDefaults(H,Y,X);var J=Y._transformModules;for(re=0;re<J.length;re++)(U=J[re]).supplyLayoutDefaults&&U.supplyLayoutDefaults(H,Y,X,Z);for(W in B)(U=B[W]).supplyLayoutDefaults&&U.supplyLayoutDefaults(H,Y,X)},a.purge=function(H){var Y=H._fullLayout||{};void 0!==Y._glcontainer&&(Y._glcontainer.selectAll(".gl-canvas").remove(),Y._glcontainer.remove(),Y._glcanvas=null),Y._modeBar&&Y._modeBar.destroy(),H._transitionData&&(H._transitionData._interruptCallbacks&&(H._transitionData._interruptCallbacks.length=0),H._transitionData._animationRaf&&window.cancelAnimationFrame(H._transitionData._animationRaf)),l.clearThrottle(),l.clearResponsive(H),delete H.data,delete H.layout,delete H._fullData,delete H._fullLayout,delete H.calcdata,delete H.empty,delete H.fid,delete H.undoqueue,delete H.undonum,delete H.autoplay,delete H.changed,delete H._promises,delete H._redrawTimer,delete H._hmlumcount,delete H._hmpixcount,delete H._transitionData,delete H._transitioning,delete H._initialAutoSize,delete H._transitioningWithDuration,delete H._dragging,delete H._dragged,delete H._dragdata,delete H._hoverdata,delete H._snapshotInProgress,delete H._editing,delete H._mouseDownTime,delete H._legendMouseDownTime,H.removeAllListeners&&H.removeAllListeners()},a.style=function(H){var Y,X=H._fullLayout._visibleModules,Z=[];for(Y=0;Y<X.length;Y++){var W=X[Y];W.style&&l.pushUnique(Z,W.style)}for(Y=0;Y<Z.length;Y++)Z[Y](H)},a.sanitizeMargins=function(H){if(H&&H.margin){var Y,X=H.width,Z=H.height,W=H.margin,U=Z-(W.t+W.b);X-(W.l+W.r)<0&&(Y=(X-1)/(W.l+W.r),W.l=Math.floor(Y*W.l),W.r=Math.floor(Y*W.r)),U<0&&(Y=(Z-1)/(W.t+W.b),W.t=Math.floor(Y*W.t),W.b=Math.floor(Y*W.b))}},a.clearAutoMarginIds=function(H){H._fullLayout._pushmarginIds={}},a.allowAutoMargin=function(H,Y){H._fullLayout._pushmarginIds[Y]=1},a.autoMargin=function(H,Y,X){var Z=H._fullLayout,W=Z.width,re=Z.height,U=Z.margin,V=Z.minreducedheight,ee=l.constrain(W-U.l-U.r,2,Z.minreducedwidth),N=l.constrain(re-U.t-U.b,2,V),K=Math.max(0,W-ee),J=Math.max(0,re-N),te=Z._pushmargin,ae=Z._pushmarginIds;if(!1!==U.autoexpand){if(X){var le=X.pad;if(void 0===le&&(le=Math.min(12,U.l,U.r,U.t,U.b)),K){var se=(X.l+X.r)/K;se>1&&(X.l/=se,X.r/=se)}if(J){var ve=(X.t+X.b)/J;ve>1&&(X.t/=ve,X.b/=ve)}te[Y]={l:{val:void 0!==X.xl?X.xl:X.x,size:X.l+le},r:{val:void 0!==X.xr?X.xr:X.x,size:X.r+le},b:{val:void 0!==X.yb?X.yb:X.y,size:X.b+le},t:{val:void 0!==X.yt?X.yt:X.y,size:X.t+le}},ae[Y]=1}else delete te[Y],delete ae[Y];if(!Z._replotting)return a.doAutoMargin(H)}},a.doAutoMargin=function(H){var Y=H._fullLayout,X=Y.width,Z=Y.height;Y._size||(Y._size={}),P(Y);var W=Y._size,re=Y.margin,U=l.extendFlat({},W),B=re.l,V=re.r,ee=re.t,N=re.b,K=Y._pushmargin,J=Y._pushmarginIds,te=Y.minreducedwidth,ae=Y.minreducedheight;if(!1!==Y.margin.autoexpand){for(var le in K)J[le]||delete K[le];for(var se in K.base={l:{val:0,size:B},r:{val:1,size:V},t:{val:1,size:ee},b:{val:0,size:N}},K){var ve=K[se].l||{},ue=K[se].b||{},ye=ve.val,Me=ve.size,pe=ue.val,ge=ue.size;for(var we in K){if(x(Me)&&K[we].r){var oe=K[we].r.val,de=K[we].r.size;if(oe>ye){var Te=(Me*oe+(de-X)*ye)/(oe-ye),Ee=(de*(1-ye)+(Me-X)*(1-oe))/(oe-ye);Te+Ee>B+V&&(B=Te,V=Ee)}}if(x(ge)&&K[we].t){var Ae=K[we].t.val,De=K[we].t.size;if(Ae>pe){var Ie=(ge*Ae+(De-Z)*pe)/(Ae-pe),Oe=(De*(1-pe)+(ge-Z)*(1-Ae))/(Ae-pe);Ie+Oe>N+ee&&(N=Ie,ee=Oe)}}}}}var Tt,Xe=l.constrain(X-re.l-re.r,2,te),Fe=l.constrain(Z-re.t-re.b,2,ae),Pe=Math.max(0,X-Xe),Re=Math.max(0,Z-Fe);if(Pe){var qe=(B+V)/Pe;qe>1&&(B/=qe,V/=qe)}if(Re){var Qe=(N+ee)/Re;Qe>1&&(N/=Qe,ee/=Qe)}if(W.l=Math.round(B),W.r=Math.round(V),W.t=Math.round(ee),W.b=Math.round(N),W.p=Math.round(re.pad),W.w=Math.round(X)-W.l-W.r,W.h=Math.round(Z)-W.t-W.b,!Y._replotting&&a.didMarginChange(U,W)){"_redrawFromAutoMarginCount"in Y?Y._redrawFromAutoMarginCount++:Y._redrawFromAutoMarginCount=1;var ct=3*(1+Object.keys(J).length);if(Y._redrawFromAutoMarginCount<ct)return e.call("_doPlot",H);Y._size=U,l.warn("Too many auto-margin redraws.")}Tt=f.list(H,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(_t){for(var nt=0;nt<Tt.length;nt++){var Ke=Tt[nt][_t];Ke&&Ke()}})};var S=["l","r","t","b","p","w","h"];function E(H,Y,X){var Z=!1,re=l.syncOrAsync([a.previousPromises,function(){if(H._transitionData)return H._transitioning=!1,function(U){var B=Promise.resolve();if(!U)return B;for(;U.length;)B=B.then(U.shift());return B}(H._transitionData._interruptCallbacks)},X.prepareFn,a.rehover,a.reselect,function(){return H.emit("plotly_transitioning",[]),new Promise(function(U){H._transitioning=!0,Y.duration>0&&(H._transitioningWithDuration=!0),H._transitionData._interruptCallbacks.push(function(){Z=!0}),X.redraw&&H._transitionData._interruptCallbacks.push(function(){return e.call("redraw",H)}),H._transitionData._interruptCallbacks.push(function(){H.emit("plotly_transitioninterrupted",[])});var B=0,V=0;function ee(){return B++,function(){var N;V++,Z||V!==B||(N=U,!H._transitionData||(function(K){if(K)for(;K.length;)K.shift()}(H._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(X.redraw)return e.call("redraw",H)}).then(function(){H._transitioning=!1,H._transitioningWithDuration=!1,H.emit("plotly_transitioned",[])}).then(N)))}}X.runFn(ee),setTimeout(ee())})}],H);return re&&re.then||(re=Promise.resolve()),re.then(function(){return H})}a.didMarginChange=function(H,Y){for(var X=0;X<S.length;X++){var Z=S[X],W=H[Z],re=Y[Z];if(!x(W)||Math.abs(re-W)>1)return!0}return!1},a.graphJson=function(H,Y,X,Z,W,re){(W&&Y&&!H._fullData||W&&!Y&&!H._fullLayout)&&a.supplyDefaults(H);var B=W?H._fullLayout:H.layout,V=(H._transitionData||{})._frames;function ee(J,te){if("function"==typeof J)return te?"_function_":null;if(l.isPlainObject(J)){var ae,le={};return Object.keys(J).sort().forEach(function(se){if(-1===["_","["].indexOf(se.charAt(0)))if("function"!=typeof J[se]){if("keepdata"===X){if("src"===se.substr(se.length-3))return}else if("keepstream"===X){if("string"==typeof(ae=J[se+"src"])&&ae.indexOf(":")>0&&!l.isPlainObject(J.stream))return}else if("keepall"!==X&&"string"==typeof(ae=J[se+"src"])&&ae.indexOf(":")>0)return;le[se]=ee(J[se],te)}else te&&(le[se]="_function")}),le}return Array.isArray(J)?J.map(function(se){return ee(se,te)}):l.isTypedArray(J)?l.simpleMap(J,l.identity):l.isJSDate(J)?l.ms2DateTimeLocal(+J):J}var N={data:((W?H._fullData:H.data)||[]).map(function(J){var te=ee(J);return Y&&delete te.fit,te})};if(!Y&&(N.layout=ee(B),W)){var K=B._size;N.layout.computed={margin:{b:K.b,l:K.l,r:K.r,t:K.t}}}return V&&(N.frames=ee(V)),re&&(N.config=ee(H._context,!0)),"object"===Z?N:JSON.stringify(N)},a.modifyFrames=function(H,Y){var X,Z,W,re=H._transitionData._frames,U=H._transitionData._frameHash;for(X=0;X<Y.length;X++)switch((Z=Y[X]).type){case"replace":var B=(re[Z.index]||{}).name,V=(W=Z.value).name;re[Z.index]=U[V]=W,V!==B&&(delete U[B],U[V]=W);break;case"insert":U[(W=Z.value).name]=W,re.splice(Z.index,0,W);break;case"delete":delete U[(W=re[Z.index]).name],re.splice(Z.index,1)}return Promise.resolve()},a.computeFrame=function(H,Y){var X,Z,W,re,U=H._transitionData._frameHash;if(!Y)throw new Error("computeFrame must be given a string frame name");var B=U[Y.toString()];if(!B)return!1;for(var V=[B],ee=[B.name];B.baseframe&&(B=U[B.baseframe.toString()])&&-1===ee.indexOf(B.name);)V.push(B),ee.push(B.name);for(var N={};B=V.pop();)if(B.layout&&(N.layout=a.extendLayout(N.layout,B.layout)),B.data){if(N.data||(N.data=[]),!(Z=B.traces))for(Z=[],X=0;X<B.data.length;X++)Z[X]=X;for(N.traces||(N.traces=[]),X=0;X<B.data.length;X++)null!=(W=Z[X])&&(-1===(re=N.traces.indexOf(W))&&(N.traces[re=N.data.length]=W),N.data[re]=a.extendTrace(N.data[re],B.data[X]))}return N},a.recomputeFrameHash=function(H){for(var Y=H._transitionData._frameHash={},X=H._transitionData._frames,Z=0;Z<X.length;Z++){var W=X[Z];W&&W.name&&(Y[W.name]=W)}},a.extendObjectWithContainers=function(H,Y,X){var Z,W,re,U,B,V,ee,N=l.extendDeepNoArrays({},Y||{}),K=l.expandObjectPaths(N),J={};if(X&&X.length)for(re=0;re<X.length;re++)void 0===(W=(Z=l.nestedProperty(K,X[re])).get())?l.nestedProperty(J,X[re]).set(null):(Z.set(null),l.nestedProperty(J,X[re]).set(W));if(H=l.extendDeepNoArrays(H||{},K),X&&X.length)for(re=0;re<X.length;re++)if(V=l.nestedProperty(J,X[re]).get()){for(ee=(B=l.nestedProperty(H,X[re])).get(),Array.isArray(ee)||B.set(ee=[]),U=0;U<V.length;U++){var te=V[U];ee[U]=null===te?null:a.extendObjectWithContainers(ee[U],te)}B.set(ee)}return H},a.dataArrayContainers=["transforms","dimensions"],a.layoutArrayContainers=e.layoutArrayContainers,a.extendTrace=function(H,Y){return a.extendObjectWithContainers(H,Y,a.dataArrayContainers)},a.extendLayout=function(H,Y){return a.extendObjectWithContainers(H,Y,a.layoutArrayContainers)},a.transition=function(H,Y,X,Z,W,re){var U={redraw:W.redraw},B={},V=[];return U.prepareFn=function(){for(var ee=Array.isArray(Y)?Y.length:0,N=Z.slice(0,ee),K=0;K<N.length;K++){var J=N[K],te=H._fullData[J]._module;if(te){if(te.animatable){var ae=te.basePlotModule.name;B[ae]||(B[ae]=[]),B[ae].push(J)}H.data[N[K]]=a.extendTrace(H.data[N[K]],Y[K])}}var le=l.expandObjectPaths(l.extendDeepNoArrays({},X)),se=/^[xy]axis[0-9]*$/;for(var ve in le)se.test(ve)&&delete le[ve].range;a.extendLayout(H.layout,le),delete H.calcdata,a.supplyDefaults(H),a.doCalcdata(H);var ue=l.expandObjectPaths(X);if(ue){var ye=H._fullLayout._plots;for(var Me in ye){var pe=ye[Me],ge=pe.xaxis,we=pe.yaxis,oe=ge.range.slice(),de=we.range.slice(),Te=null,Ee=null,Ae=null,De=null;Array.isArray(ue[ge._name+".range"])?Te=ue[ge._name+".range"].slice():Array.isArray((ue[ge._name]||{}).range)&&(Te=ue[ge._name].range.slice()),Array.isArray(ue[we._name+".range"])?Ee=ue[we._name+".range"].slice():Array.isArray((ue[we._name]||{}).range)&&(Ee=ue[we._name].range.slice()),oe&&Te&&(ge.r2l(oe[0])!==ge.r2l(Te[0])||ge.r2l(oe[1])!==ge.r2l(Te[1]))&&(Ae={xr0:oe,xr1:Te}),de&&Ee&&(we.r2l(de[0])!==we.r2l(Ee[0])||we.r2l(de[1])!==we.r2l(Ee[1]))&&(De={yr0:de,yr1:Ee}),(Ae||De)&&V.push(l.extendFlat({plotinfo:pe},Ae,De))}}return Promise.resolve()},U.runFn=function(ee){var N,K,J=H._fullLayout._basePlotModules,te=V.length;if(X)for(K=0;K<J.length;K++)J[K].transitionAxes&&J[K].transitionAxes(H,V,re,ee);for(var ae in te?((N=l.extendFlat({},re)).duration=0,delete B.cartesian):N=re,B){var le=B[ae];H._fullData[le[0]]._module.basePlotModule.plot(H,le,N,ee)}},E(H,re,U)},a.transitionFromReact=function(H,Y,X,Z){var W=H._fullLayout,re=W.transition,U={},B=[];return U.prepareFn=function(){var V=W._plots;for(var ee in U.redraw=!1,"some"===Y.anim&&(U.redraw=!0),"some"===X.anim&&(U.redraw=!0),V){var N=V[ee],K=N.xaxis,J=N.yaxis,te=Z[K._name].range.slice(),ae=Z[J._name].range.slice(),le=K.range.slice(),se=J.range.slice();K.setScale(),J.setScale();var ve=null,ue=null;K.r2l(te[0])===K.r2l(le[0])&&K.r2l(te[1])===K.r2l(le[1])||(ve={xr0:te,xr1:le}),J.r2l(ae[0])===J.r2l(se[0])&&J.r2l(ae[1])===J.r2l(se[1])||(ue={yr0:ae,yr1:se}),(ve||ue)&&B.push(l.extendFlat({plotinfo:N},ve,ue))}return Promise.resolve()},U.runFn=function(V){for(var ee,N,K,J=H._fullData,te=H._fullLayout._basePlotModules,ae=[],le=0;le<J.length;le++)ae.push(le);function se(){if(H._fullLayout)for(var ue=0;ue<te.length;ue++)te[ue].transitionAxes&&te[ue].transitionAxes(H,B,ee,V)}function ve(){if(H._fullLayout)for(var ue=0;ue<te.length;ue++)te[ue].plot(H,K,N,V)}B.length&&Y.anim?"traces first"===re.ordering?(ee=l.extendFlat({},re,{duration:0}),K=ae,N=re,setTimeout(se,re.duration),ve()):(ee=re,K=null,N=l.extendFlat({},re,{duration:0}),setTimeout(ve,ee.duration),se()):B.length?(ee=re,se()):Y.anim&&(K=ae,N=re,ve())},E(H,re,U)},a.doCalcdata=function(H,Y){var X,Z,W,re,U=f.list(H),B=H._fullData,V=H._fullLayout,ee=new Array(B.length),N=(H.calcdata||[]).slice();for(H.calcdata=ee,V._numBoxes=0,V._numViolins=0,V._violinScaleGroupStats={},H._hmpixcount=0,H._hmlumcount=0,V._piecolormap={},V._sunburstcolormap={},V._treemapcolormap={},V._iciclecolormap={},V._funnelareacolormap={},W=0;W<B.length;W++)Array.isArray(Y)&&-1===Y.indexOf(W)&&(ee[W]=N[W]);for(W=0;W<B.length;W++)(X=B[W])._arrayAttrs=n.findArrayAttributes(X),X._extremes={};var K=V._subplots.polar||[];for(W=0;W<K.length;W++)U.push(V[K[W]].radialaxis,V[K[W]].angularaxis);for(var J in V._colorAxes){var te=V[J];!1!==te.cauto&&(delete te.cmin,delete te.cmax)}var ae=!1;function le(ue){if(Z=(X=B[ue])._module,!0===X.visible&&X.transforms){if(Z&&Z.calc){var ye=Z.calc(H,X);ye[0]&&ye[0].t&&ye[0].t._scene&&delete ye[0].t._scene.dirty}for(re=0;re<X.transforms.length;re++){var Me=X.transforms[re];(Z=y[Me.type])&&Z.calcTransform&&(X._hasCalcTransform=!0,ae=!0,Z.calcTransform(H,X,Me))}}}function se(ue,ye){if(!!(Z=(X=B[ue])._module).isContainer===ye){var Me=[];if(!0===X.visible&&0!==X._length){delete X._indexToPoints;var pe=X.transforms||[];for(re=pe.length-1;re>=0;re--)if(pe[re].enabled){X._indexToPoints=pe[re]._indexToPoints;break}Z&&Z.calc&&(Me=Z.calc(H,X))}Array.isArray(Me)&&Me[0]||(Me=[{x:d,y:d}]),Me[0].t||(Me[0].t={}),Me[0].trace=X,ee[ue]=Me}}for(D(U,B,V),W=0;W<B.length;W++)se(W,!0);for(W=0;W<B.length;W++)le(W);for(ae&&D(U,B,V),W=0;W<B.length;W++)se(W,!0);for(W=0;W<B.length;W++)se(W,!1);j(H);var ve=function(ue,ye){var Me,pe,ge,we,oe,de=[];function Te(Ft,Be,He){var he=Be._id.charAt(0);if("histogram2dcontour"===Ft){var be=Be._counterAxes[0],ze=f.getFromId(ye,be),Ve="x"===he||"x"===be&&"category"===ze.type,Je="y"===he||"y"===be&&"category"===ze.type;return function(Ye,lt){return 0===Ye||0===lt||Ve&&Ye===He[lt].length-1||Je&&lt===He.length-1?-1:("y"===he?lt:Ye)-1}}return function(Ye,lt){return"y"===he?lt:Ye}}var Ee={min:function(Ft){return l.aggNums(Math.min,null,Ft)},max:function(Ft){return l.aggNums(Math.max,null,Ft)},sum:function(Ft){return l.aggNums(function(Be,He){return Be+He},null,Ft)},total:function(Ft){return l.aggNums(function(Be,He){return Be+He},null,Ft)},mean:function(Ft){return l.mean(Ft)},median:function(Ft){return l.median(Ft)}};for(Me=0;Me<ue.length;Me++){var Ae=ue[Me];if("category"===Ae.type){var De=Ae.categoryorder.match(R);if(De){var Ie=De[1],Oe=De[2],Xe=Ae._id.charAt(0),Fe="x"===Xe,Pe=[];for(pe=0;pe<Ae._categories.length;pe++)Pe.push([Ae._categories[pe],[]]);for(pe=0;pe<Ae._traceIndices.length;pe++){var Re=Ae._traceIndices[pe],qe=ye._fullData[Re];if(!0===qe.visible){var Qe=qe.type;e.traceIs(qe,"histogram")&&(delete qe._xautoBinFinished,delete qe._yautoBinFinished);var ct="splom"===Qe,bt="scattergl"===Qe,Tt=ye.calcdata[Re];for(ge=0;ge<Tt.length;ge++){var _t,nt,Ke=Tt[ge];if(ct){var xt=qe._axesDim[Ae._id];if(!Fe){var Ht=qe._diag[xt][0];Ht&&(Ae=ye._fullLayout[f.id2name(Ht)])}var Zt=Ke.trace.dimensions[xt].values;for(we=0;we<Zt.length;we++)for(_t=Ae._categoriesMap[Zt[we]],oe=0;oe<Ke.trace.dimensions.length;oe++)oe!==xt&&Pe[_t][1].push(Ke.trace.dimensions[oe].values[we])}else if(bt){for(we=0;we<Ke.t.x.length;we++)Fe?(_t=Ke.t.x[we],nt=Ke.t.y[we]):(_t=Ke.t.y[we],nt=Ke.t.x[we]),Pe[_t][1].push(nt);Ke.t&&Ke.t._scene&&delete Ke.t._scene.dirty}else if(Ke.hasOwnProperty("z")){var Xt=Te(qe.type,Ae,nt=Ke.z);for(we=0;we<nt.length;we++)for(oe=0;oe<nt[we].length;oe++)(_t=Xt(oe,we))+1&&Pe[_t][1].push(nt[we][oe])}else for(void 0===(_t=Ke.p)&&(_t=Ke[Xe]),void 0===(nt=Ke.s)&&(nt=Ke.v),void 0===nt&&(nt=Fe?Ke.y:Ke.x),Array.isArray(nt)||(nt=void 0===nt?[]:[nt]),we=0;we<nt.length;we++)Pe[_t][1].push(nt[we])}}}Ae._categoriesValue=Pe;var cr=[];for(pe=0;pe<Pe.length;pe++)cr.push([Pe[pe][0],Ee[Ie](Pe[pe][1])]);cr.sort(function(Ft,Be){return Ft[1]-Be[1]}),Ae._categoriesAggregatedValue=cr,Ae._initialCategories=cr.map(function(Ft){return Ft[0]}),"descending"===Oe&&Ae._initialCategories.reverse(),de=de.concat(Ae.sortByInitialCategories())}}}return de}(U,H);if(ve.length){for(V._numBoxes=0,V._numViolins=0,W=0;W<ve.length;W++)se(ve[W],!0);for(W=0;W<ve.length;W++)se(ve[W],!1);j(H)}e.getComponentMethod("fx","calc")(H),e.getComponentMethod("errorbars","calc")(H)};var R=/(total|sum|min|max|mean|median) (ascending|descending)/;function D(H,Y,X){var Z={};function W(V){V.clearCalc(),"multicategory"===V.type&&V.setupMultiCategory(Y),Z[V._id]=1}l.simpleMap(H,W);for(var re=X._axisMatchGroups||[],U=0;U<re.length;U++)for(var B in re[U])Z[B]||W(X[f.id2name(B)])}function j(H){var Y,X,Z,W=H._fullLayout,re=W._visibleModules,U={};for(X=0;X<re.length;X++){var B=re[X],V=B.crossTraceCalc;if(V){var ee=B.basePlotModule.name;U[ee]?l.pushUnique(U[ee],V):U[ee]=[V]}}for(Z in U){var N=U[Z],K=W._subplots[Z];if(Array.isArray(K))for(Y=0;Y<K.length;Y++){var J=K[Y],te="cartesian"===Z?W._plots[J]:W[J];for(X=0;X<N.length;X++)N[X](H,te,J)}else for(X=0;X<N.length;X++)N[X](H)}}a.rehover=function(H){H._fullLayout._rehover&&H._fullLayout._rehover()},a.redrag=function(H){H._fullLayout._redrag&&H._fullLayout._redrag()},a.reselect=function(H){var Y=H._fullLayout,X=(H.layout||{}).selections,Z=Y._previousSelections;Y._previousSelections=X;var W=Y._reselect||JSON.stringify(X)!==JSON.stringify(Z);e.getComponentMethod("selections","reselect")(H,W)},a.generalUpdatePerTraceModule=function(H,Y,X,Z){var W,re=Y.traceHash,U={};for(W=0;W<X.length;W++){var B=X[W],V=B[0].trace;V.visible&&(U[V.type]=U[V.type]||[],U[V.type].push(B))}for(var ee in re)if(!U[ee]){var N=re[ee][0];N[0].trace.visible=!1,U[ee]=[N]}for(var K in U){var J=U[K];J[0][0].trace._module.plot(H,Y,l.filterVisible(J),Z)}Y.traceHash=U},a.plotBasePlot=function(H,Y,X,Z,W){var re=e.getModule(H),U=o(Y.calcdata,re)[0];re.plot(Y,U,Z,W)},a.cleanBasePlot=function(H,Y,X,Z,W){var re=W._has&&W._has(H),U=X._has&&X._has(H);re&&!U&&W["_"+H+"layer"].selectAll("g.trace").remove()}},{"../components/color":367,"../components/shapes/handle_outline":468,"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plot_api/plot_template":555,"../plots/get_data":602,"../registry":647,"./animation_attributes":560,"./attributes":562,"./cartesian/axis_ids":570,"./command":592,"./font_attributes":594,"./frame_attributes":595,"./layout_attributes":619,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],629:[function(v,$,Q){"use strict";$.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],630:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../lib/polygon").tester,k=m.findIndexOfMin,x=m.isAngleInsideSector,e=m.angleDelta,n=m.angleDist;function i(f,t,h,s){var o,p,c=s[0],a=s[1],y=r(Math.sin(t)-Math.sin(f)),u=r(Math.cos(t)-Math.cos(f)),_=Math.tan(h),b=r(1/_),w=y/u,T=a-w*c;return b?y&&u?p=_*(o=T/(_-w)):u?(o=a*b,p=a):(o=c,p=c*_):y&&u?(o=0,p=T):u?(o=0,p=a):o=p=NaN,[o,p]}function l(f,t,h,s){return m.isFullCircle([t,h])?function(o,p){var c,a=p.length,y=new Array(a+1);for(c=0;c<a;c++){var u=p[c];y[c]=[o*Math.cos(u),o*Math.sin(u)]}return y[c]=y[0].slice(),y}(f,s):function(o,p,c,a){var y,u,_=a.length,b=[];function w(D){return[o*Math.cos(D),o*Math.sin(D)]}function T(D,j,H){return i(D,j,H,w(D))}function C(D){return m.mod(D,_)}function M(D){return x(D,[p,c])}var I=k(a,function(D){return M(D)?n(D,p):1/0}),P=T(a[I],a[C(I-1)],p);for(b.push(P),y=I,u=0;u<_;y++,u++){var S=a[C(y)];if(!M(S))break;b.push(w(S))}var E=k(a,function(D){return M(D)?n(D,c):1/0}),R=T(a[E],a[C(E+1)],c);return b.push(R),b.push([0,0]),b.push(b[0].slice()),b}(f,t,h,s)}function r(f){return Math.abs(f)>1e-10?f:0}function d(f,t,h){t=t||0,h=h||0;for(var s=f.length,o=new Array(s),p=0;p<s;p++){var c=f[p];o[p]=[t+c[0],h-c[1]]}return o}$.exports={isPtInsidePolygon:function(f,t,h,s,o){if(!x(t,s))return!1;var p,c;h[0]<h[1]?(p=h[0],c=h[1]):(p=h[1],c=h[0]);var a=g(l(p,s[0],s[1],o)),y=g(l(c,s[0],s[1],o)),u=[f*Math.cos(t),f*Math.sin(t)];return y.contains(u)&&!a.contains(u)},findPolygonOffset:function(f,t,h,s){for(var o=1/0,p=1/0,c=l(f,t,h,s),a=0;a<c.length;a++){var y=c[a];o=Math.min(o,y[0]),p=Math.min(p,-y[1])}return[o,p]},findEnclosingVertexAngles:function(f,t){var h=k(t,function(o){var p=e(o,f);return p>0?p:1/0}),s=m.mod(h+1,t.length);return[t[h],t[s]]},findIntersectionXY:i,findXYatLength:function(f,t,h,s){var o=-t*h,p=t*t+1,c=2*(t*o-h),y=Math.sqrt(c*c-4*p*(o*o+h*h-f*f)),u=(-c+y)/(2*p),_=(-c-y)/(2*p);return[[u,t*u+o+s],[_,t*_+o+s]]},clampTiny:r,pathPolygon:function(f,t,h,s,o,p){return"M"+d(l(f,t,h,s),o,p).join("L")},pathPolygonAnnulus:function(f,t,h,s,o,p,c){var a,y;f<t?(a=f,y=t):(a=t,y=f);var u=d(l(a,h,s,o),p,c);return"M"+d(l(y,h,s,o),p,c).reverse().join("L")+"M"+u.join("L")}}},{"../../lib":515,"../../lib/polygon":527}],631:[function(v,$,Q){"use strict";var m=v("../get_data").getSubplotCalcData,g=v("../../lib").counterRegex,k=v("./polar"),x=v("./constants"),e=x.attr,n=x.name,i=g(n),l={};l[e]={valType:"subplotid",dflt:n,editType:"calc"},$.exports={attr:e,name:n,idRoot:n,idRegex:i,attrRegex:i,attributes:l,layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),plot:function(r){for(var d=r._fullLayout,f=r.calcdata,t=d._subplots[n],h=0;h<t.length;h++){var s=t[h],o=m(f,n,s),p=d[s]._subplot;p||(p=k(r,s),d[s]._subplot=p),p.plot(o,d,r._promises)}},clean:function(r,d,f,t){for(var h=t._subplots[n]||[],s=t._has&&t._has("gl"),o=d._has&&d._has("gl"),p=s&&!o,c=0;c<h.length;c++){var a=h[c],y=t[a]._subplot;if(!d[a]&&y)for(var u in y.framework.remove(),y.layers["radial-axis-title"].remove(),y.clipPaths)y.clipPaths[u].remove();p&&y._scene&&(y._scene.destroy(),y._scene=null)}},toSVG:v("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"./constants":629,"./layout_attributes":632,"./layout_defaults":633,"./polar":634}],632:[function(v,$,Q){"use strict";var m=v("../../components/color/attributes"),g=v("../cartesian/layout_attributes"),k=v("../domain").attributes,x=v("../../lib").extendFlat,e=v("../../plot_api/edit_types").overrideAll,n=e({color:g.color,showline:x({},g.showline,{dflt:!0}),linecolor:g.linecolor,linewidth:g.linewidth,showgrid:x({},g.showgrid,{dflt:!0}),gridcolor:g.gridcolor,gridwidth:g.gridwidth,griddash:g.griddash},"plot","from-root"),i=e({tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:g.ticks,ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,ticklabelstep:g.ticklabelstep,showticklabels:g.showticklabels,showtickprefix:g.showtickprefix,tickprefix:g.tickprefix,showticksuffix:g.showticksuffix,ticksuffix:g.ticksuffix,showexponent:g.showexponent,exponentformat:g.exponentformat,minexponent:g.minexponent,separatethousands:g.separatethousands,tickfont:g.tickfont,tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,layer:g.layer},"plot","from-root"),l={visible:x({},g.visible,{dflt:!0}),type:x({},g.type,{values:["-","linear","log","date","category"]}),autotypenumbers:g.autotypenumbers,autorange:x({},g.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:x({},g.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:g.categoryorder,categoryarray:g.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:x({},g.title.text,{editType:"plot",dflt:""}),font:x({},g.title.font,{editType:"plot"}),editType:"plot"},hoverformat:g.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:g._deprecated.title,titlefont:g._deprecated.titlefont}};x(l,n,i);var r={visible:x({},g.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:g.autotypenumbers,categoryorder:g.categoryorder,categoryarray:g.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:g.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};x(r,n,i),$.exports={domain:k({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:m.background},radialaxis:l,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],633:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/color"),k=v("../../plot_api/plot_template"),x=v("../subplot_defaults"),e=v("../get_data").getSubplotData,n=v("../cartesian/tick_value_defaults"),i=v("../cartesian/tick_mark_defaults"),l=v("../cartesian/tick_label_defaults"),r=v("../cartesian/prefix_suffix_defaults"),d=v("../cartesian/category_order_defaults"),f=v("../cartesian/line_grid_defaults"),t=v("../cartesian/axis_autotype"),h=v("./layout_attributes"),s=v("./set_convert"),o=v("./constants"),p=o.axisNames;function c(y,u,_,b){var w=_("bgcolor");b.bgColor=g.combine(w,b.paper_bgcolor);var T=_("sector");_("hole");var C,M=e(b.fullData,o.name,b.id),I=b.layoutOut;function P(ee,N){return _(C+"."+ee,N)}for(var S=0;S<p.length;S++){m.isPlainObject(y[C=p[S]])||(y[C]={});var E=y[C],R=k.newContainer(u,C);R._id=R._name=C,R._attr=b.id+"."+C,R._traceIndices=M.map(function(ee){return ee._expandedIndex});var D=o.axisName2dataArray[C],j=a(E,R,P,M,D,b);d(E,R,P,{axData:M,dataAttr:D});var H=P("visible");switch(s(R,u,I),P("uirevision",u.uirevision),R._m=1,C){case"radialaxis":var Y=P("autorange",!R.isValidRange(E.range));E.autorange=Y,!Y||"linear"!==j&&"-"!==j||P("rangemode"),"reversed"===Y&&(R._m=-1),P("range"),R.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===j){m.log("Polar plots do not support date angular axes yet.");for(var X=0;X<M.length;X++)M[X].visible=!1;j=E.type=R.type="linear"}P("linear"===j?"thetaunit":"period");var Z=P("direction");P("rotation",{counterclockwise:0,clockwise:90}[Z])}if(r(E,R,P,R.type,{tickSuffixDflt:"degrees"===R.thetaunit?"\xb0":void 0}),H){var W,re,U,B,V=b.font||{};re=(W=P("color"))===E.color?W:V.color,U=V.size,B=V.family,n(E,R,P,R.type),l(E,R,P,R.type,{font:{color:re,size:U,family:B}}),i(E,R,P,{outerTicks:!0}),f(E,R,P,{dfltColor:W,bgColor:b.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:h[C]}),P("layer"),"radialaxis"===C&&(P("side"),P("angle",T[0]),P("title.text"),m.coerceFont(P,"title.font",{color:re,size:m.bigFont(U),family:B}))}"category"!==j&&P("hoverformat"),R._input=E}"category"===u.angularaxis.type&&_("gridshape")}function a(y,u,_,b,w,T){var C=_("autotypenumbers",T.autotypenumbersDflt);if("-"===_("type")){for(var M,I=0;I<b.length;I++)if(b[I].visible){M=b[I];break}M&&M[w]&&(u.type=t(M[w],"gregorian",{noMultiCategory:!0,autotypenumbers:C})),"-"===u.type?u.type="linear":y.type=u.type}return u.type}$.exports=function(y,u,_){x(y,u,_,{type:o.name,attributes:h,handleDefaults:c,font:u.font,autotypenumbersDflt:u.autotypenumbers,paper_bgcolor:u.paper_bgcolor,fullData:_,layoutOut:u})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/axis_autotype":567,"../cartesian/category_order_defaults":571,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../get_data":602,"../subplot_defaults":641,"./constants":629,"./layout_attributes":632,"./set_convert":635}],634:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("tinycolor2"),k=v("../../registry"),x=v("../../lib"),e=x.strRotate,n=x.strTranslate,i=v("../../components/color"),l=v("../../components/drawing"),r=v("../plots"),d=v("../../plots/cartesian/axes"),f=v("../cartesian/set_convert"),t=v("./set_convert"),h=v("../cartesian/autorange").doAutoRange,s=v("../cartesian/dragbox"),o=v("../../components/dragelement"),p=v("../../components/fx"),c=v("../../components/titles"),a=v("../../components/selections").prepSelect,y=v("../../components/selections").selectOnClick,u=v("../../components/selections").clearOutline,_=v("../../lib/setcursor"),b=v("../../lib/clear_gl_canvases"),w=v("../../plot_api/subroutines").redrawReglTraces,T=v("../../constants/alignment").MID_SHIFT,C=v("./constants"),M=v("./helpers"),I=v("../smith/helpers"),P=I.smith,S=I.reactanceArc,E=I.resistanceArc,R=I.smithTransform,D=x._,j=x.mod,H=x.deg2rad,Y=x.rad2deg;function X(B,V,ee){this.isSmith=ee||!1,this.id=V,this.gd=B,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var N=B._fullLayout;this.clipIds.forTraces="clip"+N._uid+V+"-for-traces",this.clipPaths.forTraces=N._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=N["_"+(ee?"smith":"polar")+"layer"].append("g").attr("class",V),this.getHole=function(J){return this.isSmith?0:J.hole},this.getSector=function(J){return this.isSmith?[0,360]:J.sector},this.getRadial=function(J){return this.isSmith?J.realaxis:J.radialaxis},this.getAngular=function(J){return this.isSmith?J.imaginaryaxis:J.angularaxis},ee||(this.radialTickLayout=null,this.angularTickLayout=null)}var Z=X.prototype;function W(B){var V=B.ticks+String(B.ticklen)+String(B.showticklabels);return"side"in B&&(V+=B.side),V}function re(B,V){return V[x.findIndexOfMin(V,function(ee){return x.angleDist(B,ee)})]}function U(B,V,ee){return V?(B.attr("display",null),B.attr(ee)):B&&B.attr("display","none"),B}$.exports=function(B,V,ee){return new X(B,V,ee)},Z.plot=function(B,V){for(var ee=V[this.id],N=!1,K=0;K<B.length;K++)if(!1===B[K][0].trace.cliponaxis){N=!0;break}this._hasClipOnAxisFalse=N,this.updateLayers(V,ee),this.updateLayout(V,ee),r.generalUpdatePerTraceModule(this.gd,this,B,ee),this.updateFx(V,ee),this.isSmith&&(delete ee.realaxis.range,delete ee.imaginaryaxis.range)},Z.updateLayers=function(B,V){var ee=this.isSmith,N=this.layers,K=this.getRadial(V),J=this.getAngular(V),te=C.layerNames,ae=te.indexOf("frontplot"),le=te.slice(0,ae),se="below traces"===J.layer,ve="below traces"===K.layer;se&&le.push("angular-line"),ve&&le.push("radial-line"),se&&le.push("angular-axis"),ve&&le.push("radial-axis"),le.push("frontplot"),se||le.push("angular-line"),ve||le.push("radial-line"),se||le.push("angular-axis"),ve||le.push("radial-axis");var ue=(ee?"smith":"polar")+"sublayer",ye=this.framework.selectAll("."+ue).data(le,String);ye.enter().append("g").attr("class",function(Me){return ue+" "+Me}).each(function(Me){var pe=N[Me]=m.select(this);switch(Me){case"frontplot":ee||pe.append("g").classed("barlayer",!0),pe.append("g").classed("scatterlayer",!0);break;case"backplot":pe.append("g").classed("maplayer",!0);break;case"plotbg":N.bg=pe.append("path");break;case"radial-grid":case"angular-grid":pe.style("fill","none");break;case"radial-line":pe.append("line").style("fill","none");break;case"angular-line":pe.append("path").style("fill","none")}}),ye.order()},Z.updateLayout=function(B,V){var ee=this.layers,N=B._size,K=this.getRadial(V),J=this.getAngular(V),te=V.domain.x,ae=V.domain.y;this.xOffset=N.l+N.w*te[0],this.yOffset=N.t+N.h*(1-ae[1]);var le=this.xLength=N.w*(te[1]-te[0]),se=this.yLength=N.h*(ae[1]-ae[0]),ve=this.getSector(V);this.sectorInRad=ve.map(H);var ue,ye,Me,pe,ge,bt,Ke,xt,Ht,Zt,$t,Xt,cr,Ft,Be,we=this.sectorBBox=(Ht=(bt=ve)[1]-(xt=bt[0]),$t=(Zt=j(xt,360))+Ht,Xt=Math.cos(H(Zt)),cr=Math.sin(H(Zt)),Ft=Math.cos(H($t)),Be=Math.sin(H($t)),Ke=Zt<=90&&$t>=90||Zt>90&&$t>=450?1:cr<=0&&Be<=0?0:Math.max(cr,Be),[Zt<=180&&$t>=180||Zt>180&&$t>=540?-1:Xt>=0&&Ft>=0?0:Math.min(Xt,Ft),Zt<=270&&$t>=270||Zt>270&&$t>=630?-1:cr>=0&&Be>=0?0:Math.min(cr,Be),$t>=360?1:Xt<=0&&Ft<=0?0:Math.max(Xt,Ft),Ke]),oe=we[2]-we[0],Te=se/le,Ee=Math.abs((we[3]-we[1])/oe);Te>Ee?(ue=le,ge=(se-(ye=le*Ee))/N.h/2,Me=[te[0],te[1]],pe=[ae[0]+ge,ae[1]-ge]):(ye=se,ge=(le-(ue=se/Ee))/N.w/2,Me=[te[0]+ge,te[1]-ge],pe=[ae[0],ae[1]]),this.xLength2=ue,this.yLength2=ye,this.xDomain2=Me,this.yDomain2=pe;var Ae,De=this.xOffset2=N.l+N.w*Me[0],Ie=this.yOffset2=N.t+N.h*(1-pe[1]),Oe=this.radius=ue/oe,Xe=this.innerRadius=this.getHole(V)*Oe,Fe=this.cx=De-Oe*we[0],Pe=this.cy=Ie+Oe*we[3],Re=this.cxx=Fe-De,qe=this.cyy=Pe-Ie,Qe=K.side;"counterclockwise"===Qe?(Ae=Qe,Qe="top"):"clockwise"===Qe&&(Ae=Qe,Qe="bottom"),this.radialAxis=this.mockAxis(B,V,K,{_id:"x",side:Qe,_trueSide:Ae,domain:[Xe/N.w,Oe/N.w]}),this.angularAxis=this.mockAxis(B,V,J,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(B,V),this.updateAngularAxis(B,V),this.updateRadialAxis(B,V),this.updateRadialAxisTitle(B,V),this.xaxis=this.mockCartesianAxis(B,V,{_id:"x",domain:Me}),this.yaxis=this.mockCartesianAxis(B,V,{_id:"y",domain:pe});var ct=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",ct).attr("transform",n(Re,qe)),ee.frontplot.attr("transform",n(De,Ie)).call(l.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),ee.bg.attr("d",ct).attr("transform",n(Fe,Pe)).call(i.fill,V.bgcolor)},Z.mockAxis=function(B,V,ee,N){var K=x.extendFlat({},ee,N);return t(K,V,B),K},Z.mockCartesianAxis=function(B,V,ee){var N=this,K=N.isSmith,J=ee._id,te=x.extendFlat({type:"linear"},ee);f(te,B);var ae={x:[0,2],y:[1,3]};return te.setRange=function(){var le=N.sectorBBox,se=ae[J],ve=N.radialAxis._rl,ue=(ve[1]-ve[0])/(1-N.getHole(V));te.range=[le[se[0]]*ue,le[se[1]]*ue]},te.isPtWithinRange="x"!==J||K?function(){return!0}:function(le){return N.isPtInside(le)},te.setRange(),te.setScale(),te},Z.doAutoRange=function(B,V){var ee=this.gd,N=this.radialAxis,K=this.getRadial(V);h(ee,N);var J=N.range;K.range=J.slice(),K._input.range=J.slice(),N._rl=[N.r2l(J[0],null,"gregorian"),N.r2l(J[1],null,"gregorian")]},Z.updateRadialAxis=function(B,V){var ee=this,N=ee.gd,K=ee.layers,J=ee.radius,te=ee.innerRadius,ae=ee.cx,le=ee.cy,se=ee.getRadial(V),ve=j(ee.getSector(V)[0],360),ue=ee.radialAxis,ye=te<J,Me=ee.isSmith;Me||(ee.fillViewInitialKey("radialaxis.angle",se.angle),ee.fillViewInitialKey("radialaxis.range",ue.range.slice()),ue.setGeometry()),"auto"===ue.tickangle&&ve>90&&ve<=270&&(ue.tickangle=180);var pe=Me?function(Oe){var Xe=R(ee,P([Oe.x,0]));return n(Xe[0]-ae,Xe[1]-le)}:function(Oe){return n(ue.l2p(Oe.x)+te,0)},ge=Me?function(Oe){return E(ee,Oe.x,-1/0,1/0)}:function(Oe){return ee.pathArc(ue.r2p(Oe.x)+te)},we=W(se);if(ee.radialTickLayout!==we&&(K["radial-axis"].selectAll(".xtick").remove(),ee.radialTickLayout=we),ye){ue.setScale();var oe=0,de=Me?(ue.tickvals||[]).filter(function(Oe){return Oe>=0}).map(function(Oe){return d.tickText(ue,Oe,!0,!1)}):d.calcTicks(ue),Te=Me?de:d.clipEnds(ue,de),Ee=d.getTickSigns(ue)[2];Me&&(("top"===ue.ticks&&"bottom"===ue.side||"bottom"===ue.ticks&&"top"===ue.side)&&(Ee=-Ee),"top"===ue.ticks&&"top"===ue.side&&(oe=-ue.ticklen),"bottom"===ue.ticks&&"bottom"===ue.side&&(oe=ue.ticklen)),d.drawTicks(N,ue,{vals:de,layer:K["radial-axis"],path:d.makeTickPath(ue,0,Ee),transFn:pe,crisp:!1}),d.drawGrid(N,ue,{vals:Te,layer:K["radial-grid"],path:ge,transFn:x.noop,crisp:!1}),d.drawLabels(N,ue,{vals:de,layer:K["radial-axis"],transFn:pe,labelFns:d.makeLabelFns(ue,oe)})}var Ae=ee.radialAxisAngle=ee.vangles?Y(re(H(se.angle),ee.vangles)):se.angle,De=n(ae,le),Ie=De+e(-Ae);U(K["radial-axis"],ye&&(se.showticklabels||se.ticks),{transform:Ie}),U(K["radial-grid"],ye&&se.showgrid,{transform:Me?"":De}),U(K["radial-line"].select("line"),ye&&se.showline,{x1:Me?-J:te,y1:0,x2:J,y2:0,transform:Ie}).attr("stroke-width",se.linewidth).call(i.stroke,se.linecolor)},Z.updateRadialAxisTitle=function(B,V,ee){if(!this.isSmith){var N=this.gd,K=this.radius,J=this.cx,te=this.cy,ae=this.getRadial(V),le=this.id+"title",se=0;if(ae.title){var ve=l.bBox(this.layers["radial-axis"].node()).height,ue=ae.title.font.size,ye=ae.side;se="top"===ye?ue:"counterclockwise"===ye?-(ve+.4*ue):ve+.8*ue}var Me=void 0!==ee?ee:this.radialAxisAngle,pe=H(Me),ge=Math.cos(pe),we=Math.sin(pe),oe=J+K/2*ge+se*we,de=te-K/2*we+se*ge;this.layers["radial-axis-title"]=c.draw(N,le,{propContainer:ae,propName:this.id+".radialaxis.title",placeholder:D(N,"Click to enter radial axis title"),attributes:{x:oe,y:de,"text-anchor":"middle"},transform:{rotate:-Me}})}},Z.updateAngularAxis=function(B,V){var ee=this,N=ee.gd,K=ee.layers,J=ee.radius,te=ee.innerRadius,ae=ee.cx,le=ee.cy,se=ee.getAngular(V),ve=ee.angularAxis,ue=ee.isSmith;ue||(ee.fillViewInitialKey("angularaxis.rotation",se.rotation),ve.setGeometry(),ve.setScale());var ye=ue?function(Oe){var Xe=R(ee,P([0,Oe.x]));return Math.atan2(Xe[0]-ae,Xe[1]-le)-Math.PI/2}:function(Oe){return ve.t2g(Oe.x)};"linear"===ve.type&&"radians"===ve.thetaunit&&(ve.tick0=Y(ve.tick0),ve.dtick=Y(ve.dtick));var Me=function(Oe){return n(ae+J*Math.cos(Oe),le-J*Math.sin(Oe))},pe=ue?function(Oe){var Xe=R(ee,P([0,Oe.x]));return n(Xe[0],Xe[1])}:function(Oe){return Me(ye(Oe))},ge=ue?function(Oe){var Xe=R(ee,P([0,Oe.x])),Fe=Math.atan2(Xe[0]-ae,Xe[1]-le)-Math.PI/2;return n(Xe[0],Xe[1])+e(-Y(Fe))}:function(Oe){var Xe=ye(Oe);return Me(Xe)+e(-Y(Xe))},we=ue?function(Oe){return S(ee,Oe.x,0,1/0)}:function(Oe){var Xe=ye(Oe),Fe=Math.cos(Xe),Pe=Math.sin(Xe);return"M"+[ae+te*Fe,le-te*Pe]+"L"+[ae+J*Fe,le-J*Pe]},oe=d.makeLabelFns(ve,0).labelStandoff,de={xFn:function(Oe){var Xe=ye(Oe);return Math.cos(Xe)*oe},yFn:function(Oe){var Xe=ye(Oe),Fe=Math.sin(Xe)>0?.2:1;return-Math.sin(Xe)*(oe+Oe.fontSize*Fe)+Math.abs(Math.cos(Xe))*(Oe.fontSize*T)},anchorFn:function(Oe){var Xe=ye(Oe),Fe=Math.cos(Xe);return Math.abs(Fe)<.1?"middle":Fe>0?"start":"end"},heightFn:function(Oe,Xe,Fe){var Pe=ye(Oe);return-.5*(1+Math.sin(Pe))*Fe}},Te=W(se);ee.angularTickLayout!==Te&&(K["angular-axis"].selectAll("."+ve._id+"tick").remove(),ee.angularTickLayout=Te);var Ee,Ae=ue?[1/0].concat(ve.tickvals||[]).map(function(Oe){return d.tickText(ve,Oe,!0,!1)}):d.calcTicks(ve);if(ue&&(Ae[0].text="\u221e",Ae[0].fontSize*=1.75),"linear"===V.gridshape?(Ee=Ae.map(ye),x.angleDelta(Ee[0],Ee[1])<0&&(Ee=Ee.slice().reverse())):Ee=null,ee.vangles=Ee,"category"===ve.type&&(Ae=Ae.filter(function(Oe){return x.isAngleInsideSector(ye(Oe),ee.sectorInRad)})),ve.visible){var De="inside"===ve.ticks?-1:1;d.drawTicks(N,ve,{vals:Ae,layer:K["angular-axis"],path:"M"+De*((ve.linewidth||1)/2)+",0h"+De*ve.ticklen,transFn:ge,crisp:!1}),d.drawGrid(N,ve,{vals:Ae,layer:K["angular-grid"],path:we,transFn:x.noop,crisp:!1}),d.drawLabels(N,ve,{vals:Ae,layer:K["angular-axis"],repositionOnUpdate:!0,transFn:pe,labelFns:de})}U(K["angular-line"].select("path"),se.showline,{d:ee.pathSubplot(),transform:n(ae,le)}).attr("stroke-width",se.linewidth).call(i.stroke,se.linecolor)},Z.updateFx=function(B,V){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(B),this.updateRadialDrag(B,V,0),this.updateRadialDrag(B,V,1)),this.updateHoverAndMainDrag(B))},Z.updateHoverAndMainDrag=function(B){var V,ee,N=this,K=N.isSmith,J=N.gd,ae=B._zoomlayer,le=C.MINZOOM,se=C.OFFEDGE,ve=N.radius,ue=N.innerRadius,ye=N.cx,Me=N.cy,pe=N.cxx,ge=N.cyy,we=N.sectorInRad,oe=N.vangles,de=N.radialAxis,Te=M.clampTiny,Ee=M.findXYatLength,Ae=M.findEnclosingVertexAngles,De=C.cornerHalfWidth,Ie=C.cornerLen/2,Oe=s.makeDragger(N.layers,"path","maindrag",!1===B.dragmode?"none":"crosshair");m.select(Oe).attr("d",N.pathSubplot()).attr("transform",n(ye,Me)),Oe.onmousemove=function(Ve){p.hover(J,Ve,N.id),J._fullLayout._lasthover=Oe,J._fullLayout._hoversubplot=N.id},Oe.onmouseout=function(Ve){J._dragging||o.unhover(J,Ve)};var Xe,Fe,Pe,Re,qe,Qe,ct,bt,Tt,_t={element:Oe,gd:J,subplot:N.id,plotinfo:{id:N.id,xaxis:N.xaxis,yaxis:N.yaxis},xaxes:[N.xaxis],yaxes:[N.yaxis]};function nt(Ve,Je){return Math.sqrt(Ve*Ve+Je*Je)}function Ke(Ve,Je){return nt(Ve-pe,Je-ge)}function xt(Ve,Je){return Math.atan2(ge-Je,Ve-pe)}function Ht(Ve,Je){return[Ve*Math.cos(Je),Ve*Math.sin(-Je)]}function Zt(Ve,Je){if(0===Ve)return N.pathSector(2*De);var Ye=Ie/Ve,lt=Je-Ye,st=Je+Ye,Mt=Math.max(0,Math.min(Ve,ve)),Dt=Mt-De,ht=Mt+De;return"M"+Ht(Dt,lt)+"A"+[Dt,Dt]+" 0,0,0 "+Ht(Dt,st)+"L"+Ht(ht,st)+"A"+[ht,ht]+" 0,0,1 "+Ht(ht,lt)+"Z"}function $t(Ve,Je,Ye){if(0===Ve)return N.pathSector(2*De);var lt,st,Mt=Ht(Ve,Je),Dt=Ht(Ve,Ye),ht=Te((Mt[0]+Dt[0])/2),mt=Te((Mt[1]+Dt[1])/2);if(ht&&mt){var Ot=mt/ht,At=-1/Ot,It=Ee(De,Ot,ht,mt);lt=Ee(Ie,At,It[0][0],It[0][1]),st=Ee(Ie,At,It[1][0],It[1][1])}else{var Se,Ze;mt?(Se=Ie,Ze=De):(Se=De,Ze=Ie),lt=[[ht-Se,mt-Ze],[ht+Se,mt-Ze]],st=[[ht-Se,mt+Ze],[ht+Se,mt+Ze]]}return"M"+lt.join("L")+"L"+st.reverse().join("L")+"Z"}function Xt(Ve,Je){return Je=Math.max(Math.min(Je,ve),ue),Ve<se?Ve=0:ve-Ve<se?Ve=ve:Je<se?Je=0:ve-Je<se&&(Je=ve),Math.abs(Je-Ve)>le?(Ve<Je?(Pe=Ve,Re=Je):(Pe=Je,Re=Ve),!0):(Pe=null,Re=null,!1)}function cr(Ve,Je){Je=Je||"M0,0Z",bt.attr("d",Ve=Ve||qe),Tt.attr("d",Je),s.transitionZoombox(bt,Tt,Qe,ct),Qe=!0;var Ye={};be(Ye),J.emit("plotly_relayouting",Ye)}function Ft(Ve,Je){var Ye,lt,st=Xe+(Ve*=V),Mt=Fe+(Je*=ee),Dt=Ke(Xe,Fe),ht=Math.min(Ke(st,Mt),ve),mt=xt(Xe,Fe);Xt(Dt,ht)&&(Ye=qe+N.pathSector(Re),Pe&&(Ye+=N.pathSector(Pe)),lt=Zt(Pe,mt)+Zt(Re,mt)),cr(Ye,lt)}function Be(Ve,Je,Ye,lt){var st=M.findIntersectionXY(Ye,lt,Ye,[Ve-pe,ge-Je]);return nt(st[0],st[1])}function He(Ve,Je){var Ye,lt,st=Xe+Ve,Mt=Fe+Je,Dt=xt(Xe,Fe),ht=xt(st,Mt),mt=Ae(Dt,oe),Ot=Ae(ht,oe);Xt(Be(Xe,Fe,mt[0],mt[1]),Math.min(Be(st,Mt,Ot[0],Ot[1]),ve))&&(Ye=qe+N.pathSector(Re),Pe&&(Ye+=N.pathSector(Pe)),lt=[$t(Pe,mt[0],mt[1]),$t(Re,mt[0],mt[1])].join(" ")),cr(Ye,lt)}function he(){if(s.removeZoombox(J),null!==Pe&&null!==Re){var Ve={};be(Ve),s.showDoubleClickNotifier(J),k.call("_guiRelayout",J,Ve)}}function be(Ve){var Je=de._rl,Ye=(Je[1]-Je[0])/(1-ue/ve)/ve;Ve[N.id+".radialaxis.range"]=[Je[0]+(Pe-ue)*Ye,Je[0]+(Re-ue)*Ye]}function ze(Ve,Je){var Ye=J._fullLayout.clickmode;if(s.removeZoombox(J),2===Ve){var lt={};for(var st in N.viewInitial)lt[N.id+"."+st]=N.viewInitial[st];J.emit("plotly_doubleclick",null),k.call("_guiRelayout",J,lt)}Ye.indexOf("select")>-1&&1===Ve&&y(Je,J,[N.xaxis],[N.yaxis],N.id,_t),Ye.indexOf("event")>-1&&p.click(J,Je,N.id)}_t.prepFn=function(Ve,Je,Ye){var lt=J._fullLayout.dragmode,st=Oe.getBoundingClientRect();J._fullLayout._calcInverseTransform(J),V=J._fullLayout._invScaleX,ee=J._fullLayout._invScaleY;var Dt=x.apply3DTransform(J._fullLayout._invTransform)(Je-st.left,Ye-st.top);if(Xe=Dt[0],Fe=Dt[1],oe){var ht=M.findPolygonOffset(ve,we[0],we[1],oe);Xe+=pe+ht[0],Fe+=ge+ht[1]}switch(lt){case"zoom":_t.clickFn=ze,K||(_t.moveFn=oe?He:Ft,_t.doneFn=he,Pe=null,Re=null,qe=N.pathSubplot(),Qe=!1,ct=g(J._fullLayout[N.id].bgcolor).getLuminance(),(bt=s.makeZoombox(ae,ct,ye,Me,qe)).attr("fill-rule","evenodd"),Tt=s.makeCorners(ae,ye,Me),u(J));break;case"select":case"lasso":a(Ve,Je,Ye,_t,lt)}},o.init(_t)},Z.updateRadialDrag=function(B,V,ee){var N=this,K=N.gd,J=N.layers,te=N.radius,ae=N.innerRadius,le=N.cx,se=N.cy,ve=N.radialAxis,ue=C.radialDragBoxSize,ye=ue/2;if(ve.visible){var Me,pe,ge,we=H(N.radialAxisAngle),oe=ve._rl,de=oe[0],Te=oe[1],Ee=oe[ee],Ae=.75*(oe[1]-oe[0])/(1-N.getHole(V))/te;ee?(Me=le+(te+ye)*Math.cos(we),pe=se-(te+ye)*Math.sin(we),ge="radialdrag"):(Me=le+(ae-ye)*Math.cos(we),pe=se-(ae-ye)*Math.sin(we),ge="radialdrag-inner");var De,Ie,Oe,Xe=s.makeRectDragger(J,ge,"crosshair",-ye,-ye,ue,ue),Fe={element:Xe,gd:K};!1===B.dragmode&&(Fe.dragmode=!1),U(m.select(Xe),ve.visible&&ae<te,{transform:n(Me,pe)}),Fe.prepFn=function(){De=null,Ie=null,Oe=null,Fe.moveFn=Pe,Fe.doneFn=Re,u(K)},Fe.clampFn=function(ct,bt){return Math.sqrt(ct*ct+bt*bt)<C.MINDRAG&&(ct=0,bt=0),[ct,bt]},o.init(Fe)}function Pe(ct,bt){if(De)De(ct,bt);else{var Tt=[ct,-bt],_t=[Math.cos(we),Math.sin(we)],nt=Math.abs(x.dot(Tt,_t)/Math.sqrt(x.dot(Tt,Tt)));isNaN(nt)||(De=nt<.5?qe:Qe)}var xt,Ke={};xt=Ke,null!==Ie?xt[N.id+".radialaxis.angle"]=Ie:null!==Oe&&(xt[N.id+".radialaxis.range["+ee+"]"]=Oe),K.emit("plotly_relayouting",Ke)}function Re(){null!==Ie?k.call("_guiRelayout",K,N.id+".radialaxis.angle",Ie):null!==Oe&&k.call("_guiRelayout",K,N.id+".radialaxis.range["+ee+"]",Oe)}function qe(ct,bt){if(0!==ee){Ie=Math.atan2(se-(pe+bt),Me+ct-le),N.vangles&&(Ie=re(Ie,N.vangles)),Ie=Y(Ie);var nt=n(le,se)+e(-Ie);J["radial-axis"].attr("transform",nt),J["radial-line"].select("line").attr("transform",nt);var Ke=N.gd._fullLayout;N.updateRadialAxisTitle(Ke,Ke[N.id],Ie)}}function Qe(ct,bt){var Tt=x.dot([ct,-bt],[Math.cos(we),Math.sin(we)]);if(Oe=Ee-Ae*Tt,Ae>0==(ee?Oe>de:Oe<Te)){var _t=K._fullLayout,nt=_t[N.id];ve.range[ee]=Oe,ve._rl[ee]=Oe,N.updateRadialAxis(_t,nt),N.xaxis.setRange(),N.xaxis.setScale(),N.yaxis.setRange(),N.yaxis.setScale();var Ke=!1;for(var xt in N.traceHash){var Ht=N.traceHash[xt],Zt=x.filterVisible(Ht);Ht[0][0].trace._module.plot(K,N,Zt,nt),k.traceIs(xt,"gl")&&Zt.length&&(Ke=!0)}Ke&&(b(K),w(K))}else Oe=null}},Z.updateAngularDrag=function(B){var V=this,ee=V.gd,N=V.layers,K=V.radius,J=V.angularAxis,te=V.cx,ae=V.cy,le=V.cxx,se=V.cyy,ve=C.angularDragBoxSize,ue=s.makeDragger(N,"path","angulardrag",!1===B.dragmode?"none":"move"),ye={element:ue,gd:ee};function Me(Fe,Pe){return Math.atan2(se+ve-Pe,Fe-le-ve)}!1===B.dragmode?ye.dragmode=!1:m.select(ue).attr("d",V.pathAnnulus(K,K+ve)).attr("transform",n(te,ae)).call(_,"move");var pe,ge,we,oe,de,Te,Ee=N.frontplot.select(".scatterlayer").selectAll(".trace"),Ae=Ee.selectAll(".point"),De=Ee.selectAll(".textpoint");function Ie(Fe,Pe){var Re=V.gd._fullLayout,qe=Re[V.id],Qe=Me(pe+Fe*B._invScaleX,ge+Pe*B._invScaleY),ct=Y(Qe-Te);if(oe=we+ct,N.frontplot.attr("transform",n(V.xOffset2,V.yOffset2)+e([-ct,le,se])),V.vangles){de=V.radialAxisAngle+ct;var bt=n(te,ae)+e(-ct),Tt=n(te,ae)+e(-de);N.bg.attr("transform",bt),N["radial-grid"].attr("transform",bt),N["radial-axis"].attr("transform",Tt),N["radial-line"].select("line").attr("transform",Tt),V.updateRadialAxisTitle(Re,qe,de)}else V.clipPaths.forTraces.select("path").attr("transform",n(le,se)+e(ct));Ae.each(function(){var Zt=m.select(this),$t=l.getTranslate(Zt);Zt.attr("transform",n($t.x,$t.y)+e([ct]))}),De.each(function(){var Zt=m.select(this),$t=Zt.select("text"),Xt=l.getTranslate(Zt);Zt.attr("transform",e([ct,$t.attr("x"),$t.attr("y")])+n(Xt.x,Xt.y))}),J.rotation=x.modHalf(oe,360),V.updateAngularAxis(Re,qe),V._hasClipOnAxisFalse&&!x.isFullCircle(V.sectorInRad)&&Ee.call(l.hideOutsideRangePoints,V);var _t=!1;for(var nt in V.traceHash)if(k.traceIs(nt,"gl")){var Ke=V.traceHash[nt],xt=x.filterVisible(Ke);Ke[0][0].trace._module.plot(ee,V,xt,qe),xt.length&&(_t=!0)}_t&&(b(ee),w(ee));var Ht={};Oe(Ht),ee.emit("plotly_relayouting",Ht)}function Oe(Fe){Fe[V.id+".angularaxis.rotation"]=oe,V.vangles&&(Fe[V.id+".radialaxis.angle"]=de)}function Xe(){De.select("text").attr("transform",null);var Fe={};Oe(Fe),k.call("_guiRelayout",ee,Fe)}ye.prepFn=function(Fe,Pe,Re){we=B[V.id].angularaxis.rotation;var Qe=ue.getBoundingClientRect();pe=Pe-Qe.left,ge=Re-Qe.top,ee._fullLayout._calcInverseTransform(ee);var ct=x.apply3DTransform(B._invTransform)(pe,ge);Te=Me(pe=ct[0],ge=ct[1]),ye.moveFn=Ie,ye.doneFn=Xe,u(ee)},V.vangles&&!x.isFullCircle(V.sectorInRad)&&(ye.prepFn=x.noop,_(m.select(ue),null)),o.init(ye)},Z.isPtInside=function(B){if(this.isSmith)return!0;var V=this.sectorInRad,ee=this.vangles,N=this.angularAxis.c2g(B.theta),K=this.radialAxis,J=K.c2l(B.r);return(ee?M.isPtInsidePolygon:x.isPtInsideSector)(J,N,K._rl,V,ee)},Z.pathArc=function(B){var V=this.sectorInRad,ee=this.vangles;return(ee?M.pathPolygon:x.pathArc)(B,V[0],V[1],ee)},Z.pathSector=function(B){var V=this.sectorInRad,ee=this.vangles;return(ee?M.pathPolygon:x.pathSector)(B,V[0],V[1],ee)},Z.pathAnnulus=function(B,V){var ee=this.sectorInRad,N=this.vangles;return(N?M.pathPolygonAnnulus:x.pathAnnulus)(B,V,ee[0],ee[1],N)},Z.pathSubplot=function(){var B=this.innerRadius,V=this.radius;return B?this.pathAnnulus(B,V):this.pathSector(V)},Z.fillViewInitialKey=function(B,V){B in this.viewInitial||(this.viewInitial[B]=V)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../plot_api/subroutines":556,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/dragbox":575,"../cartesian/set_convert":585,"../plots":628,"../smith/helpers":637,"./constants":629,"./helpers":630,"./set_convert":635,"@plotly/d3":58,tinycolor2:313}],635:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../cartesian/set_convert"),k=m.deg2rad,x=m.rad2deg;$.exports=function(e,n,i){switch(g(e,i),e._id){case"x":case"radialaxis":d=n._subplot,(l=e).setGeometry=function(){var f=l._rl[0],t=l._rl[1],h=d.innerRadius,s=(d.radius-h)/(t-f),o=h/s,p=f>t?function(c){return c<=0}:function(c){return c>=0};l.c2g=function(c){var a=l.c2l(c)-f;return(p(a)?a:0)+o},l.g2c=function(c){return l.l2c(c+f-o)},l.g2p=function(c){return c*s},l.c2p=function(c){return l.g2p(l.c2g(c))}};break;case"angularaxis":!function(l,r){var d=l.type;if("linear"===d){var f=l.d2c,t=l.c2d;l.d2c=function(h,s){return o=f(h),"degrees"===s?k(o):o;var o},l.c2d=function(h,s){return t((o=h,"degrees"===s?x(o):o));var o}}l.makeCalcdata=function(h,s){var o,p,c=h[s],a=h._length,y=function(T){return l.d2c(T,h.thetaunit)};if(c){if(m.isTypedArray(c)&&"linear"===d){if(a===c.length)return c;if(c.subarray)return c.subarray(0,a)}for(o=new Array(a),p=0;p<a;p++)o[p]=y(c[p])}else{var u=s+"0",_="d"+s,b=u in h?y(h[u]):0,w=h[_]?y(h[_]):(l.period||2*Math.PI)/a;for(o=new Array(a),p=0;p<a;p++)o[p]=b+p*w}return o},l.setGeometry=function(){var h,s,o,p,c=r.sector,a=c.map(k),y={clockwise:-1,counterclockwise:1}[l.direction],u=k(l.rotation),_=function(C){return y*C+u},b=function(C){return(C-u)/y};switch(d){case"linear":s=h=m.identity,p=k,o=x,l.range=m.isFullCircle(a)?[c[0],c[0]+360]:a.map(b).map(x);break;case"category":var w=l._categories.length,T=l.period?Math.max(l.period,w):w;0===T&&(T=1),s=p=function(C){return 2*C*Math.PI/T},h=o=function(C){return C*T/Math.PI/2},l.range=[0,T]}l.c2g=function(C){return _(s(C))},l.g2c=function(C){return h(b(C))},l.t2g=function(C){return _(p(C))},l.g2t=function(C){return o(b(C))}}}(e,n)}var l,d}},{"../../lib":515,"../cartesian/set_convert":585}],636:[function(v,$,Q){"use strict";$.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],637:[function(v,$,Q){"use strict";function m(e){return e<0?-1:e>0?1:0}function g(e){var n=e[0],i=e[1];if(!isFinite(n)||!isFinite(i))return[1,0];var l=(n+1)*(n+1)+i*i;return[(n*n+i*i-1)/l,2*i/l]}function k(e,n){return[n[0]*e.radius+e.cx,-n[1]*e.radius+e.cy]}function x(e,n){return n*e.radius}$.exports={smith:g,reactanceArc:function(e,n,i,l){var r=k(e,g([i,n])),d=r[0],f=r[1],t=k(e,g([l,n])),h=t[0],s=t[1];if(0===n)return["M"+d+","+f,"L"+h+","+s].join(" ");var o=x(e,1/Math.abs(n));return["M"+d+","+f,"A"+o+","+o+" 0 0,"+(n<0?1:0)+" "+h+","+s].join(" ")},resistanceArc:function(e,n,i,l){var r=x(e,1/(n+1)),d=k(e,g([n,i])),f=d[0],t=d[1],h=k(e,g([n,l])),s=h[0],o=h[1];if(m(i)!==m(l)){var p=k(e,g([n,0]));return["M"+f+","+t,"A"+r+","+r+" 0 0,"+(0<i?0:1)+" "+p[0]+","+p[1],"A"+r+","+r+" 0 0,"+(l<0?0:1)+s+","+o].join(" ")}return["M"+f+","+t,"A"+r+","+r+" 0 0,"+(l<i?0:1)+" "+s+","+o].join(" ")},smithTransform:k}},{}],638:[function(v,$,Q){"use strict";var m=v("../get_data").getSubplotCalcData,g=v("../../lib").counterRegex,k=v("../polar/polar"),x=v("./constants"),e=x.attr,n=x.name,i=g(n),l={};l[e]={valType:"subplotid",dflt:n,editType:"calc"},$.exports={attr:e,name:n,idRoot:n,idRegex:i,attrRegex:i,attributes:l,layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),plot:function(r){for(var d=r._fullLayout,f=r.calcdata,t=d._subplots[n],h=0;h<t.length;h++){var s=t[h],o=m(f,n,s),p=d[s]._subplot;p||(p=k(r,s,!0),d[s]._subplot=p),p.plot(o,d,r._promises)}},clean:function(r,d,f,t){for(var h=t._subplots[n]||[],s=0;s<h.length;s++){var o=h[s],p=t[o]._subplot;if(!d[o]&&p)for(var c in p.framework.remove(),p.clipPaths)p.clipPaths[c].remove()}},toSVG:v("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"../polar/polar":634,"./constants":636,"./layout_attributes":639,"./layout_defaults":640}],639:[function(v,$,Q){"use strict";var m=v("../../components/color/attributes"),g=v("../cartesian/layout_attributes"),k=v("../domain").attributes,x=v("../../lib").extendFlat,e=v("../../plot_api/edit_types").overrideAll,n=e({color:g.color,showline:x({},g.showline,{dflt:!0}),linecolor:g.linecolor,linewidth:g.linewidth,showgrid:x({},g.showgrid,{dflt:!0}),gridcolor:g.gridcolor,gridwidth:g.gridwidth,griddash:g.griddash},"plot","from-root"),i=e({ticklen:g.ticklen,tickwidth:x({},g.tickwidth,{dflt:2}),tickcolor:g.tickcolor,showticklabels:g.showticklabels,showtickprefix:g.showtickprefix,tickprefix:g.tickprefix,showticksuffix:g.showticksuffix,ticksuffix:g.ticksuffix,tickfont:g.tickfont,tickformat:g.tickformat,hoverformat:g.hoverformat,layer:g.layer},"plot","from-root"),l=x({visible:x({},g.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:x({},g.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},n,i),r=x({visible:x({},g.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:g.ticks,editType:"calc"},n,i);$.exports={domain:k({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:m.background},realaxis:l,imaginaryaxis:r,editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],640:[function(v,$,Q){"use strict";var m,g,k,x=v("../../lib"),e=v("../../components/color"),n=v("../../plot_api/plot_template"),i=v("../subplot_defaults"),l=v("../get_data").getSubplotData,r=v("../cartesian/prefix_suffix_defaults"),d=v("../cartesian/tick_label_defaults"),f=v("../cartesian/line_grid_defaults"),t=v("../cartesian/set_convert"),h=v("./layout_attributes"),s=v("./constants"),o=s.axisNames,p=(m=function(a){return a.slice().reverse().map(function(y){return-y}).concat([0]).concat(a)},g=String,k={},function(a){var y=g?g(a):a;if(y in k)return k[y];var u=m(a);return k[y]=u,u});function c(a,y,u,_){var b=u("bgcolor");_.bgColor=e.combine(b,_.paper_bgcolor);var w,T=l(_.fullData,s.name,_.id),C=_.layoutOut;function M(Z,W){return u(w+"."+Z,W)}for(var I=0;I<o.length;I++){x.isPlainObject(a[w=o[I]])||(a[w]={});var P=a[w],S=n.newContainer(y,w);S._id=S._name=w,S._attr=_.id+"."+w,S._traceIndices=T.map(function(Z){return Z._expandedIndex});var E=M("visible");if(S.type="linear",t(S,C),r(P,S,M,S.type),E){var R,D,j,H,Y="realaxis"===w;Y&&M("side"),Y?M("tickvals"):M("tickvals",p(y.realaxis.tickvals||h.realaxis.tickvals.dflt));var X=_.font||{};E&&(D=(R=M("color"))===P.color?R:X.color,j=X.size,H=X.family),d(P,S,M,S.type,{noTicklabelstep:!0,noAng:!Y,noExp:!0,font:{color:D,size:j,family:H}}),x.coerce2(a,y,h,w+".ticklen"),x.coerce2(a,y,h,w+".tickwidth"),x.coerce2(a,y,h,w+".tickcolor",y.color),M("ticks")||(delete y[w].ticklen,delete y[w].tickwidth,delete y[w].tickcolor),f(P,S,M,{dfltColor:R,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:h[w]}),M("layer")}M("hoverformat"),delete S.type,S._input=P}}$.exports=function(a,y,u){i(a,y,u,{noUirevision:!0,type:s.name,attributes:h,handleDefaults:c,font:y.font,paper_bgcolor:y.paper_bgcolor,fullData:u,layoutOut:y})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/set_convert":585,"../cartesian/tick_label_defaults":587,"../get_data":602,"../subplot_defaults":641,"./constants":636,"./layout_attributes":639}],641:[function(v,$,Q){"use strict";var m=v("../lib"),g=v("../plot_api/plot_template"),k=v("./domain").defaults;$.exports=function(x,e,n,i){var l,r,f=i.attributes,t=i.handleDefaults,h=i.partition||"x",s=e._subplots[i.type],o=s.length,p=o&&s[0].replace(/\d+$/,"");function c(_,b){return m.coerce(l,r,f,_,b)}for(var a=0;a<o;a++){var y=s[a];l=x[y]?x[y]:x[y]={},r=g.newContainer(e,y,p),i.noUirevision||c("uirevision",e.uirevision);var u={};u[h]=[a/o,(a+1)/o],k(r,e,c,u),i.id=y,t(l,r,c,i)}}},{"../lib":515,"../plot_api/plot_template":555,"./domain":593}],642:[function(v,$,Q){"use strict";function g(k){var x=k.description?" "+k.description:"",e=k.keys||[];if(e.length>0){for(var n=[],i=0;i<e.length;i++)n[i]="`"+e[i]+"`";x+="Finally, the template string has access to ",x=1===e.length?"variable "+n[0]:"variables "+n.slice(0,-1).join(", ")+" and "+n.slice(-1)+"."}return x}v("../constants/docs"),Q.hovertemplateAttrs=function(k,x){k=k||{},g(x=x||{});var e={valType:"string",dflt:"",editType:k.editType||"none"};return!1!==k.arrayOk&&(e.arrayOk=!0),e},Q.texttemplateAttrs=function(k,x){k=k||{},g(x=x||{});var e={valType:"string",dflt:"",editType:k.editType||"calc"};return!1!==k.arrayOk&&(e.arrayOk=!0),e}},{"../constants/docs":486}],643:[function(v,$,Q){"use strict";var m=v("./ternary"),g=v("../../plots/get_data").getSubplotCalcData,k=v("../../lib").counterRegex;Q.name="ternary";var x=Q.attr="subplot";Q.idRoot="ternary",Q.idRegex=Q.attrRegex=k("ternary"),(Q.attributes={})[x]={valType:"subplotid",dflt:"ternary",editType:"calc"},Q.layoutAttributes=v("./layout_attributes"),Q.supplyLayoutDefaults=v("./layout_defaults"),Q.plot=function(e){for(var n=e._fullLayout,i=e.calcdata,l=n._subplots.ternary,r=0;r<l.length;r++){var d=l[r],f=g(i,"ternary",d),t=n[d]._subplot;t||(t=new m({id:d,graphDiv:e,container:n._ternarylayer.node()},n),n[d]._subplot=t),t.plot(f,n,e._promises)}},Q.clean=function(e,n,i,l){for(var r=l._subplots.ternary||[],d=0;d<r.length;d++){var f=r[d],t=l[f]._subplot;!n[f]&&t&&(t.plotContainer.remove(),t.clipDef.remove(),t.clipDefRelative.remove(),t.layers["a-title"].remove(),t.layers["b-title"].remove(),t.layers["c-title"].remove())}}},{"../../lib":515,"../../plots/get_data":602,"./layout_attributes":644,"./layout_defaults":645,"./ternary":646}],644:[function(v,$,Q){"use strict";var m=v("../../components/color/attributes"),g=v("../domain").attributes,k=v("../cartesian/layout_attributes"),x=v("../../plot_api/edit_types").overrideAll,e=v("../../lib/extend").extendFlat,n={title:{text:k.title.text,font:k.title.font},color:k.color,tickmode:k.tickmode,nticks:e({},k.nticks,{dflt:6,min:1}),tick0:k.tick0,dtick:k.dtick,tickvals:k.tickvals,ticktext:k.ticktext,ticks:k.ticks,ticklen:k.ticklen,tickwidth:k.tickwidth,tickcolor:k.tickcolor,ticklabelstep:k.ticklabelstep,showticklabels:k.showticklabels,showtickprefix:k.showtickprefix,tickprefix:k.tickprefix,showticksuffix:k.showticksuffix,ticksuffix:k.ticksuffix,showexponent:k.showexponent,exponentformat:k.exponentformat,minexponent:k.minexponent,separatethousands:k.separatethousands,tickfont:k.tickfont,tickangle:k.tickangle,tickformat:k.tickformat,tickformatstops:k.tickformatstops,hoverformat:k.hoverformat,showline:e({},k.showline,{dflt:!0}),linecolor:k.linecolor,linewidth:k.linewidth,showgrid:e({},k.showgrid,{dflt:!0}),gridcolor:k.gridcolor,gridwidth:k.gridwidth,griddash:k.griddash,layer:k.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:k._deprecated.title,titlefont:k._deprecated.titlefont}},i=$.exports=x({domain:g({name:"ternary"}),bgcolor:{valType:"color",dflt:m.background},sum:{valType:"number",dflt:1,min:0},aaxis:n,baxis:n,caxis:n},"plot","from-root");i.uirevision={valType:"any",editType:"none"},i.aaxis.uirevision=i.baxis.uirevision=i.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],645:[function(v,$,Q){"use strict";var m=v("../../components/color"),g=v("../../plot_api/plot_template"),k=v("../../lib"),x=v("../subplot_defaults"),e=v("../cartesian/tick_label_defaults"),n=v("../cartesian/prefix_suffix_defaults"),i=v("../cartesian/tick_mark_defaults"),l=v("../cartesian/tick_value_defaults"),r=v("../cartesian/line_grid_defaults"),d=v("./layout_attributes"),f=["aaxis","baxis","caxis"];function t(s,o,p,c){var a,y,u,_=p("bgcolor"),b=p("sum");c.bgColor=m.combine(_,c.paper_bgcolor);for(var w=0;w<f.length;w++)y=s[a=f[w]]||{},(u=g.newContainer(o,a))._name=a,h(y,u,c,o);var T=o.aaxis,C=o.baxis,M=o.caxis;T.min+C.min+M.min>=b&&(T.min=0,C.min=0,M.min=0,s.aaxis&&delete s.aaxis.min,s.baxis&&delete s.baxis.min,s.caxis&&delete s.caxis.min)}function h(s,o,p,c){var a=d[o._name];function y(C,M){return k.coerce(s,o,a,C,M)}y("uirevision",c.uirevision),o.type="linear";var u=y("color"),_=u!==a.color.dflt?u:p.font.color,b=o._name.charAt(0).toUpperCase(),w="Component "+b,T=y("title.text",w);o._hovertitle=T===w?T:b,k.coerceFont(y,"title.font",{family:p.font.family,size:k.bigFont(p.font.size),color:_}),y("min"),l(s,o,y,"linear"),n(s,o,y,"linear"),e(s,o,y,"linear"),i(s,o,y,{outerTicks:!0}),y("showticklabels")&&(k.coerceFont(y,"tickfont",{family:p.font.family,size:p.font.size,color:_}),y("tickangle"),y("tickformat")),r(s,o,y,{dfltColor:u,bgColor:p.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:a}),y("hoverformat"),y("layer")}$.exports=function(s,o,p){x(s,o,p,{type:"ternary",attributes:d,handleDefaults:t,font:o.font,paper_bgcolor:o.paper_bgcolor})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../subplot_defaults":641,"./layout_attributes":644}],646:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("tinycolor2"),k=v("../../registry"),x=v("../../lib"),e=x.strTranslate,n=x._,i=v("../../components/color"),l=v("../../components/drawing"),r=v("../cartesian/set_convert"),d=v("../../lib/extend").extendFlat,f=v("../plots"),t=v("../cartesian/axes"),h=v("../../components/dragelement"),s=v("../../components/fx"),o=v("../../components/dragelement/helpers"),p=o.freeMode,c=o.rectMode,a=v("../../components/titles"),y=v("../../components/selections").prepSelect,u=v("../../components/selections").selectOnClick,_=v("../../components/selections").clearOutline,b=v("../../components/selections").clearSelectionsCache,w=v("../cartesian/constants");function T(j,H){this.id=j.id,this.graphDiv=j.graphDiv,this.init(H),this.makeFramework(H),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}$.exports=T;var C=T.prototype;C.init=function(j){this.container=j._ternarylayer,this.defs=j._defs,this.layoutId=j._uid,this.traceHash={},this.layers={}},C.plot=function(j,H){var Y=H[this.id],X=H._size;this._hasClipOnAxisFalse=!1;for(var Z=0;Z<j.length;Z++)if(!1===j[Z][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(Y),this.adjustLayout(Y,X),f.generalUpdatePerTraceModule(this.graphDiv,this,j,Y),this.layers.plotbg.select("path").call(i.fill,Y.bgcolor)},C.makeFramework=function(j){var H=this.graphDiv,Y=j[this.id],X=this.clipId="clip"+this.layoutId+this.id,Z=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=x.ensureSingleById(j._clips,"clipPath",X,function(W){W.append("path").attr("d","M0,0Z")}),this.clipDefRelative=x.ensureSingleById(j._clips,"clipPath",Z,function(W){W.append("path").attr("d","M0,0Z")}),this.plotContainer=x.ensureSingle(this.container,"g",this.id),this.updateLayers(Y),l.setClipUrl(this.layers.backplot,X,H),l.setClipUrl(this.layers.grids,X,H)},C.updateLayers=function(j){var H=this.layers,Y=["draglayer","plotbg","backplot","grids"];"below traces"===j.aaxis.layer&&Y.push("aaxis","aline"),"below traces"===j.baxis.layer&&Y.push("baxis","bline"),"below traces"===j.caxis.layer&&Y.push("caxis","cline"),Y.push("frontplot"),"above traces"===j.aaxis.layer&&Y.push("aaxis","aline"),"above traces"===j.baxis.layer&&Y.push("baxis","bline"),"above traces"===j.caxis.layer&&Y.push("caxis","cline");var X=this.plotContainer.selectAll("g.toplevel").data(Y,String),Z=["agrid","bgrid","cgrid"];X.enter().append("g").attr("class",function(W){return"toplevel "+W}).each(function(W){var re=m.select(this);H[W]=re,"frontplot"===W?re.append("g").classed("scatterlayer",!0):"backplot"===W?re.append("g").classed("maplayer",!0):"plotbg"===W?re.append("path").attr("d","M0,0Z"):"aline"===W||"bline"===W||"cline"===W?re.append("path"):"grids"===W&&Z.forEach(function(U){H[U]=re.append("g").classed("grid "+U,!0)})}),X.order()};var M=Math.sqrt(4/3);C.adjustLayout=function(j,H){var Y,X,Z,W,re,U,B=this,V=j.domain,ee=(V.x[0]+V.x[1])/2,N=(V.y[0]+V.y[1])/2,K=V.x[1]-V.x[0],J=V.y[1]-V.y[0],te=K*H.w,ae=J*H.h,le=j.sum,se=j.aaxis.min,ve=j.baxis.min,ue=j.caxis.min;te>M*ae?Z=(W=ae)*M:W=(Z=te)/M,re=K*Z/te,U=J*W/ae,X=H.t+H.h*(1-N)-W/2,B.x0=Y=H.l+H.w*ee-Z/2,B.y0=X,B.w=Z,B.h=W,B.sum=le,B.xaxis={type:"linear",range:[se+2*ue-le,le-se-2*ve],domain:[ee-re/2,ee+re/2],_id:"x"},r(B.xaxis,B.graphDiv._fullLayout),B.xaxis.setScale(),B.xaxis.isPtWithinRange=function(De){return De.a>=B.aaxis.range[0]&&De.a<=B.aaxis.range[1]&&De.b>=B.baxis.range[1]&&De.b<=B.baxis.range[0]&&De.c>=B.caxis.range[1]&&De.c<=B.caxis.range[0]},B.yaxis={type:"linear",range:[se,le-ve-ue],domain:[N-U/2,N+U/2],_id:"y"},r(B.yaxis,B.graphDiv._fullLayout),B.yaxis.setScale(),B.yaxis.isPtWithinRange=function(){return!0};var ye=B.yaxis.domain[0],Me=B.aaxis=d({},j.aaxis,{range:[se,le-ve-ue],side:"left",tickangle:(+j.aaxis.tickangle||0)-30,domain:[ye,ye+U*M],anchor:"free",position:0,_id:"y",_length:Z});r(Me,B.graphDiv._fullLayout),Me.setScale();var pe=B.baxis=d({},j.baxis,{range:[le-se-ue,ve],side:"bottom",domain:B.xaxis.domain,anchor:"free",position:0,_id:"x",_length:Z});r(pe,B.graphDiv._fullLayout),pe.setScale();var ge=B.caxis=d({},j.caxis,{range:[le-se-ve,ue],side:"right",tickangle:(+j.caxis.tickangle||0)+30,domain:[ye,ye+U*M],anchor:"free",position:0,_id:"y",_length:Z});r(ge,B.graphDiv._fullLayout),ge.setScale();var we="M"+Y+","+(X+W)+"h"+Z+"l-"+Z/2+",-"+W+"Z";B.clipDef.select("path").attr("d",we),B.layers.plotbg.select("path").attr("d",we);var oe="M0,"+W+"h"+Z+"l-"+Z/2+",-"+W+"Z";B.clipDefRelative.select("path").attr("d",oe);var de=e(Y,X);B.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",de),B.clipDefRelative.select("path").attr("transform",null);var Te=e(Y-pe._offset,X+W);B.layers.baxis.attr("transform",Te),B.layers.bgrid.attr("transform",Te);var Ee=e(Y+Z/2,X)+"rotate(30)"+e(0,-Me._offset);B.layers.aaxis.attr("transform",Ee),B.layers.agrid.attr("transform",Ee);var Ae=e(Y+Z/2,X)+"rotate(-30)"+e(0,-ge._offset);B.layers.caxis.attr("transform",Ae),B.layers.cgrid.attr("transform",Ae),B.drawAxes(!0),B.layers.aline.select("path").attr("d",Me.showline?"M"+Y+","+(X+W)+"l"+Z/2+",-"+W:"M0,0").call(i.stroke,Me.linecolor||"#000").style("stroke-width",(Me.linewidth||0)+"px"),B.layers.bline.select("path").attr("d",pe.showline?"M"+Y+","+(X+W)+"h"+Z:"M0,0").call(i.stroke,pe.linecolor||"#000").style("stroke-width",(pe.linewidth||0)+"px"),B.layers.cline.select("path").attr("d",ge.showline?"M"+(Y+Z/2)+","+X+"l"+Z/2+","+W:"M0,0").call(i.stroke,ge.linecolor||"#000").style("stroke-width",(ge.linewidth||0)+"px"),B.graphDiv._context.staticPlot||B.initInteractions(),l.setClipUrl(B.layers.frontplot,B._hasClipOnAxisFalse?null:B.clipId,B.graphDiv)},C.drawAxes=function(j){var H=this.graphDiv,Y=this.id.substr(7)+"title",X=this.layers,Z=this.aaxis,W=this.baxis,re=this.caxis;if(this.drawAx(Z),this.drawAx(W),this.drawAx(re),j){var U=Math.max(Z.showticklabels?Z.tickfont.size/2:0,(re.showticklabels?.75*re.tickfont.size:0)+("outside"===re.ticks?.87*re.ticklen:0)),B=(W.showticklabels?W.tickfont.size:0)+("outside"===W.ticks?W.ticklen:0)+3;X["a-title"]=a.draw(H,"a"+Y,{propContainer:Z,propName:this.id+".aaxis.title",placeholder:n(H,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-Z.title.font.size/3-U,"text-anchor":"middle"}}),X["b-title"]=a.draw(H,"b"+Y,{propContainer:W,propName:this.id+".baxis.title",placeholder:n(H,"Click to enter Component B title"),attributes:{x:this.x0-B,y:this.y0+this.h+.83*W.title.font.size+B,"text-anchor":"middle"}}),X["c-title"]=a.draw(H,"c"+Y,{propContainer:re,propName:this.id+".caxis.title",placeholder:n(H,"Click to enter Component C title"),attributes:{x:this.x0+this.w+B,y:this.y0+this.h+.83*re.title.font.size+B,"text-anchor":"middle"}})}},C.drawAx=function(j){var H,Y=this.graphDiv,X=j._name,Z=X.charAt(0),W=j._id,re=this.layers[X],U=Z+"tickLayout",B=(H=j).ticks+String(H.ticklen)+String(H.showticklabels);this[U]!==B&&(re.selectAll("."+W+"tick").remove(),this[U]=B),j.setScale();var V=t.calcTicks(j),ee=t.clipEnds(j,V),N=t.makeTransTickFn(j),K=t.getTickSigns(j)[2],J=x.deg2rad(30),te=K*(j.linewidth||1)/2,ae=K*j.ticklen,le=this.w,se=this.h,ve="b"===Z?"M0,"+te+"l"+Math.sin(J)*ae+","+Math.cos(J)*ae:"M"+te+",0l"+Math.cos(J)*ae+","+-Math.sin(J)*ae,ue={a:"M0,0l"+se+",-"+le/2,b:"M0,0l-"+le/2+",-"+se,c:"M0,0l-"+se+","+le/2}[Z];t.drawTicks(Y,j,{vals:"inside"===j.ticks?ee:V,layer:re,path:ve,transFn:N,crisp:!1}),t.drawGrid(Y,j,{vals:ee,layer:this.layers[Z+"grid"],path:ue,transFn:N,crisp:!1}),t.drawLabels(Y,j,{vals:V,layer:re,transFn:N,labelFns:t.makeLabelFns(j,0,30)})};var I=w.MINZOOM/2+.87,P="m-0.87,.5h"+I+"v3h-"+(I+5.2)+"l"+(I/2+2.6)+",-"+(.87*I+4.5)+"l2.6,1.5l-"+I/2+","+.87*I+"Z",S="m0.87,.5h-"+I+"v3h"+(I+5.2)+"l-"+(I/2+2.6)+",-"+(.87*I+4.5)+"l-2.6,1.5l"+I/2+","+.87*I+"Z",E="m0,1l"+I/2+","+.87*I+"l2.6,-1.5l-"+(I/2+2.6)+",-"+(.87*I+4.5)+"l-"+(I/2+2.6)+","+(.87*I+4.5)+"l2.6,1.5l"+I/2+",-"+.87*I+"Z",R=!0;function D(j){m.select(j).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}C.clearOutline=function(){b(this.dragOptions),_(this.dragOptions.gd)},C.initInteractions=function(){var j,H,Y,X,Z,W,re,U,B,V,ee,N,K=this,J=K.layers.plotbg.select("path").node(),te=K.graphDiv,ae=te._fullLayout._zoomlayer;function le(oe){var de={};return de[K.id+".aaxis.min"]=oe.a,de[K.id+".baxis.min"]=oe.b,de[K.id+".caxis.min"]=oe.c,de}function se(oe,de){var Te=te._fullLayout.clickmode;D(te),2===oe&&(te.emit("plotly_doubleclick",null),k.call("_guiRelayout",te,le({a:0,b:0,c:0}))),Te.indexOf("select")>-1&&1===oe&&u(de,te,[K.xaxis],[K.yaxis],K.id,K.dragOptions),Te.indexOf("event")>-1&&s.click(te,de,K.id)}function ve(oe,de){return 1-de/K.h}function ue(oe,de){return 1-(oe+(K.h-de)/Math.sqrt(3))/K.w}function ye(oe,de){return(oe-(K.h-de)/Math.sqrt(3))/K.w}function Me(oe,de){var Te=Y+oe*j,Ee=X+de*H,Ae=Math.max(0,Math.min(1,ve(0,X),ve(0,Ee))),De=Math.max(0,Math.min(1,ue(Y,X),ue(Te,Ee))),Ie=Math.max(0,Math.min(1,ye(Y,X),ye(Te,Ee))),Oe=(Ae/2+Ie)*K.w,Xe=(1-Ae/2-De)*K.w,Fe=(Oe+Xe)/2,Pe=Xe-Oe,Re=(1-Ae)*K.h,qe=Re-Pe/M;Pe<w.MINZOOM?(re=Z,ee.attr("d",B),N.attr("d","M0,0Z")):(re={a:Z.a+Ae*W,b:Z.b+De*W,c:Z.c+Ie*W},ee.attr("d",B+"M"+Oe+","+Re+"H"+Xe+"L"+Fe+","+qe+"L"+Oe+","+Re+"Z"),N.attr("d","M"+Y+","+X+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Oe+","+Re+P+"M"+Xe+","+Re+S+"M"+Fe+","+qe+E)),V||(ee.transition().style("fill",U>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),N.transition().style("opacity",1).duration(200),V=!0),te.emit("plotly_relayouting",le(re))}function pe(){D(te),re!==Z&&(k.call("_guiRelayout",te,le(re)),R&&te.data&&te._context.showTips&&(x.notifier(n(te,"Double-click to zoom back out"),"long"),R=!1))}function ge(oe,de){var Te=oe/K.xaxis._m,Ee=de/K.yaxis._m,Ae=[(re={a:Z.a-Ee,b:Z.b+(Te+Ee)/2,c:Z.c-(Te-Ee)/2}).a,re.b,re.c].sort(x.sorterAsc),De=Ae.indexOf(re.a),Ie=Ae.indexOf(re.b),Oe=Ae.indexOf(re.c);Ae[0]<0&&(Ae[1]+Ae[0]/2<0?(Ae[2]+=Ae[0]+Ae[1],Ae[0]=Ae[1]=0):(Ae[2]+=Ae[0]/2,Ae[1]+=Ae[0]/2,Ae[0]=0),de=(Z.a-(re={a:Ae[De],b:Ae[Ie],c:Ae[Oe]}).a)*K.yaxis._m,oe=(Z.c-re.c-Z.b+re.b)*K.xaxis._m);var Xe=e(K.x0+oe,K.y0+de);K.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Xe);var Fe=e(-oe,-de);K.clipDefRelative.select("path").attr("transform",Fe),K.aaxis.range=[re.a,K.sum-re.b-re.c],K.baxis.range=[K.sum-re.a-re.c,re.b],K.caxis.range=[K.sum-re.a-re.b,re.c],K.drawAxes(!1),K._hasClipOnAxisFalse&&K.plotContainer.select(".scatterlayer").selectAll(".trace").call(l.hideOutsideRangePoints,K),te.emit("plotly_relayouting",le(re))}function we(){k.call("_guiRelayout",te,le(re))}this.dragOptions={element:J,gd:te,plotinfo:{id:K.id,domain:te._fullLayout[K.id].domain,xaxis:K.xaxis,yaxis:K.yaxis},subplot:K.id,prepFn:function(oe,de,Te){K.dragOptions.xaxes=[K.xaxis],K.dragOptions.yaxes=[K.yaxis],j=te._fullLayout._invScaleX,H=te._fullLayout._invScaleY;var Ee=K.dragOptions.dragmode=te._fullLayout.dragmode;K.dragOptions.minDrag=p(Ee)?1:void 0,"zoom"===Ee?(K.dragOptions.moveFn=Me,K.dragOptions.clickFn=se,K.dragOptions.doneFn=pe,function(Ae,De,Ie){var Oe=J.getBoundingClientRect();Y=De-Oe.left,X=Ie-Oe.top,te._fullLayout._calcInverseTransform(te);var Fe=x.apply3DTransform(te._fullLayout._invTransform)(Y,X);Y=Fe[0],X=Fe[1],re=Z={a:K.aaxis.range[0],b:K.baxis.range[1],c:K.caxis.range[1]},W=K.aaxis.range[1]-Z.a,U=g(K.graphDiv._fullLayout[K.id].bgcolor).getLuminance(),B="M0,"+K.h+"L"+K.w/2+", 0L"+K.w+","+K.h+"Z",V=!1,ee=ae.append("path").attr("class","zoombox").attr("transform",e(K.x0,K.y0)).style({fill:U>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",B),N=ae.append("path").attr("class","zoombox-corners").attr("transform",e(K.x0,K.y0)).style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),K.clearOutline(te)}(0,de,Te)):"pan"===Ee?(K.dragOptions.moveFn=ge,K.dragOptions.clickFn=se,K.dragOptions.doneFn=we,re=Z={a:K.aaxis.range[0],b:K.baxis.range[1],c:K.caxis.range[1]},K.clearOutline(te)):(c(Ee)||p(Ee))&&y(oe,de,Te,K.dragOptions,Ee)}},J.onmousemove=function(oe){s.hover(te,oe,K.id),te._fullLayout._lasthover=J,te._fullLayout._hoversubplot=K.id},J.onmouseout=function(oe){te._dragging||h.unhover(te,oe)},h.init(this.dragOptions)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../lib":515,"../../lib/extend":505,"../../registry":647,"../cartesian/axes":566,"../cartesian/constants":573,"../cartesian/set_convert":585,"../plots":628,"@plotly/d3":58,tinycolor2:313}],647:[function(v,$,Q){"use strict";var m=v("./lib/loggers"),g=v("./lib/noop"),k=v("./lib/push_unique"),x=v("./lib/is_plain_object"),e=v("./lib/dom").addStyleRule,n=v("./lib/extend"),i=v("./plots/attributes"),l=v("./plots/layout_attributes"),r=n.extendFlat,d=n.extendDeepAll;function f(u){var _=u.name,b=u.categories,w=u.meta;if(Q.modules[_])m.log("Type "+_+" already registered");else{Q.subplotsRegistry[u.basePlotModule.name]||function(R){var D=R.name;if(Q.subplotsRegistry[D])m.log("Plot type "+D+" already registered.");else for(var j in o(R),Q.subplotsRegistry[D]=R,Q.componentsRegistry)a(j,R.name)}(u.basePlotModule);for(var T={},C=0;C<b.length;C++)T[b[C]]=!0,Q.allCategories[b[C]]=!0;for(var M in Q.modules[_]={_module:u,categories:T},w&&Object.keys(w).length&&(Q.modules[_].meta=w),Q.allTypes.push(_),Q.componentsRegistry)p(M,_);u.layoutAttributes&&r(Q.traceLayoutAttributes,u.layoutAttributes);var I=u.basePlotModule,P=I.name;if("mapbox"===P){var S=I.constants.styleRules;for(var E in S)e(".js-plotly-plot .plotly .mapboxgl-"+E,S[E])}"geo"!==P&&"mapbox"!==P||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function t(u){if("string"!=typeof u.name)throw new Error("Component module *name* must be a string.");var _=u.name;for(var b in Q.componentsRegistry[_]=u,u.layoutAttributes&&(u.layoutAttributes._isLinkedToArray&&k(Q.layoutArrayContainers,_),o(u)),Q.modules)p(_,b);for(var w in Q.subplotsRegistry)a(_,w);for(var T in Q.transformsRegistry)c(_,T);u.schema&&u.schema.layout&&d(l,u.schema.layout)}function h(u){if("string"!=typeof u.name)throw new Error("Transform module *name* must be a string.");var _="Transform module "+u.name,b="function"==typeof u.transform,w="function"==typeof u.calcTransform;if(!b&&!w)throw new Error(_+" is missing a *transform* or *calcTransform* method.");for(var T in b&&w&&m.log([_+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),x(u.attributes)||m.log(_+" registered without an *attributes* object."),"function"!=typeof u.supplyDefaults&&m.log(_+" registered without a *supplyDefaults* method."),Q.transformsRegistry[u.name]=u,Q.componentsRegistry)c(T,u.name)}function s(u){var _=u.name,b=_.split("-")[0],w=u.dictionary,T=u.format,C=w&&Object.keys(w).length,M=T&&Object.keys(T).length,I=Q.localeRegistry,P=I[_];if(P||(I[_]=P={}),b!==_){var S=I[b];S||(I[b]=S={}),C&&S.dictionary===P.dictionary&&(S.dictionary=w),M&&S.format===P.format&&(S.format=T)}C&&(P.dictionary=w),M&&(P.format=T)}function o(u){if(u.layoutAttributes){var _=u.layoutAttributes._arrayAttrRegexps;if(_)for(var b=0;b<_.length;b++)k(Q.layoutArrayRegexes,_[b])}}function p(u,_){var b=Q.componentsRegistry[u].schema;if(b&&b.traces){var w=b.traces[_];w&&d(Q.modules[_]._module.attributes,w)}}function c(u,_){var b=Q.componentsRegistry[u].schema;if(b&&b.transforms){var w=b.transforms[_];w&&d(Q.transformsRegistry[_].attributes,w)}}function a(u,_){var b=Q.componentsRegistry[u].schema;if(b&&b.subplots){var w=Q.subplotsRegistry[_],T=w.layoutAttributes,C="subplot"===w.attr?w.name:w.attr;Array.isArray(C)&&(C=C[0]);var M=b.subplots[C];T&&M&&d(T,M)}}function y(u){return"object"==typeof u&&(u=u.type),u}Q.modules={},Q.allCategories={},Q.allTypes=[],Q.subplotsRegistry={},Q.transformsRegistry={},Q.componentsRegistry={},Q.layoutArrayContainers=[],Q.layoutArrayRegexes=[],Q.traceLayoutAttributes={},Q.localeRegistry={},Q.apiMethodRegistry={},Q.collectableSubplotTypes=null,Q.register=function(u){if(Q.collectableSubplotTypes=null,!u)throw new Error("No argument passed to Plotly.register.");u&&!Array.isArray(u)&&(u=[u]);for(var _=0;_<u.length;_++){var b=u[_];if(!b)throw new Error("Invalid module was attempted to be registered!");switch(b.moduleType){case"trace":f(b);break;case"transform":h(b);break;case"component":t(b);break;case"locale":s(b);break;case"apiMethod":Q.apiMethodRegistry[b.name]=b.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},Q.getModule=function(u){var _=Q.modules[y(u)];return!!_&&_._module},Q.traceIs=function(u,_){if("various"===(u=y(u)))return!1;var b=Q.modules[u];return b||(u&&m.log("Unrecognized trace type "+u+"."),b=Q.modules[i.type.dflt]),!!b.categories[_]},Q.getTransformIndices=function(u,_){for(var b=[],w=u.transforms||[],T=0;T<w.length;T++)w[T].type===_&&b.push(T);return b},Q.hasTransform=function(u,_){for(var b=u.transforms||[],w=0;w<b.length;w++)if(b[w].type===_)return!0;return!1},Q.getComponentMethod=function(u,_){var b=Q.componentsRegistry[u];return b&&b[_]||g},Q.call=function(){var u=arguments[0],_=[].slice.call(arguments,1);return Q.apiMethodRegistry[u].apply(null,_)}},{"./lib/dom":503,"./lib/extend":505,"./lib/is_plain_object":516,"./lib/loggers":519,"./lib/noop":524,"./lib/push_unique":530,"./plots/attributes":562,"./plots/layout_attributes":619}],648:[function(v,$,Q){"use strict";var m=v("../registry"),g=v("../lib"),k=g.extendFlat,x=g.extendDeep;function e(n){var i;switch(n){case"themes__thumb":i={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":i={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:i={}}return i}$.exports=function(n,i){var l,f=n.layout,t=x([],n.data),h=x({},f,e(i.tileClass)),s=n._context||{};if(i.width&&(h.width=i.width),i.height&&(h.height=i.height),"thumbnail"===i.tileClass||"themes__thumb"===i.tileClass){h.annotations=[];var o=Object.keys(h);for(l=0;l<o.length;l++)["xaxis","yaxis","zaxis"].indexOf(o[l].slice(0,5))>-1&&(h[o[l]].title={text:""});for(l=0;l<t.length;l++){var p=t[l];p.showscale=!1,p.marker&&(p.marker.showscale=!1),m.traceIs(p,"pie-like")&&(p.textposition="none")}}if(Array.isArray(i.annotations))for(l=0;l<i.annotations.length;l++)h.annotations.push(i.annotations[l]);var c=Object.keys(h).filter(function(b){return b.match(/^scene\d*$/)});if(c.length){var a={};for("thumbnail"===i.tileClass&&(a={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<c.length;l++){var y=h[c[l]];y.xaxis||(y.xaxis={}),y.yaxis||(y.yaxis={}),y.zaxis||(y.zaxis={}),k(y.xaxis,a),k(y.yaxis,a),k(y.zaxis,a),y._scene=null}}var u=document.createElement("div");i.tileClass&&(u.className=i.tileClass);var _={gd:u,td:u,layout:h,data:t,config:{staticPlot:void 0===i.staticPlot||i.staticPlot,plotGlPixelRatio:void 0===i.plotGlPixelRatio?2:i.plotGlPixelRatio,displaylogo:i.displaylogo||!1,showLink:i.showLink||!1,showTips:i.showTips||!1,mapboxAccessToken:s.mapboxAccessToken}};return"transparent"!==i.setBackground&&(_.config.setBackground=i.setBackground||"opaque"),_.gd.defaultLayout=e(i.tileClass),_}},{"../lib":515,"../registry":647}],649:[function(v,$,Q){"use strict";var m=v("../lib"),g=v("../plot_api/to_image"),k=v("./filesaver"),x=v("./helpers");$.exports=function(e,n){var i;return m.isPlainObject(e)||(i=m.getGraphDiv(e)),(n=n||{}).format=n.format||"png",n.width=n.width||null,n.height=n.height||null,n.imageDataOnly=!0,new Promise(function(l,r){i&&i._snapshotInProgress&&r(new Error("Snapshotting already in progress.")),m.isIE()&&"svg"!==n.format&&r(new Error(x.MSG_IE_BAD_FORMAT)),i&&(i._snapshotInProgress=!0);var d=g(e,n),f=n.filename||e.fn||"newplot";f+="."+n.format.replace("-","."),d.then(function(t){return i&&(i._snapshotInProgress=!1),k(t,f,n.format)}).then(function(t){l(t)}).catch(function(t){i&&(i._snapshotInProgress=!1),r(t)})})}},{"../lib":515,"../plot_api/to_image":558,"./filesaver":650,"./helpers":651}],650:[function(v,$,Q){"use strict";var m=v("../lib"),g=v("./helpers");$.exports=function(k,x,e){var n=document.createElement("a"),i="download"in n;return new Promise(function(l,r){var d,f;return m.isIE()?(d=g.createBlob(k,"svg"),window.navigator.msSaveBlob(d,x),d=null,l(x)):i?(d=g.createBlob(k,e),f=g.createObjectURL(d),n.href=f,n.download=x,document.body.appendChild(n),n.click(),document.body.removeChild(n),g.revokeObjectURL(f),d=null,l(x)):m.isSafari()?(g.octetStream(("svg"===e?",":";base64,")+encodeURIComponent(k)),l(x)):void r(new Error("download error"))})}},{"../lib":515,"./helpers":651}],651:[function(v,$,Q){"use strict";var m=v("../registry");Q.getDelay=function(k){return k._has&&(k._has("gl3d")||k._has("gl2d")||k._has("mapbox"))?500:0},Q.getRedrawFunc=function(k){return function(){m.getComponentMethod("colorbar","draw")(k)}},Q.encodeSVG=function(k){return"data:image/svg+xml,"+encodeURIComponent(k)},Q.encodeJSON=function(k){return"data:application/json,"+encodeURIComponent(k)};var g=window.URL||window.webkitURL;Q.createObjectURL=function(k){return g.createObjectURL(k)},Q.revokeObjectURL=function(k){return g.revokeObjectURL(k)},Q.createBlob=function(k,x){if("svg"===x)return new window.Blob([k],{type:"image/svg+xml;charset=utf-8"});if("full-json"===x)return new window.Blob([k],{type:"application/json;charset=utf-8"});var e=function(n){for(var i=n.length,l=new ArrayBuffer(i),r=new Uint8Array(l),d=0;d<i;d++)r[d]=n.charCodeAt(d);return l}(window.atob(k));return new window.Blob([e],{type:"image/"+x})},Q.octetStream=function(k){document.location.href="data:application/octet-stream"+k},Q.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,Q.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":647}],652:[function(v,$,Q){"use strict";var m=v("./helpers"),g={getDelay:m.getDelay,getRedrawFunc:m.getRedrawFunc,clone:v("./cloneplot"),toSVG:v("./tosvg"),svgToImg:v("./svgtoimg"),toImage:v("./toimage"),downloadImage:v("./download")};$.exports=g},{"./cloneplot":648,"./download":649,"./helpers":651,"./svgtoimg":653,"./toimage":654,"./tosvg":655}],653:[function(v,$,Q){"use strict";var m=v("../lib"),g=v("events").EventEmitter,k=v("./helpers");$.exports=function(x){var e=x.emitter||new g,n=new Promise(function(i,l){var r=window.Image,d=x.svg,f=x.format||"png";if(m.isIE()&&"svg"!==f){var t=new Error(k.MSG_IE_BAD_FORMAT);return l(t),x.promise?n:e.emit("error",t)}var h,s,o=x.canvas,p=x.scale||1,y=p*(x.width||300),u=p*(x.height||150),_=o.getContext("2d",{willReadFrequently:!0}),b=new r;"svg"===f||m.isSafari()?s=k.encodeSVG(d):(h=k.createBlob(d,"svg"),s=k.createObjectURL(h)),o.width=y,o.height=u,b.onload=function(){var w;switch(h=null,k.revokeObjectURL(s),"svg"!==f&&_.drawImage(b,0,0,y,u),f){case"jpeg":w=o.toDataURL("image/jpeg");break;case"png":w=o.toDataURL("image/png");break;case"webp":w=o.toDataURL("image/webp");break;case"svg":w=s;break;default:var T="Image format is not jpeg, png, svg or webp.";if(l(new Error(T)),!x.promise)return e.emit("error",T)}i(w),x.promise||e.emit("success",w)},b.onerror=function(w){if(h=null,k.revokeObjectURL(s),l(w),!x.promise)return e.emit("error",w)},b.src=s});return x.promise?n:e}},{"../lib":515,"./helpers":651,events:84}],654:[function(v,$,Q){"use strict";var m=v("events").EventEmitter,g=v("../registry"),k=v("../lib"),x=v("./helpers"),e=v("./cloneplot"),n=v("./tosvg"),i=v("./svgtoimg");$.exports=function(l,r){var d=new m,f=e(l,{format:"png"}),t=f.gd;t.style.position="absolute",t.style.left="-5000px",document.body.appendChild(t);var h=x.getRedrawFunc(t);return g.call("_doPlot",t,f.data,f.layout,f.config).then(h).then(function(){var s=x.getDelay(t._fullLayout);setTimeout(function(){var o=n(t),p=document.createElement("canvas");p.id=k.randstr(),(d=i({format:r.format,width:t._fullLayout.width,height:t._fullLayout.height,canvas:p,emitter:d,svg:o})).clean=function(){t&&document.body.removeChild(t)}},s)}).catch(function(s){d.emit("error",s)}),d}},{"../lib":515,"../registry":647,"./cloneplot":648,"./helpers":651,"./svgtoimg":653,"./tosvg":655,events:84}],655:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../lib"),k=v("../components/drawing"),x=v("../components/color"),e=v("../constants/xmlns_namespaces"),n=/"/g,i=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");$.exports=function(l,r,d){var f,t=l._fullLayout,h=t._paper,s=t._toppaper,o=t.width,p=t.height;h.insert("rect",":first-child").call(k.setRect,0,0,o,p).call(x.fill,t.paper_bgcolor);var c=t._basePlotModules||[];for(f=0;f<c.length;f++){var a=c[f];a.toSVG&&a.toSVG(l)}if(s){var y=s.node().childNodes,u=Array.prototype.slice.call(y);for(f=0;f<u.length;f++){var _=u[f];_.childNodes.length&&h.node().appendChild(_)}}t._draggers&&t._draggers.remove(),h.node().style.background="",h.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var w=m.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){w.style({visibility:null,display:null});var T=this.style.fontFamily;T&&-1!==T.indexOf('"')&&w.style("font-family",T.replace(n,"TOBESTRIPPED"))}else w.remove()}),h.selectAll(".gradient_filled,.pattern_filled").each(function(){var w=m.select(this),T=this.style.fill;T&&-1!==T.indexOf("url(")&&w.style("fill",T.replace(n,"TOBESTRIPPED"));var C=this.style.stroke;C&&-1!==C.indexOf("url(")&&w.style("stroke",C.replace(n,"TOBESTRIPPED"))}),"pdf"!==r&&"eps"!==r||h.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),h.node().setAttributeNS(e.xmlns,"xmlns",e.svg),h.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),"svg"===r&&d&&(h.attr("width",d*o),h.attr("height",d*p),h.attr("viewBox","0 0 "+o+" "+p));var w,T,C,b=(new window.XMLSerializer).serializeToString(h.node());return w=b,T=m.select("body").append("div").style({display:"none"}).html(""),C=w.replace(/(&[^;]*;)/gi,function(M){return"&lt;"===M?"&#60;":"&rt;"===M?"&#62;":-1!==M.indexOf("<")||-1!==M.indexOf(">")?"":T.html(M).text()}),T.remove(),b=(b=(b=C).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(i,"'"),g.isIE()&&(b=(b=(b=b.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),b}},{"../components/color":367,"../components/drawing":389,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],656:[function(v,$,Q){"use strict";var m=v("../../lib");$.exports=function(g,k){for(var x=0;x<g.length;x++)g[x].i=x;m.mergeArray(k.text,g,"tx"),m.mergeArray(k.hovertext,g,"htx");var e=k.marker;if(e){m.mergeArray(e.opacity,g,"mo",!0),m.mergeArray(e.color,g,"mc");var n=e.line;n&&(m.mergeArray(n.color,g,"mlc"),m.mergeArrayCastPositive(n.width,g,"mlw"))}}},{"../../lib":515}],657:[function(v,$,Q){"use strict";var m=v("../scatter/attributes"),g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=v("../../plots/template_attributes").hovertemplateAttrs,x=v("../../plots/template_attributes").texttemplateAttrs,e=v("../../components/colorscale/attributes"),n=v("../../plots/font_attributes"),i=v("./constants"),l=v("../../components/drawing/attributes").pattern,r=v("../../lib/extend").extendFlat,d=n({editType:"calc",arrayOk:!0,colorEditType:"style"}),f=r({},m.marker.line.width,{dflt:0}),t=r({width:f,editType:"calc"},e("marker.line")),h=r({line:t,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:l});$.exports={x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:g("x"),yhoverformat:g("y"),text:m.text,texttemplate:x({editType:"plot"},{keys:i.eventDataKeys}),hovertext:m.hovertext,hovertemplate:k({},{keys:i.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:r({},d,{}),insidetextfont:r({},d,{}),outsidetextfont:r({},d,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:r({},m.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:h,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:m.selected.marker.opacity,color:m.selected.marker.color,editType:"style"},textfont:m.selected.textfont,editType:"style"},unselected:{marker:{opacity:m.unselected.marker.opacity,color:m.unselected.marker.color,editType:"style"},textfont:m.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936,"./constants":659}],658:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes"),g=v("../../plots/cartesian/align_period"),k=v("../../components/colorscale/helpers").hasColorscale,x=v("../../components/colorscale/calc"),e=v("./arrays_to_calcdata"),n=v("../scatter/calc_selection");$.exports=function(i,l){var r,d,f,t,h,s,o=m.getFromId(i,l.xaxis||"x"),p=m.getFromId(i,l.yaxis||"y"),c={msUTC:!(!l.base&&0!==l.base)};"h"===l.orientation?(r=o.makeCalcdata(l,"x",c),f=p.makeCalcdata(l,"y"),t=g(l,p,"y",f),h=!!l.yperiodalignment,s="y"):(r=p.makeCalcdata(l,"y",c),f=o.makeCalcdata(l,"x"),t=g(l,o,"x",f),h=!!l.xperiodalignment,s="x"),d=t.vals;for(var a=Math.min(d.length,r.length),y=new Array(a),u=0;u<a;u++)y[u]={p:d[u],s:r[u]},h&&(y[u].orig_p=f[u],y[u][s+"End"]=t.ends[u],y[u][s+"Start"]=t.starts[u]),l.ids&&(y[u].id=String(l.ids[u]));return k(l,"marker")&&x(i,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"}),k(l,"marker.line")&&x(i,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(y,l),n(y,l),y}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":656}],659:[function(v,$,Q){"use strict";$.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],660:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib").isArrayOrTypedArray,k=v("../../constants/numerical").BADNUM,x=v("../../registry"),e=v("../../plots/cartesian/axes"),n=v("../../plots/cartesian/constraints").getAxisGroup,i=v("./sieve.js");function l(a,y,u,_,b){if(_.length){var w,T,C,M;switch(function(I,P){var S,E;for(S=0;S<P.length;S++){var R,D=P[S],j=D[0].trace,H="funnel"===j.type?j._base:j.base,Y="h"===j.orientation?j.xcalendar:j.ycalendar,X="category"===I.type||"multicategory"===I.type?function(){return null}:I.d2c;if(g(H)){for(E=0;E<Math.min(H.length,D.length);E++)R=X(H[E],0,Y),m(R)?(D[E].b=+R,D[E].hasB=1):D[E].b=0;for(;E<D.length;E++)D[E].b=0}else{R=X(H,0,Y);var Z=m(R);for(R=Z?R:0,E=0;E<D.length;E++)D[E].b=R,Z&&(D[E].hasB=1)}}}(u,_),b.mode){case"overlay":r(y,u,_,b);break;case"group":for(w=[],T=[],C=0;C<_.length;C++)void 0===(M=_[C])[0].trace.offset?T.push(M):w.push(M);T.length&&(I=a,S=u,D=new i(T,{posAxis:P=y,sepNegVal:!1,overlapNoMerge:!(R=b).norm}),function(j,H,Y,X){for(var Z=j._fullLayout,U=Y.minDiff,B=Y.traces,V=B.length,ee=Y.positions.length!==Y.distinctPositions.length,N=U*(1-X.gap),K=n(Z,H._id)+B[0][0].trace.orientation,J=Z._alignmentOpts[K]||{},te=0;te<V;te++){var ae,le,se=B[te],ve=se[0].trace,ye=Object.keys((J[ve.alignmentgroup]||{}).offsetGroups||{}).length,Me=(ae=ye?N/ye:ee?N/V:N)*(1-(X.groupgap||0));le=ye?((2*ve._offsetIndex+1-ye)*ae-Me)/2:ee?((2*te+1-V)*ae-Me)/2:-Me/2;var pe=se[0].t;pe.barwidth=Me,pe.poffset=le,pe.bargroupwidth=N,pe.bardelta=U}Y.binWidth=B[0][0].t.barwidth/100,f(Y),t(H,Y),h(H,Y,ee)}(I,P,D,R),function(j,H){for(var Y=j.traces,X=0;X<Y.length;X++){var Z=Y[X];if(void 0===Z[0].trace.base)for(var W=new i([Z],{posAxis:H,sepNegVal:!0,overlapNoMerge:!0}),re=0;re<Z.length;re++){var U=Z[re];if(U.p!==k){var B=W.put(U.p,U.b+U.s);B&&(U.b=B)}}}}(D,P),R.norm?(o(D),p(S,D,R)):s(S,D)),w.length&&r(y,u,w,b);break;case"stack":case"relative":for(w=[],T=[],C=0;C<_.length;C++)void 0===(M=_[C])[0].trace.base?T.push(M):w.push(M);T.length&&function(I,P,S,E,R){var D=new i(E,{posAxis:P,sepNegVal:"relative"===R.mode,overlapNoMerge:!(R.norm||"stack"===R.mode||"relative"===R.mode)});d(P,D,R),function(Z,W,re){var U,B,V,ee,N,K,J=c(Z),te=W.traces;for(ee=0;ee<te.length;ee++)if("funnel"===(B=(U=te[ee])[0].trace).type)for(N=0;N<U.length;N++)(K=U[N]).s!==k&&W.put(K.p,-.5*K.s);for(ee=0;ee<te.length;ee++){V="funnel"===(B=(U=te[ee])[0].trace).type;var ae=[];for(N=0;N<U.length;N++)if((K=U[N]).s!==k){var le,se=W.put(K.p,le=V?K.s:K.s+K.b),ve=se+le;K.b=se,K[J]=ve,re.norm||(ae.push(ve),K.hasB&&ae.push(se))}re.norm||(B._extremes[Z._id]=e.findExtremes(Z,ae,{tozero:!0,padded:!0}))}}(S,D,R);for(var j=0;j<E.length;j++)for(var H=E[j],Y=0;Y<H.length;Y++){var X=H[Y];X.s!==k&&X.b+X.s===D.get(X.p,X.s)&&(X._outmost=!0)}R.norm&&p(S,D,R)}(0,y,u,T,b),w.length&&r(y,u,w,b)}!function(I,P){var S,E,R,D=c(P),j={},H=1/0,Y=-1/0;for(S=0;S<I.length;S++)for(R=I[S],E=0;E<R.length;E++){var X=R[E].p;m(X)&&(H=Math.min(H,X),Y=Math.max(Y,X))}var Z=1e4/(Y-H),W=j.round=function(K){return String(Math.round(Z*(K-H)))};for(S=0;S<I.length;S++){(R=I[S])[0].t.extents=j;var re=R[0].t.poffset,U=Array.isArray(re);for(E=0;E<R.length;E++){var B=R[E],V=B[D]-B.w/2;if(m(V)){var ee=B[D]+B.w/2,N=W(B.p);j[N]=j[N]?[Math.min(V,j[N][0]),Math.max(ee,j[N][1])]:[V,ee]}B.p0=B.p+(U?re[E]:re),B.p1=B.p0+B.w,B.s0=B.b,B.s1=B.s0+B.s}}}(_,y)}var I,P,S,R,D}function r(a,y,u,_){for(var b=0;b<u.length;b++){var T=new i([u[b]],{posAxis:a,sepNegVal:!1,overlapNoMerge:!_.norm});d(a,T,_),_.norm?(o(T),p(y,T,_)):s(y,T)}}function d(a,y,u){for(var _=y.minDiff,b=y.traces,w=_*(1-u.gap),T=w*(1-(u.groupgap||0)),C=-T/2,M=0;M<b.length;M++){var I=b[M][0].t;I.barwidth=T,I.poffset=C,I.bargroupwidth=w,I.bardelta=_}y.binWidth=b[0][0].t.barwidth/100,f(y),t(a,y),h(a,y)}function f(a){var y,u,_=a.traces;for(y=0;y<_.length;y++){var b,w=_[y],T=w[0],C=T.trace,M=T.t,I=C._offset||C.offset,P=M.poffset;if(g(I)){for(b=Array.prototype.slice.call(I,0,w.length),u=0;u<b.length;u++)m(b[u])||(b[u]=P);for(u=b.length;u<w.length;u++)b.push(P);M.poffset=b}else void 0!==I&&(M.poffset=I);var S=C._width||C.width,E=M.barwidth;if(g(S)){var R=Array.prototype.slice.call(S,0,w.length);for(u=0;u<R.length;u++)m(R[u])||(R[u]=E);for(u=R.length;u<w.length;u++)R.push(E);if(M.barwidth=R,void 0===I){for(b=[],u=0;u<w.length;u++)b.push(P+(E-R[u])/2);M.poffset=b}}else void 0!==S&&(M.barwidth=S,void 0===I&&(M.poffset=P+(E-S)/2))}}function t(a,y){for(var u=y.traces,_=c(a),b=0;b<u.length;b++)for(var w=u[b],T=w[0].t,C=T.poffset,M=Array.isArray(C),I=T.barwidth,P=Array.isArray(I),S=0;S<w.length;S++){var E=w[S],R=E.w=P?I[S]:I;E[_]=E.p+(M?C[S]:C)+R/2}}function h(a,y,u){var _=y.traces,b=y.minDiff/2;e.minDtick(a,y.minDiff,y.distinctPositions[0],u);for(var w=0;w<_.length;w++){var T,C,M,I,P=_[w],S=P[0],E=S.trace,R=[];for(I=0;I<P.length;I++)C=(T=P[I]).p-b,R.push(C,M=T.p+b);if(E.width||E.offset){var D=S.t,j=D.poffset,H=D.barwidth,Y=Array.isArray(j),X=Array.isArray(H);for(I=0;I<P.length;I++)M=(C=(T=P[I]).p+(Y?j[I]:j))+(X?H[I]:H),R.push(C,M)}E._extremes[a._id]=e.findExtremes(a,R,{padded:!1})}}function s(a,y){for(var u=y.traces,_=c(a),b=0;b<u.length;b++){for(var w=u[b],T=w[0].trace,C=[],M=!1,I=0;I<w.length;I++){var P=w[I],S=P.b,E=S+P.s;P[_]=E,C.push(E),P.hasB&&C.push(S),P.hasB&&P.b||(M=!0)}T._extremes[a._id]=e.findExtremes(a,C,{tozero:M,padded:!0})}}function o(a){for(var y=a.traces,u=0;u<y.length;u++)for(var _=y[u],b=0;b<_.length;b++){var w=_[b];w.s!==k&&a.put(w.p,w.b+w.s)}}function p(a,y,u){var _=y.traces,b=c(a),w="fraction"===u.norm?1:100,T=w/1e9,C=a.l2c(a.c2l(0)),M="stack"===u.mode?w:C;function I(re){return m(a.c2l(re))&&(re<C-T||re>M+T||!m(C))}for(var P=0;P<_.length;P++){for(var S=_[P],E=S[0].trace,R=[],D=!1,j=!1,H=0;H<S.length;H++){var Y=S[H];if(Y.s!==k){var X=Math.abs(w/y.get(Y.p,Y.s));Y.b*=X,Y.s*=X;var Z=Y.b,W=Z+Y.s;Y[b]=W,R.push(W),j=j||I(W),Y.hasB&&(R.push(Z),j=j||I(Z)),Y.hasB&&Y.b||(D=!0)}}E._extremes[a._id]=e.findExtremes(a,R,{tozero:D,padded:j})}}function c(a){return a._id.charAt(0)}$.exports={crossTraceCalc:function(a,y){for(var u=y.xaxis,_=y.yaxis,b=a._fullLayout,w=a._fullData,T=a.calcdata,C=[],M=[],I=0;I<w.length;I++){var P=w[I];if(!0===P.visible&&x.traceIs(P,"bar")&&P.xaxis===u._id&&P.yaxis===_._id&&("h"===P.orientation?C.push(T[I]):M.push(T[I]),P._computePh))for(var S=a.calcdata[I],E=0;E<S.length;E++)"function"==typeof S[E].ph0&&(S[E].ph0=S[E].ph0()),"function"==typeof S[E].ph1&&(S[E].ph1=S[E].ph1())}var R={xCat:"category"===u.type||"multicategory"===u.type,yCat:"category"===_.type||"multicategory"===_.type,mode:b.barmode,norm:b.barnorm,gap:b.bargap,groupgap:b.bargroupgap};l(a,u,_,M,R),l(a,_,u,C,R)},setGroupPositions:l}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574,"../../registry":647,"./sieve.js":670,"fast-isnumeric":190}],661:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/color"),k=v("../../registry"),x=v("../scatter/xy_defaults"),e=v("../scatter/period_defaults"),n=v("./style_defaults"),i=v("../../plots/cartesian/constraints").getAxisGroup,l=v("./attributes"),r=m.coerceFont;function d(t,h,s,o){var p=h.orientation,a=i(s,h[{v:"x",h:"y"}[p]+"axis"])+p,y=s._alignmentOpts||{},u=o("alignmentgroup"),_=y[a];_||(_=y[a]={});var b=_[u];b?b.traces.push(h):b=_[u]={traces:[h],alignmentIndex:Object.keys(_).length,offsetGroups:{}};var w=o("offsetgroup"),T=b.offsetGroups,C=T[w];w&&(C||(C=T[w]={offsetIndex:Object.keys(T).length}),h._offsetIndex=C.offsetIndex)}function f(t,h,s,o,p,c){var a=!1!==(c=c||{}).moduleHasSelected,y=!1!==c.moduleHasUnselected,u=!1!==c.moduleHasConstrain,_=!1!==c.moduleHasCliponaxis,b=!1!==c.moduleHasTextangle,w=!1!==c.moduleHasInsideanchor,T=!!c.hasPathbar,C=Array.isArray(p)||"auto"===p,M=C||"inside"===p,I=C||"outside"===p;if(M||I){var P=r(o,"textfont",s.font),S=m.extendFlat({},P),E=!(t.textfont&&t.textfont.color);if(E&&delete S.color,r(o,"insidetextfont",S),T){var R=m.extendFlat({},P);E&&delete R.color,r(o,"pathbar.textfont",R)}I&&r(o,"outsidetextfont",P),a&&o("selected.textfont.color"),y&&o("unselected.textfont.color"),u&&o("constraintext"),_&&o("cliponaxis"),b&&o("textangle"),o("texttemplate")}M&&w&&o("insidetextanchor")}$.exports={supplyDefaults:function(t,h,s,o){function p(u,_){return m.coerce(t,h,l,u,_)}if(x(t,h,o,p)){e(t,h,o,p),p("xhoverformat"),p("yhoverformat"),p("orientation",h.x&&!h.y?"h":"v"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate");var c=p("textposition");f(t,0,o,p,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n(t,h,p,s,o);var a=(h.marker.line||{}).color,y=k.getComponentMethod("errorbars","supplyDefaults");y(t,h,a||g.defaultLine,{axis:"y"}),y(t,h,a||g.defaultLine,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(h,p)}else h.visible=!1},crossTraceDefaults:function(t,h){var s;function o(c){return m.coerce(s._input,s,l,c)}if("group"===h.barmode)for(var p=0;p<t.length;p++)"bar"===(s=t[p]).type&&d(0,s,h,o)},handleGroupingDefaults:d,handleText:f}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/constraints":574,"../../registry":647,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":657,"./style_defaults":672}],662:[function(v,$,Q){"use strict";$.exports=function(m,g,k){return m.x="xVal"in g?g.xVal:g.x,m.y="yVal"in g?g.yVal:g.y,g.xa&&(m.xaxis=g.xa),g.ya&&(m.yaxis=g.ya),"h"===k.orientation?(m.label=m.y,m.value=m.x):(m.label=m.x,m.value=m.y),m}},{}],663:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("tinycolor2"),k=v("../../lib").isArrayOrTypedArray;Q.coerceString=function(x,e,n){if("string"==typeof e){if(e||!x.noBlank)return e}else if(("number"==typeof e||!0===e)&&!x.strict)return String(e);return void 0!==n?n:x.dflt},Q.coerceNumber=function(x,e,n){if(m(e)){e=+e;var i=x.min,l=x.max;if(!(void 0!==i&&e<i||void 0!==l&&e>l))return e}return void 0!==n?n:x.dflt},Q.coerceColor=function(x,e,n){return g(e).isValid()?e:void 0!==n?n:x.dflt},Q.coerceEnumerated=function(x,e,n){return x.coerceNumber&&(e=+e),-1!==x.values.indexOf(e)?e:void 0!==n?n:x.dflt},Q.getValue=function(x,e){var n;return Array.isArray(x)?e<x.length&&(n=x[e]):n=x,n},Q.getLineWidth=function(x,e){return 0<e.mlw?e.mlw:k(x.marker.line.width)?0:x.marker.line.width}},{"../../lib":515,"fast-isnumeric":190,tinycolor2:313}],664:[function(v,$,Q){"use strict";var m=v("../../components/fx"),g=v("../../registry"),k=v("../../components/color"),x=v("../../lib").fillText,e=v("./helpers").getLineWidth,n=v("../../plots/cartesian/axes").hoverLabelText,i=v("../../constants/numerical").BADNUM;function l(d,f,t,h,s){var o,p,c,a,y,u,_,b=d.cd,w=b[0].trace,T=b[0].t,C="closest"===h,M="waterfall"===w.type,I=d.maxHoverDistance,P=d.maxSpikeDistance;"h"===w.orientation?(o=t,p=f,c="y",a="x",y=U,u=W):(o=f,p=t,c="x",a="y",u=U,y=W);var S=w[c+"period"],E=C||S;function R(ae){return j(ae,-1)}function D(ae){return j(ae,1)}function j(ae,le){return ae[c]+le*ae.w/2}function H(ae){return ae[c+"End"]-ae[c+"Start"]}var Y=C?R:S?function(ae){return ae.p-H(ae)/2}:function(ae){return Math.min(R(ae),ae.p-T.bardelta/2)},X=C?D:S?function(ae){return ae.p+H(ae)/2}:function(ae){return Math.max(D(ae),ae.p+T.bardelta/2)};function Z(ae,le,se){return s.finiteRange&&(se=0),m.inbox(ae-o,le-o,se+Math.min(1,Math.abs(le-ae)/_)-1)}function W(ae){return Z(Y(ae),X(ae),I)}function re(ae){var le=ae[a];if(M){var se=Math.abs(ae.rawS)||0;p>0?le+=se:p<0&&(le-=se)}return le}function U(ae){var le=p,se=ae.b,ve=re(ae);return m.inbox(se-le,ve-le,I+(ve-le)/(ve-se)-1)}var B=d[c+"a"],V=d[a+"a"];_=Math.abs(B.r2c(B.range[1])-B.r2c(B.range[0]));var ae,le,se,ve,ee=m.getDistanceFunction(h,y,u,function(ae){return(y(ae)+u(ae))/2});if(m.getClosest(b,ee,d),!1!==d.index&&b[d.index].p!==i){E||(Y=function(ae){return Math.min(R(ae),ae.p-T.bargroupwidth/2)},X=function(ae){return Math.max(D(ae),ae.p+T.bargroupwidth/2)});var N=b[d.index],K=w.base?N.b+N.s:N.s;d[a+"0"]=d[a+"1"]=V.c2p(N[a],!0),d[a+"LabelVal"]=K;var J=T.extents[T.extents.round(N.p)];return d[c+"0"]=B.c2p(C?Y(N):J[0],!0),d[c+"1"]=B.c2p(C?X(N):J[1],!0),d[c+"LabelVal"]=void 0!==N.orig_p?N.orig_p:N.p,d.labelLabel=n(B,d[c+"LabelVal"],w[c+"hoverformat"]),d.valueLabel=n(V,d[a+"LabelVal"],w[a+"hoverformat"]),d.baseLabel=n(V,N.b,w[a+"hoverformat"]),d.spikeDistance=(le=p,se=(ae=N).b,ve=re(ae),(m.inbox(se-le,ve-le,P+(ve-le)/(ve-se)-1)+function(ae){return Z(R(ae),D(ae),P)}(N))/2),d[c+"Spike"]=B.c2p(N.p,!0),x(N,w,d),d.hovertemplate=w.hovertemplate,d}}function r(d,f){var t=f.mcc||d.marker.color,h=f.mlcc||d.marker.line.color,s=e(d,f);return k.opacity(t)?t:k.opacity(h)&&s?h:void 0}$.exports={hoverPoints:function(d,f,t,h,s){var o=l(d,f,t,h,s);if(o){var p=o.cd,c=p[0].trace,a=p[o.index];return o.color=r(c,a),g.getComponentMethod("errorbars","hoverInfo")(a,c,o),[o]}},hoverOnBars:l,getTraceColor:r}},{"../../components/color":367,"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./helpers":663}],665:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc").crossTraceCalc,colorbar:v("../scatter/marker_colorbar"),arraysToCalcdata:v("./arrays_to_calcdata"),plot:v("./plot").plot,style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"bar",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"./arrays_to_calcdata":656,"./attributes":657,"./calc":658,"./cross_trace_calc":660,"./defaults":661,"./event_data":662,"./hover":664,"./layout_attributes":666,"./layout_defaults":667,"./plot":668,"./select":669,"./style":671}],666:[function(v,$,Q){"use strict";$.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],667:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../plots/cartesian/axes"),k=v("../../lib"),x=v("./layout_attributes");$.exports=function(e,n,i){function l(c,a){return k.coerce(e,n,x,c,a)}for(var r=!1,d=!1,f=!1,t={},h=l("barmode"),s=0;s<i.length;s++){var o=i[s];if(m.traceIs(o,"bar")&&o.visible){if(r=!0,"group"===h){var p=o.xaxis+o.yaxis;t[p]&&(f=!0),t[p]=!0}o.visible&&"histogram"===o.type&&"category"!==g.getFromId({_fullLayout:n},o["v"===o.orientation?"xaxis":"yaxis"]).type&&(d=!0)}}r?("overlay"!==h&&l("barnorm"),l("bargap",d&&!f?0:.2),l("bargroupgap")):delete n.barmode}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./layout_attributes":666}],668:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("fast-isnumeric"),k=v("../../lib"),x=v("../../lib/svg_text_utils"),e=v("../../components/color"),n=v("../../components/drawing"),i=v("../../registry"),l=v("../../plots/cartesian/axes").tickText,r=v("./uniform_text"),d=r.recordMinTextSize,f=r.clearMinTextSize,t=v("./style"),h=v("./helpers"),s=v("./constants"),o=v("./attributes"),p=o.text,c=o.textposition,a=v("../../components/fx/helpers").appendArrayPointValue,y=s.TEXTPAD;function u(P){return P.id}function b(P,S){return P<S?1:-1}function w(P,S,E,R){var D;return!S.uniformtext.mode&&T(E)?(R&&(D=R()),P.transition().duration(E.duration).ease(E.easing).each("end",function(){D&&D()}).each("interrupt",function(){D&&D()})):P}function T(P){return P&&P.duration>0}function C(P){return"auto"===P?0:P}function M(P,S){var E=Math.PI/180*S,R=Math.abs(Math.sin(E)),D=Math.abs(Math.cos(E));return{x:P.width*D+P.height*R,y:P.width*R+P.height*D}}function I(P,S,E,R,D,j){var H=!!j.isHorizontal,Y=!!j.constrained,X=j.angle||0,Z=j.anchor||"end",W="end"===Z,re="start"===Z,U=((j.leftToRight||0)+1)/2,B=1-U,V=D.width,ee=D.height,N=Math.abs(S-P),K=Math.abs(R-E),J=N>2*y&&K>2*y?y:0;N-=2*J,K-=2*J;var te=C(X);"auto"!==X||V<=N&&ee<=K||!(V>N||ee>K)||(V>K||ee>N)&&V<ee==N<K||(te+=90);var ae=M(D,te),le=1;Y&&(le=Math.min(1,N/ae.x,K/ae.y));var se=D.left*B+D.right*U,ve=(D.top+D.bottom)/2,ue=(P+y)*B+(S-y)*U,ye=(E+R)/2,Me=0,pe=0;if(re||W){var ge=(H?ae.x:ae.y)/2,we=H?b(P,S):b(E,R);H?re?(ue=P+we*J,Me=-we*ge):(ue=S-we*J,Me=we*ge):re?(ye=E+we*J,pe=-we*ge):(ye=R-we*J,pe=we*ge)}return{textX:se,textY:ve,targetX:ue,targetY:ye,anchorX:Me,anchorY:pe,scale:le,rotate:te}}$.exports={plot:function(P,S,E,R,D,j){var H=S.xaxis,Y=S.yaxis,X=P._fullLayout;D||(D={mode:X.barmode,norm:X.barmode,gap:X.bargap,groupgap:X.bargroupgap},f("bar",X));var Z=k.makeTraceGroups(R,E,"trace bars").each(function(W){var re=m.select(this),U=W[0].trace,ee="bar"===U.type||"funnel"===U.type,N=0;"waterfall"===U.type&&U.connector.visible&&"between"===U.connector.mode&&(N=U.connector.line.width/2);var K="h"===U.orientation,J=T(D),te=k.ensureSingle(re,"g","points"),ae=function _(P){if(P.ids)return u}(U),le=te.selectAll("g.point").data(k.identity,ae);le.enter().append("g").classed("point",!0),le.exit().remove(),le.each(function(ve,ue){var ye,Me,Fe,Pe,Re,qe,Qe,ct,bt,Tt,pe=m.select(this),ge=(Pe=H,Re=Y,ct=[],Tt=(qe=K)?Re:Pe,(Qe=[])[0]=(bt=qe?Pe:Re).c2p((Fe=ve).s0,!0),ct[0]=Tt.c2p(Fe.p0,!0),Qe[1]=bt.c2p(Fe.s1,!0),ct[1]=Tt.c2p(Fe.p1,!0),qe?[Qe,ct]:[ct,Qe]),we=ge[0][0],oe=ge[0][1],de=ge[1][0],Te=ge[1][1],Ee=0==(K?oe-we:Te-de);if(Ee&&ee&&h.getLineWidth(U,ve)&&(Ee=!1),Ee||(Ee=!(g(we)&&g(oe)&&g(de)&&g(Te))),ve.isBlank=Ee,Ee&&(K?oe=we:Te=de),N&&!Ee&&(K?(we-=b(we,oe)*N,oe+=b(we,oe)*N):(de-=b(de,Te)*N,Te+=b(de,Te)*N)),"waterfall"===U.type){if(!Ee){var Ae=U[ve.dir].marker;ye=Ae.line.width,Me=Ae.color}}else ye=h.getLineWidth(U,ve),Me=ve.mc||U.marker.color;function De(Fe){var Pe=m.round(ye/2%1,2);return 0===D.gap&&0===D.groupgap?m.round(Math.round(Fe)-Pe,2):Fe}if(!P._context.staticPlot){var Ie=e.opacity(Me)<1||ye>.01?De:function(Fe,Pe,Re){return Re&&Fe===Pe?Fe:Math.abs(Fe-Pe)>=2?De(Fe):Fe>Pe?Math.ceil(Fe):Math.floor(Fe)};we=Ie(we,oe,K),oe=Ie(oe,we,K),de=Ie(de,Te,!K),Te=Ie(Te,de,!K)}var Oe=w(k.ensureSingle(pe,"path"),X,D,j);if(Oe.style("vector-effect","non-scaling-stroke").attr("d",isNaN((oe-we)*(Te-de))||Ee&&P._context.staticPlot?"M0,0Z":"M"+we+","+de+"V"+Te+"H"+oe+"V"+de+"Z").call(n.setClipUrl,S.layerClipId,P),!X.uniformtext.mode&&J){var Xe=n.makePointStyleFns(U);n.singlePointStyle(ve,Oe,U,Xe,P)}(function(Fe,Pe,Re,qe,Qe,ct,bt,Tt,_t,nt,Ke){var xt,Ht=Pe.xaxis,Zt=Pe.yaxis,$t=Fe._fullLayout;function Xt(qt,pr,Sr){return k.ensureSingle(qt,"text").text(pr).attr({class:"bartext bartext-"+xt,"text-anchor":"middle","data-notex":1}).call(n.font,Sr).call(x.convertToTspans,Fe)}var pr,Sr,mr,tr,rr,ar,cr=qe[0].trace,Ft="h"===cr.orientation,Be=(Sr=Qe,mr=Ht,tr=Zt,rr=(ar=(pr=qe)[0].trace).texttemplate?function(dr,xr,Lr,zr,Hr){var Xr=xr[0].trace,cn=k.castOption(Xr,Lr,"texttemplate");if(!cn)return"";var an,Nn,on,wn,An="histogram"===Xr.type,ii="waterfall"===Xr.type,Vr="funnel"===Xr.type,sn="h"===Xr.orientation;function xn(or){return l(wn,wn.c2l(or),!0).text}sn?(an="y",Nn=Hr,on="x",wn=zr):(an="x",Nn=zr,on="y",wn=Hr);var nn=xr[Lr],fn={};fn.label=nn.p,fn.labelLabel=fn[an+"Label"]=l(Nn,Nn.c2l(nn.p),!0).text;var Mn=k.castOption(Xr,nn.i,"text");(0===Mn||Mn)&&(fn.text=Mn),fn.value=nn.s,fn.valueLabel=fn[on+"Label"]=xn(nn.s);var On={};a(On,Xr,nn.i),(An||void 0===On.x)&&(On.x=sn?fn.value:fn.label),(An||void 0===On.y)&&(On.y=sn?fn.label:fn.value),(An||void 0===On.xLabel)&&(On.xLabel=sn?fn.valueLabel:fn.labelLabel),(An||void 0===On.yLabel)&&(On.yLabel=sn?fn.labelLabel:fn.valueLabel),ii&&(fn.delta=+nn.rawS||nn.s,fn.deltaLabel=xn(fn.delta),fn.final=nn.v,fn.finalLabel=xn(fn.final),fn.initial=fn.final-fn.delta,fn.initialLabel=xn(fn.initial)),Vr&&(fn.value=nn.s,fn.valueLabel=xn(fn.value),fn.percentInitial=nn.begR,fn.percentInitialLabel=k.formatPercent(nn.begR),fn.percentPrevious=nn.difR,fn.percentPreviousLabel=k.formatPercent(nn.difR),fn.percentTotal=nn.sumR,fn.percenTotalLabel=k.formatPercent(nn.sumR));var si=k.castOption(Xr,nn.i,"customdata");return si&&(fn.customdata=si),k.texttemplateString(cn,fn,dr._d3locale,On,fn,Xr._meta||{})}($t,pr,Sr,mr,tr):ar.textinfo?function(dr,xr,Lr,zr){var Hr=dr[0].trace,Xr="h"===Hr.orientation,cn="waterfall"===Hr.type,an="funnel"===Hr.type;function Nn(si){return l(Xr?Lr:zr,+si,!0).text}var on,An=dr[xr],ii=Hr.textinfo.split("+"),Vr=[],sn=function(si){return-1!==ii.indexOf(si)};if(sn("label")&&Vr.push(l(Xr?zr:Lr,dr[xr].p,!0).text),sn("text")&&(0===(on=k.castOption(Hr,An.i,"text"))||on)&&Vr.push(on),cn){var nn=+An.rawS||An.s,fn=An.v,Xn=fn-nn;sn("initial")&&Vr.push(Nn(Xn)),sn("delta")&&Vr.push(Nn(nn)),sn("final")&&Vr.push(Nn(fn))}if(an){sn("value")&&Vr.push(Nn(An.s));var Mn=0;sn("percent initial")&&Mn++,sn("percent previous")&&Mn++,sn("percent total")&&Mn++;var On=Mn>1;sn("percent initial")&&(on=k.formatPercent(An.begR),On&&(on+=" of initial"),Vr.push(on)),sn("percent previous")&&(on=k.formatPercent(An.difR),On&&(on+=" of previous"),Vr.push(on)),sn("percent total")&&(on=k.formatPercent(An.sumR),On&&(on+=" of total"),Vr.push(on))}return Vr.join("<br>")}(pr,Sr,mr,tr):h.getValue(ar.text,Sr),h.coerceString(p,rr));xt=function(qt,pr){var Sr=h.getValue(qt.textposition,pr);return h.coerceEnumerated(c,Sr)}(cr,Qe);var he=qe[Qe],be=!("stack"===nt.mode||"relative"===nt.mode)||he._outmost;if(Be&&"none"!==xt&&(!he.isBlank&&ct!==bt&&Tt!==_t||"auto"!==xt&&"inside"!==xt)){var ze=$t.font,Ve=t.getBarColor(qe[Qe],cr),Je=t.getInsideTextFont(cr,Qe,ze,Ve),Ye=t.getOutsideTextFont(cr,Qe,ze),lt=Re.datum();Ft?"log"===Ht.type&&lt.s0<=0&&(ct=Ht.range[0]<Ht.range[1]?0:Ht._length):"log"===Zt.type&&lt.s0<=0&&(Tt=Zt.range[0]<Zt.range[1]?Zt._length:0);var st,Mt,Dt,ht,mt,Ot=Math.abs(bt-ct)-2*y,At=Math.abs(_t-Tt)-2*y;if("outside"===xt&&(be||he.hasB||(xt="inside")),"auto"===xt&&(be?(xt="inside",st=Xt(Re,Be,mt=k.ensureUniformFontSize(Fe,Je)),ht=(Mt=n.bBox(st.node())).height,(Dt=Mt.width)>0&&ht>0&&(Dt<=Ot&&ht<=At||Dt<=At&&ht<=Ot||(Ft?Ot>=Dt*(At/ht):At>=ht*(Ot/Dt)))?xt="inside":(xt="outside",st.remove(),st=null)):xt="inside"),!st){var it=(st=Xt(Re,Be,mt=k.ensureUniformFontSize(Fe,"outside"===xt?Ye:Je))).attr("transform");if(st.attr("transform",""),Dt=(Mt=n.bBox(st.node())).width,ht=Mt.height,st.attr("transform",it),Dt<=0||ht<=0)return void st.remove()}var dt,Ut=cr.textangle;dt="outside"===xt?function(qt,pr,Sr,mr,tr,rr){var ar,dr=!!rr.isHorizontal,xr=!!rr.constrained,Lr=rr.angle||0,zr=tr.width,Hr=tr.height,Xr=Math.abs(pr-qt),cn=Math.abs(mr-Sr);ar=dr?cn>2*y?y:0:Xr>2*y?y:0;var an=1;xr&&(an=dr?Math.min(1,cn/Hr):Math.min(1,Xr/zr));var Nn=C(Lr),on=M(tr,Nn),wn=(dr?on.x:on.y)/2,An=(tr.left+tr.right)/2,ii=(tr.top+tr.bottom)/2,Vr=(qt+pr)/2,sn=(Sr+mr)/2,xn=0,nn=0,fn=dr?b(pr,qt):b(Sr,mr);return dr?(Vr=pr-fn*ar,xn=fn*wn):(sn=mr+fn*ar,nn=-fn*wn),{textX:An,textY:ii,targetX:Vr,targetY:sn,anchorX:xn,anchorY:nn,scale:an,rotate:Nn}}(ct,bt,Tt,_t,Mt,{isHorizontal:Ft,constrained:"both"===cr.constraintext||"outside"===cr.constraintext,angle:Ut}):I(ct,bt,Tt,_t,Mt,{isHorizontal:Ft,constrained:"both"===cr.constraintext||"inside"===cr.constraintext,angle:Ut,anchor:cr.insidetextanchor}),dt.fontSize=mt.size,d("histogram"===cr.type?"bar":cr.type,dt,$t),he.transform=dt;var Jt=w(st,$t,nt,Ke);k.setTransormAndDisplay(Jt,dt)}else Re.select("text").remove()})(P,S,pe,W,ue,we,oe,de,Te,D,j),S.layerClipId&&n.hideOutsideRangePoint(ve,pe.select("text"),H,Y,U.xcalendar,U.ycalendar)}),n.setClipUrl(re,!1===U.cliponaxis?null:S.layerClipId,P)});i.getComponentMethod("errorbars","plot")(P,Z,S,D)},toMoveInsideBar:I}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx/helpers":403,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"./attributes":657,"./constants":659,"./helpers":663,"./style":671,"./uniform_text":673,"@plotly/d3":58,"fast-isnumeric":190}],669:[function(v,$,Q){"use strict";function m(g,k,x,e,n){var i=k.c2p(e?g.s0:g.p0,!0),l=k.c2p(e?g.s1:g.p1,!0),r=x.c2p(e?g.p0:g.s0,!0),d=x.c2p(e?g.p1:g.s1,!0);return n?[(i+l)/2,(r+d)/2]:e?[l,(r+d)/2]:[(i+l)/2,d]}$.exports=function(g,k){var x,e=g.cd,n=g.xaxis,i=g.yaxis,l=e[0].trace,r="funnel"===l.type,d="h"===l.orientation,f=[];if(!1===k)for(x=0;x<e.length;x++)e[x].selected=0;else for(x=0;x<e.length;x++){var t=e[x],h="ct"in t?t.ct:m(t,n,i,d,r);k.contains(h,!1,x,g)?(f.push({pointNumber:x,x:n.c2d(t.x),y:i.c2d(t.y)}),t.selected=1):t.selected=0}return f}},{}],670:[function(v,$,Q){"use strict";$.exports=k;var m=v("../../lib").distinctVals,g=v("../../constants/numerical").BADNUM;function k(x,e){this.traces=x,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var n=1/0,i=[],l=0;l<x.length;l++){for(var r=x[l],d=0;d<r.length;d++){var f=r[d];f.p!==g&&i.push(f.p)}r[0]&&r[0].width1&&(n=Math.min(r[0].width1,n))}this.positions=i;var t=m(i);this.distinctPositions=t.vals,this.minDiff=1===t.vals.length&&n!==1/0?n:Math.min(t.minDiff,n);var h=(e.posAxis||{}).type;"category"!==h&&"multicategory"!==h||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}k.prototype.put=function(x,e){var n=this.getLabel(x,e),i=this.bins[n]||0;return this.bins[n]=i+e,i},k.prototype.get=function(x,e){var n=this.getLabel(x,e);return this.bins[n]||0},k.prototype.getLabel=function(x,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?x:Math.round(x/this.binWidth))}},{"../../constants/numerical":491,"../../lib":515}],671:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/color"),k=v("../../components/drawing"),x=v("../../lib"),e=v("../../registry"),n=v("./uniform_text").resizeText,i=v("./attributes"),l=i.textfont,r=i.insidetextfont,d=i.outsidetextfont,f=v("./helpers");function t(u,_,b){k.pointStyle(u.selectAll("path"),_,b),h(u,_,b)}function h(u,_,b){u.selectAll("text").each(function(w){var T=m.select(this),C=x.ensureUniformFontSize(b,s(T,w,_,b));k.font(T,C)})}function s(u,_,b,w){var T=w._fullLayout.font,C=b.textfont;if(u.classed("bartext-inside")){var M=y(_,b);C=p(b,_.i,T,M)}else u.classed("bartext-outside")&&(C=c(b,_.i,T));return C}function o(u,_,b){return a(l,u.textfont,_,b)}function p(u,_,b,w){var T=o(u,_,b);return(void 0===u._input.textfont||void 0===u._input.textfont.color||Array.isArray(u.textfont.color)&&void 0===u.textfont.color[_])&&(T={color:g.contrast(w),family:T.family,size:T.size}),a(r,u.insidetextfont,_,T)}function c(u,_,b){var w=o(u,_,b);return a(d,u.outsidetextfont,_,w)}function a(u,_,b,w){var T=f.getValue((_=_||{}).family,b),C=f.getValue(_.size,b),M=f.getValue(_.color,b);return{family:f.coerceString(u.family,T,w.family),size:f.coerceNumber(u.size,C,w.size),color:f.coerceColor(u.color,M,w.color)}}function y(u,_){return"waterfall"===_.type?_[u.dir].marker.color:u.mcc||u.mc||_.marker.color}$.exports={style:function(u){var _=m.select(u).selectAll("g.barlayer").selectAll("g.trace");n(u,_,"bar");var b=_.size(),w=u._fullLayout;_.style("opacity",function(T){return T[0].trace.opacity}).each(function(T){("stack"===w.barmode&&b>1||0===w.bargap&&0===w.bargroupgap&&!T[0].trace.marker.line.width)&&m.select(this).attr("shape-rendering","crispEdges")}),_.selectAll("g.points").each(function(T){t(m.select(this),T[0].trace,u)}),e.getComponentMethod("errorbars","style")(_)},styleTextPoints:h,styleOnSelect:function(u,_,b){var T,C,M,I,P,S,w=_[0].trace;w.selectedpoints?(C=w,M=u,k.selectedPointStyle((T=b).selectAll("path"),C),I=T.selectAll("text"),P=C,S=M,I.each(function(E){var R,D=m.select(this);if(E.selected){R=x.ensureUniformFontSize(S,s(D,E,P,S));var j=P.selected.textfont&&P.selected.textfont.color;j&&(R.color=j),k.font(D,R)}else k.selectedTextStyle(D,P)})):(t(b,w,u),e.getComponentMethod("errorbars","style")(b))},getInsideTextFont:p,getOutsideTextFont:c,getBarColor:y,resizeText:n}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../registry":647,"./attributes":657,"./helpers":663,"./uniform_text":673,"@plotly/d3":58}],672:[function(v,$,Q){"use strict";var m=v("../../components/color"),g=v("../../components/colorscale/helpers").hasColorscale,k=v("../../components/colorscale/defaults"),x=v("../../lib").coercePattern;$.exports=function(e,n,i,l,r){var d=i("marker.color",l),f=g(e,"marker");f&&k(e,n,r,i,{prefix:"marker.",cLetter:"c"}),i("marker.line.color",m.defaultLine),g(e,"marker.line")&&k(e,n,r,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width"),i("marker.opacity"),x(i,"marker.pattern",d,f),i("selected.marker.color"),i("unselected.marker.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],673:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib");function k(x){return"_"+x+"Text_minsize"}$.exports={recordMinTextSize:function(x,e,n){if(n.uniformtext.mode){var i=k(x),l=n.uniformtext.minsize,r=e.scale*e.fontSize;e.hide=r<l,n[i]=n[i]||1/0,e.hide||(n[i]=Math.min(n[i],Math.max(r,l)))}},clearMinTextSize:function(x,e){e[k(x)]=void 0},resizeText:function(x,e,n){var i=x._fullLayout,l=i["_"+n+"Text_minsize"];if(l){var r,d="hide"===i.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":r="g.slice";break;case"treemap":case"icicle":r="g.slice, g.pathbar";break;default:r="g.points > g.point"}e.selectAll(r).each(function(f){var t=f.transform;if(t){t.scale=d&&t.hide?0:l/t.fontSize;var h=m.select(this).select("text");g.setTransormAndDisplay(h,t)}})}}}},{"../../lib":515,"@plotly/d3":58}],674:[function(v,$,Q){"use strict";var m=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../lib/extend").extendFlat,k=v("../scatterpolar/attributes"),x=v("../bar/attributes");$.exports={r:k.r,theta:k.theta,r0:k.r0,dr:k.dr,theta0:k.theta0,dtheta:k.dtheta,thetaunit:k.thetaunit,base:g({},x.base,{}),offset:g({},x.offset,{}),width:g({},x.width,{}),text:g({},x.text,{}),hovertext:g({},x.hovertext,{}),marker:x.marker,hoverinfo:k.hoverinfo,hovertemplate:m(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":505,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatterpolar/attributes":1011}],675:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/helpers").hasColorscale,g=v("../../components/colorscale/calc"),k=v("../bar/arrays_to_calcdata"),x=v("../bar/cross_trace_calc").setGroupPositions,e=v("../scatter/calc_selection"),n=v("../../registry").traceIs,i=v("../../lib").extendFlat;$.exports={calc:function(l,r){for(var d=l._fullLayout,f=r.subplot,h=d[f].angularaxis,s=d[f].radialaxis.makeCalcdata(r,"r"),o=h.makeCalcdata(r,"theta"),p=r._length,c=new Array(p),a=s,y=o,u=0;u<p;u++)c[u]={p:y[u],s:a[u]};function _(b){var w=r[b];void 0!==w&&(r["_"+b]=Array.isArray(w)?h.makeCalcdata(r,b):h.d2c(w,r.thetaunit))}return"linear"===h.type&&(_("width"),_("offset")),m(r,"marker")&&g(l,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),m(r,"marker.line")&&g(l,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),k(c,r),e(c,r),c},crossTraceCalc:function(l,r,d){for(var f=l.calcdata,t=[],h=0;h<f.length;h++){var s=f[h],o=s[0].trace;!0===o.visible&&n(o,"bar")&&o.subplot===d&&t.push(s)}var p=i({},r.radialaxis,{_id:"x"});x(l,r.angularaxis,p,t,{mode:r.barmode,norm:r.barnorm,gap:r.bargap,groupgap:r.bargroupgap})}}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../lib":515,"../../registry":647,"../bar/arrays_to_calcdata":656,"../bar/cross_trace_calc":660,"../scatter/calc_selection":938}],676:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../scatterpolar/defaults").handleRThetaDefaults,k=v("../bar/style_defaults"),x=v("./attributes");$.exports=function(e,n,i,l){function r(d,f){return m.coerce(e,n,x,d,f)}g(e,n,l,r)?(r("thetaunit"),r("base"),r("offset"),r("width"),r("text"),r("hovertext"),r("hovertemplate"),k(e,n,r,i,l),m.coerceSelectionMarkerOpacity(n,r)):n.visible=!1}},{"../../lib":515,"../bar/style_defaults":672,"../scatterpolar/defaults":1013,"./attributes":674}],677:[function(v,$,Q){"use strict";var m=v("../../components/fx"),g=v("../../lib"),k=v("../bar/hover").getTraceColor,x=g.fillText,e=v("../scatterpolar/hover").makeHoverPointText,n=v("../../plots/polar/helpers").isPtInsidePolygon;$.exports=function(i,l,r){var d=i.cd,f=d[0].trace,t=i.subplot,h=t.radialAxis,o=t.vangles,p=o?n:g.isPtInsideSector,c=i.maxHoverDistance,a=t.angularAxis._period||2*Math.PI,y=Math.abs(h.g2p(Math.sqrt(l*l+r*r))),u=Math.atan2(r,l);if(h.range[0]>h.range[1]&&(u+=Math.PI),m.getClosest(d,function(w){return p(y,u,[w.rp0,w.rp1],[w.thetag0,w.thetag1],o)?c+Math.min(1,Math.abs(w.thetag1-w.thetag0)/a)-1+(w.rp1-y)/(w.rp1-w.rp0)-1:1/0},i),!1!==i.index){var _=d[i.index];i.x0=i.x1=_.ct[0],i.y0=i.y1=_.ct[1];var b=g.extendFlat({},_,{r:_.s,theta:_.p});return x(_,f,i),e(b,f,t,i),i.hovertemplate=f.hovertemplate,i.color=k(f,_),i.xLabelVal=i.yLabelVal=void 0,_.s<0&&(i.idealAlign="left"),[i]}}},{"../../components/fx":407,"../../lib":515,"../../plots/polar/helpers":630,"../bar/hover":664,"../scatterpolar/hover":1015}],678:[function(v,$,Q){"use strict";$.exports={moduleType:"trace",name:"barpolar",basePlotModule:v("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("../scatterpolar/format_labels"),style:v("../bar/style").style,styleOnSelect:v("../bar/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../bar/select"),meta:{}}},{"../../plots/polar":631,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"../scatterpolar/format_labels":1014,"./attributes":674,"./calc":675,"./defaults":676,"./hover":677,"./layout_attributes":679,"./layout_defaults":680,"./plot":681}],679:[function(v,$,Q){"use strict";$.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],680:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./layout_attributes");$.exports=function(k,x,e){var n,i={};function l(f,t){return m.coerce(k[n]||{},x[n],g,f,t)}for(var r=0;r<e.length;r++){var d=e[r];"barpolar"===d.type&&!0===d.visible&&(i[n=d.subplot]||(l("barmode"),l("bargap"),i[n]=1))}}},{"../../lib":515,"./layout_attributes":679}],681:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("fast-isnumeric"),k=v("../../lib"),x=v("../../components/drawing"),e=v("../../plots/polar/helpers");$.exports=function(n,i,l){var o,p,c,r=i.xaxis,d=i.yaxis,f=i.radialAxis,t=i.angularAxis,h=(p=(o=i).cxx,c=o.cyy,o.vangles?function(a,y,u,_){var b,w;k.angleDelta(u,_)>0?(b=u,w=_):(b=_,w=u);var T=[e.findEnclosingVertexAngles(b,o.vangles)[0],(b+w)/2,e.findEnclosingVertexAngles(w,o.vangles)[1]];return e.pathPolygonAnnulus(a,y,b,w,T,p,c)}:function(a,y,u,_){return k.pathAnnulus(a,y,u,_,p,c)}),s=i.layers.frontplot.select("g.barlayer");k.makeTraceGroups(s,l,"trace bars").each(function(){var o=m.select(this),p=k.ensureSingle(o,"g","points").selectAll("g.point").data(k.identity);p.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),p.exit().remove(),p.each(function(c){var a,y=m.select(this),u=c.rp0=f.c2p(c.s0),_=c.rp1=f.c2p(c.s1),b=c.thetag0=t.c2g(c.p0),w=c.thetag1=t.c2g(c.p1);if(g(u)&&g(_)&&g(b)&&g(w)&&u!==_&&b!==w){var T=f.c2g(c.s1),C=(b+w)/2;c.ct=[r.c2p(T*Math.cos(C)),d.c2p(T*Math.sin(C))],a=h(u,_,b,w)}else a="M0,0Z";k.ensureSingle(y,"path").attr("d",a)}),x.setClipUrl(o,i._hasClipOnAxisFalse?i.clipIds.forTraces:null,n)})}},{"../../components/drawing":389,"../../lib":515,"../../plots/polar/helpers":630,"@plotly/d3":58,"fast-isnumeric":190}],682:[function(v,$,Q){"use strict";var m=v("../scatter/attributes"),g=v("../bar/attributes"),k=v("../../components/color/attributes"),x=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../plots/template_attributes").hovertemplateAttrs,n=v("../../lib/extend").extendFlat,i=m.marker,l=i.line;$.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:n({},i.symbol,{arrayOk:!1,editType:"plot"}),opacity:n({},i.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:n({},i.angle,{arrayOk:!1,editType:"calc"}),size:n({},i.size,{arrayOk:!1,editType:"calc"}),color:n({},i.color,{arrayOk:!1,editType:"style"}),line:{color:n({},l.color,{arrayOk:!1,dflt:k.defaultLine,editType:"style"}),width:n({},l.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:m.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup,selected:{marker:m.selected.marker,editType:"style"},unselected:{marker:m.unselected.marker,editType:"style"},text:n({},m.text,{}),hovertext:n({},m.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936}],683:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../plots/cartesian/axes"),k=v("../../plots/cartesian/align_period"),x=v("../../lib"),e=v("../../constants/numerical").BADNUM,n=x._;$.exports=function(p,c){var a,y,u,_,b,w,T,C=p._fullLayout,M=g.getFromId(p,c.xaxis||"x"),I=g.getFromId(p,c.yaxis||"y"),P=[],S="violin"===c.type?"_numViolins":"_numBoxes";"h"===c.orientation?(u=M,_="x",b=I,w="y",T=!!c.yperiodalignment):(u=I,_="y",b=M,w="x",T=!!c.xperiodalignment);var E,R,D,j,H,Y,X=function(Re,qe,Qe,ct){var bt,Tt=qe+"0"in Re;if(qe in Re||Tt&&"d"+qe in Re){var nt=Qe.makeCalcdata(Re,qe);return[k(Re,Qe,qe,nt).vals,nt]}bt=Tt?Re[qe+"0"]:"name"in Re&&("category"===Qe.type||m(Re.name)&&-1!==["linear","log"].indexOf(Qe.type)||x.isDateTime(Re.name)&&"date"===Qe.type)?Re.name:ct;for(var Ke="multicategory"===Qe.type?Qe.r2c_just_indices(bt):Qe.d2c(bt,0,Re[qe+"calendar"]),xt=Re._length,Ht=new Array(xt),Zt=0;Zt<xt;Zt++)Ht[Zt]=Ke;return[Ht]}(c,w,b,C[S]),Z=X[0],W=X[1],re=x.distinctVals(Z,b),U=re.vals,B=re.minDiff/2,V="all"===(c.boxpoints||c.points)?x.identity:function(Re){return Re.v<E.lf||Re.v>E.uf};if(c._hasPreCompStats){var ee=c[_],N=function(Re){return u.d2c((c[Re]||[])[a])},K=1/0,J=-1/0;for(a=0;a<c._length;a++){var te=Z[a];if(m(te)){if((E={}).pos=E[w]=te,T&&W&&(E.orig_p=W[a]),E.q1=N("q1"),E.med=N("median"),E.q3=N("q3"),R=[],ee&&x.isArrayOrTypedArray(ee[a]))for(y=0;y<ee[a].length;y++)(Y=u.d2c(ee[a][y]))!==e&&(l(H={v:Y,i:[a,y]},c,[a,y]),R.push(H));if(E.pts=R.sort(r),j=(D=E[_]=R.map(d)).length,E.med!==e&&E.q1!==e&&E.q3!==e&&E.med>=E.q1&&E.q3>=E.med){var ae=N("lowerfence");E.lf=ae!==e&&ae<=E.q1?ae:f(E,D,j);var le=N("upperfence");E.uf=le!==e&&le>=E.q3?le:t(E,D,j);var se=N("mean");E.mean=se!==e?se:j?x.mean(D,j):(E.q1+E.q3)/2;var ve=N("sd");E.sd=se!==e&&ve>=0?ve:j?x.stdev(D,j,E.mean):E.q3-E.q1,E.lo=h(E),E.uo=s(E);var ue=N("notchspan");ue=ue!==e&&ue>0?ue:o(E,j),E.ln=E.med-ue,E.un=E.med+ue;var ye=E.lf,Me=E.uf;c.boxpoints&&D.length&&(ye=Math.min(ye,D[0]),Me=Math.max(Me,D[j-1])),c.notched&&(ye=Math.min(ye,E.ln),Me=Math.max(Me,E.un)),E.min=ye,E.max=Me}else{var pe;x.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+E.q1,"median = "+E.med,"q3 = "+E.q3].join("\n")),E.med=pe=E.med!==e?E.med:E.q1!==e?E.q3!==e?(E.q1+E.q3)/2:E.q1:E.q3!==e?E.q3:0,E.q1=E.q3=pe,E.lf=E.uf=pe,E.mean=E.sd=pe,E.ln=E.un=pe,E.min=E.max=pe}K=Math.min(K,E.min),J=Math.max(J,E.max),E.pts2=R.filter(V),P.push(E)}}c._extremes[u._id]=g.findExtremes(u,[K,J],{padded:!0})}else{var ge=u.makeCalcdata(c,_),we=function(Re,qe){for(var Qe=Re.length,ct=new Array(Qe+1),bt=0;bt<Qe;bt++)ct[bt]=Re[bt]-qe;return ct[Qe]=Re[Qe-1]+qe,ct}(U,B),oe=U.length,de=function(Re){for(var qe=new Array(Re),Qe=0;Qe<Re;Qe++)qe[Qe]=[];return qe}(oe);for(a=0;a<c._length;a++)if(m(Y=ge[a])){var Te=x.findBin(Z[a],we);Te>=0&&Te<oe&&(l(H={v:Y,i:a},c,a),de[Te].push(H))}var Ee=1/0,Ae=-1/0,De=c.quartilemethod,Ie="exclusive"===De,Oe="inclusive"===De;for(a=0;a<oe;a++)if(de[a].length>0){var Xe,Fe;(E={}).pos=E[w]=U[a],R=E.pts=de[a].sort(r),j=(D=E[_]=R.map(d)).length,E.min=D[0],E.max=D[j-1],E.mean=x.mean(D,j),E.sd=x.stdev(D,j,E.mean),E.med=x.interp(D,.5),j%2&&(Ie||Oe)?(Ie?(Xe=D.slice(0,j/2),Fe=D.slice(j/2+1)):Oe&&(Xe=D.slice(0,j/2+1),Fe=D.slice(j/2)),E.q1=x.interp(Xe,.5),E.q3=x.interp(Fe,.5)):(E.q1=x.interp(D,.25),E.q3=x.interp(D,.75)),E.lf=f(E,D,j),E.uf=t(E,D,j),E.lo=h(E),E.uo=s(E);var Pe=o(E,j);E.ln=E.med-Pe,E.un=E.med+Pe,Ee=Math.min(Ee,E.ln),Ae=Math.max(Ae,E.un),E.pts2=R.filter(V),P.push(E)}c._extremes[u._id]=g.findExtremes(u,c.notched?ge.concat([Ee,Ae]):ge,{padded:!0})}return function(Re,qe){if(x.isArrayOrTypedArray(qe.selectedpoints))for(var Qe=0;Qe<Re.length;Qe++){for(var ct=Re[Qe].pts||[],bt={},Tt=0;Tt<ct.length;Tt++)bt[ct[Tt].i]=Tt;x.tagSelected(ct,qe,bt)}}(P,c),P.length>0?(P[0].t={num:C[S],dPos:B,posLetter:w,valLetter:_,labels:{med:n(p,"median:"),min:n(p,"min:"),q1:n(p,"q1:"),q3:n(p,"q3:"),max:n(p,"max:"),mean:n(p,"sd"===c.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:n(p,"lower fence:"),uf:n(p,"upper fence:")}},C[S]++,P):[{t:{empty:!0}}]};var i={text:"tx",hovertext:"htx"};function l(p,c,a){for(var y in i)x.isArrayOrTypedArray(c[y])&&(Array.isArray(a)?x.isArrayOrTypedArray(c[y][a[0]])&&(p[i[y]]=c[y][a[0]][a[1]]):p[i[y]]=c[y][a])}function r(p,c){return p.v-c.v}function d(p){return p.v}function f(p,c,a){return 0===a?p.q1:Math.min(p.q1,c[Math.min(x.findBin(2.5*p.q1-1.5*p.q3,c,!0)+1,a-1)])}function t(p,c,a){return 0===a?p.q3:Math.max(p.q3,c[Math.max(x.findBin(2.5*p.q3-1.5*p.q1,c),0)])}function h(p){return 4*p.q1-3*p.q3}function s(p){return 4*p.q3-3*p.q1}function o(p,c){return 0===c?0:1.57*(p.q3-p.q1)/Math.sqrt(c)}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"fast-isnumeric":190}],684:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes"),g=v("../../lib"),k=v("../../plots/cartesian/constraints").getAxisGroup,x=["v","h"];function e(n,i,l,r){var d,f,t,h=i.calcdata,s=i._fullLayout,o=r._id,p=o.charAt(0),c=[],a=0;for(d=0;d<l.length;d++)for(t=h[l[d]],f=0;f<t.length;f++)c.push(r.c2l(t[f].pos,!0)),a+=(t[f].pts2||[]).length;if(c.length){var y=g.distinctVals(c);"category"!==r.type&&"multicategory"!==r.type||(y.minDiff=1);var u=y.minDiff/2;m.minDtick(r,y.minDiff,y.vals[0],!0);var _=s["violin"===n?"_numViolins":"_numBoxes"],b="group"===s[n+"mode"]&&_>1,w=1-s[n+"gap"],T=1-s[n+"groupgap"];for(d=0;d<l.length;d++){var C,M,I,P,S,E,R=(t=h[l[d]])[0].trace,D=t[0].t,j=R.width,H=R.side;if(j)C=M=P=j/2,I=0;else if(C=u,b){var Y=k(s,r._id)+R.orientation,Z=Object.keys(((s._alignmentOpts[Y]||{})[R.alignmentgroup]||{}).offsetGroups||{}).length,W=Z||_;M=C*w*T/W,I=2*C*(((Z?R._offsetIndex:D.num)+.5)/W-.5)*w,P=C*w/W}else M=C*w*T,I=0,P=C;D.dPos=C,D.bPos=I,D.bdPos=M,D.wHover=P;var re,U,B,V,ee,N,K=I+M,J=Boolean(j);if("positive"===H?(S=C*(j?1:.5),re=K,E=re=I):"negative"===H?(S=re=I,E=C*(j?1:.5),U=K):(S=E=C,re=U=K),(R.boxpoints||R.points)&&a>0){var te=R.pointpos,ae=R.jitter,le=R.marker.size/2,se=0;te+ae>=0&&((se=K*(te+ae))>S?(J=!0,ee=le,B=se):se>re&&(ee=le,B=S)),se<=S&&(B=S);var ve=0;te-ae<=0&&((ve=-K*(te-ae))>E?(J=!0,N=le,V=ve):ve>U&&(N=le,V=E)),ve<=E&&(V=E)}else B=S,V=E;var ue=new Array(t.length);for(f=0;f<t.length;f++)ue[f]=t[f].pos;R._extremes[o]=m.findExtremes(r,ue,{padded:J,vpadminus:V,vpadplus:B,vpadLinearized:!0,ppadminus:{x:N,y:ee}[p],ppadplus:{x:ee,y:N}[p]})}}}$.exports={crossTraceCalc:function(n,i){for(var l=n.calcdata,r=i.xaxis,d=i.yaxis,f=0;f<x.length;f++){for(var t=x[f],h="h"===t?d:r,s=[],o=0;o<l.length;o++){var p=l[o],a=p[0].trace;!0!==a.visible||"box"!==a.type&&"candlestick"!==a.type||p[0].t.empty||(a.orientation||"v")!==t||a.xaxis!==r._id||a.yaxis!==d._id||s.push(o)}e("box",n,s,h)}},setPositionOffset:e}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574}],685:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../registry"),k=v("../../components/color"),x=v("../scatter/period_defaults"),e=v("../bar/defaults").handleGroupingDefaults,n=v("../../plots/cartesian/axis_autotype"),i=v("./attributes");function l(d,f,t,h){function s(H){var Y=0;return H&&H.length&&(Y+=1,m.isArrayOrTypedArray(H[0])&&H[0].length&&(Y+=1)),Y}function o(H){return m.validate(d[H],i[H])}var p,c=t("y"),a=t("x");if("box"===f.type){var y=t("q1"),u=t("median"),_=t("q3");f._hasPreCompStats=y&&y.length&&u&&u.length&&_&&_.length,p=Math.min(m.minRowLength(y),m.minRowLength(u),m.minRowLength(_))}var b,w,T=s(c),C=s(a),M=T&&m.minRowLength(c),I=C&&m.minRowLength(a),P=h.calendar,S={autotypenumbers:h.autotypenumbers};if(f._hasPreCompStats)switch(String(C)+String(T)){case"00":var E=o("x0")||o("dx");b=!o("y0")&&!o("dy")||E?"v":"h",w=p;break;case"10":b="v",w=Math.min(p,I);break;case"20":b="h",w=Math.min(p,a.length);break;case"01":b="h",w=Math.min(p,M);break;case"02":b="v",w=Math.min(p,c.length);break;case"12":b="v",w=Math.min(p,I,c.length);break;case"21":b="h",w=Math.min(p,a.length,M);break;case"11":w=0;break;case"22":var R,D=!1;for(R=0;R<a.length;R++)if("category"===n(a[R],P,S)){D=!0;break}if(D)b="v",w=Math.min(p,I,c.length);else{for(R=0;R<c.length;R++)if("category"===n(c[R],P,S)){D=!0;break}D?(b="h",w=Math.min(p,a.length,M)):(b="v",w=Math.min(p,I,c.length))}}else T>0?(b="v",w=C>0?Math.min(I,M):Math.min(M)):C>0?(b="h",w=Math.min(I)):w=0;if(w){f._length=w;var j=t("orientation",b);f._hasPreCompStats?"v"===j&&0===C?(t("x0",0),t("dx",1)):"h"===j&&0===T&&(t("y0",0),t("dy",1)):"v"===j&&0===C?t("x0"):"h"===j&&0===T&&t("y0"),g.getComponentMethod("calendars","handleTraceDefaults")(d,f,["x","y"],h)}else f.visible=!1}function r(d,f,t,h){var s=h.prefix,o=m.coerce2(d,f,i,"marker.outliercolor"),p=t("marker.line.outliercolor"),c="outliers";f._hasPreCompStats?c="all":(o||p)&&(c="suspectedoutliers");var a=t(s+"points",c);a?(t("jitter","all"===a?.3:0),t("pointpos","all"===a?-1.5:0),t("marker.symbol"),t("marker.opacity"),t("marker.size"),t("marker.angle"),t("marker.color",f.line.color),t("marker.line.color"),t("marker.line.width"),"suspectedoutliers"===a&&(t("marker.line.outliercolor",f.marker.color),t("marker.line.outlierwidth")),t("selected.marker.color"),t("unselected.marker.color"),t("selected.marker.size"),t("unselected.marker.size"),t("text"),t("hovertext")):delete f.marker;var y=t("hoveron");"all"!==y&&-1===y.indexOf("points")||t("hovertemplate"),m.coerceSelectionMarkerOpacity(f,t)}$.exports={supplyDefaults:function(d,f,t,h){function s(_,b){return m.coerce(d,f,i,_,b)}if(l(d,f,s,h),!1!==f.visible){x(d,f,h,s),s("xhoverformat"),s("yhoverformat");var o=f._hasPreCompStats;o&&(s("lowerfence"),s("upperfence")),s("line.color",(d.marker||{}).color||t),s("line.width"),s("fillcolor",k.addOpacity(f.line.color,.5));var p=!1;if(o){var c=s("mean"),a=s("sd");c&&c.length&&(p=!0,a&&a.length&&(p="sd"))}s("boxmean",p),s("whiskerwidth"),s("width"),s("quartilemethod");var y=!1;if(o){var u=s("notchspan");u&&u.length&&(y=!0)}else m.validate(d.notchwidth,i.notchwidth)&&(y=!0);s("notched",y)&&s("notchwidth"),r(d,f,s,{prefix:"box"})}},crossTraceDefaults:function(d,f){var h;function s(c){return m.coerce(h._input,h,i,c)}for(var o=0;o<d.length;o++){var p=(h=d[o]).type;"box"!==p&&"violin"!==p||"group"===f[p+"mode"]&&e(h._input,h,f,s)}},handleSampleDefaults:l,handlePointsDefaults:r}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../registry":647,"../bar/defaults":661,"../scatter/period_defaults":956,"./attributes":682}],686:[function(v,$,Q){"use strict";$.exports=function(m,g){return g.hoverOnBox&&(m.hoverOnBox=g.hoverOnBox),"xVal"in g&&(m.x=g.xVal),"yVal"in g&&(m.y=g.yVal),g.xa&&(m.xaxis=g.xa),g.ya&&(m.yaxis=g.ya),m}},{}],687:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes"),g=v("../../lib"),k=v("../../components/fx"),x=v("../../components/color"),e=g.fillText;function n(l,r,d,f){var t,h,s,o,p,c,a,y,u,_,b,w,T,C,M=l.cd,I=l.xa,P=l.ya,S=M[0].trace,E=M[0].t,R="violin"===S.type,D=E.bdPos,j=E.wHover,H=function(pe){return s.c2l(pe.pos)+E.bPos-s.c2l(c)};R&&"both"!==S.side?("positive"===S.side&&(u=function(pe){var ge=H(pe);return k.inbox(ge,ge+j,_)},w=D,T=0),"negative"===S.side&&(u=function(pe){var ge=H(pe);return k.inbox(ge-j,ge,_)},w=0,T=D)):(u=function(pe){var ge=H(pe);return k.inbox(ge-j,ge+j,_)},w=T=D),C=R?function(pe){return k.inbox(pe.span[0]-p,pe.span[1]-p,_)}:function(pe){return k.inbox(pe.min-p,pe.max-p,_)},"h"===S.orientation?(p=r,c=d,a=C,y=u,t="y",s=P,h="x",o=I):(p=d,c=r,a=u,y=C,t="x",s=I,h="y",o=P);var Y=Math.min(1,D/Math.abs(s.r2c(s.range[1])-s.r2c(s.range[0])));function X(pe){return(a(pe)+y(pe))/2}_=l.maxHoverDistance-Y,b=l.maxSpikeDistance-Y;var Z=k.getDistanceFunction(f,a,y,X);if(k.getClosest(M,Z,l),!1===l.index)return[];var W=M[l.index],re=S.line.color,U=(S.marker||{}).color;l.color=x.opacity(re)&&S.line.width?re:x.opacity(U)&&S.boxpoints?U:S.fillcolor,l[t+"0"]=s.c2p(W.pos+E.bPos-T,!0),l[t+"1"]=s.c2p(W.pos+E.bPos+w,!0),l[t+"LabelVal"]=void 0!==W.orig_p?W.orig_p:W.pos;var B=t+"Spike";l.spikeDistance=X(W)*b/_,l[B]=s.c2p(W.pos,!0);var V=S.boxmean||(S.meanline||{}).visible,ee=S.boxpoints||S.points,N=ee&&V?["max","uf","q3","med","mean","q1","lf","min"]:ee&&!V?["max","uf","q3","med","q1","lf","min"]:!ee&&V?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"];S.orientation===(o.range[1]<o.range[0]?"v":"h")&&N.reverse();for(var J=l.spikeDistance,te=l[B],ae=[],le=0;le<N.length;le++){var se=N[le];if(se in W){var ve=W[se],ue=o.c2p(ve,!0),ye=g.extendFlat({},l);ye.attr=se,ye[h+"0"]=ye[h+"1"]=ue,ye[h+"LabelVal"]=ve,ye[h+"Label"]=(E.labels?E.labels[se]+" ":"")+m.hoverLabelText(o,ve,S[h+"hoverformat"]),ye.hoverOnBox=!0,"mean"===se&&"sd"in W&&"sd"===S.boxmean&&(ye[h+"err"]=W.sd),ye.hovertemplate=!1,ae.push(ye)}}l.name="",l.spikeDistance=void 0,l[B]=void 0;for(var Me=0;Me<ae.length;Me++)"med"!==ae[Me].attr?(ae[Me].name="",ae[Me].spikeDistance=void 0,ae[Me][B]=void 0):(ae[Me].spikeDistance=J,ae[Me][B]=te);return ae}function i(l,r,d){for(var f,t,h,s=l.cd,o=l.xa,p=l.ya,c=s[0].trace,a=o.c2p(r),y=p.c2p(d),u=k.quadrature(function(R){var D=Math.max(3,R.mrc||0);return Math.max(Math.abs(o.c2p(R.x)-a)-D,1-3/D)},function(R){var D=Math.max(3,R.mrc||0);return Math.max(Math.abs(p.c2p(R.y)-y)-D,1-3/D)}),_=!1,b=0;b<s.length;b++){t=s[b];for(var w=0;w<(t.pts||[]).length;w++){var T=u(h=t.pts[w]);T<=l.distance&&(l.distance=T,_=[b,w])}}if(!_)return!1;h=(t=s[_[0]]).pts[_[1]];var C=o.c2p(h.x,!0),M=p.c2p(h.y,!0),I=h.mrc||1;f=g.extendFlat({},l,{index:h.i,color:(c.marker||{}).color,name:c.name,x0:C-I,x1:C+I,y0:M-I,y1:M+I,spikeDistance:l.distance,hovertemplate:c.hovertemplate});var P,S=t.orig_p,E=void 0!==S?S:t.pos;return"h"===c.orientation?(P=p,f.xLabelVal=h.x,f.yLabelVal=E):(P=o,f.xLabelVal=E,f.yLabelVal=h.y),f[P._id.charAt(0)+"Spike"]=P.c2p(t.pos,!0),e(h,c,f),f}$.exports={hoverPoints:function(l,r,d,f){var t,h=l.cd[0].trace.hoveron,s=[];return-1!==h.indexOf("boxes")&&(s=s.concat(n(l,r,d,f))),-1!==h.indexOf("points")&&(t=i(l,r,d)),"closest"===f?t?[t]:s:(t&&s.push(t),s)},hoverOnBoxes:n,hoverOnPoints:i}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],688:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults").supplyLayoutDefaults,calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc").crossTraceCalc,plot:v("./plot").plot,style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"box",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./attributes":682,"./calc":683,"./cross_trace_calc":684,"./defaults":685,"./event_data":686,"./hover":687,"./layout_attributes":689,"./layout_defaults":690,"./plot":691,"./select":692,"./style":693}],689:[function(v,$,Q){"use strict";$.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],690:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../lib"),k=v("./layout_attributes");function x(e,n,i,l,r){for(var d=r+"Layout",f=!1,t=0;t<i.length;t++)if(m.traceIs(i[t],d)){f=!0;break}f&&(l(r+"mode"),l(r+"gap"),l(r+"groupgap"))}$.exports={supplyLayoutDefaults:function(e,n,i){x(0,0,i,function(l,r){return g.coerce(e,n,k,l,r)},"box")},_supply:x}},{"../../lib":515,"../../registry":647,"./layout_attributes":689}],691:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=v("../../components/drawing");function x(i,l,r,d){var f,t,h="h"===r.orientation,s=l.val,o=l.pos,p=!!o.rangebreaks,c=d.bPos,a=d.wdPos||0,y=d.bPosPxOffset||0,u=r.whiskerwidth||0,_=r.notched||!1,b=_?1-2*r.notchwidth:1;Array.isArray(d.bdPos)?(f=d.bdPos[0],t=d.bdPos[1]):(f=d.bdPos,t=d.bdPos);var w=i.selectAll("path.box").data("violin"!==r.type||r.box.visible?g.identity:[]);w.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),w.exit().remove(),w.each(function(T){if(T.empty)return"M0,0Z";var C=o.c2l(T.pos+c,!0),M=o.l2p(C-f)+y,I=o.l2p(C+t)+y,P=p?(M+I)/2:o.l2p(C)+y,S=r.whiskerwidth,E=p?M*S+(1-S)*P:o.l2p(C-a)+y,R=p?I*S+(1-S)*P:o.l2p(C+a)+y,D=o.l2p(C-f*b)+y,j=o.l2p(C+t*b)+y,H=s.c2p(T.q1,!0),Y=s.c2p(T.q3,!0),X=g.constrain(s.c2p(T.med,!0),Math.min(H,Y)+1,Math.max(H,Y)-1),Z=void 0===T.lf||!1===r.boxpoints,W=s.c2p(Z?T.min:T.lf,!0),re=s.c2p(Z?T.max:T.uf,!0),U=s.c2p(T.ln,!0),B=s.c2p(T.un,!0);h?m.select(this).attr("d","M"+X+","+D+"V"+j+"M"+H+","+M+"V"+I+(_?"H"+U+"L"+X+","+j+"L"+B+","+I:"")+"H"+Y+"V"+M+(_?"H"+B+"L"+X+","+D+"L"+U+","+M:"")+"ZM"+H+","+P+"H"+W+"M"+Y+","+P+"H"+re+(0===u?"":"M"+W+","+E+"V"+R+"M"+re+","+E+"V"+R)):m.select(this).attr("d","M"+D+","+X+"H"+j+"M"+M+","+H+"H"+I+(_?"V"+U+"L"+j+","+X+"L"+I+","+B:"")+"V"+Y+"H"+M+(_?"V"+B+"L"+D+","+X+"L"+M+","+U:"")+"ZM"+P+","+H+"V"+W+"M"+P+","+Y+"V"+re+(0===u?"":"M"+E+","+W+"H"+R+"M"+E+","+re+"H"+R))})}function e(i,l,r,d){var f=l.x,t=l.y,h=d.bdPos,s=d.bPos,o=r.boxpoints||r.points;g.seedPseudoRandom();var p=i.selectAll("g.points").data(o?function(a){return a.forEach(function(y){y.t=d,y.trace=r}),a}:[]);p.enter().append("g").attr("class","points"),p.exit().remove();var c=p.selectAll("path").data(function(a){var y,u,_=a.pts2,b=Math.max((a.max-a.min)/10,a.q3-a.q1),w=1e-9*b,T=.01*b,C=[],M=0;if(r.jitter){if(0===b)for(M=1,C=new Array(_.length),y=0;y<_.length;y++)C[y]=1;else for(y=0;y<_.length;y++){var I=Math.max(0,y-5),P=_[I].v,S=Math.min(_.length-1,y+5),E=_[S].v;"all"!==o&&(_[y].v<a.lf?E=Math.min(E,a.lf):P=Math.max(P,a.uf));var R=Math.sqrt(T*(S-I)/(E-P+w))||0;R=g.constrain(Math.abs(R),0,1),C.push(R),M=Math.max(R,M)}u=2*r.jitter/(M||1)}for(y=0;y<_.length;y++){var D=_[y],j=D.v,H=r.jitter?u*C[y]*(g.pseudoRandom()-.5):0,Y=a.pos+s+h*(r.pointpos+H);"h"===r.orientation?(D.y=Y,D.x=j):(D.x=Y,D.y=j),"suspectedoutliers"===o&&j<a.uo&&j>a.lo&&(D.so=!0)}return _});c.enter().append("path").classed("point",!0),c.exit().remove(),c.call(k.translatePoints,f,t)}function n(i,l,r,d){var f,t,h=l.val,s=l.pos,o=!!s.rangebreaks,p=d.bPos,c=d.bPosPxOffset||0,a=r.boxmean||(r.meanline||{}).visible;Array.isArray(d.bdPos)?(f=d.bdPos[0],t=d.bdPos[1]):(f=d.bdPos,t=d.bdPos);var y=i.selectAll("path.mean").data("box"===r.type&&r.boxmean||"violin"===r.type&&r.box.visible&&r.meanline.visible?g.identity:[]);y.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),y.exit().remove(),y.each(function(u){var _=s.c2l(u.pos+p,!0),b=s.l2p(_-f)+c,w=s.l2p(_+t)+c,T=o?(b+w)/2:s.l2p(_)+c,C=h.c2p(u.mean,!0),M=h.c2p(u.mean-u.sd,!0),I=h.c2p(u.mean+u.sd,!0);"h"===r.orientation?m.select(this).attr("d","M"+C+","+b+"V"+w+("sd"===a?"m0,0L"+M+","+T+"L"+C+","+b+"L"+I+","+T+"Z":"")):m.select(this).attr("d","M"+b+","+C+"H"+w+("sd"===a?"m0,0L"+T+","+M+"L"+b+","+C+"L"+T+","+I+"Z":""))})}$.exports={plot:function(i,l,r,d){var f=l.xaxis,t=l.yaxis;g.makeTraceGroups(d,r,"trace boxes").each(function(h){var s,o,p=m.select(this),c=h[0],a=c.t,y=c.trace;a.wdPos=a.bdPos*y.whiskerwidth,!0!==y.visible||a.empty?p.remove():("h"===y.orientation?(s=t,o=f):(s=f,o=t),x(p,{pos:s,val:o},y,a),e(p,{x:f,y:t},y,a),n(p,{pos:s,val:o},y,a))})},plotBoxAndWhiskers:x,plotPoints:e,plotBoxMean:n}},{"../../components/drawing":389,"../../lib":515,"@plotly/d3":58}],692:[function(v,$,Q){"use strict";$.exports=function(m,g){var k,x,e=m.cd,n=m.xaxis,i=m.yaxis,l=[];if(!1===g)for(k=0;k<e.length;k++)for(x=0;x<(e[k].pts||[]).length;x++)e[k].pts[x].selected=0;else for(k=0;k<e.length;k++)for(x=0;x<(e[k].pts||[]).length;x++){var r=e[k].pts[x],d=n.c2p(r.x),f=i.c2p(r.y);g.contains([d,f],null,r.i,m)?(l.push({pointNumber:r.i,x:n.c2d(r.x),y:i.c2d(r.y)}),r.selected=1):r.selected=0}return l}},{}],693:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/color"),k=v("../../components/drawing");$.exports={style:function(x,e,n){var i=n||m.select(x).selectAll("g.trace.boxes");i.style("opacity",function(l){return l[0].trace.opacity}),i.each(function(l){var r=m.select(this),d=l[0].trace,f=d.line.width;function t(o,p,c,a){o.style("stroke-width",p+"px").call(g.stroke,c).call(g.fill,a)}var h=r.selectAll("path.box");if("candlestick"===d.type)h.each(function(o){if(!o.empty){var p=m.select(this),c=d[o.dir];t(p,c.line.width,c.line.color,c.fillcolor),p.style("opacity",d.selectedpoints&&!o.selected?.3:1)}});else{t(h,f,d.line.color,d.fillcolor),r.selectAll("path.mean").style({"stroke-width":f,"stroke-dasharray":2*f+"px,"+f+"px"}).call(g.stroke,d.line.color);var s=r.selectAll("path.point");k.pointStyle(s,d,x)}})},styleOnSelect:function(x,e,n){var i=e[0].trace,l=n.selectAll("path.point");i.selectedpoints?k.selectedPointStyle(l,i):k.pointStyle(l,i,x)}}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],694:[function(v,$,Q){"use strict";var m=v("../../lib").extendFlat,g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=v("../ohlc/attributes"),x=v("../box/attributes");function e(n){return{line:{color:m({},x.line.color,{dflt:n}),width:x.line.width,editType:"style"},fillcolor:x.fillcolor,editType:"style"}}$.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:g("x"),yhoverformat:g("y"),x:k.x,open:k.open,high:k.high,low:k.low,close:k.close,line:{width:m({},x.line.width,{}),editType:"style"},increasing:e(k.increasing.line.color.dflt),decreasing:e(k.decreasing.line.color.dflt),text:k.text,hovertext:k.hovertext,whiskerwidth:m({},x.whiskerwidth,{dflt:0}),hoverlabel:k.hoverlabel}},{"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682,"../ohlc/attributes":881}],695:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/cartesian/axes"),k=v("../../plots/cartesian/align_period"),x=v("../ohlc/calc").calcCommon;function e(n,i,l,r){return{min:l,q1:Math.min(n,r),med:r,q3:Math.max(n,r),max:i}}$.exports=function(n,i){var l=n._fullLayout,r=g.getFromId(n,i.xaxis),d=g.getFromId(n,i.yaxis),f=r.makeCalcdata(i,"x"),t=k(i,r,"x",f).vals,h=x(n,i,f,t,d,e);return h.length?(m.extendFlat(h[0].t,{num:l._numBoxes,dPos:m.distinctVals(t).minDiff/2,posLetter:"x",valLetter:"y"}),l._numBoxes++,h):[{t:{empty:!0}}]}},{"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../ohlc/calc":882}],696:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/color"),k=v("../ohlc/ohlc_defaults"),x=v("../scatter/period_defaults"),e=v("./attributes");function n(i,l,r,d){var f=r(d+".line.color");r(d+".line.width",l.line.width),r(d+".fillcolor",g.addOpacity(f,.5))}$.exports=function(i,l,r,d){function f(t,h){return m.coerce(i,l,e,t,h)}k(i,l,f,d)?(x(i,l,d,f,{x:!0}),f("xhoverformat"),f("yhoverformat"),f("line.width"),n(0,l,f,"increasing"),n(0,l,f,"decreasing"),f("text"),f("hovertext"),f("whiskerwidth"),d._requestRangeslider[l.xaxis]=!0):l.visible=!1}},{"../../components/color":367,"../../lib":515,"../ohlc/ohlc_defaults":886,"../scatter/period_defaults":956,"./attributes":694}],697:[function(v,$,Q){"use strict";$.exports={moduleType:"trace",name:"candlestick",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:v("./attributes"),layoutAttributes:v("../box/layout_attributes"),supplyLayoutDefaults:v("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:v("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("../box/plot").plot,layerName:"boxlayer",style:v("../box/style").style,hoverPoints:v("../ohlc/hover").hoverPoints,selectPoints:v("../ohlc/select")}},{"../../plots/cartesian":578,"../box/cross_trace_calc":684,"../box/layout_attributes":689,"../box/layout_defaults":690,"../box/plot":691,"../box/style":693,"../ohlc/hover":884,"../ohlc/select":888,"./attributes":694,"./calc":695,"./defaults":696}],698:[function(v,$,Q){"use strict";var m=v("./axis_defaults"),g=v("../../plot_api/plot_template");$.exports=function(k,x,e,n,i){var l,r,d,f;n("a")||(n("da"),n("a0")),n("b")||(n("db"),n("b0")),l=k,r=x,d=e,f=i,["aaxis","baxis"].forEach(function(t){var h=t.charAt(0),s=l[t]||{},o=g.newContainer(r,t);m(s,o,{noTicklabelstep:!0,tickfont:"x",id:h+"axis",letter:h,font:r.font,name:t,data:l[h],calendar:r.calendar,dfltColor:f,bgColor:d.paper_bgcolor,autotypenumbersDflt:d.autotypenumbers,fullLayout:d}),o._categories=o._categories||[],l[t]||"-"===s.type||(l[t]={type:s.type})})}},{"../../plot_api/plot_template":555,"./axis_defaults":703}],699:[function(v,$,Q){"use strict";var m=v("../../lib").isArrayOrTypedArray;$.exports=function(g){return function k(x,e){if(!m(x)||e>=10)return null;for(var n=1/0,i=-1/0,l=x.length,r=0;r<l;r++){var d=x[r];if(m(d)){var f=k(d,e+1);f&&(n=Math.min(f[0],n),i=Math.max(f[1],i))}else n=Math.min(d,n),i=Math.max(d,i)}return[n,i]}(g,0)}},{"../../lib":515}],700:[function(v,$,Q){"use strict";var m=v("../../plots/font_attributes"),g=v("./axis_attributes"),k=v("../../components/color/attributes"),x=m({editType:"calc"});x.family.dflt='"Open Sans", verdana, arial, sans-serif',x.size.dflt=12,x.color.dflt=k.defaultLine,$.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:g,baxis:g,font:x,color:{valType:"color",dflt:k.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":366,"../../plots/font_attributes":594,"./axis_attributes":702}],701:[function(v,$,Q){"use strict";var m=v("../../lib").isArrayOrTypedArray;$.exports=function(g,k,x,e){var n,i,l,r,d,f,t,h,s,o,p,c,a,y=m(x)?"a":"b",u=("a"===y?g.aaxis:g.baxis).smoothing,_="a"===y?g.a2i:g.b2j,b="a"===y?x:e,w="a"===y?e:x,T="a"===y?k.a.length:k.b.length,C="a"===y?k.b.length:k.a.length,M=Math.floor("a"===y?g.b2j(w):g.a2i(w)),I="a"===y?function(re){return g.evalxy([],re,M)}:function(re){return g.evalxy([],M,re)};u&&(l=Math.max(0,Math.min(C-2,M)),r=M-l,i="a"===y?function(re,U){return g.dxydi([],re,l,U,r)}:function(re,U){return g.dxydj([],l,re,r,U)});var P=_(b[0]),S=_(b[1]),E=P<S?1:-1,R=1e-8*(S-P),D=E>0?Math.floor:Math.ceil,j=E>0?Math.ceil:Math.floor,H=E>0?Math.min:Math.max,Y=E>0?Math.max:Math.min,X=D(P+R),Z=j(S-R),W=[[t=I(P)]];for(n=X;n*E<Z*E;n+=E)d=[],p=Y(P,n),a=(c=H(S,n+E))-p,f=Math.max(0,Math.min(T-2,Math.floor(.5*(p+c)))),h=I(c),u&&(s=i(f,p-f),o=i(f,c-f),d.push([t[0]+s[0]/3*a,t[1]+s[1]/3*a]),d.push([h[0]-o[0]/3*a,h[1]-o[1]/3*a])),d.push(h),W.push(d),t=h;return W}},{"../../lib":515}],702:[function(v,$,Q){"use strict";var m=v("../../plots/font_attributes"),g=v("../../components/color/attributes"),k=v("../../plots/cartesian/layout_attributes"),x=v("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=v("../../plot_api/edit_types").overrideAll,n=v("../../components/drawing/attributes").dash,i=v("../../lib/extend").extendFlat;$.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:m({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:k.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:m({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:x("tick label")},tickformatstops:e(k.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:g.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:i({},n,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:i({},n,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:g.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:m({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],703:[function(v,$,Q){"use strict";var m=v("./attributes"),g=v("../../components/color").addOpacity,k=v("../../registry"),x=v("../../lib"),e=v("../../plots/cartesian/tick_value_defaults"),n=v("../../plots/cartesian/tick_label_defaults"),i=v("../../plots/cartesian/prefix_suffix_defaults"),l=v("../../plots/cartesian/category_order_defaults"),r=v("../../plots/cartesian/set_convert"),d=v("../../plots/cartesian/axis_autotype");$.exports=function(f,t,h){var s=h.letter,o=h.font||{},p=m[s+"axis"];function c(E,R){return x.coerce(f,t,p,E,R)}function a(E,R){return x.coerce2(f,t,p,E,R)}h.name&&(t._name=h.name,t._id=h.name),c("autotypenumbers",h.autotypenumbersDflt);var y=c("type");"-"===y&&(h.data&&function(E,R){if("-"===E.type){var D=E._id.charAt(0);E.type=d(R,E[D+"calendar"],{autotypenumbers:E.autotypenumbers})}}(t,h.data),"-"===t.type?t.type="linear":y=f.type=t.type),c("smoothing"),c("cheatertype"),c("showticklabels"),c("labelprefix",s+" = "),c("labelsuffix"),c("showtickprefix"),c("showticksuffix"),c("separatethousands"),c("tickformat"),c("exponentformat"),c("minexponent"),c("showexponent"),c("categoryorder"),c("tickmode"),c("tickvals"),c("ticktext"),c("tick0"),c("dtick"),"array"===t.tickmode&&(c("arraytick0"),c("arraydtick")),c("labelpadding"),t._hovertitle=s,"date"===y&&k.getComponentMethod("calendars","handleDefaults")(f,t,"calendar",h.calendar),r(t,h.fullLayout),t.c2p=x.identity;var u=c("color",h.dfltColor),_=u===f.color?u:o.color;c("title.text")&&(x.coerceFont(c,"title.font",{family:o.family,size:x.bigFont(o.size),color:_}),c("title.offset")),c("tickangle"),c("autorange",!t.isValidRange(f.range))&&c("rangemode"),c("range"),t.cleanRange(),c("fixedrange"),e(f,t,c,y),i(f,t,c,y,h),n(f,t,c,y,h),l(f,t,c,{data:h.data,dataAttr:s});var b=a("gridcolor",g(u,.3)),w=a("gridwidth"),T=a("griddash"),C=c("showgrid");C||(delete t.gridcolor,delete t.gridwidth,delete t.griddash);var M=a("startlinecolor",u),I=a("startlinewidth",w);c("startline",t.showgrid||!!M||!!I)||(delete t.startlinecolor,delete t.startlinewidth);var P=a("endlinecolor",u),S=a("endlinewidth",w);return c("endline",t.showgrid||!!P||!!S)||(delete t.endlinecolor,delete t.endlinewidth),C?(c("minorgridcount"),c("minorgridwidth",w),c("minorgriddash",T),c("minorgridcolor",g(b,.06)),t.minorgridcount||(delete t.minorgridwidth,delete t.minorgriddash,delete t.minorgridcolor)):(delete t.gridcolor,delete t.gridwidth,delete t.griddash),"none"===t.showticklabels&&(delete t.tickfont,delete t.tickangle,delete t.showexponent,delete t.exponentformat,delete t.minexponent,delete t.tickformat,delete t.showticksuffix,delete t.showtickprefix),t.showticksuffix||delete t.ticksuffix,t.showtickprefix||delete t.tickprefix,c("tickmode"),t}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../plots/cartesian/category_order_defaults":571,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/set_convert":585,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_value_defaults":589,"../../registry":647,"./attributes":700}],704:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes"),g=v("../../lib").isArray1D,k=v("./cheater_basis"),x=v("./array_minmax"),e=v("./calc_gridlines"),n=v("./calc_labels"),i=v("./calc_clippath"),l=v("../heatmap/clean_2d_array"),r=v("./smooth_fill_2d_array"),d=v("../heatmap/convert_column_xyz"),f=v("./set_convert");$.exports=function(t,h){var s=m.getFromId(t,h.xaxis),o=m.getFromId(t,h.yaxis),p=h.aaxis,c=h.baxis,a=h.x,y=h.y,u=[];a&&g(a)&&u.push("x"),y&&g(y)&&u.push("y"),u.length&&d(h,p,c,"a","b",u);var _=h._a=h._a||h.a,b=h._b=h._b||h.b;a=h._x||h.x,y=h._y||h.y;var w={};h._cheater&&(a=k("index"===p.cheatertype?_.length:_,"index"===c.cheatertype?b.length:b,h.cheaterslope)),h._x=a=l(a),h._y=y=l(y),r(a,_,b),r(y,_,b),f(h),h.setScale();var M=x(a),I=x(y),P=.5*(M[1]-M[0]),S=.5*(M[1]+M[0]),E=.5*(I[1]-I[0]),R=.5*(I[1]+I[0]);return I=[R-1.3*E,R+1.3*E],h._extremes[s._id]=m.findExtremes(s,M=[S-1.3*P,S+1.3*P],{padded:!0}),h._extremes[o._id]=m.findExtremes(o,I,{padded:!0}),e(h,"a","b"),e(h,"b","a"),n(h,p),n(h,c),w.clipsegments=i(h._xctrl,h._yctrl,p,c),w.x=a,w.y=y,w.a=_,w.b=b,[w]}},{"../../lib":515,"../../plots/cartesian/axes":566,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"./array_minmax":699,"./calc_clippath":705,"./calc_gridlines":706,"./calc_labels":707,"./cheater_basis":709,"./set_convert":722,"./smooth_fill_2d_array":723}],705:[function(v,$,Q){"use strict";$.exports=function(m,g,k,x){var e,n,i,l=[],r=!!k.smoothing,d=!!x.smoothing,f=m[0].length-1,t=m.length-1;for(e=0,n=[],i=[];e<=f;e++)n[e]=m[0][e],i[e]=g[0][e];for(l.push({x:n,y:i,bicubic:r}),e=0,n=[],i=[];e<=t;e++)n[e]=m[e][f],i[e]=g[e][f];for(l.push({x:n,y:i,bicubic:d}),e=f,n=[],i=[];e>=0;e--)n[f-e]=m[t][e],i[f-e]=g[t][e];for(l.push({x:n,y:i,bicubic:r}),e=t,n=[],i=[];e>=0;e--)n[t-e]=m[e][0],i[t-e]=g[e][0];return l.push({x:n,y:i,bicubic:d}),l}},{}],706:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes"),g=v("../../lib/extend").extendFlat;$.exports=function(k,x,e){var n,i,l,r,d,f,t,h,s,o,p,c,a,y,u=k["_"+x],_=k[x+"axis"],b=_._gridlines=[],w=_._minorgridlines=[],T=_._boundarylines=[],C=k["_"+e],M=k[e+"axis"];"array"===_.tickmode&&(_.tickvals=u.slice());var I=k._xctrl,P=k._yctrl,S=I[0].length,E=I.length,R=k._a.length,D=k._b.length;m.prepTicks(_),"array"===_.tickmode&&delete _.tickvals;var j=_.smoothing?3:1;function H(X){var Z,W,re,U,B,V,ee,N,K,J,te,ae,le=[],se=[],ve={};if("b"===x)for(W=k.b2j(X),re=Math.floor(Math.max(0,Math.min(D-2,W))),U=W-re,ve.length=D,ve.crossLength=R,ve.xy=function(ue){return k.evalxy([],ue,W)},ve.dxy=function(ue,ye){return k.dxydi([],ue,re,ye,U)},Z=0;Z<R;Z++)V=Math.min(R-2,Z),ee=Z-V,N=k.evalxy([],Z,W),M.smoothing&&Z>0&&(K=k.dxydi([],Z-1,re,0,U),le.push(B[0]+K[0]/3),se.push(B[1]+K[1]/3),J=k.dxydi([],Z-1,re,1,U),le.push(N[0]-J[0]/3),se.push(N[1]-J[1]/3)),le.push(N[0]),se.push(N[1]),B=N;else for(Z=k.a2i(X),V=Math.floor(Math.max(0,Math.min(R-2,Z))),ee=Z-V,ve.length=R,ve.crossLength=D,ve.xy=function(ue){return k.evalxy([],Z,ue)},ve.dxy=function(ue,ye){return k.dxydj([],V,ue,ee,ye)},W=0;W<D;W++)re=Math.min(D-2,W),U=W-re,N=k.evalxy([],Z,W),M.smoothing&&W>0&&(te=k.dxydj([],V,W-1,ee,0),le.push(B[0]+te[0]/3),se.push(B[1]+te[1]/3),ae=k.dxydj([],V,W-1,ee,1),le.push(N[0]-ae[0]/3),se.push(N[1]-ae[1]/3)),le.push(N[0]),se.push(N[1]),B=N;return ve.axisLetter=x,ve.axis=_,ve.crossAxis=M,ve.value=X,ve.constvar=e,ve.index=h,ve.x=le,ve.y=se,ve.smoothing=M.smoothing,ve}function Y(X){var Z,W,re,U,B,V=[],ee=[],N={};if(N.length=u.length,N.crossLength=C.length,"b"===x)for(re=Math.max(0,Math.min(D-2,X)),B=Math.min(1,Math.max(0,X-re)),N.xy=function(K){return k.evalxy([],K,X)},N.dxy=function(K,J){return k.dxydi([],K,re,J,B)},Z=0;Z<S;Z++)V[Z]=I[X*j][Z],ee[Z]=P[X*j][Z];else for(W=Math.max(0,Math.min(R-2,X)),U=Math.min(1,Math.max(0,X-W)),N.xy=function(K){return k.evalxy([],X,K)},N.dxy=function(K,J){return k.dxydj([],W,K,U,J)},Z=0;Z<E;Z++)V[Z]=I[Z][X*j],ee[Z]=P[Z][X*j];return N.axisLetter=x,N.axis=_,N.crossAxis=M,N.value=u[X],N.constvar=e,N.index=X,N.x=V,N.y=ee,N.smoothing=M.smoothing,N}if("array"===_.tickmode){for(r=5e-15,f=(d=[Math.floor((u.length-1-_.arraytick0)/_.arraydtick*(1+r)),Math.ceil(-_.arraytick0/_.arraydtick/(1+r))].sort(function(X,Z){return X-Z}))[0]-1,t=d[1]+1,h=f;h<t;h++)(i=_.arraytick0+_.arraydtick*h)<0||i>u.length-1||b.push(g(Y(i),{color:_.gridcolor,width:_.gridwidth,dash:_.griddash}));for(h=f;h<t;h++)if(l=_.arraytick0+_.arraydtick*h,p=Math.min(l+_.arraydtick,u.length-1),!(l<0||l>u.length-1||p<0||p>u.length-1))for(c=u[l],a=u[p],n=0;n<_.minorgridcount;n++)(y=p-l)<=0||(o=c+(a-c)*(n+1)/(_.minorgridcount+1)*(_.arraydtick/y))<u[0]||o>u[u.length-1]||w.push(g(H(o),{color:_.minorgridcolor,width:_.minorgridwidth,dash:_.minorgriddash}));_.startline&&T.push(g(Y(0),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&T.push(g(Y(u.length-1),{color:_.endlinecolor,width:_.endlinewidth}))}else{for(r=5e-15,f=(d=[Math.floor((u[u.length-1]-_.tick0)/_.dtick*(1+r)),Math.ceil((u[0]-_.tick0)/_.dtick/(1+r))].sort(function(X,Z){return X-Z}))[0],t=d[1],h=f;h<=t;h++)b.push(g(H(s=_.tick0+_.dtick*h),{color:_.gridcolor,width:_.gridwidth,dash:_.griddash}));for(h=f-1;h<t+1;h++)for(s=_.tick0+_.dtick*h,n=0;n<_.minorgridcount;n++)(o=s+_.dtick*(n+1)/(_.minorgridcount+1))<u[0]||o>u[u.length-1]||w.push(g(H(o),{color:_.minorgridcolor,width:_.minorgridwidth,dash:_.minorgriddash}));_.startline&&T.push(g(H(u[0]),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&T.push(g(H(u[u.length-1]),{color:_.endlinecolor,width:_.endlinewidth}))}}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],707:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes"),g=v("../../lib/extend").extendFlat;$.exports=function(k,x){var e,n,i,l=x._labels=[],r=x._gridlines;for(e=0;e<r.length;e++)i=r[e],-1!==["start","both"].indexOf(x.showticklabels)&&(n=m.tickText(x,i.value),g(n,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:i.xy(0),dxy:i.dxy(0,0),axis:i.axis,length:i.crossAxis.length,font:i.axis.tickfont,isFirst:0===e,isLast:e===r.length-1}),l.push(n)),-1!==["end","both"].indexOf(x.showticklabels)&&(n=m.tickText(x,i.value),g(n,{endAnchor:!1,xy:i.xy(i.crossLength-1),dxy:i.dxy(i.crossLength-2,1),axis:i.axis,length:i.crossAxis.length,font:i.axis.tickfont,isFirst:0===e,isLast:e===r.length-1}),l.push(n))}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],708:[function(v,$,Q){"use strict";$.exports=function(m,g,k,x){var e=m[0]-g[0],n=m[1]-g[1],i=k[0]-g[0],l=k[1]-g[1],r=Math.pow(e*e+n*n,.25),d=Math.pow(i*i+l*l,.25),f=(d*d*e-r*r*i)*x,t=(d*d*n-r*r*l)*x,h=d*(r+d)*3,s=r*(r+d)*3;return[[g[0]+(h&&f/h),g[1]+(h&&t/h)],[g[0]-(s&&f/s),g[1]-(s&&t/s)]]}},{}],709:[function(v,$,Q){"use strict";var m=v("../../lib").isArrayOrTypedArray;$.exports=function(g,k,x){var e,n,i,l,r,d,f=[],t=m(g)?g.length:g,h=m(k)?k.length:k,s=m(g)?g:null,o=m(k)?k:null;s&&(i=(s.length-1)/(s[s.length-1]-s[0])/(t-1)),o&&(l=(o.length-1)/(o[o.length-1]-o[0])/(h-1));var p=1/0,c=-1/0;for(n=0;n<h;n++)for(f[n]=[],r=o?(o[n]-o[0])*l:n/(h-1),e=0;e<t;e++)d=(s?(s[e]-s[0])*i:e/(t-1))-r*x,p=Math.min(d,p),c=Math.max(d,c),f[n][e]=d;var a=1/(c-p),y=-p*a;for(n=0;n<h;n++)for(e=0;e<t;e++)f[n][e]=a*f[n][e]+y;return f}},{"../../lib":515}],710:[function(v,$,Q){"use strict";var m=v("./catmull_rom"),g=v("../../lib").ensureArray;function k(x,e,n){return[(2*(-.5*n[0]+1.5*e[0])+x[0])/3,(2*(-.5*n[1]+1.5*e[1])+x[1])/3]}$.exports=function(x,e,n,i,l,r){var d,f,t,h,s,o,p,c,a,y,u=n[0].length,_=n.length,b=l?3*u-2:u,w=r?3*_-2:_;for(x=g(x,w),e=g(e,w),t=0;t<w;t++)x[t]=g(x[t],b),e[t]=g(e[t],b);for(f=0,h=0;f<_;f++,h+=r?3:1)for(s=x[h],o=e[h],p=n[f],c=i[f],d=0,t=0;d<u;d++,t+=l?3:1)s[t]=p[d],o[t]=c[d];if(l)for(f=0,h=0;f<_;f++,h+=r?3:1){for(d=1,t=3;d<u-1;d++,t+=3)a=m([n[f][d-1],i[f][d-1]],[n[f][d],i[f][d]],[n[f][d+1],i[f][d+1]],l),x[h][t-1]=a[0][0],e[h][t-1]=a[0][1],x[h][t+1]=a[1][0],e[h][t+1]=a[1][1];y=k([x[h][0],e[h][0]],[x[h][2],e[h][2]],[x[h][3],e[h][3]]),x[h][1]=y[0],e[h][1]=y[1],y=k([x[h][b-1],e[h][b-1]],[x[h][b-3],e[h][b-3]],[x[h][b-4],e[h][b-4]]),x[h][b-2]=y[0],e[h][b-2]=y[1]}if(r)for(t=0;t<b;t++){for(h=3;h<w-3;h+=3)a=m([x[h-3][t],e[h-3][t]],[x[h][t],e[h][t]],[x[h+3][t],e[h+3][t]],r),x[h-1][t]=a[0][0],e[h-1][t]=a[0][1],x[h+1][t]=a[1][0],e[h+1][t]=a[1][1];y=k([x[0][t],e[0][t]],[x[2][t],e[2][t]],[x[3][t],e[3][t]]),x[1][t]=y[0],e[1][t]=y[1],y=k([x[w-1][t],e[w-1][t]],[x[w-3][t],e[w-3][t]],[x[w-4][t],e[w-4][t]]),x[w-2][t]=y[0],e[w-2][t]=y[1]}if(l&&r)for(h=1;h<w;h+=(h+1)%3==0?2:1){for(t=3;t<b-3;t+=3)a=m([x[h][t-3],e[h][t-3]],[x[h][t],e[h][t]],[x[h][t+3],e[h][t+3]],l),x[h][t-1]=.5*(x[h][t-1]+a[0][0]),e[h][t-1]=.5*(e[h][t-1]+a[0][1]),x[h][t+1]=.5*(x[h][t+1]+a[1][0]),e[h][t+1]=.5*(e[h][t+1]+a[1][1]);y=k([x[h][0],e[h][0]],[x[h][2],e[h][2]],[x[h][3],e[h][3]]),x[h][1]=.5*(x[h][1]+y[0]),e[h][1]=.5*(e[h][1]+y[1]),y=k([x[h][b-1],e[h][b-1]],[x[h][b-3],e[h][b-3]],[x[h][b-4],e[h][b-4]]),x[h][b-2]=.5*(x[h][b-2]+y[0]),e[h][b-2]=.5*(e[h][b-2]+y[1])}return[x,e]}},{"../../lib":515,"./catmull_rom":708}],711:[function(v,$,Q){"use strict";$.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],712:[function(v,$,Q){"use strict";$.exports=function(m,g,k){return g&&k?function(x,e,n,i,l){var r,h,s;x||(x=[]),e*=3,n*=3;var o=i*i,p=1-i,c=p*p,a=p*i*2,y=-3*c,u=3*(c-a),_=3*(a-o),b=3*o,w=l*l,T=w*l,C=1-l,M=C*C,I=M*C;for(s=0;s<m.length;s++)r=y*(h=m[s])[n][e]+u*h[n][e+1]+_*h[n][e+2]+b*h[n][e+3],x[s]=I*r+3*(M*l*(y*h[n+1][e]+u*h[n+1][e+1]+_*h[n+1][e+2]+b*h[n+1][e+3])+C*w*(y*h[n+2][e]+u*h[n+2][e+1]+_*h[n+2][e+2]+b*h[n+2][e+3]))+T*(y*h[n+3][e]+u*h[n+3][e+1]+_*h[n+3][e+2]+b*h[n+3][e+3]);return x}:g?function(x,e,n,i,l){var r,f,t;x||(x=[]),e*=3;var h=i*i,s=1-i,o=s*s,p=s*i*2,c=-3*o,a=3*(o-p),y=3*(p-h),u=3*h,_=1-l;for(f=0;f<m.length;f++)r=c*(t=m[f])[n][e]+a*t[n][e+1]+y*t[n][e+2]+u*t[n][e+3],x[f]=_*r+l*(c*t[n+1][e]+a*t[n+1][e+1]+y*t[n+1][e+2]+u*t[n+1][e+3]);return x}:k?function(x,e,n,i,l){var r,h,s;x||(x=[]),n*=3;var o=l*l,p=o*l,c=1-l,a=c*c,y=a*c;for(h=0;h<m.length;h++)r=(s=m[h])[n][e+1]-s[n][e],x[h]=y*r+3*(a*l*(s[n+1][e+1]-s[n+1][e])+c*o*(s[n+2][e+1]-s[n+2][e]))+p*(s[n+3][e+1]-s[n+3][e]);return x}:function(x,e,n,i,l){var r,f,t;x||(x=[]);var h=1-l;for(f=0;f<m.length;f++)r=(t=m[f])[n][e+1]-t[n][e],x[f]=h*r+l*(t[n+1][e+1]-t[n+1][e]);return x}}},{}],713:[function(v,$,Q){"use strict";$.exports=function(m,g,k){return g&&k?function(x,e,n,i,l){var r,h,s;x||(x=[]),e*=3,n*=3;var o=i*i,p=o*i,c=1-i,a=c*c,y=a*c,u=l*l,_=1-l,b=_*_,w=_*l*2,T=-3*b,C=3*(b-w),M=3*(w-u),I=3*u;for(s=0;s<m.length;s++)r=T*(h=m[s])[n][e]+C*h[n+1][e]+M*h[n+2][e]+I*h[n+3][e],x[s]=y*r+3*(a*i*(T*h[n][e+1]+C*h[n+1][e+1]+M*h[n+2][e+1]+I*h[n+3][e+1])+c*o*(T*h[n][e+2]+C*h[n+1][e+2]+M*h[n+2][e+2]+I*h[n+3][e+2]))+p*(T*h[n][e+3]+C*h[n+1][e+3]+M*h[n+2][e+3]+I*h[n+3][e+3]);return x}:g?function(x,e,n,i,l){var r,h,s;x||(x=[]),e*=3;var o=l*l,p=o*l,c=1-l,a=c*c,y=a*c;for(h=0;h<m.length;h++)r=(s=m[h])[n+1][e]-s[n][e],x[h]=y*r+3*(a*l*(s[n+1][e+1]-s[n][e+1])+c*o*(s[n+1][e+2]-s[n][e+2]))+p*(s[n+1][e+3]-s[n][e+3]);return x}:k?function(x,e,n,i,l){var r,f,t;x||(x=[]),n*=3;var h=1-i,s=l*l,o=1-l,p=o*o,c=o*l*2,a=-3*p,y=3*(p-c),u=3*(c-s),_=3*s;for(f=0;f<m.length;f++)r=a*(t=m[f])[n][e]+y*t[n+1][e]+u*t[n+2][e]+_*t[n+3][e],x[f]=h*r+i*(a*t[n][e+1]+y*t[n+1][e+1]+u*t[n+2][e+1]+_*t[n+3][e+1]);return x}:function(x,e,n,i,l){var r,f,t;x||(x=[]);var h=1-i;for(f=0;f<m.length;f++)r=(t=m[f])[n+1][e]-t[n][e],x[f]=h*r+i*(t[n+1][e+1]-t[n][e+1]);return x}}},{}],714:[function(v,$,Q){"use strict";$.exports=function(m,g,k,x,e){var n=g-2,i=k-2;return x&&e?function(l,r,d){var f,o,p;l||(l=[]);var c=Math.max(0,Math.min(Math.floor(r),n)),a=Math.max(0,Math.min(Math.floor(d),i)),y=Math.max(0,Math.min(1,r-c)),u=Math.max(0,Math.min(1,d-a));c*=3,a*=3;var _=y*y,b=_*y,w=1-y,T=w*w,C=T*w,M=u*u,I=M*u,P=1-u,S=P*P,E=S*P;for(p=0;p<m.length;p++)f=C*(o=m[p])[a][c]+3*(T*y*o[a][c+1]+w*_*o[a][c+2])+b*o[a][c+3],l[p]=E*f+3*(S*u*(C*o[a+1][c]+3*(T*y*o[a+1][c+1]+w*_*o[a+1][c+2])+b*o[a+1][c+3])+P*M*(C*o[a+2][c]+3*(T*y*o[a+2][c+1]+w*_*o[a+2][c+2])+b*o[a+2][c+3]))+I*(C*o[a+3][c]+3*(T*y*o[a+3][c+1]+w*_*o[a+3][c+2])+b*o[a+3][c+3]);return l}:x?function(l,r,d){l||(l=[]);var f,o,p,c=Math.max(0,Math.min(Math.floor(r),n)),a=Math.max(0,Math.min(Math.floor(d),i)),y=Math.max(0,Math.min(1,r-c)),u=Math.max(0,Math.min(1,d-a));c*=3;var _=y*y,b=_*y,w=1-y,T=w*w,C=T*w,M=1-u;for(o=0;o<m.length;o++)f=M*(p=m[o])[a][c]+u*p[a+1][c],l[o]=C*f+3*(T*y*(M*p[a][c+1]+u*p[a+1][c+1])+w*_*(M*p[a][c+2]+u*p[a+1][c+1]))+b*(M*p[a][c+3]+u*p[a+1][c+1]);return l}:e?function(l,r,d){l||(l=[]);var f,o,p,c=Math.max(0,Math.min(Math.floor(r),n)),a=Math.max(0,Math.min(Math.floor(d),i)),y=Math.max(0,Math.min(1,r-c)),u=Math.max(0,Math.min(1,d-a));a*=3;var _=u*u,b=_*u,w=1-u,T=w*w,C=T*w,M=1-y;for(o=0;o<m.length;o++)f=M*(p=m[o])[a][c]+y*p[a][c+1],l[o]=C*f+3*(T*u*(M*p[a+1][c]+y*p[a+1][c+1])+w*_*(M*p[a+2][c]+y*p[a+2][c+1]))+b*(M*p[a+3][c]+y*p[a+3][c+1]);return l}:function(l,r,d){l||(l=[]);var f,h,s,o=Math.max(0,Math.min(Math.floor(r),n)),p=Math.max(0,Math.min(Math.floor(d),i)),c=Math.max(0,Math.min(1,r-o)),a=Math.max(0,Math.min(1,d-p)),y=1-a,u=1-c;for(h=0;h<m.length;h++)f=u*(s=m[h])[p][o]+c*s[p][o+1],l[h]=y*f+a*(u*s[p+1][o]+c*s[p+1][o+1]);return l}}},{}],715:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./xy_defaults"),k=v("./ab_defaults"),x=v("./attributes"),e=v("../../components/color/attributes");$.exports=function(n,i,l,r){function d(t,h){return m.coerce(n,i,x,t,h)}i._clipPathId="clip"+i.uid+"carpet";var f=d("color",e.defaultLine);m.coerceFont(d,"font"),d("carpet"),k(n,i,r,d,f),i.a&&i.b?(i.a.length<3&&(i.aaxis.smoothing=0),i.b.length<3&&(i.baxis.smoothing=0),g(n,i,d)||(i.visible=!1),i._cheater&&d("cheaterslope")):i.visible=!1}},{"../../components/color/attributes":366,"../../lib":515,"./ab_defaults":698,"./attributes":700,"./xy_defaults":724}],716:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),plot:v("./plot"),calc:v("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"./attributes":700,"./calc":704,"./defaults":715,"./plot":721}],717:[function(v,$,Q){"use strict";$.exports=function(m,g){for(var k,x=m._fullData.length,e=0;e<x;e++){var n=m._fullData[e];if(n.index!==g.index&&"carpet"===n.type&&(k||(k=n),n.carpet===g.carpet))return n}return k}},{}],718:[function(v,$,Q){"use strict";$.exports=function(m,g,k){if(0===m.length)return"";var x,e=[],n=k?3:1;for(x=0;x<m.length;x+=n)e.push(m[x]+","+g[x]),k&&x<m.length-n&&(e.push("C"),e.push([m[x+1]+","+g[x+1],m[x+2]+","+g[x+2]+" "].join(" ")));return e.join(k?"":"L")}},{}],719:[function(v,$,Q){"use strict";var m=v("../../lib").isArrayOrTypedArray;$.exports=function(g,k,x){var e;for(m(g)?g.length>k.length&&(g=g.slice(0,k.length)):g=[],e=0;e<k.length;e++)g[e]=x(k[e]);return g}},{"../../lib":515}],720:[function(v,$,Q){"use strict";$.exports=function(m,g,k,x,e,n){var i=e[0]*m.dpdx(g),l=e[1]*m.dpdy(k),r=1,d=1;if(n){var f=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t=Math.sqrt(n[0]*n[0]+n[1]*n[1]);d=Math.max(0,(e[0]*n[0]+e[1]*n[1])/f/t)}var s=180*Math.atan2(l,i)/Math.PI;return s<-90?(s+=180,r=-r):s>90&&(s-=180,r=-r),{angle:s,flip:r,p:m.c2p(x,g,k),offsetMultplier:d}}},{}],721:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/drawing"),k=v("./map_1d_array"),x=v("./makepath"),e=v("./orient_text"),n=v("../../lib/svg_text_utils"),i=v("../../lib"),l=i.strRotate,r=i.strTranslate,d=v("../../constants/alignment");function f(p,c,a,y,u,_){var b="const-"+u+"-lines",w=a.selectAll("."+b).data(_);w.enter().append("path").classed(b,!0).style("vector-effect","non-scaling-stroke"),w.each(function(T){var C=T,I=C.y,P=k([],C.x,p.c2p),S=k([],I,c.c2p),E="M"+x(P,S,C.smoothing);m.select(this).attr("d",E).style("stroke-width",C.width).style("stroke",C.color).style("stroke-dasharray",g.dashStyle(C.dash,C.width)).style("fill","none")}),w.exit().remove()}function t(p,c,a,y,u,_,b,w){var T=_.selectAll("text."+w).data(b);T.enter().append("text").classed(w,!0);var C=0,M={};return T.each(function(I,P){var S;if("auto"===I.axis.tickangle)S=e(y,c,a,I.xy,I.dxy);else{var E=(I.axis.tickangle+180)*Math.PI/180;S=e(y,c,a,I.xy,[Math.cos(E),Math.sin(E)])}P||(M={angle:S.angle,flip:S.flip});var R=(I.endAnchor?-1:1)*S.flip,D=m.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(g.font,I.font).text(I.text).call(n.convertToTspans,p),j=g.bBox(this);D.attr("transform",r(S.p[0],S.p[1])+l(S.angle)+r(I.axis.labelpadding*R,.3*j.height)),C=Math.max(C,j.width+I.axis.labelpadding)}),T.exit().remove(),M.maxExtent=C,M}$.exports=function(p,c,a,y){var u=c.xaxis,_=c.yaxis,b=p._fullLayout._clips;i.makeTraceGroups(y,a,"trace").each(function(w){var T=m.select(this),C=w[0],M=C.trace,I=M.aaxis,P=M.baxis,S=i.ensureSingle(T,"g","minorlayer"),E=i.ensureSingle(T,"g","majorlayer"),R=i.ensureSingle(T,"g","boundarylayer"),D=i.ensureSingle(T,"g","labellayer");T.style("opacity",M.opacity),f(u,_,E,0,"a",I._gridlines),f(u,_,E,0,"b",P._gridlines),f(u,_,S,0,"a",I._minorgridlines),f(u,_,S,0,"b",P._minorgridlines),f(u,_,R,0,"a-boundary",I._boundarylines),f(u,_,R,0,"b-boundary",P._boundarylines);var Y,X,Z,re,U,B,V,ee,N,K,J,te,ae,le,se,j=t(p,u,_,M,0,D,I._labels,"a-label"),H=t(p,u,_,M,0,D,P._labels,"b-label");Y=p,X=D,Z=M,re=u,U=_,B=j,V=H,te=i.aggNums(Math.min,null,Z.a),ae=i.aggNums(Math.max,null,Z.a),le=i.aggNums(Math.min,null,Z.b),se=i.aggNums(Math.max,null,Z.b),K=Z.ab2xy(ee=.5*(te+ae),N=le,!0),J=Z.dxyda_rough(ee,N),void 0===B.angle&&i.extendFlat(B,e(Z,re,U,K,Z.dxydb_rough(ee,N))),o(Y,X,Z,0,K,J,Z.aaxis,re,U,B,"a-title"),K=Z.ab2xy(ee=te,N=.5*(le+se),!0),J=Z.dxydb_rough(ee,N),void 0===V.angle&&i.extendFlat(V,e(Z,re,U,K,Z.dxyda_rough(ee,N))),o(Y,X,Z,0,K,J,Z.baxis,re,U,V,"b-title"),function(Y,X,Z,W,re){var U,B,V,ee,N=Z.select("#"+Y._clipPathId);N.size()||(N=Z.append("clipPath").classed("carpetclip",!0));var K=i.ensureSingle(N,"path","carpetboundary"),J=X.clipsegments,te=[];for(ee=0;ee<J.length;ee++)B=k([],(U=J[ee]).x,W.c2p),V=k([],U.y,re.c2p),te.push(x(B,V,U.bicubic));var ae="M"+te.join("L")+"Z";N.attr("id",Y._clipPathId),K.attr("d",ae)}(M,C,b,u,_)})};var h=d.LINE_SPACING,s=(1-d.MID_SHIFT)/h+1;function o(p,c,a,y,u,_,b,w,T,C,M){var I=[];b.title.text&&I.push(b.title.text);var P=c.selectAll("text."+M).data(I),S=C.maxExtent;P.enter().append("text").classed(M,!0),P.each(function(){var E=e(a,w,T,u,_);-1===["start","both"].indexOf(b.showticklabels)&&(S=0);var R=b.title.font.size;S+=R+b.title.offset;var D=(C.angle+(C.flip<0?180:0)-E.angle+450)%360,j=D>90&&D<270,H=m.select(this);H.text(b.title.text).call(n.convertToTspans,p),j&&(S=(-n.lineCount(H)+s)*h*R-S),H.attr("transform",r(E.p[0],E.p[1])+l(E.angle)+r(0,S)).attr("text-anchor","middle").call(g.font,b.title.font)}),P.exit().remove()}},{"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"./makepath":718,"./map_1d_array":719,"./orient_text":720,"@plotly/d3":58}],722:[function(v,$,Q){"use strict";var m=v("./constants"),g=v("../../lib/search").findBin,k=v("./compute_control_points"),x=v("./create_spline_evaluator"),e=v("./create_i_derivative_evaluator"),n=v("./create_j_derivative_evaluator");$.exports=function(i){var l=i._a,r=i._b,d=l.length,f=r.length,t=i.aaxis,h=i.baxis,s=l[0],o=l[d-1],p=r[0],c=r[f-1],a=l[l.length-1]-l[0],y=r[r.length-1]-r[0],u=a*m.RELATIVE_CULL_TOLERANCE,_=y*m.RELATIVE_CULL_TOLERANCE;s-=u,o+=u,p-=_,c+=_,i.isVisible=function(b,w){return b>s&&b<o&&w>p&&w<c},i.isOccluded=function(b,w){return b<s||b>o||w<p||w>c},i.setScale=function(){var T=k(i._xctrl,i._yctrl,i._x,i._y,t.smoothing,h.smoothing);i._xctrl=T[0],i._yctrl=T[1],i.evalxy=x([i._xctrl,i._yctrl],d,f,t.smoothing,h.smoothing),i.dxydi=e([i._xctrl,i._yctrl],t.smoothing,h.smoothing),i.dxydj=n([i._xctrl,i._yctrl],t.smoothing,h.smoothing)},i.i2a=function(b){var w=Math.max(0,Math.floor(b[0]),d-2),T=b[0]-w;return(1-T)*l[w]+T*l[w+1]},i.j2b=function(b){var w=Math.max(0,Math.floor(b[1]),d-2),T=b[1]-w;return(1-T)*r[w]+T*r[w+1]},i.ij2ab=function(b){return[i.i2a(b[0]),i.j2b(b[1])]},i.a2i=function(b){var w=Math.max(0,Math.min(g(b,l),d-2)),T=l[w];return Math.max(0,Math.min(d-1,w+(b-T)/(l[w+1]-T)))},i.b2j=function(b){var w=Math.max(0,Math.min(g(b,r),f-2)),T=r[w];return Math.max(0,Math.min(f-1,w+(b-T)/(r[w+1]-T)))},i.ab2ij=function(b){return[i.a2i(b[0]),i.b2j(b[1])]},i.i2c=function(b,w){return i.evalxy([],b,w)},i.ab2xy=function(b,w,T){if(!T&&(b<l[0]||b>l[d-1]|w<r[0]||w>r[f-1]))return[!1,!1];var C=i.a2i(b),M=i.b2j(w),I=i.evalxy([],C,M);if(T){var P,S,E,R,D=0,j=0,H=[];b<l[0]?(P=0,S=0,D=(b-l[0])/(l[1]-l[0])):b>l[d-1]?(P=d-2,S=1,D=(b-l[d-1])/(l[d-1]-l[d-2])):S=C-(P=Math.max(0,Math.min(d-2,Math.floor(C)))),w<r[0]?(E=0,R=0,j=(w-r[0])/(r[1]-r[0])):w>r[f-1]?(E=f-2,R=1,j=(w-r[f-1])/(r[f-1]-r[f-2])):R=M-(E=Math.max(0,Math.min(f-2,Math.floor(M)))),D&&(i.dxydi(H,P,E,S,R),I[0]+=H[0]*D,I[1]+=H[1]*D),j&&(i.dxydj(H,P,E,S,R),I[0]+=H[0]*j,I[1]+=H[1]*j)}return I},i.c2p=function(b,w,T){return[w.c2p(b[0]),T.c2p(b[1])]},i.p2x=function(b,w,T){return[w.p2c(b[0]),T.p2c(b[1])]},i.dadi=function(b){var w=Math.max(0,Math.min(l.length-2,b));return l[w+1]-l[w]},i.dbdj=function(b){var w=Math.max(0,Math.min(r.length-2,b));return r[w+1]-r[w]},i.dxyda=function(b,w,T,C){var M=i.dxydi(null,b,w,T,C),I=i.dadi(b,T);return[M[0]/I,M[1]/I]},i.dxydb=function(b,w,T,C){var M=i.dxydj(null,b,w,T,C),I=i.dbdj(w,C);return[M[0]/I,M[1]/I]},i.dxyda_rough=function(b,w,T){var C=a*(T||.1),M=i.ab2xy(b+C,w,!0),I=i.ab2xy(b-C,w,!0);return[.5*(M[0]-I[0])/C,.5*(M[1]-I[1])/C]},i.dxydb_rough=function(b,w,T){var C=y*(T||.1),M=i.ab2xy(b,w+C,!0),I=i.ab2xy(b,w-C,!0);return[.5*(M[0]-I[0])/C,.5*(M[1]-I[1])/C]},i.dpdx=function(b){return b._m},i.dpdy=function(b){return b._m}}},{"../../lib/search":535,"./compute_control_points":710,"./constants":711,"./create_i_derivative_evaluator":712,"./create_j_derivative_evaluator":713,"./create_spline_evaluator":714}],723:[function(v,$,Q){"use strict";var m=v("../../lib");$.exports=function(g,k,x){var e,n,i,l=[],r=[],d=g[0].length,f=g.length;var h,s,o,p,c,a,y,u,_,b,X,Z,W,re,U,T=0;for(e=0;e<d;e++)for(n=0;n<f;n++)void 0===g[n][e]&&(l.push(e),r.push(n),g[n][e]=(Z=n,W=void 0,re=void 0,U=void 0,re=0,U=0,(X=e)>0&&void 0!==(W=g[Z][X-1])&&(U++,re+=W),X<d-1&&void 0!==(W=g[Z][X+1])&&(U++,re+=W),Z>0&&void 0!==(W=g[Z-1][X])&&(U++,re+=W),Z<f-1&&void 0!==(W=g[Z+1][X])&&(U++,re+=W),re/Math.max(1,U))),T=Math.max(T,Math.abs(g[n][e]));if(!l.length)return g;var C=0,M=0,I=l.length;do{for(C=0,i=0;i<I;i++){n=r[i];var S,E,R,D,j,H=0,Y=0;0===(e=l[i])?(E=k[D=Math.min(d-1,2)],Y+=(S=g[n][1])+(S-g[n][D])*(k[0]-(R=k[1]))/(R-E),H++):e===d-1&&(E=k[D=Math.max(0,d-3)],Y+=(S=g[n][d-2])+(S-g[n][D])*(k[d-1]-(R=k[d-2]))/(R-E),H++),(0===e||e===d-1)&&n>0&&n<f-1&&(Y+=((s=x[n]-x[n-1])*g[n+1][e]+(h=x[n+1]-x[n])*g[n-1][e])/(s+h),H++),0===n?(E=x[j=Math.min(f-1,2)],Y+=(S=g[1][e])+(S-g[j][e])*(x[0]-(R=x[1]))/(R-E),H++):n===f-1&&(E=x[j=Math.max(0,f-3)],Y+=(S=g[f-2][e])+(S-g[j][e])*(x[f-1]-(R=x[f-2]))/(R-E),H++),(0===n||n===f-1)&&e>0&&e<d-1&&(Y+=((s=k[e]-k[e-1])*g[n][e+1]+(h=k[e+1]-k[e])*g[n][e-1])/(s+h),H++),H?Y/=H:(u=(c=x[n+1]-x[n])*(a=x[n]-x[n-1])*(c+a),Y=((y=(o=k[e+1]-k[e])*(p=k[e]-k[e-1])*(o+p))*(a*g[n+1][e]+c*g[n-1][e])+u*(p*g[n][e+1]+o*g[n][e-1]))/(u*(p+o)+y*(a+c))),C+=(b=(_=Y-g[n][e])/T)*b,g[n][e]+=_*(1+(H?0:.85))}C=Math.sqrt(C)}while(M++<100&&C>1e-5);return m.log("Smoother converged to",C,"after",M,"iterations"),g}},{"../../lib":515}],724:[function(v,$,Q){"use strict";var m=v("../../lib").isArray1D;$.exports=function(g,k,x){var e=x("x"),n=e&&e.length,i=x("y"),l=i&&i.length;if(!n&&!l)return!1;if(k._cheater=!e,n&&!m(e)||l&&!m(i))k._length=null;else{var r=n?e.length:1/0;l&&(r=Math.min(r,i.length)),k.a&&k.a.length&&(r=Math.min(r,k.a.length)),k.b&&k.b.length&&(r=Math.min(r,k.b.length)),k._length=r}return!0}},{"../../lib":515}],725:[function(v,$,Q){"use strict";var m=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../scattergeo/attributes"),k=v("../../components/colorscale/attributes"),x=v("../../plots/attributes"),e=v("../../components/color/attributes").defaultLine,n=v("../../lib/extend").extendFlat,i=g.marker.line;$.exports=n({locations:{valType:"data_array",editType:"calc"},locationmode:g.locationmode,z:{valType:"data_array",editType:"calc"},geojson:n({},g.geojson,{}),featureidkey:g.featureidkey,text:n({},g.text,{}),hovertext:n({},g.hovertext,{}),marker:{line:{color:n({},i.color,{dflt:e}),width:n({},i.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:g.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:g.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:n({},x.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:m(),showlegend:n({},x.showlegend,{dflt:!1})},k("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattergeo/attributes":978}],726:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../constants/numerical").BADNUM,k=v("../../components/colorscale/calc"),x=v("../scatter/arrays_to_calcdata"),e=v("../scatter/calc_selection");function n(i){return i&&"string"==typeof i}$.exports=function(i,l){var r,d=l._length,f=new Array(d);r=l.geojson?function(p){return n(p)||m(p)}:n;for(var t=0;t<d;t++){var h=f[t]={},s=l.locations[t],o=l.z[t];r(s)&&m(o)?(h.loc=s,h.z=o):(h.loc=null,h.z=g),h.index=t}return x(f,l),k(i,l,{vals:l.z,containerStr:"",cLetter:"z"}),e(f,l),f}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"fast-isnumeric":190}],727:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/colorscale/defaults"),k=v("./attributes");$.exports=function(x,e,n,i){function l(h,s){return m.coerce(x,e,k,h,s)}var r=l("locations"),d=l("z");if(r&&r.length&&m.isArrayOrTypedArray(d)&&d.length){e._length=Math.min(r.length,d.length);var f,t=l("geojson");("string"==typeof t&&""!==t||m.isPlainObject(t))&&(f="geojson-id"),"geojson-id"===l("locationmode",f)&&l("featureidkey"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),g(x,e,i,l,{prefix:"",cLetter:"z"}),m.coerceSelectionMarkerOpacity(e,l)}else e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":725}],728:[function(v,$,Q){"use strict";$.exports=function(m,g,k,x,e){m.location=g.location,m.z=g.z;var n=x[e];return n.fIn&&n.fIn.properties&&(m.properties=n.fIn.properties),m.ct=n.ct,m}},{}],729:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes"),g=v("./attributes"),k=v("../../lib").fillText;$.exports=function(x,e,n){var i,l,r,d,f=x.cd,t=f[0].trace,h=x.subplot,s=[e,n],o=[e+360,n];for(l=0;l<f.length;l++)if(d=!1,(i=f[l])._polygons){for(r=0;r<i._polygons.length;r++)i._polygons[r].contains(s)&&(d=!d),i._polygons[r].contains(o)&&(d=!d);if(d)break}if(d&&i)return x.x0=x.x1=x.xa.c2p(i.ct),x.y0=x.y1=x.ya.c2p(i.ct),x.index=i.index,x.location=i.loc,x.z=i.z,x.zLabel=m.tickText(h.mockAxis,h.mockAxis.c2l(i.z),"hover").text,x.hovertemplate=i.hovertemplate,function(p,c,a){if(!c.hovertemplate){var y=a.hi||c.hoverinfo,u=String(a.loc),_="all"===y?g.hoverinfo.flags:y.split("+"),b=-1!==_.indexOf("name"),w=-1!==_.indexOf("location"),T=-1!==_.indexOf("z"),C=-1!==_.indexOf("text"),M=[];!b&&w?p.nameOverride=u:(b&&(p.nameOverride=c.name),w&&M.push(u)),T&&M.push(p.zLabel),C&&k(a,c,M),p.extraText=M.join("<br>")}}(x,t,i),[x]}},{"../../lib":515,"../../plots/cartesian/axes":566,"./attributes":725}],730:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),calc:v("./calc"),calcGeoJSON:v("./plot").calcGeoJSON,plot:v("./plot").plot,style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"choropleth",basePlotModule:v("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":598,"../heatmap/colorbar":804,"./attributes":725,"./calc":726,"./defaults":727,"./event_data":728,"./hover":729,"./plot":731,"./select":732,"./style":733}],731:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=v("../../lib/geo_location_utils"),x=v("../../lib/topojson_utils").getTopojsonFeatures,e=v("../../plots/cartesian/autorange").findExtremes,n=v("./style").style;$.exports={calcGeoJSON:function(i,l){for(var r=i[0].trace,d=l[r.geo],f=d._subplot,t=r.locationmode,h=r._length,s="geojson-id"===t?k.extractTraceFeature(i):x(r,f.topojson),o=[],p=[],c=0;c<h;c++){var a=i[c],y="geojson-id"===t?a.fOut:k.locationToFeature(t,a.loc,s);if(y){a.geojson=y,a.ct=y.properties.ct,a._polygons=k.feature2polygons(y);var u=k.computeBbox(y);o.push(u[0],u[2]),p.push(u[1],u[3])}else a.geojson=null}if("geojson"===d.fitbounds&&"geojson-id"===t){var _=k.computeBbox(k.getTraceGeojson(r));o=[_[0],_[2]],p=[_[1],_[3]]}var b={padded:!0};r._extremes.lon=e(d.lonaxis._ax,o,b),r._extremes.lat=e(d.lataxis._ax,p,b)},plot:function(i,l,r){var d=l.layers.backplot.select(".choroplethlayer");g.makeTraceGroups(d,r,"trace choropleth").each(function(f){var t=m.select(this).selectAll("path.choroplethlocation").data(g.identity);t.enter().append("path").classed("choroplethlocation",!0),t.exit().remove(),n(i,f)})}}},{"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"./style":733,"@plotly/d3":58}],732:[function(v,$,Q){"use strict";$.exports=function(m,g){var k,x,e,n,i,l=m.cd,r=m.xaxis,d=m.yaxis,f=[];if(!1===g)for(k=0;k<l.length;k++)l[k].selected=0;else for(k=0;k<l.length;k++)(e=(x=l[k]).ct)&&(n=r.c2p(e),i=d.c2p(e),g.contains([n,i],null,k,m)?(f.push({pointNumber:k,lon:e[0],lat:e[1]}),x.selected=1):x.selected=0);return f}},{}],733:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/color"),k=v("../../components/drawing"),x=v("../../components/colorscale");function e(n,i){var l=i[0].trace,r=i[0].node3.selectAll(".choroplethlocation"),d=l.marker||{},f=d.line||{},t=x.makeColorScaleFuncFromTrace(l);r.each(function(h){m.select(this).attr("fill",t(h.z)).call(g.stroke,h.mlc||f.color).call(k.dashLine,"",h.mlw||f.width||0).style("opacity",d.opacity)}),k.selectedPointStyle(r,l)}$.exports={style:function(n,i){i&&e(0,i)},styleOnSelect:function(n,i){var r=i[0].trace;r.selectedpoints?k.selectedPointStyle(i[0].node3.selectAll(".choroplethlocation"),r):e(0,i)}}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"@plotly/d3":58}],734:[function(v,$,Q){"use strict";var m=v("../choropleth/attributes"),g=v("../../components/colorscale/attributes"),k=v("../../plots/template_attributes").hovertemplateAttrs,x=v("../../plots/attributes"),e=v("../../lib/extend").extendFlat;$.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},m.featureidkey,{}),below:{valType:"string",editType:"plot"},text:m.text,hovertext:m.hovertext,marker:{line:{color:e({},m.marker.line.color,{editType:"plot"}),width:e({},m.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},m.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},m.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},m.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:m.hoverinfo,hovertemplate:k({},{keys:["properties"]}),showlegend:e({},x.showlegend,{dflt:!1})},g("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../choropleth/attributes":725}],735:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib"),k=v("../../components/colorscale"),x=v("../../components/drawing"),e=v("../../lib/geojson_utils").makeBlank,n=v("../../lib/geo_location_utils");function i(l){var r,d=l[0].trace,f=d._opts;if(d.selectedpoints){for(var t=x.makeSelectedPointStyleFns(d),h=0;h<l.length;h++){var s=l[h];s.fOut&&(s.fOut.properties.mo2=t.selectedOpacityFn(s))}r={type:"identity",property:"mo2"}}else r=g.isArrayOrTypedArray(d.marker.opacity)?{type:"identity",property:"mo"}:d.marker.opacity;return g.extendFlat(f.fill.paint,{"fill-opacity":r}),g.extendFlat(f.line.paint,{"line-opacity":r}),f}$.exports={convert:function(l){var r=l[0].trace,d=!0===r.visible&&0!==r._length,f={layout:{visibility:"none"},paint:{}},t={layout:{visibility:"none"},paint:{}},h=r._opts={fill:f,line:t,geojson:e()};if(!d)return h;var s=n.extractTraceFeature(l);if(!s)return h;var o,p,c,a=k.makeColorScaleFuncFromTrace(r),y=r.marker,u=y.line||{};g.isArrayOrTypedArray(y.opacity)&&(o=function(M){var I=M.mo;return m(I)?+g.constrain(I,0,1):0}),g.isArrayOrTypedArray(u.color)&&(p=function(M){return M.mlc}),g.isArrayOrTypedArray(u.width)&&(c=function(M){return M.mlw});for(var _=0;_<l.length;_++){var b=l[_],w=b.fOut;if(w){var T=w.properties;T.fc=a(b.z),o&&(T.mo=o(b)),p&&(T.mlc=p(b)),c&&(T.mlw=c(b)),b.ct=T.ct,b._polygons=n.feature2polygons(w)}}var C=o?{type:"identity",property:"mo"}:y.opacity;return g.extendFlat(f.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":C}),g.extendFlat(t.paint,{"line-color":p?{type:"identity",property:"mlc"}:u.color,"line-width":c?{type:"identity",property:"mlw"}:u.width,"line-opacity":C}),f.layout.visibility="visible",t.layout.visibility="visible",h.geojson={type:"FeatureCollection",features:s},i(l),h},convertOnSelect:i}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"fast-isnumeric":190}],736:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/colorscale/defaults"),k=v("./attributes");$.exports=function(x,e,n,i){function l(t,h){return m.coerce(x,e,k,t,h)}var r=l("locations"),d=l("z"),f=l("geojson");m.isArrayOrTypedArray(r)&&r.length&&m.isArrayOrTypedArray(d)&&d.length&&("string"==typeof f&&""!==f||m.isPlainObject(f))?(l("featureidkey"),e._length=Math.min(r.length,d.length),l("below"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),g(x,e,i,l,{prefix:"",cLetter:"z"}),m.coerceSelectionMarkerOpacity(e,l)):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":734}],737:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),calc:v("../choropleth/calc"),plot:v("./plot"),hoverPoints:v("../choropleth/hover"),eventData:v("../choropleth/event_data"),selectPoints:v("../choropleth/select"),styleOnSelect:function(m,g){g&&g[0].trace._glTrace.updateOnSelect(g)},getBelow:function(m,g){for(var k=g.getMapLayers(),x=k.length-2;x>=0;x--){var e=k[x].id;if("string"==typeof e&&0===e.indexOf("water"))for(var n=x+1;n<k.length;n++)if("string"==typeof(e=k[n].id)&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:v("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":622,"../choropleth/calc":726,"../choropleth/event_data":728,"../choropleth/hover":729,"../choropleth/select":732,"../heatmap/colorbar":804,"./attributes":734,"./defaults":736,"./plot":738}],738:[function(v,$,Q){"use strict";var m=v("./convert").convert,g=v("./convert").convertOnSelect,k=v("../../plots/mapbox/constants").traceLayerPrefix;function x(n,i){this.type="choroplethmapbox",this.subplot=n,this.uid=i,this.sourceId="source-"+i,this.layerList=[["fill",k+i+"-fill"],["line",k+i+"-line"]],this.below=null}var e=x.prototype;e.update=function(n){this._update(m(n)),n[0].trace._glTrace=this},e.updateOnSelect=function(n){this._update(g(n))},e._update=function(n){var i=this.subplot,l=this.layerList,r=i.belowLookup["trace-"+this.uid];i.map.getSource(this.sourceId).setData(n.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(n,r),this.below=r);for(var d=0;d<l.length;d++){var f=l[d],h=f[1],s=n[f[0]];i.setOptions(h,"setLayoutProperty",s.layout),"visible"===s.layout.visibility&&i.setOptions(h,"setPaintProperty",s.paint)}},e._addLayers=function(n,i){for(var l=this.subplot,r=this.layerList,d=this.sourceId,f=0;f<r.length;f++){var t=r[f],h=t[0],s=n[h];l.addLayer({type:h,id:t[1],source:d,layout:s.layout,paint:s.paint},i)}},e._removeLayers=function(){for(var n=this.subplot.map,i=this.layerList,l=i.length-1;l>=0;l--)n.removeLayer(i[l][1])},e.dispose=function(){var n=this.subplot.map;this._removeLayers(),n.removeSource(this.sourceId)},$.exports=function(n,i){var l=i[0].trace,r=new x(n,l.uid),d=r.sourceId,f=m(i),t=r.below=n.belowLookup["trace-"+l.uid];return n.map.addSource(d,{type:"geojson",data:f.geojson}),r._addLayers(f,t),i[0].trace._glTrace=r,r}},{"../../plots/mapbox/constants":620,"./convert":735}],739:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/attributes"),g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=v("../../plots/template_attributes").hovertemplateAttrs,x=v("../mesh3d/attributes"),e=v("../../plots/attributes"),n=v("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:k({editType:"calc"},{keys:["norm"]}),uhoverformat:g("u",1),vhoverformat:g("v",1),whoverformat:g("w",1),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),showlegend:n({},e.showlegend,{dflt:!1})};n(i,m("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(l){i[l]=x[l]}),i.hoverinfo=n({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,$.exports=i},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],740:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/calc");$.exports=function(g,k){for(var x=k.u,e=k.v,n=k.w,i=Math.min(k.x.length,k.y.length,k.z.length,x.length,e.length,n.length),l=-1/0,r=1/0,d=0;d<i;d++){var f=x[d],t=e[d],h=n[d],s=Math.sqrt(f*f+t*t+h*h);l=Math.max(l,s),r=Math.min(r,s)}k._len=i,k._normMax=l,m(g,k,{vals:[r,l],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],741:[function(v,$,Q){"use strict";var m=v("../../../stackgl_modules").gl_cone3d,g=v("../../../stackgl_modules").gl_cone3d.createConeMesh,k=v("../../lib").simpleMap,x=v("../../lib/gl_format_color").parseColorScale,e=v("../../components/colorscale").extractOpts,n=v("../../plots/gl3d/zip3");function i(h,s){this.scene=h,this.uid=s,this.mesh=null,this.data=null}var l=i.prototype;l.handlePick=function(h){if(h.object===this.mesh){var s=h.index=h.data.index,a=this.data.u[s],y=this.data.v[s],u=this.data.w[s];h.traceCoordinate=[this.data.x[s],this.data.y[s],this.data.z[s],a,y,u,Math.sqrt(a*a+y*y+u*u)];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&void 0!==_[s]?h.textLabel=_[s]:_&&(h.textLabel=_),!0}};var r={xaxis:0,yaxis:1,zaxis:2},d={tip:1,tail:0,cm:.25,center:.5},f={tip:1,tail:1,cm:.75,center:.5};function t(h,s){var o=h.fullSceneLayout,p=h.dataScale,c={};function a(b,w){var T=o[w],C=p[r[w]];return k(b,function(M){return T.d2l(M)*C})}c.vectors=n(a(s.u,"xaxis"),a(s.v,"yaxis"),a(s.w,"zaxis"),s._len),c.positions=n(a(s.x,"xaxis"),a(s.y,"yaxis"),a(s.z,"zaxis"),s._len);var y=e(s);c.colormap=x(s),c.vertexIntensityBounds=[y.min/s._normMax,y.max/s._normMax],c.coneOffset=d[s.anchor],c.coneSize="scaled"===s.sizemode?s.sizeref||.5:s.sizeref&&s._normMax?s.sizeref/s._normMax:.5;var u=m(c),_=s.lightposition;return u.lightPosition=[_.x,_.y,_.z],u.ambient=s.lighting.ambient,u.diffuse=s.lighting.diffuse,u.specular=s.lighting.specular,u.roughness=s.lighting.roughness,u.fresnel=s.lighting.fresnel,u.opacity=s.opacity,s._pad=f[s.anchor]*u.vectorScale*u.coneScale*s._normMax,u}l.update=function(h){this.data=h;var s=t(this.scene,h);this.mesh.update(s)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(h,s){var o=h.glplot.gl,p=t(h,s),c=g(o,p),a=new i(h,s.uid);return a.mesh=c,a.data=s,c._trace=a,h.glplot.add(c),a}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],742:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/colorscale/defaults"),k=v("./attributes");$.exports=function(x,e,n,i){function l(o,p){return m.coerce(x,e,k,o,p)}var r=l("u"),d=l("v"),f=l("w"),t=l("x"),h=l("y"),s=l("z");r&&r.length&&d&&d.length&&f&&f.length&&t&&t.length&&h&&h.length&&s&&s.length?(l("sizeref"),l("sizemode"),l("anchor"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),g(x,e,i,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),l("uhoverformat"),l("vhoverformat"),l("whoverformat"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":739}],743:[function(v,$,Q){"use strict";$.exports={moduleType:"trace",name:"cone",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:v("./calc"),plot:v("./convert"),eventData:function(m,g){return m.norm=g.traceCoordinate[6],m},meta:{}}},{"../../plots/gl3d":607,"./attributes":739,"./calc":740,"./convert":741,"./defaults":742}],744:[function(v,$,Q){"use strict";var m=v("../heatmap/attributes"),g=v("../scatter/attributes"),k=v("../../plots/cartesian/axis_format_attributes"),x=k.axisHoverFormat,e=k.descriptionOnlyNumbers,n=v("../../components/colorscale/attributes"),i=v("../../components/drawing/attributes").dash,l=v("../../plots/font_attributes"),r=v("../../lib/extend").extendFlat,d=v("../../constants/filter_ops"),f=d.COMPARISON_OPS2,t=d.INTERVAL_OPS,h=g.line;$.exports=r({z:m.z,x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,text:m.text,hovertext:m.hovertext,transpose:m.transpose,xtype:m.xtype,ytype:m.ytype,xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:m.hovertemplate,texttemplate:r({},m.texttemplate,{}),textfont:r({},m.textfont,{}),hoverongaps:m.hoverongaps,connectgaps:r({},m.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:l({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(f).concat(t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},h.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:i,smoothing:r({},h.smoothing,{}),editType:"plot"}},n("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../constants/filter_ops":487,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../heatmap/attributes":801,"../scatter/attributes":936}],745:[function(v,$,Q){"use strict";var m=v("../../components/colorscale"),g=v("../heatmap/calc"),k=v("./set_contours"),x=v("./end_plus");$.exports=function(e,n){var i=g(e,n),l=i[0].z;k(n,l);var r,d=n.contours,f=m.extractOpts(n);if("heatmap"===d.coloring&&f.auto&&!1===n.autocontour){var t=d.start,h=x(d),s=d.size||1,o=Math.floor((h-t)/s)+1;isFinite(s)||(s=1,o=1);var p=t-s/2;r=[p,p+o*s]}else r=l;return m.calc(e,n,{vals:r,cLetter:"z"}),i}},{"../../components/colorscale":379,"../heatmap/calc":802,"./end_plus":755,"./set_contours":763}],746:[function(v,$,Q){"use strict";$.exports=function(m,g){var k,x=m[0],e=x.z;switch(g.type){case"levels":var n=Math.min(e[0][0],e[0][1]);for(k=0;k<m.length;k++){var i=m[k];i.prefixBoundary=!i.edgepaths.length&&(n>i.level||i.starts.length&&n===i.level)}break;case"constraint":if(x.prefixBoundary=!1,x.edgepaths.length)return;var l=x.x.length,r=x.y.length,d=-1/0,f=1/0;for(k=0;k<r;k++)f=Math.min(f,e[k][0]),f=Math.min(f,e[k][l-1]),d=Math.max(d,e[k][0]),d=Math.max(d,e[k][l-1]);for(k=1;k<l-1;k++)f=Math.min(f,e[0][k]),f=Math.min(f,e[r-1][k]),d=Math.max(d,e[0][k]),d=Math.max(d,e[r-1][k]);var t,h,s=g.value;switch(g._operation){case">":s>d&&(x.prefixBoundary=!0);break;case"<":(s<f||x.starts.length&&s===f)&&(x.prefixBoundary=!0);break;case"[]":t=Math.min(s[0],s[1]),((h=Math.max(s[0],s[1]))<f||t>d||x.starts.length&&h===f)&&(x.prefixBoundary=!0);break;case"][":t=Math.min(s[0],s[1]),h=Math.max(s[0],s[1]),t<f&&h>d&&(x.prefixBoundary=!0)}}}},{}],747:[function(v,$,Q){"use strict";var m=v("../../components/colorscale"),g=v("./make_color_map"),k=v("./end_plus");$.exports={min:"zmin",max:"zmax",calc:function(x,e,n){var i=e.contours,l=e.line,r=i.size||1,d=i.coloring,f=g(e,{isColorbar:!0});if("heatmap"===d){var t=m.extractOpts(e);n._fillgradient=t.reversescale?m.flipScale(t.colorscale):t.colorscale,n._zrange=[t.min,t.max]}else"fill"===d&&(n._fillcolor=f);n._line={color:"lines"===d?f:l.color,width:!1!==i.showlines?l.width:0,dash:l.dash},n._levels={start:i.start,end:k(i),size:r}}}},{"../../components/colorscale":379,"./end_plus":755,"./make_color_map":760}],748:[function(v,$,Q){"use strict";$.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],749:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("./label_defaults"),k=v("../../components/color"),x=k.addOpacity,e=k.opacity,n=v("../../constants/filter_ops"),i=n.CONSTRAINT_REDUCTION,l=n.COMPARISON_OPS2;$.exports=function(r,d,f,t,h,s){var o,p,c,u,_,b,a=d.contours,y=f("contours.operation");a._operation=i[y],u=f,-1===l.indexOf((_=a).operation)?(u("contours.value",[0,1]),Array.isArray(_.value)?_.value.length>2?_.value=_.value.slice(2):0===_.length?_.value=[0,1]:_.length<2?(b=parseFloat(_.value[0]),_.value=[b,b+1]):_.value=[parseFloat(_.value[0]),parseFloat(_.value[1])]:m(_.value)&&(b=parseFloat(_.value),_.value=[b,b+1])):(u("contours.value",0),m(_.value)||(_.value=Array.isArray(_.value)?parseFloat(_.value[0]):0)),"="===y?o=a.showlines=!0:(o=f("contours.showlines"),c=f("fillcolor",x((r.line||{}).color||h,.5))),o&&(p=f("line.color",c&&e(c)?x(d.fillcolor,1):h),f("line.width",2),f("line.dash")),f("line.smoothing"),g(f,t,p,s)}},{"../../components/color":367,"../../constants/filter_ops":487,"./label_defaults":759,"fast-isnumeric":190}],750:[function(v,$,Q){"use strict";var m=v("../../constants/filter_ops"),g=v("fast-isnumeric");function k(n,i){var l,r=Array.isArray(i);function d(f){return g(f)?+f:null}return-1!==m.COMPARISON_OPS2.indexOf(n)?l=d(r?i[0]:i):-1!==m.INTERVAL_OPS.indexOf(n)?l=r?[d(i[0]),d(i[1])]:[d(i),d(i)]:-1!==m.SET_OPS.indexOf(n)&&(l=r?i.map(d):[d(i)]),l}function x(n){return function(i){i=k(n,i);var l=Math.min(i[0],i[1]),r=Math.max(i[0],i[1]);return{start:l,end:r,size:r-l}}}function e(n){return function(i){return{start:i=k(n,i),end:1/0,size:1/0}}}$.exports={"[]":x("[]"),"][":x("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":487,"fast-isnumeric":190}],751:[function(v,$,Q){"use strict";$.exports=function(m,g,k,x){var e=x("contours.start"),n=x("contours.end"),i=!1===e||!1===n,l=k("contours.size");!(i?g.autocontour=!0:k("autocontour",!1))&&l||k("ncontours")}},{}],752:[function(v,$,Q){"use strict";var m=v("../../lib");function g(k){return m.extendFlat({},k,{edgepaths:m.extendDeep([],k.edgepaths),paths:m.extendDeep([],k.paths),starts:m.extendDeep([],k.starts)})}$.exports=function(k,x){var e,n,i,l=function(f){return f.reverse()},r=function(f){return f};switch(x){case"=":case"<":return k;case">":for(1!==k.length&&m.warn("Contour data invalid for the specified inequality operation."),n=k[0],e=0;e<n.edgepaths.length;e++)n.edgepaths[e]=l(n.edgepaths[e]);for(e=0;e<n.paths.length;e++)n.paths[e]=l(n.paths[e]);for(e=0;e<n.starts.length;e++)n.starts[e]=l(n.starts[e]);return k;case"][":var d=l;l=r,r=d;case"[]":for(2!==k.length&&m.warn("Contour data invalid for the specified inequality range operation."),n=g(k[0]),i=g(k[1]),e=0;e<n.edgepaths.length;e++)n.edgepaths[e]=l(n.edgepaths[e]);for(e=0;e<n.paths.length;e++)n.paths[e]=l(n.paths[e]);for(e=0;e<n.starts.length;e++)n.starts[e]=l(n.starts[e]);for(;i.edgepaths.length;)n.edgepaths.push(r(i.edgepaths.shift()));for(;i.paths.length;)n.paths.push(r(i.paths.shift()));for(;i.starts.length;)n.starts.push(r(i.starts.shift()));return[n]}}},{"../../lib":515}],753:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../heatmap/xyz_defaults"),k=v("../scatter/period_defaults"),x=v("./constraint_defaults"),e=v("./contours_defaults"),n=v("./style_defaults"),i=v("../heatmap/label_defaults"),l=v("./attributes");$.exports=function(r,d,f,t){function h(o,p){return m.coerce(r,d,l,o,p)}if(g(r,d,h,t)){k(r,d,t,h),h("xhoverformat"),h("yhoverformat"),h("text"),h("hovertext"),h("hoverongaps"),h("hovertemplate");var s="constraint"===h("contours.type");h("connectgaps",m.isArray1D(d.z)),s?x(r,d,h,t,f):(e(r,d,h,function(o){return m.coerce2(r,d,l,o)}),n(r,d,h,t)),d.contours&&"heatmap"===d.contours.coloring&&i(h,t)}else d.visible=!1}},{"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/xyz_defaults":816,"../scatter/period_defaults":956,"./attributes":744,"./constraint_defaults":749,"./contours_defaults":751,"./style_defaults":765}],754:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./constraint_mapping"),k=v("./end_plus");$.exports=function(x,e,n){for(var i="constraint"===x.type?g[x._operation](x.value):x,l=i.size,r=[],d=k(i),f=n.trace._carpetTrace,t=f?{xaxis:f.aaxis,yaxis:f.baxis,x:n.a,y:n.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:n.x,y:n.y},h=i.start;h<d;h+=l)if(r.push(m.extendFlat({level:h,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},t)),r.length>1e3){m.warn("Too many contours, clipping at 1000",x);break}return r}},{"../../lib":515,"./constraint_mapping":750,"./end_plus":755}],755:[function(v,$,Q){"use strict";$.exports=function(m){return m.end+m.size/1e6}},{}],756:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./constants");function k(n,i,l,r){return Math.abs(n[0]-i[0])<l&&Math.abs(n[1]-i[1])<r}function x(n,i,l,r,d){var f,K,te,ae,le,t=i.join(","),h=n.crossings[t],s=(te=i,ae=0,le=0,(K=h)>20&&l?208===K||1114===K?ae=0===te[0]?1:-1:le=0===te[1]?1:-1:-1!==g.BOTTOMSTART.indexOf(K)?le=1:-1!==g.LEFTSTART.indexOf(K)?ae=1:-1!==g.TOPSTART.indexOf(K)?le=-1:ae=-1,[ae,le]),o=[e(n,i,[-s[0],-s[1]])],p=n.z.length,c=n.z[0].length,a=i.slice(),y=s.slice();for(f=0;f<1e4;f++){if(h>20?n.crossings[t]=g.SADDLEREMAINDER[h=g.CHOOSESADDLE[h][(s[0]||s[1])<0?0:1]]:delete n.crossings[t],!(s=g.NEWDELTA[h])){m.log("Found bad marching index:",h,i,n.level);break}if(o.push(e(n,i,s)),i[0]+=s[0],i[1]+=s[1],t=i.join(","),k(o[o.length-1],o[o.length-2],r,d)&&o.pop(),i[0]===a[0]&&i[1]===a[1]&&s[0]===y[0]&&s[1]===y[1]||l&&(s[0]&&(i[0]<0||i[0]>c-2)||s[1]&&(i[1]<0||i[1]>p-2)))break;h=n.crossings[t]}1e4===f&&m.log("Infinite loop in contour?");var _,b,w,T,C,M,I,P,S,E,R,D,j,H,Y,X=k(o[0],o[o.length-1],r,d),Z=0,W=.2*n.smoothing,re=[],U=0;for(f=1;f<o.length;f++)void 0,void 0,H=(D=o[f])[2]-(j=o[f-1])[2],Y=D[3]-j[3],Z+=I=Math.sqrt(H*H+Y*Y),re.push(I);var B=Z/re.length*W;function V(K){return o[K%o.length]}for(f=o.length-2;f>=U;f--)if((_=re[f])<B){for(w=0,b=f-1;b>=U&&_+re[b]<B;b--)_+=re[b];if(X&&f===o.length-2)for(w=0;w<b&&_+re[w]<B;w++)_+=re[w];C=f-b+w+1,M=Math.floor((f+b+w+2)/2),T=X||f!==o.length-2?X||-1!==b?C%2?V(M):[(V(M)[0]+V(M+1)[0])/2,(V(M)[1]+V(M+1)[1])/2]:o[0]:o[o.length-1],o.splice(b+1,f-b+1,T),f=b+1,w&&(U=w),X&&(f===o.length-2?o[w]=o[o.length-1]:0===f&&(o[o.length-1]=o[0]))}for(o.splice(0,U),f=0;f<o.length;f++)o[f].length=2;if(!(o.length<2))if(X)o.pop(),n.paths.push(o);else{l||m.log("Unclosed interior contour?",n.level,a.join(","),o.join("L"));var ee=!1;for(P=0;P<n.edgepaths.length;P++)if(E=n.edgepaths[P],!ee&&k(E[0],o[o.length-1],r,d)){o.pop(),ee=!0;var N=!1;for(S=0;S<n.edgepaths.length;S++)if(k((R=n.edgepaths[S])[R.length-1],o[0],r,d)){N=!0,o.shift(),n.edgepaths.splice(P,1),S===P?n.paths.push(o.concat(R)):(S>P&&S--,n.edgepaths[S]=R.concat(o,E));break}N||(n.edgepaths[P]=o.concat(E))}for(P=0;P<n.edgepaths.length&&!ee;P++)k((E=n.edgepaths[P])[E.length-1],o[0],r,d)&&(o.shift(),n.edgepaths[P]=E.concat(o),ee=!0);ee||n.edgepaths.push(o)}}function e(n,i,l){var r=i[0]+Math.max(l[0],0),d=i[1]+Math.max(l[1],0),f=n.z[d][r],t=n.xaxis,h=n.yaxis;if(l[1]){var s=(n.level-f)/(n.z[d][r+1]-f),o=(1!==s?(1-s)*t.c2l(n.x[r]):0)+(0!==s?s*t.c2l(n.x[r+1]):0);return[t.c2p(t.l2c(o),!0),h.c2p(n.y[d],!0),r+s,d]}var p=(n.level-f)/(n.z[d+1][r]-f),c=(1!==p?(1-p)*h.c2l(n.y[d]):0)+(0!==p?p*h.c2l(n.y[d+1]):0);return[t.c2p(n.x[r],!0),h.c2p(h.l2c(c),!0),r,d+p]}$.exports=function(n,i,l){var r,d,f,t;for(i=i||.01,l=l||.01,d=0;d<n.length;d++){for(f=n[d],t=0;t<f.starts.length;t++)x(f,f.starts[t],"edge",i,l);for(r=0;Object.keys(f.crossings).length&&r<1e4;)r++,x(f,Object.keys(f.crossings)[0].split(",").map(Number),void 0,i,l);1e4===r&&m.log("Infinite loop in contour?")}}},{"../../lib":515,"./constants":748}],757:[function(v,$,Q){"use strict";var m=v("../../components/color"),g=v("../heatmap/hover");$.exports=function(k,x,e,n,i){i||(i={}),i.isContour=!0;var l=g(k,x,e,n,i);return l&&l.forEach(function(r){var d=r.trace;"constraint"===d.contours.type&&(d.fillcolor&&m.opacity(d.fillcolor)?r.color=m.addOpacity(d.fillcolor,1):d.contours.showlines&&m.opacity(d.line.color)&&(r.color=m.addOpacity(d.line.color,1)))}),l}},{"../../components/color":367,"../heatmap/hover":808}],758:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot").plot,style:v("./style"),colorbar:v("./colorbar"),hoverPoints:v("./hover"),moduleType:"trace",name:"contour",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":744,"./calc":745,"./colorbar":747,"./defaults":753,"./hover":757,"./plot":762,"./style":764}],759:[function(v,$,Q){"use strict";var m=v("../../lib");$.exports=function(g,k,x,e){if(e||(e={}),g("contours.showlabels")){var n=k.font;m.coerceFont(g,"contours.labelfont",{family:n.family,size:n.size,color:x}),g("contours.labelformat")}!1!==e.hasHover&&g("zhoverformat")}},{"../../lib":515}],760:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/colorscale"),k=v("./end_plus");$.exports=function(x){var e=x.contours,n=e.start,i=k(e),l=e.size||1,r=Math.floor((i-n)/l)+1,d="lines"===e.coloring?0:1,f=g.extractOpts(x);isFinite(l)||(l=1,r=1);var t,h,s=f.reversescale?g.flipScale(f.colorscale):f.colorscale,o=s.length,p=new Array(o),c=new Array(o);if("heatmap"===e.coloring){var a=f.min,y=f.max;for(h=0;h<o;h++)p[h]=(t=s[h])[0]*(y-a)+a,c[h]=t[1];var u=m.extent([a,y,e.start,e.start+l*(r-1)]),_=u[a<y?0:1],b=u[a<y?1:0];_!==a&&(p.splice(0,0,_),c.splice(0,0,c[0])),b!==y&&(p.push(b),c.push(c[c.length-1]))}else for(h=0;h<o;h++)p[h]=((t=s[h])[0]*(r+d-1)-d/2)*l+n,c[h]=t[1];return g.makeColorScaleFunc({domain:p,range:c},{noNumericCheck:!0})}},{"../../components/colorscale":379,"./end_plus":755,"@plotly/d3":58}],761:[function(v,$,Q){"use strict";var m=v("./constants");function g(k,x){var e=(x[0][0]>k?0:1)+(x[0][1]>k?0:2)+(x[1][1]>k?0:4)+(x[1][0]>k?0:8);return 5===e||10===e?k>(x[0][0]+x[0][1]+x[1][0]+x[1][1])/4?5===e?713:1114:5===e?104:208:15===e?0:e}$.exports=function(k){var x,e,n,i,l,r,d,f,t,h=k[0].z,s=h.length,o=h[0].length,p=2===s||2===o;for(e=0;e<s-1;e++)for(i=[],0===e&&(i=i.concat(m.BOTTOMSTART)),e===s-2&&(i=i.concat(m.TOPSTART)),x=0;x<o-1;x++)for(n=i.slice(),0===x&&(n=n.concat(m.LEFTSTART)),x===o-2&&(n=n.concat(m.RIGHTSTART)),l=x+","+e,r=[[h[e][x],h[e][x+1]],[h[e+1][x],h[e+1][x+1]]],t=0;t<k.length;t++)(d=g((f=k[t]).level,r))&&(f.crossings[l]=d,-1!==n.indexOf(d)&&(f.starts.push([x,e]),p&&-1!==n.indexOf(d,n.indexOf(d)+1)&&f.starts.push([x,e])))}},{"./constants":748}],762:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=v("../../components/drawing"),x=v("../../components/colorscale"),e=v("../../lib/svg_text_utils"),n=v("../../plots/cartesian/axes"),i=v("../../plots/cartesian/set_convert"),l=v("../heatmap/plot"),r=v("./make_crossings"),d=v("./find_all_paths"),f=v("./empty_pathinfo"),t=v("./convert_to_constraints"),h=v("./close_boundaries"),s=v("./constants"),o=s.LABELOPTIMIZER;function p(y,u){var _,b,w,T,C,M,P="",S=0,E=y.edgepaths.map(function(X,Z){return Z}),R=!0;function D(X){return Math.abs(X[1]-u[2][1])<.01}function H(X){return Math.abs(X[0]-u[2][0])<.01}for(;E.length;){for(M=k.smoothopen(y.edgepaths[S],y.smoothing),P+=R?M:M.replace(/^M/,"L"),E.splice(E.indexOf(S),1),_=y.edgepaths[S][y.edgepaths[S].length-1],T=-1,w=0;w<4;w++){if(!_){g.log("Missing end?",S,y);break}for(Math.abs(_[1]-u[0][1])<.01&&!H(_)?b=u[1]:Math.abs(_[0]-u[0][0])<.01?b=u[0]:D(_)?b=u[3]:H(_)&&(b=u[2]),C=0;C<y.edgepaths.length;C++){var Y=y.edgepaths[C][0];Math.abs(_[0]-b[0])<.01?Math.abs(_[0]-Y[0])<.01&&(Y[1]-_[1])*(b[1]-Y[1])>=0&&(b=Y,T=C):Math.abs(_[1]-b[1])<.01?Math.abs(_[1]-Y[1])<.01&&(Y[0]-_[0])*(b[0]-Y[0])>=0&&(b=Y,T=C):g.log("endpt to newendpt is not vert. or horz.",_,b,Y)}if(_=b,T>=0)break;P+="L"+b}if(T===y.edgepaths.length){g.log("unclosed perimeter path");break}(R=-1===E.indexOf(S=T))&&(S=E[0],P+="Z")}for(S=0;S<y.paths.length;S++)P+=k.smoothclosed(y.paths[S],y.smoothing);return P}function c(y,u,_,b){var w=u.width/2,T=u.height/2,C=y.x,M=y.y,I=y.theta,P=Math.cos(I)*w,S=Math.sin(I)*w,E=(C>b.center?b.right-C:C-b.left)/(P+Math.abs(Math.sin(I)*T)),R=(M>b.middle?b.bottom-M:M-b.top)/(Math.abs(S)+Math.cos(I)*T);if(E<1||R<1)return 1/0;var D=o.EDGECOST*(1/(E-1)+1/(R-1));D+=o.ANGLECOST*I*I;for(var j=C-P,H=M-S,Y=C+P,X=M+S,Z=0;Z<_.length;Z++){var W=_[Z],re=Math.cos(W.theta)*W.width/2,U=Math.sin(W.theta)*W.width/2,B=2*g.segmentDistance(j,H,Y,X,W.x-re,W.y-U,W.x+re,W.y+U)/(u.height+W.height),V=W.level===u.level,ee=V?o.SAMELEVELDISTANCE:1;if(B<=ee)return 1/0;D+=o.NEIGHBORCOST*(V?o.SAMELEVELFACTOR:1)/(B-ee)}return D}function a(y){var u,_,b=y.trace._emptypoints,w=[],T=y.z.length,C=y.z[0].length,M=[];for(u=0;u<C;u++)M.push(1);for(u=0;u<T;u++)w.push(M.slice());for(u=0;u<b.length;u++)w[(_=b[u])[0]][_[1]]=0;return y.zmask=w,w}Q.plot=function(y,u,_,b){var w=u.xaxis,T=u.yaxis;g.makeTraceGroups(b,_,"contour").each(function(C){var M=m.select(this),I=C[0],S=I.x,E=I.y,R=I.trace.contours,D=f(R,u,I),j=g.ensureSingle(M,"g","heatmapcoloring"),H=[];"heatmap"===R.coloring&&(H=[C]),l(y,u,H,j),r(D),d(D);var V,ee,N,Y=w.c2p(S[0],!0),X=w.c2p(S[S.length-1],!0),Z=T.c2p(E[0],!0),W=T.c2p(E[E.length-1],!0),re=[[Y,W],[X,W],[X,Z],[Y,Z]],U=D;"constraint"===R.type&&(U=t(D,R._operation)),V=re,ee=R,(N=g.ensureSingle(M,"g","contourbg").selectAll("path").data("fill"===ee.coloring?[0]:[])).enter().append("path"),N.exit().remove(),N.attr("d","M"+V.join("L")+"Z").style("stroke","none"),function(B,V,ee,N){var K="fill"===N.coloring||"constraint"===N.type&&"="!==N._operation,J="M"+ee.join("L")+"Z";K&&h(V,N);var te=g.ensureSingle(B,"g","contourfill").selectAll("path").data(K?V:[]);te.enter().append("path"),te.exit().remove(),te.each(function(ae){var le=(ae.prefixBoundary?J:"")+p(ae,ee);le?m.select(this).attr("d",le).style("stroke","none"):m.select(this).remove()})}(M,U,re,R),function(B,V,ee,N,K){var J=g.ensureSingle(B,"g","contourlines"),te=!1!==K.showlines,ae=K.showlabels,le=te&&ae,se=Q.createLines(J,te||ae,V),ve=Q.createLineClip(J,le,ee,N.trace.uid),ue=B.selectAll("g.contourlabels").data(ae?[0]:[]);if(ue.exit().remove(),ue.enter().append("g").classed("contourlabels",!0),ae){var ye=[],Me=[];g.clearLocationCache();var pe=Q.labelFormatter(ee,N),ge=k.tester.append("text").attr("data-notex",1).call(k.font,K.labelfont),we=V[0].xaxis,oe=V[0].yaxis,de=we._length,Te=oe._length,Ee=we.range,Ae=oe.range,De=g.aggNums(Math.min,null,N.x),Ie=g.aggNums(Math.max,null,N.x),Oe=g.aggNums(Math.min,null,N.y),Xe=g.aggNums(Math.max,null,N.y),Fe=Math.max(we.c2p(De,!0),0),Pe=Math.min(we.c2p(Ie,!0),de),Re=Math.max(oe.c2p(Xe,!0),0),qe=Math.min(oe.c2p(Oe,!0),Te),Qe={};Ee[0]<Ee[1]?(Qe.left=Fe,Qe.right=Pe):(Qe.left=Pe,Qe.right=Fe),Ae[0]<Ae[1]?(Qe.top=Re,Qe.bottom=qe):(Qe.top=qe,Qe.bottom=Re),Qe.middle=(Qe.top+Qe.bottom)/2,Qe.center=(Qe.left+Qe.right)/2,ye.push([[Qe.left,Qe.top],[Qe.right,Qe.top],[Qe.right,Qe.bottom],[Qe.left,Qe.bottom]]);var ct=Math.sqrt(de*de+Te*Te),bt=s.LABELDISTANCE*ct/Math.max(1,V.length/s.LABELINCREASE);se.each(function(Tt){var _t=Q.calcTextOpts(Tt.level,pe,ge,ee);m.select(this).selectAll("path").each(function(){var nt=g.getVisibleSegment(this,Qe,_t.height/2);if(nt&&!(nt.len<(_t.width+_t.height)*s.LABELMIN))for(var Ke=Math.min(Math.ceil(nt.len/bt),s.LABELMAX),xt=0;xt<Ke;xt++){var Ht=Q.findBestTextLocation(this,nt,_t,Me,Qe);if(!Ht)break;Q.addLabelData(Ht,_t,Me,ye)}})}),ge.remove(),Q.drawLabels(ue,Me,ee,ve,le?ye:null)}ae&&!te&&se.remove()}(M,D,y,I,R),function(B,V,ee,N,K){var J=N.trace,ae="clip"+J.uid,le=ee._fullLayout._clips.selectAll("#"+ae).data(J.connectgaps?[]:[0]);if(le.enter().append("clipPath").classed("contourclip",!0).attr("id",ae),le.exit().remove(),!1===J.connectgaps){var se={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:V.xaxis,yaxis:V.yaxis,x:N.x,y:N.y,z:a(N),smoothing:0};r([se]),d([se]),h([se],{type:"levels"}),g.ensureSingle(le,"path","").attr("d",(se.prefixBoundary?"M"+K.join("L")+"Z":"")+p(se,K))}else ae=null;k.setClipUrl(B,ae,ee)}(M,u,y,I,re)})},Q.createLines=function(y,u,_){var b=_[0].smoothing,w=y.selectAll("g.contourlevel").data(u?_:[]);if(w.exit().remove(),w.enter().append("g").classed("contourlevel",!0),u){var T=w.selectAll("path.openline").data(function(M){return M.pedgepaths||M.edgepaths});T.exit().remove(),T.enter().append("path").classed("openline",!0),T.attr("d",function(M){return k.smoothopen(M,b)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var C=w.selectAll("path.closedline").data(function(M){return M.ppaths||M.paths});C.exit().remove(),C.enter().append("path").classed("closedline",!0),C.attr("d",function(M){return k.smoothclosed(M,b)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return w},Q.createLineClip=function(y,u,_,b){var w=u?"clipline"+b:null,T=_._fullLayout._clips.selectAll("#"+w).data(u?[0]:[]);return T.exit().remove(),T.enter().append("clipPath").classed("contourlineclip",!0).attr("id",w),k.setClipUrl(y,w,_),T},Q.labelFormatter=function(y,u){var _=y._fullLayout,b=u.trace,w=b.contours,T={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(w.labelformat)T.tickformat=w.labelformat,i(T,_);else{var C=x.extractOpts(b);if(C&&C.colorbar&&C.colorbar._axis)T=C.colorbar._axis;else{if("constraint"===w.type){var M=w.value;T.range=Array.isArray(M)?[M[0],M[M.length-1]]:[M,M]}else T.range=[w.start,w.end],T.nticks=(w.end-w.start)/w.size;T.range[0]===T.range[1]&&(T.range[1]+=T.range[0]||1),T.nticks||(T.nticks=1e3),i(T,_),n.prepTicks(T),T._tmin=null,T._tmax=null}}return function(I){return n.tickText(T,I).text}},Q.calcTextOpts=function(y,u,_,b){var w=u(y);_.text(w).call(e.convertToTspans,b);var T=_.node(),C=k.bBox(T,!0);return{text:w,width:C.width,height:C.height,fontSize:+T.style["font-size"].replace("px",""),level:y,dy:(C.top+C.bottom)/2}},Q.findBestTextLocation=function(y,u,_,b,w){var T,C,M,I,P,S=_.width;u.isClosed?(T=u.min+(C=u.len/o.INITIALSEARCHPOINTS)/2,M=u.max):(T=u.min+(C=(u.len-S)/(o.INITIALSEARCHPOINTS+1))+S/2,M=u.max-(C+S)/2);for(var E=1/0,R=0;R<o.ITERATIONS;R++){for(var D=T;D<M;D+=C){var j=g.getTextLocation(y,u.total,D,S),H=c(j,_,b,w);H<E&&(E=H,P=j,I=D)}if(E>2*o.MAXCOST)break;R&&(C/=2),M=(T=I-C/2)+1.5*C}if(E<=o.MAXCOST)return P},Q.addLabelData=function(y,u,_,b){var w=u.fontSize,T=u.width+w/3,C=Math.max(0,u.height-w/3),M=y.x,I=y.y,P=y.theta,S=Math.sin(P),E=Math.cos(P),R=function(j,H){return[M+j*E-H*S,I+j*S+H*E]},D=[R(-T/2,-C/2),R(-T/2,C/2),R(T/2,C/2),R(T/2,-C/2)];_.push({text:u.text,x:M,y:I,dy:u.dy,theta:P,level:u.level,width:T,height:C}),b.push(D)},Q.drawLabels=function(y,u,_,b,w){var T=y.selectAll("text").data(u,function(I){return I.text+","+I.x+","+I.y+","+I.theta});if(T.exit().remove(),T.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(I){var P=I.x+Math.sin(I.theta)*I.dy,S=I.y-Math.cos(I.theta)*I.dy;m.select(this).text(I.text).attr({x:P,y:S,transform:"rotate("+180*I.theta/Math.PI+" "+P+" "+S+")"}).call(e.convertToTspans,_)}),w){for(var C="",M=0;M<w.length;M++)C+="M"+w[M].join("L")+"Z";g.ensureSingle(b,"path","").attr("d",C)}}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/set_convert":585,"../heatmap/plot":813,"./close_boundaries":746,"./constants":748,"./convert_to_constraints":752,"./empty_pathinfo":754,"./find_all_paths":756,"./make_crossings":761,"@plotly/d3":58}],763:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes"),g=v("../../lib");function k(x,e,n){var i={type:"linear",range:[x,e]};return m.autoTicks(i,(e-x)/(n||15)),i}$.exports=function(x,e){var n=x.contours;if(x.autocontour){var i=x.zmin,l=x.zmax;(x.zauto||void 0===i)&&(i=g.aggNums(Math.min,null,e)),(x.zauto||void 0===l)&&(l=g.aggNums(Math.max,null,e));var r=k(i,l,x.ncontours);n.size=r.dtick,n.start=m.tickFirst(r),r.range.reverse(),n.end=m.tickFirst(r),n.start===i&&(n.start+=n.size),n.end===l&&(n.end-=n.size),n.start>n.end&&(n.start=n.end=(n.start+n.end)/2),x._input.contours||(x._input.contours={}),g.extendFlat(x._input.contours,{start:n.start,end:n.end,size:n.size}),x._input.autocontour=!0}else if("constraint"!==n.type){var d,f=n.start,t=n.end,h=x._input.contours;f>t&&(n.start=h.start=t,t=n.end=h.end=f,f=n.start),!(n.size>0)&&(d=f===t?1:k(f,t,x.ncontours).dtick,h.size=n.size=d)}}},{"../../lib":515,"../../plots/cartesian/axes":566}],764:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/drawing"),k=v("../heatmap/style"),x=v("./make_color_map");$.exports=function(e){var n=m.select(e).selectAll("g.contour");n.style("opacity",function(i){return i[0].trace.opacity}),n.each(function(i){var l=m.select(this),r=i[0].trace,d=r.contours,f=r.line,t=d.size||1,h=d.start,s="constraint"===d.type,o=!s&&"lines"===d.coloring,p=!s&&"fill"===d.coloring,c=o||p?x(r):null;l.selectAll("g.contourlevel").each(function(u){m.select(this).selectAll("path").call(g.lineGroupStyle,f.width,o?c(u.level):f.color,f.dash)});var a=d.labelfont;if(l.selectAll("g.contourlabels text").each(function(u){g.font(m.select(this),{family:a.family,size:a.size,color:a.color||(o?c(u.level):f.color)})}),s)l.selectAll("g.contourfill path").style("fill",r.fillcolor);else if(p){var y;l.selectAll("g.contourfill path").style("fill",function(u){return void 0===y&&(y=u.level),c(u.level+.5*t)}),void 0===y&&(y=h),l.selectAll("g.contourbg path").style("fill",c(y-.5*t))}}),k(e)}},{"../../components/drawing":389,"../heatmap/style":814,"./make_color_map":760,"@plotly/d3":58}],765:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/defaults"),g=v("./label_defaults");$.exports=function(k,x,e,n,i){var l,r=e("contours.coloring"),d="";"fill"===r&&(l=e("contours.showlines")),!1!==l&&("lines"!==r&&(d=e("line.color","#000")),e("line.width",.5),e("line.dash")),"none"!==r&&(!0!==k.showlegend&&(x.showlegend=!1),x._dfltShowLegend=!1,m(k,x,n,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),g(e,n,d,i)}},{"../../components/colorscale/defaults":377,"./label_defaults":759}],766:[function(v,$,Q){"use strict";var m=v("../heatmap/attributes"),g=v("../contour/attributes"),k=v("../../components/colorscale/attributes"),x=v("../../lib/extend").extendFlat,e=g.contours;$.exports=x({carpet:{valType:"string",editType:"calc"},z:m.z,a:m.x,a0:m.x0,da:m.dx,b:m.y,b0:m.y0,db:m.dy,text:m.text,hovertext:m.hovertext,transpose:m.transpose,atype:m.xtype,btype:m.ytype,fillcolor:g.fillcolor,autocontour:g.autocontour,ncontours:g.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:g.line.color,width:g.line.width,dash:g.line.dash,smoothing:g.line.smoothing,editType:"plot"},transforms:void 0},k("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../contour/attributes":744,"../heatmap/attributes":801}],767:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/calc"),g=v("../../lib"),k=v("../heatmap/convert_column_xyz"),x=v("../heatmap/clean_2d_array"),e=v("../heatmap/interp2d"),n=v("../heatmap/find_empties"),i=v("../heatmap/make_bound_array"),l=v("./defaults"),r=v("../carpet/lookup_carpetid"),d=v("../contour/set_contours");$.exports=function(f,t){var h=t._carpetTrace=r(f,t);if(h&&h.visible&&"legendonly"!==h.visible){if(!t.a||!t.b){var s=f.data[h.index],o=f.data[t.index];o.a||(o.a=s.a),o.b||(o.b=s.b),l(o,t,t._defaultColor,f._fullLayout)}var p=function(c,a){var y,u,_,b,w,T,C,M=a._carpetTrace,I=M.aaxis,P=M.baxis;I._minDtick=0,P._minDtick=0,g.isArray1D(a.z)&&k(a,I,P,"a","b",["z"]),y=a._a=a._a||a.a,b=a._b=a._b||a.b,y=y?I.makeCalcdata(a,"_a"):[],b=b?P.makeCalcdata(a,"_b"):[],u=a.a0||0,_=a.da||1,w=a.b0||0,T=a.db||1,C=a._z=x(a._z||a.z,a.transpose),a._emptypoints=n(C),e(C,a._emptypoints);var S=g.maxRowLength(C),H={a:i(a,"scaled"===a.xtype?"":y,u,_,S,I),b:i(a,"scaled"===a.ytype?"":b,w,T,C.length,P),z:C};return"levels"===a.contours.type&&"none"!==a.contours.coloring&&m(c,a,{vals:C,containerStr:"",cLetter:"z"}),[H]}(f,t);return d(t,t._z),p}}},{"../../components/colorscale/calc":375,"../../lib":515,"../carpet/lookup_carpetid":717,"../contour/set_contours":763,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"../heatmap/find_empties":807,"../heatmap/interp2d":810,"../heatmap/make_bound_array":812,"./defaults":768}],768:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../heatmap/xyz_defaults"),k=v("./attributes"),x=v("../contour/constraint_defaults"),e=v("../contour/contours_defaults"),n=v("../contour/style_defaults");$.exports=function(i,l,r,d){function f(t,h){return m.coerce(i,l,k,t,h)}if(f("carpet"),i.a&&i.b){if(!g(i,l,f,d,"a","b"))return void(l.visible=!1);f("text"),"constraint"===f("contours.type")?x(i,l,f,d,r,{hasHover:!1}):(e(i,l,f,function(t){return m.coerce2(i,l,k,t)}),n(i,l,f,d,{hasHover:!1}))}else l._defaultColor=r,l._length=null}},{"../../lib":515,"../contour/constraint_defaults":749,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/xyz_defaults":816,"./attributes":766}],769:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../contour/colorbar"),calc:v("./calc"),plot:v("./plot"),style:v("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"../contour/colorbar":747,"../contour/style":764,"./attributes":766,"./calc":767,"./defaults":768,"./plot":770}],770:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../carpet/map_1d_array"),k=v("../carpet/makepath"),x=v("../../components/drawing"),e=v("../../lib"),n=v("../contour/make_crossings"),i=v("../contour/find_all_paths"),l=v("../contour/plot"),r=v("../contour/constants"),d=v("../contour/convert_to_constraints"),f=v("../contour/empty_pathinfo"),t=v("../contour/close_boundaries"),h=v("../carpet/lookup_carpetid"),s=v("../carpet/axis_aligned_line");function o(a,y,u){var _=a.getPointAtLength(y),b=a.getPointAtLength(u),w=b.x-_.x,T=b.y-_.y,C=Math.sqrt(w*w+T*T);return[w/C,T/C]}function p(a){var y=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return[a[0]/y,a[1]/y]}function c(a,y){var u=Math.abs(a[0]*y[0]+a[1]*y[1]);return Math.sqrt(1-u*u)/u}$.exports=function(a,y,u,_){var b=y.xaxis,w=y.yaxis;e.makeTraceGroups(_,u,"contour").each(function(T){var C=m.select(this),M=T[0],I=M.trace,P=I._carpetTrace=h(a,I),S=a.calcdata[P.index][0];if(P.visible&&"legendonly"!==P.visible){var E=M.a,R=M.b,D=I.contours,j=f(D,y,M),H="constraint"===D.type,Y=D._operation,X=H?"="===Y?"lines":"fill":D.coloring,Z=[[E[0],R[R.length-1]],[E[E.length-1],R[R.length-1]],[E[E.length-1],R[0]],[E[0],R[0]]];n(j),i(j,1e-8*(E[E.length-1]-E[0]),1e-8*(R[R.length-1]-R[0]));var U,B,V,ee,N=j;"constraint"===D.type&&(N=d(j,Y)),function(ae,le){var se,ve,ue,ye,Me,pe,ge,we,oe;for(se=0;se<ae.length;se++){for(Me=(ye=ae[se]).pedgepaths=[],pe=ye.ppaths=[],ve=0;ve<ye.edgepaths.length;ve++){for(oe=ye.edgepaths[ve],ge=[],ue=0;ue<oe.length;ue++)ge[ue]=le(oe[ue]);Me.push(ge)}for(ve=0;ve<ye.paths.length;ve++){for(oe=ye.paths[ve],we=[],ue=0;ue<oe.length;ue++)we[ue]=le(oe[ue]);pe.push(we)}}}(j,te);var K=[];for(ee=S.clipsegments.length-1;ee>=0;ee--)B=g([],(U=S.clipsegments[ee]).x,b.c2p),V=g([],U.y,w.c2p),B.reverse(),V.reverse(),K.push(k(B,V,U.bicubic));var J="M"+K.join("L")+"Z";(function(ae,le,se,ve,ue,ye){var Me,pe,ge,we,oe=e.ensureSingle(ae,"g","contourbg").selectAll("path").data("fill"!==ye||ue?[]:[0]);oe.enter().append("path"),oe.exit().remove();var de=[];for(we=0;we<le.length;we++)pe=g([],(Me=le[we]).x,se.c2p),ge=g([],Me.y,ve.c2p),de.push(k(pe,ge,Me.bicubic));oe.attr("d","M"+de.join("L")+"Z").style("stroke","none")})(C,S.clipsegments,b,w,H,X),function(ae,le,se,ve,ue,ye,Me,pe,ge,we,oe){var de="fill"===we;de&&t(ue,ae.contours);var Te=e.ensureSingle(le,"g","contourfill").selectAll("path").data(de?ue:[]);Te.enter().append("path"),Te.exit().remove(),Te.each(function(Ee){var Ae=(Ee.prefixBoundary?oe:"")+function(De,Ie,Oe,Xe,Fe,Pe,Re,qe){var Qe,ct,bt,Tt,_t,nt,Ke,xt="",Ht=Ie.edgepaths.map(function(Ve,Je){return Je}),Zt=!0,$t=1e-4*Math.abs(Oe[0][0]-Oe[2][0]),Xt=1e-4*Math.abs(Oe[0][1]-Oe[2][1]);function cr(Ve){return Math.abs(Ve[1]-Oe[0][1])<Xt}function Ft(Ve){return Math.abs(Ve[1]-Oe[2][1])<Xt}function Be(Ve){return Math.abs(Ve[0]-Oe[0][0])<$t}function He(Ve){return Math.abs(Ve[0]-Oe[2][0])<$t}function he(Ve,Je){var Ye,lt,st,Mt,Dt="";for(cr(Ve)&&!He(Ve)||Ft(Ve)&&!Be(Ve)?(Mt=Fe.aaxis,st=s(Fe,Pe,[Ve[0],Je[0]],.5*(Ve[1]+Je[1]))):(Mt=Fe.baxis,st=s(Fe,Pe,.5*(Ve[0]+Je[0]),[Ve[1],Je[1]])),Ye=1;Ye<st.length;Ye++)for(Dt+=Mt.smoothing?"C":"L",lt=0;lt<st[Ye].length;lt++){var ht=st[Ye][lt];Dt+=[Re.c2p(ht[0]),qe.c2p(ht[1])]+" "}return Dt}for(Qe=0,ct=null;Ht.length;){for(ct&&(xt+=he(ct,Ie.edgepaths[Qe][0])),Ke=x.smoothopen(Ie.edgepaths[Qe].map(Xe),Ie.smoothing),xt+=Zt?Ke:Ke.replace(/^M/,"L"),Ht.splice(Ht.indexOf(Qe),1),ct=Ie.edgepaths[Qe][Ie.edgepaths[Qe].length-1],_t=-1,Tt=0;Tt<4;Tt++){if(!ct){e.log("Missing end?",Qe,Ie);break}for(cr(ct)&&!He(ct)?bt=Oe[1]:Be(ct)?bt=Oe[0]:Ft(ct)?bt=Oe[3]:He(ct)&&(bt=Oe[2]),nt=0;nt<Ie.edgepaths.length;nt++){var ze=Ie.edgepaths[nt][0];Math.abs(ct[0]-bt[0])<$t?Math.abs(ct[0]-ze[0])<$t&&(ze[1]-ct[1])*(bt[1]-ze[1])>=0&&(bt=ze,_t=nt):Math.abs(ct[1]-bt[1])<Xt?Math.abs(ct[1]-ze[1])<Xt&&(ze[0]-ct[0])*(bt[0]-ze[0])>=0&&(bt=ze,_t=nt):e.log("endpt to newendpt is not vert. or horz.",ct,bt,ze)}if(_t>=0)break;xt+=he(ct,bt),ct=bt}if(_t===Ie.edgepaths.length){e.log("unclosed perimeter path");break}(Zt=-1===Ht.indexOf(Qe=_t))&&(Qe=Ht[0],xt+=he(ct,bt)+"Z",ct=null)}for(Qe=0;Qe<Ie.paths.length;Qe++)xt+=x.smoothclosed(Ie.paths[Qe].map(Xe),Ie.smoothing);return xt}(0,Ee,ye,Me,pe,ge,se,ve);Ae?m.select(this).attr("d",Ae).style("stroke","none"):m.select(this).remove()})}(I,C,b,w,N,Z,te,P,S,X,J),function(ae,le,se,ve,ue,ye,Me){var pe=e.ensureSingle(ae,"g","contourlines"),ge=!1!==ue.showlines,we=ue.showlabels,oe=ge&&we,de=l.createLines(pe,ge||we,le),Te=l.createLineClip(pe,oe,se,ve.trace.uid),Ee=ae.selectAll("g.contourlabels").data(we?[0]:[]);if(Ee.exit().remove(),Ee.enter().append("g").classed("contourlabels",!0),we){var Ie=ye.xaxis._length,Oe=ye.yaxis._length,Xe=[[[0,0],[Ie,0],[Ie,Oe],[0,Oe]]],Fe=[];e.clearLocationCache();var Pe=l.labelFormatter(se,ve),Re=x.tester.append("text").attr("data-notex",1).call(x.font,ue.labelfont),qe={left:0,right:Ie,center:Ie/2,top:0,bottom:Oe,middle:Oe/2},Qe=Math.sqrt(Ie*Ie+Oe*Oe),ct=r.LABELDISTANCE*Qe/Math.max(1,le.length/r.LABELINCREASE);de.each(function(bt){var Tt=l.calcTextOpts(bt.level,Pe,Re,se);m.select(this).selectAll("path").each(function(_t){var nt=e.getVisibleSegment(this,qe,Tt.height/2);if(nt&&(function(Zt,$t,Xt,cr,Ft,Be){for(var He,he=0;he<Xt.pedgepaths.length;he++)$t===Xt.pedgepaths[he]&&(He=Xt.edgepaths[he]);if(He){var be=Ft.a[0],ze=Ft.a[Ft.a.length-1],Ve=Ft.b[0],Je=Ft.b[Ft.b.length-1],lt=o(Zt,0,1),st=o(Zt,cr.total,cr.total-1),Mt=Ye(He[0],lt),Dt=cr.total-Ye(He[He.length-1],st);cr.min<Mt&&(cr.min=Mt),cr.max>Dt&&(cr.max=Dt),cr.len=cr.max-cr.min}function Ye(ht,mt){var Ot,At=0;return(Math.abs(ht[0]-be)<.1||Math.abs(ht[0]-ze)<.1)&&(Ot=p(Ft.dxydb_rough(ht[0],ht[1],.1)),At=Math.max(At,Be*c(mt,Ot)/2)),(Math.abs(ht[1]-Ve)<.1||Math.abs(ht[1]-Je)<.1)&&(Ot=p(Ft.dxyda_rough(ht[0],ht[1],.1)),At=Math.max(At,Be*c(mt,Ot)/2)),At}}(this,_t,bt,nt,Me,Tt.height),!(nt.len<(Tt.width+Tt.height)*r.LABELMIN)))for(var Ke=Math.min(Math.ceil(nt.len/ct),r.LABELMAX),xt=0;xt<Ke;xt++){var Ht=l.findBestTextLocation(this,nt,Tt,Fe,qe);if(!Ht)break;l.addLabelData(Ht,Tt,Fe,Xe)}})}),Re.remove(),l.drawLabels(Ee,Fe,se,Te,oe?Xe:null)}we&&!ge&&de.remove()}(C,j,a,M,D,y,P),x.setClipUrl(C,P._clipPathId,a)}function te(ae){var le=P.ab2xy(ae[0],ae[1],!0);return[b.c2p(le[0]),w.c2p(le[1])]}})}},{"../../components/drawing":389,"../../lib":515,"../carpet/axis_aligned_line":701,"../carpet/lookup_carpetid":717,"../carpet/makepath":718,"../carpet/map_1d_array":719,"../contour/close_boundaries":746,"../contour/constants":748,"../contour/convert_to_constraints":752,"../contour/empty_pathinfo":754,"../contour/find_all_paths":756,"../contour/make_crossings":761,"../contour/plot":762,"@plotly/d3":58}],771:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/attributes"),g=v("../../plots/template_attributes").hovertemplateAttrs,k=v("../../plots/attributes"),x=v("../scattermapbox/attributes"),e=v("../../lib/extend").extendFlat;$.exports=e({lon:x.lon,lat:x.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:x.text,hovertext:x.hovertext,hoverinfo:e({},k.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:g(),showlegend:e({},k.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattermapbox/attributes":1002}],772:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib").isArrayOrTypedArray,k=v("../../constants/numerical").BADNUM,x=v("../../components/colorscale/calc"),e=v("../../lib")._;$.exports=function(n,i){for(var l=i._length,r=new Array(l),d=i.z,f=g(d)&&d.length,t=0;t<l;t++){var h=r[t]={},s=i.lon[t],o=i.lat[t];if(h.lonlat=m(s)&&m(o)?[+s,+o]:[k,k],f){var p=d[t];h.z=m(p)?p:k}}return x(n,i,{vals:f?d:[0,1],containerStr:"",cLetter:"z"}),l&&(r[0].t={labels:{lat:e(n,"lat:")+" ",lon:e(n,"lon:")+" "}}),r}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],773:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib"),k=v("../../components/color"),x=v("../../components/colorscale"),e=v("../../constants/numerical").BADNUM,n=v("../../lib/geojson_utils").makeBlank;$.exports=function(i){var l=i[0].trace,r=!0===l.visible&&0!==l._length,d=l._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:n()};if(!r)return d;var f,t=[],h=l.z,s=l.radius,o=g.isArrayOrTypedArray(h)&&h.length,p=g.isArrayOrTypedArray(s);for(f=0;f<i.length;f++){var c=i[f],a=c.lonlat;if(a[0]!==e){var y={};if(o){var u=c.z;y.z=u!==e?u:0}p&&(y.r=m(s[f])&&s[f]>0?+s[f]:0),t.push({type:"Feature",geometry:{type:"Point",coordinates:a},properties:y})}}var _=x.extractOpts(l),b=_.reversescale?x.flipScale(_.colorscale):_.colorscale,w=b[0][1],T=["interpolate",["linear"],["heatmap-density"],0,k.opacity(w)<1?w:k.addOpacity(w,0)];for(f=1;f<b.length;f++)T.push(b[f][0],b[f][1]);return g.extendFlat(d.heatmap.paint,{"heatmap-weight":o?["interpolate",["linear"],["get","z"],_.min,0,_.max,1]:1/(_.max-_.min),"heatmap-color":T,"heatmap-radius":p?{type:"identity",property:"r"}:l.radius,"heatmap-opacity":l.opacity}),d.geojson={type:"FeatureCollection",features:t},d.heatmap.layout.visibility="visible",d}},{"../../components/color":367,"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"fast-isnumeric":190}],774:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/colorscale/defaults"),k=v("./attributes");$.exports=function(x,e,n,i){function l(t,h){return m.coerce(x,e,k,t,h)}var r=l("lon")||[],d=l("lat")||[],f=Math.min(r.length,d.length);f?(e._length=f,l("z"),l("radius"),l("below"),l("text"),l("hovertext"),l("hovertemplate"),g(x,e,i,l,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":771}],775:[function(v,$,Q){"use strict";$.exports=function(m,g){return m.lon=g.lon,m.lat=g.lat,m.z=g.z,m}},{}],776:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes"),g=v("../scattermapbox/hover").hoverPoints,k=v("../scattermapbox/hover").getExtraText;$.exports=function(x,e,n){var i=g(x,e,n);if(i){var l=i[0],r=l.cd,d=r[0].trace,f=r[l.index];if(delete l.color,"z"in f){var t=l.subplot.mockAxis;l.z=f.z,l.zLabel=m.tickText(t,t.c2l(f.z),"hover").text}return l.extraText=k(d,f,r[0].t.labels),[l]}}},{"../../plots/cartesian/axes":566,"../scattermapbox/hover":1007}],777:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),formatLabels:v("../scattermapbox/format_labels"),calc:v("./calc"),plot:v("./plot"),hoverPoints:v("./hover"),eventData:v("./event_data"),getBelow:function(m,g){for(var k=g.getMapLayers(),x=0;x<k.length;x++){var e=k[x],n=e.id;if("symbol"===e.type&&"string"==typeof n&&-1===n.indexOf("plotly-"))return n}},moduleType:"trace",name:"densitymapbox",basePlotModule:v("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":622,"../heatmap/colorbar":804,"../scattermapbox/format_labels":1006,"./attributes":771,"./calc":772,"./defaults":774,"./event_data":775,"./hover":776,"./plot":778}],778:[function(v,$,Q){"use strict";var m=v("./convert"),g=v("../../plots/mapbox/constants").traceLayerPrefix;function k(e,n){this.type="densitymapbox",this.subplot=e,this.uid=n,this.sourceId="source-"+n,this.layerList=[["heatmap",g+n+"-heatmap"]],this.below=null}var x=k.prototype;x.update=function(e){var n=this.subplot,i=this.layerList,l=m(e),r=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(l.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(l,r),this.below=r);for(var d=0;d<i.length;d++){var f=i[d],h=f[1],s=l[f[0]];n.setOptions(h,"setLayoutProperty",s.layout),"visible"===s.layout.visibility&&n.setOptions(h,"setPaintProperty",s.paint)}},x._addLayers=function(e,n){for(var i=this.subplot,l=this.layerList,r=this.sourceId,d=0;d<l.length;d++){var f=l[d],t=f[0],h=e[t];i.addLayer({type:t,id:f[1],source:r,layout:h.layout,paint:h.paint},n)}},x._removeLayers=function(){for(var e=this.subplot.map,n=this.layerList,i=n.length-1;i>=0;i--)e.removeLayer(n[i][1])},x.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},$.exports=function(e,n){var i=n[0].trace,l=new k(e,i.uid),r=l.sourceId,d=m(n),f=l.below=e.belowLookup["trace-"+i.uid];return e.map.addSource(r,{type:"geojson",data:d.geojson}),l._addLayers(d,f),l}},{"../../plots/mapbox/constants":620,"./convert":773}],779:[function(v,$,Q){"use strict";var m=v("../../lib");$.exports=function(g,k){for(var x=0;x<g.length;x++)g[x].i=x;m.mergeArray(k.text,g,"tx"),m.mergeArray(k.hovertext,g,"htx");var e=k.marker;if(e){m.mergeArray(e.opacity,g,"mo"),m.mergeArray(e.color,g,"mc");var n=e.line;n&&(m.mergeArray(n.color,g,"mlc"),m.mergeArrayCastPositive(n.width,g,"mlw"))}}},{"../../lib":515}],780:[function(v,$,Q){"use strict";var m,g=v("../bar/attributes"),k=v("../scatter/attributes").line,x=v("../../plots/attributes"),e=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=v("../../plots/template_attributes").hovertemplateAttrs,i=v("../../plots/template_attributes").texttemplateAttrs,l=v("./constants"),r=v("../../lib/extend").extendFlat,d=v("../../components/color");$.exports={x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:g.hovertext,hovertemplate:n({},{keys:l.eventDataKeys}),hoverinfo:r({},x.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:i({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),text:g.text,textposition:g.textposition,insidetextanchor:r({},g.insidetextanchor,{dflt:"middle"}),textangle:r({},g.textangle,{dflt:0}),textfont:g.textfont,insidetextfont:g.insidetextfont,outsidetextfont:g.outsidetextfont,constraintext:g.constraintext,cliponaxis:g.cliponaxis,orientation:r({},g.orientation,{}),offset:r({},g.offset,{arrayOk:!1}),width:r({},g.width,{arrayOk:!1}),marker:(m=r({},g.marker),delete m.pattern,m),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:r({},k.color,{dflt:d.defaultLine}),width:r({},k.width,{dflt:0,editType:"plot"}),dash:k.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":782}],781:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes"),g=v("../../plots/cartesian/align_period"),k=v("./arrays_to_calcdata"),x=v("../scatter/calc_selection"),e=v("../../constants/numerical").BADNUM;function n(i){return i===e?0:i}$.exports=function(i,l){var r,d,f,t,h,s,o,p,c=m.getFromId(i,l.xaxis||"x"),a=m.getFromId(i,l.yaxis||"y");"h"===l.orientation?(r=c.makeCalcdata(l,"x"),f=a.makeCalcdata(l,"y"),t=g(l,a,"y",f),h=!!l.yperiodalignment,s="y"):(r=a.makeCalcdata(l,"y"),f=c.makeCalcdata(l,"x"),t=g(l,c,"x",f),h=!!l.xperiodalignment,s="x"),d=t.vals;var y,u=Math.min(d.length,r.length),_=new Array(u);for(l._base=[],o=0;o<u;o++){r[o]<0&&(r[o]=e);var b=!1;r[o]!==e&&o+1<u&&r[o+1]!==e&&(b=!0),p=_[o]={p:d[o],s:r[o],cNext:b},l._base[o]=-.5*p.s,h&&(_[o].orig_p=f[o],_[o][s+"End"]=t.ends[o],_[o][s+"Start"]=t.starts[o]),l.ids&&(p.id=String(l.ids[o])),0===o&&(_[0].vTotal=0),_[0].vTotal+=n(p.s),p.begR=n(p.s)/n(_[0].s)}for(o=0;o<u;o++)(p=_[o]).s!==e&&(p.sumR=p.s/_[0].vTotal,p.difR=void 0!==y?p.s/y:1,y=p.s);return k(_,l),x(_,l),_}},{"../../constants/numerical":491,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":779}],782:[function(v,$,Q){"use strict";$.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],783:[function(v,$,Q){"use strict";var m=v("../bar/cross_trace_calc").setGroupPositions;$.exports=function(g,k){var x,e,n=g._fullLayout,i=g._fullData,l=g.calcdata,r=k.xaxis,d=k.yaxis,f=[],t=[],h=[];for(e=0;e<i.length;e++){var s=i[e];!0===s.visible&&s.xaxis===r._id&&s.yaxis===d._id&&"funnel"===s.type&&(x=l[e],"h"===s.orientation?h.push(x):t.push(x),f.push(x))}var p={mode:n.funnelmode,norm:n.funnelnorm,gap:n.funnelgap,groupgap:n.funnelgroupgap};for(m(g,r,d,t,p),m(g,d,r,h,p),e=0;e<f.length;e++){x=f[e];for(var c=0;c<x.length;c++)c+1<x.length&&(x[c].nextP0=x[c+1].p0,x[c].nextS0=x[c+1].s0,x[c].nextP1=x[c+1].p1,x[c].nextS1=x[c+1].s1)}}},{"../bar/cross_trace_calc":660}],784:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../bar/defaults").handleGroupingDefaults,k=v("../bar/defaults").handleText,x=v("../scatter/xy_defaults"),e=v("../scatter/period_defaults"),n=v("./attributes"),i=v("../../components/color");$.exports={supplyDefaults:function(l,r,d,f){function t(p,c){return m.coerce(l,r,n,p,c)}if(x(l,r,f,t)){e(l,r,f,t),t("xhoverformat"),t("yhoverformat"),t("orientation",r.y&&!r.x?"v":"h"),t("offset"),t("width");var h=t("text");t("hovertext"),t("hovertemplate");var s=t("textposition");k(l,r,f,t,s,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===r.textposition||r.texttemplate||t("textinfo",Array.isArray(h)?"text+value":"value");var o=t("marker.color",d);t("marker.line.color",i.defaultLine),t("marker.line.width"),t("connector.visible")&&(t("connector.fillcolor",(c=m.isArrayOrTypedArray(p=o)?"#000":p,i.addOpacity(c,.5*i.opacity(c)))),t("connector.line.width")&&(t("connector.line.color"),t("connector.line.dash")))}else r.visible=!1;var p,c},crossTraceDefaults:function(l,r){var d,f;function t(s){return m.coerce(f._input,f,n,s)}if("group"===r.funnelmode)for(var h=0;h<l.length;h++)d=(f=l[h])._input,g(d,f,r,t)}}},{"../../components/color":367,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":780}],785:[function(v,$,Q){"use strict";$.exports=function(m,g){return m.x="xVal"in g?g.xVal:g.x,m.y="yVal"in g?g.yVal:g.y,"percentInitial"in g&&(m.percentInitial=g.percentInitial),"percentPrevious"in g&&(m.percentPrevious=g.percentPrevious),"percentTotal"in g&&(m.percentTotal=g.percentTotal),g.xa&&(m.xaxis=g.xa),g.ya&&(m.yaxis=g.ya),m}},{}],786:[function(v,$,Q){"use strict";var m=v("../../components/color").opacity,g=v("../bar/hover").hoverOnBars,k=v("../../lib").formatPercent;$.exports=function(x,e,n,i,l){var u,_,b,w,T,r=g(x,e,n,i,l);if(r){var d=r.cd,f=d[0].trace,h=d[r.index];r[("h"===f.orientation?"x":"y")+"LabelVal"]=h.s,r.percentInitial=h.begR,r.percentInitialLabel=k(h.begR,1),r.percentPrevious=h.difR,r.percentPreviousLabel=k(h.difR,1),r.percentTotal=h.sumR,r.percentTotalLabel=k(h.sumR,1);var s=h.hi||f.hoverinfo,o=[];if(s&&"none"!==s&&"skip"!==s){var p="all"===s,c=s.split("+"),a=function(y){return p||-1!==c.indexOf(y)};a("percent initial")&&o.push(r.percentInitialLabel+" of initial"),a("percent previous")&&o.push(r.percentPreviousLabel+" of previous"),a("percent total")&&o.push(r.percentTotalLabel+" of total")}return r.extraText=o.join("<br>"),r.color=(_=f.marker,w=(u=h).mlc||_.line.color,T=u.mlw||_.line.width,m(b=u.mc||_.color)?b:m(w)&&T?w:void 0),[r]}}},{"../../components/color":367,"../../lib":515,"../bar/hover":664}],787:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc"),plot:v("./plot"),style:v("./style").style,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":780,"./calc":781,"./cross_trace_calc":783,"./defaults":784,"./event_data":785,"./hover":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(v,$,Q){"use strict";$.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],789:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./layout_attributes");$.exports=function(k,x,e){var n=!1;function i(d,f){return m.coerce(k,x,g,d,f)}for(var l=0;l<e.length;l++){var r=e[l];if(r.visible&&"funnel"===r.type){n=!0;break}}n&&(i("funnelmode"),i("funnelgap",.2),i("funnelgroupgap"))}},{"../../lib":515,"./layout_attributes":788}],790:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=v("../../components/drawing"),x=v("../../constants/numerical").BADNUM,e=v("../bar/plot"),n=v("../bar/uniform_text").clearMinTextSize;function i(l,r,d,f){var t=[],h=[],s=f?r:d,o=f?d:r;return t[0]=s.c2p(l.s0,!0),h[0]=o.c2p(l.p0,!0),t[1]=s.c2p(l.s1,!0),h[1]=o.c2p(l.p1,!0),t[2]=s.c2p(l.nextS0,!0),h[2]=o.c2p(l.nextP0,!0),t[3]=s.c2p(l.nextS1,!0),h[3]=o.c2p(l.nextP1,!0),f?[t,h]:[h,t]}$.exports=function(l,r,d,f){var h,s,c,a,t=l._fullLayout;n("funnel",t),h=l,c=(s=r).xaxis,a=s.yaxis,g.makeTraceGroups(f,d,"trace bars").each(function(y){var u=m.select(this),_=y[0].trace,b=g.ensureSingle(u,"g","regions");if(_.connector&&_.connector.visible){var w="h"===_.orientation,T=b.selectAll("g.region").data(g.identity);T.enter().append("g").classed("region",!0),T.exit().remove();var C=T.size();T.each(function(M,I){if(I===C-1||M.cNext){var P=i(M,c,a,w),S=P[0],E=P[1],R="";S[0]!==x&&E[0]!==x&&S[1]!==x&&E[1]!==x&&S[2]!==x&&E[2]!==x&&S[3]!==x&&E[3]!==x&&(R+=w?"M"+S[0]+","+E[1]+"L"+S[2]+","+E[2]+"H"+S[3]+"L"+S[1]+","+E[1]+"Z":"M"+S[1]+","+E[1]+"L"+S[2]+","+E[3]+"V"+E[2]+"L"+S[1]+","+E[0]+"Z"),""===R&&(R="M0,0Z"),g.ensureSingle(m.select(this),"path").attr("d",R).call(k.setClipUrl,s.layerClipId,h)}})}else b.remove()}),function(h,s,o,p){var c=s.xaxis,a=s.yaxis;g.makeTraceGroups(p,o,"trace bars").each(function(y){var u=m.select(this),_=y[0].trace,b=g.ensureSingle(u,"g","lines");if(_.connector&&_.connector.visible&&_.connector.line.width){var w="h"===_.orientation,T=b.selectAll("g.line").data(g.identity);T.enter().append("g").classed("line",!0),T.exit().remove();var C=T.size();T.each(function(M,I){if(I===C-1||M.cNext){var P=i(M,c,a,w),S=P[0],E=P[1],R="";void 0!==S[3]&&void 0!==E[3]&&(w?(R+="M"+S[0]+","+E[1]+"L"+S[2]+","+E[2],R+="M"+S[1]+","+E[1]+"L"+S[3]+","+E[2]):(R+="M"+S[1]+","+E[1]+"L"+S[2]+","+E[3],R+="M"+S[1]+","+E[0]+"L"+S[2]+","+E[2])),""===R&&(R="M0,0Z"),g.ensureSingle(m.select(this),"path").attr("d",R).call(k.setClipUrl,s.layerClipId,h)}})}else b.remove()})}(l,r,d,f),e.plot(l,r,d,f,{mode:t.funnelmode,norm:t.funnelmode,gap:t.funnelgap,groupgap:t.funnelgroupgap})}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],791:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/drawing"),k=v("../../components/color"),x=v("../../constants/interactions").DESELECTDIM,e=v("../bar/style"),n=v("../bar/uniform_text").resizeText,i=e.styleTextPoints;$.exports={style:function(l,r,d){var f=d||m.select(l).selectAll("g.funnellayer").selectAll("g.trace");n(l,f,"funnel"),f.style("opacity",function(t){return t[0].trace.opacity}),f.each(function(t){var h=m.select(this),s=t[0].trace;h.selectAll(".point > path").each(function(o){if(!o.isBlank){var p=s.marker;m.select(this).call(k.fill,o.mc||p.color).call(k.stroke,o.mlc||p.line.color).call(g.dashLine,p.line.dash,o.mlw||p.line.width).style("opacity",s.selectedpoints&&!o.selected?x:1)}}),i(h,s,l),h.selectAll(".regions").each(function(){m.select(this).selectAll("path").style("stroke-width",0).call(k.fill,s.connector.fillcolor)}),h.selectAll(".lines").each(function(){var o=s.connector.line;g.lineGroupStyle(m.select(this).selectAll("path"),o.width,o.color,o.dash)})})}}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],792:[function(v,$,Q){"use strict";var m=v("../pie/attributes"),g=v("../../plots/attributes"),k=v("../../plots/domain").attributes,x=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../../plots/template_attributes").texttemplateAttrs,n=v("../../lib/extend").extendFlat;$.exports={labels:m.labels,label0:m.label0,dlabel:m.dlabel,values:m.values,marker:{colors:m.marker.colors,line:{color:n({},m.marker.line.color,{dflt:null}),width:n({},m.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:m.text,hovertext:m.hovertext,scalegroup:n({},m.scalegroup,{}),textinfo:n({},m.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:n({},g.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:x({},{keys:["label","color","value","text","percent"]}),textposition:n({},m.textposition,{values:["inside","none"],dflt:"inside"}),textfont:m.textfont,insidetextfont:m.insidetextfont,title:{text:m.title.text,font:m.title.font,position:n({},m.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:k({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910}],793:[function(v,$,Q){"use strict";var m=v("../../plots/plots");Q.name="funnelarea",Q.plot=function(g,k,x,e){m.plotBasePlot(Q.name,g,k,x,e)},Q.clean=function(g,k,x,e){m.cleanBasePlot(Q.name,g,k,x,e)}},{"../../plots/plots":628}],794:[function(v,$,Q){"use strict";var m=v("../pie/calc");$.exports={calc:function(g,k){return m.calc(g,k)},crossTraceCalc:function(g){m.crossTraceCalc(g,{type:"funnelarea"})}}},{"../pie/calc":912}],795:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./attributes"),k=v("../../plots/domain").defaults,x=v("../bar/defaults").handleText,e=v("../pie/defaults").handleLabelsAndValues;$.exports=function(n,i,l,r){function d(y,u){return m.coerce(n,i,g,y,u)}var f=d("labels"),t=d("values"),h=e(f,t),s=h.len;if(i._hasLabels=h.hasLabels,i._hasValues=h.hasValues,!i._hasLabels&&i._hasValues&&(d("label0"),d("dlabel")),s){i._length=s,d("marker.line.width")&&d("marker.line.color",r.paper_bgcolor),d("marker.colors"),d("scalegroup");var o,p=d("text"),c=d("texttemplate");if(c||(o=d("textinfo",Array.isArray(p)?"text+percent":"percent")),d("hovertext"),d("hovertemplate"),c||o&&"none"!==o){var a=d("textposition");x(n,i,r,d,a,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}k(i,r,d),d("title.text")&&(d("title.position"),m.coerceFont(d,"title.font",r.font)),d("aspectratio"),d("baseratio")}else i.visible=!1}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"../pie/defaults":913,"./attributes":792}],796:[function(v,$,Q){"use strict";$.exports={moduleType:"trace",name:"funnelarea",basePlotModule:v("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),style:v("./style"),styleOne:v("../pie/style_one"),meta:{}}},{"../pie/style_one":921,"./attributes":792,"./base_plot":793,"./calc":794,"./defaults":795,"./layout_attributes":797,"./layout_defaults":798,"./plot":799,"./style":800}],797:[function(v,$,Q){"use strict";var m=v("../pie/layout_attributes").hiddenlabels;$.exports={hiddenlabels:m,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":917}],798:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./layout_attributes");$.exports=function(k,x){function e(n,i){return m.coerce(k,x,g,n,i)}e("hiddenlabels"),e("funnelareacolorway",x.colorway),e("extendfunnelareacolors")}},{"../../lib":515,"./layout_attributes":797}],799:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/drawing"),k=v("../../lib"),x=k.strScale,e=k.strTranslate,n=v("../../lib/svg_text_utils"),i=v("../bar/plot").toMoveInsideBar,l=v("../bar/uniform_text"),r=l.recordMinTextSize,d=l.clearMinTextSize,f=v("../pie/helpers"),t=v("../pie/plot"),h=t.attachFxHandlers,s=t.determineInsideTextFont,o=t.layoutAreas,p=t.prerenderTitles,c=t.positionTitleOutside,a=t.formatSliceLabel;function y(u,_){return"l"+(_[0]-u[0])+","+(_[1]-u[1])}$.exports=function(u,_){var b=u._context.staticPlot,w=u._fullLayout;d("funnelarea",w),p(_,u),o(_,w._size),k.makeTraceGroups(w._funnelarealayer,_,"trace").each(function(T){var C=m.select(this),M=T[0],I=M.trace;(function(P){if(P.length){var S=P[0],E=S.trace,R=E.aspectratio,D=E.baseratio;D>.999&&(D=.999);var j,re,U,H=Math.pow(D,2),Y=S.vTotal,X=Y,Z=Y*H/(1-H)/Y,B=[];for(B.push(W()),re=P.length-1;re>-1;re--)(U=P[re]).hidden||(Z+=U.v/X,B.push(W()));var ee=1/0,N=-1/0;for(re=0;re<B.length;re++)j=B[re],ee=Math.min(ee,j[1]),N=Math.max(N,j[1]);for(re=0;re<B.length;re++)B[re][1]-=(N+ee)/2;var J=S.r,te=(N-ee)/2,ae=J/B[B.length-1][0],le=J/te*R;for(S.r=le*te,re=0;re<B.length;re++)B[re][0]*=ae,B[re][1]*=le;var pe,ge,se=[-(j=B[0])[0],j[1]],ve=[j[0],j[1]],ue=0;for(re=P.length-1;re>-1;re--)if(!(U=P[re]).hidden){var ye=B[ue+=1][0],Me=B[ue][1];U.TL=[-ye,Me],U.TR=[ye,Me],U.BL=se,U.BR=ve,U.pxmid=[.5*((pe=U.TR)[0]+(ge=U.BR)[0]),.5*(pe[1]+ge[1])],se=U.TL,ve=U.TR}}function W(){var we,oe={x:we=Math.sqrt(Z),y:-we};return[oe.x,oe.y]}})(T),C.each(function(){var P=m.select(this).selectAll("g.slice").data(T);P.enter().append("g").classed("slice",!0),P.exit().remove(),P.each(function(E,R){if(E.hidden)m.select(this).selectAll("path,g").remove();else{E.pointNumber=E.i,E.curveNumber=I.index;var D=M.cx,j=M.cy,H=m.select(this),Y=H.selectAll("path.surface").data([E]);Y.enter().append("path").classed("surface",!0).style({"pointer-events":b?"none":"all"}),H.call(h,u,T);var X="M"+(D+E.TR[0])+","+(j+E.TR[1])+y(E.TR,E.BR)+y(E.BR,E.BL)+y(E.BL,E.TL)+"Z";Y.attr("d",X),a(u,E,M);var Z=f.castOption(I.textposition,E.pts),W=H.selectAll("g.slicetext").data(E.text&&"none"!==Z?[0]:[]);W.enter().append("g").classed("slicetext",!0),W.exit().remove(),W.each(function(){var re=k.ensureSingle(m.select(this),"text","",function(te){te.attr("data-notex",1)}),U=k.ensureUniformFontSize(u,s(I,E,w.font));re.text(E.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(g.font,U).call(n.convertToTspans,u);var B,V,ee,N=g.bBox(re.node()),K=Math.min(E.BL[1],E.BR[1])+j,J=Math.max(E.TL[1],E.TR[1])+j;V=Math.max(E.TL[0],E.BL[0])+D,ee=Math.min(E.TR[0],E.BR[0])+D,(B=i(V,ee,K,J,N,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=U.size,r(I.type,B,w),T[R].transform=B,k.setTransormAndDisplay(re,B)})}});var S=m.select(this).selectAll("g.titletext").data(I.title.text?[0]:[]);S.enter().append("g").classed("titletext",!0),S.exit().remove(),S.each(function(){var E=k.ensureSingle(m.select(this),"text","",function(j){j.attr("data-notex",1)}),R=I.title.text;I._meta&&(R=k.templateString(R,I._meta)),E.text(R).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(g.font,I.title.font).call(n.convertToTspans,u);var D=c(M,w._size);E.attr("transform",e(D.x,D.y)+x(Math.min(1,D.scale))+e(D.tx,D.ty))})})})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/plot":668,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"@plotly/d3":58}],800:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../pie/style_one"),k=v("../bar/uniform_text").resizeText;$.exports=function(x){var e=x._fullLayout._funnelarealayer.selectAll(".trace");k(x,e,"funnelarea"),e.each(function(n){var i=n[0].trace,l=m.select(this);l.style({opacity:i.opacity}),l.selectAll("path.surface").each(function(r){m.select(this).call(g,r,i)})})}},{"../bar/uniform_text":673,"../pie/style_one":921,"@plotly/d3":58}],801:[function(v,$,Q){"use strict";var m=v("../scatter/attributes"),g=v("../../plots/attributes"),k=v("../../plots/font_attributes"),x=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../plots/template_attributes").hovertemplateAttrs,n=v("../../plots/template_attributes").texttemplateAttrs,i=v("../../components/colorscale/attributes"),l=v("../../lib/extend").extendFlat;$.exports=l({z:{valType:"data_array",editType:"calc"},x:l({},m.x,{impliedEdits:{xtype:"array"}}),x0:l({},m.x0,{impliedEdits:{xtype:"scaled"}}),dx:l({},m.dx,{impliedEdits:{xtype:"scaled"}}),y:l({},m.y,{impliedEdits:{ytype:"array"}}),y0:l({},m.y0,{impliedEdits:{ytype:"scaled"}}),dy:l({},m.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:l({},m.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:l({},m.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:l({},m.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:l({},m.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:l({},m.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:l({},m.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:e(),texttemplate:n({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:k({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:l({},g.showlegend,{dflt:!1})},{transforms:void 0},i("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936}],802:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../lib"),k=v("../../plots/cartesian/axes"),x=v("../../plots/cartesian/align_period"),e=v("../histogram2d/calc"),n=v("../../components/colorscale/calc"),i=v("./convert_column_xyz"),l=v("./clean_2d_array"),r=v("./interp2d"),d=v("./find_empties"),f=v("./make_bound_array"),t=v("../../constants/numerical").BADNUM;function h(s){for(var o=[],p=s.length,c=0;c<p;c++){var a=s[c];a!==t&&o.push(a)}return o}$.exports=function(s,o){var p,c,a,y,u,_,b,w,T,C,M,I=k.getFromId(s,o.xaxis||"x"),P=k.getFromId(s,o.yaxis||"y"),S=m.traceIs(o,"contour"),E=m.traceIs(o,"histogram"),R=m.traceIs(o,"gl2d"),D=S?"best":o.zsmooth;if(I._minDtick=0,P._minDtick=0,E)y=(M=e(s,o)).orig_x,p=M.x,c=M.x0,a=M.dx,w=M.orig_y,u=M.y,_=M.y0,b=M.dy,T=M.z;else{var j=o.z;g.isArray1D(j)?(i(o,I,P,"x","y",["z"]),p=o._x,u=o._y,j=o._z):(y=o.x?I.makeCalcdata(o,"x"):[],w=o.y?P.makeCalcdata(o,"y"):[],p=x(o,I,"x",y).vals,u=x(o,P,"y",w).vals,o._x=p,o._y=u),c=o.x0,a=o.dx,_=o.y0,b=o.dy,T=l(j,o,I,P)}function H(J){D=o._input.zsmooth=o.zsmooth=!1,g.warn('cannot use zsmooth: "fast": '+J)}if((I.rangebreaks||P.rangebreaks)&&(T=function(J,te,ae){for(var le=[],se=-1,ve=0;ve<ae.length;ve++)if(te[ve]!==t){le[++se]=[];for(var ue=0;ue<ae[ve].length;ue++)J[ue]!==t&&le[se].push(ae[ve][ue])}return le}(p,u,T),E||(p=h(p),u=h(u),o._x=p,o._y=u)),E||!S&&!o.connectgaps||(o._emptypoints=d(T),r(T,o._emptypoints)),"fast"===D)if("log"===I.type||"log"===P.type)H("log axis found");else if(!E){if(p.length){var Y=(p[p.length-1]-p[0])/(p.length-1),X=Math.abs(Y/100);for(C=0;C<p.length-1;C++)if(Math.abs(p[C+1]-p[C]-Y)>X){H("x scale is not linear");break}}if(u.length&&"fast"===D){var Z=(u[u.length-1]-u[0])/(u.length-1),W=Math.abs(Z/100);for(C=0;C<u.length-1;C++)if(Math.abs(u[C+1]-u[C]-Z)>W){H("y scale is not linear");break}}}var re=g.maxRowLength(T),U="scaled"===o.xtype?"":p,B=f(o,U,c,a,re,I),V="scaled"===o.ytype?"":u,ee=f(o,V,_,b,T.length,P);R||(o._extremes[I._id]=k.findExtremes(I,B),o._extremes[P._id]=k.findExtremes(P,ee));var N={x:B,y:ee,z:T,text:o._text||o.text,hovertext:o._hovertext||o.hovertext};if(o.xperiodalignment&&y&&(N.orig_x=y),o.yperiodalignment&&w&&(N.orig_y=w),U&&U.length===B.length-1&&(N.xCenter=U),V&&V.length===ee.length-1&&(N.yCenter=V),E&&(N.xRanges=M.xRanges,N.yRanges=M.yRanges,N.pts=M.pts),S||n(s,o,{vals:T,cLetter:"z"}),S&&o.contours&&"heatmap"===o.contours.coloring){var K={type:"contour"===o.type?"heatmap":"histogram2d",xcalendar:o.xcalendar,ycalendar:o.ycalendar};N.xfill=f(K,U,c,a,re,I),N.yfill=f(K,V,_,b,T.length,P)}return[N]}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../../registry":647,"../histogram2d/calc":835,"./clean_2d_array":803,"./convert_column_xyz":805,"./find_empties":807,"./interp2d":810,"./make_bound_array":812}],803:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib"),k=v("../../constants/numerical").BADNUM;$.exports=function(x,e,n,i){var l,r,d,f,t,h;function s(u){if(m(u))return+u}if(e&&e.transpose){for(l=0,t=0;t<x.length;t++)l=Math.max(l,x[t].length);if(0===l)return!1;d=function(u){return u.length},f=function(u,_,b){return(u[b]||[])[_]}}else l=x.length,d=function(u,_){return u[_].length},f=function(u,_,b){return(u[_]||[])[b]};function p(u){if(e&&"carpet"!==e.type&&"contourcarpet"!==e.type&&u&&"category"===u.type&&e["_"+u._id.charAt(0)].length){var _=u._id.charAt(0),b={},w=e["_"+_+"CategoryMap"]||e[_];for(t=0;t<w.length;t++)b[w[t]]=t;return function(T){var C=b[u._categories[T]];return C+1?C:k}}return g.identity}var c=p(n),a=p(i);i&&"category"===i.type&&(l=i._categories.length);var u,_,b,y=new Array(l);for(t=0;t<l;t++)for(r=n&&"category"===n.type?n._categories.length:d(x,t),y[t]=new Array(r),h=0;h<r;h++)y[t][h]=s((u=x,_=a(t),b=c(h),_===k||b===k?k:f(u,_,b)));return y}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],804:[function(v,$,Q){"use strict";$.exports={min:"zmin",max:"zmax"}},{}],805:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../constants/numerical").BADNUM,k=v("../../plots/cartesian/align_period");$.exports=function(x,e,n,i,l,r){var d=x._length,f=e.makeCalcdata(x,i),t=n.makeCalcdata(x,l);f=k(x,e,i,f).vals,t=k(x,n,l,t).vals;var h,s,o,p,c=x.text,a=void 0!==c&&m.isArray1D(c),y=x.hovertext,u=void 0!==y&&m.isArray1D(y),_=m.distinctVals(f),b=_.vals,w=m.distinctVals(t),T=w.vals,C=[],M=T.length,I=b.length;for(h=0;h<r.length;h++)C[h]=m.init2dArray(M,I);a&&(o=m.init2dArray(M,I)),u&&(p=m.init2dArray(M,I));var P=m.init2dArray(M,I);for(h=0;h<d;h++)if(f[h]!==g&&t[h]!==g){var S=m.findBin(f[h]+_.minDiff/2,b),E=m.findBin(t[h]+w.minDiff/2,T);for(s=0;s<r.length;s++)C[s][E][S]=x[r[s]][h],P[E][S]=h;a&&(o[E][S]=c[h]),u&&(p[E][S]=y[h])}for(x["_"+i]=b,x["_"+l]=T,s=0;s<r.length;s++)x["_"+r[s]]=C[s];a&&(x._text=o),u&&(x._hovertext=p),e&&"category"===e.type&&(x["_"+i+"CategoryMap"]=b.map(function(D){return e._categories[D]})),n&&"category"===n.type&&(x["_"+l+"CategoryMap"]=T.map(function(D){return n._categories[D]})),x._after2before=P}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563}],806:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./xyz_defaults"),k=v("./label_defaults"),x=v("../scatter/period_defaults"),e=v("./style_defaults"),n=v("../../components/colorscale/defaults"),i=v("./attributes");$.exports=function(l,r,d,f){function t(h,s){return m.coerce(l,r,i,h,s)}g(l,r,t,f)?(x(l,r,f,t),t("xhoverformat"),t("yhoverformat"),t("text"),t("hovertext"),t("hovertemplate"),k(t,f),e(l,r,t,f),t("hoverongaps"),t("connectgaps",m.isArray1D(r.z)&&!1!==r.zsmooth),n(l,r,f,t,{prefix:"",cLetter:"z"})):r.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../scatter/period_defaults":956,"./attributes":801,"./label_defaults":811,"./style_defaults":815,"./xyz_defaults":816}],807:[function(v,$,Q){"use strict";var m=v("../../lib").maxRowLength;$.exports=function(g){var k,x,e,n,i,l,r,d,f=[],t={},h=[],s=g[0],o=[],p=[0,0,0],c=m(g);for(x=0;x<g.length;x++)for(k=o,o=s,s=g[x+1]||[],e=0;e<c;e++)void 0===o[e]&&((l=(void 0!==o[e-1]?1:0)+(void 0!==o[e+1]?1:0)+(void 0!==k[e]?1:0)+(void 0!==s[e]?1:0))?(0===x&&l++,0===e&&l++,x===g.length-1&&l++,e===o.length-1&&l++,l<4&&(t[[x,e]]=[x,e,l]),f.push([x,e,l])):h.push([x,e]));for(;h.length;){for(r={},d=!1,i=h.length-1;i>=0;i--)(l=((t[[(x=(n=h[i])[0])-1,e=n[1]]]||p)[2]+(t[[x+1,e]]||p)[2]+(t[[x,e-1]]||p)[2]+(t[[x,e+1]]||p)[2])/20)&&(r[n]=[x,e,l],h.splice(i,1),d=!0);if(!d)throw"findEmpties iterated with no new neighbors";for(n in r)t[n]=r[n],f.push(r[n])}return f.sort(function(a,y){return y[2]-a[2]})}},{"../../lib":515}],808:[function(v,$,Q){"use strict";var m=v("../../components/fx"),g=v("../../lib"),k=v("../../plots/cartesian/axes"),x=v("../../components/colorscale").extractOpts;$.exports=function(e,n,i,l,r){r||(r={});var d,f,t,h,s=r.isContour,o=e.cd[0],p=o.trace,c=e.xa,a=e.ya,y=o.x,u=o.y,_=o.z,b=o.xCenter,w=o.yCenter,T=o.zmask,C=p.zhoverformat,M=y,I=u;if(!1!==e.index){try{t=Math.round(e.index[1]),h=Math.round(e.index[0])}catch{return void g.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(t<0||t>=_[0].length||h<0||h>_.length)return}else{if(m.inbox(n-y[0],n-y[y.length-1],0)>0||m.inbox(i-u[0],i-u[u.length-1],0)>0)return;if(s){var P;for(M=[2*y[0]-y[1]],P=1;P<y.length;P++)M.push((y[P]+y[P-1])/2);for(M.push([2*y[y.length-1]-y[y.length-2]]),I=[2*u[0]-u[1]],P=1;P<u.length;P++)I.push((u[P]+u[P-1])/2);I.push([2*u[u.length-1]-u[u.length-2]])}t=Math.max(0,Math.min(M.length-2,g.findBin(n,M))),h=Math.max(0,Math.min(I.length-2,g.findBin(i,I)))}var S,E,R=c.c2p(y[t]),D=c.c2p(y[t+1]),j=a.c2p(u[h]),H=a.c2p(u[h+1]);s?(D=R,d=(S=o.orig_x||y)[t],H=j,f=(E=o.orig_y||u)[h]):(S=o.orig_x||b||y,E=o.orig_y||w||u,d=b?S[t]:(S[t]+S[t+1])/2,f=w?E[h]:(E[h]+E[h+1])/2,c&&"category"===c.type&&(d=y[t]),a&&"category"===a.type&&(f=u[h]),p.zsmooth&&(R=D=c.c2p(d),j=H=a.c2p(f)));var Y=_[h][t];if(T&&!T[h][t]&&(Y=void 0),void 0!==Y||p.hoverongaps){var X;Array.isArray(o.hovertext)&&Array.isArray(o.hovertext[h])?X=o.hovertext[h][t]:Array.isArray(o.text)&&Array.isArray(o.text[h])&&(X=o.text[h][t]);var Z=x(p),re=k.tickText({type:"linear",range:[Z.min,Z.max],hoverformat:C,_separators:c._separators,_numFormat:c._numFormat},Y,"hover").text;return[g.extendFlat(e,{index:p._after2before?p._after2before[h][t]:[h,t],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:R,x1:D,y0:j,y1:H,xLabelVal:d,yLabelVal:f,zLabelVal:Y,zLabel:re,text:X})]}}},{"../../components/colorscale":379,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],809:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),colorbar:v("./colorbar"),style:v("./style"),hoverPoints:v("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":801,"./calc":802,"./colorbar":804,"./defaults":806,"./hover":808,"./plot":813,"./style":814}],810:[function(v,$,Q){"use strict";var m=v("../../lib"),g=[[-1,0],[1,0],[0,-1],[0,1]];function k(e){return.5-.25*Math.min(1,.5*e)}function x(e,n,i){var l,r,d,f,t,h,s,o,p,c,a,y,u,_=0;for(f=0;f<n.length;f++){for(a=e[r=(l=n[f])[0]][d=l[1]],c=0,p=0,t=0;t<4;t++)(s=e[r+(h=g[t])[0]])&&void 0!==(o=s[d+h[1]])&&(0===c?y=u=o:(y=Math.min(y,o),u=Math.max(u,o)),p++,c+=o);if(0===p)throw"iterateInterp2d order is wrong: no defined neighbors";e[r][d]=c/p,void 0===a?p<4&&(_=1):(e[r][d]=(1+i)*e[r][d]-i*a,u>y&&(_=Math.max(_,Math.abs(e[r][d]-a)/(u-y))))}return _}$.exports=function(e,n){var i,l=1;for(x(e,n),i=0;i<n.length&&!(n[i][2]<4);i++);for(n=n.slice(i),i=0;i<100&&l>.01;i++)l=x(e,n,k(l));return l>.01&&m.log("interp2d didn't converge quickly",l),e}},{"../../lib":515}],811:[function(v,$,Q){"use strict";var m=v("../../lib");$.exports=function(g,k){g("texttemplate");var x=m.extendFlat({},k.font,{color:"auto",size:"auto"});m.coerceFont(g,"textfont",x)}},{"../../lib":515}],812:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../lib").isArrayOrTypedArray;$.exports=function(k,x,e,n,i,l){var r,d,f,t=[],h=m.traceIs(k,"contour"),s=m.traceIs(k,"histogram"),o=m.traceIs(k,"gl2d");if(g(x)&&x.length>1&&!s&&"category"!==l.type){var p=x.length;if(!(p<=i))return x.slice(0,h?i:i+1);if(h||o)t=x.slice(0,i);else if(1===i)t=[x[0]-.5,x[0]+.5];else{for(t=[1.5*x[0]-.5*x[1]],f=1;f<p;f++)t.push(.5*(x[f-1]+x[f]));t.push(1.5*x[p-1]-.5*x[p-2])}if(p<i){var c=t[t.length-1],a=c-t[t.length-2];for(f=p;f<i;f++)t.push(c+=a)}}else{var y=k[l._id.charAt(0)+"calendar"];for(r=s?l.r2c(e,0,y):g(x)&&1===x.length?x[0]:void 0===e?0:("log"===l.type?l.d2c:l.r2c)(e,0,y),d=n||1,f=h||o?0:-.5;f<i;f++)t.push(r+d*f)}return t}},{"../../lib":515,"../../registry":647}],813:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("tinycolor2"),k=v("../../registry"),x=v("../../components/drawing"),e=v("../../plots/cartesian/axes"),n=v("../../lib"),i=v("../../lib/svg_text_utils"),l=v("../scatter/format_labels"),r=v("../../components/color"),d=v("../../components/colorscale").extractOpts,f=v("../../components/colorscale").makeColorScaleFuncFromTrace,t=v("../../constants/xmlns_namespaces"),h=v("../../constants/alignment").LINE_SPACING;function s(y){return y.selectAll("g.heatmap-label")}function o(y){s(y).remove()}function p(y,u){var _=u.length-2,b=n.constrain(n.findBin(y,u),0,_),w=u[b],C=n.constrain(b+(y-w)/(u[b+1]-w)-.5,0,_),M=Math.round(C),I=Math.abs(C-M);return C&&C!==_&&I?{bin0:M,frac:I,bin1:Math.round(M+I/(C-M))}:{bin0:M,bin1:M,frac:0}}function c(y,u){var _=u.length-1,b=n.constrain(n.findBin(y,u),0,_),w=u[b],T=(y-w)/(u[b+1]-w)||0;return T<=0?{bin0:b,bin1:b,frac:0}:T<.5?{bin0:b,bin1:b+1,frac:T}:{bin0:b+1,bin1:b,frac:1-T}}function a(y,u,_){y[u]=_[0],y[u+1]=_[1],y[u+2]=_[2],y[u+3]=Math.round(255*_[3])}$.exports=function(y,u,_,b){var w=u.xaxis,T=u.yaxis;n.makeTraceGroups(b,_,"hm").each(function(C){var M,I,P,S,E,R,D,j,H=m.select(this),Y=C[0],X=Y.trace,Z=X.xgap||0,W=X.ygap||0,re=Y.z,U=Y.x,B=Y.y,V=Y.xCenter,ee=Y.yCenter,N=k.traceIs(X,"contour"),K=N?"best":X.zsmooth,J=re.length,te=n.maxRowLength(re),ae=!1,le=!1;for(R=0;void 0===M&&R<U.length-1;)M=w.c2p(U[R]),R++;for(R=U.length-1;void 0===I&&R>0;)I=w.c2p(U[R]),R--;for(I<M&&(P=I,I=M,M=P,ae=!0),R=0;void 0===S&&R<B.length-1;)S=T.c2p(B[R]),R++;for(R=B.length-1;void 0===E&&R>0;)E=T.c2p(B[R]),R--;if(E<S&&(P=S,S=E,E=P,le=!0),N&&(V=U,ee=B,U=Y.xfill,B=Y.yfill),"fast"!==K){var se="best"===K?0:.5;M=Math.max(-se*w._length,M),I=Math.min((1+se)*w._length,I),S=Math.max(-se*T._length,S),E=Math.min((1+se)*T._length,E)}var ve,ue,ye=Math.round(I-M),Me=Math.round(E-S);if(ye<=0||Me<=0)return H.selectAll("image").data([]).exit().remove(),void o(H);"fast"===K?(ve=te,ue=J):(ve=ye,ue=Me);var pe=document.createElement("canvas");pe.width=ve,pe.height=ue;var ge,we,oe=pe.getContext("2d"),de=f(X,{noNumericCheck:!0,returnArray:!0});"fast"===K?(ge=ae?function(on){return te-1-on}:n.identity,we=le?function(on){return J-1-on}:n.identity):(ge=function(on){return n.constrain(Math.round(w.c2p(U[on])-M),0,ye)},we=function(on){return n.constrain(Math.round(T.c2p(B[on])-S),0,Me)});var Te,Ee,Ae,De,Ie=we(0),Oe=[Ie,Ie],Xe=ae?0:1,Fe=le?0:1,Pe=0,Re=0,qe=0,Qe=0;function ct(on,wn){if(void 0!==on){var An=de(on);return An[0]=Math.round(An[0]),An[1]=Math.round(An[1]),An[2]=Math.round(An[2]),Pe+=wn,Re+=An[0]*wn,qe+=An[1]*wn,Qe+=An[2]*wn,An}return[0,0,0,0]}function bt(on,wn,An,ii){var Vr=on[An.bin0];if(void 0===Vr)return ct(void 0,1);var xn=on[An.bin1],nn=wn[An.bin0],fn=wn[An.bin1];return ct(Vr+An.frac*(xn-Vr||0)+ii.frac*((nn-Vr||0)+An.frac*(void 0===xn?void 0===fn?0:void 0===nn?2*(fn-Vr):2*(2*fn-nn-Vr)/3:void 0===fn?void 0===nn?0:2*(2*Vr-xn-nn)/3:void 0===nn?2*(2*fn-xn-Vr)/3:fn+Vr-xn-nn)))}if(K){var Tt,_t=0;try{Tt=new Uint8Array(ye*Me*4)}catch{Tt=new Array(ye*Me*4)}if("best"===K){var nt,Ke,xt,Ht=V||U,Zt=ee||B,$t=new Array(Ht.length),Xt=new Array(Zt.length),cr=new Array(ye),Ft=V?c:p,Be=ee?c:p;for(R=0;R<Ht.length;R++)$t[R]=Math.round(w.c2p(Ht[R])-M);for(R=0;R<Zt.length;R++)Xt[R]=Math.round(T.c2p(Zt[R])-S);for(R=0;R<ye;R++)cr[R]=Ft(R,$t);for(D=0;D<Me;D++)for(Ke=re[(nt=Be(D,Xt)).bin0],xt=re[nt.bin1],R=0;R<ye;R++,_t+=4)a(Tt,_t,De=bt(Ke,xt,cr[R],nt))}else for(D=0;D<J;D++)for(Ae=re[D],Oe=we(D),R=0;R<ye;R++)De=ct(Ae[R],1),a(Tt,_t=4*(Oe*ye+ge(R)),De);var He=oe.createImageData(ye,Me);try{He.data.set(Tt)}catch{var he=He.data,be=he.length;for(D=0;D<be;D++)he[D]=Tt[D]}oe.putImageData(He,0,0)}else{var ze=Math.floor(Z/2),Ve=Math.floor(W/2);for(D=0;D<J;D++)if(Ae=re[D],Oe.reverse(),Oe[Fe]=we(D+1),Oe[0]!==Oe[1]&&void 0!==Oe[0]&&void 0!==Oe[1])for(Te=[Ee=ge(0),Ee],R=0;R<te;R++)Te.reverse(),Te[Xe]=ge(R+1),Te[0]!==Te[1]&&void 0!==Te[0]&&void 0!==Te[1]&&(De=ct(Ae[R],(Te[1]-Te[0])*(Oe[1]-Oe[0])),oe.fillStyle="rgba("+De.join(",")+")",oe.fillRect(Te[0]+ze,Oe[0]+Ve,Te[1]-Te[0]-Z,Oe[1]-Oe[0]-W))}Re=Math.round(Re/Pe),qe=Math.round(qe/Pe),Qe=Math.round(Qe/Pe);var Je=g("rgb("+Re+","+qe+","+Qe+")");y._hmpixcount=(y._hmpixcount||0)+Pe,y._hmlumcount=(y._hmlumcount||0)+Pe*Je.getLuminance();var Ye=H.selectAll("image").data(C);Ye.enter().append("svg:image").attr({xmlns:t.svg,preserveAspectRatio:"none"}),Ye.attr({height:Me,width:ye,x:M,y:S,"xlink:href":pe.toDataURL("image/png")}),o(H);var lt=X.texttemplate;if(lt){var st=d(X),Mt={type:"linear",range:[st.min,st.max],_separators:w._separators,_numFormat:w._numFormat},Dt="histogram2dcontour"===X.type,ht="contour"===X.type,mt=ht?J-1:J,Ot=ht?1:0,At=ht?te-1:te,It=[];for(R=ht?1:0;R<mt;R++){var Se;if(ht)Se=Y.y[R];else if(Dt){if(0===R||R===J-1)continue;Se=Y.y[R]}else if(Y.yCenter)Se=Y.yCenter[R];else{if(R+1===J&&void 0===Y.y[R+1])continue;Se=(Y.y[R]+Y.y[R+1])/2}var Ze=Math.round(T.c2p(Se));if(!(0>Ze||Ze>T._length))for(D=Ot;D<At;D++){var it;if(ht)it=Y.x[D];else if(Dt){if(0===D||D===te-1)continue;it=Y.x[D]}else if(Y.xCenter)it=Y.xCenter[D];else{if(D+1===te&&void 0===Y.x[D+1])continue;it=(Y.x[D]+Y.x[D+1])/2}var dt=Math.round(w.c2p(it));if(!(0>dt||dt>w._length)){var Ct=l({x:it,y:Se},X,y._fullLayout);Ct.x=it,Ct.y=Se;var Ut=Y.z[R][D];void 0===Ut?(Ct.z="",Ct.zLabel=""):(Ct.z=Ut,Ct.zLabel=e.tickText(Mt,Ut,"hover").text);var Jt=Y.text&&Y.text[R]&&Y.text[R][D];void 0!==Jt&&!1!==Jt||(Jt=""),Ct.text=Jt;var qt=n.texttemplateString(lt,Ct,y._fullLayout._d3locale,Ct,X._meta||{});if(qt){var pr=qt.split("<br>"),Sr=pr.length,mr=0;for(j=0;j<Sr;j++)mr=Math.max(mr,pr[j].length);It.push({l:Sr,c:mr,t:qt,x:dt,y:Ze,z:Ut})}}}}var tr=X.textfont,rr=tr.family,ar=tr.size,dr=y._fullLayout.font.size;if(!ar||"auto"===ar){var xr=1/0,Lr=1/0,zr=0,Hr=0;for(j=0;j<It.length;j++){var Xr=It[j];if(zr=Math.max(zr,Xr.l),Hr=Math.max(Hr,Xr.c),j<It.length-1){var cn=It[j+1],an=Math.abs(cn.x-Xr.x),Nn=Math.abs(cn.y-Xr.y);an&&(xr=Math.min(xr,an)),Nn&&(Lr=Math.min(Lr,Nn))}}isFinite(xr)&&isFinite(Lr)?(xr-=Z,Lr-=W,xr/=Hr,Lr/=zr,xr/=h/2,Lr/=h,ar=Math.min(Math.floor(xr),Math.floor(Lr),dr)):ar=dr}if(ar<=0||!isFinite(ar))return;s(H).data(It).enter().append("g").classed("heatmap-label",1).append("text").attr("text-anchor","middle").each(function(on){var ii,wn=m.select(this),An=tr.color;An&&"auto"!==An||(An=r.contrast("rgba("+de(on.z).join()+")")),wn.attr("data-notex",1).call(i.positionText,(ii=on,ii.x),function(ii){return ii.y-ar*(ii.l*h/2-1)}(on)).call(x.font,rr,ar,An).text(on.t).call(i.convertToTspans,y)})}})}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"../../constants/alignment":483,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../scatter/format_labels":945,"@plotly/d3":58,tinycolor2:313}],814:[function(v,$,Q){"use strict";var m=v("@plotly/d3");$.exports=function(g){m.select(g).selectAll(".hm image").style("opacity",function(k){return k.trace.opacity})}},{"@plotly/d3":58}],815:[function(v,$,Q){"use strict";$.exports=function(m,g,k){!1===k("zsmooth")&&(k("xgap"),k("ygap")),k("zhoverformat")}},{}],816:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib"),k=v("../../registry");function x(e,n){var i=n(e);return"scaled"===(i?n(e+"type","array"):"scaled")&&(n(e+"0"),n("d"+e)),i}$.exports=function(e,n,i,l,r,d){var f,t,h=i("z");if(r=r||"x",d=d||"y",void 0===h||!h.length)return 0;if(g.isArray1D(e.z)){f=i(r),t=i(d);var s=g.minRowLength(f),o=g.minRowLength(t);if(0===s||0===o)return 0;n._length=Math.min(s,o,h.length)}else{if(f=x(r,i),t=x(d,i),!function(p){for(var c,a=!0,y=!1,u=!1,_=0;_<p.length;_++){if(!g.isArrayOrTypedArray(c=p[_])){a=!1;break}c.length>0&&(y=!0);for(var b=0;b<c.length;b++)if(m(c[b])){u=!0;break}}return a&&y&&u}(h))return 0;i("transpose"),n._length=null}return"heatmapgl"===e.type||k.getComponentMethod("calendars","handleTraceDefaults")(e,n,[r,d],l),!0}},{"../../lib":515,"../../registry":647,"fast-isnumeric":190}],817:[function(v,$,Q){"use strict";for(var m=v("../heatmap/attributes"),g=v("../../components/colorscale/attributes"),k=v("../../lib/extend").extendFlat,x=v("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],n={},i=0;i<e.length;i++){var l=e[i];n[l]=m[l]}n.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},k(n,g("",{cLetter:"z",autoColorDflt:!1})),$.exports=x(n,"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../heatmap/attributes":801}],818:[function(v,$,Q){"use strict";var m=v("../../../stackgl_modules").gl_heatmap2d,g=v("../../plots/cartesian/axes"),k=v("../../lib/str2rgbarray");function x(n,i){this.scene=n,this.uid=i,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=m(n.glplot,this.options),this.heatmap._trace=this}var e=x.prototype;e.handlePick=function(n){var i=this.options,l=i.shape,r=n.pointId,d=r%l[0],f=Math.floor(r/l[0]);return{trace:this,dataCoord:n.dataCoord,traceCoord:[i.x[d],i.y[f],i.z[r]],textLabel:this.textLabels[r],name:this.name,pointIndex:[f,d],hoverinfo:this.hoverinfo}},e.update=function(n,i){var l=i[0];this.index=n.index,this.name=n.name,this.hoverinfo=n.hoverinfo;var r=l.z;this.options.z=[].concat.apply([],r),this.options.shape=[r[0].length,r.length],this.options.x=l.x,this.options.y=l.y,this.options.zsmooth=n.zsmooth;var t=function(c){for(var a=c.colorscale,y=c.zmin,u=c.zmax,_=a.length,b=new Array(_),w=new Array(4*_),T=0;T<_;T++){var C=a[T],M=k(C[1]);b[T]=y+C[0]*(u-y);for(var I=0;I<4;I++)w[4*T+I]=M[I]}return{colorLevels:b,colorValues:w}}(n);this.options.colorLevels=t.colorLevels,this.options.colorValues=t.colorValues,this.textLabels=[].concat.apply([],n.text),this.heatmap.update(this.options);var h,s,o=this.scene.xaxis,p=this.scene.yaxis;!1===n.zsmooth&&(h={ppad:l.x[1]-l.x[0]},s={ppad:l.y[1]-l.y[0]}),n._extremes[o._id]=g.findExtremes(o,l.x,h),n._extremes[p._id]=g.findExtremes(p,l.y,s)},e.dispose=function(){this.heatmap.dispose()},$.exports=function(n,i,l){var r=new x(n,i.uid);return r.update(i,l),r}},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566}],819:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../heatmap/xyz_defaults"),k=v("../../components/colorscale/defaults"),x=v("./attributes");$.exports=function(e,n,i,l){function r(d,f){return m.coerce(e,n,x,d,f)}g(e,n,r,l)?(r("text"),r("zsmooth"),k(e,n,l,r,{prefix:"",cLetter:"z"})):n.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/xyz_defaults":816,"./attributes":817}],820:[function(v,$,Q){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),calc:v("../heatmap/calc"),plot:v("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:v("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":605,"../heatmap/calc":802,"../heatmap/colorbar":804,"./attributes":817,"./convert":818,"./defaults":819}],821:[function(v,$,Q){"use strict";var m=v("../bar/attributes"),g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=v("../../plots/template_attributes").hovertemplateAttrs,x=v("../../plots/template_attributes").texttemplateAttrs,e=v("../../plots/font_attributes"),n=v("./bin_attributes"),i=v("./constants"),l=v("../../lib/extend").extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:g("x"),yhoverformat:g("y"),text:l({},m.text,{}),hovertext:l({},m.hovertext,{}),orientation:m.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:n("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:n("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:k({},{keys:i.eventDataKeys}),texttemplate:x({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:l({},m.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:m.insidetextanchor,textangle:m.textangle,cliponaxis:m.cliponaxis,constraintext:m.constraintext,marker:m.marker,offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:m.selected,unselected:m.unselected,_deprecated:{bardir:m._deprecated.bardir}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../bar/attributes":657,"./bin_attributes":823,"./constants":827}],822:[function(v,$,Q){"use strict";$.exports=function(m,g){for(var k=m.length,x=0,e=0;e<k;e++)g[e]?(m[e]/=g[e],x+=m[e]):m[e]=null;return x}},{}],823:[function(v,$,Q){"use strict";$.exports=function(m,g){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],824:[function(v,$,Q){"use strict";var m=v("fast-isnumeric");$.exports={count:function(g,k,x){return x[g]++,1},sum:function(g,k,x,e){var n=e[k];return m(n)?(n=Number(n),x[g]+=n,n):0},avg:function(g,k,x,e,n){var i=e[k];return m(i)&&(i=Number(i),x[g]+=i,n[g]++),0},min:function(g,k,x,e){var n=e[k];if(m(n)){if(n=Number(n),!m(x[g]))return x[g]=n,n;if(x[g]>n){var i=n-x[g];return x[g]=n,i}}return 0},max:function(g,k,x,e){var n=e[k];if(m(n)){if(n=Number(n),!m(x[g]))return x[g]=n,n;if(x[g]<n){var i=n-x[g];return x[g]=n,i}}return 0}}},{"fast-isnumeric":190}],825:[function(v,$,Q){"use strict";var m=v("../../constants/numerical"),g=m.ONEAVGYEAR,k=m.ONEAVGMONTH,x=m.ONEDAY,e=m.ONEHOUR,n=m.ONEMIN,i=m.ONESEC,l=v("../../plots/cartesian/axes").tickIncrement;function r(h,s,o,p){if(h*s<=0)return 1/0;for(var c=Math.abs(s-h),a="date"===o.type,y=d(c,a),u=0;u<10;u++){var _=d(80*y,a);if(y===_||!f(_,h,s,a,o,p))break;y=_}return y}function d(h,s){return s&&h>i?h>x?h>1.1*g?g:h>1.1*k?k:x:h>e?e:h>n?n:i:Math.pow(10,Math.floor(Math.log(h)/Math.LN10))}function f(h,s,o,p,c,a){if(p&&h>x){var y=t(s,c,a),u=t(o,c,a),_=h===g?0:1;return y[_]!==u[_]}return Math.floor(o/h)-Math.floor(s/h)>.1}function t(h,s,o){var p=s.c2d(h,g,o).split("-");return""===p[0]&&(p.unshift(),p[0]="-"+p[0]),p}$.exports=function(h,s,o,p,c){var a,y,u=-1.1*s,_=-.1*s,b=h-_,w=o[0],T=o[1],C=Math.min(r(w+_,w+b,p,c),r(T+_,T+b,p,c)),M=Math.min(r(w+u,w+_,p,c),r(T+u,T+_,p,c));if(C>M&&M<Math.abs(T-w)/4e3?(a=C,y=!1):(a=Math.min(C,M),y=!0),"date"===p.type&&a>x){var I=a===g?1:6,P=a===g?"M12":"M1";return function(S,E){var R=p.c2d(S,g,c),D=R.indexOf("-",I);D>0&&(R=R.substr(0,D));var j=p.d2c(R,0,c);if(j<S){var H=l(j,P,!1,c);(j+H)/2<S+h&&(j=H)}return E&&y?l(j,P,!0,c):j}}return function(S,E){var R=a*Math.round(S/a);return R+a/10<S&&R+.9*a<S+h&&(R+=a),E&&y&&(R-=a),R}}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566}],826:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib"),k=v("../../registry"),x=v("../../plots/cartesian/axes"),e=v("../bar/arrays_to_calcdata"),n=v("./bin_functions"),i=v("./norm_functions"),l=v("./average"),r=v("./bin_label_vals");function d(f,t,h,s,o){var p,c,a,y,u,_,b,w=s+"bins",T=f._fullLayout,M=T._histogramBinOpts[t["_"+s+"bingroup"]],I="overlay"===T.barmode,P=function(ue){return h.r2c(ue,0,y)},S=function(ue){return h.c2r(ue,0,y)},E="date"===h.type?function(ue){return ue||0===ue?g.cleanDate(ue,null,y):null}:function(ue){return m(ue)?Number(ue):null};function R(ue,ye,Me){ye[ue+"Found"]?(ye[ue]=E(ye[ue]),null===ye[ue]&&(ye[ue]=Me[ue])):(_[ue]=ye[ue]=Me[ue],g.nestedProperty(c[0],w+"."+ue).set(Me[ue]))}if(t["_"+s+"autoBinFinished"])delete t["_"+s+"autoBinFinished"];else{c=M.traces;var D=[],j=!0,H=!1,Y=!1;for(p=0;p<c.length;p++)if((a=c[p]).visible){var X=M.dirs[p];u=a["_"+X+"pos0"]=h.makeCalcdata(a,X),D=g.concat(D,u),delete a["_"+s+"autoBinFinished"],!0===t.visible&&(j?j=!1:(delete a._autoBin,a["_"+s+"autoBinFinished"]=1),k.traceIs(a,"2dMap")&&(H=!0),"histogram2dcontour"===a.type&&(Y=!0))}var Z=x.autoBin(D,h,M.nbins,H,y=c[0][s+"calendar"],M.sizeFound&&M.size),W=c[0]._autoBin={};if(_=W[M.dirs[0]]={},Y&&(M.size||(Z.start=S(x.tickIncrement(P(Z.start),Z.size,!0,y))),void 0===M.end&&(Z.end=S(x.tickIncrement(P(Z.end),Z.size,!1,y)))),I&&!k.traceIs(t,"2dMap")&&0===Z._dataSpan&&"category"!==h.type&&"multicategory"!==h.type){if(o)return[Z,u,!0];Z=function(ue,ye,Me,pe,ge){var we,oe,de,Te=ue._fullLayout,Ee=function(bt,Tt){for(var _t=Tt.xaxis,nt=Tt.yaxis,Ke=Tt.orientation,xt=[],Ht=bt._fullData,Zt=0;Zt<Ht.length;Zt++){var $t=Ht[Zt];"histogram"===$t.type&&!0===$t.visible&&$t.orientation===Ke&&$t.xaxis===_t&&$t.yaxis===nt&&xt.push($t)}return xt}(ue,ye),Ae=!1,De=1/0,Ie=[ye];for(we=0;we<Ee.length;we++)if((oe=Ee[we])===ye)Ae=!0;else if(Ae){var Oe=d(ue,oe,Me,pe,!0),Xe=Oe[0],Fe=Oe[2];oe["_"+pe+"autoBinFinished"]=1,oe["_"+pe+"pos0"]=Oe[1],Fe?Ie.push(oe):De=Math.min(De,Xe.size)}else de=Te._histogramBinOpts[oe["_"+pe+"bingroup"]],De=Math.min(De,de.size||oe[ge].size);var Pe=new Array(Ie.length);for(we=0;we<Ie.length;we++)for(var Re=Ie[we]["_"+pe+"pos0"],qe=0;qe<Re.length;qe++)if(void 0!==Re[qe]){Pe[we]=Re[qe];break}for(isFinite(De)||(De=g.distinctVals(Pe).minDiff),we=0;we<Ie.length;we++){var Qe=(oe=Ie[we])[pe+"calendar"],ct={start:Me.c2r(Pe[we]-De/2,0,Qe),end:Me.c2r(Pe[we]+De/2,0,Qe),size:De};oe._input[ge]=oe[ge]=ct,(de=Te._histogramBinOpts[oe["_"+pe+"bingroup"]])&&g.extendFlat(de,ct)}return ye[ge]}(f,t,h,s,w)}(b=a.cumulative||{}).enabled&&"include"!==b.currentbin&&("decreasing"===b.direction?Z.start=S(x.tickIncrement(P(Z.start),Z.size,!0,y)):Z.end=S(x.tickIncrement(P(Z.end),Z.size,!1,y))),M.size=Z.size,M.sizeFound||(_.size=Z.size,g.nestedProperty(c[0],w+".size").set(Z.size)),R("start",M,Z),R("end",M,Z)}u=t["_"+s+"pos0"],delete t["_"+s+"pos0"];var re=t._input[w]||{},U=g.extendFlat({},M),B=M.start,V=h.r2l(re.start),ee=void 0!==V;if((M.startFound||ee)&&V!==h.r2l(B)){var N=ee?V:g.aggNums(Math.min,null,u),K={type:"category"===h.type||"multicategory"===h.type?"linear":h.type,r2l:h.r2l,dtick:M.size,tick0:B,calendar:y,range:[N,x.tickIncrement(N,M.size,!1,y)].map(h.l2r)},J=x.tickFirst(K);J>h.r2l(N)&&(J=x.tickIncrement(J,M.size,!0,y)),U.start=h.l2r(J),ee||g.nestedProperty(t,w+".start").set(U.start)}var te=M.end,ae=h.r2l(re.end),le=void 0!==ae;if((M.endFound||le)&&ae!==h.r2l(te)){var se=le?ae:g.aggNums(Math.max,null,u);U.end=h.l2r(se),le||g.nestedProperty(t,w+".start").set(U.end)}var ve="autobin"+s;return!1===t._input[ve]&&(t._input[w]=g.extendFlat({},t[w]||{}),delete t._input[ve],delete t[ve]),[U,u]}$.exports={calc:function(f,t){var h,s,o,p,c=[],a=[],y="h"===t.orientation,u=x.getFromId(f,y?t.yaxis:t.xaxis),_=y?"y":"x",b={x:"y",y:"x"}[_],w=t[_+"calendar"],T=t.cumulative,C=d(f,t,u,_),M=C[0],I=C[1],P="string"==typeof M.size,S=[],E=P?S:M,R=[],D=[],j=[],H=0,Y=t.histnorm,X=t.histfunc,Z=-1!==Y.indexOf("density");T.enabled&&Z&&(Y=Y.replace(/ ?density$/,""),Z=!1);var W,re="max"===X||"min"===X?null:0,U=n.count,B=i[Y],V=!1,ee=function(oe){return u.r2c(oe,0,w)};for(g.isArrayOrTypedArray(t[b])&&"count"!==X&&(W=t[b],V="avg"===X,U=n[X]),h=ee(M.start),o=ee(M.end)+(h-x.tickIncrement(h,M.size,!1,w))/1e6;h<o&&c.length<1e6&&(s=x.tickIncrement(h,M.size,!1,w),c.push((h+s)/2),a.push(re),j.push([]),S.push(h),Z&&R.push(1/(s-h)),V&&D.push(0),!(s<=h));)h=s;S.push(h),P||"date"!==u.type||(E={start:ee(E.start),end:ee(E.end),size:E.size}),f._fullLayout._roundFnOpts||(f._fullLayout._roundFnOpts={});var N=t["_"+_+"bingroup"],K={leftGap:1/0,rightGap:1/0};N&&(f._fullLayout._roundFnOpts[N]||(f._fullLayout._roundFnOpts[N]=K),K=f._fullLayout._roundFnOpts[N]);var J,te=a.length,ae=!0,le=K.leftGap,se=K.rightGap,ve={};for(h=0;h<I.length;h++){var ue=I[h];(p=g.findBin(ue,E))>=0&&p<te&&(H+=U(p,h,a,W,D),ae&&j[p].length&&ue!==I[j[p][0]]&&(ae=!1),j[p].push(h),ve[h]=p,le=Math.min(le,ue-S[p]),se=Math.min(se,S[p+1]-ue))}K.leftGap=le,K.rightGap=se,ae||(J=function(oe,de){return function(){var Te=f._fullLayout._roundFnOpts[N];return r(Te.leftGap,Te.rightGap,S,u,w)(oe,de)}}),V&&(H=l(a,D)),B&&B(a,H,R),T.enabled&&function(oe,de,Te){var Ee,Ae,De;function Ie(Xe){De=oe[Xe],oe[Xe]/=2}function Oe(Xe){oe[Xe]=De+(Ae=oe[Xe])/2,De+=Ae}if("half"===Te)if("increasing"===de)for(Ie(0),Ee=1;Ee<oe.length;Ee++)Oe(Ee);else for(Ie(oe.length-1),Ee=oe.length-2;Ee>=0;Ee--)Oe(Ee);else if("increasing"===de){for(Ee=1;Ee<oe.length;Ee++)oe[Ee]+=oe[Ee-1];"exclude"===Te&&(oe.unshift(0),oe.pop())}else{for(Ee=oe.length-2;Ee>=0;Ee--)oe[Ee]+=oe[Ee+1];"exclude"===Te&&(oe.push(0),oe.shift())}}(a,T.direction,T.currentbin);var ye=Math.min(c.length,a.length),Me=[],pe=0,ge=ye-1;for(h=0;h<ye;h++)if(a[h]){pe=h;break}for(h=ye-1;h>=pe;h--)if(a[h]){ge=h;break}for(h=pe;h<=ge;h++)if(m(c[h])&&m(a[h])){var we={p:c[h],s:a[h],b:0};T.enabled||(we.pts=j[h],ae?we.ph0=we.ph1=j[h].length?I[j[h][0]]:c[h]:(t._computePh=!0,we.ph0=J(S[h]),we.ph1=J(S[h+1],!0))),Me.push(we)}return 1===Me.length&&(Me[0].width1=x.tickIncrement(Me[0].p,M.size,!1,w)-Me[0].p),e(Me,t),g.isArrayOrTypedArray(t.selectedpoints)&&g.tagSelected(Me,t,ve),Me},calcAllAutoBins:d}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"../bar/arrays_to_calcdata":656,"./average":822,"./bin_functions":824,"./bin_label_vals":825,"./norm_functions":833,"fast-isnumeric":190}],827:[function(v,$,Q){"use strict";$.exports={eventDataKeys:["binNumber"]}},{}],828:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/cartesian/axis_ids"),k=v("../../registry").traceIs,x=v("../bar/defaults").handleGroupingDefaults,e=m.nestedProperty,n=v("../../plots/cartesian/constraints").getAxisGroup,i=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],l=["x","y"];$.exports=function(r,d){var f,t,h,s,o,p,c,a=d._histogramBinOpts={},y=[],u={},_=[];function b(Z,W){return m.coerce(f._input,f,f._module.attributes,Z,W)}function w(Z){return"v"===Z.orientation?"x":"y"}function T(Z,W,re){var U=Z.uid+"__"+re;W||(W=U);var B=g.getFromTrace({_fullLayout:d},Z,re).type,V=Z[re+"calendar"]||"",ee=a[W],N=!0;ee&&(B===ee.axType&&V===ee.calendar?(N=!1,ee.traces.push(Z),ee.dirs.push(re)):(W=U,B!==ee.axType&&m.warn(["Attempted to group the bins of trace",Z.index,"set on a","type:"+B,"axis","with bins on","type:"+ee.axType,"axis."].join(" ")),V!==ee.calendar&&m.warn(["Attempted to group the bins of trace",Z.index,"set with a",V,"calendar","with bins",ee.calendar?"on a "+ee.calendar+" calendar":"w/o a set calendar"].join(" ")))),N&&(a[W]={traces:[Z],dirs:[re],axType:B,calendar:Z[re+"calendar"]||""}),Z["_"+re+"bingroup"]=W}for(o=0;o<r.length;o++)k(f=r[o],"histogram")&&(y.push(f),delete f._xautoBinFinished,delete f._yautoBinFinished,k(f,"2dMap")||x(f._input,f,d,b));var C=d._alignmentOpts||{};for(o=0;o<y.length;o++){if(h="",!k(f=y[o],"2dMap")){if(s=w(f),"group"===d.barmode&&f.alignmentgroup){var I=n(d,f[s+"axis"])+f.orientation;(C[I]||{})[f.alignmentgroup]&&(h=I)}h||"overlay"===d.barmode||(h=n(d,f.xaxis)+n(d,f.yaxis)+w(f))}h?(u[h]||(u[h]=[]),u[h].push(f)):_.push(f)}for(h in u)if(1!==(t=u[h]).length){var P=!1;for(t.length&&(f=t[0],P=b("bingroup")),h=P||h,o=0;o<t.length;o++){var S=(f=t[o])._input.bingroup;S&&S!==h&&m.warn(["Trace",f.index,"must match","within bingroup",h+".","Ignoring its bingroup:",S,"setting."].join(" ")),f.bingroup=h,T(f,h,w(f))}}else _.push(t[0]);for(o=0;o<_.length;o++){f=_[o];var E=b("bingroup");if(k(f,"2dMap"))for(c=0;c<2;c++){var R=b((s=l[c])+"bingroup",E?E+"__"+s:null);T(f,R,s)}else T(f,E,w(f))}for(h in a){var D=a[h];for(t=D.traces,p=0;p<i.length;p++){var j,H,Y=i[p],X=Y.name;if("nbins"!==X||!D.sizeFound){for(o=0;o<t.length;o++){if(void 0!==e((f=t[o])._input,j=Y.aStr[s=D.dirs[o]]).get()){D[X]=b(j),D[X+"Found"]=!0;break}(H=(f._autoBin||{})[s]||{})[X]&&e(f,j).set(H[X])}if("start"===X||"end"===X)for(;o<t.length;o++)(f=t[o])["_"+s+"bingroup"]&&b(j,(H=(f._autoBin||{})[s]||{})[X]);"nbins"!==X||D.sizeFound||D.nbinsFound||(f=t[0],D[X]=b(j))}}}}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/cartesian/constraints":574,"../../registry":647,"../bar/defaults":661}],829:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../lib"),k=v("../../components/color"),x=v("../bar/defaults").handleText,e=v("../bar/style_defaults"),n=v("./attributes");$.exports=function(i,l,r,d){function f(_,b){return g.coerce(i,l,n,_,b)}var t=f("x"),h=f("y");f("cumulative.enabled")&&(f("cumulative.direction"),f("cumulative.currentbin")),f("text");var s=f("textposition");x(i,l,d,f,s,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat");var o=f("orientation",h&&!t?"h":"v"),p="v"===o?"x":"y",c="v"===o?"y":"x",a=t&&h?Math.min(g.minRowLength(t)&&g.minRowLength(h)):g.minRowLength(l[p]||[]);if(a){l._length=a,m.getComponentMethod("calendars","handleTraceDefaults")(i,l,["x","y"],d),l[c]&&f("histfunc"),f("histnorm"),f("autobin"+p),e(i,l,f,r,d),g.coerceSelectionMarkerOpacity(l,f);var y=(l.marker.line||{}).color,u=m.getComponentMethod("errorbars","supplyDefaults");u(i,l,y||k.defaultLine,{axis:"y"}),u(i,l,y||k.defaultLine,{axis:"x",inherit:"y"})}else l.visible=!1}},{"../../components/color":367,"../../lib":515,"../../registry":647,"../bar/defaults":661,"../bar/style_defaults":672,"./attributes":821}],830:[function(v,$,Q){"use strict";$.exports=function(m,g,k,x,e){if(m.x="xVal"in g?g.xVal:g.x,m.y="yVal"in g?g.yVal:g.y,"zLabelVal"in g&&(m.z=g.zLabelVal),g.xa&&(m.xaxis=g.xa),g.ya&&(m.yaxis=g.ya),!(k.cumulative||{}).enabled){var n,i=Array.isArray(e)?x[0].pts[e[0]][e[1]]:x[e].pts;if(m.pointNumbers=i,m.binNumber=m.pointNumber,delete m.pointNumber,delete m.pointIndex,k._indexToPoints){n=[];for(var l=0;l<i.length;l++)n=n.concat(k._indexToPoints[i[l]])}else n=i;m.pointIndices=n}return m}},{}],831:[function(v,$,Q){"use strict";var m=v("../bar/hover").hoverPoints,g=v("../../plots/cartesian/axes").hoverLabelText;$.exports=function(k,x,e,n,i){var l=m(k,x,e,n,i);if(l){var r=(k=l[0]).cd[k.index],d=k.cd[0].trace;if(!d.cumulative.enabled){var f="h"===d.orientation?"y":"x";k[f+"Label"]=g(k[f+"a"],[r.ph0,r.ph1],d[f+"hoverformat"])}return l}}},{"../../plots/cartesian/axes":566,"../bar/hover":664}],832:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),layoutAttributes:v("../bar/layout_attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("./cross_trace_defaults"),supplyLayoutDefaults:v("../bar/layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("../bar/cross_trace_calc").crossTraceCalc,plot:v("../bar/plot").plot,layerName:"barlayer",style:v("../bar/style").style,styleOnSelect:v("../bar/style").styleOnSelect,colorbar:v("../scatter/marker_colorbar"),hoverPoints:v("./hover"),selectPoints:v("../bar/select"),eventData:v("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../bar/cross_trace_calc":660,"../bar/layout_attributes":666,"../bar/layout_defaults":667,"../bar/plot":668,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"./attributes":821,"./calc":826,"./cross_trace_defaults":828,"./defaults":829,"./event_data":830,"./hover":831}],833:[function(v,$,Q){"use strict";$.exports={percent:function(m,g){for(var k=m.length,x=100/g,e=0;e<k;e++)m[e]*=x},probability:function(m,g){for(var k=m.length,x=0;x<k;x++)m[x]/=g},density:function(m,g,k,x){var e=m.length;x=x||1;for(var n=0;n<e;n++)m[n]*=k[n]*x},"probability density":function(m,g,k,x){var e=m.length;x&&(g/=x);for(var n=0;n<e;n++)m[n]*=k[n]/g}}},{}],834:[function(v,$,Q){"use strict";var m=v("../histogram/attributes"),g=v("../histogram/bin_attributes"),k=v("../heatmap/attributes"),x=v("../../plots/attributes"),e=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=v("../../plots/template_attributes").hovertemplateAttrs,i=v("../../plots/template_attributes").texttemplateAttrs,l=v("../../components/colorscale/attributes"),r=v("../../lib/extend").extendFlat;$.exports=r({x:m.x,y:m.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:m.histnorm,histfunc:m.histfunc,nbinsx:m.nbinsx,xbins:g("x"),nbinsy:m.nbinsy,ybins:g("y"),autobinx:m.autobinx,autobiny:m.autobiny,bingroup:r({},m.bingroup,{}),xbingroup:r({},m.bingroup,{}),ybingroup:r({},m.bingroup,{}),xgap:k.xgap,ygap:k.ygap,zsmooth:k.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:n({},{keys:"z"}),texttemplate:i({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:k.textfont,showlegend:r({},x.showlegend,{dflt:!1})},l("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../heatmap/attributes":801,"../histogram/attributes":821,"../histogram/bin_attributes":823}],835:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/cartesian/axes"),k=v("../histogram/bin_functions"),x=v("../histogram/norm_functions"),e=v("../histogram/average"),n=v("../histogram/bin_label_vals"),i=v("../histogram/calc").calcAllAutoBins;function l(f,t,h,s){var o,p=new Array(f);if(s)for(o=0;o<f;o++)p[o]=1/(t[o+1]-t[o]);else{var c=1/h;for(o=0;o<f;o++)p[o]=c}return p}function r(f,t){return{start:f(t.start),end:f(t.end),size:t.size}}function d(f,t,h,s,o,p){var c,a=f.length-1,y=new Array(a),u=n(h,s,f,o,p);for(c=0;c<a;c++){var _=(t||[])[c];y[c]=void 0===_?[u(f[c]),u(f[c+1],!0)]:[_,_]}return y}$.exports=function(f,t){var h,s,o,p,c=g.getFromId(f,t.xaxis),a=g.getFromId(f,t.yaxis),y=t.xcalendar,u=t.ycalendar,_=function(nt){return c.r2c(nt,0,y)},b=function(nt){return a.r2c(nt,0,u)},w=i(f,t,c,"x"),T=w[0],C=w[1],M=i(f,t,a,"y"),I=M[0],P=M[1],S=t._length;C.length>S&&C.splice(S,C.length-S),P.length>S&&P.splice(S,P.length-S);var E=[],R=[],D=[],j="string"==typeof T.size,H="string"==typeof I.size,Y=[],X=[],Z=j?Y:T,W=H?X:I,re=0,U=[],B=[],V=t.histnorm,ee=t.histfunc,N=-1!==V.indexOf("density"),K="max"===ee||"min"===ee?null:0,J=k.count,te=x[V],ae=!1,le=[],se=[],ve="z"in t?t.z:"marker"in t&&Array.isArray(t.marker.color)?t.marker.color:"";ve&&"count"!==ee&&(ae="avg"===ee,J=k[ee]);var ue=T.size,ye=_(T.start),Me=_(T.end)+(ye-g.tickIncrement(ye,ue,!1,y))/1e6;for(h=ye;h<Me;h=g.tickIncrement(h,ue,!1,y))R.push(K),Y.push(h),ae&&D.push(0);Y.push(h);var ge=R.length,we=(h-ye)/ge,oe=c.c2r(ye+we/2,0,y),de=I.size,Te=b(I.start),Ee=b(I.end)+(Te-g.tickIncrement(Te,de,!1,u))/1e6;for(h=Te;h<Ee;h=g.tickIncrement(h,de,!1,u)){E.push(R.slice()),X.push(h);var Ae=new Array(ge);for(s=0;s<ge;s++)Ae[s]=[];B.push(Ae),ae&&U.push(D.slice())}X.push(h);var De=E.length,Ie=(h-Te)/De,Oe=a.c2r(Te+Ie/2,0,u);N&&(le=l(R.length,Z,we,j),se=l(E.length,W,Ie,H)),j||"date"!==c.type||(Z=r(_,Z)),H||"date"!==a.type||(W=r(b,W));var Xe=!0,Fe=!0,Pe=new Array(ge),Re=new Array(De),qe=1/0,Qe=1/0,ct=1/0,bt=1/0;for(h=0;h<S;h++){var Tt=C[h],_t=P[h];o=m.findBin(Tt,Z),p=m.findBin(_t,W),o>=0&&o<ge&&p>=0&&p<De&&(re+=J(o,h,E[p],ve,U[p]),B[p][o].push(h),Xe&&(void 0===Pe[o]?Pe[o]=Tt:Pe[o]!==Tt&&(Xe=!1)),Fe&&(void 0===Re[p]?Re[p]=_t:Re[p]!==_t&&(Fe=!1)),qe=Math.min(qe,Tt-Y[o]),Qe=Math.min(Qe,Y[o+1]-Tt),ct=Math.min(ct,_t-X[p]),bt=Math.min(bt,X[p+1]-_t))}if(ae)for(p=0;p<De;p++)re+=e(E[p],U[p]);if(te)for(p=0;p<De;p++)te(E[p],re,le,se[p]);return{x:C,xRanges:d(Y,Xe&&Pe,qe,Qe,c,y),x0:oe,dx:we,y:P,yRanges:d(X,Fe&&Re,ct,bt,a,u),y0:Oe,dy:Ie,z:E,pts:B}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../histogram/average":822,"../histogram/bin_functions":824,"../histogram/bin_label_vals":825,"../histogram/calc":826,"../histogram/norm_functions":833}],836:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./sample_defaults"),k=v("../heatmap/style_defaults"),x=v("../../components/colorscale/defaults"),e=v("../heatmap/label_defaults"),n=v("./attributes");$.exports=function(i,l,r,d){function f(t,h){return m.coerce(i,l,n,t,h)}g(i,l,f,d),!1!==l.visible&&(k(i,l,f,d),x(i,l,d,f,{prefix:"",cLetter:"z"}),f("hovertemplate"),e(f,d),f("xhoverformat"),f("yhoverformat"))}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/style_defaults":815,"./attributes":834,"./sample_defaults":839}],837:[function(v,$,Q){"use strict";var m=v("../heatmap/hover"),g=v("../../plots/cartesian/axes").hoverLabelText;$.exports=function(k,x,e,n,i){var l=m(k,x,e,n,i);if(l){var r=(k=l[0]).index,t=k.cd[0],h=t.trace,s=t.xRanges[r[1]],o=t.yRanges[r[0]];return k.xLabel=g(k.xa,[s[0],s[1]],h.xhoverformat),k.yLabel=g(k.ya,[o[0],o[1]],h.yhoverformat),l}}},{"../../plots/cartesian/axes":566,"../heatmap/hover":808}],838:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../histogram/cross_trace_defaults"),calc:v("../heatmap/calc"),plot:v("../heatmap/plot"),layerName:"heatmaplayer",colorbar:v("../heatmap/colorbar"),style:v("../heatmap/style"),hoverPoints:v("./hover"),eventData:v("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../heatmap/calc":802,"../heatmap/colorbar":804,"../heatmap/plot":813,"../heatmap/style":814,"../histogram/cross_trace_defaults":828,"../histogram/event_data":830,"./attributes":834,"./defaults":836,"./hover":837}],839:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../lib");$.exports=function(k,x,e,n){var i=e("x"),l=e("y"),r=g.minRowLength(i),d=g.minRowLength(l);r&&d?(x._length=Math.min(r,d),m.getComponentMethod("calendars","handleTraceDefaults")(k,x,["x","y"],n),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):x.visible=!1}},{"../../lib":515,"../../registry":647}],840:[function(v,$,Q){"use strict";var m=v("../histogram2d/attributes"),g=v("../contour/attributes"),k=v("../../components/colorscale/attributes"),x=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../lib/extend").extendFlat;$.exports=e({x:m.x,y:m.y,z:m.z,marker:m.marker,histnorm:m.histnorm,histfunc:m.histfunc,nbinsx:m.nbinsx,xbins:m.xbins,nbinsy:m.nbinsy,ybins:m.ybins,autobinx:m.autobinx,autobiny:m.autobiny,bingroup:m.bingroup,xbingroup:m.xbingroup,ybingroup:m.ybingroup,autocontour:g.autocontour,ncontours:g.ncontours,contours:g.contours,line:{color:g.line.color,width:e({},g.line.width,{dflt:.5}),dash:g.line.dash,smoothing:g.line.smoothing,editType:"plot"},xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:m.hovertemplate,texttemplate:g.texttemplate,textfont:g.textfont},k("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../contour/attributes":744,"../histogram2d/attributes":834}],841:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../histogram2d/sample_defaults"),k=v("../contour/contours_defaults"),x=v("../contour/style_defaults"),e=v("../heatmap/label_defaults"),n=v("./attributes");$.exports=function(i,l,r,d){function f(t,h){return m.coerce(i,l,n,t,h)}g(i,l,f,d),!1!==l.visible&&(k(i,l,f,function(t){return m.coerce2(i,l,n,t)}),x(i,l,f,d),f("xhoverformat"),f("yhoverformat"),f("hovertemplate"),l.contours&&"heatmap"===l.contours.coloring&&e(f,d))}},{"../../lib":515,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/label_defaults":811,"../histogram2d/sample_defaults":839,"./attributes":840}],842:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../histogram/cross_trace_defaults"),calc:v("../contour/calc"),plot:v("../contour/plot").plot,layerName:"contourlayer",style:v("../contour/style"),colorbar:v("../contour/colorbar"),hoverPoints:v("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../contour/calc":745,"../contour/colorbar":747,"../contour/hover":757,"../contour/plot":762,"../contour/style":764,"../histogram/cross_trace_defaults":828,"./attributes":840,"./defaults":841}],843:[function(v,$,Q){"use strict";var m=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../plots/template_attributes").texttemplateAttrs,k=v("../../components/colorscale/attributes"),x=v("../../plots/domain").attributes,e=v("../pie/attributes"),n=v("../sunburst/attributes"),i=v("../treemap/attributes"),l=v("../treemap/constants"),r=v("../../lib/extend").extendFlat;$.exports={labels:n.labels,parents:n.parents,values:n.values,branchvalues:n.branchvalues,count:n.count,level:n.level,maxdepth:n.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:i.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:r({colors:n.marker.colors,line:n.marker.line,editType:"calc"},k("marker",{colorAttr:"colors",anim:!1})),leaf:n.leaf,pathbar:i.pathbar,text:e.text,textinfo:n.textinfo,texttemplate:g({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:n.hoverinfo,hovertemplate:m({},{keys:l.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:i.outsidetextfont,textposition:i.textposition,sort:e.sort,root:n.root,domain:x({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"../treemap/attributes":1084,"../treemap/constants":1087}],844:[function(v,$,Q){"use strict";var m=v("../../plots/plots");Q.name="icicle",Q.plot=function(g,k,x,e){m.plotBasePlot(Q.name,g,k,x,e)},Q.clean=function(g,k,x,e){m.cleanBasePlot(Q.name,g,k,x,e)}},{"../../plots/plots":628}],845:[function(v,$,Q){"use strict";var m=v("../sunburst/calc");Q.calc=function(g,k){return m.calc(g,k)},Q.crossTraceCalc=function(g){return m._runCrossTraceCalc("icicle",g)}},{"../sunburst/calc":1060}],846:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./attributes"),k=v("../../components/color"),x=v("../../plots/domain").defaults,e=v("../bar/defaults").handleText,n=v("../bar/constants").TEXTPAD,i=v("../../components/colorscale"),l=i.hasColorscale,r=i.handleDefaults;$.exports=function(d,f,t,h){function s(_,b){return m.coerce(d,f,g,_,b)}var o=s("labels"),p=s("parents");if(o&&o.length&&p&&p.length){var c=s("values");s(c&&c.length?"branchvalues":"count"),s("level"),s("maxdepth"),s("tiling.orientation"),s("tiling.flip"),s("tiling.pad");var a=s("text");s("texttemplate"),f.texttemplate||s("textinfo",Array.isArray(a)?"text+label":"label"),s("hovertext"),s("hovertemplate");var y=s("pathbar.visible");e(d,f,h,s,"auto",{hasPathbar:y,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),s("textposition"),s("marker.line.width")&&s("marker.line.color",h.paper_bgcolor),s("marker.colors");var u=f._hasColorscale=l(d,"marker","colors")||(d.marker||{}).coloraxis;u&&r(d,f,h,s,{prefix:"marker.",cLetter:"c"}),s("leaf.opacity",u?1:.7),f._hovered={marker:{line:{width:2,color:k.contrast(h.paper_bgcolor)}}},y&&(s("pathbar.thickness",f.pathbar.textfont.size+2*n),s("pathbar.side"),s("pathbar.edgeshape")),s("sort"),s("root.color"),x(f,h,s),f._length=null}else f.visible=!1}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":843}],847:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=v("../../components/drawing"),x=v("../../lib/svg_text_utils"),e=v("./partition"),n=v("./style").styleOne,i=v("../treemap/constants"),l=v("../sunburst/helpers"),r=v("../sunburst/fx"),d=v("../sunburst/plot").formatSliceLabel;$.exports=function(f,t,h,s,o){var p=o.width,c=o.height,a=o.viewX,y=o.viewY,u=o.pathSlice,_=o.toMoveInsideSlice,b=o.strTransform,w=o.hasTransition,T=o.handleSlicesExit,C=o.makeUpdateSliceInterpolator,M=o.makeUpdateTextInterpolator,I=o.prevEntry,P=f._context.staticPlot,S=f._fullLayout,E=t[0].trace,R=-1!==E.textposition.indexOf("left"),D=-1!==E.textposition.indexOf("right"),j=-1!==E.textposition.indexOf("bottom"),H=e(h,[p,c],{flipX:E.tiling.flip.indexOf("x")>-1,flipY:E.tiling.flip.indexOf("y")>-1,orientation:E.tiling.orientation,pad:{inner:E.tiling.pad},maxDepth:E._maxDepth}).descendants(),Y=1/0,X=-1/0;H.forEach(function(B){var V=B.depth;V>=E._maxDepth?(B.x0=B.x1=(B.x0+B.x1)/2,B.y0=B.y1=(B.y0+B.y1)/2):(Y=Math.min(Y,V),X=Math.max(X,V))}),s=s.data(H,l.getPtId),E._maxVisibleLayers=isFinite(X)?X-Y+1:0,s.enter().append("g").classed("slice",!0),T(s,!1,{},[p,c],u),s.order();var Z=null;if(w&&I){var W=l.getPtId(I);s.each(function(B){null===Z&&l.getPtId(B)===W&&(Z={x0:B.x0,x1:B.x1,y0:B.y0,y1:B.y1})})}var re=function(){return Z||{x0:0,x1:p,y0:0,y1:c}},U=s;return w&&(U=U.transition().each("end",function(){var B=m.select(this);l.setSliceCursor(B,f,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),U.each(function(B){B._x0=a(B.x0),B._x1=a(B.x1),B._y0=y(B.y0),B._y1=y(B.y1),B._hoverX=a(B.x1-E.tiling.pad),B._hoverY=y(j?B.y1-E.tiling.pad/2:B.y0+E.tiling.pad/2);var V=m.select(this),ee=g.ensureSingle(V,"path","surface",function(te){te.style("pointer-events",P?"none":"all")});w?ee.transition().attrTween("d",function(te){var ae=C(te,!1,re(),[p,c],{orientation:E.tiling.orientation,flipX:E.tiling.flip.indexOf("x")>-1,flipY:E.tiling.flip.indexOf("y")>-1});return function(le){return u(ae(le))}}):ee.attr("d",u),V.call(r,h,f,t,{styleOne:n,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,f,{isTransitioning:f._transitioning}),ee.call(n,B,E,{hovered:!1}),B._text=B.x0===B.x1||B.y0===B.y1?"":d(B,h,E,t,S)||"";var N=g.ensureSingle(V,"g","slicetext"),K=g.ensureSingle(N,"text","",function(te){te.attr("data-notex",1)}),J=g.ensureUniformFontSize(f,l.determineTextFont(E,B,S.font));K.text(B._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":R?"start":"middle").call(k.font,J).call(x.convertToTspans,f),B.textBB=k.bBox(K.node()),B.transform=_(B,{fontSize:J.size}),B.transform.fontSize=J.size,w?K.transition().attrTween("transform",function(te){var ae=M(te,!1,re(),[p,c]);return function(le){return b(ae(le))}}):K.attr("transform",b(B))}),Z}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"../treemap/constants":1087,"./partition":851,"./style":853,"@plotly/d3":58}],848:[function(v,$,Q){"use strict";$.exports={moduleType:"trace",name:"icicle",basePlotModule:v("./base_plot"),categories:[],animatable:!0,attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),style:v("./style").style,colorbar:v("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":843,"./base_plot":844,"./calc":845,"./defaults":846,"./layout_attributes":849,"./layout_defaults":850,"./plot":852,"./style":853}],849:[function(v,$,Q){"use strict";$.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],850:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./layout_attributes");$.exports=function(k,x){function e(n,i){return m.coerce(k,x,g,n,i)}e("iciclecolorway",x.colorway),e("extendiciclecolors")}},{"../../lib":515,"./layout_attributes":849}],851:[function(v,$,Q){"use strict";var m=v("d3-hierarchy"),g=v("../treemap/flip_tree");$.exports=function(k,x,e){var n=e.flipX,i=e.flipY,l="h"===e.orientation,r=e.maxDepth,d=x[0],f=x[1];r&&(d=(k.height+1)*x[0]/Math.min(k.height+1,r),f=(k.height+1)*x[1]/Math.min(k.height+1,r));var t=m.partition().padding(e.pad.inner).size(l?[x[1],d]:[x[0],f])(k);return(l||n||i)&&g(t,x,{swapXY:l,flipX:n,flipY:i}),t}},{"../treemap/flip_tree":1092,"d3-hierarchy":115}],852:[function(v,$,Q){"use strict";var m=v("../treemap/draw"),g=v("./draw_descendants");$.exports=function(k,x,e,n){return m(k,x,e,n,{type:"icicle",drawDescendants:g})}},{"../treemap/draw":1089,"./draw_descendants":847}],853:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/color"),k=v("../../lib"),x=v("../bar/uniform_text").resizeText;function e(n,i,l){var r=i.data.data,d=!i.children,f=r.i,t=k.castOption(l,f,"marker.line.color")||g.defaultLine,h=k.castOption(l,f,"marker.line.width")||0;n.style("stroke-width",h).call(g.fill,r.color).call(g.stroke,t).style("opacity",d?l.leaf.opacity:null)}$.exports={style:function(n){var i=n._fullLayout._iciclelayer.selectAll(".trace");x(n,i,"icicle"),i.each(function(l){var r=m.select(this),d=l[0].trace;r.style("opacity",d.opacity),r.selectAll("path.surface").each(function(f){m.select(this).call(e,f,d)})})},styleOne:e}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],854:[function(v,$,Q){"use strict";for(var m=v("../../plots/attributes"),g=v("../../plots/template_attributes").hovertemplateAttrs,k=v("../../lib/extend").extendFlat,x=v("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],n=[],i=[],l=0;l<e.length;l++){var r=x[e[l]];n.push("For the `"+e[l]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),i.push("For the `"+e[l]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}$.exports=k({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:k({},m.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:g({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"./constants":856}],855:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./constants"),k=v("fast-isnumeric"),x=v("../../plots/cartesian/axes"),e=v("../../lib").maxRowLength,n=v("./helpers").getImageSize;function i(r,d,f,t){return function(h){return m.constrain((h-r)*d,f,t)}}function l(r,d){return function(f){return m.constrain(f,r,d)}}$.exports=function(r,d){var f,t;if(d._hasZ)f=d.z.length,t=e(d.z);else if(d._hasSource){var h=n(d.source);f=h.height,t=h.width}var s,o=x.getFromId(r,d.xaxis||"x"),p=x.getFromId(r,d.yaxis||"y"),c=o.d2c(d.x0)-d.dx/2,a=p.d2c(d.y0)-d.dy/2,y=[c,c+t*d.dx],u=[a,a+f*d.dy];if(o&&"log"===o.type)for(s=0;s<t;s++)y.push(c+s*d.dx);if(p&&"log"===p.type)for(s=0;s<f;s++)u.push(a+s*d.dy);return d._extremes[o._id]=x.findExtremes(o,y),d._extremes[p._id]=x.findExtremes(p,u),d._scaler=function(_){var b=g.colormodel[_.colormodel],w=(b.colormodel||_.colormodel).length;_._sArray=[];for(var T=0;T<w;T++)_._sArray.push(b.min[T]!==_.zmin[T]||b.max[T]!==_.zmax[T]?i(_.zmin[T],(b.max[T]-b.min[T])/(_.zmax[T]-_.zmin[T]),b.min[T],b.max[T]):l(b.min[T],b.max[T]));return function(C){for(var M=C.slice(0,w),I=0;I<w;I++){var P=M[I];if(!k(P))return!1;M[I]=_._sArray[I](P)}return M}}(d),[{x0:c,y0:a,z:d.z,w:t,h:f}]}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":856,"./helpers":859,"fast-isnumeric":190}],856:[function(v,$,Q){"use strict";$.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(m){return m.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(m){return m.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(m){return m.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(m){var g=m.slice(0,3);return g[1]=g[1]+"%",g[2]=g[2]+"%",g},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(m){var g=m.slice(0,4);return g[1]=g[1]+"%",g[2]=g[2]+"%",g},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],857:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./attributes"),k=v("./constants"),x=v("../../snapshot/helpers").IMAGE_URL_PREFIX;$.exports=function(e,n){function i(d,f){return m.coerce(e,n,g,d,f)}i("source"),n.source&&!n.source.match(x)&&delete n.source,n._hasSource=!!n.source;var l,r=i("z");n._hasZ=!(void 0===r||!r.length||!r[0]||!r[0].length),n._hasZ||n._hasSource?(i("x0"),i("y0"),i("dx"),i("dy"),n._hasZ?(i("colormodel","rgb"),i("zmin",(l=k.colormodel[n.colormodel]).zminDflt||l.min),i("zmax",l.zmaxDflt||l.max)):n._hasSource&&(n.colormodel="rgba256",n.zmin=(l=k.colormodel[n.colormodel]).zminDflt,n.zmax=l.zmaxDflt),i("zsmooth"),i("text"),i("hovertext"),i("hovertemplate"),n._length=null):n.visible=!1}},{"../../lib":515,"../../snapshot/helpers":651,"./attributes":854,"./constants":856}],858:[function(v,$,Q){"use strict";$.exports=function(m,g){return"xVal"in g&&(m.x=g.xVal),"yVal"in g&&(m.y=g.yVal),g.xa&&(m.xaxis=g.xa),g.ya&&(m.yaxis=g.ya),m.color=g.color,m.colormodel=g.trace.colormodel,m.z||(m.z=g.color),m}},{}],859:[function(v,$,Q){"use strict";var m=v("probe-image-size/sync"),g=v("../../snapshot/helpers").IMAGE_URL_PREFIX,k=v("buffer/").Buffer;Q.getImageSize=function(x){var e=x.replace(g,""),n=new k(e,"base64");return m(n)}},{"../../snapshot/helpers":651,"buffer/":85,"probe-image-size/sync":277}],860:[function(v,$,Q){"use strict";var m=v("../../components/fx"),g=v("../../lib"),k=v("./constants");$.exports=function(x,e,n){var i=x.cd[0],l=i.trace,r=x.xa,d=x.ya;if(!(m.inbox(e-i.x0,e-(i.x0+i.w*l.dx),0)>0||m.inbox(n-i.y0,n-(i.y0+i.h*l.dy),0)>0)){var f,t=Math.floor((e-i.x0)/l.dx),h=Math.floor(Math.abs(n-i.y0)/l.dy);if(l._hasZ?f=i.z[h][t]:l._hasSource&&(f=l._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(t,h,1,1).data),f){var s,o=i.hi||l.hoverinfo;if(o){var p=o.split("+");-1!==p.indexOf("all")&&(p=["color"]),-1!==p.indexOf("color")&&(s=!0)}var c,a=k.colormodel[l.colormodel],y=a.colormodel||l.colormodel,u=y.length,_=l._scaler(f),b=a.suffix,w=[];(l.hovertemplate||s)&&(w.push("["+[_[0]+b[0],_[1]+b[1],_[2]+b[2]].join(", ")),4===u&&w.push(", "+_[3]+b[3]),w.push("]"),w=w.join(""),x.extraText=y.toUpperCase()+": "+w),Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[h])?c=l.hovertext[h][t]:Array.isArray(l.text)&&Array.isArray(l.text[h])&&(c=l.text[h][t]);var T=d.c2p(i.y0+(h+.5)*l.dy),C=i.x0+(t+.5)*l.dx,M=i.y0+(h+.5)*l.dy,I="["+f.slice(0,l.colormodel.length).join(", ")+"]";return[g.extendFlat(x,{index:[h,t],x0:r.c2p(i.x0+t*l.dx),x1:r.c2p(i.x0+(t+1)*l.dx),y0:T,y1:T,color:_,xVal:C,xLabelVal:C,yVal:M,yLabelVal:M,zLabelVal:I,text:c,hovertemplateLabels:{zLabel:I,colorLabel:w,"color[0]Label":_[0]+b[0],"color[1]Label":_[1]+b[1],"color[2]Label":_[2]+b[2],"color[3]Label":_[3]+b[3]}})]}}}},{"../../components/fx":407,"../../lib":515,"./constants":856}],861:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),style:v("./style"),hoverPoints:v("./hover"),eventData:v("./event_data"),moduleType:"trace",name:"image",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":578,"./attributes":854,"./calc":855,"./defaults":857,"./event_data":858,"./hover":860,"./plot":862,"./style":863}],862:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=g.strTranslate,x=v("../../constants/xmlns_namespaces"),e=v("./constants"),n=g.isIOS()||g.isSafari()||g.isIE();$.exports=function(i,l,r,d){var f=l.xaxis,t=l.yaxis,h=!(n||i._context._exportedPlot);g.makeTraceGroups(d,r,"im").each(function(s){var o=m.select(this),p=s[0],c=p.trace,a=("fast"===c.zsmooth||!1===c.zsmooth&&h)&&!c._hasZ&&c._hasSource&&"linear"===f.type&&"linear"===t.type;c._realImage=a;var y,u,_,b,w,T,C=p.z,M=p.x0,I=p.y0,P=p.w,S=p.h,E=c.dx,R=c.dy;for(T=0;void 0===y&&T<P;)y=f.c2p(M+T*E),T++;for(T=P;void 0===u&&T>0;)u=f.c2p(M+T*E),T--;for(T=0;void 0===b&&T<S;)b=t.c2p(I+T*R),T++;for(T=S;void 0===w&&T>0;)w=t.c2p(I+T*R),T--;u<y&&(_=u,u=y,y=_),w<b&&(_=b,b=w,w=_),!a&&(y=Math.max(-.5*f._length,y),u=Math.min(1.5*f._length,u),b=Math.max(-.5*t._length,b),w=Math.min(1.5*t._length,w));var D=Math.round(u-y),j=Math.round(w-b);if(D<=0||j<=0)o.selectAll("image").data([]).exit().remove();else{var H=o.selectAll("image").data([s]);H.enter().append("svg:image").attr({xmlns:x.svg,preserveAspectRatio:"none"}),H.exit().remove();var Y=!1===c.zsmooth?e.pixelatedStyle:"";if(a){var X=g.simpleMap(f.range,f.r2l),Z=g.simpleMap(t.range,t.r2l),W=X[1]<X[0],re=Z[1]>Z[0];if(W||re){var U=y+D/2,B=b+j/2;Y+="transform:"+k(U+"px",B+"px")+"scale("+(W?-1:1)+","+(re?-1:1)+")"+k(-U+"px",-B+"px")+";"}}H.attr("style",Y);var V=new Promise(function(N){if(c._hasZ)N();else if(c._hasSource)if(c._canvas&&c._canvas.el.width===P&&c._canvas.el.height===S&&c._canvas.source===c.source)N();else{var K=document.createElement("canvas");K.width=P,K.height=S;var J=K.getContext("2d",{willReadFrequently:!0});c._image=c._image||new Image;var te=c._image;te.onload=function(){J.drawImage(te,0,0),c._canvas={el:K,source:c.source},N()},te.setAttribute("src",c.source)}}).then(function(){var N;if(c._hasZ)N=ee(function(J,te){return C[te][J]}).toDataURL("image/png");else if(c._hasSource)if(a)N=c.source;else{var K=c._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,P,S).data;N=ee(function(J,te){var ae=4*(te*P+J);return[K[ae],K[ae+1],K[ae+2],K[ae+3]]}).toDataURL("image/png")}H.attr({"xlink:href":N,height:j,width:D,x:y,y:b})});i._promises.push(V)}function ee(N){var K=document.createElement("canvas");K.width=D,K.height=j;var J,te=K.getContext("2d",{willReadFrequently:!0}),ae=function(oe){return g.constrain(Math.round(f.c2p(M+oe*E)-y),0,D)},le=function(oe){return g.constrain(Math.round(t.c2p(I+oe*R)-b),0,j)},se=e.colormodel[c.colormodel],ve=se.colormodel||c.colormodel,ue=se.fmt;for(T=0;T<p.w;T++){var ye=ae(T),Me=ae(T+1);if(Me!==ye&&!isNaN(Me)&&!isNaN(ye))for(var pe=0;pe<p.h;pe++){var ge=le(pe),we=le(pe+1);we===ge||isNaN(we)||isNaN(ge)||!N(T,pe)||(J=c._scaler(N(T,pe)),te.fillStyle=J?ve+"("+ue(J).join(",")+")":"rgba(0,0,0,0)",te.fillRect(ye,ge,Me-ye,we-ge))}}return K}})}},{"../../constants/xmlns_namespaces":492,"../../lib":515,"./constants":856,"@plotly/d3":58}],863:[function(v,$,Q){"use strict";var m=v("@plotly/d3");$.exports=function(g){m.select(g).selectAll(".im image").style("opacity",function(k){return k[0].trace.opacity})}},{"@plotly/d3":58}],864:[function(v,$,Q){"use strict";var m=v("../../lib/extend").extendFlat,g=v("../../lib/extend").extendDeep,k=v("../../plot_api/edit_types").overrideAll,x=v("../../plots/font_attributes"),e=v("../../components/color/attributes"),n=v("../../plots/domain").attributes,i=v("../../plots/cartesian/layout_attributes"),l=v("../../plot_api/plot_template").templatedArray,r=v("../../constants/delta.js"),d=v("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,f=x({editType:"plot",colorEditType:"plot"}),t={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},h={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},s=l("step",g({},t,{range:h}));$.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:n({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:m({},f,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:d("value")},font:m({},f,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:d("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:m({},f,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:g({},t,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:k({range:h,visible:m({},i.visible,{dflt:!0}),tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:m({},i.ticks,{dflt:"outside"}),ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,tickfont:x({}),tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,separatethousands:i.separatethousands,exponentformat:i.exponentformat,minexponent:i.minexponent,showexponent:i.showexponent,editType:"plot"},"plot"),steps:s,threshold:{line:{color:m({},t.line.color,{}),width:m({},t.line.width,{dflt:1}),editType:"plot"},thickness:m({},t.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":366,"../../constants/delta.js":485,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],865:[function(v,$,Q){"use strict";var m=v("../../plots/plots");Q.name="indicator",Q.plot=function(g,k,x,e){m.plotBasePlot(Q.name,g,k,x,e)},Q.clean=function(g,k,x,e){m.cleanBasePlot(Q.name,g,k,x,e)}},{"../../plots/plots":628}],866:[function(v,$,Q){"use strict";$.exports={calc:function(m,g){var k=[],x=g.value;"number"!=typeof g._lastValue&&(g._lastValue=g.value);var e=g._lastValue,n=e;return g._hasDelta&&"number"==typeof g.delta.reference&&(n=g.delta.reference),k[0]={y:x,lastY:e,delta:x-n,relativeDelta:(x-n)/n},k}}},{}],867:[function(v,$,Q){"use strict";$.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],868:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./attributes"),k=v("../../plots/domain").defaults,x=v("../../plot_api/plot_template"),e=v("../../plots/array_container_defaults"),n=v("./constants.js"),i=v("../../plots/cartesian/tick_value_defaults"),l=v("../../plots/cartesian/tick_mark_defaults"),r=v("../../plots/cartesian/tick_label_defaults"),d=v("../../plots/cartesian/prefix_suffix_defaults");function f(t,h){function s(o,p){return m.coerce(t,h,g.gauge.steps,o,p)}s("color"),s("line.color"),s("line.width"),s("range"),s("thickness")}$.exports={supplyDefaults:function(t,h,s,o){function p(P,S){return m.coerce(t,h,g,P,S)}k(h,o,p),p("mode"),h._hasNumber=-1!==h.mode.indexOf("number"),h._hasDelta=-1!==h.mode.indexOf("delta"),h._hasGauge=-1!==h.mode.indexOf("gauge");var c=p("value");h._range=[0,"number"==typeof c?1.5*c:1];var a,y,u,_,b,w,T=new Array(2);function C(P,S){return m.coerce(u,_,g.gauge,P,S)}function M(P,S){return m.coerce(b,w,g.gauge.axis,P,S)}if(h._hasNumber&&(p("number.valueformat"),p("number.font.color",o.font.color),p("number.font.family",o.font.family),p("number.font.size"),void 0===h.number.font.size&&(h.number.font.size=n.defaultNumberFontSize,T[0]=!0),p("number.prefix"),p("number.suffix"),a=h.number.font.size),h._hasDelta&&(p("delta.font.color",o.font.color),p("delta.font.family",o.font.family),p("delta.font.size"),void 0===h.delta.font.size&&(h.delta.font.size=(h._hasNumber?.5:1)*(a||n.defaultNumberFontSize),T[1]=!0),p("delta.reference",h.value),p("delta.relative"),p("delta.valueformat",h.delta.relative?"2%":""),p("delta.increasing.symbol"),p("delta.increasing.color"),p("delta.decreasing.symbol"),p("delta.decreasing.color"),p("delta.position"),p("delta.prefix"),p("delta.suffix"),y=h.delta.font.size),h._scaleNumbers=(!h._hasNumber||T[0])&&(!h._hasDelta||T[1])||!1,p("title.font.color",o.font.color),p("title.font.family",o.font.family),p("title.font.size",.25*(a||y||n.defaultNumberFontSize)),p("title.text"),h._hasGauge){(u=t.gauge)||(u={}),_=x.newContainer(h,"gauge"),C("shape"),(h._isBullet="bullet"===h.gauge.shape)||p("title.align","center"),(h._isAngular="angular"===h.gauge.shape)||p("align","center"),C("bgcolor",o.paper_bgcolor),C("borderwidth"),C("bordercolor"),C("bar.color"),C("bar.line.color"),C("bar.line.width"),C("bar.thickness",n.valueThickness*("bullet"===h.gauge.shape?.5:1)),e(u,_,{name:"steps",handleItemDefaults:f}),C("threshold.value"),C("threshold.thickness"),C("threshold.line.width"),C("threshold.line.color"),b={},u&&(b=u.axis||{}),w=x.newContainer(_,"axis"),M("visible"),h._range=M("range",h._range);var I={outerTicks:!0};i(b,w,M,"linear"),d(b,w,M,"linear",I),r(b,w,M,"linear",I),l(b,w,M,I)}else p("title.align","center"),p("align","center"),h._isAngular=h._isBullet=!1;h._length=null}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"../../plots/domain":593,"./attributes":864,"./constants.js":867}],869:[function(v,$,Q){"use strict";$.exports={moduleType:"trace",name:"indicator",basePlotModule:v("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,calc:v("./calc").calc,plot:v("./plot"),meta:{}}},{"./attributes":864,"./base_plot":865,"./calc":866,"./defaults":868,"./plot":870}],870:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("d3-interpolate").interpolate,k=v("d3-interpolate").interpolateNumber,x=v("../../lib"),e=x.strScale,n=x.strTranslate,i=x.rad2deg,l=v("../../constants/alignment").MID_SHIFT,r=v("../../components/drawing"),d=v("./constants"),f=v("../../lib/svg_text_utils"),t=v("../../plots/cartesian/axes"),h=v("../../plots/cartesian/axis_defaults"),s=v("../../plots/cartesian/position_defaults"),o=v("../../plots/cartesian/layout_attributes"),p=v("../../components/color"),c={left:"start",center:"middle",right:"end"},a={left:0,center:.5,right:1},y=/[yzafpn\xb5mkMGTPEZY]/;function u(M){return M&&M.duration>0}function _(M){M.each(function(I){p.stroke(m.select(this),I.line.color)}).each(function(I){p.fill(m.select(this),I.color)}).style("stroke-width",function(I){return I.line.width})}function b(M,I,P){var S=M._fullLayout,E=x.extendFlat({type:"linear",ticks:"outside",range:P,showline:!0},I),R={type:"linear",_id:"x"+I._id},D={letter:"x",font:S.font,noHover:!0,noTickson:!0};function j(H,Y){return x.coerce(E,R,o,H,Y)}return h(E,R,j,D,S),s(E,R,j,D),R}function w(M,I,P){return[Math.min(I/M.width,P/M.height),M,I+"x"+P]}function T(M,I,P,S){var E=document.createElementNS("http://www.w3.org/2000/svg","text"),R=m.select(E);return R.text(M).attr("x",0).attr("y",0).attr("text-anchor",P).attr("data-unformatted",M).call(f.convertToTspans,S).call(r.font,I),r.bBox(R.node())}function C(M,I,P,S,E,R){var D="_cache"+I;M[D]&&M[D].key===E||(M[D]={key:E,value:P});var j=x.aggNums(R,null,[M[D].value,S],2);return M[D].value=j,j}$.exports=function(M,I,P,S){var E,R=M._fullLayout;u(P)&&S&&(E=S()),x.makeTraceGroups(R._indicatorlayer,I,"trace").each(function(D){var j,H,Y,X,Z,W=D[0].trace,re=m.select(this),U=W._hasGauge,B=W._isAngular,V=W._isBullet,ee=W.domain,N={w:R._size.w*(ee.x[1]-ee.x[0]),h:R._size.h*(ee.y[1]-ee.y[0]),l:R._size.l+R._size.w*ee.x[0],r:R._size.r+R._size.w*(1-ee.x[1]),t:R._size.t+R._size.h*(1-ee.y[1]),b:R._size.b+R._size.h*ee.y[0]},K=N.l+N.w/2,J=N.t+N.h/2,te=Math.min(N.w/2,N.h),ae=d.innerRadius*te,le=W.align||"center";if(H=J,U){if(B&&(j=K,H=J+te/2,Y=function(we){return oe=we,[(de=.9*ae)/Math.sqrt(oe.width/2*(oe.width/2)+oe.height*oe.height),oe,de];var oe,de}),V){var se=d.bulletPadding,ve=1-d.bulletNumberDomainSize+se;j=N.l+(ve+(1-ve)*a[le])*N.w,Y=function(we){return w(we,(d.bulletNumberDomainSize-se)*N.w,N.h)}}}else j=N.l+a[le]*N.w,Y=function(we){return w(we,N.w,N.h)};(function(we,oe,de,Te){var Ee,Ae,De,Ie=de[0].trace,Oe=Te.numbersX,Xe=Te.numbersY,Fe=Ie.align||"center",Pe=c[Fe],Re=Te.transitionOpts,qe=Te.onComplete,Qe=x.ensureSingle(oe,"g","numbers"),ct=[];Ie._hasNumber&&ct.push("number"),Ie._hasDelta&&(ct.push("delta"),"left"===Ie.delta.position&&ct.reverse());var bt=Qe.selectAll("text").data(ct);function Tt(Xt,cr,Ft,Be){if(!Xt.match("s")||Ft>=0==Be>=0||cr(Ft).slice(-1).match(y)||cr(Be).slice(-1).match(y))return cr;var He=Xt.slice().replace("s","f").replace(/\d+/,function(be){return parseInt(be)-1}),he=b(we,{tickformat:He});return function(be){return Math.abs(be)<1?t.tickText(he,be).text:cr(be)}}bt.enter().append("text"),bt.attr("text-anchor",function(){return Pe}).attr("class",function(Xt){return Xt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),bt.exit().remove();var _t,nt=Ie.mode+Ie.align;if(Ie._hasDelta&&(_t=function(){var Xt=b(we,{tickformat:Ie.delta.valueformat},Ie._range);Xt.setScale(),t.prepTicks(Xt);var cr=function(Je){return t.tickText(Xt,Je).text},Ft=Ie.delta.suffix,Be=Ie.delta.prefix,He=function(Je){return Ie.delta.relative?Je.relativeDelta:Je.delta},he=function(Je,Ye){return 0===Je||"number"!=typeof Je||isNaN(Je)?"-":(Je>0?Ie.delta.increasing.symbol:Ie.delta.decreasing.symbol)+Be+Ye(Je)+Ft},be=function(Je){return Je.delta>=0?Ie.delta.increasing.color:Ie.delta.decreasing.color};void 0===Ie._deltaLastValue&&(Ie._deltaLastValue=He(de[0]));var ze=Qe.select("text.delta");function Ve(){ze.text(he(He(de[0]),cr)).call(p.fill,be(de[0])).call(f.convertToTspans,we)}return ze.call(r.font,Ie.delta.font).call(p.fill,be({delta:Ie._deltaLastValue})),u(Re)?ze.transition().duration(Re.duration).ease(Re.easing).tween("text",function(){var Je=m.select(this),Ye=He(de[0]),lt=Ie._deltaLastValue,st=Tt(Ie.delta.valueformat,cr,lt,Ye),Mt=k(lt,Ye);return Ie._deltaLastValue=Ye,function(Dt){Je.text(he(Mt(Dt),st)),Je.call(p.fill,be({delta:Mt(Dt)}))}}).each("end",function(){Ve(),qe&&qe()}).each("interrupt",function(){Ve(),qe&&qe()}):Ve(),Ae=T(he(He(de[0]),cr),Ie.delta.font,Pe,we),ze}(),nt+=Ie.delta.position+Ie.delta.font.size+Ie.delta.font.family+Ie.delta.valueformat,nt+=Ie.delta.increasing.symbol+Ie.delta.decreasing.symbol,De=Ae),Ie._hasNumber&&(function(){var Xt=b(we,{tickformat:Ie.number.valueformat},Ie._range);Xt.setScale(),t.prepTicks(Xt);var cr=function(be){return t.tickText(Xt,be).text},Ft=Ie.number.suffix,Be=Ie.number.prefix,He=Qe.select("text.number");function he(){var be="number"==typeof de[0].y?Be+cr(de[0].y)+Ft:"-";He.text(be).call(r.font,Ie.number.font).call(f.convertToTspans,we)}u(Re)?He.transition().duration(Re.duration).ease(Re.easing).each("end",function(){he(),qe&&qe()}).each("interrupt",function(){he(),qe&&qe()}).attrTween("text",function(){var be=m.select(this),ze=k(de[0].lastY,de[0].y);Ie._lastValue=de[0].y;var Ve=Tt(Ie.number.valueformat,cr,de[0].lastY,de[0].y);return function(Je){be.text(Be+Ve(ze(Je))+Ft)}}):he(),Ee=T(Be+cr(de[0].y)+Ft,Ie.number.font,Pe,we)}(),nt+=Ie.number.font.size+Ie.number.font.family+Ie.number.valueformat+Ie.number.suffix+Ie.number.prefix,De=Ee),Ie._hasDelta&&Ie._hasNumber){var Ke,xt,Ht=[(Ee.left+Ee.right)/2,(Ee.top+Ee.bottom)/2],Zt=[(Ae.left+Ae.right)/2,(Ae.top+Ae.bottom)/2],$t=.75*Ie.delta.font.size;"left"===Ie.delta.position&&(Ke=C(Ie,"deltaPos",0,-1*(Ee.width*a[Ie.align]+Ae.width*(1-a[Ie.align])+$t),nt,Math.min),xt=Ht[1]-Zt[1],De={width:Ee.width+Ae.width+$t,height:Math.max(Ee.height,Ae.height),left:Ae.left+Ke,right:Ee.right,top:Math.min(Ee.top,Ae.top+xt),bottom:Math.max(Ee.bottom,Ae.bottom+xt)}),"right"===Ie.delta.position&&(Ke=C(Ie,"deltaPos",0,Ee.width*(1-a[Ie.align])+Ae.width*a[Ie.align]+$t,nt,Math.max),xt=Ht[1]-Zt[1],De={width:Ee.width+Ae.width+$t,height:Math.max(Ee.height,Ae.height),left:Ee.left,right:Ae.right+Ke,top:Math.min(Ee.top,Ae.top+xt),bottom:Math.max(Ee.bottom,Ae.bottom+xt)}),"bottom"===Ie.delta.position&&(Ke=null,xt=Ae.height,De={width:Math.max(Ee.width,Ae.width),height:Ee.height+Ae.height,left:Math.min(Ee.left,Ae.left),right:Math.max(Ee.right,Ae.right),top:Ee.bottom-Ee.height,bottom:Ee.bottom+Ae.height}),"top"===Ie.delta.position&&(Ke=null,xt=Ee.top,De={width:Math.max(Ee.width,Ae.width),height:Ee.height+Ae.height,left:Math.min(Ee.left,Ae.left),right:Math.max(Ee.right,Ae.right),top:Ee.bottom-Ee.height-Ae.height,bottom:Ee.bottom}),_t.attr({dx:Ke,dy:xt})}(Ie._hasNumber||Ie._hasDelta)&&Qe.attr("transform",function(){var cr,Xt=Te.numbersScaler(De),Ft=C(Ie,"numbersScale",1,Xt[0],nt+=Xt[2],Math.min);Ie._scaleNumbers||(Ft=1),Ie._numbersTop=Ft*De.top+(cr=Ie._isAngular?Xe-Ft*De.bottom:Xe-Ft*(De.top+De.bottom)/2);var Be=De[Fe];"center"===Fe&&(Be=(De.left+De.right)/2);var He=Oe-Ft*Be;return He=C(Ie,"numbersTranslate",0,He,nt,Math.max),n(He,cr)+e(Ft)})})(M,re,D,{numbersX:j,numbersY:H,numbersScaler:Y,transitionOpts:P,onComplete:E}),U&&(X={range:W.gauge.axis.range,color:W.gauge.bgcolor,line:{color:W.gauge.bordercolor,width:0},thickness:1},Z={range:W.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:W.gauge.bordercolor,width:W.gauge.borderwidth},thickness:1});var ue=re.selectAll("g.angular").data(B?D:[]);ue.exit().remove();var ye=re.selectAll("g.angularaxis").data(B?D:[]);ye.exit().remove(),B&&function(we,oe,de,Te){var Ee,Ae,De,Ie,Oe=de[0].trace,Xe=Te.size,Fe=Te.radius,Pe=Te.innerRadius,Re=Te.gaugeBg,qe=Te.gaugeOutline,Qe=[Xe.l+Xe.w/2,Xe.t+Xe.h/2+Fe/2],ct=Te.gauge,bt=Te.layer,Tt=Te.transitionOpts,_t=Te.onComplete,nt=Math.PI/2;function Ke(Dt){var ht=Oe.gauge.axis.range[0],mt=(Dt-ht)/(Oe.gauge.axis.range[1]-ht)*Math.PI-nt;return mt<-nt?-nt:mt>nt?nt:mt}function xt(Dt){return m.svg.arc().innerRadius((Pe+Fe)/2-Dt/2*(Fe-Pe)).outerRadius((Pe+Fe)/2+Dt/2*(Fe-Pe)).startAngle(-nt)}function Ht(Dt){Dt.attr("d",function(ht){return xt(ht.thickness).startAngle(Ke(ht.range[0])).endAngle(Ke(ht.range[1]))()})}ct.enter().append("g").classed("angular",!0),ct.attr("transform",n(Qe[0],Qe[1])),bt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),bt.selectAll("g.xangularaxistick,path,text").remove(),(Ee=b(we,Oe.gauge.axis)).type="linear",Ee.range=Oe.gauge.axis.range,Ee._id="xangularaxis",Ee.ticklabeloverflow="allow",Ee.setScale();var Zt=function(Dt){return(Ee.range[0]-Dt.x)/(Ee.range[1]-Ee.range[0])*Math.PI+Math.PI},$t={},Xt=t.makeLabelFns(Ee,0).labelStandoff;$t.xFn=function(Dt){var ht=Zt(Dt);return Math.cos(ht)*Xt},$t.yFn=function(Dt){var ht=Zt(Dt),mt=Math.sin(ht)>0?.2:1;return-Math.sin(ht)*(Xt+Dt.fontSize*mt)+Math.abs(Math.cos(ht))*(Dt.fontSize*l)},$t.anchorFn=function(Dt){var ht=Zt(Dt),mt=Math.cos(ht);return Math.abs(mt)<.1?"middle":mt>0?"start":"end"},$t.heightFn=function(Dt,ht,mt){var Ot=Zt(Dt);return-.5*(1+Math.sin(Ot))*mt};var cr=function(Dt){return n(Qe[0]+Fe*Math.cos(Dt),Qe[1]-Fe*Math.sin(Dt))};De=function(Dt){return cr(Zt(Dt))},Ae=t.calcTicks(Ee),Ie=t.getTickSigns(Ee)[2],Ee.visible&&(t.drawTicks(we,Ee,{vals:Ae,layer:bt,path:"M"+(Ie="inside"===Ee.ticks?-1:1)*((Ee.linewidth||1)/2)+",0h"+Ie*Ee.ticklen,transFn:function(Dt){var ht=Zt(Dt);return cr(ht)+"rotate("+-i(ht)+")"}}),t.drawLabels(we,Ee,{vals:Ae,layer:bt,transFn:De,labelFns:$t}));var Be=[Re].concat(Oe.gauge.steps),He=ct.selectAll("g.bg-arc").data(Be);He.enter().append("g").classed("bg-arc",!0).append("path"),He.select("path").call(Ht).call(_),He.exit().remove();var he=xt(Oe.gauge.bar.thickness),be=ct.selectAll("g.value-arc").data([Oe.gauge.bar]);be.enter().append("g").classed("value-arc",!0).append("path");var Ve,Je,Ye,ze=be.select("path");u(Tt)?(ze.transition().duration(Tt.duration).ease(Tt.easing).each("end",function(){_t&&_t()}).each("interrupt",function(){_t&&_t()}).attrTween("d",(Ve=he,Je=Ke(de[0].lastY),Ye=Ke(de[0].y),function(){var Dt=g(Je,Ye);return function(ht){return Ve.endAngle(Dt(ht))()}})),Oe._lastValue=de[0].y):ze.attr("d","number"==typeof de[0].y?he.endAngle(Ke(de[0].y)):"M0,0Z"),ze.call(_),be.exit().remove(),Be=[];var lt=Oe.gauge.threshold.value;(lt||0===lt)&&Be.push({range:[lt,lt],color:Oe.gauge.threshold.color,line:{color:Oe.gauge.threshold.line.color,width:Oe.gauge.threshold.line.width},thickness:Oe.gauge.threshold.thickness});var st=ct.selectAll("g.threshold-arc").data(Be);st.enter().append("g").classed("threshold-arc",!0).append("path"),st.select("path").call(Ht).call(_),st.exit().remove();var Mt=ct.selectAll("g.gauge-outline").data([qe]);Mt.enter().append("g").classed("gauge-outline",!0).append("path"),Mt.select("path").call(Ht).call(_),Mt.exit().remove()}(M,0,D,{radius:te,innerRadius:ae,gauge:ue,layer:ye,size:N,gaugeBg:X,gaugeOutline:Z,transitionOpts:P,onComplete:E});var Me=re.selectAll("g.bullet").data(V?D:[]);Me.exit().remove();var pe=re.selectAll("g.bulletaxis").data(V?D:[]);pe.exit().remove(),V&&function(we,oe,de,Te){var Ee,Ae,De,Ie,Oe,Xe=de[0].trace,Fe=Te.gauge,Pe=Te.layer,Re=Te.gaugeBg,qe=Te.gaugeOutline,Qe=Te.size,ct=Xe.domain,bt=Te.transitionOpts,Tt=Te.onComplete;Fe.enter().append("g").classed("bullet",!0),Fe.attr("transform",n(Qe.l,Qe.t)),Pe.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Pe.selectAll("g.xbulletaxistick,path,text").remove();var _t=Qe.h,nt=Xe.gauge.bar.thickness*_t,Ke=ct.x[0],xt=ct.x[0]+(ct.x[1]-ct.x[0])*(Xe._hasNumber||Xe._hasDelta?1-d.bulletNumberDomainSize:1);function Ht(He){He.attr("width",function(he){return Math.max(0,Ee.c2p(he.range[1])-Ee.c2p(he.range[0]))}).attr("x",function(he){return Ee.c2p(he.range[0])}).attr("y",function(he){return.5*(1-he.thickness)*_t}).attr("height",function(he){return he.thickness*_t})}(Ee=b(we,Xe.gauge.axis))._id="xbulletaxis",Ee.domain=[Ke,xt],Ee.setScale(),Ae=t.calcTicks(Ee),De=t.makeTransTickFn(Ee),Ie=t.getTickSigns(Ee)[2],Oe=Qe.t+Qe.h,Ee.visible&&(t.drawTicks(we,Ee,{vals:"inside"===Ee.ticks?t.clipEnds(Ee,Ae):Ae,layer:Pe,path:t.makeTickPath(Ee,Oe,Ie),transFn:De}),t.drawLabels(we,Ee,{vals:Ae,layer:Pe,transFn:De,labelFns:t.makeLabelFns(Ee,Oe)}));var Zt=[Re].concat(Xe.gauge.steps),$t=Fe.selectAll("g.bg-bullet").data(Zt);$t.enter().append("g").classed("bg-bullet",!0).append("rect"),$t.select("rect").call(Ht).call(_),$t.exit().remove();var Xt=Fe.selectAll("g.value-bullet").data([Xe.gauge.bar]);Xt.enter().append("g").classed("value-bullet",!0).append("rect"),Xt.select("rect").attr("height",nt).attr("y",(_t-nt)/2).call(_),u(bt)?Xt.select("rect").transition().duration(bt.duration).ease(bt.easing).each("end",function(){Tt&&Tt()}).each("interrupt",function(){Tt&&Tt()}).attr("width",Math.max(0,Ee.c2p(Math.min(Xe.gauge.axis.range[1],de[0].y)))):Xt.select("rect").attr("width","number"==typeof de[0].y?Math.max(0,Ee.c2p(Math.min(Xe.gauge.axis.range[1],de[0].y))):0),Xt.exit().remove();var cr=de.filter(function(){return Xe.gauge.threshold.value||0===Xe.gauge.threshold.value}),Ft=Fe.selectAll("g.threshold-bullet").data(cr);Ft.enter().append("g").classed("threshold-bullet",!0).append("line"),Ft.select("line").attr("x1",Ee.c2p(Xe.gauge.threshold.value)).attr("x2",Ee.c2p(Xe.gauge.threshold.value)).attr("y1",(1-Xe.gauge.threshold.thickness)/2*_t).attr("y2",(1-(1-Xe.gauge.threshold.thickness)/2)*_t).call(p.stroke,Xe.gauge.threshold.line.color).style("stroke-width",Xe.gauge.threshold.line.width),Ft.exit().remove();var Be=Fe.selectAll("g.gauge-outline").data([qe]);Be.enter().append("g").classed("gauge-outline",!0).append("rect"),Be.select("rect").call(Ht).call(_),Be.exit().remove()}(M,0,D,{gauge:Me,layer:pe,size:N,gaugeBg:X,gaugeOutline:Z,transitionOpts:P,onComplete:E});var ge=re.selectAll("text.title").data(D);ge.exit().remove(),ge.enter().append("text").classed("title",!0),ge.attr("text-anchor",function(){return V?c.right:c[W.title.align]}).text(W.title.text).call(r.font,W.title.font).call(f.convertToTspans,M),ge.attr("transform",function(){var we,oe=N.l+N.w*a[W.title.align],de=d.titlePadding,Te=r.bBox(ge.node());return U?(B&&(we=W.gauge.axis.visible?r.bBox(ye.node()).top-de-Te.bottom:N.t+N.h/2-te/2-Te.bottom-de),V&&(we=H-(Te.top+Te.bottom)/2,oe=N.l-d.bulletPadding*N.w)):we=W._numbersTop-de-Te.bottom,n(oe,we)})})}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"./constants":867,"@plotly/d3":58,"d3-interpolate":116}],871:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/attributes"),g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=v("../../plots/template_attributes").hovertemplateAttrs,x=v("../mesh3d/attributes"),e=v("../../plots/attributes"),n=v("../../lib/extend").extendFlat,i=v("../../plot_api/edit_types").overrideAll,l=$.exports=i(n({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:k(),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),valuehoverformat:g("value",1),showlegend:n({},e.showlegend,{dflt:!1})},m("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:x.opacity,lightposition:x.lightposition,lighting:x.lighting,flatshading:x.flatshading,contour:x.contour,hoverinfo:n({},e.hoverinfo)}),"calc","nested");l.flatshading.dflt=!0,l.lighting.facenormalsepsilon.dflt=0,l.x.editType=l.y.editType=l.z.editType=l.value.editType="calc+clearAxisTypes",l.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],872:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/calc"),g=v("../streamtube/calc").processGrid,k=v("../streamtube/calc").filter;$.exports=function(x,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=k(e.x,e._len),e._y=k(e.y,e._len),e._z=k(e.z,e._len),e._value=k(e.value,e._len);var n=g(e);e._gridFill=n.fill,e._Xs=n.Xs,e._Ys=n.Ys,e._Zs=n.Zs,e._len=n.len;for(var i=1/0,l=-1/0,r=0;r<e._len;r++){var d=e._value[r];i=Math.min(i,d),l=Math.max(l,d)}e._minValues=i,e._maxValues=l,e._vMin=null==e.isomin?i:e.isomin,e._vMax=void 0===e.isomax||null===e.isomin?l:e.isomax,m(x,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375,"../streamtube/calc":1054}],873:[function(v,$,Q){"use strict";var m=v("../../../stackgl_modules").gl_mesh3d,g=v("../../lib/gl_format_color").parseColorScale,k=v("../../lib/str2rgbarray"),x=v("../../components/colorscale").extractOpts,e=v("../../plots/gl3d/zip3"),n=function(f,t){for(var h=t.length-1;h>0;h--){var s=Math.min(t[h],t[h-1]),o=Math.max(t[h],t[h-1]);if(o>s&&s<f&&f<=o)return{id:h,distRatio:(o-f)/(o-s)}}return{id:0,distRatio:0}};function i(f,t,h){this.scene=f,this.uid=h,this.mesh=t,this.name="",this.data=null,this.showContour=!1}var l=i.prototype;l.handlePick=function(f){if(f.object===this.mesh){var t=f.data.index,s=this.data._meshY[t],o=this.data._meshZ[t],p=this.data._Ys.length,c=this.data._Zs.length,a=n(this.data._meshX[t],this.data._Xs).id,y=n(s,this.data._Ys).id,u=n(o,this.data._Zs).id,_=f.index=u+c*y+c*p*a;f.traceCoordinate=[this.data._meshX[_],this.data._meshY[_],this.data._meshZ[_],this.data._value[_]];var b=this.data.hovertext||this.data.text;return Array.isArray(b)&&void 0!==b[_]?f.textLabel=b[_]:b&&(f.textLabel=b),!0}},l.update=function(f){var t=this.scene,h=t.fullSceneLayout;function s(c,a,y,u){return a.map(function(_){return c.d2l(_,0,u)*y})}this.data=d(f);var o={positions:e(s(h.xaxis,f._meshX,t.dataScale[0],f.xcalendar),s(h.yaxis,f._meshY,t.dataScale[1],f.ycalendar),s(h.zaxis,f._meshZ,t.dataScale[2],f.zcalendar)),cells:e(f._meshI,f._meshJ,f._meshK),lightPosition:[f.lightposition.x,f.lightposition.y,f.lightposition.z],ambient:f.lighting.ambient,diffuse:f.lighting.diffuse,specular:f.lighting.specular,roughness:f.lighting.roughness,fresnel:f.lighting.fresnel,vertexNormalsEpsilon:f.lighting.vertexnormalsepsilon,faceNormalsEpsilon:f.lighting.facenormalsepsilon,opacity:f.opacity,contourEnable:f.contour.show,contourColor:k(f.contour.color).slice(0,3),contourWidth:f.contour.width,useFacetNormals:f.flatshading},p=x(f);o.vertexIntensity=f._meshIntensity,o.vertexIntensityBounds=[p.min,p.max],o.colormap=g(f),this.mesh.update(o)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function d(f){f._meshI=[],f._meshJ=[],f._meshK=[];var t,h,s,o,p,c,a,y=f.surface.show,u=f.spaceframe.show,_=f.surface.fill,b=f.spaceframe.fill,w=!1,T=!1,C=0,M=f._Xs,I=f._Ys,P=f._Zs,S=M.length,E=I.length,R=P.length,D=r.indexOf(f._gridFill.replace(/-/g,"").replace(/\+/g,"")),j=function(Fe,Pe,Re){switch(D){case 5:return Re+R*Pe+R*E*Fe;case 4:return Re+R*Fe+R*S*Pe;case 3:return Pe+E*Re+E*R*Fe;case 2:return Pe+E*Fe+E*S*Re;case 1:return Fe+S*Re+S*R*Pe;default:return Fe+S*Pe+S*E*Re}},H=f._minValues,Y=f._maxValues,X=f._vMin,Z=f._vMax;function W(Fe,Pe,Re){for(var qe=c.length,Qe=h;Qe<qe;Qe++)if(Fe===s[Qe]&&Pe===o[Qe]&&Re===p[Qe])return Qe;return-1}function re(){h=t}function U(){s=[],o=[],p=[],c=[],t=0,re()}function B(Fe,Pe,Re,qe){return s.push(Fe),o.push(Pe),p.push(Re),c.push(qe),++t-1}function V(Fe,Pe,Re){for(var qe=[],Qe=0;Qe<Fe.length;Qe++)qe[Qe]=Fe[Qe]*(1-Re)+Re*Pe[Qe];return qe}function ee(Fe){a=Fe}function N(Fe,Pe){return"all"===Fe||null===Fe||Fe.indexOf(Pe)>-1}function K(Fe,Pe){return null===Fe?Pe:Fe}function J(Fe,Pe,Re){re();var Qe,ct,Ft,Be,He,he,be,ze,Ve,Je,Ye,lt,st,Mt,Dt,bt=[Pe],Tt=[Re];if(a>=1)bt=[Pe],Tt=[Re];else if(a>0){var _t=(Be=Re,Je=V(ze=function(ht,mt,Ot){for(var At=[],It=0;It<ht.length;It++)At[It]=(ht[It]+mt[It]+Ot[It])/3;return At}(He=(Ft=Pe)[0],he=Ft[1],be=Ft[2]),He,Ve=Math.sqrt(1-a)),{xyzv:[[He,he,Ye=V(ze,he,Ve)],[Ye,Je,He],[he,be,lt=V(ze,be,Ve)],[lt,Ye,he],[be,He,Je],[Je,lt,be]],abc:[[st=Be[0],Mt=Be[1],-1],[-1,-1,st],[Mt,Dt=Be[2],-1],[-1,-1,Mt],[Dt,st,-1],[-1,-1,Dt]]});bt=_t.xyzv,Tt=_t.abc}for(var nt=0;nt<bt.length;nt++){Pe=bt[nt],Re=Tt[nt];for(var Ke=[],xt=0;xt<3;xt++){var Ht=Pe[xt][0],Zt=Pe[xt][1],$t=Pe[xt][2],Xt=Pe[xt][3],cr=Re[xt]>-1?Re[xt]:W(Ht,Zt,$t);Ke[xt]=cr>-1?cr:B(Ht,Zt,$t,K(Fe,Xt))}Qe=Ke[1],ct=Ke[2],f._meshI.push(Ke[0]),f._meshJ.push(Qe),f._meshK.push(ct),++C}}function te(Fe,Pe,Re,qe){var Qe=Fe[3];Qe<Re&&(Qe=Re),Qe>qe&&(Qe=qe);for(var ct=(Fe[3]-Qe)/(Fe[3]-Pe[3]+1e-9),bt=[],Tt=0;Tt<4;Tt++)bt[Tt]=(1-ct)*Fe[Tt]+ct*Pe[Tt];return bt}function ae(Fe,Pe,Re){return Fe>=Pe&&Fe<=Re}function le(Fe){var Pe=.001*(Z-X);return Fe>=X-Pe&&Fe<=Z+Pe}function se(Fe){for(var Pe=[],Re=0;Re<4;Re++){var qe=Fe[Re];Pe.push([f._x[qe],f._y[qe],f._z[qe],f._value[qe]])}return Pe}function ve(Fe,Pe,Re,qe,Qe,ct){ct||(ct=1),Re=[-1,-1,-1];var bt=!1,Tt=[ae(Pe[0][3],qe,Qe),ae(Pe[1][3],qe,Qe),ae(Pe[2][3],qe,Qe)];if(!Tt[0]&&!Tt[1]&&!Tt[2])return!1;var _t=function(Ke,xt,Ht){return le(xt[0][3])&&le(xt[1][3])&&le(xt[2][3])?(J(Ke,xt,Ht),!0):ct<3&&ve(Ke,xt,Ht,X,Z,++ct)};if(Tt[0]&&Tt[1]&&Tt[2])return _t(Fe,Pe,Re)||bt;var nt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(Ke){if(Tt[Ke[0]]&&Tt[Ke[1]]&&!Tt[Ke[2]]){var xt=Pe[Ke[0]],Ht=Pe[Ke[1]],Zt=Pe[Ke[2]],$t=te(Zt,xt,qe,Qe),Xt=te(Zt,Ht,qe,Qe);bt=_t(Fe,[Xt,$t,xt],[-1,-1,Re[Ke[0]]])||bt,bt=_t(Fe,[xt,Ht,Xt],[Re[Ke[0]],Re[Ke[1]],-1])||bt,nt=!0}}),nt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Ke){if(Tt[Ke[0]]&&!Tt[Ke[1]]&&!Tt[Ke[2]]){var xt=Pe[Ke[0]],Zt=Pe[Ke[2]],$t=te(Pe[Ke[1]],xt,qe,Qe),Xt=te(Zt,xt,qe,Qe);bt=_t(Fe,[Xt,$t,xt],[-1,-1,Re[Ke[0]]])||bt,nt=!0}}),bt}function ue(Fe,Pe,Re,qe){var _t,nt,Ke,xt,Qe=!1,ct=se(Pe),bt=[ae(ct[0][3],Re,qe),ae(ct[1][3],Re,qe),ae(ct[2][3],Re,qe),ae(ct[3][3],Re,qe)];if(!(bt[0]||bt[1]||bt[2]||bt[3]))return Qe;if(bt[0]&&bt[1]&&bt[2]&&bt[3])return T&&(_t=Fe,nt=ct,Ke=Pe,(xt=function(Ht,Zt,$t){J(_t,[nt[Ht],nt[Zt],nt[$t]],[Ke[Ht],Ke[Zt],Ke[$t]])})(0,1,2),xt(3,0,1),xt(2,3,0),Qe=void xt(1,2,3)||Qe),Qe;var Tt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(_t){if(bt[_t[0]]&&bt[_t[1]]&&bt[_t[2]]&&!bt[_t[3]]){var nt=ct[_t[0]],Ke=ct[_t[1]],xt=ct[_t[2]],Ht=ct[_t[3]];if(T)Qe=J(Fe,[nt,Ke,xt],[Pe[_t[0]],Pe[_t[1]],Pe[_t[2]]])||Qe;else{var Zt=te(Ht,nt,Re,qe),$t=te(Ht,Ke,Re,qe),Xt=te(Ht,xt,Re,qe);Qe=J(null,[Zt,$t,Xt],[-1,-1,-1])||Qe}Tt=!0}}),Tt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(_t){if(bt[_t[0]]&&bt[_t[1]]&&!bt[_t[2]]&&!bt[_t[3]]){var nt=ct[_t[0]],Ke=ct[_t[1]],xt=ct[_t[2]],Ht=ct[_t[3]],Zt=te(xt,nt,Re,qe),$t=te(xt,Ke,Re,qe),Xt=te(Ht,Ke,Re,qe),cr=te(Ht,nt,Re,qe);T?(Qe=J(Fe,[nt,cr,Zt],[Pe[_t[0]],-1,-1])||Qe,Qe=J(Fe,[Ke,$t,Xt],[Pe[_t[1]],-1,-1])||Qe):(null,Be=[Zt,$t,Xt,cr],He=[-1,-1,-1,-1],(he=function(be,ze,Ve){J(null,[Be[be],Be[ze],Be[Ve]],[He[be],He[ze],He[Ve]])})(0,1,2),Qe=void he(2,3,0)||Qe),Tt=!0}var Be,He,he}),Tt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(_t){if(bt[_t[0]]&&!bt[_t[1]]&&!bt[_t[2]]&&!bt[_t[3]]){var nt=ct[_t[0]],xt=ct[_t[2]],Ht=ct[_t[3]],Zt=te(ct[_t[1]],nt,Re,qe),$t=te(xt,nt,Re,qe),Xt=te(Ht,nt,Re,qe);T?(Qe=J(Fe,[nt,Zt,$t],[Pe[_t[0]],-1,-1])||Qe,Qe=J(Fe,[nt,$t,Xt],[Pe[_t[0]],-1,-1])||Qe,Qe=J(Fe,[nt,Xt,Zt],[Pe[_t[0]],-1,-1])||Qe):Qe=J(null,[Zt,$t,Xt],[-1,-1,-1])||Qe,Tt=!0}})),Qe}function ye(Fe,Pe,Re,qe,Qe,ct,bt,Tt,_t,nt,Ke){var xt=!1;return w&&(N(Fe,"A")&&(xt=ue(null,[Pe,Re,qe,ct],nt,Ke)||xt),N(Fe,"B")&&(xt=ue(null,[Re,qe,Qe,_t],nt,Ke)||xt),N(Fe,"C")&&(xt=ue(null,[Re,ct,bt,_t],nt,Ke)||xt),N(Fe,"D")&&(xt=ue(null,[qe,ct,Tt,_t],nt,Ke)||xt),N(Fe,"E")&&(xt=ue(null,[Re,qe,ct,_t],nt,Ke)||xt)),T&&(xt=ue(Fe,[Re,qe,ct,_t],nt,Ke)||xt),xt}function Me(Fe,Pe,Re,qe,Qe,ct,bt,Tt){return[!0===Tt[0]||ve(Fe,se([Pe,Re,qe]),[Pe,Re,qe],ct,bt),!0===Tt[1]||ve(Fe,se([qe,Qe,Pe]),[qe,Qe,Pe],ct,bt)]}function pe(Fe,Pe,Re,qe,Qe,ct,bt,Tt,_t){return Tt?Me(Fe,Pe,Re,Qe,qe,ct,bt,_t):Me(Fe,Re,Qe,qe,Pe,ct,bt,_t)}function ge(Fe,Pe,Re,qe,Qe,ct,bt){var Tt,_t,nt,Ke,xt=!1,Ht=function(){xt=ve(Fe,[Tt,_t,nt],[-1,-1,-1],Qe,ct)||xt,xt=ve(Fe,[nt,Ke,Tt],[-1,-1,-1],Qe,ct)||xt},Zt=bt[0],$t=bt[1],Xt=bt[2];return Zt&&(Tt=V(se([j(Pe,Re-0,qe-0)])[0],se([j(Pe-1,Re-0,qe-0)])[0],Zt),_t=V(se([j(Pe,Re-0,qe-1)])[0],se([j(Pe-1,Re-0,qe-1)])[0],Zt),nt=V(se([j(Pe,Re-1,qe-1)])[0],se([j(Pe-1,Re-1,qe-1)])[0],Zt),Ke=V(se([j(Pe,Re-1,qe-0)])[0],se([j(Pe-1,Re-1,qe-0)])[0],Zt),Ht()),$t&&(Tt=V(se([j(Pe-0,Re,qe-0)])[0],se([j(Pe-0,Re-1,qe-0)])[0],$t),_t=V(se([j(Pe-0,Re,qe-1)])[0],se([j(Pe-0,Re-1,qe-1)])[0],$t),nt=V(se([j(Pe-1,Re,qe-1)])[0],se([j(Pe-1,Re-1,qe-1)])[0],$t),Ke=V(se([j(Pe-1,Re,qe-0)])[0],se([j(Pe-1,Re-1,qe-0)])[0],$t),Ht()),Xt&&(Tt=V(se([j(Pe-0,Re-0,qe)])[0],se([j(Pe-0,Re-0,qe-1)])[0],Xt),_t=V(se([j(Pe-0,Re-1,qe)])[0],se([j(Pe-0,Re-1,qe-1)])[0],Xt),nt=V(se([j(Pe-1,Re-1,qe)])[0],se([j(Pe-1,Re-1,qe-1)])[0],Xt),Ke=V(se([j(Pe-1,Re-0,qe)])[0],se([j(Pe-1,Re-0,qe-1)])[0],Xt),Ht()),xt}function we(Fe,Pe,Re,qe,Qe,ct,bt,Tt,_t,nt,Ke,xt){var Ht=Fe;return xt?(w&&"even"===Fe&&(Ht=null),ye(Ht,Pe,Re,qe,Qe,ct,bt,Tt,_t,nt,Ke)):(w&&"odd"===Fe&&(Ht=null),ye(Ht,_t,Tt,bt,ct,Qe,qe,Re,Pe,nt,Ke))}function oe(Fe,Pe,Re,qe,Qe){for(var ct=[],bt=0,Tt=0;Tt<Pe.length;Tt++)for(var _t=Pe[Tt],nt=1;nt<R;nt++)for(var Ke=1;Ke<E;Ke++)ct.push(pe(Fe,j(_t,Ke-1,nt-1),j(_t,Ke-1,nt),j(_t,Ke,nt-1),j(_t,Ke,nt),Re,qe,(_t+Ke+nt)%2,Qe&&Qe[bt]?Qe[bt]:[])),bt++;return ct}function de(Fe,Pe,Re,qe,Qe){for(var ct=[],bt=0,Tt=0;Tt<Pe.length;Tt++)for(var _t=Pe[Tt],nt=1;nt<S;nt++)for(var Ke=1;Ke<R;Ke++)ct.push(pe(Fe,j(nt-1,_t,Ke-1),j(nt,_t,Ke-1),j(nt-1,_t,Ke),j(nt,_t,Ke),Re,qe,(nt+_t+Ke)%2,Qe&&Qe[bt]?Qe[bt]:[])),bt++;return ct}function Te(Fe,Pe,Re,qe,Qe){for(var ct=[],bt=0,Tt=0;Tt<Pe.length;Tt++)for(var _t=Pe[Tt],nt=1;nt<E;nt++)for(var Ke=1;Ke<S;Ke++)ct.push(pe(Fe,j(Ke-1,nt-1,_t),j(Ke-1,nt,_t),j(Ke,nt-1,_t),j(Ke,nt,_t),Re,qe,(Ke+nt+_t)%2,Qe&&Qe[bt]?Qe[bt]:[])),bt++;return ct}function Ee(Fe,Pe,Re){for(var qe=1;qe<R;qe++)for(var Qe=1;Qe<E;Qe++)for(var ct=1;ct<S;ct++)we(Fe,j(ct-1,Qe-1,qe-1),j(ct-1,Qe-1,qe),j(ct-1,Qe,qe-1),j(ct-1,Qe,qe),j(ct,Qe-1,qe-1),j(ct,Qe-1,qe),j(ct,Qe,qe-1),j(ct,Qe,qe),Pe,Re,(ct+Qe+qe)%2)}function Ae(Fe,Pe,Re){w=!0,Ee(Fe,Pe,Re),w=!1}function De(Fe,Pe,Re,qe,Qe,ct){for(var bt=[],_t=0;_t<Pe.length;_t++)for(var nt=Pe[_t],Ke=1;Ke<R;Ke++)for(var xt=1;xt<E;xt++)bt.push(ge(Fe,nt,xt,Ke,Re,qe,Qe[_t]));return bt}function Ie(Fe,Pe,Re,qe,Qe,ct){for(var bt=[],_t=0;_t<Pe.length;_t++)for(var nt=Pe[_t],Ke=1;Ke<S;Ke++)for(var xt=1;xt<R;xt++)bt.push(ge(Fe,Ke,nt,xt,Re,qe,Qe[_t]));return bt}function Oe(Fe,Pe,Re,qe,Qe,ct){for(var bt=[],_t=0;_t<Pe.length;_t++)for(var nt=Pe[_t],Ke=1;Ke<E;Ke++)for(var xt=1;xt<S;xt++)bt.push(ge(Fe,xt,Ke,nt,Re,qe,Qe[_t]));return bt}function Xe(Fe,Pe){for(var Re=[],qe=Fe;qe<Pe;qe++)Re.push(qe);return Re}return function(){if(U(),function(){for(var Tt=0;Tt<S;Tt++)for(var _t=0;_t<E;_t++)for(var nt=0;nt<R;nt++){var Ke=j(Tt,_t,nt);B(f._x[Ke],f._y[Ke],f._z[Ke],f._value[Ke])}}(),u&&b&&(ee(b),T=!0,Ee(null,X,Z),T=!1),y&&_){ee(_);for(var Fe=f.surface.pattern,Pe=f.surface.count,Re=0;Re<Pe;Re++){var qe=1===Pe?.5:Re/(Pe-1),Qe=(1-qe)*X+qe*Z,ct=Math.abs(Qe-H)>Math.abs(Qe-Y)?[H,Qe]:[Qe,Y];Ae(Fe,ct[0],ct[1])}}var bt=[[Math.min(X,Y),Math.max(X,Y)],[Math.min(H,Z),Math.max(H,Z)]];["x","y","z"].forEach(function(Tt){for(var _t=[],nt=0;nt<bt.length;nt++){var Ke=0,xt=bt[nt][0],Ht=bt[nt][1],Zt=f.slices[Tt];if(Zt.show&&Zt.fill){ee(Zt.fill);var $t=[],Xt=[],cr=[];if(Zt.locations.length)for(var Ft=0;Ft<Zt.locations.length;Ft++){var Be=n(Zt.locations[Ft],"x"===Tt?M:"y"===Tt?I:P);0===Be.distRatio?$t.push(Be.id):Be.id>0&&(Xt.push(Be.id),cr.push("x"===Tt?[Be.distRatio,0,0]:"y"===Tt?[0,Be.distRatio,0]:[0,0,Be.distRatio]))}else $t=Xe(1,"x"===Tt?S-1:"y"===Tt?E-1:R-1);Xt.length>0&&(_t[Ke]="x"===Tt?De(null,Xt,xt,Ht,cr):"y"===Tt?Ie(null,Xt,xt,Ht,cr):Oe(null,Xt,xt,Ht,cr),Ke++),$t.length>0&&(_t[Ke]="x"===Tt?oe(null,$t,xt,Ht,_t[Ke]):"y"===Tt?de(null,$t,xt,Ht,_t[Ke]):Te(null,$t,xt,Ht,_t[Ke]),Ke++)}var He=f.caps[Tt];He.show&&He.fill&&(ee(He.fill),_t[Ke]="x"===Tt?oe(null,[0,S-1],xt,Ht,_t[Ke]):"y"===Tt?de(null,[0,E-1],xt,Ht,_t[Ke]):Te(null,[0,R-1],xt,Ht,_t[Ke]),Ke++)}}),0===C&&U(),f._meshX=s,f._meshY=o,f._meshZ=p,f._meshIntensity=c,f._Xs=M,f._Ys=I,f._Zs=P}(),f}$.exports={findNearestOnAxis:n,generateIsoMeshes:d,createIsosurfaceTrace:function(f,t){var s=m({gl:f.glplot.gl}),o=new i(f,s,t.uid);return s._trace=o,o.update(t),f.glplot.add(s),o}}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],874:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../registry"),k=v("./attributes"),x=v("../../components/colorscale/defaults");function e(n,i,l,r,d){var f=d("isomin"),t=d("isomax");null!=t&&null!=f&&f>t&&(i.isomin=null,i.isomax=null);var h=d("x"),s=d("y"),o=d("z"),p=d("value");h&&h.length&&s&&s.length&&o&&o.length&&p&&p.length?(g.getComponentMethod("calendars","handleTraceDefaults")(n,i,["x","y","z"],r),d("valuehoverformat"),["x","y","z"].forEach(function(c){d(c+"hoverformat");var a="caps."+c;d(a+".show")&&d(a+".fill");var y="slices."+c;d(y+".show")&&(d(y+".fill"),d(y+".locations"))}),d("spaceframe.show")&&d("spaceframe.fill"),d("surface.show")&&(d("surface.count"),d("surface.fill"),d("surface.pattern")),d("contour.show")&&(d("contour.color"),d("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(c){d(c)}),x(n,i,r,d,{prefix:"",cLetter:"c"}),i._length=null):i.visible=!1}$.exports={supplyDefaults:function(n,i,l,r){e(n,i,0,r,function(d,f){return m.coerce(n,i,k,d,f)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":871}],875:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,calc:v("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:v("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":871,"./calc":872,"./convert":873,"./defaults":874}],876:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/attributes"),g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=v("../../plots/template_attributes").hovertemplateAttrs,x=v("../surface/attributes"),e=v("../../plots/attributes"),n=v("../../lib/extend").extendFlat;$.exports=n({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:k({editType:"calc"}),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},m("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:x.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:n({},x.contours.x.show,{}),color:x.contours.x.color,width:x.contours.x.width,editType:"calc"},lightposition:{x:n({},x.lightposition.x,{dflt:1e5}),y:n({},x.lightposition.y,{dflt:1e5}),z:n({},x.lightposition.z,{dflt:0}),editType:"calc"},lighting:n({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},x.lighting),hoverinfo:n({},e.hoverinfo,{editType:"calc"}),showlegend:n({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../surface/attributes":1070}],877:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/calc");$.exports=function(g,k){k.intensity&&m(g,k,{vals:k.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],878:[function(v,$,Q){"use strict";var m=v("../../../stackgl_modules").gl_mesh3d,g=v("../../../stackgl_modules").delaunay_triangulate,k=v("../../../stackgl_modules").alpha_shape,x=v("../../../stackgl_modules").convex_hull,e=v("../../lib/gl_format_color").parseColorScale,n=v("../../lib/str2rgbarray"),i=v("../../components/colorscale").extractOpts,l=v("../../plots/gl3d/zip3");function r(o,p,c){this.scene=o,this.uid=c,this.mesh=p,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var d=r.prototype;function f(o){for(var p=[],c=o.length,a=0;a<c;a++)p[a]=n(o[a]);return p}function t(o,p,c,a){for(var y=[],u=p.length,_=0;_<u;_++)y[_]=o.d2l(p[_],0,a)*c;return y}function h(o){for(var p=[],c=o.length,a=0;a<c;a++)p[a]=Math.round(o[a]);return p}function s(o,p){for(var c=o.length,a=0;a<c;a++)if(o[a]<=-.5||o[a]>=p-.5)return!1;return!0}d.handlePick=function(o){if(o.object===this.mesh){var p=o.index=o.data.index;o.traceCoordinate=o.data._cellCenter?o.data.dataCoordinate:[this.data.x[p],this.data.y[p],this.data.z[p]];var c=this.data.hovertext||this.data.text;return Array.isArray(c)&&void 0!==c[p]?o.textLabel=c[p]:c&&(o.textLabel=c),!0}},d.update=function(o){var p=this.scene,c=p.fullSceneLayout;this.data=o;var a,y=o.x.length,u=l(t(c.xaxis,o.x,p.dataScale[0],o.xcalendar),t(c.yaxis,o.y,p.dataScale[1],o.ycalendar),t(c.zaxis,o.z,p.dataScale[2],o.zcalendar));if(o.i&&o.j&&o.k){if(o.i.length!==o.j.length||o.j.length!==o.k.length||!s(o.i,y)||!s(o.j,y)||!s(o.k,y))return;a=l(h(o.i),h(o.j),h(o.k))}else a=0===o.alphahull?x(u):o.alphahull>0?k(o.alphahull,u):function(T,C){for(var M=["x","y","z"].indexOf(T),I=[],P=C.length,S=0;S<P;S++)I[S]=[C[S][(M+1)%3],C[S][(M+2)%3]];return g(I)}(o.delaunayaxis,u);var _={positions:u,cells:a,lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,contourEnable:o.contour.show,contourColor:n(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading};if(o.intensity){var b=i(o);this.color="#fff";var w=o.intensitymode;_[w+"Intensity"]=o.intensity,_[w+"IntensityBounds"]=[b.min,b.max],_.colormap=e(o)}else o.vertexcolor?(this.color=o.vertexcolor[0],_.vertexColors=f(o.vertexcolor)):o.facecolor?(this.color=o.facecolor[0],_.cellColors=f(o.facecolor)):(this.color=o.color,_.meshColor=n(o.color));this.mesh.update(_)},d.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(o,p){var a=m({gl:o.glplot.gl}),y=new r(o,a,p.uid);return a._trace=y,y.update(p),o.glplot.add(a),y}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],879:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../lib"),k=v("../../components/colorscale/defaults"),x=v("./attributes");$.exports=function(e,n,i,l){function r(f,t){return g.coerce(e,n,x,f,t)}function d(f){var t=f.map(function(h){var s=r(h);return s&&g.isArrayOrTypedArray(s)?s:null});return t.every(function(h){return h&&h.length===t[0].length})&&t}d(["x","y","z"])?(d(["i","j","k"]),(!n.i||n.j&&n.k)&&(!n.j||n.k&&n.i)&&(!n.k||n.i&&n.j)?(m.getComponentMethod("calendars","handleTraceDefaults")(e,n,["x","y","z"],l),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(f){r(f)}),r("contour.show")&&(r("contour.color"),r("contour.width")),"intensity"in e?(r("intensity"),r("intensitymode"),k(e,n,l,r,{prefix:"",cLetter:"c"})):(n.showscale=!1,"facecolor"in e?r("facecolor"):"vertexcolor"in e?r("vertexcolor"):r("color",i)),r("text"),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),n._length=null):n.visible=!1):n.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":876}],880:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:v("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":876,"./calc":877,"./convert":878,"./defaults":879}],881:[function(v,$,Q){"use strict";var m=v("../../lib").extendFlat,g=v("../scatter/attributes"),k=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=v("../../components/drawing/attributes").dash,e=v("../../components/fx/attributes"),n=v("../../constants/delta.js"),i=n.INCREASING.COLOR,l=n.DECREASING.COLOR,r=g.line;function d(f){return{line:{color:m({},r.color,{dflt:f}),width:r.width,dash:x,editType:"style"},editType:"style"}}$.exports={xperiod:g.xperiod,xperiod0:g.xperiod0,xperiodalignment:g.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:m({},r.width,{}),dash:m({},x,{}),editType:"style"},increasing:d(i),decreasing:d(l),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:m({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":388,"../../components/fx/attributes":398,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936}],882:[function(v,$,Q){"use strict";var m=v("../../lib"),g=m._,k=v("../../plots/cartesian/axes"),x=v("../../plots/cartesian/align_period"),e=v("../../constants/numerical").BADNUM;function n(l,r,d,f){return{o:l,h:r,l:d,c:f}}function i(l,r,d,f,t,h){for(var s=t.makeCalcdata(r,"open"),o=t.makeCalcdata(r,"high"),p=t.makeCalcdata(r,"low"),c=t.makeCalcdata(r,"close"),a=Array.isArray(r.text),y=Array.isArray(r.hovertext),u=!0,_=null,b=!!r.xperiodalignment,w=[],T=0;T<f.length;T++){var C=f[T],M=s[T],I=o[T],P=p[T],S=c[T];if(C!==e&&M!==e&&I!==e&&P!==e&&S!==e){S===M?null!==_&&S!==_&&(u=S>_):u=S>M,_=S;var E=h(M,I,P,S);E.pos=C,E.yc=(M+S)/2,E.i=T,E.dir=u?"increasing":"decreasing",E.x=E.pos,E.y=[P,I],b&&(E.orig_p=d[T]),a&&(E.tx=r.text[T]),y&&(E.htx=r.hovertext[T]),w.push(E)}else w.push({pos:C,empty:!0})}return r._extremes[t._id]=k.findExtremes(t,m.concat(p,o),{padded:!0}),w.length&&(w[0].t={labels:{open:g(l,"open:")+" ",high:g(l,"high:")+" ",low:g(l,"low:")+" ",close:g(l,"close:")+" "}}),w}$.exports={calc:function(l,r){var d=k.getFromId(l,r.xaxis),f=k.getFromId(l,r.yaxis),t=function(c,a,y){var u=y._minDiff;if(!u){var _,b=c._fullData,w=[];for(u=1/0,_=0;_<b.length;_++){var T=b[_];if("ohlc"===T.type&&!0===T.visible&&T.xaxis===a._id){w.push(T);var C=a.makeCalcdata(T,"x");T._origX=C;var M=x(y,a,"x",C).vals;T._xcalc=M;var I=m.distinctVals(M).minDiff;I&&isFinite(I)&&(u=Math.min(u,I))}}for(u===1/0&&(u=1),_=0;_<w.length;_++)w[_]._minDiff=u}return u*y.tickwidth}(l,d,r),h=r._minDiff;r._minDiff=null;var s=r._origX;r._origX=null;var o=r._xcalc;r._xcalc=null;var p=i(l,r,s,o,f,n);return r._extremes[d._id]=k.findExtremes(d,o,{vpad:h/2}),p.length?(m.extendFlat(p[0].t,{wHover:h/2,tickLen:t}),p):[{t:{empty:!0}}]},calcCommon:i}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566}],883:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./ohlc_defaults"),k=v("../scatter/period_defaults"),x=v("./attributes");function e(n,i,l,r){l(r+".line.color"),l(r+".line.width",i.line.width),l(r+".line.dash",i.line.dash)}$.exports=function(n,i,l,r){function d(f,t){return m.coerce(n,i,x,f,t)}g(n,i,d,r)?(k(n,i,r,d,{x:!0}),d("xhoverformat"),d("yhoverformat"),d("line.width"),d("line.dash"),e(0,i,d,"increasing"),e(0,i,d,"decreasing"),d("text"),d("hovertext"),d("tickwidth"),r._requestRangeslider[i.xaxis]=!0):i.visible=!1}},{"../../lib":515,"../scatter/period_defaults":956,"./attributes":881,"./ohlc_defaults":886}],884:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes"),g=v("../../lib"),k=v("../../components/fx"),x=v("../../components/color"),e=v("../../lib").fillText,n=v("../../constants/delta.js"),i={increasing:n.INCREASING.SYMBOL,decreasing:n.DECREASING.SYMBOL};function l(f,t,h,s){var o,p,c=f.cd,a=f.xa,y=c[0].trace,u=c[0].t,_=y.type,b="ohlc"===_?"l":"min",w="ohlc"===_?"h":"max",T=u.bPos||0,C=u.bdPos||u.tickLen,M=u.wHover,I=Math.min(1,C/Math.abs(a.r2c(a.range[1])-a.r2c(a.range[0])));function P(Y){var X=Y.pos+T-t;return k.inbox(X-M,X+M,o)}function S(Y){var X=Y[b],Z=Y[w];return X===Z||k.inbox(X-h,Z-h,o)}function E(Y){return(P(Y)+S(Y))/2}o=f.maxHoverDistance-I,p=f.maxSpikeDistance-I;var R=k.getDistanceFunction(s,P,S,E);if(k.getClosest(c,R,f),!1===f.index)return null;var D=c[f.index];if(D.empty)return null;var j=y[D.dir],H=j.line.color;return f.color=x.opacity(H)&&j.line.width?H:j.fillcolor,f.x0=a.c2p(D.pos+T-C,!0),f.x1=a.c2p(D.pos+T+C,!0),f.xLabelVal=void 0!==D.orig_p?D.orig_p:D.pos,f.spikeDistance=E(D)*p/o,f.xSpike=a.c2p(D.pos,!0),f}function r(f,t,h,s){var o=f.cd,p=f.ya,c=o[0].trace,a=o[0].t,y=[],u=l(f,t,h,s);if(!u)return[];var _=o[u.index].hi||c.hoverinfo,b=_.split("+");if("all"!==_&&-1===b.indexOf("y"))return[];for(var w=["high","open","close","low"],T={},C=0;C<w.length;C++){var M,I=w[C],P=c[I][u.index],S=p.c2p(P,!0);P in T?(M=T[P]).yLabel+="<br>"+a.labels[I]+m.hoverLabelText(p,P,c.yhoverformat):((M=g.extendFlat({},u)).y0=M.y1=S,M.yLabelVal=P,M.yLabel=a.labels[I]+m.hoverLabelText(p,P,c.yhoverformat),M.name="",y.push(M),T[P]=M)}return y}function d(f,t,h,s){var o=f.cd,p=f.ya,c=o[0].trace,a=o[0].t,y=l(f,t,h,s);if(!y)return[];var u=o[y.index],_=y.index=u.i,b=u.dir;function w(E){return a.labels[E]+m.hoverLabelText(p,c[E][_],c.yhoverformat)}var T=u.hi||c.hoverinfo,C=T.split("+"),M="all"===T,I=M||-1!==C.indexOf("y"),P=M||-1!==C.indexOf("text"),S=I?[w("open"),w("high"),w("low"),w("close")+"  "+i[b]]:[];return P&&e(u,c,S),y.extraText=S.join("<br>"),y.y0=y.y1=p.c2p(u.yc,!0),[y]}$.exports={hoverPoints:function(f,t,h,s){return f.cd[0].trace.hoverlabel.split?r(f,t,h,s):d(f,t,h,s)},hoverSplit:r,hoverOnPoints:d}},{"../../components/color":367,"../../components/fx":407,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axes":566}],885:[function(v,$,Q){"use strict";$.exports={moduleType:"trace",name:"ohlc",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc").calc,plot:v("./plot"),style:v("./style"),hoverPoints:v("./hover").hoverPoints,selectPoints:v("./select")}},{"../../plots/cartesian":578,"./attributes":881,"./calc":882,"./defaults":883,"./hover":884,"./plot":887,"./select":888,"./style":889}],886:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../lib");$.exports=function(k,x,e,n){var i=e("x"),l=e("open"),r=e("high"),d=e("low"),f=e("close");if(e("hoverlabel.split"),m.getComponentMethod("calendars","handleTraceDefaults")(k,x,["x"],n),l&&r&&d&&f){var t=Math.min(l.length,r.length,d.length,f.length);return i&&(t=Math.min(t,g.minRowLength(i))),x._length=t,t}}},{"../../lib":515,"../../registry":647}],887:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib");$.exports=function(k,x,e,n){var i=x.yaxis,l=x.xaxis,r=!!l.rangebreaks;g.makeTraceGroups(n,e,"trace ohlc").each(function(d){var f=m.select(this),t=d[0],h=t.t;if(!0!==t.trace.visible||h.empty)f.remove();else{var s=h.tickLen,o=f.selectAll("path").data(g.identity);o.enter().append("path"),o.exit().remove(),o.attr("d",function(p){if(p.empty)return"M0,0Z";var c=l.c2p(p.pos-s,!0),a=l.c2p(p.pos+s,!0),y=r?(c+a)/2:l.c2p(p.pos,!0);return"M"+c+","+i.c2p(p.o,!0)+"H"+y+"M"+y+","+i.c2p(p.h,!0)+"V"+i.c2p(p.l,!0)+"M"+a+","+i.c2p(p.c,!0)+"H"+y})}})}},{"../../lib":515,"@plotly/d3":58}],888:[function(v,$,Q){"use strict";$.exports=function(m,g){var k,x=m.cd,e=m.xaxis,n=m.yaxis,i=[],l=x[0].t.bPos||0;if(!1===g)for(k=0;k<x.length;k++)x[k].selected=0;else for(k=0;k<x.length;k++){var r=x[k];g.contains([e.c2p(r.pos+l),n.c2p(r.yc)],null,r.i,m)?(i.push({pointNumber:r.i,x:e.c2d(r.pos),y:n.c2d(r.yc)}),r.selected=1):r.selected=0}return i}},{}],889:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/drawing"),k=v("../../components/color");$.exports=function(x,e,n){var i=n||m.select(x).selectAll("g.ohlclayer").selectAll("g.trace");i.style("opacity",function(l){return l[0].trace.opacity}),i.each(function(l){var r=l[0].trace;m.select(this).selectAll("path").each(function(d){if(!d.empty){var f=r[d.dir].line;m.select(this).style("fill","none").call(k.stroke,f.color).call(g.dashLine,f.dash,f.width).style("opacity",r.selectedpoints&&!d.selected?.3:1)}})})}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],890:[function(v,$,Q){"use strict";var m=v("../../lib/extend").extendFlat,g=v("../../plots/attributes"),k=v("../../plots/font_attributes"),x=v("../../components/colorscale/attributes"),e=v("../../plots/template_attributes").hovertemplateAttrs,n=v("../../plots/domain").attributes,i=m({editType:"calc"},x("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});$.exports={domain:n({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:m({},g.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:k({editType:"calc"}),tickfont:k({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:i,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],891:[function(v,$,Q){"use strict";var m=v("../../plots/get_data").getModuleCalcData,g=v("./plot");Q.name="parcats",Q.plot=function(k,x,e,n){var i=m(k.calcdata,"parcats");i.length&&g(k,i[0],e,n)},Q.clean=function(k,x,e,n){var i=n._has&&n._has("parcats"),l=x._has&&x._has("parcats");i&&!l&&n._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":602,"./plot":896}],892:[function(v,$,Q){"use strict";var m=v("../../lib/gup").wrap,g=v("../../components/colorscale/helpers").hasColorscale,k=v("../../components/colorscale/calc"),x=v("../../lib/filter_unique.js"),e=v("../../components/drawing"),n=v("../../lib"),i=v("fast-isnumeric");function l(f,t,h){f.valueInds.push(t),f.count+=h}function r(f,t,h){return{categoryInds:f,color:t,rawColor:h,valueInds:[],count:0}}function d(f,t,h){f.valueInds.push(t),f.count+=h}$.exports=function(f,t){var h=n.filterVisible(t.dimensions);if(0===h.length)return[];var s,o,p,c=h.map(function(W){var re;if("trace"===W.categoryorder)re=null;else if("array"===W.categoryorder)re=W.categoryarray;else{re=x(W.values);for(var U=!0,B=0;B<re.length;B++)if(!i(re[B])){U=!1;break}re.sort(U?n.sorterAsc:void 0),"category descending"===W.categoryorder&&(re=re.reverse())}return function(V,ee){ee=null==ee?[]:ee.map(function(ve){return ve});var N={},K={},J=[];ee.forEach(function(ve,ue){N[ve]=0,K[ve]=ue});for(var te=0;te<V.length;te++){var ae,le=V[te];void 0===N[le]?(N[le]=1,ae=ee.push(le)-1,K[le]=ae):(N[le]++,ae=K[le]),J.push(ae)}var se=ee.map(function(ve){return N[ve]});return{uniqueValues:ee,uniqueCounts:se,inds:J}}(W.values,re)});s=n.isArrayOrTypedArray(t.counts)?t.counts:[t.counts],function(W){var re;if(function(U){for(var B=new Array(U.length),V=0;V<U.length;V++){if(U[V]<0||U[V]>=U.length||void 0!==B[U[V]])return!1;B[U[V]]=!0}return!0}(W.map(function(U){return U.displayindex})))for(re=0;re<W.length;re++)W[re]._displayindex=W[re].displayindex;else for(re=0;re<W.length;re++)W[re]._displayindex=re}(h),h.forEach(function(W,re){!function(U,B){U._categoryarray=B.uniqueValues,U._ticktext=null==U.ticktext?[]:U.ticktext.slice();for(var V=U._ticktext.length;V<B.uniqueValues.length;V++)U._ticktext.push(B.uniqueValues[V])}(W,c[re])});var a,y=t.line;y?(g(t,"line")&&k(f,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),a=e.tryColorscale(y)):a=n.identity;var u,_,b,w,T,C=h[0].values.length,M={},I=c.map(function(W){return W.inds});for(p=0,u=0;u<C;u++){var P=[];for(_=0;_<I.length;_++)P.push(I[_][u]);p+=o=s[u%s.length];var S=(b=u,w=void 0,T=void 0,n.isArrayOrTypedArray(y.color)?T=w=y.color[b%y.color.length]:w=y.color,{color:a(w),rawColor:T}),E=P+"-"+S.rawColor;void 0===M[E]&&(M[E]=r(P,S.color,S.rawColor)),d(M[E],u,o)}var R,W,re,U,B,D=h.map(function(W,re){return{dimensionInd:re,containerInd:W._index,displayInd:W._displayindex,dimensionLabel:W.label,count:p,categories:[],dragX:null}});for(u=0;u<C;u++)for(o=s[u%s.length],_=0;_<D.length;_++){var j=D[_].containerInd,H=c[_].inds[u],Y=D[_].categories;void 0===Y[H]&&(Y[H]={dimensionInd:_,categoryInd:R=H,categoryValue:t.dimensions[j]._categoryarray[H],displayInd:R,categoryLabel:t.dimensions[j]._ticktext[H],valueInds:[],count:0,dragY:null}),l(Y[H],u,o)}return m((re=M,U=p,B=(W=D).map(function(V){return V.categories.length}).reduce(function(V,ee){return Math.max(V,ee)}),{dimensions:W,paths:re,trace:void 0,maxCats:B,count:U}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../components/drawing":389,"../../lib":515,"../../lib/filter_unique.js":506,"../../lib/gup":512,"fast-isnumeric":190}],893:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/colorscale/helpers").hasColorscale,k=v("../../components/colorscale/defaults"),x=v("../../plots/domain").defaults,e=v("../../plots/array_container_defaults"),n=v("./attributes"),i=v("../parcoords/merge_length");function l(r,d){function f(a,y){return m.coerce(r,d,n.dimensions,a,y)}var t=f("values"),h=f("visible");if(t&&t.length||(h=d.visible=!1),h){f("label"),f("displayindex",d._index);var s,o=r.categoryarray,p=Array.isArray(o)&&o.length>0;p&&(s="array");var c=f("categoryorder",s);"array"===c?(f("categoryarray"),f("ticktext")):(delete r.categoryarray,delete r.ticktext),p||"array"!==c||(d.categoryorder="trace")}}$.exports=function(r,d,f,t){function h(a,y){return m.coerce(r,d,n,a,y)}var s=e(r,d,{name:"dimensions",handleItemDefaults:l}),o=function(a,y,u,_,b){b("line.shape"),b("line.hovertemplate");var w=b("line.color",_.colorway[0]);if(g(a,"line")&&m.isArrayOrTypedArray(w)){if(w.length)return b("line.colorscale"),k(a,y,_,b,{prefix:"line.",cLetter:"c"}),w.length;y.line.color=u}return 1/0}(r,d,f,t,h);x(d,t,h),Array.isArray(s)&&s.length||(d.visible=!1),i(d,s,"values",o),h("hoveron"),h("hovertemplate"),h("arrangement"),h("bundlecolors"),h("sortpaths"),h("counts");var p={family:t.font.family,size:Math.round(t.font.size),color:t.font.color};m.coerceFont(h,"labelfont",p);var c={family:t.font.family,size:Math.round(t.font.size/1.2),color:t.font.color};m.coerceFont(h,"tickfont",c)}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/domain":593,"../parcoords/merge_length":907,"./attributes":890}],894:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:v("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":890,"./base_plot":891,"./calc":892,"./defaults":893,"./plot":896}],895:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("d3-interpolate").interpolateNumber,k=v("../../plot_api/plot_api"),x=v("../../components/fx"),e=v("../../lib"),n=e.strTranslate,i=v("../../components/drawing"),l=v("tinycolor2"),r=v("../../lib/svg_text_utils");function d(U,B,V,ee){var N=B._context.staticPlot,K=U.map(Y.bind(0,B,V)),J=ee.selectAll("g.parcatslayer").data([null]);J.enter().append("g").attr("class","parcatslayer").style("pointer-events",N?"none":"all");var te=J.selectAll("g.trace.parcats").data(K,f),ae=te.enter().append("g").attr("class","trace parcats");te.attr("transform",function(we){return n(we.x,we.y)}),ae.append("g").attr("class","paths");var le=te.select("g.paths").selectAll("path.path").data(function(we){return we.paths},f);le.attr("fill",function(we){return we.model.color});var se=le.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(we){return we.model.color}).attr("fill-opacity",0);y(se),le.attr("d",function(we){return we.svgD}),se.empty()||le.sort(h),le.exit().remove(),le.on("mouseover",s).on("mouseout",o).on("click",a),ae.append("g").attr("class","dimensions");var ve=te.select("g.dimensions").selectAll("g.dimension").data(function(we){return we.dimensions},f);ve.enter().append("g").attr("class","dimension"),ve.attr("transform",function(we){return n(we.x,0)}),ve.exit().remove();var ue=ve.selectAll("g.category").data(function(we){return we.categories},f),ye=ue.enter().append("g").attr("class","category");ue.attr("transform",function(we){return n(0,we.y)}),ye.append("rect").attr("class","catrect").attr("pointer-events","none"),ue.select("rect.catrect").attr("fill","none").attr("width",function(we){return we.width}).attr("height",function(we){return we.height}),_(ye);var Me=ue.selectAll("rect.bandrect").data(function(we){return we.bands},f);Me.each(function(){e.raiseToTop(this)}),Me.attr("fill",function(we){return we.color});var pe=Me.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(we){return we.color}).attr("fill-opacity",0);Me.attr("fill",function(we){return we.color}).attr("width",function(we){return we.width}).attr("height",function(we){return we.height}).attr("y",function(we){return we.y}).attr("cursor",function(we){return"fixed"===we.parcatsViewModel.arrangement?"default":"perpendicular"===we.parcatsViewModel.arrangement?"ns-resize":"move"}),b(pe),Me.exit().remove(),ye.append("text").attr("class","catlabel").attr("pointer-events","none");var ge=B._fullLayout.paper_bgcolor;ue.select("text.catlabel").attr("text-anchor",function(we){return t(we)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(ge)).style("fill","rgb(0, 0, 0)").attr("x",function(we){return t(we)?we.width+5:-5}).attr("y",function(we){return we.height/2}).text(function(we){return we.model.categoryLabel}).each(function(we){i.font(m.select(this),we.parcatsViewModel.categorylabelfont),r.convertToTspans(m.select(this),B)}),ye.append("text").attr("class","dimlabel"),ue.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(we){return"fixed"===we.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(we){return we.width/2}).attr("y",-5).text(function(we,oe){return 0===oe?we.parcatsViewModel.model.dimensions[we.model.dimensionInd].dimensionLabel:null}).each(function(we){i.font(m.select(this),we.parcatsViewModel.labelfont)}),ue.selectAll("rect.bandrect").on("mouseover",I).on("mouseout",P),ue.exit().remove(),ve.call(m.behavior.drag().origin(function(we){return{x:we.x,y:0}}).on("dragstart",S).on("drag",E).on("dragend",R)),te.each(function(we){we.traceSelection=m.select(this),we.pathSelection=m.select(this).selectAll("g.paths").selectAll("path.path"),we.dimensionSelection=m.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),te.exit().remove()}function f(U){return U.key}function t(U){return U.model.dimensionInd===U.parcatsViewModel.dimensions[U.parcatsViewModel.dimensions.length-1].model.dimensionInd}function h(U,B){return U.model.rawColor>B.model.rawColor?1:U.model.rawColor<B.model.rawColor?-1:0}function s(U){if(!U.parcatsViewModel.dragDimension&&-1===U.parcatsViewModel.hoverinfoItems.indexOf("skip")){e.raiseToTop(this),u(m.select(this));var B=p(U),V=c(U);if(U.parcatsViewModel.graphDiv.emit("plotly_hover",{points:B,event:m.event,constraints:V}),-1===U.parcatsViewModel.hoverinfoItems.indexOf("none")){var ee,N,K,J=m.mouse(this)[0],te=U.parcatsViewModel.graphDiv,ae=U.parcatsViewModel.trace,le=te._fullLayout,se=le._paperdiv.node().getBoundingClientRect(),ve=U.parcatsViewModel.graphDiv.getBoundingClientRect();for(K=0;K<U.leftXs.length-1;K++)if(U.leftXs[K]+U.dimWidths[K]-2<=J&&J<=U.leftXs[K+1]+2){var ue=U.parcatsViewModel.dimensions[K];ee=(ue.x+ue.width+U.parcatsViewModel.dimensions[K+1].x)/2,N=(U.topYs[K]+U.topYs[K+1]+U.height)/2;break}var Me=U.parcatsViewModel.x+ee,pe=U.parcatsViewModel.y+N,ge=l.mostReadable(U.model.color,["black","white"]),we=U.model.count,oe=we/U.parcatsViewModel.model.count,de={countLabel:we,probabilityLabel:oe.toFixed(3)},Te=[];-1!==U.parcatsViewModel.hoverinfoItems.indexOf("count")&&Te.push(["Count:",de.countLabel].join(" ")),-1!==U.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Te.push(["P:",de.probabilityLabel].join(" "));var Ee=Te.join("<br>"),Ae=m.mouse(te)[0];x.loneHover({trace:ae,x:Me-se.left+ve.left,y:pe-se.top+ve.top,text:Ee,color:U.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ge,idealAlign:Ae<Me?"right":"left",hovertemplate:(ae.line||{}).hovertemplate,hovertemplateLabels:de,eventData:[{data:ae._input,fullData:ae,count:we,probability:oe}]},{container:le._hoverlayer.node(),outerContainer:le._paper.node(),gd:te})}}}function o(U){if(!U.parcatsViewModel.dragDimension&&(y(m.select(this)),x.loneUnhover(U.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),U.parcatsViewModel.pathSelection.sort(h),-1===U.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var B=p(U),V=c(U);U.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:B,event:m.event,constraints:V})}}function p(U){for(var B=[],V=D(U.parcatsViewModel),ee=0;ee<U.model.valueInds.length;ee++)B.push({curveNumber:V,pointNumber:U.model.valueInds[ee]});return B}function c(U){for(var B={},V=U.parcatsViewModel.model.dimensions,ee=0;ee<V.length;ee++){var N=V[ee];B[N.containerInd]=N.categories[U.model.categoryInds[ee]].categoryValue}return void 0!==U.model.rawColor&&(B.color=U.model.rawColor),B}function a(U){if(-1===U.parcatsViewModel.hoverinfoItems.indexOf("skip")){var B=p(U),V=c(U);U.parcatsViewModel.graphDiv.emit("plotly_click",{points:B,event:m.event,constraints:V})}}function y(U){U.attr("fill",function(B){return B.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function u(U){U.attr("fill-opacity",.8).attr("stroke",function(B){return l.mostReadable(B.model.color,["black","white"])}).attr("stroke-width",.3)}function _(U){U.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function b(U){U.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function w(U){var V=U.categoryViewModel.model.dimensionInd,ee=U.categoryViewModel.model.categoryInd;return U.parcatsViewModel.pathSelection.filter(function(N){return N.model.categoryInds[V]===ee&&N.model.color===U.color})}function T(U,B,V){var ee=m.select(U).datum(),N=ee.categoryViewModel.model,K=ee.parcatsViewModel.graphDiv,J=m.select(U.parentNode).selectAll("rect.bandrect"),te=[];J.each(function(le){w(le).each(function(se){Array.prototype.push.apply(te,p(se))})});var ae={};ae[N.dimensionInd]=N.categoryValue,K.emit(B,{points:te,event:V,constraints:ae})}function C(U,B,V){var ee=m.select(U).datum(),N=ee.categoryViewModel.model,K=ee.parcatsViewModel.graphDiv,J=w(ee),te=[];J.each(function(le){Array.prototype.push.apply(te,p(le))});var ae={};ae[N.dimensionInd]=N.categoryValue,void 0!==ee.rawColor&&(ae.color=ee.rawColor),K.emit(B,{points:te,event:V,constraints:ae})}function M(U,B,V){U._fullLayout._calcInverseTransform(U);var ee,N,K=U._fullLayout._invScaleX,J=U._fullLayout._invScaleY,te=m.select(V.parentNode).select("rect.catrect"),ae=te.node().getBoundingClientRect(),le=te.datum(),se=le.parcatsViewModel,ue=se.trace,ye=ae.top+ae.height/2;se.dimensions.length>1&&se.model.dimensions[le.model.dimensionInd].displayInd===se.dimensions.length-1?(ee=ae.left,N="left"):(ee=ae.left+ae.width,N="right");var Me=le.model.count,pe=le.model.categoryLabel,ge=Me/le.parcatsViewModel.model.count,we={countLabel:Me,categoryLabel:pe,probabilityLabel:ge.toFixed(3)},oe=[];-1!==le.parcatsViewModel.hoverinfoItems.indexOf("count")&&oe.push(["Count:",we.countLabel].join(" ")),-1!==le.parcatsViewModel.hoverinfoItems.indexOf("probability")&&oe.push(["P("+we.categoryLabel+"):",we.probabilityLabel].join(" "));var de=oe.join("<br>");return{trace:ue,x:K*(ee-B.left),y:J*(ye-B.top),text:de,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:N,hovertemplate:ue.hovertemplate,hovertemplateLabels:we,eventData:[{data:ue._input,fullData:ue,count:Me,category:pe,probability:ge}]}}function I(U){if(!U.parcatsViewModel.dragDimension&&-1===U.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(m.mouse(this)[1]<-1)return;var B,V=U.parcatsViewModel.graphDiv,ee=V._fullLayout,N=ee._paperdiv.node().getBoundingClientRect(),K=U.parcatsViewModel.hoveron;"color"===K?(u(ae=w(te=m.select(this).datum())),ae.each(function(){e.raiseToTop(this)}),m.select(this.parentNode).selectAll("rect.bandrect").filter(function(le){return le.color===te.color}).each(function(){e.raiseToTop(this),m.select(this).attr("stroke","black").attr("stroke-width",1.5)}),C(this,"plotly_hover",m.event)):(function(J){m.select(J.parentNode).selectAll("rect.bandrect").each(function(te){var ae=w(te);u(ae),ae.each(function(){e.raiseToTop(this)})}),m.select(J.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),T(this,"plotly_hover",m.event)),-1===U.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===K?B=M(V,N,this):"color"===K?B=function(J,te,ae){J._fullLayout._calcInverseTransform(J);var le,se,ve=J._fullLayout._invScaleX,ue=J._fullLayout._invScaleY,ye=ae.getBoundingClientRect(),Me=m.select(ae).datum(),pe=Me.categoryViewModel,ge=pe.parcatsViewModel,oe=ge.trace,de=ye.y+ye.height/2;ge.dimensions.length>1&&ge.model.dimensions[pe.model.dimensionInd].displayInd===ge.dimensions.length-1?(le=ye.left,se="left"):(le=ye.left+ye.width,se="right");var Te=pe.model.categoryLabel,Ee=Me.parcatsViewModel.model.count,Ae=0;Me.categoryViewModel.bands.forEach(function(ct){ct.color===Me.color&&(Ae+=ct.count)});var De=pe.model.count,Ie=0;ge.pathSelection.each(function(ct){ct.model.color===Me.color&&(Ie+=ct.model.count)});var Oe=Ae/Ee,Xe=Ae/Ie,Fe=Ae/De,Pe={countLabel:Ee,categoryLabel:Te,probabilityLabel:Oe.toFixed(3)},Re=[];-1!==pe.parcatsViewModel.hoverinfoItems.indexOf("count")&&Re.push(["Count:",Pe.countLabel].join(" ")),-1!==pe.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Re.push("P(color \u2229 "+Te+"): "+Pe.probabilityLabel),Re.push("P("+Te+" | color): "+Xe.toFixed(3)),Re.push("P(color | "+Te+"): "+Fe.toFixed(3)));var qe=Re.join("<br>"),Qe=l.mostReadable(Me.color,["black","white"]);return{trace:oe,x:ve*(le-te.left),y:ue*(de-te.top),text:qe,color:Me.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Qe,fontSize:10,idealAlign:se,hovertemplate:oe.hovertemplate,hovertemplateLabels:Pe,eventData:[{data:oe._input,fullData:oe,category:Te,count:Ee,probability:Oe,categorycount:De,colorcount:Ie,bandcolorcount:Ae}]}}(V,N,this):"dimension"===K&&(B=function(J,te,ae){var le=[];return m.select(ae.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){le.push(M(J,te,this))}),le}(V,N,this)),B&&x.loneHover(B,{container:ee._hoverlayer.node(),outerContainer:ee._paper.node(),gd:V}))}var te,ae}function P(U){var B=U.parcatsViewModel;!B.dragDimension&&(y(B.pathSelection),_(B.dimensionSelection.selectAll("g.category")),b(B.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),x.loneUnhover(B.graphDiv._fullLayout._hoverlayer.node()),B.pathSelection.sort(h),-1===B.hoverinfoItems.indexOf("skip"))&&("color"===U.parcatsViewModel.hoveron?C(this,"plotly_unhover",m.event):T(this,"plotly_unhover",m.event))}function S(U){"fixed"!==U.parcatsViewModel.arrangement&&(U.dragDimensionDisplayInd=U.model.displayInd,U.initialDragDimensionDisplayInds=U.parcatsViewModel.model.dimensions.map(function(B){return B.displayInd}),U.dragHasMoved=!1,U.dragCategoryDisplayInd=null,m.select(this).selectAll("g.category").select("rect.catrect").each(function(B){var V=m.mouse(this)[0],ee=m.mouse(this)[1];-2<=V&&V<=B.width+2&&-2<=ee&&ee<=B.height+2&&(U.dragCategoryDisplayInd=B.model.displayInd,U.initialDragCategoryDisplayInds=U.model.categories.map(function(N){return N.displayInd}),B.model.dragY=B.y,e.raiseToTop(this.parentNode),m.select(this.parentNode).selectAll("rect.bandrect").each(function(N){N.y<ee&&ee<=N.y+N.height&&(U.potentialClickBand=this)}))}),U.parcatsViewModel.dragDimension=U,x.loneUnhover(U.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function E(U){if("fixed"!==U.parcatsViewModel.arrangement&&(U.dragHasMoved=!0,null!==U.dragDimensionDisplayInd)){var B=U.dragDimensionDisplayInd,V=B-1,ee=B+1,N=U.parcatsViewModel.dimensions[B];if(null!==U.dragCategoryDisplayInd){var K=N.categories[U.dragCategoryDisplayInd];K.model.dragY+=m.event.dy;var J=K.model.dragY,te=K.model.displayInd,ae=N.categories,le=ae[te-1],se=ae[te+1];void 0!==le&&J<le.y+le.height/2&&(K.model.displayInd=le.model.displayInd,le.model.displayInd=te),void 0!==se&&J+K.height>se.y+se.height/2&&(K.model.displayInd=se.model.displayInd,se.model.displayInd=te),U.dragCategoryDisplayInd=K.model.displayInd}if(null===U.dragCategoryDisplayInd||"freeform"===U.parcatsViewModel.arrangement){N.model.dragX=m.event.x;var ve=U.parcatsViewModel.dimensions[V],ue=U.parcatsViewModel.dimensions[ee];void 0!==ve&&N.model.dragX<ve.x+ve.width&&(N.model.displayInd=ve.model.displayInd,ve.model.displayInd=B),void 0!==ue&&N.model.dragX+N.width>ue.x&&(N.model.displayInd=ue.model.displayInd,ue.model.displayInd=U.dragDimensionDisplayInd),U.dragDimensionDisplayInd=N.model.displayInd}W(U.parcatsViewModel),Z(U.parcatsViewModel),H(U.parcatsViewModel),j(U.parcatsViewModel)}}function R(U){if("fixed"!==U.parcatsViewModel.arrangement&&null!==U.dragDimensionDisplayInd){m.select(this).selectAll("text").attr("font-weight","normal");var B={},V=D(U.parcatsViewModel),ee=U.parcatsViewModel.model.dimensions.map(function(se){return se.displayInd}),N=U.initialDragDimensionDisplayInds.some(function(se,ve){return se!==ee[ve]});N&&ee.forEach(function(se,ve){B["dimensions["+U.parcatsViewModel.model.dimensions[ve].containerInd+"].displayindex"]=se});var K=!1;if(null!==U.dragCategoryDisplayInd){var J=U.model.categories.map(function(se){return se.displayInd});if(K=U.initialDragCategoryDisplayInds.some(function(se,ve){return se!==J[ve]})){var te=U.model.categories.slice().sort(function(se,ve){return se.displayInd-ve.displayInd}),ae=te.map(function(se){return se.categoryValue}),le=te.map(function(se){return se.categoryLabel});B["dimensions["+U.model.containerInd+"].categoryarray"]=[ae],B["dimensions["+U.model.containerInd+"].ticktext"]=[le],B["dimensions["+U.model.containerInd+"].categoryorder"]="array"}}-1===U.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!U.dragHasMoved&&U.potentialClickBand&&("color"===U.parcatsViewModel.hoveron?C(U.potentialClickBand,"plotly_click",m.event.sourceEvent):T(U.potentialClickBand,"plotly_click",m.event.sourceEvent)),U.model.dragX=null,null!==U.dragCategoryDisplayInd&&(U.parcatsViewModel.dimensions[U.dragDimensionDisplayInd].categories[U.dragCategoryDisplayInd].model.dragY=null,U.dragCategoryDisplayInd=null),U.dragDimensionDisplayInd=null,U.parcatsViewModel.dragDimension=null,U.dragHasMoved=null,U.potentialClickBand=null,W(U.parcatsViewModel),Z(U.parcatsViewModel),m.transition().duration(300).ease("cubic-in-out").each(function(){H(U.parcatsViewModel,!0),j(U.parcatsViewModel,!0)}).each("end",function(){(N||K)&&k.restyle(U.parcatsViewModel.graphDiv,B,[V])})}}function D(U){for(var B,V=U.graphDiv._fullData,ee=0;ee<V.length;ee++)if(U.key===V[ee].uid){B=ee;break}return B}function j(U,B){var V;void 0===B&&(B=!1),U.pathSelection.data(function(ee){return ee.paths},f),(V=U.pathSelection,B?V.transition():V).attr("d",function(ee){return ee.svgD})}function H(U,B){function V(J){return B?J.transition():J}void 0===B&&(B=!1),U.dimensionSelection.data(function(J){return J.dimensions},f);var ee=U.dimensionSelection.selectAll("g.category").data(function(J){return J.categories},f);V(U.dimensionSelection).attr("transform",function(J){return n(J.x,0)}),V(ee).attr("transform",function(J){return n(0,J.y)}),ee.select(".dimlabel").text(function(J,te){return 0===te?J.parcatsViewModel.model.dimensions[J.model.dimensionInd].dimensionLabel:null}),ee.select(".catlabel").attr("text-anchor",function(J){return t(J)?"start":"end"}).attr("x",function(J){return t(J)?J.width+5:-5}).each(function(J){var te,ae;t(J)?(te=J.width+5,ae="start"):(te=-5,ae="end"),m.select(this).selectAll("tspan").attr("x",te).attr("text-anchor",ae)});var N=ee.selectAll("rect.bandrect").data(function(J){return J.bands},f),K=N.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(J){return J.color}).attr("fill-opacity",0);N.attr("fill",function(J){return J.color}).attr("width",function(J){return J.width}).attr("height",function(J){return J.height}).attr("y",function(J){return J.y}),b(K),N.each(function(){e.raiseToTop(this)}),N.exit().remove()}function Y(U,B,V){var ee,N=V[0],K=B.margin||{l:80,r:80,t:100,b:80},J=N.trace,te=J.domain,ae=B.width,le=B.height,se=Math.floor(ae*(te.x[1]-te.x[0])),ve=Math.floor(le*(te.y[1]-te.y[0])),ue=te.x[0]*ae+K.l,ye=B.height-te.y[1]*B.height+K.t,Me=J.line.shape;ee="all"===J.hoverinfo?["count","probability"]:(J.hoverinfo||"").split("+");var pe={trace:J,key:J.uid,model:N,x:ue,y:ye,width:se,height:ve,hoveron:J.hoveron,hoverinfoItems:ee,arrangement:J.arrangement,bundlecolors:J.bundlecolors,sortpaths:J.sortpaths,labelfont:J.labelfont,categorylabelfont:J.tickfont,pathShape:Me,dragDimension:null,margin:K,paths:[],dimensions:[],graphDiv:U,traceSelection:null,pathSelection:null,dimensionSelection:null};return N.dimensions&&(W(pe),Z(pe)),pe}function X(U,B,V,ee,N){var K,J,te=[],ae=[];for(J=0;J<V.length-1;J++)K=g(V[J]+U[J],U[J+1]),te.push(K(N)),ae.push(K(1-N));var le="M "+U[0]+","+B[0];for(le+="l"+V[0]+",0 ",J=1;J<V.length;J++)le+="C"+te[J-1]+","+B[J-1]+" "+ae[J-1]+","+B[J]+" "+U[J]+","+B[J],le+="l"+V[J]+",0 ";for(le+="l0,"+ee+" ",le+="l -"+V[V.length-1]+",0 ",J=V.length-2;J>=0;J--)le+="C"+ae[J]+","+(B[J+1]+ee)+" "+te[J]+","+(B[J]+ee)+" "+(U[J]+V[J])+","+(B[J]+ee),le+="l-"+V[J]+",0 ";return le+"Z"}function Z(U){var B=U.dimensions,V=U.model,ee=B.map(function(Re){return Re.categories.map(function(qe){return qe.y})}),N=U.model.dimensions.map(function(Re){return Re.categories.map(function(qe){return qe.displayInd})}),K=U.model.dimensions.map(function(Re){return Re.displayInd}),J=U.dimensions.map(function(Re){return Re.model.dimensionInd}),te=B.map(function(Re){return Re.x}),ae=B.map(function(Re){return Re.width}),le=[];for(var se in V.paths)V.paths.hasOwnProperty(se)&&le.push(V.paths[se]);function ve(Re){var qe=Re.categoryInds.map(function(Qe,ct){return N[ct][Qe]});return J.map(function(Qe){return qe[Qe]})}le.sort(function(Re,qe){var Qe=ve(Re),ct=ve(qe);return"backward"===U.sortpaths&&(Qe.reverse(),ct.reverse()),Qe.push(Re.valueInds[0]),ct.push(qe.valueInds[0]),U.bundlecolors&&(Qe.unshift(Re.rawColor),ct.unshift(qe.rawColor)),Qe<ct?-1:Qe>ct?1:0});for(var ue=new Array(le.length),ye=B[0].model.count,Me=B[0].categories.map(function(Re){return Re.height}).reduce(function(Re,qe){return Re+qe}),pe=0;pe<le.length;pe++){var ge,we=le[pe];ge=ye>0?Me*(we.count/ye):0;for(var oe,de=new Array(ee.length),Te=0;Te<we.categoryInds.length;Te++){var Ae=N[Te][we.categoryInds[Te]],De=K[Te];de[De]=ee[De][Ae],ee[De][Ae]+=ge;var Ie=U.dimensions[De].categories[Ae],Oe=Ie.bands.length,Xe=Ie.bands[Oe-1];if(void 0===Xe||we.rawColor!==Xe.rawColor){var Fe=void 0===Xe?0:Xe.y+Xe.height;Ie.bands.push({key:Fe,color:we.color,rawColor:we.rawColor,height:ge,width:Ie.width,count:we.count,y:Fe,categoryViewModel:Ie,parcatsViewModel:U})}else{var Pe=Ie.bands[Oe-1];Pe.height+=ge,Pe.count+=we.count}}oe=X(te,de,ae,ge,"hspline"===U.pathShape?.5:0),ue[pe]={key:we.valueInds[0],model:we,height:ge,leftXs:te,topYs:de,dimWidths:ae,svgD:oe,parcatsViewModel:U}}U.paths=ue}function W(U){var B=U.model.dimensions.map(function(J){return{displayInd:J.displayInd,dimensionInd:J.dimensionInd}});B.sort(function(J,te){return J.displayInd-te.displayInd});var V=[];for(var ee in B)V.push(re(U,U.model.dimensions[B[ee].dimensionInd]));U.dimensions=V}function re(U,B){var V,ee=U.model.dimensions.length;V=40+(ee>1?(U.width-80-16)/(ee-1):0)*B.displayInd;var K,J,te,le,se=[],ve=U.model.maxCats,ue=B.categories.length,ye=B.count,Me=U.height-8*(ve-1),pe=8*(ve-ue)/2,ge=B.categories.map(function(we){return{displayInd:we.displayInd,categoryInd:we.categoryInd}});for(ge.sort(function(we,oe){return we.displayInd-oe.displayInd}),le=0;le<ue;le++)te={key:(J=B.categories[ge[le].categoryInd]).valueInds[0],model:J,width:16,height:K=ye>0?J.count/ye*Me:0,y:null!==J.dragY?J.dragY:pe,bands:[],parcatsViewModel:U},pe=pe+K+8,se.push(te);return{key:B.dimensionInd,x:null!==B.dragX?B.dragX:V,y:0,width:16,model:B,categories:se,parcatsViewModel:U,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}$.exports=function(U,B,V,ee){d(V,U,ee,B)}},{"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_api":552,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:313}],896:[function(v,$,Q){"use strict";var m=v("./parcats");$.exports=function(g,k,x,e){var n=g._fullLayout,l=n._size;m(g,n._paper,k,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},x,e)}},{"./parcats":895}],897:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/attributes"),g=v("../../plots/cartesian/layout_attributes"),k=v("../../plots/font_attributes"),x=v("../../plots/domain").attributes,e=v("../../lib/extend").extendFlat,n=v("../../plot_api/plot_template").templatedArray;$.exports={domain:x({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:k({editType:"plot"}),tickfont:k({editType:"plot"}),rangefont:k({editType:"plot"}),dimensions:n("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},g.tickvals,{editType:"plot"}),ticktext:e({},g.ticktext,{editType:"plot"}),tickformat:e({},g.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},m("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],898:[function(v,$,Q){"use strict";var m=v("./constants"),g=v("@plotly/d3"),k=v("../../lib/gup").keyFun,x=v("../../lib/gup").repeat,e=v("../../lib").sorterAsc,n=v("../../lib").strTranslate,i=m.bar.snapRatio;function l(M,I){return M*(1-i)+I*i}var r=m.bar.snapClose;function d(M,I){return M*(1-r)+I*r}function f(M,I,P,S){if(function(re,U){for(var B=0;B<U.length;B++)if(re>=U[B][0]&&re<=U[B][1])return!0;return!1}(P,S))return P;var E=M?-1:1,R=0,D=I.length-1;if(E<0){var j=R;R=D,D=j}for(var H=I[R],Y=H,X=R;E*X<E*D;X+=E){var Z=X+E,W=I[Z];if(E*P<E*d(H,W))return l(H,Y);if(E*P<E*W||Z===D)return l(W,H);Y=H,H=W}}function t(M){M.attr("x",-m.bar.captureWidth/2).attr("width",m.bar.captureWidth)}function h(M){M.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function s(M){if(!M.brush.filterSpecified)return"0,"+M.height;for(var I,P,S,E=o(M.brush.filter.getConsolidated(),M.height),R=[0],D=E.length?E[0][0]:null,j=0;j<E.length;j++)P=(I=E[j])[1]-I[0],R.push(D),R.push(P),(S=j+1)<E.length&&(D=E[S][0]-I[1]);return R.push(M.height),R}function o(M,I){return M.map(function(P){return P.map(function(S){return Math.max(0,S*I)}).sort(e)})}function p(){g.select(document.body).style("cursor",null)}function c(M){M.attr("stroke-dasharray",s)}function a(M,I){var P=g.select(M).selectAll(".highlight, .highlight-shadow");c(I?P.transition().duration(m.bar.snapDuration).each("end",I):P)}function y(M,I){var P,S=M.brush,E=NaN,R={};if(S.filterSpecified){var D=M.height,j=S.filter.getConsolidated(),H=o(j,D),Y=NaN,X=NaN,Z=NaN;for(P=0;P<=H.length;P++){var W=H[P];if(W&&W[0]<=I&&I<=W[1]){Y=P;break}if(X=P?P-1:NaN,W&&W[0]>I){Z=P;break}}if(E=Y,isNaN(E)&&(E=isNaN(X)||isNaN(Z)?isNaN(X)?Z:X:I-H[X][1]<H[Z][0]-I?X:Z),!isNaN(E)){var re=H[E],U=function(N,K){var J=m.bar.handleHeight;if(!(K>N[1]+J||K<N[0]-J))return K>=.9*N[1]+.1*N[0]?"n":K<=.9*N[0]+.1*N[1]?"s":"ns"}(re,I);U&&(R.interval=j[E],R.intervalPix=re,R.region=U)}}if(M.ordinal&&!R.region){var B=M.unitTickvals,V=M.unitToPaddedPx.invert(I);for(P=0;P<B.length;P++){var ee=[.25*B[Math.max(P-1,0)]+.75*B[P],.25*B[Math.min(P+1,B.length-1)]+.75*B[P]];if(V>=ee[0]&&V<=ee[1]){R.clickableOrdinalRange=ee;break}}}return R}function u(M,I){g.event.sourceEvent.stopPropagation();var P=I.height-g.mouse(M)[1]-2*m.verticalPadding,S=I.brush.svgBrush;S.wasDragged=!0,S._dragging=!0,S.newExtent=S.grabbingBar?[P-S.grabPoint,P+S.barLength-S.grabPoint].map(I.unitToPaddedPx.invert):[S.startExtent,I.unitToPaddedPx.invert(P)].sort(e),I.brush.filterSpecified=!0,S.extent=S.stayingIntervals.concat([S.newExtent]),S.brushCallback(I),a(M.parentNode)}function _(M,I){var P=y(I,I.height-g.mouse(M)[1]-2*m.verticalPadding),S="crosshair";P.clickableOrdinalRange?S="pointer":P.region&&(S=P.region+"-resize"),g.select(document.body).style("cursor",S)}function b(M){M.on("mousemove",function(I){g.event.preventDefault(),I.parent.inBrushDrag||_(this,I)}).on("mouseleave",function(I){I.parent.inBrushDrag||p()}).call(g.behavior.drag().on("dragstart",function(I){!function(P,S){g.event.sourceEvent.stopPropagation();var E=S.height-g.mouse(P)[1]-2*m.verticalPadding,R=S.unitToPaddedPx.invert(E),D=S.brush,j=y(S,E),H=j.interval,Y=D.svgBrush;if(Y.wasDragged=!1,Y.grabbingBar="ns"===j.region,Y.grabbingBar){var X=H.map(S.unitToPaddedPx);Y.grabPoint=E-X[0]-m.verticalPadding,Y.barLength=X[1]-X[0]}Y.clickableOrdinalRange=j.clickableOrdinalRange,Y.stayingIntervals=S.multiselect&&D.filterSpecified?D.filter.getConsolidated():[],H&&(Y.stayingIntervals=Y.stayingIntervals.filter(function(Z){return Z[0]!==H[0]&&Z[1]!==H[1]})),Y.startExtent=j.region?H["s"===j.region?1:0]:R,S.parent.inBrushDrag=!0,Y.brushStartCallback()}(this,I)}).on("drag",function(I){u(this,I)}).on("dragend",function(I){!function(P,S){var E=S.brush,R=E.filter,D=E.svgBrush;D._dragging||(_(P,S),u(P,S),S.brush.svgBrush.wasDragged=!1),D._dragging=!1,g.event.sourceEvent.stopPropagation();var j=D.grabbingBar;if(D.grabbingBar=!1,D.grabLocation=void 0,S.parent.inBrushDrag=!1,p(),!D.wasDragged)return D.wasDragged=void 0,D.clickableOrdinalRange?E.filterSpecified&&S.multiselect?D.extent.push(D.clickableOrdinalRange):(D.extent=[D.clickableOrdinalRange],E.filterSpecified=!0):j?(D.extent=D.stayingIntervals,0===D.extent.length&&T(E)):T(E),D.brushCallback(S),a(P.parentNode),void D.brushEndCallback(E.filterSpecified?R.getConsolidated():[]);var H=function(){R.set(R.getConsolidated())};if(S.ordinal){var Y=S.unitTickvals;Y[Y.length-1]<Y[0]&&Y.reverse(),D.newExtent=[f(0,Y,D.newExtent[0],D.stayingIntervals),f(1,Y,D.newExtent[1],D.stayingIntervals)];var X=D.newExtent[1]>D.newExtent[0];D.extent=D.stayingIntervals.concat(X?[D.newExtent]:[]),D.extent.length||T(E),D.brushCallback(S),X?a(P.parentNode,H):(H(),a(P.parentNode))}else H();D.brushEndCallback(E.filterSpecified?R.getConsolidated():[])}(this,I)}))}function w(M,I){return M[0]-I[0]}function T(M){M.filterSpecified=!1,M.svgBrush.extent=[[-1/0,1/0]]}function C(M){for(var I,P=M.slice(),S=[],E=P.shift();E;){for(I=E.slice();(E=P.shift())&&E[0]<=I[1];)I[1]=Math.max(I[1],E[1]);S.push(I)}return 1===S.length&&S[0][0]>S[0][1]&&(S=[]),S}$.exports={makeBrush:function(M,I,P,S,E,R){var D,H,Y,X,j=(X=[],{set:function(Z){1===(X=Z.map(function(W){return W.slice().sort(e)}).sort(w)).length&&X[0][0]===-1/0&&X[0][1]===1/0&&(X=[[0,-1]]),H=C(X),Y=X.reduce(function(W,re){return[Math.min(W[0],re[0]),Math.max(W[1],re[1])]},[1/0,-1/0])},get:function(){return X.slice()},getConsolidated:function(){return H},getBounds:function(){return Y}});return j.set(P),{filter:j,filterSpecified:I,svgBrush:{extent:[],brushStartCallback:S,brushCallback:(D=E,function(H){var Z,Y=H.brush,X=(Z=Y,Z.svgBrush.extent.map(function(W){return W.slice()})).slice();Y.filter.set(X),D()}),brushEndCallback:R}}},ensureAxisBrush:function(M,I,P){var S=M.selectAll("."+m.cn.axisBrush).data(x,k);S.enter().append("g").classed(m.cn.axisBrush,!0),function(E,R,D){var j=D._context.staticPlot,H=E.selectAll(".background").data(x);H.enter().append("rect").classed("background",!0).call(t).call(h).style("pointer-events",j?"none":"auto").attr("transform",n(0,m.verticalPadding)),H.call(b).attr("height",function(Z){return Z.height-m.verticalPadding});var Y=E.selectAll(".highlight-shadow").data(x);Y.enter().append("line").classed("highlight-shadow",!0).attr("x",-m.bar.width/2).attr("stroke-width",m.bar.width+m.bar.strokeWidth).attr("stroke",R).attr("opacity",m.bar.strokeOpacity).attr("stroke-linecap","butt"),Y.attr("y1",function(Z){return Z.height}).call(c);var X=E.selectAll(".highlight").data(x);X.enter().append("line").classed("highlight",!0).attr("x",-m.bar.width/2).attr("stroke-width",m.bar.width-m.bar.strokeWidth).attr("stroke",m.bar.fillColor).attr("opacity",m.bar.fillOpacity).attr("stroke-linecap","butt"),X.attr("y1",function(Z){return Z.height}).call(c)}(S,I,P)},cleanRanges:function(M,I){if(Array.isArray(M[0])?(M=M.map(function(S){return S.sort(e)}),M=I.multiselect?C(M.sort(w)):[M[0]]):M=[M.sort(e)],I.tickvals){var P=I.tickvals.slice().sort(e);if(!(M=M.map(function(S){var E=[f(0,P,S[0],[]),f(1,P,S[1],[])];if(E[1]>E[0])return E}).filter(function(S){return S})).length)return}return M.length>1?M:M[0]}}},{"../../lib":515,"../../lib/gup":512,"./constants":902,"@plotly/d3":58}],899:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:v("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":897,"./base_plot":900,"./calc":901,"./defaults":903}],900:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../plots/get_data").getModuleCalcData,k=v("./plot"),x=v("../../constants/xmlns_namespaces");Q.name="parcoords",Q.plot=function(e){var n=g(e.calcdata,"parcoords")[0];n.length&&k(e,n)},Q.clean=function(e,n,i,l){var r=l._has&&l._has("parcoords"),d=n._has&&n._has("parcoords");r&&!d&&(l._paperdiv.selectAll(".parcoords").remove(),l._glimages.selectAll("*").remove())},Q.toSVG=function(e){var n=e._fullLayout._glimages,i=m.select(e).selectAll(".svg-container");i.filter(function(l,r){return r===i.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var l=this.toDataURL("image/png");n.append("svg:image").attr({xmlns:x.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){m.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":492,"../../plots/get_data":602,"./plot":909,"@plotly/d3":58}],901:[function(v,$,Q){"use strict";var m=v("../../lib").isArrayOrTypedArray,g=v("../../components/colorscale"),k=v("../../lib/gup").wrap;$.exports=function(x,e){var n,i;return g.hasColorscale(e,"line")&&m(e.line.color)?(n=e.line.color,i=g.extractOpts(e.line).colorscale,g.calc(x,e,{vals:n,containerStr:"line",cLetter:"c"})):(n=function(l){for(var r=new Array(l),d=0;d<l;d++)r[d]=.5;return r}(e._length),i=[[0,e.line.color],[1,e.line.color]]),k({lineColor:n,cscale:i})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512}],902:[function(v,$,Q){"use strict";$.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],903:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/colorscale/helpers").hasColorscale,k=v("../../components/colorscale/defaults"),x=v("../../plots/domain").defaults,e=v("../../plots/array_container_defaults"),n=v("../../plots/cartesian/axes"),i=v("./attributes"),l=v("./axisbrush"),r=v("./constants").maxDimensionCount,d=v("./merge_length");function f(t,h,s,o){function p(_,b){return m.coerce(t,h,i.dimensions,_,b)}var c=p("values"),a=p("visible");if(c&&c.length||(a=h.visible=!1),a){p("label"),p("tickvals"),p("ticktext"),p("tickformat");var y=p("range");h._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:y},n.setConvert(h._ax,o.layout),p("multiselect");var u=p("constraintrange");u&&(h.constraintrange=l.cleanRanges(u,h))}}$.exports=function(t,h,s,o){function p(_,b){return m.coerce(t,h,i,_,b)}var c=t.dimensions;Array.isArray(c)&&c.length>r&&(m.log("parcoords traces support up to "+r+" dimensions at the moment"),c.splice(r));var a=e(t,h,{name:"dimensions",layout:o,handleItemDefaults:f}),y=function(_,b,w,T,C){var M=C("line.color",w);if(g(_,"line")&&m.isArrayOrTypedArray(M)){if(M.length)return C("line.colorscale"),k(_,b,T,C,{prefix:"line.",cLetter:"c"}),M.length;b.line.color=w}return 1/0}(t,h,s,o,p);x(h,o,p),Array.isArray(a)&&a.length||(h.visible=!1),d(h,a,"values",y);var u={family:o.font.family,size:Math.round(o.font.size/1.2),color:o.font.color};m.coerceFont(p,"labelfont",u),m.coerceFont(p,"tickfont",u),m.coerceFont(p,"rangefont",u),p("labelangle"),p("labelside"),p("unselected.line.color"),p("unselected.line.opacity")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../../plots/domain":593,"./attributes":897,"./axisbrush":898,"./constants":902,"./merge_length":907}],904:[function(v,$,Q){"use strict";var m=v("../../lib").isTypedArray;Q.convertTypedArray=function(g){return m(g)?Array.prototype.slice.call(g):g},Q.isOrdinal=function(g){return!!g.tickvals},Q.isVisible=function(g){return g.visible||!("visible"in g)}},{"../../lib":515}],905:[function(v,$,Q){"use strict";var m=v("./base_index");m.plot=v("./plot"),$.exports=m},{"./base_index":899,"./plot":909}],906:[function(v,$,Q){"use strict";var m=v("glslify"),g=m(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),k=m(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),x=v("./constants").maxDimensionCount,e=v("../../lib"),n=new Uint8Array(4),i=new Uint8Array(4),l={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function r(a,y,u,_,b){var w=a._gl;w.enable(w.SCISSOR_TEST),w.scissor(y,u,_,b),a.clear({color:[0,0,0,0],depth:1})}function d(a,y,u,_,b,w){var T=w.key;u.drawCompleted||(a.read({x:0,y:0,width:1,height:1,data:n}),u.drawCompleted=!0),function C(M){var I=Math.min(_,b-M*_);0===M&&(window.cancelAnimationFrame(u.currentRafs[T]),delete u.currentRafs[T],r(a,w.scissorX,w.scissorY,w.scissorWidth,w.viewBoxSize[1])),u.clearOnly||(w.count=2*I,w.offset=2*M*_,y(w),M*_+I<b&&(u.currentRafs[T]=window.requestAnimationFrame(function(){C(M+1)})),u.drawCompleted=!1)}(0)}function f(a,y){for(var u=new Array(256),_=0;_<256;_++)u[_]=a(_/255).concat(y);return u}function t(a,y){return(a>>>8*y)%256/255}function h(a,y,u){for(var _=new Array(8*y),b=0,w=0;w<y;w++)for(var T=0;T<2;T++)for(var C=0;C<4;C++){var M=4*a+C,I=u[64*w+M];63===M&&0===T&&(I*=-1),_[b++]=I}return _}function s(a){var y="0"+a;return y.substr(y.length-2)}function o(a){return a<x?"p"+s(a+1)+"_"+s(a+4):"colors"}function p(a,y,u,_,b,w,T,C,M,I,P,S,E,R){for(var D=[[],[]],j=0;j<64;j++)D[0][j]=j===b?1:0,D[1][j]=j===w?1:0;var H=a.lines.canvasOverdrag*R,Y=a.domain,X=a.canvasWidth*R,Z=a.canvasHeight*R,W=a.pad.l*R,re=a.pad.b*R,U=a.layoutHeight*R,B=a.layoutWidth*R,V=a.deselectedLines.color,ee=a.deselectedLines.opacity;return e.extendFlat({key:P,resolution:[X,Z],viewBoxPos:[(T*=R)+H,C*=R],viewBoxSize:[M*=R,I*=R],i0:b,i1:w,dim0A:D[0].slice(0,16),dim0B:D[0].slice(16,32),dim0C:D[0].slice(32,48),dim0D:D[0].slice(48,64),dim1A:D[1].slice(0,16),dim1B:D[1].slice(16,32),dim1C:D[1].slice(32,48),dim1D:D[1].slice(48,64),drwLayer:S,contextColor:[V[0]/255,V[1]/255,V[2]/255,"auto"!==ee?V[3]*ee:Math.max(1/255,Math.pow(1/a.lines.color.length,1/3))],scissorX:(_===y?0:T+H)+(W-H)+B*Y.x[0],scissorWidth:(_===u?X-T+H:M+.5)+(_===y?T+H:0),scissorY:C+re+U*Y.y[0],scissorHeight:I,viewportX:W-H+B*Y.x[0],viewportY:re+U*Y.y[0],viewportWidth:X,viewportHeight:Z},E)}function c(a){var y=Math.max(0,Math.floor(2047*a[0]),0),u=Math.min(2047,Math.ceil(2047*a[1]),2047);return[Math.min(y,u),Math.max(y,u)]}$.exports=function(a,y){var u,b,w,T,C=y.context,M=y.pick,I=y.regl,P=I._gl,S=P.getParameter(P.ALIASED_LINE_WIDTH_RANGE),E=Math.max(S[0],Math.min(S[1],y.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},D=function(Z){for(var W={},re=0;re<=x;re+=4)W[o(re)]=Z.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return W}(I),j=I.texture(l),H=[];X(y);var Y=I({profile:!1,blend:{enable:C,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!C,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:I.prop("scissorX"),y:I.prop("scissorY"),width:I.prop("scissorWidth"),height:I.prop("scissorHeight")}},viewport:{x:I.prop("viewportX"),y:I.prop("viewportY"),width:I.prop("viewportWidth"),height:I.prop("viewportHeight")},dither:!1,vert:g,frag:k,primitive:"lines",lineWidth:E,attributes:D,uniforms:{resolution:I.prop("resolution"),viewBoxPos:I.prop("viewBoxPos"),viewBoxSize:I.prop("viewBoxSize"),dim0A:I.prop("dim0A"),dim1A:I.prop("dim1A"),dim0B:I.prop("dim0B"),dim1B:I.prop("dim1B"),dim0C:I.prop("dim0C"),dim1C:I.prop("dim1C"),dim0D:I.prop("dim0D"),dim1D:I.prop("dim1D"),loA:I.prop("loA"),hiA:I.prop("hiA"),loB:I.prop("loB"),hiB:I.prop("hiB"),loC:I.prop("loC"),hiC:I.prop("hiC"),loD:I.prop("loD"),hiD:I.prop("hiD"),palette:j,contextColor:I.prop("contextColor"),maskTexture:I.prop("maskTexture"),drwLayer:I.prop("drwLayer"),maskHeight:I.prop("maskHeight")},offset:I.prop("offset"),count:I.prop("count")});function X(Z){u=Z.model,b=Z.viewModel.dimensions.slice(),w=b[0]?b[0].values.length:0;var W=u.lines,re=M?W.color.map(function(B,V){return V/W.color.length}):W.color,U=function(B,V,ee){for(var K=new Array(B*(x+4)),J=0,te=0;te<B;te++){for(var ae=0;ae<x;ae++)K[J++]=ae<V.length?V[ae].paddedUnitValues[te]:.5;K[J++]=t(te,2),K[J++]=t(te,1),K[J++]=t(te,0),K[J++]=Math.max(1e-6,Math.min(.999999,ee[te]))}return K}(w,b,re);(function(B,V,ee){for(var N=0;N<=x;N+=4)B[o(N)](h(N/4,V,ee))})(D,w,U),C||M||(j=I.texture(e.extendFlat({data:f(u.unitToColor,255)},l)))}return{render:function(Z,W,re){var U,B,V,ee=Z.length,N=1/0,K=-1/0;for(U=0;U<ee;U++)Z[U].dim0.canvasX<N&&(N=Z[U].dim0.canvasX,B=U),Z[U].dim1.canvasX>K&&(K=Z[U].dim1.canvasX,V=U);0===ee&&r(I,0,0,u.canvasWidth,u.canvasHeight);var J=function(ge){var we,oe,de,Te=[[],[]];for(de=0;de<64;de++){var Ee=!ge&&de<b.length?b[de].brush.filter.getBounds():[-1/0,1/0];Te[0][de]=Ee[0],Te[1][de]=Ee[1]}var Ae=new Array(16384);for(we=0;we<16384;we++)Ae[we]=255;if(!ge)for(we=0;we<b.length;we++){var De=we%8,Ie=(we-De)/8,Oe=Math.pow(2,De),Xe=b[we].brush.filter.get();if(!(Xe.length<2)){var Fe=c(Xe[0])[1];for(oe=1;oe<Xe.length;oe++){var Pe=c(Xe[oe]);for(de=Fe+1;de<Pe[0];de++)Ae[8*de+Ie]&=~Oe;Fe=Math.max(Fe,Pe[1])}}}var Re={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Ae};return T?T(Re):T=I.texture(Re),{maskTexture:T,maskHeight:2048,loA:Te[0].slice(0,16),loB:Te[0].slice(16,32),loC:Te[0].slice(32,48),loD:Te[0].slice(48,64),hiA:Te[1].slice(0,16),hiB:Te[1].slice(16,32),hiC:Te[1].slice(32,48),hiD:Te[1].slice(48,64)}}(C);for(U=0;U<ee;U++){var te=Z[U],ae=te.dim0.crossfilterDimensionIndex,le=te.dim1.crossfilterDimensionIndex,se=te.canvasX,ve=te.canvasY,ue=se+te.panelSizeX,ye=te.plotGlPixelRatio;if(W||!H[ae]||H[ae][0]!==se||H[ae][1]!==ue){H[ae]=[se,ue];var Me=p(u,B,V,U,ae,le,se,ve,te.panelSizeX,te.panelSizeY,te.dim0.crossfilterDimensionIndex,C?0:M?2:1,J,ye);R.clearOnly=re,d(I,Y,R,W?u.lines.blockLineCount:w,w,Me)}}},readPixel:function(Z,W){return I.read({x:Z,y:W,width:1,height:1,data:i}),i},readPixels:function(Z,W,re,U){var B=new Uint8Array(4*re*U);return I.read({x:Z,y:W,width:re,height:U,data:B}),B},destroy:function(){for(var Z in a.style["pointer-events"]="none",j.destroy(),T&&T.destroy(),D)D[Z].destroy()},update:X}}},{"../../lib":515,"./constants":902,glslify:227}],907:[function(v,$,Q){"use strict";$.exports=function(m,g,k,x){var e,n;for(x||(x=1/0),e=0;e<g.length;e++)(n=g[e]).visible&&(x=Math.min(x,n[k].length));for(x===1/0&&(x=0),m._length=x,e=0;e<g.length;e++)(n=g[e]).visible&&(n._length=x);return x}},{}],908:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=g.numberFormat,x=v("color-rgba"),e=v("../../plots/cartesian/axes"),n=g.strRotate,i=g.strTranslate,l=v("../../lib/svg_text_utils"),r=v("../../components/drawing"),d=v("../../components/colorscale"),f=v("../../lib/gup"),t=f.keyFun,h=f.repeat,s=f.unwrap,o=v("./helpers"),p=v("./constants"),c=v("./axisbrush"),a=v("./lines");function y(H,Y,X){return g.aggNums(H,null,Y,X)}function u(H,Y){return b(y(Math.min,H,Y),y(Math.max,H,Y))}function _(H){var Y=H.range;return Y?b(Y[0],Y[1]):u(H.values,H._length)}function b(H,Y){return!isNaN(H)&&isFinite(H)||(H=0),!isNaN(Y)&&isFinite(Y)||(Y=0),H===Y&&(0===H?(H-=1,Y+=1):(H*=.9,Y*=1.1)),[H,Y]}function w(H,Y,X,Z,W){var re,U,B=_(X);return Z?m.scale.ordinal().domain(Z.map((re=k(X.tickformat),U=W,U?function(V,ee){return U[ee]??re(V)}:re))).range(Z.map(function(V){return H-Y+(V-B[0])/(B[1]-B[0])*(2*Y-H)})):m.scale.linear().domain(B).range([H-Y,Y])}function T(H){if(H.tickvals){var Y=_(H);return m.scale.ordinal().domain(H.tickvals).range(H.tickvals.map(function(X){return(X-Y[0])/(Y[1]-Y[0])}))}}function C(H){var Y=H.map(function(W){return W[0]}),X=H.map(function(W){var re=x(W[1]);return m.rgb("rgb("+re[0]+","+re[1]+","+re[2]+")")}),Z="rgb".split("").map(function(W){return m.scale.linear().clamp(!0).domain(Y).range(X.map((re=W,function(U){return U[re]})));var re});return function(W){return Z.map(function(re){return re(W)})}}function M(H){return H.dimensions.some(function(Y){return Y.brush.filterSpecified})}function I(H,Y,X){var Z=s(Y),W=Z.trace,re=o.convertTypedArray(Z.lineColor),U=W.line,B={color:x(W.unselected.line.color),opacity:W.unselected.line.opacity},V=d.extractOpts(U),ee=V.reversescale?d.flipScale(Z.cscale):Z.cscale,N=W.domain,K=W.dimensions,J=H.width,te=W.labelangle,ae=W.labelside,le=W.labelfont,se=W.tickfont,ve=W.rangefont,ue=g.extendDeepNoArrays({},U,{color:re.map(m.scale.linear().domain(_({values:re,range:[V.min,V.max],_length:W._length}))),blockLineCount:p.blockLineCount,canvasOverdrag:p.overdrag*p.canvasPixelRatio}),ye=Math.floor(J*(N.x[1]-N.x[0])),Me=Math.floor(H.height*(N.y[1]-N.y[0])),pe=H.margin||{l:80,r:80,t:100,b:80},ge=ye,we=Me;return{key:X,colCount:K.filter(o.isVisible).length,dimensions:K,tickDistance:p.tickDistance,unitToColor:C(ee),lines:ue,deselectedLines:B,labelAngle:te,labelSide:ae,labelFont:le,tickFont:se,rangeFont:ve,layoutWidth:J,layoutHeight:H.height,domain:N,translateX:N.x[0]*J,translateY:H.height-N.y[1]*H.height,pad:pe,canvasWidth:ge*p.canvasPixelRatio+2*ue.canvasOverdrag,canvasHeight:we*p.canvasPixelRatio,width:ge,height:we,canvasPixelRatio:p.canvasPixelRatio}}function P(H,Y,X){var J,te,Z=X.width,W=X.height,re=X.dimensions,U=X.canvasPixelRatio,B=function(J){return Z*J/Math.max(1,X.colCount-1)},V=p.verticalPadding/W,ee=(J=W,te=p.verticalPadding,m.scale.linear().range([te,J-te])),N={key:X.key,xScale:B,model:X,inBrushDrag:!1},K={};return N.dimensions=re.filter(o.isVisible).map(function(J,te){var Ae,De,ae=(Ae=J,De=V,m.scale.linear().domain(_(Ae)).range([De,1-De])),le=K[J.label];K[J.label]=(le||0)+1;var se=J.label+(le?"__"+le:""),ve=J.constraintrange,ue=ve&&ve.length;ue&&!Array.isArray(ve[0])&&(ve=[ve]);var ye=ue?ve.map(function(Ae){return Ae.map(ae)}):[[-1/0,1/0]],Me=J.values;Me.length>J._length&&(Me=Me.slice(0,J._length));var pe,ge=J.tickvals;function we(Ae,De){return{val:Ae,text:pe[De]}}function oe(Ae,De){return Ae.val-De.val}if(Array.isArray(ge)&&ge.length){pe=J.ticktext,Array.isArray(pe)&&pe.length?pe.length>ge.length?pe=pe.slice(0,ge.length):ge.length>pe.length&&(ge=ge.slice(0,pe.length)):pe=ge.map(k(J.tickformat));for(var de=1;de<ge.length;de++)if(ge[de]<ge[de-1]){for(var Te=ge.map(we).sort(oe),Ee=0;Ee<ge.length;Ee++)ge[Ee]=Te[Ee].val,pe[Ee]=Te[Ee].text;break}}else ge=void 0;return Me=o.convertTypedArray(Me),{key:se,label:J.label,tickFormat:J.tickformat,tickvals:ge,ticktext:pe,ordinal:o.isOrdinal(J),multiselect:J.multiselect,xIndex:te,crossfilterDimensionIndex:te,visibleIndex:J._index,height:W,values:Me,paddedUnitValues:Me.map(ae),unitTickvals:ge&&ge.map(ae),xScale:B,x:B(te),canvasX:B(te)*U,unitToPaddedPx:ee,domainScale:w(W,p.verticalPadding,J,ge,pe),ordinalScale:T(J),parent:N,model:X,brush:c.makeBrush(H,ue,ye,function(){H.linePickActive(!1)},function(){var Ae=N;Ae.focusLayer&&Ae.focusLayer.render(Ae.panels,!0);var De=M(Ae);!H.contextShown()&&De?(Ae.contextLayer&&Ae.contextLayer.render(Ae.panels,!0),H.contextShown(!0)):H.contextShown()&&!De&&(Ae.contextLayer&&Ae.contextLayer.render(Ae.panels,!0,!0),H.contextShown(!1))},function(Ae){if(N.focusLayer.render(N.panels,!0),N.pickLayer&&N.pickLayer.render(N.panels,!0),H.linePickActive(!0),Y&&Y.filterChanged){var De=ae.invert,Ie=Ae.map(function(Oe){return Oe.map(De).sort(g.sorterAsc)}).sort(function(Oe,Xe){return Oe[0]-Xe[0]});Y.filterChanged(N.key,J._index,Ie)}})}}),N}function S(H){H.classed(p.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function E(H,Y){var Z=H*Math.PI/180;return{dir:"top"===Y?1:-1,dx:Math.sin(Z),dy:Math.cos(Z),degrees:H}}function R(H,Y,X){for(var Z=Y.panels||(Y.panels=[]),W=H.data(),re=0;re<W.length-1;re++){var U=Z[re]||(Z[re]={}),B=W[re],V=W[re+1];U.dim0=B,U.dim1=V,U.canvasX=B.canvasX,U.panelSizeX=V.canvasX-B.canvasX,U.panelSizeY=Y.model.canvasHeight,U.y=0,U.canvasY=0,U.plotGlPixelRatio=X}}function D(H,Y){return e.tickText(H._ax,Y,!1).text}function j(H,Y){if(H.ordinal)return"";var X=H.domainScale.domain();return D(H.model.dimensions[H.visibleIndex],X[Y?X.length-1:0])}$.exports=function(H,Y,X,Z){var W=H._context.staticPlot,re=H._fullLayout,U=re._toppaper,B=re._glcontainer,V=H._context.plotGlPixelRatio,ee=H._fullLayout.paper_bgcolor;!function(Ae){for(var De=0;De<Ae.length;De++)for(var Ie=0;Ie<Ae[De].length;Ie++)for(var Oe=Ae[De][Ie].trace,Xe=Oe.dimensions,Fe=0;Fe<Xe.length;Fe++){var Pe=Xe[Fe].values,Re=Xe[Fe]._ax;Re&&(Re.range=Re.range?b(Re.range[0],Re.range[1]):u(Pe,Oe._length),Re.dtick||(Re.dtick=.01*(Math.abs(Re.range[1]-Re.range[0])||1)),Re.tickformat=Xe[Fe].tickformat,e.calcTicks(Re),Re.cleanRange())}}(Y);var N,K,J=(N=!0,K=!1,{linePickActive:function(Ae){return arguments.length?N=!!Ae:N},contextShown:function(Ae){return arguments.length?K=!!Ae:K}}),te=Y.filter(function(Ae){return s(Ae).trace.visible}).map(I.bind(0,X)).map(P.bind(0,J,Z));B.each(function(Ae,De){return g.extendFlat(Ae,te[De])});var ae=B.selectAll(".gl-canvas").each(function(Ae){Ae.viewModel=te[0],Ae.viewModel.plotGlPixelRatio=V,Ae.viewModel.paperColor=ee,Ae.model=Ae.viewModel?Ae.viewModel.model:null}),le=null;ae.filter(function(Ae){return Ae.pick}).style("pointer-events",W?"none":"auto").on("mousemove",function(Ae){if(J.linePickActive()&&Ae.lineLayer&&Z&&Z.hover){var De=m.event,Ie=this.width,Oe=this.height,Xe=m.mouse(this),Fe=Xe[0],Pe=Xe[1];if(Fe<0||Pe<0||Fe>=Ie||Pe>=Oe)return;var Re=Ae.lineLayer.readPixel(Fe,Oe-1-Pe),qe=0!==Re[3],Qe=qe?Re[2]+256*(Re[1]+256*Re[0]):null,ct={x:Fe,y:Pe,clientX:De.clientX,clientY:De.clientY,dataIndex:Ae.model.key,curveNumber:Qe};Qe!==le&&(qe?Z.hover(ct):Z.unhover&&Z.unhover(ct),le=Qe)}}),ae.style("opacity",function(Ae){return Ae.pick?0:1}),U.style("background","rgba(255, 255, 255, 0)");var se=U.selectAll("."+p.cn.parcoords).data(te,t);se.exit().remove(),se.enter().append("g").classed(p.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),se.attr("transform",function(Ae){return i(Ae.model.translateX,Ae.model.translateY)});var ve=se.selectAll("."+p.cn.parcoordsControlView).data(h,t);ve.enter().append("g").classed(p.cn.parcoordsControlView,!0),ve.attr("transform",function(Ae){return i(Ae.model.pad.l,Ae.model.pad.t)});var ue=ve.selectAll("."+p.cn.yAxis).data(function(Ae){return Ae.dimensions},t);ue.enter().append("g").classed(p.cn.yAxis,!0),ve.each(function(Ae){R(ue,Ae,V)}),ae.each(function(Ae){Ae.viewModel&&(!Ae.lineLayer||Z?Ae.lineLayer=a(this,Ae):Ae.lineLayer.update(Ae),(Ae.key||0===Ae.key)&&(Ae.viewModel[Ae.key]=Ae.lineLayer),Ae.lineLayer.render(Ae.viewModel.panels,!Ae.context||Z))}),ue.attr("transform",function(Ae){return i(Ae.xScale(Ae.xIndex),0)}),ue.call(m.behavior.drag().origin(function(Ae){return Ae}).on("drag",function(Ae){var De=Ae.parent;J.linePickActive(!1),Ae.x=Math.max(-p.overdrag,Math.min(Ae.model.width+p.overdrag,m.event.x)),Ae.canvasX=Ae.x*Ae.model.canvasPixelRatio,ue.sort(function(Ie,Oe){return Ie.x-Oe.x}).each(function(Ie,Oe){Ie.xIndex=Oe,Ie.x=Ae===Ie?Ie.x:Ie.xScale(Ie.xIndex),Ie.canvasX=Ie.x*Ie.model.canvasPixelRatio}),R(ue,De,V),ue.filter(function(Ie){return 0!==Math.abs(Ae.xIndex-Ie.xIndex)}).attr("transform",function(Ie){return i(Ie.xScale(Ie.xIndex),0)}),m.select(this).attr("transform",i(Ae.x,0)),ue.each(function(Ie,Oe,Xe){Xe===Ae.parent.key&&(De.dimensions[Oe]=Ie)}),De.contextLayer&&De.contextLayer.render(De.panels,!1,!M(De)),De.focusLayer.render&&De.focusLayer.render(De.panels)}).on("dragend",function(Ae){var De=Ae.parent;Ae.x=Ae.xScale(Ae.xIndex),Ae.canvasX=Ae.x*Ae.model.canvasPixelRatio,R(ue,De,V),m.select(this).attr("transform",function(Ie){return i(Ie.x,0)}),De.contextLayer&&De.contextLayer.render(De.panels,!1,!M(De)),De.focusLayer&&De.focusLayer.render(De.panels),De.pickLayer&&De.pickLayer.render(De.panels,!0),J.linePickActive(!0),Z&&Z.axesMoved&&Z.axesMoved(De.key,De.dimensions.map(function(Ie){return Ie.crossfilterDimensionIndex}))})),ue.exit().remove();var ye=ue.selectAll("."+p.cn.axisOverlays).data(h,t);ye.enter().append("g").classed(p.cn.axisOverlays,!0),ye.selectAll("."+p.cn.axis).remove();var Me=ye.selectAll("."+p.cn.axis).data(h,t);Me.enter().append("g").classed(p.cn.axis,!0),Me.each(function(Ae){var De=Ae.model.height/Ae.model.tickDistance,Ie=Ae.domainScale,Oe=Ie.domain();m.select(this).call(m.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(De,Ae.tickFormat).tickValues(Ae.ordinal?Oe:null).tickFormat(function(Xe){return o.isOrdinal(Ae)?Xe:D(Ae.model.dimensions[Ae.visibleIndex],Xe)}).scale(Ie)),r.font(Me.selectAll("text"),Ae.model.tickFont)}),Me.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Me.selectAll("text").style("text-shadow",l.makeTextShadow(ee)).style("cursor","default");var pe=ye.selectAll("."+p.cn.axisHeading).data(h,t);pe.enter().append("g").classed(p.cn.axisHeading,!0);var ge=pe.selectAll("."+p.cn.axisTitle).data(h,t);ge.enter().append("text").classed(p.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",W?"none":"auto"),ge.text(function(Ae){return Ae.label}).each(function(Ae){var De=m.select(this);r.font(De,Ae.model.labelFont),l.convertToTspans(De,H)}).attr("transform",function(Ae){var De=E(Ae.model.labelAngle,Ae.model.labelSide),Ie=p.axisTitleOffset;return(De.dir>0?"":i(0,2*Ie+Ae.model.height))+n(De.degrees)+i(-Ie*De.dx,-Ie*De.dy)}).attr("text-anchor",function(Ae){var De=E(Ae.model.labelAngle,Ae.model.labelSide);return 2*Math.abs(De.dx)>Math.abs(De.dy)?De.dir*De.dx<0?"start":"end":"middle"});var we=ye.selectAll("."+p.cn.axisExtent).data(h,t);we.enter().append("g").classed(p.cn.axisExtent,!0);var oe=we.selectAll("."+p.cn.axisExtentTop).data(h,t);oe.enter().append("g").classed(p.cn.axisExtentTop,!0),oe.attr("transform",i(0,-p.axisExtentOffset));var de=oe.selectAll("."+p.cn.axisExtentTopText).data(h,t);de.enter().append("text").classed(p.cn.axisExtentTopText,!0).call(S),de.text(function(Ae){return j(Ae,!0)}).each(function(Ae){r.font(m.select(this),Ae.model.rangeFont)});var Te=we.selectAll("."+p.cn.axisExtentBottom).data(h,t);Te.enter().append("g").classed(p.cn.axisExtentBottom,!0),Te.attr("transform",function(Ae){return i(0,Ae.model.height+p.axisExtentOffset)});var Ee=Te.selectAll("."+p.cn.axisExtentBottomText).data(h,t);Ee.enter().append("text").classed(p.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(S),Ee.text(function(Ae){return j(Ae,!1)}).each(function(Ae){r.font(m.select(this),Ae.model.rangeFont)}),c.ensureAxisBrush(ye,ee,H)}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"./axisbrush":898,"./constants":902,"./helpers":904,"./lines":906,"@plotly/d3":58,"color-rgba":91}],909:[function(v,$,Q){"use strict";var m=v("./parcoords"),g=v("../../lib/prepare_regl"),k=v("./helpers").isVisible,x={};function e(n,i,l){var r=i.indexOf(l),d=n.indexOf(r);return-1===d&&(d+=i.length),d}($.exports=function(n,i){var l=n._fullLayout;if(g(n,[],x)){var r={},d={},f={},t={},h=l._size;i.forEach(function(s,o){var p=s[0].trace;f[o]=p.index;var c=t[o]=p._fullInput.index;r[o]=n.data[c].dimensions,d[o]=n.data[c].dimensions.slice()}),m(n,i,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{filterChanged:function(s,o,p){var c=d[s][o],a=p.map(function(T){return T.slice()}),y="dimensions["+o+"].constraintrange",u=l._tracePreGUI[n._fullData[f[s]]._fullInput.uid];void 0===u[y]&&(u[y]=c.constraintrange||null);var b=n._fullData[f[s]].dimensions[o];a.length?(1===a.length&&(a=a[0]),c.constraintrange=a,b.constraintrange=a.slice(),a=[a]):(delete c.constraintrange,delete b.constraintrange,a=null);var w={};w[y]=a,n.emit("plotly_restyle",[w,[t[s]]])},hover:function(s){n.emit("plotly_hover",s)},unhover:function(s){n.emit("plotly_unhover",s)},axesMoved:function(s,o){var c,a,p=(c=o,a=d[s].filter(k),function(y,u){return e(c,a,y)-e(c,a,u)});r[s].sort(p),d[s].filter(function(c){return!k(c)}).sort(function(c){return d[s].indexOf(c)}).forEach(function(c){r[s].splice(r[s].indexOf(c),1),r[s].splice(d[s].indexOf(c),0,c)}),n.emit("plotly_restyle",[{dimensions:[r[s]]},[t[s]]])}})}}).reglPrecompiled=x},{"../../lib/prepare_regl":528,"./helpers":904,"./parcoords":908}],910:[function(v,$,Q){"use strict";var m=v("../../plots/attributes"),g=v("../../plots/domain").attributes,k=v("../../plots/font_attributes"),x=v("../../components/color/attributes"),e=v("../../plots/template_attributes").hovertemplateAttrs,n=v("../../plots/template_attributes").texttemplateAttrs,i=v("../../lib/extend").extendFlat,l=k({editType:"plot",arrayOk:!0,colorEditType:"plot"});$.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:x.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:i({},m.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:n({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:i({},l,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:i({},l,{}),outsidetextfont:i({},l,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:i({},l,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:g({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:i({},l,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],911:[function(v,$,Q){"use strict";var m=v("../../plots/plots");Q.name="pie",Q.plot=function(g,k,x,e){m.plotBasePlot(Q.name,g,k,x,e)},Q.clean=function(g,k,x,e){m.cleanBasePlot(Q.name,g,k,x,e)}},{"../../plots/plots":628}],912:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("tinycolor2"),k=v("../../components/color"),x={};function e(i){return function(l,r){return!!l&&!!(l=g(l)).isValid()&&(l=k.addOpacity(l,l.getAlpha()),i[r]||(i[r]=l),l)}}function n(i,l){var r,d=JSON.stringify(i),f=l[d];if(!f){for(f=i.slice(),r=0;r<i.length;r++)f.push(g(i[r]).lighten(20).toHexString());for(r=0;r<i.length;r++)f.push(g(i[r]).darken(20).toHexString());l[d]=f}return f}$.exports={calc:function(i,l){var r,d,f=[],t=i._fullLayout,h=t.hiddenlabels||[],s=l.labels,o=l.marker.colors||[],p=l.values,c=l._length,a=l._hasValues&&c;if(l.dlabel)for(s=new Array(c),r=0;r<c;r++)s[r]=String(l.label0+r*l.dlabel);var y={},u=e(t["_"+l.type+"colormap"]),_=0,b=!1;for(r=0;r<c;r++){var w,T,C;if(a){if(!m(w=p[r]))continue;w=+w}else w=1;void 0!==(T=s[r])&&""!==T||(T=r);var M=y[T=String(T)];void 0===M?(y[T]=f.length,(C=-1!==h.indexOf(T))||(_+=w),f.push({v:w,label:T,color:u(o[r],T),i:r,pts:[r],hidden:C})):(b=!0,(d=f[M]).v+=w,d.pts.push(r),d.hidden||(_+=w),!1===d.color&&o[r]&&(d.color=u(o[r],T)))}return f=f.filter(function(I){return I.v>=0}),("funnelarea"===l.type?b:l.sort)&&f.sort(function(I,P){return P.v-I.v}),f[0]&&(f[0].vTotal=_),f},crossTraceCalc:function(i,l){var r=(l||{}).type;r||(r="pie");var d=i._fullLayout,f=i.calcdata,t=d[r+"colorway"],h=d["_"+r+"colormap"];d["extend"+r+"colors"]&&(t=n(t,x));for(var s=0,o=0;o<f.length;o++){var p=f[o];if(p[0].trace.type===r)for(var c=0;c<p.length;c++){var a=p[c];!1===a.color&&(h[a.label]?a.color=h[a.label]:(h[a.label]=a.color=t[s%t.length],s++))}}},makePullColorFn:e,generateExtendedColors:n}},{"../../components/color":367,"fast-isnumeric":190,tinycolor2:313}],913:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib"),k=v("./attributes"),x=v("../../plots/domain").defaults,e=v("../bar/defaults").handleText;function n(i,l){var r=Array.isArray(i),d=g.isArrayOrTypedArray(l),f=Math.min(r?i.length:1/0,d?l.length:1/0);if(isFinite(f)||(f=0),f&&d){for(var t,h=0;h<f;h++){var s=l[h];if(m(s)&&s>0){t=!0;break}}t||(f=0)}return{hasLabels:r,hasValues:d,len:f}}$.exports={handleLabelsAndValues:n,supplyDefaults:function(i,l,r,d){function f(u,_){return g.coerce(i,l,k,u,_)}var t=n(f("labels"),f("values")),h=t.len;if(l._hasLabels=t.hasLabels,l._hasValues=t.hasValues,!l._hasLabels&&l._hasValues&&(f("label0"),f("dlabel")),h){l._length=h,f("marker.line.width")&&f("marker.line.color"),f("marker.colors"),f("scalegroup");var s,o=f("text"),p=f("texttemplate");if(p||(s=f("textinfo",Array.isArray(o)?"text+percent":"percent")),f("hovertext"),f("hovertemplate"),p||s&&"none"!==s){var c=f("textposition");e(i,l,d,f,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(c)||"auto"===c||"outside"===c)&&f("automargin"),("inside"===c||"auto"===c||Array.isArray(c))&&f("insidetextorientation")}x(l,d,f);var a=f("hole");if(f("title.text")){var y=f("title.position",a?"middle center":"top center");a||"middle center"!==y||(l.title.position="top center"),g.coerceFont(f,"title.font",d.font)}f("sort"),f("direction"),f("rotation"),f("pull")}else l.visible=!1}}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":910,"fast-isnumeric":190}],914:[function(v,$,Q){"use strict";var m=v("../../components/fx/helpers").appendArrayMultiPointValues;$.exports=function(g,k){var x={curveNumber:k.index,pointNumbers:g.pts,data:k._input,fullData:k,label:g.label,color:g.color,value:g.v,percent:g.percent,text:g.text,bbox:g.bbox,v:g.v};return 1===g.pts.length&&(x.pointNumber=x.i=g.pts[0]),m(x,k,g.pts),"funnelarea"===k.type&&(delete x.v,delete x.i),x}},{"../../components/fx/helpers":403}],915:[function(v,$,Q){"use strict";var m=v("../../lib");function g(k){return-1!==k.indexOf("e")?k.replace(/[.]?0+e/,"e"):-1!==k.indexOf(".")?k.replace(/[.]?0+$/,""):k}Q.formatPiePercent=function(k,x){var e=g((100*k).toPrecision(3));return m.numSeparate(e,x)+"%"},Q.formatPieValue=function(k,x){var e=g(k.toPrecision(10));return m.numSeparate(e,x)},Q.getFirstFilled=function(k,x){if(Array.isArray(k))for(var e=0;e<x.length;e++){var n=k[x[e]];if(n||0===n||""===n)return n}},Q.castOption=function(k,x){return Array.isArray(k)?Q.getFirstFilled(k,x):k||void 0},Q.getRotationAngle=function(k){return("auto"===k?0:k)*Math.PI/180}},{"../../lib":515}],916:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,supplyLayoutDefaults:v("./layout_defaults"),layoutAttributes:v("./layout_attributes"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot").plot,style:v("./style"),styleOne:v("./style_one"),moduleType:"trace",name:"pie",basePlotModule:v("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":910,"./base_plot":911,"./calc":912,"./defaults":913,"./layout_attributes":917,"./layout_defaults":918,"./plot":919,"./style":920,"./style_one":921}],917:[function(v,$,Q){"use strict";$.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],918:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./layout_attributes");$.exports=function(k,x){function e(n,i){return m.coerce(k,x,g,n,i)}e("hiddenlabels"),e("piecolorway",x.colorway),e("extendpiecolors")}},{"../../lib":515,"./layout_attributes":917}],919:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../plots/plots"),k=v("../../components/fx"),x=v("../../components/color"),e=v("../../components/drawing"),n=v("../../lib"),i=n.strScale,l=n.strTranslate,r=v("../../lib/svg_text_utils"),d=v("../bar/uniform_text"),f=d.recordMinTextSize,t=d.clearMinTextSize,h=v("../bar/constants").TEXTPAD,s=v("./helpers"),o=v("./event_data"),p=v("../../lib").isValidTextValue;function c(Y,X,Z){var W=Z[0],re=W.cx,U=W.cy,B=W.trace,V="funnelarea"===B.type;"_hasHoverLabel"in B||(B._hasHoverLabel=!1),"_hasHoverEvent"in B||(B._hasHoverEvent=!1),Y.on("mouseover",function(ee){var N=X._fullLayout,K=X._fullData[B.index];if(!X._dragging&&!1!==N.hovermode){var J=K.hoverinfo;if(Array.isArray(J)&&(J=k.castHoverinfo({hoverinfo:[s.castOption(J,ee.pts)],_module:B._module},N,0)),"all"===J&&(J="label+text+value+percent+name"),K.hovertemplate||"none"!==J&&"skip"!==J&&J){var te=ee.rInscribed||0,ae=re+ee.pxmid[0]*(1-te),le=U+ee.pxmid[1]*(1-te),se=N.separators,ve=[];if(J&&-1!==J.indexOf("label")&&ve.push(ee.label),ee.text=s.castOption(K.hovertext||K.text,ee.pts),J&&-1!==J.indexOf("text")){var ue=ee.text;n.isValidTextValue(ue)&&ve.push(ue)}ee.value=ee.v,ee.valueLabel=s.formatPieValue(ee.v,se),J&&-1!==J.indexOf("value")&&ve.push(ee.valueLabel),ee.percent=ee.v/W.vTotal,ee.percentLabel=s.formatPiePercent(ee.percent,se),J&&-1!==J.indexOf("percent")&&ve.push(ee.percentLabel);var ye=K.hoverlabel,Me=ye.font,pe=[];k.loneHover({trace:B,x0:ae-te*W.r,x1:ae+te*W.r,y:le,_x0:V?re+ee.TL[0]:ae-te*W.r,_x1:V?re+ee.TR[0]:ae+te*W.r,_y0:V?U+ee.TL[1]:le-te*W.r,_y1:V?U+ee.BL[1]:le+te*W.r,text:ve.join("<br>"),name:K.hovertemplate||-1!==J.indexOf("name")?K.name:void 0,idealAlign:ee.pxmid[0]<0?"left":"right",color:s.castOption(ye.bgcolor,ee.pts)||ee.color,borderColor:s.castOption(ye.bordercolor,ee.pts),fontFamily:s.castOption(Me.family,ee.pts),fontSize:s.castOption(Me.size,ee.pts),fontColor:s.castOption(Me.color,ee.pts),nameLength:s.castOption(ye.namelength,ee.pts),textAlign:s.castOption(ye.align,ee.pts),hovertemplate:s.castOption(K.hovertemplate,ee.pts),hovertemplateLabels:ee,eventData:[o(ee,K)]},{container:N._hoverlayer.node(),outerContainer:N._paper.node(),gd:X,inOut_bbox:pe}),ee.bbox=pe[0],B._hasHoverLabel=!0}B._hasHoverEvent=!0,X.emit("plotly_hover",{points:[o(ee,K)],event:m.event})}}),Y.on("mouseout",function(ee){var N=X._fullLayout,K=X._fullData[B.index],J=m.select(this).datum();B._hasHoverEvent&&(ee.originalEvent=m.event,X.emit("plotly_unhover",{points:[o(J,K)],event:m.event}),B._hasHoverEvent=!1),B._hasHoverLabel&&(k.loneUnhover(N._hoverlayer.node()),B._hasHoverLabel=!1)}),Y.on("click",function(ee){X._dragging||!1===X._fullLayout.hovermode||(X._hoverdata=[o(ee,X._fullData[B.index])],k.click(X,m.event))})}function a(Y,X,Z){var W=s.castOption(Y.insidetextfont.color,X.pts);!W&&Y._input.textfont&&(W=s.castOption(Y._input.textfont.color,X.pts));var re=s.castOption(Y.insidetextfont.family,X.pts)||s.castOption(Y.textfont.family,X.pts)||Z.family,U=s.castOption(Y.insidetextfont.size,X.pts)||s.castOption(Y.textfont.size,X.pts)||Z.size;return{color:W||x.contrast(X.color),family:re,size:U}}function y(Y,X){for(var Z,W,re=0;re<Y.length;re++)if((W=(Z=Y[re][0]).trace).title.text){var U=W.title.text;W._meta&&(U=n.templateString(U,W._meta));var B=e.tester.append("text").attr("data-notex",1).text(U).call(e.font,W.title.font).call(r.convertToTspans,X),V=e.bBox(B.node(),!0);Z.titleBox={width:V.width,height:V.height},B.remove()}}function u(Y,X,Z){var W=Z.r||X.rpx1,re=X.rInscribed;if(X.startangle===X.stopangle)return{rCenter:1-re,scale:0,rotate:0,textPosAngle:0};var U,B=X.ring,V=1===B&&Math.abs(X.startangle-X.stopangle)===2*Math.PI,ee=X.halfangle,N=X.midangle,K=Z.trace.insidetextorientation,J="horizontal"===K,te="tangential"===K,ae="radial"===K,le="auto"===K,se=[];if(!le){var ve,ue=function(oe,de){if(Xe=(De=X).stopangle,(Oe=De.startangle)>(Ie=oe)&&Ie>Xe||Oe<Ie&&Ie<Xe){var Te=Math.abs(oe-X.startangle),Ee=Math.abs(oe-X.stopangle),Ae=Te<Ee?Te:Ee;(U="tan"===de?b(Y,W,B,Ae,0):_(Y,W,B,Ae,Math.PI/2)).textPosAngle=oe,se.push(U)}var De,Ie,Oe,Xe};if(J||te){for(ve=4;ve>=-4;ve-=2)ue(Math.PI*ve,"tan");for(ve=4;ve>=-4;ve-=2)ue(Math.PI*(ve+1),"tan")}if(J||ae){for(ve=4;ve>=-4;ve-=2)ue(Math.PI*(ve+1.5),"rad");for(ve=4;ve>=-4;ve-=2)ue(Math.PI*(ve+.5),"rad")}}if(V||le||J){var ye=Math.sqrt(Y.width*Y.width+Y.height*Y.height);if((U={scale:re*W*2/ye,rCenter:1-re,rotate:0}).textPosAngle=(X.startangle+X.stopangle)/2,U.scale>=1)return U;se.push(U)}(le||ae)&&((U=_(Y,W,B,ee,N)).textPosAngle=(X.startangle+X.stopangle)/2,se.push(U)),(le||te)&&((U=b(Y,W,B,ee,N)).textPosAngle=(X.startangle+X.stopangle)/2,se.push(U));for(var Me=0,pe=0,ge=0;ge<se.length;ge++){var we=se[ge].scale;if(pe<we&&(pe=we,Me=ge),!le&&pe>=1)break}return se[Me]}function _(Y,X,Z,W,re){X=Math.max(0,X-2*h);var U=Y.width/Y.height,B=C(U,W,X,Z);return{scale:2*B/Y.height,rCenter:w(U,B/X),rotate:T(re)}}function b(Y,X,Z,W,re){X=Math.max(0,X-2*h);var U=Y.height/Y.width,B=C(U,W,X,Z);return{scale:2*B/Y.width,rCenter:w(U,B/X),rotate:T(re+Math.PI/2)}}function w(Y,X){return Math.cos(X)-Y*X}function T(Y){return(180/Math.PI*Y+720)%180-90}function C(Y,X,Z,W){var re=Y+1/(2*Math.tan(X));return Z*Math.min(1/(Math.sqrt(re*re+.5)+re),W/(Math.sqrt(Y*Y+W/2)+Y))}function M(Y,X){return Y.v!==X.vTotal||X.trace.hole?Math.min(1/(1+1/Math.sin(Y.halfangle)),Y.ring/2):1}function I(Y,X){var Z=X.pxmid[0],W=X.pxmid[1],re=Y.width/2,U=Y.height/2;return Z<0&&(re*=-1),W<0&&(U*=-1),{scale:1,rCenter:1,rotate:0,x:re+Math.abs(U)*(re>0?1:-1)/2,y:U/(1+Z*Z/(W*W)),outside:!0}}function P(Y,X){var Z,W,re,U=Y.trace,B={x:Y.cx,y:Y.cy},V={tx:0,ty:0};V.ty+=U.title.font.size,re=E(U),-1!==U.title.position.indexOf("top")?(B.y-=(1+re)*Y.r,V.ty-=Y.titleBox.height):-1!==U.title.position.indexOf("bottom")&&(B.y+=(1+re)*Y.r);var N,K=Y.r/(void 0===(N=Y.trace.aspectratio)?1:N),J=X.w*(U.domain.x[1]-U.domain.x[0])/2;return-1!==U.title.position.indexOf("left")?(J+=K,B.x-=(1+re)*K,V.tx+=Y.titleBox.width/2):-1!==U.title.position.indexOf("center")?J*=2:-1!==U.title.position.indexOf("right")&&(J+=K,B.x+=(1+re)*K,V.tx-=Y.titleBox.width/2),Z=J/Y.titleBox.width,W=S(Y,X)/Y.titleBox.height,{x:B.x,y:B.y,scale:Math.min(Z,W),tx:V.tx,ty:V.ty}}function S(Y,X){var Z=Y.trace;return Math.min(Y.titleBox.height,X.h*(Z.domain.y[1]-Z.domain.y[0])/2)}function E(Y){var X,Z=Y.pull;if(!Z)return 0;if(Array.isArray(Z))for(Z=0,X=0;X<Y.pull.length;X++)Y.pull[X]>Z&&(Z=Y.pull[X]);return Z}function R(Y,X){for(var Z=[],W=0;W<Y.length;W++){var re=Y[W][0],U=re.trace,B=U.domain,V=X.w*(B.x[1]-B.x[0]),ee=X.h*(B.y[1]-B.y[0]);U.title.text&&"middle center"!==U.title.position&&(ee-=S(re,X));var K=ee/2;"funnelarea"!==U.type||U.scalegroup||(K/=U.aspectratio),re.r=Math.min(V/2,K)/(1+E(U)),re.cx=X.l+X.w*(U.domain.x[1]+U.domain.x[0])/2,re.cy=X.t+X.h*(1-U.domain.y[0])-ee/2,U.title.text&&-1!==U.title.position.indexOf("bottom")&&(re.cy-=S(re,X)),U.scalegroup&&-1===Z.indexOf(U.scalegroup)&&Z.push(U.scalegroup)}!function(J,te){for(var ae,le,se,ve=0;ve<te.length;ve++){var ue=1/0,ye=te[ve];for(le=0;le<J.length;le++)if((se=(ae=J[le][0]).trace).scalegroup===ye){var Me;if("pie"===se.type)Me=ae.r*ae.r;else if("funnelarea"===se.type){var pe,ge;se.aspectratio>1?ge=(pe=ae.r)/se.aspectratio:pe=(ge=ae.r)*se.aspectratio,Me=(pe*=(1+se.baseratio)/2)*ge}ue=Math.min(ue,Me/ae.vTotal)}for(le=0;le<J.length;le++)if((se=(ae=J[le][0]).trace).scalegroup===ye){var we=ue*ae.vTotal;"funnelarea"===se.type&&(we/=(1+se.baseratio)/2,we/=se.aspectratio),ae.r=Math.sqrt(we)}}}(Y,Z)}function D(Y,X){return[Y*Math.sin(X),-Y*Math.cos(X)]}function j(Y,X,Z){var Me,W=Y._fullLayout,re=Z.trace,U=re.texttemplate,B=re.textinfo;if(!U&&B&&"none"!==B){var V,ee=B.split("+"),N=function(Me){return-1!==ee.indexOf(Me)},K=N("label"),J=N("text"),te=N("value"),ae=N("percent"),le=W.separators;if(V=K?[X.label]:[],J){var se=s.getFirstFilled(re.text,X.pts);p(se)&&V.push(se)}te&&V.push(s.formatPieValue(X.v,le)),ae&&V.push(s.formatPiePercent(X.v/Z.vTotal,le)),X.text=V.join("<br>")}if(U){var ve=n.castOption(re,X.i,"texttemplate");if(ve){var ue={label:(Me=X).label,value:Me.v,valueLabel:s.formatPieValue(Me.v,W.separators),percent:Me.v/Z.vTotal,percentLabel:s.formatPiePercent(Me.v/Z.vTotal,W.separators),color:Me.color,text:Me.text,customdata:n.castOption(re,Me.i,"customdata")},ye=s.getFirstFilled(re.text,X.pts);(p(ye)||""===ye)&&(ue.text=ye),X.text=n.texttemplateString(ve,ue,Y._fullLayout._d3locale,ue,re._meta||{})}else X.text=""}}function H(Y,X){var Z=Y.rotate*Math.PI/180,W=Math.cos(Z),re=Math.sin(Z),U=(X.left+X.right)/2,B=(X.top+X.bottom)/2;Y.textX=U*W-B*re,Y.textY=U*re+B*W,Y.noCenter=!0}$.exports={plot:function(Y,X){var Z=Y._context.staticPlot,W=Y._fullLayout,re=W._size;t("pie",W),y(X,Y),R(X,re);var U=n.makeTraceGroups(W._pielayer,X,"trace").each(function(B){var V=m.select(this),ee=B[0],N=ee.trace;(function(K){var J,te,ae,le=K[0],se=le.r,ve=le.trace,ue=s.getRotationAngle(ve.rotation),ye=2*Math.PI/le.vTotal,Me="px0",pe="px1";if("counterclockwise"===ve.direction){for(J=0;J<K.length&&K[J].hidden;J++);if(J===K.length)return;ue+=ye*K[J].v,ye*=-1,Me="px1",pe="px0"}for(ae=D(se,ue),J=0;J<K.length;J++)(te=K[J]).hidden||(te[Me]=ae,te.startangle=ue,te.pxmid=D(se,ue+=ye*te.v/2),te.midangle=ue,ae=D(se,ue+=ye*te.v/2),te.stopangle=ue,te[pe]=ae,te.largeArc=te.v>le.vTotal/2?1:0,te.halfangle=Math.PI*Math.min(te.v/le.vTotal,.5),te.ring=1-ve.hole,te.rInscribed=M(te,le))})(B),V.attr("stroke-linejoin","round"),V.each(function(){var K=m.select(this).selectAll("g.slice").data(B);K.enter().append("g").classed("slice",!0),K.exit().remove();var J=[[[],[]],[[],[]]],te=!1;K.each(function(pe,ge){if(pe.hidden)m.select(this).selectAll("path,g").remove();else{pe.pointNumber=pe.i,pe.curveNumber=N.index,J[pe.pxmid[1]<0?0:1][pe.pxmid[0]<0?0:1].push(pe);var we=ee.cx,oe=ee.cy,de=m.select(this),Te=de.selectAll("path.surface").data([pe]);if(Te.enter().append("path").classed("surface",!0).style({"pointer-events":Z?"none":"all"}),de.call(c,Y,B),N.pull){var Ee=+s.castOption(N.pull,pe.pts)||0;Ee>0&&(we+=Ee*pe.pxmid[0],oe+=Ee*pe.pxmid[1])}pe.cxFinal=we,pe.cyFinal=oe;var Ae=N.hole;if(pe.v===ee.vTotal){var De="M"+(we+pe.px0[0])+","+(oe+pe.px0[1])+Pe(pe.px0,pe.pxmid,!0,1)+Pe(pe.pxmid,pe.px0,!0,1)+"Z";Te.attr("d",Ae?"M"+(we+Ae*pe.px0[0])+","+(oe+Ae*pe.px0[1])+Pe(pe.px0,pe.pxmid,!1,Ae)+Pe(pe.pxmid,pe.px0,!1,Ae)+"Z"+De:De)}else{var Ie=Pe(pe.px0,pe.px1,!0,1);if(Ae){var Oe=1-Ae;Te.attr("d","M"+(we+Ae*pe.px1[0])+","+(oe+Ae*pe.px1[1])+Pe(pe.px1,pe.px0,!1,Ae)+"l"+Oe*pe.px0[0]+","+Oe*pe.px0[1]+Ie+"Z")}else Te.attr("d","M"+we+","+oe+"l"+pe.px0[0]+","+pe.px0[1]+Ie+"Z")}j(Y,pe,ee);var Xe=s.castOption(N.textposition,pe.pts),Fe=de.selectAll("g.slicetext").data(pe.text&&"none"!==Xe?[0]:[]);Fe.enter().append("g").classed("slicetext",!0),Fe.exit().remove(),Fe.each(function(){var Ke,xt,Ht,Re=n.ensureSingle(m.select(this),"text","",function(Ke){Ke.attr("data-notex",1)}),qe=n.ensureUniformFontSize(Y,"outside"===Xe?(Ht=W.font,{color:s.castOption((Ke=N).outsidetextfont.color,(xt=pe).pts)||s.castOption(Ke.textfont.color,xt.pts)||Ht.color,family:s.castOption(Ke.outsidetextfont.family,xt.pts)||s.castOption(Ke.textfont.family,xt.pts)||Ht.family,size:s.castOption(Ke.outsidetextfont.size,xt.pts)||s.castOption(Ke.textfont.size,xt.pts)||Ht.size}):a(N,pe,W.font));Re.text(pe.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,qe).call(r.convertToTspans,Y);var Qe,ct=e.bBox(Re.node());if("outside"===Xe)Qe=I(ct,pe);else if(Qe=u(ct,pe,ee),"auto"===Xe&&Qe.scale<1){var bt=n.ensureUniformFontSize(Y,N.outsidetextfont);Re.call(e.font,bt),Qe=I(ct=e.bBox(Re.node()),pe)}var Tt=Qe.textPosAngle,_t=void 0===Tt?pe.pxmid:D(ee.r,Tt);if(Qe.targetX=we+_t[0]*Qe.rCenter+(Qe.x||0),Qe.targetY=oe+_t[1]*Qe.rCenter+(Qe.y||0),H(Qe,ct),Qe.outside){var nt=Qe.targetY;pe.yLabelMin=nt-ct.height/2,pe.yLabelMid=nt,pe.yLabelMax=nt+ct.height/2,pe.labelExtraX=0,pe.labelExtraY=0,te=!0}Qe.fontSize=qe.size,f(N.type,Qe,W),B[ge].transform=Qe,n.setTransormAndDisplay(Re,Qe)})}function Pe(Re,qe,Qe,ct){return"a"+ct*ee.r+","+ct*ee.r+" 0 "+pe.largeArc+(Qe?" 1 ":" 0 ")+ct*(qe[0]-Re[0])+","+ct*(qe[1]-Re[1])}});var ge,ae=m.select(this).selectAll("g.titletext").data(N.title.text?[0]:[]);if(ae.enter().append("g").classed("titletext",!0),ae.exit().remove(),ae.each(function(){var pe,oe,de,ge=n.ensureSingle(m.select(this),"text","",function(oe){oe.attr("data-notex",1)}),we=N.title.text;N._meta&&(we=n.templateString(we,N._meta)),ge.text(we).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,N.title.font).call(r.convertToTspans,Y),pe="middle center"===N.title.position?(oe=ee,de=Math.sqrt(oe.titleBox.width*oe.titleBox.width+oe.titleBox.height*oe.titleBox.height),{x:oe.cx,y:oe.cy,scale:oe.trace.hole*oe.r*2/de,tx:0,ty:-oe.titleBox.height/2+oe.trace.title.font.size}):P(ee,re),ge.attr("transform",l(pe.x,pe.y)+i(Math.min(1,pe.scale))+l(pe.tx,pe.ty))}),te&&function(pe,ge){var we,oe,de,Te,Ee,Ae,De,Ie,Oe,Xe,Fe,Pe,Re;function qe(Tt,_t){return Tt.pxmid[1]-_t.pxmid[1]}function Qe(Tt,_t){return _t.pxmid[1]-Tt.pxmid[1]}function ct(Tt,_t){_t||(_t={});var nt,Ke,xt,Ht,Zt=_t.labelExtraY+(oe?_t.yLabelMax:_t.yLabelMin),$t=oe?Tt.yLabelMin:Tt.yLabelMax,Xt=oe?Tt.yLabelMax:Tt.yLabelMin,cr=Tt.cyFinal+Ee(Tt.px0[1],Tt.px1[1]),Ft=Zt-$t;if(Ft*De>0&&(Tt.labelExtraY=Ft),Array.isArray(ge.pull))for(Ke=0;Ke<Xe.length;Ke++)(xt=Xe[Ke])===Tt||(s.castOption(ge.pull,Tt.pts)||0)>=(s.castOption(ge.pull,xt.pts)||0)||((Tt.pxmid[1]-xt.pxmid[1])*De>0?(Ft=xt.cyFinal+Ee(xt.px0[1],xt.px1[1])-$t-Tt.labelExtraY)*De>0&&(Tt.labelExtraY+=Ft):(Xt+Tt.labelExtraY-cr)*De>0&&(nt=3*Ae*Math.abs(Ke-Xe.indexOf(Tt)),(Ht=xt.cxFinal+Te(xt.px0[0],xt.px1[0])+nt-(Tt.cxFinal+Tt.pxmid[0])-Tt.labelExtraX)*Ae>0&&(Tt.labelExtraX+=Ht)))}for(oe=0;oe<2;oe++)for(de=oe?qe:Qe,Ee=oe?Math.max:Math.min,De=oe?1:-1,we=0;we<2;we++){for(Te=we?Math.max:Math.min,Ae=we?1:-1,(Ie=pe[oe][we]).sort(de),Xe=(Oe=pe[1-oe][we]).concat(Ie),Pe=[],Fe=0;Fe<Ie.length;Fe++)void 0!==Ie[Fe].yLabelMid&&Pe.push(Ie[Fe]);for(Re=!1,Fe=0;oe&&Fe<Oe.length;Fe++)if(void 0!==Oe[Fe].yLabelMid){Re=Oe[Fe];break}for(Fe=0;Fe<Pe.length;Fe++){var bt=Fe&&Pe[Fe-1];Re&&!Fe&&(bt=Re),ct(Pe[Fe],bt)}}}(J,N),ge=N,K.each(function(we){var oe=m.select(this);if(we.labelExtraX||we.labelExtraY){var de=oe.select("g.slicetext text");we.transform.targetX+=we.labelExtraX,we.transform.targetY+=we.labelExtraY,n.setTransormAndDisplay(de,we.transform);var Te=we.cxFinal+we.pxmid[0],Ee="M"+Te+","+(we.cyFinal+we.pxmid[1]),Ae=(we.yLabelMax-we.yLabelMin)*(we.pxmid[0]<0?-1:1)/4;if(we.labelExtraX){var De=we.labelExtraX*we.pxmid[1]/we.pxmid[0],Ie=we.yLabelMid+we.labelExtraY-(we.cyFinal+we.pxmid[1]);Math.abs(De)>Math.abs(Ie)?Ee+="l"+Ie*we.pxmid[0]/we.pxmid[1]+","+Ie+"H"+(Te+we.labelExtraX+Ae):Ee+="l"+we.labelExtraX+","+De+"v"+(Ie-De)+"h"+Ae}else Ee+="V"+(we.yLabelMid+we.labelExtraY)+"h"+Ae;n.ensureSingle(oe,"path","textline").call(x.stroke,ge.outsidetextfont.color).attr({"stroke-width":Math.min(2,ge.outsidetextfont.size/8),d:Ee,fill:"none"})}else oe.select("path.textline").remove()}),te&&N.automargin){var le=e.bBox(V.node()),se=N.domain,ye=(re.w*(se.x[1]-se.x[0])*.5-ee.r)/re.w,Me=(re.h*(se.y[1]-se.y[0])*.5-ee.r)/re.h;g.autoMargin(Y,"pie."+N.uid+".automargin",{xl:se.x[0]-ye,xr:se.x[1]+ye,yb:se.y[0]-Me,yt:se.y[1]+Me,l:Math.max(ee.cx-ee.r-le.left,0),r:Math.max(le.right-(ee.cx+ee.r),0),b:Math.max(le.bottom-(ee.cy+ee.r),0),t:Math.max(ee.cy-ee.r-le.top,0),pad:5})}})});setTimeout(function(){U.selectAll("tspan").each(function(){var B=m.select(this);B.attr("dy")&&B.attr("dy",B.attr("dy"))})},0)},formatSliceLabel:j,transformInsideText:u,determineInsideTextFont:a,positionTitleOutside:P,prerenderTitles:y,layoutAreas:R,attachFxHandlers:c,computeTransform:H}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../bar/constants":659,"../bar/uniform_text":673,"./event_data":914,"./helpers":915,"@plotly/d3":58}],920:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("./style_one"),k=v("../bar/uniform_text").resizeText;$.exports=function(x){var e=x._fullLayout._pielayer.selectAll(".trace");k(x,e,"pie"),e.each(function(n){var i=n[0].trace,l=m.select(this);l.style({opacity:i.opacity}),l.selectAll("path.surface").each(function(r){m.select(this).call(g,r,i)})})}},{"../bar/uniform_text":673,"./style_one":921,"@plotly/d3":58}],921:[function(v,$,Q){"use strict";var m=v("../../components/color"),g=v("./helpers").castOption;$.exports=function(k,x,e){var n=e.marker.line,i=g(n.color,x.pts)||m.defaultLine,l=g(n.width,x.pts)||0;k.style("stroke-width",l).call(m.fill,x.color).call(m.stroke,i)}},{"../../components/color":367,"./helpers":915}],922:[function(v,$,Q){"use strict";var m=v("../scatter/attributes");$.exports={x:m.x,y:m.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:m.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":936}],923:[function(v,$,Q){"use strict";var m=v("../../../stackgl_modules").gl_pointcloud2d,g=v("../../lib/str2rgbarray"),k=v("../../plots/cartesian/autorange").findExtremes,x=v("../scatter/get_trace_color");function e(i,l){this.scene=i,this.uid=l,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=m(i.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var n=e.prototype;n.handlePick=function(i){var l=this.idToIndex[i.pointId];return{trace:this,dataCoord:i.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*l],this.pickXYData[2*l+1]]:[this.pickXData[l],this.pickYData[l]],textLabel:Array.isArray(this.textLabels)?this.textLabels[l]:this.textLabels,color:this.color,name:this.name,pointIndex:l,hoverinfo:this.hoverinfo}},n.update=function(i){this.index=i.index,this.textLabels=i.text,this.name=i.name,this.hoverinfo=i.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(i),this.color=x(i,{})},n.updateFast=function(i){var l,r,d,f,t,h,s=this.xData=this.pickXData=i.x,o=this.yData=this.pickYData=i.y,p=this.pickXYData=i.xy,a=i.indices,y=this.bounds;if(p){if(d=p,l=p.length>>>1,i.xbounds&&i.ybounds)y[0]=i.xbounds[0],y[2]=i.xbounds[1],y[1]=i.ybounds[0],y[3]=i.ybounds[1];else for(h=0;h<l;h++)t=d[2*h+1],(f=d[2*h])<y[0]&&(y[0]=f),f>y[2]&&(y[2]=f),t<y[1]&&(y[1]=t),t>y[3]&&(y[3]=t);if(a)r=a;else for(r=new Int32Array(l),h=0;h<l;h++)r[h]=h}else for(l=s.length,d=new Float32Array(2*l),r=new Int32Array(l),h=0;h<l;h++)f=s[h],t=o[h],r[h]=h,d[2*h]=f,d[2*h+1]=t,f<y[0]&&(y[0]=f),f>y[2]&&(y[2]=f),t<y[1]&&(y[1]=t),t>y[3]&&(y[3]=t);this.idToIndex=r,this.pointcloudOptions.idToIndex=r,this.pointcloudOptions.positions=d;var u=g(i.marker.color),_=g(i.marker.border.color),b=i.opacity*i.marker.opacity;u[3]*=b,this.pointcloudOptions.color=u;var w=i.marker.blend;null===w&&(w=s.length<100||o.length<100),this.pointcloudOptions.blend=w,_[3]*=b,this.pointcloudOptions.borderColor=_;var T=i.marker.sizemin,C=Math.max(i.marker.sizemax,i.marker.sizemin);this.pointcloudOptions.sizeMin=T,this.pointcloudOptions.sizeMax=C,this.pointcloudOptions.areaRatio=i.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var M=this.scene.xaxis,I=this.scene.yaxis,P=C/2||.5;i._extremes[M._id]=k(M,[y[0],y[2]],{ppad:P}),i._extremes[I._id]=k(I,[y[1],y[3]],{ppad:P})},n.dispose=function(){this.pointcloud.dispose()},$.exports=function(i,l){var r=new e(i,l.uid);return r.update(l),r}},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/autorange":565,"../scatter/get_trace_color":946}],924:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./attributes");$.exports=function(k,x,e){function n(i,l){return m.coerce(k,x,g,i,l)}n("x"),n("y"),n("xbounds"),n("ybounds"),k.xy&&k.xy instanceof Float32Array&&(x.xy=k.xy),k.indices&&k.indices instanceof Int32Array&&(x.indices=k.indices),n("text"),n("marker.color",e),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",e),n("marker.border.arearatio"),x._length=null}},{"../../lib":515,"./attributes":922}],925:[function(v,$,Q){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("../scatter3d/calc"),plot:v("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:v("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":605,"../scatter3d/calc":965,"./attributes":922,"./convert":923,"./defaults":924}],926:[function(v,$,Q){"use strict";var m=v("../../plots/font_attributes"),g=v("../../plots/attributes"),k=v("../../components/color/attributes"),x=v("../../components/fx/attributes"),e=v("../../plots/domain").attributes,n=v("../../plots/template_attributes").hovertemplateAttrs,i=v("../../components/colorscale/attributes"),l=v("../../plot_api/plot_template").templatedArray,r=v("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,d=v("../../lib/extend").extendFlat,f=v("../../plot_api/edit_types").overrideAll;($.exports=f({hoverinfo:d({},g.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:x.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:m({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:k.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:x.hoverlabel,hovertemplate:n({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:k.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:x.hoverlabel,hovertemplate:n({},{keys:["value","label"]}),colorscales:l("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:d(i().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../components/fx/attributes":398,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],927:[function(v,$,Q){"use strict";var m=v("../../plot_api/edit_types").overrideAll,g=v("../../plots/get_data").getModuleCalcData,k=v("./plot"),x=v("../../components/fx/layout_attributes"),e=v("../../lib/setcursor"),n=v("../../components/dragelement"),i=v("../../components/selections").prepSelect,l=v("../../lib"),r=v("../../registry");function d(f,t){var h=f._fullData[t],s=f._fullLayout,o=s.dragmode,c=h._bgRect;if(c&&"pan"!==o&&"zoom"!==o){e(c,"pan"===s.dragmode?"move":"crosshair");var a={_id:"x",c2p:l.identity,_offset:h._sankey.translateX,_length:h._sankey.width},y={_id:"y",c2p:l.identity,_offset:h._sankey.translateY,_length:h._sankey.height},u={gd:f,element:c.node(),plotinfo:{id:t,xaxis:a,yaxis:y,fillRangeItems:l.noop},subplot:t,xaxes:[a],yaxes:[y],doneFnCompleted:function(_){var b,w=f._fullData[t],T=w.node.groups.slice(),C=[];function M(E){for(var R=w._sankey.graph.nodes,D=0;D<R.length;D++)if(R[D].pointNumber===E)return R[D]}for(var I=0;I<_.length;I++){var P=M(_[I].pointNumber);if(P)if(P.group){for(var S=0;S<P.childrenNodes.length;S++)C.push(P.childrenNodes[S].pointNumber);T[P.pointNumber-w.node._count]=!1}else C.push(P.pointNumber)}b=T.filter(Boolean).concat([C]),r.call("_guiRestyle",f,{"node.groups":[b]},t)},prepFn:function(_,b,w){i(_,b,w,u,o)}};n.init(u)}}Q.name="sankey",Q.baseLayoutAttrOverrides=m({hoverlabel:x.hoverlabel},"plot","nested"),Q.plot=function(f){var t=g(f.calcdata,"sankey")[0];k(f,t),Q.updateFx(f)},Q.clean=function(f,t,h,s){var o=s._has&&s._has("sankey"),p=t._has&&t._has("sankey");o&&!p&&(s._paperdiv.selectAll(".sankey").remove(),s._paperdiv.selectAll(".bgsankey").remove())},Q.updateFx=function(f){for(var t=0;t<f._fullData.length;t++)d(f,t)}},{"../../components/dragelement":386,"../../components/fx/layout_attributes":408,"../../components/selections":455,"../../lib":515,"../../lib/setcursor":536,"../../plot_api/edit_types":548,"../../plots/get_data":602,"../../registry":647,"./plot":932}],928:[function(v,$,Q){"use strict";var m=v("strongly-connected-components"),g=v("../../lib"),k=v("../../lib/gup").wrap,x=g.isArrayOrTypedArray,e=g.isIndex,n=v("../../components/colorscale");$.exports=function(l,r){var d=function i(l){var r,d=l.node,f=l.link,t=[],h=x(f.color),s=x(f.customdata),o={},p={},c=f.colorscales.length;for(r=0;r<c;r++){var a=f.colorscales[r],y=n.extractScale(a,{cLetter:"c"}),u=n.makeColorScaleFunc(y);p[a.label]=u}var _=0;for(r=0;r<f.value.length;r++)f.source[r]>_&&(_=f.source[r]),f.target[r]>_&&(_=f.target[r]);var b,w=_+1;l.node._count=w;var T=l.node.groups,C={};for(r=0;r<T.length;r++){var M=T[r];for(b=0;b<M.length;b++){var I=M[b],P=w+r;C.hasOwnProperty(I)?g.warn("Node "+I+" is already part of a group."):C[I]=P}}var S={source:[],target:[]};for(r=0;r<f.value.length;r++){var E=f.value[r],R=f.source[r],D=f.target[r];if(E>0&&e(R,w)&&e(D,w)&&(!C.hasOwnProperty(R)||!C.hasOwnProperty(D)||C[R]!==C[D])){C.hasOwnProperty(D)&&(D=C[D]),C.hasOwnProperty(R)&&(R=C[R]),o[R=+R]=o[D=+D]=!0;var j="";f.label&&f.label[r]&&(j=f.label[r]);var H=null;j&&p.hasOwnProperty(j)&&(H=p[j]),t.push({pointNumber:r,label:j,color:h?f.color[r]:f.color,customdata:s?f.customdata[r]:f.customdata,concentrationscale:H,source:R,target:D,value:+E}),S.source.push(R),S.target.push(D)}}var Y=w+T.length,X=x(d.color),Z=x(d.customdata),W=[];for(r=0;r<Y;r++)o[r]&&W.push({group:r>w-1,childrenNodes:[],pointNumber:r,label:d.label[r],color:X?d.color[r]:d.color,customdata:Z?d.customdata[r]:d.customdata});var U=!1;return function(B,V,ee){for(var N=g.init2dArray(B,0),K=0;K<Math.min(V.length,ee.length);K++)if(g.isIndex(V[K],B)&&g.isIndex(ee[K],B)){if(V[K]===ee[K])return!0;N[V[K]].push(ee[K])}return m(N).components.some(function(J){return J.length>1})}(Y,S.source,S.target)&&(U=!0),{circular:U,links:t,nodes:W,groups:T,groupLookup:C}}(r);return k({circular:d.circular,_nodes:d.nodes,_links:d.links,_groups:d.groups,_groupLookup:d.groupLookup})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512,"strongly-connected-components":307}],929:[function(v,$,Q){"use strict";$.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],930:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./attributes"),k=v("../../components/color"),x=v("tinycolor2"),e=v("../../plots/domain").defaults,n=v("../../components/fx/hoverlabel_defaults"),i=v("../../plot_api/plot_template"),l=v("../../plots/array_container_defaults");function r(d,f){function t(h,s){return m.coerce(d,f,g.link.colorscales,h,s)}t("label"),t("cmin"),t("cmax"),t("colorscale")}$.exports=function(d,f,t,h){function s(C,M){return m.coerce(d,f,g,C,M)}var o=m.extendDeep(h.hoverlabel,d.hoverlabel),p=d.node,c=i.newContainer(f,"node");function a(C,M){return m.coerce(p,c,g.node,C,M)}a("label"),a("groups"),a("x"),a("y"),a("pad"),a("thickness"),a("line.color"),a("line.width"),a("hoverinfo",d.hoverinfo),n(p,c,a,o),a("hovertemplate");var y=h.colorway;a("color",c.label.map(function(C,M){return k.addOpacity(y[M%y.length],.8)})),a("customdata");var u=d.link||{},_=i.newContainer(f,"link");function b(C,M){return m.coerce(u,_,g.link,C,M)}b("label"),b("arrowlen"),b("source"),b("target"),b("value"),b("line.color"),b("line.width"),b("hoverinfo",d.hoverinfo),n(u,_,b,o),b("hovertemplate");var w,T=x(h.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";b("color",m.repeat(T,_.value.length)),b("customdata"),l(u,_,{name:"colorscales",handleItemDefaults:r}),e(f,h,s),s("orientation"),s("valueformat"),s("valuesuffix"),c.x.length&&c.y.length&&(w="freeform"),s("arrangement",w),m.coerceFont(s,"textfont",m.extendFlat({},h.font)),f._length=null}},{"../../components/color":367,"../../components/fx/hoverlabel_defaults":405,"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/domain":593,"./attributes":926,tinycolor2:313}],931:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),moduleType:"trace",name:"sankey",basePlotModule:v("./base_plot"),selectPoints:v("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":926,"./base_plot":927,"./calc":928,"./defaults":930,"./plot":932,"./select.js":934}],932:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=g.numberFormat,x=v("./render"),e=v("../../components/fx"),n=v("../../components/color"),i=v("./constants").cn,l=g._;function r(u){return""!==u}function d(u,_){return u.filter(function(b){return b.key===_.traceId})}function f(u,_){m.select(u).select("path").style("fill-opacity",_),m.select(u).select("rect").style("fill-opacity",_)}function t(u){m.select(u).select("text.name").style("fill","black")}function h(u){return function(_){return-1!==u.node.sourceLinks.indexOf(_.link)||-1!==u.node.targetLinks.indexOf(_.link)}}function s(u){return function(_){return-1!==_.node.sourceLinks.indexOf(u.link)||-1!==_.node.targetLinks.indexOf(u.link)}}function o(u,_,b){_&&b&&d(b,_).selectAll("."+i.sankeyLink).filter(h(_)).call(c.bind(0,_,b,!1))}function p(u,_,b){_&&b&&d(b,_).selectAll("."+i.sankeyLink).filter(h(_)).call(a.bind(0,_,b,!1))}function c(u,_,b,w){var T=w.datum().link.label;w.style("fill-opacity",function(C){if(!C.link.concentrationscale)return.4}),T&&d(_,u).selectAll("."+i.sankeyLink).filter(function(C){return C.link.label===T}).style("fill-opacity",function(C){if(!C.link.concentrationscale)return.4}),b&&d(_,u).selectAll("."+i.sankeyNode).filter(s(u)).call(o)}function a(u,_,b,w){var T=w.datum().link.label;w.style("fill-opacity",function(C){return C.tinyColorAlpha}),T&&d(_,u).selectAll("."+i.sankeyLink).filter(function(C){return C.link.label===T}).style("fill-opacity",function(C){return C.tinyColorAlpha}),b&&d(_,u).selectAll(i.sankeyNode).filter(s(u)).call(p)}function y(u,_){var w=g.nestedProperty(u.hoverlabel||{},_).get();return!Array.isArray(w)&&w}$.exports=function(u,_){for(var b=u._fullLayout,w=b._paper,T=b._size,C=0;C<u._fullData.length;C++)if(u._fullData[C].visible&&u._fullData[C].type===i.sankey&&!u._fullData[C]._viewInitial){var M=u._fullData[C].node;u._fullData[C]._viewInitial={node:{groups:M.groups.slice(),x:M.x.slice(),y:M.y.slice()}}}var I=l(u,"source:")+" ",P=l(u,"target:")+" ",S=l(u,"concentration:")+" ",E=l(u,"incoming flow count:")+" ",R=l(u,"outgoing flow count:")+" ";x(u,w,_,{width:T.w,height:T.h,margin:{t:T.t,r:T.r,b:T.b,l:T.l}},{linkEvents:{hover:function(D,j,H){!1!==u._fullLayout.hovermode&&(m.select(D).call(c.bind(0,j,H,!0)),"skip"!==j.link.trace.link.hoverinfo&&(j.link.fullData=j.link.trace,u.emit("plotly_hover",{event:m.event,points:[j.link]})))},follow:function(D,j){if(!1!==u._fullLayout.hovermode){var H=j.link.trace.link;if("none"!==H.hoverinfo&&"skip"!==H.hoverinfo){for(var Y=[],X=0,Z=0;Z<j.flow.links.length;Z++){var W=j.flow.links[Z];if("closest"!==u._fullLayout.hovermode||j.link.pointNumber===W.pointNumber){j.link.pointNumber===W.pointNumber&&(X=Z),W.fullData=W.trace,H=j.link.trace.link;var re=B(W),U={valueLabel:k(j.valueFormat)(W.value)+j.valueSuffix};Y.push({x:re[0],y:re[1],name:U.valueLabel,text:[W.label||"",I+W.source.label,P+W.target.label,W.concentrationscale?S+k("%0.2f")(W.flow.labelConcentration):""].filter(r).join("<br>"),color:y(H,"bgcolor")||n.addOpacity(W.color,1),borderColor:y(H,"bordercolor"),fontFamily:y(H,"font.family"),fontSize:y(H,"font.size"),fontColor:y(H,"font.color"),nameLength:y(H,"namelength"),textAlign:y(H,"align"),idealAlign:m.event.x<re[0]?"right":"left",hovertemplate:H.hovertemplate,hovertemplateLabels:U,eventData:[W]})}}e.loneHover(Y,{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:u,anchorIndex:X}).each(function(){j.link.concentrationscale||f(this,.65),t(this)})}}function B(V){var ee,N;V.circular?(ee=(V.circularPathData.leftInnerExtent+V.circularPathData.rightInnerExtent)/2,N=V.circularPathData.verticalFullExtent):(ee=(V.source.x1+V.target.x0)/2,N=(V.y0+V.y1)/2);var K=[ee,N];return"v"===V.trace.orientation&&K.reverse(),K[0]+=j.parent.translateX,K[1]+=j.parent.translateY,K}},unhover:function(D,j,H){!1!==u._fullLayout.hovermode&&(m.select(D).call(a.bind(0,j,H,!0)),"skip"!==j.link.trace.link.hoverinfo&&(j.link.fullData=j.link.trace,u.emit("plotly_unhover",{event:m.event,points:[j.link]})),e.loneUnhover(b._hoverlayer.node()))},select:function(D,j){var H=j.link;H.originalEvent=m.event,u._hoverdata=[H],e.click(u,{target:!0})}},nodeEvents:{hover:function(D,j,H){!1!==u._fullLayout.hovermode&&(m.select(D).call(o,j,H),"skip"!==j.node.trace.node.hoverinfo&&(j.node.fullData=j.node.trace,u.emit("plotly_hover",{event:m.event,points:[j.node]})))},follow:function(D,j){if(!1!==u._fullLayout.hovermode){var H=j.node.trace.node;if("none"!==H.hoverinfo&&"skip"!==H.hoverinfo){var Y=m.select(D).select("."+i.nodeRect),X=u._fullLayout._paperdiv.node().getBoundingClientRect(),Z=Y.node().getBoundingClientRect(),W=Z.left-2-X.left,re=Z.right+2-X.left,U=Z.top+Z.height/4-X.top,B={valueLabel:k(j.valueFormat)(j.node.value)+j.valueSuffix};j.node.fullData=j.node.trace,u._fullLayout._calcInverseTransform(u);var V=u._fullLayout._invScaleX,N=e.loneHover({x0:V*W,x1:V*re,y:u._fullLayout._invScaleY*U,name:k(j.valueFormat)(j.node.value)+j.valueSuffix,text:[j.node.label,E+j.node.targetLinks.length,R+j.node.sourceLinks.length].filter(r).join("<br>"),color:y(H,"bgcolor")||j.tinyColorHue,borderColor:y(H,"bordercolor"),fontFamily:y(H,"font.family"),fontSize:y(H,"font.size"),fontColor:y(H,"font.color"),nameLength:y(H,"namelength"),textAlign:y(H,"align"),idealAlign:"left",hovertemplate:H.hovertemplate,hovertemplateLabels:B,eventData:[j.node]},{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:u});f(N,.85),t(N)}}},unhover:function(D,j,H){!1!==u._fullLayout.hovermode&&(m.select(D).call(p,j,H),"skip"!==j.node.trace.node.hoverinfo&&(j.node.fullData=j.node.trace,u.emit("plotly_unhover",{event:m.event,points:[j.node]})),e.loneUnhover(b._hoverlayer.node()))},select:function(D,j,H){var Y=j.node;Y.originalEvent=m.event,u._hoverdata=[Y],m.select(D).call(p,j,H),e.click(u,{target:!0})}}})}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"./constants":929,"./render":933,"@plotly/d3":58}],933:[function(v,$,Q){"use strict";var m=v("d3-force"),g=v("d3-interpolate").interpolateNumber,k=v("@plotly/d3"),x=v("@plotly/d3-sankey"),e=v("@plotly/d3-sankey-circular"),n=v("./constants"),i=v("tinycolor2"),l=v("../../components/color"),r=v("../../components/drawing"),d=v("../../lib"),f=d.strTranslate,t=d.strRotate,h=v("../../lib/gup"),s=h.keyFun,o=h.repeat,p=h.unwrap,c=v("../../lib/svg_text_utils"),a=v("../../registry"),y=v("../../constants/alignment"),u=y.CAP_SHIFT,_=y.LINE_SPACING;function b(Z,W,re){var U,B=p(W),V=B.trace,ee=V.domain,N="h"===V.orientation,K=V.node.pad,J=V.node.thickness,te=Z.width*(ee.x[1]-ee.x[0]),ae=Z.height*(ee.y[1]-ee.y[0]),le=B._nodes,se=B._links,ve=B.circular;(U=ve?e.sankeyCircular().circularLinkGap(0):x.sankey()).iterations(n.sankeyIterations).size(N?[te,ae]:[ae,te]).nodeWidth(J).nodePadding(K).nodeId(function(Ae){return Ae.pointNumber}).nodes(le).links(se);var ue,ye,Me,pe=U();for(var ge in U.nodePadding()<K&&d.warn("node.pad was reduced to ",U.nodePadding()," to fit within the figure."),B._groupLookup){var we,oe=parseInt(B._groupLookup[ge]);for(ue=0;ue<pe.nodes.length;ue++)if(pe.nodes[ue].pointNumber===oe){we=pe.nodes[ue];break}if(we){var de={pointNumber:parseInt(ge),x0:we.x0,x1:we.x1,y0:we.y0,y1:we.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};pe.nodes.unshift(de),we.childrenNodes.unshift(de)}}if(function(){for(ue=0;ue<pe.nodes.length;ue++){var Ae,De,Ie=pe.nodes[ue],Oe={};for(ye=0;ye<Ie.targetLinks.length;ye++)Ae=(De=Ie.targetLinks[ye]).source.pointNumber+":"+De.target.pointNumber,Oe.hasOwnProperty(Ae)||(Oe[Ae]=[]),Oe[Ae].push(De);var Xe=Object.keys(Oe);for(ye=0;ye<Xe.length;ye++){var Fe=Oe[Ae=Xe[ye]],Pe=0,Re={};for(Me=0;Me<Fe.length;Me++)Re[(De=Fe[Me]).label]||(Re[De.label]=0),Re[De.label]+=De.value,Pe+=De.value;for(Me=0;Me<Fe.length;Me++)(De=Fe[Me]).flow={value:Pe,labelConcentration:Re[De.label]/Pe,concentration:De.value/Pe,links:Fe},De.concentrationscale&&(De.color=i(De.concentrationscale(De.flow.labelConcentration)))}var qe=0;for(ye=0;ye<Ie.sourceLinks.length;ye++)qe+=Ie.sourceLinks[ye].value;for(ye=0;ye<Ie.sourceLinks.length;ye++)(De=Ie.sourceLinks[ye]).concentrationOut=De.value/qe;var Qe=0;for(ye=0;ye<Ie.targetLinks.length;ye++)Qe+=Ie.targetLinks[ye].value;for(ye=0;ye<Ie.targetLinks.length;ye++)(De=Ie.targetLinks[ye]).concenrationIn=De.value/Qe}}(),V.node.x.length&&V.node.y.length){for(ue=0;ue<Math.min(V.node.x.length,V.node.y.length,pe.nodes.length);ue++)if(V.node.x[ue]&&V.node.y[ue]){var Te=[V.node.x[ue]*te,V.node.y[ue]*ae];pe.nodes[ue].x0=Te[0]-J/2,pe.nodes[ue].x1=Te[0]+J/2;var Ee=pe.nodes[ue].y1-pe.nodes[ue].y0;pe.nodes[ue].y0=Te[1]-Ee/2,pe.nodes[ue].y1=Te[1]+Ee/2}"snap"===V.arrangement&&function(Ae){var De,Ie,Oe=Ae.map(function(qe,Qe){return{x0:qe.x0,index:Qe}}).sort(function(qe,Qe){return qe.x0-Qe.x0}),Xe=[],Fe=-1,Pe=-1/0;for(ue=0;ue<Oe.length;ue++){var Re=Ae[Oe[ue].index];Re.x0>Pe+J&&(Fe+=1,De=Re.x0),Pe=Re.x0,Xe[Fe]||(Xe[Fe]=[]),Xe[Fe].push(Re),Re.x0+=Ie=De-Re.x0,Re.x1+=Ie}return Xe}(le=pe.nodes).forEach(function(De){var Ie,Oe,Xe,Fe=0,Pe=De.length;for(De.sort(function(Re,qe){return Re.y0-qe.y0}),Xe=0;Xe<Pe;++Xe)(Ie=De[Xe]).y0>=Fe||(Oe=Fe-Ie.y0)>1e-6&&(Ie.y0+=Oe,Ie.y1+=Oe),Fe=Ie.y1+K}),U.update(pe)}return{circular:ve,key:re,trace:V,guid:d.randstr(),horizontal:N,width:te,height:ae,nodePad:V.node.pad,nodeLineColor:V.node.line.color,nodeLineWidth:V.node.line.width,linkLineColor:V.link.line.color,linkLineWidth:V.link.line.width,linkArrowLength:V.link.arrowlen,valueFormat:V.valueformat,valueSuffix:V.valuesuffix,textFont:V.textfont,translateX:ee.x[0]*Z.width+Z.margin.l,translateY:Z.height-ee.y[1]*Z.height+Z.margin.t,dragParallel:N?ae:te,dragPerpendicular:N?te:ae,arrangement:V.arrangement,sankey:U,graph:pe,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function w(Z,W,re){var U=i(W.color),B=W.source.label+"|"+W.target.label+"__"+re;return W.trace=Z.trace,W.curveNumber=Z.trace.index,{circular:Z.circular,key:B,traceId:Z.key,pointNumber:W.pointNumber,link:W,tinyColorHue:l.tinyRGB(U),tinyColorAlpha:U.getAlpha(),linkPath:T,linkLineColor:Z.linkLineColor,linkLineWidth:Z.linkLineWidth,linkArrowLength:Z.linkArrowLength,valueFormat:Z.valueFormat,valueSuffix:Z.valueSuffix,sankey:Z.sankey,parent:Z,interactionState:Z.interactionState,flow:W.flow}}function T(){return function(Z){var ye,Me,pe,ge,W=Z.linkArrowLength;if(Z.link.circular)return Me=W,pe=(ye=Z.link).width/2,ge=ye.circularPathData,"top"===ye.circularLinkType?"M "+(ge.targetX-Me)+" "+(ge.targetY+pe)+" L"+(ge.rightInnerExtent-Me)+" "+(ge.targetY+pe)+"A"+(ge.rightLargeArcRadius+pe)+" "+(ge.rightSmallArcRadius+pe)+" 0 0 1 "+(ge.rightFullExtent-pe-Me)+" "+(ge.targetY-ge.rightSmallArcRadius)+"L"+(ge.rightFullExtent-pe-Me)+" "+ge.verticalRightInnerExtent+"A"+(ge.rightLargeArcRadius+pe)+" "+(ge.rightLargeArcRadius+pe)+" 0 0 1 "+(ge.rightInnerExtent-Me)+" "+(ge.verticalFullExtent-pe)+"L"+ge.leftInnerExtent+" "+(ge.verticalFullExtent-pe)+"A"+(ge.leftLargeArcRadius+pe)+" "+(ge.leftLargeArcRadius+pe)+" 0 0 1 "+(ge.leftFullExtent+pe)+" "+ge.verticalLeftInnerExtent+"L"+(ge.leftFullExtent+pe)+" "+(ge.sourceY-ge.leftSmallArcRadius)+"A"+(ge.leftLargeArcRadius+pe)+" "+(ge.leftSmallArcRadius+pe)+" 0 0 1 "+ge.leftInnerExtent+" "+(ge.sourceY+pe)+"L"+ge.sourceX+" "+(ge.sourceY+pe)+"L"+ge.sourceX+" "+(ge.sourceY-pe)+"L"+ge.leftInnerExtent+" "+(ge.sourceY-pe)+"A"+(ge.leftLargeArcRadius-pe)+" "+(ge.leftSmallArcRadius-pe)+" 0 0 0 "+(ge.leftFullExtent-pe)+" "+(ge.sourceY-ge.leftSmallArcRadius)+"L"+(ge.leftFullExtent-pe)+" "+ge.verticalLeftInnerExtent+"A"+(ge.leftLargeArcRadius-pe)+" "+(ge.leftLargeArcRadius-pe)+" 0 0 0 "+ge.leftInnerExtent+" "+(ge.verticalFullExtent+pe)+"L"+(ge.rightInnerExtent-Me)+" "+(ge.verticalFullExtent+pe)+"A"+(ge.rightLargeArcRadius-pe)+" "+(ge.rightLargeArcRadius-pe)+" 0 0 0 "+(ge.rightFullExtent+pe-Me)+" "+ge.verticalRightInnerExtent+"L"+(ge.rightFullExtent+pe-Me)+" "+(ge.targetY-ge.rightSmallArcRadius)+"A"+(ge.rightLargeArcRadius-pe)+" "+(ge.rightSmallArcRadius-pe)+" 0 0 0 "+(ge.rightInnerExtent-Me)+" "+(ge.targetY-pe)+"L"+(ge.targetX-Me)+" "+(ge.targetY-pe)+(Me>0?"L"+ge.targetX+" "+ge.targetY:"")+"Z":"M "+(ge.targetX-Me)+" "+(ge.targetY-pe)+" L"+(ge.rightInnerExtent-Me)+" "+(ge.targetY-pe)+"A"+(ge.rightLargeArcRadius+pe)+" "+(ge.rightSmallArcRadius+pe)+" 0 0 0 "+(ge.rightFullExtent-pe-Me)+" "+(ge.targetY+ge.rightSmallArcRadius)+"L"+(ge.rightFullExtent-pe-Me)+" "+ge.verticalRightInnerExtent+"A"+(ge.rightLargeArcRadius+pe)+" "+(ge.rightLargeArcRadius+pe)+" 0 0 0 "+(ge.rightInnerExtent-Me)+" "+(ge.verticalFullExtent+pe)+"L"+ge.leftInnerExtent+" "+(ge.verticalFullExtent+pe)+"A"+(ge.leftLargeArcRadius+pe)+" "+(ge.leftLargeArcRadius+pe)+" 0 0 0 "+(ge.leftFullExtent+pe)+" "+ge.verticalLeftInnerExtent+"L"+(ge.leftFullExtent+pe)+" "+(ge.sourceY+ge.leftSmallArcRadius)+"A"+(ge.leftLargeArcRadius+pe)+" "+(ge.leftSmallArcRadius+pe)+" 0 0 0 "+ge.leftInnerExtent+" "+(ge.sourceY-pe)+"L"+ge.sourceX+" "+(ge.sourceY-pe)+"L"+ge.sourceX+" "+(ge.sourceY+pe)+"L"+ge.leftInnerExtent+" "+(ge.sourceY+pe)+"A"+(ge.leftLargeArcRadius-pe)+" "+(ge.leftSmallArcRadius-pe)+" 0 0 1 "+(ge.leftFullExtent-pe)+" "+(ge.sourceY+ge.leftSmallArcRadius)+"L"+(ge.leftFullExtent-pe)+" "+ge.verticalLeftInnerExtent+"A"+(ge.leftLargeArcRadius-pe)+" "+(ge.leftLargeArcRadius-pe)+" 0 0 1 "+ge.leftInnerExtent+" "+(ge.verticalFullExtent-pe)+"L"+(ge.rightInnerExtent-Me)+" "+(ge.verticalFullExtent-pe)+"A"+(ge.rightLargeArcRadius-pe)+" "+(ge.rightLargeArcRadius-pe)+" 0 0 1 "+(ge.rightFullExtent+pe-Me)+" "+ge.verticalRightInnerExtent+"L"+(ge.rightFullExtent+pe-Me)+" "+(ge.targetY+ge.rightSmallArcRadius)+"A"+(ge.rightLargeArcRadius-pe)+" "+(ge.rightSmallArcRadius-pe)+" 0 0 1 "+(ge.rightInnerExtent-Me)+" "+(ge.targetY+pe)+"L"+(ge.targetX-Me)+" "+(ge.targetY+pe)+(Me>0?"L"+ge.targetX+" "+ge.targetY:"")+"Z";var re=Math.abs((Z.link.target.x0-Z.link.source.x1)/2);W>re&&(W=re);var U=Z.link.source.x1,B=Z.link.target.x0-W,V=g(U,B),ee=V(.5),N=V(.5),K=Z.link.y0-Z.link.width/2,J=Z.link.y0+Z.link.width/2,te=Z.link.y1-Z.link.width/2,ae=Z.link.y1+Z.link.width/2,ue=W>0?"L"+(B+W)+","+(te+Z.link.width/2):"";return"M"+U+","+K+"C"+ee+","+K+" "+N+","+te+" "+B+","+te+(ue+="L"+B+","+ae)+"C"+N+","+ae+" "+ee+","+J+" "+U+","+J+"Z"}}function C(Z,W){var re=i(W.color),U=n.nodePadAcross,B=Z.nodePad/2;W.dx=W.x1-W.x0,W.dy=W.y1-W.y0;var V=W.dx,ee=Math.max(.5,W.dy),N="node_"+W.pointNumber;return W.group&&(N=d.randstr()),W.trace=Z.trace,W.curveNumber=Z.trace.index,{index:W.pointNumber,key:N,partOfGroup:W.partOfGroup||!1,group:W.group,traceId:Z.key,trace:Z.trace,node:W,nodePad:Z.nodePad,nodeLineColor:Z.nodeLineColor,nodeLineWidth:Z.nodeLineWidth,textFont:Z.textFont,size:Z.horizontal?Z.height:Z.width,visibleWidth:Math.ceil(V),visibleHeight:ee,zoneX:-U,zoneY:-B,zoneWidth:V+2*U,zoneHeight:ee+2*B,labelY:Z.horizontal?W.dy/2+1:W.dx/2+1,left:1===W.originalLayer,sizeAcross:Z.width,forceLayouts:Z.forceLayouts,horizontal:Z.horizontal,darkBackground:re.getBrightness()<=128,tinyColorHue:l.tinyRGB(re),tinyColorAlpha:re.getAlpha(),valueFormat:Z.valueFormat,valueSuffix:Z.valueSuffix,sankey:Z.sankey,graph:Z.graph,arrangement:Z.arrangement,uniqueNodeLabelPathId:[Z.guid,Z.key,N].join("_"),interactionState:Z.interactionState,figure:Z}}function M(Z){Z.attr("transform",function(W){return f(W.node.x0.toFixed(3),W.node.y0.toFixed(3))})}function I(Z){Z.call(M)}function P(Z,W){Z.call(I),W.attr("d",T())}function S(Z){Z.attr("width",function(W){return W.node.x1-W.node.x0}).attr("height",function(W){return W.visibleHeight})}function E(Z){return Z.link.width>1||Z.linkLineWidth>0}function R(Z){return f(Z.translateX,Z.translateY)+(Z.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function D(Z,W,re){Z.on(".basic",null).on("mouseover.basic",function(U){U.interactionState.dragInProgress||U.partOfGroup||(re.hover(this,U,W),U.interactionState.hovered=[this,U])}).on("mousemove.basic",function(U){U.interactionState.dragInProgress||U.partOfGroup||(re.follow(this,U),U.interactionState.hovered=[this,U])}).on("mouseout.basic",function(U){U.interactionState.dragInProgress||U.partOfGroup||(re.unhover(this,U,W),U.interactionState.hovered=!1)}).on("click.basic",function(U){U.interactionState.hovered&&(re.unhover(this,U,W),U.interactionState.hovered=!1),U.interactionState.dragInProgress||U.partOfGroup||re.select(this,U,W)})}function j(Z,W,re,U){var B=k.behavior.drag().origin(function(V){return{x:V.node.x0+V.visibleWidth/2,y:V.node.y0+V.visibleHeight/2}}).on("dragstart",function(V){if("fixed"!==V.arrangement&&(d.ensureSingle(U._fullLayout._infolayer,"g","dragcover",function(N){U._fullLayout._dragCover=N}),d.raiseToTop(this),V.interactionState.dragInProgress=V.node,Y(V.node),V.interactionState.hovered&&(re.nodeEvents.unhover.apply(0,V.interactionState.hovered),V.interactionState.hovered=!1),"snap"===V.arrangement)){var ee=V.traceId+"|"+V.key;V.forceLayouts[ee]?V.forceLayouts[ee].alpha(1):function(N,K,J,te){!function(le){for(var se=0;se<le.length;se++)le[se].y=(le[se].y0+le[se].y1)/2,le[se].x=(le[se].x0+le[se].x1)/2}(J.graph.nodes);var se,ve,ue,ae=J.graph.nodes.filter(function(le){return le.originalX===J.node.originalX}).filter(function(le){return!le.partOfGroup});J.forceLayouts[K]=m.forceSimulation(ae).alphaDecay(0).force("collide",m.forceCollide().radius(function(le){return le.dy/2+J.nodePad/2}).strength(1).iterations(n.forceIterations)).force("constrain",(se=K,ve=ae,ue=J,function(){for(var ye=0,Me=0;Me<ve.length;Me++){var pe=ve[Me];pe===ue.interactionState.dragInProgress?(pe.x=pe.lastDraggedX,pe.y=pe.lastDraggedY):(pe.vx=(pe.originalX-pe.x)/n.forceTicksPerFrame,pe.y=Math.min(ue.size-pe.dy/2,Math.max(pe.dy/2,pe.y))),ye=Math.max(ye,Math.abs(pe.vx),Math.abs(pe.vy))}!ue.interactionState.dragInProgress&&ye<.1&&ue.forceLayouts[se].alpha()>0&&ue.forceLayouts[se].alpha(0)})).stop()}(0,ee,V),N=Z,K=W,J=V,te=ee,ae=U,window.requestAnimationFrame(function le(){var se;for(se=0;se<n.forceTicksPerFrame;se++)J.forceLayouts[te].tick();if(function(ue){for(var ye=0;ye<ue.length;ye++)ue[ye].y0=ue[ye].y-ue[ye].dy/2,ue[ye].y1=ue[ye].y0+ue[ye].dy,ue[ye].x0=ue[ye].x-ue[ye].dx/2,ue[ye].x1=ue[ye].x0+ue[ye].dx}(J.graph.nodes),J.sankey.update(J.graph),P(N.filter(X(J)),K),J.forceLayouts[te].alpha()>0)window.requestAnimationFrame(le);else{var ve=J.node.originalX;J.node.x0=ve-J.visibleWidth/2,J.node.x1=ve+J.visibleWidth/2,H(J,ae)}})}var N,K,J,te,ae}).on("drag",function(V){if("fixed"!==V.arrangement){var ee=k.event.x,N=k.event.y;"snap"===V.arrangement?(V.node.x0=ee-V.visibleWidth/2,V.node.x1=ee+V.visibleWidth/2,V.node.y0=N-V.visibleHeight/2,V.node.y1=N+V.visibleHeight/2):("freeform"===V.arrangement&&(V.node.x0=ee-V.visibleWidth/2,V.node.x1=ee+V.visibleWidth/2),N=Math.max(0,Math.min(V.size-V.visibleHeight/2,N)),V.node.y0=N-V.visibleHeight/2,V.node.y1=N+V.visibleHeight/2),Y(V.node),"snap"!==V.arrangement&&(V.sankey.update(V.graph),P(Z.filter(X(V)),W))}}).on("dragend",function(V){if("fixed"!==V.arrangement){V.interactionState.dragInProgress=!1;for(var ee=0;ee<V.node.childrenNodes.length;ee++)V.node.childrenNodes[ee].x=V.node.x,V.node.childrenNodes[ee].y=V.node.y;"snap"!==V.arrangement&&H(V,U)}});Z.on(".drag",null).call(B)}function H(Z,W){for(var re=[],U=[],B=0;B<Z.graph.nodes.length;B++){var ee=(Z.graph.nodes[B].y0+Z.graph.nodes[B].y1)/2;re.push((Z.graph.nodes[B].x0+Z.graph.nodes[B].x1)/2/Z.figure.width),U.push(ee/Z.figure.height)}a.call("_guiRestyle",W,{"node.x":[re],"node.y":[U]},Z.trace.index).then(function(){W._fullLayout._dragCover&&W._fullLayout._dragCover.remove()})}function Y(Z){Z.lastDraggedX=Z.x0+Z.dx/2,Z.lastDraggedY=Z.y0+Z.dy/2}function X(Z){return function(W){return W.node.originalX===Z.node.originalX}}$.exports=function(Z,W,re,U,B){var V=Z._context.staticPlot,ee=!1;d.ensureSingle(Z._fullLayout._infolayer,"g","first-render",function(){ee=!0});var N=Z._fullLayout._dragCover,K=re.filter(function(ye){return p(ye).trace.visible}).map(b.bind(null,U)),J=W.selectAll("."+n.cn.sankey).data(K,s);J.exit().remove(),J.enter().append("g").classed(n.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",V?"none":"auto").attr("transform",R),J.each(function(ye,Me){Z._fullData[Me]._sankey=ye;var pe="bgsankey-"+ye.trace.uid+"-"+Me;d.ensureSingle(Z._fullLayout._draggers,"rect",pe),Z._fullData[Me]._bgRect=k.select("."+pe),Z._fullData[Me]._bgRect.style("pointer-events",V?"none":"all").attr("width",ye.width).attr("height",ye.height).attr("x",ye.translateX).attr("y",ye.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),J.transition().ease(n.ease).duration(n.duration).attr("transform",R);var te=J.selectAll("."+n.cn.sankeyLinks).data(o,s);te.enter().append("g").classed(n.cn.sankeyLinks,!0).style("fill","none");var ae=te.selectAll("."+n.cn.sankeyLink).data(function(ye){return ye.graph.links.filter(function(Me){return Me.value}).map(w.bind(null,ye))},s);ae.enter().append("path").classed(n.cn.sankeyLink,!0).call(D,J,B.linkEvents),ae.style("stroke",function(ye){return E(ye)?l.tinyRGB(i(ye.linkLineColor)):ye.tinyColorHue}).style("stroke-opacity",function(ye){return E(ye)?l.opacity(ye.linkLineColor):ye.tinyColorAlpha}).style("fill",function(ye){return ye.tinyColorHue}).style("fill-opacity",function(ye){return ye.tinyColorAlpha}).style("stroke-width",function(ye){return E(ye)?ye.linkLineWidth:1}).attr("d",T()),ae.style("opacity",function(){return Z._context.staticPlot||ee||N?1:0}).transition().ease(n.ease).duration(n.duration).style("opacity",1),ae.exit().transition().ease(n.ease).duration(n.duration).style("opacity",0).remove();var le=J.selectAll("."+n.cn.sankeyNodeSet).data(o,s);le.enter().append("g").classed(n.cn.sankeyNodeSet,!0),le.style("cursor",function(ye){switch(ye.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var se=le.selectAll("."+n.cn.sankeyNode).data(function(ye){var Me=ye.graph.nodes;return function(pe){var ge,we=[];for(ge=0;ge<pe.length;ge++)pe[ge].originalX=(pe[ge].x0+pe[ge].x1)/2,pe[ge].originalY=(pe[ge].y0+pe[ge].y1)/2,-1===we.indexOf(pe[ge].originalX)&&we.push(pe[ge].originalX);for(we.sort(function(oe,de){return oe-de}),ge=0;ge<pe.length;ge++)pe[ge].originalLayerIndex=we.indexOf(pe[ge].originalX),pe[ge].originalLayer=pe[ge].originalLayerIndex/(we.length-1)}(Me),Me.map(C.bind(null,ye))},s);se.enter().append("g").classed(n.cn.sankeyNode,!0).call(M).style("opacity",function(ye){return!Z._context.staticPlot&&!ee||ye.partOfGroup?0:1}),se.call(D,J,B.nodeEvents).call(j,ae,B,Z),se.transition().ease(n.ease).duration(n.duration).call(M).style("opacity",function(ye){return ye.partOfGroup?0:1}),se.exit().transition().ease(n.ease).duration(n.duration).style("opacity",0).remove();var ve=se.selectAll("."+n.cn.nodeRect).data(o);ve.enter().append("rect").classed(n.cn.nodeRect,!0).call(S),ve.style("stroke-width",function(ye){return ye.nodeLineWidth}).style("stroke",function(ye){return l.tinyRGB(i(ye.nodeLineColor))}).style("stroke-opacity",function(ye){return l.opacity(ye.nodeLineColor)}).style("fill",function(ye){return ye.tinyColorHue}).style("fill-opacity",function(ye){return ye.tinyColorAlpha}),ve.transition().ease(n.ease).duration(n.duration).call(S);var ue=se.selectAll("."+n.cn.nodeLabel).data(o);ue.enter().append("text").classed(n.cn.nodeLabel,!0).style("cursor","default"),ue.attr("data-notex",1).text(function(ye){return ye.node.label}).each(function(ye){var Me=k.select(this);r.font(Me,ye.textFont),c.convertToTspans(Me,Z)}).style("text-shadow",c.makeTextShadow(Z._fullLayout.paper_bgcolor)).attr("text-anchor",function(ye){return ye.horizontal&&ye.left?"end":"start"}).attr("transform",function(ye){var Me=k.select(this),pe=c.lineCount(Me),we=ye.nodeLineWidth/2+3,oe=((ye.horizontal?ye.visibleHeight:ye.visibleWidth)-ye.textFont.size*((pe-1)*_-u))/2;ye.horizontal&&(ye.left?we=-we:we+=ye.visibleWidth);var de=ye.horizontal?"":"scale(-1,1)"+t(90);return f(ye.horizontal?we:oe,ye.horizontal?oe:we)+de}),ue.transition().ease(n.ease).duration(n.duration)}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../registry":647,"./constants":929,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:313}],934:[function(v,$,Q){"use strict";$.exports=function(m,g){for(var k=[],x=m.cd[0].trace,e=x._sankey.graph.nodes,n=0;n<e.length;n++){var i=e[n];if(!i.partOfGroup){var l=[(i.x0+i.x1)/2,(i.y0+i.y1)/2];"v"===x.orientation&&l.reverse(),g&&g.contains(l,!1,n,m)&&k.push({pointNumber:i.pointNumber})}}return k}},{}],935:[function(v,$,Q){"use strict";var m=v("../../lib");$.exports=function(g,k){for(var x=0;x<g.length;x++)g[x].i=x;m.mergeArray(k.text,g,"tx"),m.mergeArray(k.texttemplate,g,"txt"),m.mergeArray(k.hovertext,g,"htx"),m.mergeArray(k.customdata,g,"data"),m.mergeArray(k.textposition,g,"tp"),k.textfont&&(m.mergeArrayCastPositive(k.textfont.size,g,"ts"),m.mergeArray(k.textfont.color,g,"tc"),m.mergeArray(k.textfont.family,g,"tf"));var e=k.marker;if(e){m.mergeArrayCastPositive(e.size,g,"ms"),m.mergeArrayCastPositive(e.opacity,g,"mo"),m.mergeArray(e.symbol,g,"mx"),m.mergeArray(e.angle,g,"ma"),m.mergeArray(e.standoff,g,"mf"),m.mergeArray(e.color,g,"mc");var n=e.line;e.line&&(m.mergeArray(n.color,g,"mlc"),m.mergeArrayCastPositive(n.width,g,"mlw"));var i=e.gradient;i&&"none"!==i.type&&(m.mergeArray(i.type,g,"mgt"),m.mergeArray(i.color,g,"mgc"))}}},{"../../lib":515}],936:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,g=v("../../plots/template_attributes").texttemplateAttrs,k=v("../../plots/template_attributes").hovertemplateAttrs,x=v("../../components/colorscale/attributes"),e=v("../../plots/font_attributes"),n=v("../../components/drawing/attributes").dash,i=v("../../components/drawing/attributes").pattern,l=v("../../components/drawing"),r=v("./constants"),d=v("../../lib/extend").extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:m("x"),yhoverformat:m("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:g({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:k({},{keys:r.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:d({},n,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:i,marker:d({symbol:{valType:"enumerated",values:l.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:d({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},x("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},x("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":374,"../../components/drawing":389,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"./constants":940}],937:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib"),k=v("../../plots/cartesian/axes"),x=v("../../plots/cartesian/align_period"),e=v("../../constants/numerical").BADNUM,n=v("./subtypes"),i=v("./colorscale_calc"),l=v("./arrays_to_calcdata"),r=v("./calc_selection");function d(o,p,c,a,y,u,_){var b=p._length,w=o._fullLayout,T=c._id,C=a._id,M=w._firstScatter[h(p)]===p.uid,I=(s(p,w,c,a)||{}).orientation,P=p.fill;c._minDtick=0,a._minDtick=0;var S={padded:!0},E={padded:!0};_&&(S.ppad=E.ppad=_);var R=b<2||y[0]!==y[b-1]||u[0]!==u[b-1];R&&("tozerox"===P||"tonextx"===P&&(M||"h"===I))?S.tozero=!0:(p.error_y||{}).visible||"tonexty"!==P&&"tozeroy"!==P&&(n.hasMarkers(p)||n.hasText(p))||(S.padded=!1,S.ppad=0),R&&("tozeroy"===P||"tonexty"===P&&(M||"v"===I))?E.tozero=!0:"tonextx"!==P&&"tozerox"!==P||(E.padded=!1),T&&(p._extremes[T]=k.findExtremes(c,y,S)),C&&(p._extremes[C]=k.findExtremes(a,u,E))}function f(o,p){if(n.hasMarkers(o)){var c,a=o.marker,y=1.6*(o.marker.sizeref||1);if(c="area"===o.marker.sizemode?function(T){return Math.max(Math.sqrt((T||0)/y),3)}:function(T){return Math.max((T||0)/y,3)},g.isArrayOrTypedArray(a.size)){var u={type:"linear"};k.setConvert(u);for(var _=u.makeCalcdata(o.marker,"size"),b=new Array(p),w=0;w<p;w++)b[w]=c(_[w]);return b}return c(a.size)}}function t(o,p){var c=h(p),a=o._firstScatter;a[c]||(a[c]=p.uid)}function h(o){var p=o.stackgroup;return o.xaxis+o.yaxis+o.type+(p?"-"+p:"")}function s(o,p,c,a){var y=o.stackgroup;if(y){var u=p._scatterStackOpts[c._id+a._id][y],_="v"===u.orientation?a:c;return"linear"===_.type||"log"===_.type?u:void 0}}$.exports={calc:function(o,p){var c,a,y,u,_,b,w=o._fullLayout,T=p._xA=k.getFromId(o,p.xaxis||"x","x"),C=p._yA=k.getFromId(o,p.yaxis||"y","y"),M=T.makeCalcdata(p,"x"),I=C.makeCalcdata(p,"y"),P=x(p,T,"x",M),S=x(p,C,"y",I),E=P.vals,R=S.vals,D=p._length,j=new Array(D),H=p.ids,Y=s(p,w,T,C),X=!1;t(w,p);var Z,W="x",re="y";Y?(g.pushUnique(Y.traceIndices,p._expandedIndex),(c="v"===Y.orientation)?(re="s",Z="x"):(W="s",Z="y"),_="interpolate"===Y.stackgaps):d(o,p,T,C,E,R,f(p,D));var U=!!p.xperiodalignment,B=!!p.yperiodalignment;for(a=0;a<D;a++){var V=j[a]={},ee=m(E[a]),N=m(R[a]);ee&&N?(V[W]=E[a],V[re]=R[a],U&&(V.orig_x=M[a],V.xEnd=P.ends[a],V.xStart=P.starts[a]),B&&(V.orig_y=I[a],V.yEnd=S.ends[a],V.yStart=S.starts[a])):Y&&(c?ee:N)?(V[Z]=c?E[a]:R[a],V.gap=!0,_?(V.s=e,X=!0):V.s=0):V[W]=V[re]=e,H&&(V.id=String(H[a]))}if(l(j,p),i(o,p),r(j,p),Y){for(a=0;a<j.length;)j[a][Z]===e?j.splice(a,1):a++;if(g.sort(j,function(ae,le){return ae[Z]-le[Z]||ae.i-le.i}),X){for(a=0;a<j.length-1&&j[a].gap;)a++;for((b=j[a].s)||(b=j[a].s=0),y=0;y<a;y++)j[y].s=b;for(u=j.length-1;u>a&&j[u].gap;)u--;for(b=j[u].s,y=j.length-1;y>u;y--)j[y].s=b;for(;a<u;)if(j[++a].gap){for(y=a+1;j[y].gap;)y++;for(var K=j[a-1][Z],J=j[a-1].s,te=(j[y].s-J)/(j[y][Z]-K);a<y;)j[a].s=J+(j[a][Z]-K)*te,a++}}}return j},calcMarkerSize:f,calcAxisExpansion:d,setFirstScatter:t,getStackOpts:s}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"./arrays_to_calcdata":935,"./calc_selection":938,"./colorscale_calc":939,"./subtypes":961,"fast-isnumeric":190}],938:[function(v,$,Q){"use strict";var m=v("../../lib");$.exports=function(g,k){m.isArrayOrTypedArray(k.selectedpoints)&&m.tagSelected(g,k)}},{"../../lib":515}],939:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/helpers").hasColorscale,g=v("../../components/colorscale/calc"),k=v("./subtypes");$.exports=function(x,e){k.hasLines(e)&&m(e,"line")&&g(x,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),k.hasMarkers(e)&&(m(e,"marker")&&g(x,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),m(e,"marker.line")&&g(x,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"./subtypes":961}],940:[function(v,$,Q){"use strict";$.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],941:[function(v,$,Q){"use strict";var m=v("./calc");function g(k,x,e,n,i,l,r){i[n]=!0;var t,h,o,p,c,d={i:null,gap:!0,s:0};if(d[r]=e,k.splice(x,0,d),x&&e===k[x-1][r]){var f=k[x-1];d.s=f.s,d.i=f.i,d.gap=f.gap}else l&&(d.s=(o=r,p=(t=k)[(h=x)-1],(c=t[h+1])?p?p.s+(c.s-p.s)*(e-p[o])/(c[o]-p[o]):c.s:p.s));x||(k[0].t=k[1].t,k[0].trace=k[1].trace,delete k[1].t,delete k[1].trace)}$.exports=function(k,x){var e=x.xaxis,n=x.yaxis,l=k._fullLayout._scatterStackOpts[e._id+n._id];if(l){var r,d,f,t,h,s,o,p,c,a,y,u,_,b,w,T=k.calcdata;for(var C in l){var M=(a=l[C]).traceIndices;if(M.length){for(y="interpolate"===a.stackgaps,u=a.groupnorm,"v"===a.orientation?(_="x",b="y"):(_="y",b="x"),w=new Array(M.length),r=0;r<w.length;r++)w[r]=!1;s=T[M[0]];var I=new Array(s.length);for(r=0;r<s.length;r++)I[r]=s[r][_];for(r=1;r<M.length;r++){for(h=T[M[r]],d=f=0;d<h.length;d++){for(o=h[d][_];o>I[f]&&f<I.length;f++)g(h,d,I[f],r,w,y,_),d++;if(o!==I[f]){for(t=0;t<r;t++)g(T[M[t]],f,o,t,w,y,_);I.splice(f,0,o)}f++}for(;f<I.length;f++)g(h,d,I[f],r,w,y,_),d++}var P=I.length;for(d=0;d<s.length;d++){for(p=s[d][b]=s[d].s,r=1;r<M.length;r++)(h=T[M[r]])[0].trace._rawLength=h[0].trace._length,h[0].trace._length=P,h[d][b]=p+=h[d].s;if(u)for(c=("fraction"===u?p:p/100)||1,r=0;r<M.length;r++){var S=T[M[r]][d];S[b]/=c,S.sNorm=S.s/c}}for(r=0;r<M.length;r++){var E=(h=T[M[r]])[0].trace,R=m.calcMarkerSize(E,E._rawLength),D=Array.isArray(R);if(R&&w[r]||D){var j=R;for(R=new Array(P),d=0;d<P;d++)R[d]=h[d].gap?0:D?j[h[d].i]:j}var H=new Array(P),Y=new Array(P);for(d=0;d<P;d++)H[d]=h[d].x,Y[d]=h[d].y;m.calcAxisExpansion(k,E,e,n,H,Y,R),h[0].t.orientation=a.orientation}}}}}},{"./calc":937}],942:[function(v,$,Q){"use strict";$.exports=function(m){for(var g=0;g<m.length;g++){var k=m[g];if("scatter"===k.type){var x=k.fill;if("none"!==x&&"toself"!==x&&(k.opacity=void 0,"tonexty"===x||"tonextx"===x))for(var e=g-1;e>=0;e--){var n=m[e];if("scatter"===n.type&&n.xaxis===k.xaxis&&n.yaxis===k.yaxis){n.opacity=void 0;break}}}}}},{}],943:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../registry"),k=v("./attributes"),x=v("./constants"),e=v("./subtypes"),n=v("./xy_defaults"),i=v("./period_defaults"),l=v("./stack_defaults"),r=v("./marker_defaults"),d=v("./line_defaults"),f=v("./line_shape_defaults"),t=v("./text_defaults"),h=v("./fillcolor_defaults"),s=v("../../lib").coercePattern;$.exports=function(o,p,c,a){function y(I,P){return m.coerce(o,p,k,I,P)}var u=n(o,p,a,y);if(u||(p.visible=!1),p.visible){i(o,p,a,y),y("xhoverformat"),y("yhoverformat");var _=l(o,p,a,y),b=!_&&u<x.PTS_LINESONLY?"lines+markers":"lines";y("text"),y("hovertext"),y("mode",b),e.hasLines(p)&&(d(o,p,c,a,y,{backoff:!0}),f(o,p,y),y("connectgaps"),y("line.simplify")),e.hasMarkers(p)&&r(o,p,c,a,y,{gradient:!0}),e.hasText(p)&&(y("texttemplate"),t(o,p,a,y));var w=[];(e.hasMarkers(p)||e.hasText(p))&&(y("cliponaxis"),y("marker.maxdisplayed"),w.push("points")),y("fill",_?_.fillDflt:"none"),"none"!==p.fill&&(h(o,p,c,y),e.hasLines(p)||f(o,p,y),s(y,"fillpattern",p.fillcolor,!1));var T=(p.line||{}).color,C=(p.marker||{}).color;"tonext"!==p.fill&&"toself"!==p.fill||w.push("fills"),y("hoveron",w.join("+")||"points"),"fills"!==p.hoveron&&y("hovertemplate");var M=g.getComponentMethod("errorbars","supplyDefaults");M(o,p,T||C||c,{axis:"y"}),M(o,p,T||C||c,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(p,y)}}},{"../../lib":515,"../../registry":647,"./attributes":936,"./constants":940,"./fillcolor_defaults":944,"./line_defaults":949,"./line_shape_defaults":951,"./marker_defaults":955,"./period_defaults":956,"./stack_defaults":959,"./subtypes":961,"./text_defaults":962,"./xy_defaults":963}],944:[function(v,$,Q){"use strict";var m=v("../../components/color"),g=v("../../lib").isArrayOrTypedArray;$.exports=function(k,x,e,n){var i=!1;if(x.marker){var l=x.marker.color,r=(x.marker.line||{}).color;l&&!g(l)?i=l:r&&!g(r)&&(i=r)}n("fillcolor",m.addOpacity((x.line||{}).color||i||e,.5))}},{"../../components/color":367,"../../lib":515}],945:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes");$.exports=function(g,k,x){var e={},n={_fullLayout:x},i=m.getFromTrace(n,k,"x"),l=m.getFromTrace(n,k,"y");return e.xLabel=m.tickText(i,i.c2l(g.x),!0).text,e.yLabel=m.tickText(l,l.c2l(g.y),!0).text,e}},{"../../plots/cartesian/axes":566}],946:[function(v,$,Q){"use strict";var m=v("../../components/color"),g=v("./subtypes");$.exports=function(k,x){var e,n;if("lines"===k.mode)return(e=k.line.color)&&m.opacity(e)?e:k.fillcolor;if("none"===k.mode)return k.fill?k.fillcolor:"";var i=x.mcc||(k.marker||{}).color,l=x.mlcc||((k.marker||{}).line||{}).color;return(n=i&&m.opacity(i)?i:l&&m.opacity(l)&&(x.mlw||((k.marker||{}).line||{}).width)?l:"")?m.opacity(n)<.3?m.addOpacity(n,.3):n:(e=(k.line||{}).color)&&m.opacity(e)&&g.hasLines(k)&&k.line.width?e:k.fillcolor}},{"../../components/color":367,"./subtypes":961}],947:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/fx"),k=v("../../registry"),x=v("./get_trace_color"),e=v("../../components/color"),n=m.fillText;$.exports=function(i,l,r,d){var f=i.cd,t=f[0].trace,h=i.xa,s=i.ya,o=h.c2p(l),p=s.c2p(r),c=[o,p],a=t.hoveron||"",y=-1!==t.mode.indexOf("markers")?3:.5,u=!!t.xperiodalignment,_=!!t.yperiodalignment;if(-1!==a.indexOf("points")){var b=function(se){var ve=Math.max(y,se.mrc||0),ue=h.c2p(se.x)-o,ye=s.c2p(se.y)-p;return Math.max(Math.sqrt(ue*ue+ye*ye)-ve,1-y/ve)},w=g.getDistanceFunction(d,function(se){if(u){var ve=h.c2p(se.xStart),ue=h.c2p(se.xEnd);return o>=Math.min(ve,ue)&&o<=Math.max(ve,ue)?0:1/0}var ye=Math.max(3,se.mrc||0),Me=1-1/ye,pe=Math.abs(h.c2p(se.x)-o);return pe<ye?Me*pe/ye:pe-ye+Me},function(se){if(_){var ve=s.c2p(se.yStart),ue=s.c2p(se.yEnd);return p>=Math.min(ve,ue)&&p<=Math.max(ve,ue)?0:1/0}var ye=Math.max(3,se.mrc||0),Me=1-1/ye,pe=Math.abs(s.c2p(se.y)-p);return pe<ye?Me*pe/ye:pe-ye+Me},b);if(g.getClosest(f,w,i),!1!==i.index){var T=f[i.index],C=h.c2p(T.x,!0),M=s.c2p(T.y,!0),I=T.mrc||1;i.index=T.i;var P=f[0].t.orientation,S=P&&(T.sNorm||T.s),E="h"===P?S:void 0!==T.orig_x?T.orig_x:T.x,R="v"===P?S:void 0!==T.orig_y?T.orig_y:T.y;return m.extendFlat(i,{color:x(t,T),x0:C-I,x1:C+I,xLabelVal:E,y0:M-I,y1:M+I,yLabelVal:R,spikeDistance:b(T),hovertemplate:t.hovertemplate}),n(T,t,i),k.getComponentMethod("errorbars","hoverInfo")(T,t,i),[i]}}if(-1!==a.indexOf("fills")&&t._polygons){var D,j,H,Y,X,Z,re,U,B=t._polygons,V=[],ee=!1,N=1/0,K=-1/0,J=1/0,te=-1/0;for(D=0;D<B.length;D++)(H=B[D]).contains(c)&&(ee=!ee,V.push(H),J=Math.min(J,H.ymin),te=Math.max(te,H.ymax));if(ee){var ae=((J=Math.max(J,0))+(te=Math.min(te,s._length)))/2;for(D=0;D<V.length;D++)for(Y=V[D].pts,j=1;j<Y.length;j++)(re=Y[j-1][1])>ae!=(U=Y[j][1])>=ae&&(Z=Y[j-1][0],U-re&&(X=Z+(Y[j][0]-Z)*(ae-re)/(U-re),N=Math.min(N,X),K=Math.max(K,X)));N=Math.max(N,0),K=Math.min(K,h._length);var le=e.defaultLine;return e.opacity(t.fillcolor)?le=t.fillcolor:e.opacity((t.line||{}).color)&&(le=t.line.color),m.extendFlat(i,{distance:i.maxHoverDistance,x0:N,x1:K,y0:ae,y1:ae,color:le,hovertemplate:!1}),delete i.index,i.text=t.text&&!Array.isArray(t.text)?String(t.text):t.name,[i]}}}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../registry":647,"./get_trace_color":946}],948:[function(v,$,Q){"use strict";var m=v("./subtypes");$.exports={hasLines:m.hasLines,hasMarkers:m.hasMarkers,hasText:m.hasText,isBubble:m.isBubble,attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("./cross_trace_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./cross_trace_calc"),arraysToCalcdata:v("./arrays_to_calcdata"),plot:v("./plot"),colorbar:v("./marker_colorbar"),formatLabels:v("./format_labels"),style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./arrays_to_calcdata":935,"./attributes":936,"./calc":937,"./cross_trace_calc":941,"./cross_trace_defaults":942,"./defaults":943,"./format_labels":945,"./hover":947,"./marker_colorbar":954,"./plot":957,"./select":958,"./style":960,"./subtypes":961}],949:[function(v,$,Q){"use strict";var m=v("../../lib").isArrayOrTypedArray,g=v("../../components/colorscale/helpers").hasColorscale,k=v("../../components/colorscale/defaults");$.exports=function(x,e,n,i,l,r){r||(r={});var d=(x.marker||{}).color;l("line.color",n),g(x,"line")?k(x,e,i,l,{prefix:"line.",cLetter:"c"}):l("line.color",!m(d)&&d||n),l("line.width"),r.noDash||l("line.dash"),r.backoff&&l("line.backoff")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],950:[function(v,$,Q){"use strict";var m=v("../../components/drawing"),g=v("../../constants/numerical"),k=g.BADNUM,x=g.LOG_CLIP,e=x+.5,n=x-.5,i=v("../../lib"),l=i.segmentsIntersect,r=i.constrain,d=v("./constants");$.exports=function(f,t){var h,s,o,p,c,a,y,u,_,b,w,T,C,M,I,P,S,E,R=t.trace||{},D=t.xaxis,j=t.yaxis,H="log"===D.type,Y="log"===j.type,X=D._length,Z=j._length,W=t.backoff,re=R.marker,U=t.connectGaps,B=t.baseTolerance,V=t.shape,ee="linear"===V,N=R.fill&&"none"!==R.fill,K=[],J=d.minTolerance,te=f.length,ae=new Array(te),le=0;function se(Ft){var Be=f[Ft];if(!Be)return!1;var He=t.linearized?D.l2p(Be.x):D.c2p(Be.x),he=t.linearized?j.l2p(Be.y):j.c2p(Be.y);if(He===k){if(H&&(He=D.c2p(Be.x,!0)),He===k)return!1;Y&&he===k&&(He*=Math.abs(D._m*Z*(D._m>0?e:n)/(j._m*X*(j._m>0?e:n)))),He*=1e3}if(he===k){if(Y&&(he=j.c2p(Be.y,!0)),he===k)return!1;he*=1e3}return[He,he]}function ve(Ft,Be,He,he){var be=He-Ft,ze=he-Be,Ve=.5-Ft,Je=.5-Be,Ye=be*be+ze*ze,lt=be*Ve+ze*Je;if(lt>0&&lt<Ye){var st=Ve*ze-Je*be;if(st*st<Ye)return!0}}function ue(Ft,Be){var He=Ft[0]/X,he=Ft[1]/Z,be=Math.max(0,-He,He-1,-he,he-1);return be&&void 0!==S&&ve(He,he,S,E)&&(be=0),be&&Be&&ve(He,he,Be[0]/X,Be[1]/Z)&&(be=0),(1+d.toleranceGrowth*be)*B}function ye(Ft,Be){var He=Ft[0]-Be[0],he=Ft[1]-Be[1];return Math.sqrt(He*He+he*he)}var Me,pe,ge,we,oe,de,Te,Ee=d.maxScreensAway,Ae=-X*Ee,De=X*(1+Ee),Ie=-Z*Ee,Oe=Z*(1+Ee),Xe=[[Ae,Ie,De,Ie],[De,Ie,De,Oe],[De,Oe,Ae,Oe],[Ae,Oe,Ae,Ie]];function Fe(Ft){if(Ft[0]<Ae||Ft[0]>De||Ft[1]<Ie||Ft[1]>Oe)return[r(Ft[0],Ae,De),r(Ft[1],Ie,Oe)]}function Pe(Ft,Be){return Ft[0]===Be[0]&&(Ft[0]===Ae||Ft[0]===De)||Ft[1]===Be[1]&&(Ft[1]===Ie||Ft[1]===Oe)||void 0}function Re(Ft,Be,He){return function(he,be){var ze=Fe(he),Ve=Fe(be),Je=[];if(ze&&Ve&&Pe(ze,Ve))return Je;ze&&Je.push(ze),Ve&&Je.push(Ve);var Ye=2*i.constrain((he[Ft]+be[Ft])/2,Be,He)-((ze||he)[Ft]+(Ve||be)[Ft]);return Ye&&((ze&&Ve?Ye>0==ze[Ft]>Ve[Ft]?ze:Ve:ze||Ve)[Ft]+=Ye),Je}}function qe(Ft){var Be=Ft[0],He=Ft[1],he=Be===ae[le-1][0],be=He===ae[le-1][1];if(!he||!be)if(le>1){var ze=Be===ae[le-2][0],Ve=He===ae[le-2][1];he&&(Be===Ae||Be===De)&&ze?Ve?le--:ae[le-1]=Ft:be&&(He===Ie||He===Oe)&&Ve?ze?le--:ae[le-1]=Ft:ae[le++]=Ft}else ae[le++]=Ft}function Qe(Ft){ae[le-1][0]!==Ft[0]&&ae[le-1][1]!==Ft[1]&&qe([ge,we]),qe(Ft),oe=null,ge=we=0}"linear"===V||"spline"===V?Te=function(Ft,Be){for(var He=[],he=0,be=0;be<4;be++){var ze=Xe[be],Ve=l(Ft[0],Ft[1],Be[0],Be[1],ze[0],ze[1],ze[2],ze[3]);Ve&&(!he||Math.abs(Ve.x-He[0][0])>1||Math.abs(Ve.y-He[0][1])>1)&&(Ve=[Ve.x,Ve.y],he&&ye(Ve,Ft)<ye(He[0],Ft)?He.unshift(Ve):He.push(Ve),he++)}return He}:"hv"===V||"vh"===V?Te=function(Ft,Be){var He=[],he=Fe(Ft),be=Fe(Be);return he&&be&&Pe(he,be)||(he&&He.push(he),be&&He.push(be)),He}:"hvh"===V?Te=Re(0,Ae,De):"vhv"===V&&(Te=Re(1,Ie,Oe));var ct=i.isArrayOrTypedArray(re);function bt(Ft){if(Ft&&W&&(Ft.i=h,Ft.d=f,Ft.trace=R,Ft.marker=ct?re[Ft.i]:re,Ft.backoff=W),S=Ft[0]/X,E=Ft[1]/Z,pe=Ft[1]<Ie?Ie:Ft[1]>Oe?Oe:0,(Me=Ft[0]<Ae?Ae:Ft[0]>De?De:0)||pe){if(le)if(oe){var Be=Te(oe,Ft);Be.length>1&&(Qe(Be[0]),ae[le++]=Be[1])}else de=Te(ae[le-1],Ft)[0],ae[le++]=de;else ae[le++]=[Me||Ft[0],pe||Ft[1]];var He=ae[le-1];Me&&pe&&(He[0]!==Me||He[1]!==pe)?(oe&&(ge!==Me&&we!==pe?qe(ge&&we?(ze=(be=Ft)[0]-(he=oe)[0],Ve=(be[1]-he[1])/ze,(he[1]*be[0]-be[1]*he[0])/ze>0?[Ve>0?Ae:De,Oe]:[Ve>0?De:Ae,Ie]):[ge||Me,we||pe]):ge&&we&&qe([ge,we])),qe([Me,pe])):ge-Me&&we-pe&&qe([Me||ge,pe||we]),oe=Ft,ge=Me,we=pe}else oe&&Qe(Te(oe,Ft)[0]),ae[le++]=Ft;var he,be,ze,Ve}for(h=0;h<te;h++)if(s=se(h)){for(le=0,oe=null,bt(s),h++;h<te;h++){if(!(p=se(h))){if(U)continue;break}if(ee&&t.simplify){var Tt=se(h+1);if(b=ye(p,s),N&&(0===le||le===te-1)||!(b<ue(p,Tt)*J)){for(u=[(p[0]-s[0])/b,(p[1]-s[1])/b],c=s,w=b,T=M=I=0,y=!1,o=p,h++;h<f.length;h++){if(a=Tt,Tt=se(h+1),!a){if(U)continue;break}if(P=(_=[a[0]-s[0],a[1]-s[1]])[0]*u[1]-_[1]*u[0],M=Math.min(M,P),(I=Math.max(I,P))-M>ue(a,Tt))break;o=a,(C=_[0]*u[0]+_[1]*u[1])>w?(w=C,p=a,y=!1):C<T&&(T=C,c=a,y=!0)}if(y?(bt(p),o!==c&&bt(c)):(c!==s&&bt(c),o!==p&&bt(p)),bt(o),h>=f.length||!a)break;bt(a),s=a}}else bt(p)}oe&&qe([ge||oe[0],we||oe[1]]),K.push(ae.slice(0,le))}var _t=V.slice(V.length-1);if(W&&"h"!==_t&&"v"!==_t){for(var nt=!1,Ke=-1,xt=[],Ht=0;Ht<K.length;Ht++)for(var Zt=0;Zt<K[Ht].length-1;Zt++){var $t=K[Ht][Zt],Xt=K[Ht][Zt+1],cr=m.applyBackoff(Xt,$t);cr[0]===Xt[0]&&cr[1]===Xt[1]||(nt=!0),xt[Ke+1]||(xt[++Ke]=[$t,[cr[0],cr[1]]])}return nt?xt:K}return K}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"./constants":940}],951:[function(v,$,Q){"use strict";$.exports=function(m,g,k){"spline"===k("line.shape")&&k("line.smoothing")}},{}],952:[function(v,$,Q){"use strict";var m={tonextx:1,tonexty:1,tonext:1};$.exports=function(g,k,x){var e,n,i,l,r,d={},f=!1,t=-1,h=0,s=-1;for(n=0;n<x.length;n++)(i=(e=x[n][0].trace).stackgroup||"")?i in d?r=d[i]:(r=d[i]=h,h++):e.fill in m&&s>=0?r=s:(r=s=h,h++),r<t&&(f=!0),e._groupIndex=t=r;var o=x.slice();f&&o.sort(function(c,a){var y=c[0].trace,u=a[0].trace;return y._groupIndex-u._groupIndex||y.index-u.index});var p={};for(n=0;n<o.length;n++)i=(e=o[n][0].trace).stackgroup||"",!0===e.visible?(e._nexttrace=null,e.fill in m&&(e._prevtrace=(l=p[i])||null,l&&(l._nexttrace=e)),e._ownfill=e.fill&&("tozero"===e.fill.substr(0,6)||"toself"===e.fill||"to"===e.fill.substr(0,2)&&!e._prevtrace),p[i]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return o}},{}],953:[function(v,$,Q){"use strict";var m=v("fast-isnumeric");$.exports=function(g,k){k||(k=2);var x=g.marker,e=x.sizeref||1,n=x.sizemin||0,i="area"===x.sizemode?function(l){return Math.sqrt(l/e)}:function(l){return l/e};return function(l){var r=i(l/k);return m(r)&&r>0?Math.max(r,n):0}}},{"fast-isnumeric":190}],954:[function(v,$,Q){"use strict";$.exports={container:"marker",min:"cmin",max:"cmax"}},{}],955:[function(v,$,Q){"use strict";var m=v("../../components/color"),g=v("../../components/colorscale/helpers").hasColorscale,k=v("../../components/colorscale/defaults"),x=v("./subtypes");$.exports=function(e,n,i,l,r,d){var f=x.isBubble(e),t=(e.line||{}).color;d=d||{},t&&(i=t),r("marker.symbol"),r("marker.opacity",f?.7:1),r("marker.size"),d.noAngle||(r("marker.angle"),d.noAngleRef||r("marker.angleref"),d.noStandOff||r("marker.standoff")),r("marker.color",i),g(e,"marker")&&k(e,n,l,r,{prefix:"marker.",cLetter:"c"}),d.noSelect||(r("selected.marker.color"),r("unselected.marker.color"),r("selected.marker.size"),r("unselected.marker.size")),d.noLine||(r("marker.line.color",t&&!Array.isArray(t)&&n.marker.color!==t?t:f?m.background:m.defaultLine),g(e,"marker.line")&&k(e,n,l,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width",f?1:0)),f&&(r("marker.sizeref"),r("marker.sizemin"),r("marker.sizemode")),d.gradient&&"none"!==r("marker.gradient.type")&&r("marker.gradient.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"./subtypes":961}],956:[function(v,$,Q){"use strict";var m=v("../../lib").dateTick0,g=v("../../constants/numerical").ONEWEEK;function k(x,e){return m(e,x%g==0?1:0)}$.exports=function(x,e,n,i,l){if(l||(l={x:!0,y:!0}),l.x){var r=i("xperiod");r&&(i("xperiod0",k(r,e.xcalendar)),i("xperiodalignment"))}if(l.y){var d=i("yperiod");d&&(i("yperiod0",k(d,e.ycalendar)),i("yperiodalignment"))}}},{"../../constants/numerical":491,"../../lib":515}],957:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../registry"),k=v("../../lib"),x=k.ensureSingle,e=k.identity,n=v("../../components/drawing"),i=v("./subtypes"),l=v("./line_points"),r=v("./link_traces"),d=v("../../lib/polygon").tester;function f(t,h,s,o,p,c,a){var y;!function(de,Te,Ee,Ae,De){var Ie=Ee.xaxis,Oe=Ee.yaxis,Xe=m.extent(k.simpleMap(Ie.range,Ie.r2c)),Fe=m.extent(k.simpleMap(Oe.range,Oe.r2c)),Pe=Ae[0].trace;if(i.hasMarkers(Pe)){var Re=Pe.marker.maxdisplayed;if(0!==Re){var qe=Ae.filter(function(Tt){return Tt.x>=Xe[0]&&Tt.x<=Xe[1]&&Tt.y>=Fe[0]&&Tt.y<=Fe[1]}),Qe=Math.ceil(qe.length/Re),ct=0;De.forEach(function(Tt,_t){var nt=Tt[0].trace;i.hasMarkers(nt)&&nt.marker.maxdisplayed>0&&_t<Te&&ct++});var bt=Math.round(ct*Qe/3+Math.floor(ct/3)*Qe/7.1);Ae.forEach(function(Tt){delete Tt.vis}),qe.forEach(function(Tt,_t){0===Math.round((_t+bt)%Qe)&&(Tt.vis=!0)})}}}(0,h,s,o,p);var u=!!a&&a.duration>0;function _(de){return u?de.transition():de}var b=s.xaxis,w=s.yaxis,T=o[0].trace,C=T.line,M=m.select(c),I=x(M,"g","errorbars"),P=x(M,"g","lines"),S=x(M,"g","points"),E=x(M,"g","text");if(g.getComponentMethod("errorbars","plot")(t,I,s,a),!0===T.visible){var R,D;_(M).style("opacity",T.opacity);var j=T.fill.charAt(T.fill.length-1);"x"!==j&&"y"!==j&&(j=""),o[0][s.isRangePlot?"nodeRangePlot3":"node3"]=M;var H,Y,X="",Z=[],W=T._prevtrace;W&&(X=W._prevRevpath||"",D=W._nextFill,Z=W._polygons);var re,U,B,V,ee,N,K,J="",te="",ae=[],le=k.noop;if(R=T._ownFill,i.hasLines(T)||"none"!==T.fill){for(D&&D.datum(o),-1!==["hv","vh","hvh","vhv"].indexOf(C.shape)?(re=n.steps(C.shape),U=n.steps(C.shape.split("").reverse().join(""))):re=U="spline"===C.shape?function(de){var Te=de[de.length-1];return de.length>1&&de[0][0]===Te[0]&&de[0][1]===Te[1]?n.smoothclosed(de.slice(1),C.smoothing):n.smoothopen(de,C.smoothing)}:function(de){return"M"+de.join("L")},B=function(de){return U(de.reverse())},ae=l(o,{xaxis:b,yaxis:w,trace:T,connectGaps:T.connectgaps,baseTolerance:Math.max(C.width||1,3)/4,shape:C.shape,backoff:C.backoff,simplify:C.simplify,fill:T.fill}),K=T._polygons=new Array(ae.length),y=0;y<ae.length;y++)T._polygons[y]=d(ae[y]);ae.length&&(V=ae[0][0],N=(ee=ae[ae.length-1])[ee.length-1]),le=function(de){return function(Te){if(H=re(Te),Y=B(Te),J?j?(J+="L"+H.substr(1),te=Y+"L"+te.substr(1)):(J+="Z"+H,te=Y+"Z"+te):(J=H,te=Y),i.hasLines(T)&&Te.length>1){var Ee=m.select(this);if(Ee.datum(o),de)_(Ee.style("opacity",0).attr("d",H).call(n.lineGroupStyle)).style("opacity",1);else{var Ae=_(Ee);Ae.attr("d",H),n.singleLineStyle(o,Ae)}}}}}var se=P.selectAll(".js-line").data(ae);_(se.exit()).style("opacity",0).remove(),se.each(le(!1)),se.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(n.lineGroupStyle).each(le(!0)),n.setClipUrl(se,s.layerClipId,t),ae.length?(R?(R.datum(o),V&&N&&(j?("y"===j?V[1]=N[1]=w.c2p(0,!0):"x"===j&&(V[0]=N[0]=b.c2p(0,!0)),_(R).attr("d","M"+N+"L"+V+"L"+J.substr(1)).call(n.singleFillStyle,t)):_(R).attr("d",J+"Z").call(n.singleFillStyle,t))):D&&("tonext"===T.fill.substr(0,6)&&J&&X?("tonext"===T.fill?_(D).attr("d",J+"Z"+X+"Z").call(n.singleFillStyle,t):_(D).attr("d",J+"L"+X.substr(1)+"Z").call(n.singleFillStyle,t),T._polygons=T._polygons.concat(Z)):(ue(D),T._polygons=null)),T._prevRevpath=te,T._prevPolygons=K):(R?ue(R):D&&ue(D),T._polygons=T._prevRevpath=T._prevPolygons=null),S.datum(o),E.datum(o),function(de,Te,Ee){var Ae,De=Ee[0].trace,Ie=i.hasMarkers(De),Oe=i.hasText(De),Xe=function we(de){if(de.ids)return ge}(De),Fe=oe,Pe=oe;if(Ie||Oe){var Re=e,qe=De.stackgroup,Qe=qe&&"infer zero"===t._fullLayout._scatterStackOpts[b._id+w._id][qe].stackgaps;De.marker.maxdisplayed||De._needsCull?Re=Qe?Me:ye:qe&&!Qe&&(Re=pe),Ie&&(Fe=Re),Oe&&(Pe=Re)}var ct,bt=(Ae=de.selectAll("path.point").data(Fe,Xe)).enter().append("path").classed("point",!0);u&&bt.call(n.pointStyle,De,t).call(n.translatePoints,b,w).style("opacity",0).transition().style("opacity",1),Ae.order(),Ie&&(ct=n.makePointStyleFns(De)),Ae.each(function(Tt){var _t=m.select(this),nt=_(_t);n.translatePoint(Tt,nt,b,w)?(n.singlePointStyle(Tt,nt,De,ct,t),s.layerClipId&&n.hideOutsideRangePoint(Tt,nt,b,w,De.xcalendar,De.ycalendar),De.customdata&&_t.classed("plotly-customdata",null!=Tt.data)):nt.remove()}),u?Ae.exit().transition().style("opacity",0).remove():Ae.exit().remove(),(Ae=Te.selectAll("g").data(Pe,Xe)).enter().append("g").classed("textpoint",!0).append("text"),Ae.order(),Ae.each(function(Tt){var _t=m.select(this),nt=_(_t.select("text"));n.translatePoint(Tt,nt,b,w)?s.layerClipId&&n.hideOutsideRangePoint(Tt,_t,b,w,De.xcalendar,De.ycalendar):_t.remove()}),Ae.selectAll("text").call(n.textPointStyle,De,t).each(function(Tt){var _t=b.c2p(Tt.x),nt=w.c2p(Tt.y);m.select(this).selectAll("tspan.line").each(function(){_(m.select(this)).attr({x:_t,y:nt})})}),Ae.exit().remove()}(S,E,o);var ve=!1===T.cliponaxis?null:s.layerClipId;n.setClipUrl(S,ve,t),n.setClipUrl(E,ve,t)}function ue(de){_(de).attr("d","M0,0Z")}function ye(de){return de.filter(function(Te){return!Te.gap&&Te.vis})}function Me(de){return de.filter(function(Te){return Te.vis})}function pe(de){return de.filter(function(Te){return!Te.gap})}function ge(de){return de.id}function oe(){return!1}}$.exports=function(t,h,s,o,p,c){var a,y,w,C,u=!p,_=!!p&&p.duration>0,b=r(t,h,s);(a=o.selectAll("g.trace").data(b,function(w){return w[0].trace.uid})).enter().append("g").attr("class",function(w){return"trace scatter trace"+w[0].trace.uid}).style("stroke-miterlimit",2),a.order(),w=t,C=h,a.each(function(M){var I=x(m.select(this),"g","fills");n.setClipUrl(I,C.layerClipId,w);var P=M[0].trace,S=[];P._ownfill&&S.push("_ownFill"),P._nexttrace&&S.push("_nextFill");var E=I.selectAll("g").data(S,e);E.enter().append("g"),E.exit().each(function(R){P[R]=null}).remove(),E.order().each(function(R){P[R]=x(m.select(this),"path","js-fill")})}),_?(c&&(y=c()),m.transition().duration(p.duration).ease(p.easing).each("end",function(){y&&y()}).each("interrupt",function(){y&&y()}).each(function(){o.selectAll("g.trace").each(function(w,T){f(t,T,h,w,b,this,p)})})):a.each(function(w,T){f(t,T,h,w,b,this,p)}),u&&a.exit().remove(),o.selectAll("path:not([d])").remove()}},{"../../components/drawing":389,"../../lib":515,"../../lib/polygon":527,"../../registry":647,"./line_points":950,"./link_traces":952,"./subtypes":961,"@plotly/d3":58}],958:[function(v,$,Q){"use strict";var m=v("./subtypes");$.exports=function(g,k){var x,e,n,i,l=g.cd,r=g.xaxis,d=g.yaxis,f=[],t=l[0].trace;if(!m.hasMarkers(t)&&!m.hasText(t))return[];if(!1===k)for(x=0;x<l.length;x++)l[x].selected=0;else for(x=0;x<l.length;x++)n=r.c2p((e=l[x]).x),i=d.c2p(e.y),null!==e.i&&k.contains([n,i],!1,x,g)?(f.push({pointNumber:e.i,x:r.c2d(e.x),y:d.c2d(e.y)}),e.selected=1):e.selected=0;return f}},{"./subtypes":961}],959:[function(v,$,Q){"use strict";var m=["orientation","groupnorm","stackgaps"];$.exports=function(g,k,x,e){var n=x._scatterStackOpts,i=e("stackgroup");if(i){var l=k.xaxis+k.yaxis,r=n[l];r||(r=n[l]={});var d=r[i],f=!1;d?d.traces.push(k):(d=r[i]={traceIndices:[],traces:[k]},f=!0);for(var t={orientation:k.x&&!k.y?"h":"v"},h=0;h<m.length;h++){var s=m[h],o=s+"Found";if(!d[o]){var p=void 0!==g[s],c="orientation"===s;if((p||f)&&(d[s]=e(s,t[s]),c&&(d.fillDflt="h"===d[s]?"tonextx":"tonexty"),p&&(d[o]=!0,!f&&(delete d.traces[0][s],c))))for(var a=0;a<d.traces.length-1;a++){var y=d.traces[a];y._input.fill!==y.fill&&(y.fill=d.fillDflt)}}}return d}}},{}],960:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/drawing"),k=v("../../registry");function x(n,i,l){g.pointStyle(n.selectAll("path.point"),i,l)}function e(n,i,l){g.textPointStyle(n.selectAll("text"),i,l)}$.exports={style:function(n){var i=m.select(n).selectAll("g.trace.scatter");i.style("opacity",function(l){return l[0].trace.opacity}),i.selectAll("g.points").each(function(l){x(m.select(this),l.trace||l[0].trace,n)}),i.selectAll("g.text").each(function(l){e(m.select(this),l.trace||l[0].trace,n)}),i.selectAll("g.trace path.js-line").call(g.lineGroupStyle),i.selectAll("g.trace path.js-fill").call(g.fillGroupStyle,n),k.getComponentMethod("errorbars","style")(i)},stylePoints:x,styleText:e,styleOnSelect:function(n,i,l){var r=i[0].trace;r.selectedpoints?(g.selectedPointStyle(l.selectAll("path.point"),r),g.selectedTextStyle(l.selectAll("text"),r)):(x(l,r,n),e(l,r,n))}}},{"../../components/drawing":389,"../../registry":647,"@plotly/d3":58}],961:[function(v,$,Q){"use strict";var m=v("../../lib");$.exports={hasLines:function(g){return g.visible&&g.mode&&-1!==g.mode.indexOf("lines")},hasMarkers:function(g){return g.visible&&(g.mode&&-1!==g.mode.indexOf("markers")||"splom"===g.type)},hasText:function(g){return g.visible&&g.mode&&-1!==g.mode.indexOf("text")},isBubble:function(g){return m.isPlainObject(g.marker)&&m.isArrayOrTypedArray(g.marker.size)}}},{"../../lib":515}],962:[function(v,$,Q){"use strict";var m=v("../../lib");$.exports=function(g,k,x,e,n){n=n||{},e("textposition"),m.coerceFont(e,"textfont",x.font),n.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":515}],963:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../registry");$.exports=function(k,x,e,n){var i,l=n("x"),r=n("y");if(g.getComponentMethod("calendars","handleTraceDefaults")(k,x,["x","y"],e),l){var d=m.minRowLength(l);r?i=Math.min(d,m.minRowLength(r)):(i=d,n("y0"),n("dy"))}else{if(!r)return 0;i=m.minRowLength(r),n("x0"),n("dx")}return x._length=i,i}},{"../../lib":515,"../../registry":647}],964:[function(v,$,Q){"use strict";var m=v("../scatter/attributes"),g=v("../../components/colorscale/attributes"),k=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../../plots/template_attributes").texttemplateAttrs,n=v("../../plots/attributes"),i=v("../../constants/gl3d_dashes"),l=v("../../constants/gl3d_markers"),r=v("../../lib/extend").extendFlat,d=v("../../plot_api/edit_types").overrideAll,f=v("../../lib/sort_object_keys"),h=m.marker,s=h.line,o=r({width:m.line.width,dash:{valType:"enumerated",values:f(i),dflt:"solid"}},g("line")),p=$.exports=d({x:m.x,y:m.y,z:{valType:"data_array"},text:r({},m.text,{}),texttemplate:e({},{}),hovertext:r({},m.hovertext,{}),hovertemplate:x(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),mode:r({},m.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:m.connectgaps,line:o,marker:r({symbol:{valType:"enumerated",values:f(l),dflt:"circle",arrayOk:!0},size:r({},h.size,{dflt:8}),sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode,opacity:r({},h.opacity,{arrayOk:!1}),colorbar:h.colorbar,line:r({width:r({},s.width,{arrayOk:!1})},g("marker.line"))},g("marker")),textposition:r({},m.textposition,{dflt:"top center"}),textfont:{color:m.textfont.color,size:m.textfont.size,family:r({},m.textfont.family,{arrayOk:!1})},opacity:n.opacity,hoverinfo:r({},n.hoverinfo)},"calc","nested");p.x.editType=p.y.editType=p.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":374,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../scatter/attributes":936}],965:[function(v,$,Q){"use strict";var m=v("../scatter/arrays_to_calcdata"),g=v("../scatter/colorscale_calc");$.exports=function(k,x){var e=[{x:!1,y:!1,trace:x,t:{}}];return m(e,x),g(k,x),e}},{"../scatter/arrays_to_calcdata":935,"../scatter/colorscale_calc":939}],966:[function(v,$,Q){"use strict";var m=v("../../registry");function g(k,x,e,n){if(!x||!x.visible)return null;for(var i=m.getComponentMethod("errorbars","makeComputeError")(x),l=new Array(k.length),r=0;r<k.length;r++){var d=i(+k[r],r);if("log"===n.type){var f=n.c2l(k[r]),t=k[r]-d[0],h=k[r]+d[1];if(l[r]=[(n.c2l(t,!0)-f)*e,(n.c2l(h,!0)-f)*e],t>0){var s=n.c2l(t);n._lowerLogErrorBound||(n._lowerLogErrorBound=s),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,s)}}else l[r]=[-d[0]*e,d[1]*e]}return l}$.exports=function(k,x,e){var n=[g(k.x,k.error_x,x[0],e.xaxis),g(k.y,k.error_y,x[1],e.yaxis),g(k.z,k.error_z,x[2],e.zaxis)],i=function(h){for(var s=0;s<h.length;s++)if(h[s])return h[s].length;return 0}(n);if(0===i)return null;for(var l=new Array(i),r=0;r<i;r++){for(var d=[[0,0,0],[0,0,0]],f=0;f<3;f++)if(n[f])for(var t=0;t<2;t++)d[t][f]=n[f][r][t];l[r]=d}return l}},{"../../registry":647}],967:[function(v,$,Q){"use strict";var m=v("../../../stackgl_modules").gl_line3d,g=v("../../../stackgl_modules").gl_scatter3d,k=v("../../../stackgl_modules").gl_error3d,x=v("../../../stackgl_modules").gl_mesh3d,e=v("../../../stackgl_modules").delaunay_triangulate,n=v("../../lib"),i=v("../../lib/str2rgbarray"),l=v("../../lib/gl_format_color").formatColor,r=v("../scatter/make_bubble_size_func"),d=v("../../constants/gl3d_dashes"),f=v("../../constants/gl3d_markers"),t=v("../../plots/cartesian/axes"),h=v("../../components/fx/helpers").appendArrayPointValue,s=v("./calc_errors");function o(C,M){this.scene=C,this.uid=M,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var p=o.prototype;function c(C){return null==C?0:C.indexOf("left")>-1?-1:C.indexOf("right")>-1?1:0}function a(C){return null==C?0:C.indexOf("top")>-1?-1:C.indexOf("bottom")>-1?1:0}function y(C,M){return M(4*C)}function u(C){return f[C]}function _(C,M,I,P,S){var E=null;if(n.isArrayOrTypedArray(C)){E=[];for(var R=0;R<M;R++)E[R]=void 0===C[R]?P:I(C[R],S)}else E=I(C,n.identity);return E}function w(C){if(n.isArrayOrTypedArray(C)){var M=C[0];return n.isArrayOrTypedArray(M)&&(C=M),"rgb("+C.slice(0,3).map(function(I){return Math.round(255*I)})+")"}return null}function T(C){return n.isArrayOrTypedArray(C)?4===C.length&&"number"==typeof C[0]?w(C):C.map(w):null}p.handlePick=function(C){if(C.object&&(C.object===this.linePlot||C.object===this.delaunayMesh||C.object===this.textMarkers||C.object===this.scatterPlot)){var M=C.index=C.data.index;return C.object.highlight&&C.object.highlight(null),this.scatterPlot&&(C.object=this.scatterPlot,this.scatterPlot.highlight(C.data)),C.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[M]||0===this.textLabels[M])&&(C.textLabel=this.textLabels[M]):C.textLabel=this.textLabels),C.traceCoordinate=[this.data.x[M],this.data.y[M],this.data.z[M]],!0}},p.update=function(C){var M,I,P,S,E=this.scene.glplot.gl,R=d.solid;this.data=C;var D=function b(C,M){var I,P,S,E,R,D,j=[],H=C.fullSceneLayout,Y=C.dataScale,X=H.xaxis,Z=H.yaxis,W=H.zaxis,re=M.marker,U=M.line,B=M.x||[],V=M.y||[],ee=M.z||[],N=B.length,K=M.xcalendar,J=M.ycalendar,te=M.zcalendar;for(R=0;R<N;R++)I=X.d2l(B[R],0,K)*Y[0],P=Z.d2l(V[R],0,J)*Y[1],S=W.d2l(ee[R],0,te)*Y[2],j[R]=[I,P,S];if(Array.isArray(M.text))D=M.text;else if(void 0!==M.text)for(D=new Array(N),R=0;R<N;R++)D[R]=M.text;function ae(Ae,De){var Ie=H[Ae];return t.tickText(Ie,Ie.d2l(De),!0).text}var le=M.texttemplate;if(le){var se=C.fullLayout._d3locale,ve=Array.isArray(le),ue=ve?Math.min(le.length,N):N,ye=ve?function(Ae){return le[Ae]}:function(){return le};for(D=new Array(ue),R=0;R<ue;R++){var Me={x:B[R],y:V[R],z:ee[R]},pe={xLabel:ae("xaxis",B[R]),yLabel:ae("yaxis",V[R]),zLabel:ae("zaxis",ee[R])},ge={};h(ge,M,R);var we=M._meta||{};D[R]=n.texttemplateString(ye(R),pe,se,ge,Me,we)}}if(E={position:j,mode:M.mode,text:D},"line"in M&&(E.lineColor=l(U,1,N),E.lineWidth=U.width,E.lineDashes=U.dash),"marker"in M){var oe=r(M);E.scatterColor=l(re,1,N),E.scatterSize=_(re.size,N,y,20,oe),E.scatterMarker=_(re.symbol,N,u,"\u25cf"),E.scatterLineWidth=re.line.width,E.scatterLineColor=l(re.line,1,N),E.scatterAngle=0}"textposition"in M&&(E.textOffset=function(Ae){var De=[0,0];if(Array.isArray(Ae))for(var Ie=0;Ie<Ae.length;Ie++)De[Ie]=[0,0],Ae[Ie]&&(De[Ie][0]=c(Ae[Ie]),De[Ie][1]=a(Ae[Ie]));else De[0]=c(Ae),De[1]=a(Ae);return De}(M.textposition),E.textColor=l(M.textfont,1,N),E.textSize=_(M.textfont.size,N,n.identity,12),E.textFont=M.textfont.family,E.textAngle=0);var de=["x","y","z"];for(E.project=[!1,!1,!1],E.projectScale=[1,1,1],E.projectOpacity=[1,1,1],R=0;R<3;++R){var Te=M.projection[de[R]];(E.project[R]=Te.show)&&(E.projectOpacity[R]=Te.opacity,E.projectScale[R]=Te.scale)}E.errorBounds=s(M,Y,H);var Ee=function(Ae){for(var De=[0,0,0],Ie=[[0,0,0],[0,0,0],[0,0,0]],Oe=[1,1,1],Xe=0;Xe<3;Xe++){var Fe=Ae[Xe];Fe&&!1!==Fe.copy_zstyle&&!1!==Ae[2].visible&&(Fe=Ae[2]),Fe&&Fe.visible&&(De[Xe]=Fe.width/2,Ie[Xe]=i(Fe.color),Oe[Xe]=Fe.thickness)}return{capSize:De,color:Ie,lineWidth:Oe}}([M.error_x,M.error_y,M.error_z]);return E.errorColor=Ee.color,E.errorLineWidth=Ee.lineWidth,E.errorCapSize=Ee.capSize,E.delaunayAxis=M.surfaceaxis,E.delaunayColor=i(M.surfacecolor),E}(this.scene,C);"mode"in D&&(this.mode=D.mode),"lineDashes"in D&&D.lineDashes in d&&(R=d[D.lineDashes]),this.color=T(D.scatterColor)||T(D.lineColor),this.dataPoints=D.position,M={gl:this.scene.glplot.gl,position:D.position,color:D.lineColor,lineWidth:D.lineWidth||1,dashes:R[0],dashScale:R[1],opacity:C.opacity,connectGaps:C.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(M):(this.linePlot=m(M),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var j=C.opacity;if(C.marker&&C.marker.opacity&&(j*=C.marker.opacity),I={gl:this.scene.glplot.gl,position:D.position,color:D.scatterColor,size:D.scatterSize,glyph:D.scatterMarker,opacity:j,orthographic:!0,lineWidth:D.scatterLineWidth,lineColor:D.scatterLineColor,project:D.project,projectScale:D.projectScale,projectOpacity:D.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(I):(this.scatterPlot=g(I),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),S={gl:this.scene.glplot.gl,position:D.position,glyph:D.text,color:D.textColor,size:D.textSize,angle:D.textAngle,alignment:D.textOffset,font:D.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:C.opacity},this.textLabels=C.hovertext||C.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(S):(this.textMarkers=g(S),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),P={gl:this.scene.glplot.gl,position:D.position,color:D.errorColor,error:D.errorBounds,lineWidth:D.errorLineWidth,capSize:D.errorCapSize,opacity:C.opacity},this.errorBars?D.errorBounds?this.errorBars.update(P):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):D.errorBounds&&(this.errorBars=k(P),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),D.delaunayAxis>=0){var H=function(Y,X,Z){var W,re=(Z+1)%3,U=(Z+2)%3,B=[],V=[];for(W=0;W<Y.length;++W){var ee=Y[W];!isNaN(ee[re])&&isFinite(ee[re])&&!isNaN(ee[U])&&isFinite(ee[U])&&(B.push([ee[re],ee[U]]),V.push(W))}var N=e(B);for(W=0;W<N.length;++W)for(var K=N[W],J=0;J<K.length;++J)K[J]=V[K[J]];return{positions:Y,cells:N,meshColor:X}}(D.position,D.delaunayColor,D.delaunayAxis);H.opacity=C.opacity,this.delaunayMesh?this.delaunayMesh.update(H):(H.gl=E,this.delaunayMesh=x(H),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},p.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},$.exports=function(C,M){var I=new o(C,M.uid);return I.update(M),I}},{"../../../stackgl_modules":1133,"../../components/fx/helpers":403,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../scatter/make_bubble_size_func":953,"./calc_errors":966}],968:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../lib"),k=v("../scatter/subtypes"),x=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),n=v("../scatter/text_defaults"),i=v("./attributes");$.exports=function(l,r,d,f){function t(y,u){return g.coerce(l,r,i,y,u)}if(y=l,u=r,b=f,w=0,T=(_=t)("x"),C=_("y"),M=_("z"),m.getComponentMethod("calendars","handleTraceDefaults")(y,u,["x","y","z"],b),T&&C&&M&&(w=Math.min(T.length,C.length,M.length),u._length=u._xlength=u._ylength=u._zlength=w),w){t("text"),t("hovertext"),t("hovertemplate"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),t("mode"),k.hasLines(r)&&(t("connectgaps"),e(l,r,d,f,t)),k.hasMarkers(r)&&x(l,r,d,f,t,{noSelect:!0,noAngle:!0}),k.hasText(r)&&(t("texttemplate"),n(l,r,f,t,{noSelect:!0}));var h=(r.line||{}).color,s=(r.marker||{}).color;t("surfaceaxis")>=0&&t("surfacecolor",h||s);for(var o=["x","y","z"],p=0;p<3;++p){var c="projection."+o[p];t(c+".show")&&(t(c+".opacity"),t(c+".scale"))}var a=m.getComponentMethod("errorbars","supplyDefaults");a(l,r,h||s||d,{axis:"z"}),a(l,r,h||s||d,{axis:"y",inherit:"z"}),a(l,r,h||s||d,{axis:"x",inherit:"z"})}else r.visible=!1;var y,u,_,b,w,T,C,M}},{"../../lib":515,"../../registry":647,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":964}],969:[function(v,$,Q){"use strict";$.exports={plot:v("./convert"),attributes:v("./attributes"),markerSymbols:v("../../constants/gl3d_markers"),supplyDefaults:v("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:v("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":489,"../../plots/gl3d":607,"./attributes":964,"./calc":965,"./convert":967,"./defaults":968}],970:[function(v,$,Q){"use strict";var m=v("../scatter/attributes"),g=v("../../plots/attributes"),k=v("../../plots/template_attributes").hovertemplateAttrs,x=v("../../plots/template_attributes").texttemplateAttrs,e=v("../../components/colorscale/attributes"),n=v("../../lib/extend").extendFlat,i=m.marker,l=m.line,r=i.line;$.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:n({},m.mode,{dflt:"markers"}),text:n({},m.text,{}),texttemplate:x({editType:"plot"},{keys:["a","b","text"]}),hovertext:n({},m.hovertext,{}),line:{color:l.color,width:l.width,dash:l.dash,backoff:l.backoff,shape:n({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:m.connectgaps,fill:n({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,marker:n({symbol:i.symbol,opacity:i.opacity,maxdisplayed:i.maxdisplayed,angle:i.angle,angleref:i.angleref,standoff:i.standoff,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:n({width:r.width,editType:"calc"},e("marker.line")),gradient:i.gradient,editType:"calc"},e("marker")),textfont:m.textfont,textposition:m.textposition,selected:m.selected,unselected:m.unselected,hoverinfo:n({},g.hoverinfo,{flags:["a","b","text","name"]}),hoveron:m.hoveron,hovertemplate:k()}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],971:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../scatter/colorscale_calc"),k=v("../scatter/arrays_to_calcdata"),x=v("../scatter/calc_selection"),e=v("../scatter/calc").calcMarkerSize,n=v("../carpet/lookup_carpetid");$.exports=function(i,l){var r=l._carpetTrace=n(i,l);if(r&&r.visible&&"legendonly"!==r.visible){var d;l.xaxis=r.xaxis,l.yaxis=r.yaxis;var f,t,h=l._length,s=new Array(h),o=!1;for(d=0;d<h;d++)if(t=l.b[d],m(f=l.a[d])&&m(t)){var p=r.ab2xy(+f,+t,!0),c=r.isVisible(+f,+t);c||(o=!0),s[d]={x:p[0],y:p[1],a:f,b:t,vis:c}}else s[d]={x:!1,y:!1};return l._needsCull=o,s[0].carpet=r,s[0].trace=l,e(l,h),g(i,l),k(s,l),x(s,l),s}}},{"../carpet/lookup_carpetid":717,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],972:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../scatter/constants"),k=v("../scatter/subtypes"),x=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),n=v("../scatter/line_shape_defaults"),i=v("../scatter/text_defaults"),l=v("../scatter/fillcolor_defaults"),r=v("./attributes");$.exports=function(d,f,t,h){function s(y,u){return m.coerce(d,f,r,y,u)}s("carpet"),f.xaxis="x",f.yaxis="y";var o=s("a"),p=s("b"),c=Math.min(o.length,p.length);if(c){f._length=c,s("text"),s("texttemplate"),s("hovertext"),s("mode",c<g.PTS_LINESONLY?"lines+markers":"lines"),k.hasLines(f)&&(e(d,f,t,h,s,{backoff:!0}),n(d,f,s),s("connectgaps")),k.hasMarkers(f)&&x(d,f,t,h,s,{gradient:!0}),k.hasText(f)&&i(d,f,h,s);var a=[];(k.hasMarkers(f)||k.hasText(f))&&(s("marker.maxdisplayed"),a.push("points")),s("fill"),"none"!==f.fill&&(l(d,f,t,s),k.hasLines(f)||n(d,f,s)),"tonext"!==f.fill&&"toself"!==f.fill||a.push("fills"),"fills"!==s("hoveron",a.join("+")||"points")&&s("hovertemplate"),m.coerceSelectionMarkerOpacity(f,s)}else f.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":970}],973:[function(v,$,Q){"use strict";$.exports=function(m,g,k,x,e){var n=x[e];return m.a=n.a,m.b=n.b,m.y=n.y,m}},{}],974:[function(v,$,Q){"use strict";$.exports=function(m,g){var k={},x=g._carpet,e=x.ab2ij([m.a,m.b]),n=Math.floor(e[0]),i=e[0]-n,l=Math.floor(e[1]),d=x.evalxy([],n,l,i,e[1]-l);return k.yLabel=d[1].toFixed(3),k}},{}],975:[function(v,$,Q){"use strict";var m=v("../scatter/hover"),g=v("../../lib").fillText;$.exports=function(k,x,e,n){var i=m(k,x,e,n);if(i&&!1!==i[0].index){var l=i[0];if(void 0===l.index){var d=k.xa._length,f=d*(1-l.y0/k.ya._length)/2,t=d-f;return l.x0=Math.max(Math.min(l.x0,t),f),l.x1=Math.max(Math.min(l.x1,t),f),i}var h=l.cd[l.index];l.a=h.a,l.b=h.b,l.xLabelVal=void 0,l.yLabelVal=void 0;var s=l.trace,o=s._carpet,p=s._module.formatLabels(h,s);l.yLabel=p.yLabel,delete l.text;var c=[];if(!s.hovertemplate){var a=(h.hi||s.hoverinfo).split("+");-1!==a.indexOf("all")&&(a=["a","b","text"]),-1!==a.indexOf("a")&&y(o.aaxis,h.a),-1!==a.indexOf("b")&&y(o.baxis,h.b),c.push("y: "+l.yLabel),-1!==a.indexOf("text")&&g(h,s,c),l.extraText=c.join("<br>")}return i}function y(u,_){var b;b=u.labelprefix&&u.labelprefix.length>0?u.labelprefix.replace(/ = $/,""):u._hovertitle,c.push(b+": "+_.toFixed(3)+u.labelsuffix)}}},{"../../lib":515,"../scatter/hover":947}],976:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../scatter/select"),eventData:v("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:v("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":970,"./calc":971,"./defaults":972,"./event_data":973,"./format_labels":974,"./hover":975,"./plot":977}],977:[function(v,$,Q){"use strict";var m=v("../scatter/plot"),g=v("../../plots/cartesian/axes"),k=v("../../components/drawing");$.exports=function(x,e,n,i){var l,r,d,f=n[0][0].carpet,t=g.getFromId(x,f.xaxis||"x"),h=g.getFromId(x,f.yaxis||"y"),s={xaxis:t,yaxis:h,plot:e.plot};for(l=0;l<n.length;l++)(r=n[l][0].trace)._xA=t,r._yA=h;for(m(x,s,n,i),l=0;l<n.length;l++)d=i.selectAll("g.trace"+(r=n[l][0].trace).uid+" .js-line"),k.setClipUrl(d,n[l][0].carpet._clipPathId,x)}},{"../../components/drawing":389,"../../plots/cartesian/axes":566,"../scatter/plot":957}],978:[function(v,$,Q){"use strict";var m=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../plots/template_attributes").texttemplateAttrs,k=v("../scatter/attributes"),x=v("../../plots/attributes"),e=v("../../components/colorscale/attributes"),n=v("../../components/drawing/attributes").dash,i=v("../../lib/extend").extendFlat,l=v("../../plot_api/edit_types").overrideAll,r=k.marker,d=k.line,f=r.line;$.exports=l({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:i({},k.mode,{dflt:"markers"}),text:i({},k.text,{}),texttemplate:g({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:i({},k.hovertext,{}),textfont:k.textfont,textposition:k.textposition,line:{color:d.color,width:d.width,dash:n},connectgaps:k.connectgaps,marker:i({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:i({},r.angleref,{values:["previous","up","north"]}),standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:i({width:f.width},e("marker.line")),gradient:r.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:k.fillcolor,selected:k.selected,unselected:k.unselected,hoverinfo:i({},x.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:m()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],979:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../constants/numerical").BADNUM,k=v("../scatter/colorscale_calc"),x=v("../scatter/arrays_to_calcdata"),e=v("../scatter/calc_selection"),n=v("../../lib")._;function i(l){return l&&"string"==typeof l}$.exports=function(l,r){var d,f=Array.isArray(r.locations),t=f?r.locations.length:r._length,h=new Array(t);d=r.geojson?function(y){return i(y)||m(y)}:i;for(var s=0;s<t;s++){var o=h[s]={};if(f){var p=r.locations[s];o.loc=d(p)?p:null}else{var c=r.lon[s],a=r.lat[s];o.lonlat=m(c)&&m(a)?[+c,+a]:[g,g]}}return x(h,r),k(l,r),e(h,r),t&&(h[0].t={labels:{lat:n(l,"lat:")+" ",lon:n(l,"lon:")+" "}}),h}},{"../../constants/numerical":491,"../../lib":515,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],980:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../scatter/subtypes"),k=v("../scatter/marker_defaults"),x=v("../scatter/line_defaults"),e=v("../scatter/text_defaults"),n=v("../scatter/fillcolor_defaults"),i=v("./attributes");$.exports=function(l,r,d,f){function t(y,u){return m.coerce(l,r,i,y,u)}var h,s=t("locations");if(s&&s.length){var o,p=t("geojson");("string"==typeof p&&""!==p||m.isPlainObject(p))&&(o="geojson-id"),"geojson-id"===t("locationmode",o)&&t("featureidkey"),h=s.length}else{var c=t("lon")||[],a=t("lat")||[];h=Math.min(c.length,a.length)}h?(r._length=h,t("text"),t("hovertext"),t("hovertemplate"),t("mode"),g.hasLines(r)&&(x(l,r,d,f,t),t("connectgaps")),g.hasMarkers(r)&&k(l,r,d,f,t,{gradient:!0}),g.hasText(r)&&(t("texttemplate"),e(l,r,f,t)),t("fill"),"none"!==r.fill&&n(l,r,d,t),m.coerceSelectionMarkerOpacity(r,t)):r.visible=!1}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":978}],981:[function(v,$,Q){"use strict";$.exports=function(m,g,k,x,e){m.lon=g.lon,m.lat=g.lat,m.location=g.loc?g.loc:null;var n=x[e];return n.fIn&&n.fIn.properties&&(m.properties=n.fIn.properties),m}},{}],982:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes");$.exports=function(g,k,x){var e={},n=x[k.geo]._subplot.mockAxis,i=g.lonlat;return e.lonLabel=m.tickText(n,n.c2l(i[0]),!0).text,e.latLabel=m.tickText(n,n.c2l(i[1]),!0).text,e}},{"../../plots/cartesian/axes":566}],983:[function(v,$,Q){"use strict";var m=v("../../components/fx"),g=v("../../constants/numerical").BADNUM,k=v("../scatter/get_trace_color"),x=v("../../lib").fillText,e=v("./attributes");$.exports=function(n,i,l){var r=n.cd,d=r[0].trace,f=n.xa,t=n.ya,h=n.subplot,s=h.projection.isLonLatOverEdges,o=h.project;if(m.getClosest(r,function(b){var w=b.lonlat;if(w[0]===g||s(w))return 1/0;var T=o(w),C=o([i,l]),M=Math.abs(T[0]-C[0]),I=Math.abs(T[1]-C[1]),P=Math.max(3,b.mrc||0);return Math.max(Math.sqrt(M*M+I*I)-P,1-3/P)},n),!1!==n.index){var p=r[n.index],c=p.lonlat,a=[f.c2p(c),t.c2p(c)],y=p.mrc||1;n.x0=a[0]-y,n.x1=a[0]+y,n.y0=a[1]-y,n.y1=a[1]+y,n.loc=p.loc,n.lon=c[0],n.lat=c[1];var u={};u[d.geo]={_subplot:h};var _=d._module.formatLabels(p,d,u);return n.lonLabel=_.lonLabel,n.latLabel=_.latLabel,n.color=k(d,p),n.extraText=function(b,w,T,C){if(!b.hovertemplate){var M=w.hi||b.hoverinfo,I="all"===M?e.hoverinfo.flags:M.split("+"),P=-1!==I.indexOf("location")&&Array.isArray(b.locations),S=-1!==I.indexOf("lon"),E=-1!==I.indexOf("lat"),R=-1!==I.indexOf("text"),D=[];return P?D.push(w.loc):S&&E?D.push("("+j(T.latLabel)+", "+j(T.lonLabel)+")"):S?D.push(C.lon+j(T.lonLabel)):E&&D.push(C.lat+j(T.latLabel)),R&&x(w,b,D),D.join("<br>")}function j(H){return H+"\xb0"}}(d,p,n,r[0].t.labels),n.hovertemplate=d.hovertemplate,[n]}}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946,"./attributes":978}],984:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),calcGeoJSON:v("./plot").calcGeoJSON,plot:v("./plot").plot,style:v("./style"),styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:v("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":598,"../scatter/marker_colorbar":954,"../scatter/style":960,"./attributes":978,"./calc":979,"./defaults":980,"./event_data":981,"./format_labels":982,"./hover":983,"./plot":985,"./select":986,"./style":987}],985:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=v("../../lib/topojson_utils").getTopojsonFeatures,x=v("../../lib/geojson_utils"),e=v("../../lib/geo_location_utils"),n=v("../../plots/cartesian/autorange").findExtremes,i=v("../../constants/numerical").BADNUM,l=v("../scatter/calc").calcMarkerSize,r=v("../scatter/subtypes"),d=v("./style");$.exports={calcGeoJSON:function(f,t){var h,s,o=f[0].trace,p=t[o.geo],c=p._subplot,a=o._length;if(Array.isArray(o.locations)){var y=o.locationmode,u="geojson-id"===y?e.extractTraceFeature(f):k(o,c.topojson);for(h=0;h<a;h++){s=f[h];var _="geojson-id"===y?s.fOut:e.locationToFeature(y,s.loc,u);s.lonlat=_?_.properties.ct:[i,i]}}var b,w,T={padded:!0};if("geojson"===p.fitbounds&&"geojson-id"===o.locationmode){var C=e.computeBbox(e.getTraceGeojson(o));b=[C[0],C[2]],w=[C[1],C[3]]}else{for(b=new Array(a),w=new Array(a),h=0;h<a;h++)b[h]=(s=f[h]).lonlat[0],w[h]=s.lonlat[1];T.ppad=l(o,a)}o._extremes.lon=n(p.lonaxis._ax,b,T),o._extremes.lat=n(p.lataxis._ax,w,T)},plot:function(f,t,h){var s=t.layers.frontplot.select(".scatterlayer"),o=g.makeTraceGroups(s,h,"trace scattergeo");function p(c,a){c.lonlat[0]===i&&m.select(a).remove()}o.selectAll("*").remove(),o.each(function(c){var a=m.select(this),y=c[0].trace;if(r.hasLines(y)||"none"!==y.fill){var u=x.calcTraceToLineCoords(c),_="none"!==y.fill?x.makePolygon(u):x.makeLine(u);a.selectAll("path.js-line").data([{geojson:_,trace:y}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(y)&&a.selectAll("path.point").data(g.identity).enter().append("path").classed("point",!0).each(function(b){p(b,this)}),r.hasText(y)&&a.selectAll("g").data(g.identity).enter().append("g").append("text").each(function(b){p(b,this)}),d(f,c)})}}},{"../../constants/numerical":491,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"../scatter/calc":937,"../scatter/subtypes":961,"./style":987,"@plotly/d3":58}],986:[function(v,$,Q){"use strict";var m=v("../scatter/subtypes"),g=v("../../constants/numerical").BADNUM;$.exports=function(k,x){var e,n,i,l,r,d=k.cd,f=k.xaxis,t=k.yaxis,h=[],s=d[0].trace;if(!m.hasMarkers(s)&&!m.hasText(s))return[];if(!1===x)for(r=0;r<d.length;r++)d[r].selected=0;else for(r=0;r<d.length;r++)(n=(e=d[r]).lonlat)[0]!==g&&(i=f.c2p(n),l=t.c2p(n),x.contains([i,l],null,r,k)?(h.push({pointNumber:r,lon:n[0],lat:n[1]}),e.selected=1):e.selected=0);return h}},{"../../constants/numerical":491,"../scatter/subtypes":961}],987:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/drawing"),k=v("../../components/color"),x=v("../scatter/style"),e=x.stylePoints,n=x.styleText;$.exports=function(i,l){var r,d,f,t;l&&(r=i,f=(d=l)[0].trace,(t=d[0].node3).style("opacity",d[0].trace.opacity),e(t,f,r),n(t,f,r),t.selectAll("path.js-line").style("fill","none").each(function(h){var s=m.select(this),o=h.trace,p=o.line||{};s.call(k.stroke,p.color).call(g.dashLine,p.dash||"",p.width||0),"none"!==o.fill&&s.call(k.fill,o.fillcolor)}))}},{"../../components/color":367,"../../components/drawing":389,"../scatter/style":960,"@plotly/d3":58}],988:[function(v,$,Q){"use strict";var m=v("../../plots/attributes"),g=v("../scatter/attributes"),k=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=v("../../components/colorscale/attributes"),e=v("../../lib/sort_object_keys"),n=v("../../lib/extend").extendFlat,i=v("../../plot_api/edit_types").overrideAll,l=v("./constants").DASHES,r=g.line,d=g.marker,f=d.line,t=$.exports=i({x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),text:g.text,hovertext:g.hovertext,textposition:g.textposition,textfont:g.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(l),dflt:"solid"}},marker:n({},x("marker"),{symbol:d.symbol,angle:d.angle,size:d.size,sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:d.opacity,colorbar:d.colorbar,line:n({},x("marker.line"),{width:f.width})}),connectgaps:g.connectgaps,fill:n({},g.fill,{dflt:"none"}),fillcolor:g.fillcolor,selected:{marker:g.selected.marker,textfont:g.selected.textfont},unselected:{marker:g.unselected.marker,textfont:g.unselected.textfont},opacity:m.opacity},"calc","nested");t.x.editType=t.y.editType=t.x0.editType=t.y0.editType="calc+clearAxisTypes",t.hovertemplate=g.hovertemplate,t.texttemplate=g.texttemplate},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936,"./constants":991}],989:[function(v,$,Q){"use strict";var m=v("./hover");$.exports={moduleType:"trace",name:"scattergl",basePlotModule:v("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../scatter/cross_trace_defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),hoverPoints:m.hoverPoints,selectPoints:v("./select"),meta:{}}},{"../../plots/cartesian":578,"../scatter/cross_trace_defaults":942,"../scatter/marker_colorbar":954,"./attributes":988,"./calc":990,"./defaults":993,"./format_labels":995,"./hover":997,"./select":1001}],990:[function(v,$,Q){"use strict";var m=v("@plotly/point-cluster"),g=v("../../lib"),k=v("../../plots/cartesian/axis_ids"),x=v("../../plots/cartesian/autorange").findExtremes,e=v("../../plots/cartesian/align_period"),n=v("../scatter/calc"),i=n.calcMarkerSize,l=n.calcAxisExpansion,r=n.setFirstScatter,d=v("../scatter/colorscale_calc"),f=v("./convert"),t=v("./scene_update"),h=v("../../constants/numerical").BADNUM,s=v("./constants").TOO_MANY_POINTS;function o(p,c,a){var y=p._extremes[c._id],u=x(c,a._bnds,{padded:!0});y.min=y.min.concat(u.min),y.max=y.max.concat(u.max)}$.exports=function(p,c){var a,y=p._fullLayout,u=c._xA=k.getFromId(p,c.xaxis,"x"),_=c._yA=k.getFromId(p,c.yaxis,"y"),b=y._plots[c.xaxis+c.yaxis],w=c._length,T=w>=s,C=2*w,M={},I=u.makeCalcdata(c,"x"),P=_.makeCalcdata(c,"y"),S=e(c,u,"x",I),E=e(c,_,"y",P),R=S.vals,D=E.vals;c._x=R,c._y=D,c.xperiodalignment&&(c._origX=I,c._xStarts=S.starts,c._xEnds=S.ends),c.yperiodalignment&&(c._origY=P,c._yStarts=E.starts,c._yEnds=E.ends);var j=new Array(C),H=new Array(w);for(a=0;a<w;a++)j[2*a]=R[a]===h?NaN:R[a],j[2*a+1]=D[a]===h?NaN:D[a],H[a]=a;if("log"===u.type)for(a=0;a<C;a+=2)j[a]=u.c2l(j[a]);if("log"===_.type)for(a=1;a<C;a+=2)j[a]=_.c2l(j[a]);T&&"log"!==u.type&&"log"!==_.type?M.tree=m(j):M.ids=H,d(p,c);var Y,X=function(W,re,U,B,V,ee){var N=f.style(W,U);if(N.marker&&(N.marker.positions=B),N.line&&B.length>1&&g.extendFlat(N.line,f.linePositions(W,U,B)),N.errorX||N.errorY){var K=f.errorBarPositions(W,U,B,V,ee);N.errorX&&g.extendFlat(N.errorX,K.x),N.errorY&&g.extendFlat(N.errorY,K.y)}return N.text&&(g.extendFlat(N.text,{positions:B},f.textPosition(W,U,N.text,N.marker)),g.extendFlat(N.textSel,{positions:B},f.textPosition(W,U,N.text,N.markerSel)),g.extendFlat(N.textUnsel,{positions:B},f.textPosition(W,U,N.text,N.markerUnsel))),N}(p,0,c,j,R,D),Z=t(p,b);return r(y,c),T?X.marker&&(Y=X.marker.sizeAvg||Math.max(X.marker.size,3)):Y=i(c,w),l(p,c,u,_,R,D,Y),X.errorX&&o(c,u,X.errorX),X.errorY&&o(c,_,X.errorY),X.fill&&!Z.fill2d&&(Z.fill2d=!0),X.marker&&!Z.scatter2d&&(Z.scatter2d=!0),X.line&&!Z.line2d&&(Z.line2d=!0),!X.errorX&&!X.errorY||Z.error2d||(Z.error2d=!0),X.text&&!Z.glText&&(Z.glText=!0),X.marker&&(X.marker.snap=w),Z.lineOptions.push(X.line),Z.errorXOptions.push(X.errorX),Z.errorYOptions.push(X.errorY),Z.fillOptions.push(X.fill),Z.markerOptions.push(X.marker),Z.markerSelectedOptions.push(X.markerSel),Z.markerUnselectedOptions.push(X.markerUnsel),Z.textOptions.push(X.text),Z.textSelectedOptions.push(X.textSel),Z.textUnselectedOptions.push(X.textUnsel),Z.selectBatch.push([]),Z.unselectBatch.push([]),M._scene=Z,M.index=Z.count,M.x=R,M.y=D,M.positions=j,Z.count++,[{x:!1,y:!1,t:M,trace:c}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"./constants":991,"./convert":992,"./scene_update":1e3,"@plotly/point-cluster":59}],991:[function(v,$,Q){"use strict";$.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],992:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("svg-path-sdf"),k=v("color-normalize"),x=v("../../registry"),e=v("../../lib"),n=v("../../components/drawing"),i=v("../../plots/cartesian/axis_ids"),l=v("../../lib/gl_format_color").formatColor,r=v("../scatter/subtypes"),d=v("../scatter/make_bubble_size_func"),f=v("./helpers"),t=v("./constants"),h=v("../../constants/interactions").DESELECTDIM,s={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},o=v("../../components/fx/helpers").appendArrayPointValue;function p(I,P){var S,E=I._fullLayout,R=P._length,D=P.textfont,j=P.textposition,H=Array.isArray(j)?j:[j],Y=D.color,X=D.size,Z=D.family,W={},re=I._context.plotGlPixelRatio,U=P.texttemplate;if(U){W.text=[];var B=E._d3locale,V=Array.isArray(U),ee=V?Math.min(U.length,R):R,N=V?function(ve){return U[ve]}:function(){return U};for(S=0;S<ee;S++){var K={i:S},J=P._module.formatLabels(K,P,E),te={};o(te,P,S);var ae=P._meta||{};W.text.push(e.texttemplateString(N(S),J,B,te,K,ae))}}else W.text=Array.isArray(P.text)&&P.text.length<R?P.text.slice():P.text;if(Array.isArray(W.text))for(S=W.text.length;S<R;S++)W.text[S]="";for(W.opacity=P.opacity,W.font={},W.align=[],W.baseline=[],S=0;S<H.length;S++){var le=H[S].split(/\s+/);switch(le[1]){case"left":W.align.push("right");break;case"right":W.align.push("left");break;default:W.align.push(le[1])}switch(le[0]){case"top":W.baseline.push("bottom");break;case"bottom":W.baseline.push("top");break;default:W.baseline.push(le[0])}}if(Array.isArray(Y))for(W.color=new Array(R),S=0;S<R;S++)W.color[S]=Y[S];else W.color=Y;if(e.isArrayOrTypedArray(X)||Array.isArray(Z))for(W.font=new Array(R),S=0;S<R;S++){var se=W.font[S]={};se.size=(e.isTypedArray(X)?X[S]:Array.isArray(X)?m(X[S])?X[S]:0:X)*re,se.family=Array.isArray(Z)?Z[S]:Z}else W.font={size:X*re,family:Z};return W}function c(I,P){var S,E,R=P._length,D=P.marker,j={},H=e.isArrayOrTypedArray(D.symbol),Y=e.isArrayOrTypedArray(D.angle),X=e.isArrayOrTypedArray(D.color),Z=e.isArrayOrTypedArray(D.line.color),W=e.isArrayOrTypedArray(D.opacity),re=e.isArrayOrTypedArray(D.size),U=e.isArrayOrTypedArray(D.line.width);if(H||(E=f.isOpenSymbol(D.symbol)),H||X||Z||W||Y){j.symbols=new Array(R),j.angles=new Array(R),j.colors=new Array(R),j.borderColors=new Array(R);var B=D.symbol,V=D.angle,ee=l(D,D.opacity,R),N=l(D.line,D.opacity,R);if(!Array.isArray(N[0])){var K=N;for(N=Array(R),S=0;S<R;S++)N[S]=K}if(!Array.isArray(ee[0])){var J=ee;for(ee=Array(R),S=0;S<R;S++)ee[S]=J}if(!Array.isArray(B)){var te=B;for(B=Array(R),S=0;S<R;S++)B[S]=te}if(!Array.isArray(V)){var ae=V;for(V=Array(R),S=0;S<R;S++)V[S]=ae}for(j.symbols=B,j.angles=V,j.colors=ee,j.borderColors=N,S=0;S<R;S++)H&&(E=f.isOpenSymbol(D.symbol[S])),E&&(N[S]=ee[S].slice(),ee[S]=ee[S].slice(),ee[S][3]=0);for(j.opacity=P.opacity,j.markers=new Array(R),S=0;S<R;S++)j.markers[S]=M({mx:j.symbols[S],ma:j.angles[S]},P)}else E?(j.color=k(D.color,"uint8"),j.color[3]=0,j.borderColor=k(D.color,"uint8")):(j.color=k(D.color,"uint8"),j.borderColor=k(D.line.color,"uint8")),j.opacity=P.opacity*D.opacity,j.marker=M({mx:D.symbol,ma:D.angle},P);var le,se=d(P,1);if(re||U){var ve,ue=j.sizes=new Array(R),ye=j.borderSizes=new Array(R),Me=0;if(re){for(S=0;S<R;S++)ue[S]=se(D.size[S]),Me+=ue[S];ve=Me/R}else for(le=se(D.size),S=0;S<R;S++)ue[S]=le;if(U)for(S=0;S<R;S++)ye[S]=D.line.width[S];else for(le=D.line.width,S=0;S<R;S++)ye[S]=le;j.sizeAvg=ve}else j.size=se(D&&D.size||10),j.borderSizes=se(D.line.width);return j}function a(I,P,S){var R={};return S&&(S.marker&&S.marker.symbol?R=c(0,e.extendFlat({},P.marker,S.marker)):S.marker&&(S.marker.size&&(R.size=S.marker.size),S.marker.color&&(R.colors=S.marker.color),void 0!==S.marker.opacity&&(R.opacity=S.marker.opacity))),R}function y(I,P,S){var E={};if(!S)return E;if(S.textfont){var R={opacity:1,text:P.text,texttemplate:P.texttemplate,textposition:P.textposition,textfont:e.extendFlat({},P.textfont)};S.textfont&&e.extendFlat(R.textfont,S.textfont),E=p(I,R)}return E}function u(I,P,S){var E={capSize:2*P.width*S,lineWidth:P.thickness*S,color:P.color};return P.copy_ystyle&&(E=I.error_y),E}var _=t.SYMBOL_SDF_SIZE,b=t.SYMBOL_SIZE,w=t.SYMBOL_STROKE,T={},C=n.symbolFuncs[0](.05*b);function M(I,P){var S,E,R=I.mx;if("circle"===R)return null;var D=n.symbolNumber(R),j=n.symbolFuncs[D%100],H=!!n.symbolNoDot[D%100],Y=!!n.symbolNoFill[D%100],X=f.isDotSymbol(R);if(I.ma&&(R+="_"+I.ma),T[R])return T[R];var Z=n.getMarkerAngle(I,P);return S=X&&!H?j(1.1*b,Z)+C:j(b,Z),E=g(S,{w:_,h:_,viewBox:[-b,-b,b,b],stroke:Y?w:-w}),T[R]=E,E||null}$.exports={style:function(I,P){var S,E={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},R=I._context.plotGlPixelRatio;if(!0!==P.visible)return E;if(r.hasText(P)&&(E.text=p(I,P),E.textSel=y(I,P,P.selected),E.textUnsel=y(I,P,P.unselected)),r.hasMarkers(P)&&(E.marker=c(0,P),E.markerSel=a(0,P,P.selected),E.markerUnsel=a(0,P,P.unselected),!P.unselected&&e.isArrayOrTypedArray(P.marker.opacity))){var D=P.marker.opacity;for(E.markerUnsel.opacity=new Array(D.length),S=0;S<D.length;S++)E.markerUnsel.opacity[S]=h*D[S]}if(r.hasLines(P)){E.line={overlay:!0,thickness:P.line.width*R,color:P.line.color,opacity:P.opacity};var j=(t.DASHES[P.line.dash]||[1]).slice();for(S=0;S<j.length;++S)j[S]*=P.line.width*R;E.line.dashes=j}return P.error_x&&P.error_x.visible&&(E.errorX=u(P,P.error_x,R)),P.error_y&&P.error_y.visible&&(E.errorY=u(P,P.error_y,R)),P.fill&&"none"!==P.fill&&(E.fill={closed:!0,fill:P.fillcolor,thickness:0}),E},markerStyle:c,markerSelection:a,linePositions:function(I,P,S){var E,R,D=S.length,j=D/2;if(r.hasLines(P)&&j)if("hv"===P.line.shape){for(E=[],R=0;R<j-1;R++)isNaN(S[2*R])||isNaN(S[2*R+1])?E.push(NaN,NaN,NaN,NaN):(E.push(S[2*R],S[2*R+1]),isNaN(S[2*R+2])||isNaN(S[2*R+3])?E.push(NaN,NaN):E.push(S[2*R+2],S[2*R+1]));E.push(S[D-2],S[D-1])}else if("hvh"===P.line.shape){for(E=[],R=0;R<j-1;R++)if(isNaN(S[2*R])||isNaN(S[2*R+1])||isNaN(S[2*R+2])||isNaN(S[2*R+3]))isNaN(S[2*R])||isNaN(S[2*R+1])?E.push(NaN,NaN):E.push(S[2*R],S[2*R+1]),E.push(NaN,NaN);else{var H=(S[2*R]+S[2*R+2])/2;E.push(S[2*R],S[2*R+1],H,S[2*R+1],H,S[2*R+3])}E.push(S[D-2],S[D-1])}else if("vhv"===P.line.shape){for(E=[],R=0;R<j-1;R++)if(isNaN(S[2*R])||isNaN(S[2*R+1])||isNaN(S[2*R+2])||isNaN(S[2*R+3]))isNaN(S[2*R])||isNaN(S[2*R+1])?E.push(NaN,NaN):E.push(S[2*R],S[2*R+1]),E.push(NaN,NaN);else{var Y=(S[2*R+1]+S[2*R+3])/2;E.push(S[2*R],S[2*R+1],S[2*R],Y,S[2*R+2],Y)}E.push(S[D-2],S[D-1])}else if("vh"===P.line.shape){for(E=[],R=0;R<j-1;R++)isNaN(S[2*R])||isNaN(S[2*R+1])?E.push(NaN,NaN,NaN,NaN):(E.push(S[2*R],S[2*R+1]),isNaN(S[2*R+2])||isNaN(S[2*R+3])?E.push(NaN,NaN):E.push(S[2*R],S[2*R+3]));E.push(S[D-2],S[D-1])}else E=S;var X=!1;for(R=0;R<E.length;R++)if(isNaN(E[R])){X=!0;break}var Z=X||E.length>t.TOO_MANY_POINTS||r.hasMarkers(P)?"rect":"round";if(X&&P.connectgaps){var W=E[0],re=E[1];for(R=0;R<E.length;R+=2)isNaN(E[R])||isNaN(E[R+1])?(E[R]=W,E[R+1]=re):(W=E[R],re=E[R+1])}return{join:Z,positions:E}},errorBarPositions:function(I,P,S,E,R){var D=x.getComponentMethod("errorbars","makeComputeError"),j=i.getFromId(I,P.xaxis,"x"),H=i.getFromId(I,P.yaxis,"y"),Y=S.length/2,X={};function Z(W,re){var U=re._id.charAt(0),B=P["error_"+U];if(B&&B.visible&&("linear"===re.type||"log"===re.type)){for(var V=D(B),ee={x:0,y:1}[U],N={x:[0,1,2,3],y:[2,3,0,1]}[U],K=new Float64Array(4*Y),J=1/0,te=-1/0,ae=0,le=0;ae<Y;ae++,le+=4){var se=W[ae];if(m(se)){var ve=S[2*ae+ee],ue=V(se,ae),ye=ue[0],Me=ue[1];if(m(ye)&&m(Me)){var ge=se+Me;K[le+N[0]]=ve-re.c2l(se-ye),K[le+N[1]]=re.c2l(ge)-ve,K[le+N[2]]=0,K[le+N[3]]=0,J=Math.min(J,se-ye),te=Math.max(te,se+Me)}}}X[U]={positions:S,errors:K,_bnds:[J,te]}}}return Z(E,j),Z(R,H),X},textPosition:function(I,P,S,E){var R,D=P._length,j={};if(r.hasMarkers(P)){var H=S.font,Y=S.align,X=S.baseline;for(j.offset=new Array(D),R=0;R<D;R++){var Z=E.sizes?E.sizes[R]:E.size,W=Array.isArray(H)?H[R].size:H.size,re=Array.isArray(Y)?Y.length>1?Y[R]:Y[0]:Y,U=Array.isArray(X)?X.length>1?X[R]:X[0]:X,V=s[U],ee=Z?Z/.8+1:0;j.offset[R]=[s[re]*ee/W,(-V*ee-.5*V)/W]}}return j}}},{"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/interactions":490,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"./constants":991,"./helpers":996,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":311}],993:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../registry"),k=v("./helpers"),x=v("./attributes"),e=v("../scatter/constants"),n=v("../scatter/subtypes"),i=v("../scatter/xy_defaults"),l=v("../scatter/period_defaults"),r=v("../scatter/marker_defaults"),d=v("../scatter/line_defaults"),f=v("../scatter/fillcolor_defaults"),t=v("../scatter/text_defaults");$.exports=function(h,s,o,p){function c(C,M){return m.coerce(h,s,x,C,M)}var a=!!h.marker&&k.isOpenSymbol(h.marker.symbol),y=n.isBubble(h),u=i(h,s,p,c);if(u){l(h,s,p,c),c("xhoverformat"),c("yhoverformat");var _=u<e.PTS_LINESONLY?"lines+markers":"lines";c("text"),c("hovertext"),c("hovertemplate"),c("mode",_),n.hasLines(s)&&(c("connectgaps"),d(h,s,o,p,c),c("line.shape")),n.hasMarkers(s)&&(r(h,s,o,p,c,{noAngleRef:!0,noStandOff:!0}),c("marker.line.width",a||y?1:0)),n.hasText(s)&&(c("texttemplate"),t(h,s,p,c));var b=(s.line||{}).color,w=(s.marker||{}).color;c("fill"),"none"!==s.fill&&f(h,s,o,c);var T=g.getComponentMethod("errorbars","supplyDefaults");T(h,s,b||w||o,{axis:"y"}),T(h,s,b||w||o,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(s,c)}else s.visible=!1}},{"../../lib":515,"../../registry":647,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/period_defaults":956,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatter/xy_defaults":963,"./attributes":988,"./helpers":996}],994:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/color"),k=v("../../constants/interactions").DESELECTDIM;$.exports={styleTextSelection:function(x){var e,n,i=x[0],l=i.trace,r=i.t,d=r._scene,f=r.index,t=d.selectBatch[f],h=d.unselectBatch[f],s=d.textOptions[f],o=d.textSelectedOptions[f]||{},p=d.textUnselectedOptions[f]||{},c=m.extendFlat({},s);if(t.length||h.length){var a=o.color,y=p.color,u=s.color,_=Array.isArray(u);for(c.color=new Array(l._length),e=0;e<t.length;e++)c.color[n=t[e]]=a||(_?u[n]:u);for(e=0;e<h.length;e++){n=h[e];var b=_?u[n]:u;c.color[n]=y||(a?b:g.addOpacity(b,k))}}d.glText[f].update(c)}}},{"../../components/color":367,"../../constants/interactions":490,"../../lib":515}],995:[function(v,$,Q){"use strict";var m=v("../scatter/format_labels");$.exports=function(g,k,x){var e=g.i;return"x"in g||(g.x=k._x[e]),"y"in g||(g.y=k._y[e]),m(g,k,x)}},{"../scatter/format_labels":945}],996:[function(v,$,Q){"use strict";var m=v("./constants");Q.isOpenSymbol=function(g){return"string"==typeof g?m.OPEN_RE.test(g):g%200>100},Q.isDotSymbol=function(g){return"string"==typeof g?m.DOT_RE.test(g):g>200}},{"./constants":991}],997:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../lib"),k=v("../scatter/get_trace_color");function x(e,n,i,l){var r=e.xa,d=e.ya,f=e.distance,t=e.dxy,h=e.index,s={pointNumber:h,x:n[h],y:i[h]};s.tx=Array.isArray(l.text)?l.text[h]:l.text,s.htx=Array.isArray(l.hovertext)?l.hovertext[h]:l.hovertext,s.data=Array.isArray(l.customdata)?l.customdata[h]:l.customdata,s.tp=Array.isArray(l.textposition)?l.textposition[h]:l.textposition;var o=l.textfont;o&&(s.ts=g.isArrayOrTypedArray(o.size)?o.size[h]:o.size,s.tc=Array.isArray(o.color)?o.color[h]:o.color,s.tf=Array.isArray(o.family)?o.family[h]:o.family);var p=l.marker;p&&(s.ms=g.isArrayOrTypedArray(p.size)?p.size[h]:p.size,s.mo=g.isArrayOrTypedArray(p.opacity)?p.opacity[h]:p.opacity,s.mx=g.isArrayOrTypedArray(p.symbol)?p.symbol[h]:p.symbol,s.ma=g.isArrayOrTypedArray(p.angle)?p.angle[h]:p.angle,s.mc=g.isArrayOrTypedArray(p.color)?p.color[h]:p.color);var c=p&&p.line;c&&(s.mlc=Array.isArray(c.color)?c.color[h]:c.color,s.mlw=g.isArrayOrTypedArray(c.width)?c.width[h]:c.width);var a=p&&p.gradient;a&&"none"!==a.type&&(s.mgt=Array.isArray(a.type)?a.type[h]:a.type,s.mgc=Array.isArray(a.color)?a.color[h]:a.color);var y=r.c2p(s.x,!0),u=d.c2p(s.y,!0),_=s.mrc||1,b=l.hoverlabel;b&&(s.hbg=Array.isArray(b.bgcolor)?b.bgcolor[h]:b.bgcolor,s.hbc=Array.isArray(b.bordercolor)?b.bordercolor[h]:b.bordercolor,s.hts=g.isArrayOrTypedArray(b.font.size)?b.font.size[h]:b.font.size,s.htc=Array.isArray(b.font.color)?b.font.color[h]:b.font.color,s.htf=Array.isArray(b.font.family)?b.font.family[h]:b.font.family,s.hnl=g.isArrayOrTypedArray(b.namelength)?b.namelength[h]:b.namelength);var w=l.hoverinfo;w&&(s.hi=Array.isArray(w)?w[h]:w);var T=l.hovertemplate;T&&(s.ht=Array.isArray(T)?T[h]:T);var C={};C[e.index]=s;var M=l._origX,I=l._origY,P=g.extendFlat({},e,{color:k(l,s),x0:y-_,x1:y+_,xLabelVal:M?M[h]:s.x,y0:u-_,y1:u+_,yLabelVal:I?I[h]:s.y,cd:C,distance:f,spikeDistance:t,hovertemplate:s.ht});return s.htx?P.text=s.htx:s.tx?P.text=s.tx:l.text&&(P.text=l.text),g.fillText(s,l,P),m.getComponentMethod("errorbars","hoverInfo")(s,l,P),P}$.exports={hoverPoints:function(e,n,i,l){var r,d,f,t,h,s,o,p,c,a,y=e.cd,u=y[0].t,_=y[0].trace,b=e.xa,w=e.ya,T=u.x,C=u.y,M=b.c2p(n),I=w.c2p(i),P=e.distance;if(u.tree){var S=b.p2c(M-P),E=b.p2c(M+P),R=w.p2c(I-P),D=w.p2c(I+P);r="x"===l?u.tree.range(Math.min(S,E),Math.min(w._rl[0],w._rl[1]),Math.max(S,E),Math.max(w._rl[0],w._rl[1])):u.tree.range(Math.min(S,E),Math.min(R,D),Math.max(S,E),Math.max(R,D))}else r=u.ids;var j=P;if("x"===l){var H=!!_.xperiodalignment,Y=!!_.yperiodalignment;for(s=0;s<r.length;s++){if(t=T[d=r[s]],o=Math.abs(b.c2p(t)-M),H){var X=b.c2p(_._xStarts[d]),Z=b.c2p(_._xEnds[d]);o=M>=Math.min(X,Z)&&M<=Math.max(X,Z)?0:1/0}if(o<j){if(j=o,p=w.c2p(h=C[d])-I,Y){var W=w.c2p(_._yStarts[d]),re=w.c2p(_._yEnds[d]);p=I>=Math.min(W,re)&&I<=Math.max(W,re)?0:1/0}a=Math.sqrt(o*o+p*p),f=r[s]}}}else for(s=r.length-1;s>-1;s--)t=T[d=r[s]],h=C[d],o=b.c2p(t)-M,p=w.c2p(h)-I,(c=Math.sqrt(o*o+p*p))<j&&(j=a=c,f=d);return e.index=f,e.distance=j,e.dxy=a,void 0===f?[e]:[x(e,T,C,_)]},calcHover:x}},{"../../lib":515,"../../registry":647,"../scatter/get_trace_color":946}],998:[function(v,$,Q){arguments[4][905][0].apply(Q,arguments)},{"./base_index":989,"./plot":999,dup:905}],999:[function(v,$,Q){"use strict";var m=v("regl-scatter2d"),g=v("regl-line2d"),k=v("regl-error2d"),x=v("gl-text"),e=v("../../lib"),n=v("../../components/dragelement/helpers").selectMode,i=v("../../lib/prepare_regl"),l=v("../scatter/subtypes"),r=v("../scatter/link_traces"),d=v("./edit_style").styleTextSelection,f={};function t(h,s,o,p){var c=h._size,T=c.w*p,C=c.h*p;return[c.l*p+s.domain[0]*T,c.b*p+o.domain[0]*C,h.width*p-c.r*p-(1-s.domain[1])*T,h.height*p-c.t*p-(1-o.domain[1])*C]}($.exports=function(h,s,o){if(o.length){var p,c,a=h._fullLayout,y=s._scene,u=s.xaxis,_=s.yaxis;if(y)if(i(h,["ANGLE_instanced_arrays","OES_element_index_uint"],f)){var b=y.count,w=a._glcanvas.data()[0].regl;if(r(h,s,o),y.dirty){if(!0===y.error2d&&(y.error2d=k(w)),!0===y.line2d&&(y.line2d=g(w)),!0===y.scatter2d&&(y.scatter2d=m(w)),!0===y.fill2d&&(y.fill2d=g(w)),!0===y.glText)for(y.glText=new Array(b),p=0;p<b;p++)y.glText[p]=new x(w);if(y.glText){if(b>y.glText.length){var T=b-y.glText.length;for(p=0;p<T;p++)y.glText.push(new x(w))}else b<y.glText.length&&y.glText.splice(b,y.glText.length-b).forEach(function(K){K.destroy()});for(p=0;p<b;p++)y.glText[p].update(y.textOptions[p])}if(y.line2d&&(y.line2d.update(y.lineOptions),y.lineOptions=y.lineOptions.map(function(K){if(K&&K.positions){for(var J=K.positions,te=0;te<J.length&&(isNaN(J[te])||isNaN(J[te+1]));)te+=2;for(var ae=J.length-2;ae>te&&(isNaN(J[ae])||isNaN(J[ae+1]));)ae-=2;K.positions=J.slice(te,ae+2)}return K}),y.line2d.update(y.lineOptions)),y.error2d){var M=(y.errorXOptions||[]).concat(y.errorYOptions||[]);y.error2d.update(M)}y.scatter2d&&y.scatter2d.update(y.markerOptions),y.fillOrder=e.repeat(null,b),y.fill2d&&(y.fillOptions=y.fillOptions.map(function(K,J){var te=o[J];if(K&&te&&te[0]&&te[0].trace){var ae,le,se=te[0],ve=se.trace,ue=se.t,ye=y.lineOptions[J],Me=[];ve._ownfill&&Me.push(J),ve._nexttrace&&Me.push(J+1),Me.length&&(y.fillOrder[J]=Me);var pe,ge,we=[],oe=ye&&ye.positions||ue.positions;if("tozeroy"===ve.fill){for(pe=0;pe<oe.length&&isNaN(oe[pe+1]);)pe+=2;for(ge=oe.length-2;ge>pe&&isNaN(oe[ge+1]);)ge-=2;0!==oe[pe+1]&&(we=[oe[pe],0]),we=we.concat(oe.slice(pe,ge+2)),0!==oe[ge+1]&&(we=we.concat([oe[ge],0]))}else if("tozerox"===ve.fill){for(pe=0;pe<oe.length&&isNaN(oe[pe]);)pe+=2;for(ge=oe.length-2;ge>pe&&isNaN(oe[ge]);)ge-=2;0!==oe[pe]&&(we=[0,oe[pe+1]]),we=we.concat(oe.slice(pe,ge+2)),0!==oe[ge]&&(we=we.concat([0,oe[ge+1]]))}else if("toself"===ve.fill||"tonext"===ve.fill){for(we=[],ae=0,K.splitNull=!0,le=0;le<oe.length;le+=2)(isNaN(oe[le])||isNaN(oe[le+1]))&&((we=we.concat(oe.slice(ae,le))).push(oe[ae],oe[ae+1]),we.push(null,null),ae=le+2);we=we.concat(oe.slice(ae)),ae&&we.push(oe[ae],oe[ae+1])}else{var de=ve._nexttrace;if(de){var Te=y.lineOptions[J+1];if(Te){var Ee=Te.positions;if("tonexty"===ve.fill){for(we=oe.slice(),J=Math.floor(Ee.length/2);J--;){var Ae=Ee[2*J],De=Ee[2*J+1];isNaN(Ae)||isNaN(De)||we.push(Ae,De)}K.fill=de.fillcolor}}}}if(ve._prevtrace&&"tonext"===ve._prevtrace.fill){var Ie=y.lineOptions[J-1].positions,Oe=we.length/2,Xe=[ae=Oe];for(le=0;le<Ie.length;le+=2)(isNaN(Ie[le])||isNaN(Ie[le+1]))&&(Xe.push(le/2+Oe+1),ae=le+2);we=we.concat(Ie),K.hole=Xe}return K.fillmode=ve.fill,K.opacity=ve.opacity,K.positions=we,K}}),y.fill2d.update(y.fillOptions))}var P=n(a.dragmode),S=a.clickmode.indexOf("select")>-1;for(p=0;p<b;p++){var E=o[p][0],R=E.trace,D=E.t,j=D.index,H=R._length,Y=D.x,X=D.y;if(R.selectedpoints||P||S){if(P||(P=!0),R.selectedpoints){var Z=y.selectBatch[j]=e.selIndices2selPoints(R),W={};for(c=0;c<Z.length;c++)W[Z[c]]=1;var re=[];for(c=0;c<H;c++)W[c]||re.push(c);y.unselectBatch[j]=re}var U=D.xpx=new Array(H),B=D.ypx=new Array(H);for(c=0;c<H;c++)U[c]=u.c2p(Y[c]),B[c]=_.c2p(X[c])}else D.xpx=D.ypx=null}if(P){if(y.select2d||(y.select2d=m(a._glcanvas.data()[1].regl)),y.scatter2d){var V=new Array(b);for(p=0;p<b;p++)V[p]=y.selectBatch[p].length||y.unselectBatch[p].length?y.markerUnselectedOptions[p]:{};y.scatter2d.update(V)}y.select2d&&(y.select2d.update(y.markerOptions),y.select2d.update(y.markerSelectedOptions)),y.glText&&o.forEach(function(K){l.hasText(((K||[])[0]||{}).trace||{})&&d(K)})}else y.scatter2d&&y.scatter2d.update(y.markerOptions);var ee={viewport:t(a,u,_,h._context.plotGlPixelRatio),range:[(u._rl||u.range)[0],(_._rl||_.range)[0],(u._rl||u.range)[1],(_._rl||_.range)[1]]},N=e.repeat(ee,y.count);y.fill2d&&y.fill2d.update(N),y.line2d&&y.line2d.update(N),y.error2d&&y.error2d.update(N.concat(N)),y.scatter2d&&y.scatter2d.update(N),y.select2d&&y.select2d.update(N),y.glText&&y.glText.forEach(function(K){K.update(ee)})}else y.init()}}).reglPrecompiled=f},{"../../components/dragelement/helpers":385,"../../lib":515,"../../lib/prepare_regl":528,"../scatter/link_traces":952,"../scatter/subtypes":961,"./edit_style":994,"gl-text":225,"regl-error2d":280,"regl-line2d":281,"regl-scatter2d":282}],1e3:[function(v,$,Q){"use strict";var m=v("../../lib");$.exports=function(g,k){var x=k._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},n={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return k._scene||((x=k._scene={}).init=function(){m.extendFlat(x,n,e)},x.init(),x.update=function(i){var l=m.repeat(i,x.count);if(x.fill2d&&x.fill2d.update(l),x.scatter2d&&x.scatter2d.update(l),x.line2d&&x.line2d.update(l),x.error2d&&x.error2d.update(l.concat(l)),x.select2d&&x.select2d.update(l),x.glText)for(var r=0;r<x.count;r++)x.glText[r].update(i)},x.draw=function(){for(var i=x.count,l=x.fill2d,r=x.error2d,d=x.line2d,f=x.scatter2d,t=x.glText,h=x.select2d,s=x.selectBatch,o=x.unselectBatch,p=0;p<i;p++){if(l&&x.fillOrder[p]&&l.draw(x.fillOrder[p]),d&&x.lineOptions[p]&&d.draw(p),r&&(x.errorXOptions[p]&&r.draw(p),x.errorYOptions[p]&&r.draw(p+i)),f&&x.markerOptions[p])if(o[p].length){var c=m.repeat([],x.count);c[p]=o[p],f.draw(c)}else s[p].length||f.draw(p);t[p]&&x.textOptions[p]&&t[p].render()}h&&h.draw(s),x.dirty=!1},x.destroy=function(){x.fill2d&&x.fill2d.destroy&&x.fill2d.destroy(),x.scatter2d&&x.scatter2d.destroy&&x.scatter2d.destroy(),x.error2d&&x.error2d.destroy&&x.error2d.destroy(),x.line2d&&x.line2d.destroy&&x.line2d.destroy(),x.select2d&&x.select2d.destroy&&x.select2d.destroy(),x.glText&&x.glText.forEach(function(i){i.destroy&&i.destroy()}),x.lineOptions=null,x.fillOptions=null,x.markerOptions=null,x.markerSelectedOptions=null,x.markerUnselectedOptions=null,x.errorXOptions=null,x.errorYOptions=null,x.textOptions=null,x.textSelectedOptions=null,x.textUnselectedOptions=null,x.selectBatch=null,x.unselectBatch=null,k._scene=null}),x.dirty||m.extendFlat(x,e),x}},{"../../lib":515}],1001:[function(v,$,Q){"use strict";var m=v("../scatter/subtypes"),g=v("./edit_style").styleTextSelection;$.exports=function(k,x){var e=k.cd,n=k.xaxis,i=k.yaxis,l=[],r=e[0].trace,d=e[0].t,f=r._length,t=d.x,h=d.y,s=d._scene,o=d.index;if(!s)return l;var p=m.hasText(r),c=m.hasMarkers(r);if(!0!==r.visible||!c&&!p)return l;var y=[],u=[];if(!1!==x&&!x.degenerate)for(var _=0;_<f;_++)x.contains([d.xpx[_],d.ypx[_]],!1,_,k)?(y.push(_),l.push({pointNumber:_,x:n.c2d(t[_]),y:i.c2d(h[_])})):u.push(_);if(c){var b=s.scatter2d;if(y.length||u.length){if(!s.selectBatch[o].length&&!s.unselectBatch[o].length){var w=new Array(s.count);w[o]=s.markerUnselectedOptions[o],b.update.apply(b,w)}}else{var T=new Array(s.count);T[o]=s.markerOptions[o],b.update.apply(b,T)}}return s.selectBatch[o]=y,s.unselectBatch[o]=u,p&&g(e),l}},{"../scatter/subtypes":961,"./edit_style":994}],1002:[function(v,$,Q){"use strict";var m=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../plots/template_attributes").texttemplateAttrs,k=v("../scattergeo/attributes"),x=v("../scatter/attributes"),e=v("../../plots/mapbox/layout_attributes"),n=v("../../plots/attributes"),i=v("../../components/colorscale/attributes"),l=v("../../lib/extend").extendFlat,r=v("../../plot_api/edit_types").overrideAll,d=v("../../plots/mapbox/layout_attributes"),f=k.line,t=k.marker;$.exports=r({lon:k.lon,lat:k.lat,cluster:{enabled:{valType:"boolean"},maxzoom:l({},d.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:l({},t.opacity,{dflt:1})},mode:l({},x.mode,{dflt:"markers"}),text:l({},x.text,{}),texttemplate:g({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:l({},x.hovertext,{}),line:{color:f.color,width:f.width},connectgaps:x.connectgaps,marker:l({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:t.opacity,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode},i("marker")),fill:k.fill,fillcolor:x.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:x.selected.marker},unselected:{marker:x.unselected.marker},hoverinfo:l({},n.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:m()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/mapbox/layout_attributes":624,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergeo/attributes":978}],1003:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../lib"),k=v("../../constants/numerical").BADNUM,x=v("../../lib/geojson_utils"),e=v("../../components/colorscale"),n=v("../../components/drawing"),i=v("../scatter/make_bubble_size_func"),l=v("../scatter/subtypes"),r=v("../../plots/mapbox/convert_text_opts"),d=v("../../components/fx/helpers").appendArrayPointValue,f=v("../../lib/svg_text_utils").NEWLINES,t=v("../../lib/svg_text_utils").BR_TAG_ALL;function h(a){return{type:a,geojson:x.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function s(a,y){return g.isArrayOrTypedArray(a)?y?function(u){return m(a[u])?+a[u]:0}:function(u){return a[u]}:a?function(){return a}:o}function o(){return""}function p(a){return a[0]===k}function c(a,y){var u;if(g.isArrayOrTypedArray(a)&&g.isArrayOrTypedArray(y)){u=["step",["get","point_count"],a[0]];for(var _=1;_<a.length;_++)u.push(y[_-1],a[_])}else u=a;return u}$.exports=function(a,y){var u,_=y[0].trace,b=!0===_.visible&&0!==_._length,w="none"!==_.fill,T=l.hasLines(_),C=l.hasMarkers(_),M=l.hasText(_),I=C&&"circle"===_.marker.symbol,P=C&&"circle"!==_.marker.symbol,S=_.cluster&&_.cluster.enabled,E=h("fill"),R=h("line"),D=h("circle"),j=h("symbol"),H={fill:E,line:R,circle:D,symbol:j};if(!b)return H;if((w||T)&&(u=x.calcTraceToLineCoords(y)),w&&(E.geojson=x.makePolygon(u),E.layout.visibility="visible",g.extendFlat(E.paint,{"fill-color":_.fillcolor})),T&&(R.geojson=x.makeLine(u),R.layout.visibility="visible",g.extendFlat(R.paint,{"line-width":_.line.width,"line-color":_.line.color,"line-opacity":_.opacity})),I){var Y=function(W){var re,U,B,V,ee=W[0].trace,N=ee.marker,K=ee.selectedpoints,J=g.isArrayOrTypedArray(N.color),te=g.isArrayOrTypedArray(N.size),ae=g.isArrayOrTypedArray(N.opacity);function le(we){return ee.opacity*we}J&&(U=e.hasColorscale(ee,"marker")?e.makeColorScaleFuncFromTrace(N):g.identity),te&&(B=i(ee)),ae&&(V=function(we){return le(m(we)?+g.constrain(we,0,1):0)});var se,ge,ve=[];for(re=0;re<W.length;re++){var ue=W[re],ye=ue.lonlat;if(!p(ye)){var Me={};U&&(Me.mcc=ue.mcc=U(ue.mc)),B&&(Me.mrc=ue.mrc=B(ue.ms)),V&&(Me.mo=V(ue.mo)),K&&(Me.selected=ue.selected||0),ve.push({type:"Feature",id:re+1,geometry:{type:"Point",coordinates:ye},properties:Me})}}if(K)for(se=n.makeSelectedPointStyleFns(ee),re=0;re<ve.length;re++){var pe=ve[re].properties;se.selectedOpacityFn&&(pe.mo=le(se.selectedOpacityFn(pe))),se.selectedColorFn&&(pe.mcc=se.selectedColorFn(pe)),se.selectedSizeFn&&(pe.mrc=se.selectedSizeFn(pe))}return{geojson:{type:"FeatureCollection",features:ve},mcc:J||se&&se.selectedColorFn?{type:"identity",property:"mcc"}:N.color,mrc:te||se&&se.selectedSizeFn?{type:"identity",property:"mrc"}:(ge=N.size,ge/2),mo:ae||se&&se.selectedOpacityFn?{type:"identity",property:"mo"}:le(N.opacity)}}(y);D.geojson=Y.geojson,D.layout.visibility="visible",S&&(D.filter=["!",["has","point_count"]],H.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":c(_.cluster.color,_.cluster.step),"circle-radius":c(_.cluster.size,_.cluster.step),"circle-opacity":c(_.cluster.opacity,_.cluster.step)}},H.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),g.extendFlat(D.paint,{"circle-color":Y.mcc,"circle-radius":Y.mrc,"circle-opacity":Y.mo})}if(I&&S&&(D.filter=["!",["has","point_count"]]),(P||M)&&(j.geojson=function(W,re){for(var U=re._fullLayout,B=W[0].trace,V=B.marker||{},ee=V.symbol,N=V.angle,K="circle"!==ee?s(ee):o,J="auto"!==N?s(N,!0):o,te=l.hasText(B)?s(B.text):o,ae=[],le=0;le<W.length;le++){var se=W[le];if(!p(se.lonlat)){var ve,ue=B.texttemplate;if(ue){var ye=Array.isArray(ue)?ue[le]||"":ue,Me=B._module.formatLabels(se,B,U),pe={};d(pe,B,se.i),ve=g.texttemplateString(ye,Me,U._d3locale,pe,se,B._meta||{})}else ve=te(le);ve&&(ve=ve.replace(f,"").replace(t,"\n")),ae.push({type:"Feature",geometry:{type:"Point",coordinates:se.lonlat},properties:{symbol:K(le),angle:J(le),text:ve}})}}return{type:"FeatureCollection",features:ae}}(y,a),g.extendFlat(j.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),P&&(g.extendFlat(j.layout,{"icon-size":_.marker.size/10}),"angle"in _.marker&&"auto"!==_.marker.angle&&g.extendFlat(j.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),j.layout["icon-allow-overlap"]=_.marker.allowoverlap,g.extendFlat(j.paint,{"icon-opacity":_.opacity*_.marker.opacity,"icon-color":_.marker.color})),M)){var Z=r(_.textposition,(_.marker||{}).size);g.extendFlat(j.layout,{"text-size":_.textfont.size,"text-anchor":Z.anchor,"text-offset":Z.offset}),g.extendFlat(j.paint,{"text-color":_.textfont.color,"text-opacity":_.opacity})}return H}},{"../../components/colorscale":379,"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"../../lib/svg_text_utils":541,"../../plots/mapbox/convert_text_opts":621,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"fast-isnumeric":190}],1004:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../scatter/subtypes"),k=v("../scatter/marker_defaults"),x=v("../scatter/line_defaults"),e=v("../scatter/text_defaults"),n=v("../scatter/fillcolor_defaults"),i=v("./attributes");$.exports=function(l,r,d,f){function t(u,_){return m.coerce(l,r,i,u,_)}function h(u,_){return m.coerce2(l,r,i,u,_)}if(_=r,w=(b=t)("lon")||[],T=b("lat")||[],C=Math.min(w.length,T.length),_._length=C,C){if(t("text"),t("texttemplate"),t("hovertext"),t("hovertemplate"),t("mode"),t("below"),g.hasLines(r)&&(x(l,r,d,f,t,{noDash:!0}),t("connectgaps")),g.hasMarkers(r)){k(l,r,d,f,t,{noLine:!0,noAngle:!0}),t("marker.allowoverlap"),t("marker.angle");var s=r.marker;"circle"!==s.symbol&&(m.isArrayOrTypedArray(s.size)&&(s.size=s.size[0]),m.isArrayOrTypedArray(s.color)&&(s.color=s.color[0]))}var o=h("cluster.maxzoom"),p=h("cluster.step"),c=h("cluster.color",r.marker&&r.marker.color||d),a=h("cluster.size"),y=h("cluster.opacity");t("cluster.enabled",!1!==o||!1!==p||!1!==c||!1!==a||!1!==y),g.hasText(r)&&e(l,r,f,t,{noSelect:!0}),t("fill"),"none"!==r.fill&&n(l,r,d,t),m.coerceSelectionMarkerOpacity(r,t)}else r.visible=!1;var _,b,w,T,C}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1002}],1005:[function(v,$,Q){"use strict";$.exports=function(m,g){return m.lon=g.lon,m.lat=g.lat,m}},{}],1006:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes");$.exports=function(g,k,x){var e={},n=x[k.subplot]._subplot.mockAxis,i=g.lonlat;return e.lonLabel=m.tickText(n,n.c2l(i[0]),!0).text,e.latLabel=m.tickText(n,n.c2l(i[1]),!0).text,e}},{"../../plots/cartesian/axes":566}],1007:[function(v,$,Q){"use strict";var m=v("../../components/fx"),g=v("../../lib"),k=v("../scatter/get_trace_color"),x=g.fillText,e=v("../../constants/numerical").BADNUM,n=v("../../plots/mapbox/constants").traceLayerPrefix;function i(l,r,d){if(!l.hovertemplate){var f=(r.hi||l.hoverinfo).split("+"),t=-1!==f.indexOf("all"),h=-1!==f.indexOf("lon"),s=-1!==f.indexOf("lat"),o=r.lonlat,p=[];return t||h&&s?p.push("("+c(o[1])+", "+c(o[0])+")"):h?p.push(d.lon+c(o[0])):s&&p.push(d.lat+c(o[1])),(t||-1!==f.indexOf("text"))&&x(r,l,p),p.join("<br>")}function c(a){return a+"\xb0"}}$.exports={hoverPoints:function(l,r,d){var f=l.cd,t=f[0].trace,h=l.xa,s=l.ya,o=l.subplot,p=[],a=t.cluster&&t.cluster.enabled;if(a){var y=o.map.queryRenderedFeatures(null,{layers:[n+t.uid+"-circle"]});p=y.map(function(E){return E.id})}var u=360*(r>=0?Math.floor((r+180)/360):Math.ceil((r-180)/360)),_=r-u;if(m.getClosest(f,function(E){var R=E.lonlat;if(R[0]===e||a&&-1===p.indexOf(E.i+1))return 1/0;var D=g.modHalf(R[0],360),j=R[1],H=o.project([D,j]),Y=H.x-h.c2p([_,j]),X=H.y-s.c2p([D,d]),Z=Math.max(3,E.mrc||0);return Math.max(Math.sqrt(Y*Y+X*X)-Z,1-3/Z)},l),!1!==l.index){var b=f[l.index],w=b.lonlat,T=[g.modHalf(w[0],360)+u,w[1]],C=h.c2p(T),M=s.c2p(T),I=b.mrc||1;l.x0=C-I,l.x1=C+I,l.y0=M-I,l.y1=M+I;var P={};P[t.subplot]={_subplot:o};var S=t._module.formatLabels(b,t,P);return l.lonLabel=S.lonLabel,l.latLabel=S.latLabel,l.color=k(t,b),l.extraText=i(t,b,f[0].t.labels),l.hovertemplate=t.hovertemplate,[l]}},getExtraText:i}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/mapbox/constants":620,"../scatter/get_trace_color":946}],1008:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("../scattergeo/calc"),plot:v("./plot"),hoverPoints:v("./hover").hoverPoints,eventData:v("./event_data"),selectPoints:v("./select"),styleOnSelect:function(m,g){g&&g[0].trace._glTrace.update(g)},moduleType:"trace",name:"scattermapbox",basePlotModule:v("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":622,"../scatter/marker_colorbar":954,"../scattergeo/calc":979,"./attributes":1002,"./defaults":1004,"./event_data":1005,"./format_labels":1006,"./hover":1007,"./plot":1009,"./select":1010}],1009:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./convert"),k=v("../../plots/mapbox/constants").traceLayerPrefix,x={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function e(i,l,r,d){this.type="scattermapbox",this.subplot=i,this.uid=l,this.clusterEnabled=r,this.isHidden=d,this.sourceIds={fill:"source-"+l+"-fill",line:"source-"+l+"-line",circle:"source-"+l+"-circle",symbol:"source-"+l+"-symbol",cluster:"source-"+l+"-circle",clusterCount:"source-"+l+"-circle"},this.layerIds={fill:k+l+"-fill",line:k+l+"-line",circle:k+l+"-circle",symbol:k+l+"-symbol",cluster:k+l+"-cluster",clusterCount:k+l+"-cluster-count"},this.below=null}var n=e.prototype;n.addSource=function(i,l,r){var d={type:"geojson",data:l.geojson};r&&r.enabled&&m.extendFlat(d,{cluster:!0,clusterMaxZoom:r.maxzoom}),this.subplot.map.addSource(this.sourceIds[i],d)},n.setSourceData=function(i,l){this.subplot.map.getSource(this.sourceIds[i]).setData(l.geojson)},n.addLayer=function(i,l,r){var d={type:l.type,id:this.layerIds[i],source:this.sourceIds[i],layout:l.layout,paint:l.paint};l.filter&&(d.filter=l.filter),this.subplot.addLayer(d,r)},n.update=function(i){var l=i[0].trace,r=this.subplot,d=r.map,f=g(r.gd,i),t=r.belowLookup["trace-"+this.uid],h=!(!l.cluster||!l.cluster.enabled),s=!!this.clusterEnabled,o=this;function p(_){s?function(b){for(var w=x.cluster,T=w.length-1;T>=0;T--)d.removeLayer(o.layerIds[w[T]]);b||d.removeSource(o.sourceIds.circle)}(_):function(b){for(var w=x.nonCluster,T=w.length-1;T>=0;T--){var C=w[T];d.removeLayer(o.layerIds[C]),b||d.removeSource(o.sourceIds[C])}}(_)}function c(_){h?function(b){b||o.addSource("circle",f.circle,l.cluster);for(var w=x.cluster,T=0;T<w.length;T++){var C=w[T];o.addLayer(C,f[C],t)}}(_):function(b){for(var w=x.nonCluster,T=0;T<w.length;T++){var C=w[T],M=f[C];b||o.addSource(C,M),o.addLayer(C,M,t)}}(_)}var y=this.isHidden,u=!0!==l.visible;u?y||p():y?u||c():s!==h?(p(),c()):(this.below!==t&&(p(!0),c(!0)),function a(){for(var _=h?x.cluster:x.nonCluster,b=0;b<_.length;b++){var w=_[b],T=f[w];T&&(r.setOptions(o.layerIds[w],"setLayoutProperty",T.layout),"visible"===T.layout.visibility&&("cluster"!==w&&o.setSourceData(w,T),r.setOptions(o.layerIds[w],"setPaintProperty",T.paint)))}}()),this.clusterEnabled=h,this.isHidden=u,this.below=t,i[0].trace._glTrace=this},n.dispose=function(){for(var i=this.subplot.map,l=this.clusterEnabled?x.cluster:x.nonCluster,r=l.length-1;r>=0;r--){var d=l[r];i.removeLayer(this.layerIds[d]),i.removeSource(this.sourceIds[d])}},$.exports=function(i,l){var r,d,f,t=l[0].trace,h=t.cluster&&t.cluster.enabled,o=new e(i,t.uid,h,!0!==t.visible),p=g(i.gd,l),c=o.below=i.belowLookup["trace-"+t.uid];if(h)for(o.addSource("circle",p.circle,t.cluster),r=0;r<x.cluster.length;r++)f=p[d=x.cluster[r]],o.addLayer(d,f,c);else for(r=0;r<x.nonCluster.length;r++)f=p[d=x.nonCluster[r]],o.addSource(d,f,t.cluster),o.addLayer(d,f,c);return l[0].trace._glTrace=o,o}},{"../../lib":515,"../../plots/mapbox/constants":620,"./convert":1003}],1010:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../scatter/subtypes"),k=v("../../constants/numerical").BADNUM;$.exports=function(x,e){var n,i=x.cd,l=x.xaxis,r=x.yaxis,d=[];if(!g.hasMarkers(i[0].trace))return[];if(!1===e)for(n=0;n<i.length;n++)i[n].selected=0;else for(n=0;n<i.length;n++){var t=i[n],h=t.lonlat;if(h[0]!==k){var s=[m.modHalf(h[0],360),h[1]],o=[l.c2p(s),r.c2p(s)];e.contains(o,null,n,x)?(d.push({pointNumber:n,lon:h[0],lat:h[1]}),t.selected=1):t.selected=0}}return d}},{"../../constants/numerical":491,"../../lib":515,"../scatter/subtypes":961}],1011:[function(v,$,Q){"use strict";var m=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../plots/template_attributes").texttemplateAttrs,k=v("../../lib/extend").extendFlat,x=v("../scatter/attributes"),e=v("../../plots/attributes"),n=x.line;$.exports={mode:x.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:x.text,texttemplate:g({editType:"plot"},{keys:["r","theta","text"]}),hovertext:x.hovertext,line:{color:n.color,width:n.width,dash:n.dash,backoff:n.backoff,shape:k({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:x.connectgaps,marker:x.marker,cliponaxis:k({},x.cliponaxis,{dflt:!1}),textposition:x.textposition,textfont:x.textfont,fill:k({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:x.fillcolor,hoverinfo:k({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:x.hoveron,hovertemplate:m(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1012:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../constants/numerical").BADNUM,k=v("../../plots/cartesian/axes"),x=v("../scatter/colorscale_calc"),e=v("../scatter/arrays_to_calcdata"),n=v("../scatter/calc_selection"),i=v("../scatter/calc").calcMarkerSize;$.exports=function(l,r){for(var d=l._fullLayout,f=r.subplot,t=d[f].radialaxis,h=d[f].angularaxis,s=t.makeCalcdata(r,"r"),o=h.makeCalcdata(r,"theta"),p=r._length,c=new Array(p),a=0;a<p;a++){var y=s[a],u=o[a],_=c[a]={};m(y)&&m(u)?(_.r=y,_.theta=u):_.r=g}var b=i(r,p);return r._extremes.x=k.findExtremes(t,s,{ppad:b}),x(l,r),e(c,r),n(c,r),c}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1013:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../scatter/subtypes"),k=v("../scatter/marker_defaults"),x=v("../scatter/line_defaults"),e=v("../scatter/line_shape_defaults"),n=v("../scatter/text_defaults"),i=v("../scatter/fillcolor_defaults"),l=v("../scatter/constants").PTS_LINESONLY,r=v("./attributes");function d(f,t,h,s){var o,p=s("r"),c=s("theta");if(p)c?o=Math.min(p.length,c.length):(o=p.length,s("theta0"),s("dtheta"));else{if(!c)return 0;o=t.theta.length,s("r0"),s("dr")}return t._length=o,o}$.exports={handleRThetaDefaults:d,supplyDefaults:function(f,t,h,s){function o(a,y){return m.coerce(f,t,r,a,y)}var p=d(0,t,0,o);if(p){o("thetaunit"),o("mode",p<l?"lines+markers":"lines"),o("text"),o("hovertext"),"fills"!==t.hoveron&&o("hovertemplate"),g.hasLines(t)&&(x(f,t,h,s,o,{backoff:!0}),e(f,t,o),o("connectgaps")),g.hasMarkers(t)&&k(f,t,h,s,o,{gradient:!0}),g.hasText(t)&&(o("texttemplate"),n(f,t,s,o));var c=[];(g.hasMarkers(t)||g.hasText(t))&&(o("cliponaxis"),o("marker.maxdisplayed"),c.push("points")),o("fill"),"none"!==t.fill&&(i(f,t,h,o),g.hasLines(t)||e(f,t,o)),"tonext"!==t.fill&&"toself"!==t.fill||c.push("fills"),o("hoveron",c.join("+")||"points"),m.coerceSelectionMarkerOpacity(t,o)}else t.visible=!1}}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1011}],1014:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/cartesian/axes");$.exports=function(k,x,e){var n,i,l={},r=e[x.subplot]._subplot;r?(n=r.radialAxis,i=r.angularAxis):(n=(r=e[x.subplot]).radialaxis,i=r.angularaxis);var d=n.c2l(k.r);l.rLabel=g.tickText(n,d,!0).text;var f="degrees"===i.thetaunit?m.rad2deg(k.theta):k.theta;return l.thetaLabel=g.tickText(i,f,!0).text,l}},{"../../lib":515,"../../plots/cartesian/axes":566}],1015:[function(v,$,Q){"use strict";var m=v("../scatter/hover");function g(k,x,e,n){var i=e.radialAxis,l=e.angularAxis;i._hovertitle="r",l._hovertitle="\u03b8";var r={};r[x.subplot]={_subplot:e};var d=x._module.formatLabels(k,x,r);n.rLabel=d.rLabel,n.thetaLabel=d.thetaLabel;var t=[];function h(o,p){t.push(o._hovertitle+": "+p)}if(!x.hovertemplate){var s=(k.hi||x.hoverinfo).split("+");-1!==s.indexOf("all")&&(s=["r","theta","text"]),-1!==s.indexOf("r")&&h(i,n.rLabel),-1!==s.indexOf("theta")&&h(l,n.thetaLabel),-1!==s.indexOf("text")&&n.text&&(t.push(n.text),delete n.text),n.extraText=t.join("<br>")}}$.exports={hoverPoints:function(k,x,e,n){var i=m(k,x,e,n);if(i&&!1!==i[0].index){var l=i[0];if(void 0===l.index)return i;var r=k.subplot,d=l.cd[l.index],f=l.trace;if(r.isPtInside(d))return l.xLabelVal=void 0,l.yLabelVal=void 0,g(d,f,r,l),l.hovertemplate=f.hovertemplate,i}},makeHoverPointText:g}},{"../scatter/hover":947}],1016:[function(v,$,Q){"use strict";$.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:v("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,selectPoints:v("../scatter/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1011,"./calc":1012,"./defaults":1013,"./format_labels":1014,"./hover":1015,"./plot":1017}],1017:[function(v,$,Q){"use strict";var m=v("../scatter/plot"),g=v("../../constants/numerical").BADNUM;$.exports=function(k,x,e){for(var n=x.layers.frontplot.select("g.scatterlayer"),i=x.xaxis,l=x.yaxis,r={xaxis:i,yaxis:l,plot:x.framework,layerClipId:x._hasClipOnAxisFalse?x.clipIds.forTraces:null},d=x.radialAxis,f=x.angularAxis,t=0;t<e.length;t++)for(var h=e[t],s=0;s<h.length;s++){0===s&&(h[0].trace._xA=i,h[0].trace._yA=l);var o=h[s],p=o.r;if(p===g)o.x=o.y=g;else{var c=d.c2g(p),a=f.c2g(o.theta);o.x=c*Math.cos(a),o.y=c*Math.sin(a)}}m(k,r,e,n)}},{"../../constants/numerical":491,"../scatter/plot":957}],1018:[function(v,$,Q){"use strict";var m=v("../scatterpolar/attributes"),g=v("../scattergl/attributes"),k=v("../../plots/template_attributes").texttemplateAttrs;$.exports={mode:m.mode,r:m.r,theta:m.theta,r0:m.r0,dr:m.dr,theta0:m.theta0,dtheta:m.dtheta,thetaunit:m.thetaunit,text:m.text,texttemplate:k({editType:"plot"},{keys:["r","theta","text"]}),hovertext:m.hovertext,hovertemplate:m.hovertemplate,line:g.line,connectgaps:g.connectgaps,marker:g.marker,fill:g.fill,fillcolor:g.fillcolor,textposition:g.textposition,textfont:g.textfont,hoverinfo:m.hoverinfo,selected:m.selected,unselected:m.unselected}},{"../../plots/template_attributes":642,"../scattergl/attributes":988,"../scatterpolar/attributes":1011}],1019:[function(v,$,Q){"use strict";$.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:v("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),hoverPoints:v("./hover").hoverPoints,selectPoints:v("../scattergl/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scattergl/select":1001,"./attributes":1018,"./calc":1020,"./defaults":1021,"./format_labels":1022,"./hover":1023}],1020:[function(v,$,Q){"use strict";var m=v("../scatter/colorscale_calc"),g=v("../scatter/calc").calcMarkerSize,k=v("../scattergl/convert"),x=v("../../plots/cartesian/axes"),e=v("../scattergl/constants").TOO_MANY_POINTS;$.exports=function(n,i){var l=n._fullLayout,r=i.subplot,d=l[r].radialaxis,f=l[r].angularaxis,t=i._r=d.makeCalcdata(i,"r"),h=i._theta=f.makeCalcdata(i,"theta"),s=i._length,o={};s<t.length&&(t=t.slice(0,s)),s<h.length&&(h=h.slice(0,s)),o.r=t,o.theta=h,m(n,i);var p,c=o.opts=k.style(n,i);return s<e?p=g(i,s):c.marker&&(p=2*(c.marker.sizeAvg||Math.max(c.marker.size,3))),i._extremes.x=x.findExtremes(d,t,{ppad:p}),[{x:!1,y:!1,t:o,trace:i}]}},{"../../plots/cartesian/axes":566,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992}],1021:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../scatter/subtypes"),k=v("../scatterpolar/defaults").handleRThetaDefaults,x=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),n=v("../scatter/text_defaults"),i=v("../scatter/fillcolor_defaults"),l=v("../scatter/constants").PTS_LINESONLY,r=v("./attributes");$.exports=function(d,f,t,h){function s(p,c){return m.coerce(d,f,r,p,c)}var o=k(d,f,h,s);o?(s("thetaunit"),s("mode",o<l?"lines+markers":"lines"),s("text"),s("hovertext"),"fills"!==f.hoveron&&s("hovertemplate"),g.hasLines(f)&&(e(d,f,t,h,s),s("connectgaps")),g.hasMarkers(f)&&x(d,f,t,h,s,{noAngleRef:!0,noStandOff:!0}),g.hasText(f)&&(s("texttemplate"),n(d,f,h,s)),s("fill"),"none"!==f.fill&&i(d,f,t,s),m.coerceSelectionMarkerOpacity(f,s)):f.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatterpolar/defaults":1013,"./attributes":1018}],1022:[function(v,$,Q){"use strict";var m=v("../scatterpolar/format_labels");$.exports=function(g,k,x){var e=g.i;return"r"in g||(g.r=k._r[e]),"theta"in g||(g.theta=k._theta[e]),m(g,k,x)}},{"../scatterpolar/format_labels":1014}],1023:[function(v,$,Q){"use strict";var m=v("../scattergl/hover"),g=v("../scatterpolar/hover").makeHoverPointText;$.exports={hoverPoints:function(k,x,e,n){var i=k.cd[0].t,l=i.r,r=i.theta,d=m.hoverPoints(k,x,e,n);if(d&&!1!==d[0].index){var f=d[0];if(void 0===f.index)return d;var t=k.subplot,h=f.cd[f.index],s=f.trace;if(h.r=l[f.index],h.theta=r[f.index],t.isPtInside(h))return f.xLabelVal=void 0,f.yLabelVal=void 0,g(h,s,t,f),d}}}},{"../scattergl/hover":997,"../scatterpolar/hover":1015}],1024:[function(v,$,Q){arguments[4][905][0].apply(Q,arguments)},{"./base_index":1019,"./plot":1025,dup:905}],1025:[function(v,$,Q){"use strict";var m=v("@plotly/point-cluster"),g=v("fast-isnumeric"),k=v("../scattergl/plot"),x=v("../scattergl/scene_update"),e=v("../scattergl/convert"),n=v("../../lib"),i=v("../scattergl/constants").TOO_MANY_POINTS;$.exports=function(l,r,d){if(d.length){var f=r.radialAxis,t=r.angularAxis,h=x(l,r);return d.forEach(function(s){if(s&&s[0]&&s[0].trace){var o,p=s[0],c=p.trace,a=p.t,y=c._length,u=a.r,_=a.theta,b=a.opts,w=u.slice(),T=_.slice();for(o=0;o<u.length;o++)r.isPtInside({r:u[o],theta:_[o]})||(w[o]=NaN,T[o]=NaN);var C=new Array(2*y),M=Array(y),I=Array(y);for(o=0;o<y;o++){var P,S,E=w[o];if(g(E)){var R=f.c2g(E),D=t.c2g(T[o],c.thetaunit);P=R*Math.cos(D),S=R*Math.sin(D)}else P=S=NaN;M[o]=C[2*o]=P,I[o]=C[2*o+1]=S}a.tree=m(C),b.marker&&y>=i&&(b.marker.cluster=a.tree),b.marker&&(b.markerSel.positions=b.markerUnsel.positions=b.marker.positions=C),b.line&&C.length>1&&n.extendFlat(b.line,e.linePositions(l,c,C)),b.text&&(n.extendFlat(b.text,{positions:C},e.textPosition(l,c,b.text,b.marker)),n.extendFlat(b.textSel,{positions:C},e.textPosition(l,c,b.text,b.markerSel)),n.extendFlat(b.textUnsel,{positions:C},e.textPosition(l,c,b.text,b.markerUnsel))),b.fill&&!h.fill2d&&(h.fill2d=!0),b.marker&&!h.scatter2d&&(h.scatter2d=!0),b.line&&!h.line2d&&(h.line2d=!0),b.text&&!h.glText&&(h.glText=!0),h.lineOptions.push(b.line),h.fillOptions.push(b.fill),h.markerOptions.push(b.marker),h.markerSelectedOptions.push(b.markerSel),h.markerUnselectedOptions.push(b.markerUnsel),h.textOptions.push(b.text),h.textSelectedOptions.push(b.textSel),h.textUnselectedOptions.push(b.textUnsel),h.selectBatch.push([]),h.unselectBatch.push([]),a.x=M,a.y=I,a.rawx=M,a.rawy=I,a.r=u,a.theta=_,a.positions=C,a._scene=h,a.index=h.count,h.count++}}),k(l,r,d)}},$.exports.reglPrecompiled={}},{"../../lib":515,"../scattergl/constants":991,"../scattergl/convert":992,"../scattergl/plot":999,"../scattergl/scene_update":1e3,"@plotly/point-cluster":59,"fast-isnumeric":190}],1026:[function(v,$,Q){"use strict";var m=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../plots/template_attributes").texttemplateAttrs,k=v("../../lib/extend").extendFlat,x=v("../scatter/attributes"),e=v("../../plots/attributes"),n=x.line;$.exports={mode:x.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:x.text,texttemplate:g({editType:"plot"},{keys:["real","imag","text"]}),hovertext:x.hovertext,line:{color:n.color,width:n.width,dash:n.dash,backoff:n.backoff,shape:k({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:x.connectgaps,marker:x.marker,cliponaxis:k({},x.cliponaxis,{dflt:!1}),textposition:x.textposition,textfont:x.textfont,fill:k({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:x.fillcolor,hoverinfo:k({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:x.hoveron,hovertemplate:m(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1027:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../../constants/numerical").BADNUM,k=v("../scatter/colorscale_calc"),x=v("../scatter/arrays_to_calcdata"),e=v("../scatter/calc_selection"),n=v("../scatter/calc").calcMarkerSize;$.exports=function(i,l){for(var r=i._fullLayout,d=l.subplot,t=r[d].imaginaryaxis,h=r[d].realaxis.makeCalcdata(l,"real"),s=t.makeCalcdata(l,"imag"),o=l._length,p=new Array(o),c=0;c<o;c++){var a=h[c],y=s[c],u=p[c]={};m(a)&&m(y)?(u.real=a,u.imag=y):u.real=g}return n(l,o),k(i,l),x(p,l),e(p,l),p}},{"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1028:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../scatter/subtypes"),k=v("../scatter/marker_defaults"),x=v("../scatter/line_defaults"),e=v("../scatter/line_shape_defaults"),n=v("../scatter/text_defaults"),i=v("../scatter/fillcolor_defaults"),l=v("../scatter/constants").PTS_LINESONLY,r=v("./attributes");$.exports=function(d,f,t,h){function s(c,a){return m.coerce(d,f,r,c,a)}var a,u,_,b,w,o=(a=f,b=(u=s)("real"),w=u("imag"),b&&w&&(_=Math.min(b.length,w.length)),a._length=_,_);if(o){s("mode",o<l?"lines+markers":"lines"),s("text"),s("hovertext"),"fills"!==f.hoveron&&s("hovertemplate"),g.hasLines(f)&&(x(d,f,t,h,s,{backoff:!0}),e(d,f,s),s("connectgaps")),g.hasMarkers(f)&&k(d,f,t,h,s,{gradient:!0}),g.hasText(f)&&(s("texttemplate"),n(d,f,h,s));var p=[];(g.hasMarkers(f)||g.hasText(f))&&(s("cliponaxis"),s("marker.maxdisplayed"),p.push("points")),s("fill"),"none"!==f.fill&&(i(d,f,t,s),g.hasLines(f)||e(d,f,s)),"tonext"!==f.fill&&"toself"!==f.fill||p.push("fills"),s("hoveron",p.join("+")||"points"),m.coerceSelectionMarkerOpacity(f,s)}else f.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1026}],1029:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes");$.exports=function(g,k,x){var e={},n=x[k.subplot]._subplot;return e.realLabel=m.tickText(n.radialAxis,g.real,!0).text,e.imagLabel=m.tickText(n.angularAxis,g.imag,!0).text,e}},{"../../plots/cartesian/axes":566}],1030:[function(v,$,Q){"use strict";var m=v("../scatter/hover");function g(k,x,e,n){var i=e.radialAxis,l=e.angularAxis;i._hovertitle="real",l._hovertitle="imag";var r={};r[x.subplot]={_subplot:e};var d=x._module.formatLabels(k,x,r);n.realLabel=d.realLabel,n.imagLabel=d.imagLabel;var t=[];function h(o,p){t.push(o._hovertitle+": "+p)}if(!x.hovertemplate){var s=(k.hi||x.hoverinfo).split("+");-1!==s.indexOf("all")&&(s=["real","imag","text"]),-1!==s.indexOf("real")&&h(i,n.realLabel),-1!==s.indexOf("imag")&&h(l,n.imagLabel),-1!==s.indexOf("text")&&n.text&&(t.push(n.text),delete n.text),n.extraText=t.join("<br>")}}$.exports={hoverPoints:function(k,x,e,n){var i=m(k,x,e,n);if(i&&!1!==i[0].index){var l=i[0];if(void 0===l.index)return i;var r=k.subplot,d=l.cd[l.index],f=l.trace;if(r.isPtInside(d))return l.xLabelVal=void 0,l.yLabelVal=void 0,g(d,f,r,l),l.hovertemplate=f.hovertemplate,i}},makeHoverPointText:g}},{"../scatter/hover":947}],1031:[function(v,$,Q){"use strict";$.exports={moduleType:"trace",name:"scattersmith",basePlotModule:v("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,selectPoints:v("../scatter/select"),meta:{}}},{"../../plots/smith":638,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1026,"./calc":1027,"./defaults":1028,"./format_labels":1029,"./hover":1030,"./plot":1032}],1032:[function(v,$,Q){"use strict";var m=v("../scatter/plot"),g=v("../../constants/numerical").BADNUM,k=v("../../plots/smith/helpers").smith;$.exports=function(x,e,n){for(var i=e.layers.frontplot.select("g.scatterlayer"),l=e.xaxis,r=e.yaxis,d={xaxis:l,yaxis:r,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},f=0;f<n.length;f++)for(var t=n[f],h=0;h<t.length;h++){0===h&&(t[0].trace._xA=l,t[0].trace._yA=r);var s=t[h],o=s.real;if(o===g)s.x=s.y=g;else{var p=k([o,s.imag]);s.x=p[0],s.y=p[1]}}m(x,d,n,i)}},{"../../constants/numerical":491,"../../plots/smith/helpers":637,"../scatter/plot":957}],1033:[function(v,$,Q){"use strict";var m=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../plots/template_attributes").texttemplateAttrs,k=v("../scatter/attributes"),x=v("../../plots/attributes"),e=v("../../components/colorscale/attributes"),n=v("../../components/drawing/attributes").dash,i=v("../../lib/extend").extendFlat,l=k.marker,r=k.line,d=l.line;$.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:i({},k.mode,{dflt:"markers"}),text:i({},k.text,{}),texttemplate:g({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:i({},k.hovertext,{}),line:{color:r.color,width:r.width,dash:n,backoff:r.backoff,shape:i({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:k.connectgaps,cliponaxis:k.cliponaxis,fill:i({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:k.fillcolor,marker:i({symbol:l.symbol,opacity:l.opacity,angle:l.angle,angleref:l.angleref,standoff:l.standoff,maxdisplayed:l.maxdisplayed,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,line:i({width:d.width,editType:"calc"},e("marker.line")),gradient:l.gradient,editType:"calc"},e("marker")),textfont:k.textfont,textposition:k.textposition,selected:k.selected,unselected:k.unselected,hoverinfo:i({},x.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:k.hoveron,hovertemplate:m()}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1034:[function(v,$,Q){"use strict";var m=v("fast-isnumeric"),g=v("../scatter/colorscale_calc"),k=v("../scatter/arrays_to_calcdata"),x=v("../scatter/calc_selection"),e=v("../scatter/calc").calcMarkerSize,n=["a","b","c"],i={a:["b","c"],b:["a","c"],c:["a","b"]};$.exports=function(l,r){var d,f,t,h,s,o,p=l._fullLayout[r.subplot].sum,c=r.sum||p,a={a:r.a,b:r.b,c:r.c};for(d=0;d<n.length;d++)if(!a[t=n[d]]){for(s=a[i[t][0]],o=a[i[t][1]],h=new Array(s.length),f=0;f<s.length;f++)h[f]=c-s[f]-o[f];a[t]=h}var y,u,_,b,C=r._length,M=new Array(C);for(d=0;d<C;d++)u=a.b[d],_=a.c[d],m(y=a.a[d])&&m(u)&&m(_)?(1!=(b=p/((y=+y)+(u=+u)+(_=+_)))&&(y*=b,u*=b,_*=b),M[d]={x:_-u,y,a:y,b:u,c:_}):M[d]={x:!1,y:!1};return e(r,C),g(l,r),k(M,r),x(M,r),M}},{"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1035:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../scatter/constants"),k=v("../scatter/subtypes"),x=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),n=v("../scatter/line_shape_defaults"),i=v("../scatter/text_defaults"),l=v("../scatter/fillcolor_defaults"),r=v("./attributes");$.exports=function(d,f,t,h){function s(u,_){return m.coerce(d,f,r,u,_)}var o,p=s("a"),c=s("b"),a=s("c");if(p?(o=p.length,c?(o=Math.min(o,c.length),a&&(o=Math.min(o,a.length))):o=a?Math.min(o,a.length):0):c&&a&&(o=Math.min(c.length,a.length)),o){f._length=o,s("sum"),s("text"),s("hovertext"),"fills"!==f.hoveron&&s("hovertemplate"),s("mode",o<g.PTS_LINESONLY?"lines+markers":"lines"),k.hasLines(f)&&(e(d,f,t,h,s,{backoff:!0}),n(d,f,s),s("connectgaps")),k.hasMarkers(f)&&x(d,f,t,h,s,{gradient:!0}),k.hasText(f)&&(s("texttemplate"),i(d,f,h,s));var y=[];(k.hasMarkers(f)||k.hasText(f))&&(s("cliponaxis"),s("marker.maxdisplayed"),y.push("points")),s("fill"),"none"!==f.fill&&(l(d,f,t,s),k.hasLines(f)||n(d,f,s)),"tonext"!==f.fill&&"toself"!==f.fill||y.push("fills"),s("hoveron",y.join("+")||"points"),m.coerceSelectionMarkerOpacity(f,s)}else f.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1033}],1036:[function(v,$,Q){"use strict";$.exports=function(m,g,k,x,e){if(g.xa&&(m.xaxis=g.xa),g.ya&&(m.yaxis=g.ya),x[e]){var n=x[e];m.a=n.a,m.b=n.b,m.c=n.c}else m.a=g.a,m.b=g.b,m.c=g.c;return m}},{}],1037:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes");$.exports=function(g,k,x){var e={},n=x[k.subplot]._subplot;return e.aLabel=m.tickText(n.aaxis,g.a,!0).text,e.bLabel=m.tickText(n.baxis,g.b,!0).text,e.cLabel=m.tickText(n.caxis,g.c,!0).text,e}},{"../../plots/cartesian/axes":566}],1038:[function(v,$,Q){"use strict";var m=v("../scatter/hover");$.exports=function(g,k,x,e){var n=m(g,k,x,e);if(n&&!1!==n[0].index){var i=n[0];if(void 0===i.index){var r=g.xa._length,d=r*(1-i.y0/g.ya._length)/2,f=r-d;return i.x0=Math.max(Math.min(i.x0,f),d),i.x1=Math.max(Math.min(i.x1,f),d),n}var t=i.cd[i.index],h=i.trace,s=i.subplot;i.a=t.a,i.b=t.b,i.c=t.c,i.xLabelVal=void 0,i.yLabelVal=void 0;var o={};o[h.subplot]={_subplot:s};var p=h._module.formatLabels(t,h,o);i.aLabel=p.aLabel,i.bLabel=p.bLabel,i.cLabel=p.cLabel;var a=[];if(!h.hovertemplate){var y=(t.hi||h.hoverinfo).split("+");-1!==y.indexOf("all")&&(y=["a","b","c"]),-1!==y.indexOf("a")&&u(s.aaxis,i.aLabel),-1!==y.indexOf("b")&&u(s.baxis,i.bLabel),-1!==y.indexOf("c")&&u(s.caxis,i.cLabel)}return i.extraText=a.join("<br>"),i.hovertemplate=h.hovertemplate,n}function u(_,b){a.push(_._hovertitle+": "+b)}}},{"../scatter/hover":947}],1039:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../scatter/select"),eventData:v("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:v("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":643,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1033,"./calc":1034,"./defaults":1035,"./event_data":1036,"./format_labels":1037,"./hover":1038,"./plot":1040}],1040:[function(v,$,Q){"use strict";var m=v("../scatter/plot");$.exports=function(g,k,x){var e=k.plotContainer;e.select(".scatterlayer").selectAll("*").remove();for(var n=k.xaxis,i=k.yaxis,l={xaxis:n,yaxis:i,plot:e,layerClipId:k._hasClipOnAxisFalse?k.clipIdRelative:null},r=k.layers.frontplot.select("g.scatterlayer"),d=0;d<x.length;d++){var f=x[d];f.length&&(f[0].trace._xA=n,f[0].trace._yA=i)}m(g,l,x,r)}},{"../scatter/plot":957}],1041:[function(v,$,Q){"use strict";var m=v("../scatter/attributes"),g=v("../../components/colorscale/attributes"),k=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../scattergl/attributes"),n=v("../../plots/cartesian/constants").idRegex,i=v("../../plot_api/plot_template").templatedArray,l=v("../../lib/extend").extendFlat,r=m.marker,d=r.line,f=l(g("marker.line",{editTypeOverride:"calc"}),{width:l({},d.width,{editType:"calc"}),editType:"calc"}),t=l(g("marker"),{symbol:r.symbol,angle:r.angle,size:l({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:f,editType:"calc"});function h(s){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:n[s],editType:"plot"}}}t.color.editType=t.cmin.editType=t.cmax.editType="style",$.exports={dimensions:i("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:l({},e.text,{}),hovertext:l({},e.hovertext,{}),hovertemplate:x(),xhoverformat:k("x"),yhoverformat:k("y"),marker:t,xaxes:h("x"),yaxes:h("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/constants":573,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergl/attributes":988}],1042:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../components/grid");$.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),calc:v("./calc"),plot:v("./plot"),hoverPoints:v("./hover").hoverPoints,selectPoints:v("./select"),editStyle:v("./edit_style"),meta:{}},m.register(g)},{"../../components/grid":411,"../../registry":647,"../scatter/marker_colorbar":954,"./attributes":1041,"./calc":1044,"./defaults":1045,"./edit_style":1046,"./hover":1048,"./plot":1050,"./select":1052}],1043:[function(v,$,Q){"use strict";var m=v("regl-line2d"),g=v("../../registry"),k=v("../../lib/prepare_regl"),x=v("../../plots/get_data").getModuleCalcData,e=v("../../plots/cartesian"),n=v("../../plots/cartesian/axis_ids").getFromId,i=v("../../plots/cartesian/axes").shouldShowZeroLine,l={};function r(f,t,h){for(var o=t._visibleDims,p=h.viewOpts.ranges=new Array(h.matrixOptions.data.length),c=0;c<o.length;c++){var a=o[c],y=p[c]=new Array(4),u=n(f,t._diag[a][0]);u&&(y[0]=u.r2l(u.range[0]),y[2]=u.r2l(u.range[1]));var _=n(f,t._diag[a][1]);_&&(y[1]=_.r2l(_.range[0]),y[3]=_.r2l(_.range[1]))}h.selectBatch.length||h.unselectBatch.length?h.matrix.update({ranges:p},{ranges:p}):h.matrix.update({ranges:p})}function d(f){var t=f._fullLayout,h=t._glcanvas.data()[0].regl,s=t._splomGrid;s||(s=t._splomGrid=m(h)),s.update(function(o){var p,c=o._context.plotGlPixelRatio,a=o._fullLayout,y=a._size,u=[0,0,a.width*c,a.height*c],_={};function b(Z,W,re,U,B,V){re*=c,U*=c,B*=c,V*=c;var ee=W[Z+"color"],N=W[Z+"width"],K=String(ee+N);K in _?_[K].data.push(NaN,NaN,re,U,B,V):_[K]={data:[re,U,B,V],join:"rect",thickness:N*c,color:ee,viewport:u,range:u,overlay:!1}}for(p in a._splomSubplots){var w,T,C=a._plots[p],M=C.xaxis,I=C.yaxis,P=M._gridVals,S=I._gridVals,E=M._offset,R=M._length,D=I._length,j=y.b+I.domain[0]*y.h,H=-I._m,Y=-H*I.r2l(I.range[0],I.calendar);if(M.showgrid)for(p=0;p<P.length;p++)w=E+M.l2p(P[p].x),b("grid",M,w,j,w,j+D);if(I.showgrid)for(p=0;p<S.length;p++)b("grid",I,E,T=j+Y+H*S[p].x,E+R,T);i(o,M,I)&&(w=E+M.l2p(0),b("zeroline",M,w,j,w,j+D)),i(o,I,M)&&b("zeroline",I,E,T=j+Y+0,E+R,T)}var X=[];for(p in _)X.push(_[p]);return X}(f))}$.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(f){var t=f._fullLayout,h=g.getModule("splom"),s=x(f.calcdata,h)[0];k(f,["ANGLE_instanced_arrays","OES_element_index_uint"],l)&&(t._hasOnlyLargeSploms&&d(f),h.plot(f,{},s))},drag:function(f){var t=f.calcdata,h=f._fullLayout;h._hasOnlyLargeSploms&&d(f);for(var s=0;s<t.length;s++){var o=t[s][0].trace,p=h._splomScenes[o.uid];"splom"===o.type&&p&&p.matrix&&r(f,o,p)}},updateGrid:d,clean:function(f,t,h,s){var o,p={};if(s._splomScenes){for(o=0;o<f.length;o++){var c=f[o];"splom"===c.type&&(p[c.uid]=1)}for(o=0;o<h.length;o++){var a=h[o];if(!p[a.uid]){var y=s._splomScenes[a.uid];y&&y.destroy&&y.destroy(),s._splomScenes[a.uid]=null,delete s._splomScenes[a.uid]}}}0===Object.keys(s._splomScenes||{}).length&&delete s._splomScenes,s._splomGrid&&!t._hasOnlyLargeSploms&&s._hasOnlyLargeSploms&&(s._splomGrid.destroy(),s._splomGrid=null,delete s._splomGrid),e.clean(f,t,h,s)},updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:l}},{"../../lib/prepare_regl":528,"../../plots/cartesian":578,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../../plots/get_data":602,"../../registry":647,"regl-line2d":281}],1044:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/cartesian/axis_ids"),k=v("../scatter/calc").calcMarkerSize,x=v("../scatter/calc").calcAxisExpansion,e=v("../scatter/colorscale_calc"),n=v("../scattergl/convert").markerSelection,i=v("../scattergl/convert").markerStyle,l=v("./scene_update"),r=v("../../constants/numerical").BADNUM,d=v("../scattergl/constants").TOO_MANY_POINTS;$.exports=function(f,t){var h,s,o,p,c,a,y=t.dimensions,u=t._length,_={},b=_.cdata=[],w=_.data=[],T=t._visibleDims=[];function C(I,P){for(var S=I.makeCalcdata({v:P.values,vcalendar:t.calendar},"v"),E=0;E<S.length;E++)S[E]=S[E]===r?NaN:S[E];b.push(S),w.push("log"===I.type?m.simpleMap(S,I.c2l):S)}for(h=0;h<y.length;h++)if((o=y[h]).visible){if(p=g.getFromId(f,t._diag[h][0]),c=g.getFromId(f,t._diag[h][1]),p&&c&&p.type!==c.type){m.log("Skipping splom dimension "+h+" with conflicting axis types");continue}p?(C(p,o),c&&"category"===c.type&&(c._categories=p._categories.slice())):C(c,o),T.push(h)}for(e(f,t),m.extendFlat(_,i(f,t)),a=b.length*u>d?_.sizeAvg||Math.max(_.size,3):k(t,u),s=0;s<T.length;s++)o=y[h=T[s]],p=g.getFromId(f,t._diag[h][0])||{},c=g.getFromId(f,t._diag[h][1])||{},x(f,t,p,c,b[s],b[s],a);var M=l(f,t);return M.matrix||(M.matrix=!0),M.matrixOptions=_,M.selectedOptions=n(f,t,t.selected),M.unselectedOptions=n(f,t,t.unselected),[{x:!1,y:!1,t:{},trace:t}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992,"./scene_update":1051}],1045:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/array_container_defaults"),k=v("./attributes"),x=v("../scatter/subtypes"),e=v("../scatter/marker_defaults"),n=v("../parcoords/merge_length"),i=v("../scattergl/helpers").isOpenSymbol;function l(r,d){function f(h,s){return m.coerce(r,d,k.dimensions,h,s)}f("label");var t=f("values");t&&t.length?f("visible"):d.visible=!1,f("axis.type"),f("axis.matches")}$.exports=function(r,d,f,t){function h(u,_){return m.coerce(r,d,k,u,_)}var s=g(r,d,{name:"dimensions",handleItemDefaults:l}),o=h("diagonal.visible"),p=h("showupperhalf"),c=h("showlowerhalf");if(n(d,s,"values")&&(o||p||c)){h("text"),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat"),e(r,d,f,t,h,{noAngleRef:!0,noStandOff:!0});var a=i(d.marker.symbol),y=x.isBubble(d);h("marker.line.width",a||y?1:0),function(u,_,b,w){var T,C,M=_.dimensions,I=M.length,P=_.showupperhalf,S=_.showlowerhalf,E=_.diagonal.visible,R=new Array(I),D=new Array(I);for(T=0;T<I;T++){var j=T?T+1:"";R[T]="x"+j,D[T]="y"+j}var H=w("xaxes",R),Y=w("yaxes",D),X=_._diag=new Array(I);_._xaxes={},_._yaxes={};var Z=[],W=[];function re(ae,le,se,ve){if(ae){var ue=ae.charAt(0),ye=b._splomAxes[ue];if(_["_"+ue+"axes"][ae]=1,ve.push(ae),!(ae in ye)){var Me=ye[ae]={};se&&(Me.label=se.label||"",se.visible&&se.axis&&(se.axis.type&&(Me.type=se.axis.type),se.axis.matches&&(Me.matches=le)))}}}var U=!E&&!S,B=!E&&!P;for(_._axesDim={},T=0;T<I;T++){var V=M[T],ee=0===T,N=T===I-1,K=ee&&U||N&&B?void 0:H[T],J=ee&&B||N&&U?void 0:Y[T];re(K,J,V,Z),re(J,K,V,W),X[T]=[K,J],_._axesDim[K]=T,_._axesDim[J]=T}for(T=0;T<Z.length;T++)for(C=0;C<W.length;C++){var te=Z[T]+W[C];T>C&&P||T<C&&S?b._splomSubplots[te]=1:T!==C||!E&&S&&P||(b._splomSubplots[te]=1)}(!S||!E&&P&&S)&&(b._splomGridDflt.xside="bottom",b._splomGridDflt.yside="left")}(0,d,t,h),m.coerceSelectionMarkerOpacity(d,h)}else d.visible=!1}},{"../../lib":515,"../../plots/array_container_defaults":561,"../parcoords/merge_length":907,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scattergl/helpers":996,"./attributes":1041}],1046:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../scatter/colorscale_calc"),k=v("../scattergl/convert").markerStyle;$.exports=function(x,e){var n=e.trace,i=x._fullLayout._splomScenes[n.uid];if(i){g(x,n),m.extendFlat(i.matrixOptions,k(x,n));var l=m.extendFlat({},i.matrixOptions,i.viewOpts);i.matrix.update(l,null)}}},{"../../lib":515,"../scatter/colorscale_calc":939,"../scattergl/convert":992}],1047:[function(v,$,Q){"use strict";Q.getDimIndex=function(m,g){for(var k=g._id,x={x:0,y:1}[k.charAt(0)],e=m._visibleDims,n=0;n<e.length;n++)if(m._diag[e[n]][x]===k)return n;return!1}},{}],1048:[function(v,$,Q){"use strict";var m=v("./helpers"),g=v("../scattergl/hover").calcHover;$.exports={hoverPoints:function(k,x,e){var n=k.cd[0].trace,i=k.scene.matrixOptions.cdata,l=k.xa,r=k.ya,d=l.c2p(x),f=r.c2p(e),t=k.distance,h=m.getDimIndex(n,l),s=m.getDimIndex(n,r);if(!1===h||!1===s)return[k];for(var o,p,c=i[h],a=i[s],y=t,u=0;u<c.length;u++){var b=a[u],w=l.c2p(c[u])-d,T=r.c2p(b)-f,C=Math.sqrt(w*w+T*T);C<y&&(y=p=C,o=u)}return k.index=o,k.distance=y,k.dxy=p,void 0===o?[k]:[g(k,c,a,n)]}}},{"../scattergl/hover":997,"./helpers":1047}],1049:[function(v,$,Q){"use strict";var m=v("./base_index");m.basePlotModule=v("./base_plot"),$.exports=m},{"./base_index":1042,"./base_plot":1043}],1050:[function(v,$,Q){"use strict";var m=v("regl-splom"),g=v("../../lib"),k=v("../../plots/cartesian/axis_ids"),x=v("../../components/dragelement/helpers").selectMode;function e(n,i){var l,r,d,f,t,h=n._fullLayout,s=h._size,o=i.trace,p=i.t,c=h._splomScenes[o.uid],a=c.matrixOptions,y=a.cdata,u=h._glcanvas.data()[0].regl,_=h.dragmode;if(0!==y.length){a.lower=o.showupperhalf,a.upper=o.showlowerhalf,a.diagonal=o.diagonal.visible;var b=o._visibleDims,w=y.length,T=c.viewOpts={};for(T.ranges=new Array(w),T.domains=new Array(w),t=0;t<b.length;t++){d=b[t];var C=T.ranges[t]=new Array(4),M=T.domains[t]=new Array(4);(l=k.getFromId(n,o._diag[d][0]))&&(C[0]=l._rl[0],C[2]=l._rl[1],M[0]=l.domain[0],M[2]=l.domain[1]),(r=k.getFromId(n,o._diag[d][1]))&&(C[1]=r._rl[0],C[3]=r._rl[1],M[1]=r.domain[0],M[3]=r.domain[1])}var I=n._context.plotGlPixelRatio,P=s.l*I,S=s.b*I;T.viewport=[P,S,s.w*I+P,s.h*I+S],!0===c.matrix&&(c.matrix=m(u));var D=h.clickmode.indexOf("select")>-1,j=!0;if(x(_)||o.selectedpoints||D){var H=o._length;if(o.selectedpoints){c.selectBatch=o.selectedpoints;var Y=o.selectedpoints,X={};for(d=0;d<Y.length;d++)X[Y[d]]=!0;var Z=[];for(d=0;d<H;d++)X[d]||Z.push(d);c.unselectBatch=Z}var W=p.xpx=new Array(w),re=p.ypx=new Array(w);for(t=0;t<b.length;t++){if(l=k.getFromId(n,o._diag[d=b[t]][0]))for(W[t]=new Array(H),f=0;f<H;f++)W[t][f]=l.c2p(y[t][f]);if(r=k.getFromId(n,o._diag[d][1]))for(re[t]=new Array(H),f=0;f<H;f++)re[t][f]=r.c2p(y[t][f])}if(c.selectBatch.length||c.unselectBatch.length){var U=g.extendFlat({},a,c.unselectedOptions,T),B=g.extendFlat({},a,c.selectedOptions,T);c.matrix.update(U,B),j=!1}}else p.xpx=p.ypx=null;if(j){var V=g.extendFlat({},a,T);c.matrix.update(V,null)}}}$.exports=function(n,i,l){if(l.length)for(var r=0;r<l.length;r++)e(n,l[r][0])}},{"../../components/dragelement/helpers":385,"../../lib":515,"../../plots/cartesian/axis_ids":570,"regl-splom":283}],1051:[function(v,$,Q){"use strict";var m=v("../../lib");$.exports=function(g,k){var x=g._fullLayout,e=k.uid,n=x._splomScenes;n||(n=x._splomScenes={});var i={dirty:!0,selectBatch:[],unselectBatch:[]},l=n[k.uid];return l||((l=n[e]=m.extendFlat({},i,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){l.matrix&&l.matrix.draw&&(l.selectBatch.length||l.unselectBatch.length?l.matrix.draw(l.unselectBatch,l.selectBatch):l.matrix.draw()),l.dirty=!1},l.destroy=function(){l.matrix&&l.matrix.destroy&&l.matrix.destroy(),l.matrixOptions=null,l.selectBatch=null,l.unselectBatch=null,l=null}),l.dirty||m.extendFlat(l,i),l}},{"../../lib":515}],1052:[function(v,$,Q){"use strict";var m=v("../../lib"),g=m.pushUnique,k=v("../scatter/subtypes"),x=v("./helpers");$.exports=function(e,n){var i=e.cd,l=i[0].trace,r=i[0].t,d=e.scene,f=d.matrixOptions.cdata,t=e.xaxis,h=e.yaxis,s=[];if(!d)return s;var o=!k.hasMarkers(l)&&!k.hasText(l);if(!0!==l.visible||o)return s;var p=x.getDimIndex(l,t),c=x.getDimIndex(l,h);if(!1===p||!1===c)return s;var a=r.xpx[p],y=r.ypx[c],u=f[p],_=f[c],b=(e.scene.selectBatch||[]).slice(),w=[];if(!1!==n&&!n.degenerate)for(var T=0;T<u.length;T++)n.contains([a[T],y[T]],null,T,e)?(s.push({pointNumber:T,x:u[T],y:_[T]}),g(b,T)):-1!==b.indexOf(T)?g(b,T):w.push(T);var C=d.matrixOptions;return b.length||w.length?d.selectBatch.length||d.unselectBatch.length||d.matrix.update(d.unselectedOptions,m.extendFlat({},C,d.selectedOptions,d.viewOpts)):d.matrix.update(C,null),d.selectBatch=b,d.unselectBatch=w,s}},{"../../lib":515,"../scatter/subtypes":961,"./helpers":1047}],1053:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/attributes"),g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=v("../../plots/template_attributes").hovertemplateAttrs,x=v("../mesh3d/attributes"),e=v("../../plots/attributes"),n=v("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:k({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:g("u",1),vhoverformat:g("v",1),whoverformat:g("w",1),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),showlegend:n({},e.showlegend,{dflt:!1})};n(i,m("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(l){i[l]=x[l]}),i.hoverinfo=n({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,$.exports=i},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],1054:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/colorscale/calc");function k(n){var i,l,r,d,f,t,h,s,o,p,c,a,y=n._x,u=n._y,_=n._z,b=n._len,w=-1/0,T=1/0,C=-1/0,M=1/0,I=-1/0,P=1/0,S="";for(b&&(h=y[0],o=u[0],c=_[0]),b>1&&(s=y[b-1],p=u[b-1],a=_[b-1]),i=0;i<b;i++)w=Math.max(w,y[i]),T=Math.min(T,y[i]),C=Math.max(C,u[i]),M=Math.min(M,u[i]),I=Math.max(I,_[i]),P=Math.min(P,_[i]),d||y[i]===h||(d=!0,S+="x"),f||u[i]===o||(f=!0,S+="y"),t||_[i]===c||(t=!0,S+="z");d||(S+="x"),f||(S+="y"),t||(S+="z");var E=x(n._x),R=x(n._y),D=x(n._z);S=(S=(S=S.replace("x",(h>s?"-":"+")+"x")).replace("y",(o>p?"-":"+")+"y")).replace("z",(c>a?"-":"+")+"z");var j=function(){b=0,E=[],R=[],D=[]};(!b||b<E.length*R.length*D.length)&&j();var H=function(ue){return"x"===ue?y:"y"===ue?u:_},Y=function(ue){return"x"===ue?E:"y"===ue?R:D},X=function(ue){return ue[b-1]<ue[0]?-1:1},Z=H(S[1]),W=H(S[3]),re=H(S[5]),U=Y(S[1]).length,B=Y(S[3]).length,V=Y(S[5]).length,ee=!1,N=function(ue,ye,Me){return U*(B*ue+ye)+Me},K=X(H(S[1])),J=X(H(S[3])),te=X(H(S[5]));for(i=0;i<V-1;i++){for(l=0;l<B-1;l++){for(r=0;r<U-1;r++){var ae=N(i,l,r),le=N(i,l,r+1),se=N(i,l+1,r),ve=N(i+1,l,r);if(Z[ae]*K<Z[le]*K&&W[ae]*J<W[se]*J&&re[ae]*te<re[ve]*te||(ee=!0),ee)break}if(ee)break}if(ee)break}return ee&&(m.warn("Encountered arbitrary coordinates! Unable to input data grid."),j()),{xMin:T,yMin:M,zMin:P,xMax:w,yMax:C,zMax:I,Xs:E,Ys:R,Zs:D,len:b,fill:S}}function x(n){return m.distinctVals(n).vals}function e(n,i){if(void 0===i&&(i=n.length),m.isTypedArray(n))return n.subarray(0,i);for(var l=[],r=0;r<i;r++)l[r]=+n[r];return l}$.exports={calc:function(n,i){i._len=Math.min(i.u.length,i.v.length,i.w.length,i.x.length,i.y.length,i.z.length),i._u=e(i.u,i._len),i._v=e(i.v,i._len),i._w=e(i.w,i._len),i._x=e(i.x,i._len),i._y=e(i.y,i._len),i._z=e(i.z,i._len);var l=k(i);i._gridFill=l.fill,i._Xs=l.Xs,i._Ys=l.Ys,i._Zs=l.Zs,i._len=l.len;var r,d,f,t=0;i.starts&&(r=e(i.starts.x||[]),d=e(i.starts.y||[]),f=e(i.starts.z||[]),t=Math.min(r.length,d.length,f.length)),i._startsX=r||[],i._startsY=d||[],i._startsZ=f||[];var h,s=0,o=1/0;for(h=0;h<i._len;h++){var p=i._u[h],c=i._v[h],a=i._w[h],y=Math.sqrt(p*p+c*c+a*a);s=Math.max(s,y),o=Math.min(o,y)}for(g(n,i,{vals:[o,s],containerStr:"",cLetter:"c"}),h=0;h<t;h++){var u=r[h];l.xMax=Math.max(l.xMax,u),l.xMin=Math.min(l.xMin,u);var _=d[h];l.yMax=Math.max(l.yMax,_),l.yMin=Math.min(l.yMin,_);var b=f[h];l.zMax=Math.max(l.zMax,b),l.zMin=Math.min(l.zMin,b)}i._slen=t,i._normMax=s,i._xbnds=[l.xMin,l.xMax],i._ybnds=[l.yMin,l.yMax],i._zbnds=[l.zMin,l.zMax]},filter:e,processGrid:k}},{"../../components/colorscale/calc":375,"../../lib":515}],1055:[function(v,$,Q){"use strict";var m=v("../../../stackgl_modules").gl_streamtube3d,g=m.createTubeMesh,k=v("../../lib"),x=v("../../lib/gl_format_color").parseColorScale,e=v("../../components/colorscale").extractOpts,n=v("../../plots/gl3d/zip3"),i={xaxis:0,yaxis:1,zaxis:2};function l(h,s){this.scene=h,this.uid=s,this.mesh=null,this.data=null}var r=l.prototype;function d(h){var s=h.length;return s>2?h.slice(1,s-1):2===s?[(h[0]+h[1])/2]:h}function f(h){var s=h.length;return 1===s?[.5,.5]:[h[1]-h[0],h[s-1]-h[s-2]]}function t(h,s){var o=h.fullSceneLayout,p=h.dataScale,c=s._len,a={};function y(U,B){var V=o[B],ee=p[i[B]];return k.simpleMap(U,function(N){return V.d2l(N)*ee})}if(a.vectors=n(y(s._u,"xaxis"),y(s._v,"yaxis"),y(s._w,"zaxis"),c),!c)return{positions:[],cells:[]};var u=y(s._Xs,"xaxis"),_=y(s._Ys,"yaxis"),b=y(s._Zs,"zaxis");if(a.meshgrid=[u,_,b],a.gridFill=s._gridFill,s._slen)a.startingPositions=n(y(s._startsX,"xaxis"),y(s._startsY,"yaxis"),y(s._startsZ,"zaxis"));else{for(var w=_[0],T=d(u),C=d(b),M=new Array(T.length*C.length),I=0,P=0;P<T.length;P++)for(var S=0;S<C.length;S++)M[I++]=[T[P],w,C[S]];a.startingPositions=M}a.colormap=x(s),a.tubeSize=s.sizeref,a.maxLength=s.maxdisplayed;var E=y(s._xbnds,"xaxis"),R=y(s._ybnds,"yaxis"),D=y(s._zbnds,"zaxis"),j=f(u),H=f(_),Y=f(b),Z=m(a,[[E[0]-j[0],R[0]-H[0],D[0]-Y[0]],[E[1]+j[1],R[1]+H[1],D[1]+Y[1]]]),W=e(s);Z.vertexIntensityBounds=[W.min/s._normMax,W.max/s._normMax];var re=s.lightposition;return Z.lightPosition=[re.x,re.y,re.z],Z.ambient=s.lighting.ambient,Z.diffuse=s.lighting.diffuse,Z.specular=s.lighting.specular,Z.roughness=s.lighting.roughness,Z.fresnel=s.lighting.fresnel,Z.opacity=s.opacity,s._pad=Z.tubeScale*s.sizeref*2,Z}r.handlePick=function(h){var s=this.scene.fullSceneLayout,o=this.scene.dataScale;function p(y,u){var b=o[i[u]];return s[u].l2c(y)/b}if(h.object===this.mesh){var c=h.data.position,a=h.data.velocity;return h.traceCoordinate=[p(c[0],"xaxis"),p(c[1],"yaxis"),p(c[2],"zaxis"),p(a[0],"xaxis"),p(a[1],"yaxis"),p(a[2],"zaxis"),h.data.intensity*this.data._normMax,h.data.divergence],h.textLabel=this.data.hovertext||this.data.text,!0}},r.update=function(h){this.data=h;var s=t(this.scene,h);this.mesh.update(s)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(h,s){var o=h.glplot.gl,p=t(h,s),c=g(o,p),a=new l(h,s.uid);return a.mesh=c,a.data=s,c._trace=a,h.glplot.add(c),a}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],1056:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/colorscale/defaults"),k=v("./attributes");$.exports=function(x,e,n,i){function l(o,p){return m.coerce(x,e,k,o,p)}var r=l("u"),d=l("v"),f=l("w"),t=l("x"),h=l("y"),s=l("z");r&&r.length&&d&&d.length&&f&&f.length&&t&&t.length&&h&&h.length&&s&&s.length?(l("starts.x"),l("starts.y"),l("starts.z"),l("maxdisplayed"),l("sizeref"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),g(x,e,i,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),l("uhoverformat"),l("vhoverformat"),l("whoverformat"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":1053}],1057:[function(v,$,Q){"use strict";$.exports={moduleType:"trace",name:"streamtube",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:v("./calc").calc,plot:v("./convert"),eventData:function(m,g){return m.tubex=m.x,m.tubey=m.y,m.tubez=m.z,m.tubeu=g.traceCoordinate[3],m.tubev=g.traceCoordinate[4],m.tubew=g.traceCoordinate[5],m.norm=g.traceCoordinate[6],m.divergence=g.traceCoordinate[7],delete m.x,delete m.y,delete m.z,m},meta:{}}},{"../../plots/gl3d":607,"./attributes":1053,"./calc":1054,"./convert":1055,"./defaults":1056}],1058:[function(v,$,Q){"use strict";var m=v("../../plots/attributes"),g=v("../../plots/template_attributes").hovertemplateAttrs,k=v("../../plots/template_attributes").texttemplateAttrs,x=v("../../components/colorscale/attributes"),e=v("../../plots/domain").attributes,n=v("../pie/attributes"),i=v("./constants"),l=v("../../lib/extend").extendFlat;$.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:l({colors:{valType:"data_array",editType:"calc"},line:{color:l({},n.marker.line.color,{dflt:null}),width:l({},n.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},x("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:n.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:k({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:n.hovertext,hoverinfo:l({},m.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:g({},{keys:i.eventDataKeys}),textfont:n.textfont,insidetextorientation:n.insidetextorientation,insidetextfont:n.insidetextfont,outsidetextfont:l({},n.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:n.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"./constants":1061}],1059:[function(v,$,Q){"use strict";var m=v("../../plots/plots");Q.name="sunburst",Q.plot=function(g,k,x,e){m.plotBasePlot(Q.name,g,k,x,e)},Q.clean=function(g,k,x,e){m.cleanBasePlot(Q.name,g,k,x,e)}},{"../../plots/plots":628}],1060:[function(v,$,Q){"use strict";var m=v("d3-hierarchy"),g=v("fast-isnumeric"),k=v("../../lib"),x=v("../../components/colorscale").makeColorScaleFuncFromTrace,e=v("../pie/calc").makePullColorFn,n=v("../pie/calc").generateExtendedColors,i=v("../../components/colorscale").calc,l=v("../../constants/numerical").ALMOST_EQUAL,r={},d={},f={};Q.calc=function(t,h){var s,o,p,c,a,y,u=t._fullLayout,_=h.ids,b=k.isArrayOrTypedArray(_),w=h.labels,T=h.parents,C=h.values,M=k.isArrayOrTypedArray(C),I=[],P={},S={},E=function(J){return J||"number"==typeof J},R=function(J){return!M||g(C[J])&&C[J]>=0};b?(s=Math.min(_.length,T.length),o=function(J){return E(_[J])&&R(J)},p=function(J){return String(_[J])}):(s=Math.min(w.length,T.length),o=function(J){return E(w[J])&&R(J)},p=function(J){return String(w[J])}),M&&(s=Math.min(s,C.length));for(var D=0;D<s;D++)if(o(D)){var j=p(D),H=E(T[D])?String(T[D]):"",Y={i:D,id:j,pid:H,label:E(w[D])?String(w[D]):""};M&&(Y.v=+C[D]),I.push(Y),a=j,P[c=H]?P[c].push(a):P[c]=[a],S[a]=1}if(P[""]){if(P[""].length>1){for(var X=k.randstr(),Z=0;Z<I.length;Z++)""===I[Z].pid&&(I[Z].pid=X);I.unshift({hasMultipleRoots:!0,id:X,pid:"",label:""})}}else{var W,re=[];for(W in P)S[W]||re.push(W);if(1!==re.length)return k.warn(["Multiple implied roots, cannot build",h.type,"hierarchy of",h.name+".","These roots include:",re.join(", ")].join(" "));I.unshift({hasImpliedRoot:!0,id:W=re[0],pid:"",label:W})}try{y=m.stratify().id(function(J){return J.id}).parentId(function(J){return J.pid})(I)}catch(J){return k.warn(["Failed to build",h.type,"hierarchy of",h.name+".","Error:",J.message].join(" "))}var U=m.hierarchy(y),B=!1;if(M)switch(h.branchvalues){case"remainder":U.sum(function(J){return J.data.v});break;case"total":U.each(function(J){var te=J.data.data,ae=te.v;if(J.children){var le=J.children.reduce(function(se,ve){return se+ve.data.data.v},0);if((te.hasImpliedRoot||te.hasMultipleRoots)&&(ae=le),ae<le*l)return B=!0,k.warn(["Total value for node",J.data.data.id,"of",h.name,"is smaller than the sum of its children.","\nparent value =",ae,"\nchildren sum =",le].join(" "))}J.value=ae})}else!function J(te,ae,le){var se=0,ve=te.children;if(ve){for(var ue=ve.length,ye=0;ye<ue;ye++)se+=J(ve[ye],ae,le);le.branches&&se++}else le.leaves&&se++;return te.value=te.data.data.value=se,ae._values||(ae._values=[]),ae._values[te.data.data.i]=se,se}(U,h,{branches:-1!==h.count.indexOf("branches"),leaves:-1!==h.count.indexOf("leaves")});if(!B){var V,ee;h.sort&&U.sort(function(J,te){return te.value-J.value});var N=h.marker.colors||[];return h._hasColorscale?(!!N.length||(N=M?h.values:h._values),i(t,h,{vals:N,containerStr:"marker",cLetter:"c"}),ee=x(h.marker)):V=e(u["_"+h.type+"colormap"]),U.each(function(J){var te=J.data.data;te.color=h._hasColorscale?ee(N[te.i]):V(N[te.i],te.id)}),I[0].hierarchy=U,I}},Q._runCrossTraceCalc=function(t,h){var s=h._fullLayout,o=h.calcdata,p=s[t+"colorway"],c=s["_"+t+"colormap"];s["extend"+t+"colors"]&&(p=n(p,"icicle"===t?f:"treemap"===t?d:r));var a,y=0;function u(w){var T=w.data.data,C=T.id;!1===T.color&&(c[C]?T.color=c[C]:w.parent?w.parent.parent?T.color=w.parent.data.data.color:(c[C]=T.color=p[y%p.length],y++):T.color=a)}for(var _=0;_<o.length;_++){var b=o[_][0];b.trace.type===t&&b.hierarchy&&(a=b.trace.root.color,b.hierarchy.each(u))}},Q.crossTraceCalc=function(t){return Q._runCrossTraceCalc("sunburst",t)}},{"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../pie/calc":912,"d3-hierarchy":115,"fast-isnumeric":190}],1061:[function(v,$,Q){"use strict";$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1062:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./attributes"),k=v("../../plots/domain").defaults,x=v("../bar/defaults").handleText,e=v("../../components/colorscale"),n=e.hasColorscale,i=e.handleDefaults;$.exports=function(l,r,d,f){function t(a,y){return m.coerce(l,r,g,a,y)}var h=t("labels"),s=t("parents");if(h&&h.length&&s&&s.length){var o=t("values");t(o&&o.length?"branchvalues":"count"),t("level"),t("maxdepth"),t("marker.line.width")&&t("marker.line.color",f.paper_bgcolor),t("marker.colors");var p=r._hasColorscale=n(l,"marker","colors")||(l.marker||{}).coloraxis;p&&i(l,r,f,t,{prefix:"marker.",cLetter:"c"}),t("leaf.opacity",p?1:.7);var c=t("text");t("texttemplate"),r.texttemplate||t("textinfo",Array.isArray(c)?"text+label":"label"),t("hovertext"),t("hovertemplate"),x(l,r,f,t,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),t("insidetextorientation"),t("sort"),t("rotation"),t("root.color"),k(r,f,t),r._length=null}else r.visible=!1}},{"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":1058}],1063:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../registry"),k=v("../../components/fx/helpers").appendArrayPointValue,x=v("../../components/fx"),e=v("../../lib"),n=v("../../lib/events"),i=v("./helpers"),l=v("../pie/helpers").formatPieValue;function r(d,f,t){for(var h=d.data.data,s={curveNumber:f.index,pointNumber:h.i,data:f._input,fullData:f},o=0;o<t.length;o++){var p=t[o];p in d&&(s[p]=d[p])}return"parentString"in d&&!i.isHierarchyRoot(d)&&(s.parent=d.parentString),k(s,f,h.i),s}$.exports=function(d,f,t,h,s){var o=h[0],p=o.trace,c=o.hierarchy,a="sunburst"===p.type,y="treemap"===p.type||"icicle"===p.type;"_hasHoverLabel"in p||(p._hasHoverLabel=!1),"_hasHoverEvent"in p||(p._hasHoverEvent=!1),d.on("mouseover",function(u){var _=t._fullLayout;if(!t._dragging&&!1!==_.hovermode){var b,w=t._fullData[p.index],T=u.data.data,C=T.i,M=i.isHierarchyRoot(u),I=i.getParent(c,u),P=i.getValue(u),S=function(K){return e.castOption(w,C,K)},E=S("hovertemplate"),R=x.castHoverinfo(w,_,C),D=_.separators;if(E||R&&"none"!==R&&"skip"!==R){var j,H;a&&(j=o.cx+u.pxmid[0]*(1-u.rInscribed),H=o.cy+u.pxmid[1]*(1-u.rInscribed)),y&&(j=u._hoverX,H=u._hoverY);var Y,X={},Z=[],W=[],re=function(K){return-1!==Z.indexOf(K)};R&&(Z="all"===R?w._module.attributes.hoverinfo.flags:R.split("+")),X.label=T.label,re("label")&&X.label&&W.push(X.label),T.hasOwnProperty("v")&&(X.value=T.v,X.valueLabel=l(X.value,D),re("value")&&W.push(X.valueLabel)),X.currentPath=u.currentPath=i.getPath(u.data),re("current path")&&!M&&W.push(X.currentPath);var U=[],B=function(){-1===U.indexOf(Y)&&(W.push(Y),U.push(Y))};X.percentParent=u.percentParent=P/i.getValue(I),X.parent=u.parentString=i.getPtLabel(I),re("percent parent")&&(Y=i.formatPercent(X.percentParent,D)+" of "+X.parent,B()),X.percentEntry=u.percentEntry=P/i.getValue(f),X.entry=u.entry=i.getPtLabel(f),!re("percent entry")||M||u.onPathbar||(Y=i.formatPercent(X.percentEntry,D)+" of "+X.entry,B()),X.percentRoot=u.percentRoot=P/i.getValue(c),X.root=u.root=i.getPtLabel(c),re("percent root")&&!M&&(Y=i.formatPercent(X.percentRoot,D)+" of "+X.root,B()),X.text=S("hovertext")||S("text"),re("text")&&e.isValidTextValue(Y=X.text)&&W.push(Y),b=[r(u,w,s.eventDataKeys)];var V={trace:w,y:H,_x0:u._x0,_x1:u._x1,_y0:u._y0,_y1:u._y1,text:W.join("<br>"),name:E||re("name")?w.name:void 0,color:S("hoverlabel.bgcolor")||T.color,borderColor:S("hoverlabel.bordercolor"),fontFamily:S("hoverlabel.font.family"),fontSize:S("hoverlabel.font.size"),fontColor:S("hoverlabel.font.color"),nameLength:S("hoverlabel.namelength"),textAlign:S("hoverlabel.align"),hovertemplate:E,hovertemplateLabels:X,eventData:b};a&&(V.x0=j-u.rInscribed*u.rpx1,V.x1=j+u.rInscribed*u.rpx1,V.idealAlign=u.pxmid[0]<0?"left":"right"),y&&(V.x=j,V.idealAlign=j<0?"left":"right");var ee=[];x.loneHover(V,{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:t,inOut_bbox:ee}),b[0].bbox=ee[0],p._hasHoverLabel=!0}if(y){var N=d.select("path.surface");s.styleOne(N,u,w,{hovered:!0})}p._hasHoverEvent=!0,t.emit("plotly_hover",{points:b||[r(u,w,s.eventDataKeys)],event:m.event})}}),d.on("mouseout",function(u){var _=t._fullLayout,b=t._fullData[p.index],w=m.select(this).datum();if(p._hasHoverEvent&&(u.originalEvent=m.event,t.emit("plotly_unhover",{points:[r(w,b,s.eventDataKeys)],event:m.event}),p._hasHoverEvent=!1),p._hasHoverLabel&&(x.loneUnhover(_._hoverlayer.node()),p._hasHoverLabel=!1),y){var T=d.select("path.surface");s.styleOne(T,w,b,{hovered:!1})}}),d.on("click",function(u){var _=t._fullLayout,b=t._fullData[p.index],w=a&&(i.isHierarchyRoot(u)||i.isLeaf(u)),T=i.getPtId(u),C=i.isEntry(u)?i.findEntryWithChild(c,T):i.findEntryWithLevel(c,T),M=i.getPtId(C),I={points:[r(u,b,s.eventDataKeys)],event:m.event};w||(I.nextLevel=M);var P=n.triggerHandler(t,"plotly_"+p.type+"click",I);if(!1!==P&&_.hovermode&&(t._hoverdata=[r(u,b,s.eventDataKeys)],x.click(t,m.event)),!w&&!1!==P&&!t._dragging&&!t._transitioning){g.call("_storeDirectGUIEdit",b,_._tracePreGUI[b.uid],{level:b.level});var S={data:[{level:M}],traces:[p.index]},E={frame:{redraw:!1,duration:s.transitionTime},transition:{duration:s.transitionTime,easing:s.transitionEasing},mode:"immediate",fromcurrent:!0};x.loneUnhover(_._hoverlayer.node()),g.call("animate",t,S,E)}})}},{"../../components/fx":407,"../../components/fx/helpers":403,"../../lib":515,"../../lib/events":504,"../../registry":647,"../pie/helpers":915,"./helpers":1064,"@plotly/d3":58}],1064:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/color"),k=v("../../lib/setcursor"),x=v("../pie/helpers");function e(n){return n.data.data.pid}Q.findEntryWithLevel=function(n,i){var l;return i&&n.eachAfter(function(r){if(Q.getPtId(r)===i)return l=r.copy()}),l||n},Q.findEntryWithChild=function(n,i){var l;return n.eachAfter(function(r){for(var d=r.children||[],f=0;f<d.length;f++)if(Q.getPtId(d[f])===i)return l=r.copy()}),l||n},Q.isEntry=function(n){return!n.parent},Q.isLeaf=function(n){return!n.children},Q.getPtId=function(n){return n.data.data.id},Q.getPtLabel=function(n){return n.data.data.label},Q.getValue=function(n){return n.value},Q.isHierarchyRoot=function(n){return""===e(n)},Q.setSliceCursor=function(n,i,l){var r=l.isTransitioning;if(!r){var d=n.datum();r=l.hideOnRoot&&Q.isHierarchyRoot(d)||l.hideOnLeaves&&Q.isLeaf(d)}k(n,r?null:"pointer")},Q.getInsideTextFontKey=function(n,i,l,r,d){var t=l.data.data.i;return m.castOption(i,t,((d||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+n)||m.castOption(i,t,"textfont."+n)||r.size},Q.getOutsideTextFontKey=function(n,i,l,r){var d=l.data.data.i;return m.castOption(i,d,"outsidetextfont."+n)||m.castOption(i,d,"textfont."+n)||r.size},Q.isOutsideText=function(n,i){return!n._hasColorscale&&Q.isHierarchyRoot(i)},Q.determineTextFont=function(n,i,l,r){return Q.isOutsideText(n,i)?{color:Q.getOutsideTextFontKey("color",d=n,f=i,t=l),family:Q.getOutsideTextFontKey("family",d,f,t),size:Q.getOutsideTextFontKey("size",d,f,t)}:function(d,f,t,h){var o=f.data.data,p=o.i,c=m.castOption(d,p,((h||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!c&&d._input.textfont&&(c=m.castOption(d._input,p,"textfont.color")),{color:c||g.contrast(o.color),family:Q.getInsideTextFontKey("family",d,f,t,h),size:Q.getInsideTextFontKey("size",d,f,t,h)}}(n,i,l,r);var d,f,t},Q.hasTransition=function(n){return!!(n&&n.duration>0)},Q.getMaxDepth=function(n){return n.maxdepth>=0?n.maxdepth:1/0},Q.isHeader=function(n,i){return!(Q.isLeaf(n)||n.depth===i._maxDepth-1)},Q.getParent=function(n,i){return Q.findEntryWithLevel(n,e(i))},Q.listPath=function(n,i){var l=n.parent;if(!l)return[];var r=i?[l.data[i]]:[l];return Q.listPath(l,i).concat(r)},Q.getPath=function(n){return Q.listPath(n,"label").join("/")+"/"},Q.formatValue=x.formatPieValue,Q.formatPercent=function(n,i){var l=m.formatPercent(n,0);return"0%"===l&&(l=x.formatPiePercent(n,i)),l}},{"../../components/color":367,"../../lib":515,"../../lib/setcursor":536,"../pie/helpers":915}],1065:[function(v,$,Q){"use strict";$.exports={moduleType:"trace",name:"sunburst",basePlotModule:v("./base_plot"),categories:[],animatable:!0,attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot").plot,style:v("./style").style,colorbar:v("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1058,"./base_plot":1059,"./calc":1060,"./defaults":1062,"./layout_attributes":1066,"./layout_defaults":1067,"./plot":1068,"./style":1069}],1066:[function(v,$,Q){"use strict";$.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1067:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./layout_attributes");$.exports=function(k,x){function e(n,i){return m.coerce(k,x,g,n,i)}e("sunburstcolorway",x.colorway),e("extendsunburstcolors")}},{"../../lib":515,"./layout_attributes":1066}],1068:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("d3-hierarchy"),k=v("d3-interpolate").interpolate,x=v("../../components/drawing"),e=v("../../lib"),n=v("../../lib/svg_text_utils"),i=v("../bar/uniform_text"),l=i.recordMinTextSize,r=i.clearMinTextSize,d=v("../pie/plot"),f=v("../pie/helpers").getRotationAngle,t=d.computeTransform,h=d.transformInsideText,s=v("./style").styleOne,o=v("../bar/style").resizeText,p=v("./fx"),c=v("./constants"),a=v("./helpers");function y(_,b,w,T){var C=_._context.staticPlot,M=_._fullLayout,I=!M.uniformtext.mode&&a.hasTransition(T),P=m.select(w).selectAll("g.slice"),S=b[0],E=S.trace,D=a.findEntryWithLevel(S.hierarchy,E.level),j=a.getMaxDepth(E),H=M._size,Y=E.domain,Z=H.h*(Y.y[1]-Y.y[0]),W=.5*Math.min(H.w*(Y.x[1]-Y.x[0]),Z),re=S.cx=H.l+H.w*(Y.x[1]+Y.x[0])/2,U=S.cy=H.t+H.h*(1-Y.y[0])-Z/2;if(!D)return P.remove();var B=null,V={};I&&P.each(function(oe){V[a.getPtId(oe)]={rpx0:oe.rpx0,rpx1:oe.rpx1,x0:oe.x0,x1:oe.x1,transform:oe.transform},!B&&a.isEntry(oe)&&(B=oe)});var oe,ee=(oe=D,g.partition().size([2*Math.PI,oe.height+1])(oe)).descendants(),N=D.height+1,K=0,J=j;S.hasMultipleRoots&&a.isHierarchyRoot(D)&&(ee=ee.slice(1),N-=1,K=1,J+=1),ee=ee.filter(function(oe){return oe.y1<=J});var te=f(E.rotation);te&&ee.forEach(function(oe){oe.x0+=te,oe.x1+=te});var ae=Math.min(N,j),le=function(oe){return(oe-K)/ae*W},se=function(oe,de){return[oe*Math.cos(de),-oe*Math.sin(de)]},ve=function(oe){return e.pathAnnulus(oe.rpx0,oe.rpx1,oe.x0,oe.x1,re,U)},ue=function(oe){return re+u(oe)[0]*(oe.transform.rCenter||0)+(oe.transform.x||0)},ye=function(oe){return U+u(oe)[1]*(oe.transform.rCenter||0)+(oe.transform.y||0)};(P=P.data(ee,a.getPtId)).enter().append("g").classed("slice",!0),I?P.exit().transition().each(function(){var oe=m.select(this);oe.select("path.surface").transition().attrTween("d",function(de){var Te=function(Ee){var Ae,De=a.getPtId(Ee),Ie=V[De],Oe=V[a.getPtId(D)];if(Oe){var Xe=(Ee.x1>Oe.x1?2*Math.PI:0)+te;Ae=Ee.rpx1<Oe.rpx1?{x0:Ee.x0,x1:Ee.x1,rpx0:0,rpx1:0}:{x0:Xe,x1:Xe,rpx0:Ee.rpx0,rpx1:Ee.rpx1}}else{var Fe,Pe=a.getPtId(Ee.parent);P.each(function(bt){if(a.getPtId(bt)===Pe)return Fe=bt});var Re,qe=Fe.children;qe.forEach(function(bt,Tt){if(a.getPtId(bt)===De)return Re=Tt});var Qe=qe.length,ct=k(Fe.x0,Fe.x1);Ae={rpx0:W,rpx1:W,x0:ct(Re/Qe),x1:ct((Re+1)/Qe)}}return k(Ie,Ae)}(de);return function(Ee){return ve(Te(Ee))}}),oe.select("g.slicetext").attr("opacity",0)}).remove():P.exit().remove(),P.order();var Me=null;if(I&&B){var pe=a.getPtId(B);P.each(function(oe){null===Me&&a.getPtId(oe)===pe&&(Me=oe.x1)})}var ge=P;function we(oe){var de=oe.parent,Te=V[a.getPtId(de)],Ee={};if(Te){var Ae=de.children,De=Ae.indexOf(oe),Ie=Ae.length,Oe=k(Te.x0,Te.x1);Ee.x0=Oe(De/Ie),Ee.x1=Oe(De/Ie)}else Ee.x0=Ee.x1=0;return Ee}I&&(ge=ge.transition().each("end",function(){var oe=m.select(this);a.setSliceCursor(oe,_,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),ge.each(function(oe){var Xe,de=m.select(this),Te=e.ensureSingle(de,"path","surface",function(Xe){Xe.style("pointer-events",C?"none":"all")});oe.rpx0=le(oe.y0),oe.rpx1=le(oe.y1),oe.xmid=(oe.x0+oe.x1)/2,oe.pxmid=se(oe.rpx1,oe.xmid),oe.midangle=-(oe.xmid-Math.PI/2),oe.startangle=-(oe.x0-Math.PI/2),oe.stopangle=-(oe.x1-Math.PI/2),oe.halfangle=.5*Math.min(e.angleDelta(oe.x0,oe.x1)||Math.PI,Math.PI),oe.ring=1-oe.rpx0/oe.rpx1,oe.rInscribed=0===(Xe=oe).rpx0&&e.isFullCircle([Xe.x0,Xe.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Xe.halfangle)),Xe.ring/2)),I?Te.transition().attrTween("d",function(Xe){var Fe=function(Pe){var Re,qe=V[a.getPtId(Pe)],Qe={x0:Pe.x0,x1:Pe.x1,rpx0:Pe.rpx0,rpx1:Pe.rpx1};if(qe)Re=qe;else if(B)if(Pe.parent)if(Me){var ct=(Pe.x1>Me?2*Math.PI:0)+te;Re={x0:ct,x1:ct}}else e.extendFlat(Re={rpx0:W,rpx1:W},we(Pe));else Re={rpx0:0,rpx1:0};else Re={x0:te,x1:te};return k(Re,Qe)}(Xe);return function(Pe){return ve(Fe(Pe))}}):Te.attr("d",ve),de.call(p,D,_,b,{eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,_,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:_._transitioning}),Te.call(s,oe,E);var Ee=e.ensureSingle(de,"g","slicetext"),Ae=e.ensureSingle(Ee,"text","",function(Xe){Xe.attr("data-notex",1)}),De=e.ensureUniformFontSize(_,a.determineTextFont(E,oe,M.font));Ae.text(Q.formatSliceLabel(oe,D,E,b,M)).classed("slicetext",!0).attr("text-anchor","middle").call(x.font,De).call(n.convertToTspans,_);var Ie=x.bBox(Ae.node());oe.transform=h(Ie,oe,S),oe.transform.targetX=ue(oe),oe.transform.targetY=ye(oe);var Oe=function(Xe,Fe){var Pe=Xe.transform;return t(Pe,Fe),Pe.fontSize=De.size,l(E.type,Pe,M),e.getTextTransform(Pe)};I?Ae.transition().attrTween("transform",function(Xe){var Fe=function(Pe){var Re,qe=V[a.getPtId(Pe)],Qe=Pe.transform;if(qe)Re=qe;else if(Re={rpx1:Pe.rpx1,transform:{textPosAngle:Qe.textPosAngle,scale:0,rotate:Qe.rotate,rCenter:Qe.rCenter,x:Qe.x,y:Qe.y}},B)if(Pe.parent)if(Me){var ct=Pe.x1>Me?2*Math.PI:0;Re.x0=Re.x1=ct}else e.extendFlat(Re,we(Pe));else Re.x0=Re.x1=te;else Re.x0=Re.x1=te;var bt=k(Re.transform.textPosAngle,Pe.transform.textPosAngle),Tt=k(Re.rpx1,Pe.rpx1),_t=k(Re.x0,Pe.x0),nt=k(Re.x1,Pe.x1),Ke=k(Re.transform.scale,Qe.scale),xt=k(Re.transform.rotate,Qe.rotate),Ht=0===Qe.rCenter?3:0===Re.transform.rCenter?1/3:1,Zt=k(Re.transform.rCenter,Qe.rCenter);return function($t){var Xt=Tt($t),cr=_t($t),Ft=nt($t),Be=Zt(Math.pow($t,Ht)),He={pxmid:se(Xt,(cr+Ft)/2),rpx1:Xt,transform:{textPosAngle:bt($t),rCenter:Be,x:Qe.x,y:Qe.y}};return l(E.type,Qe,M),{transform:{targetX:ue(He),targetY:ye(He),scale:Ke($t),rotate:xt($t),rCenter:Be}}}}(Xe);return function(Pe){return Oe(Fe(Pe),Ie)}}):Ae.attr("transform",Oe(oe,Ie))})}function u(_){return w=_.transform.textPosAngle,[(b=_.rpx1)*Math.sin(w),-b*Math.cos(w)];var b,w}Q.plot=function(_,b,w,T){var C,M,I=_._fullLayout,P=I._sunburstlayer,S=!w,E=!I.uniformtext.mode&&a.hasTransition(w);r("sunburst",I),(C=P.selectAll("g.trace.sunburst").data(b,function(R){return R[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),C.order(),E?(T&&(M=T()),m.transition().duration(w.duration).ease(w.easing).each("end",function(){M&&M()}).each("interrupt",function(){M&&M()}).each(function(){P.selectAll("g.trace").each(function(R){y(_,R,this,w)})})):(C.each(function(R){y(_,R,this,w)}),I.uniformtext.mode&&o(_,I._sunburstlayer.selectAll(".trace"),"sunburst")),S&&C.exit().remove()},Q.formatSliceLabel=function(_,b,w,T,C){var M=w.texttemplate,I=w.textinfo;if(!(M||I&&"none"!==I))return"";var P=C.separators,E=_.data.data,R=T[0].hierarchy,D=a.isHierarchyRoot(_),j=a.getParent(R,_),H=a.getValue(_);if(!M){var Y,X=I.split("+"),Z=function(J){return-1!==X.indexOf(J)},W=[];if(Z("label")&&E.label&&W.push(E.label),E.hasOwnProperty("v")&&Z("value")&&W.push(a.formatValue(E.v,P)),!D){Z("current path")&&W.push(a.getPath(_.data));var re=0;Z("percent parent")&&re++,Z("percent entry")&&re++,Z("percent root")&&re++;var U=re>1;if(re){var B,V=function(J){Y=a.formatPercent(B,P),U&&(Y+=" of "+J),W.push(Y)};Z("percent parent")&&!D&&(B=H/a.getValue(j),V("parent")),Z("percent entry")&&(B=H/a.getValue(b),V("entry")),Z("percent root")&&(B=H/a.getValue(R),V("root"))}}return Z("text")&&(Y=e.castOption(w,E.i,"text"),e.isValidTextValue(Y)&&W.push(Y)),W.join("<br>")}var ee=e.castOption(w,E.i,"texttemplate");if(!ee)return"";var N={};E.label&&(N.label=E.label),E.hasOwnProperty("v")&&(N.value=E.v,N.valueLabel=a.formatValue(E.v,P)),N.currentPath=a.getPath(_.data),D||(N.percentParent=H/a.getValue(j),N.percentParentLabel=a.formatPercent(N.percentParent,P),N.parent=a.getPtLabel(j)),N.percentEntry=H/a.getValue(b),N.percentEntryLabel=a.formatPercent(N.percentEntry,P),N.entry=a.getPtLabel(b),N.percentRoot=H/a.getValue(R),N.percentRootLabel=a.formatPercent(N.percentRoot,P),N.root=a.getPtLabel(R),E.hasOwnProperty("color")&&(N.color=E.color);var K=e.castOption(w,E.i,"text");return(e.isValidTextValue(K)||""===K)&&(N.text=K),N.customdata=e.castOption(w,E.i,"customdata"),e.texttemplateString(ee,N,C._d3locale,N,w._meta||{})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/style":671,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"./constants":1061,"./fx":1063,"./helpers":1064,"./style":1069,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1069:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/color"),k=v("../../lib"),x=v("../bar/uniform_text").resizeText;function e(n,i,l){var r=i.data.data,d=!i.children,f=r.i,t=k.castOption(l,f,"marker.line.color")||g.defaultLine,h=k.castOption(l,f,"marker.line.width")||0;n.style("stroke-width",h).call(g.fill,r.color).call(g.stroke,t).style("opacity",d?l.leaf.opacity:null)}$.exports={style:function(n){var i=n._fullLayout._sunburstlayer.selectAll(".trace");x(n,i,"sunburst"),i.each(function(l){var r=m.select(this),d=l[0].trace;r.style("opacity",d.opacity),r.selectAll("path.surface").each(function(f){m.select(this).call(e,f,d)})})},styleOne:e}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],1070:[function(v,$,Q){"use strict";var m=v("../../components/color"),g=v("../../components/colorscale/attributes"),k=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../../plots/attributes"),n=v("../../lib/extend").extendFlat,i=v("../../plot_api/edit_types").overrideAll;function l(d){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:m.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:m.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var r=$.exports=i(n({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:x(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},g("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:l(),y:l(),z:l()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:n({},g.zauto,{}),zmin:n({},g.zmin,{}),zmax:n({},g.zmax,{})},hoverinfo:n({},e.hoverinfo),showlegend:n({},e.showlegend,{dflt:!1})}),"calc","nested");r.x.editType=r.y.editType=r.z.editType="calc+clearAxisTypes",r.transforms=void 0},{"../../components/color":367,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642}],1071:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/calc");$.exports=function(g,k){m(g,k,k.surfacecolor?{vals:k.surfacecolor,containerStr:"",cLetter:"c"}:{vals:k.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],1072:[function(v,$,Q){"use strict";var m=v("../../../stackgl_modules").gl_surface3d,g=v("../../../stackgl_modules").ndarray,k=v("../../../stackgl_modules").ndarray_linear_interpolate.d2,x=v("../heatmap/interp2d"),e=v("../heatmap/find_empties"),n=v("../../lib").isArrayOrTypedArray,i=v("../../lib/gl_format_color").parseColorScale,l=v("../../lib/str2rgbarray"),r=v("../../components/colorscale").extractOpts;function d(w,T,C){this.scene=w,this.uid=C,this.surface=T,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var f=d.prototype;f.getXat=function(w,T,C,M){var I=n(this.data.x)?n(this.data.x[0])?this.data.x[T][w]:this.data.x[w]:w;return void 0===C?I:M.d2l(I,0,C)},f.getYat=function(w,T,C,M){var I=n(this.data.y)?n(this.data.y[0])?this.data.y[T][w]:this.data.y[T]:T;return void 0===C?I:M.d2l(I,0,C)},f.getZat=function(w,T,C,M){var I=this.data.z[T][w];return null===I&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[T][w]),void 0===C?I:M.d2l(I,0,C)},f.handlePick=function(w){if(w.object===this.surface){var C=(w.data.index[1]-1)/this.dataScaleY-1,M=Math.max(Math.min(Math.round((w.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(C),this.data._ylength-1),0);w.index=[M,I],w.traceCoordinate=[this.getXat(M,I),this.getYat(M,I),this.getZat(M,I)],w.dataCoordinate=[this.getXat(M,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(M,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(M,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++)null!=w.dataCoordinate[P]&&(w.dataCoordinate[P]*=this.scene.dataScale[P]);var E=this.data.hovertext||this.data.text;return w.textLabel=Array.isArray(E)&&E[I]&&void 0!==E[I][M]?E[I][M]:E||"",w.data.dataCoordinate=w.dataCoordinate.slice(),this.surface.highlight(w.data),this.scene.glplot.spikes.position=w.dataCoordinate,!0}};var t=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function h(w,T){if(w<T)return 0;for(var C=0;0===Math.floor(w%T);)w/=T,C++;return C}function s(w){for(var T=[],C=0;C<t.length;C++)T.push(h(w,t[C]));return T}function o(w){for(var T=s(w),C=w,M=0;M<t.length;M++)if(T[M]>0){C=t[M];break}return C}function p(w,T){if(!(w<1||T<1)){for(var C=s(w),M=s(T),I=1,P=0;P<t.length;P++)I*=Math.pow(t[P],Math.max(C[P],M[P]));return I}}f.calcXnums=function(w){var T,C=[];for(T=1;T<w;T++){var M=this.getXat(T-1,0),I=this.getXat(T,0);C[T-1]=I!==M&&null!=M&&null!=I?Math.abs(I-M):0}var P=0;for(T=1;T<w;T++)P+=C[T-1];for(T=1;T<w;T++)C[T-1]=0===C[T-1]?1:Math.round(P/C[T-1]);return C},f.calcYnums=function(w){var T,C=[];for(T=1;T<w;T++){var M=this.getYat(0,T-1),I=this.getYat(0,T);C[T-1]=I!==M&&null!=M&&null!=I?Math.abs(I-M):0}var P=0;for(T=1;T<w;T++)P+=C[T-1];for(T=1;T<w;T++)C[T-1]=0===C[T-1]?1:Math.round(P/C[T-1]);return C};var c=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],a=c[9],y=c[13];function u(w,T,C){var M=C[8]+C[2]*T[0]+C[5]*T[1];return w[0]=(C[6]+C[0]*T[0]+C[3]*T[1])/M,w[1]=(C[7]+C[1]*T[0]+C[4]*T[1])/M,w}function _(w,T,C){return function(M,I,P,S){for(var E=[0,0],R=M.shape[0],D=M.shape[1],j=0;j<R;j++)for(var H=0;H<D;H++)P(E,[j,H],S),M.set(j,H,k(I,E[0],E[1]))}(w,T,u,C),w}function b(w,T){for(var C=!1,M=0;M<w.length;M++)if(T===w[M]){C=!0;break}!1===C&&w.push(T)}f.estimateScale=function(w,T){for(var C=1+function(I){if(0!==I.length){for(var P=1,S=0;S<I.length;S++)P=p(P,I[S]);return P}}(0===T?this.calcXnums(w):this.calcYnums(w));C<a;)C*=2;for(;C>y;)C--,C/=o(C),++C<a&&(C=y);var M=Math.round(C/w);return M>1?M:1},f.refineCoords=function(w){for(var T=this.dataScaleX,C=this.dataScaleY,M=w[0].shape[0],I=w[0].shape[1],P=0|Math.floor(w[0].shape[0]*T+1),S=0|Math.floor(w[0].shape[1]*C+1),E=1+M+1,R=1+I+1,D=g(new Float32Array(E*R),[E,R]),j=[1/T,0,0,0,1/C,0,0,0,1],H=0;H<w.length;++H){this.surface.padField(D,w[H]);var Y=g(new Float32Array(P*S),[P,S]);_(Y,D,j),w[H]=Y}},f.setContourLevels=function(){var w,T,M=[[],[],[]],I=[!1,!1,!1],P=!1;for(w=0;w<3;++w)if(this.showContour[w]&&(P=!0,this.contourSize[w]>0&&null!==this.contourStart[w]&&null!==this.contourEnd[w]&&this.contourEnd[w]>this.contourStart[w]))for(I[w]=!0,T=this.contourStart[w];T<this.contourEnd[w];T+=this.contourSize[w])b(M[w],T*this.scene.dataScale[w]);if(P){var S=[[],[],[]];for(w=0;w<3;++w)this.showContour[w]&&(S[w]=I[w]?M[w]:this.scene.contourLevels[w]);this.surface.update({levels:S})}},f.update=function(w){var T,C,M,I,P=this.scene,S=P.fullSceneLayout,E=this.surface,R=i(w),D=P.dataScale,j=w.z[0].length,H=w._ylength,Y=P.contourLevels;this.data=w;var X=[];for(T=0;T<3;T++)for(X[T]=[],C=0;C<j;C++)X[T][C]=[];for(C=0;C<j;C++)for(M=0;M<H;M++)X[0][C][M]=this.getXat(C,M,w.xcalendar,S.xaxis),X[1][C][M]=this.getYat(C,M,w.ycalendar,S.yaxis),X[2][C][M]=this.getZat(C,M,w.zcalendar,S.zaxis);if(w.connectgaps)for(w._emptypoints=e(X[2]),x(X[2],w._emptypoints),w._interpolatedZ=[],C=0;C<j;C++)for(w._interpolatedZ[C]=[],M=0;M<H;M++)w._interpolatedZ[C][M]=X[2][C][M];for(T=0;T<3;T++)for(C=0;C<j;C++)for(M=0;M<H;M++)null==(I=X[T][C][M])?X[T][C][M]=NaN:I=X[T][C][M]*=D[T];for(T=0;T<3;T++)for(C=0;C<j;C++)for(M=0;M<H;M++)null!=(I=X[T][C][M])&&(this.minValues[T]>I&&(this.minValues[T]=I),this.maxValues[T]<I&&(this.maxValues[T]=I));for(T=0;T<3;T++)this.objectOffset[T]=.5*(this.minValues[T]+this.maxValues[T]);for(T=0;T<3;T++)for(C=0;C<j;C++)for(M=0;M<H;M++)null!=(I=X[T][C][M])&&(X[T][C][M]-=this.objectOffset[T]);var Z=[g(new Float32Array(j*H),[j,H]),g(new Float32Array(j*H),[j,H]),g(new Float32Array(j*H),[j,H])];for(T=0;T<3;T++)for(C=0;C<j;C++)for(M=0;M<H;M++)Z[T].set(C,M,X[T][C][M]);X=[];var W={colormap:R,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!w.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:w.opacityscale,opacity:w.opacity},re=r(w);if(W.intensityBounds=[re.min,re.max],w.surfacecolor){var U=g(new Float32Array(j*H),[j,H]);for(C=0;C<j;C++)for(M=0;M<H;M++)U.set(C,M,w.surfacecolor[M][C]);Z.push(U)}else W.intensityBounds[0]*=D[2],W.intensityBounds[1]*=D[2];(y<Z[0].shape[0]||y<Z[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(Z[0].shape[0],0),this.dataScaleY=this.estimateScale(Z[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(Z)),w.surfacecolor&&(W.intensity=Z.pop());var N,K,J,B=[!0,!0,!0],V=["x","y","z"];for(T=0;T<3;++T){var ee=w.contours[V[T]];B[T]=ee.highlight,W.showContour[T]=ee.show||ee.highlight,W.showContour[T]&&(W.contourProject[T]=[ee.project.x,ee.project.y,ee.project.z],ee.show?(this.showContour[T]=!0,W.levels[T]=Y[T],E.highlightColor[T]=W.contourColor[T]=l(ee.color),E.highlightTint[T]=W.contourTint[T]=ee.usecolormap?0:1,W.contourWidth[T]=ee.width,this.contourStart[T]=ee.start,this.contourEnd[T]=ee.end,this.contourSize[T]=ee.size):(this.showContour[T]=!1,this.contourStart[T]=null,this.contourEnd[T]=null,this.contourSize[T]=0),ee.highlight&&(W.dynamicColor[T]=l(ee.highlightcolor),W.dynamicWidth[T]=ee.highlightwidth))}(K=(N=R)[0].rgb)[0]===(J=N[N.length-1].rgb)[0]&&K[1]===J[1]&&K[2]===J[2]&&K[3]===J[3]&&(W.vertexColor=!0),W.objectOffset=this.objectOffset,W.coords=Z,E.update(W),E.visible=w.visible,E.enableDynamic=B,E.enableHighlight=B,E.snapToData=!0,"lighting"in w&&(E.ambientLight=w.lighting.ambient,E.diffuseLight=w.lighting.diffuse,E.specularLight=w.lighting.specular,E.roughness=w.lighting.roughness,E.fresnel=w.lighting.fresnel),"lightposition"in w&&(E.lightPosition=[w.lightposition.x,w.lightposition.y,w.lightposition.z])},f.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},$.exports=function(w,T){var M=m({gl:w.glplot.gl}),I=new d(w,M,T.uid);return M._trace=I,I.update(T),w.glplot.add(M),I}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../heatmap/find_empties":807,"../heatmap/interp2d":810}],1073:[function(v,$,Q){"use strict";var m=v("../../registry"),g=v("../../lib"),k=v("../../components/colorscale/defaults"),x=v("./attributes");function e(i,l,r,d){var f=d("opacityscale");"max"===f?l.opacityscale=[[0,.1],[1,1]]:"min"===f?l.opacityscale=[[0,1],[1,.1]]:"extremes"===f?l.opacityscale=function(t,h){for(var s=[],o=0;o<32;o++){var p=o/31,c=.1+.9*(1-Math.pow(Math.sin(1*p*Math.PI),2));s.push([p,Math.max(0,Math.min(1,c))])}return s}():function(t){var h=0;if(!Array.isArray(t)||t.length<2||!t[0]||!t[t.length-1]||0!=+t[0][0]||1!=+t[t.length-1][0])return!1;for(var s=0;s<t.length;s++){var o=t[s];if(2!==o.length||+o[0]<h)return!1;h=+o[0]}return!0}(f)||(l.opacityscale=void 0)}function n(i,l,r){l in i&&!(r in i)&&(i[r]=i[l])}$.exports={supplyDefaults:function(i,l,r,d){var f,t;function h(b,w){return g.coerce(i,l,x,b,w)}var s=h("x"),o=h("y"),p=h("z");if(!p||!p.length||s&&s.length<1||o&&o.length<1)l.visible=!1;else{l._xlength=Array.isArray(s)&&g.isArrayOrTypedArray(s[0])?p.length:p[0].length,l._ylength=p.length,m.getComponentMethod("calendars","handleTraceDefaults")(i,l,["x","y","z"],d),h("text"),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat"),h("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(b){h(b)});var c=h("surfacecolor"),a=["x","y","z"];for(f=0;f<3;++f){var y="contours."+a[f],u=h(y+".show"),_=h(y+".highlight");if(u||_)for(t=0;t<3;++t)h(y+".project."+a[t]);u&&(h(y+".color"),h(y+".width"),h(y+".usecolormap")),_&&(h(y+".highlightcolor"),h(y+".highlightwidth")),h(y+".start"),h(y+".end"),h(y+".size")}c||(n(i,"zmin","cmin"),n(i,"zmax","cmax"),n(i,"zauto","cauto")),k(i,l,d,h,{prefix:"",cLetter:"c"}),e(0,l,0,h),l._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":1070}],1074:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:v("./calc"),plot:v("./convert"),moduleType:"trace",name:"surface",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":1070,"./calc":1071,"./convert":1072,"./defaults":1073}],1075:[function(v,$,Q){"use strict";var m=v("../../components/annotations/attributes"),g=v("../../lib/extend").extendFlat,k=v("../../plot_api/edit_types").overrideAll,x=v("../../plots/font_attributes"),e=v("../../plots/domain").attributes,n=v("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;($.exports=k({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:n("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:g({},m.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:g({},x({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:n("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:g({},m.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:g({},x({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":350,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594}],1076:[function(v,$,Q){"use strict";var m=v("../../plots/get_data").getModuleCalcData,g=v("./plot");Q.name="table",Q.plot=function(k){var x=m(k.calcdata,"table")[0];x.length&&g(k,x)},Q.clean=function(k,x,e,n){var i=n._has&&n._has("table"),l=x._has&&x._has("table");i&&!l&&n._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":602,"./plot":1083}],1077:[function(v,$,Q){"use strict";var m=v("../../lib/gup").wrap;$.exports=function(){return m({})}},{"../../lib/gup":512}],1078:[function(v,$,Q){"use strict";$.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1079:[function(v,$,Q){"use strict";var m=v("./constants"),g=v("../../lib/extend").extendFlat,k=v("fast-isnumeric");function x(f){if(Array.isArray(f)){for(var t=0,h=0;h<f.length;h++)t=Math.max(t,x(f[h]));return t}return f}function e(f,t){return f+t}function n(f){var t,h=f.slice(),s=1/0,o=0;for(t=0;t<h.length;t++)Array.isArray(h[t])||(h[t]=[h[t]]),s=Math.min(s,h[t].length),o=Math.max(o,h[t].length);if(s!==o)for(t=0;t<h.length;t++){var p=o-h[t].length;p&&(h[t]=h[t].concat(i(p)))}return h}function i(f){for(var t=new Array(f),h=0;h<f;h++)t[h]="";return t}function l(f){return f.calcdata.columns.reduce(function(t,h){return h.xIndex<f.xIndex?t+h.columnWidth:t},0)}function r(f,t){return Object.keys(f).map(function(h){return g({},f[h],{auxiliaryBlocks:t})})}function d(f,t){for(var h,s={},o=0,p=0,c={firstRowIndex:null,lastRowIndex:null,rows:[]},a=0,y=0,u=0;u<f.length;u++)c.rows.push({rowIndex:u,rowHeight:h=f[u]}),((p+=h)>=t||u===f.length-1)&&(s[o]=c,c.key=y++,c.firstRowIndex=a,c.lastRowIndex=u,c={firstRowIndex:null,lastRowIndex:null,rows:[]},o+=p,a=u+1,p=0);return s}$.exports=function(f,t){var h=n(t.cells.values),s=function(D){return D.slice(t.header.values.length,D.length)},o=n(t.header.values);o.length&&!o[0].length&&(o[0]=[""],o=n(o));var p=o.concat(s(h).map(function(){return i((o[0]||[""]).length)})),c=t.domain,a=Math.floor(f._fullLayout._size.w*(c.x[1]-c.x[0])),y=Math.floor(f._fullLayout._size.h*(c.y[1]-c.y[0])),u=t.header.values.length?p[0].map(function(){return t.header.height}):[m.emptyHeaderHeight],_=h.length?h[0].map(function(){return t.cells.height}):[],b=u.reduce(e,0),w=d(_,y-b+m.uplift),T=r(d(u,b),[]),C=r(w,T),M={},I=t._fullInput.columnorder.concat(s(h.map(function(D,j){return j}))),P=p.map(function(D,j){var H=Array.isArray(t.columnwidth)?t.columnwidth[Math.min(j,t.columnwidth.length-1)]:t.columnwidth;return k(H)?Number(H):1}),S=P.reduce(e,0);P=P.map(function(D){return D/S*a});var E=Math.max(x(t.header.line.width),x(t.cells.line.width)),R={key:t.uid+f._context.staticPlot,translateX:c.x[0]*f._fullLayout._size.w,translateY:f._fullLayout._size.h*(1-c.y[1]),size:f._fullLayout._size,width:a,maxLineWidth:E,height:y,columnOrder:I,groupHeight:y,rowBlocks:C,headerRowBlocks:T,scrollY:0,cells:g({},t.cells,{values:h}),headerCells:g({},t.header,{values:p}),gdColumns:p.map(function(D){return D[0]}),gdColumnsOriginalOrder:p.map(function(D){return D[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:p.map(function(D,j){return M[D]=(M[D]||0)+1,{key:D+"__"+M[D],label:D,specIndex:j,xIndex:I[j],xScale:l,x:void 0,calcdata:void 0,columnWidth:P[j]}})};return R.columns.forEach(function(D){D.calcdata=R,D.x=l(D)}),R}},{"../../lib/extend":505,"./constants":1078,"fast-isnumeric":190}],1080:[function(v,$,Q){"use strict";var m=v("../../lib/extend").extendFlat;Q.splitToPanels=function(g){var k=[0,0],x=m({},g,{key:"header",type:"header",page:0,prevPages:k,currentRepaint:[null,null],dragHandle:!0,values:g.calcdata.headerCells.values[g.specIndex],rowBlocks:g.calcdata.headerRowBlocks,calcdata:m({},g.calcdata,{cells:g.calcdata.headerCells})});return[m({},g,{key:"cells1",type:"cells",page:0,prevPages:k,currentRepaint:[null,null],dragHandle:!1,values:g.calcdata.cells.values[g.specIndex],rowBlocks:g.calcdata.rowBlocks}),m({},g,{key:"cells2",type:"cells",page:1,prevPages:k,currentRepaint:[null,null],dragHandle:!1,values:g.calcdata.cells.values[g.specIndex],rowBlocks:g.calcdata.rowBlocks}),x]},Q.splitToCells=function(g){var x,e,n,k=[n=(e=(x=g).rowBlocks[x.page])?e.rows[0].rowIndex:0,e?n+e.rows.length:0];return(g.values||[]).slice(k[0],k[1]).map(function(x,e){return{keyWithinBlock:e+("string"==typeof x&&x.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:k[0]+e,column:g,calcdata:g.calcdata,page:g.page,rowBlocks:g.rowBlocks,value:x}})}},{"../../lib/extend":505}],1081:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./attributes"),k=v("../../plots/domain").defaults;$.exports=function(x,e,n,i){function l(r,d){return m.coerce(x,e,g,r,d)}k(e,i,l),l("columnwidth"),l("header.values"),l("header.format"),l("header.align"),l("header.prefix"),l("header.suffix"),l("header.height"),l("header.line.width"),l("header.line.color"),l("header.fill.color"),m.coerceFont(l,"header.font",m.extendFlat({},i.font)),function(r,d){for(var t=r.header.values.length,h=(r.columnorder||[]).slice(0,t),s=h.slice().sort(function(c,a){return c-a}),o=h.map(function(c){return s.indexOf(c)}),p=o.length;p<t;p++)o.push(p);d("columnorder",o)}(e,l),l("cells.values"),l("cells.format"),l("cells.align"),l("cells.prefix"),l("cells.suffix"),l("cells.height"),l("cells.line.width"),l("cells.line.color"),l("cells.fill.color"),m.coerceFont(l,"cells.font",m.extendFlat({},i.font)),e._length=null}},{"../../lib":515,"../../plots/domain":593,"./attributes":1075}],1082:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),moduleType:"trace",name:"table",basePlotModule:v("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1081,"./plot":1083}],1083:[function(v,$,Q){"use strict";var m=v("./constants"),g=v("@plotly/d3"),k=v("../../lib").numberFormat,x=v("../../lib/gup"),e=v("../../components/drawing"),n=v("../../lib/svg_text_utils"),i=v("../../lib").raiseToTop,l=v("../../lib").strTranslate,r=v("../../lib").cancelTransition,d=v("./data_preparation_helper"),f=v("./data_split_helpers"),t=v("../../components/color");function h(Z){return Math.ceil(Z.calcdata.maxLineWidth/2)}function s(Z,W){return"clip"+Z._fullLayout._uid+"_scrollAreaBottomClip_"+W.key}function o(Z,W){return"clip"+Z._fullLayout._uid+"_columnBoundaryClippath_"+W.calcdata.key+"_"+W.specIndex}function p(Z){return[].concat.apply([],Z.map(function(W){return W})).map(function(W){return W.__data__})}function c(Z,W,re){var U=Z.selectAll("."+m.cn.scrollbarKit).data(x.repeat,x.keyFun);U.enter().append("g").classed(m.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),U.each(function(K){var ae,J=K.scrollbarState;J.totalHeight=j(ae=K.rowBlocks,ae.length-1)+(ae.length?H(ae[ae.length-1],1/0):1),J.scrollableAreaHeight=K.groupHeight-C(K),J.currentlyVisibleHeight=Math.min(J.totalHeight,J.scrollableAreaHeight),J.ratio=J.currentlyVisibleHeight/J.totalHeight,J.barLength=Math.max(J.ratio*J.currentlyVisibleHeight,m.goldenRatio*m.scrollbarWidth),J.barWiggleRoom=J.currentlyVisibleHeight-J.barLength,J.wiggleRoom=Math.max(0,J.totalHeight-J.scrollableAreaHeight),J.topY=0===J.barWiggleRoom?0:K.scrollY/J.wiggleRoom*J.barWiggleRoom,J.bottomY=J.topY+J.barLength,J.dragMultiplier=J.wiggleRoom/J.barWiggleRoom}).attr("transform",function(K){return l(K.width+m.scrollbarWidth/2+m.scrollbarOffset,C(K))});var B=U.selectAll("."+m.cn.scrollbar).data(x.repeat,x.keyFun);B.enter().append("g").classed(m.cn.scrollbar,!0);var V=B.selectAll("."+m.cn.scrollbarSlider).data(x.repeat,x.keyFun);V.enter().append("g").classed(m.cn.scrollbarSlider,!0),V.attr("transform",function(K){return l(0,K.scrollbarState.topY||0)});var ee=V.selectAll("."+m.cn.scrollbarGlyph).data(x.repeat,x.keyFun);ee.enter().append("line").classed(m.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",m.scrollbarWidth).attr("stroke-linecap","round").attr("y1",m.scrollbarWidth/2),ee.attr("y2",function(K){return K.scrollbarState.barLength-m.scrollbarWidth/2}).attr("stroke-opacity",function(K){return K.columnDragInProgress||!K.scrollbarState.barWiggleRoom||re?0:.4}),ee.transition().delay(0).duration(0),ee.transition().delay(m.scrollbarHideDelay).duration(m.scrollbarHideDuration).attr("stroke-opacity",0);var N=B.selectAll("."+m.cn.scrollbarCaptureZone).data(x.repeat,x.keyFun);N.enter().append("line").classed(m.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",m.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(K){var J=g.event.y,te=this.getBoundingClientRect(),ae=K.scrollbarState,le=J-te.top,se=g.scale.linear().domain([0,ae.scrollableAreaHeight]).range([0,ae.totalHeight]).clamp(!0);ae.topY<=le&&le<=ae.bottomY||I(W,Z,null,se(le-ae.barLength/2))(K)}).call(g.behavior.drag().origin(function(K){return g.event.stopPropagation(),K.scrollbarState.scrollbarScrollInProgress=!0,K}).on("drag",I(W,Z)).on("dragend",function(){})),N.attr("y2",function(K){return K.scrollbarState.scrollableAreaHeight}),W._context.staticPlot&&(ee.remove(),N.remove())}function a(Z,W,re,U){var N,B=function(ee){var N=ee.selectAll("."+m.cn.columnCell).data(f.splitToCells,function(K){return K.keyWithinBlock});return N.enter().append("g").classed(m.cn.columnCell,!0),N.exit().remove(),N}(((N=re.selectAll("."+m.cn.columnCells).data(x.repeat,x.keyFun)).enter().append("g").classed(m.cn.columnCells,!0),N.exit().remove(),N));B.each(function(N,K){var J=N.calcdata.cells.font,te=N.column.specIndex,ae={size:_(J.size,te,K),color:_(J.color,te,K),family:_(J.family,te,K)};N.rowNumber=N.key,N.align=_(N.calcdata.cells.align,te,K),N.cellBorderWidth=_(N.calcdata.cells.line.width,te,K),N.font=ae}),function(ee){ee.attr("width",function(N){return N.column.columnWidth}).attr("stroke-width",function(N){return N.cellBorderWidth}).each(function(N){var K=g.select(this);t.stroke(K,_(N.calcdata.cells.line.color,N.column.specIndex,N.rowNumber)),t.fill(K,_(N.calcdata.cells.fill.color,N.column.specIndex,N.rowNumber))})}(function(ee){var N=ee.selectAll("."+m.cn.cellRect).data(x.repeat,function(K){return K.keyWithinBlock});return N.enter().append("rect").classed(m.cn.cellRect,!0),N}(B));var V=function(ee){var N=ee.selectAll("."+m.cn.cellText).data(x.repeat,function(K){return K.keyWithinBlock});return N.enter().append("text").classed(m.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){g.event.stopPropagation()}),N}(function(ee){var N=ee.selectAll("."+m.cn.cellTextHolder).data(x.repeat,function(K){return K.keyWithinBlock});return N.enter().append("g").classed(m.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),N}(B));(function(ee){ee.each(function(N){e.font(g.select(this),N.font)})})(V),y(V,W,U,Z),D(B)}function y(Z,W,re,U){Z.text(function(B){var V=B.column.specIndex,ee=B.rowNumber,N=B.value,K="string"==typeof N,J=K&&N.match(/<br>/i),te=!K||J;B.mayHaveMarkup=K&&N.match(/[<&>]/);var ae,le="string"==typeof(ae=N)&&ae.match(m.latexCheck);B.latex=le;var se,ve,ue=le?"":_(B.calcdata.cells.prefix,V,ee)||"",ye=le?"":_(B.calcdata.cells.suffix,V,ee)||"",Me=le?null:_(B.calcdata.cells.format,V,ee)||null,pe=ue+(Me?k(Me)(B.value):B.value)+ye;if(B.wrappingNeeded=!B.wrapped&&!te&&!le&&(se=u(pe)),B.cellHeightMayIncrease=J||le||B.mayHaveMarkup||(void 0===se?u(pe):se),B.needsConvertToTspans=B.mayHaveMarkup||B.wrappingNeeded||B.latex,B.wrappingNeeded){var ge=(" "===m.wrapSplitCharacter?pe.replace(/<a href=/gi,"<a_href="):pe).split(m.wrapSplitCharacter),we=" "===m.wrapSplitCharacter?ge.map(function(oe){return oe.replace(/<a_href=/gi,"<a href=")}):ge;B.fragments=we.map(function(oe){return{text:oe,width:null}}),B.fragments.push({fragment:m.wrapSpacer,width:null}),ve=we.join(m.lineBreaker)+m.lineBreaker+m.wrapSpacer}else delete B.fragments,ve=pe;return ve}).attr("dy",function(B){return B.needsConvertToTspans?0:"0.75em"}).each(function(B){var V=g.select(this);B.needsConvertToTspans?n.convertToTspans(V,U,(B.wrappingNeeded?S:E)(re,this,W,U,B)):g.select(this.parentNode).attr("transform",function(N){return l(R(N),m.cellPad)}).attr("text-anchor",function(N){return{left:"start",center:"middle",right:"end"}[N.align]})})}function u(Z){return-1!==Z.indexOf(m.wrapSplitCharacter)}function _(Z,W,re){if(Array.isArray(Z)){var U=Z[Math.min(W,Z.length-1)];return Array.isArray(U)?U[Math.min(re,U.length-1)]:U}return Z}function b(Z,W,re){Z.transition().ease(m.releaseTransitionEase).duration(m.releaseTransitionDuration).attr("transform",l(W.x,re))}function w(Z){return"cells"===Z.type}function T(Z){return"header"===Z.type}function C(Z){return(Z.rowBlocks.length?Z.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(W,re){return W+H(re,1/0)},0)}function M(Z,W,re){var U=p(W)[0];if(void 0!==U){var B=U.rowBlocks,V=U.calcdata,ee=j(B,B.length),N=U.calcdata.groupHeight-C(U),K=V.scrollY=Math.max(0,Math.min(ee-N,V.scrollY)),J=function(te,ae,le){for(var se=[],ve=0,ue=0;ue<te.length;ue++){for(var ye=te[ue],Me=ye.rows,pe=0,ge=0;ge<Me.length;ge++)pe+=Me[ge].rowHeight;ye.allRowsHeight=pe,ae<ve+pe&&ae+le>ve&&se.push(ue),ve+=pe}return se}(B,K,N);1===J.length&&(J[0]===B.length-1?J.unshift(J[0]-1):J.push(J[0]+1)),J[0]%2&&J.reverse(),W.each(function(te,ae){te.page=J[ae],te.scrollY=K}),W.attr("transform",function(te){var ae=j(te.rowBlocks,te.page)-te.scrollY;return l(0,ae)}),Z&&(P(Z,re,W,J,U.prevPages,U,0),P(Z,re,W,J,U.prevPages,U,1),c(re,Z))}}function I(Z,W,re,U){return function(B){var V=B.calcdata?B.calcdata:B,ee=W.filter(function(te){return V.key===te.key}),K=V.scrollY;V.scrollY=void 0===U?V.scrollY+(re||V.scrollbarState.dragMultiplier)*g.event.dy:U;var J=ee.selectAll("."+m.cn.yColumn).selectAll("."+m.cn.columnBlock).filter(w);return M(Z,J,ee),V.scrollY===K}}function P(Z,W,re,U,B,V,ee){U[ee]!==B[ee]&&(clearTimeout(V.currentRepaint[ee]),V.currentRepaint[ee]=setTimeout(function(){var N=re.filter(function(K,J){return J===ee&&U[J]!==B[J]});a(Z,W,N,re),B[ee]=U[ee]}))}function S(Z,W,re,U){return function(){var B=g.select(W.parentNode);B.each(function(V){var ee=V.fragments;B.selectAll("tspan.line").each(function(ve,ue){ee[ue].width=this.getComputedTextLength()});var N,K,J=ee[ee.length-1].width,te=ee.slice(0,-1),ae=[],le=0,se=V.column.columnWidth-2*m.cellPad;for(V.value="";te.length;)le+(K=(N=te.shift()).width+J)>se&&(V.value+=ae.join(m.wrapSpacer)+m.lineBreaker,ae=[],le=0),ae.push(N.text),le+=K;le&&(V.value+=ae.join(m.wrapSpacer)),V.wrapped=!0}),B.selectAll("tspan.line").remove(),y(B.select("."+m.cn.cellText),re,Z,U),g.select(W.parentNode.parentNode).call(D)}}function E(Z,W,re,U,B){return function(){if(!B.settledY){var V=g.select(W.parentNode),ee=X(B),N=B.key-ee.firstRowIndex,K=ee.rows[N].rowHeight,J=B.cellHeightMayIncrease?W.parentNode.getBoundingClientRect().height+2*m.cellPad:K,te=Math.max(J,K);te-ee.rows[N].rowHeight&&(ee.rows[N].rowHeight=te,Z.selectAll("."+m.cn.columnCell).call(D),M(null,Z.filter(w),0),c(re,U,!0)),V.attr("transform",function(){var ae=this.parentNode.getBoundingClientRect(),le=g.select(this.parentNode).select("."+m.cn.cellRect).node().getBoundingClientRect(),se=this.transform.baseVal.consolidate(),ve=le.top-ae.top+(se?se.matrix.f:m.cellPad);return l(R(B,g.select(this.parentNode).select("."+m.cn.cellTextHolder).node().getBoundingClientRect().width),ve)}),B.settledY=!0}}}function R(Z,W){switch(Z.align){case"left":default:return m.cellPad;case"right":return Z.column.columnWidth-(W||0)-m.cellPad;case"center":return(Z.column.columnWidth-(W||0))/2}}function D(Z){Z.attr("transform",function(W){var re=W.rowBlocks[0].auxiliaryBlocks.reduce(function(B,V){return B+H(V,1/0)},0),U=H(X(W),W.key);return l(0,U+re)}).selectAll("."+m.cn.cellRect).attr("height",function(W){return(re=X(W),U=W.key,re.rows[U-re.firstRowIndex]).rowHeight;var re,U})}function j(Z,W){for(var re=0,U=W-1;U>=0;U--)re+=Y(Z[U]);return re}function H(Z,W){for(var re=0,U=0;U<Z.rows.length&&Z.rows[U].rowIndex<W;U++)re+=Z.rows[U].rowHeight;return re}function Y(Z){var W=Z.allRowsHeight;if(void 0!==W)return W;for(var re=0,U=0;U<Z.rows.length;U++)re+=Z.rows[U].rowHeight;return Z.allRowsHeight=re,re}function X(Z){return Z.rowBlocks[Z.page]}$.exports=function(Z,W){var re=!Z._context.staticPlot,U=Z._fullLayout._paper.selectAll("."+m.cn.table).data(W.map(function(ye){var Me=x.unwrap(ye).trace;return d(Z,Me)}),x.keyFun);U.exit().remove(),U.enter().append("g").classed(m.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),U.attr("width",function(ye){return ye.width+ye.size.l+ye.size.r}).attr("height",function(ye){return ye.height+ye.size.t+ye.size.b}).attr("transform",function(ye){return l(ye.translateX,ye.translateY)});var B=U.selectAll("."+m.cn.tableControlView).data(x.repeat,x.keyFun),V=B.enter().append("g").classed(m.cn.tableControlView,!0).style("box-sizing","content-box");if(re){var ee="onwheel"in document?"wheel":"mousewheel";V.on("mousemove",function(ye){B.filter(function(Me){return ye===Me}).call(c,Z)}).on(ee,function(ye){ye.scrollbarState.wheeling||(ye.scrollbarState.wheeling=!0,I(Z,B,null,ye.scrollY+g.event.deltaY)(ye)||(g.event.stopPropagation(),g.event.preventDefault()),ye.scrollbarState.wheeling=!1)}).call(c,Z,!0)}B.attr("transform",function(ye){return l(ye.size.l,ye.size.t)});var N=B.selectAll("."+m.cn.scrollBackground).data(x.repeat,x.keyFun);N.enter().append("rect").classed(m.cn.scrollBackground,!0).attr("fill","none"),N.attr("width",function(ye){return ye.width}).attr("height",function(ye){return ye.height}),B.each(function(ye){e.setClipUrl(g.select(this),s(Z,ye),Z)});var K=B.selectAll("."+m.cn.yColumn).data(function(ye){return ye.columns},x.keyFun);K.enter().append("g").classed(m.cn.yColumn,!0),K.exit().remove(),K.attr("transform",function(ye){return l(ye.x,0)}),re&&K.call(g.behavior.drag().origin(function(ye){return b(g.select(this),ye,-m.uplift),i(this),ye.calcdata.columnDragInProgress=!0,c(B.filter(function(Me){return ye.calcdata.key===Me.key}),Z),ye}).on("drag",function(ye){var Me=g.select(this),pe=function(ge){return(ye===ge?g.event.x:ge.x)+ge.columnWidth/2};ye.x=Math.max(-m.overdrag,Math.min(ye.calcdata.width+m.overdrag-ye.columnWidth,g.event.x)),p(K).filter(function(ge){return ge.calcdata.key===ye.calcdata.key}).sort(function(ge,we){return pe(ge)-pe(we)}).forEach(function(ge,we){ge.xIndex=we,ge.x=ye===ge?ge.x:ge.xScale(ge)}),K.filter(function(ge){return ye!==ge}).transition().ease(m.transitionEase).duration(m.transitionDuration).attr("transform",function(ge){return l(ge.x,0)}),Me.call(r).attr("transform",l(ye.x,-m.uplift))}).on("dragend",function(ye){var ge,we,oe,de,Me=g.select(this),pe=ye.calcdata;ye.x=ye.xScale(ye),ye.calcdata.columnDragInProgress=!1,b(Me,ye,0),ge=Z,we=pe,oe=pe.columns.map(function(ge){return ge.xIndex}),de=we.gdColumnsOriginalOrder,we.gdColumns.sort(function(Te,Ee){return oe[de.indexOf(Te)]-oe[de.indexOf(Ee)]}),we.columnorder=oe,ge.emit("plotly_restyle")})),K.each(function(ye){e.setClipUrl(g.select(this),o(Z,ye),Z)});var J=K.selectAll("."+m.cn.columnBlock).data(f.splitToPanels,x.keyFun);J.enter().append("g").classed(m.cn.columnBlock,!0).attr("id",function(ye){return ye.key}),J.style("cursor",function(ye){return ye.dragHandle?"ew-resize":ye.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var te=J.filter(T),ae=J.filter(w);re&&ae.call(g.behavior.drag().origin(function(ye){return g.event.stopPropagation(),ye}).on("drag",I(Z,B,-1)).on("dragend",function(){})),a(Z,B,te,J),a(Z,B,ae,J);var le=B.selectAll("."+m.cn.scrollAreaClip).data(x.repeat,x.keyFun);le.enter().append("clipPath").classed(m.cn.scrollAreaClip,!0).attr("id",function(ye){return s(Z,ye)});var se=le.selectAll("."+m.cn.scrollAreaClipRect).data(x.repeat,x.keyFun);se.enter().append("rect").classed(m.cn.scrollAreaClipRect,!0).attr("x",-m.overdrag).attr("y",-m.uplift).attr("fill","none"),se.attr("width",function(ye){return ye.width+2*m.overdrag}).attr("height",function(ye){return ye.height+m.uplift}),K.selectAll("."+m.cn.columnBoundary).data(x.repeat,x.keyFun).enter().append("g").classed(m.cn.columnBoundary,!0);var ve=K.selectAll("."+m.cn.columnBoundaryClippath).data(x.repeat,x.keyFun);ve.enter().append("clipPath").classed(m.cn.columnBoundaryClippath,!0),ve.attr("id",function(ye){return o(Z,ye)});var ue=ve.selectAll("."+m.cn.columnBoundaryRect).data(x.repeat,x.keyFun);ue.enter().append("rect").classed(m.cn.columnBoundaryRect,!0).attr("fill","none"),ue.attr("width",function(ye){return ye.columnWidth+2*h(ye)}).attr("height",function(ye){return ye.calcdata.height+2*h(ye)+m.uplift}).attr("x",function(ye){return-h(ye)}).attr("y",function(ye){return-h(ye)}),M(null,ae,B)}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"./constants":1078,"./data_preparation_helper":1079,"./data_split_helpers":1080,"@plotly/d3":58}],1084:[function(v,$,Q){"use strict";var m=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../plots/template_attributes").texttemplateAttrs,k=v("../../components/colorscale/attributes"),x=v("../../plots/domain").attributes,e=v("../pie/attributes"),n=v("../sunburst/attributes"),i=v("./constants"),l=v("../../lib/extend").extendFlat;$.exports={labels:n.labels,parents:n.parents,values:n.values,branchvalues:n.branchvalues,count:n.count,level:n.level,maxdepth:n.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:l({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:n.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:n.marker.line,editType:"calc"},k("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:l({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:n.textinfo,texttemplate:g({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:n.hoverinfo,hovertemplate:m({},{keys:i.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:l({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:n.root,domain:x({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"./constants":1087}],1085:[function(v,$,Q){"use strict";var m=v("../../plots/plots");Q.name="treemap",Q.plot=function(g,k,x,e){m.plotBasePlot(Q.name,g,k,x,e)},Q.clean=function(g,k,x,e){m.cleanBasePlot(Q.name,g,k,x,e)}},{"../../plots/plots":628}],1086:[function(v,$,Q){"use strict";var m=v("../sunburst/calc");Q.calc=function(g,k){return m.calc(g,k)},Q.crossTraceCalc=function(g){return m._runCrossTraceCalc("treemap",g)}},{"../sunburst/calc":1060}],1087:[function(v,$,Q){"use strict";$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1088:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./attributes"),k=v("../../components/color"),x=v("../../plots/domain").defaults,e=v("../bar/defaults").handleText,n=v("../bar/constants").TEXTPAD,i=v("../../components/colorscale"),l=i.hasColorscale,r=i.handleDefaults;$.exports=function(d,f,t,h){function s(w,T){return m.coerce(d,f,g,w,T)}var o=s("labels"),p=s("parents");if(o&&o.length&&p&&p.length){var c=s("values");s(c&&c.length?"branchvalues":"count"),s("level"),s("maxdepth"),"squarify"===s("tiling.packing")&&s("tiling.squarifyratio"),s("tiling.flip"),s("tiling.pad");var a=s("text");s("texttemplate"),f.texttemplate||s("textinfo",Array.isArray(a)?"text+label":"label"),s("hovertext"),s("hovertemplate");var y=s("pathbar.visible");e(d,f,h,s,"auto",{hasPathbar:y,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),s("textposition");var u=-1!==f.textposition.indexOf("bottom");s("marker.line.width")&&s("marker.line.color",h.paper_bgcolor);var _=s("marker.colors");(f._hasColorscale=l(d,"marker","colors")||(d.marker||{}).coloraxis)?r(d,f,h,s,{prefix:"marker.",cLetter:"c"}):s("marker.depthfade",!(_||[]).length);var b=2*f.textfont.size;s("marker.pad.t",u?b/4:b),s("marker.pad.l",b/4),s("marker.pad.r",b/4),s("marker.pad.b",u?b:b/4),f._hovered={marker:{line:{width:2,color:k.contrast(h.paper_bgcolor)}}},y&&(s("pathbar.thickness",f.pathbar.textfont.size+2*n),s("pathbar.side"),s("pathbar.edgeshape")),s("sort"),s("root.color"),x(f,h,s),f._length=null}else f.visible=!1}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":1084}],1089:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../sunburst/helpers"),k=v("../bar/uniform_text").clearMinTextSize,x=v("../bar/style").resizeText,e=v("./plot_one");$.exports=function(n,i,l,r,d){var f,t,h=d.type,s=d.drawDescendants,o=n._fullLayout,p=o["_"+h+"layer"],c=!l;k(h,o),(f=p.selectAll("g.trace."+h).data(i,function(a){return a[0].trace.uid})).enter().append("g").classed("trace",!0).classed(h,!0),f.order(),!o.uniformtext.mode&&g.hasTransition(l)?(r&&(t=r()),m.transition().duration(l.duration).ease(l.easing).each("end",function(){t&&t()}).each("interrupt",function(){t&&t()}).each(function(){p.selectAll("g.trace").each(function(a){e(n,a,this,l,s)})})):(f.each(function(a){e(n,a,this,l,s)}),o.uniformtext.mode&&x(n,p.selectAll(".trace"),h)),c&&f.exit().remove()}},{"../bar/style":671,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./plot_one":1098,"@plotly/d3":58}],1090:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=v("../../components/drawing"),x=v("../../lib/svg_text_utils"),e=v("./partition"),n=v("./style").styleOne,i=v("./constants"),l=v("../sunburst/helpers"),r=v("../sunburst/fx");$.exports=function(d,f,t,h,s){var o=s.barDifY,p=s.width,c=s.height,a=s.viewX,y=s.viewY,u=s.pathSlice,_=s.toMoveInsideSlice,b=s.strTransform,w=s.hasTransition,T=s.handleSlicesExit,C=s.makeUpdateSliceInterpolator,M=s.makeUpdateTextInterpolator,I={},P=d._context.staticPlot,S=d._fullLayout,E=f[0],R=E.trace,D=E.hierarchy,j=p/R._entryDepth,H=l.listPath(t.data,"id"),Y=e(D.copy(),[p,c],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(Y=Y.filter(function(Z){var W=H.indexOf(Z.data.id);return-1!==W&&(Z.x0=j*W,Z.x1=j*(W+1),Z.y0=o,Z.y1=o+c,Z.onPathbar=!0,!0)})).reverse(),(h=h.data(Y,l.getPtId)).enter().append("g").classed("pathbar",!0),T(h,!0,I,[p,c],u),h.order();var X=h;w&&(X=X.transition().each("end",function(){var Z=m.select(this);l.setSliceCursor(Z,d,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),X.each(function(Z){Z._x0=a(Z.x0),Z._x1=a(Z.x1),Z._y0=y(Z.y0),Z._y1=y(Z.y1),Z._hoverX=a(Z.x1-Math.min(p,c)/2),Z._hoverY=y(Z.y1-c/2);var W=m.select(this),re=g.ensureSingle(W,"path","surface",function(ee){ee.style("pointer-events",P?"none":"all")});w?re.transition().attrTween("d",function(ee){var N=C(ee,!0,I,[p,c]);return function(K){return u(N(K))}}):re.attr("d",u),W.call(r,t,d,f,{styleOne:n,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,d,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:d._transitioning}),re.call(n,Z,R,{hovered:!1}),Z._text=(l.getPtLabel(Z)||"").split("<br>").join(" ")||"";var U=g.ensureSingle(W,"g","slicetext"),B=g.ensureSingle(U,"text","",function(ee){ee.attr("data-notex",1)}),V=g.ensureUniformFontSize(d,l.determineTextFont(R,Z,S.font,{onPathbar:!0}));B.text(Z._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(k.font,V).call(x.convertToTspans,d),Z.textBB=k.bBox(B.node()),Z.transform=_(Z,{fontSize:V.size,onPathbar:!0}),Z.transform.fontSize=V.size,w?B.transition().attrTween("transform",function(ee){var N=M(ee,!0,I,[p,c]);return function(K){return b(N(K))}}):B.attr("transform",b(Z))})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1091:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=v("../../components/drawing"),x=v("../../lib/svg_text_utils"),e=v("./partition"),n=v("./style").styleOne,i=v("./constants"),l=v("../sunburst/helpers"),r=v("../sunburst/fx"),d=v("../sunburst/plot").formatSliceLabel;$.exports=function(f,t,h,s,o){var p=o.width,c=o.height,a=o.viewX,y=o.viewY,u=o.pathSlice,_=o.toMoveInsideSlice,b=o.strTransform,w=o.hasTransition,T=o.handleSlicesExit,C=o.makeUpdateSliceInterpolator,M=o.makeUpdateTextInterpolator,I=o.prevEntry,P=f._context.staticPlot,S=f._fullLayout,E=t[0].trace,R=-1!==E.textposition.indexOf("left"),D=-1!==E.textposition.indexOf("right"),j=-1!==E.textposition.indexOf("bottom"),H=!j&&!E.marker.pad.t||j&&!E.marker.pad.b,Y=e(h,[p,c],{packing:E.tiling.packing,squarifyratio:E.tiling.squarifyratio,flipX:E.tiling.flip.indexOf("x")>-1,flipY:E.tiling.flip.indexOf("y")>-1,pad:{inner:E.tiling.pad,top:E.marker.pad.t,left:E.marker.pad.l,right:E.marker.pad.r,bottom:E.marker.pad.b}}).descendants(),X=1/0,Z=-1/0;Y.forEach(function(V){var ee=V.depth;ee>=E._maxDepth?(V.x0=V.x1=(V.x0+V.x1)/2,V.y0=V.y1=(V.y0+V.y1)/2):(X=Math.min(X,ee),Z=Math.max(Z,ee))}),s=s.data(Y,l.getPtId),E._maxVisibleLayers=isFinite(Z)?Z-X+1:0,s.enter().append("g").classed("slice",!0),T(s,!1,{},[p,c],u),s.order();var W=null;if(w&&I){var re=l.getPtId(I);s.each(function(V){null===W&&l.getPtId(V)===re&&(W={x0:V.x0,x1:V.x1,y0:V.y0,y1:V.y1})})}var U=function(){return W||{x0:0,x1:p,y0:0,y1:c}},B=s;return w&&(B=B.transition().each("end",function(){var V=m.select(this);l.setSliceCursor(V,f,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),B.each(function(V){var ee=l.isHeader(V,E);V._x0=a(V.x0),V._x1=a(V.x1),V._y0=y(V.y0),V._y1=y(V.y1),V._hoverX=a(V.x1-E.marker.pad.r),V._hoverY=y(j?V.y1-E.marker.pad.b/2:V.y0+E.marker.pad.t/2);var N=m.select(this),K=g.ensureSingle(N,"path","surface",function(le){le.style("pointer-events",P?"none":"all")});w?K.transition().attrTween("d",function(le){var se=C(le,!1,U(),[p,c]);return function(ve){return u(se(ve))}}):K.attr("d",u),N.call(r,h,f,t,{styleOne:n,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,f,{isTransitioning:f._transitioning}),K.call(n,V,E,{hovered:!1}),V._text=V.x0===V.x1||V.y0===V.y1?"":ee?H?"":l.getPtLabel(V)||"":d(V,h,E,t,S)||"";var J=g.ensureSingle(N,"g","slicetext"),te=g.ensureSingle(J,"text","",function(le){le.attr("data-notex",1)}),ae=g.ensureUniformFontSize(f,l.determineTextFont(E,V,S.font));te.text(V._text||" ").classed("slicetext",!0).attr("text-anchor",D?"end":R||ee?"start":"middle").call(k.font,ae).call(x.convertToTspans,f),V.textBB=k.bBox(te.node()),V.transform=_(V,{fontSize:ae.size,isHeader:ee}),V.transform.fontSize=ae.size,w?te.transition().attrTween("transform",function(le){var se=M(le,!1,U(),[p,c]);return function(ve){return b(se(ve))}}):te.attr("transform",b(V))}),W}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1092:[function(v,$,Q){"use strict";$.exports=function m(g,k,x){var e;x.swapXY&&(e=g.x0,g.x0=g.y0,g.y0=e,e=g.x1,g.x1=g.y1,g.y1=e),x.flipX&&(e=g.x0,g.x0=k[0]-g.x1,g.x1=k[0]-e),x.flipY&&(e=g.y0,g.y0=k[1]-g.y1,g.y1=k[1]-e);var n=g.children;if(n)for(var i=0;i<n.length;i++)m(n[i],k,x)}},{}],1093:[function(v,$,Q){"use strict";$.exports={moduleType:"trace",name:"treemap",basePlotModule:v("./base_plot"),categories:[],animatable:!0,attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),style:v("./style").style,colorbar:v("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1097,"./style":1099}],1094:[function(v,$,Q){"use strict";$.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1095:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./layout_attributes");$.exports=function(k,x){function e(n,i){return m.coerce(k,x,g,n,i)}e("treemapcolorway",x.colorway),e("extendtreemapcolors")}},{"../../lib":515,"./layout_attributes":1094}],1096:[function(v,$,Q){"use strict";var m=v("d3-hierarchy"),g=v("./flip_tree");$.exports=function(k,x,e){var n,i=e.flipX,l=e.flipY,r="dice-slice"===e.packing,d=e.pad[l?"bottom":"top"],f=e.pad[i?"right":"left"],t=e.pad[i?"left":"right"],h=e.pad[l?"top":"bottom"];r&&(n=f,f=d,d=n,n=t,t=h,h=n);var s=m.treemap().tile(function(o,p){switch(o){case"squarify":return m.treemapSquarify.ratio(p);case"binary":return m.treemapBinary;case"dice":return m.treemapDice;case"slice":return m.treemapSlice;default:return m.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(f).paddingRight(t).paddingTop(d).paddingBottom(h).size(r?[x[1],x[0]]:x)(k);return(r||i||l)&&g(s,x,{swapXY:r,flipX:i,flipY:l}),s}},{"./flip_tree":1092,"d3-hierarchy":115}],1097:[function(v,$,Q){"use strict";var m=v("./draw"),g=v("./draw_descendants");$.exports=function(k,x,e,n){return m(k,x,e,n,{type:"treemap",drawDescendants:g})}},{"./draw":1089,"./draw_descendants":1091}],1098:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("d3-interpolate").interpolate,k=v("../sunburst/helpers"),x=v("../../lib"),e=v("../bar/constants").TEXTPAD,n=v("../bar/plot").toMoveInsideBar,i=v("../bar/uniform_text").recordMinTextSize,l=v("./constants"),r=v("./draw_ancestors");function d(f){return k.isHierarchyRoot(f)?"":k.getPtId(f)}$.exports=function(f,t,h,s,o){var p=f._fullLayout,c=t[0],a=c.trace,y="icicle"===a.type,u=c.hierarchy,_=k.findEntryWithLevel(u,a.level),b=m.select(h),w=b.selectAll("g.pathbar"),T=b.selectAll("g.slice");if(!_)return w.remove(),void T.remove();var C=k.isHierarchyRoot(_),M=!p.uniformtext.mode&&k.hasTransition(s),I=k.getMaxDepth(a),P=p._size,S=a.domain,E=P.w*(S.x[1]-S.x[0]),R=P.h*(S.y[1]-S.y[0]),D=E,j=a.pathbar.thickness,H=a.marker.line.width+l.gapWithPathbar,Y=a.pathbar.visible?a.pathbar.side.indexOf("bottom")>-1?R+H:-(j+H):0,X={x0:D,x1:D,y0:Y,y1:Y+j},Z=function(Ae,De,Ie){var Oe=a.tiling.pad,Xe=function(qe){return qe-Oe<=De.x0},Fe=function(qe){return qe+Oe>=De.x1},Pe=function(qe){return qe-Oe<=De.y0},Re=function(qe){return qe+Oe>=De.y1};return Ae.x0===De.x0&&Ae.x1===De.x1&&Ae.y0===De.y0&&Ae.y1===De.y1?{x0:Ae.x0,x1:Ae.x1,y0:Ae.y0,y1:Ae.y1}:{x0:Xe(Ae.x0-Oe)?0:Fe(Ae.x0-Oe)?Ie[0]:Ae.x0,x1:Xe(Ae.x1+Oe)?0:Fe(Ae.x1+Oe)?Ie[0]:Ae.x1,y0:Pe(Ae.y0-Oe)?0:Re(Ae.y0-Oe)?Ie[1]:Ae.y0,y1:Pe(Ae.y1+Oe)?0:Re(Ae.y1+Oe)?Ie[1]:Ae.y1}},W=null,re={},U={},B=null,V=function(Ae,De){return De?re[d(Ae)]:U[d(Ae)]};c.hasMultipleRoots&&C&&I++,a._maxDepth=I,a._backgroundColor=p.paper_bgcolor,a._entryDepth=_.data.depth,a._atRootLevel=C;var N=-E/2+P.l+P.w*(S.x[1]+S.x[0])/2,K=-R/2+P.t+P.h*(1-(S.y[1]+S.y[0])/2),J=function(Ae){return N+Ae},te=function(Ae){return K+Ae},ae=te(0),le=J(0),se=function(Ae){return le+Ae},ve=function(Ae){return ae+Ae};function ue(Ae,De){return Ae+","+De}var ye=se(0),Me=function(Ae){Ae.x=Math.max(ye,Ae.x)},pe=a.pathbar.edgeshape,ge=function(Ae,De){var Ie=Ae.x0,Oe=Ae.x1,Xe=Ae.y0,Fe=Ae.y1,Pe=Ae.textBB,Re=function(xt){return-1!==a.textposition.indexOf(xt)},qe=Re("bottom"),Qe=Re("top")||De.isHeader&&!qe?"start":qe?"end":"middle",ct=Re("right"),bt=Re("left")||De.onPathbar?-1:ct?1:0,Tt=a[y?"tiling":"marker"].pad;if(De.isHeader){if((Ie+=(y?Tt:Tt.l)-e)>=(Oe-=(y?Tt:Tt.r)-e)){var _t=(Ie+Oe)/2;Ie=_t,Oe=_t}var nt;qe?Xe<(nt=Fe-(y?Tt:Tt.b))&&nt<Fe&&(Xe=nt):Xe<(nt=Xe+(y?Tt:Tt.t))&&nt<Fe&&(Fe=nt)}var Ke=n(Ie,Oe,Xe,Fe,Pe,{isHorizontal:!1,constrained:!0,angle:0,anchor:Qe,leftToRight:bt});return Ke.fontSize=De.fontSize,Ke.targetX=J(Ke.targetX),Ke.targetY=te(Ke.targetY),isNaN(Ke.targetX)||isNaN(Ke.targetY)?{}:(Ie!==Oe&&Xe!==Fe&&i(a.type,Ke,p),{scale:Ke.scale,rotate:Ke.rotate,textX:Ke.textX,textY:Ke.textY,anchorX:Ke.anchorX,anchorY:Ke.anchorY,targetX:Ke.targetX,targetY:Ke.targetY})},we=function(Ae,De){for(var Ie,Oe=0,Xe=Ae;!Ie&&Oe<I;)Oe++,(Xe=Xe.parent)?Ie=V(Xe,De):Oe=I;return Ie||{}},oe=function(Ae,De,Ie,Oe,Xe){var Fe,Pe=V(Ae,De);if(Pe)Fe=Pe;else if(De)Fe=X;else if(W)if(Ae.parent){var Re=B||Ie;Re&&!De?Fe=Z(Ae,Re,Oe):x.extendFlat(Fe={},we(Ae,De))}else Fe=x.extendFlat({},Ae),y&&("h"===Xe.orientation?Xe.flipX?Fe.x0=Ae.x1:Fe.x1=0:Xe.flipY?Fe.y0=Ae.y1:Fe.y1=0);else Fe={};return g(Fe,{x0:Ae.x0,x1:Ae.x1,y0:Ae.y0,y1:Ae.y1})},de=function(Ae,De,Ie,Oe){var Xe=V(Ae,De),Fe={},Pe=function(Ae,De,Ie,Oe){return De?re[d(u)]||X:Ae.data.depth-_.data.depth<I?Z(Ae,U[a.level]||Ie,Oe):{}}(Ae,De,Ie,Oe);x.extendFlat(Fe,{transform:ge({x0:Pe.x0,x1:Pe.x1,y0:Pe.y0,y1:Pe.y1,textBB:Ae.textBB,_text:Ae._text},{isHeader:k.isHeader(Ae,a)})}),Xe?Fe=Xe:Ae.parent&&x.extendFlat(Fe,we(Ae,De));var Re=Ae.transform;return Ae.x0!==Ae.x1&&Ae.y0!==Ae.y1&&i(a.type,Re,p),g(Fe,{transform:{scale:Re.scale,rotate:Re.rotate,textX:Re.textX,textY:Re.textY,anchorX:Re.anchorX,anchorY:Re.anchorY,targetX:Re.targetX,targetY:Re.targetY}})},Te=function(Ae,De,Ie,Oe,Xe){var Fe=Oe[0],Pe=Oe[1];M?Ae.exit().transition().each(function(){var Re=m.select(this);Re.select("path.surface").transition().attrTween("d",function(qe){var Qe=function(ct,bt,Tt,_t){var nt,Ke=V(ct,bt);if(bt)nt=X;else{var xt=V(_,bt);nt=xt?Z(ct,xt,_t):{}}return g(Ke,nt)}(qe,De,0,[Fe,Pe]);return function(ct){return Xe(Qe(ct))}}),Re.select("g.slicetext").attr("opacity",0)}).remove():Ae.exit().remove()},Ee=function(Ae){var De=Ae.transform;return Ae.x0!==Ae.x1&&Ae.y0!==Ae.y1&&i(a.type,De,p),x.getTextTransform({textX:De.textX,textY:De.textY,anchorX:De.anchorX,anchorY:De.anchorY,targetX:De.targetX,targetY:De.targetY,scale:De.scale,rotate:De.rotate})};M&&(w.each(function(Ae){re[d(Ae)]={x0:Ae.x0,x1:Ae.x1,y0:Ae.y0,y1:Ae.y1},Ae.transform&&(re[d(Ae)].transform={textX:Ae.transform.textX,textY:Ae.transform.textY,anchorX:Ae.transform.anchorX,anchorY:Ae.transform.anchorY,targetX:Ae.transform.targetX,targetY:Ae.transform.targetY,scale:Ae.transform.scale,rotate:Ae.transform.rotate})}),T.each(function(Ae){U[d(Ae)]={x0:Ae.x0,x1:Ae.x1,y0:Ae.y0,y1:Ae.y1},Ae.transform&&(U[d(Ae)].transform={textX:Ae.transform.textX,textY:Ae.transform.textY,anchorX:Ae.transform.anchorX,anchorY:Ae.transform.anchorY,targetX:Ae.transform.targetX,targetY:Ae.transform.targetY,scale:Ae.transform.scale,rotate:Ae.transform.rotate}),!W&&k.isEntry(Ae)&&(W=Ae)})),B=o(f,t,_,T,{width:E,height:R,viewX:J,viewY:te,pathSlice:function(Ae){var De=J(Ae.x0),Ie=J(Ae.x1),Oe=te(Ae.y0),Xe=te(Ae.y1);return Ie-De&&Xe-Oe?"M"+ue(De,Oe+0)+"L"+ue(Ie-0,Oe)+"L"+ue(Ie,Xe-0)+"L"+ue(De+0,Xe)+"Z":""},toMoveInsideSlice:ge,prevEntry:W,makeUpdateSliceInterpolator:oe,makeUpdateTextInterpolator:de,handleSlicesExit:Te,hasTransition:M,strTransform:Ee}),a.pathbar.visible?r(f,t,_,w,{barDifY:Y,width:D,height:j,viewX:se,viewY:ve,pathSlice:function(Ae){var De=se(Math.max(Math.min(Ae.x0,Ae.x0),0)),Ie=se(Math.min(Math.max(Ae.x1,Ae.x1),D)),Oe=ve(Ae.y0),Xe=ve(Ae.y1),Fe=j/2,Pe={},Re={};Pe.x=De,Re.x=Ie,Pe.y=Re.y=(Oe+Xe)/2;var qe={x:De,y:Oe},Qe={x:Ie,y:Oe},ct={x:Ie,y:Xe},bt={x:De,y:Xe};return">"===pe?(qe.x-=Fe,Qe.x-=Fe,ct.x-=Fe,bt.x-=Fe):"/"===pe?(ct.x-=Fe,bt.x-=Fe,Pe.x-=Fe/2,Re.x-=Fe/2):"\\"===pe?(qe.x-=Fe,Qe.x-=Fe,Pe.x-=Fe/2,Re.x-=Fe/2):"<"===pe&&(Pe.x-=Fe,Re.x-=Fe),Me(qe),Me(bt),Me(Pe),Me(Qe),Me(ct),Me(Re),"M"+ue(qe.x,qe.y)+"L"+ue(Qe.x,Qe.y)+"L"+ue(Re.x,Re.y)+"L"+ue(ct.x,ct.y)+"L"+ue(bt.x,bt.y)+"L"+ue(Pe.x,Pe.y)+"Z"},toMoveInsideSlice:ge,makeUpdateSliceInterpolator:oe,makeUpdateTextInterpolator:de,handleSlicesExit:Te,hasTransition:M,strTransform:Ee}):w.remove()}},{"../../lib":515,"../bar/constants":659,"../bar/plot":668,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./constants":1087,"./draw_ancestors":1090,"@plotly/d3":58,"d3-interpolate":116}],1099:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/color"),k=v("../../lib"),x=v("../sunburst/helpers"),e=v("../bar/uniform_text").resizeText;function n(i,l,r,d){var f,t,h=(d||{}).hovered,s=l.data.data,o=s.i,p=s.color,c=x.isHierarchyRoot(l),a=1;if(h)f=r._hovered.marker.line.color,t=r._hovered.marker.line.width;else if(c&&p===r.root.color)a=100,f="rgba(0,0,0,0)",t=0;else if(f=k.castOption(r,o,"marker.line.color")||g.defaultLine,t=k.castOption(r,o,"marker.line.width")||0,!r._hasColorscale&&!l.onPathbar){var y=r.marker.depthfade;if(y){var u,_=g.combine(g.addOpacity(r._backgroundColor,.75),p);if(!0===y){var b=x.getMaxDepth(r);u=isFinite(b)?x.isLeaf(l)?0:r._maxVisibleLayers-(l.data.depth-r._entryDepth):l.data.height+1}else u=l.data.depth-r._entryDepth,r._atRootLevel||u++;if(u>0)for(var w=0;w<u;w++)p=g.combine(g.addOpacity(_,.5*w/u),p)}}i.style("stroke-width",t).call(g.fill,p).call(g.stroke,f).style("opacity",a)}$.exports={style:function(i){var l=i._fullLayout._treemaplayer.selectAll(".trace");e(i,l,"treemap"),l.each(function(r){var d=m.select(this),f=r[0].trace;d.style("opacity",f.opacity),d.selectAll("path.surface").each(function(t){m.select(this).call(n,t,f,{hovered:!1})})})},styleOne:n}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"../sunburst/helpers":1064,"@plotly/d3":58}],1100:[function(v,$,Q){"use strict";var m=v("../box/attributes"),g=v("../../lib/extend").extendFlat,k=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat;$.exports={y:m.y,x:m.x,x0:m.x0,y0:m.y0,xhoverformat:k("x"),yhoverformat:k("y"),name:g({},m.name,{}),orientation:g({},m.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:m.fillcolor,points:g({},m.boxpoints,{}),jitter:g({},m.jitter,{}),pointpos:g({},m.pointpos,{}),width:g({},m.width,{}),marker:m.marker,text:m.text,hovertext:m.hovertext,hovertemplate:m.hovertemplate,quartilemethod:m.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:m.selected,unselected:m.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682}],1101:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../plots/cartesian/axes"),k=v("../box/calc"),x=v("./helpers"),e=v("../../constants/numerical").BADNUM;function n(l,r,d){var f=r.max-r.min;if(!f)return l.bandwidth?l.bandwidth:0;if(l.bandwidth)return Math.max(l.bandwidth,f/1e4);var s,t=d.length,h=m.stdev(d,t-1,r.mean);return Math.max((s=t,1.059*Math.min(h,(r.q3-r.q1)/1.349)*Math.pow(s,-.2)),f/100)}function i(l,r,d,f){var t,h=l.spanmode,s=l.span||[],p=[r.min-2*f,r.max+2*f];function c(y){var u=s[y],_="multicategory"===d.type?d.r2c(u):d.d2c(u,0,l[r.valLetter+"calendar"]);return _===e?p[y]:_}var a={type:"linear",range:t="soft"===h?p:"hard"===h?[r.min,r.max]:[c(0),c(1)]};return g.setConvert(a),a.cleanRange(),t}$.exports=function(l,r){var d=k(l,r);if(d[0].t.empty)return d;for(var f=l._fullLayout,t=g.getFromId(l,r["h"===r.orientation?"xaxis":"yaxis"]),h=1/0,s=-1/0,o=0,p=0,c=0;c<d.length;c++){var a=d[c],y=a.pts.map(x.extractVal),u=a.bandwidth=n(r,a,y),_=a.span=i(r,a,t,u);if(a.min===a.max&&0===u)_=a.span=[a.min,a.max],a.density=[{v:1,t:_[0]}],a.bandwidth=u,o=Math.max(o,1);else{var b=_[1]-_[0],w=Math.ceil(b/(u/3)),T=b/w;if(!isFinite(T)||!isFinite(w))return m.error("Something went wrong with computing the violin span"),d[0].t.empty=!0,d;var C=x.makeKDE(a,r,y);a.density=new Array(w);for(var M=0,I=_[0];I<_[1]+T/2;M++,I+=T){var P=C(I);a.density[M]={v:P,t:I},o=Math.max(o,P)}}p=Math.max(p,y.length),h=Math.min(h,_[0]),s=Math.max(s,_[1])}var S=g.findExtremes(t,[h,s],{padded:!0});if(r._extremes[t._id]=S,r.width)d[0].t.maxKDE=o;else{var E=f._violinScaleGroupStats,R=r.scalegroup,D=E[R];D?(D.maxKDE=Math.max(D.maxKDE,o),D.maxCount=Math.max(D.maxCount,p)):E[R]={maxKDE:o,maxCount:p}}return d[0].t.labels.kde=m._(l,"kde:"),d}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../box/calc":683,"./helpers":1104}],1102:[function(v,$,Q){"use strict";var m=v("../box/cross_trace_calc").setPositionOffset,g=["v","h"];$.exports=function(k,x){for(var e=k.calcdata,n=x.xaxis,i=x.yaxis,l=0;l<g.length;l++){for(var r=g[l],d="h"===r?i:n,f=[],t=0;t<e.length;t++){var h=e[t],o=h[0].trace;!0!==o.visible||"violin"!==o.type||h[0].t.empty||o.orientation!==r||o.xaxis!==n._id||o.yaxis!==i._id||f.push(t)}m("violin",k,f,d)}}},{"../box/cross_trace_calc":684}],1103:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../../components/color"),k=v("../box/defaults"),x=v("./attributes");$.exports=function(e,n,i,l){function r(b,w){return m.coerce(e,n,x,b,w)}function d(b,w){return m.coerce2(e,n,x,b,w)}if(k.handleSampleDefaults(e,n,r,l),!1!==n.visible){r("bandwidth"),r("side"),r("width")||(r("scalegroup",n.name),r("scalemode"));var f,t=r("span");Array.isArray(t)&&(f="manual"),r("spanmode",f);var h=r("line.color",(e.marker||{}).color||i),s=r("line.width"),o=r("fillcolor",g.addOpacity(n.line.color,.5));k.handlePointsDefaults(e,n,r,{prefix:""});var p=d("box.width"),c=d("box.fillcolor",o),a=d("box.line.color",h),y=d("box.line.width",s);r("box.visible",Boolean(p||c||a||y))||(n.box={visible:!1});var u=d("meanline.color",h),_=d("meanline.width",s);r("meanline.visible",Boolean(u||_))||(n.meanline={visible:!1}),r("quartilemethod")}}},{"../../components/color":367,"../../lib":515,"../box/defaults":685,"./attributes":1100}],1104:[function(v,$,Q){"use strict";var m=v("../../lib"),g=function(k){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*k*k)};Q.makeKDE=function(k,x,e){var n=e.length,i=g,l=k.bandwidth,r=1/(n*l);return function(d){for(var f=0,t=0;t<n;t++)f+=i((d-e[t])/l);return r*f}},Q.getPositionOnKdePath=function(k,x,e){var n,i;"h"===x.orientation?(n="y",i="x"):(n="x",i="y");var l=m.findPointOnPath(k.path,e,i,{pathLength:k.pathLength}),r=k.posCenterPx,d=l[n];return[d,"both"===x.side?2*r-d:r]},Q.getKdeValue=function(k,x,e){var n=k.pts.map(Q.extractVal);return Q.makeKDE(k,x,n)(e)/k.posDensityScale},Q.extractVal=function(k){return k.v}},{"../../lib":515}],1105:[function(v,$,Q){"use strict";var m=v("../../components/color"),g=v("../../lib"),k=v("../../plots/cartesian/axes"),x=v("../box/hover"),e=v("./helpers");$.exports=function(n,i,l,r,d){d||(d={});var f,t,h=d.hoverLayer,s=n.cd,o=s[0].trace,p=o.hoveron,c=-1!==p.indexOf("violins"),a=-1!==p.indexOf("kde"),y=[];if(c||a){var u=x.hoverOnBoxes(n,i,l,r);if(a&&u.length>0){var _,b,w,T,C,M=n.xa,I=n.ya;"h"===o.orientation?(C=i,_="y",w=I,b="x",T=M):(C=l,_="x",w=M,b="y",T=I);var P=s[n.index];if(C>=P.span[0]&&C<=P.span[1]){var S=g.extendFlat({},n),E=T.c2p(C,!0),R=e.getKdeValue(P,o,C),D=e.getPositionOnKdePath(P,o,E),j=w._offset,H=w._length;S[_+"0"]=D[0],S[_+"1"]=D[1],S[b+"0"]=S[b+"1"]=E,S[b+"Label"]=b+": "+k.hoverLabelText(T,C,o[b+"hoverformat"])+", "+s[0].t.labels.kde+" "+R.toFixed(3);for(var Y=0,X=0;X<u.length;X++)if("med"===u[X].attr){Y=X;break}S.spikeDistance=u[Y].spikeDistance;var Z=_+"Spike";S[Z]=u[Y][Z],u[Y].spikeDistance=void 0,u[Y][Z]=void 0,S.hovertemplate=!1,y.push(S),(t={})[_+"1"]=g.constrain(j+D[0],j,j+H),t[_+"2"]=g.constrain(j+D[1],j,j+H),t[b+"1"]=t[b+"2"]=T._offset+E}}c&&(y=y.concat(u))}-1!==p.indexOf("points")&&(f=x.hoverOnPoints(n,i,l));var W=h.selectAll(".violinline-"+o.uid).data(t?[0]:[]);return W.enter().append("line").classed("violinline-"+o.uid,!0).attr("stroke-width",1.5),W.exit().remove(),W.attr(t).call(m.stroke,n.color),"closest"===r?f?[f]:y:(f&&y.push(f),y)}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axes":566,"../box/hover":687,"./helpers":1104}],1106:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc"),plot:v("./plot"),style:v("./style"),styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../box/select"),moduleType:"trace",name:"violin",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../box/defaults":685,"../box/select":692,"../scatter/style":960,"./attributes":1100,"./calc":1101,"./cross_trace_calc":1102,"./defaults":1103,"./hover":1105,"./layout_attributes":1107,"./layout_defaults":1108,"./plot":1109,"./style":1110}],1107:[function(v,$,Q){"use strict";var m=v("../box/layout_attributes"),g=v("../../lib").extendFlat;$.exports={violinmode:g({},m.boxmode,{}),violingap:g({},m.boxgap,{}),violingroupgap:g({},m.boxgroupgap,{})}},{"../../lib":515,"../box/layout_attributes":689}],1108:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./layout_attributes"),k=v("../box/layout_defaults");$.exports=function(x,e,n){k._supply(x,e,n,function(i,l){return m.coerce(x,e,g,i,l)},"violin")}},{"../../lib":515,"../box/layout_defaults":690,"./layout_attributes":1107}],1109:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=v("../../components/drawing"),x=v("../box/plot"),e=v("../scatter/line_points"),n=v("./helpers");$.exports=function(i,l,r,d){var f=i._fullLayout,t=l.xaxis,h=l.yaxis;function s(o,p){var c=e(o,{xaxis:t,yaxis:h,trace:p,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return k.smoothopen(c[0],1)}g.makeTraceGroups(d,r,"trace violins").each(function(o){var p=m.select(this),c=o[0],a=c.t,y=c.trace;if(!0!==y.visible||a.empty)p.remove();else{var u=a.bPos,_=a.bdPos,b=l[a.valLetter+"axis"],w=l[a.posLetter+"axis"],T="both"===y.side,C=T||"positive"===y.side,M=T||"negative"===y.side,I=p.selectAll("path.violin").data(g.identity);I.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),I.exit().remove(),I.each(function(Y){var X,Z,W,re,U,B,V,ee,N=m.select(this),K=Y.density,J=K.length,te=w.c2l(Y.pos+u,!0),ae=w.l2p(te);if(y.width)X=a.maxKDE/_;else{var le=f._violinScaleGroupStats[y.scalegroup];X="count"===y.scalemode?le.maxKDE/_*(le.maxCount/Y.pts.length):le.maxKDE/_}if(C){for(V=new Array(J),U=0;U<J;U++)(ee=V[U]={})[a.posLetter]=te+K[U].v/X,ee[a.valLetter]=b.c2l(K[U].t,!0);Z=s(V,y)}if(M){for(V=new Array(J),B=0,U=J-1;B<J;B++,U--)(ee=V[B]={})[a.posLetter]=te-K[U].v/X,ee[a.valLetter]=b.c2l(K[U].t,!0);W=s(V,y)}if(T)re=Z+"L"+W.substr(1)+"Z";else{var se=[ae,b.c2p(K[0].t)],ve=[ae,b.c2p(K[J-1].t)];"h"===y.orientation&&(se.reverse(),ve.reverse()),re=C?"M"+se+"L"+Z.substr(1)+"L"+ve:"M"+ve+"L"+W.substr(1)+"L"+se}N.attr("d",re),Y.posCenterPx=ae,Y.posDensityScale=X*_,Y.path=N.node(),Y.pathLength=Y.path.getTotalLength()/(T?2:1)});var P,S,E,R=y.box,D=R.width,j=(R.line||{}).width;T?(P=_*D,S=0):C?(P=[0,_*D/2],S=j*{x:1,y:-1}[a.posLetter]):(P=[_*D/2,0],S=j*{x:-1,y:1}[a.posLetter]),x.plotBoxAndWhiskers(p,{pos:w,val:b},y,{bPos:u,bdPos:P,bPosPxOffset:S}),x.plotBoxMean(p,{pos:w,val:b},y,{bPos:u,bdPos:P,bPosPxOffset:S}),!y.box.visible&&y.meanline.visible&&(E=g.identity);var H=p.selectAll("path.meanline").data(E||[]);H.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),H.exit().remove(),H.each(function(Y){var X=b.c2p(Y.mean,!0),Z=n.getPositionOnKdePath(Y,y,X);m.select(this).attr("d","h"===y.orientation?"M"+X+","+Z[0]+"V"+Z[1]:"M"+Z[0]+","+X+"H"+Z[1])}),x.plotPoints(p,{x:t,y:h},y,a)}})}},{"../../components/drawing":389,"../../lib":515,"../box/plot":691,"../scatter/line_points":950,"./helpers":1104,"@plotly/d3":58}],1110:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/color"),k=v("../scatter/style").stylePoints;$.exports=function(x){var e=m.select(x).selectAll("g.trace.violins");e.style("opacity",function(n){return n[0].trace.opacity}),e.each(function(n){var i=n[0].trace,l=m.select(this),r=i.box||{},d=r.line||{},f=i.meanline||{},t=f.width;l.selectAll("path.violin").style("stroke-width",i.line.width+"px").call(g.stroke,i.line.color).call(g.fill,i.fillcolor),l.selectAll("path.box").style("stroke-width",d.width+"px").call(g.stroke,d.color).call(g.fill,r.fillcolor);var h={"stroke-width":t+"px","stroke-dasharray":2*t+"px,"+t+"px"};l.selectAll("path.mean").style(h).call(g.stroke,f.color),l.selectAll("path.meanline").style(h).call(g.stroke,f.color),k(l,i,x)})}},{"../../components/color":367,"../scatter/style":960,"@plotly/d3":58}],1111:[function(v,$,Q){"use strict";var m=v("../../components/colorscale/attributes"),g=v("../isosurface/attributes"),k=v("../surface/attributes"),x=v("../../plots/attributes"),e=v("../../lib/extend").extendFlat,n=v("../../plot_api/edit_types").overrideAll,i=$.exports=n(e({x:g.x,y:g.y,z:g.z,value:g.value,isomin:g.isomin,isomax:g.isomax,surface:g.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:g.slices,caps:g.caps,text:g.text,hovertext:g.hovertext,xhoverformat:g.xhoverformat,yhoverformat:g.yhoverformat,zhoverformat:g.zhoverformat,valuehoverformat:g.valuehoverformat,hovertemplate:g.hovertemplate},m("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:g.colorbar,opacity:g.opacity,opacityscale:k.opacityscale,lightposition:g.lightposition,lighting:g.lighting,flatshading:g.flatshading,contour:g.contour,hoverinfo:e({},x.hoverinfo),showlegend:e({},x.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType=i.value.editType="calc+clearAxisTypes",i.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../isosurface/attributes":871,"../surface/attributes":1070}],1112:[function(v,$,Q){"use strict";var m=v("../../../stackgl_modules").gl_mesh3d,g=v("../../lib/gl_format_color").parseColorScale,k=v("../../lib/str2rgbarray"),x=v("../../components/colorscale").extractOpts,e=v("../../plots/gl3d/zip3"),n=v("../isosurface/convert").findNearestOnAxis,i=v("../isosurface/convert").generateIsoMeshes;function l(d,f,t){this.scene=d,this.uid=t,this.mesh=f,this.name="",this.data=null,this.showContour=!1}var r=l.prototype;r.handlePick=function(d){if(d.object===this.mesh){var f=d.data.index,h=this.data._meshY[f],s=this.data._meshZ[f],o=this.data._Ys.length,p=this.data._Zs.length,c=n(this.data._meshX[f],this.data._Xs).id,a=n(h,this.data._Ys).id,y=n(s,this.data._Zs).id,u=d.index=y+p*a+p*o*c;d.traceCoordinate=[this.data._meshX[u],this.data._meshY[u],this.data._meshZ[u],this.data._value[u]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&void 0!==_[u]?d.textLabel=_[u]:_&&(d.textLabel=_),!0}},r.update=function(d){var f=this.scene,t=f.fullSceneLayout;function h(p,c,a,y){return c.map(function(u){return p.d2l(u,0,y)*a})}this.data=i(d);var s={positions:e(h(t.xaxis,d._meshX,f.dataScale[0],d.xcalendar),h(t.yaxis,d._meshY,f.dataScale[1],d.ycalendar),h(t.zaxis,d._meshZ,f.dataScale[2],d.zcalendar)),cells:e(d._meshI,d._meshJ,d._meshK),lightPosition:[d.lightposition.x,d.lightposition.y,d.lightposition.z],ambient:d.lighting.ambient,diffuse:d.lighting.diffuse,specular:d.lighting.specular,roughness:d.lighting.roughness,fresnel:d.lighting.fresnel,vertexNormalsEpsilon:d.lighting.vertexnormalsepsilon,faceNormalsEpsilon:d.lighting.facenormalsepsilon,opacity:d.opacity,opacityscale:d.opacityscale,contourEnable:d.contour.show,contourColor:k(d.contour.color).slice(0,3),contourWidth:d.contour.width,useFacetNormals:d.flatshading},o=x(d);s.vertexIntensity=d._meshIntensity,s.vertexIntensityBounds=[o.min,o.max],s.colormap=g(d),this.mesh.update(s)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(d,f){var h=m({gl:d.glplot.gl}),s=new l(d,h,f.uid);return h._trace=s,s.update(f),d.glplot.add(h),s}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618,"../isosurface/convert":873}],1113:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./attributes"),k=v("../isosurface/defaults").supplyIsoDefaults,x=v("../surface/defaults").opacityscaleDefaults;$.exports=function(e,n,i,l){function r(d,f){return m.coerce(e,n,g,d,f)}k(e,n,i,l,r),x(e,n,l,r)}},{"../../lib":515,"../isosurface/defaults":874,"../surface/defaults":1073,"./attributes":1111}],1114:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:v("./convert"),moduleType:"trace",name:"volume",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"../isosurface/calc":872,"./attributes":1111,"./convert":1112,"./defaults":1113}],1115:[function(v,$,Q){"use strict";var m=v("../bar/attributes"),g=v("../scatter/attributes").line,k=v("../../plots/attributes"),x=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../plots/template_attributes").hovertemplateAttrs,n=v("../../plots/template_attributes").texttemplateAttrs,i=v("./constants"),l=v("../../lib/extend").extendFlat,r=v("../../components/color");function d(f){return{marker:{color:l({},m.marker.color,{arrayOk:!1,editType:"style"}),line:{color:l({},m.marker.line.color,{arrayOk:!1,editType:"style"}),width:l({},m.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}$.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),hovertext:m.hovertext,hovertemplate:e({},{keys:i.eventDataKeys}),hoverinfo:l({},k.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:n({editType:"plot"},{keys:i.eventDataKeys.concat(["label"])}),text:m.text,textposition:m.textposition,insidetextanchor:m.insidetextanchor,textangle:m.textangle,textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:m.outsidetextfont,constraintext:m.constraintext,cliponaxis:m.cliponaxis,orientation:m.orientation,offset:m.offset,width:m.width,increasing:d(),decreasing:d(),totals:d(),connector:{line:{color:l({},g.color,{dflt:r.defaultLine}),width:l({},g.width,{editType:"plot"}),dash:g.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":1117}],1116:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes"),g=v("../../plots/cartesian/align_period"),k=v("../../lib").mergeArray,x=v("../scatter/calc_selection"),e=v("../../constants/numerical").BADNUM;function n(l){return"a"===l||"absolute"===l}function i(l){return"t"===l||"total"===l}$.exports=function(l,r){var d,f,t,h,s,o,p=m.getFromId(l,r.xaxis||"x"),c=m.getFromId(l,r.yaxis||"y");"h"===r.orientation?(d=p.makeCalcdata(r,"x"),t=c.makeCalcdata(r,"y"),h=g(r,c,"y",t),s=!!r.yperiodalignment,o="y"):(d=c.makeCalcdata(r,"y"),t=p.makeCalcdata(r,"x"),h=g(r,p,"x",t),s=!!r.xperiodalignment,o="x"),f=h.vals;for(var a,y=Math.min(f.length,d.length),u=new Array(y),_=0,b=!1,w=0;w<y;w++){var T=d[w]||0,C=!1;(d[w]!==e||i(r.measure[w])||n(r.measure[w]))&&w+1<y&&(d[w+1]!==e||i(r.measure[w+1])||n(r.measure[w+1]))&&(C=!0);var M=u[w]={i:w,p:f[w],s:T,rawS:T,cNext:C};n(r.measure[w])?(_=M.s,M.isSum=!0,M.dir="totals",M.s=_):i(r.measure[w])?(M.isSum=!0,M.dir="totals",M.s=_):(M.isSum=!1,M.dir=M.rawS<0?"decreasing":"increasing",M.s=_+(a=M.s),_+=a),"totals"===M.dir&&(b=!0),s&&(u[w].orig_p=t[w],u[w][o+"End"]=h.ends[w],u[w][o+"Start"]=h.starts[w]),r.ids&&(M.id=String(r.ids[w])),M.v=(r.base||0)+_}return u.length&&(u[0].hasTotals=b),k(r.text,u,"tx"),k(r.hovertext,u,"htx"),x(u,r),u}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938}],1117:[function(v,$,Q){"use strict";$.exports={eventDataKeys:["initial","delta","final"]}},{}],1118:[function(v,$,Q){"use strict";var m=v("../bar/cross_trace_calc").setGroupPositions;$.exports=function(g,k){var x,e,n=g._fullLayout,i=g._fullData,l=g.calcdata,r=k.xaxis,d=k.yaxis,f=[],t=[],h=[];for(e=0;e<i.length;e++){var s=i[e];!0===s.visible&&s.xaxis===r._id&&s.yaxis===d._id&&"waterfall"===s.type&&(x=l[e],"h"===s.orientation?h.push(x):t.push(x),f.push(x))}var o={mode:n.waterfallmode,norm:n.waterfallnorm,gap:n.waterfallgap,groupgap:n.waterfallgroupgap};for(m(g,r,d,t,o),m(g,d,r,h,o),e=0;e<f.length;e++){x=f[e];for(var p=0;p<x.length;p++){var c=x[p];!1===c.isSum&&(c.s0+=0===p?0:x[p-1].s),p+1<x.length&&(x[p].nextP0=x[p+1].p0,x[p].nextS0=x[p+1].s0)}}}},{"../bar/cross_trace_calc":660}],1119:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("../bar/defaults").handleGroupingDefaults,k=v("../bar/defaults").handleText,x=v("../scatter/xy_defaults"),e=v("../scatter/period_defaults"),n=v("./attributes"),i=v("../../components/color"),l=v("../../constants/delta.js"),r=l.INCREASING.COLOR,d=l.DECREASING.COLOR;function f(t,h,s){t(h+".marker.color",s),t(h+".marker.line.color",i.defaultLine),t(h+".marker.line.width")}$.exports={supplyDefaults:function(t,h,s,o){function p(a,y){return m.coerce(t,h,n,a,y)}if(x(t,h,o,p)){e(t,h,o,p),p("xhoverformat"),p("yhoverformat"),p("measure"),p("orientation",h.x&&!h.y?"h":"v"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate");var c=p("textposition");k(t,h,o,p,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==h.textposition&&(p("texttemplate"),h.texttemplate||p("textinfo")),f(p,"increasing",r),f(p,"decreasing",d),f(p,"totals","#4499FF"),p("connector.visible")&&(p("connector.mode"),p("connector.line.width")&&(p("connector.line.color"),p("connector.line.dash")))}else h.visible=!1},crossTraceDefaults:function(t,h){var s,o;function p(a){return m.coerce(o._input,o,n,a)}if("group"===h.waterfallmode)for(var c=0;c<t.length;c++)s=(o=t[c])._input,g(s,o,h,p)}}},{"../../components/color":367,"../../constants/delta.js":485,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":1115}],1120:[function(v,$,Q){"use strict";$.exports=function(m,g){return m.x="xVal"in g?g.xVal:g.x,m.y="yVal"in g?g.yVal:g.y,"initial"in g&&(m.initial=g.initial),"delta"in g&&(m.delta=g.delta),"final"in g&&(m.final=g.final),g.xa&&(m.xaxis=g.xa),g.ya&&(m.yaxis=g.ya),m}},{}],1121:[function(v,$,Q){"use strict";var m=v("../../plots/cartesian/axes").hoverLabelText,g=v("../../components/color").opacity,k=v("../bar/hover").hoverOnBars,x=v("../../constants/delta.js"),e=x.INCREASING.SYMBOL,n=x.DECREASING.SYMBOL;$.exports=function(i,l,r,d,f){var S,E,R,D,t=k(i,l,r,d,f);if(t){var h=t.cd,s=h[0].trace,o="h"===s.orientation,p=o?"x":"y",c=o?i.xa:i.ya,a=h[t.index],y=a.isSum?a.b+a.s:a.rawS;if(!a.isSum){t.initial=a.b+a.s-y,t.delta=y,t.final=t.initial+t.delta;var u=M(Math.abs(t.delta));t.deltaLabel=y<0?"("+u+")":u,t.finalLabel=M(t.final),t.initialLabel=M(t.initial)}var _=a.hi||s.hoverinfo,b=[];if(_&&"none"!==_&&"skip"!==_){var w="all"===_,T=_.split("+"),C=function(I){return w||-1!==T.indexOf(I)};a.isSum||(!C("final")||C(o?"x":"y")||b.push(t.finalLabel),C("delta")&&b.push(y<0?t.deltaLabel+" "+n:t.deltaLabel+" "+e),C("initial")&&b.push("Initial: "+t.initialLabel))}return b.length&&(t.extraText=b.join("<br>")),t.color=(R=(S=s[a.dir].marker).line.color,D=S.line.width,g(E=S.color)?E:g(R)&&D?R:void 0),[t]}function M(I){return m(c,I,s[p+"hoverformat"])}}},{"../../components/color":367,"../../constants/delta.js":485,"../../plots/cartesian/axes":566,"../bar/hover":664}],1122:[function(v,$,Q){"use strict";$.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc"),plot:v("./plot"),style:v("./style").style,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":1115,"./calc":1116,"./cross_trace_calc":1118,"./defaults":1119,"./event_data":1120,"./hover":1121,"./layout_attributes":1123,"./layout_defaults":1124,"./plot":1125,"./style":1126}],1123:[function(v,$,Q){"use strict";$.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1124:[function(v,$,Q){"use strict";var m=v("../../lib"),g=v("./layout_attributes");$.exports=function(k,x,e){var n=!1;function i(d,f){return m.coerce(k,x,g,d,f)}for(var l=0;l<e.length;l++){var r=e[l];if(r.visible&&"waterfall"===r.type){n=!0;break}}n&&(i("waterfallmode"),i("waterfallgap",.2),i("waterfallgroupgap"))}},{"../../lib":515,"./layout_attributes":1123}],1125:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../lib"),k=v("../../components/drawing"),x=v("../../constants/numerical").BADNUM,e=v("../bar/plot"),n=v("../bar/uniform_text").clearMinTextSize;$.exports=function(i,l,r,d){var t,h,p,c,f=i._fullLayout;n("waterfall",f),e.plot(i,l,r,d,{mode:f.waterfallmode,norm:f.waterfallmode,gap:f.waterfallgap,groupgap:f.waterfallgroupgap}),t=i,p=(h=l).xaxis,c=h.yaxis,g.makeTraceGroups(d,r,"trace bars").each(function(a){var y=m.select(this),u=a[0].trace,_=g.ensureSingle(y,"g","lines");if(u.connector&&u.connector.visible){var b="h"===u.orientation,w=u.connector.mode,T=_.selectAll("g.line").data(g.identity);T.enter().append("g").classed("line",!0),T.exit().remove();var C=T.size();T.each(function(M,I){if(I===C-1||M.cNext){var P=(j=p,H=c,Z=[],re=(Y=b)?H:j,(X=[])[0]=(W=Y?j:H).c2p((D=M).s0,!0),Z[0]=re.c2p(D.p0,!0),X[1]=W.c2p(D.s1,!0),Z[1]=re.c2p(D.p1,!0),X[2]=W.c2p(D.nextS0,!0),Z[2]=re.c2p(D.nextP0,!0),Y?[X,Z]:[Z,X]),S=P[0],E=P[1],R="";S[0]!==x&&E[0]!==x&&S[1]!==x&&E[1]!==x&&("spanning"===w&&!M.isSum&&I>0&&(R+=b?"M"+S[0]+","+E[1]+"V"+E[0]:"M"+S[1]+","+E[0]+"H"+S[0]),"between"!==w&&(M.isSum||I<C-1)&&(R+=b?"M"+S[1]+","+E[0]+"V"+E[1]:"M"+S[0]+","+E[1]+"H"+S[1]),S[2]!==x&&E[2]!==x&&(R+=b?"M"+S[1]+","+E[1]+"V"+E[2]:"M"+S[1]+","+E[1]+"H"+S[2])),""===R&&(R="M0,0Z"),g.ensureSingle(m.select(this),"path").attr("d",R).call(k.setClipUrl,h.layerClipId,t)}var D,j,H,Y,X,Z,W,re})}else _.remove()})}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],1126:[function(v,$,Q){"use strict";var m=v("@plotly/d3"),g=v("../../components/drawing"),k=v("../../components/color"),x=v("../../constants/interactions").DESELECTDIM,e=v("../bar/style"),n=v("../bar/uniform_text").resizeText,i=e.styleTextPoints;$.exports={style:function(l,r,d){var f=d||m.select(l).selectAll("g.waterfalllayer").selectAll("g.trace");n(l,f,"waterfall"),f.style("opacity",function(t){return t[0].trace.opacity}),f.each(function(t){var h=m.select(this),s=t[0].trace;h.selectAll(".point > path").each(function(o){if(!o.isBlank){var p=s[o.dir].marker;m.select(this).call(k.fill,p.color).call(k.stroke,p.line.color).call(g.dashLine,p.line.dash,p.line.width).style("opacity",s.selectedpoints&&!o.selected?x:1)}}),i(h,s,l),h.selectAll(".lines").each(function(){var o=s.connector.line;g.lineGroupStyle(m.select(this).selectAll("path"),o.width,o.color,o.dash)})})}}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],1127:[function(v,$,Q){"use strict";var m=v("../plots/cartesian/axes"),g=v("../lib"),k=v("../plot_api/plot_schema"),x=v("./helpers").pointsAccessorFunction,e=v("../constants/numerical").BADNUM;Q.moduleType="transform",Q.name="aggregate";var n=Q.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},i=n.aggregations;function l(t,h,s,o){if(o.enabled){for(var p=o.target,c=g.nestedProperty(h,p),a=c.get(),y=function(b,w){var C=w.d2c,M=w.c2d;switch(b.func){case"count":return r;case"first":return d;case"last":return f;case"sum":return function(I,P){for(var S=0,E=0;E<P.length;E++){var R=C(I[P[E]]);R!==e&&(S+=R)}return M(S)};case"avg":return function(I,P){for(var S=0,E=0,R=0;R<P.length;R++){var D=C(I[P[R]]);D!==e&&(S+=D,E++)}return E?M(S/E):e};case"min":return function(I,P){for(var S=1/0,E=0;E<P.length;E++){var R=C(I[P[E]]);R!==e&&(S=Math.min(S,R))}return S===1/0?e:M(S)};case"max":return function(I,P){for(var S=-1/0,E=0;E<P.length;E++){var R=C(I[P[E]]);R!==e&&(S=Math.max(S,R))}return S===-1/0?e:M(S)};case"range":return function(I,P){for(var S=1/0,E=-1/0,R=0;R<P.length;R++){var D=C(I[P[R]]);D!==e&&(S=Math.min(S,D),E=Math.max(E,D))}return E===-1/0||S===1/0?e:M(E-S)};case"change":return function(I,P){var S=C(I[P[0]]),E=C(I[P[P.length-1]]);return S===e||E===e?e:M(E-S)};case"median":return function(I,P){for(var S=[],E=0;E<P.length;E++){var R=C(I[P[E]]);R!==e&&S.push(R)}if(!S.length)return e;S.sort(g.sorterAsc);var D=(S.length-1)/2;return M((S[Math.floor(D)]+S[Math.ceil(D)])/2)};case"mode":return function(I,P){for(var S={},E=0,R=e,D=0;D<P.length;D++){var j=C(I[P[D]]);if(j!==e){var H=S[j]=(S[j]||0)+1;H>E&&(E=H,R=j)}}return E?M(R):e};case"rms":return function(I,P){for(var S=0,E=0,R=0;R<P.length;R++){var D=C(I[P[R]]);D!==e&&(S+=D*D,E++)}return E?M(Math.sqrt(S/E)):e};case"stddev":return function(I,P){var S,E=0,R=0,D=1,j=e;for(S=0;S<P.length&&j===e;S++)j=C(I[P[S]]);if(j===e)return e;for(;S<P.length;S++){var H=C(I[P[S]]);if(H!==e){var Y=H-j;E+=Y,R+=Y*Y,D++}}var X="sample"===b.funcmode?D-1:D;return X?Math.sqrt((R-E*E/D)/X):0}}}(o,m.getDataConversions(t,h,p,a)),u=new Array(s.length),_=0;_<s.length;_++)u[_]=y(a,s[_]);c.set(u),"count"===o.func&&g.pushUnique(h._arrayAttrs,p)}}function r(t,h){return h.length}function d(t,h){return t[h[0]]}function f(t,h){return t[h[h.length-1]]}Q.supplyDefaults=function(t,h){var s,o={};function p(M,I){return g.coerce(t,o,n,M,I)}if(!p("enabled"))return o;var c=k.findArrayAttributes(h),a={};for(s=0;s<c.length;s++)a[c[s]]=1;var y=p("groups");if(!Array.isArray(y)){if(!a[y])return o.enabled=!1,o;a[y]=0}var u,_=t.aggregations||[],b=o.aggregations=new Array(_.length);function w(M,I){return g.coerce(_[s],u,i,M,I)}for(s=0;s<_.length;s++){u={_index:s};var T=w("target"),C=w("func");w("enabled")&&T&&(a[T]||"count"===C&&void 0===a[T])?("stddev"===C&&w("funcmode"),a[T]=0,b[s]=u):b[s]={enabled:!1,_index:s}}for(s=0;s<c.length;s++)a[c[s]]&&b.push({target:c[s],func:i.func.dflt,enabled:!0,_index:-1});return o},Q.calcTransform=function(t,h,s){if(s.enabled){var o=s.groups,p=g.getTargetArray(h,{target:o});if(p){var c,a,y,_={},b={},w=[],T=x(h.transforms,s),C=p.length;for(h._length&&(C=Math.min(C,h._length)),c=0;c<C;c++)void 0===(y=_[a=p[c]])?(_[a]=w.length,w.push([c]),b[_[a]]=T(c)):(w[y].push(c),b[_[a]]=(b[_[a]]||[]).concat(T(c)));s._indexToPoints=b;var M=s.aggregations;for(c=0;c<M.length;c++)l(t,h,w,M[c]);"string"==typeof o&&l(t,h,w,{target:o,func:"first",enabled:!0}),h._length=w.length}}}},{"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plots/cartesian/axes":566,"./helpers":1130}],1128:[function(v,$,Q){"use strict";var m=v("../lib"),g=v("../registry"),k=v("../plots/cartesian/axes"),x=v("./helpers").pointsAccessorFunction,e=v("../constants/filter_ops"),n=e.COMPARISON_OPS,i=e.INTERVAL_OPS,l=e.SET_OPS;Q.moduleType="transform",Q.name="filter",Q.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(n).concat(i).concat(l),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},Q.supplyDefaults=function(r){var d={};function f(s,o){return m.coerce(r,d,Q.attributes,s,o)}if(f("enabled")){var t=f("target");if(m.isArrayOrTypedArray(t)&&0===t.length)return d.enabled=!1,d;f("preservegaps"),f("operation"),f("value");var h=g.getComponentMethod("calendars","handleDefaults");h(r,d,"valuecalendar",null),h(r,d,"targetcalendar",null)}return d},Q.calcTransform=function(r,d,f){if(f.enabled){var t=m.getTargetArray(d,f);if(t){var h=f.target,s=t.length;d._length&&(s=Math.min(s,d._length));var o=f.targetcalendar,p=d._arrayAttrs,c=f.preservegaps;if("string"==typeof h){var a=m.nestedProperty(d,h+"calendar").get();a&&(o=a)}var y,u,_=function(P,S,E){var R=P.operation,D=P.value,j=Array.isArray(D);function H(W){return-1!==W.indexOf(R)}var Y,X=function(W){return S(W,0,P.valuecalendar)},Z=function(W){return S(W,0,E)};switch(H(n)?Y=X(j?D[0]:D):H(i)?Y=j?[X(D[0]),X(D[1])]:[X(D),X(D)]:H(l)&&(Y=j?D.map(X):[X(D)]),R){case"=":return function(W){return Z(W)===Y};case"!=":return function(W){return Z(W)!==Y};case"<":return function(W){return Z(W)<Y};case"<=":return function(W){return Z(W)<=Y};case">":return function(W){return Z(W)>Y};case">=":return function(W){return Z(W)>=Y};case"[]":return function(W){var re=Z(W);return re>=Y[0]&&re<=Y[1]};case"()":return function(W){var re=Z(W);return re>Y[0]&&re<Y[1]};case"[)":return function(W){var re=Z(W);return re>=Y[0]&&re<Y[1]};case"(]":return function(W){var re=Z(W);return re>Y[0]&&re<=Y[1]};case"][":return function(W){var re=Z(W);return re<=Y[0]||re>=Y[1]};case")(":return function(W){var re=Z(W);return re<Y[0]||re>Y[1]};case"](":return function(W){var re=Z(W);return re<=Y[0]||re>Y[1]};case")[":return function(W){var re=Z(W);return re<Y[0]||re>=Y[1]};case"{}":return function(W){return-1!==Y.indexOf(Z(W))};case"}{":return function(W){return-1===Y.indexOf(Z(W))}}}(f,k.getDataToCoordFunc(r,d,h,t),o),b={},w={},T=0;c?(y=function(P){b[P.astr]=m.extendDeep([],P.get()),P.set(new Array(s))},u=function(P,S){var E=b[P.astr][S];P.get()[S]=E}):(y=function(P){b[P.astr]=m.extendDeep([],P.get()),P.set([])},u=function(P,S){var E=b[P.astr][S];P.get().push(E)}),I(y);for(var C=x(d.transforms,f),M=0;M<s;M++)_(t[M])?(I(u,M),w[T++]=C(M)):c&&T++;f._indexToPoints=w,d._length=T}}function I(P,S){for(var E=0;E<p.length;E++)P(m.nestedProperty(d,p[E]),S)}}},{"../constants/filter_ops":487,"../lib":515,"../plots/cartesian/axes":566,"../registry":647,"./helpers":1130}],1129:[function(v,$,Q){"use strict";var m=v("../lib"),g=v("../plot_api/plot_schema"),k=v("../plots/plots"),x=v("./helpers").pointsAccessorFunction;function e(n,i){var l,r,d,f,t,h,s,o,p,c,a=i.transform,y=i.transformIndex,u=n.transforms[y].groups,_=x(n.transforms,a);if(!m.isArrayOrTypedArray(u)||0===u.length)return[n];var b=m.filterUnique(u),w=new Array(b.length),T=u.length,C=g.findArrayAttributes(n),M=a.styles||[],I={};for(l=0;l<M.length;l++)I[M[l].target]=M[l].value;a.styles&&(c=m.keyedContainer(a,"styles","target","value.name"));var P={},S={};for(l=0;l<b.length;l++){P[h=b[l]]=l,S[h]=0,(s=w[l]=m.extendDeepNoArrays({},n))._group=h,s.transforms[y]._indexToPoints={};var E=null;for(c&&(E=c.get(h)),s.name=E||""===E?E:m.templateString(a.nameformat,{trace:n.name,group:h}),o=s.transforms,s.transforms=[],r=0;r<o.length;r++)s.transforms[r]=m.extendDeepNoArrays({},o[r]);for(r=0;r<C.length;r++)m.nestedProperty(s,C[r]).set([])}for(d=0;d<C.length;d++){for(f=C[d],r=0,p=[];r<b.length;r++)p[r]=m.nestedProperty(w[r],f).get();for(t=m.nestedProperty(n,f).get(),r=0;r<T;r++)p[P[u[r]]].push(t[r])}for(r=0;r<T;r++)(s=w[P[u[r]]]).transforms[y]._indexToPoints[S[u[r]]]=_(r),S[u[r]]++;for(l=0;l<b.length;l++)h=b[l],k.clearExpandedTraceDefaultColors(s=w[l]),s=m.extendDeepNoArrays(s,I[h]||{});return w}Q.moduleType="transform",Q.name="groupby",Q.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},Q.supplyDefaults=function(n,i,l){var r,d={};function f(p,c){return m.coerce(n,d,Q.attributes,p,c)}if(!f("enabled"))return d;f("groups"),f("nameformat",l._dataLength>1?"%{group} (%{trace})":"%{group}");var t=n.styles,h=d.styles=[];if(t)for(r=0;r<t.length;r++){var s=h[r]={};m.coerce(t[r],h[r],Q.attributes.styles,"target");var o=m.coerce(t[r],h[r],Q.attributes.styles,"value");m.isPlainObject(o)?s.value=m.extendDeep({},o):o&&delete s.value}return d},Q.transform=function(n,i){var l,r,d,f=[];for(r=0;r<n.length;r++)for(l=e(n[r],i),d=0;d<l.length;d++)f.push(l[d]);return f}},{"../lib":515,"../plot_api/plot_schema":554,"../plots/plots":628,"./helpers":1130}],1130:[function(v,$,Q){"use strict";Q.pointsAccessorFunction=function(m,g){for(var k,x,e=0;e<m.length&&(k=m[e])!==g;e++)k._indexToPoints&&!1!==k.enabled&&(x=k._indexToPoints);return x?function(n){return x[n]}:function(n){return[n]}}},{}],1131:[function(v,$,Q){"use strict";var m=v("../lib"),g=v("../plots/cartesian/axes"),k=v("./helpers").pointsAccessorFunction,x=v("../constants/numerical").BADNUM;Q.moduleType="transform",Q.name="sort",Q.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},Q.supplyDefaults=function(e){var n={};function i(l,r){return m.coerce(e,n,Q.attributes,l,r)}return i("enabled")&&(i("target"),i("order")),n},Q.calcTransform=function(e,n,i){if(i.enabled){var l=m.getTargetArray(n,i);if(l){var r=i.target,d=l.length;n._length&&(d=Math.min(d,n._length));var f,t,h=n._arrayAttrs,s=function(u,_,b,w){var T,C=new Array(w),M=new Array(w);for(T=0;T<w;T++)C[T]={v:_[T],i:T};for(C.sort(function(I,P){switch(I.order){case"ascending":return function(S,E){var R=P(S.v),D=P(E.v);return R===x?1:D===x?-1:R-D};case"descending":return function(S,E){var R=P(S.v),D=P(E.v);return R===x?1:D===x?-1:D-R}}}(u,b)),T=0;T<w;T++)M[T]=C[T].i;return M}(i,l,g.getDataToCoordFunc(e,n,r,l),d),o=k(n.transforms,i),p={};for(f=0;f<h.length;f++){var c=m.nestedProperty(n,h[f]),a=c.get(),y=new Array(d);for(t=0;t<d;t++)y[t]=a[s[t]];c.set(y)}for(t=0;t<d;t++)p[t]=o(s[t]);i._indexToPoints=p,n._length=d}}}},{"../constants/numerical":491,"../lib":515,"../plots/cartesian/axes":566,"./helpers":1130}],1132:[function(v,$,Q){"use strict";Q.version="2.16.4"},{}],1133:[function(v,$,Q){(function(m){(function(){!function(g){"object"==typeof Q&&void 0!==$?$.exports=g():(typeof window<"u"?window:void 0!==m?m:typeof self<"u"?self:this).stackgl=g()}(function(){return function g(k,x,e){function n(r,d){if(!x[r]){if(!k[r]){var f="function"==typeof v&&v;if(!d&&f)return f(r,!0);if(i)return i(r,!0);var t=new Error("Cannot find module '"+r+"'");throw t.code="MODULE_NOT_FOUND",t}var h=x[r]={exports:{}};k[r][0].call(h.exports,function(s){return n(k[r][1][s]||s)},h,h.exports,g,k,x,e)}return x[r].exports}for(var i="function"==typeof v&&v,l=0;l<e.length;l++)n(e[l]);return n}({1:[function(g,k,x){"use strict";x.byteLength=function(h){var s=f(h),p=s[1];return 3*(s[0]+p)/4-p},x.toByteArray=function(h){var s,o,T,p=f(h),c=p[0],a=p[1],y=new i(3*(c+(T=a))/4-T),u=0,_=a>0?c-4:c;for(o=0;o<_;o+=4)s=n[h.charCodeAt(o)]<<18|n[h.charCodeAt(o+1)]<<12|n[h.charCodeAt(o+2)]<<6|n[h.charCodeAt(o+3)],y[u++]=s>>16&255,y[u++]=s>>8&255,y[u++]=255&s;return 2===a&&(s=n[h.charCodeAt(o)]<<2|n[h.charCodeAt(o+1)]>>4,y[u++]=255&s),1===a&&(s=n[h.charCodeAt(o)]<<10|n[h.charCodeAt(o+1)]<<4|n[h.charCodeAt(o+2)]>>2,y[u++]=s>>8&255,y[u++]=255&s),y},x.fromByteArray=function(h){for(var s,o=h.length,p=o%3,c=[],a=0,y=o-p;a<y;a+=16383)c.push(t(h,a,a+16383>y?y:a+16383));return 1===p?c.push(e[(s=h[o-1])>>2]+e[s<<4&63]+"=="):2===p&&c.push(e[(s=(h[o-2]<<8)+h[o-1])>>10]+e[s>>4&63]+e[s<<2&63]+"="),c.join("")};for(var e=[],n=[],i=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,d=l.length;r<d;++r)e[r]=l[r],n[l.charCodeAt(r)]=r;function f(h){var s=h.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=h.indexOf("=");return-1===o&&(o=s),[o,o===s?0:4-o%4]}function t(h,s,o){for(var c,a=[],y=s;y<o;y+=3)a.push(e[(c=(h[y]<<16&16711680)+(h[y+1]<<8&65280)+(255&h[y+2]))>>18&63]+e[c>>12&63]+e[c>>6&63]+e[63&c]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],2:[function(g,k,x){},{}],3:[function(g,k,x){(function(e){(function(){"use strict";var n=g("base64-js"),i=g("ieee754");function l(N){if(N>2147483647)throw new RangeError('The value "'+N+'" is invalid for option "size"');var K=new Uint8Array(N);return K.__proto__=r.prototype,K}function r(N,K,J){if("number"==typeof N){if("string"==typeof K)throw new TypeError('The "string" argument must be of type string. Received type number');return t(N)}return d(N,K,J)}function d(N,K,J){if("string"==typeof N)return function(le,se){if("string"==typeof se&&""!==se||(se="utf8"),!r.isEncoding(se))throw new TypeError("Unknown encoding: "+se);var ve=0|o(le,se),ue=l(ve),ye=ue.write(le,se);return ye!==ve&&(ue=ue.slice(0,ye)),ue}(N,K);if(ArrayBuffer.isView(N))return h(N);if(null==N)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(V(N,ArrayBuffer)||N&&V(N.buffer,ArrayBuffer))return function(le,se,ve){if(se<0||le.byteLength<se)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<se+(ve||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return(ue=void 0===se&&void 0===ve?new Uint8Array(le):void 0===ve?new Uint8Array(le,se):new Uint8Array(le,se,ve)).__proto__=r.prototype,ue}(N,K,J);if("number"==typeof N)throw new TypeError('The "value" argument must not be of type number. Received type number');var te=N.valueOf&&N.valueOf();if(null!=te&&te!==N)return r.from(te,K,J);var ae=function(le){if(r.isBuffer(le)){var se=0|s(le.length),ve=l(se);return 0===ve.length||le.copy(ve,0,0,se),ve}return void 0!==le.length?"number"!=typeof le.length||ee(le.length)?l(0):h(le):"Buffer"===le.type&&Array.isArray(le.data)?h(le.data):void 0}(N);if(ae)return ae;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof N[Symbol.toPrimitive])return r.from(N[Symbol.toPrimitive]("string"),K,J);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}function f(N){if("number"!=typeof N)throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function t(N){return f(N),l(N<0?0:0|s(N))}function h(N){for(var K=N.length<0?0:0|s(N.length),J=l(K),te=0;te<K;te+=1)J[te]=255&N[te];return J}function s(N){if(N>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|N}function o(N,K){if(r.isBuffer(N))return N.length;if(ArrayBuffer.isView(N)||V(N,ArrayBuffer))return N.byteLength;if("string"!=typeof N)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);var J=N.length,te=arguments.length>2&&!0===arguments[2];if(!te&&0===J)return 0;for(var ae=!1;;)switch(K){case"ascii":case"latin1":case"binary":return J;case"utf8":case"utf-8":return re(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*J;case"hex":return J>>>1;case"base64":return U(N).length;default:if(ae)return te?-1:re(N).length;K=(""+K).toLowerCase(),ae=!0}}function p(N,K,J){var te=!1;if((void 0===K||K<0)&&(K=0),K>this.length||((void 0===J||J>this.length)&&(J=this.length),J<=0)||(J>>>=0)<=(K>>>=0))return"";for(N||(N="utf8");;)switch(N){case"hex":return E(this,K,J);case"utf8":case"utf-8":return I(this,K,J);case"ascii":return P(this,K,J);case"latin1":case"binary":return S(this,K,J);case"base64":return M(this,K,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,K,J);default:if(te)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),te=!0}}function c(N,K,J){var te=N[K];N[K]=N[J],N[J]=te}function a(N,K,J,te,ae){if(0===N.length)return-1;if("string"==typeof J?(te=J,J=0):J>2147483647?J=2147483647:J<-2147483648&&(J=-2147483648),ee(J=+J)&&(J=ae?0:N.length-1),J<0&&(J=N.length+J),J>=N.length){if(ae)return-1;J=N.length-1}else if(J<0){if(!ae)return-1;J=0}if("string"==typeof K&&(K=r.from(K,te)),r.isBuffer(K))return 0===K.length?-1:y(N,K,J,te,ae);if("number"==typeof K)return K&=255,"function"==typeof Uint8Array.prototype.indexOf?ae?Uint8Array.prototype.indexOf.call(N,K,J):Uint8Array.prototype.lastIndexOf.call(N,K,J):y(N,[K],J,te,ae);throw new TypeError("val must be string, number or Buffer")}function y(N,K,J,te,ae){var le,se=1,ve=N.length,ue=K.length;if(void 0!==te&&("ucs2"===(te=String(te).toLowerCase())||"ucs-2"===te||"utf16le"===te||"utf-16le"===te)){if(N.length<2||K.length<2)return-1;se=2,ve/=2,ue/=2,J/=2}function ye(we,oe){return 1===se?we[oe]:we.readUInt16BE(oe*se)}if(ae){var Me=-1;for(le=J;le<ve;le++)if(ye(N,le)===ye(K,-1===Me?0:le-Me)){if(-1===Me&&(Me=le),le-Me+1===ue)return Me*se}else-1!==Me&&(le-=le-Me),Me=-1}else for(J+ue>ve&&(J=ve-ue),le=J;le>=0;le--){for(var pe=!0,ge=0;ge<ue;ge++)if(ye(N,le+ge)!==ye(K,ge)){pe=!1;break}if(pe)return le}return-1}function u(N,K,J,te){J=Number(J)||0;var ae=N.length-J;te?(te=Number(te))>ae&&(te=ae):te=ae;var le=K.length;te>le/2&&(te=le/2);for(var se=0;se<te;++se){var ve=parseInt(K.substr(2*se,2),16);if(ee(ve))return se;N[J+se]=ve}return se}function _(N,K,J,te){return B(re(K,N.length-J),N,J,te)}function b(N,K,J,te){return B(function(ae){for(var le=[],se=0;se<ae.length;++se)le.push(255&ae.charCodeAt(se));return le}(K),N,J,te)}function w(N,K,J,te){return b(N,K,J,te)}function T(N,K,J,te){return B(U(K),N,J,te)}function C(N,K,J,te){return B(function(ae,le){for(var se,ve,ye=[],Me=0;Me<ae.length&&!((le-=2)<0);++Me)ve=(se=ae.charCodeAt(Me))>>8,ye.push(se%256),ye.push(ve);return ye}(K,N.length-J),N,J,te)}function M(N,K,J){return n.fromByteArray(0===K&&J===N.length?N:N.slice(K,J))}function I(N,K,J){J=Math.min(N.length,J);for(var te=[],ae=K;ae<J;){var le,se,ve,ue,ye=N[ae],Me=null,pe=ye>239?4:ye>223?3:ye>191?2:1;if(ae+pe<=J)switch(pe){case 1:ye<128&&(Me=ye);break;case 2:128==(192&(le=N[ae+1]))&&(ue=(31&ye)<<6|63&le)>127&&(Me=ue);break;case 3:se=N[ae+2],128==(192&(le=N[ae+1]))&&128==(192&se)&&(ue=(15&ye)<<12|(63&le)<<6|63&se)>2047&&(ue<55296||ue>57343)&&(Me=ue);break;case 4:se=N[ae+2],ve=N[ae+3],128==(192&(le=N[ae+1]))&&128==(192&se)&&128==(192&ve)&&(ue=(15&ye)<<18|(63&le)<<12|(63&se)<<6|63&ve)>65535&&ue<1114112&&(Me=ue)}null===Me?(Me=65533,pe=1):Me>65535&&(te.push((Me-=65536)>>>10&1023|55296),Me=56320|1023&Me),te.push(Me),ae+=pe}return function(ge){var we=ge.length;if(we<=4096)return String.fromCharCode.apply(String,ge);for(var oe="",de=0;de<we;)oe+=String.fromCharCode.apply(String,ge.slice(de,de+=4096));return oe}(te)}function P(N,K,J){var te="";J=Math.min(N.length,J);for(var ae=K;ae<J;++ae)te+=String.fromCharCode(127&N[ae]);return te}function S(N,K,J){var te="";J=Math.min(N.length,J);for(var ae=K;ae<J;++ae)te+=String.fromCharCode(N[ae]);return te}function E(N,K,J){var te=N.length;(!K||K<0)&&(K=0),(!J||J<0||J>te)&&(J=te);for(var ae="",le=K;le<J;++le)ae+=W(N[le]);return ae}function R(N,K,J){for(var te=N.slice(K,J),ae="",le=0;le<te.length;le+=2)ae+=String.fromCharCode(te[le]+256*te[le+1]);return ae}function D(N,K,J){if(N%1!=0||N<0)throw new RangeError("offset is not uint");if(N+K>J)throw new RangeError("Trying to access beyond buffer length")}function j(N,K,J,te,ae,le){if(!r.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(K>ae||K<le)throw new RangeError('"value" argument is out of bounds');if(J+te>N.length)throw new RangeError("Index out of range")}function H(N,K,J,te,ae,le){if(J+te>N.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("Index out of range")}function Y(N,K,J,te,ae){return K=+K,J>>>=0,ae||H(N,0,J,4),i.write(N,K,J,te,23,4),J+4}function X(N,K,J,te,ae){return K=+K,J>>>=0,ae||H(N,0,J,8),i.write(N,K,J,te,52,8),J+8}x.Buffer=r,x.SlowBuffer=function(N){return+N!=N&&(N=0),r.alloc(+N)},x.INSPECT_MAX_BYTES=50,x.kMaxLength=2147483647,(r.TYPED_ARRAY_SUPPORT=function(){try{var N=new Uint8Array(1);return N.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===N.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(N,K,J){return d(N,K,J)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(N,K,J){return ae=K,le=J,f(te=N),te<=0?l(te):void 0!==ae?"string"==typeof le?l(te).fill(ae,le):l(te).fill(ae):l(te);var te,ae,le},r.allocUnsafe=function(N){return t(N)},r.allocUnsafeSlow=function(N){return t(N)},r.isBuffer=function(N){return null!=N&&!0===N._isBuffer&&N!==r.prototype},r.compare=function(N,K){if(V(N,Uint8Array)&&(N=r.from(N,N.offset,N.byteLength)),V(K,Uint8Array)&&(K=r.from(K,K.offset,K.byteLength)),!r.isBuffer(N)||!r.isBuffer(K))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===K)return 0;for(var J=N.length,te=K.length,ae=0,le=Math.min(J,te);ae<le;++ae)if(N[ae]!==K[ae]){J=N[ae],te=K[ae];break}return J<te?-1:te<J?1:0},r.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(N,K){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(0===N.length)return r.alloc(0);var J;if(void 0===K)for(K=0,J=0;J<N.length;++J)K+=N[J].length;var te=r.allocUnsafe(K),ae=0;for(J=0;J<N.length;++J){var le=N[J];if(V(le,Uint8Array)&&(le=r.from(le)),!r.isBuffer(le))throw new TypeError('"list" argument must be an Array of Buffers');le.copy(te,ae),ae+=le.length}return te},r.byteLength=o,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var N=this.length;if(N%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var K=0;K<N;K+=2)c(this,K,K+1);return this},r.prototype.swap32=function(){var N=this.length;if(N%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var K=0;K<N;K+=4)c(this,K,K+3),c(this,K+1,K+2);return this},r.prototype.swap64=function(){var N=this.length;if(N%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var K=0;K<N;K+=8)c(this,K,K+7),c(this,K+1,K+6),c(this,K+2,K+5),c(this,K+3,K+4);return this},r.prototype.toLocaleString=r.prototype.toString=function(){var N=this.length;return 0===N?"":0===arguments.length?I(this,0,N):p.apply(this,arguments)},r.prototype.equals=function(N){if(!r.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N||0===r.compare(this,N)},r.prototype.inspect=function(){var N="",K=x.INSPECT_MAX_BYTES;return N=this.toString("hex",0,K).replace(/(.{2})/g,"$1 ").trim(),this.length>K&&(N+=" ... "),"<Buffer "+N+">"},r.prototype.compare=function(N,K,J,te,ae){if(V(N,Uint8Array)&&(N=r.from(N,N.offset,N.byteLength)),!r.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(void 0===K&&(K=0),void 0===J&&(J=N?N.length:0),void 0===te&&(te=0),void 0===ae&&(ae=this.length),K<0||J>N.length||te<0||ae>this.length)throw new RangeError("out of range index");if(te>=ae&&K>=J)return 0;if(te>=ae)return-1;if(K>=J)return 1;if(this===N)return 0;for(var le=(ae>>>=0)-(te>>>=0),se=(J>>>=0)-(K>>>=0),ve=Math.min(le,se),ue=this.slice(te,ae),ye=N.slice(K,J),Me=0;Me<ve;++Me)if(ue[Me]!==ye[Me]){le=ue[Me],se=ye[Me];break}return le<se?-1:se<le?1:0},r.prototype.includes=function(N,K,J){return-1!==this.indexOf(N,K,J)},r.prototype.indexOf=function(N,K,J){return a(this,N,K,J,!0)},r.prototype.lastIndexOf=function(N,K,J){return a(this,N,K,J,!1)},r.prototype.write=function(N,K,J,te){if(void 0===K)te="utf8",J=this.length,K=0;else if(void 0===J&&"string"==typeof K)te=K,J=this.length,K=0;else{if(!isFinite(K))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");K>>>=0,isFinite(J)?(J>>>=0,void 0===te&&(te="utf8")):(te=J,J=void 0)}var ae=this.length-K;if((void 0===J||J>ae)&&(J=ae),N.length>0&&(J<0||K<0)||K>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");for(var le=!1;;)switch(te){case"hex":return u(this,N,K,J);case"utf8":case"utf-8":return _(this,N,K,J);case"ascii":return b(this,N,K,J);case"latin1":case"binary":return w(this,N,K,J);case"base64":return T(this,N,K,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,N,K,J);default:if(le)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),le=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(N,K){var J=this.length;(N=~~N)<0?(N+=J)<0&&(N=0):N>J&&(N=J),(K=void 0===K?J:~~K)<0?(K+=J)<0&&(K=0):K>J&&(K=J),K<N&&(K=N);var te=this.subarray(N,K);return te.__proto__=r.prototype,te},r.prototype.readUIntLE=function(N,K,J){N>>>=0,K>>>=0,J||D(N,K,this.length);for(var te=this[N],ae=1,le=0;++le<K&&(ae*=256);)te+=this[N+le]*ae;return te},r.prototype.readUIntBE=function(N,K,J){N>>>=0,K>>>=0,J||D(N,K,this.length);for(var te=this[N+--K],ae=1;K>0&&(ae*=256);)te+=this[N+--K]*ae;return te},r.prototype.readUInt8=function(N,K){return N>>>=0,K||D(N,1,this.length),this[N]},r.prototype.readUInt16LE=function(N,K){return N>>>=0,K||D(N,2,this.length),this[N]|this[N+1]<<8},r.prototype.readUInt16BE=function(N,K){return N>>>=0,K||D(N,2,this.length),this[N]<<8|this[N+1]},r.prototype.readUInt32LE=function(N,K){return N>>>=0,K||D(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+16777216*this[N+3]},r.prototype.readUInt32BE=function(N,K){return N>>>=0,K||D(N,4,this.length),16777216*this[N]+(this[N+1]<<16|this[N+2]<<8|this[N+3])},r.prototype.readIntLE=function(N,K,J){N>>>=0,K>>>=0,J||D(N,K,this.length);for(var te=this[N],ae=1,le=0;++le<K&&(ae*=256);)te+=this[N+le]*ae;return te>=(ae*=128)&&(te-=Math.pow(2,8*K)),te},r.prototype.readIntBE=function(N,K,J){N>>>=0,K>>>=0,J||D(N,K,this.length);for(var te=K,ae=1,le=this[N+--te];te>0&&(ae*=256);)le+=this[N+--te]*ae;return le>=(ae*=128)&&(le-=Math.pow(2,8*K)),le},r.prototype.readInt8=function(N,K){return N>>>=0,K||D(N,1,this.length),128&this[N]?-1*(255-this[N]+1):this[N]},r.prototype.readInt16LE=function(N,K){N>>>=0,K||D(N,2,this.length);var J=this[N]|this[N+1]<<8;return 32768&J?4294901760|J:J},r.prototype.readInt16BE=function(N,K){N>>>=0,K||D(N,2,this.length);var J=this[N+1]|this[N]<<8;return 32768&J?4294901760|J:J},r.prototype.readInt32LE=function(N,K){return N>>>=0,K||D(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},r.prototype.readInt32BE=function(N,K){return N>>>=0,K||D(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},r.prototype.readFloatLE=function(N,K){return N>>>=0,K||D(N,4,this.length),i.read(this,N,!0,23,4)},r.prototype.readFloatBE=function(N,K){return N>>>=0,K||D(N,4,this.length),i.read(this,N,!1,23,4)},r.prototype.readDoubleLE=function(N,K){return N>>>=0,K||D(N,8,this.length),i.read(this,N,!0,52,8)},r.prototype.readDoubleBE=function(N,K){return N>>>=0,K||D(N,8,this.length),i.read(this,N,!1,52,8)},r.prototype.writeUIntLE=function(N,K,J,te){N=+N,K>>>=0,J>>>=0,te||j(this,N,K,J,Math.pow(2,8*J)-1,0);var ae=1,le=0;for(this[K]=255&N;++le<J&&(ae*=256);)this[K+le]=N/ae&255;return K+J},r.prototype.writeUIntBE=function(N,K,J,te){N=+N,K>>>=0,J>>>=0,te||j(this,N,K,J,Math.pow(2,8*J)-1,0);var ae=J-1,le=1;for(this[K+ae]=255&N;--ae>=0&&(le*=256);)this[K+ae]=N/le&255;return K+J},r.prototype.writeUInt8=function(N,K,J){return N=+N,K>>>=0,J||j(this,N,K,1,255,0),this[K]=255&N,K+1},r.prototype.writeUInt16LE=function(N,K,J){return N=+N,K>>>=0,J||j(this,N,K,2,65535,0),this[K]=255&N,this[K+1]=N>>>8,K+2},r.prototype.writeUInt16BE=function(N,K,J){return N=+N,K>>>=0,J||j(this,N,K,2,65535,0),this[K]=N>>>8,this[K+1]=255&N,K+2},r.prototype.writeUInt32LE=function(N,K,J){return N=+N,K>>>=0,J||j(this,N,K,4,4294967295,0),this[K+3]=N>>>24,this[K+2]=N>>>16,this[K+1]=N>>>8,this[K]=255&N,K+4},r.prototype.writeUInt32BE=function(N,K,J){return N=+N,K>>>=0,J||j(this,N,K,4,4294967295,0),this[K]=N>>>24,this[K+1]=N>>>16,this[K+2]=N>>>8,this[K+3]=255&N,K+4},r.prototype.writeIntLE=function(N,K,J,te){if(N=+N,K>>>=0,!te){var ae=Math.pow(2,8*J-1);j(this,N,K,J,ae-1,-ae)}var le=0,se=1,ve=0;for(this[K]=255&N;++le<J&&(se*=256);)N<0&&0===ve&&0!==this[K+le-1]&&(ve=1),this[K+le]=(N/se>>0)-ve&255;return K+J},r.prototype.writeIntBE=function(N,K,J,te){if(N=+N,K>>>=0,!te){var ae=Math.pow(2,8*J-1);j(this,N,K,J,ae-1,-ae)}var le=J-1,se=1,ve=0;for(this[K+le]=255&N;--le>=0&&(se*=256);)N<0&&0===ve&&0!==this[K+le+1]&&(ve=1),this[K+le]=(N/se>>0)-ve&255;return K+J},r.prototype.writeInt8=function(N,K,J){return N=+N,K>>>=0,J||j(this,N,K,1,127,-128),N<0&&(N=255+N+1),this[K]=255&N,K+1},r.prototype.writeInt16LE=function(N,K,J){return N=+N,K>>>=0,J||j(this,N,K,2,32767,-32768),this[K]=255&N,this[K+1]=N>>>8,K+2},r.prototype.writeInt16BE=function(N,K,J){return N=+N,K>>>=0,J||j(this,N,K,2,32767,-32768),this[K]=N>>>8,this[K+1]=255&N,K+2},r.prototype.writeInt32LE=function(N,K,J){return N=+N,K>>>=0,J||j(this,N,K,4,2147483647,-2147483648),this[K]=255&N,this[K+1]=N>>>8,this[K+2]=N>>>16,this[K+3]=N>>>24,K+4},r.prototype.writeInt32BE=function(N,K,J){return N=+N,K>>>=0,J||j(this,N,K,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[K]=N>>>24,this[K+1]=N>>>16,this[K+2]=N>>>8,this[K+3]=255&N,K+4},r.prototype.writeFloatLE=function(N,K,J){return Y(this,N,K,!0,J)},r.prototype.writeFloatBE=function(N,K,J){return Y(this,N,K,!1,J)},r.prototype.writeDoubleLE=function(N,K,J){return X(this,N,K,!0,J)},r.prototype.writeDoubleBE=function(N,K,J){return X(this,N,K,!1,J)},r.prototype.copy=function(N,K,J,te){if(!r.isBuffer(N))throw new TypeError("argument should be a Buffer");if(J||(J=0),te||0===te||(te=this.length),K>=N.length&&(K=N.length),K||(K=0),te>0&&te<J&&(te=J),te===J||0===N.length||0===this.length)return 0;if(K<0)throw new RangeError("targetStart out of bounds");if(J<0||J>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),N.length-K<te-J&&(te=N.length-K+J);var ae=te-J;if(this===N&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(K,J,te);else if(this===N&&J<K&&K<te)for(var le=ae-1;le>=0;--le)N[le+K]=this[le+J];else Uint8Array.prototype.set.call(N,this.subarray(J,te),K);return ae},r.prototype.fill=function(N,K,J,te){if("string"==typeof N){if("string"==typeof K?(te=K,K=0,J=this.length):"string"==typeof J&&(te=J,J=this.length),void 0!==te&&"string"!=typeof te)throw new TypeError("encoding must be a string");if("string"==typeof te&&!r.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(1===N.length){var ae=N.charCodeAt(0);("utf8"===te&&ae<128||"latin1"===te)&&(N=ae)}}else"number"==typeof N&&(N&=255);if(K<0||this.length<K||this.length<J)throw new RangeError("Out of range index");if(J<=K)return this;var le;if(K>>>=0,J=void 0===J?this.length:J>>>0,N||(N=0),"number"==typeof N)for(le=K;le<J;++le)this[le]=N;else{var se=r.isBuffer(N)?N:r.from(N,te),ve=se.length;if(0===ve)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(le=0;le<J-K;++le)this[le+K]=se[le%ve]}return this};var Z=/[^+/0-9A-Za-z-_]/g;function W(N){return N<16?"0"+N.toString(16):N.toString(16)}function re(N,K){var J;K=K||1/0;for(var te=N.length,ae=null,le=[],se=0;se<te;++se){if((J=N.charCodeAt(se))>55295&&J<57344){if(!ae){if(J>56319){(K-=3)>-1&&le.push(239,191,189);continue}if(se+1===te){(K-=3)>-1&&le.push(239,191,189);continue}ae=J;continue}if(J<56320){(K-=3)>-1&&le.push(239,191,189),ae=J;continue}J=65536+(ae-55296<<10|J-56320)}else ae&&(K-=3)>-1&&le.push(239,191,189);if(ae=null,J<128){if((K-=1)<0)break;le.push(J)}else if(J<2048){if((K-=2)<0)break;le.push(J>>6|192,63&J|128)}else if(J<65536){if((K-=3)<0)break;le.push(J>>12|224,J>>6&63|128,63&J|128)}else{if(!(J<1114112))throw new Error("Invalid code point");if((K-=4)<0)break;le.push(J>>18|240,J>>12&63|128,J>>6&63|128,63&J|128)}}return le}function U(N){return n.toByteArray(function(K){if((K=(K=K.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;K.length%4!=0;)K+="=";return K}(N))}function B(N,K,J,te){for(var ae=0;ae<te&&!(ae+J>=K.length||ae>=N.length);++ae)K[ae+J]=N[ae];return ae}function V(N,K){return N instanceof K||null!=N&&null!=N.constructor&&null!=N.constructor.name&&N.constructor.name===K.name}function ee(N){return N!=N}}).call(this)}).call(this,g("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(g,k,x){x.read=function(e,n,i,l,r){var d,f,t=8*r-l-1,h=(1<<t)-1,s=h>>1,o=-7,p=i?r-1:0,c=i?-1:1,a=e[n+p];for(p+=c,d=a&(1<<-o)-1,a>>=-o,o+=t;o>0;d=256*d+e[n+p],p+=c,o-=8);for(f=d&(1<<-o)-1,d>>=-o,o+=l;o>0;f=256*f+e[n+p],p+=c,o-=8);if(0===d)d=1-s;else{if(d===h)return f?NaN:1/0*(a?-1:1);f+=Math.pow(2,l),d-=s}return(a?-1:1)*f*Math.pow(2,d-l)},x.write=function(e,n,i,l,r,d){var f,t,h,s=8*d-r-1,o=(1<<s)-1,p=o>>1,c=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,a=l?0:d-1,y=l?1:-1,u=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(t=isNaN(n)?1:0,f=o):(f=Math.floor(Math.log(n)/Math.LN2),n*(h=Math.pow(2,-f))<1&&(f--,h*=2),(n+=f+p>=1?c/h:c*Math.pow(2,1-p))*h>=2&&(f++,h/=2),f+p>=o?(t=0,f=o):f+p>=1?(t=(n*h-1)*Math.pow(2,r),f+=p):(t=n*Math.pow(2,p-1)*Math.pow(2,r),f=0));r>=8;e[i+a]=255&t,a+=y,t/=256,r-=8);for(f=f<<r|t,s+=r;s>0;e[i+a]=255&f,a+=y,f/=256,s-=8);e[i+a-y]|=128*u}},{}],5:[function(g,k,x){var e,n,i=k.exports={};function l(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function d(y){if(e===setTimeout)return setTimeout(y,0);if((e===l||!e)&&setTimeout)return e=setTimeout,setTimeout(y,0);try{return e(y,0)}catch{try{return e.call(null,y,0)}catch{return e.call(this,y,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:l}catch{e=l}try{n="function"==typeof clearTimeout?clearTimeout:r}catch{n=r}}();var f,t=[],h=!1,s=-1;function o(){h&&f&&(h=!1,f.length?t=f.concat(t):s=-1,t.length&&p())}function p(){if(!h){var y=d(o);h=!0;for(var u=t.length;u;){for(f=t,t=[];++s<u;)f&&f[s].run();s=-1,u=t.length}f=null,h=!1,function(_){if(n===clearTimeout)return clearTimeout(_);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(_);try{n(_)}catch{try{return n.call(null,_)}catch{return n.call(this,_)}}}(y)}}function c(y,u){this.fun=y,this.array=u}function a(){}i.nextTick=function(y){var u=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)u[_-1]=arguments[_];t.push(new c(y,u)),1!==t.length||h||d(p)},c.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=a,i.addListener=a,i.once=a,i.off=a,i.removeListener=a,i.removeAllListeners=a,i.emit=a,i.prependListener=a,i.prependOnceListener=a,i.listeners=function(y){return[]},i.binding=function(y){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(y){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],6:[function(g,k,x){k.exports={alpha_shape:g("alpha-shape"),convex_hull:g("convex-hull"),delaunay_triangulate:g("delaunay-triangulate"),gl_cone3d:g("gl-cone3d"),gl_error3d:g("gl-error3d"),gl_heatmap2d:g("gl-heatmap2d"),gl_line3d:g("gl-line3d"),gl_mesh3d:g("gl-mesh3d"),gl_plot2d:g("gl-plot2d"),gl_plot3d:g("gl-plot3d"),gl_pointcloud2d:g("gl-pointcloud2d"),gl_scatter3d:g("gl-scatter3d"),gl_select_box:g("gl-select-box"),gl_spikes2d:g("gl-spikes2d"),gl_streamtube3d:g("gl-streamtube3d"),gl_surface3d:g("gl-surface3d"),ndarray:g("ndarray"),ndarray_linear_interpolate:g("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(g,k,x){"use strict";k.exports=function(d){var f=(d=d||{}).eye||[0,0,1],t=d.center||[0,0,0],h=d.up||[0,1,0],s=d.distanceLimits||[0,1/0],o=d.mode||"turntable",p=e(),c=n(),a=i();return p.setDistanceLimits(s[0],s[1]),p.lookAt(0,f,t,h),c.setDistanceLimits(s[0],s[1]),c.lookAt(0,f,t,h),a.setDistanceLimits(s[0],s[1]),a.lookAt(0,f,t,h),new l({turntable:p,orbit:c,matrix:a},o)};var e=g("turntable-camera-controller"),n=g("orbit-camera-controller"),i=g("matrix-camera-controller");function l(d,f){this._controllerNames=Object.keys(d),this._controllerList=this._controllerNames.map(function(t){return d[t]}),this._mode=f,this._active=d[f],this._active||(this._mode="turntable",this._active=d.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var r=l.prototype;r.flush=function(d){for(var f=this._controllerList,t=0;t<f.length;++t)f[t].flush(d)},r.idle=function(d){for(var f=this._controllerList,t=0;t<f.length;++t)f[t].idle(d)},r.lookAt=function(d,f,t,h){for(var s=this._controllerList,o=0;o<s.length;++o)s[o].lookAt(d,f,t,h)},r.rotate=function(d,f,t,h){for(var s=this._controllerList,o=0;o<s.length;++o)s[o].rotate(d,f,t,h)},r.pan=function(d,f,t,h){for(var s=this._controllerList,o=0;o<s.length;++o)s[o].pan(d,f,t,h)},r.translate=function(d,f,t,h){for(var s=this._controllerList,o=0;o<s.length;++o)s[o].translate(d,f,t,h)},r.setMatrix=function(d,f){for(var t=this._controllerList,h=0;h<t.length;++h)t[h].setMatrix(d,f)},r.setDistanceLimits=function(d,f){for(var t=this._controllerList,h=0;h<t.length;++h)t[h].setDistanceLimits(d,f)},r.setDistance=function(d,f){for(var t=this._controllerList,h=0;h<t.length;++h)t[h].setDistance(d,f)},r.recalcMatrix=function(d){this._active.recalcMatrix(d)},r.getDistance=function(d){return this._active.getDistance(d)},r.getDistanceLimits=function(d){return this._active.getDistanceLimits(d)},r.lastT=function(){return this._active.lastT()},r.setMode=function(d){if(d!==this._mode){var f=this._controllerNames.indexOf(d);if(!(f<0)){var t=this._active,h=this._controllerList[f],s=Math.max(t.lastT(),h.lastT());t.recalcMatrix(s),h.setMatrix(s,t.computedMatrix),this._active=h,this._mode=d,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},r.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(g,k,x){"use strict";var e=typeof WeakMap>"u"?g("weak-map"):WeakMap,n=g("gl-buffer"),i=g("gl-vao"),l=new e;k.exports=function(r){var d=l.get(r),f=d&&(d._triangleBuffer.handle||d._triangleBuffer.buffer);if(!f||!r.isBuffer(f)){var t=n(r,new Float32Array([-1,-1,-1,4,4,-1]));(d=i(r,[{buffer:t,type:r.FLOAT,size:2}]))._triangleBuffer=t,l.set(r,d)}d.bind(),r.drawArrays(r.TRIANGLES,0,3),d.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(g,k,x){var e=g("pad-left");k.exports=function(n,i,l){i="number"==typeof i?i:1,l=l||": ";var r=n.split(/\r?\n/),d=String(r.length+i-1).length;return r.map(function(f,t){var h=t+i,s=String(h).length;return e(h,d-s)+l+f}).join("\n")}},{"pad-left":264}],10:[function(g,k,x){"use strict";k.exports=function(i){var l=i.length;if(0===l)return[];if(1===l)return[0];for(var r=i[0].length,d=[i[0]],f=[0],t=1;t<l;++t)if(d.push(i[t]),n(d,r)){if(f.push(t),f.length===r+1)return f}else d.pop();return f};var e=g("robust-orientation");function n(i,l){for(var r=new Array(l+1),d=0;d<i.length;++d)r[d]=i[d];for(d=0;d<=i.length;++d){for(var f=i.length;f<=l;++f){for(var t=new Array(l),h=0;h<l;++h)t[h]=Math.pow(f+1-d,h);r[f]=t}if(e.apply(void 0,r))return!0}return!1}},{"robust-orientation":284}],11:[function(g,k,x){"use strict";k.exports=function(i,l){return e(l).filter(function(r){for(var d=new Array(r.length),f=0;f<r.length;++f)d[f]=l[r[f]];return n(d)*i<1})};var e=g("delaunay-triangulate"),n=g("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(g,k,x){k.exports=function(i,l){return n(e(i,l))};var e=g("alpha-complex"),n=g("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(g,k,x){k.exports=function(e){return atob(e)}},{}],14:[function(g,k,x){"use strict";k.exports=function(i,l){for(var r=l.length,d=new Array(r+1),f=0;f<r;++f){for(var t=new Array(r+1),h=0;h<=r;++h)t[h]=i[h][f];d[f]=t}for(d[r]=new Array(r+1),f=0;f<=r;++f)d[r][f]=1;var s=new Array(r+1);for(f=0;f<r;++f)s[f]=l[f];s[r]=1;var o=e(d,s),p=n(o[r+1]);0===p&&(p=1);var c=new Array(r+1);for(f=0;f<=r;++f)c[f]=n(o[f])/p;return c};var e=g("robust-linear-solve");function n(i){for(var l=0,r=0;r<i.length;++r)l+=i[r];return l}},{"robust-linear-solve":283}],15:[function(g,k,x){"use strict";var e=g("./lib/rationalize");k.exports=function(n,i){return e(n[0].mul(i[1]).add(i[0].mul(n[1])),n[1].mul(i[1]))}},{"./lib/rationalize":25}],16:[function(g,k,x){"use strict";k.exports=function(e,n){return e[0].mul(n[1]).cmp(n[0].mul(e[1]))}},{}],17:[function(g,k,x){"use strict";var e=g("./lib/rationalize");k.exports=function(n,i){return e(n[0].mul(i[1]),n[1].mul(i[0]))}},{"./lib/rationalize":25}],18:[function(g,k,x){"use strict";var e=g("./is-rat"),n=g("./lib/is-bn"),i=g("./lib/num-to-bn"),l=g("./lib/str-to-bn"),r=g("./lib/rationalize"),d=g("./div");k.exports=function f(t,h){if(e(t))return h?d(t,f(h)):[t[0].clone(),t[1].clone()];var s,o,p=0;if(n(t))s=t.clone();else if("string"==typeof t)s=l(t);else{if(0===t)return[i(0),i(1)];if(t===Math.floor(t))s=i(t);else{for(;t!==Math.floor(t);)t*=Math.pow(2,256),p-=256;s=i(t)}}if(e(h))s.mul(h[1]),o=h[0].clone();else if(n(h))o=h.clone();else if("string"==typeof h)o=l(h);else if(h)if(h===Math.floor(h))o=i(h);else{for(;h!==Math.floor(h);)h*=Math.pow(2,256),p+=256;o=i(h)}else o=i(1);return p>0?s=s.ushln(p):p<0&&(o=o.ushln(-p)),r(s,o)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(g,k,x){"use strict";var e=g("./lib/is-bn");k.exports=function(n){return Array.isArray(n)&&2===n.length&&e(n[0])&&e(n[1])}},{"./lib/is-bn":23}],20:[function(g,k,x){"use strict";var e=g("bn.js");k.exports=function(n){return n.cmp(new e(0))}},{"bn.js":33}],21:[function(g,k,x){"use strict";var e=g("./bn-sign");k.exports=function(n){var i=n.length,l=n.words,r=0;if(1===i)r=l[0];else if(2===i)r=l[0]+67108864*l[1];else for(var d=0;d<i;d++)r+=l[d]*Math.pow(67108864,d);return e(n)*r}},{"./bn-sign":20}],22:[function(g,k,x){"use strict";var e=g("double-bits"),n=g("bit-twiddle").countTrailingZeros;k.exports=function(i){var l=n(e.lo(i));if(l<32)return l;var r=n(e.hi(i));return r>20?52:r+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(g,k,x){"use strict";g("bn.js"),k.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":33}],24:[function(g,k,x){"use strict";var e=g("bn.js"),n=g("double-bits");k.exports=function(i){var l=n.exponent(i);return l<52?new e(i):new e(i*Math.pow(2,52-l)).ushln(l-52)}},{"bn.js":33,"double-bits":64}],25:[function(g,k,x){"use strict";var e=g("./num-to-bn"),n=g("./bn-sign");k.exports=function(i,l){var r=n(i),d=n(l);if(0===r)return[e(0),e(1)];if(0===d)return[e(0),e(0)];d<0&&(i=i.neg(),l=l.neg());var f=i.gcd(l);return f.cmpn(1)?[i.div(f),l.div(f)]:[i,l]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(g,k,x){"use strict";var e=g("bn.js");k.exports=function(n){return new e(n)}},{"bn.js":33}],27:[function(g,k,x){"use strict";var e=g("./lib/rationalize");k.exports=function(n,i){return e(n[0].mul(i[0]),n[1].mul(i[1]))}},{"./lib/rationalize":25}],28:[function(g,k,x){"use strict";var e=g("./lib/bn-sign");k.exports=function(n){return e(n[0])*e(n[1])}},{"./lib/bn-sign":20}],29:[function(g,k,x){"use strict";var e=g("./lib/rationalize");k.exports=function(n,i){return e(n[0].mul(i[1]).sub(n[1].mul(i[0])),n[1].mul(i[1]))}},{"./lib/rationalize":25}],30:[function(g,k,x){"use strict";var e=g("./lib/bn-to-num"),n=g("./lib/ctz");k.exports=function(i){var l=i[0],r=i[1];if(0===l.cmpn(0))return 0;var d=l.abs().divmod(r.abs()),t=e(d.div),h=d.mod,s=l.negative!==r.negative?-1:1;if(0===h.cmpn(0))return s*t;if(t){var o=n(t)+4,p=e(h.ushln(o).divRound(r));return s*(t+p*Math.pow(2,-o))}var c=r.bitLength()-h.bitLength()+53;return p=e(h.ushln(c).divRound(r)),c<1023?s*p*Math.pow(2,-c):s*(p*=Math.pow(2,-1023))*Math.pow(2,1023-c)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(g,k,x){"use strict";function e(f,t,h,s,o){for(var p=o+1;s<=o;){var c=s+o>>>1,a=f[c];(void 0!==h?h(a,t):a-t)>=0?(p=c,o=c-1):s=c+1}return p}function n(f,t,h,s,o){for(var p=o+1;s<=o;){var c=s+o>>>1,a=f[c];(void 0!==h?h(a,t):a-t)>0?(p=c,o=c-1):s=c+1}return p}function i(f,t,h,s,o){for(var p=s-1;s<=o;){var c=s+o>>>1,a=f[c];(void 0!==h?h(a,t):a-t)<0?(p=c,s=c+1):o=c-1}return p}function l(f,t,h,s,o){for(var p=s-1;s<=o;){var c=s+o>>>1,a=f[c];(void 0!==h?h(a,t):a-t)<=0?(p=c,s=c+1):o=c-1}return p}function r(f,t,h,s,o){for(;s<=o;){var p=s+o>>>1,c=f[p],a=void 0!==h?h(c,t):c-t;if(0===a)return p;a<=0?s=p+1:o=p-1}return-1}function d(f,t,h,s,o,p){return"function"==typeof h?p(f,t,h,void 0===s?0:0|s,void 0===o?f.length-1:0|o):p(f,t,void 0,void 0===h?0:0|h,void 0===s?f.length-1:0|s)}k.exports={ge:function(f,t,h,s,o){return d(f,t,h,s,o,e)},gt:function(f,t,h,s,o){return d(f,t,h,s,o,n)},lt:function(f,t,h,s,o){return d(f,t,h,s,o,i)},le:function(f,t,h,s,o){return d(f,t,h,s,o,l)},eq:function(f,t,h,s,o){return d(f,t,h,s,o,r)}}},{}],32:[function(g,k,x){"use strict";function e(i){var l=32;return(i&=-i)&&l--,65535&i&&(l-=16),16711935&i&&(l-=8),252645135&i&&(l-=4),858993459&i&&(l-=2),1431655765&i&&(l-=1),l}x.INT_BITS=32,x.INT_MAX=2147483647,x.INT_MIN=-1<<31,x.sign=function(i){return(i>0)-(i<0)},x.abs=function(i){var l=i>>31;return(i^l)-l},x.min=function(i,l){return l^(i^l)&-(i<l)},x.max=function(i,l){return i^(i^l)&-(i<l)},x.isPow2=function(i){return!(i&i-1||!i)},x.log2=function(i){var l,r;return l=(i>65535)<<4,l|=r=((i>>>=l)>255)<<3,l|=r=((i>>>=r)>15)<<2,(l|=r=((i>>>=r)>3)<<1)|(i>>>=r)>>1},x.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},x.popCount=function(i){return 16843009*((i=(858993459&(i-=i>>>1&1431655765))+(i>>>2&858993459))+(i>>>4)&252645135)>>>24},x.countTrailingZeros=e,x.nextPow2=function(i){return i+=0===i,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,1+((i|=i>>>8)|i>>>16)},x.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,(i|=i>>>16)-(i>>>1)},x.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,27030>>>(i&=15)&1};var n=new Array(256);(function(i){for(var l=0;l<256;++l){var r=l,d=l,f=7;for(r>>>=1;r;r>>>=1)d<<=1,d|=1&r,--f;i[l]=d<<f&255}})(n),x.reverse=function(i){return n[255&i]<<24|n[i>>>8&255]<<16|n[i>>>16&255]<<8|n[i>>>24&255]},x.interleave2=function(i,l){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i&=65535)|i<<8))|i<<4))|i<<2))|i<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l&=65535)|l<<8))|l<<4))|l<<2))|l<<1))<<1},x.deinterleave2=function(i,l){return(i=65535&((i=16711935&((i=252645135&((i=858993459&((i=i>>>l&1431655765)|i>>>1))|i>>>2))|i>>>4))|i>>>16))<<16>>16},x.interleave3=function(i,l,r){return i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2),(i|=(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},x.deinterleave3=function(i,l){return(i=1023&((i=4278190335&((i=251719695&((i=3272356035&((i=i>>>l&1227133513)|i>>>2))|i>>>4))|i>>>8))|i>>>16))<<22>>22},x.nextCombination=function(i){var l=i|i-1;return l+1|(~l&-~l)-1>>>e(i)+1}},{}],33:[function(g,k,x){!function(e,n){"use strict";function i(S,E){if(!S)throw new Error(E||"Assertion failed")}function l(S,E){S.super_=E;var R=function(){};R.prototype=E.prototype,S.prototype=new R,S.prototype.constructor=S}function r(S,E,R){if(r.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,null!==S&&("le"!==E&&"be"!==E||(R=E,E=10),this._init(S||0,E||10,R||"be"))}var d;"object"==typeof e?e.exports=r:n.BN=r,r.BN=r,r.wordSize=26;try{d=typeof window<"u"&&void 0!==window.Buffer?window.Buffer:g("buffer").Buffer}catch{}function f(S,E){var R=S.charCodeAt(E);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function t(S,E,R){var D=f(S,R);return R-1>=E&&(D|=f(S,R-1)<<4),D}function h(S,E,R,D){for(var j=0,H=Math.min(S.length,R),Y=E;Y<H;Y++){var X=S.charCodeAt(Y)-48;j*=D,j+=X>=49?X-49+10:X>=17?X-17+10:X}return j}r.isBN=function(S){return S instanceof r||null!==S&&"object"==typeof S&&S.constructor.wordSize===r.wordSize&&Array.isArray(S.words)},r.max=function(S,E){return S.cmp(E)>0?S:E},r.min=function(S,E){return S.cmp(E)<0?S:E},r.prototype._init=function(S,E,R){if("number"==typeof S)return this._initNumber(S,E,R);if("object"==typeof S)return this._initArray(S,E,R);"hex"===E&&(E=16),i(E===(0|E)&&E>=2&&E<=36);var D=0;"-"===(S=S.toString().replace(/\s+/g,""))[0]&&(D++,this.negative=1),D<S.length&&(16===E?this._parseHex(S,D,R):(this._parseBase(S,E,D),"le"===R&&this._initArray(this.toArray(),E,R)))},r.prototype._initNumber=function(S,E,R){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[67108863&S],this.length=1):S<4503599627370496?(this.words=[67108863&S,S/67108864&67108863],this.length=2):(i(S<9007199254740992),this.words=[67108863&S,S/67108864&67108863,1],this.length=3),"le"===R&&this._initArray(this.toArray(),E,R)},r.prototype._initArray=function(S,E,R){if(i("number"==typeof S.length),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var j,H,Y=0;if("be"===R)for(D=S.length-1,j=0;D>=0;D-=3)this.words[j]|=(H=S[D]|S[D-1]<<8|S[D-2]<<16)<<Y&67108863,this.words[j+1]=H>>>26-Y&67108863,(Y+=24)>=26&&(Y-=26,j++);else if("le"===R)for(D=0,j=0;D<S.length;D+=3)this.words[j]|=(H=S[D]|S[D+1]<<8|S[D+2]<<16)<<Y&67108863,this.words[j+1]=H>>>26-Y&67108863,(Y+=24)>=26&&(Y-=26,j++);return this.strip()},r.prototype._parseHex=function(S,E,R){this.length=Math.ceil((S.length-E)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var j,H=0,Y=0;if("be"===R)for(D=S.length-1;D>=E;D-=2)j=t(S,E,D)<<H,this.words[Y]|=67108863&j,H>=18?(H-=18,this.words[Y+=1]|=j>>>26):H+=8;else for(D=(S.length-E)%2==0?E+1:E;D<S.length;D+=2)j=t(S,E,D)<<H,this.words[Y]|=67108863&j,H>=18?(H-=18,this.words[Y+=1]|=j>>>26):H+=8;this.strip()},r.prototype._parseBase=function(S,E,R){this.words=[0],this.length=1;for(var D=0,j=1;j<=67108863;j*=E)D++;D--,j=j/E|0;for(var H=S.length-R,Y=H%D,X=Math.min(H,H-Y)+R,Z=0,W=R;W<X;W+=D)Z=h(S,W,W+D,E),this.imuln(j),this.words[0]+Z<67108864?this.words[0]+=Z:this._iaddn(Z);if(0!==Y){var re=1;for(Z=h(S,W,S.length,E),W=0;W<Y;W++)re*=E;this.imuln(re),this.words[0]+Z<67108864?this.words[0]+=Z:this._iaddn(Z)}this.strip()},r.prototype.copy=function(S){S.words=new Array(this.length);for(var E=0;E<this.length;E++)S.words[E]=this.words[E];S.length=this.length,S.negative=this.negative,S.red=this.red},r.prototype.clone=function(){var S=new r(null);return this.copy(S),S},r.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var s=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],o=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function c(S,E,R){R.negative=E.negative^S.negative;var D=S.length+E.length|0;R.length=D,D=D-1|0;var j=0|S.words[0],H=0|E.words[0],Y=j*H,Z=Y/67108864|0;R.words[0]=67108863&Y;for(var W=1;W<D;W++){for(var re=Z>>>26,U=67108863&Z,B=Math.min(W,E.length-1),V=Math.max(0,W-S.length+1);V<=B;V++)re+=(Y=(j=0|S.words[W-V|0])*(H=0|E.words[V])+U)/67108864|0,U=67108863&Y;R.words[W]=0|U,Z=0|re}return 0!==Z?R.words[W]=0|Z:R.length--,R.strip()}r.prototype.toString=function(S,E){var R;if(E=0|E||1,16===(S=S||10)||"hex"===S){R="";for(var D=0,j=0,H=0;H<this.length;H++){var Y=this.words[H],X=(16777215&(Y<<D|j)).toString(16);R=0!=(j=Y>>>24-D&16777215)||H!==this.length-1?s[6-X.length]+X+R:X+R,(D+=2)>=26&&(D-=26,H--)}for(0!==j&&(R=j.toString(16)+R);R.length%E!=0;)R="0"+R;return 0!==this.negative&&(R="-"+R),R}if(S===(0|S)&&S>=2&&S<=36){var Z=o[S],W=p[S];R="";var re=this.clone();for(re.negative=0;!re.isZero();){var U=re.modn(W).toString(S);R=(re=re.idivn(W)).isZero()?U+R:s[Z-U.length]+U+R}for(this.isZero()&&(R="0"+R);R.length%E!=0;)R="0"+R;return 0!==this.negative&&(R="-"+R),R}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var S=this.words[0];return 2===this.length?S+=67108864*this.words[1]:3===this.length&&1===this.words[2]?S+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-S:S},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(S,E){return i(void 0!==d),this.toArrayLike(d,S,E)},r.prototype.toArray=function(S,E){return this.toArrayLike(Array,S,E)},r.prototype.toArrayLike=function(S,E,R){var D=this.byteLength(),j=R||Math.max(1,D);i(D<=j,"byte array longer than desired length"),i(j>0,"Requested array length <= 0"),this.strip();var H,Y,X="le"===E,Z=new S(j),W=this.clone();if(X){for(Y=0;!W.isZero();Y++)H=W.andln(255),W.iushrn(8),Z[Y]=H;for(;Y<j;Y++)Z[Y]=0}else{for(Y=0;Y<j-D;Y++)Z[Y]=0;for(Y=0;!W.isZero();Y++)H=W.andln(255),W.iushrn(8),Z[j-Y-1]=H}return Z},r.prototype._countBits=Math.clz32?function(S){return 32-Math.clz32(S)}:function(S){var E=S,R=0;return E>=4096&&(R+=13,E>>>=13),E>=64&&(R+=7,E>>>=7),E>=8&&(R+=4,E>>>=4),E>=2&&(R+=2,E>>>=2),R+E},r.prototype._zeroBits=function(S){if(0===S)return 26;var E=S,R=0;return 0==(8191&E)&&(R+=13,E>>>=13),0==(127&E)&&(R+=7,E>>>=7),0==(15&E)&&(R+=4,E>>>=4),0==(3&E)&&(R+=2,E>>>=2),0==(1&E)&&R++,R},r.prototype.bitLength=function(){var E=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+E},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,E=0;E<this.length;E++){var R=this._zeroBits(this.words[E]);if(S+=R,26!==R)break}return S},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(S){return 0!==this.negative?this.abs().inotn(S).iaddn(1):this.clone()},r.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var E=0;E<S.length;E++)this.words[E]=this.words[E]|S.words[E];return this.strip()},r.prototype.ior=function(S){return i(0==(this.negative|S.negative)),this.iuor(S)},r.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},r.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},r.prototype.iuand=function(S){var E;E=this.length>S.length?S:this;for(var R=0;R<E.length;R++)this.words[R]=this.words[R]&S.words[R];return this.length=E.length,this.strip()},r.prototype.iand=function(S){return i(0==(this.negative|S.negative)),this.iuand(S)},r.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},r.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},r.prototype.iuxor=function(S){var E,R;this.length>S.length?(E=this,R=S):(E=S,R=this);for(var D=0;D<R.length;D++)this.words[D]=E.words[D]^R.words[D];if(this!==E)for(;D<E.length;D++)this.words[D]=E.words[D];return this.length=E.length,this.strip()},r.prototype.ixor=function(S){return i(0==(this.negative|S.negative)),this.iuxor(S)},r.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},r.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},r.prototype.inotn=function(S){i("number"==typeof S&&S>=0);var E=0|Math.ceil(S/26),R=S%26;this._expand(E),R>0&&E--;for(var D=0;D<E;D++)this.words[D]=67108863&~this.words[D];return R>0&&(this.words[D]=~this.words[D]&67108863>>26-R),this.strip()},r.prototype.notn=function(S){return this.clone().inotn(S)},r.prototype.setn=function(S,E){i("number"==typeof S&&S>=0);var R=S/26|0,D=S%26;return this._expand(R+1),this.words[R]=E?this.words[R]|1<<D:this.words[R]&~(1<<D),this.strip()},r.prototype.iadd=function(S){var E,R,D;if(0!==this.negative&&0===S.negative)return this.negative=0,E=this.isub(S),this.negative^=1,this._normSign();if(0===this.negative&&0!==S.negative)return S.negative=0,E=this.isub(S),S.negative=1,E._normSign();this.length>S.length?(R=this,D=S):(R=S,D=this);for(var j=0,H=0;H<D.length;H++)this.words[H]=67108863&(E=(0|R.words[H])+(0|D.words[H])+j),j=E>>>26;for(;0!==j&&H<R.length;H++)this.words[H]=67108863&(E=(0|R.words[H])+j),j=E>>>26;if(this.length=R.length,0!==j)this.words[this.length]=j,this.length++;else if(R!==this)for(;H<R.length;H++)this.words[H]=R.words[H];return this},r.prototype.add=function(S){var E;return 0!==S.negative&&0===this.negative?(S.negative=0,E=this.sub(S),S.negative^=1,E):0===S.negative&&0!==this.negative?(this.negative=0,E=S.sub(this),this.negative=1,E):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},r.prototype.isub=function(S){if(0!==S.negative){S.negative=0;var E=this.iadd(S);return S.negative=1,E._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var R,D,j=this.cmp(S);if(0===j)return this.negative=0,this.length=1,this.words[0]=0,this;j>0?(R=this,D=S):(R=S,D=this);for(var H=0,Y=0;Y<D.length;Y++)H=(E=(0|R.words[Y])-(0|D.words[Y])+H)>>26,this.words[Y]=67108863&E;for(;0!==H&&Y<R.length;Y++)H=(E=(0|R.words[Y])+H)>>26,this.words[Y]=67108863&E;if(0===H&&Y<R.length&&R!==this)for(;Y<R.length;Y++)this.words[Y]=R.words[Y];return this.length=Math.max(this.length,Y),R!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(S){return this.clone().isub(S)};var a=function(S,E,R){var D,j,H,Y=S.words,X=E.words,Z=R.words,W=0,re=0|Y[0],U=8191&re,B=re>>>13,V=0|Y[1],ee=8191&V,N=V>>>13,K=0|Y[2],J=8191&K,te=K>>>13,ae=0|Y[3],le=8191&ae,se=ae>>>13,ve=0|Y[4],ue=8191&ve,ye=ve>>>13,Me=0|Y[5],pe=8191&Me,ge=Me>>>13,we=0|Y[6],oe=8191&we,de=we>>>13,Te=0|Y[7],Ee=8191&Te,Ae=Te>>>13,De=0|Y[8],Ie=8191&De,Oe=De>>>13,Xe=0|Y[9],Fe=8191&Xe,Pe=Xe>>>13,Re=0|X[0],qe=8191&Re,Qe=Re>>>13,ct=0|X[1],bt=8191&ct,Tt=ct>>>13,_t=0|X[2],nt=8191&_t,Ke=_t>>>13,xt=0|X[3],Ht=8191&xt,Zt=xt>>>13,$t=0|X[4],Xt=8191&$t,cr=$t>>>13,Ft=0|X[5],Be=8191&Ft,He=Ft>>>13,he=0|X[6],be=8191&he,ze=he>>>13,Ve=0|X[7],Je=8191&Ve,Ye=Ve>>>13,lt=0|X[8],st=8191&lt,Mt=lt>>>13,Dt=0|X[9],ht=8191&Dt,mt=Dt>>>13;R.negative=S.negative^E.negative,R.length=19;var Ot=(W+(D=Math.imul(U,qe))|0)+((8191&(j=(j=Math.imul(U,Qe))+Math.imul(B,qe)|0))<<13)|0;W=((H=Math.imul(B,Qe))+(j>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,D=Math.imul(ee,qe),j=(j=Math.imul(ee,Qe))+Math.imul(N,qe)|0,H=Math.imul(N,Qe);var At=(W+(D=D+Math.imul(U,bt)|0)|0)+((8191&(j=(j=j+Math.imul(U,Tt)|0)+Math.imul(B,bt)|0))<<13)|0;W=((H=H+Math.imul(B,Tt)|0)+(j>>>13)|0)+(At>>>26)|0,At&=67108863,D=Math.imul(J,qe),j=(j=Math.imul(J,Qe))+Math.imul(te,qe)|0,H=Math.imul(te,Qe),D=D+Math.imul(ee,bt)|0,j=(j=j+Math.imul(ee,Tt)|0)+Math.imul(N,bt)|0,H=H+Math.imul(N,Tt)|0;var It=(W+(D=D+Math.imul(U,nt)|0)|0)+((8191&(j=(j=j+Math.imul(U,Ke)|0)+Math.imul(B,nt)|0))<<13)|0;W=((H=H+Math.imul(B,Ke)|0)+(j>>>13)|0)+(It>>>26)|0,It&=67108863,D=Math.imul(le,qe),j=(j=Math.imul(le,Qe))+Math.imul(se,qe)|0,H=Math.imul(se,Qe),D=D+Math.imul(J,bt)|0,j=(j=j+Math.imul(J,Tt)|0)+Math.imul(te,bt)|0,H=H+Math.imul(te,Tt)|0,D=D+Math.imul(ee,nt)|0,j=(j=j+Math.imul(ee,Ke)|0)+Math.imul(N,nt)|0,H=H+Math.imul(N,Ke)|0;var Se=(W+(D=D+Math.imul(U,Ht)|0)|0)+((8191&(j=(j=j+Math.imul(U,Zt)|0)+Math.imul(B,Ht)|0))<<13)|0;W=((H=H+Math.imul(B,Zt)|0)+(j>>>13)|0)+(Se>>>26)|0,Se&=67108863,D=Math.imul(ue,qe),j=(j=Math.imul(ue,Qe))+Math.imul(ye,qe)|0,H=Math.imul(ye,Qe),D=D+Math.imul(le,bt)|0,j=(j=j+Math.imul(le,Tt)|0)+Math.imul(se,bt)|0,H=H+Math.imul(se,Tt)|0,D=D+Math.imul(J,nt)|0,j=(j=j+Math.imul(J,Ke)|0)+Math.imul(te,nt)|0,H=H+Math.imul(te,Ke)|0,D=D+Math.imul(ee,Ht)|0,j=(j=j+Math.imul(ee,Zt)|0)+Math.imul(N,Ht)|0,H=H+Math.imul(N,Zt)|0;var Ze=(W+(D=D+Math.imul(U,Xt)|0)|0)+((8191&(j=(j=j+Math.imul(U,cr)|0)+Math.imul(B,Xt)|0))<<13)|0;W=((H=H+Math.imul(B,cr)|0)+(j>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,D=Math.imul(pe,qe),j=(j=Math.imul(pe,Qe))+Math.imul(ge,qe)|0,H=Math.imul(ge,Qe),D=D+Math.imul(ue,bt)|0,j=(j=j+Math.imul(ue,Tt)|0)+Math.imul(ye,bt)|0,H=H+Math.imul(ye,Tt)|0,D=D+Math.imul(le,nt)|0,j=(j=j+Math.imul(le,Ke)|0)+Math.imul(se,nt)|0,H=H+Math.imul(se,Ke)|0,D=D+Math.imul(J,Ht)|0,j=(j=j+Math.imul(J,Zt)|0)+Math.imul(te,Ht)|0,H=H+Math.imul(te,Zt)|0,D=D+Math.imul(ee,Xt)|0,j=(j=j+Math.imul(ee,cr)|0)+Math.imul(N,Xt)|0,H=H+Math.imul(N,cr)|0;var it=(W+(D=D+Math.imul(U,Be)|0)|0)+((8191&(j=(j=j+Math.imul(U,He)|0)+Math.imul(B,Be)|0))<<13)|0;W=((H=H+Math.imul(B,He)|0)+(j>>>13)|0)+(it>>>26)|0,it&=67108863,D=Math.imul(oe,qe),j=(j=Math.imul(oe,Qe))+Math.imul(de,qe)|0,H=Math.imul(de,Qe),D=D+Math.imul(pe,bt)|0,j=(j=j+Math.imul(pe,Tt)|0)+Math.imul(ge,bt)|0,H=H+Math.imul(ge,Tt)|0,D=D+Math.imul(ue,nt)|0,j=(j=j+Math.imul(ue,Ke)|0)+Math.imul(ye,nt)|0,H=H+Math.imul(ye,Ke)|0,D=D+Math.imul(le,Ht)|0,j=(j=j+Math.imul(le,Zt)|0)+Math.imul(se,Ht)|0,H=H+Math.imul(se,Zt)|0,D=D+Math.imul(J,Xt)|0,j=(j=j+Math.imul(J,cr)|0)+Math.imul(te,Xt)|0,H=H+Math.imul(te,cr)|0,D=D+Math.imul(ee,Be)|0,j=(j=j+Math.imul(ee,He)|0)+Math.imul(N,Be)|0,H=H+Math.imul(N,He)|0;var dt=(W+(D=D+Math.imul(U,be)|0)|0)+((8191&(j=(j=j+Math.imul(U,ze)|0)+Math.imul(B,be)|0))<<13)|0;W=((H=H+Math.imul(B,ze)|0)+(j>>>13)|0)+(dt>>>26)|0,dt&=67108863,D=Math.imul(Ee,qe),j=(j=Math.imul(Ee,Qe))+Math.imul(Ae,qe)|0,H=Math.imul(Ae,Qe),D=D+Math.imul(oe,bt)|0,j=(j=j+Math.imul(oe,Tt)|0)+Math.imul(de,bt)|0,H=H+Math.imul(de,Tt)|0,D=D+Math.imul(pe,nt)|0,j=(j=j+Math.imul(pe,Ke)|0)+Math.imul(ge,nt)|0,H=H+Math.imul(ge,Ke)|0,D=D+Math.imul(ue,Ht)|0,j=(j=j+Math.imul(ue,Zt)|0)+Math.imul(ye,Ht)|0,H=H+Math.imul(ye,Zt)|0,D=D+Math.imul(le,Xt)|0,j=(j=j+Math.imul(le,cr)|0)+Math.imul(se,Xt)|0,H=H+Math.imul(se,cr)|0,D=D+Math.imul(J,Be)|0,j=(j=j+Math.imul(J,He)|0)+Math.imul(te,Be)|0,H=H+Math.imul(te,He)|0,D=D+Math.imul(ee,be)|0,j=(j=j+Math.imul(ee,ze)|0)+Math.imul(N,be)|0,H=H+Math.imul(N,ze)|0;var Ct=(W+(D=D+Math.imul(U,Je)|0)|0)+((8191&(j=(j=j+Math.imul(U,Ye)|0)+Math.imul(B,Je)|0))<<13)|0;W=((H=H+Math.imul(B,Ye)|0)+(j>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,D=Math.imul(Ie,qe),j=(j=Math.imul(Ie,Qe))+Math.imul(Oe,qe)|0,H=Math.imul(Oe,Qe),D=D+Math.imul(Ee,bt)|0,j=(j=j+Math.imul(Ee,Tt)|0)+Math.imul(Ae,bt)|0,H=H+Math.imul(Ae,Tt)|0,D=D+Math.imul(oe,nt)|0,j=(j=j+Math.imul(oe,Ke)|0)+Math.imul(de,nt)|0,H=H+Math.imul(de,Ke)|0,D=D+Math.imul(pe,Ht)|0,j=(j=j+Math.imul(pe,Zt)|0)+Math.imul(ge,Ht)|0,H=H+Math.imul(ge,Zt)|0,D=D+Math.imul(ue,Xt)|0,j=(j=j+Math.imul(ue,cr)|0)+Math.imul(ye,Xt)|0,H=H+Math.imul(ye,cr)|0,D=D+Math.imul(le,Be)|0,j=(j=j+Math.imul(le,He)|0)+Math.imul(se,Be)|0,H=H+Math.imul(se,He)|0,D=D+Math.imul(J,be)|0,j=(j=j+Math.imul(J,ze)|0)+Math.imul(te,be)|0,H=H+Math.imul(te,ze)|0,D=D+Math.imul(ee,Je)|0,j=(j=j+Math.imul(ee,Ye)|0)+Math.imul(N,Je)|0,H=H+Math.imul(N,Ye)|0;var Ut=(W+(D=D+Math.imul(U,st)|0)|0)+((8191&(j=(j=j+Math.imul(U,Mt)|0)+Math.imul(B,st)|0))<<13)|0;W=((H=H+Math.imul(B,Mt)|0)+(j>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,D=Math.imul(Fe,qe),j=(j=Math.imul(Fe,Qe))+Math.imul(Pe,qe)|0,H=Math.imul(Pe,Qe),D=D+Math.imul(Ie,bt)|0,j=(j=j+Math.imul(Ie,Tt)|0)+Math.imul(Oe,bt)|0,H=H+Math.imul(Oe,Tt)|0,D=D+Math.imul(Ee,nt)|0,j=(j=j+Math.imul(Ee,Ke)|0)+Math.imul(Ae,nt)|0,H=H+Math.imul(Ae,Ke)|0,D=D+Math.imul(oe,Ht)|0,j=(j=j+Math.imul(oe,Zt)|0)+Math.imul(de,Ht)|0,H=H+Math.imul(de,Zt)|0,D=D+Math.imul(pe,Xt)|0,j=(j=j+Math.imul(pe,cr)|0)+Math.imul(ge,Xt)|0,H=H+Math.imul(ge,cr)|0,D=D+Math.imul(ue,Be)|0,j=(j=j+Math.imul(ue,He)|0)+Math.imul(ye,Be)|0,H=H+Math.imul(ye,He)|0,D=D+Math.imul(le,be)|0,j=(j=j+Math.imul(le,ze)|0)+Math.imul(se,be)|0,H=H+Math.imul(se,ze)|0,D=D+Math.imul(J,Je)|0,j=(j=j+Math.imul(J,Ye)|0)+Math.imul(te,Je)|0,H=H+Math.imul(te,Ye)|0,D=D+Math.imul(ee,st)|0,j=(j=j+Math.imul(ee,Mt)|0)+Math.imul(N,st)|0,H=H+Math.imul(N,Mt)|0;var Jt=(W+(D=D+Math.imul(U,ht)|0)|0)+((8191&(j=(j=j+Math.imul(U,mt)|0)+Math.imul(B,ht)|0))<<13)|0;W=((H=H+Math.imul(B,mt)|0)+(j>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,D=Math.imul(Fe,bt),j=(j=Math.imul(Fe,Tt))+Math.imul(Pe,bt)|0,H=Math.imul(Pe,Tt),D=D+Math.imul(Ie,nt)|0,j=(j=j+Math.imul(Ie,Ke)|0)+Math.imul(Oe,nt)|0,H=H+Math.imul(Oe,Ke)|0,D=D+Math.imul(Ee,Ht)|0,j=(j=j+Math.imul(Ee,Zt)|0)+Math.imul(Ae,Ht)|0,H=H+Math.imul(Ae,Zt)|0,D=D+Math.imul(oe,Xt)|0,j=(j=j+Math.imul(oe,cr)|0)+Math.imul(de,Xt)|0,H=H+Math.imul(de,cr)|0,D=D+Math.imul(pe,Be)|0,j=(j=j+Math.imul(pe,He)|0)+Math.imul(ge,Be)|0,H=H+Math.imul(ge,He)|0,D=D+Math.imul(ue,be)|0,j=(j=j+Math.imul(ue,ze)|0)+Math.imul(ye,be)|0,H=H+Math.imul(ye,ze)|0,D=D+Math.imul(le,Je)|0,j=(j=j+Math.imul(le,Ye)|0)+Math.imul(se,Je)|0,H=H+Math.imul(se,Ye)|0,D=D+Math.imul(J,st)|0,j=(j=j+Math.imul(J,Mt)|0)+Math.imul(te,st)|0,H=H+Math.imul(te,Mt)|0;var qt=(W+(D=D+Math.imul(ee,ht)|0)|0)+((8191&(j=(j=j+Math.imul(ee,mt)|0)+Math.imul(N,ht)|0))<<13)|0;W=((H=H+Math.imul(N,mt)|0)+(j>>>13)|0)+(qt>>>26)|0,qt&=67108863,D=Math.imul(Fe,nt),j=(j=Math.imul(Fe,Ke))+Math.imul(Pe,nt)|0,H=Math.imul(Pe,Ke),D=D+Math.imul(Ie,Ht)|0,j=(j=j+Math.imul(Ie,Zt)|0)+Math.imul(Oe,Ht)|0,H=H+Math.imul(Oe,Zt)|0,D=D+Math.imul(Ee,Xt)|0,j=(j=j+Math.imul(Ee,cr)|0)+Math.imul(Ae,Xt)|0,H=H+Math.imul(Ae,cr)|0,D=D+Math.imul(oe,Be)|0,j=(j=j+Math.imul(oe,He)|0)+Math.imul(de,Be)|0,H=H+Math.imul(de,He)|0,D=D+Math.imul(pe,be)|0,j=(j=j+Math.imul(pe,ze)|0)+Math.imul(ge,be)|0,H=H+Math.imul(ge,ze)|0,D=D+Math.imul(ue,Je)|0,j=(j=j+Math.imul(ue,Ye)|0)+Math.imul(ye,Je)|0,H=H+Math.imul(ye,Ye)|0,D=D+Math.imul(le,st)|0,j=(j=j+Math.imul(le,Mt)|0)+Math.imul(se,st)|0,H=H+Math.imul(se,Mt)|0;var pr=(W+(D=D+Math.imul(J,ht)|0)|0)+((8191&(j=(j=j+Math.imul(J,mt)|0)+Math.imul(te,ht)|0))<<13)|0;W=((H=H+Math.imul(te,mt)|0)+(j>>>13)|0)+(pr>>>26)|0,pr&=67108863,D=Math.imul(Fe,Ht),j=(j=Math.imul(Fe,Zt))+Math.imul(Pe,Ht)|0,H=Math.imul(Pe,Zt),D=D+Math.imul(Ie,Xt)|0,j=(j=j+Math.imul(Ie,cr)|0)+Math.imul(Oe,Xt)|0,H=H+Math.imul(Oe,cr)|0,D=D+Math.imul(Ee,Be)|0,j=(j=j+Math.imul(Ee,He)|0)+Math.imul(Ae,Be)|0,H=H+Math.imul(Ae,He)|0,D=D+Math.imul(oe,be)|0,j=(j=j+Math.imul(oe,ze)|0)+Math.imul(de,be)|0,H=H+Math.imul(de,ze)|0,D=D+Math.imul(pe,Je)|0,j=(j=j+Math.imul(pe,Ye)|0)+Math.imul(ge,Je)|0,H=H+Math.imul(ge,Ye)|0,D=D+Math.imul(ue,st)|0,j=(j=j+Math.imul(ue,Mt)|0)+Math.imul(ye,st)|0,H=H+Math.imul(ye,Mt)|0;var Sr=(W+(D=D+Math.imul(le,ht)|0)|0)+((8191&(j=(j=j+Math.imul(le,mt)|0)+Math.imul(se,ht)|0))<<13)|0;W=((H=H+Math.imul(se,mt)|0)+(j>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,D=Math.imul(Fe,Xt),j=(j=Math.imul(Fe,cr))+Math.imul(Pe,Xt)|0,H=Math.imul(Pe,cr),D=D+Math.imul(Ie,Be)|0,j=(j=j+Math.imul(Ie,He)|0)+Math.imul(Oe,Be)|0,H=H+Math.imul(Oe,He)|0,D=D+Math.imul(Ee,be)|0,j=(j=j+Math.imul(Ee,ze)|0)+Math.imul(Ae,be)|0,H=H+Math.imul(Ae,ze)|0,D=D+Math.imul(oe,Je)|0,j=(j=j+Math.imul(oe,Ye)|0)+Math.imul(de,Je)|0,H=H+Math.imul(de,Ye)|0,D=D+Math.imul(pe,st)|0,j=(j=j+Math.imul(pe,Mt)|0)+Math.imul(ge,st)|0,H=H+Math.imul(ge,Mt)|0;var mr=(W+(D=D+Math.imul(ue,ht)|0)|0)+((8191&(j=(j=j+Math.imul(ue,mt)|0)+Math.imul(ye,ht)|0))<<13)|0;W=((H=H+Math.imul(ye,mt)|0)+(j>>>13)|0)+(mr>>>26)|0,mr&=67108863,D=Math.imul(Fe,Be),j=(j=Math.imul(Fe,He))+Math.imul(Pe,Be)|0,H=Math.imul(Pe,He),D=D+Math.imul(Ie,be)|0,j=(j=j+Math.imul(Ie,ze)|0)+Math.imul(Oe,be)|0,H=H+Math.imul(Oe,ze)|0,D=D+Math.imul(Ee,Je)|0,j=(j=j+Math.imul(Ee,Ye)|0)+Math.imul(Ae,Je)|0,H=H+Math.imul(Ae,Ye)|0,D=D+Math.imul(oe,st)|0,j=(j=j+Math.imul(oe,Mt)|0)+Math.imul(de,st)|0,H=H+Math.imul(de,Mt)|0;var tr=(W+(D=D+Math.imul(pe,ht)|0)|0)+((8191&(j=(j=j+Math.imul(pe,mt)|0)+Math.imul(ge,ht)|0))<<13)|0;W=((H=H+Math.imul(ge,mt)|0)+(j>>>13)|0)+(tr>>>26)|0,tr&=67108863,D=Math.imul(Fe,be),j=(j=Math.imul(Fe,ze))+Math.imul(Pe,be)|0,H=Math.imul(Pe,ze),D=D+Math.imul(Ie,Je)|0,j=(j=j+Math.imul(Ie,Ye)|0)+Math.imul(Oe,Je)|0,H=H+Math.imul(Oe,Ye)|0,D=D+Math.imul(Ee,st)|0,j=(j=j+Math.imul(Ee,Mt)|0)+Math.imul(Ae,st)|0,H=H+Math.imul(Ae,Mt)|0;var rr=(W+(D=D+Math.imul(oe,ht)|0)|0)+((8191&(j=(j=j+Math.imul(oe,mt)|0)+Math.imul(de,ht)|0))<<13)|0;W=((H=H+Math.imul(de,mt)|0)+(j>>>13)|0)+(rr>>>26)|0,rr&=67108863,D=Math.imul(Fe,Je),j=(j=Math.imul(Fe,Ye))+Math.imul(Pe,Je)|0,H=Math.imul(Pe,Ye),D=D+Math.imul(Ie,st)|0,j=(j=j+Math.imul(Ie,Mt)|0)+Math.imul(Oe,st)|0,H=H+Math.imul(Oe,Mt)|0;var ar=(W+(D=D+Math.imul(Ee,ht)|0)|0)+((8191&(j=(j=j+Math.imul(Ee,mt)|0)+Math.imul(Ae,ht)|0))<<13)|0;W=((H=H+Math.imul(Ae,mt)|0)+(j>>>13)|0)+(ar>>>26)|0,ar&=67108863,D=Math.imul(Fe,st),j=(j=Math.imul(Fe,Mt))+Math.imul(Pe,st)|0,H=Math.imul(Pe,Mt);var dr=(W+(D=D+Math.imul(Ie,ht)|0)|0)+((8191&(j=(j=j+Math.imul(Ie,mt)|0)+Math.imul(Oe,ht)|0))<<13)|0;W=((H=H+Math.imul(Oe,mt)|0)+(j>>>13)|0)+(dr>>>26)|0,dr&=67108863;var xr=(W+(D=Math.imul(Fe,ht))|0)+((8191&(j=(j=Math.imul(Fe,mt))+Math.imul(Pe,ht)|0))<<13)|0;return W=((H=Math.imul(Pe,mt))+(j>>>13)|0)+(xr>>>26)|0,xr&=67108863,Z[0]=Ot,Z[1]=At,Z[2]=It,Z[3]=Se,Z[4]=Ze,Z[5]=it,Z[6]=dt,Z[7]=Ct,Z[8]=Ut,Z[9]=Jt,Z[10]=qt,Z[11]=pr,Z[12]=Sr,Z[13]=mr,Z[14]=tr,Z[15]=rr,Z[16]=ar,Z[17]=dr,Z[18]=xr,0!==W&&(Z[19]=W,R.length++),R};function y(S,E,R){return(new u).mulp(S,E,R)}function u(S,E){this.x=S,this.y=E}Math.imul||(a=c),r.prototype.mulTo=function(S,E){var R=this.length+S.length;return 10===this.length&&10===S.length?a(this,S,E):R<63?c(this,S,E):R<1024?function(D,j,H){H.negative=j.negative^D.negative,H.length=D.length+j.length;for(var Y=0,X=0,Z=0;Z<H.length-1;Z++){var W=X;X=0;for(var re=67108863&Y,U=Math.min(Z,j.length-1),B=Math.max(0,Z-D.length+1);B<=U;B++){var ee=(0|D.words[Z-B])*(0|j.words[B]),N=67108863&ee;re=67108863&(N=N+re|0),X+=(W=(W=W+(ee/67108864|0)|0)+(N>>>26)|0)>>>26,W&=67108863}H.words[Z]=re,Y=W,W=X}return 0!==Y?H.words[Z]=Y:H.length--,H.strip()}(this,S,E):y(this,S,E)},u.prototype.makeRBT=function(S){for(var E=new Array(S),R=r.prototype._countBits(S)-1,D=0;D<S;D++)E[D]=this.revBin(D,R,S);return E},u.prototype.revBin=function(S,E,R){if(0===S||S===R-1)return S;for(var D=0,j=0;j<E;j++)D|=(1&S)<<E-j-1,S>>=1;return D},u.prototype.permute=function(S,E,R,D,j,H){for(var Y=0;Y<H;Y++)D[Y]=E[S[Y]],j[Y]=R[S[Y]]},u.prototype.transform=function(S,E,R,D,j,H){this.permute(H,S,E,R,D,j);for(var Y=1;Y<j;Y<<=1)for(var X=Y<<1,Z=Math.cos(2*Math.PI/X),W=Math.sin(2*Math.PI/X),re=0;re<j;re+=X)for(var U=Z,B=W,V=0;V<Y;V++){var ee=R[re+V],N=D[re+V],K=R[re+V+Y],J=D[re+V+Y],te=U*K-B*J;J=U*J+B*K,R[re+V]=ee+(K=te),D[re+V]=N+J,R[re+V+Y]=ee-K,D[re+V+Y]=N-J,V!==X&&(te=Z*U-W*B,B=Z*B+W*U,U=te)}},u.prototype.guessLen13b=function(S,E){var R=1|Math.max(E,S),D=1&R,j=0;for(R=R/2|0;R;R>>>=1)j++;return 1<<j+1+D},u.prototype.conjugate=function(S,E,R){if(!(R<=1))for(var D=0;D<R/2;D++){var j=S[D];S[D]=S[R-D-1],S[R-D-1]=j,j=E[D],E[D]=-E[R-D-1],E[R-D-1]=-j}},u.prototype.normalize13b=function(S,E){for(var R=0,D=0;D<E/2;D++){var j=8192*Math.round(S[2*D+1]/E)+Math.round(S[2*D]/E)+R;S[D]=67108863&j,R=j<67108864?0:j/67108864|0}return S},u.prototype.convert13b=function(S,E,R,D){for(var j=0,H=0;H<E;H++)R[2*H]=8191&(j+=0|S[H]),R[2*H+1]=8191&(j>>>=13),j>>>=13;for(H=2*E;H<D;++H)R[H]=0;i(0===j),i(0==(-8192&j))},u.prototype.stub=function(S){for(var E=new Array(S),R=0;R<S;R++)E[R]=0;return E},u.prototype.mulp=function(S,E,R){var D=2*this.guessLen13b(S.length,E.length),j=this.makeRBT(D),H=this.stub(D),Y=new Array(D),X=new Array(D),Z=new Array(D),W=new Array(D),re=new Array(D),U=new Array(D),B=R.words;B.length=D,this.convert13b(S.words,S.length,Y,D),this.convert13b(E.words,E.length,W,D),this.transform(Y,H,X,Z,D,j),this.transform(W,H,re,U,D,j);for(var V=0;V<D;V++){var ee=X[V]*re[V]-Z[V]*U[V];Z[V]=X[V]*U[V]+Z[V]*re[V],X[V]=ee}return this.conjugate(X,Z,D),this.transform(X,Z,B,H,D,j),this.conjugate(B,H,D),this.normalize13b(B,D),R.negative=S.negative^E.negative,R.length=S.length+E.length,R.strip()},r.prototype.mul=function(S){var E=new r(null);return E.words=new Array(this.length+S.length),this.mulTo(S,E)},r.prototype.mulf=function(S){var E=new r(null);return E.words=new Array(this.length+S.length),y(this,S,E)},r.prototype.imul=function(S){return this.clone().mulTo(S,this)},r.prototype.imuln=function(S){i("number"==typeof S),i(S<67108864);for(var E=0,R=0;R<this.length;R++){var D=(0|this.words[R])*S,j=(67108863&D)+(67108863&E);E>>=26,E+=D/67108864|0,E+=j>>>26,this.words[R]=67108863&j}return 0!==E&&(this.words[R]=E,this.length++),this},r.prototype.muln=function(S){return this.clone().imuln(S)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(S){var E=function(H){for(var Y=new Array(H.bitLength()),X=0;X<Y.length;X++){var W=X%26;Y[X]=(H.words[X/26|0]&1<<W)>>>W}return Y}(S);if(0===E.length)return new r(1);for(var R=this,D=0;D<E.length&&0===E[D];D++,R=R.sqr());if(++D<E.length)for(var j=R.sqr();D<E.length;D++,j=j.sqr())0!==E[D]&&(R=R.mul(j));return R},r.prototype.iushln=function(S){i("number"==typeof S&&S>=0);var E,R=S%26,D=(S-R)/26,j=67108863>>>26-R<<26-R;if(0!==R){var H=0;for(E=0;E<this.length;E++){var Y=this.words[E]&j;this.words[E]=(0|this.words[E])-Y<<R|H,H=Y>>>26-R}H&&(this.words[E]=H,this.length++)}if(0!==D){for(E=this.length-1;E>=0;E--)this.words[E+D]=this.words[E];for(E=0;E<D;E++)this.words[E]=0;this.length+=D}return this.strip()},r.prototype.ishln=function(S){return i(0===this.negative),this.iushln(S)},r.prototype.iushrn=function(S,E,R){var D;i("number"==typeof S&&S>=0),D=E?(E-E%26)/26:0;var j=S%26,H=Math.min((S-j)/26,this.length),Y=67108863^67108863>>>j<<j,X=R;if(D-=H,D=Math.max(0,D),X){for(var Z=0;Z<H;Z++)X.words[Z]=this.words[Z];X.length=H}if(0!==H)if(this.length>H)for(this.length-=H,Z=0;Z<this.length;Z++)this.words[Z]=this.words[Z+H];else this.words[0]=0,this.length=1;var W=0;for(Z=this.length-1;Z>=0&&(0!==W||Z>=D);Z--){var re=0|this.words[Z];this.words[Z]=W<<26-j|re>>>j,W=re&Y}return X&&0!==W&&(X.words[X.length++]=W),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(S,E,R){return i(0===this.negative),this.iushrn(S,E,R)},r.prototype.shln=function(S){return this.clone().ishln(S)},r.prototype.ushln=function(S){return this.clone().iushln(S)},r.prototype.shrn=function(S){return this.clone().ishrn(S)},r.prototype.ushrn=function(S){return this.clone().iushrn(S)},r.prototype.testn=function(S){i("number"==typeof S&&S>=0);var E=S%26,R=(S-E)/26;return!(this.length<=R||!(this.words[R]&1<<E))},r.prototype.imaskn=function(S){i("number"==typeof S&&S>=0);var E=S%26,R=(S-E)/26;return i(0===this.negative,"imaskn works only with positive numbers"),this.length<=R?this:(0!==E&&R++,this.length=Math.min(R,this.length),0!==E&&(this.words[this.length-1]&=67108863^67108863>>>E<<E),this.strip())},r.prototype.maskn=function(S){return this.clone().imaskn(S)},r.prototype.iaddn=function(S){return i("number"==typeof S),i(S<67108864),S<0?this.isubn(-S):0!==this.negative?1===this.length&&(0|this.words[0])<S?(this.words[0]=S-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},r.prototype._iaddn=function(S){this.words[0]+=S;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},r.prototype.isubn=function(S){if(i("number"==typeof S),i(S<67108864),S<0)return this.iaddn(-S);if(0!==this.negative)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this.strip()},r.prototype.addn=function(S){return this.clone().iaddn(S)},r.prototype.subn=function(S){return this.clone().isubn(S)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(S,E,R){var D,j;this._expand(S.length+R);var Y=0;for(D=0;D<S.length;D++){j=(0|this.words[D+R])+Y;var X=(0|S.words[D])*E;Y=((j-=67108863&X)>>26)-(X/67108864|0),this.words[D+R]=67108863&j}for(;D<this.length-R;D++)Y=(j=(0|this.words[D+R])+Y)>>26,this.words[D+R]=67108863&j;if(0===Y)return this.strip();for(i(-1===Y),Y=0,D=0;D<this.length;D++)Y=(j=-(0|this.words[D])+Y)>>26,this.words[D]=67108863&j;return this.negative=1,this.strip()},r.prototype._wordDiv=function(S,E){var R,D=this.clone(),j=S,H=0|j.words[j.length-1];0!=(R=26-this._countBits(H))&&(j=j.ushln(R),D.iushln(R),H=0|j.words[j.length-1]);var Y,X=D.length-j.length;if("mod"!==E){(Y=new r(null)).length=X+1,Y.words=new Array(Y.length);for(var Z=0;Z<Y.length;Z++)Y.words[Z]=0}var W=D.clone()._ishlnsubmul(j,1,X);0===W.negative&&(D=W,Y&&(Y.words[X]=1));for(var re=X-1;re>=0;re--){var U=67108864*(0|D.words[j.length+re])+(0|D.words[j.length+re-1]);for(U=Math.min(U/H|0,67108863),D._ishlnsubmul(j,U,re);0!==D.negative;)U--,D.negative=0,D._ishlnsubmul(j,1,re),D.isZero()||(D.negative^=1);Y&&(Y.words[re]=U)}return Y&&Y.strip(),D.strip(),"div"!==E&&0!==R&&D.iushrn(R),{div:Y||null,mod:D}},r.prototype.divmod=function(S,E,R){return i(!S.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===S.negative?(H=this.neg().divmod(S,E),"mod"!==E&&(D=H.div.neg()),"div"!==E&&(j=H.mod.neg(),R&&0!==j.negative&&j.iadd(S)),{div:D,mod:j}):0===this.negative&&0!==S.negative?(H=this.divmod(S.neg(),E),"mod"!==E&&(D=H.div.neg()),{div:D,mod:H.mod}):0!=(this.negative&S.negative)?(H=this.neg().divmod(S.neg(),E),"div"!==E&&(j=H.mod.neg(),R&&0!==j.negative&&j.isub(S)),{div:H.div,mod:j}):S.length>this.length||this.cmp(S)<0?{div:new r(0),mod:this}:1===S.length?"div"===E?{div:this.divn(S.words[0]),mod:null}:"mod"===E?{div:null,mod:new r(this.modn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new r(this.modn(S.words[0]))}:this._wordDiv(S,E);var D,j,H},r.prototype.div=function(S){return this.divmod(S,"div",!1).div},r.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},r.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},r.prototype.divRound=function(S){var E=this.divmod(S);if(E.mod.isZero())return E.div;var R=0!==E.div.negative?E.mod.isub(S):E.mod,D=S.ushrn(1),j=S.andln(1),H=R.cmp(D);return H<0||1===j&&0===H?E.div:0!==E.div.negative?E.div.isubn(1):E.div.iaddn(1)},r.prototype.modn=function(S){i(S<=67108863);for(var E=(1<<26)%S,R=0,D=this.length-1;D>=0;D--)R=(E*R+(0|this.words[D]))%S;return R},r.prototype.idivn=function(S){i(S<=67108863);for(var E=0,R=this.length-1;R>=0;R--){var D=(0|this.words[R])+67108864*E;this.words[R]=D/S|0,E=D%S}return this.strip()},r.prototype.divn=function(S){return this.clone().idivn(S)},r.prototype.egcd=function(S){i(0===S.negative),i(!S.isZero());var E=this,R=S.clone();E=0!==E.negative?E.umod(S):E.clone();for(var D=new r(1),j=new r(0),H=new r(0),Y=new r(1),X=0;E.isEven()&&R.isEven();)E.iushrn(1),R.iushrn(1),++X;for(var Z=R.clone(),W=E.clone();!E.isZero();){for(var re=0,U=1;0==(E.words[0]&U)&&re<26;++re,U<<=1);if(re>0)for(E.iushrn(re);re-- >0;)(D.isOdd()||j.isOdd())&&(D.iadd(Z),j.isub(W)),D.iushrn(1),j.iushrn(1);for(var B=0,V=1;0==(R.words[0]&V)&&B<26;++B,V<<=1);if(B>0)for(R.iushrn(B);B-- >0;)(H.isOdd()||Y.isOdd())&&(H.iadd(Z),Y.isub(W)),H.iushrn(1),Y.iushrn(1);E.cmp(R)>=0?(E.isub(R),D.isub(H),j.isub(Y)):(R.isub(E),H.isub(D),Y.isub(j))}return{a:H,b:Y,gcd:R.iushln(X)}},r.prototype._invmp=function(S){i(0===S.negative),i(!S.isZero());var E=this,R=S.clone();E=0!==E.negative?E.umod(S):E.clone();for(var D,j=new r(1),H=new r(0),Y=R.clone();E.cmpn(1)>0&&R.cmpn(1)>0;){for(var X=0,Z=1;0==(E.words[0]&Z)&&X<26;++X,Z<<=1);if(X>0)for(E.iushrn(X);X-- >0;)j.isOdd()&&j.iadd(Y),j.iushrn(1);for(var W=0,re=1;0==(R.words[0]&re)&&W<26;++W,re<<=1);if(W>0)for(R.iushrn(W);W-- >0;)H.isOdd()&&H.iadd(Y),H.iushrn(1);E.cmp(R)>=0?(E.isub(R),j.isub(H)):(R.isub(E),H.isub(j))}return(D=0===E.cmpn(1)?j:H).cmpn(0)<0&&D.iadd(S),D},r.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var E=this.clone(),R=S.clone();E.negative=0,R.negative=0;for(var D=0;E.isEven()&&R.isEven();D++)E.iushrn(1),R.iushrn(1);for(;;){for(;E.isEven();)E.iushrn(1);for(;R.isEven();)R.iushrn(1);var j=E.cmp(R);if(j<0){var H=E;E=R,R=H}else if(0===j||0===R.cmpn(1))break;E.isub(R)}return R.iushln(D)},r.prototype.invm=function(S){return this.egcd(S).a.umod(S)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(S){return this.words[0]&S},r.prototype.bincn=function(S){i("number"==typeof S);var E=S%26,R=(S-E)/26,D=1<<E;if(this.length<=R)return this._expand(R+1),this.words[R]|=D,this;for(var j=D,H=R;0!==j&&H<this.length;H++){var Y=0|this.words[H];j=(Y+=j)>>>26,this.words[H]=Y&=67108863}return 0!==j&&(this.words[H]=j,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(S){var E,R=S<0;if(0!==this.negative&&!R)return-1;if(0===this.negative&&R)return 1;if(this.strip(),this.length>1)E=1;else{R&&(S=-S),i(S<=67108863,"Number is too big");var D=0|this.words[0];E=D===S?0:D<S?-1:1}return 0!==this.negative?0|-E:E},r.prototype.cmp=function(S){if(0!==this.negative&&0===S.negative)return-1;if(0===this.negative&&0!==S.negative)return 1;var E=this.ucmp(S);return 0!==this.negative?0|-E:E},r.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var E=0,R=this.length-1;R>=0;R--){var D=0|this.words[R],j=0|S.words[R];if(D!==j){D<j?E=-1:D>j&&(E=1);break}}return E},r.prototype.gtn=function(S){return 1===this.cmpn(S)},r.prototype.gt=function(S){return 1===this.cmp(S)},r.prototype.gten=function(S){return this.cmpn(S)>=0},r.prototype.gte=function(S){return this.cmp(S)>=0},r.prototype.ltn=function(S){return-1===this.cmpn(S)},r.prototype.lt=function(S){return-1===this.cmp(S)},r.prototype.lten=function(S){return this.cmpn(S)<=0},r.prototype.lte=function(S){return this.cmp(S)<=0},r.prototype.eqn=function(S){return 0===this.cmpn(S)},r.prototype.eq=function(S){return 0===this.cmp(S)},r.red=function(S){return new I(S)},r.prototype.toRed=function(S){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),S.convertTo(this)._forceRed(S)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(S){return this.red=S,this},r.prototype.forceRed=function(S){return i(!this.red,"Already a number in reduction context"),this._forceRed(S)},r.prototype.redAdd=function(S){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},r.prototype.redIAdd=function(S){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},r.prototype.redSub=function(S){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},r.prototype.redISub=function(S){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},r.prototype.redShl=function(S){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},r.prototype.redMul=function(S){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},r.prototype.redIMul=function(S){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(S){return i(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var _={k256:null,p224:null,p192:null,p25519:null};function b(S,E){this.name=S,this.p=new r(E,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function T(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(S){if("string"==typeof S){var E=r._prime(S);this.m=E.p,this.prime=E}else i(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}function P(S){I.call(this,S),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var S=new r(null);return S.words=new Array(Math.ceil(this.n/13)),S},b.prototype.ireduce=function(S){var E,R=S;do{this.split(R,this.tmp),E=(R=(R=this.imulK(R)).iadd(this.tmp)).bitLength()}while(E>this.n);var D=E<this.n?-1:R.ucmp(this.p);return 0===D?(R.words[0]=0,R.length=1):D>0?R.isub(this.p):void 0!==R.strip?R.strip():R._strip(),R},b.prototype.split=function(S,E){S.iushrn(this.n,0,E)},b.prototype.imulK=function(S){return S.imul(this.k)},l(w,b),w.prototype.split=function(S,E){for(var R=Math.min(S.length,9),D=0;D<R;D++)E.words[D]=S.words[D];if(E.length=R,S.length<=9)return S.words[0]=0,void(S.length=1);var j=S.words[9];for(E.words[E.length++]=4194303&j,D=10;D<S.length;D++){var H=0|S.words[D];S.words[D-10]=(4194303&H)<<4|j>>>22,j=H}S.words[D-10]=j>>>=22,S.length-=0===j&&S.length>10?10:9},w.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var E=0,R=0;R<S.length;R++){var D=0|S.words[R];S.words[R]=67108863&(E+=977*D),E=64*D+(E/67108864|0)}return 0===S.words[S.length-1]&&(S.length--,0===S.words[S.length-1]&&S.length--),S},l(T,b),l(C,b),l(M,b),M.prototype.imulK=function(S){for(var E=0,R=0;R<S.length;R++){var D=19*(0|S.words[R])+E,j=67108863&D;D>>>=26,S.words[R]=j,E=D}return 0!==E&&(S.words[S.length++]=E),S},r._prime=function(S){if(_[S])return _[S];var E;if("k256"===S)E=new w;else if("p224"===S)E=new T;else if("p192"===S)E=new C;else{if("p25519"!==S)throw new Error("Unknown prime "+S);E=new M}return _[S]=E,E},I.prototype._verify1=function(S){i(0===S.negative,"red works only with positives"),i(S.red,"red works only with red numbers")},I.prototype._verify2=function(S,E){i(0==(S.negative|E.negative),"red works only with positives"),i(S.red&&S.red===E.red,"red works only with red numbers")},I.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):S.umod(this.m)._forceRed(this)},I.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},I.prototype.add=function(S,E){this._verify2(S,E);var R=S.add(E);return R.cmp(this.m)>=0&&R.isub(this.m),R._forceRed(this)},I.prototype.iadd=function(S,E){this._verify2(S,E);var R=S.iadd(E);return R.cmp(this.m)>=0&&R.isub(this.m),R},I.prototype.sub=function(S,E){this._verify2(S,E);var R=S.sub(E);return R.cmpn(0)<0&&R.iadd(this.m),R._forceRed(this)},I.prototype.isub=function(S,E){this._verify2(S,E);var R=S.isub(E);return R.cmpn(0)<0&&R.iadd(this.m),R},I.prototype.shl=function(S,E){return this._verify1(S),this.imod(S.ushln(E))},I.prototype.imul=function(S,E){return this._verify2(S,E),this.imod(S.imul(E))},I.prototype.mul=function(S,E){return this._verify2(S,E),this.imod(S.mul(E))},I.prototype.isqr=function(S){return this.imul(S,S.clone())},I.prototype.sqr=function(S){return this.mul(S,S)},I.prototype.sqrt=function(S){if(S.isZero())return S.clone();var E=this.m.andln(3);if(i(E%2==1),3===E){var R=this.m.add(new r(1)).iushrn(2);return this.pow(S,R)}for(var D=this.m.subn(1),j=0;!D.isZero()&&0===D.andln(1);)j++,D.iushrn(1);i(!D.isZero());var H=new r(1).toRed(this),Y=H.redNeg(),X=this.m.subn(1).iushrn(1),Z=this.m.bitLength();for(Z=new r(2*Z*Z).toRed(this);0!==this.pow(Z,X).cmp(Y);)Z.redIAdd(Y);for(var W=this.pow(Z,D),re=this.pow(S,D.addn(1).iushrn(1)),U=this.pow(S,D),B=j;0!==U.cmp(H);){for(var V=U,ee=0;0!==V.cmp(H);ee++)V=V.redSqr();i(ee<B);var N=this.pow(W,new r(1).iushln(B-ee-1));re=re.redMul(N),W=N.redSqr(),U=U.redMul(W),B=ee}return re},I.prototype.invm=function(S){var E=S._invmp(this.m);return 0!==E.negative?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},I.prototype.pow=function(S,E){if(E.isZero())return new r(1).toRed(this);if(0===E.cmpn(1))return S.clone();var R=new Array(16);R[0]=new r(1).toRed(this),R[1]=S;for(var D=2;D<R.length;D++)R[D]=this.mul(R[D-1],S);var j=R[0],H=0,Y=0,X=E.bitLength()%26;for(0===X&&(X=26),D=E.length-1;D>=0;D--){for(var Z=E.words[D],W=X-1;W>=0;W--){var re=Z>>W&1;j!==R[0]&&(j=this.sqr(j)),0!==re||0!==H?(H<<=1,H|=re,(4==++Y||0===D&&0===W)&&(j=this.mul(j,R[H]),Y=0,H=0)):Y=0}X=26}return j},I.prototype.convertTo=function(S){var E=S.umod(this.m);return E===S?E.clone():E},I.prototype.convertFrom=function(S){var E=S.clone();return E.red=null,E},r.mont=function(S){return new P(S)},l(P,I),P.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},P.prototype.convertFrom=function(S){var E=this.imod(S.mul(this.rinv));return E.red=null,E},P.prototype.imul=function(S,E){if(S.isZero()||E.isZero())return S.words[0]=0,S.length=1,S;var R=S.imul(E),D=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=R.isub(D).iushrn(this.shift),H=j;return j.cmp(this.m)>=0?H=j.isub(this.m):j.cmpn(0)<0&&(H=j.iadd(this.m)),H._forceRed(this)},P.prototype.mul=function(S,E){if(S.isZero()||E.isZero())return new r(0)._forceRed(this);var R=S.mul(E),D=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=R.isub(D).iushrn(this.shift),H=j;return j.cmp(this.m)>=0?H=j.isub(this.m):j.cmpn(0)<0&&(H=j.iadd(this.m)),H._forceRed(this)},P.prototype.invm=function(S){return this.imod(S._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===k||k,this)},{buffer:2}],34:[function(g,k,x){"use strict";k.exports=function(e){var n,i,l,r=e.length,d=0;for(n=0;n<r;++n)d+=e[n].length;var f=new Array(d),t=0;for(n=0;n<r;++n){var h=e[n],s=h.length;for(i=0;i<s;++i){var o=f[t++]=new Array(s-1),p=0;for(l=0;l<s;++l)l!==i&&(o[p++]=h[l]);if(1&i){var c=o[1];o[1]=o[0],o[0]=c}}}return f}},{}],35:[function(g,k,x){"use strict";k.exports=function(o,p,c){switch(arguments.length){case 1:return h(o);case 2:return"function"==typeof p?f(o,o,p,!0):s(o,p);case 3:return f(o,p,c,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,n=g("typedarray-pool"),i=g("./lib/sweep"),l=g("./lib/intersect");function r(o,p){for(var c=0;c<o;++c)if(!(p[c]<=p[c+o]))return!0;return!1}function d(o,p,c,a){for(var y=0,u=0,_=0,b=o.length;_<b;++_){var w=o[_];if(!r(p,w)){for(var T=0;T<2*p;++T)c[y++]=w[T];a[u++]=_}}return u}function f(o,p,c,a){var y=o.length,u=p.length;if(!(y<=0||u<=0)){var _=o[0].length>>>1;if(!(_<=0)){var b,w=n.mallocDouble(2*_*y),T=n.mallocInt32(y);if((y=d(o,_,w,T))>0){if(1===_&&a)i.init(y),b=i.sweepComplete(_,c,0,y,w,T,0,y,w,T);else{var C=n.mallocDouble(2*_*u),M=n.mallocInt32(u);(u=d(p,_,C,M))>0&&(i.init(y+u),b=1===_?i.sweepBipartite(_,c,0,y,w,T,0,u,C,M):l(_,c,a,y,w,T,u,C,M),n.free(C),n.free(M))}n.free(w),n.free(T)}return b}}}function t(o,p){e.push([o,p])}function h(o){return e=[],f(o,o,t,!0),e}function s(o,p){return e=[],f(o,p,t,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(g,k,x){"use strict";function e(n){return n?function(i,l,r,d,f,t,h,s,o,p,c){return f-d>o-s?function(a,y,u,_,b,w,T,C,M,I,P){for(var S=2*a,E=_,R=S*_;E<b;++E,R+=S){var D=w[y+R],j=w[y+R+a],H=T[E];e:for(var Y=C,X=S*C;Y<M;++Y,X+=S){var re=P[Y];if(!(I[y+X+a]<D||j<I[y+X])){for(var U=y+1;U<a;++U)if(w[U+a+R]<I[U+X]||I[U+a+X]<w[U+R])continue e;var K=u(H,re);if(void 0!==K)return K}}}}(i,l,r,d,f,t,h,s,o,p,c):function(a,y,u,_,b,w,T,C,M,I,P){for(var S=2*a,E=C,R=S*C;E<M;++E,R+=S){var D=I[y+R],j=I[y+R+a],H=P[E];e:for(var Y=_,X=S*_;Y<b;++Y,X+=S){var re=T[Y];if(!(j<w[y+X]||w[y+X+a]<D)){for(var U=y+1;U<a;++U)if(w[U+a+X]<I[U+R]||I[U+a+R]<w[U+X])continue e;var K=u(re,H);if(void 0!==K)return K}}}}(i,l,r,d,f,t,h,s,o,p,c)}:function(i,l,r,d,f,t,h,s,o,p,c,a){return t-f>p-o?d?function(y,u,_,b,w,T,C,M,I,P,S){for(var E=2*y,R=b,D=E*b;R<w;++R,D+=E){var j=T[u+D],H=T[u+D+y],Y=C[R];e:for(var X=M,Z=E*M;X<I;++X,Z+=E){var W=P[u+Z],re=S[X];if(!(W<=j||H<W)){for(var U=u+1;U<y;++U)if(T[U+y+D]<P[U+Z]||P[U+y+Z]<T[U+D])continue e;var K=_(re,Y);if(void 0!==K)return K}}}}(i,l,r,f,t,h,s,o,p,c,a):function(y,u,_,b,w,T,C,M,I,P,S){for(var E=2*y,R=b,D=E*b;R<w;++R,D+=E){var j=T[u+D],H=T[u+D+y],Y=C[R];e:for(var X=M,Z=E*M;X<I;++X,Z+=E){var W=P[u+Z],re=S[X];if(!(W<j||H<W)){for(var U=u+1;U<y;++U)if(T[U+y+D]<P[U+Z]||P[U+y+Z]<T[U+D])continue e;var K=_(Y,re);if(void 0!==K)return K}}}}(i,l,r,f,t,h,s,o,p,c,a):d?function(y,u,_,b,w,T,C,M,I,P,S){for(var E=2*y,R=M,D=E*M;R<I;++R,D+=E){var j=P[u+D],H=S[R];e:for(var Y=b,X=E*b;Y<w;++Y,X+=E){var re=C[Y];if(!(j<=T[u+X]||T[u+X+y]<j)){for(var U=u+1;U<y;++U)if(T[U+y+X]<P[U+D]||P[U+y+D]<T[U+X])continue e;var K=_(H,re);if(void 0!==K)return K}}}}(i,l,r,f,t,h,s,o,p,c,a):function(y,u,_,b,w,T,C,M,I,P,S){for(var E=2*y,R=M,D=E*M;R<I;++R,D+=E){var j=P[u+D],H=S[R];e:for(var Y=b,X=E*b;Y<w;++Y,X+=E){var re=C[Y];if(!(j<T[u+X]||T[u+X+y]<j)){for(var U=u+1;U<y;++U)if(T[U+y+X]<P[U+D]||P[U+y+D]<T[U+X])continue e;var K=_(re,H);if(void 0!==K)return K}}}}(i,l,r,f,t,h,s,o,p,c,a)}}x.partial=e(!1),x.full=e(!0)},{}],37:[function(g,k,x){"use strict";k.exports=function(T,C,M,I,P,S,E,R,D){!function(Te,Ee){var Ae=8*n.log2(Ee+1)*(Te+1)|0,De=n.nextPow2(6*Ae);y.length<De&&(e.free(y),y=e.mallocInt32(De));var Ie=n.nextPow2(2*Ae);u.length<Ie&&(e.free(u),u=e.mallocDouble(Ie))}(T,I+E);var j,H=0,Y=2*T;for(_(H++,0,0,I,0,E,M?16:0,-1/0,1/0),M||_(H++,0,0,E,0,I,1,-1/0,1/0);H>0;){var X=6*(H-=1),Z=y[X],W=y[X+1],re=y[X+2],U=y[X+3],B=y[X+4],V=y[X+5],ee=2*H,N=u[ee],K=u[ee+1],J=1&V,te=!!(16&V),ae=P,le=S,se=R,ve=D;if(J&&(ae=R,le=D,se=P,ve=S),!(2&V&&(re=o(T,Z,W,re,ae,le,K),W>=re)||4&V&&(W=p(T,Z,W,re,ae,le,N))>=re)){var ue=re-W,ye=B-U;if(te){if(T*ue*(ue+ye)<1<<22){if(void 0!==(j=d.scanComplete(T,Z,C,W,re,ae,le,U,B,se,ve)))return j;continue}}else{if(T*Math.min(ue,ye)<128){if(void 0!==(j=l(T,Z,C,J,W,re,ae,le,U,B,se,ve)))return j;continue}if(T*ue*ye<1<<22){if(void 0!==(j=d.scanBipartite(T,Z,C,J,W,re,ae,le,U,B,se,ve)))return j;continue}}var Me=h(T,Z,W,re,ae,le,N,K);if(W<Me)if(T*(Me-W)<128){if(void 0!==(j=r(T,Z+1,C,W,Me,ae,le,U,B,se,ve)))return j}else if(Z===T-2){if(void 0!==(j=J?d.sweepBipartite(T,C,U,B,se,ve,W,Me,ae,le):d.sweepBipartite(T,C,W,Me,ae,le,U,B,se,ve)))return j}else _(H++,Z+1,W,Me,U,B,J,-1/0,1/0),_(H++,Z+1,U,B,W,Me,1^J,-1/0,1/0);if(Me<re){var pe=f(T,Z,U,B,se,ve),ge=se[Y*pe+Z],we=s(T,Z,pe,B,se,ve,ge);if(we<B&&_(H++,Z,Me,re,we,B,(4|J)+(te?16:0),ge,K),U<pe&&_(H++,Z,Me,re,U,pe,(2|J)+(te?16:0),N,ge),pe+1===we){if(void 0!==(j=te?w(T,Z,C,Me,re,ae,le,pe,se,ve[pe]):b(T,Z,C,J,Me,re,ae,le,pe,se,ve[pe])))return j}else if(pe<we){var oe;if(te){if(Me<(oe=c(T,Z,Me,re,ae,le,ge))){var de=s(T,Z,Me,oe,ae,le,ge);if(Z===T-2){if(Me<de&&void 0!==(j=d.sweepComplete(T,C,Me,de,ae,le,pe,we,se,ve))||de<oe&&void 0!==(j=d.sweepBipartite(T,C,de,oe,ae,le,pe,we,se,ve)))return j}else Me<de&&_(H++,Z+1,Me,de,pe,we,16,-1/0,1/0),de<oe&&(_(H++,Z+1,de,oe,pe,we,0,-1/0,1/0),_(H++,Z+1,pe,we,de,oe,1,-1/0,1/0))}}else Me<(oe=J?a(T,Z,Me,re,ae,le,ge):c(T,Z,Me,re,ae,le,ge))&&(Z===T-2?j=J?d.sweepBipartite(T,C,pe,we,se,ve,Me,oe,ae,le):d.sweepBipartite(T,C,Me,oe,ae,le,pe,we,se,ve):(_(H++,Z+1,Me,oe,pe,we,J,-1/0,1/0),_(H++,Z+1,pe,we,Me,oe,1^J,-1/0,1/0)))}}}}};var e=g("typedarray-pool"),n=g("bit-twiddle"),i=g("./brute"),l=i.partial,r=i.full,d=g("./sweep"),f=g("./median"),t=g("./partition"),h=t("!(lo>=p0)&&!(p1>=hi)"),s=t("lo===p0"),o=t("lo<p0"),p=t("hi<=p0"),c=t("lo<=p0&&p0<=hi"),a=t("lo<p0&&p0<=hi"),y=e.mallocInt32(1024),u=e.mallocDouble(1024);function _(T,C,M,I,P,S,E,R,D){var j=6*T;y[j]=C,y[j+1]=M,y[j+2]=I,y[j+3]=P,y[j+4]=S,y[j+5]=E;var H=2*T;u[H]=R,u[H+1]=D}function b(T,C,M,I,P,S,E,R,D,j,H){var Y=2*T,X=D*Y,Z=j[X+C];e:for(var W=P,re=P*Y;W<S;++W,re+=Y){var U=E[re+C],B=E[re+C+T];if(!(Z<U||B<Z||I&&Z===U)){for(var V,ee=R[W],N=C+1;N<T;++N)if(U=E[re+N],(B=E[re+N+T])<j[X+N]||j[X+N+T]<U)continue e;if(void 0!==(V=I?M(H,ee):M(ee,H)))return V}}}function w(T,C,M,I,P,S,E,R,D,j){var H=2*T,Y=R*H,X=D[Y+C];e:for(var Z=I,W=I*H;Z<P;++Z,W+=H){var re=E[Z];if(re!==j){var U=S[W+C],B=S[W+C+T];if(!(X<U||B<X)){for(var V=C+1;V<T;++V)if(U=S[W+V],(B=S[W+V+T])<D[Y+V]||D[Y+V+T]<U)continue e;var K=M(re,j);if(void 0!==K)return K}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(g,k,x){"use strict";k.exports=function(i,l,r,d,f,t){if(d<=r+1)return r;for(var h=r,s=d,o=d+r>>>1,p=2*i,c=o,a=f[p*o+l];h<s;){if(s-h<8){n(i,l,h,s,f,t),a=f[p*o+l];break}var y=s-h,u=Math.random()*y+h|0,_=f[p*u+l],b=Math.random()*y+h|0,w=f[p*b+l],T=Math.random()*y+h|0,C=f[p*T+l];_<=w?C>=w?(c=b,a=w):_>=C?(c=u,a=_):(c=T,a=C):w>=C?(c=b,a=w):C>=_?(c=u,a=_):(c=T,a=C);for(var M=p*(s-1),I=p*c,P=0;P<p;++P,++M,++I){var S=f[M];f[M]=f[I],f[I]=S}var E=t[s-1];for(t[s-1]=t[c],t[c]=E,M=p*(s-1),I=p*(c=e(i,l,h,s-1,f,t,a)),P=0;P<p;++P,++M,++I)S=f[M],f[M]=f[I],f[I]=S;if(E=t[s-1],t[s-1]=t[c],t[c]=E,o<c){for(s=c-1;h<s&&f[p*(s-1)+l]===a;)s-=1;s+=1}else{if(!(c<o))break;for(h=c+1;h<s&&f[p*h+l]===a;)h+=1}}return e(i,l,r,o,f,t,f[p*o+l])};var e=g("./partition")("lo<p0");function n(i,l,r,d,f,t){for(var h=2*i,s=h*(r+1)+l,o=r+1;o<d;++o,s+=h)for(var p=f[s],c=o,a=h*(o-1);c>r&&f[a+l]>p;--c,a-=h){for(var y=a,u=a+h,_=0;_<h;++_,++y,++u){var b=f[y];f[y]=f[u],f[u]=b}var w=t[c];t[c]=t[c-1],t[c-1]=w}}},{"./partition":39}],39:[function(g,k,x){"use strict";k.exports=function(n){return e[n]};var e={"lo===p0":function(n,i,l,r,d,f,t){for(var h=2*n,s=h*l,o=s,p=l,c=i,a=l;r>a;++a,s+=h)if(d[s+c]===t)if(p===a)p+=1,o+=h;else{for(var y=0;h>y;++y){var u=d[s+y];d[s+y]=d[o],d[o++]=u}var _=f[a];f[a]=f[p],f[p++]=_}return p},"lo<p0":function(n,i,l,r,d,f,t){for(var h=2*n,s=h*l,o=s,p=l,c=i,a=l;r>a;++a,s+=h)if(d[s+c]<t)if(p===a)p+=1,o+=h;else{for(var y=0;h>y;++y){var u=d[s+y];d[s+y]=d[o],d[o++]=u}var _=f[a];f[a]=f[p],f[p++]=_}return p},"lo<=p0":function(n,i,l,r,d,f,t){for(var h=2*n,s=h*l,o=s,p=l,c=n+i,a=l;r>a;++a,s+=h)if(d[s+c]<=t)if(p===a)p+=1,o+=h;else{for(var y=0;h>y;++y){var u=d[s+y];d[s+y]=d[o],d[o++]=u}var _=f[a];f[a]=f[p],f[p++]=_}return p},"hi<=p0":function(n,i,l,r,d,f,t){for(var h=2*n,s=h*l,o=s,p=l,c=n+i,a=l;r>a;++a,s+=h)if(d[s+c]<=t)if(p===a)p+=1,o+=h;else{for(var y=0;h>y;++y){var u=d[s+y];d[s+y]=d[o],d[o++]=u}var _=f[a];f[a]=f[p],f[p++]=_}return p},"lo<p0&&p0<=hi":function(n,i,l,r,d,f,t){for(var h=2*n,s=h*l,o=s,p=l,c=i,a=n+i,y=l;r>y;++y,s+=h)if(d[s+c]<t&&t<=d[s+a])if(p===y)p+=1,o+=h;else{for(var b=0;h>b;++b){var w=d[s+b];d[s+b]=d[o],d[o++]=w}var T=f[y];f[y]=f[p],f[p++]=T}return p},"lo<=p0&&p0<=hi":function(n,i,l,r,d,f,t){for(var h=2*n,s=h*l,o=s,p=l,c=i,a=n+i,y=l;r>y;++y,s+=h)if(d[s+c]<=t&&t<=d[s+a])if(p===y)p+=1,o+=h;else{for(var b=0;h>b;++b){var w=d[s+b];d[s+b]=d[o],d[o++]=w}var T=f[y];f[y]=f[p],f[p++]=T}return p},"!(lo>=p0)&&!(p1>=hi)":function(n,i,l,r,d,f,t,h){for(var s=2*n,o=s*l,p=o,c=l,a=i,y=n+i,u=l;r>u;++u,o+=s)if(!(d[o+a]>=t||h>=d[o+y]))if(c===u)c+=1,p+=s;else{for(var w=0;s>w;++w){var T=d[o+w];d[o+w]=d[p],d[p++]=T}var C=f[u];f[u]=f[c],f[c++]=C}return c}}},{}],40:[function(g,k,x){"use strict";function e(t,h,s){for(var o=2*(t+1),p=t+1;p<=h;++p){for(var c=s[o++],a=s[o++],y=p,u=o-2;y-- >t;){var _=s[u-2],b=s[u-1];if(_<c||_===c&&b<a)break;s[u]=_,s[u+1]=b,u-=2}s[u]=c,s[u+1]=a}}function n(t,h,s){var o=s[t*=2],p=s[t+1];s[t]=s[h*=2],s[t+1]=s[h+1],s[h]=o,s[h+1]=p}function i(t,h,s){s[t*=2]=s[h*=2],s[t+1]=s[h+1]}function l(t,h,s,o){s*=2;var p=o[t*=2],c=o[t+1];o[t]=o[h*=2],o[t+1]=o[h+1],o[h]=o[s],o[h+1]=o[s+1],o[s]=p,o[s+1]=c}function r(t,h,s,o,p){p[t*=2]=p[h*=2],p[h]=s,p[t+1]=p[h+1],p[h+1]=o}function d(t,h,s){var o=s[t*=2],p=s[h*=2];return!(o<p)&&(o!==p||s[t+1]>s[h+1])}function f(t,h,s,o){var p=o[t*=2];return p<h||p===h&&o[t+1]<s}k.exports=function(t,h){h<=128?e(0,h-1,t):function s(o,p,c){var a=(p-o+1)/6|0,y=o+a,u=p-a,_=o+p>>1,b=_-a,w=_+a,T=y,C=b,M=_,I=w,P=u,S=o+1,E=p-1,R=0;d(T,C,c)&&(R=T,T=C,C=R),d(I,P,c)&&(R=I,I=P,P=R),d(T,M,c)&&(R=T,T=M,M=R),d(C,M,c)&&(R=C,C=M,M=R),d(T,I,c)&&(R=T,T=I,I=R),d(M,I,c)&&(R=M,M=I,I=R),d(C,P,c)&&(R=C,C=P,P=R),d(C,M,c)&&(R=C,C=M,M=R),d(I,P,c)&&(R=I,I=P,P=R);for(var D=c[2*C],j=c[2*C+1],H=c[2*I],Y=c[2*I+1],X=2*T,Z=2*M,W=2*P,re=2*y,U=2*_,B=2*u,V=0;V<2;++V){var N=c[Z+V],K=c[W+V];c[re+V]=c[X+V],c[U+V]=N,c[B+V]=K}i(b,o,c),i(w,p,c);for(var J=S;J<=E;++J)if(f(J,D,j,c))J!==S&&n(J,S,c),++S;else if(!f(J,H,Y,c))for(;;){if(f(E,H,Y,c)){f(E,D,j,c)?(l(J,S,E,c),++S,--E):(n(J,E,c),--E);break}if(--E<J)break}r(o,S-1,D,j,c),r(p,E+1,H,Y,c),S-2-o<=32?e(o,S-2,c):s(o,S-2,c),p-(E+2)<=32?e(E+2,p,c):s(E+2,p,c),E-S<=32?e(S,E,c):s(S,E,c)}(0,h-1,t)}},{}],41:[function(g,k,x){"use strict";k.exports={init:function(c){var a=n.nextPow2(c);l.length<a&&(e.free(l),l=e.mallocInt32(a)),r.length<a&&(e.free(r),r=e.mallocInt32(a)),d.length<a&&(e.free(d),d=e.mallocInt32(a)),f.length<a&&(e.free(f),f=e.mallocInt32(a)),t.length<a&&(e.free(t),t=e.mallocInt32(a)),h.length<a&&(e.free(h),h=e.mallocInt32(a));var y=8*a;s.length<y&&(e.free(s),s=e.mallocDouble(y))},sweepBipartite:function(c,a,y,u,_,b,w,T,C,M){for(var I=0,P=2*c,S=c-1,E=P-1,R=y;R<u;++R){var D=b[R],j=P*R;s[I++]=_[j+S],s[I++]=-(D+1),s[I++]=_[j+E],s[I++]=D}for(R=w;R<T;++R){D=M[R]+(1<<28);var H=P*R;s[I++]=C[H+S],s[I++]=-D,s[I++]=C[H+E],s[I++]=D}var Y=I>>>1;i(s,Y);var X=0,Z=0;for(R=0;R<Y;++R){var W=0|s[2*R+1];if(W>=1<<28)o(d,f,Z--,W=W-(1<<28)|0);else if(W>=0)o(l,r,X--,W);else if(W<=-(1<<28)){W=-W-(1<<28)|0;for(var re=0;re<X;++re)if(void 0!==(U=a(l[re],W)))return U;p(d,f,Z++,W)}else{for(W=-W-1|0,re=0;re<Z;++re){var U;if(void 0!==(U=a(W,d[re])))return U}p(l,r,X++,W)}}},sweepComplete:function(c,a,y,u,_,b,w,T,C,M){for(var I=0,P=2*c,S=c-1,E=P-1,R=y;R<u;++R){var D=b[R]+1<<1,j=P*R;s[I++]=_[j+S],s[I++]=-D,s[I++]=_[j+E],s[I++]=D}for(R=w;R<T;++R){D=M[R]+1<<1;var H=P*R;s[I++]=C[H+S],s[I++]=1|-D,s[I++]=C[H+E],s[I++]=1|D}var Y=I>>>1;i(s,Y);var X=0,Z=0,W=0;for(R=0;R<Y;++R){var re=0|s[2*R+1],U=1&re;if(R<Y-1&&re>>1==s[2*R+3]>>1&&(U=2,R+=1),re<0){for(var B=-(re>>1)-1,V=0;V<W;++V)if(void 0!==(ee=a(t[V],B)))return ee;if(0!==U)for(V=0;V<X;++V)if(void 0!==(ee=a(l[V],B)))return ee;if(1!==U)for(V=0;V<Z;++V){var ee;if(void 0!==(ee=a(d[V],B)))return ee}0===U?p(l,r,X++,B):1===U?p(d,f,Z++,B):2===U&&p(t,h,W++,B)}else B=(re>>1)-1,0===U?o(l,r,X--,B):1===U?o(d,f,Z--,B):2===U&&o(t,h,W--,B)}},scanBipartite:function(c,a,y,u,_,b,w,T,C,M,I,P){var S=0,E=2*c,R=a,D=a+c,j=1,H=1;u?H=1<<28:j=1<<28;for(var Y=_;Y<b;++Y){var X=Y+j,Z=E*Y;s[S++]=w[Z+R],s[S++]=-X,s[S++]=w[Z+D],s[S++]=X}for(Y=C;Y<M;++Y)X=Y+H,s[S++]=I[E*Y+R],s[S++]=-X;var re=S>>>1;i(s,re);var U=0;for(Y=0;Y<re;++Y){var B=0|s[2*Y+1];if(B<0){var V=!1;if((X=-B)>=1<<28?(V=!u,X-=1<<28):(V=!!u,X-=1),V)p(l,r,U++,X);else{var ee=P[X],N=E*X,K=I[N+a+1],J=I[N+a+1+c];e:for(var te=0;te<U;++te){var ae=l[te],le=E*ae;if(!(J<w[le+a+1]||w[le+a+1+c]<K)){for(var se=a+2;se<c;++se)if(I[N+se+c]<w[le+se]||w[le+se+c]<I[N+se])continue e;var ve,ue=T[ae];if(void 0!==(ve=u?y(ee,ue):y(ue,ee)))return ve}}}}else o(l,r,U--,B-j)}},scanComplete:function(c,a,y,u,_,b,w,T,C,M,I){for(var P=0,S=2*c,E=a,R=a+c,D=u;D<_;++D){var j=D+268435456,H=S*D;s[P++]=b[H+E],s[P++]=-j,s[P++]=b[H+R],s[P++]=j}for(D=T;D<C;++D)j=D+1,s[P++]=M[S*D+E],s[P++]=-j;var X=P>>>1;i(s,X);var Z=0;for(D=0;D<X;++D){var W=0|s[2*D+1];if(W<0)if((j=-W)>=1<<28)l[Z++]=j-(1<<28);else{var re=I[j-=1],U=S*j,B=M[U+a+1],V=M[U+a+1+c];e:for(var ee=0;ee<Z;++ee){var N=l[ee],K=w[N];if(K===re)break;var J=S*N;if(!(V<b[J+a+1]||b[J+a+1+c]<B)){for(var te=a+2;te<c;++te)if(M[U+te+c]<b[J+te]||b[J+te+c]<M[U+te])continue e;var ae=y(K,re);if(void 0!==ae)return ae}}}else{for(j=W-(1<<28),ee=Z-1;ee>=0;--ee)if(l[ee]===j){for(te=ee+1;te<Z;++te)l[te-1]=l[te];break}--Z}}}};var e=g("typedarray-pool"),n=g("bit-twiddle"),i=g("./sort"),l=e.mallocInt32(1024),r=e.mallocInt32(1024),d=e.mallocInt32(1024),f=e.mallocInt32(1024),t=e.mallocInt32(1024),h=e.mallocInt32(1024),s=e.mallocDouble(8192);function o(c,a,y,u){var _=a[u],b=c[y-1];c[_]=b,a[b]=_}function p(c,a,y,u){c[y]=u,a[u]=y}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(g,k,x){"use strict";var e=g("./lib/monotone"),n=g("./lib/triangulation"),i=g("./lib/delaunay"),l=g("./lib/filter");function r(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function d(t,h){return t[0]-h[0]||t[1]-h[1]}function f(t,h,s){return h in t?t[h]:s}k.exports=function(t,h,s){Array.isArray(h)?(s=s||{},h=h||[]):(s=h||{},h=[]);var o=!!f(s,"delaunay",!0),p=!!f(s,"interior",!0),c=!!f(s,"exterior",!0),a=!!f(s,"infinity",!1);if(!p&&!c||0===t.length)return[];var y=e(t,h);if(o||p!==c||a){for(var u=n(t.length,h.map(r).sort(d)),_=0;_<y.length;++_){var b=y[_];u.addTriangle(b[0],b[1],b[2])}return o&&i(t,u),c?p?a?l(u,0,a):u.cells():l(u,1,a):l(u,-1)}return y}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(g,k,x){"use strict";var e=g("robust-in-sphere")[4];function n(i,l,r,d,f,t){var h=l.opposite(d,f);if(!(h<0)){if(f<d){var s=d;d=f,f=s,s=t,t=h,h=s}l.isConstraint(d,f)||e(i[d],i[f],i[t],i[h])<0&&r.push(d,f)}}g("binary-search-bounds"),k.exports=function(i,l){for(var r=[],d=i.length,f=l.stars,t=0;t<d;++t)for(var h=f[t],s=1;s<h.length;s+=2)if(!((a=h[s])<t||l.isConstraint(t,a))){for(var o=h[s-1],p=-1,c=1;c<h.length;c+=2)if(h[c-1]===a){p=h[c];break}p<0||e(i[t],i[a],i[o],i[p])<0&&r.push(t,a)}for(;r.length>0;){for(var a=r.pop(),y=(o=-1,p=-1,h=f[t=r.pop()],1);y<h.length;y+=2){var u=h[y-1],_=h[y];u===a?p=_:_===a&&(o=u)}o<0||p<0||e(i[t],i[a],i[o],i[p])>=0||(l.flip(t,a),n(i,l,r,o,t,p),n(i,l,r,t,p,o),n(i,l,r,p,a,o),n(i,l,r,a,o,p))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(g,k,x){"use strict";var e,n=g("binary-search-bounds");function i(r,d,f,t,h,s,o){this.cells=r,this.neighbor=d,this.flags=t,this.constraint=f,this.active=h,this.next=s,this.boundary=o}function l(r,d){return r[0]-d[0]||r[1]-d[1]||r[2]-d[2]}k.exports=function(r,d,f){var t=function(C,M){for(var I=C.cells(),P=I.length,S=0;S<P;++S){var E=(U=I[S])[0],R=U[1],D=U[2];R<D?R<E&&(U[0]=R,U[1]=D,U[2]=E):D<E&&(U[0]=D,U[1]=E,U[2]=R)}I.sort(l);var j=new Array(P);for(S=0;S<j.length;++S)j[S]=0;var H=[],Y=[],X=new Array(3*P),Z=new Array(3*P),W=null;M&&(W=[]);var re=new i(I,X,Z,j,H,Y,W);for(S=0;S<P;++S)for(var U=I[S],B=0;B<3;++B){var V=X[3*S+B]=re.locate(R=U[(B+1)%3],E=U[B],C.opposite(R,E)),ee=Z[3*S+B]=C.isConstraint(E,R);V<0&&(ee?Y.push(S):(H.push(S),j[S]=1),M&&W.push([R,E,-1]))}return re}(r,f);if(0===d)return f?t.cells.concat(t.boundary):t.cells;for(var h=1,s=t.active,o=t.next,p=t.flags,c=t.cells,a=t.constraint,y=t.neighbor;s.length>0||o.length>0;){for(;s.length>0;){var u=s.pop();if(p[u]!==-h){p[u]=h;for(var _=0;_<3;++_){var b=y[3*u+_];b>=0&&0===p[b]&&(a[3*u+_]?o.push(b):(s.push(b),p[b]=h))}}}var w=o;o=s,s=w,o.length=0,h=-h}var T=function(C,M,I){for(var P=0,S=0;S<C.length;++S)M[S]===I&&(C[P++]=C[S]);return C.length=P,C}(c,p,d);return f?T.concat(t.boundary):T},i.prototype.locate=(e=[0,0,0],function(r,d,f){var t=r,h=d,s=f;return d<f?d<r&&(t=d,h=f,s=r):f<r&&(t=f,h=r,s=d),t<0?-1:(e[0]=t,e[1]=h,e[2]=s,n.eq(this.cells,e,l))})},{"binary-search-bounds":31}],45:[function(g,k,x){"use strict";var e=g("binary-search-bounds"),n=g("robust-orientation")[3];function i(o,p,c,a,y){this.a=o,this.b=p,this.idx=c,this.lowerIds=a,this.upperIds=y}function l(o,p,c,a){this.a=o,this.b=p,this.type=c,this.idx=a}function r(o,p){var c=o.a[0]-p.a[0]||o.a[1]-p.a[1]||o.type-p.type;return c||(0!==o.type&&(c=n(o.a,o.b,p.b))?c:o.idx-p.idx)}function d(o,p){return n(o.a,o.b,p)}function f(o,p,c,a,y){for(var u=e.lt(p,a,d),_=e.gt(p,a,d),b=u;b<_;++b){for(var w=p[b],T=w.lowerIds,C=T.length;C>1&&n(c[T[C-2]],c[T[C-1]],a)>0;)o.push([T[C-1],T[C-2],y]),C-=1;T.length=C,T.push(y);var M=w.upperIds;for(C=M.length;C>1&&n(c[M[C-2]],c[M[C-1]],a)<0;)o.push([M[C-2],M[C-1],y]),C-=1;M.length=C,M.push(y)}}function t(o,p){var c;return(c=o.a[0]<p.a[0]?n(o.a,o.b,p.a):n(p.b,p.a,o.a))?c:(c=p.b[0]<o.b[0]?n(o.a,o.b,p.b):n(p.b,p.a,o.b))||o.idx-p.idx}function h(o,p,c){var a=e.le(o,c,t),y=o[a],u=y.upperIds,_=u[u.length-1];y.upperIds=[_],o.splice(a+1,0,new i(c.a,c.b,c.idx,[_],u))}function s(o,p,c){var a=c.a;c.a=c.b,c.b=a;var y=e.eq(o,c,t);o[y-1].upperIds=o[y].upperIds,o.splice(y,1)}k.exports=function(o,p){for(var c=o.length,a=p.length,y=[],u=0;u<c;++u)y.push(new l(o[u],null,0,u));for(u=0;u<a;++u){var _=p[u],b=o[_[0]],w=o[_[1]];b[0]<w[0]?y.push(new l(b,w,2,u),new l(w,b,1,u)):b[0]>w[0]&&y.push(new l(w,b,2,u),new l(b,w,1,u))}y.sort(r);for(var T=y[0].a[0]-(1+Math.abs(y[0].a[0]))*Math.pow(2,-52),C=[new i([T,1],[T,0],-1,[],[],[],[])],M=[],I=(u=0,y.length);u<I;++u){var P=y[u],S=P.type;0===S?f(M,C,o,P.a,P.idx):2===S?h(C,0,P):s(C,0,P)}return M}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(g,k,x){"use strict";var e=g("binary-search-bounds");function n(r,d){this.stars=r,this.edges=d}k.exports=function(r,d){for(var f=new Array(r),t=0;t<r;++t)f[t]=[];return new n(f,d)};var i=n.prototype;function l(r,d,f){for(var t=1,h=r.length;t<h;t+=2)if(r[t-1]===d&&r[t]===f)return r[t-1]=r[h-2],r[t]=r[h-1],void(r.length=h-2)}i.isConstraint=function(){var r=[0,0];function d(f,t){return f[0]-t[0]||f[1]-t[1]}return function(f,t){return r[0]=Math.min(f,t),r[1]=Math.max(f,t),e.eq(this.edges,r,d)>=0}}(),i.removeTriangle=function(r,d,f){var t=this.stars;l(t[r],d,f),l(t[d],f,r),l(t[f],r,d)},i.addTriangle=function(r,d,f){var t=this.stars;t[r].push(d,f),t[d].push(f,r),t[f].push(r,d)},i.opposite=function(r,d){for(var f=this.stars[d],t=1,h=f.length;t<h;t+=2)if(f[t]===r)return f[t-1];return-1},i.flip=function(r,d){var f=this.opposite(r,d),t=this.opposite(d,r);this.removeTriangle(r,d,f),this.removeTriangle(d,r,t),this.addTriangle(r,t,f),this.addTriangle(d,f,t)},i.edges=function(){for(var r=this.stars,d=[],f=0,t=r.length;f<t;++f)for(var h=r[f],s=0,o=h.length;s<o;s+=2)d.push([h[s],h[s+1]]);return d},i.cells=function(){for(var r=this.stars,d=[],f=0,t=r.length;f<t;++f)for(var h=r[f],s=0,o=h.length;s<o;s+=2){var p=h[s],c=h[s+1];f<Math.min(p,c)&&d.push([f,p,c])}return d}},{"binary-search-bounds":31}],47:[function(g,k,x){"use strict";k.exports=function(e){for(var n=1,i=1;i<e.length;++i)for(var l=0;l<i;++l)if(e[i]<e[l])n=-n;else if(e[l]===e[i])return 0;return n}},{}],48:[function(g,k,x){"use strict";var e=g("dup"),n=g("robust-linear-solve");function i(d,f){for(var t=0,h=d.length,s=0;s<h;++s)t+=d[s]*f[s];return t}function l(d){var f=d.length;if(0===f)return[];var t=e([d.length+1,d.length+1],1),h=e([d.length+1],1);t[f][f]=0;for(var s=0;s<f;++s){for(var o=0;o<=s;++o)t[o][s]=t[s][o]=2*i(d[s],d[o]);h[s]=i(d[s],d[s])}var p=n(t,h),c=0,a=p[f+1];for(s=0;s<a.length;++s)c+=a[s];var y=new Array(f);for(s=0;s<f;++s){a=p[s];var u=0;for(o=0;o<a.length;++o)u+=a[o];y[s]=u/c}return y}function r(d){if(0===d.length)return[];for(var f=d[0].length,t=e([f]),h=l(d),s=0;s<d.length;++s)for(var o=0;o<f;++o)t[o]+=d[s][o]*h[s];return t}r.barycenetric=l,k.exports=r},{dup:65,"robust-linear-solve":283}],49:[function(g,k,x){k.exports=function(n){for(var i=e(n),l=0,r=0;r<n.length;++r)for(var d=n[r],f=0;f<i.length;++f)l+=Math.pow(d[f]-i[f],2);return Math.sqrt(l/n.length)};var e=g("circumcenter")},{circumcenter:48}],50:[function(g,k,x){"use strict";k.exports=function(_,b,w){var T,S,R,D;if(w){T=b;for(var C=new Array(b.length),M=0;M<b.length;++M){var I=b[M];C[M]=[I[0],I[1],w[M]]}b=C}for(var P=(R=!!w,void 0,y(b,D=p(S=_,[],o(S)),R),!!D);u(_,b,!!w);)P=!0;if(w&&P)for(T.length=0,w.length=0,M=0;M<b.length;++M)T.push([(I=b[M])[0],I[1]]),w.push(I[2]);return P};var e=g("union-find"),n=g("box-intersect"),i=g("robust-segment-intersect"),l=g("big-rat"),r=g("big-rat/cmp"),d=g("big-rat/to-float"),f=g("rat-vec"),t=g("nextafter"),h=g("./lib/rat-seg-intersect");function s(_){var b=d(_);return[t(b,-1/0),t(b,1/0)]}function o(_){for(var b=new Array(_.length),w=0;w<_.length;++w){var T=_[w];b[w]=[t(T[0],-1/0),t(T[1],-1/0),t(T[0],1/0),t(T[1],1/0)]}return b}function p(_,b,w){for(var T=b.length,C=new e(T),M=[],I=0;I<b.length;++I){var P=b[I],S=s(P[0]),E=s(P[1]);M.push([t(S[0],-1/0),t(E[0],-1/0),t(S[1],1/0),t(E[1],1/0)])}n(M,function(Y,X){C.link(Y,X)});var R=!0,D=new Array(T);for(I=0;I<T;++I)(H=C.find(I))!==I&&(R=!1,_[H]=[Math.min(_[I][0],_[H][0]),Math.min(_[I][1],_[H][1])]);if(R)return null;var j=0;for(I=0;I<T;++I){var H;(H=C.find(I))===I?(D[I]=j,_[j++]=_[I]):D[I]=-1}for(_.length=j,I=0;I<T;++I)D[I]<0&&(D[I]=D[C.find(I)]);return D}function c(_,b){return _[0]-b[0]||_[1]-b[1]}function a(_,b){return _[0]-b[0]||_[1]-b[1]||(_[2]<b[2]?-1:_[2]>b[2]?1:0)}function y(_,b,w){if(0!==_.length){if(b)for(var T=0;T<_.length;++T){var C=b[(I=_[T])[0]],M=b[I[1]];I[0]=Math.min(C,M),I[1]=Math.max(C,M)}else for(T=0;T<_.length;++T){var I;C=(I=_[T])[0],M=I[1],I[0]=Math.min(C,M),I[1]=Math.max(C,M)}_.sort(w?a:c);var P=1;for(T=1;T<_.length;++T){var S=_[T-1],E=_[T];(E[0]!==S[0]||E[1]!==S[1]||w&&E[2]!==S[2])&&(_[P++]=E)}_.length=P}}function u(_,b,w){var S,E,D,T=function(S,E){for(var R=new Array(E.length),D=0;D<E.length;++D){var j=E[D],H=S[j[0]],Y=S[j[1]];R[D]=[t(Math.min(H[0],Y[0]),-1/0),t(Math.min(H[1],Y[1]),-1/0),t(Math.max(H[0],Y[0]),1/0),t(Math.max(H[1],Y[1]),1/0)]}return R}(_,b),C=(S=_,E=b,D=[],n(T,function(j,H){var Y=E[j],X=E[H];Y[0]!==X[0]&&Y[0]!==X[1]&&Y[1]!==X[0]&&Y[1]!==X[1]&&i(S[Y[0]],S[Y[1]],S[X[0]],S[X[1]])&&D.push([j,H])}),D),I=function(S,E,R,D){var j=[];return n(R,D,function(H,Y){var X=E[H];if(X[0]!==Y&&X[1]!==Y){var Z=S[Y];i(S[X[0]],S[X[1]],Z,Z)&&j.push([H,Y])}}),j}(_,b,T,o(_)),P=p(_,function(S,E,R,D,j){var H,Y,X=S.map(function(ye){return[l(ye[0]),l(ye[1])]});for(H=0;H<R.length;++H){var Z=R[H],W=Z[1],re=E[Y=Z[0]],U=E[W],B=h(f(S[re[0]]),f(S[re[1]]),f(S[U[0]]),f(S[U[1]]));if(B){var V=S.length;S.push([d(B[0]),d(B[1])]),X.push(B),D.push([Y,V],[W,V])}}for(D.sort(function(ye,Me){if(ye[0]!==Me[0])return ye[0]-Me[0];var pe=X[ye[1]],ge=X[Me[1]];return r(pe[0],ge[0])||r(pe[1],ge[1])}),H=D.length-1;H>=0;--H){var ee=E[Y=(ve=D[H])[0]],N=ee[0],K=ee[1],J=S[N],te=S[K];if((J[0]-te[0]||J[1]-te[1])<0){var ae=N;N=K,K=ae}ee[0]=N;var le,se=ee[1]=ve[1];for(j&&(le=ee[2]);H>0&&D[H-1][0]===Y;){var ve,ue=(ve=D[--H])[1];E.push(j?[se,ue,le]:[se,ue]),se=ue}E.push(j?[se,K,le]:[se,K])}return X}(_,b,C,I,w));return y(b,P,w),!!P||C.length>0||I.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(g,k,x){"use strict";k.exports=function(h,s,o,p){var c=r(s,h),a=r(p,o),y=t(c,a);if(0===l(y))return null;var _=t(a,r(h,o)),b=n(_,y),w=f(c,b);return d(h,w)};var e=g("big-rat/mul"),n=g("big-rat/div"),i=g("big-rat/sub"),l=g("big-rat/sign"),r=g("rat-vec/sub"),d=g("rat-vec/add"),f=g("rat-vec/muls");function t(h,s){return i(e(h[0],s[1]),e(h[1],s[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(g,k,x){k.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(g,k,x){"use strict";var e=g("./colorScale"),n=g("lerp");function i(d){return[d[0]/255,d[1]/255,d[2]/255,d[3]]}function l(d){for(var f,t="#",h=0;h<3;++h)t+=("00"+(f=(f=d[h]).toString(16))).substr(f.length);return t}function r(d){return"rgba("+d.join(",")+")"}k.exports=function(d){var f,t,h,s,o,p,c,a,y,u;if(d||(d={}),a=(d.nshades||72)-1,c=d.format||"hex",(p=d.colormap)||(p="jet"),"string"==typeof p){if(p=p.toLowerCase(),!e[p])throw Error(p+" not a supported colorscale");o=e[p]}else{if(!Array.isArray(p))throw Error("unsupported colormap option",p);o=p.slice()}if(o.length>a+1)throw new Error(p+" map requires nshades to be at least size "+o.length);y=Array.isArray(d.alpha)?2!==d.alpha.length?[1,1]:d.alpha.slice():"number"==typeof d.alpha?[d.alpha,d.alpha]:[1,1],f=o.map(function(C){return Math.round(C.index*a)}),y[0]=Math.min(Math.max(y[0],0),1),y[1]=Math.min(Math.max(y[1],0),1);var _=o.map(function(C,M){var I=o[M].index,P=o[M].rgb.slice();return 4===P.length&&P[3]>=0&&P[3]<=1||(P[3]=y[0]+(y[1]-y[0])*I),P}),b=[];for(u=0;u<f.length-1;++u){s=f[u+1]-f[u],t=_[u],h=_[u+1];for(var w=0;w<s;w++){var T=w/s;b.push([Math.round(n(t[0],h[0],T)),Math.round(n(t[1],h[1],T)),Math.round(n(t[2],h[2],T)),n(t[3],h[3],T)])}}return b.push(o[o.length-1].rgb.concat(y[1])),"hex"===c?b=b.map(l):"rgbaString"===c?b=b.map(r):"float"===c&&(b=b.map(i)),b}},{"./colorScale":52,lerp:240}],54:[function(g,k,x){"use strict";k.exports=function(f,t,h,s){var o=e(t,h,s);if(0===o){var p=n(e(f,t,h)),c=n(e(f,t,s));if(p===c){if(0===p){var a=d(f,t,h);return a===d(f,t,s)?0:a?1:-1}return 0}return 0===c?p>0||d(f,t,s)?-1:1:0===p?c>0||d(f,t,h)?1:-1:n(c-p)}var u=e(f,t,h);return u>0?o>0&&e(f,t,s)>0?1:-1:u<0?o>0||e(f,t,s)>0?1:-1:e(f,t,s)>0||d(f,t,h)?1:-1};var e=g("robust-orientation"),n=g("signum"),i=g("two-sum"),l=g("robust-product"),r=g("robust-sum");function d(f,t,h){var s=i(f[0],-t[0]),o=i(f[1],-t[1]),p=i(h[0],-t[0]),c=i(h[1],-t[1]),a=r(l(s,p),l(o,c));return a[a.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(g,k,x){"use strict";k.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(g,k,x){k.exports=function(i,l){var r=i.length,d=i.length-l.length;if(d)return d;switch(r){case 0:return 0;case 1:return i[0]-l[0];case 2:return i[0]+i[1]-l[0]-l[1]||e(i[0],i[1])-e(l[0],l[1]);case 3:var f=i[0]+i[1],t=l[0]+l[1];if(d=f+i[2]-(t+l[2]))return d;var h=e(i[0],i[1]),s=e(l[0],l[1]);return e(h,i[2])-e(s,l[2])||e(h+i[2],f)-e(s+l[2],t);case 4:var o=i[0],p=i[1],c=i[2],a=i[3],y=l[0],u=l[1],_=l[2],b=l[3];return o+p+c+a-(y+u+_+b)||e(o,p,c,a)-e(y,u,_,b,y)||e(o+p,o+c,o+a,p+c,p+a,c+a)-e(y+u,y+_,y+b,u+_,u+b,_+b)||e(o+p+c,o+p+a,o+c+a,p+c+a)-e(y+u+_,y+u+b,y+_+b,u+_+b);default:for(var w=i.slice().sort(n),T=l.slice().sort(n),C=0;C<r;++C)if(d=w[C]-T[C])return d;return 0}};var e=Math.min;function n(i,l){return i-l}},{}],57:[function(g,k,x){"use strict";var e=g("compare-cell"),n=g("cell-orientation");k.exports=function(i,l){return e(i,l)||n(i)-n(l)}},{"cell-orientation":47,"compare-cell":56}],58:[function(g,k,x){"use strict";var e=g("./lib/ch1d"),n=g("./lib/ch2d"),i=g("./lib/chnd");k.exports=function(l){var r=l.length;if(0===r)return[];if(1===r)return[[0]];var d=l[0].length;return 0===d?[]:1===d?e(l):2===d?n(l):i(l,d)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(g,k,x){"use strict";k.exports=function(e){for(var n=0,i=0,l=1;l<e.length;++l)e[l][0]<e[n][0]&&(n=l),e[l][0]>e[i][0]&&(i=l);return n<i?[[n],[i]]:n>i?[[i],[n]]:[[n]]}},{}],60:[function(g,k,x){"use strict";k.exports=function(n){var i=e(n),l=i.length;if(l<=2)return[];for(var r=new Array(l),d=i[l-1],f=0;f<l;++f){var t=i[f];r[f]=[d,t],d=t}return r};var e=g("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(g,k,x){"use strict";k.exports=function(i,l){try{return e(i,!0)}catch{var r=n(i);if(r.length<=l)return[];var d=function(t,h){for(var s=t.length,o=new Array(s),p=0;p<h.length;++p)o[p]=t[h[p]];var c=h.length;for(p=0;p<s;++p)h.indexOf(p)<0&&(o[c++]=t[p]);return o}(i,r);return function(t,h){for(var s=t.length,o=h.length,p=0;p<s;++p)for(var c=t[p],a=0;a<c.length;++a){var y=c[a];if(y<o)c[a]=h[y];else{y-=o;for(var u=0;u<o;++u)y>=h[u]&&(y+=1);c[a]=y}}return t}(e(d,!0),r)}};var e=g("incremental-convex-hull"),n=g("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(g,k,x){"use strict";k.exports=function(e,n,i,l,r,d){var f=r-1,t=r*r,h=f*f,s=(1+2*r)*h,o=r*h,p=t*(3-2*r),c=t*f;if(e.length){d||(d=new Array(e.length));for(var a=e.length-1;a>=0;--a)d[a]=s*e[a]+o*n[a]+p*i[a]+c*l[a];return d}return s*e+o*n+p*i+c*l},k.exports.derivative=function(e,n,i,l,r,d){var f=6*r*r-6*r,t=3*r*r-4*r+1,h=-6*r*r+6*r,s=3*r*r-2*r;if(e.length){d||(d=new Array(e.length));for(var o=e.length-1;o>=0;--o)d[o]=f*e[o]+t*n[o]+h*i[o]+s*l[o];return d}return f*e+t*n+h*i[o]+s*l}},{}],63:[function(g,k,x){"use strict";var e=g("incremental-convex-hull"),n=g("uniq");function i(r,d){this.point=r,this.index=d}function l(r,d){for(var f=r.point,t=d.point,h=f.length,s=0;s<h;++s){var o=t[s]-f[s];if(o)return o}return 0}k.exports=function(r,d){var f=r.length;if(0===f)return[];var t=r[0].length;if(t<1)return[];if(1===t)return function(I,P,S){if(1===I)return S?[[-1,0]]:[];var E=P.map(function(Y,X){return[Y[0],X]});E.sort(function(Y,X){return Y[0]-X[0]});for(var R=new Array(I-1),D=1;D<I;++D)R[D-1]=[E[D-1][1],E[D][1]];return S&&R.push([-1,R[0][1]],[R[I-1][1],-1]),R}(f,r,d);for(var h=new Array(f),s=1,o=0;o<f;++o){for(var p=r[o],c=new Array(t+1),a=0,y=0;y<t;++y){var u=p[y];c[y]=u,a+=u*u}c[t]=a,h[o]=new i(c,o),s=Math.max(a,s)}n(h,l),f=h.length;var _=new Array(f+t+1),b=new Array(f+t+1),w=(t+1)*(t+1)*s,T=new Array(t+1);for(o=0;o<=t;++o)T[o]=0;for(T[t]=w,_[0]=T.slice(),b[0]=-1,o=0;o<=t;++o)(c=T.slice())[o]=1,_[o+1]=c,b[o+1]=-1;for(o=0;o<f;++o){var C=h[o];_[o+t+1]=C.point,b[o+t+1]=C.index}var M=e(_,!1);if(M=M.filter(d?function(I){for(var P=0,S=0;S<=t;++S){var E=b[I[S]];if(E<0&&++P>=2)return!1;I[S]=E}return!0}:function(I){for(var P=0;P<=t;++P){var S=b[I[P]];if(S<0)return!1;I[P]=S}return!0}),1&t)for(o=0;o<M.length;++o)c=(C=M[o])[0],C[0]=C[1],C[1]=c;return M}},{"incremental-convex-hull":233,uniq:310}],64:[function(g,k,x){(function(e){(function(){var n=!1;if(typeof Float64Array<"u"){var i=new Float64Array(1),l=new Uint32Array(i.buffer);i[0]=1,n=!0,1072693248===l[1]?(k.exports=function(d){return i[0]=d,[l[0],l[1]]},k.exports.pack=function(d,f){return l[0]=d,l[1]=f,i[0]},k.exports.lo=function(d){return i[0]=d,l[0]},k.exports.hi=function(d){return i[0]=d,l[1]}):1072693248===l[0]?(k.exports=function(d){return i[0]=d,[l[1],l[0]]},k.exports.pack=function(d,f){return l[1]=d,l[0]=f,i[0]},k.exports.lo=function(d){return i[0]=d,l[1]},k.exports.hi=function(d){return i[0]=d,l[0]}):n=!1}if(!n){var r=new e(8);k.exports=function(d){return r.writeDoubleLE(d,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},k.exports.pack=function(d,f){return r.writeUInt32LE(d,0,!0),r.writeUInt32LE(f,4,!0),r.readDoubleLE(0,!0)},k.exports.lo=function(d){return r.writeDoubleLE(d,0,!0),r.readUInt32LE(0,!0)},k.exports.hi=function(d){return r.writeDoubleLE(d,0,!0),r.readUInt32LE(4,!0)}}k.exports.sign=function(d){return k.exports.hi(d)>>>31},k.exports.exponent=function(d){return(k.exports.hi(d)<<1>>>21)-1023},k.exports.fraction=function(d){var f=k.exports.lo(d),t=k.exports.hi(d),h=1048575&t;return 2146435072&t&&(h+=1<<20),[f,h]},k.exports.denormalized=function(d){return!(2146435072&k.exports.hi(d))}}).call(this)}).call(this,g("buffer").Buffer)},{buffer:3}],65:[function(g,k,x){"use strict";k.exports=function(e,n){switch(void 0===n&&(n=0),typeof e){case"number":if(e>0)return function(i,l){var r,d;for(r=new Array(i),d=0;d<i;++d)r[d]=l;return r}(0|e,n);break;case"object":if("number"==typeof e.length)return function i(l,r,d){var f=0|l[d];if(f<=0)return[];var t,h=new Array(f);if(d===l.length-1)for(t=0;t<f;++t)h[t]=r;else for(t=0;t<f;++t)h[t]=i(l,r,d+1);return h}(e,n,0)}return[]}},{}],66:[function(g,k,x){"use strict";k.exports=function(n,i){var l=n.length;if("number"!=typeof i){i=0;for(var r=0;r<l;++r){var d=n[r];i=Math.max(i,d[0],d[1])}i=1+(0|i)}i|=0;var f=new Array(i);for(r=0;r<i;++r)f[r]=[];for(r=0;r<l;++r)f[(d=n[r])[0]].push(d[1]),f[d[1]].push(d[0]);for(var t=0;t<i;++t)e(f[t],function(h,s){return h-s});return f};var e=g("uniq")},{uniq:310}],67:[function(g,k,x){"use strict";k.exports=function(e,n,i){var l=n||0,r=i||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[l*e[12]+e[8],l*e[13]+e[9],l*e[14]+e[10],l*e[15]+e[11]],[r*e[12]-e[8],r*e[13]-e[9],r*e[14]-e[10],r*e[15]-e[11]]]}},{}],68:[function(g,k,x){"use strict";k.exports=function(f,t,h){switch(arguments.length){case 0:return new l([0],[0],0);case 1:return"number"==typeof f?new l(s=d(f),s,0):new l(f,d(f.length),0);case 2:if("number"==typeof t){var s=d(f.length);return new l(f,s,+t)}h=0;case 3:if(f.length!==t.length)throw new Error("state and velocity lengths must match");return new l(f,t,h)}};var e=g("cubic-hermite"),n=g("binary-search-bounds");function i(f,t,h){return Math.min(t,Math.max(f,h))}function l(f,t,h){this.dimension=f.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var s=0;s<this.dimension;++s)this.bounds[0][s]=-1/0,this.bounds[1][s]=1/0;this._state=f.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[h],this._scratch=[f.slice(),f.slice(),f.slice(),f.slice(),f.slice()]}var r=l.prototype;function d(f){for(var t=new Array(f),h=0;h<f;++h)t[h]=0;return t}r.flush=function(f){var t=n.gt(this._time,f)-1;t<=0||(this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension))},r.curve=function(f){var t=this._time,h=t.length,s=n.le(t,f),o=this._scratch[0],p=this._state,c=this._velocity,a=this.dimension,y=this.bounds;if(s<0)for(var u=a-1,_=0;_<a;++_,--u)o[_]=p[u];else if(s>=h-1){u=p.length-1;var b=f-t[h-1];for(_=0;_<a;++_,--u)o[_]=p[u]+b*c[u]}else{u=a*(s+1)-1;var w=t[s],T=t[s+1]-w||1,C=this._scratch[1],M=this._scratch[2],I=this._scratch[3],P=this._scratch[4],S=!0;for(_=0;_<a;++_,--u)C[_]=p[u],I[_]=c[u]*T,M[_]=p[u+a],P[_]=c[u+a]*T,S=S&&C[_]===M[_]&&I[_]===P[_]&&0===I[_];if(S)for(_=0;_<a;++_)o[_]=C[_];else e(C,I,M,P,(f-w)/T,o)}var E=y[0],R=y[1];for(_=0;_<a;++_)o[_]=i(E[_],R[_],o[_]);return o},r.dcurve=function(f){var t=this._time,h=t.length,s=n.le(t,f),o=this._scratch[0],p=this._state,c=this._velocity,a=this.dimension;if(s>=h-1)for(var y=p.length-1,u=0;u<a;++u,--y)o[u]=c[y];else{y=a*(s+1)-1;var _=t[s],b=t[s+1]-_||1,w=this._scratch[1],T=this._scratch[2],C=this._scratch[3],M=this._scratch[4],I=!0;for(u=0;u<a;++u,--y)w[u]=p[y],C[u]=c[y]*b,T[u]=p[y+a],M[u]=c[y+a]*b,I=I&&w[u]===T[u]&&C[u]===M[u]&&0===C[u];if(I)for(u=0;u<a;++u)o[u]=0;else for(e.derivative(w,C,T,M,(f-_)/b,o),u=0;u<a;++u)o[u]/=b}return o},r.lastT=function(){var f=this._time;return f[f.length-1]},r.stable=function(){for(var f=this._velocity,t=f.length,h=this.dimension-1;h>=0;--h)if(f[--t])return!1;return!0},r.jump=function(f){var t=this.lastT(),h=this.dimension;if(!(f<t||arguments.length!==h+1)){var s=this._state,o=this._velocity,p=s.length-this.dimension,c=this.bounds,a=c[0],y=c[1];this._time.push(t,f);for(var u=0;u<2;++u)for(var _=0;_<h;++_)s.push(s[p++]),o.push(0);for(this._time.push(f),_=h;_>0;--_)s.push(i(a[_-1],y[_-1],arguments[_])),o.push(0)}},r.push=function(f){var t=this.lastT(),h=this.dimension;if(!(f<t||arguments.length!==h+1)){var s=this._state,o=this._velocity,p=s.length-this.dimension,c=f-t,a=this.bounds,y=a[0],u=a[1],_=c>1e-6?1/c:0;this._time.push(f);for(var b=h;b>0;--b){var w=i(y[b-1],u[b-1],arguments[b]);s.push(w),o.push((w-s[p++])*_)}}},r.set=function(f){var t=this.dimension;if(!(f<this.lastT()||arguments.length!==t+1)){var h=this._state,s=this._velocity,o=this.bounds,p=o[0],c=o[1];this._time.push(f);for(var a=t;a>0;--a)h.push(i(p[a-1],c[a-1],arguments[a])),s.push(0)}},r.move=function(f){var t=this.lastT(),h=this.dimension;if(!(f<=t||arguments.length!==h+1)){var s=this._state,o=this._velocity,p=s.length-this.dimension,c=this.bounds,a=c[0],y=c[1],u=f-t,_=u>1e-6?1/u:0;this._time.push(f);for(var b=h;b>0;--b){var w=arguments[b];s.push(i(a[b-1],y[b-1],s[p++]+w)),o.push(w*_)}}},r.idle=function(f){var t=this.lastT();if(!(f<t)){var h=this.dimension,s=this._state,o=this._velocity,p=s.length-h,c=this.bounds,a=c[0],y=c[1],u=f-t;this._time.push(f);for(var _=h-1;_>=0;--_)s.push(i(a[_],y[_],s[p]+u*o[p])),o.push(0),p+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(g,k,x){"use strict";function e(a,y,u,_,b,w){this._color=a,this.key=y,this.value=u,this.left=_,this.right=b,this._count=w}function n(a){return new e(a._color,a.key,a.value,a.left,a.right,a._count)}function i(a,y){return new e(a,y.key,y.value,y.left,y.right,y._count)}function l(a){a._count=1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function r(a,y){this._compare=a,this.root=y}k.exports=function(a){return new r(a||c,null)};var d=r.prototype;function f(a,y){var u;return y.left&&(u=f(a,y.left))?u:(u=a(y.key,y.value))||(y.right?f(a,y.right):void 0)}function t(a,y,u,_){var b;return y(a,_.key)<=0&&(_.left&&(b=t(a,y,u,_.left))||(b=u(_.key,_.value)))?b:_.right?t(a,y,u,_.right):void 0}function h(a,y,u,_,b){var w,T=u(a,b.key),C=u(y,b.key);return T<=0&&(b.left&&(w=h(a,y,u,_,b.left))||C>0&&(w=_(b.key,b.value)))?w:C>0&&b.right?h(a,y,u,_,b.right):void 0}function s(a,y){this.tree=a,this._stack=y}Object.defineProperty(d,"keys",{get:function(){var a=[];return this.forEach(function(y,u){a.push(y)}),a}}),Object.defineProperty(d,"values",{get:function(){var a=[];return this.forEach(function(y,u){a.push(u)}),a}}),Object.defineProperty(d,"length",{get:function(){return this.root?this.root._count:0}}),d.insert=function(a,y){for(var u=this._compare,_=this.root,b=[],w=[];_;){var T=u(a,_.key);b.push(_),w.push(T),_=T<=0?_.left:_.right}b.push(new e(0,a,y,null,null,1));for(var C=b.length-2;C>=0;--C)_=b[C],b[C]=w[C]<=0?new e(_._color,_.key,_.value,b[C+1],_.right,_._count+1):new e(_._color,_.key,_.value,_.left,b[C+1],_._count+1);for(C=b.length-1;C>1;--C){var M=b[C-1];if(_=b[C],1===M._color||1===_._color)break;var I=b[C-2];if(I.left===M)if(M.left===_){if(!(P=I.right)||0!==P._color){I._color=0,I.left=M.right,M._color=1,M.right=I,b[C-2]=M,b[C-1]=_,l(I),l(M),C>=3&&((S=b[C-3]).left===I?S.left=M:S.right=M);break}M._color=1,I.right=i(1,P),I._color=0,C-=1}else{if(!(P=I.right)||0!==P._color){M.right=_.left,I._color=0,I.left=_.right,_._color=1,_.left=M,_.right=I,b[C-2]=_,b[C-1]=M,l(I),l(M),l(_),C>=3&&((S=b[C-3]).left===I?S.left=_:S.right=_);break}M._color=1,I.right=i(1,P),I._color=0,C-=1}else if(M.right===_){if(!(P=I.left)||0!==P._color){I._color=0,I.right=M.left,M._color=1,M.left=I,b[C-2]=M,b[C-1]=_,l(I),l(M),C>=3&&((S=b[C-3]).right===I?S.right=M:S.left=M);break}M._color=1,I.left=i(1,P),I._color=0,C-=1}else{var P;if(!(P=I.left)||0!==P._color){var S;M.left=_.right,I._color=0,I.right=_.left,_._color=1,_.right=M,_.left=I,b[C-2]=_,b[C-1]=M,l(I),l(M),l(_),C>=3&&((S=b[C-3]).right===I?S.right=_:S.left=_);break}M._color=1,I.left=i(1,P),I._color=0,C-=1}}return b[0]._color=1,new r(u,b[0])},d.forEach=function(a,y,u){if(this.root)switch(arguments.length){case 1:return f(a,this.root);case 2:return t(y,this._compare,a,this.root);case 3:return this._compare(y,u)>=0?void 0:h(y,u,this._compare,a,this.root)}},Object.defineProperty(d,"begin",{get:function(){for(var a=[],y=this.root;y;)a.push(y),y=y.left;return new s(this,a)}}),Object.defineProperty(d,"end",{get:function(){for(var a=[],y=this.root;y;)a.push(y),y=y.right;return new s(this,a)}}),d.at=function(a){if(a<0)return new s(this,[]);for(var y=this.root,u=[];;){if(u.push(y),y.left){if(a<y.left._count){y=y.left;continue}a-=y.left._count}if(!a)return new s(this,u);if(a-=1,!y.right||a>=y.right._count)break;y=y.right}return new s(this,[])},d.ge=function(a){for(var y=this._compare,u=this.root,_=[],b=0;u;){var w=y(a,u.key);_.push(u),w<=0&&(b=_.length),u=w<=0?u.left:u.right}return _.length=b,new s(this,_)},d.gt=function(a){for(var y=this._compare,u=this.root,_=[],b=0;u;){var w=y(a,u.key);_.push(u),w<0&&(b=_.length),u=w<0?u.left:u.right}return _.length=b,new s(this,_)},d.lt=function(a){for(var y=this._compare,u=this.root,_=[],b=0;u;){var w=y(a,u.key);_.push(u),w>0&&(b=_.length),u=w<=0?u.left:u.right}return _.length=b,new s(this,_)},d.le=function(a){for(var y=this._compare,u=this.root,_=[],b=0;u;){var w=y(a,u.key);_.push(u),w>=0&&(b=_.length),u=w<0?u.left:u.right}return _.length=b,new s(this,_)},d.find=function(a){for(var y=this._compare,u=this.root,_=[];u;){var b=y(a,u.key);if(_.push(u),0===b)return new s(this,_);u=b<=0?u.left:u.right}return new s(this,[])},d.remove=function(a){var y=this.find(a);return y?y.remove():this},d.get=function(a){for(var y=this._compare,u=this.root;u;){var _=y(a,u.key);if(0===_)return u.value;u=_<=0?u.left:u.right}};var o=s.prototype;function p(a,y){a.key=y.key,a.value=y.value,a.left=y.left,a.right=y.right,a._color=y._color,a._count=y._count}function c(a,y){return a<y?-1:a>y?1:0}Object.defineProperty(o,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(o,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),o.clone=function(){return new s(this.tree,this._stack.slice())},o.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var y=new Array(a.length),u=a[a.length-1];y[y.length-1]=new e(u._color,u.key,u.value,u.left,u.right,u._count);for(var _=a.length-2;_>=0;--_)y[_]=(u=a[_]).left===a[_+1]?new e(u._color,u.key,u.value,y[_+1],u.right,u._count):new e(u._color,u.key,u.value,u.left,y[_+1],u._count);if((u=y[y.length-1]).left&&u.right){var b=y.length;for(u=u.left;u.right;)y.push(u),u=u.right;var w=y[b-1];for(y.push(new e(u._color,w.key,w.value,u.left,u.right,u._count)),y[b-1].key=u.key,y[b-1].value=u.value,_=y.length-2;_>=b;--_)y[_]=new e((u=y[_])._color,u.key,u.value,u.left,y[_+1],u._count);y[b-1].left=y[b]}if(0===(u=y[y.length-1])._color){var T=y[y.length-2];for(T.left===u?T.left=null:T.right===u&&(T.right=null),y.pop(),_=0;_<y.length;++_)y[_]._count--;return new r(this.tree._compare,y[0])}if(u.left||u.right){for(u.left?p(u,u.left):u.right&&p(u,u.right),u._color=1,_=0;_<y.length-1;++_)y[_]._count--;return new r(this.tree._compare,y[0])}if(1===y.length)return new r(this.tree._compare,null);for(_=0;_<y.length;++_)y[_]._count--;var C=y[y.length-2];return function(M){for(var I,P,S,E,R=M.length-1;R>=0;--R){if(I=M[R],0===R)return void(I._color=1);if((P=M[R-1]).left===I){if((S=P.right).right&&0===S.right._color)return E=(S=P.right=n(S)).right=n(S.right),P.right=S.left,S.left=P,S.right=E,S._color=P._color,I._color=1,P._color=1,E._color=1,l(P),l(S),R>1&&((D=M[R-2]).left===P?D.left=S:D.right=S),void(M[R-1]=S);if(S.left&&0===S.left._color)return E=(S=P.right=n(S)).left=n(S.left),P.right=E.left,S.left=E.right,E.left=P,E.right=S,E._color=P._color,P._color=1,S._color=1,I._color=1,l(P),l(S),l(E),R>1&&((D=M[R-2]).left===P?D.left=E:D.right=E),void(M[R-1]=E);if(1===S._color){if(0===P._color)return P._color=1,void(P.right=i(0,S));P.right=i(0,S);continue}S=n(S),P.right=S.left,S.left=P,S._color=P._color,P._color=0,l(P),l(S),R>1&&((D=M[R-2]).left===P?D.left=S:D.right=S),M[R-1]=S,M[R]=P,R+1<M.length?M[R+1]=I:M.push(I),R+=2}else{if((S=P.left).left&&0===S.left._color)return E=(S=P.left=n(S)).left=n(S.left),P.left=S.right,S.right=P,S.left=E,S._color=P._color,I._color=1,P._color=1,E._color=1,l(P),l(S),R>1&&((D=M[R-2]).right===P?D.right=S:D.left=S),void(M[R-1]=S);if(S.right&&0===S.right._color)return E=(S=P.left=n(S)).right=n(S.right),P.left=E.right,S.right=E.left,E.right=P,E.left=S,E._color=P._color,P._color=1,S._color=1,I._color=1,l(P),l(S),l(E),R>1&&((D=M[R-2]).right===P?D.right=E:D.left=E),void(M[R-1]=E);if(1===S._color){if(0===P._color)return P._color=1,void(P.left=i(0,S));P.left=i(0,S);continue}var D;S=n(S),P.left=S.right,S.right=P,S._color=P._color,P._color=0,l(P),l(S),R>1&&((D=M[R-2]).right===P?D.right=S:D.left=S),M[R-1]=S,M[R]=P,R+1<M.length?M[R+1]=I:M.push(I),R+=2}}}(y),C.left===u?C.left=null:C.right=null,new r(this.tree._compare,y[0])},Object.defineProperty(o,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(o,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(o,"index",{get:function(){var a=0,y=this._stack;if(0===y.length){var u=this.tree.root;return u?u._count:0}y[y.length-1].left&&(a=y[y.length-1].left._count);for(var _=y.length-2;_>=0;--_)y[_+1]===y[_].right&&(++a,y[_].left&&(a+=y[_].left._count));return a},enumerable:!0}),o.next=function(){var a=this._stack;if(0!==a.length){var y=a[a.length-1];if(y.right)for(y=y.right;y;)a.push(y),y=y.left;else for(a.pop();a.length>0&&a[a.length-1].right===y;)y=a[a.length-1],a.pop()}},Object.defineProperty(o,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var y=a.length-1;y>0;--y)if(a[y-1].left===a[y])return!0;return!1}}),o.update=function(a){var y=this._stack;if(0===y.length)throw new Error("Can't update empty node!");var u=new Array(y.length),_=y[y.length-1];u[u.length-1]=new e(_._color,_.key,a,_.left,_.right,_._count);for(var b=y.length-2;b>=0;--b)u[b]=(_=y[b]).left===y[b+1]?new e(_._color,_.key,_.value,u[b+1],_.right,_._count):new e(_._color,_.key,_.value,_.left,u[b+1],_._count);return new r(this.tree._compare,u[0])},o.prev=function(){var a=this._stack;if(0!==a.length){var y=a[a.length-1];if(y.left)for(y=y.left;y;)a.push(y),y=y.right;else for(a.pop();a.length>0&&a[a.length-1].left===y;)y=a[a.length-1],a.pop()}},Object.defineProperty(o,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var y=a.length-1;y>0;--y)if(a[y-1].right===a[y])return!0;return!1}})},{}],70:[function(g,k,x){"use strict";k.exports=function(b,w){var T=new t(b);return T.update(w),T};var e=g("./lib/text.js"),n=g("./lib/lines.js"),i=g("./lib/background.js"),l=g("./lib/cube.js"),r=g("./lib/ticks.js"),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function f(b,w){return b[0]=w[0],b[1]=w[1],b[2]=w[2],b}function t(b){this.gl=b,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=i(b)}var h=t.prototype;function s(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}h.update=function(b){function w(Y,X,Z){if(Z in b){var W,re=b[Z],U=this[Z];this[Z]=W=(Y?Array.isArray(re)&&Array.isArray(re[0]):Array.isArray(re))?[X(re[0]),X(re[1]),X(re[2])]:[X(re),X(re),X(re)];for(var B=0;B<3;++B)if(W[B]!==U[B])return!0}return!1}b=b||{};var T,C=w.bind(this,!1,Number),M=w.bind(this,!1,Boolean),I=w.bind(this,!1,String),P=w.bind(this,!0,function(Y){if(Array.isArray(Y)){if(3===Y.length)return[+Y[0],+Y[1],+Y[2],1];if(4===Y.length)return[+Y[0],+Y[1],+Y[2],+Y[3]]}return[0,0,0,1]}),S=!1,E=!1;if("bounds"in b)for(var R=b.bounds,D=0;D<2;++D)for(var j=0;j<3;++j)R[D][j]!==this.bounds[D][j]&&(E=!0),this.bounds[D][j]=R[D][j];if("ticks"in b)for(T=b.ticks,S=!0,this.autoTicks=!1,D=0;D<3;++D)this.tickSpacing[D]=0;else C("tickSpacing")&&(this.autoTicks=!0,E=!0);if(this._firstInit&&("ticks"in b||"tickSpacing"in b||(this.autoTicks=!0),E=!0,S=!0,this._firstInit=!1),E&&this.autoTicks&&(T=r.create(this.bounds,this.tickSpacing),S=!0),S){for(D=0;D<3;++D)T[D].sort(function(Y,X){return Y.x-X.x});r.equal(T,this.ticks)?S=!1:this.ticks=T}M("tickEnable"),I("tickFont")&&(S=!0),C("tickSize"),C("tickAngle"),C("tickPad"),P("tickColor");var H=I("labels");I("labelFont")&&(H=!0),M("labelEnable"),C("labelSize"),C("labelPad"),P("labelColor"),M("lineEnable"),M("lineMirror"),C("lineWidth"),P("lineColor"),M("lineTickEnable"),M("lineTickMirror"),C("lineTickLength"),C("lineTickWidth"),P("lineTickColor"),M("gridEnable"),C("gridWidth"),P("gridColor"),M("zeroEnable"),P("zeroLineColor"),C("zeroLineWidth"),M("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(H||S)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&S&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};var o=[new s,new s,new s];function p(b,w,T,C,M){for(var I=b.primalOffset,P=b.primalMinor,S=b.mirrorOffset,E=b.mirrorMinor,R=C[w],D=0;D<3;++D)if(w!==D){var j=I,H=S,Y=P,X=E;R&1<<D&&(j=S,H=I,Y=E,X=P),j[D]=T[0][D],H[D]=T[1][D],M[D]>0?(Y[D]=-1,X[D]=0):(Y[D]=0,X[D]=1)}}var c=[0,0,0],a={model:d,view:d,projection:d,_ortho:!1};h.isOpaque=function(){return!0},h.isTransparent=function(){return!1},h.drawTransparent=function(b){};var y=[0,0,0],u=[0,0,0],_=[0,0,0];h.draw=function(b){for(var w=this.gl,T=(b=b||a).model||d,C=b.view||d,M=b.projection||d,I=this.bounds,P=b._ortho||!1,S=l(T,C,M,I,P),E=S.cubeEdges,R=S.axis,X=(P?2:1)*this.pixelRatio*(M[3]*C[12]+M[7]*C[13]+M[11]*C[14]+M[15]*C[15])/w.drawingBufferHeight,Z=0;Z<3;++Z)this.lastCubeProps.cubeEdges[Z]=E[Z],this.lastCubeProps.axis[Z]=R[Z];var W=o;for(Z=0;Z<3;++Z)p(o[Z],Z,this.bounds,E,R);w=this.gl;var re,le,se,we,oe,de,Te,Ee,Ae,De,Ie,Oe,U=c;for(Z=0;Z<3;++Z)U[Z]=this.backgroundEnable[Z]?R[Z]:0;for(this._background.draw(T,C,M,I,U,this.backgroundColor),this._lines.bind(T,C,M,this),Z=0;Z<3;++Z){var B=[0,0,0];B[Z]=R[Z]>0?I[1][Z]:I[0][Z];for(var V=0;V<2;++V){var ee=(Z+1+V)%3,N=(Z+1+(1^V))%3;this.gridEnable[ee]&&this._lines.drawGrid(ee,N,this.bounds,B,this.gridColor[ee],this.gridWidth[ee]*this.pixelRatio)}for(V=0;V<2;++V)ee=(Z+1+V)%3,this.zeroEnable[N=(Z+1+(1^V))%3]&&Math.min(I[0][N],I[1][N])<=0&&Math.max(I[0][N],I[1][N])>=0&&this._lines.drawZero(ee,N,this.bounds,B,this.zeroLineColor[N],this.zeroLineWidth[N]*this.pixelRatio)}for(Z=0;Z<3;++Z){this.lineEnable[Z]&&this._lines.drawAxisLine(Z,this.bounds,W[Z].primalOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio),this.lineMirror[Z]&&this._lines.drawAxisLine(Z,this.bounds,W[Z].mirrorOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio);var K=f(y,W[Z].primalMinor),J=f(u,W[Z].mirrorMinor),te=this.lineTickLength;for(V=0;V<3;++V){var ae=X/T[5*V];K[V]*=te[V]*ae,J[V]*=te[V]*ae}this.lineTickEnable[Z]&&this._lines.drawAxisTicks(Z,W[Z].primalOffset,K,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio),this.lineTickMirror[Z]&&this._lines.drawAxisTicks(Z,W[Z].mirrorOffset,J,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio)}function ve(we){(se=[0,0,0])[we]=1}for(this._lines.unbind(),this._text.bind(T,C,M,this.pixelRatio),Z=0;Z<3;++Z){var ye=W[Z].primalMinor,Me=W[Z].mirrorMinor,pe=f(_,W[Z].primalOffset);for(V=0;V<3;++V)this.lineTickEnable[Z]&&(pe[V]+=X*ye[V]*Math.max(this.lineTickLength[V],0)/T[5*V]);var ge=[0,0,0];if(ge[Z]=1,this.tickEnable[Z]){for(-3600===this.tickAngle[Z]?(this.tickAngle[Z]=0,this.tickAlign[Z]="auto"):this.tickAlign[Z]=-1,re[0]="auto"===(re=[this.tickAlign[Z],.5,le=1])[0]?0:parseInt(""+re[0]),se=[0,0,0],Te=void 0,Ee=void 0,Ae=void 0,De=void 0,Ie=void 0,Oe=void 0,De=(oe=ye)[Ee=((we=Z)+2)%3],Ie=(de=Me)[Te=(we+1)%3],Oe=de[Ee],(Ae=oe[Te])>0&&Oe>0||Ae>0&&Oe<0||Ae<0&&Oe>0||Ae<0&&Oe<0?ve(Te):(De>0&&Ie>0||De>0&&Ie<0||De<0&&Ie>0||De<0&&Ie<0)&&ve(Ee),V=0;V<3;++V)pe[V]+=X*ye[V]*this.tickPad[V]/T[5*V];this._text.drawTicks(Z,this.tickSize[Z],this.tickAngle[Z],pe,this.tickColor[Z],ge,se,re)}if(this.labelEnable[Z]){for(le=0,se=[0,0,0],this.labels[Z].length>4&&(ve(Z),le=1),re[0]="auto"===(re=[this.labelAlign[Z],.5,le])[0]?0:parseInt(""+re[0]),V=0;V<3;++V)pe[V]+=X*ye[V]*this.labelPad[V]/T[5*V];pe[Z]+=.5*(I[0][Z]+I[1][Z]),this._text.drawLabel(Z,this.labelSize[Z],this.labelAngle[Z],pe,this.labelColor[Z],[0,0,0],se,re)}}this._text.unbind()},h.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(g,k,x){"use strict";k.exports=function(d){for(var f=[],t=[],h=0,s=0;s<3;++s)for(var o=(s+1)%3,p=(s+2)%3,c=[0,0,0],a=[0,0,0],y=-1;y<=1;y+=2){t.push(h,h+2,h+1,h+1,h+2,h+3),c[s]=y,a[s]=y;for(var u=-1;u<=1;u+=2){c[o]=u;for(var _=-1;_<=1;_+=2)c[p]=_,f.push(c[0],c[1],c[2],a[0],a[1],a[2]),h+=1}var b=o;o=p,p=b}var w=e(d,new Float32Array(f)),T=e(d,new Uint16Array(t),d.ELEMENT_ARRAY_BUFFER),C=n(d,[{buffer:w,type:d.FLOAT,size:3,offset:0,stride:24},{buffer:w,type:d.FLOAT,size:3,offset:12,stride:24}],T),M=i(d);return M.attributes.position.location=0,M.attributes.normal.location=1,new l(d,w,C,M)};var e=g("gl-buffer"),n=g("gl-vao"),i=g("./shaders").bg;function l(d,f,t,h){this.gl=d,this.buffer=f,this.vao=t,this.shader=h}var r=l.prototype;r.draw=function(d,f,t,h,s,o){for(var p=!1,c=0;c<3;++c)p=p||s[c];if(p){var a=this.gl;a.enable(a.POLYGON_OFFSET_FILL),a.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:d,view:f,projection:t,bounds:h,enable:s,colors:o},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),a.disable(a.POLYGON_OFFSET_FILL)}},r.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(g,k,x){"use strict";k.exports=function(u,_,b,w,T){n(r,_,u),n(r,b,r);for(var C=0,M=0;M<2;++M){t[2]=w[M][2];for(var I=0;I<2;++I){t[1]=w[I][1];for(var P=0;P<2;++P)t[0]=w[P][0],s(d[C],t,r),C+=1}}var S=-1;for(M=0;M<8;++M){for(var E=d[M][3],R=0;R<3;++R)f[M][R]=d[M][R]/E;T&&(f[M][2]*=-1),E<0&&(S<0||f[M][2]<f[S][2])&&(S=M)}if(S<0){S=0;for(var D=0;D<3;++D){for(var j=(D+2)%3,H=(D+1)%3,Y=-1,X=-1,Z=0;Z<2;++Z){var W=(U=Z<<D)+(Z<<j)+(1-Z<<H),re=U+(1-Z<<j)+(Z<<H);l(f[U],f[W],f[re],h)<0||(Z?Y=1:X=1)}if(Y<0||X<0)X>Y&&(S|=1<<D);else{for(Z=0;Z<2;++Z){W=(U=Z<<D)+(Z<<j)+(1-Z<<H);var U,B=p([d[U],d[W],d[re=U+(1-Z<<j)+(Z<<H)],d[U+(1<<j)+(1<<H)]]);Z?Y=B:X=B}X>Y&&(S|=1<<D)}}}var V=7^S,ee=-1;for(M=0;M<8;++M)M!==S&&M!==V&&(ee<0||f[ee][1]>f[M][1])&&(ee=M);var N=-1;for(M=0;M<3;++M)(J=ee^1<<M)!==S&&J!==V&&(N<0&&(N=J),(H=f[J])[0]<f[N][0]&&(N=J));var K=-1;for(M=0;M<3;++M){var J;(J=ee^1<<M)!==S&&J!==V&&J!==N&&(K<0&&(K=J),(H=f[J])[0]>f[K][0]&&(K=J))}var te=c;te[0]=te[1]=te[2]=0,te[e.log2(N^ee)]=ee&N,te[e.log2(ee^K)]=ee&K;var ae=7^K;ae===S||ae===V?te[e.log2(K^(ae=7^N))]=ae&K:te[e.log2(N^ae)]=ae&N;var le=a,se=S;for(D=0;D<3;++D)le[D]=se&1<<D?-1:1;return y};var e=g("bit-twiddle"),n=g("gl-mat4/multiply"),i=g("split-polygon"),l=g("robust-orientation"),r=new Array(16),d=new Array(8),f=new Array(8),t=new Array(3),h=[0,0,0];function s(u,_,b){for(var w=0;w<4;++w){u[w]=b[12+w];for(var T=0;T<3;++T)u[w]+=_[T]*b[4*T+w]}}!function(){for(var u=0;u<8;++u)d[u]=[1,1,1,1],f[u]=[1,1,1]}();var o=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function p(u){for(var _=0;_<o.length;++_)if((u=i.positive(u,o[_])).length<3)return 0;var b=u[0],w=b[0]/b[3],T=b[1]/b[3],C=0;for(_=1;_+1<u.length;++_){var M=u[_],I=u[_+1];C+=Math.abs((M[0]/M[3]-w)*(I[1]/I[3]-T)-(M[1]/M[3]-T)*(I[0]/I[3]-w))}return C}var c=[1,1,1],a=[0,0,0],y={cubeEdges:c,axis:a}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(g,k,x){"use strict";k.exports=function(c,a,y){var u=[],_=[0,0,0],b=[0,0,0],w=[0,0,0],T=[0,0,0];u.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var C=0;C<3;++C){for(var M=u.length/3|0,I=0;I<y[C].length;++I){var P=+y[C][I].x;u.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var S=u.length/3|0;_[C]=M,b[C]=S-M,M=u.length/3|0;for(var E=0;E<y[C].length;++E)u.push(P=+y[C][E].x,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1);S=u.length/3|0,w[C]=M,T[C]=S-M}var R=e(c,new Float32Array(u)),D=n(c,[{buffer:R,type:c.FLOAT,size:3,stride:0,offset:0}]),j=i(c);return j.attributes.position.location=0,new o(c,R,D,j,b,_,T,w)};var e=g("gl-buffer"),n=g("gl-vao"),i=g("./shaders").line,l=[0,0,0],r=[0,0,0],d=[0,0,0],f=[0,0,0],t=[1,1];function h(c){return c[0]=c[1]=c[2]=0,c}function s(c,a){return c[0]=a[0],c[1]=a[1],c[2]=a[2],c}function o(c,a,y,u,_,b,w,T){this.gl=c,this.vertBuffer=a,this.vao=y,this.shader=u,this.tickCount=_,this.tickOffset=b,this.gridCount=w,this.gridOffset=T}var p=o.prototype;p.bind=function(c,a,y){this.shader.bind(),this.shader.uniforms.model=c,this.shader.uniforms.view=a,this.shader.uniforms.projection=y,t[0]=this.gl.drawingBufferWidth,t[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=t,this.vao.bind()},p.unbind=function(){this.vao.unbind()},p.drawAxisLine=function(c,a,y,u,_){var b=h(r);this.shader.uniforms.majorAxis=r,b[c]=a[1][c]-a[0][c],this.shader.uniforms.minorAxis=b;var w,T=s(f,y);T[c]+=a[0][c],this.shader.uniforms.offset=T,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=u,(w=h(d))[(c+2)%3]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,6),(w=h(d))[(c+1)%3]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,6)},p.drawAxisTicks=function(c,a,y,u,_){if(this.tickCount[c]){var b=h(l);b[c]=1,this.shader.uniforms.majorAxis=b,this.shader.uniforms.offset=a,this.shader.uniforms.minorAxis=y,this.shader.uniforms.color=u,this.shader.uniforms.lineWidth=_;var w=h(d);w[c]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,this.tickCount[c],this.tickOffset[c])}},p.drawGrid=function(c,a,y,u,_,b){if(this.gridCount[c]){var w=h(r);w[a]=y[1][a]-y[0][a],this.shader.uniforms.minorAxis=w;var T=s(f,u);T[a]+=y[0][a],this.shader.uniforms.offset=T;var C=h(l);C[c]=1,this.shader.uniforms.majorAxis=C;var M=h(d);M[c]=1,this.shader.uniforms.screenAxis=M,this.shader.uniforms.lineWidth=b,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,this.gridCount[c],this.gridOffset[c])}},p.drawZero=function(c,a,y,u,_,b){var w=h(r);this.shader.uniforms.majorAxis=w,w[c]=y[1][c]-y[0][c],this.shader.uniforms.minorAxis=w;var T=s(f,u);T[c]+=y[0][c],this.shader.uniforms.offset=T;var C=h(d);C[a]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=b,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,6)},p.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(g,k,x){"use strict";var e=g("glslify"),n=g("gl-shader"),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);x.line=function(h){return n(h,i,l,null,[{name:"position",type:"vec3"}])};var r=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),d=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);x.text=function(h){return n(h,r,d,null,[{name:"position",type:"vec3"}])};var f=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),t=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);x.bg=function(h){return n(h,f,t,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(g,k,x){(function(e){(function(){"use strict";k.exports=function(o,p,c,a,y,u){var _=n(o),b=i(o,[{buffer:_,size:3}]),w=r(o);w.attributes.position.location=0;var T=new t(o,w,_,b);return T.update(p,c,a,y,u),T};var n=g("gl-buffer"),i=g("gl-vao"),l=g("vectorize-text"),r=g("./shaders").text,d=window||e.global||{},f=d.__TEXT_CACHE||{};function t(o,p,c,a){this.gl=o,this.shader=p,this.buffer=c,this.vao=a,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}d.__TEXT_CACHE={};var h=t.prototype,s=[0,0];h.bind=function(o,p,c,a){this.vao.bind(),this.shader.bind();var y=this.shader.uniforms;y.model=o,y.view=p,y.projection=c,y.pixelScale=a,s[0]=this.gl.drawingBufferWidth,s[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=s},h.unbind=function(){this.vao.unbind()},h.update=function(o,p,c,a,y){var u=[];function _(S,E,R,D,j,H){var Y=f[R];Y||(Y=f[R]={});var X=Y[E];X||(X=Y[E]=function(K,J){try{return l(K,J)}catch(te){return console.warn('error vectorizing text:"'+K+'" error:',te),{cells:[],positions:[]}}}(E,{triangles:!0,font:R,textAlign:"center",textBaseline:"middle",lineSpacing:j,styletags:H}));for(var Z=(D||12)/12,W=X.positions,re=X.cells,U=0,B=re.length;U<B;++U)for(var V=re[U],ee=2;ee>=0;--ee){var N=W[V[ee]];u.push(Z*N[0],-Z*N[1],S)}}for(var b=[0,0,0],w=[0,0,0],T=[0,0,0],C=[0,0,0],M={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){T[I]=u.length/3|0,_(.5*(o[0][I]+o[1][I]),p[I],c[I],12,1.25,M),C[I]=(u.length/3|0)-T[I],b[I]=u.length/3|0;for(var P=0;P<a[I].length;++P)a[I][P].text&&_(a[I][P].x,a[I][P].text,a[I][P].font||y,a[I][P].fontSize||12,1.25,M);w[I]=(u.length/3|0)-b[I]}this.buffer.update(u),this.tickOffset=b,this.tickCount=w,this.labelOffset=T,this.labelCount=C},h.drawTicks=function(o,p,c,a,y,u,_,b){this.tickCount[o]&&(this.shader.uniforms.axis=u,this.shader.uniforms.color=y,this.shader.uniforms.angle=c,this.shader.uniforms.scale=p,this.shader.uniforms.offset=a,this.shader.uniforms.alignDir=_,this.shader.uniforms.alignOpt=b,this.vao.draw(this.gl.TRIANGLES,this.tickCount[o],this.tickOffset[o]))},h.drawLabel=function(o,p,c,a,y,u,_,b){this.labelCount[o]&&(this.shader.uniforms.axis=u,this.shader.uniforms.color=y,this.shader.uniforms.angle=c,this.shader.uniforms.scale=p,this.shader.uniforms.offset=a,this.shader.uniforms.alignDir=_,this.shader.uniforms.alignOpt=b,this.vao.draw(this.gl.TRIANGLES,this.labelCount[o],this.labelOffset[o]))},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,g("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(g,k,x){"use strict";function e(n,i){var l=n+"",r=l.indexOf("."),d=0;r>=0&&(d=l.length-r-1);var f=Math.pow(10,d),t=Math.round(n*i*f),h=t+"";if(h.indexOf("e")>=0)return h;var s=t/f,o=t%f;t<0?(s=0|-Math.ceil(s),o=0|-o):(s=0|Math.floor(s),o|=0);var p=""+s;if(t<0&&(p="-"+p),d){for(var c=""+o;c.length<d;)c="0"+c;return p+"."+c}return p}x.create=function(n,i){for(var l=[],r=0;r<3;++r){for(var d=[],f=0;f*i[r]<=n[1][r];++f)d.push({x:f*i[r],text:e(i[r],f)});for(f=-1;f*i[r]>=n[0][r];--f)d.push({x:f*i[r],text:e(i[r],f)});l.push(d)}return l},x.equal=function(n,i){for(var l=0;l<3;++l){if(n[l].length!==i[l].length)return!1;for(var r=0;r<n[l].length;++r){var d=n[l][r],f=i[l][r];if(d.x!==f.x||d.text!==f.text||d.font!==f.font||d.fontColor!==f.fontColor||d.fontSize!==f.fontSize||d.dx!==f.dx||d.dy!==f.dy)return!1}}return!0}},{}],77:[function(g,k,x){"use strict";k.exports=function(y,u,_,b,w){var T=u.model||f,C=u.view||f,M=u.projection||f,I=u._ortho||!1,P=y.bounds,S=(w=w||i(T,C,M,P,I)).axis;l(t,C,T),l(t,M,t);for(var E=c,R=0;R<3;++R)E[R].lo=1/0,E[R].hi=-1/0,E[R].pixelsPerDataUnit=1/0;var D=e(r(t,t));r(t,t);for(var j=0;j<3;++j){var H=(j+1)%3,Y=(j+2)%3,X=a;e:for(R=0;R<2;++R){var Z=[];if(S[j]<0!=!!R){X[j]=P[R][j];for(var W=0;W<2;++W){X[H]=P[W^R][H];for(var re=0;re<2;++re)X[Y]=P[re^W^R][Y],Z.push(X.slice())}var U=I?5:4;for(W=U;W===U;++W){if(0===Z.length)continue e;Z=n.positive(Z,D[W])}for(W=0;W<Z.length;++W){var B=p(a,t,Y=Z[W],_,b);for(re=0;re<3;++re)E[re].lo=Math.min(E[re].lo,Y[re]),E[re].hi=Math.max(E[re].hi,Y[re]),re!==j&&(E[re].pixelsPerDataUnit=Math.min(E[re].pixelsPerDataUnit,Math.abs(B[re])))}}}}return E};var e=g("extract-frustum-planes"),n=g("split-polygon"),i=g("./lib/cube.js"),l=g("gl-mat4/multiply"),r=g("gl-mat4/transpose"),d=g("gl-vec4/transformMat4"),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),t=new Float32Array(16);function h(y,u,_){this.lo=y,this.hi=u,this.pixelsPerDataUnit=_}var s=[0,0,0,1],o=[0,0,0,1];function p(y,u,_,b,w){for(var T=0;T<3;++T){for(var C=s,M=o,I=0;I<3;++I)M[I]=C[I]=_[I];M[3]=C[3]=1,M[T]+=1,d(M,M,u),M[3]<0&&(y[T]=1/0),C[T]-=1,d(C,C,u),C[3]<0&&(y[T]=1/0);var P=(C[0]/C[3]-M[0]/M[3])*b,S=(C[1]/C[3]-M[1]/M[3])*w;y[T]=.25*Math.sqrt(P*P+S*S)}return y}var c=[new h(1/0,-1/0,1/0),new h(1/0,-1/0,1/0),new h(1/0,-1/0,1/0)],a=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(g,k,x){"use strict";var e=g("typedarray-pool"),n=g("ndarray-ops"),i=g("ndarray"),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(h,s,o,p,c){this.gl=h,this.type=s,this.handle=o,this.length=p,this.usage=c}var d=r.prototype;function f(h,s,o,p,c,a){var y=c.length*c.BYTES_PER_ELEMENT;if(a<0)return h.bufferData(s,c,p),y;if(y+a>o)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return h.bufferSubData(s,a,c),o}d.bind=function(){this.gl.bindBuffer(this.type,this.handle)},d.unbind=function(){this.gl.bindBuffer(this.type,null)},d.dispose=function(){this.gl.deleteBuffer(this.handle)},d.update=function(h,s){if("number"!=typeof s&&(s=-1),this.bind(),"object"==typeof h&&void 0!==h.shape){var o=h.dtype;if(l.indexOf(o)<0&&(o="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(o=gl.getExtension("OES_element_index_uint")&&"uint16"!==o?"uint32":"uint16"),o===h.dtype&&function(y,u){for(var _=1,b=u.length-1;b>=0;--b){if(u[b]!==_)return!1;_*=y[b]}return!0}(h.shape,h.stride))this.length=f(this.gl,this.type,this.length,this.usage,0===h.offset&&h.data.length===h.shape[0]?h.data:h.data.subarray(h.offset,h.shape[0]),s);else{var p=e.malloc(h.size,o),c=i(p,h.shape);n.assign(c,h),this.length=f(this.gl,this.type,this.length,this.usage,s<0?p:p.subarray(0,h.size),s),e.free(p)}}else if(Array.isArray(h)){var a;a=function t(h,s){for(var o=e.malloc(h.length,s),p=h.length,c=0;c<p;++c)o[c]=h[c];return o}(h,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=f(this.gl,this.type,this.length,this.usage,s<0?a:a.subarray(0,h.length),s),e.free(a)}else if("object"==typeof h&&"number"==typeof h.length)this.length=f(this.gl,this.type,this.length,this.usage,h,s);else{if("number"!=typeof h&&void 0!==h)throw new Error("gl-buffer: Invalid data type");if(s>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(h|=0)<=0&&(h=1),this.gl.bufferData(this.type,0|h,this.usage),this.length=h}},k.exports=function(h,s,o,p){if(p=p||h.DYNAMIC_DRAW,(o=o||h.ARRAY_BUFFER)!==h.ARRAY_BUFFER&&o!==h.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(p!==h.DYNAMIC_DRAW&&p!==h.STATIC_DRAW&&p!==h.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var c=h.createBuffer(),a=new r(h,o,c,0,p);return a.update(s),a}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(g,k,x){"use strict";var e=g("gl-vec3");k.exports=function(i,l){var r=i.positions,d=i.vectors,f={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(0===i.positions.length)return l&&(l[0]=[0,0,0],l[1]=[0,0,0]),f;for(var t=0,h=1/0,s=-1/0,o=1/0,p=-1/0,c=1/0,a=-1/0,y=null,u=null,_=[],b=1/0,w=!1,T=0;T<r.length;T++){var C=r[T];h=Math.min(C[0],h),s=Math.max(C[0],s),o=Math.min(C[1],o),p=Math.max(C[1],p),c=Math.min(C[2],c),a=Math.max(C[2],a);var M=d[T];if(e.length(M)>t&&(t=e.length(M)),T){var I=2*e.distance(y,C)/(e.length(u)+e.length(M));I?(b=Math.min(b,I),w=!1):w=!0}w||(y=C,u=M),_.push(M)}var S=[s,p,a];l&&(l[0]=[h,o,c],l[1]=S),0===t&&(t=1);var E=1/t;isFinite(b)||(b=1),f.vectorScale=b;var R=i.coneSize||.5;i.absoluteConeSize&&(R=i.absoluteConeSize*E),f.coneScale=R,T=0;for(var D=0;T<r.length;T++)for(var j=(C=r[T])[0],H=C[1],Y=C[2],X=_[T],Z=e.length(X)*E,W=0;W<8;W++){f.positions.push([j,H,Y,D++]),f.positions.push([j,H,Y,D++]),f.positions.push([j,H,Y,D++]),f.positions.push([j,H,Y,D++]),f.positions.push([j,H,Y,D++]),f.positions.push([j,H,Y,D++]),f.vectors.push(X),f.vectors.push(X),f.vectors.push(X),f.vectors.push(X),f.vectors.push(X),f.vectors.push(X),f.vertexIntensity.push(Z,Z,Z),f.vertexIntensity.push(Z,Z,Z);var re=f.positions.length;f.cells.push([re-6,re-5,re-4],[re-3,re-2,re-1])}return f};var n=g("./lib/shaders");k.exports.createMesh=g("./create_mesh"),k.exports.createConeMesh=function(i,l){return k.exports.createMesh(i,l,{shaders:n,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(g,k,x){"use strict";var e=g("gl-shader"),n=g("gl-buffer"),i=g("gl-vao"),l=g("gl-texture2d"),r=g("gl-mat4/multiply"),d=g("gl-mat4/invert"),f=g("ndarray"),t=g("colormap"),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(a,y,u,_,b,w,T,C,M,I,P){this.gl=a,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=y,this.dirty=!0,this.triShader=u,this.pickShader=_,this.trianglePositions=b,this.triangleVectors=w,this.triangleColors=C,this.triangleUVs=M,this.triangleIds=T,this.triangleVAO=I,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=P,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=h,this._view=h,this._projection=h,this._resolution=[1,1]}var o=s.prototype;function p(a,y){var u=e(a,y.meshShader.vertex,y.meshShader.fragment,null,y.meshShader.attributes);return u.attributes.position.location=0,u.attributes.color.location=2,u.attributes.uv.location=3,u.attributes.vector.location=4,u}function c(a,y){var u=e(a,y.pickShader.vertex,y.pickShader.fragment,null,y.pickShader.attributes);return u.attributes.position.location=0,u.attributes.id.location=1,u.attributes.vector.location=4,u}o.isOpaque=function(){return this.opacity>=1},o.isTransparent=function(){return this.opacity<1},o.pickSlots=1,o.setPickBase=function(a){this.pickId=a},o.update=function(a){a=a||{};var y=this.gl;this.dirty=!0,"lightPosition"in a&&(this.lightPosition=a.lightPosition),"opacity"in a&&(this.opacity=a.opacity),"ambient"in a&&(this.ambientLight=a.ambient),"diffuse"in a&&(this.diffuseLight=a.diffuse),"specular"in a&&(this.specularLight=a.specular),"roughness"in a&&(this.roughness=a.roughness),"fresnel"in a&&(this.fresnel=a.fresnel),void 0!==a.tubeScale&&(this.tubeScale=a.tubeScale),void 0!==a.vectorScale&&(this.vectorScale=a.vectorScale),void 0!==a.coneScale&&(this.coneScale=a.coneScale),void 0!==a.coneOffset&&(this.coneOffset=a.coneOffset),a.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=y.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=y.LINEAR,this.texture.setPixels(function(ee){for(var N=t({colormap:ee,nshades:256,format:"rgba"}),K=new Uint8Array(1024),J=0;J<256;++J){for(var te=N[J],ae=0;ae<3;++ae)K[4*J+ae]=te[ae];K[4*J+3]=255*te[3]}return f(K,[256,256,4],[4,0,1])}(a.colormap)),this.texture.generateMipmap());var u=a.cells,_=a.positions,b=a.vectors;if(_&&u&&b){var w=[],T=[],C=[],M=[],I=[];this.cells=u,this.positions=_,this.vectors=b;var P=a.meshColor||[1,1,1,1],S=a.vertexIntensity,E=1/0,R=-1/0;if(S)if(a.vertexIntensityBounds)E=+a.vertexIntensityBounds[0],R=+a.vertexIntensityBounds[1];else for(var D=0;D<S.length;++D){var j=S[D];E=Math.min(E,j),R=Math.max(R,j)}else for(D=0;D<_.length;++D)j=_[D][2],E=Math.min(E,j),R=Math.max(R,j);for(this.intensity=S||function(ee){for(var N=ee.length,K=new Array(N),J=0;J<N;++J)K[J]=ee[J][2];return K}(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],D=0;D<_.length;++D)for(var H=_[D],Y=0;Y<3;++Y)!isNaN(H[Y])&&isFinite(H[Y])&&(this.bounds[0][Y]=Math.min(this.bounds[0][Y],H[Y]),this.bounds[1][Y]=Math.max(this.bounds[1][Y],H[Y]));var X=0;e:for(D=0;D<u.length;++D){var Z=u[D];if(3===Z.length){for(Y=0;Y<3;++Y){H=_[re=Z[Y]];for(var W=0;W<3;++W)if(isNaN(H[W])||!isFinite(H[W]))continue e}for(Y=0;Y<3;++Y){var re;H=_[re=Z[2-Y]],w.push(H[0],H[1],H[2],H[3]);var U=b[re];T.push(U[0],U[1],U[2],U[3]||0);var B;C.push(P[0],P[1],P[2],3===P.length?1:P[3]),M.push((B=S?[(S[re]-E)/(R-E),0]:[(H[2]-E)/(R-E),0])[0],B[1]),I.push(D)}X+=1}}this.triangleCount=X,this.trianglePositions.update(w),this.triangleVectors.update(T),this.triangleColors.update(C),this.triangleUVs.update(M),this.triangleIds.update(new Uint32Array(I))}},o.drawTransparent=o.draw=function(a){for(var y=this.gl,u=(a=a||{}).model||h,_=a.view||h,b=a.projection||h,w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)w[0][T]=Math.max(w[0][T],this.clipBounds[0][T]),w[1][T]=Math.min(w[1][T],this.clipBounds[1][T]);var C={model:u,view:_,projection:b,inverseModel:h.slice(),clipBounds:w,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};C.inverseModel=d(C.inverseModel,C.model),y.disable(y.CULL_FACE),this.texture.bind(0);var M=new Array(16);for(r(M,C.view,C.model),r(M,C.projection,M),d(M,M),T=0;T<3;++T)C.eyePosition[T]=M[12+T]/M[15];var I=M[15];for(T=0;T<3;++T)I+=this.lightPosition[T]*M[4*T+3];for(T=0;T<3;++T){for(var P=M[12+T],S=0;S<3;++S)P+=M[4*S+T]*this.lightPosition[S];C.lightPosition[T]=P/I}if(this.triangleCount>0){var E=this.triShader;E.bind(),E.uniforms=C,this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},o.drawPick=function(a){for(var y=this.gl,u=(a=a||{}).model||h,_=a.view||h,b=a.projection||h,w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)w[0][T]=Math.max(w[0][T],this.clipBounds[0][T]),w[1][T]=Math.min(w[1][T],this.clipBounds[1][T]);this._model=[].slice.call(u),this._view=[].slice.call(_),this._projection=[].slice.call(b),this._resolution=[y.drawingBufferWidth,y.drawingBufferHeight];var C={model:u,view:_,projection:b,clipBounds:w,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},M=this.pickShader;M.bind(),M.uniforms=C,this.triangleCount>0&&(this.triangleVAO.bind(),y.drawArrays(y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},o.pick=function(a){if(!a||a.id!==this.pickId)return null;var y=a.value[0]+256*a.value[1]+65536*a.value[2],u=this.cells[y],_=this.positions[u[1]].slice(0,3),b={position:_,dataCoordinate:_,index:Math.floor(u[1]/48)};return"cone"===this.traceType?b.index=Math.floor(u[1]/48):"streamtube"===this.traceType&&(b.intensity=this.intensity[u[1]],b.velocity=this.vectors[u[1]].slice(0,3),b.divergence=this.vectors[u[1]][3],b.index=y),b},o.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},k.exports=function(a,y,u){var _=u.shaders;1===arguments.length&&(a=(y=a).gl);var b=p(a,_),w=c(a,_),T=l(a,f(new Uint8Array([255,255,255,255]),[1,1,4]));T.generateMipmap(),T.minFilter=a.LINEAR_MIPMAP_LINEAR,T.magFilter=a.LINEAR;var C=n(a),M=n(a),I=n(a),P=n(a),S=n(a),R=new s(a,T,b,w,C,M,S,I,P,i(a,[{buffer:C,type:a.FLOAT,size:4},{buffer:S,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:I,type:a.FLOAT,size:4},{buffer:P,type:a.FLOAT,size:2},{buffer:M,type:a.FLOAT,size:4}]),u.traceType||"cone");return R.update(y),R}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(g,k,x){var e=g("glslify"),n=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),i=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);x.meshShader={vertex:n,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},x.pickShader={vertex:l,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(g,k,x){k.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(g,k,x){var e=g("./1.0/numbers");k.exports=function(n){return e[n]}},{"./1.0/numbers":82}],84:[function(g,k,x){"use strict";k.exports=function(s){var o=s.gl,p=e(o),c=n(o,[{buffer:p,type:o.FLOAT,size:3,offset:0,stride:40},{buffer:p,type:o.FLOAT,size:4,offset:12,stride:40},{buffer:p,type:o.FLOAT,size:3,offset:28,stride:40}]),a=i(o);a.attributes.position.location=0,a.attributes.color.location=1,a.attributes.offset.location=2;var y=new r(o,p,c,a);return y.update(s),y};var e=g("gl-buffer"),n=g("gl-vao"),i=g("./shaders/index"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(s,o,p,c){this.gl=s,this.shader=c,this.buffer=o,this.vao=p,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var d=r.prototype;function f(s,o){for(var p=0;p<3;++p)s[0][p]=Math.min(s[0][p],o[p]),s[1][p]=Math.max(s[1][p],o[p])}d.isOpaque=function(){return!this.hasAlpha},d.isTransparent=function(){return this.hasAlpha},d.drawTransparent=d.draw=function(s){var o=this.gl,p=this.shader.uniforms;this.shader.bind();var c=p.view=s.view||l,a=p.projection=s.projection||l;p.model=s.model||l,p.clipBounds=this.clipBounds,p.opacity=this.opacity;var w=(s._ortho?2:1)*this.pixelRatio*(a[3]*c[12]+a[7]*c[13]+a[11]*c[14]+a[15]*c[15])/o.drawingBufferHeight;this.vao.bind();for(var T=0;T<3;++T)o.lineWidth(this.lineWidth[T]*this.pixelRatio),p.capSize=this.capSize[T]*w,this.lineCount[T]&&o.drawArrays(o.LINES,this.lineOffset[T],this.lineCount[T]);this.vao.unbind()};var t=function(){for(var s=new Array(3),o=0;o<3;++o){for(var p=[],c=1;c<=2;++c)for(var a=-1;a<=1;a+=2){var y=[0,0,0];y[(c+o)%3]=a,p.push(y)}s[o]=p}return s}();function h(s,o,p,c){for(var a=t[c],y=0;y<a.length;++y){var u=a[y];s.push(o[0],o[1],o[2],p[0],p[1],p[2],p[3],u[0],u[1],u[2])}return a.length}d.update=function(s){"lineWidth"in(s=s||{})&&(this.lineWidth=s.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in s&&(this.capSize=s.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in s&&(this.opacity=+s.opacity,this.opacity<1&&(this.hasAlpha=!0));var o=s.color||[[0,0,0],[0,0,0],[0,0,0]],p=s.position,c=s.error;if(Array.isArray(o[0])||(o=[o,o,o]),p&&c){var a=[],y=p.length,u=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var _=0;_<3;++_){this.lineOffset[_]=u;e:for(var b=0;b<y;++b){for(var w=p[b],T=0;T<3;++T)if(isNaN(w[T])||!isFinite(w[T]))continue e;var I,C=c[b],M=o[_];Array.isArray(M[0])&&(M=o[b]),3===M.length?M=[M[0],M[1],M[2],1]:4===M.length&&(M=[M[0],M[1],M[2],M[3]],!this.hasAlpha&&M[3]<1&&(this.hasAlpha=!0)),isNaN(C[0][_])||isNaN(C[1][_])||(C[0][_]<0&&((I=w.slice())[_]+=C[0][_],a.push(w[0],w[1],w[2],M[0],M[1],M[2],M[3],0,0,0,I[0],I[1],I[2],M[0],M[1],M[2],M[3],0,0,0),f(this.bounds,I),u+=2+h(a,I,M,_)),C[1][_]>0&&((I=w.slice())[_]+=C[1][_],a.push(w[0],w[1],w[2],M[0],M[1],M[2],M[3],0,0,0,I[0],I[1],I[2],M[0],M[1],M[2],M[3],0,0,0),f(this.bounds,I),u+=2+h(a,I,M,_)))}this.lineCount[_]=u-this.lineOffset[_]}this.buffer.update(a)}},d.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(g,k,x){"use strict";var e=g("glslify"),n=g("gl-shader"),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);k.exports=function(r){return n(r,i,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(g,k,x){"use strict";var e=g("gl-texture2d");k.exports=function(y,u,_,b){n||(n=y.FRAMEBUFFER_UNSUPPORTED,i=y.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,l=y.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=y.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var w=y.getExtension("WEBGL_draw_buffers");if(!d&&w&&function(E,R){var D=E.getParameter(R.MAX_COLOR_ATTACHMENTS_WEBGL);d=new Array(D+1);for(var j=0;j<=D;++j){for(var H=new Array(D),Y=0;Y<j;++Y)H[Y]=E.COLOR_ATTACHMENT0+Y;for(Y=j;Y<D;++Y)H[Y]=E.NONE;d[j]=H}}(y,w),Array.isArray(u)&&(b=_,_=0|u[1],u=0|u[0]),"number"!=typeof u)throw new Error("gl-fbo: Missing shape parameter");var T=y.getParameter(y.MAX_RENDERBUFFER_SIZE);if(u<0||u>T||_<0||_>T)throw new Error("gl-fbo: Parameters are too large for FBO");var C=1;if("color"in(b=b||{})){if((C=Math.max(0|b.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(C>1){if(!w)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(C>y.getParameter(w.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+C+" draw buffers")}}var M=y.UNSIGNED_BYTE,I=y.getExtension("OES_texture_float");if(b.float&&C>0){if(!I)throw new Error("gl-fbo: Context does not support floating point textures");M=y.FLOAT}else b.preferFloat&&C>0&&I&&(M=y.FLOAT);var P=!0;"depth"in b&&(P=!!b.depth);var S=!1;return"stencil"in b&&(S=!!b.stencil),new p(y,u,_,M,C,P,S,w)};var n,i,l,r,d=null;function f(y){return[y.getParameter(y.FRAMEBUFFER_BINDING),y.getParameter(y.RENDERBUFFER_BINDING),y.getParameter(y.TEXTURE_BINDING_2D)]}function t(y,u){y.bindFramebuffer(y.FRAMEBUFFER,u[0]),y.bindRenderbuffer(y.RENDERBUFFER,u[1]),y.bindTexture(y.TEXTURE_2D,u[2])}function h(y){switch(y){case n:throw new Error("gl-fbo: Framebuffer unsupported");case i:throw new Error("gl-fbo: Framebuffer incomplete attachment");case l:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function s(y,u,_,b,w,T){if(!b)return null;var C=e(y,u,_,w,b);return C.magFilter=y.NEAREST,C.minFilter=y.NEAREST,C.mipSamples=1,C.bind(),y.framebufferTexture2D(y.FRAMEBUFFER,T,y.TEXTURE_2D,C.handle,0),C}function o(y,u,_,b,w){var T=y.createRenderbuffer();return y.bindRenderbuffer(y.RENDERBUFFER,T),y.renderbufferStorage(y.RENDERBUFFER,b,u,_),y.framebufferRenderbuffer(y.FRAMEBUFFER,w,y.RENDERBUFFER,T),T}function p(y,u,_,b,w,T,C,M){this.gl=y,this._shape=[0|u,0|_],this._destroyed=!1,this._ext=M,this.color=new Array(w);for(var I=0;I<w;++I)this.color[I]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=b,this._useDepth=T,this._useStencil=C;var P=this,S=[0|u,0|_];Object.defineProperties(S,{0:{get:function(){return P._shape[0]},set:function(E){return P.width=E}},1:{get:function(){return P._shape[1]},set:function(E){return P.height=E}}}),this._shapeVector=S,function(E){var R=f(E.gl),D=E.gl,j=E.handle=D.createFramebuffer(),H=E._shape[0],Y=E._shape[1],X=E.color.length,Z=E._ext,W=E._useStencil,re=E._useDepth,U=E._colorType;D.bindFramebuffer(D.FRAMEBUFFER,j);for(var B=0;B<X;++B)E.color[B]=s(D,H,Y,U,D.RGBA,D.COLOR_ATTACHMENT0+B);0===X?(E._color_rb=o(D,H,Y,D.RGBA4,D.COLOR_ATTACHMENT0),Z&&Z.drawBuffersWEBGL(d[0])):X>1&&Z.drawBuffersWEBGL(d[X]);var V=D.getExtension("WEBGL_depth_texture");V?W?E.depth=s(D,H,Y,V.UNSIGNED_INT_24_8_WEBGL,D.DEPTH_STENCIL,D.DEPTH_STENCIL_ATTACHMENT):re&&(E.depth=s(D,H,Y,D.UNSIGNED_SHORT,D.DEPTH_COMPONENT,D.DEPTH_ATTACHMENT)):re&&W?E._depth_rb=o(D,H,Y,D.DEPTH_STENCIL,D.DEPTH_STENCIL_ATTACHMENT):re?E._depth_rb=o(D,H,Y,D.DEPTH_COMPONENT16,D.DEPTH_ATTACHMENT):W&&(E._depth_rb=o(D,H,Y,D.STENCIL_INDEX,D.STENCIL_ATTACHMENT));var ee=D.checkFramebufferStatus(D.FRAMEBUFFER);if(ee!==D.FRAMEBUFFER_COMPLETE){for(E._destroyed=!0,D.bindFramebuffer(D.FRAMEBUFFER,null),D.deleteFramebuffer(E.handle),E.handle=null,E.depth&&(E.depth.dispose(),E.depth=null),E._depth_rb&&(D.deleteRenderbuffer(E._depth_rb),E._depth_rb=null),B=0;B<E.color.length;++B)E.color[B].dispose(),E.color[B]=null;E._color_rb&&(D.deleteRenderbuffer(E._color_rb),E._color_rb=null),t(D,R),h(ee)}t(D,R)}(this)}var c=p.prototype;function a(y,u,_){if(y._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(y._shape[0]!==u||y._shape[1]!==_){var b=y.gl,w=b.getParameter(b.MAX_RENDERBUFFER_SIZE);if(u<0||u>w||_<0||_>w)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");y._shape[0]=u,y._shape[1]=_;for(var T=f(b),C=0;C<y.color.length;++C)y.color[C].shape=y._shape;y._color_rb&&(b.bindRenderbuffer(b.RENDERBUFFER,y._color_rb),b.renderbufferStorage(b.RENDERBUFFER,b.RGBA4,y._shape[0],y._shape[1])),y.depth&&(y.depth.shape=y._shape),y._depth_rb&&(b.bindRenderbuffer(b.RENDERBUFFER,y._depth_rb),y._useDepth&&y._useStencil?b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_STENCIL,y._shape[0],y._shape[1]):y._useDepth?b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,y._shape[0],y._shape[1]):y._useStencil&&b.renderbufferStorage(b.RENDERBUFFER,b.STENCIL_INDEX,y._shape[0],y._shape[1])),b.bindFramebuffer(b.FRAMEBUFFER,y.handle);var M=b.checkFramebufferStatus(b.FRAMEBUFFER);M!==b.FRAMEBUFFER_COMPLETE&&(y.dispose(),t(b,T),h(M)),t(b,T)}}Object.defineProperties(c,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(y){if(Array.isArray(y)||(y=[0|y,0|y]),2!==y.length)throw new Error("gl-fbo: Shape vector must be length 2");var u=0|y[0],_=0|y[1];return a(this,u,_),[u,_]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(y){return a(this,y|=0,this._shape[1]),y},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(y){return a(this,this._shape[0],y|=0),y},enumerable:!1}}),c.bind=function(){if(!this._destroyed){var y=this.gl;y.bindFramebuffer(y.FRAMEBUFFER,this.handle),y.viewport(0,0,this._shape[0],this._shape[1])}},c.dispose=function(){if(!this._destroyed){this._destroyed=!0;var y=this.gl;y.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(y.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var u=0;u<this.color.length;++u)this.color[u].dispose(),this.color[u]=null;this._color_rb&&(y.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(g,k,x){var e=g("sprintf-js").sprintf,n=g("gl-constants/lookup"),i=g("glsl-shader-name"),l=g("add-line-numbers");k.exports=function(r,d,f){"use strict";var t=i(d)||"of unknown name (see npm glsl-shader-name)",h="unknown type";void 0!==f&&(h=f===n.FRAGMENT_SHADER?"fragment":"vertex");for(var s=e("Error compiling %s shader %s:\n",h,t),o=e("%s%s",s,r),p=r.split("\n"),c={},a=0;a<p.length;a++){var y=p[a];if(""!==y&&"\0"!==y){var u=parseInt(y.split(":")[2]);if(isNaN(u))throw new Error(e("Could not parse error: %s",y));c[u]=y}}var _=l(d).split("\n");for(a=0;a<_.length;a++)if((c[a+3]||c[a+2]||c[a+1])&&(s+=_[a]+"\n",c[a+1])){var w=c[a+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),s+=e("^^^ %s\n\n",w)}return{long:s.trim(),short:o.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(g,k,x){"use strict";k.exports=function(o,p){var c=o.gl,T=new f(o,l(c,d.vertex,d.fragment),l(c,d.pickVertex,d.pickFragment),r(c),r(c),r(c),r(c));return T.update(p),o.addObject(T),T};var e=g("binary-search-bounds"),n=g("iota-array"),i=g("typedarray-pool"),l=g("gl-shader"),r=g("gl-buffer"),d=g("./lib/shaders");function f(o,p,c,a,y,u,_){this.plot=o,this.shader=p,this.pickShader=c,this.positionBuffer=a,this.weightBuffer=y,this.colorBuffer=u,this.idBuffer=_,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var t,o,p,h=f.prototype,s=[0,0,1,0,0,1,1,0,1,1,0,1];h.draw=(t=[1,0,0,0,1,0,0,0,1],function(){var o=this.plot,p=this.shader,c=this.bounds,a=this.numVertices;if(!(a<=0)){var y=o.gl,u=o.dataBox,b=c[3]-c[1],w=u[2]-u[0],T=u[3]-u[1];t[0]=2*(c[2]-c[0])/w,t[4]=2*b/T,t[6]=2*(c[0]-u[0])/w-1,t[7]=2*(c[1]-u[1])/T-1,p.bind();var C=p.uniforms;C.viewTransform=t,C.shape=this.shape;var M=p.attributes;this.positionBuffer.bind(),M.position.pointer(),this.weightBuffer.bind(),M.weight.pointer(y.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),M.color.pointer(y.UNSIGNED_BYTE,!0),y.drawArrays(y.TRIANGLES,0,a)}}),h.drawPick=(o=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0],function(c){var a=this.plot,y=this.pickShader,u=this.bounds,_=this.numVertices;if(!(_<=0)){var b=a.gl,w=a.dataBox,C=u[3]-u[1],M=w[2]-w[0],I=w[3]-w[1];o[0]=2*(u[2]-u[0])/M,o[4]=2*C/I,o[6]=2*(u[0]-w[0])/M-1,o[7]=2*(u[1]-w[1])/I-1;for(var P=0;P<4;++P)p[P]=c>>8*P&255;this.pickOffset=c,y.bind();var S=y.uniforms;S.viewTransform=o,S.pickOffset=p,S.shape=this.shape;var E=y.attributes;return this.positionBuffer.bind(),E.position.pointer(),this.weightBuffer.bind(),E.weight.pointer(b.UNSIGNED_BYTE,!1),this.idBuffer.bind(),E.pickId.pointer(b.UNSIGNED_BYTE,!1),b.drawArrays(b.TRIANGLES,0,_),c+this.shape[0]*this.shape[1]}}),h.pick=function(o,p,c){var a=this.pickOffset;if(c<a||c>=a+this.shape[0]*this.shape[1])return null;var u=c-a;return{object:this,pointId:u,dataCoord:[this.xData[u%this.shape[0]],this.yData[u/this.shape[0]|0]]}},h.update=function(o){var p=(o=o||{}).shape||[0,0],c=o.x||n(p[0]),a=o.y||n(p[1]),y=o.z||new Float32Array(p[0]*p[1]),u=!1!==o.zsmooth;this.xData=c,this.yData=a;var _,b,w,T,C=o.colorLevels||[0],M=o.colorValues||[0,0,0,1],I=C.length,P=this.bounds;u?(_=P[0]=c[0],b=P[1]=a[0],w=P[2]=c[c.length-1],T=P[3]=a[a.length-1]):(_=P[0]=c[0]+(c[1]-c[0])/2,b=P[1]=a[0]+(a[1]-a[0])/2,w=P[2]=c[c.length-1]+(c[c.length-1]-c[c.length-2])/2,T=P[3]=a[a.length-1]+(a[a.length-1]-a[a.length-2])/2);var S=1/(w-_),E=1/(T-b),R=p[0],D=p[1];this.shape=[R,D];var j=(u?(R-1)*(D-1):R*D)*(s.length>>>1);this.numVertices=j;for(var H=i.mallocUint8(4*j),Y=i.mallocFloat32(2*j),X=i.mallocUint8(2*j),Z=i.mallocUint32(j),W=0,re=u?R-1:R,U=u?D-1:D,B=0;B<U;++B){var V,ee;u?(V=E*(a[B]-b),ee=E*(a[B+1]-b)):(V=B<D-1?E*(a[B]-(a[B+1]-a[B])/2-b):E*(a[B]-(a[B]-a[B-1])/2-b),ee=B<D-1?E*(a[B]+(a[B+1]-a[B])/2-b):E*(a[B]+(a[B]-a[B-1])/2-b));for(var N=0;N<re;++N){var K,J;u?(K=S*(c[N]-_),J=S*(c[N+1]-_)):(K=N<R-1?S*(c[N]-(c[N+1]-c[N])/2-_):S*(c[N]-(c[N]-c[N-1])/2-_),J=N<R-1?S*(c[N]+(c[N+1]-c[N])/2-_):S*(c[N]+(c[N]-c[N-1])/2-_));for(var te=0;te<s.length;te+=2){var ae,le,se,ve,ue=s[te],ye=s[te+1],Me=y[u?(B+ye)*R+(N+ue):B*R+N],pe=e.le(C,Me);if(pe<0)ae=M[0],le=M[1],se=M[2],ve=M[3];else if(pe===I-1)ae=M[4*I-4],le=M[4*I-3],se=M[4*I-2],ve=M[4*I-1];else{var ge=(Me-C[pe])/(C[pe+1]-C[pe]),we=1-ge,oe=4*pe,de=4*(pe+1);ae=we*M[oe]+ge*M[de],le=we*M[oe+1]+ge*M[de+1],se=we*M[oe+2]+ge*M[de+2],ve=we*M[oe+3]+ge*M[de+3]}H[4*W]=255*ae,H[4*W+1]=255*le,H[4*W+2]=255*se,H[4*W+3]=255*ve,Y[2*W]=.5*K+.5*J,Y[2*W+1]=.5*V+.5*ee,X[2*W]=ue,X[2*W+1]=ye,Z[W]=B*R+N,W+=1}}}this.positionBuffer.update(Y),this.weightBuffer.update(X),this.colorBuffer.update(H),this.idBuffer.update(Z),i.free(Y),i.free(H),i.free(X),i.free(Z)},h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(g,k,x){"use strict";var e=g("glslify");k.exports={fragment:e(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(g,k,x){var e=g("glslify"),n=g("gl-shader"),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),d=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];x.createShader=function(f){return n(f,i,l,null,d)},x.createPickShader=function(f){return n(f,i,r,null,d)}},{"gl-shader":132,glslify:231}],91:[function(g,k,x){"use strict";k.exports=function(_){var b=_.gl||_.scene&&_.scene.gl,w=h(b);w.attributes.position.location=0,w.attributes.nextPosition.location=1,w.attributes.arcLength.location=2,w.attributes.lineWidth.location=3,w.attributes.color.location=4;var T=s(b);T.attributes.position.location=0,T.attributes.nextPosition.location=1,T.attributes.arcLength.location=2,T.attributes.lineWidth.location=3,T.attributes.color.location=4;for(var C=e(b),M=n(b,[{buffer:C,size:3,offset:0,stride:48},{buffer:C,size:3,offset:12,stride:48},{buffer:C,size:1,offset:24,stride:48},{buffer:C,size:1,offset:28,stride:48},{buffer:C,size:4,offset:32,stride:48}]),I=f(new Array(1024),[256,1,4]),P=0;P<1024;++P)I.data[P]=255;var S=i(b,I);S.wrap=b.REPEAT;var E=new y(b,w,T,C,M,S);return E.update(_),E};var e=g("gl-buffer"),n=g("gl-vao"),i=g("gl-texture2d"),l=new Uint8Array(4),r=new Float32Array(l.buffer),d=g("binary-search-bounds"),f=g("ndarray"),t=g("./lib/shaders"),h=t.createShader,s=t.createPickShader,o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(_,b){for(var w=0,T=0;T<3;++T){var C=_[T]-b[T];w+=C*C}return Math.sqrt(w)}function c(_){for(var b=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)b[0][w]=Math.max(_[0][w],b[0][w]),b[1][w]=Math.min(_[1][w],b[1][w]);return b}function a(_,b,w,T){this.arcLength=_,this.position=b,this.index=w,this.dataCoordinate=T}function y(_,b,w,T,C,M){this.gl=_,this.shader=b,this.pickShader=w,this.buffer=T,this.vao=C,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=M,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var u=y.prototype;u.isTransparent=function(){return this.hasAlpha},u.isOpaque=function(){return!this.hasAlpha},u.pickSlots=1,u.setPickBase=function(_){this.pickId=_},u.drawTransparent=u.draw=function(_){if(this.vertexCount){var b=this.gl,w=this.shader,T=this.vao;w.bind(),w.uniforms={model:_.model||o,view:_.view||o,projection:_.projection||o,clipBounds:c(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},T.bind(),T.draw(b.TRIANGLE_STRIP,this.vertexCount),T.unbind()}},u.drawPick=function(_){if(this.vertexCount){var b=this.gl,w=this.pickShader,T=this.vao;w.bind(),w.uniforms={model:_.model||o,view:_.view||o,projection:_.projection||o,pickId:this.pickId,clipBounds:c(this.clipBounds),screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},T.bind(),T.draw(b.TRIANGLE_STRIP,this.vertexCount),T.unbind()}},u.update=function(_){var b,w;this.dirty=!0;var T=!!_.connectGaps;"dashScale"in _&&(this.dashScale=_.dashScale),this.hasAlpha=!1,"opacity"in _&&(this.opacity=+_.opacity,this.opacity<1&&(this.hasAlpha=!0));var C=[],M=[],I=[],P=0,S=0,E=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=_.position||_.positions;if(R){var D=_.color||_.colors||[0,0,0,1],j=_.lineWidth||1,H=!1;e:for(b=1;b<R.length;++b){var Y,X,Z,W=R[b-1],re=R[b];for(M.push(P),I.push(W.slice()),w=0;w<3;++w){if(isNaN(W[w])||isNaN(re[w])||!isFinite(W[w])||!isFinite(re[w])){if(!T&&C.length>0){for(var U=0;U<24;++U)C.push(C[C.length-12]);S+=2,H=!0}continue e}E[0][w]=Math.min(E[0][w],W[w],re[w]),E[1][w]=Math.max(E[1][w],W[w],re[w])}Array.isArray(D[0])?(Y=D.length>b-1?D[b-1]:D.length>0?D[D.length-1]:[0,0,0,1],X=D.length>b?D[b]:D.length>0?D[D.length-1]:[0,0,0,1]):Y=X=D,3===Y.length&&(Y=[Y[0],Y[1],Y[2],1]),3===X.length&&(X=[X[0],X[1],X[2],1]),!this.hasAlpha&&Y[3]<1&&(this.hasAlpha=!0),Z=Array.isArray(j)?j.length>b-1?j[b-1]:j.length>0?j[j.length-1]:[0,0,0,1]:j;var B=P;if(P+=p(W,re),H){for(w=0;w<2;++w)C.push(W[0],W[1],W[2],re[0],re[1],re[2],B,Z,Y[0],Y[1],Y[2],Y[3]);S+=2,H=!1}C.push(W[0],W[1],W[2],re[0],re[1],re[2],B,Z,Y[0],Y[1],Y[2],Y[3],W[0],W[1],W[2],re[0],re[1],re[2],B,-Z,Y[0],Y[1],Y[2],Y[3],re[0],re[1],re[2],W[0],W[1],W[2],P,-Z,X[0],X[1],X[2],X[3],re[0],re[1],re[2],W[0],W[1],W[2],P,Z,X[0],X[1],X[2],X[3]),S+=4}}if(this.buffer.update(C),M.push(P),I.push(R[R.length-1].slice()),this.bounds=E,this.vertexCount=S,this.points=I,this.arcLength=M,"dashes"in _){var V=_.dashes.slice();for(V.unshift(0),b=1;b<V.length;++b)V[b]=V[b-1]+V[b];var ee=f(new Array(1024),[256,1,4]);for(b=0;b<256;++b){for(w=0;w<4;++w)ee.set(b,0,w,0);1&d.le(V,V[V.length-1]*b/255)?ee.set(b,0,0,0):ee.set(b,0,0,255)}this.texture.setPixels(ee)}},u.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},u.pick=function(_){if(!_||_.id!==this.pickId)return null;var R,D,j,b=(R=_.value[0],D=_.value[1],j=_.value[2],l[0]=0,l[1]=j,l[2]=D,l[3]=R,r[0]),w=d.le(this.arcLength,b);if(w<0)return null;if(w===this.arcLength.length-1)return new a(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),w);for(var T=this.points[w],C=this.points[Math.min(w+1,this.points.length-1)],M=(b-this.arcLength[w])/(this.arcLength[w+1]-this.arcLength[w]),I=1-M,P=[0,0,0],S=0;S<3;++S)P[S]=I*T[S]+M*C[S];var E=Math.min(M<.5?w:w+1,this.points.length-1);return new a(b,P,E,this.points[E])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(g,k,x){k.exports=function(e){var n=new Float32Array(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}},{}],93:[function(g,k,x){k.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(g,k,x){k.exports=function(e){var n=e[0],i=e[1],l=e[2],r=e[3],d=e[4],f=e[5],t=e[6],h=e[7],s=e[8],o=e[9],p=e[10],c=e[11],a=e[12],y=e[13],u=e[14],_=e[15];return(n*f-i*d)*(p*_-c*u)-(n*t-l*d)*(o*_-c*y)+(n*h-r*d)*(o*u-p*y)+(i*t-l*f)*(s*_-c*a)-(i*h-r*f)*(s*u-p*a)+(l*h-r*t)*(s*y-o*a)}},{}],95:[function(g,k,x){k.exports=function(e,n){var i=n[0],l=n[1],r=n[2],d=n[3],f=i+i,t=l+l,h=r+r,s=i*f,o=l*f,p=l*t,c=r*f,a=r*t,y=r*h,u=d*f,_=d*t,b=d*h;return e[0]=1-p-y,e[1]=o+b,e[2]=c-_,e[3]=0,e[4]=o-b,e[5]=1-s-y,e[6]=a+u,e[7]=0,e[8]=c+_,e[9]=a-u,e[10]=1-s-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(g,k,x){k.exports=function(e,n,i){var l=n[0],r=n[1],d=n[2],f=n[3],t=l+l,h=r+r,s=d+d,o=l*t,p=l*h,c=l*s,a=r*h,y=r*s,u=d*s,_=f*t,b=f*h,w=f*s;return e[0]=1-(a+u),e[1]=p+w,e[2]=c-b,e[3]=0,e[4]=p-w,e[5]=1-(o+u),e[6]=y+_,e[7]=0,e[8]=c+b,e[9]=y-_,e[10]=1-(o+a),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}},{}],97:[function(g,k,x){k.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(g,k,x){k.exports=function(e,n){var i=n[0],l=n[1],r=n[2],d=n[3],f=n[4],t=n[5],h=n[6],s=n[7],o=n[8],p=n[9],c=n[10],a=n[11],y=n[12],u=n[13],_=n[14],b=n[15],w=i*t-l*f,T=i*h-r*f,C=i*s-d*f,M=l*h-r*t,I=l*s-d*t,P=r*s-d*h,S=o*u-p*y,E=o*_-c*y,R=o*b-a*y,D=p*_-c*u,j=p*b-a*u,H=c*b-a*_,Y=w*H-T*j+C*D+M*R-I*E+P*S;return Y?(e[0]=(t*H-h*j+s*D)*(Y=1/Y),e[1]=(r*j-l*H-d*D)*Y,e[2]=(u*P-_*I+b*M)*Y,e[3]=(c*I-p*P-a*M)*Y,e[4]=(h*R-f*H-s*E)*Y,e[5]=(i*H-r*R+d*E)*Y,e[6]=(_*C-y*P-b*T)*Y,e[7]=(o*P-c*C+a*T)*Y,e[8]=(f*j-t*R+s*S)*Y,e[9]=(l*R-i*j-d*S)*Y,e[10]=(y*I-u*C+b*w)*Y,e[11]=(p*C-o*I-a*w)*Y,e[12]=(t*E-f*D-h*S)*Y,e[13]=(i*D-l*E+r*S)*Y,e[14]=(u*T-y*M-_*w)*Y,e[15]=(o*M-p*T+c*w)*Y,e):null}},{}],99:[function(g,k,x){var e=g("./identity");k.exports=function(n,i,l,r){var d,f,t,h,s,o,p,c,a,y,u=i[0],_=i[1],b=i[2],w=r[0],T=r[1],C=r[2],M=l[0],I=l[1],P=l[2];return Math.abs(u-M)<1e-6&&Math.abs(_-I)<1e-6&&Math.abs(b-P)<1e-6?e(n):(p=u-M,c=_-I,a=b-P,d=T*(a*=y=1/Math.sqrt(p*p+c*c+a*a))-C*(c*=y),f=C*(p*=y)-w*a,t=w*c-T*p,(y=Math.sqrt(d*d+f*f+t*t))?(d*=y=1/y,f*=y,t*=y):(d=0,f=0,t=0),h=c*t-a*f,s=a*d-p*t,o=p*f-c*d,(y=Math.sqrt(h*h+s*s+o*o))?(h*=y=1/y,s*=y,o*=y):(h=0,s=0,o=0),n[0]=d,n[1]=h,n[2]=p,n[3]=0,n[4]=f,n[5]=s,n[6]=c,n[7]=0,n[8]=t,n[9]=o,n[10]=a,n[11]=0,n[12]=-(d*u+f*_+t*b),n[13]=-(h*u+s*_+o*b),n[14]=-(p*u+c*_+a*b),n[15]=1,n)}},{"./identity":97}],100:[function(g,k,x){k.exports=function(e,n,i){var l=n[0],r=n[1],d=n[2],f=n[3],t=n[4],h=n[5],s=n[6],o=n[7],p=n[8],c=n[9],a=n[10],y=n[11],u=n[12],_=n[13],b=n[14],w=n[15],T=i[0],C=i[1],M=i[2],I=i[3];return e[0]=T*l+C*t+M*p+I*u,e[1]=T*r+C*h+M*c+I*_,e[2]=T*d+C*s+M*a+I*b,e[3]=T*f+C*o+M*y+I*w,e[4]=(T=i[4])*l+(C=i[5])*t+(M=i[6])*p+(I=i[7])*u,e[5]=T*r+C*h+M*c+I*_,e[6]=T*d+C*s+M*a+I*b,e[7]=T*f+C*o+M*y+I*w,e[8]=(T=i[8])*l+(C=i[9])*t+(M=i[10])*p+(I=i[11])*u,e[9]=T*r+C*h+M*c+I*_,e[10]=T*d+C*s+M*a+I*b,e[11]=T*f+C*o+M*y+I*w,e[12]=(T=i[12])*l+(C=i[13])*t+(M=i[14])*p+(I=i[15])*u,e[13]=T*r+C*h+M*c+I*_,e[14]=T*d+C*s+M*a+I*b,e[15]=T*f+C*o+M*y+I*w,e}},{}],101:[function(g,k,x){k.exports=function(e,n,i,l,r,d,f){var t=1/(n-i),h=1/(l-r),s=1/(d-f);return e[0]=-2*t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*s,e[11]=0,e[12]=(n+i)*t,e[13]=(r+l)*h,e[14]=(f+d)*s,e[15]=1,e}},{}],102:[function(g,k,x){k.exports=function(e,n,i,l,r){var d=1/Math.tan(n/2),f=1/(l-r);return e[0]=d/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+l)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*l*f,e[15]=0,e}},{}],103:[function(g,k,x){k.exports=function(e,n,i,l){var r,d,f,t,h,s,o,p,c,a,y,u,_,b,w,T,C,M,I,P,S,E,R,D,j=l[0],H=l[1],Y=l[2],X=Math.sqrt(j*j+H*H+Y*Y);return Math.abs(X)<1e-6?null:(j*=X=1/X,H*=X,Y*=X,r=Math.sin(i),d=Math.cos(i),h=n[1],s=n[2],o=n[3],c=n[5],a=n[6],y=n[7],_=n[9],b=n[10],w=n[11],I=j*H*(f=1-d)-Y*r,P=H*H*f+d,S=Y*H*f+j*r,E=j*Y*f+H*r,R=H*Y*f-j*r,D=Y*Y*f+d,e[0]=(t=n[0])*(T=j*j*f+d)+(p=n[4])*(C=H*j*f+Y*r)+(u=n[8])*(M=Y*j*f-H*r),e[1]=h*T+c*C+_*M,e[2]=s*T+a*C+b*M,e[3]=o*T+y*C+w*M,e[4]=t*I+p*P+u*S,e[5]=h*I+c*P+_*S,e[6]=s*I+a*P+b*S,e[7]=o*I+y*P+w*S,e[8]=t*E+p*R+u*D,e[9]=h*E+c*R+_*D,e[10]=s*E+a*R+b*D,e[11]=o*E+y*R+w*D,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)}},{}],104:[function(g,k,x){k.exports=function(e,n,i){var l=Math.sin(i),r=Math.cos(i),d=n[4],f=n[5],t=n[6],h=n[7],s=n[8],o=n[9],p=n[10],c=n[11];return n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[4]=d*r+s*l,e[5]=f*r+o*l,e[6]=t*r+p*l,e[7]=h*r+c*l,e[8]=s*r-d*l,e[9]=o*r-f*l,e[10]=p*r-t*l,e[11]=c*r-h*l,e}},{}],105:[function(g,k,x){k.exports=function(e,n,i){var l=Math.sin(i),r=Math.cos(i),d=n[0],f=n[1],t=n[2],h=n[3],s=n[8],o=n[9],p=n[10],c=n[11];return n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=d*r-s*l,e[1]=f*r-o*l,e[2]=t*r-p*l,e[3]=h*r-c*l,e[8]=d*l+s*r,e[9]=f*l+o*r,e[10]=t*l+p*r,e[11]=h*l+c*r,e}},{}],106:[function(g,k,x){k.exports=function(e,n,i){var l=Math.sin(i),r=Math.cos(i),d=n[0],f=n[1],t=n[2],h=n[3],s=n[4],o=n[5],p=n[6],c=n[7];return n!==e&&(e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=d*r+s*l,e[1]=f*r+o*l,e[2]=t*r+p*l,e[3]=h*r+c*l,e[4]=s*r-d*l,e[5]=o*r-f*l,e[6]=p*r-t*l,e[7]=c*r-h*l,e}},{}],107:[function(g,k,x){k.exports=function(e,n,i){var l=i[0],r=i[1],d=i[2];return e[0]=n[0]*l,e[1]=n[1]*l,e[2]=n[2]*l,e[3]=n[3]*l,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=n[7]*r,e[8]=n[8]*d,e[9]=n[9]*d,e[10]=n[10]*d,e[11]=n[11]*d,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}},{}],108:[function(g,k,x){k.exports=function(e,n,i){var l,r,d,f,t,h,s,o,p,c,a,y,u=i[0],_=i[1],b=i[2];return n===e?(e[12]=n[0]*u+n[4]*_+n[8]*b+n[12],e[13]=n[1]*u+n[5]*_+n[9]*b+n[13],e[14]=n[2]*u+n[6]*_+n[10]*b+n[14],e[15]=n[3]*u+n[7]*_+n[11]*b+n[15]):(r=n[1],d=n[2],f=n[3],t=n[4],h=n[5],s=n[6],o=n[7],p=n[8],c=n[9],a=n[10],y=n[11],e[0]=l=n[0],e[1]=r,e[2]=d,e[3]=f,e[4]=t,e[5]=h,e[6]=s,e[7]=o,e[8]=p,e[9]=c,e[10]=a,e[11]=y,e[12]=l*u+t*_+p*b+n[12],e[13]=r*u+h*_+c*b+n[13],e[14]=d*u+s*_+a*b+n[14],e[15]=f*u+o*_+y*b+n[15]),e}},{}],109:[function(g,k,x){k.exports=function(e,n){if(e===n){var i=n[1],l=n[2],r=n[3],d=n[6],f=n[7],t=n[11];e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=i,e[6]=n[9],e[7]=n[13],e[8]=l,e[9]=d,e[11]=n[14],e[12]=r,e[13]=f,e[14]=t}else e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=n[1],e[5]=n[5],e[6]=n[9],e[7]=n[13],e[8]=n[2],e[9]=n[6],e[10]=n[10],e[11]=n[14],e[12]=n[3],e[13]=n[7],e[14]=n[11],e[15]=n[15];return e}},{}],110:[function(g,k,x){"use strict";var e=g("barycentric"),n=g("polytope-closest-point/lib/closest_point_2d.js");function i(d,f){for(var t=[0,0,0,0],h=0;h<4;++h)for(var s=0;s<4;++s)t[s]+=d[4*h+s]*f[h];return t}function l(d,f,t,h,s){for(var o=i(h,i(t,i(f,[d[0],d[1],d[2],1]))),p=0;p<3;++p)o[p]/=o[3];return[.5*s[0]*(1+o[0]),.5*s[1]*(1-o[1])]}function r(d,f){for(var t=[0,0,0],h=0;h<d.length;++h)for(var s=d[h],o=f[h],p=0;p<3;++p)t[p]+=o*s[p];return t}k.exports=function(d,f,t,h,s,o){if(1===d.length)return[0,d[0].slice()];for(var p=new Array(d.length),c=0;c<d.length;++c)p[c]=l(d[c],t,h,s,o);var a=0,y=1/0;for(c=0;c<p.length;++c){for(var u=0,_=0;_<2;++_)u+=Math.pow(p[c][_]-f[_],2);u<y&&(y=u,a=c)}var b=function(T,C){if(2===T.length){for(var M=0,I=0,P=0;P<2;++P)M+=Math.pow(C[P]-T[0][P],2),I+=Math.pow(C[P]-T[1][P],2);return(M=Math.sqrt(M))+(I=Math.sqrt(I))<1e-6?[1,0]:[I/(M+I),M/(I+M)]}if(3===T.length){var S=[0,0];return n(T[0],T[1],T[2],C,S),e(T,S)}return[]}(p,f),w=0;for(c=0;c<3;++c){if(b[c]<-.001||b[c]>1.0001)return null;w+=b[c]}return Math.abs(w-1)>.001?null:[a,r(d,b),b]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(g,k,x){var e=g("glslify"),n=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),i=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),d=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),f=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),h=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),o=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),p=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);x.meshShader={vertex:n,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},x.wireShader={vertex:l,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},x.pointShader={vertex:d,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},x.pickShader={vertex:t,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},x.pointPickShader={vertex:s,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},x.contourShader={vertex:o,fragment:p,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(g,k,x){"use strict";var e=g("gl-shader"),n=g("gl-buffer"),i=g("gl-vao"),l=g("gl-texture2d"),r=g("normals"),d=g("gl-mat4/multiply"),f=g("gl-mat4/invert"),t=g("ndarray"),h=g("colormap"),s=g("simplicial-complex-contour"),o=g("typedarray-pool"),p=g("./lib/shaders"),c=g("./lib/closest-point"),a=p.meshShader,y=p.wireShader,u=p.pointShader,_=p.pickShader,b=p.pointPickShader,w=p.contourShader,T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function C(H,Y,X,Z,W,re,U,B,V,ee,N,K,J,te,ae,le,se,ve,ue,ye,Me,pe,ge,we,oe,de,Te){this.gl=H,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=Y,this.dirty=!0,this.triShader=X,this.lineShader=Z,this.pointShader=W,this.pickShader=re,this.pointPickShader=U,this.contourShader=B,this.trianglePositions=V,this.triangleColors=N,this.triangleNormals=J,this.triangleUVs=K,this.triangleIds=ee,this.triangleVAO=te,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ae,this.edgeColors=se,this.edgeUVs=ve,this.edgeIds=le,this.edgeVAO=ue,this.edgeCount=0,this.pointPositions=ye,this.pointColors=pe,this.pointUVs=ge,this.pointSizes=we,this.pointIds=Me,this.pointVAO=oe,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=de,this.contourVAO=Te,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=T,this._view=T,this._projection=T,this._resolution=[1,1]}var M=C.prototype;function I(H,Y){if(!Y||!Y.length)return 1;for(var X=0;X<Y.length;++X){if(Y.length<2)return 1;if(Y[X][0]===H)return Y[X][1];if(Y[X][0]>H&&X>0){var Z=(Y[X][0]-H)/(Y[X][0]-Y[X-1][0]);return Y[X][1]*(1-Z)+Z*Y[X-1][1]}}return 1}function P(H){var Y=e(H,a.vertex,a.fragment);return Y.attributes.position.location=0,Y.attributes.color.location=2,Y.attributes.uv.location=3,Y.attributes.normal.location=4,Y}function S(H){var Y=e(H,y.vertex,y.fragment);return Y.attributes.position.location=0,Y.attributes.color.location=2,Y.attributes.uv.location=3,Y}function E(H){var Y=e(H,u.vertex,u.fragment);return Y.attributes.position.location=0,Y.attributes.color.location=2,Y.attributes.uv.location=3,Y.attributes.pointSize.location=4,Y}function R(H){var Y=e(H,_.vertex,_.fragment);return Y.attributes.position.location=0,Y.attributes.id.location=1,Y}function D(H){var Y=e(H,b.vertex,b.fragment);return Y.attributes.position.location=0,Y.attributes.id.location=1,Y.attributes.pointSize.location=4,Y}function j(H){var Y=e(H,w.vertex,w.fragment);return Y.attributes.position.location=0,Y}M.isOpaque=function(){return!this.hasAlpha},M.isTransparent=function(){return this.hasAlpha},M.pickSlots=1,M.setPickBase=function(H){this.pickId=H},M.highlight=function(H){if(H&&this.contourEnable){for(var Y=s(this.cells,this.intensity,H.intensity),X=Y.cells,Z=Y.vertexIds,W=Y.vertexWeights,re=X.length,U=o.mallocFloat32(6*re),B=0,V=0;V<re;++V)for(var ee=X[V],N=0;N<2;++N){var K=ee[0];2===ee.length&&(K=ee[N]);for(var ae=W[K],le=1-ae,se=this.positions[Z[K][0]],ve=this.positions[Z[K][1]],ue=0;ue<3;++ue)U[B++]=ae*se[ue]+le*ve[ue]}this.contourCount=B/3|0,this.contourPositions.update(U.subarray(0,B)),o.free(U)}else this.contourCount=0},M.update=function(H){H=H||{};var Y=this.gl;this.dirty=!0,"contourEnable"in H&&(this.contourEnable=H.contourEnable),"contourColor"in H&&(this.contourColor=H.contourColor),"lineWidth"in H&&(this.lineWidth=H.lineWidth),"lightPosition"in H&&(this.lightPosition=H.lightPosition),this.hasAlpha=!1,"opacity"in H&&(this.opacity=H.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in H&&(this.opacityscale=H.opacityscale,this.hasAlpha=!0),"ambient"in H&&(this.ambientLight=H.ambient),"diffuse"in H&&(this.diffuseLight=H.diffuse),"specular"in H&&(this.specularLight=H.specular),"roughness"in H&&(this.roughness=H.roughness),"fresnel"in H&&(this.fresnel=H.fresnel),H.texture?(this.texture.dispose(),this.texture=l(Y,H.texture)):H.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=Y.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=Y.LINEAR,this.texture.setPixels(function(Zt,$t){for(var Xt=h({colormap:Zt,nshades:256,format:"rgba"}),cr=new Uint8Array(1024),Ft=0;Ft<256;++Ft){for(var Be=Xt[Ft],He=0;He<3;++He)cr[4*Ft+He]=Be[He];cr[4*Ft+3]=$t?255*I(Ft/255,$t):255*Be[3]}return t(cr,[256,256,4],[4,0,1])}(H.colormap,this.opacityscale)),this.texture.generateMipmap());var X=H.cells,Z=H.positions;if(Z&&X){var W=[],re=[],U=[],B=[],V=[],ee=[],N=[],K=[],J=[],te=[],ae=[],le=[],se=[],ve=[];this.cells=X,this.positions=Z;var ue=H.vertexNormals,ye=H.cellNormals,Me=void 0===H.vertexNormalsEpsilon?1e-6:H.vertexNormalsEpsilon;H.useFacetNormals&&!ye&&(ye=r.faceNormals(X,Z,void 0===H.faceNormalsEpsilon?1e-6:H.faceNormalsEpsilon)),ye||ue||(ue=r.vertexNormals(X,Z,Me));var ge=H.vertexColors,we=H.cellColors,oe=H.meshColor||[1,1,1,1],de=H.vertexUVs,Te=H.vertexIntensity,Ee=H.cellUVs,Ae=H.cellIntensity,De=1/0,Ie=-1/0;if(!de&&!Ee)if(Te)if(H.vertexIntensityBounds)De=+H.vertexIntensityBounds[0],Ie=+H.vertexIntensityBounds[1];else for(var Oe=0;Oe<Te.length;++Oe){var Xe=Te[Oe];De=Math.min(De,Xe),Ie=Math.max(Ie,Xe)}else if(Ae)if(H.cellIntensityBounds)De=+H.cellIntensityBounds[0],Ie=+H.cellIntensityBounds[1];else for(Oe=0;Oe<Ae.length;++Oe)Xe=Ae[Oe],De=Math.min(De,Xe),Ie=Math.max(Ie,Xe);else for(Oe=0;Oe<Z.length;++Oe)Xe=Z[Oe][2],De=Math.min(De,Xe),Ie=Math.max(Ie,Xe);this.intensity=Te||Ae||function(Zt){for(var $t=Zt.length,Xt=new Array($t),cr=0;cr<$t;++cr)Xt[cr]=Zt[cr][2];return Xt}(Z),this.pickVertex=!(Ae||we);var Fe=H.pointSizes,Pe=H.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Oe=0;Oe<Z.length;++Oe)for(var Re=Z[Oe],qe=0;qe<3;++qe)!isNaN(Re[qe])&&isFinite(Re[qe])&&(this.bounds[0][qe]=Math.min(this.bounds[0][qe],Re[qe]),this.bounds[1][qe]=Math.max(this.bounds[1][qe],Re[qe]));var Qe=0,ct=0,bt=0;e:for(Oe=0;Oe<X.length;++Oe){var Tt=X[Oe];switch(Tt.length){case 1:for(Re=Z[nt=Tt[0]],qe=0;qe<3;++qe)if(isNaN(Re[qe])||!isFinite(Re[qe]))continue e;te.push(Re[0],Re[1],Re[2]),Ke=ge?ge[nt]:we?we[Oe]:oe,this.opacityscale&&Te?re.push(Ke[0],Ke[1],Ke[2],this.opacity*I((Te[nt]-De)/(Ie-De),this.opacityscale)):3===Ke.length?ae.push(Ke[0],Ke[1],Ke[2],this.opacity):(ae.push(Ke[0],Ke[1],Ke[2],Ke[3]*this.opacity),Ke[3]<1&&(this.hasAlpha=!0)),le.push((xt=de?de[nt]:Te?[(Te[nt]-De)/(Ie-De),0]:Ee?Ee[Oe]:Ae?[(Ae[Oe]-De)/(Ie-De),0]:[(Re[2]-De)/(Ie-De),0])[0],xt[1]),se.push(Fe?Fe[nt]:Pe),ve.push(Oe),bt+=1;break;case 2:for(qe=0;qe<2;++qe){Re=Z[nt=Tt[qe]];for(var _t=0;_t<3;++_t)if(isNaN(Re[_t])||!isFinite(Re[_t]))continue e}for(qe=0;qe<2;++qe)Re=Z[nt=Tt[qe]],ee.push(Re[0],Re[1],Re[2]),Ke=ge?ge[nt]:we?we[Oe]:oe,this.opacityscale&&Te?re.push(Ke[0],Ke[1],Ke[2],this.opacity*I((Te[nt]-De)/(Ie-De),this.opacityscale)):3===Ke.length?N.push(Ke[0],Ke[1],Ke[2],this.opacity):(N.push(Ke[0],Ke[1],Ke[2],Ke[3]*this.opacity),Ke[3]<1&&(this.hasAlpha=!0)),K.push((xt=de?de[nt]:Te?[(Te[nt]-De)/(Ie-De),0]:Ee?Ee[Oe]:Ae?[(Ae[Oe]-De)/(Ie-De),0]:[(Re[2]-De)/(Ie-De),0])[0],xt[1]),J.push(Oe);ct+=1;break;case 3:for(qe=0;qe<3;++qe)for(Re=Z[nt=Tt[qe]],_t=0;_t<3;++_t)if(isNaN(Re[_t])||!isFinite(Re[_t]))continue e;for(qe=0;qe<3;++qe){var nt,Ke,xt,Ht;Re=Z[nt=Tt[2-qe]],W.push(Re[0],Re[1],Re[2]),(Ke=ge?ge[nt]:we?we[Oe]:oe)?this.opacityscale&&Te?re.push(Ke[0],Ke[1],Ke[2],this.opacity*I((Te[nt]-De)/(Ie-De),this.opacityscale)):3===Ke.length?re.push(Ke[0],Ke[1],Ke[2],this.opacity):(re.push(Ke[0],Ke[1],Ke[2],Ke[3]*this.opacity),Ke[3]<1&&(this.hasAlpha=!0)):re.push(.5,.5,.5,1),B.push((xt=de?de[nt]:Te?[(Te[nt]-De)/(Ie-De),0]:Ee?Ee[Oe]:Ae?[(Ae[Oe]-De)/(Ie-De),0]:[(Re[2]-De)/(Ie-De),0])[0],xt[1]),U.push((Ht=ue?ue[nt]:ye[Oe])[0],Ht[1],Ht[2]),V.push(Oe)}Qe+=1}}this.pointCount=bt,this.edgeCount=ct,this.triangleCount=Qe,this.pointPositions.update(te),this.pointColors.update(ae),this.pointUVs.update(le),this.pointSizes.update(se),this.pointIds.update(new Uint32Array(ve)),this.edgePositions.update(ee),this.edgeColors.update(N),this.edgeUVs.update(K),this.edgeIds.update(new Uint32Array(J)),this.trianglePositions.update(W),this.triangleColors.update(re),this.triangleUVs.update(B),this.triangleNormals.update(U),this.triangleIds.update(new Uint32Array(V))}},M.drawTransparent=M.draw=function(H){for(var Y=this.gl,X=(H=H||{}).model||T,Z=H.view||T,W=H.projection||T,re=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)re[0][U]=Math.max(re[0][U],this.clipBounds[0][U]),re[1][U]=Math.min(re[1][U],this.clipBounds[1][U]);var B={model:X,view:Z,projection:W,inverseModel:T.slice(),clipBounds:re,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};B.inverseModel=f(B.inverseModel,B.model),Y.disable(Y.CULL_FACE),this.texture.bind(0);var V=new Array(16);for(d(V,B.view,B.model),d(V,B.projection,V),f(V,V),U=0;U<3;++U)B.eyePosition[U]=V[12+U]/V[15];var ee,N=V[15];for(U=0;U<3;++U)N+=this.lightPosition[U]*V[4*U+3];for(U=0;U<3;++U){for(var K=V[12+U],J=0;J<3;++J)K+=V[4*J+U]*this.lightPosition[J];B.lightPosition[U]=K/N}this.triangleCount>0&&((ee=this.triShader).bind(),ee.uniforms=B,this.triangleVAO.bind(),Y.drawArrays(Y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ee=this.lineShader).bind(),ee.uniforms=B,this.edgeVAO.bind(),Y.lineWidth(this.lineWidth*this.pixelRatio),Y.drawArrays(Y.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ee=this.pointShader).bind(),ee.uniforms=B,this.pointVAO.bind(),Y.drawArrays(Y.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ee=this.contourShader).bind(),ee.uniforms=B,this.contourVAO.bind(),Y.drawArrays(Y.LINES,0,this.contourCount),this.contourVAO.unbind())},M.drawPick=function(H){for(var Y=this.gl,X=(H=H||{}).model||T,Z=H.view||T,W=H.projection||T,re=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)re[0][U]=Math.max(re[0][U],this.clipBounds[0][U]),re[1][U]=Math.min(re[1][U],this.clipBounds[1][U]);this._model=[].slice.call(X),this._view=[].slice.call(Z),this._projection=[].slice.call(W),this._resolution=[Y.drawingBufferWidth,Y.drawingBufferHeight];var B,V={model:X,view:Z,projection:W,clipBounds:re,pickId:this.pickId/255};(B=this.pickShader).bind(),B.uniforms=V,this.triangleCount>0&&(this.triangleVAO.bind(),Y.drawArrays(Y.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),Y.lineWidth(this.lineWidth*this.pixelRatio),Y.drawArrays(Y.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((B=this.pointPickShader).bind(),B.uniforms=V,this.pointVAO.bind(),Y.drawArrays(Y.POINTS,0,this.pointCount),this.pointVAO.unbind())},M.pick=function(H){if(!H||H.id!==this.pickId)return null;for(var Y=H.value[0]+256*H.value[1]+65536*H.value[2],X=this.cells[Y],Z=this.positions,W=new Array(X.length),re=0;re<X.length;++re)W[re]=Z[X[re]];var U=H.coord[0],B=H.coord[1];if(!this.pickVertex){var V=this.positions[X[0]],ee=this.positions[X[1]],N=this.positions[X[2]];return{_cellCenter:!0,position:[U,B],index:Y,cell:X,cellId:Y,intensity:this.intensity[Y],dataCoordinate:[(V[0]+ee[0]+N[0])/3,(V[1]+ee[1]+N[1])/3,(V[2]+ee[2]+N[2])/3]}}var J=c(W,[U*this.pixelRatio,this._resolution[1]-B*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!J)return null;var te=J[2],ae=0;for(re=0;re<X.length;++re)ae+=te[re]*this.intensity[X[re]];return{position:J[1],index:X[J[0]],cell:X,cellId:Y,intensity:ae,dataCoordinate:this.positions[X[J[0]]]}},M.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},k.exports=function(H,Y){if(1===arguments.length&&(H=(Y=H).gl),!(H.getExtension("OES_standard_derivatives")||H.getExtension("MOZ_OES_standard_derivatives")||H.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var Z=P(H),W=S(H),re=E(H),U=R(H),B=D(H),V=j(H),ee=l(H,t(new Uint8Array([255,255,255,255]),[1,1,4]));ee.generateMipmap(),ee.minFilter=H.LINEAR_MIPMAP_LINEAR,ee.magFilter=H.LINEAR;var N=n(H),K=n(H),J=n(H),te=n(H),ae=n(H),le=i(H,[{buffer:N,type:H.FLOAT,size:3},{buffer:ae,type:H.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:K,type:H.FLOAT,size:4},{buffer:J,type:H.FLOAT,size:2},{buffer:te,type:H.FLOAT,size:3}]),se=n(H),ve=n(H),ue=n(H),ye=n(H),Me=i(H,[{buffer:se,type:H.FLOAT,size:3},{buffer:ye,type:H.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ve,type:H.FLOAT,size:4},{buffer:ue,type:H.FLOAT,size:2}]),pe=n(H),ge=n(H),we=n(H),oe=n(H),de=n(H),Te=i(H,[{buffer:pe,type:H.FLOAT,size:3},{buffer:de,type:H.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ge,type:H.FLOAT,size:4},{buffer:we,type:H.FLOAT,size:2},{buffer:oe,type:H.FLOAT,size:1}]),Ee=n(H),De=new C(H,ee,Z,W,re,U,B,V,N,ae,K,J,te,le,se,ye,ve,ue,Me,pe,de,ge,we,oe,Te,Ee,i(H,[{buffer:Ee,type:H.FLOAT,size:3}]));return De.update(Y),De}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(g,k,x){"use strict";k.exports=function(t){var h=t.gl;return new l(t,e(h,[0,0,0,1,1,0,1,1]),n(h,i.boxVert,i.lineFrag))};var e=g("gl-buffer"),n=g("gl-shader"),i=g("./shaders");function l(t,h,s){this.plot=t,this.vbo=h,this.shader=s}var r,d,f=l.prototype;f.bind=function(){var t=this.shader;this.vbo.bind(),this.shader.bind(),t.attributes.coord.pointer(),t.uniforms.screenBox=this.plot.screenBox},f.drawBox=(r=[0,0],d=[0,0],function(t,h,s,o,p){var a=this.shader,y=this.plot.gl;r[0]=t,r[1]=h,d[0]=s,d[1]=o,a.uniforms.lo=r,a.uniforms.hi=d,a.uniforms.color=p,y.drawArrays(y.TRIANGLE_STRIP,0,4)}),f.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(g,k,x){"use strict";k.exports=function(c){var a=c.gl;return new r(c,e(a),n(a,l.gridVert,l.gridFrag),n(a,l.tickVert,l.gridFrag))};var e=g("gl-buffer"),n=g("gl-shader"),i=g("binary-search-bounds"),l=g("./shaders");function r(c,a,y,u){this.plot=c,this.vbo=a,this.shader=y,this.tickShader=u,this.ticks=[[],[]]}function d(c,a){return c-a}var f,t,h,s,o,c,a,y,u,_,b,p=r.prototype;p.draw=(f=[0,0],t=[0,0],h=[0,0],function(){for(var c=this.plot,a=this.vbo,y=this.shader,u=this.ticks,_=c.gl,b=c._tickBounds,w=c.dataBox,T=c.viewBox,C=c.gridLineWidth,M=c.gridLineColor,I=c.gridLineEnable,P=c.pixelRatio,S=0;S<2;++S){var E=b[S],D=.5*(w[S+2]+w[S]),j=w[S+2]-w[S];t[S]=2*(b[S+2]-E)/j,f[S]=2*(E-D)/j}y.bind(),a.bind(),y.attributes.dataCoord.pointer(),y.uniforms.dataShift=f,y.uniforms.dataScale=t;var H=0;for(S=0;S<2;++S){h[0]=h[1]=0,h[S]=1,y.uniforms.dataAxis=h,y.uniforms.lineWidth=C[S]/(T[S+2]-T[S])*P,y.uniforms.color=M[S];var Y=6*u[S].length;I[S]&&Y&&_.drawArrays(_.TRIANGLES,H,Y),H+=Y}}),p.drawTickMarks=(c=[0,0],a=[0,0],y=[1,0],u=[0,1],_=[0,0],b=[0,0],function(){for(var w=this.plot,T=this.vbo,C=this.tickShader,M=this.ticks,I=w.gl,P=w._tickBounds,S=w.dataBox,E=w.viewBox,R=w.pixelRatio,D=w.screenBox,j=D[2]-D[0],H=D[3]-D[1],Y=E[2]-E[0],X=E[3]-E[1],Z=0;Z<2;++Z){var W=P[Z],U=.5*(S[Z+2]+S[Z]),B=S[Z+2]-S[Z];a[Z]=2*(P[Z+2]-W)/B,c[Z]=2*(W-U)/B}a[0]*=Y/j,c[0]*=Y/j,a[1]*=X/H,c[1]*=X/H,C.bind(),T.bind(),C.attributes.dataCoord.pointer();var V=C.uniforms;V.dataShift=c,V.dataScale=a;var ee=w.tickMarkLength,N=w.tickMarkWidth,K=w.tickMarkColor,J=6*M[0].length,te=Math.min(i.ge(M[0],(S[0]-P[0])/(P[2]-P[0]),d),M[0].length),ae=Math.min(i.gt(M[0],(S[2]-P[0])/(P[2]-P[0]),d),M[0].length),le=0+6*te,se=6*Math.max(0,ae-te),ve=Math.min(i.ge(M[1],(S[1]-P[1])/(P[3]-P[1]),d),M[1].length),ue=Math.min(i.gt(M[1],(S[3]-P[1])/(P[3]-P[1]),d),M[1].length),ye=J+6*ve,Me=6*Math.max(0,ue-ve);_[0]=2*(E[0]-ee[1])/j-1,_[1]=(E[3]+E[1])/H-1,b[0]=ee[1]*R/j,b[1]=N[1]*R/H,Me&&(V.color=K[1],V.tickScale=b,V.dataAxis=u,V.screenOffset=_,I.drawArrays(I.TRIANGLES,ye,Me)),_[0]=(E[2]+E[0])/j-1,_[1]=2*(E[1]-ee[0])/H-1,b[0]=N[0]*R/j,b[1]=ee[0]*R/H,se&&(V.color=K[0],V.tickScale=b,V.dataAxis=y,V.screenOffset=_,I.drawArrays(I.TRIANGLES,le,se)),_[0]=2*(E[2]+ee[3])/j-1,_[1]=(E[3]+E[1])/H-1,b[0]=ee[3]*R/j,b[1]=N[3]*R/H,Me&&(V.color=K[3],V.tickScale=b,V.dataAxis=u,V.screenOffset=_,I.drawArrays(I.TRIANGLES,ye,Me)),_[0]=(E[2]+E[0])/j-1,_[1]=2*(E[3]+ee[2])/H-1,b[0]=N[2]*R/j,b[1]=ee[2]*R/H,se&&(V.color=K[2],V.tickScale=b,V.dataAxis=y,V.screenOffset=_,I.drawArrays(I.TRIANGLES,le,se))}),p.update=(s=[1,1,-1,-1,1,-1],o=[1,-1,1,1,-1,-1],function(c){for(var a=c.ticks,y=c.bounds,u=new Float32Array(18*(a[0].length+a[1].length)),_=0,b=[[],[]],w=0;w<2;++w)for(var T=b[w],C=a[w],M=y[w],I=y[w+2],P=0;P<C.length;++P){var S=(C[P].x-M)/(I-M);T.push(S);for(var E=0;E<6;++E)u[_++]=S,u[_++]=s[E],u[_++]=o[E]}this.ticks=b,this.vbo.update(u)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(g,k,x){"use strict";k.exports=function(t){var h=t.gl;return new l(t,e(h,[-1,-1,-1,1,1,-1,1,1]),n(h,i.lineVert,i.lineFrag))};var e=g("gl-buffer"),n=g("gl-shader"),i=g("./shaders");function l(t,h,s){this.plot=t,this.vbo=h,this.shader=s}var r,d,f=l.prototype;f.bind=function(){var t=this.shader;this.vbo.bind(),this.shader.bind(),t.attributes.coord.pointer(),t.uniforms.screenBox=this.plot.screenBox},f.drawLine=(r=[0,0],d=[0,0],function(t,h,s,o,p,c){var a=this.plot,y=this.shader,u=a.gl;r[0]=t,r[1]=h,d[0]=s,d[1]=o,y.uniforms.start=r,y.uniforms.end=d,y.uniforms.width=p*a.pixelRatio,y.uniforms.color=c,u.drawArrays(u.TRIANGLE_STRIP,0,4)}),f.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(g,k,x){"use strict";var e=g("glslify"),n=e(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);k.exports={lineVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:n,textVert:e(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:n,gridVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:n,boxVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(g,k,x){"use strict";k.exports=function(a){var y=a.gl;return new d(a,e(y),n(y,r.textVert,r.textFrag))};var e=g("gl-buffer"),n=g("gl-shader"),i=g("text-cache"),l=g("binary-search-bounds"),r=g("./shaders");function d(a,y,u){this.plot=a,this.vbo=y,this.shader=u,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var f,t,h,s,o,p,a,y,c=d.prototype;c.drawTicks=(f=[0,0],t=[0,0],h=[0,0],function(a){var y=this.plot,u=this.shader,_=this.tickX[a],b=this.tickOffset[a],w=y.gl,T=y.viewBox,C=y.dataBox,M=y.screenBox,I=y.pixelRatio,P=y.tickEnable,S=y.tickPad,E=y.tickColor,R=y.tickAngle,D=y.labelEnable,j=y.labelPad,H=y.labelColor,Y=y.labelAngle,X=this.labelOffset[a],Z=this.labelCount[a],W=l.lt(_,C[a]),re=l.le(_,C[a+2]);f[0]=f[1]=0,f[a]=1,t[a]=(T[2+a]+T[a])/(M[2+a]-M[a])-1;var U=2/M[2+(1^a)]-M[1^a];t[1^a]=U*T[1^a]-1,P[a]&&(t[1^a]-=U*I*S[a],W<re&&b[re]>b[W]&&(u.uniforms.dataAxis=f,u.uniforms.screenOffset=t,u.uniforms.color=E[a],u.uniforms.angle=R[a],w.drawArrays(w.TRIANGLES,b[W],b[re]-b[W]))),D[a]&&Z&&(t[1^a]-=U*I*j[a],u.uniforms.dataAxis=h,u.uniforms.screenOffset=t,u.uniforms.color=H[a],u.uniforms.angle=Y[a],w.drawArrays(w.TRIANGLES,X,Z)),t[1^a]=U*T[2+(1^a)]-1,P[a+2]&&(t[1^a]+=U*I*S[a+2],W<re&&b[re]>b[W]&&(u.uniforms.dataAxis=f,u.uniforms.screenOffset=t,u.uniforms.color=E[a+2],u.uniforms.angle=R[a+2],w.drawArrays(w.TRIANGLES,b[W],b[re]-b[W]))),D[a+2]&&Z&&(t[1^a]+=U*I*j[a+2],u.uniforms.dataAxis=h,u.uniforms.screenOffset=t,u.uniforms.color=H[a+2],u.uniforms.angle=Y[a+2],w.drawArrays(w.TRIANGLES,X,Z))}),c.drawTitle=(a=[0,0],y=[0,0],function(){var u=this.plot,_=this.shader,b=u.gl,w=u.screenBox,T=u.titleCenter,C=u.titleAngle,M=u.titleColor,I=u.pixelRatio;if(this.titleCount){for(var P=0;P<2;++P)y[P]=2*(T[P]*I-w[P])/(w[2+P]-w[P])-1;_.bind(),_.uniforms.dataAxis=a,_.uniforms.screenOffset=y,_.uniforms.angle=C,_.uniforms.color=M,b.drawArrays(b.TRIANGLES,this.titleOffset,this.titleCount)}}),c.bind=(s=[0,0],o=[0,0],p=[0,0],function(){var a=this.plot,y=this.shader,u=a._tickBounds,_=a.dataBox,b=a.screenBox,w=a.viewBox;y.bind();for(var T=0;T<2;++T){var C=u[T],I=.5*(_[T+2]+_[T]),P=_[T+2]-_[T],E=w[T+2]-w[T],D=b[T+2]-b[T];o[T]=2*(u[T+2]-C)/P*E/D,s[T]=2*(C-I)/P*E/D}p[1]=2*a.pixelRatio/(b[3]-b[1]),p[0]=p[1]*(b[3]-b[1])/(b[2]-b[0]),y.uniforms.dataScale=o,y.uniforms.dataShift=s,y.uniforms.textScale=p,this.vbo.bind(),y.attributes.textCoordinate.pointer()}),c.update=function(a){var y,u,_,b,w,T=[],C=a.ticks,M=a.bounds;for(w=0;w<2;++w){var I=[Math.floor(T.length/3)],P=[-1/0],S=C[w];for(y=0;y<S.length;++y){var E=S[y],R=E.x,j=E.font||"sans-serif";b=E.fontSize||12;for(var H=1/(M[w+2]-M[w]),Y=M[w],X=E.text.split("\n"),Z=0;Z<X.length;Z++)for(_=i(j,X[Z]).data,u=0;u<_.length;u+=2)T.push(_[u]*b,-_[u+1]*b-Z*b*1.2,(R-Y)*H);I.push(Math.floor(T.length/3)),P.push(R)}this.tickOffset[w]=I,this.tickX[w]=P}for(w=0;w<2;++w){for(this.labelOffset[w]=Math.floor(T.length/3),_=i(a.labelFont[w],a.labels[w],{textAlign:"center"}).data,b=a.labelSize[w],y=0;y<_.length;y+=2)T.push(_[y]*b,-_[y+1]*b,0);this.labelCount[w]=Math.floor(T.length/3)-this.labelOffset[w]}for(this.titleOffset=Math.floor(T.length/3),_=i(a.titleFont,a.title).data,b=a.titleSize,y=0;y<_.length;y+=2)T.push(_[y]*b,-_[y+1]*b,0);this.titleCount=Math.floor(T.length/3)-this.titleOffset,this.vbo.update(T)},c.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(g,k,x){"use strict";k.exports=function(s){var o=s.gl,c=new d(o,e(o,[o.drawingBufferWidth,o.drawingBufferHeight]));return c.grid=n(c),c.text=i(c),c.line=l(c),c.box=r(c),c.update(s),c};var e=g("gl-select-static"),n=g("./lib/grid"),i=g("./lib/text"),l=g("./lib/line"),r=g("./lib/box");function d(s,o){this.gl=s,this.pickBuffer=o,this.screenBox=[0,0,s.drawingBufferWidth,s.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var f=d.prototype;function t(s){for(var o=s.slice(),p=0;p<o.length;++p)o[p]=o[p].slice();return o}function h(s,o){return s.x-o.x}f.setDirty=function(){this.dirty=this.pickDirty=!0},f.setOverlayDirty=function(){this.dirty=!0},f.nextDepthValue=function(){return this._depthCounter++/65536},f.draw=function(){var s=this.gl,o=this.screenBox,p=this.viewBox,c=this.dataBox,a=this.pixelRatio,y=this.grid,u=this.line,_=this.text,b=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,s.bindFramebuffer(s.FRAMEBUFFER,null),s.enable(s.SCISSOR_TEST),s.disable(s.DEPTH_TEST),s.depthFunc(s.LESS),s.depthMask(!1),s.enable(s.BLEND),s.blendEquation(s.FUNC_ADD,s.FUNC_ADD),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),this.borderColor){s.scissor(o[0],o[1],o[2]-o[0],o[3]-o[1]);var w=this.borderColor;s.clearColor(w[0]*w[3],w[1]*w[3],w[2]*w[3],w[3]),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)}s.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]),s.viewport(p[0],p[1],p[2]-p[0],p[3]-p[1]);var T=this.backgroundColor;s.clearColor(T[0]*T[3],T[1]*T[3],T[2]*T[3],T[3]),s.clear(s.COLOR_BUFFER_BIT),y.draw();var C=this.zeroLineEnable,M=this.zeroLineColor,I=this.zeroLineWidth;if(C[0]||C[1]){u.bind();for(var P=0;P<2;++P)if(C[P]&&c[P]<=0&&c[P+2]>=0){var S=o[P]-c[P]*(o[P+2]-o[P])/(c[P+2]-c[P]);0===P?u.drawLine(S,o[1],S,o[3],I[P],M[P]):u.drawLine(o[0],S,o[2],S,I[P],M[P])}}for(P=0;P<b.length;++P)b[P].draw();s.viewport(o[0],o[1],o[2]-o[0],o[3]-o[1]),s.scissor(o[0],o[1],o[2]-o[0],o[3]-o[1]),this.grid.drawTickMarks(),u.bind();var E=this.borderLineEnable,R=this.borderLineWidth,D=this.borderLineColor;for(E[1]&&u.drawLine(p[0],p[1]-.5*R[1]*a,p[0],p[3]+.5*R[3]*a,R[1],D[1]),E[0]&&u.drawLine(p[0]-.5*R[0]*a,p[1],p[2]+.5*R[2]*a,p[1],R[0],D[0]),E[3]&&u.drawLine(p[2],p[1]-.5*R[1]*a,p[2],p[3]+.5*R[3]*a,R[3],D[3]),E[2]&&u.drawLine(p[0]-.5*R[0]*a,p[3],p[2]+.5*R[2]*a,p[3],R[2],D[2]),_.bind(),P=0;P<2;++P)_.drawTicks(P);this.titleEnable&&_.drawTitle();var j=this.overlays;for(P=0;P<j.length;++P)j[P].draw();s.disable(s.SCISSOR_TEST),s.disable(s.BLEND),s.depthMask(!0)}},f.drawPick=function(){if(!this.static){var s=this.pickBuffer;this._pickTimeout=null,s.begin();for(var o=1,p=this.objects,c=0;c<p.length;++c)o=p[c].drawPick(o);s.end()}},f.pick=function(s,o){if(!this.static){var p=this.pixelRatio,c=this.pickPixelRatio,a=this.viewBox,y=0|Math.round((s-a[0]/p)*c),u=0|Math.round((o-a[1]/p)*c),_=this.pickBuffer.query(y,u,this.pickRadius);if(!_)return null;for(var b=_.id+(_.value[0]<<8)+(_.value[1]<<16)+(_.value[2]<<24),w=this.objects,T=0;T<w.length;++T){var C=w[T].pick(y,u,b);if(C)return C}return null}},f.setScreenBox=function(s){var o=this.screenBox,p=this.pixelRatio;o[0]=0|Math.round(s[0]*p),o[1]=0|Math.round(s[1]*p),o[2]=0|Math.round(s[2]*p),o[3]=0|Math.round(s[3]*p),this.setDirty()},f.setDataBox=function(s){var o=this.dataBox;(o[0]!==s[0]||o[1]!==s[1]||o[2]!==s[2]||o[3]!==s[3])&&(o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],this.setDirty())},f.setViewBox=function(s){var o=this.pixelRatio,p=this.viewBox;p[0]=0|Math.round(s[0]*o),p[1]=0|Math.round(s[1]*o),p[2]=0|Math.round(s[2]*o),p[3]=0|Math.round(s[3]*o);var c=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((s[2]-s[0])*c),0|Math.round((s[3]-s[1])*c)],this.setDirty()},f.update=function(s){var o=this.gl;this.pixelRatio=(s=s||{}).pixelRatio||1;var p=this.pixelRatio;this.pickPixelRatio=Math.max(p,1),this.setScreenBox(s.screenBox||[0,0,o.drawingBufferWidth/p,o.drawingBufferHeight/p]),this.setViewBox(s.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/p,.125*(this.screenBox[3]-this.screenBox[1])/p,.875*(this.screenBox[2]-this.screenBox[0])/p,.875*(this.screenBox[3]-this.screenBox[1])/p]);var c=this.viewBox,a=(c[2]-c[0])/(c[3]-c[1]);this.setDataBox(s.dataBox||[-10,-10/a,10,10/a]),this.borderColor=!1!==s.borderColor&&(s.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(s.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(s.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(s.gridLineWidth||[1,1]).slice(),this.gridLineColor=t(s.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(s.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(s.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=t(s.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(s.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(s.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=t(s.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(s.titleCenter||[.5*(c[0]+c[2])/p,(c[3]+120)/p]).slice(),this.titleEnable=!("titleEnable"in s)||!!s.titleEnable,this.titleAngle=s.titleAngle||0,this.titleColor=(s.titleColor||[0,0,0,1]).slice(),this.labelPad=(s.labelPad||[15,15,15,15]).slice(),this.labelAngle=(s.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(s.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=t(s.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(s.tickPad||[15,15,15,15]).slice(),this.tickAngle=(s.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(s.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=t(s.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(s.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(s.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=t(s.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var y=s.ticks||[[],[]],u=this._tickBounds;u[0]=u[1]=1/0,u[2]=u[3]=-1/0;for(var _=0;_<2;++_){var b=y[_].slice(0);0!==b.length&&(b.sort(h),u[_]=Math.min(u[_],b[0].x),u[_+2]=Math.max(u[_+2],b[b.length-1].x))}this.grid.update({bounds:u,ticks:y}),this.text.update({bounds:u,ticks:y,labels:s.labels||["x","y"],labelSize:s.labelSize||[12,12],labelFont:s.labelFont||["sans-serif","sans-serif"],title:s.title||"",titleSize:s.titleSize||18,titleFont:s.titleFont||"sans-serif"}),this.static=!!s.static,this.setDirty()},f.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var s=this.objects.length-1;s>=0;--s)this.objects[s].dispose();for(this.objects.length=0,s=this.overlays.length-1;s>=0;--s)this.overlays[s].dispose();this.overlays.length=0,this.gl=null},f.addObject=function(s){this.objects.indexOf(s)<0&&(this.objects.push(s),this.setDirty())},f.removeObject=function(s){for(var o=this.objects,p=0;p<o.length;++p)if(o[p]===s){o.splice(p,1),this.setDirty();break}},f.addOverlay=function(s){this.overlays.indexOf(s)<0&&(this.overlays.push(s),this.setOverlayDirty())},f.removeOverlay=function(s){for(var o=this.overlays,p=0;p<o.length;++p)if(o[p]===s){o.splice(p,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(g,k,x){"use strict";k.exports=function(f,t){f=f||document.body;var h=[.01,1/0];"distanceLimits"in(t=t||{})&&(h[0]=t.distanceLimits[0],h[1]=t.distanceLimits[1]),"zoomMin"in t&&(h[0]=t.zoomMin),"zoomMax"in t&&(h[1]=t.zoomMax);var s=n({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:h}),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p=0,c=f.clientWidth,a=f.clientHeight,y={keyBindingMode:"rotate",enableWheel:!0,view:s,element:f,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:s.modes,_ortho:t._ortho||t.projection&&"orthographic"===t.projection.type||!1,tick:function(){var u=e(),_=this.delay,b=u-2*_;s.idle(u-_),s.recalcMatrix(b),s.flush(u-(100+2*_));for(var w=!0,T=s.computedMatrix,C=0;C<16;++C)w=w&&o[C]===T[C],o[C]=T[C];var M=f.clientWidth===c&&f.clientHeight===a;return c=f.clientWidth,a=f.clientHeight,w?!M:(p=Math.exp(s.computedRadius[0]),!0)},lookAt:function(u,_,b){s.lookAt(s.lastT(),u,_,b)},rotate:function(u,_,b){s.rotate(s.lastT(),u,_,b)},pan:function(u,_,b){s.pan(s.lastT(),u,_,b)},translate:function(u,_,b){s.translate(s.lastT(),u,_,b)}};return Object.defineProperties(y,{matrix:{get:function(){return s.computedMatrix},set:function(u){return s.setMatrix(s.lastT(),u),s.computedMatrix},enumerable:!0},mode:{get:function(){return s.getMode()},set:function(u){var _=s.computedUp.slice(),b=s.computedEye.slice(),w=s.computedCenter.slice();if(s.setMode(u),"turntable"===u){var T=e();s._active.lookAt(T,b,w,_),s._active.lookAt(T+500,b,w,[0,0,1]),s._active.flush(T)}return s.getMode()},enumerable:!0},center:{get:function(){return s.computedCenter},set:function(u){return s.lookAt(s.lastT(),null,u),s.computedCenter},enumerable:!0},eye:{get:function(){return s.computedEye},set:function(u){return s.lookAt(s.lastT(),u),s.computedEye},enumerable:!0},up:{get:function(){return s.computedUp},set:function(u){return s.lookAt(s.lastT(),null,null,u),s.computedUp},enumerable:!0},distance:{get:function(){return p},set:function(u){return s.setDistance(s.lastT(),u),u},enumerable:!0},distanceLimits:{get:function(){return s.getDistanceLimits(h)},set:function(u){return s.setDistanceLimits(u),u},enumerable:!0}}),f.addEventListener("contextmenu",function(u){return u.preventDefault(),!1}),y._lastX=-1,y._lastY=-1,y._lastMods={shift:!1,control:!1,alt:!1,meta:!1},y.enableMouseListeners=function(){function u(_,b,w,T){var C=y.keyBindingMode;if(!1!==C){var M="rotate"===C,I="pan"===C,P="zoom"===C,S=!!T.control,E=!!T.alt,R=!!T.shift,D=!!(1&_),j=!!(2&_),H=!!(4&_),Y=1/f.clientHeight,X=Y*(b-y._lastX),Z=Y*(w-y._lastY),W=y.flipX?1:-1,re=y.flipY?1:-1,U=Math.PI*y.rotateSpeed,B=e();if(-1!==y._lastX&&-1!==y._lastY&&((M&&D&&!S&&!E&&!R||D&&!S&&!E&&R)&&s.rotate(B,W*U*X,-re*U*Z,0),(I&&D&&!S&&!E&&!R||j||D&&S&&!E&&!R)&&s.pan(B,-y.translateSpeed*X*p,y.translateSpeed*Z*p,0),P&&D&&!S&&!E&&!R||H||D&&!S&&E&&!R)){var V=-y.zoomSpeed*Z/window.innerHeight*(B-s.lastT())*100;s.pan(B,0,0,p*(Math.exp(V)-1))}return y._lastX=b,y._lastY=w,y._lastMods=T,!0}}y.mouseListener=i(f,u),f.addEventListener("touchstart",function(_){var b=r(_.changedTouches[0],f);u(0,b[0],b[1],y._lastMods),u(1,b[0],b[1],y._lastMods)},!!d&&{passive:!0}),f.addEventListener("touchmove",function(_){var b=r(_.changedTouches[0],f);u(1,b[0],b[1],y._lastMods),_.preventDefault()},!!d&&{passive:!1}),f.addEventListener("touchend",function(_){u(0,y._lastX,y._lastY,y._lastMods)},!!d&&{passive:!0}),y.wheelListener=l(f,function(_,b){if(!1!==y.keyBindingMode&&y.enableWheel){var w=y.flipX?1:-1,T=y.flipY?1:-1,C=e();if(Math.abs(_)>Math.abs(b))s.rotate(C,0,0,-_*w*Math.PI*y.rotateSpeed/window.innerWidth);else if(!y._ortho){var M=-y.zoomSpeed*T*b/window.innerHeight*(C-s.lastT())/20;s.pan(C,0,0,p*(Math.exp(M)-1))}}},!0)},y.enableMouseListeners(),y};var e=g("right-now"),n=g("3d-view"),i=g("mouse-change"),l=g("mouse-wheel"),r=g("mouse-event-offset"),d=g("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(g,k,x){var e=g("glslify"),n=g("gl-shader"),i=e(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),l=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);k.exports=function(r){return n(r,i,l,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(g,k,x){"use strict";var e=g("./camera.js"),n=g("gl-axes3d"),i=g("gl-axes3d/properties"),l=g("gl-spikes3d"),r=g("gl-select-static"),d=g("gl-fbo"),f=g("a-big-triangle"),t=g("mouse-change"),h=g("gl-mat4/perspective"),s=g("gl-mat4/ortho"),o=g("./lib/shader"),p=g("is-mobile")({tablet:!0,featureDetect:!0});function c(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function a(u){var _=Math.round(Math.log(Math.abs(u))/Math.log(10));if(_<0){var b=Math.round(Math.pow(10,-_));return Math.ceil(u*b)/b}return _>0?(b=Math.round(Math.pow(10,_)),Math.ceil(u/b)*b):Math.ceil(u)}function y(u){return"boolean"!=typeof u||u}k.exports={createScene:function(u){(u=u||{}).camera=u.camera||{};var _=u.canvas;_||(_=document.createElement("canvas"),u.container?u.container.appendChild(_):document.body.appendChild(_));var b=u.gl;if(b||(u.glOptions&&(p=!!u.glOptions.preserveDrawingBuffer),b=function(ue,ye){var Me=null;try{(Me=ue.getContext("webgl",ye))||(Me=ue.getContext("experimental-webgl",ye))}catch{return null}return Me}(_,u.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:p})),!b)throw new Error("webgl not supported");var w=u.bounds||[[-10,-10,-10],[10,10,10]],T=new c,C=d(b,b.drawingBufferWidth,b.drawingBufferHeight,{preferFloat:!p}),M=o(b),I=u.cameraObject&&!0===u.cameraObject._ortho||u.camera.projection&&"orthographic"===u.camera.projection.type||!1,P={eye:u.camera.eye||[2,0,0],center:u.camera.center||[0,0,0],up:u.camera.up||[0,1,0],zoomMin:u.camera.zoomMax||.1,zoomMax:u.camera.zoomMin||100,mode:u.camera.mode||"turntable",_ortho:I},S=u.axes||{},E=n(b,S);E.enable=!S.disable;var D=l(b,u.spikes||{}),j=[],H=[],Y=[],X=[],Z=!0,W=!0,B={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},V=(W=!0,[b.drawingBufferWidth,b.drawingBufferHeight]),ee=u.cameraObject||e(_,P),N={gl:b,contextLost:!1,pixelRatio:u.pixelRatio||1,canvas:_,selection:T,camera:ee,axes:E,axesPixels:null,spikes:D,bounds:w,objects:j,shape:V,aspect:u.aspectRatio||[1,1,1],pickRadius:u.pickRadius||10,zNear:u.zNear||.01,zFar:u.zFar||1e3,fovy:u.fovy||Math.PI/4,clearColor:u.clearColor||[0,0,0,0],autoResize:y(u.autoResize),autoBounds:y(u.autoBounds),autoScale:!!u.autoScale,autoCenter:y(u.autoCenter),clipToBounds:y(u.clipToBounds),snapToData:!!u.snapToData,onselect:u.onselect||null,onrender:u.onrender||null,onclick:u.onclick||null,cameraParams:B,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ue){this.aspect[0]=ue.x,this.aspect[1]=ue.y,this.aspect[2]=ue.z,W=!0},setBounds:function(ue,ye){this.bounds[0][ue]=ye.min,this.bounds[1][ue]=ye.max},setClearColor:function(ue){this.clearColor=ue},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},K=[b.drawingBufferWidth/N.pixelRatio|0,b.drawingBufferHeight/N.pixelRatio|0];function J(){if(!N._stopped&&N.autoResize){var ue=_.parentNode,ye=1,Me=1;ue&&ue!==document.body?(ye=ue.clientWidth,Me=ue.clientHeight):(ye=window.innerWidth,Me=window.innerHeight);var pe=0|Math.ceil(ye*N.pixelRatio),ge=0|Math.ceil(Me*N.pixelRatio);if(pe!==_.width||ge!==_.height){_.width=pe,_.height=ge;var we=_.style;we.position=we.position||"absolute",we.left="0px",we.top="0px",we.width=ye+"px",we.height=Me+"px",Z=!0}}}function te(){for(var ue=j.length,ye=X.length,Me=0;Me<ye;++Me)Y[Me]=0;e:for(Me=0;Me<ue;++Me){var pe=j[Me],ge=pe.pickSlots;if(ge){for(var we=0;we<ye;++we)if(Y[we]+ge<255){H[Me]=we,pe.setPickBase(Y[we]+1),Y[we]+=ge;continue e}var oe=r(b,V);H[Me]=ye,X.push(oe),Y.push(ge),pe.setPickBase(1),ye+=1}else H[Me]=-1}for(;ye>0&&0===Y[ye-1];)Y.pop(),X.pop().dispose()}function ae(){if(N.contextLost)return!0;b.isContextLost()&&(N.contextLost=!0,N.mouseListener.enabled=!1,N.selection.object=null,N.oncontextloss&&N.oncontextloss())}N.autoResize&&J(),window.addEventListener("resize",J),N.update=function(ue){N._stopped||(ue=ue||{},Z=!0,W=!0)},N.add=function(ue){N._stopped||(ue.axes=E,j.push(ue),H.push(-1),Z=!0,W=!0,te())},N.remove=function(ue){if(!N._stopped){var ye=j.indexOf(ue);ye<0||(j.splice(ye,1),H.pop(),Z=!0,W=!0,te())}},N.dispose=function(){if(!N._stopped&&(N._stopped=!0,window.removeEventListener("resize",J),_.removeEventListener("webglcontextlost",ae),N.mouseListener.enabled=!1,!N.contextLost)){E.dispose(),D.dispose();for(var ue=0;ue<j.length;++ue)j[ue].dispose();for(C.dispose(),ue=0;ue<X.length;++ue)X[ue].dispose();M.dispose(),b=null,E=null,D=null,j=[]}},N._mouseRotating=!1,N._prevButtons=0,N.enableMouseListeners=function(){N.mouseListener=t(_,function(ue,ye,Me){if(!N._stopped){var pe=X.length,ge=j.length,we=T.object;T.distance=1/0,T.mouse[0]=ye,T.mouse[1]=Me,T.object=null,T.screen=null,T.dataCoordinate=T.dataPosition=null;var oe=!1;if(ue&&N._prevButtons)N._mouseRotating=!0;else{N._mouseRotating&&(W=!0),N._mouseRotating=!1;for(var de=0;de<pe;++de){var Te=X[de].query(ye,K[1]-Me-1,N.pickRadius);if(Te){if(Te.distance>T.distance)continue;for(var Ee=0;Ee<ge;++Ee){var Ae=j[Ee];if(H[Ee]===de){var De=Ae.pick(Te);De&&(T.buttons=ue,T.screen=Te.coord,T.distance=Te.distance,T.object=Ae,T.index=De.distance,T.dataPosition=De.position,T.dataCoordinate=De.dataCoordinate,T.data=De,oe=!0)}}}}}we&&we!==T.object&&(we.highlight&&we.highlight(null),Z=!0),T.object&&(T.object.highlight&&T.object.highlight(T.data),Z=!0),(oe=oe||T.object!==we)&&N.onselect&&N.onselect(T),1&ue&&!(1&N._prevButtons)&&N.onclick&&N.onclick(T),N._prevButtons=ue}})},_.addEventListener("webglcontextlost",ae);var le=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],se=[le[0].slice(),le[1].slice()];function ve(){if(!ae()){J();var ue=N.camera.tick();B.view=N.camera.matrix,Z=Z||ue,W=W||ue,E.pixelRatio=N.pixelRatio,D.pixelRatio=N.pixelRatio;var ye=j.length,Me=le[0],pe=le[1];Me[0]=Me[1]=Me[2]=1/0,pe[0]=pe[1]=pe[2]=-1/0;for(var ge=0;ge<ye;++ge){(Pe=j[ge]).pixelRatio=N.pixelRatio,Pe.axes=N.axes,Z=Z||!!Pe.dirty,W=W||!!Pe.dirty;var we=Pe.bounds;if(we)for(var oe=we[0],de=we[1],Te=0;Te<3;++Te)Me[Te]=Math.min(Me[Te],oe[Te]),pe[Te]=Math.max(pe[Te],de[Te])}var Ee=N.bounds;if(N.autoBounds)for(Te=0;Te<3;++Te){if(pe[Te]<Me[Te])Me[Te]=-1,pe[Te]=1;else{Me[Te]===pe[Te]&&(Me[Te]-=1,pe[Te]+=1);var Ae=.05*(pe[Te]-Me[Te]);Me[Te]=Me[Te]-Ae,pe[Te]=pe[Te]+Ae}Ee[0][Te]=Me[Te],Ee[1][Te]=pe[Te]}var De=!1;for(Te=0;Te<3;++Te)De=De||se[0][Te]!==Ee[0][Te]||se[1][Te]!==Ee[1][Te],se[0][Te]=Ee[0][Te],se[1][Te]=Ee[1][Te];if(W=W||De,Z=Z||De){if(De){var Ie=[0,0,0];for(ge=0;ge<3;++ge)Ie[ge]=a((Ee[1][ge]-Ee[0][ge])/10);E.update(E.autoTicks?{bounds:Ee,tickSpacing:Ie}:{bounds:Ee})}var Oe=b.drawingBufferWidth,Xe=b.drawingBufferHeight;for(V[0]=Oe,V[1]=Xe,K[0]=0|Math.max(Oe/N.pixelRatio,1),K[1]=0|Math.max(Xe/N.pixelRatio,1),function(Re,qe){var Qe=Re.bounds,ct=Re.cameraParams,bt=ct.projection,Tt=ct.model,Ke=Re.zNear,xt=Re.zFar,Ht=Re.fovy,Zt=Re.gl.drawingBufferWidth/Re.gl.drawingBufferHeight;qe?(s(bt,-Zt,Zt,-1,1,Ke,xt),ct._ortho=!0):(h(bt,Ht,Zt,Ke,xt),ct._ortho=!1);for(var $t=0;$t<16;++$t)Tt[$t]=0;Tt[15]=1;var Xt=0;for($t=0;$t<3;++$t)Xt=Math.max(Xt,Qe[1][$t]-Qe[0][$t]);for($t=0;$t<3;++$t)Tt[5*$t]=Re.autoScale?Re.aspect[$t]/(Qe[1][$t]-Qe[0][$t]):1/Xt,Re.autoCenter&&(Tt[12+$t]=.5*-Tt[5*$t]*(Qe[0][$t]+Qe[1][$t]))}(N,I),ge=0;ge<ye;++ge)(Pe=j[ge]).axesBounds=Ee,N.clipToBounds&&(Pe.clipBounds=Ee);T.object&&(D.position=N.snapToData?T.dataCoordinate:T.dataPosition,D.bounds=Ee),W&&(W=!1,function(){if(!ae()){b.colorMask(!0,!0,!0,!0),b.depthMask(!0),b.disable(b.BLEND),b.enable(b.DEPTH_TEST),b.depthFunc(b.LEQUAL);for(var Re=j.length,qe=X.length,Qe=0;Qe<qe;++Qe){var ct=X[Qe];ct.shape=K,ct.begin();for(var bt=0;bt<Re;++bt)if(H[bt]===Qe){var Tt=j[bt];Tt.drawPick&&(Tt.pixelRatio=1,Tt.drawPick(B))}ct.end()}}}()),N.axesPixels=i(N.axes,B,Oe,Xe),N.onrender&&N.onrender(),b.bindFramebuffer(b.FRAMEBUFFER,null),b.viewport(0,0,Oe,Xe),N.clearRGBA(),b.depthMask(!0),b.colorMask(!0,!0,!0,!0),b.enable(b.DEPTH_TEST),b.depthFunc(b.LEQUAL),b.disable(b.BLEND),b.disable(b.CULL_FACE);var Fe=!1;for(E.enable&&(Fe=Fe||E.isTransparent(),E.draw(B)),D.axes=E,T.object&&D.draw(B),b.disable(b.CULL_FACE),ge=0;ge<ye;++ge)(Pe=j[ge]).axes=E,Pe.pixelRatio=N.pixelRatio,Pe.isOpaque&&Pe.isOpaque()&&Pe.draw(B),Pe.isTransparent&&Pe.isTransparent()&&(Fe=!0);if(Fe){for(C.shape=V,C.bind(),b.clear(b.DEPTH_BUFFER_BIT),b.colorMask(!1,!1,!1,!1),b.depthMask(!0),b.depthFunc(b.LESS),E.enable&&E.isTransparent()&&E.drawTransparent(B),ge=0;ge<ye;++ge)(Pe=j[ge]).isOpaque&&Pe.isOpaque()&&Pe.draw(B);for(b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),b.colorMask(!0,!0,!0,!0),b.depthMask(!1),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),E.isTransparent()&&E.drawTransparent(B),ge=0;ge<ye;++ge){var Pe;(Pe=j[ge]).isTransparent&&Pe.isTransparent()&&Pe.drawTransparent(B)}b.bindFramebuffer(b.FRAMEBUFFER,null),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),b.disable(b.DEPTH_TEST),M.bind(),C.color[0].bind(0),M.uniforms.accumBuffer=0,f(b),b.disable(b.BLEND)}for(Z=!1,ge=0;ge<ye;++ge)j[ge].dirty=!1}}}return N.enableMouseListeners(),function ue(){N._stopped||N.contextLost||(ve(),requestAnimationFrame(ue))}(),N.redraw=function(){N._stopped||(Z=!0,ve())},N},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(g,k,x){var e=g("glslify");x.pointVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),x.pointFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),x.pickVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),x.pickFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(g,k,x){"use strict";var e=g("gl-shader"),n=g("gl-buffer"),i=g("typedarray-pool"),l=g("./lib/shader");function r(h,s,o,p,c){this.plot=h,this.offsetBuffer=s,this.pickBuffer=o,this.shader=p,this.pickShader=c,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}k.exports=function(h,s){var o=h.gl,u=new r(h,n(o),n(o),e(o,l.pointVertex,l.pointFragment),e(o,l.pickVertex,l.pickFragment));return u.update(s),h.addObject(u),u};var d,f,t=r.prototype;t.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},t.update=function(h){var s;function o(b,w){return b in h?h[b]:w}h=h||{},this.sizeMin=o("sizeMin",.5),this.sizeMax=o("sizeMax",20),this.color=o("color",[1,0,0,1]).slice(),this.areaRatio=o("areaRatio",1),this.borderColor=o("borderColor",[0,0,0,1]).slice(),this.blend=o("blend",!1);var p=h.positions.length>>>1,c=h.positions instanceof Float32Array,a=h.idToIndex instanceof Int32Array&&h.idToIndex.length>=p,y=h.positions,u=c?y:i.mallocFloat32(y.length),_=a?h.idToIndex:i.mallocInt32(p);if(c||u.set(y),!a)for(u.set(y),s=0;s<p;s++)_[s]=s;this.points=y,this.offsetBuffer.update(u),this.pickBuffer.update(_),c||i.free(u),a||i.free(_),this.pointCount=p,this.pickOffset=0},t.unifiedDraw=(d=[1,0,0,0,1,0,0,0,1],f=[0,0,0,0],function(h){var s=void 0!==h,o=s?this.pickShader:this.shader,p=this.plot.gl,c=this.plot.dataBox;if(0===this.pointCount)return h;var a=c[2]-c[0],y=c[3]-c[1],u=function(T,C){var M,I=0,P=T.length>>>1;for(M=0;M<P;M++){var S=T[2*M],E=T[2*M+1];S>=C[0]&&S<=C[2]&&E>=C[1]&&E<=C[3]&&I++}return I}(this.points,c),_=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(u,.33333)));d[0]=2/a,d[4]=2/y,d[6]=-2*c[0]/a-1,d[7]=-2*c[1]/y-1,this.offsetBuffer.bind(),o.bind(),o.attributes.position.pointer(),o.uniforms.matrix=d,o.uniforms.color=this.color,o.uniforms.borderColor=this.borderColor,o.uniforms.pointCloud=_<5,o.uniforms.pointSize=_,o.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),s&&(f[0]=255&h,f[1]=h>>8&255,f[2]=h>>16&255,f[3]=h>>24&255,this.pickBuffer.bind(),o.attributes.pickId.pointer(p.UNSIGNED_BYTE),o.uniforms.pickOffset=f,this.pickOffset=h);var b=p.getParameter(p.BLEND),w=p.getParameter(p.DITHER);return b&&!this.blend&&p.disable(p.BLEND),w&&p.disable(p.DITHER),p.drawArrays(p.POINTS,0,this.pointCount),b&&!this.blend&&p.enable(p.BLEND),w&&p.enable(p.DITHER),h+this.pointCount}),t.draw=t.unifiedDraw,t.drawPick=t.unifiedDraw,t.pick=function(h,s,o){var p=this.pickOffset;if(o<p||o>=p+this.pointCount)return null;var a=o-p,y=this.points;return{object:this,pointId:a,dataCoord:[y[2*a],y[2*a+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(g,k,x){k.exports=function(e,n,i,l){var r,d,f,t,h,s=n[0],o=n[1],p=n[2],c=n[3],a=i[0],y=i[1],u=i[2],_=i[3];return(d=s*a+o*y+p*u+c*_)<0&&(d=-d,a=-a,y=-y,u=-u,_=-_),1-d>1e-6?(r=Math.acos(d),f=Math.sin(r),t=Math.sin((1-l)*r)/f,h=Math.sin(l*r)/f):(t=1-l,h=l),e[0]=t*s+h*a,e[1]=t*o+h*y,e[2]=t*p+h*u,e[3]=t*c+h*_,e}},{}],125:[function(g,k,x){"use strict";k.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(g,k,x){"use strict";var e=g("vectorize-text");k.exports=function(i,l,r){var d=n[l];if(d||(d=n[l]={}),i in d)return d[i];var f={textAlign:"center",textBaseline:"middle",lineHeight:1,font:l,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},t=e(i,f);f.triangles=!1;var h,s,o=e(i,f);if(r&&1!==r){for(h=0;h<t.positions.length;++h)for(s=0;s<t.positions[h].length;++s)t.positions[h][s]/=r;for(h=0;h<o.positions.length;++h)for(s=0;s<o.positions[h].length;++s)o.positions[h][s]/=r}var p=[[1/0,1/0],[-1/0,-1/0]],c=o.positions.length;for(h=0;h<c;++h){var a=o.positions[h];for(s=0;s<2;++s)p[0][s]=Math.min(p[0][s],a[s]),p[1][s]=Math.max(p[1][s],a[s])}return d[i]=[t,o,p]};var n={}},{"vectorize-text":311}],127:[function(g,k,x){var e=g("gl-shader"),n=g("glslify"),i=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),l=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),r=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),d=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),f=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),t=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],h={vertex:i,fragment:d,attributes:t},s={vertex:l,fragment:d,attributes:t},o={vertex:r,fragment:d,attributes:t},p={vertex:i,fragment:f,attributes:t},c={vertex:l,fragment:f,attributes:t},a={vertex:r,fragment:f,attributes:t};function y(u,_){var b=e(u,_),w=b.attributes;return w.position.location=0,w.color.location=1,w.glyph.location=2,w.id.location=3,b}x.createPerspective=function(u){return y(u,h)},x.createOrtho=function(u){return y(u,s)},x.createProject=function(u){return y(u,o)},x.createPickPerspective=function(u){return y(u,p)},x.createPickOrtho=function(u){return y(u,c)},x.createPickProject=function(u){return y(u,a)}},{"gl-shader":132,glslify:231}],128:[function(g,k,x){"use strict";var e=g("is-string-blank"),n=g("gl-buffer"),i=g("gl-vao"),l=g("typedarray-pool"),r=g("gl-mat4/multiply"),d=g("./lib/shaders"),f=g("./lib/glyphs"),t=g("./lib/get-simple-string"),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(Y,X){var Z=Y[0],W=Y[1],re=Y[2],U=Y[3];return Y[0]=X[0]*Z+X[4]*W+X[8]*re+X[12]*U,Y[1]=X[1]*Z+X[5]*W+X[9]*re+X[13]*U,Y[2]=X[2]*Z+X[6]*W+X[10]*re+X[14]*U,Y[3]=X[3]*Z+X[7]*W+X[11]*re+X[15]*U,Y}function o(Y,X,Z,W){return s(W,W),s(W,W),s(W,W)}function p(Y,X){this.index=Y,this.dataCoordinate=this.position=X}function c(Y){return!0===Y||Y>1?1:Y}function a(Y,X,Z,W,re,U,B,V,ee,N,K,J){this.gl=Y,this.pixelRatio=1,this.shader=X,this.orthoShader=Z,this.projectShader=W,this.pointBuffer=re,this.colorBuffer=U,this.glyphBuffer=B,this.idBuffer=V,this.vao=ee,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=N,this.pickOrthoShader=K,this.pickProjectShader=J,this.points=[],this._selectResult=new p(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}k.exports=function(Y){var X=Y.gl,Z=d.createPerspective(X),W=d.createOrtho(X),re=d.createProject(X),U=d.createPickPerspective(X),B=d.createPickOrtho(X),V=d.createPickProject(X),ee=n(X),N=n(X),K=n(X),J=n(X),ae=new a(X,Z,W,re,ee,N,K,J,i(X,[{buffer:ee,size:3,type:X.FLOAT},{buffer:N,size:4,type:X.FLOAT},{buffer:K,size:2,type:X.FLOAT},{buffer:J,size:4,type:X.UNSIGNED_BYTE,normalized:!0}]),U,B,V);return ae.update(Y),ae};var y=a.prototype;y.pickSlots=1,y.setPickBase=function(Y){this.pickId=Y},y.isTransparent=function(){if(this.hasAlpha)return!0;for(var Y=0;Y<3;++Y)if(this.axesProject[Y]&&this.projectHasAlpha)return!0;return!1},y.isOpaque=function(){if(!this.hasAlpha)return!0;for(var Y=0;Y<3;++Y)if(this.axesProject[Y]&&!this.projectHasAlpha)return!0;return!1};var u=[0,0],_=[0,0,0],b=[0,0,0],w=[0,0,0,1],T=[0,0,0,1],C=h.slice(),M=[0,0,0],I=[[0,0,0],[0,0,0]];function P(Y){return Y[0]=Y[1]=Y[2]=0,Y}function S(Y,X){return Y[0]=X[0],Y[1]=X[1],Y[2]=X[2],Y[3]=1,Y}function E(Y,X,Z,W){return Y[0]=X[0],Y[1]=X[1],Y[2]=X[2],Y[Z]=W,Y}var D=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function j(Y,X,Z,W,re,U,B){var V=Z.gl;if((U===Z.projectHasAlpha||B)&&function R(Y,X,Z,W){var re,U=X.axesProject,B=X.gl,V=Y.uniforms,ee=Z.model||h,N=Z.view||h,K=Z.projection||h,J=X.axesBounds,te=function(Ee){for(var Ae=I,De=0;De<2;++De)for(var Ie=0;Ie<3;++Ie)Ae[De][Ie]=Math.max(Math.min(Ee[De][Ie],1e8),-1e8);return Ae}(X.clipBounds);re=X.axes&&X.axes.lastCubeProps?X.axes.lastCubeProps.axis:[1,1,1],u[0]=2/B.drawingBufferWidth,u[1]=2/B.drawingBufferHeight,Y.bind(),V.view=N,V.projection=K,V.screenSize=u,V.highlightId=X.highlightId,V.highlightScale=X.highlightScale,V.clipBounds=te,V.pickGroup=X.pickId/255,V.pixelRatio=W;for(var ae=0;ae<3;++ae)if(U[ae]){V.scale=X.projectScale[ae],V.opacity=X.projectOpacity[ae];for(var le=C,se=0;se<16;++se)le[se]=0;for(se=0;se<4;++se)le[5*se]=1;le[5*ae]=0,le[12+ae]=re[ae]<0?J[0][ae]:J[1][ae],r(le,ee,le),V.model=le;var ve=(ae+1)%3,ue=(ae+2)%3,ye=P(_),Me=P(b);ye[ve]=1,Me[ue]=1;var pe=o(0,0,0,S(w,ye)),ge=o(0,0,0,S(T,Me));if(Math.abs(pe[1])>Math.abs(ge[1])){var we=pe;pe=ge,ge=we,we=ye,ye=Me,Me=we;var oe=ve;ve=ue,ue=oe}pe[0]<0&&(ye[ve]=-1),ge[1]>0&&(Me[ue]=-1);var de=0,Te=0;for(se=0;se<4;++se)de+=Math.pow(ee[4*ve+se],2),Te+=Math.pow(ee[4*ue+se],2);ye[ve]/=Math.sqrt(de),Me[ue]/=Math.sqrt(Te),V.axes[0]=ye,V.axes[1]=Me,V.fragClipBounds[0]=E(M,te[0],ae,-1e8),V.fragClipBounds[1]=E(M,te[1],ae,1e8),X.vao.bind(),X.vao.draw(B.TRIANGLES,X.vertexCount),X.lineWidth>0&&(B.lineWidth(X.lineWidth*W),X.vao.draw(B.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}(X,Z,W,re),U===Z.hasAlpha||B){Y.bind();var ee=Y.uniforms;ee.model=W.model||h,ee.view=W.view||h,ee.projection=W.projection||h,u[0]=2/V.drawingBufferWidth,u[1]=2/V.drawingBufferHeight,ee.screenSize=u,ee.highlightId=Z.highlightId,ee.highlightScale=Z.highlightScale,ee.fragClipBounds=D,ee.clipBounds=Z.axes.bounds,ee.opacity=Z.opacity,ee.pickGroup=Z.pickId/255,ee.pixelRatio=re,Z.vao.bind(),Z.vao.draw(V.TRIANGLES,Z.vertexCount),Z.lineWidth>0&&(V.lineWidth(Z.lineWidth*re),Z.vao.draw(V.LINES,Z.lineVertexCount,Z.vertexCount)),Z.vao.unbind()}}function H(Y,X,Z,W){var re;re=Array.isArray(Y)?X<Y.length?Y[X]:void 0:Y,re=t(re);var U=!0;e(re)&&(re="\u25bc",U=!1);var B=f(re,Z,W);return{mesh:B[0],lines:B[1],bounds:B[2],visible:U}}y.draw=function(Y){j(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Y,this.pixelRatio,!1,!1)},y.drawTransparent=function(Y){j(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Y,this.pixelRatio,!0,!1)},y.drawPick=function(Y){j(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,Y,1,!0,!0)},y.pick=function(Y){if(!Y||Y.id!==this.pickId)return null;var X=Y.value[2]+(Y.value[1]<<8)+(Y.value[0]<<16);if(X>=this.pointCount||X<0)return null;var Z=this.points[X],W=this._selectResult;W.index=X;for(var re=0;re<3;++re)W.position[re]=W.dataCoordinate[re]=Z[re];return W},y.highlight=function(Y){if(Y){var X=Y.index;this.highlightId=[(255&X)/255,(X>>8&255)/255,(X>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},y.update=function(Y){if("perspective"in(Y=Y||{})&&(this.useOrtho=!Y.perspective),"orthographic"in Y&&(this.useOrtho=!!Y.orthographic),"lineWidth"in Y&&(this.lineWidth=Y.lineWidth),"project"in Y)if(Array.isArray(Y.project))this.axesProject=Y.project;else{var X=!!Y.project;this.axesProject=[X,X,X]}if("projectScale"in Y)if(Array.isArray(Y.projectScale))this.projectScale=Y.projectScale.slice();else{var Z=+Y.projectScale;this.projectScale=[Z,Z,Z]}if(this.projectHasAlpha=!1,"projectOpacity"in Y){this.projectOpacity=Array.isArray(Y.projectOpacity)?Y.projectOpacity.slice():[Z=+Y.projectOpacity,Z,Z];for(var W=0;W<3;++W)this.projectOpacity[W]=c(this.projectOpacity[W]),this.projectOpacity[W]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in Y&&(this.opacity=c(Y.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var re,U,B=Y.position,V=Y.font||"normal",ee=Y.alignment||[0,0];if(2===ee.length)re=ee[0],U=ee[1];else for(re=[],U=[],W=0;W<ee.length;++W)re[W]=ee[W][0],U[W]=ee[W][1];var N=[1/0,1/0,1/0],K=[-1/0,-1/0,-1/0],J=Y.glyph,te=Y.color,ae=Y.size,le=Y.angle,se=Y.lineColor,ve=-1,ue=0,ye=0,Me=0;if(B.length){Me=B.length;e:for(W=0;W<Me;++W){for(var pe=B[W],ge=0;ge<3;++ge)if(isNaN(pe[ge])||!isFinite(pe[ge]))continue e;var we=(Qe=H(J,W,V,this.pixelRatio)).mesh,oe=Qe.lines,de=Qe.bounds;ue+=3*we.cells.length,ye+=2*oe.edges.length}}var Te=ue+ye,Ee=l.mallocFloat(3*Te),Ae=l.mallocFloat(4*Te),De=l.mallocFloat(2*Te),Ie=l.mallocUint32(Te);if(Te>0){var Oe=0,Xe=ue,Fe=[0,0,0,1],Pe=[0,0,0,1],Re=Array.isArray(te)&&Array.isArray(te[0]),qe=Array.isArray(se)&&Array.isArray(se[0]);e:for(W=0;W<Me;++W){for(ve+=1,pe=B[W],ge=0;ge<3;++ge){if(isNaN(pe[ge])||!isFinite(pe[ge]))continue e;K[ge]=Math.max(K[ge],pe[ge]),N[ge]=Math.min(N[ge],pe[ge])}we=(Qe=H(J,W,V,this.pixelRatio)).mesh,oe=Qe.lines,de=Qe.bounds;var Qe,ct=Qe.visible;if(ct)if(Array.isArray(te)){if(3===(bt=Re?W<te.length?te[W]:[0,0,0,0]:te).length){for(ge=0;ge<3;++ge)Fe[ge]=bt[ge];Fe[3]=1}else if(4===bt.length){for(ge=0;ge<4;++ge)Fe[ge]=bt[ge];!this.hasAlpha&&bt[3]<1&&(this.hasAlpha=!0)}}else Fe[0]=Fe[1]=Fe[2]=0,Fe[3]=1;else Fe=[1,1,1,0];if(ct)if(Array.isArray(se)){var bt;if(3===(bt=qe?W<se.length?se[W]:[0,0,0,0]:se).length){for(ge=0;ge<3;++ge)Pe[ge]=bt[ge];Pe[ge]=1}else if(4===bt.length){for(ge=0;ge<4;++ge)Pe[ge]=bt[ge];!this.hasAlpha&&bt[3]<1&&(this.hasAlpha=!0)}}else Pe[0]=Pe[1]=Pe[2]=0,Pe[3]=1;else Pe=[1,1,1,0];var Tt=.5;ct?Array.isArray(ae)?Tt=W<ae.length?+ae[W]:12:ae?Tt=+ae:this.useOrtho&&(Tt=12):Tt=0;var _t=0;Array.isArray(le)?_t=W<le.length?+le[W]:0:le&&(_t=+le);var nt=Math.cos(_t),Ke=Math.sin(_t);for(pe=B[W],ge=0;ge<3;++ge)K[ge]=Math.max(K[ge],pe[ge]),N[ge]=Math.min(N[ge],pe[ge]);var xt=re,Ht=U;xt=0,Array.isArray(re)?xt=W<re.length?re[W]:0:re&&(xt=re),Ht=0,Array.isArray(U)?Ht=W<U.length?U[W]:0:U&&(Ht=U);var Zt=[xt*=xt>0?1-de[0][0]:xt<0?1+de[1][0]:1,Ht*=Ht>0?1-de[0][1]:Ht<0?1+de[1][1]:1],$t=we.cells||[],Xt=we.positions||[];for(ge=0;ge<$t.length;++ge)for(var cr=$t[ge],Ft=0;Ft<3;++Ft){for(var Be=0;Be<3;++Be)Ee[3*Oe+Be]=pe[Be];for(Be=0;Be<4;++Be)Ae[4*Oe+Be]=Fe[Be];Ie[Oe]=ve;var He=Xt[cr[Ft]];De[2*Oe]=Tt*(nt*He[0]-Ke*He[1]+Zt[0]),De[2*Oe+1]=Tt*(Ke*He[0]+nt*He[1]+Zt[1]),Oe+=1}for($t=oe.edges,Xt=oe.positions,ge=0;ge<$t.length;++ge)for(cr=$t[ge],Ft=0;Ft<2;++Ft){for(Be=0;Be<3;++Be)Ee[3*Xe+Be]=pe[Be];for(Be=0;Be<4;++Be)Ae[4*Xe+Be]=Pe[Be];Ie[Xe]=ve,De[2*Xe]=Tt*(nt*(He=Xt[cr[Ft]])[0]-Ke*He[1]+Zt[0]),De[2*Xe+1]=Tt*(Ke*He[0]+nt*He[1]+Zt[1]),Xe+=1}}}this.bounds=[N,K],this.points=B,this.pointCount=B.length,this.vertexCount=ue,this.lineVertexCount=ye,this.pointBuffer.update(Ee),this.colorBuffer.update(Ae),this.glyphBuffer.update(De),this.idBuffer.update(Ie),l.free(Ee),l.free(Ae),l.free(De),l.free(Ie)},y.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(g,k,x){"use strict";var e=g("glslify");x.boxVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),x.boxFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(g,k,x){"use strict";var e=g("gl-shader"),n=g("gl-buffer"),i=g("./lib/shaders");function l(d,f,t){this.plot=d,this.boxBuffer=f,this.boxShader=t,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}k.exports=function(d,f){var t=d.gl,o=new l(d,n(t,[0,0,0,1,1,0,1,1]),e(t,i.boxVertex,i.boxFragment));return o.update(f),d.addOverlay(o),o};var r=l.prototype;r.draw=function(){if(this.enabled){var d=this.plot,f=this.selectBox,t=this.borderWidth,h=this.innerColor,s=this.outerColor,o=this.borderColor,p=d.box,c=d.screenBox,a=d.dataBox,y=d.viewBox,u=d.pixelRatio,_=(f[0]-a[0])*(y[2]-y[0])/(a[2]-a[0])+y[0],b=(f[1]-a[1])*(y[3]-y[1])/(a[3]-a[1])+y[1],w=(f[2]-a[0])*(y[2]-y[0])/(a[2]-a[0])+y[0],T=(f[3]-a[1])*(y[3]-y[1])/(a[3]-a[1])+y[1];if(_=Math.max(_,y[0]),b=Math.max(b,y[1]),w=Math.min(w,y[2]),T=Math.min(T,y[3]),!(w<_||T<b)){p.bind();var C=c[2]-c[0],M=c[3]-c[1];if(this.outerFill&&(p.drawBox(0,0,C,b,s),p.drawBox(0,b,_,T,s),p.drawBox(0,T,C,M,s),p.drawBox(w,b,C,T,s)),this.innerFill&&p.drawBox(_,b,w,T,h),t>0){var I=t*u;p.drawBox(_-I,b-I,w+I,b+I,o),p.drawBox(_-I,T-I,w+I,T+I,o),p.drawBox(_-I,b-I,_+I,T+I,o),p.drawBox(w-I,b-I,w+I,T+I,o)}}}},r.update=function(d){this.innerFill=!!(d=d||{}).innerFill,this.outerFill=!!d.outerFill,this.innerColor=(d.innerColor||[0,0,0,.5]).slice(),this.outerColor=(d.outerColor||[0,0,0,.5]).slice(),this.borderColor=(d.borderColor||[0,0,0,1]).slice(),this.borderWidth=d.borderWidth||0,this.selectBox=(d.selectBox||this.selectBox).slice()},r.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(g,k,x){"use strict";k.exports=function(t,h){var s=h[0],o=h[1];return new d(t,e(t,s,o,{}),n.mallocUint8(s*o*4))};var e=g("gl-fbo"),n=g("typedarray-pool"),i=g("ndarray"),l=g("bit-twiddle").nextPow2;function r(t,h,s,o,p){this.coord=[t,h],this.id=s,this.value=o,this.distance=p}function d(t,h,s){this.gl=t,this.fbo=h,this.buffer=s,this._readTimeout=null;var o=this;this._readCallback=function(){o.gl&&(h.bind(),t.readPixels(0,0,h.shape[0],h.shape[1],t.RGBA,t.UNSIGNED_BYTE,o.buffer),o._readTimeout=null)}}var f=d.prototype;Object.defineProperty(f,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(t){if(this.gl){this.fbo.shape=t;var h=this.fbo.shape[0],s=this.fbo.shape[1];if(s*h*4>this.buffer.length){n.free(this.buffer);for(var o=this.buffer=n.mallocUint8(l(s*h*4)),p=0;p<s*h*4;++p)o[p]=255}return t}}}),f.begin=function(){var t=this.gl;t&&(this.fbo.bind(),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT))},f.end=function(){var t=this.gl;t&&(t.bindFramebuffer(t.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},f.query=function(t,h,s){if(!this.gl)return null;var o=this.fbo.shape.slice();t|=0,h|=0,"number"!=typeof s&&(s=1);var p=0|Math.min(Math.max(t-s,0),o[0]),c=0|Math.min(Math.max(t+s,0),o[0]),a=0|Math.min(Math.max(h-s,0),o[1]),y=0|Math.min(Math.max(h+s,0),o[1]);if(c<=p||y<=a)return null;var u=[c-p,y-a],_=i(this.buffer,[u[0],u[1],4],[4,4*o[0],1],4*(p+o[0]*a)),b=function(C,M,I){for(var P=1e8,S=-1,E=-1,R=C.shape[0],D=C.shape[1],j=0;j<R;j++)for(var H=0;H<D;H++){var Y=C.get(j,H,0),X=C.get(j,H,1),Z=C.get(j,H,2),W=C.get(j,H,3);if(Y<255||X<255||Z<255||W<255){var re=M-j,U=I-H,B=re*re+U*U;B<P&&(P=B,S=j,E=H)}}return[S,E,P]}(_.hi(u[0],u[1],1),s,s),w=b[0],T=b[1];return w<0||Math.pow(this.radius,2)<b[2]?null:new r(w+p|0,T+a|0,_.get(w,T,0),[_.get(w,T,1),_.get(w,T,2),_.get(w,T,3)],Math.sqrt(b[2]))},f.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(g,k,x){"use strict";var e=g("./lib/create-uniforms"),n=g("./lib/create-attributes"),i=g("./lib/reflect"),l=g("./lib/shader-cache"),r=g("./lib/runtime-reflect"),d=g("./lib/GLError");function f(s){this.gl=s,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var t=f.prototype;function h(s,o){return s.name<o.name?-1:1}t.bind=function(){var s;this.program||this._relink();var o=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),p=this.gl.lastAttribCount;if(o>p)for(s=p;s<o;s++)this.gl.enableVertexAttribArray(s);else if(p>o)for(s=o;s<p;s++)this.gl.disableVertexAttribArray(s);this.gl.lastAttribCount=o,this.gl.useProgram(this.program)},t.dispose=function(){for(var s=this.gl.lastAttribCount,o=0;o<s;o++)this.gl.disableVertexAttribArray(o);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},t.update=function(s,o,p,c){if(!o||1===arguments.length){var a=s;s=a.vertex,o=a.fragment,p=a.uniforms,c=a.attributes}var y=this,u=y.gl,_=y._vref;y._vref=l.shader(u,u.VERTEX_SHADER,s),_&&_.dispose(),y.vertShader=y._vref.shader;var b=this._fref;if(y._fref=l.shader(u,u.FRAGMENT_SHADER,o),b&&b.dispose(),y.fragShader=y._fref.shader,!p||!c){var w=u.createProgram();if(u.attachShader(w,y.fragShader),u.attachShader(w,y.vertShader),u.linkProgram(w),!u.getProgramParameter(w,u.LINK_STATUS)){var T=u.getProgramInfoLog(w);throw new d(T,"Error linking program:"+T)}p=p||r.uniforms(u,w),c=c||r.attributes(u,w),u.deleteProgram(w)}(c=c.slice()).sort(h);var C,M=[],I=[],P=[];for(C=0;C<c.length;++C){var S=c[C];if(S.type.indexOf("mat")>=0){for(var E=0|S.type.charAt(S.type.length-1),R=new Array(E),D=0;D<E;++D)R[D]=P.length,I.push(S.name+"["+D+"]"),"number"==typeof S.location?P.push(S.location+D):Array.isArray(S.location)&&S.location.length===E&&"number"==typeof S.location[D]?P.push(0|S.location[D]):P.push(-1);M.push({name:S.name,type:S.type,locations:R})}else M.push({name:S.name,type:S.type,locations:[P.length]}),I.push(S.name),P.push("number"==typeof S.location?0|S.location:-1)}var j=0;for(C=0;C<P.length;++C)if(P[C]<0){for(;P.indexOf(j)>=0;)j+=1;P[C]=j}var H=new Array(p.length);function Y(){y.program=l.program(u,y._vref,y._fref,I,P);for(var X=0;X<p.length;++X)H[X]=u.getUniformLocation(y.program,p[X].name)}Y(),y._relink=Y,y.types={uniforms:i(p),attributes:i(c)},y.attributes=n(u,y,M,P),Object.defineProperty(y,"uniforms",e(u,y,p,H))},k.exports=function(s,o,p,c,a){var y=new f(s);return y.update(o,p,c,a),y}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(g,k,x){function e(n,i,l){this.shortMessage=i||"",this.longMessage=l||"",this.rawError=n||"",this.message="gl-shader: "+(i||n||"")+(l?"\n"+l:""),this.stack=(new Error).stack}(e.prototype=new Error).name="GLError",e.prototype.constructor=e,k.exports=e},{}],134:[function(g,k,x){"use strict";k.exports=function(f,t,h,s){for(var o={},p=0,c=h.length;p<c;++p){var a=h[p],y=a.name,u=a.type,_=a.locations;switch(u){case"bool":case"int":case"float":r(f,t,_[0],s,1,o,y);break;default:if(u.indexOf("vec")>=0){if((b=u.charCodeAt(u.length-1)-48)<2||b>4)throw new e("","Invalid data type for attribute "+y+": "+u);r(f,t,_[0],s,b,o,y)}else{if(!(u.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+y+": "+u);var b;if((b=u.charCodeAt(u.length-1)-48)<2||b>4)throw new e("","Invalid data type for attribute "+y+": "+u);d(f,t,_,s,b,o,y)}}}return o};var e=g("./GLError");function n(f,t,h,s,o,p){this._gl=f,this._wrapper=t,this._index=h,this._locations=s,this._dimension=o,this._constFunc=p}var i=n.prototype;i.pointer=function(f,t,h,s){var o=this._gl,p=this._locations[this._index];o.vertexAttribPointer(p,this._dimension,f||o.FLOAT,!!t,h||0,s||0),o.enableVertexAttribArray(p)},i.set=function(f,t,h,s){return this._constFunc(this._locations[this._index],f,t,h,s)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(f){return f!==this._locations[this._index]&&(this._locations[this._index]=0|f,this._wrapper.program=null),0|f}});var l=[function(f,t,h){return void 0===h.length?f.vertexAttrib1f(t,h):f.vertexAttrib1fv(t,h)},function(f,t,h,s){return void 0===h.length?f.vertexAttrib2f(t,h,s):f.vertexAttrib2fv(t,h)},function(f,t,h,s,o){return void 0===h.length?f.vertexAttrib3f(t,h,s,o):f.vertexAttrib3fv(t,h)},function(f,t,h,s,o,p){return void 0===h.length?f.vertexAttrib4f(t,h,s,o,p):f.vertexAttrib4fv(t,h)}];function r(f,t,h,s,o,p,c){var a=l[o],y=new n(f,t,h,s,o,a);Object.defineProperty(p,c,{set:function(u){return f.disableVertexAttribArray(s[h]),a(f,s[h],u),u},get:function(){return y},enumerable:!0})}function d(f,t,h,s,o,p,c){for(var a=new Array(o),y=new Array(o),u=0;u<o;++u)r(f,t,h[u],s,o,a,u),y[u]=a[u];Object.defineProperty(a,"location",{set:function(w){if(Array.isArray(w))for(var T=0;T<o;++T)y[T].location=w[T];else for(T=0;T<o;++T)y[T].location=w+T;return w},get:function(){for(var w=new Array(o),T=0;T<o;++T)w[T]=s[h[T]];return w},enumerable:!0}),a.pointer=function(w,T,C,M){w=w||f.FLOAT,T=!!T,C=C||o*o,M=M||0;for(var I=0;I<o;++I){var P=s[h[I]];f.vertexAttribPointer(P,o,w,T,C,M+I*o),f.enableVertexAttribArray(P)}};var _=new Array(o),b=f["vertexAttrib"+o+"fv"];Object.defineProperty(p,c,{set:function(w){for(var T=0;T<o;++T){var C=s[h[T]];if(f.disableVertexAttribArray(C),Array.isArray(w[0]))b.call(f,C,w[T]);else{for(var M=0;M<o;++M)_[M]=w[o*T+M];b.call(f,C,_)}}return w},get:function(){return a},enumerable:!0})}},{"./GLError":133}],135:[function(g,k,x){"use strict";var e=g("./reflect"),n=g("./GLError");function i(r){return function(){return r}}function l(r,d){for(var f=new Array(r),t=0;t<r;++t)f[t]=d;return f}k.exports=function(r,d,f,t){function h(c){return function(a){for(var y=function D(j,H){if("object"!=typeof H)return[[j,H]];var Y=[];for(var X in H){var Z=H[X],W=j;parseInt(X)+""===X?W+="["+X+"]":W+="."+X,"object"==typeof Z?Y.push.apply(Y,D(W,Z)):Y.push([W,Z])}return Y}("",c),u=0;u<y.length;++u){var _=y[u],b=_[0],w=_[1];if(t[w]){var T=a;if("string"==typeof b&&(0===b.indexOf(".")||0===b.indexOf("["))){var C=b;if(0===b.indexOf(".")&&(C=b.slice(1)),C.indexOf("]")===C.length-1){var M=C.indexOf("["),I=C.slice(0,M),P=C.slice(M+1,C.length-1);T=I?a[I][P]:a[P]}else T=a[C]}var S,E=f[w].type;switch(E){case"bool":case"int":case"sampler2D":case"samplerCube":r.uniform1i(t[w],T);break;case"float":r.uniform1f(t[w],T);break;default:var R=E.indexOf("vec");if(!(0<=R&&R<=1&&E.length===4+R)){if(0===E.indexOf("mat")&&4===E.length){if((S=E.charCodeAt(E.length-1)-48)<2||S>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+E);r["uniformMatrix"+S+"fv"](t[w],!1,T);break}throw new n("","Unknown uniform data type for "+name+": "+E)}if((S=E.charCodeAt(E.length-1)-48)<2||S>4)throw new n("","Invalid data type");switch(E.charAt(0)){case"b":case"i":r["uniform"+S+"iv"](t[w],T);break;case"v":r["uniform"+S+"fv"](t[w],T);break;default:throw new n("","Unrecognized data type for vector "+name+": "+E)}}}}}}function s(c,a,y){if("object"==typeof y){var u=o(y);Object.defineProperty(c,a,{get:i(u),set:h(y),enumerable:!0,configurable:!1})}else t[y]?Object.defineProperty(c,a,{get:(_=y,function(b,w,T){return b.getUniform(w.program,T[_])}),set:h(y),enumerable:!0,configurable:!1}):c[a]=function(b){switch(b){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var w=b.indexOf("vec");if(0<=w&&w<=1&&b.length===4+w){if((T=b.charCodeAt(b.length-1)-48)<2||T>4)throw new n("","Invalid data type");return"b"===b.charAt(0)?l(T,!1):l(T,0)}if(0===b.indexOf("mat")&&4===b.length){var T;if((T=b.charCodeAt(b.length-1)-48)<2||T>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+b);return l(T*T,0)}throw new n("","Unknown uniform data type for "+name+": "+b)}}(f[y].type);var _}function o(c){var a;if(Array.isArray(c)){a=new Array(c.length);for(var y=0;y<c.length;++y)s(a,y,c[y])}else for(var u in a={},c)s(a,u,c[u]);return a}var p=e(f,!0);return{get:i(o(p)),set:h(p),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(g,k,x){"use strict";k.exports=function(e,n){for(var i={},l=0;l<e.length;++l)for(var r=e[l].name.split("."),d=i,f=0;f<r.length;++f){var t=r[f].split("[");if(t.length>1){t[0]in d||(d[t[0]]=[]),d=d[t[0]];for(var h=1;h<t.length;++h){var s=parseInt(t[h]);h<t.length-1||f<r.length-1?(s in d||(d[s]=h<t.length-1?[]:{}),d=d[s]):d[s]=n?l:e[l].type}}else f<r.length-1?(t[0]in d||(d[t[0]]={}),d=d[t[0]]):d[t[0]]=n?l:e[l].type}return i}},{}],137:[function(g,k,x){"use strict";x.uniforms=function(l,r){for(var d=l.getProgramParameter(r,l.ACTIVE_UNIFORMS),f=[],t=0;t<d;++t){var h=l.getActiveUniform(r,t);if(h){var s=i(l,h.type);if(h.size>1)for(var o=0;o<h.size;++o)f.push({name:h.name.replace("[0]","["+o+"]"),type:s});else f.push({name:h.name,type:s})}}return f},x.attributes=function(l,r){for(var d=l.getProgramParameter(r,l.ACTIVE_ATTRIBUTES),f=[],t=0;t<d;++t){var h=l.getActiveAttrib(r,t);h&&f.push({name:h.name,type:i(l,h.type)})}return f};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},n=null;function i(l,r){if(!n){var d=Object.keys(e);n={};for(var f=0;f<d.length;++f){var t=d[f];n[l[t]]=e[t]}}return n[r]}},{}],138:[function(g,k,x){"use strict";x.shader=function(h,s,o){return t(h).getShaderReference(s,o)},x.program=function(h,s,o,p,c){return t(h).getProgram(s,o,p,c)};var e=g("./GLError"),n=g("gl-format-compiler-error"),i=new(typeof WeakMap>"u"?g("weakmap-shim"):WeakMap),l=0;function r(h,s,o,p,c,a,y){this.id=h,this.src=s,this.type=o,this.shader=p,this.count=a,this.programs=[],this.cache=y}function d(h){this.gl=h,this.shaders=[{},{}],this.programs={}}r.prototype.dispose=function(){if(0==--this.count){for(var h=this.cache,s=h.gl,o=this.programs,p=0,c=o.length;p<c;++p){var a=h.programs[o[p]];a&&(delete h.programs[p],s.deleteProgram(a))}s.deleteShader(this.shader),delete h.shaders[this.type===s.FRAGMENT_SHADER|0][this.src]}};var f=d.prototype;function t(h){var s=i.get(h);return s||(s=new d(h),i.set(h,s)),s}f.getShaderReference=function(h,s){var o=this.gl,p=this.shaders[h===o.FRAGMENT_SHADER|0],c=p[s];if(c&&o.isShader(c.shader))c.count+=1;else{var a=function(y,u,_){var b=y.createShader(u);if(y.shaderSource(b,_),y.compileShader(b),!y.getShaderParameter(b,y.COMPILE_STATUS)){var w=y.getShaderInfoLog(b);try{var T=n(w,_,u)}catch(C){throw console.warn("Failed to format compiler error: "+C),new e(w,"Error compiling shader:\n"+w)}throw new e(w,T.short,T.long)}return b}(o,h,s);c=p[s]=new r(l++,s,h,a,[],1,this)}return c},f.getProgram=function(h,s,o,p){var c=[h.id,s.id,o.join(":"),p.join(":")].join("@"),a=this.programs[c];return a&&this.gl.isProgram(a)||(this.programs[c]=a=function(y,u,_,b,w){var T=y.createProgram();y.attachShader(T,u),y.attachShader(T,_);for(var C=0;C<b.length;++C)y.bindAttribLocation(T,w[C],b[C]);if(y.linkProgram(T),!y.getProgramParameter(T,y.LINK_STATUS)){var M=y.getProgramInfoLog(T);throw new e(M,"Error linking program: "+M)}return T}(this.gl,h.shader,s.shader,o,p),h.programs.push(c),s.programs.push(c)),a}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(g,k,x){"use strict";function e(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}k.exports=function(i,l){var r=new e(i);return r.update(l),i.addOverlay(r),r};var n=e.prototype;n.update=function(i){this.enable=((i=i||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(l){return l.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},n.draw=function(){var i=this.enable,l=this.width,r=this.color,d=this.center,f=this.plot,t=f.line,h=f.dataBox,s=f.viewBox;if(t.bind(),h[0]<=d[0]&&d[0]<=h[2]&&h[1]<=d[1]&&d[1]<=h[3]){var o=s[0]+(d[0]-h[0])/(h[2]-h[0])*(s[2]-s[0]),p=s[1]+(d[1]-h[1])/(h[3]-h[1])*(s[3]-s[1]);i[0]&&t.drawLine(o,p,s[0],p,l[0],r[0]),i[1]&&t.drawLine(o,p,o,s[1],l[1],r[1]),i[2]&&t.drawLine(o,p,s[2],p,l[2],r[2]),i[3]&&t.drawLine(o,p,o,s[3],l[3],r[3])}},n.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(g,k,x){"use strict";var e=g("glslify"),n=g("gl-shader"),i=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),l=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);k.exports=function(r){return n(r,i,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(g,k,x){"use strict";var e=g("gl-buffer"),n=g("gl-vao"),i=g("./shaders/index");k.exports=function(s,o){var p=[];function c(b,w,T,C,M,I){var P=[b,w,T,0,0,0,1];P[C+3]=1,P[C]=M,p.push.apply(p,P),P[6]=-1,p.push.apply(p,P),P[C]=I,p.push.apply(p,P),p.push.apply(p,P),P[6]=1,p.push.apply(p,P),P[C]=M,p.push.apply(p,P)}c(0,0,0,0,0,1),c(0,0,0,1,0,1),c(0,0,0,2,0,1),c(1,0,0,1,-1,1),c(1,0,0,2,-1,1),c(0,1,0,0,-1,1),c(0,1,0,2,-1,1),c(0,0,1,0,-1,1),c(0,0,1,1,-1,1);var a=e(s,p),y=n(s,[{type:s.FLOAT,buffer:a,size:3,offset:0,stride:28},{type:s.FLOAT,buffer:a,size:3,offset:12,stride:28},{type:s.FLOAT,buffer:a,size:1,offset:24,stride:28}]),u=i(s);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.weight.location=2;var _=new r(s,a,y,u);return _.update(o),_};var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(s,o,p,c){this.gl=s,this.buffer=o,this.vao=p,this.shader=c,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var d=r.prototype,f=[0,0,0],t=[0,0,0],h=[0,0];d.isTransparent=function(){return!1},d.drawTransparent=function(s){},d.draw=function(s){var o=this.gl,p=this.vao,c=this.shader;p.bind(),c.bind();var a,y=s.model||l,u=s.view||l,_=s.projection||l;this.axes&&(a=this.axes.lastCubeProps.axis);for(var b=f,w=t,T=0;T<3;++T)a&&a[T]<0?(b[T]=this.bounds[0][T],w[T]=this.bounds[1][T]):(b[T]=this.bounds[1][T],w[T]=this.bounds[0][T]);for(h[0]=o.drawingBufferWidth,h[1]=o.drawingBufferHeight,c.uniforms.model=y,c.uniforms.view=u,c.uniforms.projection=_,c.uniforms.coordinates=[this.position,b,w],c.uniforms.colors=this.colors,c.uniforms.screenShape=h,T=0;T<3;++T)c.uniforms.lineWidth=this.lineWidth[T]*this.pixelRatio,this.enabled[T]&&(p.draw(o.TRIANGLES,6,6*T),this.drawSides[T]&&p.draw(o.TRIANGLES,12,18+12*T));p.unbind()},d.update=function(s){s&&("bounds"in s&&(this.bounds=s.bounds),"position"in s&&(this.position=s.position),"lineWidth"in s&&(this.lineWidth=s.lineWidth),"colors"in s&&(this.colors=s.colors),"enabled"in s&&(this.enabled=s.enabled),"drawSides"in s&&(this.drawSides=s.drawSides))},d.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(g,k,x){var e=g("glslify"),n=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),i=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);x.meshShader={vertex:n,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},x.pickShader={vertex:l,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(g,k,x){"use strict";var e=g("gl-vec3"),n=g("gl-vec4"),i=["xyz","xzy","yxz","yzx","zxy","zyx"],r=function(s,o){var p,c=s.length;for(p=0;p<c;p++){var a=s[p];if(a===o)return p;if(a>o)return p-1}return p},d=function(s,o,p){return s<o?o:s>p?p:s},f=function(s){var o=1/0;s.sort(function(y,u){return y-u});for(var p=s.length,c=1;c<p;c++){var a=Math.abs(s[c]-s[c-1]);a<o&&(o=a)}return o};k.exports=function(s,o){var p=s.startingPositions,c=s.maxLength||1e3,a=s.tubeSize||1,y=s.absoluteTubeSize,u=s.gridFill||"+x+y+z",_={};-1!==u.indexOf("-x")&&(_.reversedX=!0),-1!==u.indexOf("-y")&&(_.reversedY=!0),-1!==u.indexOf("-z")&&(_.reversedZ=!0),_.filled=i.indexOf(u.replace(/-/g,"").replace(/\+/g,""));var se,ve,ue,ye,b=s.getVelocity||function(se){return function(ve,ue,ye){var Me=ue.vectors,pe=ue.meshgrid,ge=ve[0],we=ve[1],oe=ve[2],de=pe[0].length,Te=pe[1].length,Ee=pe[2].length,Ae=r(pe[0],ge),De=r(pe[1],we),Ie=r(pe[2],oe),Oe=Ae+1,Xe=De+1,Fe=Ie+1;if(Ae=d(Ae,0,de-1),Oe=d(Oe,0,de-1),De=d(De,0,Te-1),Xe=d(Xe,0,Te-1),Ie=d(Ie,0,Ee-1),Fe=d(Fe,0,Ee-1),Ae<0||De<0||Ie<0||Oe>de-1||Xe>Te-1||Fe>Ee-1)return e.create();var Pe,Re,qe,Qe,ct,bt,Tt=pe[0][Ae],nt=pe[1][De],xt=pe[2][Ie],Ht=(ge-Tt)/(pe[0][Oe]-Tt),Zt=(we-nt)/(pe[1][Xe]-nt),$t=(oe-xt)/(pe[2][Fe]-xt);switch(isFinite(Ht)||(Ht=.5),isFinite(Zt)||(Zt=.5),isFinite($t)||($t=.5),ye.reversedX&&(Ae=de-1-Ae,Oe=de-1-Oe),ye.reversedY&&(De=Te-1-De,Xe=Te-1-Xe),ye.reversedZ&&(Ie=Ee-1-Ie,Fe=Ee-1-Fe),ye.filled){case 5:ct=Ie,bt=Fe,qe=De*Ee,Qe=Xe*Ee,Pe=Ae*Ee*Te,Re=Oe*Ee*Te;break;case 4:ct=Ie,bt=Fe,Pe=Ae*Ee,Re=Oe*Ee,qe=De*Ee*de,Qe=Xe*Ee*de;break;case 3:qe=De,Qe=Xe,ct=Ie*Te,bt=Fe*Te,Pe=Ae*Te*Ee,Re=Oe*Te*Ee;break;case 2:qe=De,Qe=Xe,Pe=Ae*Te,Re=Oe*Te,ct=Ie*Te*de,bt=Fe*Te*de;break;case 1:Pe=Ae,Re=Oe,ct=Ie*de,bt=Fe*de,qe=De*de*Ee,Qe=Xe*de*Ee;break;default:Pe=Ae,Re=Oe,qe=De*de,Qe=Xe*de,ct=Ie*de*Te,bt=Fe*de*Te}var Xt=Me[Pe+qe+ct],cr=Me[Pe+qe+bt],Ft=Me[Pe+Qe+ct],Be=Me[Pe+Qe+bt],He=Me[Re+qe+ct],he=Me[Re+qe+bt],be=Me[Re+Qe+ct],ze=Me[Re+Qe+bt],Ve=e.create(),Je=e.create(),Ye=e.create(),lt=e.create();e.lerp(Ve,Xt,He,Ht),e.lerp(Je,cr,he,Ht),e.lerp(Ye,Ft,be,Ht),e.lerp(lt,Be,ze,Ht);var st=e.create(),Mt=e.create();e.lerp(st,Ve,Ye,Zt),e.lerp(Mt,Je,lt,Zt);var Dt=e.create();return e.lerp(Dt,st,Mt,$t),Dt}(se,s,_)},w=s.getDivergence||function(se,ve){var ue=e.create(),ye=1e-4;e.add(ue,se,[ye,0,0]);var Me=b(ue);e.subtract(Me,Me,ve),e.scale(Me,Me,1/ye),e.add(ue,se,[0,ye,0]);var pe=b(ue);e.subtract(pe,pe,ve),e.scale(pe,pe,1/ye),e.add(ue,se,[0,0,ye]);var ge=b(ue);return e.subtract(ge,ge,ve),e.scale(ge,ge,1/ye),e.add(ue,Me,pe),e.add(ue,ue,ge),ue},T=[],C=o[0][0],M=o[0][1],I=o[0][2],P=o[1][0],S=o[1][1],E=o[1][2],D=10*e.distance(o[0],o[1])/c,j=D*D,H=1,Y=0,X=p.length;X>1&&(H=function(se){for(var ve=[],ue=[],ye=[],Me={},pe={},ge={},we=se.length,oe=0;oe<we;oe++){var de=se[oe],Te=de[0],Ee=de[1],Ae=de[2];Me[Te]||(ve.push(Te),Me[Te]=!0),pe[Ee]||(ue.push(Ee),pe[Ee]=!0),ge[Ae]||(ye.push(Ae),ge[Ae]=!0)}var De=f(ve),Ie=f(ue),Oe=f(ye),Xe=Math.min(De,Ie,Oe);return isFinite(Xe)?Xe:1}(p));for(var Z=0;Z<X;Z++){var W=e.create();e.copy(W,p[Z]);var re=[W],U=[],B=b(W),V=W;U.push(B);var ee=[],N=w(W,B),K=e.length(N);isFinite(K)&&K>Y&&(Y=K),ee.push(K),T.push({points:re,velocities:U,divergences:ee});for(var J=0;J<100*c&&re.length<c&&(ve=void 0,ue=void 0,ye=void 0,ue=(se=W)[1],ye=se[2],!((ve=se[0])<C||ve>P||ue<M||ue>S||ye<I||ye>E));){J++;var te=e.clone(B),ae=e.squaredLength(te);if(0===ae)break;ae>j&&e.scale(te,te,D/Math.sqrt(ae)),e.add(te,te,W),B=b(te),e.squaredDistance(V,te)-j>-1e-4*j&&(re.push(te),V=te,U.push(B),N=w(te,B),K=e.length(N),isFinite(K)&&K>Y&&(Y=K),ee.push(K)),W=te}}var le=function(s,o,p,c){for(var a=0,y=0;y<s.length;y++)for(var u=s[y].velocities,_=0;_<u.length;_++)a=Math.max(a,e.length(u[_]));var b=s.map(function(D){return function(j,H,Y,X){for(var Z=j.points,W=j.velocities,re=j.divergences,U=[],B=[],V=[],ee=[],N=[],K=[],J=0,te=0,ae=n.create(),le=n.create(),se=0;se<Z.length;se++){var ve=Z[se],ue=W[se],ye=re[se];0===H&&(ye=.05*Y),te=e.length(ue)/X,ae=n.create(),e.copy(ae,ue),ae[3]=ye;for(var Me=0;Me<8;Me++)N[Me]=[ve[0],ve[1],ve[2],Me];if(ee.length>0)for(Me=0;Me<8;Me++){var pe=(Me+1)%8;U.push(ee[Me],N[Me],N[pe],N[pe],ee[pe],ee[Me]),V.push(le,ae,ae,ae,le,le),K.push(J,te,te,te,J,J);var ge=U.length;B.push([ge-6,ge-5,ge-4],[ge-3,ge-2,ge-1])}var we=ee;ee=N,N=we;var oe=le;le=ae,ae=oe;var de=J;J=te,te=de}return{positions:U,cells:B,vectors:V,vertexIntensity:K}}(D,p,c,a)}),w=[],T=[],C=[],M=[];for(y=0;y<b.length;y++){var I=b[y],P=w.length;for(w=w.concat(I.positions),C=C.concat(I.vectors),M=M.concat(I.vertexIntensity),_=0;_<I.cells.length;_++){var S=I.cells[_],E=[];T.push(E);for(var R=0;R<S.length;R++)E.push(S[R]+P)}}return{positions:w,cells:T,vectors:C,vertexIntensity:M,colormap:o}}(T,s.colormap,Y,H);return y?le.tubeScale=y:(0===Y&&(Y=1),le.tubeScale=.5*a*H/Y),le};var t=g("./lib/shaders"),h=g("gl-cone3d").createMesh;k.exports.createTubeMesh=function(s,o){return h(s,o,{shaders:t,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(g,k,x){var e=g("gl-shader"),n=g("glslify"),i=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),l=n(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),r=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),d=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);x.createShader=function(f){var t=e(f,i,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},x.createPickShader=function(f){var t=e(f,i,d,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},x.createContourShader=function(f){var t=e(f,r,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t},x.createPickContourShader=function(f){var t=e(f,r,d,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t}},{"gl-shader":132,glslify:231}],145:[function(g,k,x){"use strict";k.exports=function(B){var V=B.gl,ee=u(V),N=b(V),K=_(V),J=w(V),te=n(V),ae=i(V,[{buffer:te,size:4,stride:40,offset:0},{buffer:te,size:3,stride:40,offset:16},{buffer:te,size:3,stride:40,offset:28}]),le=n(V),se=i(V,[{buffer:le,size:4,stride:20,offset:0},{buffer:le,size:1,stride:20,offset:16}]),ve=n(V),ue=i(V,[{buffer:ve,size:2,type:V.FLOAT}]),ye=l(V,1,256,V.RGBA,V.UNSIGNED_BYTE);ye.minFilter=V.LINEAR,ye.magFilter=V.LINEAR;var Me=new P(V,[0,0],[[0,0,0],[0,0,0]],ee,N,te,ae,ye,K,J,le,se,ve,ue,[0,0,0]),pe={levels:[[],[],[]]};for(var ge in B)pe[ge]=B[ge];return pe.colormap=pe.colormap||"jet",Me.update(pe),Me};var e=g("bit-twiddle"),n=g("gl-buffer"),i=g("gl-vao"),l=g("gl-texture2d"),r=g("typedarray-pool"),d=g("colormap"),f=g("ndarray-ops"),t=g("ndarray-pack"),h=g("ndarray"),s=g("surface-nets"),o=g("gl-mat4/multiply"),p=g("gl-mat4/invert"),c=g("binary-search-bounds"),a=g("ndarray-gradient"),y=g("./lib/shaders"),u=y.createShader,_=y.createContourShader,b=y.createPickShader,w=y.createPickContourShader,T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],C=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],M=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function I(B,V,ee,N,K){this.position=B,this.index=V,this.uv=ee,this.level=N,this.dataCoordinate=K}function P(B,V,ee,N,K,J,te,ae,le,se,ve,ue,ye,Me,pe){this.gl=B,this.shape=V,this.bounds=ee,this.objectOffset=pe,this.intensityBounds=[],this._shader=N,this._pickShader=K,this._coordinateBuffer=J,this._vao=te,this._colorMap=ae,this._contourShader=le,this._contourPickShader=se,this._contourBuffer=ve,this._contourVAO=ue,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new I([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ye,this._dynamicVAO=Me,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[h(r.mallocFloat(1024),[0,0]),h(r.mallocFloat(1024),[0,0]),h(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var B=0;B<3;++B){var V=M[B],ee=(B+2)%3;V[(B+1)%3+0]=1,V[ee+3]=1,V[B+6]=1}}();var S=P.prototype;S.genColormap=function(B,V){var ee=!1,N=t([d({colormap:B,nshades:256,format:"rgba"}).map(function(K,J){var te=V?function(ae,le){if(!le||!le.length)return 1;for(var se=0;se<le.length;++se){if(le.length<2)return 1;if(le[se][0]===ae)return le[se][1];if(le[se][0]>ae&&se>0){var ve=(le[se][0]-ae)/(le[se][0]-le[se-1][0]);return le[se][1]*(1-ve)+ve*le[se-1][1]}}return 1}(J/255,V):K[3];return te<1&&(ee=!0),[K[0],K[1],K[2],255*te]})]);return f.divseq(N,255),this.hasAlphaScale=ee,N},S.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},S.isOpaque=function(){return!this.isTransparent()},S.pickSlots=1,S.setPickBase=function(B){this.pickId=B};var E=[0,0,0],R={showSurface:!1,showContour:!1,projections:[T.slice(),T.slice(),T.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function D(B,V){var ee,N,K,J=V.axes&&V.axes.lastCubeProps.axis||E,te=V.showSurface,ae=V.showContour;for(ee=0;ee<3;++ee)for(te=te||V.surfaceProject[ee],N=0;N<3;++N)ae=ae||V.contourProject[ee][N];for(ee=0;ee<3;++ee){var le=R.projections[ee];for(N=0;N<16;++N)le[N]=0;for(N=0;N<4;++N)le[5*N]=1;le[5*ee]=0,le[12+ee]=V.axesBounds[+(J[ee]>0)][ee],o(le,B.model,le);var se=R.clipBounds[ee];for(K=0;K<2;++K)for(N=0;N<3;++N)se[K][N]=B.clipBounds[K][N];se[0][ee]=-1e8,se[1][ee]=1e8}return R.showSurface=te,R.showContour=ae,R}var j={model:T,view:T,projection:T,inverseModel:T.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},H=T.slice(),Y=[1,0,0,0,1,0,0,0,1];function X(B,V){B=B||{};var ee=this.gl;ee.disable(ee.CULL_FACE),this._colorMap.bind(0);var N=j;N.model=B.model||T,N.view=B.view||T,N.projection=B.projection||T,N.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],N.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],N.objectOffset=this.objectOffset,N.contourColor=this.contourColor[0],N.inverseModel=p(N.inverseModel,N.model);for(var K=0;K<2;++K)for(var J=N.clipBounds[K],te=0;te<3;++te)J[te]=Math.min(Math.max(this.clipBounds[K][te],-1e8),1e8);N.kambient=this.ambientLight,N.kdiffuse=this.diffuseLight,N.kspecular=this.specularLight,N.roughness=this.roughness,N.fresnel=this.fresnel,N.opacity=this.opacity,N.height=0,N.permutation=Y,N.vertexColor=this.vertexColor;var ae=H;for(o(ae,N.view,N.model),o(ae,N.projection,ae),p(ae,ae),K=0;K<3;++K)N.eyePosition[K]=ae[12+K]/ae[15];var le=ae[15];for(K=0;K<3;++K)le+=this.lightPosition[K]*ae[4*K+3];for(K=0;K<3;++K){var se=ae[12+K];for(te=0;te<3;++te)se+=ae[4*te+K]*this.lightPosition[te];N.lightPosition[K]=se/le}var ve=D(N,this);if(ve.showSurface){for(this._shader.bind(),this._shader.uniforms=N,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ee.TRIANGLES,this._vertexCount),K=0;K<3;++K)this.surfaceProject[K]&&this.vertexCount&&(this._shader.uniforms.model=ve.projections[K],this._shader.uniforms.clipBounds=ve.clipBounds[K],this._vao.draw(ee.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ve.showContour){var ue=this._contourShader;N.kambient=1,N.kdiffuse=0,N.kspecular=0,N.opacity=1,ue.bind(),ue.uniforms=N;var ye=this._contourVAO;for(ye.bind(),K=0;K<3;++K)for(ue.uniforms.permutation=M[K],ee.lineWidth(this.contourWidth[K]*this.pixelRatio),te=0;te<this.contourLevels[K].length;++te)te===this.highlightLevel[K]?(ue.uniforms.contourColor=this.highlightColor[K],ue.uniforms.contourTint=this.highlightTint[K]):0!==te&&te-1!==this.highlightLevel[K]||(ue.uniforms.contourColor=this.contourColor[K],ue.uniforms.contourTint=this.contourTint[K]),this._contourCounts[K][te]&&(ue.uniforms.height=this.contourLevels[K][te],ye.draw(ee.LINES,this._contourCounts[K][te],this._contourOffsets[K][te]));for(K=0;K<3;++K)for(ue.uniforms.model=ve.projections[K],ue.uniforms.clipBounds=ve.clipBounds[K],te=0;te<3;++te)if(this.contourProject[K][te]){ue.uniforms.permutation=M[te],ee.lineWidth(this.contourWidth[te]*this.pixelRatio);for(var Me=0;Me<this.contourLevels[te].length;++Me)Me===this.highlightLevel[te]?(ue.uniforms.contourColor=this.highlightColor[te],ue.uniforms.contourTint=this.highlightTint[te]):0!==Me&&Me-1!==this.highlightLevel[te]||(ue.uniforms.contourColor=this.contourColor[te],ue.uniforms.contourTint=this.contourTint[te]),this._contourCounts[te][Me]&&(ue.uniforms.height=this.contourLevels[te][Me],ye.draw(ee.LINES,this._contourCounts[te][Me],this._contourOffsets[te][Me]))}for(ye.unbind(),(ye=this._dynamicVAO).bind(),K=0;K<3;++K)if(0!==this._dynamicCounts[K])for(ue.uniforms.model=N.model,ue.uniforms.clipBounds=N.clipBounds,ue.uniforms.permutation=M[K],ee.lineWidth(this.dynamicWidth[K]*this.pixelRatio),ue.uniforms.contourColor=this.dynamicColor[K],ue.uniforms.contourTint=this.dynamicTint[K],ue.uniforms.height=this.dynamicLevel[K],ye.draw(ee.LINES,this._dynamicCounts[K],this._dynamicOffsets[K]),te=0;te<3;++te)this.contourProject[te][K]&&(ue.uniforms.model=ve.projections[te],ue.uniforms.clipBounds=ve.clipBounds[te],ye.draw(ee.LINES,this._dynamicCounts[K],this._dynamicOffsets[K]));ye.unbind()}}S.draw=function(B){return X.call(this,B,!1)},S.drawTransparent=function(B){return X.call(this,B,!0)};var Z={model:T,view:T,projection:T,inverseModel:T,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function W(B,V){return Array.isArray(B)?[V(B[0]),V(B[1]),V(B[2])]:[V(B),V(B),V(B)]}function re(B){return Array.isArray(B)?3===B.length?[B[0],B[1],B[2],1]:[B[0],B[1],B[2],B[3]]:[0,0,0,1]}function U(B){if(Array.isArray(B)){if(Array.isArray(B))return[re(B[0]),re(B[1]),re(B[2])];var V=re(B);return[V.slice(),V.slice(),V.slice()]}}S.drawPick=function(B){B=B||{};var V=this.gl;V.disable(V.CULL_FACE);var ee=Z;ee.model=B.model||T,ee.view=B.view||T,ee.projection=B.projection||T,ee.shape=this._field[2].shape,ee.pickId=this.pickId/255,ee.lowerBound=this.bounds[0],ee.upperBound=this.bounds[1],ee.objectOffset=this.objectOffset,ee.permutation=Y;for(var N=0;N<2;++N)for(var K=ee.clipBounds[N],J=0;J<3;++J)K[J]=Math.min(Math.max(this.clipBounds[N][J],-1e8),1e8);var te=D(ee,this);if(te.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ee,this._vao.bind(),this._vao.draw(V.TRIANGLES,this._vertexCount),N=0;N<3;++N)this.surfaceProject[N]&&(this._pickShader.uniforms.model=te.projections[N],this._pickShader.uniforms.clipBounds=te.clipBounds[N],this._vao.draw(V.TRIANGLES,this._vertexCount));this._vao.unbind()}if(te.showContour){var ae=this._contourPickShader;ae.bind(),ae.uniforms=ee;var le=this._contourVAO;for(le.bind(),J=0;J<3;++J)for(V.lineWidth(this.contourWidth[J]*this.pixelRatio),ae.uniforms.permutation=M[J],N=0;N<this.contourLevels[J].length;++N)this._contourCounts[J][N]&&(ae.uniforms.height=this.contourLevels[J][N],le.draw(V.LINES,this._contourCounts[J][N],this._contourOffsets[J][N]));for(N=0;N<3;++N)for(ae.uniforms.model=te.projections[N],ae.uniforms.clipBounds=te.clipBounds[N],J=0;J<3;++J)if(this.contourProject[N][J]){ae.uniforms.permutation=M[J],V.lineWidth(this.contourWidth[J]*this.pixelRatio);for(var se=0;se<this.contourLevels[J].length;++se)this._contourCounts[J][se]&&(ae.uniforms.height=this.contourLevels[J][se],le.draw(V.LINES,this._contourCounts[J][se],this._contourOffsets[J][se]))}le.unbind()}},S.pick=function(B){if(!B||B.id!==this.pickId)return null;var V=this._field[2].shape,ee=this._pickResult,N=V[0]*(B.value[0]+(B.value[2]>>4)/16)/255,K=Math.floor(N),J=N-K,te=V[1]*(B.value[1]+(15&B.value[2])/16)/255,ae=Math.floor(te),le=te-ae;K+=1,ae+=1;var se=ee.position;se[0]=se[1]=se[2]=0;for(var ve=0;ve<2;++ve)for(var ue=ve?J:1-J,ye=0;ye<2;++ye)for(var Me=K+ve,pe=ae+ye,ge=ue*(ye?le:1-le),we=0;we<3;++we)se[we]+=this._field[we].get(Me,pe)*ge;for(var oe=this._pickResult.level,de=0;de<3;++de)if(oe[de]=c.le(this.contourLevels[de],se[de]),oe[de]<0)this.contourLevels[de].length>0&&(oe[de]=0);else if(oe[de]<this.contourLevels[de].length-1){var Ee=this.contourLevels[de][oe[de]+1];Math.abs(this.contourLevels[de][oe[de]]-se[de])>Math.abs(Ee-se[de])&&(oe[de]+=1)}for(ee.index[0]=J<.5?K:K+1,ee.index[1]=le<.5?ae:ae+1,ee.uv[0]=N/V[0],ee.uv[1]=te/V[1],we=0;we<3;++we)ee.dataCoordinate[we]=this._field[we].get(ee.index[0],ee.index[1]);return ee},S.padField=function(B,V){var ee=V.shape.slice(),N=B.shape.slice();f.assign(B.lo(1,1).hi(ee[0],ee[1]),V),f.assign(B.lo(1).hi(ee[0],1),V.hi(ee[0],1)),f.assign(B.lo(1,N[1]-1).hi(ee[0],1),V.lo(0,ee[1]-1).hi(ee[0],1)),f.assign(B.lo(0,1).hi(1,ee[1]),V.hi(1)),f.assign(B.lo(N[0]-1,1).hi(1,ee[1]),V.lo(ee[0]-1)),B.set(0,0,V.get(0,0)),B.set(0,N[1]-1,V.get(0,ee[1]-1)),B.set(N[0]-1,0,V.get(ee[0]-1,0)),B.set(N[0]-1,N[1]-1,V.get(ee[0]-1,ee[1]-1))},S.update=function(B){this.objectOffset=(B=B||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in B&&(this.contourWidth=W(B.contourWidth,Number)),"showContour"in B&&(this.showContour=W(B.showContour,Boolean)),"showSurface"in B&&(this.showSurface=!!B.showSurface),"contourTint"in B&&(this.contourTint=W(B.contourTint,Boolean)),"contourColor"in B&&(this.contourColor=U(B.contourColor)),"contourProject"in B&&(this.contourProject=W(B.contourProject,function(Jt){return W(Jt,Boolean)})),"surfaceProject"in B&&(this.surfaceProject=B.surfaceProject),"dynamicColor"in B&&(this.dynamicColor=U(B.dynamicColor)),"dynamicTint"in B&&(this.dynamicTint=W(B.dynamicTint,Number)),"dynamicWidth"in B&&(this.dynamicWidth=W(B.dynamicWidth,Number)),"opacity"in B&&(this.opacity=B.opacity),"opacityscale"in B&&(this.opacityscale=B.opacityscale),"colorBounds"in B&&(this.colorBounds=B.colorBounds),"vertexColor"in B&&(this.vertexColor=B.vertexColor?1:0),"colormap"in B&&this._colorMap.setPixels(this.genColormap(B.colormap,this.opacityscale));var V=B.field||B.coords&&B.coords[2]||null,ee=!1;if(V||(V=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in B||"coords"in B){var N=(V.shape[0]+2)*(V.shape[1]+2);N>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(e.nextPow2(N))),this._field[2]=h(this._field[2].data,[V.shape[0]+2,V.shape[1]+2]),this.padField(this._field[2],V),this.shape=V.shape.slice();for(var K=this.shape,J=0;J<2;++J)this._field[2].size>this._field[J].data.length&&(r.freeFloat(this._field[J].data),this._field[J].data=r.mallocFloat(this._field[2].size)),this._field[J]=h(this._field[J].data,[K[0]+2,K[1]+2]);if(B.coords){var te=B.coords;if(!Array.isArray(te)||3!==te.length)throw new Error("gl-surface: invalid coordinates for x/y");for(J=0;J<2;++J){var ae=te[J];for(ye=0;ye<2;++ye)if(ae.shape[ye]!==K[ye])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[J],ae)}}else if(B.ticks){var le=B.ticks;if(!Array.isArray(le)||2!==le.length)throw new Error("gl-surface: invalid ticks");for(J=0;J<2;++J){var se=le[J];if((Array.isArray(se)||se.length)&&(se=h(se)),se.shape[0]!==K[J])throw new Error("gl-surface: invalid tick length");var ve=h(se.data,K);ve.stride[J]=se.stride[0],ve.stride[1^J]=0,this.padField(this._field[J],ve)}}else{for(J=0;J<2;++J){var ue=[0,0];ue[J]=1,this._field[J]=h(this._field[J].data,[K[0]+2,K[1]+2],ue,0)}this._field[0].set(0,0,0);for(var ye=0;ye<K[0];++ye)this._field[0].set(ye+1,0,ye);for(this._field[0].set(K[0]+1,0,K[0]-1),this._field[1].set(0,0,0),ye=0;ye<K[1];++ye)this._field[1].set(0,ye+1,ye);this._field[1].set(0,K[1]+1,K[1]-1)}var Me=this._field,pe=h(r.mallocFloat(3*Me[2].size*2),[3,K[0]+2,K[1]+2,2]);for(J=0;J<3;++J)a(pe.pick(J),Me[J],"mirror");var ge=h(r.mallocFloat(3*Me[2].size),[K[0]+2,K[1]+2,3]);for(J=0;J<K[0]+2;++J)for(ye=0;ye<K[1]+2;++ye){var we=pe.get(0,J,ye,0),oe=pe.get(0,J,ye,1),de=pe.get(1,J,ye,0),Te=pe.get(1,J,ye,1),Ee=pe.get(2,J,ye,0),Ae=pe.get(2,J,ye,1),De=de*Ae-Te*Ee,Ie=Ee*oe-Ae*we,Oe=we*Te-oe*de,Xe=Math.sqrt(De*De+Ie*Ie+Oe*Oe);Xe<1e-8?(Xe=Math.max(Math.abs(De),Math.abs(Ie),Math.abs(Oe)))<1e-8?(Oe=1,Ie=De=0,Xe=1):Xe=1/Xe:Xe=1/Math.sqrt(Xe),ge.set(J,ye,0,De*Xe),ge.set(J,ye,1,Ie*Xe),ge.set(J,ye,2,Oe*Xe)}r.free(pe.data);var Fe=[1/0,1/0,1/0],Pe=[-1/0,-1/0,-1/0],Re=1/0,qe=-1/0,ct=r.mallocFloat(e.nextPow2((K[0]-1)*(K[1]-1)*6*10)),bt=0,Tt=0;for(J=0;J<K[0]-1;++J)e:for(ye=0;ye<K[1]-1;++ye){for(var _t=0;_t<2;++_t)for(var nt=0;nt<2;++nt)for(var Ke=0;Ke<3;++Ke){var xt=this._field[Ke].get(1+J+_t,1+ye+nt);if(isNaN(xt)||!isFinite(xt))continue e}for(Ke=0;Ke<6;++Ke){var Ht=J+C[Ke][0],Zt=ye+C[Ke][1],$t=this._field[0].get(Ht+1,Zt+1),Xt=this._field[1].get(Ht+1,Zt+1);xt=this._field[2].get(Ht+1,Zt+1),De=ge.get(Ht+1,Zt+1,0),Ie=ge.get(Ht+1,Zt+1,1),Oe=ge.get(Ht+1,Zt+1,2),B.intensity&&(cr=B.intensity.get(Ht,Zt));var cr=B.intensity?B.intensity.get(Ht,Zt):xt+this.objectOffset[2];ct[bt++]=Ht,ct[bt++]=Zt,ct[bt++]=$t,ct[bt++]=Xt,ct[bt++]=xt,ct[bt++]=0,ct[bt++]=cr,ct[bt++]=De,ct[bt++]=Ie,ct[bt++]=Oe,Fe[0]=Math.min(Fe[0],$t+this.objectOffset[0]),Fe[1]=Math.min(Fe[1],Xt+this.objectOffset[1]),Fe[2]=Math.min(Fe[2],xt+this.objectOffset[2]),Re=Math.min(Re,cr),Pe[0]=Math.max(Pe[0],$t+this.objectOffset[0]),Pe[1]=Math.max(Pe[1],Xt+this.objectOffset[1]),Pe[2]=Math.max(Pe[2],xt+this.objectOffset[2]),qe=Math.max(qe,cr),Tt+=1}}for(B.intensityBounds&&(Re=+B.intensityBounds[0],qe=+B.intensityBounds[1]),J=6;J<bt;J+=10)ct[J]=(ct[J]-Re)/(qe-Re);this._vertexCount=Tt,this._coordinateBuffer.update(ct.subarray(0,bt)),r.freeFloat(ct),r.free(ge.data),this.bounds=[Fe,Pe],this.intensity=B.intensity||this._field[2],this.intensityBounds[0]===Re&&this.intensityBounds[1]===qe||(ee=!0),this.intensityBounds=[Re,qe]}if("levels"in B){var Ft=B.levels;for(Ft=Array.isArray(Ft[0])?Ft.slice():[[],[],Ft],J=0;J<3;++J)Ft[J]=Ft[J].slice(),Ft[J].sort(function(Jt,qt){return Jt-qt});for(J=0;J<3;++J)for(ye=0;ye<Ft[J].length;++ye)Ft[J][ye]-=this.objectOffset[J];e:for(J=0;J<3;++J){if(Ft[J].length!==this.contourLevels[J].length){ee=!0;break}for(ye=0;ye<Ft[J].length;++ye)if(Ft[J][ye]!==this.contourLevels[J][ye]){ee=!0;break e}}this.contourLevels=Ft}if(ee){Me=this._field,K=this.shape;for(var Be=[],He=0;He<3;++He){var he=this.contourLevels[He],be=[],ze=[],Ve=[0,0,0];for(J=0;J<he.length;++J){var Je=s(this._field[He],he[J]);be.push(Be.length/5|0),Tt=0;e:for(ye=0;ye<Je.cells.length;++ye){var Ye=Je.cells[ye];for(Ke=0;Ke<2;++Ke){var lt=Je.positions[Ye[Ke]],st=lt[0],Mt=0|Math.floor(st),Dt=st-Mt,ht=lt[1],mt=0|Math.floor(ht),Ot=ht-mt,At=!1;t:for(var It=0;It<3;++It){Ve[It]=0;var Se=(He+It+1)%3;for(_t=0;_t<2;++_t){var Ze=_t?Dt:1-Dt;for(Ht=0|Math.min(Math.max(Mt+_t,0),K[0]),nt=0;nt<2;++nt){var it=nt?Ot:1-Ot;if(Zt=0|Math.min(Math.max(mt+nt,0),K[1]),xt=It<2?this._field[Se].get(Ht,Zt):(this.intensity.get(Ht,Zt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(xt)||isNaN(xt)){At=!0;break t}Ve[It]+=Ze*it*xt}}}if(At){if(Ke>0){for(var Ct=0;Ct<5;++Ct)Be.pop();Tt-=1}continue e}Be.push(Ve[0],Ve[1],lt[0],lt[1],Ve[2]),Tt+=1}}ze.push(Tt)}this._contourOffsets[He]=be,this._contourCounts[He]=ze}var Ut=r.mallocFloat(Be.length);for(J=0;J<Be.length;++J)Ut[J]=Be[J];this._contourBuffer.update(Ut),r.freeFloat(Ut)}},S.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var B=0;B<3;++B)r.freeFloat(this._field[B].data)},S.highlight=function(B){var V,ee;if(!B)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(V=0;V<3;++V)this.highlightLevel[V]=this.enableHighlight[V]?B.level[V]:-1;for(ee=this.snapToData?B.dataCoordinate:B.position,V=0;V<3;++V)ee[V]-=this.objectOffset[V];if(this.enableDynamic[0]&&ee[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ee[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ee[2]!==this.dynamicLevel[2]){for(var N=0,K=this.shape,J=r.mallocFloat(12*K[0]*K[1]),te=0;te<3;++te)if(this.enableDynamic[te]){this.dynamicLevel[te]=ee[te];var ve=this._field[(te+1)%3],ue=this._field[(te+2)%3],ye=s(this._field[te],ee[te]),Me=ye.cells,pe=ye.positions;for(this._dynamicOffsets[te]=N,V=0;V<Me.length;++V)for(var ge=Me[V],we=0;we<2;++we){var oe=pe[ge[we]],de=+oe[0],Te=0|de,Ee=0|Math.min(Te+1,K[0]),Ae=de-Te,De=1-Ae,Ie=+oe[1],Oe=0|Ie,Xe=0|Math.min(Oe+1,K[1]),Fe=Ie-Oe,Pe=1-Fe,Re=De*Pe,qe=De*Fe,Qe=Ae*Pe,ct=Ae*Fe,bt=Re*ve.get(Te,Oe)+qe*ve.get(Te,Xe)+Qe*ve.get(Ee,Oe)+ct*ve.get(Ee,Xe),Tt=Re*ue.get(Te,Oe)+qe*ue.get(Te,Xe)+Qe*ue.get(Ee,Oe)+ct*ue.get(Ee,Xe);if(isNaN(bt)||isNaN(Tt)){we&&(N-=1);break}J[2*N+0]=bt,J[2*N+1]=Tt,N+=1}this._dynamicCounts[te]=N-this._dynamicOffsets[te]}else this.dynamicLevel[te]=NaN,this._dynamicCounts[te]=0;this._dynamicBuffer.update(J.subarray(0,2*N)),r.freeFloat(J)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(g,k,x){"use strict";var e=g("ndarray"),n=g("ndarray-ops"),i=g("typedarray-pool");k.exports=function(b){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(l||f(b),"number"==typeof arguments[1])return y(b,arguments[1],arguments[2],arguments[3]||b.RGBA,arguments[4]||b.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return y(b,0|arguments[1][0],0|arguments[1][1],arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var w=arguments[1],T=t(w)?w:w.raw;if(T)return u(b,T,0|w.width,0|w.height,arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if(w.shape&&w.data&&w.stride)return _(b,w)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var l=null,r=null,d=null;function f(b){l=[b.LINEAR,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_NEAREST],r=[b.NEAREST,b.LINEAR,b.NEAREST_MIPMAP_NEAREST,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_LINEAR],d=[b.REPEAT,b.CLAMP_TO_EDGE,b.MIRRORED_REPEAT]}function t(b){return typeof HTMLCanvasElement<"u"&&b instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&b instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&b instanceof HTMLVideoElement||typeof ImageData<"u"&&b instanceof ImageData}var h=function(b,w){n.muls(b,w,255)};function s(b,w,T){var C=b.gl,M=C.getParameter(C.MAX_TEXTURE_SIZE);if(w<0||w>M||T<0||T>M)throw new Error("gl-texture2d: Invalid texture size");return b._shape=[w,T],b.bind(),C.texImage2D(C.TEXTURE_2D,0,b.format,w,T,0,b.format,b.type,null),b._mipLevels=[0],b}function o(b,w,T,C,M,I){this.gl=b,this.handle=w,this.format=M,this.type=I,this._shape=[T,C],this._mipLevels=[0],this._magFilter=b.NEAREST,this._minFilter=b.NEAREST,this._wrapS=b.CLAMP_TO_EDGE,this._wrapT=b.CLAMP_TO_EDGE,this._anisoSamples=1;var P=this,S=[this._wrapS,this._wrapT];Object.defineProperties(S,[{get:function(){return P._wrapS},set:function(R){return P.wrapS=R}},{get:function(){return P._wrapT},set:function(R){return P.wrapT=R}}]),this._wrapVector=S;var E=[this._shape[0],this._shape[1]];Object.defineProperties(E,[{get:function(){return P._shape[0]},set:function(R){return P.width=R}},{get:function(){return P._shape[1]},set:function(R){return P.height=R}}]),this._shapeVector=E}var p=o.prototype;function c(b,w){return 3===b.length?1===w[2]&&w[1]===b[0]*b[2]&&w[0]===b[2]:1===w[0]&&w[1]===b[0]}function a(b){var w=b.createTexture();return b.bindTexture(b.TEXTURE_2D,w),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),w}function y(b,w,T,C,M){var I=b.getParameter(b.MAX_TEXTURE_SIZE);if(w<0||w>I||T<0||T>I)throw new Error("gl-texture2d: Invalid texture shape");if(M===b.FLOAT&&!b.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var P=a(b);return b.texImage2D(b.TEXTURE_2D,0,C,w,T,0,C,M,null),new o(b,P,w,T,C,M)}function u(b,w,T,C,M,I){var P=a(b);return b.texImage2D(b.TEXTURE_2D,0,M,M,I,w),new o(b,P,T,C,M,I)}function _(b,w){var T=w.dtype,C=w.shape.slice(),M=b.getParameter(b.MAX_TEXTURE_SIZE);if(C[0]<0||C[0]>M||C[1]<0||C[1]>M)throw new Error("gl-texture2d: Invalid texture size");var I=c(C,w.stride.slice()),P=0;"float32"===T?P=b.FLOAT:"float64"===T?(P=b.FLOAT,I=!1,T="float32"):"uint8"===T?P=b.UNSIGNED_BYTE:(P=b.UNSIGNED_BYTE,I=!1,T="uint8");var S,E,R=0;if(2===C.length)R=b.LUMINANCE,w=e(w.data,C=[C[0],C[1],1],[w.stride[0],w.stride[1],1],w.offset);else{if(3!==C.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===C[2])R=b.ALPHA;else if(2===C[2])R=b.LUMINANCE_ALPHA;else if(3===C[2])R=b.RGB;else{if(4!==C[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");R=b.RGBA}}P!==b.FLOAT||b.getExtension("OES_texture_float")||(P=b.UNSIGNED_BYTE,I=!1);var D=w.size;if(I)S=0===w.offset&&w.data.length===D?w.data:w.data.subarray(w.offset,w.offset+D);else{var j=[C[2],C[2]*C[0],1];E=i.malloc(D,T);var H=e(E,C,j,0);"float32"!==T&&"float64"!==T||P!==b.UNSIGNED_BYTE?n.assign(H,w):h(H,w),S=E.subarray(0,D)}var Y=a(b);return b.texImage2D(b.TEXTURE_2D,0,R,C[0],C[1],0,R,P,S),I||i.free(E),new o(b,Y,C[0],C[1],R,P)}Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(b){this.bind();var w=this.gl;if(this.type===w.FLOAT&&l.indexOf(b)>=0&&(w.getExtension("OES_texture_float_linear")||(b=w.NEAREST)),r.indexOf(b)<0)throw new Error("gl-texture2d: Unknown filter mode "+b);return w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,b),this._minFilter=b}},magFilter:{get:function(){return this._magFilter},set:function(b){this.bind();var w=this.gl;if(this.type===w.FLOAT&&l.indexOf(b)>=0&&(w.getExtension("OES_texture_float_linear")||(b=w.NEAREST)),r.indexOf(b)<0)throw new Error("gl-texture2d: Unknown filter mode "+b);return w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,b),this._magFilter=b}},mipSamples:{get:function(){return this._anisoSamples},set:function(b){var w=this._anisoSamples;if(this._anisoSamples=0|Math.max(b,1),w!==this._anisoSamples){var T=this.gl.getExtension("EXT_texture_filter_anisotropic");T&&this.gl.texParameterf(this.gl.TEXTURE_2D,T.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(b){if(this.bind(),d.indexOf(b)<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,b),this._wrapS=b}},wrapT:{get:function(){return this._wrapT},set:function(b){if(this.bind(),d.indexOf(b)<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,b),this._wrapT=b}},wrap:{get:function(){return this._wrapVector},set:function(b){if(Array.isArray(b)||(b=[b,b]),2!==b.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var w=0;w<2;++w)if(d.indexOf(b[w])<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);this._wrapS=b[0],this._wrapT=b[1];var T=this.gl;return this.bind(),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,this._wrapS),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,this._wrapT),b}},shape:{get:function(){return this._shapeVector},set:function(b){if(Array.isArray(b)){if(2!==b.length)throw new Error("gl-texture2d: Invalid texture shape")}else b=[0|b,0|b];return s(this,0|b[0],0|b[1]),[0|b[0],0|b[1]]}},width:{get:function(){return this._shape[0]},set:function(b){return s(this,b|=0,this._shape[1]),b}},height:{get:function(){return this._shape[1]},set:function(b){return s(this,this._shape[0],b|=0),b}}}),p.bind=function(b){var w=this.gl;return void 0!==b&&w.activeTexture(w.TEXTURE0+(0|b)),w.bindTexture(w.TEXTURE_2D,this.handle),void 0!==b?0|b:w.getParameter(w.ACTIVE_TEXTURE)-w.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var b=Math.min(this._shape[0],this._shape[1]),w=0;b>0;++w,b>>>=1)this._mipLevels.indexOf(w)<0&&this._mipLevels.push(w)},p.setPixels=function(b,w,T,C){var M=this.gl;this.bind(),Array.isArray(w)?(C=T,T=0|w[1],w=0|w[0]):(w=w||0,T=T||0),C=C||0;var I=t(b)?b:b.raw;if(I)this._mipLevels.indexOf(C)<0?(M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,this.type,I),this._mipLevels.push(C)):M.texSubImage2D(M.TEXTURE_2D,C,w,T,this.format,this.type,I);else{if(!(b.shape&&b.stride&&b.data))throw new Error("gl-texture2d: Unsupported data type");if(b.shape.length<2||w+b.shape[1]>this._shape[1]>>>C||T+b.shape[0]>this._shape[0]>>>C||w<0||T<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(P,S,E,R,D,j,H,Y){var X=Y.dtype,Z=Y.shape.slice();if(Z.length<2||Z.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var W=0,re=0,U=c(Z,Y.stride.slice());if("float32"===X?W=P.FLOAT:"float64"===X?(W=P.FLOAT,U=!1,X="float32"):"uint8"===X?W=P.UNSIGNED_BYTE:(W=P.UNSIGNED_BYTE,U=!1,X="uint8"),2===Z.length)re=P.LUMINANCE,Y=e(Y.data,Z=[Z[0],Z[1],1],[Y.stride[0],Y.stride[1],1],Y.offset);else{if(3!==Z.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===Z[2])re=P.ALPHA;else if(2===Z[2])re=P.LUMINANCE_ALPHA;else if(3===Z[2])re=P.RGB;else{if(4!==Z[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");re=P.RGBA}}if(re!==P.LUMINANCE&&re!==P.ALPHA||D!==P.LUMINANCE&&D!==P.ALPHA||(re=D),re!==D)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var B=Y.size,V=H.indexOf(R)<0;if(V&&H.push(R),W===j&&U)0===Y.offset&&Y.data.length===B?V?P.texImage2D(P.TEXTURE_2D,R,D,Z[0],Z[1],0,D,j,Y.data):P.texSubImage2D(P.TEXTURE_2D,R,S,E,Z[0],Z[1],D,j,Y.data):V?P.texImage2D(P.TEXTURE_2D,R,D,Z[0],Z[1],0,D,j,Y.data.subarray(Y.offset,Y.offset+B)):P.texSubImage2D(P.TEXTURE_2D,R,S,E,Z[0],Z[1],D,j,Y.data.subarray(Y.offset,Y.offset+B));else{var ee;ee=j===P.FLOAT?i.mallocFloat32(B):i.mallocUint8(B);var N=e(ee,Z,[Z[2],Z[2]*Z[0],1]);W===P.FLOAT&&j===P.UNSIGNED_BYTE?h(N,Y):n.assign(N,Y),V?P.texImage2D(P.TEXTURE_2D,R,D,Z[0],Z[1],0,D,j,ee.subarray(0,B)):P.texSubImage2D(P.TEXTURE_2D,R,S,E,Z[0],Z[1],D,j,ee.subarray(0,B)),j===P.FLOAT?i.freeFloat32(ee):i.freeUint8(ee)}}(M,w,T,C,this.format,this.type,this._mipLevels,b)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(g,k,x){"use strict";k.exports=function(e,n,i){n?n.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var l=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(i){if(i.length>l)throw new Error("gl-vao: Too many vertex attributes");for(var r=0;r<i.length;++r){var d=i[r];if(d.buffer){var t=d.size||4,h=d.type||e.FLOAT,s=!!d.normalized,o=d.stride||0,p=d.offset||0;d.buffer.bind(),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,t,h,s,o,p)}else{if("number"==typeof d)e.vertexAttrib1f(r,d);else if(1===d.length)e.vertexAttrib1f(r,d[0]);else if(2===d.length)e.vertexAttrib2f(r,d[0],d[1]);else if(3===d.length)e.vertexAttrib3f(r,d[0],d[1],d[2]);else{if(4!==d.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(r,d[0],d[1],d[2],d[3])}e.disableVertexAttribArray(r)}}for(;r<l;++r)e.disableVertexAttribArray(r)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),r=0;r<l;++r)e.disableVertexAttribArray(r)}},{}],148:[function(g,k,x){"use strict";var e=g("./do-bind.js");function n(i){this.gl=i,this._elements=null,this._attributes=null,this._elementsType=i.UNSIGNED_SHORT}n.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},n.prototype.update=function(i,l,r){this._elements=l,this._attributes=i,this._elementsType=r||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(i,l,r){r=r||0;var d=this.gl;this._elements?d.drawElements(i,l,this._elementsType,r):d.drawArrays(i,r,l)},k.exports=function(i){return new n(i)}},{"./do-bind.js":147}],149:[function(g,k,x){"use strict";var e=g("./do-bind.js");function n(l,r,d,f,t,h){this.location=l,this.dimension=r,this.a=d,this.b=f,this.c=t,this.d=h}function i(l,r,d){this.gl=l,this._ext=r,this.handle=d,this._attribs=[],this._useElements=!1,this._elementsType=l.UNSIGNED_SHORT}n.prototype.bind=function(l){switch(this.dimension){case 1:l.vertexAttrib1f(this.location,this.a);break;case 2:l.vertexAttrib2f(this.location,this.a,this.b);break;case 3:l.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:l.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var l=0;l<this._attribs.length;++l)this._attribs[l].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(l,r,d){if(this.bind(),e(this.gl,r,l),this.unbind(),this._attribs.length=0,l)for(var f=0;f<l.length;++f){var t=l[f];"number"==typeof t?this._attribs.push(new n(f,1,t)):Array.isArray(t)&&this._attribs.push(new n(f,t.length,t[0],t[1],t[2],t[3]))}this._useElements=!!r,this._elementsType=d||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(l,r,d){d=d||0;var f=this.gl;this._useElements?f.drawElements(l,r,this._elementsType,d):f.drawArrays(l,d,r)},k.exports=function(l,r){return new i(l,r,r.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(g,k,x){"use strict";var e=g("./lib/vao-native.js"),n=g("./lib/vao-emulated.js");function i(l){this.bindVertexArrayOES=l.bindVertexArray.bind(l),this.createVertexArrayOES=l.createVertexArray.bind(l),this.deleteVertexArrayOES=l.deleteVertexArray.bind(l)}k.exports=function(l,r,d,f){var t,h=l.createVertexArray?new i(l):l.getExtension("OES_vertex_array_object");return(t=h?e(l,h):n(l)).update(r,d,f),t}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(g,k,x){k.exports=function(e,n,i){return e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e}},{}],152:[function(g,k,x){k.exports=function(l,r){var d=e(l[0],l[1],l[2]),f=e(r[0],r[1],r[2]);n(d,d),n(f,f);var t=i(d,f);return t>1?0:Math.acos(t)};var e=g("./fromValues"),n=g("./normalize"),i=g("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(g,k,x){k.exports=function(e,n){return e[0]=Math.ceil(n[0]),e[1]=Math.ceil(n[1]),e[2]=Math.ceil(n[2]),e}},{}],154:[function(g,k,x){k.exports=function(e){var n=new Float32Array(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}},{}],155:[function(g,k,x){k.exports=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}},{}],156:[function(g,k,x){k.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(g,k,x){k.exports=function(e,n,i){var l=n[0],r=n[1],d=n[2],f=i[0],t=i[1],h=i[2];return e[0]=r*h-d*t,e[1]=d*f-l*h,e[2]=l*t-r*f,e}},{}],158:[function(g,k,x){k.exports=g("./distance")},{"./distance":159}],159:[function(g,k,x){k.exports=function(e,n){var i=n[0]-e[0],l=n[1]-e[1],r=n[2]-e[2];return Math.sqrt(i*i+l*l+r*r)}},{}],160:[function(g,k,x){k.exports=g("./divide")},{"./divide":161}],161:[function(g,k,x){k.exports=function(e,n,i){return e[0]=n[0]/i[0],e[1]=n[1]/i[1],e[2]=n[2]/i[2],e}},{}],162:[function(g,k,x){k.exports=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}},{}],163:[function(g,k,x){k.exports=1e-6},{}],164:[function(g,k,x){k.exports=function(n,i){var l=n[0],r=n[1],d=n[2],f=i[0],t=i[1],h=i[2];return Math.abs(l-f)<=e*Math.max(1,Math.abs(l),Math.abs(f))&&Math.abs(r-t)<=e*Math.max(1,Math.abs(r),Math.abs(t))&&Math.abs(d-h)<=e*Math.max(1,Math.abs(d),Math.abs(h))};var e=g("./epsilon")},{"./epsilon":163}],165:[function(g,k,x){k.exports=function(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}},{}],166:[function(g,k,x){k.exports=function(e,n){return e[0]=Math.floor(n[0]),e[1]=Math.floor(n[1]),e[2]=Math.floor(n[2]),e}},{}],167:[function(g,k,x){k.exports=function(n,i,l,r,d,f){var t,h;for(i||(i=3),l||(l=0),h=r?Math.min(r*i+l,n.length):n.length,t=l;t<h;t+=i)e[0]=n[t],e[1]=n[t+1],e[2]=n[t+2],d(e,e,f),n[t]=e[0],n[t+1]=e[1],n[t+2]=e[2];return n};var e=g("./create")()},{"./create":156}],168:[function(g,k,x){k.exports=function(e,n,i){var l=new Float32Array(3);return l[0]=e,l[1]=n,l[2]=i,l}},{}],169:[function(g,k,x){k.exports={EPSILON:g("./epsilon"),create:g("./create"),clone:g("./clone"),angle:g("./angle"),fromValues:g("./fromValues"),copy:g("./copy"),set:g("./set"),equals:g("./equals"),exactEquals:g("./exactEquals"),add:g("./add"),subtract:g("./subtract"),sub:g("./sub"),multiply:g("./multiply"),mul:g("./mul"),divide:g("./divide"),div:g("./div"),min:g("./min"),max:g("./max"),floor:g("./floor"),ceil:g("./ceil"),round:g("./round"),scale:g("./scale"),scaleAndAdd:g("./scaleAndAdd"),distance:g("./distance"),dist:g("./dist"),squaredDistance:g("./squaredDistance"),sqrDist:g("./sqrDist"),length:g("./length"),len:g("./len"),squaredLength:g("./squaredLength"),sqrLen:g("./sqrLen"),negate:g("./negate"),inverse:g("./inverse"),normalize:g("./normalize"),dot:g("./dot"),cross:g("./cross"),lerp:g("./lerp"),random:g("./random"),transformMat4:g("./transformMat4"),transformMat3:g("./transformMat3"),transformQuat:g("./transformQuat"),rotateX:g("./rotateX"),rotateY:g("./rotateY"),rotateZ:g("./rotateZ"),forEach:g("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(g,k,x){k.exports=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e}},{}],171:[function(g,k,x){k.exports=g("./length")},{"./length":172}],172:[function(g,k,x){k.exports=function(e){var n=e[0],i=e[1],l=e[2];return Math.sqrt(n*n+i*i+l*l)}},{}],173:[function(g,k,x){k.exports=function(e,n,i,l){var r=n[0],d=n[1],f=n[2];return e[0]=r+l*(i[0]-r),e[1]=d+l*(i[1]-d),e[2]=f+l*(i[2]-f),e}},{}],174:[function(g,k,x){k.exports=function(e,n,i){return e[0]=Math.max(n[0],i[0]),e[1]=Math.max(n[1],i[1]),e[2]=Math.max(n[2],i[2]),e}},{}],175:[function(g,k,x){k.exports=function(e,n,i){return e[0]=Math.min(n[0],i[0]),e[1]=Math.min(n[1],i[1]),e[2]=Math.min(n[2],i[2]),e}},{}],176:[function(g,k,x){k.exports=g("./multiply")},{"./multiply":177}],177:[function(g,k,x){k.exports=function(e,n,i){return e[0]=n[0]*i[0],e[1]=n[1]*i[1],e[2]=n[2]*i[2],e}},{}],178:[function(g,k,x){k.exports=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e}},{}],179:[function(g,k,x){k.exports=function(e,n){var i=n[0],l=n[1],r=n[2],d=i*i+l*l+r*r;return d>0&&(d=1/Math.sqrt(d),e[0]=n[0]*d,e[1]=n[1]*d,e[2]=n[2]*d),e}},{}],180:[function(g,k,x){k.exports=function(e,n){n=n||1;var i=2*Math.random()*Math.PI,l=2*Math.random()-1,r=Math.sqrt(1-l*l)*n;return e[0]=Math.cos(i)*r,e[1]=Math.sin(i)*r,e[2]=l*n,e}},{}],181:[function(g,k,x){k.exports=function(e,n,i,l){var r=i[1],d=i[2],f=n[1]-r,t=n[2]-d,h=Math.sin(l),s=Math.cos(l);return e[0]=n[0],e[1]=r+f*s-t*h,e[2]=d+f*h+t*s,e}},{}],182:[function(g,k,x){k.exports=function(e,n,i,l){var r=i[0],d=i[2],f=n[0]-r,t=n[2]-d,h=Math.sin(l),s=Math.cos(l);return e[0]=r+t*h+f*s,e[1]=n[1],e[2]=d+t*s-f*h,e}},{}],183:[function(g,k,x){k.exports=function(e,n,i,l){var r=i[0],d=i[1],f=n[0]-r,t=n[1]-d,h=Math.sin(l),s=Math.cos(l);return e[0]=r+f*s-t*h,e[1]=d+f*h+t*s,e[2]=n[2],e}},{}],184:[function(g,k,x){k.exports=function(e,n){return e[0]=Math.round(n[0]),e[1]=Math.round(n[1]),e[2]=Math.round(n[2]),e}},{}],185:[function(g,k,x){k.exports=function(e,n,i){return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e}},{}],186:[function(g,k,x){k.exports=function(e,n,i,l){return e[0]=n[0]+i[0]*l,e[1]=n[1]+i[1]*l,e[2]=n[2]+i[2]*l,e}},{}],187:[function(g,k,x){k.exports=function(e,n,i,l){return e[0]=n,e[1]=i,e[2]=l,e}},{}],188:[function(g,k,x){k.exports=g("./squaredDistance")},{"./squaredDistance":190}],189:[function(g,k,x){k.exports=g("./squaredLength")},{"./squaredLength":191}],190:[function(g,k,x){k.exports=function(e,n){var i=n[0]-e[0],l=n[1]-e[1],r=n[2]-e[2];return i*i+l*l+r*r}},{}],191:[function(g,k,x){k.exports=function(e){var n=e[0],i=e[1],l=e[2];return n*n+i*i+l*l}},{}],192:[function(g,k,x){k.exports=g("./subtract")},{"./subtract":193}],193:[function(g,k,x){k.exports=function(e,n,i){return e[0]=n[0]-i[0],e[1]=n[1]-i[1],e[2]=n[2]-i[2],e}},{}],194:[function(g,k,x){k.exports=function(e,n,i){var l=n[0],r=n[1],d=n[2];return e[0]=l*i[0]+r*i[3]+d*i[6],e[1]=l*i[1]+r*i[4]+d*i[7],e[2]=l*i[2]+r*i[5]+d*i[8],e}},{}],195:[function(g,k,x){k.exports=function(e,n,i){var l=n[0],r=n[1],d=n[2],f=i[3]*l+i[7]*r+i[11]*d+i[15];return e[0]=(i[0]*l+i[4]*r+i[8]*d+i[12])/(f=f||1),e[1]=(i[1]*l+i[5]*r+i[9]*d+i[13])/f,e[2]=(i[2]*l+i[6]*r+i[10]*d+i[14])/f,e}},{}],196:[function(g,k,x){k.exports=function(e,n,i){var l=n[0],r=n[1],d=n[2],f=i[0],t=i[1],h=i[2],s=i[3],o=s*l+t*d-h*r,p=s*r+h*l-f*d,c=s*d+f*r-t*l,a=-f*l-t*r-h*d;return e[0]=o*s+a*-f+p*-h-c*-t,e[1]=p*s+a*-t+c*-f-o*-h,e[2]=c*s+a*-h+o*-t-p*-f,e}},{}],197:[function(g,k,x){k.exports=function(e,n,i){return e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e[3]=n[3]+i[3],e}},{}],198:[function(g,k,x){k.exports=function(e){var n=new Float32Array(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}},{}],199:[function(g,k,x){k.exports=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}},{}],200:[function(g,k,x){k.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(g,k,x){k.exports=function(e,n){var i=n[0]-e[0],l=n[1]-e[1],r=n[2]-e[2],d=n[3]-e[3];return Math.sqrt(i*i+l*l+r*r+d*d)}},{}],202:[function(g,k,x){k.exports=function(e,n,i){return e[0]=n[0]/i[0],e[1]=n[1]/i[1],e[2]=n[2]/i[2],e[3]=n[3]/i[3],e}},{}],203:[function(g,k,x){k.exports=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]}},{}],204:[function(g,k,x){k.exports=function(e,n,i,l){var r=new Float32Array(4);return r[0]=e,r[1]=n,r[2]=i,r[3]=l,r}},{}],205:[function(g,k,x){k.exports={create:g("./create"),clone:g("./clone"),fromValues:g("./fromValues"),copy:g("./copy"),set:g("./set"),add:g("./add"),subtract:g("./subtract"),multiply:g("./multiply"),divide:g("./divide"),min:g("./min"),max:g("./max"),scale:g("./scale"),scaleAndAdd:g("./scaleAndAdd"),distance:g("./distance"),squaredDistance:g("./squaredDistance"),length:g("./length"),squaredLength:g("./squaredLength"),negate:g("./negate"),inverse:g("./inverse"),normalize:g("./normalize"),dot:g("./dot"),lerp:g("./lerp"),random:g("./random"),transformMat4:g("./transformMat4"),transformQuat:g("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(g,k,x){k.exports=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e[3]=1/n[3],e}},{}],207:[function(g,k,x){k.exports=function(e){var n=e[0],i=e[1],l=e[2],r=e[3];return Math.sqrt(n*n+i*i+l*l+r*r)}},{}],208:[function(g,k,x){k.exports=function(e,n,i,l){var r=n[0],d=n[1],f=n[2],t=n[3];return e[0]=r+l*(i[0]-r),e[1]=d+l*(i[1]-d),e[2]=f+l*(i[2]-f),e[3]=t+l*(i[3]-t),e}},{}],209:[function(g,k,x){k.exports=function(e,n,i){return e[0]=Math.max(n[0],i[0]),e[1]=Math.max(n[1],i[1]),e[2]=Math.max(n[2],i[2]),e[3]=Math.max(n[3],i[3]),e}},{}],210:[function(g,k,x){k.exports=function(e,n,i){return e[0]=Math.min(n[0],i[0]),e[1]=Math.min(n[1],i[1]),e[2]=Math.min(n[2],i[2]),e[3]=Math.min(n[3],i[3]),e}},{}],211:[function(g,k,x){k.exports=function(e,n,i){return e[0]=n[0]*i[0],e[1]=n[1]*i[1],e[2]=n[2]*i[2],e[3]=n[3]*i[3],e}},{}],212:[function(g,k,x){k.exports=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=-n[3],e}},{}],213:[function(g,k,x){k.exports=function(e,n){var i=n[0],l=n[1],r=n[2],d=n[3],f=i*i+l*l+r*r+d*d;return f>0&&(f=1/Math.sqrt(f),e[0]=i*f,e[1]=l*f,e[2]=r*f,e[3]=d*f),e}},{}],214:[function(g,k,x){var e=g("./normalize"),n=g("./scale");k.exports=function(i,l){return l=l||1,i[0]=Math.random(),i[1]=Math.random(),i[2]=Math.random(),i[3]=Math.random(),e(i,i),n(i,i,l),i}},{"./normalize":213,"./scale":215}],215:[function(g,k,x){k.exports=function(e,n,i){return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=n[3]*i,e}},{}],216:[function(g,k,x){k.exports=function(e,n,i,l){return e[0]=n[0]+i[0]*l,e[1]=n[1]+i[1]*l,e[2]=n[2]+i[2]*l,e[3]=n[3]+i[3]*l,e}},{}],217:[function(g,k,x){k.exports=function(e,n,i,l,r){return e[0]=n,e[1]=i,e[2]=l,e[3]=r,e}},{}],218:[function(g,k,x){k.exports=function(e,n){var i=n[0]-e[0],l=n[1]-e[1],r=n[2]-e[2],d=n[3]-e[3];return i*i+l*l+r*r+d*d}},{}],219:[function(g,k,x){k.exports=function(e){var n=e[0],i=e[1],l=e[2],r=e[3];return n*n+i*i+l*l+r*r}},{}],220:[function(g,k,x){k.exports=function(e,n,i){return e[0]=n[0]-i[0],e[1]=n[1]-i[1],e[2]=n[2]-i[2],e[3]=n[3]-i[3],e}},{}],221:[function(g,k,x){k.exports=function(e,n,i){var l=n[0],r=n[1],d=n[2],f=n[3];return e[0]=i[0]*l+i[4]*r+i[8]*d+i[12]*f,e[1]=i[1]*l+i[5]*r+i[9]*d+i[13]*f,e[2]=i[2]*l+i[6]*r+i[10]*d+i[14]*f,e[3]=i[3]*l+i[7]*r+i[11]*d+i[15]*f,e}},{}],222:[function(g,k,x){k.exports=function(e,n,i){var l=n[0],r=n[1],d=n[2],f=i[0],t=i[1],h=i[2],s=i[3],o=s*l+t*d-h*r,p=s*r+h*l-f*d,c=s*d+f*r-t*l,a=-f*l-t*r-h*d;return e[0]=o*s+a*-f+p*-h-c*-t,e[1]=p*s+a*-t+c*-f-o*-h,e[2]=c*s+a*-h+o*-t-p*-f,e[3]=n[3],e}},{}],223:[function(g,k,x){var e=g("glsl-tokenizer"),n=g("atob-lite");k.exports=function(i){for(var l=Array.isArray(i)?i:e(i),r=0;r<l.length;r++){var d=l[r];if("preprocessor"===d.type){var f=d.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(f&&f[2]){var h=f[2];return(f[1]?n(h):h).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(g,k,x){k.exports=function(f){var t,h,s,o=0,p=0,c=999,a=[],y=[],u=1,_=0,b=0,w=!1,T=!1,C="",M=i,I=e;"300 es"===(f=f||{}).version&&(M=r,I=l);var P={},S={};for(o=0;o<M.length;o++)P[M[o]]=!0;for(o=0;o<I.length;o++)S[I[o]]=!0;return function(B){return y=[],null!==B?function(V){var ee;for(o=0,V.toString&&(V=V.toString()),C+=V.replace(/\r\n/g,"\n"),s=C.length;t=C[o],o<s;){switch(ee=o,c){case 0:o="/"===t&&"*"===h?(a.push(t),E(a.join("")),c=999,o+1):(a.push(t),h=t,o+1);break;case 1:case 2:o="\r"!==t&&"\n"!==t||"\\"===h?(a.push(t),h=t,o+1):(E(a.join("")),c=999,o);break;case 3:o=Y();break;case 4:o="."===t||/[eE]/.test(t)?(a.push(t),c=5,h=t,o+1):"x"===t&&1===a.length&&"0"===a[0]?(c=11,a.push(t),h=t,o+1):/[^\d]/.test(t)?(E(a.join("")),c=999,o):(a.push(t),h=t,o+1);break;case 11:o=/[^a-fA-F0-9]/.test(t)?(E(a.join("")),c=999,o):(a.push(t),h=t,o+1);break;case 5:"f"===t&&(a.push(t),h=t,o+=1),o=/[eE]/.test(t)?(a.push(t),h=t,o+1):("-"!==t&&"+"!==t||!/[eE]/.test(h))&&/[^\d]/.test(t)?(E(a.join("")),c=999,o):(a.push(t),h=t,o+1);break;case 9999:o=U();break;case 9:o=/[^\s]/g.test(t)?(E(a.join("")),c=999,o):(a.push(t),h=t,o+1);break;case 999:a=a.length?[]:a,o="/"===h&&"*"===t?(b=p+o-1,c=0,h=t,o+1):"/"===h&&"/"===t?(b=p+o-1,c=1,h=t,o+1):"#"===t?(c=2,b=p+o,o):/\s/.test(t)?(c=9,b=p+o,o):(w=/\d/.test(t),T=/[^\w_]/.test(t),b=p+o,c=w?4:T?3:9999,o)}ee!==o&&("\n"===C[ee]?(_=0,++u):++_)}return p+=o,C=C.slice(o),y}(B):(a.length&&E(a.join("")),c=10,E("(eof)"),y)};function E(B){B.length&&y.push({type:d[c],data:B,position:b,line:u,column:_})}function Y(){if("."===h&&/\d/.test(t))return c=5,o;if("/"===h&&"*"===t)return c=0,o;if("/"===h&&"/"===t)return c=1,o;if("."===t&&a.length){for(;X(a););return c=5,o}if(";"===t||")"===t||"("===t){if(a.length)for(;X(a););return E(t),c=999,o+1}var B=2===a.length&&"="!==t;if(/[\w_\d\s]/.test(t)||B){for(;X(a););return c=999,o}return a.push(t),h=t,o+1}function X(B){for(var V,ee,N=0;;){if(V=n.indexOf(B.slice(0,B.length+N).join("")),ee=n[V],-1===V){if(N--+B.length>0)continue;ee=B.slice(0,1).join("")}return E(ee),b+=ee.length,(a=a.slice(ee.length)).length}}function U(){if(/[^\d\w_]/.test(t)){var B=a.join("");return c=S[B]?8:P[B]?7:6,E(a.join("")),c=999,o}return a.push(t),h=t,o+1}};var e=g("./lib/literals"),n=g("./lib/operators"),i=g("./lib/builtins"),l=g("./lib/literals-300es"),r=g("./lib/builtins-300es"),d=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(g,k,x){var e=g("./builtins");e=e.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),k.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(g,k,x){k.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(g,k,x){var e=g("./literals");k.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(g,k,x){k.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(g,k,x){k.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(g,k,x){var e=g("./index");k.exports=function(n,i){var l=e(i),r=[];return(r=r.concat(l(n))).concat(l(null))}},{"./index":224}],231:[function(g,k,x){k.exports=function(e){"string"==typeof e&&(e=[e]);for(var n=[].slice.call(arguments,1),i=[],l=0;l<e.length-1;l++)i.push(e[l],n[l]||"");return i.push(e[l]),i.join("")}},{}],232:[function(g,k,x){"use strict";var e=g("is-browser");k.exports=e&&function(){var n=!1;try{var i=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch{n=!1}return n}()},{"is-browser":236}],233:[function(g,k,x){"use strict";k.exports=function(h,s){var o=h.length;if(0===o)throw new Error("Must have at least d+1 points");var p=h[0].length;if(o<=p)throw new Error("Must input at least d+1 points");var c=h.slice(0,p+1),a=e.apply(void 0,c);if(0===a)throw new Error("Input not in general position");for(var y=new Array(p+1),u=0;u<=p;++u)y[u]=u;a<0&&(y[0]=1,y[1]=0);var _=new i(y,new Array(p+1),!1),b=_.adjacent,w=new Array(p+2);for(u=0;u<=p;++u){for(var T=y.slice(),C=0;C<=p;++C)C===u&&(T[C]=-1);var M=T[0];T[0]=T[1],T[1]=M;var I=new i(T,new Array(p+1),!0);b[u]=I,w[u]=I}for(w[p+1]=_,u=0;u<=p;++u){T=b[u].vertices;var P=b[u].adjacent;for(C=0;C<=p;++C){var S=T[C];if(S<0)P[C]=_;else for(var E=0;E<=p;++E)b[E].vertices.indexOf(S)<0&&(P[C]=b[E])}}var R=new f(p,c,w),D=!!s;for(u=p+1;u<o;++u)R.insert(h[u],D);return R.boundary()};var e=g("robust-orientation"),n=g("simplicial-complex").compareCells;function i(h,s,o){this.vertices=h,this.adjacent=s,this.boundary=o,this.lastVisited=-1}function l(h,s,o){this.vertices=h,this.cell=s,this.index=o}function r(h,s){return n(h.vertices,s.vertices)}i.prototype.flip=function(){var h=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=h;var s=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=s};var d=[];function f(h,s,o){this.dimension=h,this.vertices=s,this.simplices=o,this.interior=o.filter(function(y){return!y.boundary}),this.tuple=new Array(h+1);for(var p=0;p<=h;++p)this.tuple[p]=this.vertices[p];var c,y,a=d[h];a||(a=d[h]=((c=e[h+1])||(c=e),y=c,function(){return y.apply(this,this.tuple)})),this.orient=a}var t=f.prototype;t.handleBoundaryDegeneracy=function(h,s){var o=this.dimension,p=this.vertices.length-1,c=this.tuple,a=this.vertices,y=[h];for(h.lastVisited=-p;y.length>0;)for(var u=(h=y.pop()).adjacent,_=0;_<=o;++_){var b=u[_];if(b.boundary&&!(b.lastVisited<=-p)){for(var w=b.vertices,T=0;T<=o;++T){var C=w[T];c[T]=C<0?s:a[C]}var M=this.orient();if(M>0)return b;b.lastVisited=-p,0===M&&y.push(b)}}return null},t.walk=function(h,s){var o=this.vertices.length-1,p=this.dimension,c=this.vertices,a=this.tuple,y=s?this.interior.length*Math.random()|0:this.interior.length-1,u=this.interior[y];e:for(;!u.boundary;){for(var _=u.vertices,b=u.adjacent,w=0;w<=p;++w)a[w]=c[_[w]];for(u.lastVisited=o,w=0;w<=p;++w){var T=b[w];if(!(T.lastVisited>=o)){var C=a[w];a[w]=h;var M=this.orient();if(a[w]=C,M<0){u=T;continue e}T.lastVisited=T.boundary?-o:o}}return}return u},t.addPeaks=function(h,s){var o=this.vertices.length-1,p=this.dimension,c=this.vertices,a=this.tuple,y=this.interior,u=this.simplices,_=[s];s.lastVisited=o,s.vertices[s.vertices.indexOf(-1)]=o,s.boundary=!1,y.push(s);for(var b=[];_.length>0;){var w=(s=_.pop()).vertices,T=s.adjacent,C=w.indexOf(o);if(!(C<0))for(var M=0;M<=p;++M)if(M!==C){var I=T[M];if(I.boundary&&!(I.lastVisited>=o)){var P=I.vertices;if(I.lastVisited!==-o){for(var S=0,E=0;E<=p;++E)P[E]<0?(S=E,a[E]=h):a[E]=c[P[E]];if(this.orient()>0){P[S]=o,I.boundary=!1,y.push(I),_.push(I),I.lastVisited=o;continue}I.lastVisited=-o}var R=I.adjacent,D=w.slice(),j=T.slice(),H=new i(D,j,!0);u.push(H);var Y=R.indexOf(s);if(!(Y<0))for(R[Y]=H,j[C]=I,D[M]=-1,j[M]=s,T[M]=H,H.flip(),E=0;E<=p;++E){var X=D[E];if(!(X<0||X===o)){for(var Z=new Array(p-1),W=0,re=0;re<=p;++re){var U=D[re];U<0||re===E||(Z[W++]=U)}b.push(new l(Z,H,E))}}}}}for(b.sort(r),M=0;M+1<b.length;M+=2){var B=b[M],V=b[M+1];B.index<0||V.index<0||(B.cell.adjacent[B.index]=V.cell,V.cell.adjacent[V.index]=B.cell)}},t.insert=function(h,s){var o=this.vertices;o.push(h);var p=this.walk(h,s);if(p){for(var c=this.dimension,a=this.tuple,y=0;y<=c;++y){var u=p.vertices[y];a[y]=u<0?h:o[u]}var _=this.orient(a);_<0||(0!==_||(p=this.handleBoundaryDegeneracy(p,h)))&&this.addPeaks(h,p)}},t.boundary=function(){for(var h=this.dimension,s=[],o=this.simplices,p=o.length,c=0;c<p;++c){var a=o[c];if(a.boundary){for(var y=new Array(h),u=a.vertices,_=0,b=0,w=0;w<=h;++w)u[w]>=0?y[_++]=u[w]:b=1&w;if(b===(1&h)){var T=y[0];y[0]=y[1],y[1]=T}s.push(y)}}return s}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(g,k,x){"use strict";var e=g("binary-search-bounds");function n(_,b,w,T,C){this.mid=_,this.left=b,this.right=w,this.leftPoints=T,this.rightPoints=C,this.count=(b?b.count:0)+(w?w.count:0)+T.length}k.exports=function(_){return new y(_&&0!==_.length?a(_):null)};var i=n.prototype;function l(_,b){_.mid=b.mid,_.left=b.left,_.right=b.right,_.leftPoints=b.leftPoints,_.rightPoints=b.rightPoints,_.count=b.count}function r(_,b){var w=a(b);_.mid=w.mid,_.left=w.left,_.right=w.right,_.leftPoints=w.leftPoints,_.rightPoints=w.rightPoints,_.count=w.count}function d(_,b){var w=_.intervals([]);w.push(b),r(_,w)}function f(_,b){var w=_.intervals([]),T=w.indexOf(b);return T<0?0:(w.splice(T,1),r(_,w),1)}function t(_,b,w){for(var T=0;T<_.length&&_[T][0]<=b;++T){var C=w(_[T]);if(C)return C}}function h(_,b,w){for(var T=_.length-1;T>=0&&_[T][1]>=b;--T){var C=w(_[T]);if(C)return C}}function s(_,b){for(var w=0;w<_.length;++w){var T=b(_[w]);if(T)return T}}function o(_,b){return _-b}function p(_,b){return _[0]-b[0]||_[1]-b[1]}function c(_,b){return _[1]-b[1]||_[0]-b[0]}function a(_){if(0===_.length)return null;for(var b=[],w=0;w<_.length;++w)b.push(_[w][0],_[w][1]);b.sort(o);var T=b[b.length>>1],C=[],M=[],I=[];for(w=0;w<_.length;++w){var P=_[w];P[1]<T?C.push(P):T<P[0]?M.push(P):I.push(P)}var S=I,E=I.slice();return S.sort(p),E.sort(c),new n(T,a(C),a(M),S,E)}function y(_){this.root=_}i.intervals=function(_){return _.push.apply(_,this.leftPoints),this.left&&this.left.intervals(_),this.right&&this.right.intervals(_),_},i.insert=function(_){var b=this.count-this.leftPoints.length;if(this.count+=1,_[1]<this.mid)this.left?4*(this.left.count+1)>3*(b+1)?d(this,_):this.left.insert(_):this.left=a([_]);else if(_[0]>this.mid)this.right?4*(this.right.count+1)>3*(b+1)?d(this,_):this.right.insert(_):this.right=a([_]);else{var w=e.ge(this.leftPoints,_,p),T=e.ge(this.rightPoints,_,c);this.leftPoints.splice(w,0,_),this.rightPoints.splice(T,0,_)}},i.remove=function(_){var b=this.count-this.leftPoints;if(_[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(b-1)?f(this,_):2===(M=this.left.remove(_))?(this.left=null,this.count-=1,1):(1===M&&(this.count-=1),M):0;if(_[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(b-1)?f(this,_):2===(M=this.right.remove(_))?(this.right=null,this.count-=1,1):(1===M&&(this.count-=1),M):0;if(1===this.count)return this.leftPoints[0]===_?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===_){if(this.left&&this.right){for(var w=this,T=this.left;T.right;)w=T,T=T.right;if(w===this)T.right=this.right;else{var C=this.left,M=this.right;w.count-=T.count,w.right=T.left,T.left=C,T.right=M}l(this,T),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else l(this,this.left?this.left:this.right);return 1}for(C=e.ge(this.leftPoints,_,p);C<this.leftPoints.length&&this.leftPoints[C][0]===_[0];++C)if(this.leftPoints[C]===_)for(this.count-=1,this.leftPoints.splice(C,1),M=e.ge(this.rightPoints,_,c);M<this.rightPoints.length&&this.rightPoints[M][1]===_[1];++M)if(this.rightPoints[M]===_)return this.rightPoints.splice(M,1),1;return 0},i.queryPoint=function(_,b){return _<this.mid?this.left&&(w=this.left.queryPoint(_,b))?w:t(this.leftPoints,_,b):_>this.mid?this.right&&(w=this.right.queryPoint(_,b))?w:h(this.rightPoints,_,b):s(this.leftPoints,b);var w},i.queryInterval=function(_,b,w){var T;return _<this.mid&&this.left&&(T=this.left.queryInterval(_,b,w))||b>this.mid&&this.right&&(T=this.right.queryInterval(_,b,w))?T:b<this.mid?t(this.leftPoints,b,w):_>this.mid?h(this.rightPoints,_,w):s(this.leftPoints,w)};var u=y.prototype;u.insert=function(_){this.root?this.root.insert(_):this.root=new n(_[0],null,null,[_],[_])},u.remove=function(_){if(this.root){var b=this.root.remove(_);return 2===b&&(this.root=null),0!==b}return!1},u.queryPoint=function(_,b){if(this.root)return this.root.queryPoint(_,b)},u.queryInterval=function(_,b,w){if(_<=b&&this.root)return this.root.queryInterval(_,b,w)},Object.defineProperty(u,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(u,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(g,k,x){"use strict";k.exports=function(e){for(var n=new Array(e),i=0;i<e;++i)n[i]=i;return n}},{}],236:[function(g,k,x){k.exports=!0},{}],237:[function(g,k,x){function e(n){return!!n.constructor&&"function"==typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)}k.exports=function(n){return null!=n&&(e(n)||"function"==typeof(i=n).readFloatLE&&"function"==typeof i.slice&&e(i.slice(0,0))||!!n._isBuffer);var i}},{}],238:[function(g,k,x){"use strict";k.exports=i,k.exports.isMobile=i,k.exports.default=i;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(l){l||(l={});var r=l.ua;if(r||typeof navigator>"u"||(r=navigator.userAgent),r&&r.headers&&"string"==typeof r.headers["user-agent"]&&(r=r.headers["user-agent"]),"string"!=typeof r)return!1;var d=l.tablet?n.test(r):e.test(r);return!d&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==r.indexOf("Macintosh")&&-1!==r.indexOf("Safari")&&(d=!0),d}},{}],239:[function(g,k,x){"use strict";k.exports=function(e){for(var n,i=e.length,l=0;l<i;l++)if(((n=e.charCodeAt(l))<9||n>13)&&32!==n&&133!==n&&160!==n&&5760!==n&&6158!==n&&(n<8192||n>8205)&&8232!==n&&8233!==n&&8239!==n&&8287!==n&&8288!==n&&12288!==n&&65279!==n)return!1;return!0}},{}],240:[function(g,k,x){k.exports=function(e,n,i){return e*(1-i)+n*i}},{}],241:[function(g,k,x){var e=g("./normalize"),n=g("gl-mat4/create"),i=g("gl-mat4/clone"),l=g("gl-mat4/determinant"),r=g("gl-mat4/invert"),d=g("gl-mat4/transpose"),f={length:g("gl-vec3/length"),normalize:g("gl-vec3/normalize"),dot:g("gl-vec3/dot"),cross:g("gl-vec3/cross")},t=n(),h=n(),s=[0,0,0,0],o=[[0,0,0],[0,0,0],[0,0,0]],p=[0,0,0];function c(a,y,u,_,b){a[0]=y[0]*_+u[0]*b,a[1]=y[1]*_+u[1]*b,a[2]=y[2]*_+u[2]*b}k.exports=function(a,y,u,_,b,w){if(y||(y=[0,0,0]),u||(u=[0,0,0]),_||(_=[0,0,0]),b||(b=[0,0,0,1]),w||(w=[0,0,0,1]),!e(t,a)||(i(h,t),h[3]=0,h[7]=0,h[11]=0,h[15]=1,Math.abs(l(h)<1e-8)))return!1;var T,C,M,I,P,S,E,re,U,R=t[3],D=t[7],j=t[11],H=t[12],Y=t[13],X=t[14],Z=t[15];if(0!==R||0!==D||0!==j){if(s[0]=R,s[1]=D,s[2]=j,s[3]=Z,!r(h,h))return!1;d(h,h),I=(C=s)[0],(T=b)[0]=(M=h)[0]*I+M[4]*(P=C[1])+M[8]*(S=C[2])+M[12]*(E=C[3]),T[1]=M[1]*I+M[5]*P+M[9]*S+M[13]*E,T[2]=M[2]*I+M[6]*P+M[10]*S+M[14]*E,T[3]=M[3]*I+M[7]*P+M[11]*S+M[15]*E}else b[0]=b[1]=b[2]=0,b[3]=1;if(y[0]=H,y[1]=Y,y[2]=X,(re=o)[0][0]=(U=t)[0],re[0][1]=U[1],re[0][2]=U[2],re[1][0]=U[4],re[1][1]=U[5],re[1][2]=U[6],re[2][0]=U[8],re[2][1]=U[9],re[2][2]=U[10],u[0]=f.length(o[0]),f.normalize(o[0],o[0]),_[0]=f.dot(o[0],o[1]),c(o[1],o[1],o[0],1,-_[0]),u[1]=f.length(o[1]),f.normalize(o[1],o[1]),_[0]/=u[1],_[1]=f.dot(o[0],o[2]),c(o[2],o[2],o[0],1,-_[1]),_[2]=f.dot(o[1],o[2]),c(o[2],o[2],o[1],1,-_[2]),u[2]=f.length(o[2]),f.normalize(o[2],o[2]),_[1]/=u[2],_[2]/=u[2],f.cross(p,o[1],o[2]),f.dot(o[0],p)<0)for(var W=0;W<3;W++)u[W]*=-1,o[W][0]*=-1,o[W][1]*=-1,o[W][2]*=-1;return w[0]=.5*Math.sqrt(Math.max(1+o[0][0]-o[1][1]-o[2][2],0)),w[1]=.5*Math.sqrt(Math.max(1-o[0][0]+o[1][1]-o[2][2],0)),w[2]=.5*Math.sqrt(Math.max(1-o[0][0]-o[1][1]+o[2][2],0)),w[3]=.5*Math.sqrt(Math.max(1+o[0][0]+o[1][1]+o[2][2],0)),o[2][1]>o[1][2]&&(w[0]=-w[0]),o[0][2]>o[2][0]&&(w[1]=-w[1]),o[1][0]>o[0][1]&&(w[2]=-w[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(g,k,x){k.exports=function(e,n){var i=n[15];if(0===i)return!1;for(var l=1/i,r=0;r<16;r++)e[r]=n[r]*l;return!0}},{}],243:[function(g,k,x){var e=g("gl-vec3/lerp"),n=g("mat4-recompose"),i=g("mat4-decompose"),l=g("gl-mat4/determinant"),r=g("quat-slerp"),d=h(),f=h(),t=h();function h(){return{translate:s(),scale:s(1),skew:s(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function s(o){return[o||0,o||0,o||0]}k.exports=function(o,p,c,a){if(0===l(p)||0===l(c))return!1;var y=i(p,d.translate,d.scale,d.skew,d.perspective,d.quaternion),u=i(c,f.translate,f.scale,f.skew,f.perspective,f.quaternion);return!(!y||!u||(e(t.translate,d.translate,f.translate,a),e(t.skew,d.skew,f.skew,a),e(t.scale,d.scale,f.scale,a),e(t.perspective,d.perspective,f.perspective,a),r(t.quaternion,d.quaternion,f.quaternion,a),n(o,t.translate,t.scale,t.skew,t.perspective,t.quaternion),0))}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(g,k,x){var e={identity:g("gl-mat4/identity"),translate:g("gl-mat4/translate"),multiply:g("gl-mat4/multiply"),create:g("gl-mat4/create"),scale:g("gl-mat4/scale"),fromRotationTranslation:g("gl-mat4/fromRotationTranslation")},n=(e.create(),e.create());k.exports=function(i,l,r,d,f,t){return e.identity(i),e.fromRotationTranslation(i,t,l),i[3]=f[0],i[7]=f[1],i[11]=f[2],i[15]=f[3],e.identity(n),0!==d[2]&&(n[9]=d[2],e.multiply(i,i,n)),0!==d[1]&&(n[9]=0,n[8]=d[1],e.multiply(i,i,n)),0!==d[0]&&(n[8]=0,n[4]=d[0],e.multiply(i,i,n)),e.scale(i,i,r),i}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(g,k,x){"use strict";var e=g("binary-search-bounds"),n=g("mat4-interpolate"),i=g("gl-mat4/invert"),l=g("gl-mat4/rotateX"),r=g("gl-mat4/rotateY"),d=g("gl-mat4/rotateZ"),f=g("gl-mat4/lookAt"),t=g("gl-mat4/translate"),h=(g("gl-mat4/scale"),g("gl-vec3/normalize")),s=[0,0,0];function o(a){this._components=a.slice(),this._time=[0],this.prevMatrix=a.slice(),this.nextMatrix=a.slice(),this.computedMatrix=a.slice(),this.computedInverse=a.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}k.exports=function(a){return new o((a=a||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var p=o.prototype;p.recalcMatrix=function(a){var y=this._time,u=e.le(y,a),_=this.computedMatrix;if(!(u<0)){var b=this._components;if(u===y.length-1)for(var w=16*u,T=0;T<16;++T)_[T]=b[w++];else{var C=y[u+1]-y[u],M=(w=16*u,this.prevMatrix),I=!0;for(T=0;T<16;++T)M[T]=b[w++];var P=this.nextMatrix;for(T=0;T<16;++T)P[T]=b[w++],I=I&&M[T]===P[T];if(C<1e-6||I)for(T=0;T<16;++T)_[T]=M[T];else n(_,M,P,(a-y[u])/C)}var S=this.computedUp;S[0]=_[1],S[1]=_[5],S[2]=_[9],h(S,S);var E=this.computedInverse;i(E,_);var R=this.computedEye,D=E[15];R[0]=E[12]/D,R[1]=E[13]/D,R[2]=E[14]/D;var j=this.computedCenter,H=Math.exp(this.computedRadius[0]);for(T=0;T<3;++T)j[T]=R[T]-_[2+4*T]*H}},p.idle=function(a){if(!(a<this.lastT())){for(var y=this._components,u=y.length-16,_=0;_<16;++_)y.push(y[u++]);this._time.push(a)}},p.flush=function(a){var y=e.gt(this._time,a)-2;y<0||(this._time.splice(0,y),this._components.splice(0,16*y))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(a,y,u,_){this.recalcMatrix(a),this.setMatrix(a,f(this.computedMatrix,y=y||this.computedEye,u=u||s,_=_||this.computedUp));for(var b=0,w=0;w<3;++w)b+=Math.pow(u[w]-y[w],2);b=Math.log(Math.sqrt(b)),this.computedRadius[0]=b},p.rotate=function(a,y,u,_){this.recalcMatrix(a);var b=this.computedInverse;y&&r(b,b,y),u&&l(b,b,u),_&&d(b,b,_),this.setMatrix(a,i(this.computedMatrix,b))};var c=[0,0,0];p.pan=function(a,y,u,_){c[0]=-(y||0),c[1]=-(u||0),c[2]=-(_||0),this.recalcMatrix(a);var b=this.computedInverse;t(b,b,c),this.setMatrix(a,i(b,b))},p.translate=function(a,y,u,_){c[0]=y||0,c[1]=u||0,c[2]=_||0,this.recalcMatrix(a);var b=this.computedMatrix;t(b,b,c),this.setMatrix(a,b)},p.setMatrix=function(a,y){if(!(a<this.lastT())){this._time.push(a);for(var u=0;u<16;++u)this._components.push(y[u])}},p.setDistance=function(a,y){this.computedRadius[0]=y},p.setDistanceLimits=function(a,y){var u=this._limits;u[0]=a,u[1]=y},p.getDistanceLimits=function(a){var y=this._limits;return a?(a[0]=y[0],a[1]=y[1],a):y}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(g,k,x){"use strict";k.exports=function(n){var i=n.length;if(i<3){for(var l=new Array(i),r=0;r<i;++r)l[r]=r;return 2===i&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:l}var d=new Array(i);for(r=0;r<i;++r)d[r]=r;d.sort(function(y,u){return n[y][0]-n[u][0]||n[y][1]-n[u][1]});var f=[d[0],d[1]],t=[d[0],d[1]];for(r=2;r<i;++r){for(var h=d[r],s=n[h],o=f.length;o>1&&e(n[f[o-2]],n[f[o-1]],s)<=0;)o-=1,f.pop();for(f.push(h),o=t.length;o>1&&e(n[t[o-2]],n[t[o-1]],s)>=0;)o-=1,t.pop();t.push(h)}l=new Array(t.length+f.length-2);for(var p=0,c=(r=0,f.length);r<c;++r)l[p++]=f[r];for(var a=t.length-2;a>0;--a)l[p++]=t[a];return l};var e=g("robust-orientation")[3]},{"robust-orientation":284}],247:[function(g,k,x){"use strict";k.exports=function(n,i){i||(i=n,n=window);var l=0,r=0,d=0,f={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function h(w){var T=!1;return"altKey"in w&&(T=T||w.altKey!==f.alt,f.alt=!!w.altKey),"shiftKey"in w&&(T=T||w.shiftKey!==f.shift,f.shift=!!w.shiftKey),"ctrlKey"in w&&(T=T||w.ctrlKey!==f.control,f.control=!!w.ctrlKey),"metaKey"in w&&(T=T||w.metaKey!==f.meta,f.meta=!!w.metaKey),T}function s(w,T){var C=e.x(T),M=e.y(T);"buttons"in T&&(w=0|T.buttons),(w!==l||C!==r||M!==d||h(T))&&(l=0|w,r=C||0,d=M||0,i&&i(l,r,d,f))}function o(w){s(0,w)}function p(){(l||r||d||f.shift||f.alt||f.meta||f.control)&&(r=d=0,l=0,f.shift=f.alt=f.control=f.meta=!1,i&&i(0,0,0,f))}function c(w){h(w)&&i&&i(l,r,d,f)}function a(w){0===e.buttons(w)?s(0,w):s(l,w)}function y(w){s(l|e.buttons(w),w)}function u(w){s(l&~e.buttons(w),w)}function _(){t||(t=!0,n.addEventListener("mousemove",a),n.addEventListener("mousedown",y),n.addEventListener("mouseup",u),n.addEventListener("mouseleave",o),n.addEventListener("mouseenter",o),n.addEventListener("mouseout",o),n.addEventListener("mouseover",o),n.addEventListener("blur",p),n.addEventListener("keyup",c),n.addEventListener("keydown",c),n.addEventListener("keypress",c),n!==window&&(window.addEventListener("blur",p),window.addEventListener("keyup",c),window.addEventListener("keydown",c),window.addEventListener("keypress",c)))}_();var b={element:n};return Object.defineProperties(b,{enabled:{get:function(){return t},set:function(w){w?_():!t||(t=!1,n.removeEventListener("mousemove",a),n.removeEventListener("mousedown",y),n.removeEventListener("mouseup",u),n.removeEventListener("mouseleave",o),n.removeEventListener("mouseenter",o),n.removeEventListener("mouseout",o),n.removeEventListener("mouseover",o),n.removeEventListener("blur",p),n.removeEventListener("keyup",c),n.removeEventListener("keydown",c),n.removeEventListener("keypress",c),n!==window&&(window.removeEventListener("blur",p),window.removeEventListener("keyup",c),window.removeEventListener("keydown",c),window.removeEventListener("keypress",c)))},enumerable:!0},buttons:{get:function(){return l},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return f},enumerable:!0}}),b};var e=g("mouse-event")},{"mouse-event":249}],248:[function(g,k,x){var e={left:0,top:0};k.exports=function(n,i,l){i=i||n.currentTarget||n.srcElement,Array.isArray(l)||(l=[0,0]);var t,r=n.clientX||0,d=n.clientY||0,f=(t=i)===window||t===document||t===document.body?e:t.getBoundingClientRect();return l[0]=r-f.left,l[1]=d-f.top,l}},{}],249:[function(g,k,x){"use strict";function e(n){return n.target||n.srcElement||window}x.buttons=function(n){if("object"==typeof n){if("buttons"in n)return n.buttons;if("which"in n){if(2===(i=n.which))return 4;if(3===i)return 2;if(i>0)return 1<<i-1}else if("button"in n){var i;if(1===(i=n.button))return 4;if(2===i)return 2;if(i>=0)return 1<<i}}return 0},x.element=e,x.x=function(n){if("object"==typeof n){if("offsetX"in n)return n.offsetX;var i=e(n).getBoundingClientRect();return n.clientX-i.left}return 0},x.y=function(n){if("object"==typeof n){if("offsetY"in n)return n.offsetY;var i=e(n).getBoundingClientRect();return n.clientY-i.top}return 0}},{}],250:[function(g,k,x){"use strict";var e=g("to-px");k.exports=function(n,i,l){"function"==typeof n&&(l=!!i,i=n,n=window);var r=e("ex",n),d=function(f){l&&f.preventDefault();var t=f.deltaX||0,h=f.deltaY||0,s=f.deltaZ||0,o=1;switch(f.deltaMode){case 1:o=r;break;case 2:o=window.innerHeight}if(h*=o,s*=o,(t*=o)||h||s)return i(t,h,s,f)};return n.addEventListener("wheel",d),d}},{"to-px":304}],251:[function(g,k,x){"use strict";var e=g("typedarray-pool");k.exports=function(i){function l(o){throw new Error("ndarray-extract-contour: "+o)}"object"!=typeof i&&l("Must specify arguments");var r=i.order;Array.isArray(r)||l("Must specify order");var o,p,c,_,d=i.arrayArguments||1;d<1&&l("Must have at least one array argument"),(i.scalarArguments||0)<0&&l("Scalar arg count must be > 0"),"function"!=typeof i.vertex&&l("Must specify vertex creation function"),"function"!=typeof i.cell&&l("Must specify cell creation function"),"function"!=typeof i.phase&&l("Must specify phase function");for(var t=i.getters||[],h=new Array(d),s=0;s<d;++s)h[s]=t.indexOf(s)>=0;return o=i.vertex,p=i.cell,c=i.phase,_=[h,r].join(","),(0,n[_])(o,p,c,e.mallocUint32,e.freeUint32)};var n={"false,0,1":function(i,l,r,d,f){return function(t,h,s,o){var p,c=0|t.shape[0],a=0|t.shape[1],y=t.data,_=0|t.stride[0],b=0|t.stride[1],w=0|t.offset,T=0|-_,C=0,M=0|-b,I=0,P=-_-b|0,S=0,E=0|_,R=b-_*c|0,D=0,j=0,H=0,Y=2*c|0,X=d(Y),Z=d(Y),W=0,re=0,U=-1,B=-1,V=0,ee=0|-c,N=0|c,K=0,J=-c-1|0,te=c-1|0,ae=0,le=0,se=0;for(D=0;D<c;++D)X[W++]=r(y[w],h,s,o),w+=E;if(w+=R,a>0){if(j=1,X[W++]=r(y[w],h,s,o),w+=E,c>0)for(D=1,re=X[W]=r(p=y[w],h,s,o),K=X[W+ee],ae=X[W+J],re===(V=X[W+U])&&re===K&&re===ae||(i(D,j,p,C=y[w+T],I=y[w+M],S=y[w+P],re,V,K,ae,h,s,o),le=Z[W]=H++),W+=1,w+=E,D=2;D<c;++D)re=X[W]=r(p=y[w],h,s,o),K=X[W+ee],ae=X[W+J],re===(V=X[W+U])&&re===K&&re===ae||(i(D,j,p,C=y[w+T],I=y[w+M],S=y[w+P],re,V,K,ae,h,s,o),le=Z[W]=H++,ae!==V&&l(Z[W+U],le,S,C,ae,V,h,s,o)),W+=1,w+=E;for(w+=R,W=0,se=U,U=B,B=se,se=ee,ee=N,N=se,se=J,J=te,te=se,j=2;j<a;++j){if(X[W++]=r(y[w],h,s,o),w+=E,c>0)for(D=1,re=X[W]=r(p=y[w],h,s,o),K=X[W+ee],ae=X[W+J],re===(V=X[W+U])&&re===K&&re===ae||(i(D,j,p,C=y[w+T],I=y[w+M],S=y[w+P],re,V,K,ae,h,s,o),le=Z[W]=H++,ae!==K&&l(Z[W+ee],le,I,S,K,ae,h,s,o)),W+=1,w+=E,D=2;D<c;++D)re=X[W]=r(p=y[w],h,s,o),K=X[W+ee],ae=X[W+J],re===(V=X[W+U])&&re===K&&re===ae||(i(D,j,p,C=y[w+T],I=y[w+M],S=y[w+P],re,V,K,ae,h,s,o),le=Z[W]=H++,ae!==K&&l(Z[W+ee],le,I,S,K,ae,h,s,o),ae!==V&&l(Z[W+U],le,S,C,ae,V,h,s,o)),W+=1,w+=E;1&j&&(W=0),se=U,U=B,B=se,se=ee,ee=N,N=se,se=J,J=te,te=se,w+=R}}f(Z),f(X)}},"false,1,0":function(i,l,r,d,f){return function(t,h,s,o){var p,c=0|t.shape[0],a=0|t.shape[1],y=t.data,_=0|t.stride[0],b=0|t.stride[1],w=0|t.offset,T=0|-_,C=0,M=0|-b,I=0,P=-_-b|0,S=0,E=0|b,R=_-b*a|0,D=0,j=0,H=0,Y=2*a|0,X=d(Y),Z=d(Y),W=0,re=0,U=-1,B=-1,V=0,ee=0|-a,N=0|a,K=0,J=-a-1|0,te=a-1|0,ae=0,le=0,se=0;for(j=0;j<a;++j)X[W++]=r(y[w],h,s,o),w+=E;if(w+=R,c>0){if(D=1,X[W++]=r(y[w],h,s,o),w+=E,a>0)for(j=1,re=X[W]=r(p=y[w],h,s,o),V=X[W+U],ae=X[W+J],re===(K=X[W+ee])&&re===V&&re===ae||(i(D,j,p,C=y[w+T],I=y[w+M],S=y[w+P],re,K,V,ae,h,s,o),le=Z[W]=H++),W+=1,w+=E,j=2;j<a;++j)re=X[W]=r(p=y[w],h,s,o),V=X[W+U],ae=X[W+J],re===(K=X[W+ee])&&re===V&&re===ae||(i(D,j,p,C=y[w+T],I=y[w+M],S=y[w+P],re,K,V,ae,h,s,o),le=Z[W]=H++,ae!==V&&l(Z[W+U],le,I,S,V,ae,h,s,o)),W+=1,w+=E;for(w+=R,W=0,se=ee,ee=N,N=se,se=U,U=B,B=se,se=J,J=te,te=se,D=2;D<c;++D){if(X[W++]=r(y[w],h,s,o),w+=E,a>0)for(j=1,re=X[W]=r(p=y[w],h,s,o),V=X[W+U],ae=X[W+J],re===(K=X[W+ee])&&re===V&&re===ae||(i(D,j,p,C=y[w+T],I=y[w+M],S=y[w+P],re,K,V,ae,h,s,o),le=Z[W]=H++,ae!==K&&l(Z[W+ee],le,S,C,ae,K,h,s,o)),W+=1,w+=E,j=2;j<a;++j)re=X[W]=r(p=y[w],h,s,o),V=X[W+U],ae=X[W+J],re===(K=X[W+ee])&&re===V&&re===ae||(i(D,j,p,C=y[w+T],I=y[w+M],S=y[w+P],re,K,V,ae,h,s,o),le=Z[W]=H++,ae!==V&&l(Z[W+U],le,I,S,V,ae,h,s,o),ae!==K&&l(Z[W+ee],le,S,C,ae,K,h,s,o)),W+=1,w+=E;1&D&&(W=0),se=ee,ee=N,N=se,se=U,U=B,B=se,se=J,J=te,te=se,w+=R}}f(Z),f(X)}}}},{"typedarray-pool":308}],252:[function(g,k,x){"use strict";var e=g("dup"),n={zero:function(c,a,y,u){var _=c[0];u|=0;var b=0,w=y[0];for(b=0;b<_;++b)a[u]=0,u+=w},fdTemplate1:function(c,a,y,u,_,b,w){var T=c[0],C=y[0],M=-1*C,I=C;u|=0,w|=0;var P=0,S=C,E=b[0];for(P=0;P<T;++P)_[w]=.5*(a[u+M]-a[u+I]),u+=S,w+=E},fdTemplate2:function(c,a,y,u,_,b,w,T,C,M){var I=c[0],P=c[1],S=y[0],E=y[1],D=b[1],H=C[1],Y=-1*S,X=S,Z=-1*E,W=E;u|=0,w|=0,M|=0;var re=0,U=0,B=E,V=S-P*E,ee=D,N=b[0]-P*D,K=H,J=C[0]-P*H;for(U=0;U<I;++U){for(re=0;re<P;++re)_[w]=.5*(a[u+Y]-a[u+X]),T[M]=.5*(a[u+Z]-a[u+W]),u+=B,w+=ee,M+=K;u+=V,w+=N,M+=J}}},i={cdiff:function(c){var a={};return function(y,u,_){var b=y.dtype,w=y.order,T=u.dtype,C=u.order,M=_.dtype,I=_.order,P=[b,w.join(),T,C.join(),M,I.join()].join(),S=a[P];return S||(a[P]=S=c([b,w,T,C,M,I])),S(y.shape.slice(0),y.data,y.stride,0|y.offset,u.data,u.stride,0|u.offset,_.data,_.stride,0|_.offset)}},zero:function(c){var a={};return function(y){var u=y.dtype,_=y.order,b=[u,_.join()].join(),w=a[b];return w||(a[b]=w=c([u,_])),w(y.shape.slice(0),y.data,y.stride,0|y.offset)}},fdTemplate1:function(c){var a={};return function(y,u){var _=y.dtype,b=y.order,w=u.dtype,T=u.order,C=[_,b.join(),w,T.join()].join(),M=a[C];return M||(a[C]=M=c([_,b,w,T])),M(y.shape.slice(0),y.data,y.stride,0|y.offset,u.data,u.stride,0|u.offset)}},fdTemplate2:function(c){var a={};return function(y,u,_){var b=y.dtype,w=y.order,T=u.dtype,C=u.order,M=_.dtype,I=_.order,P=[b,w.join(),T,C.join(),M,I.join()].join(),S=a[P];return S||(a[P]=S=c([b,w,T,C,M,I])),S(y.shape.slice(0),y.data,y.stride,0|y.offset,u.data,u.stride,0|u.offset,_.data,_.stride,0|_.offset)}}};function l(c){return(0,i[c.funcName])(r.bind(void 0,c))}function r(c){return n[c.funcName]}function d(c){return l({funcName:c.funcName})}var f={},t={},h=d({funcName:"cdiff"}),s=d({funcName:"zero"});function o(c){return c in f?f[c]:f[c]=d({funcName:"fdTemplate"+c})}function p(c,a,y,u){return function(_,b){var w=b.shape.slice();return w[0]>2&&w[1]>2&&u(b.pick(-1,-1).lo(1,1).hi(w[0]-2,w[1]-2),_.pick(-1,-1,0).lo(1,1).hi(w[0]-2,w[1]-2),_.pick(-1,-1,1).lo(1,1).hi(w[0]-2,w[1]-2)),w[1]>2&&(y(b.pick(0,-1).lo(1).hi(w[1]-2),_.pick(0,-1,1).lo(1).hi(w[1]-2)),a(_.pick(0,-1,0).lo(1).hi(w[1]-2))),w[1]>2&&(y(b.pick(w[0]-1,-1).lo(1).hi(w[1]-2),_.pick(w[0]-1,-1,1).lo(1).hi(w[1]-2)),a(_.pick(w[0]-1,-1,0).lo(1).hi(w[1]-2))),w[0]>2&&(y(b.pick(-1,0).lo(1).hi(w[0]-2),_.pick(-1,0,0).lo(1).hi(w[0]-2)),a(_.pick(-1,0,1).lo(1).hi(w[0]-2))),w[0]>2&&(y(b.pick(-1,w[1]-1).lo(1).hi(w[0]-2),_.pick(-1,w[1]-1,0).lo(1).hi(w[0]-2)),a(_.pick(-1,w[1]-1,1).lo(1).hi(w[0]-2))),_.set(0,0,0,0),_.set(0,0,1,0),_.set(w[0]-1,0,0,0),_.set(w[0]-1,0,1,0),_.set(0,w[1]-1,0,0),_.set(0,w[1]-1,1,0),_.set(w[0]-1,w[1]-1,0,0),_.set(w[0]-1,w[1]-1,1,0),_}}k.exports=function(c,a,y){return Array.isArray(y)||(y=e(a.dimension,"string"==typeof y?y:"clamp")),0===a.size?c:0===a.dimension?(c.set(0),c):function(u){var _=u.join();if(C=t[_])return C;for(var b=u.length,w=[h,s],T=1;T<=b;++T)w.push(o(T));var C=p.apply(void 0,w);return t[_]=C,C}(y)(c,a)}},{dup:65}],253:[function(g,k,x){"use strict";function e(r,d){var f=Math.floor(d),t=d-f,s=0<=f+1&&f+1<r.shape[0];return(1-t)*(0<=f&&f<r.shape[0]?+r.get(f):0)+t*(s?+r.get(f+1):0)}function n(r,d,f){var t=Math.floor(d),h=d-t,s=0<=t&&t<r.shape[0],o=0<=t+1&&t+1<r.shape[0],p=Math.floor(f),c=f-p,a=0<=p&&p<r.shape[1],y=0<=p+1&&p+1<r.shape[1],u=s&&a?r.get(t,p):0,_=s&&y?r.get(t,p+1):0;return(1-c)*((1-h)*u+h*(o&&a?r.get(t+1,p):0))+c*((1-h)*_+h*(o&&y?r.get(t+1,p+1):0))}function i(r,d,f,t){var h=Math.floor(d),s=d-h,o=0<=h&&h<r.shape[0],p=0<=h+1&&h+1<r.shape[0],c=Math.floor(f),a=f-c,y=0<=c&&c<r.shape[1],u=0<=c+1&&c+1<r.shape[1],_=Math.floor(t),b=t-_,w=0<=_&&_<r.shape[2],T=0<=_+1&&_+1<r.shape[2],C=o&&y&&w?r.get(h,c,_):0,M=o&&u&&w?r.get(h,c+1,_):0,I=p&&y&&w?r.get(h+1,c,_):0,P=p&&u&&w?r.get(h+1,c+1,_):0,S=o&&y&&T?r.get(h,c,_+1):0,E=o&&u&&T?r.get(h,c+1,_+1):0;return(1-b)*((1-a)*((1-s)*C+s*I)+a*((1-s)*M+s*P))+b*((1-a)*((1-s)*S+s*(p&&y&&T?r.get(h+1,c,_+1):0))+a*((1-s)*E+s*(p&&u&&T?r.get(h+1,c+1,_+1):0)))}function l(r){var d,f,t=0|r.shape.length,h=new Array(t),s=new Array(t),o=new Array(t),p=new Array(t);for(d=0;d<t;++d)f=+arguments[d+1],h[d]=Math.floor(f),s[d]=f-h[d],o[d]=0<=h[d]&&h[d]<r.shape[d],p[d]=0<=h[d]+1&&h[d]+1<r.shape[d];var c,a,y,u=0;e:for(d=0;d<1<<t;++d){for(a=1,y=r.offset,c=0;c<t;++c)if(d&1<<c){if(!p[c])continue e;a*=s[c],y+=r.stride[c]*(h[c]+1)}else{if(!o[c])continue e;a*=1-s[c],y+=r.stride[c]*h[c]}u+=a*r.data[y]}return u}k.exports=function(r,d,f,t){switch(r.shape.length){case 0:return 0;case 1:return e(r,d);case 2:return n(r,d,f);case 3:return i(r,d,f,t);default:return l.apply(void 0,arguments)}},k.exports.d1=e,k.exports.d2=n,k.exports.d3=i},{}],254:[function(g,k,x){"use strict";var e={"float64,2,1,0":function(){return function(d,f,t,h,s){var o=d[0],p=d[1],c=d[2],y=t[1],u=t[2];h|=0;var _=0,b=0,w=0,T=u,C=y-c*u,M=t[0]-p*y;for(w=0;w<o;++w){for(b=0;b<p;++b){for(_=0;_<c;++_)f[h]/=s,h+=T;h+=C}h+=M}}},"uint8,2,0,1,float64,2,1,0":function(){return function(d,f,t,h,s,o,p,c){for(var a=d[0],y=d[1],u=d[2],_=t[0],b=t[1],w=t[2],T=o[0],C=o[1],M=o[2],I=h|=0,P=p|=0,S=0|d[0];S>0;){S<64?(a=S,S=0):(a=64,S-=64);for(var E=0|d[1];E>0;){E<64?(y=E,E=0):(y=64,E-=64),h=I+S*_+E*b,p=P+S*T+E*C;var R=0,D=0,j=0,H=w,Y=_-u*w,X=b-a*_,Z=M,W=T-u*M,re=C-a*T;for(j=0;j<y;++j){for(D=0;D<a;++D){for(R=0;R<u;++R)f[h]=s[p]*c,h+=H,p+=Z;h+=Y,p+=W}h+=X,p+=re}}}}},"float32,1,0,float32,1,0":function(){return function(d,f,t,h,s,o,p){var c=d[0],a=d[1],u=t[1],b=o[1];h|=0,p|=0;var w=0,T=0,C=u,M=t[0]-a*u,I=b,P=o[0]-a*b;for(T=0;T<c;++T){for(w=0;w<a;++w)f[h]=s[p],h+=C,p+=I;h+=M,p+=P}}},"float32,1,0,float32,0,1":function(){return function(d,f,t,h,s,o,p){for(var c=d[0],a=d[1],y=t[0],u=t[1],_=o[0],b=o[1],w=h|=0,T=p|=0,C=0|d[1];C>0;){C<64?(a=C,C=0):(a=64,C-=64);for(var M=0|d[0];M>0;){M<64?(c=M,M=0):(c=64,M-=64),h=w+C*u+M*y,p=T+C*b+M*_;var I=0,P=0,S=u,E=y-a*u,R=b,D=_-a*b;for(P=0;P<c;++P){for(I=0;I<a;++I)f[h]=s[p],h+=S,p+=R;h+=E,p+=D}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(d,f,t,h,s,o,p){for(var c=d[0],a=d[1],y=d[2],u=t[0],_=t[1],b=t[2],w=o[0],T=o[1],C=o[2],M=h|=0,I=p|=0,P=0|d[2];P>0;){P<64?(y=P,P=0):(y=64,P-=64);for(var S=0|d[0];S>0;){S<64?(c=S,S=0):(c=64,S-=64);for(var E=0|d[1];E>0;){E<64?(a=E,E=0):(a=64,E-=64),h=M+P*b+S*u+E*_,p=I+P*C+S*w+E*T;var R=0,D=0,j=0,H=b,Y=u-y*b,X=_-c*u,Z=C,W=w-y*C,re=T-c*w;for(j=0;j<a;++j){for(D=0;D<c;++D){for(R=0;R<y;++R)f[h]=s[p],h+=H,p+=Z;h+=Y,p+=W}h+=X,p+=re}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(d,f,t,h,s,o,p){var c=d[0],a=d[1],y=d[2],u=t[0],b=t[2],w=o[0],C=o[2];h|=0,p|=0;var M=0,I=0,P=0,S=b,E=u-y*b,R=t[1]-c*u,D=C,j=w-y*C,H=o[1]-c*w;for(P=0;P<a;++P){for(I=0;I<c;++I){for(M=0;M<y;++M)f[h]=s[p],h+=S,p+=D;h+=E,p+=j}h+=R,p+=H}}}},n=function(d,f){var t=f.join(",");return(0,e[t])()},i={mul:function(d){var f={};return function(t,h,s){var o=t.dtype,p=t.order,c=h.dtype,a=h.order,y=s.dtype,u=s.order,_=[o,p.join(),c,a.join(),y,u.join()].join(),b=f[_];return b||(f[_]=b=d([o,p,c,a,y,u])),b(t.shape.slice(0),t.data,t.stride,0|t.offset,h.data,h.stride,0|h.offset,s.data,s.stride,0|s.offset)}},muls:function(d){var f={};return function(t,h,s){var o=t.dtype,p=t.order,c=h.dtype,a=h.order,y=[o,p.join(),c,a.join()].join(),u=f[y];return u||(f[y]=u=d([o,p,c,a])),u(t.shape.slice(0),t.data,t.stride,0|t.offset,h.data,h.stride,0|h.offset,s)}},mulseq:function(d){var f={};return function(t,h){var s=t.dtype,o=t.order,p=[s,o.join()].join(),c=f[p];return c||(f[p]=c=d([s,o])),c(t.shape.slice(0),t.data,t.stride,0|t.offset,h)}},div:function(d){var f={};return function(t,h,s){var o=t.dtype,p=t.order,c=h.dtype,a=h.order,y=s.dtype,u=s.order,_=[o,p.join(),c,a.join(),y,u.join()].join(),b=f[_];return b||(f[_]=b=d([o,p,c,a,y,u])),b(t.shape.slice(0),t.data,t.stride,0|t.offset,h.data,h.stride,0|h.offset,s.data,s.stride,0|s.offset)}},divs:function(d){var f={};return function(t,h,s){var o=t.dtype,p=t.order,c=h.dtype,a=h.order,y=[o,p.join(),c,a.join()].join(),u=f[y];return u||(f[y]=u=d([o,p,c,a])),u(t.shape.slice(0),t.data,t.stride,0|t.offset,h.data,h.stride,0|h.offset,s)}},divseq:function(d){var f={};return function(t,h){var s=t.dtype,o=t.order,p=[s,o.join()].join(),c=f[p];return c||(f[p]=c=d([s,o])),c(t.shape.slice(0),t.data,t.stride,0|t.offset,h)}},assign:function(d){var f={};return function(t,h){var s=t.dtype,o=t.order,p=h.dtype,c=h.order,a=[s,o.join(),p,c.join()].join(),y=f[a];return y||(f[a]=y=d([s,o,p,c])),y(t.shape.slice(0),t.data,t.stride,0|t.offset,h.data,h.stride,0|h.offset)}}};function l(d){return(0,i[(f={funcName:d.funcName}).funcName])(n.bind(void 0,f));var f}var r={mul:"*",div:"/"};(function(){for(var d in r)x[d]=l({funcName:d}),x[d+"s"]=l({funcName:d+"s"}),x[d+"seq"]=l({funcName:d+"seq"})})(),x.assign=l({funcName:"assign"})},{}],255:[function(g,k,x){"use strict";var e=g("ndarray"),n=g("./doConvert.js");k.exports=function(i,l){for(var r=[],d=i,f=1;Array.isArray(d);)r.push(d.length),f*=d.length,d=d[0];return 0===r.length?e():(l||(l=e(new Float64Array(f),r)),n(l,i),l)}},{"./doConvert.js":256,ndarray:259}],256:[function(g,k,x){"use strict";var i,l;k.exports=(i=function(){return function(i,l,r,d,f){var t=i[0],h=i[1],s=i[2],p=r[1],c=r[2],a=[0,0,0];d|=0;var y=0,u=0,_=0,b=c,w=p-s*c,T=r[0]-h*p;for(_=0;_<t;++_){for(u=0;u<h;++u){for(y=0;y<s;++y){var C,M=f;for(C=0;C<a.length-1;++C)M=M[a[C]];l[d]=M[a[a.length-1]],d+=b,++a[2]}d+=w,a[2]-=s,++a[1]}d+=T,a[1]-=h,++a[0]}}}.bind(void 0,{funcName:"convert"}),l={},function(r,d){var f=r.dtype,t=r.order,h=[f,t.join()].join(),s=l[h];return s||(l[h]=s=i([f,t])),s(r.shape.slice(0),r.data,r.stride,0|r.offset,d)})},{}],257:[function(g,k,x){"use strict";var e=g("typedarray-pool");function n(d){return"uint32"===d?[e.mallocUint32,e.freeUint32]:null}var i={"uint32,1,0":function(d,f){return function(t,h,s,o,p,c,a,y,u,_,b){var w,T,C,M,I,P,S,E,R=t*p+o,D=d(y);for(w=t+1;w<=h;++w){for(T=w,C=R+=p,I=0,P=R,M=0;M<y;++M)D[I++]=s[P],P+=u;e:for(;T-- >t;){I=0,P=C-p;t:for(M=0;M<y;++M){if((S=s[P])<(E=D[I]))break e;if(S>E)break t;P+=_,I+=b}for(I=C,P=C-p,M=0;M<y;++M)s[I]=s[P],I+=u,P+=u;C-=p}for(I=C,P=0,M=0;M<y;++M)s[I]=D[P++],I+=u}f(D)}}},l={"uint32,1,0":function(d,f,t){return function h(s,o,p,c,a,y,u,_,b,w,T){var C,M,P,S,E,R,D,j,H,Y,X,Z,W,re,U,B,V,ee,N,K,J,te,ae,le,se=(o-s+1)/6|0,ve=s+se,ue=o-se,ye=s+o>>1,Me=ye-se,pe=ye+se,ge=ve,we=Me,oe=ye,de=pe,Te=ue,Ee=s+1,Ae=o-1,De=!0,Ie=0,Oe=0,Xe=0,Fe=_,Pe=f(Fe),Re=f(Fe);Y=a*ge,X=a*we,le=c;e:for(H=0;H<_;++H){if((Xe=p[R=Y+le]-p[D=X+le])>0){M=ge,ge=we,we=M;break e}if(Xe<0)break e;le+=w}Y=a*de,X=a*Te,le=c;e:for(H=0;H<_;++H){if((Xe=p[R=Y+le]-p[D=X+le])>0){M=de,de=Te,Te=M;break e}if(Xe<0)break e;le+=w}Y=a*ge,X=a*oe,le=c;e:for(H=0;H<_;++H){if((Xe=p[R=Y+le]-p[D=X+le])>0){M=ge,ge=oe,oe=M;break e}if(Xe<0)break e;le+=w}Y=a*we,X=a*oe,le=c;e:for(H=0;H<_;++H){if((Xe=p[R=Y+le]-p[D=X+le])>0){M=we,we=oe,oe=M;break e}if(Xe<0)break e;le+=w}Y=a*ge,X=a*de,le=c;e:for(H=0;H<_;++H){if((Xe=p[R=Y+le]-p[D=X+le])>0){M=ge,ge=de,de=M;break e}if(Xe<0)break e;le+=w}Y=a*oe,X=a*de,le=c;e:for(H=0;H<_;++H){if((Xe=p[R=Y+le]-p[D=X+le])>0){M=oe,oe=de,de=M;break e}if(Xe<0)break e;le+=w}Y=a*we,X=a*Te,le=c;e:for(H=0;H<_;++H){if((Xe=p[R=Y+le]-p[D=X+le])>0){M=we,we=Te,Te=M;break e}if(Xe<0)break e;le+=w}Y=a*we,X=a*oe,le=c;e:for(H=0;H<_;++H){if((Xe=p[R=Y+le]-p[D=X+le])>0){M=we,we=oe,oe=M;break e}if(Xe<0)break e;le+=w}Y=a*de,X=a*Te,le=c;e:for(H=0;H<_;++H){if((Xe=p[R=Y+le]-p[D=X+le])>0){M=de,de=Te,Te=M;break e}if(Xe<0)break e;le+=w}for(Y=a*ge,X=a*we,Z=a*oe,W=a*de,re=a*Te,U=a*ve,B=a*ye,V=a*ue,ae=0,le=c,H=0;H<_;++H)R=Y+le,j=Z+le,ee=W+le,N=re+le,K=U+le,J=B+le,te=V+le,Pe[ae]=p[D=X+le],Re[ae]=p[ee],De=De&&Pe[ae]===Re[ae],P=p[j],S=p[N],p[K]=p[R],p[J]=P,p[te]=S,++ae,le+=b;for(Y=a*Me,X=a*s,le=c,H=0;H<_;++H)p[R=Y+le]=p[D=X+le],le+=b;for(Y=a*pe,X=a*o,le=c,H=0;H<_;++H)p[R=Y+le]=p[D=X+le],le+=b;if(De)for(E=Ee;E<=Ae;++E){for(R=c+E*a,ae=0,H=0;H<_&&0==(Xe=p[R]-Pe[ae]);++H)ae+=T,R+=w;if(0!==Xe)if(Xe<0){if(E!==Ee)for(Y=a*E,X=a*Ee,le=c,H=0;H<_;++H)C=p[R=Y+le],p[R]=p[D=X+le],p[D]=C,le+=b;++Ee}else for(;;){for(R=c+Ae*a,ae=0,H=0;H<_&&0==(Xe=p[R]-Pe[ae]);++H)ae+=T,R+=w;if(!(Xe>0)){if(Xe<0){for(Y=a*E,X=a*Ee,Z=a*Ae,le=c,H=0;H<_;++H)j=Z+le,C=p[R=Y+le],p[R]=p[D=X+le],p[D]=p[j],p[j]=C,le+=b;++Ee,--Ae;break}for(Y=a*E,X=a*Ae,le=c,H=0;H<_;++H)C=p[R=Y+le],p[R]=p[D=X+le],p[D]=C,le+=b;--Ae;break}Ae--}}else for(E=Ee;E<=Ae;++E){for(R=c+E*a,ae=0,H=0;H<_&&0==(Ie=p[R]-Pe[ae]);++H)ae+=T,R+=w;if(Ie<0){if(E!==Ee)for(Y=a*E,X=a*Ee,le=c,H=0;H<_;++H)C=p[R=Y+le],p[R]=p[D=X+le],p[D]=C,le+=b;++Ee}else{for(R=c+E*a,ae=0,H=0;H<_&&0==(Oe=p[R]-Re[ae]);++H)ae+=T,R+=w;if(Oe>0)for(;;){for(R=c+Ae*a,ae=0,H=0;H<_&&0==(Xe=p[R]-Re[ae]);++H)ae+=T,R+=w;if(!(Xe>0)){for(R=c+Ae*a,ae=0,H=0;H<_&&0==(Xe=p[R]-Pe[ae]);++H)ae+=T,R+=w;if(Xe<0){for(Y=a*E,X=a*Ee,Z=a*Ae,le=c,H=0;H<_;++H)j=Z+le,C=p[R=Y+le],p[R]=p[D=X+le],p[D]=p[j],p[j]=C,le+=b;++Ee,--Ae}else{for(Y=a*E,X=a*Ae,le=c,H=0;H<_;++H)C=p[R=Y+le],p[R]=p[D=X+le],p[D]=C,le+=b;--Ae}break}if(--Ae<E)break}}}for(Y=a*s,X=a*(Ee-1),ae=0,le=c,H=0;H<_;++H)p[R=Y+le]=p[D=X+le],p[D]=Pe[ae],++ae,le+=b;for(Y=a*o,X=a*(Ae+1),ae=0,le=c,H=0;H<_;++H)p[R=Y+le]=p[D=X+le],p[D]=Re[ae],++ae,le+=b;if(Ee-2-s<=32?d(s,Ee-2,p,c,a,y,u,_,b,w,T):h(s,Ee-2,p,c,a,y,u,_,b,w,T),o-(Ae+2)<=32?d(Ae+2,o,p,c,a,y,u,_,b,w,T):h(Ae+2,o,p,c,a,y,u,_,b,w,T),De)return t(Pe),void t(Re);if(Ee<ve&&Ae>ue){e:for(;;){for(R=c+Ee*a,ae=0,le=c,H=0;H<_;++H){if(p[R]!==Pe[ae])break e;++ae,R+=b}++Ee}e:for(;;){for(R=c+Ae*a,ae=0,le=c,H=0;H<_;++H){if(p[R]!==Re[ae])break e;++ae,R+=b}--Ae}for(E=Ee;E<=Ae;++E){for(R=c+E*a,ae=0,H=0;H<_&&0==(Ie=p[R]-Pe[ae]);++H)ae+=T,R+=w;if(0===Ie){if(E!==Ee)for(Y=a*E,X=a*Ee,le=c,H=0;H<_;++H)C=p[R=Y+le],p[R]=p[D=X+le],p[D]=C,le+=b;++Ee}else{for(R=c+E*a,ae=0,H=0;H<_&&0==(Oe=p[R]-Re[ae]);++H)ae+=T,R+=w;if(0===Oe)for(;;){for(R=c+Ae*a,ae=0,H=0;H<_&&0==(Xe=p[R]-Re[ae]);++H)ae+=T,R+=w;if(0!==Xe){for(R=c+Ae*a,ae=0,H=0;H<_&&0==(Xe=p[R]-Pe[ae]);++H)ae+=T,R+=w;if(Xe<0){for(Y=a*E,X=a*Ee,Z=a*Ae,le=c,H=0;H<_;++H)j=Z+le,C=p[R=Y+le],p[R]=p[D=X+le],p[D]=p[j],p[j]=C,le+=b;++Ee,--Ae}else{for(Y=a*E,X=a*Ae,le=c,H=0;H<_;++H)C=p[R=Y+le],p[R]=p[D=X+le],p[D]=C,le+=b;--Ae}break}if(--Ae<E)break}}}}t(Pe),t(Re),Ae-Ee<=32?d(Ee,Ae,p,c,a,y,u,_,b,w,T):h(Ee,Ae,p,c,a,y,u,_,b,w,T)}}},r={"uint32,1,0":function(d,f){return function(t){var h=t.data,s=0|t.offset,o=t.shape,p=t.stride,c=0|p[0],a=0|o[0],y=0|p[1],u=0|o[1],_=y,b=y;a<=32?d(0,a-1,h,s,c,y,a,u,_,b,1):f(0,a-1,h,s,c,y,a,u,_,b,1)}}};k.exports=function(d,f){var p,c,a,y,u,t=[f,d].join(","),h=r[t],s=(p=d,a=n(c=f),y=[c,p].join(","),u=i[y],a?u(a[0],a[1]):u()),o=function(p,c,a){var y=n(c),u=[c,p].join(","),_=l[u];return p.length>1&&y?_(a,y[0],y[1]):_(a)}(d,f,s);return h(s,o)}},{"typedarray-pool":308}],258:[function(g,k,x){"use strict";var e=g("./lib/compile_sort.js"),n={};k.exports=function(i){var l=i.order,r=i.dtype,d=[l,r].join(":"),f=n[d];return f||(n[d]=f=e(l,r)),f(i),i}},{"./lib/compile_sort.js":257}],259:[function(g,k,x){var e=g("is-buffer"),n=typeof Float64Array<"u";function i(t,h){return t[0]-h[0]}function l(){var t,h=this.stride,s=new Array(h.length);for(t=0;t<s.length;++t)s[t]=[Math.abs(h[t]),t];s.sort(i);var o=new Array(s.length);for(t=0;t<o.length;++t)o[t]=s[t][1];return o}var r={T:function(t){function h(o){this.data=o}var s=h.prototype;return s.dtype=t,s.index=function(){return-1},s.size=0,s.dimension=-1,s.shape=s.stride=s.order=[],s.lo=s.hi=s.transpose=s.step=function(){return new h(this.data)},s.get=s.set=function(){},s.pick=function(){return null},function(o){return new h(o)}},0:function(t,h){function s(p,c){this.data=p,this.offset=c}var o=s.prototype;return o.dtype=t,o.index=function(){return this.offset},o.dimension=0,o.size=1,o.shape=o.stride=o.order=[],o.lo=o.hi=o.transpose=o.step=function(){return new s(this.data,this.offset)},o.pick=function(){return h(this.data)},o.valueOf=o.get=function(){return"generic"===t?this.data.get(this.offset):this.data[this.offset]},o.set=function(p){return"generic"===t?this.data.set(this.offset,p):this.data[this.offset]=p},function(p,c,a,y){return new s(p,y)}},1:function(t,h,s){function o(c,a,y,u){this.data=c,this.shape=[a],this.stride=[y],this.offset=0|u}var p=o.prototype;return p.dtype=t,p.dimension=1,Object.defineProperty(p,"size",{get:function(){return this.shape[0]}}),p.order=[0],p.set=function(c,a){return"generic"===t?this.data.set(this.offset+this.stride[0]*c,a):this.data[this.offset+this.stride[0]*c]=a},p.get=function(c){return"generic"===t?this.data.get(this.offset+this.stride[0]*c):this.data[this.offset+this.stride[0]*c]},p.index=function(c){return this.offset+this.stride[0]*c},p.hi=function(c){return new o(this.data,"number"!=typeof c||c<0?this.shape[0]:0|c,this.stride[0],this.offset)},p.lo=function(c){var a=this.offset,y=0,u=this.shape[0],_=this.stride[0];return"number"==typeof c&&c>=0&&(a+=_*(y=0|c),u-=y),new o(this.data,u,_,a)},p.step=function(c){var a=this.shape[0],y=this.stride[0],u=this.offset,_=0,b=Math.ceil;return"number"==typeof c&&((_=0|c)<0?(u+=y*(a-1),a=b(-a/_)):a=b(a/_),y*=_),new o(this.data,a,y,u)},p.transpose=function(c){return new o(this.data,this.shape[c=void 0===c?0:0|c],this.stride[c],this.offset)},p.pick=function(c){var a=[],y=[],u=this.offset;return"number"==typeof c&&c>=0?u=u+this.stride[0]*c|0:(a.push(this.shape[0]),y.push(this.stride[0])),(0,h[a.length+1])(this.data,a,y,u)},function(c,a,y,u){return new o(c,a[0],y[0],u)}},2:function(t,h,s){function o(c,a,y,u,_,b){this.data=c,this.shape=[a,y],this.stride=[u,_],this.offset=0|b}var p=o.prototype;return p.dtype=t,p.dimension=2,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(p,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),p.set=function(c,a,y){return"generic"===t?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*a,y):this.data[this.offset+this.stride[0]*c+this.stride[1]*a]=y},p.get=function(c,a){return"generic"===t?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*a):this.data[this.offset+this.stride[0]*c+this.stride[1]*a]},p.index=function(c,a){return this.offset+this.stride[0]*c+this.stride[1]*a},p.hi=function(c,a){return new o(this.data,"number"!=typeof c||c<0?this.shape[0]:0|c,"number"!=typeof a||a<0?this.shape[1]:0|a,this.stride[0],this.stride[1],this.offset)},p.lo=function(c,a){var y=this.offset,u=0,_=this.shape[0],b=this.shape[1],w=this.stride[0],T=this.stride[1];return"number"==typeof c&&c>=0&&(y+=w*(u=0|c),_-=u),"number"==typeof a&&a>=0&&(y+=T*(u=0|a),b-=u),new o(this.data,_,b,w,T,y)},p.step=function(c,a){var y=this.shape[0],u=this.shape[1],_=this.stride[0],b=this.stride[1],w=this.offset,T=0,C=Math.ceil;return"number"==typeof c&&((T=0|c)<0?(w+=_*(y-1),y=C(-y/T)):y=C(y/T),_*=T),"number"==typeof a&&((T=0|a)<0?(w+=b*(u-1),u=C(-u/T)):u=C(u/T),b*=T),new o(this.data,y,u,_,b,w)},p.transpose=function(c,a){var y=this.shape,u=this.stride;return new o(this.data,y[c=void 0===c?0:0|c],y[a=void 0===a?1:0|a],u[c],u[a],this.offset)},p.pick=function(c,a){var y=[],u=[],_=this.offset;return"number"==typeof c&&c>=0?_=_+this.stride[0]*c|0:(y.push(this.shape[0]),u.push(this.stride[0])),"number"==typeof a&&a>=0?_=_+this.stride[1]*a|0:(y.push(this.shape[1]),u.push(this.stride[1])),(0,h[y.length+1])(this.data,y,u,_)},function(c,a,y,u){return new o(c,a[0],a[1],y[0],y[1],u)}},3:function(t,h,s){function o(c,a,y,u,_,b,w,T){this.data=c,this.shape=[a,y,u],this.stride=[_,b,w],this.offset=0|T}var p=o.prototype;return p.dtype=t,p.dimension=3,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(p,"order",{get:function(){var c=Math.abs(this.stride[0]),a=Math.abs(this.stride[1]),y=Math.abs(this.stride[2]);return c>a?a>y?[2,1,0]:c>y?[1,2,0]:[1,0,2]:c>y?[2,0,1]:y>a?[0,1,2]:[0,2,1]}}),p.set=function(c,a,y,u){return"generic"===t?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y,u):this.data[this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y]=u},p.get=function(c,a,y){return"generic"===t?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y):this.data[this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y]},p.index=function(c,a,y){return this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y},p.hi=function(c,a,y){return new o(this.data,"number"!=typeof c||c<0?this.shape[0]:0|c,"number"!=typeof a||a<0?this.shape[1]:0|a,"number"!=typeof y||y<0?this.shape[2]:0|y,this.stride[0],this.stride[1],this.stride[2],this.offset)},p.lo=function(c,a,y){var u=this.offset,_=0,b=this.shape[0],w=this.shape[1],T=this.shape[2],C=this.stride[0],M=this.stride[1],I=this.stride[2];return"number"==typeof c&&c>=0&&(u+=C*(_=0|c),b-=_),"number"==typeof a&&a>=0&&(u+=M*(_=0|a),w-=_),"number"==typeof y&&y>=0&&(u+=I*(_=0|y),T-=_),new o(this.data,b,w,T,C,M,I,u)},p.step=function(c,a,y){var u=this.shape[0],_=this.shape[1],b=this.shape[2],w=this.stride[0],T=this.stride[1],C=this.stride[2],M=this.offset,I=0,P=Math.ceil;return"number"==typeof c&&((I=0|c)<0?(M+=w*(u-1),u=P(-u/I)):u=P(u/I),w*=I),"number"==typeof a&&((I=0|a)<0?(M+=T*(_-1),_=P(-_/I)):_=P(_/I),T*=I),"number"==typeof y&&((I=0|y)<0?(M+=C*(b-1),b=P(-b/I)):b=P(b/I),C*=I),new o(this.data,u,_,b,w,T,C,M)},p.transpose=function(c,a,y){var u=this.shape,_=this.stride;return new o(this.data,u[c=void 0===c?0:0|c],u[a=void 0===a?1:0|a],u[y=void 0===y?2:0|y],_[c],_[a],_[y],this.offset)},p.pick=function(c,a,y){var u=[],_=[],b=this.offset;return"number"==typeof c&&c>=0?b=b+this.stride[0]*c|0:(u.push(this.shape[0]),_.push(this.stride[0])),"number"==typeof a&&a>=0?b=b+this.stride[1]*a|0:(u.push(this.shape[1]),_.push(this.stride[1])),"number"==typeof y&&y>=0?b=b+this.stride[2]*y|0:(u.push(this.shape[2]),_.push(this.stride[2])),(0,h[u.length+1])(this.data,u,_,b)},function(c,a,y,u){return new o(c,a[0],a[1],a[2],y[0],y[1],y[2],u)}},4:function(t,h,s){function o(c,a,y,u,_,b,w,T,C,M){this.data=c,this.shape=[a,y,u,_],this.stride=[b,w,T,C],this.offset=0|M}var p=o.prototype;return p.dtype=t,p.dimension=4,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(p,"order",{get:s}),p.set=function(c,a,y,u,_){return"generic"===t?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y+this.stride[3]*u,_):this.data[this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y+this.stride[3]*u]=_},p.get=function(c,a,y,u){return"generic"===t?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y+this.stride[3]*u):this.data[this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y+this.stride[3]*u]},p.index=function(c,a,y,u){return this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y+this.stride[3]*u},p.hi=function(c,a,y,u){return new o(this.data,"number"!=typeof c||c<0?this.shape[0]:0|c,"number"!=typeof a||a<0?this.shape[1]:0|a,"number"!=typeof y||y<0?this.shape[2]:0|y,"number"!=typeof u||u<0?this.shape[3]:0|u,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},p.lo=function(c,a,y,u){var _=this.offset,b=0,w=this.shape[0],T=this.shape[1],C=this.shape[2],M=this.shape[3],I=this.stride[0],P=this.stride[1],S=this.stride[2],E=this.stride[3];return"number"==typeof c&&c>=0&&(_+=I*(b=0|c),w-=b),"number"==typeof a&&a>=0&&(_+=P*(b=0|a),T-=b),"number"==typeof y&&y>=0&&(_+=S*(b=0|y),C-=b),"number"==typeof u&&u>=0&&(_+=E*(b=0|u),M-=b),new o(this.data,w,T,C,M,I,P,S,E,_)},p.step=function(c,a,y,u){var _=this.shape[0],b=this.shape[1],w=this.shape[2],T=this.shape[3],C=this.stride[0],M=this.stride[1],I=this.stride[2],P=this.stride[3],S=this.offset,E=0,R=Math.ceil;return"number"==typeof c&&((E=0|c)<0?(S+=C*(_-1),_=R(-_/E)):_=R(_/E),C*=E),"number"==typeof a&&((E=0|a)<0?(S+=M*(b-1),b=R(-b/E)):b=R(b/E),M*=E),"number"==typeof y&&((E=0|y)<0?(S+=I*(w-1),w=R(-w/E)):w=R(w/E),I*=E),"number"==typeof u&&((E=0|u)<0?(S+=P*(T-1),T=R(-T/E)):T=R(T/E),P*=E),new o(this.data,_,b,w,T,C,M,I,P,S)},p.transpose=function(c,a,y,u){var _=this.shape,b=this.stride;return new o(this.data,_[c=void 0===c?0:0|c],_[a=void 0===a?1:0|a],_[y=void 0===y?2:0|y],_[u=void 0===u?3:0|u],b[c],b[a],b[y],b[u],this.offset)},p.pick=function(c,a,y,u){var _=[],b=[],w=this.offset;return"number"==typeof c&&c>=0?w=w+this.stride[0]*c|0:(_.push(this.shape[0]),b.push(this.stride[0])),"number"==typeof a&&a>=0?w=w+this.stride[1]*a|0:(_.push(this.shape[1]),b.push(this.stride[1])),"number"==typeof y&&y>=0?w=w+this.stride[2]*y|0:(_.push(this.shape[2]),b.push(this.stride[2])),"number"==typeof u&&u>=0?w=w+this.stride[3]*u|0:(_.push(this.shape[3]),b.push(this.stride[3])),(0,h[_.length+1])(this.data,_,b,w)},function(c,a,y,u){return new o(c,a[0],a[1],a[2],a[3],y[0],y[1],y[2],y[3],u)}},5:function(t,h,s){function o(c,a,y,u,_,b,w,T,C,M,I,P){this.data=c,this.shape=[a,y,u,_,b],this.stride=[w,T,C,M,I],this.offset=0|P}var p=o.prototype;return p.dtype=t,p.dimension=5,Object.defineProperty(p,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(p,"order",{get:s}),p.set=function(c,a,y,u,_,b){return"generic"===t?this.data.set(this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y+this.stride[3]*u+this.stride[4]*_,b):this.data[this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y+this.stride[3]*u+this.stride[4]*_]=b},p.get=function(c,a,y,u,_){return"generic"===t?this.data.get(this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y+this.stride[3]*u+this.stride[4]*_):this.data[this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y+this.stride[3]*u+this.stride[4]*_]},p.index=function(c,a,y,u,_){return this.offset+this.stride[0]*c+this.stride[1]*a+this.stride[2]*y+this.stride[3]*u+this.stride[4]*_},p.hi=function(c,a,y,u,_){return new o(this.data,"number"!=typeof c||c<0?this.shape[0]:0|c,"number"!=typeof a||a<0?this.shape[1]:0|a,"number"!=typeof y||y<0?this.shape[2]:0|y,"number"!=typeof u||u<0?this.shape[3]:0|u,"number"!=typeof _||_<0?this.shape[4]:0|_,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},p.lo=function(c,a,y,u,_){var b=this.offset,w=0,T=this.shape[0],C=this.shape[1],M=this.shape[2],I=this.shape[3],P=this.shape[4],S=this.stride[0],E=this.stride[1],R=this.stride[2],D=this.stride[3],j=this.stride[4];return"number"==typeof c&&c>=0&&(b+=S*(w=0|c),T-=w),"number"==typeof a&&a>=0&&(b+=E*(w=0|a),C-=w),"number"==typeof y&&y>=0&&(b+=R*(w=0|y),M-=w),"number"==typeof u&&u>=0&&(b+=D*(w=0|u),I-=w),"number"==typeof _&&_>=0&&(b+=j*(w=0|_),P-=w),new o(this.data,T,C,M,I,P,S,E,R,D,j,b)},p.step=function(c,a,y,u,_){var b=this.shape[0],w=this.shape[1],T=this.shape[2],C=this.shape[3],M=this.shape[4],I=this.stride[0],P=this.stride[1],S=this.stride[2],E=this.stride[3],R=this.stride[4],D=this.offset,j=0,H=Math.ceil;return"number"==typeof c&&((j=0|c)<0?(D+=I*(b-1),b=H(-b/j)):b=H(b/j),I*=j),"number"==typeof a&&((j=0|a)<0?(D+=P*(w-1),w=H(-w/j)):w=H(w/j),P*=j),"number"==typeof y&&((j=0|y)<0?(D+=S*(T-1),T=H(-T/j)):T=H(T/j),S*=j),"number"==typeof u&&((j=0|u)<0?(D+=E*(C-1),C=H(-C/j)):C=H(C/j),E*=j),"number"==typeof _&&((j=0|_)<0?(D+=R*(M-1),M=H(-M/j)):M=H(M/j),R*=j),new o(this.data,b,w,T,C,M,I,P,S,E,R,D)},p.transpose=function(c,a,y,u,_){var b=this.shape,w=this.stride;return new o(this.data,b[c=void 0===c?0:0|c],b[a=void 0===a?1:0|a],b[y=void 0===y?2:0|y],b[u=void 0===u?3:0|u],b[_=void 0===_?4:0|_],w[c],w[a],w[y],w[u],w[_],this.offset)},p.pick=function(c,a,y,u,_){var b=[],w=[],T=this.offset;return"number"==typeof c&&c>=0?T=T+this.stride[0]*c|0:(b.push(this.shape[0]),w.push(this.stride[0])),"number"==typeof a&&a>=0?T=T+this.stride[1]*a|0:(b.push(this.shape[1]),w.push(this.stride[1])),"number"==typeof y&&y>=0?T=T+this.stride[2]*y|0:(b.push(this.shape[2]),w.push(this.stride[2])),"number"==typeof u&&u>=0?T=T+this.stride[3]*u|0:(b.push(this.shape[3]),w.push(this.stride[3])),"number"==typeof _&&_>=0?T=T+this.stride[4]*_|0:(b.push(this.shape[4]),w.push(this.stride[4])),(0,h[b.length+1])(this.data,b,w,T)},function(c,a,y,u){return new o(c,a[0],a[1],a[2],a[3],a[4],y[0],y[1],y[2],y[3],y[4],u)}}};function d(t,h){var s=-1===h?"T":String(h),o=r[s];return-1===h?o(t):0===h?o(t,f[t][0]):o(t,f[t],l)}var f={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};k.exports=function(t,h,s,o){if(void 0===t)return(0,f.array[0])([]);"number"==typeof t&&(t=[t]),void 0===h&&(h=[t.length]);var p=h.length;if(void 0===s){s=new Array(p);for(var c=p-1,a=1;c>=0;--c)s[c]=a,a*=h[c]}if(void 0===o)for(o=0,c=0;c<p;++c)s[c]<0&&(o-=(h[c]-1)*s[c]);for(var y=function(_){if(e(_))return"buffer";if(n)switch(Object.prototype.toString.call(_)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(_)?"array":"generic"}(t),u=f[y];u.length<=p+1;)u.push(d(y,u.length-1));return(0,u[p+1])(t,h,s,o)}},{"is-buffer":237}],260:[function(g,k,x){"use strict";var e=g("double-bits"),n=Math.pow(2,-1074);k.exports=function(i,l){if(isNaN(i)||isNaN(l))return NaN;if(i===l)return i;if(0===i)return l<0?-n:n;var r=e.hi(i),d=e.lo(i);return l>i==i>0?d===-1>>>0?(r+=1,d=0):d+=1:0===d?(d=-1>>>0,r-=1):d-=1,e.pack(d,r)}},{"double-bits":64}],261:[function(g,k,x){x.vertexNormals=function(e,n,i){for(var l=n.length,r=new Array(l),d=void 0===i?1e-6:i,f=0;f<l;++f)r[f]=[0,0,0];for(f=0;f<e.length;++f)for(var t=e[f],s=t[t.length-1],o=t[0],p=0;p<t.length;++p){for(var c=n[s],a=n[s=o],y=n[o=t[(p+1)%t.length]],u=new Array(3),_=0,b=new Array(3),w=0,T=0;T<3;++T)u[T]=c[T]-a[T],_+=u[T]*u[T],b[T]=y[T]-a[T],w+=b[T]*b[T];if(_*w>d){var C=r[s],M=1/Math.sqrt(_*w);for(T=0;T<3;++T){var I=(T+1)%3,P=(T+2)%3;C[T]+=M*(b[I]*u[P]-b[P]*u[I])}}}for(f=0;f<l;++f){C=r[f];var S=0;for(T=0;T<3;++T)S+=C[T]*C[T];if(S>d)for(M=1/Math.sqrt(S),T=0;T<3;++T)C[T]*=M;else for(T=0;T<3;++T)C[T]=0}return r},x.faceNormals=function(e,n,i){for(var l=e.length,r=new Array(l),d=void 0===i?1e-6:i,f=0;f<l;++f){for(var t=e[f],h=new Array(3),s=0;s<3;++s)h[s]=n[t[s]];var o=new Array(3),p=new Array(3);for(s=0;s<3;++s)o[s]=h[1][s]-h[0][s],p[s]=h[2][s]-h[0][s];var c=new Array(3),a=0;for(s=0;s<3;++s){var y=(s+1)%3,u=(s+2)%3;c[s]=o[y]*p[u]-o[u]*p[y],a+=c[s]*c[s]}for(a=a>d?1/Math.sqrt(a):0,s=0;s<3;++s)c[s]*=a;r[f]=c}return r}},{}],262:[function(g,k,x){"use strict";k.exports=function(e,n,i,l,r,d,f,t,h,s){var o=n+d+s;if(p>0){var p=Math.sqrt(o+1);e[0]=.5*(f-h)/p,e[1]=.5*(t-l)/p,e[2]=.5*(i-d)/p,e[3]=.5*p}else{var c=Math.max(n,d,s);p=Math.sqrt(2*c-o+1),n>=c?(e[0]=.5*p,e[1]=.5*(r+i)/p,e[2]=.5*(t+l)/p,e[3]=.5*(f-h)/p):d>=c?(e[0]=.5*(i+r)/p,e[1]=.5*p,e[2]=.5*(h+f)/p,e[3]=.5*(t-l)/p):(e[0]=.5*(l+t)/p,e[1]=.5*(f+h)/p,e[2]=.5*p,e[3]=.5*(i-r)/p)}return e}},{}],263:[function(g,k,x){"use strict";k.exports=function(o){var p=(o=o||{}).center||[0,0,0],c=o.rotation||[0,0,0,1],a=o.radius||1;p=[].slice.call(p,0,3),t(c=[].slice.call(c,0,4),c);var y=new h(c,p,Math.log(a));return y.setDistanceLimits(o.zoomMin,o.zoomMax),("eye"in o||"up"in o)&&y.lookAt(0,o.eye,o.center,o.up),y};var e=g("filtered-vector"),n=g("gl-mat4/lookAt"),i=g("gl-mat4/fromQuat"),l=g("gl-mat4/invert"),r=g("./lib/quatFromFrame");function d(o,p,c){return Math.sqrt(Math.pow(o,2)+Math.pow(p,2)+Math.pow(c,2))}function f(o,p,c,a){return Math.sqrt(Math.pow(o,2)+Math.pow(p,2)+Math.pow(c,2)+Math.pow(a,2))}function t(o,p){var c=p[0],a=p[1],y=p[2],u=p[3],_=f(c,a,y,u);_>1e-6?(o[0]=c/_,o[1]=a/_,o[2]=y/_,o[3]=u/_):(o[0]=o[1]=o[2]=0,o[3]=1)}function h(o,p,c){this.radius=e([c]),this.center=e(p),this.rotation=e(o),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var s=h.prototype;s.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},s.recalcMatrix=function(o){this.radius.curve(o),this.center.curve(o),this.rotation.curve(o);var p=this.computedRotation;t(p,p);var c=this.computedMatrix;i(c,p);var a=this.computedCenter,y=this.computedEye,u=this.computedUp,_=Math.exp(this.computedRadius[0]);y[0]=a[0]+_*c[2],y[1]=a[1]+_*c[6],y[2]=a[2]+_*c[10],u[0]=c[1],u[1]=c[5],u[2]=c[9];for(var b=0;b<3;++b){for(var w=0,T=0;T<3;++T)w+=c[b+4*T]*y[T];c[12+b]=-w}},s.getMatrix=function(o,p){this.recalcMatrix(o);var c=this.computedMatrix;if(p){for(var a=0;a<16;++a)p[a]=c[a];return p}return c},s.idle=function(o){this.center.idle(o),this.radius.idle(o),this.rotation.idle(o)},s.flush=function(o){this.center.flush(o),this.radius.flush(o),this.rotation.flush(o)},s.pan=function(o,p,c,a){p=p||0,c=c||0,a=a||0,this.recalcMatrix(o);var y=this.computedMatrix,u=y[1],_=y[5],b=y[9],w=d(u,_,b),T=y[0],C=y[4],M=y[8],I=T*(u/=w)+C*(_/=w)+M*(b/=w),P=d(T-=u*I,C-=_*I,M-=b*I),S=y[2],E=y[6],R=y[10],D=S*u+E*_+R*b,j=S*(T/=P)+E*(C/=P)+R*(M/=P),H=d(S-=D*u+j*T,E-=D*_+j*C,R-=D*b+j*M);S/=H,E/=H,R/=H,this.center.move(o,T*p+u*c,C*p+_*c,M*p+b*c);var W=Math.exp(this.computedRadius[0]);W=Math.max(1e-4,W+a),this.radius.set(o,Math.log(W))},s.rotate=function(o,p,c,a){this.recalcMatrix(o);var y=this.computedMatrix,M=y[2],I=y[6],P=y[10],S=(p=p||0)*y[0]+(c=c||0)*y[1],E=p*y[4]+c*y[5],R=p*y[8]+c*y[9],D=-(I*R-P*E),j=-(P*S-M*R),H=-(M*E-I*S),Y=Math.sqrt(Math.max(0,1-Math.pow(D,2)-Math.pow(j,2)-Math.pow(H,2))),X=f(D,j,H,Y);X>1e-6?(D/=X,j/=X,H/=X,Y/=X):(D=j=H=0,Y=1);var Z=this.computedRotation,W=Z[0],re=Z[1],U=Z[2],B=Z[3],V=W*Y+B*D+re*H-U*j,ee=re*Y+B*j+U*D-W*H,N=U*Y+B*H+W*j-re*D,K=B*Y-W*D-re*j-U*H;if(a){D=M,j=I,H=P;var J=Math.sin(a)/d(D,j,H);D*=J,j*=J,H*=J,K=K*(Y=Math.cos(p))-(V=V*Y+K*D+ee*H-N*j)*D-(ee=ee*Y+K*j+N*D-V*H)*j-(N=N*Y+K*H+V*j-ee*D)*H}var te=f(V,ee,N,K);te>1e-6?(V/=te,ee/=te,N/=te,K/=te):(V=ee=N=0,K=1),this.rotation.set(o,V,ee,N,K)},s.lookAt=function(o,p,c,a){this.recalcMatrix(o);var y=this.computedMatrix;n(y,p=p||this.computedEye,c=c||this.computedCenter,a=a||this.computedUp);var u=this.computedRotation;r(u,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),t(u,u),this.rotation.set(o,u[0],u[1],u[2],u[3]);for(var _=0,b=0;b<3;++b)_+=Math.pow(c[b]-p[b],2);this.radius.set(o,.5*Math.log(Math.max(_,1e-6))),this.center.set(o,c[0],c[1],c[2])},s.translate=function(o,p,c,a){this.center.move(o,p||0,c||0,a||0)},s.setMatrix=function(o,p){var c=this.computedRotation;r(c,p[0],p[1],p[2],p[4],p[5],p[6],p[8],p[9],p[10]),t(c,c),this.rotation.set(o,c[0],c[1],c[2],c[3]);var a=this.computedMatrix;l(a,p);var y=a[15];if(Math.abs(y)>1e-6){var u=a[12]/y,_=a[13]/y,b=a[14]/y;this.recalcMatrix(o);var w=Math.exp(this.computedRadius[0]);this.center.set(o,u-a[2]*w,_-a[6]*w,b-a[10]*w),this.radius.idle(o)}else this.center.idle(o),this.radius.idle(o)},s.setDistance=function(o,p){p>0&&this.radius.set(o,Math.log(p))},s.setDistanceLimits=function(o,p){o=o>0?Math.log(o):-1/0,p=p>0?Math.log(p):1/0,p=Math.max(p,o),this.radius.bounds[0][0]=o,this.radius.bounds[1][0]=p},s.getDistanceLimits=function(o){var p=this.radius.bounds;return o?(o[0]=Math.exp(p[0][0]),o[1]=Math.exp(p[1][0]),o):[Math.exp(p[0][0]),Math.exp(p[1][0])]},s.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},s.fromJSON=function(o){var p=this.lastT(),c=o.center;c&&this.center.set(p,c[0],c[1],c[2]);var a=o.rotation;a&&this.rotation.set(p,a[0],a[1],a[2],a[3]);var y=o.distance;y&&y>0&&this.radius.set(p,Math.log(y)),this.setDistanceLimits(o.zoomMin,o.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(g,k,x){"use strict";var e=g("repeat-string");k.exports=function(n,i,l){return e(l=void 0!==l?l+"":" ",i)+n}},{"repeat-string":277}],265:[function(g,k,x){k.exports=function(e,n){n||(n=[0,""]),e=String(e);var i=parseFloat(e,10);return n[0]=i,n[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}},{}],266:[function(g,k,x){"use strict";k.exports=function(n,i){for(var l=0|i.length,r=n.length,d=[new Array(l),new Array(l)],f=0;f<l;++f)d[0][f]=[],d[1][f]=[];for(f=0;f<r;++f){var t=n[f];d[0][t[0]].push(t),d[1][t[1]].push(t)}var b,h=[];for(f=0;f<l;++f)d[0][f].length+d[1][f].length===0&&h.push([f]);function s(_,b){var w=d[b][_[b]];w.splice(w.indexOf(_),1)}function o(_,b,w){for(var T,C,M,I=0;I<2;++I)if(d[I][b].length>0){T=d[I][b][0],M=I;break}C=T[1^M];for(var P=0;P<2;++P)for(var S=d[P][b],E=0;E<S.length;++E){var R=S[E],D=R[1^P];e(i[_],i[b],i[C],i[D])>0&&(T=R,C=D,M=P)}return w||T&&s(T,M),C}function p(_,b){var w=d[b][_][0],T=[_];s(w,b);for(var C=w[1^b];;){for(;C!==_;)T.push(C),C=o(T[T.length-2],C,!1);if(d[0][_].length+d[1][_].length===0)break;var M=T[T.length-1],I=_,P=T[1],S=o(M,I,!0);if(e(i[M],i[I],i[P],i[S])<0)break;T.push(_),C=o(M,I)}return T}for(f=0;f<l;++f)for(var a=0;a<2;++a){for(var y=[];d[a][f].length>0;){var u=p(f,a);(b=u)[1]===b[b.length-1]?y.push.apply(y,u):(y.length>0&&h.push(y),y=u)}y.length>0&&h.push(y)}return h};var e=g("compare-angle")},{"compare-angle":54}],267:[function(g,k,x){"use strict";k.exports=function(n,i){for(var l=e(n,i.length),r=new Array(i.length),d=new Array(i.length),f=[],t=0;t<i.length;++t){var h=l[t].length;d[t]=h,r[t]=!0,h<=1&&f.push(t)}for(;f.length>0;){var s=f.pop();r[s]=!1;var o=l[s];for(t=0;t<o.length;++t){var p=o[t];0==--d[p]&&f.push(p)}}var c=new Array(i.length),a=[];for(t=0;t<i.length;++t)r[t]?(c[t]=s=a.length,a.push(i[t])):c[t]=-1;var y=[];for(t=0;t<n.length;++t){var u=n[t];r[u[0]]&&r[u[1]]&&y.push([c[u[0]],c[u[1]]])}return[y,a]};var e=g("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(g,k,x){"use strict";k.exports=function(h,s){for(var o=f(h,s),p=(s=o[1]).length,c=e(h=o[0],s.length),a=0;a<p;++a)if(c[a].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var y=n(h,s),u=(y=y.filter(function(se){for(var ve=se.length,ue=[0],ye=0;ye<ve;++ye){var Me=s[se[ye]],pe=s[se[(ye+1)%ve]],ge=l(-Me[0],Me[1]),we=l(-Me[0],pe[1]),oe=l(pe[0],Me[1]),de=l(pe[0],pe[1]);ue=r(ue,r(r(ge,we),r(oe,de)))}return ue[ue.length-1]>0})).length,_=new Array(u),b=new Array(u);for(a=0;a<u;++a){_[a]=a;var w=new Array(u),T=y[a].map(function(se){return s[se]}),C=i([T]),M=0;e:for(var I=0;I<u;++I)if(w[I]=0,a!==I){for(var P=(ae=y[I]).length,S=0;S<P;++S){var E=C(s[ae[S]]);if(0!==E){E<0&&(w[I]=1,M+=1);continue e}}w[I]=1,M+=1}b[a]=[M,a,w]}for(b.sort(function(se,ve){return ve[0]-se[0]}),a=0;a<u;++a){var R=(w=b[a])[1],D=w[2];for(I=0;I<u;++I)D[I]&&(_[I]=R)}var j=function(se){for(var ve=new Array(se),ue=0;ue<se;++ue)ve[ue]=[];return ve}(u);for(a=0;a<u;++a)j[a].push(_[a]),j[_[a]].push(a);var H={},Y=t(p,!1);for(a=0;a<u;++a)for(P=(ae=y[a]).length,I=0;I<P;++I){var X=ae[I],Z=ae[(I+1)%P],W=Math.min(X,Z)+":"+Math.max(X,Z);if(W in H){var re=H[W];j[re].push(a),j[a].push(re),Y[X]=Y[Z]=!0}else H[W]=a}function U(se){for(var ve=se.length,ue=0;ue<ve;++ue)if(!Y[se[ue]])return!1;return!0}var B=[],V=t(u,-1);for(a=0;a<u;++a)_[a]!==a||U(y[a])?V[a]=-1:(B.push(a),V[a]=0);for(o=[];B.length>0;){var ee=B.pop(),N=j[ee];d(N,function(se,ve){return se-ve});var K,J=N.length,te=V[ee];if(0===te){var ae=y[ee];K=[ae]}for(a=0;a<J;++a){var le=N[a];V[le]>=0||(V[le]=1^te,B.push(le),0===te&&(U(ae=y[le])||(ae.reverse(),K.push(ae))))}0===te&&o.push(K)}return o};var e=g("edges-to-adjacency-list"),n=g("planar-dual"),i=g("point-in-big-polygon"),l=g("two-product"),r=g("robust-sum"),d=g("uniq"),f=g("./lib/trim-leaves");function t(h,s){for(var o=new Array(h),p=0;p<h;++p)o[p]=s;return o}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(g,k,x){k.exports=function(t){for(var h=t.length,s=[],o=[],p=0;p<h;++p)for(var c=t[p],a=c.length,y=a-1,u=0;u<a;y=u++){var _=c[y],b=c[u];_[0]===b[0]?o.push([_,b]):s.push([_,b])}if(0===s.length)return 0===o.length?f:(w=d(o),function(M){return w(M[0],M[1])?0:1});var w,M,I,T=n(s),C=(M=T.slabs,I=T.coordinates,function(P){var S=l.le(I,P[0]);if(S<0)return 1;var E=M[S];if(!E){if(!(S>0&&I[S]===P[0]))return 1;E=M[S-1]}for(var R=1;E;){var D=E.key,j=e(P,D[0],D[1]);if(D[0][0]<D[1][0])if(j<0)E=E.left;else{if(!(j>0))return 0;R=-1,E=E.right}else if(j>0)E=E.left;else{if(!(j<0))return 0;R=1,E=E.right}}return R});return 0===o.length?C:function(M,I){return function(P){return M(P[0],P[1])?0:I(P)}}(d(o),C)};var e=g("robust-orientation")[3],n=g("slab-decomposition"),i=g("interval-tree-1d"),l=g("binary-search-bounds");function r(){return!0}function d(t){for(var h={},s=0;s<t.length;++s){var o=t[s],p=o[0][0],c=o[0][1],a=o[1][1],y=[Math.min(c,a),Math.max(c,a)];p in h?h[p].push(y):h[p]=[y]}var w,u={},_=Object.keys(h);for(s=0;s<_.length;++s)u[_[s]]=i(h[_[s]]);return w=u,function(T,C){var M=w[T];return!!M&&!!M.queryPoint(C,r)}}function f(t){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(g,k,x){"use strict";var e=new Float64Array(4),n=new Float64Array(4),i=new Float64Array(4);k.exports=function(l,r,d,f,t){e.length<f.length&&(e=new Float64Array(f.length),n=new Float64Array(f.length),i=new Float64Array(f.length));for(var h=0;h<f.length;++h)e[h]=l[h]-f[h],n[h]=r[h]-l[h],i[h]=d[h]-l[h];var s=0,o=0,p=0,c=0,a=0,y=0;for(h=0;h<f.length;++h){var u=n[h],_=i[h],b=e[h];s+=u*u,o+=u*_,p+=_*_,c+=b*u,a+=b*_,y+=b*b}var w,T,C,M,I,P=Math.abs(s*p-o*o),S=o*a-p*c,E=o*c-s*a;if(S+E<=P)if(S<0)E<0&&c<0?(E=0,-c>=s?(S=1,w=s+2*c+y):w=c*(S=-c/s)+y):(S=0,a>=0?(E=0,w=y):-a>=p?(E=1,w=p+2*a+y):w=a*(E=-a/p)+y);else if(E<0)E=0,c>=0?(S=0,w=y):-c>=s?(S=1,w=s+2*c+y):w=c*(S=-c/s)+y;else{var R=1/P;w=(S*=R)*(s*S+o*(E*=R)+2*c)+E*(o*S+p*E+2*a)+y}else S<0?(C=p+a)>(T=o+c)?(M=C-T)>=(I=s-2*o+p)?(S=1,E=0,w=s+2*c+y):w=(S=M/I)*(s*S+o*(E=1-S)+2*c)+E*(o*S+p*E+2*a)+y:(S=0,C<=0?(E=1,w=p+2*a+y):a>=0?(E=0,w=y):w=a*(E=-a/p)+y):E<0?(C=s+c)>(T=o+a)?(M=C-T)>=(I=s-2*o+p)?(E=1,S=0,w=p+2*a+y):w=(S=1-(E=M/I))*(s*S+o*E+2*c)+E*(o*S+p*E+2*a)+y:(E=0,C<=0?(S=1,w=s+2*c+y):c>=0?(S=0,w=y):w=c*(S=-c/s)+y):(M=p+a-o-c)<=0?(S=0,E=1,w=p+2*a+y):M>=(I=s-2*o+p)?(S=1,E=0,w=s+2*c+y):w=(S=M/I)*(s*S+o*(E=1-S)+2*c)+E*(o*S+p*E+2*a)+y;var D=1-S-E;for(h=0;h<f.length;++h)t[h]=D*l[h]+S*r[h]+E*d[h];return w<0?0:w}},{}],271:[function(g,k,x){k.exports=g("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(g,k,x){"use strict";var e=g("big-rat/add");k.exports=function(n,i){for(var l=n.length,r=new Array(l),d=0;d<l;++d)r[d]=e(n[d],i[d]);return r}},{"big-rat/add":15}],273:[function(g,k,x){"use strict";k.exports=function(n){for(var i=new Array(n.length),l=0;l<n.length;++l)i[l]=e(n[l]);return i};var e=g("big-rat")},{"big-rat":18}],274:[function(g,k,x){"use strict";var e=g("big-rat"),n=g("big-rat/mul");k.exports=function(i,l){for(var r=e(l),d=i.length,f=new Array(d),t=0;t<d;++t)f[t]=n(i[t],r);return f}},{"big-rat":18,"big-rat/mul":27}],275:[function(g,k,x){"use strict";var e=g("big-rat/sub");k.exports=function(n,i){for(var l=n.length,r=new Array(l),d=0;d<l;++d)r[d]=e(n[d],i[d]);return r}},{"big-rat/sub":29}],276:[function(g,k,x){"use strict";var e=g("compare-cell"),n=g("compare-oriented-cell"),i=g("cell-orientation");k.exports=function(l){l.sort(n);for(var r=l.length,d=0,f=0;f<r;++f){var t=l[f],h=i(t);if(0!==h){if(d>0){var s=l[d-1];if(0===e(t,s)&&i(s)!==h){d-=1;continue}}l[d++]=t}}return l.length=d,l}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(g,k,x){"use strict";var e,n="";k.exports=function(i,l){if("string"!=typeof i)throw new TypeError("expected a string");if(1===l)return i;if(2===l)return i+i;var r=i.length*l;if(e!==i||void 0===e)e=i,n="";else if(n.length>=r)return n.substr(0,r);for(;r>n.length&&l>1;)1&l&&(n+=i),l>>=1,i+=i;return n=(n+=i).substr(0,r)}},{}],278:[function(g,k,x){(function(e){(function(){k.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==m?m:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(g,k,x){"use strict";k.exports=function(e){for(var n=e.length,i=e[e.length-1],l=n,r=n-2;r>=0;--r){var d=i,f=e[r];(h=f-((i=d+f)-d))&&(e[--l]=i,i=h)}var t=0;for(r=l;r<n;++r){var h;(h=(f=i)-((i=(d=e[r])+f)-d))&&(e[t++]=h)}return e[t++]=i,e.length=t,e}},{}],280:[function(g,k,x){"use strict";var e=g("two-product"),n=g("robust-sum"),i=g("robust-scale"),l=g("robust-compress");function r(p,c,a,y){return function(u){return y(p(a(u[0][0],u[1][1]),a(-u[0][1],u[1][0])))}}function d(p,c,a,y){return function(u){return y(p(c(p(a(u[1][1],u[2][2]),a(-u[1][2],u[2][1])),u[0][0]),p(c(p(a(u[1][0],u[2][2]),a(-u[1][2],u[2][0])),-u[0][1]),c(p(a(u[1][0],u[2][1]),a(-u[1][1],u[2][0])),u[0][2]))))}}function f(p,c,a,y){return function(u){return y(p(p(c(p(c(p(a(u[2][2],u[3][3]),a(-u[2][3],u[3][2])),u[1][1]),p(c(p(a(u[2][1],u[3][3]),a(-u[2][3],u[3][1])),-u[1][2]),c(p(a(u[2][1],u[3][2]),a(-u[2][2],u[3][1])),u[1][3]))),u[0][0]),c(p(c(p(a(u[2][2],u[3][3]),a(-u[2][3],u[3][2])),u[1][0]),p(c(p(a(u[2][0],u[3][3]),a(-u[2][3],u[3][0])),-u[1][2]),c(p(a(u[2][0],u[3][2]),a(-u[2][2],u[3][0])),u[1][3]))),-u[0][1])),p(c(p(c(p(a(u[2][1],u[3][3]),a(-u[2][3],u[3][1])),u[1][0]),p(c(p(a(u[2][0],u[3][3]),a(-u[2][3],u[3][0])),-u[1][1]),c(p(a(u[2][0],u[3][1]),a(-u[2][1],u[3][0])),u[1][3]))),u[0][2]),c(p(c(p(a(u[2][1],u[3][2]),a(-u[2][2],u[3][1])),u[1][0]),p(c(p(a(u[2][0],u[3][2]),a(-u[2][2],u[3][0])),-u[1][1]),c(p(a(u[2][0],u[3][1]),a(-u[2][1],u[3][0])),u[1][2]))),-u[0][3]))))}}function t(p,c,a,y){return function(u){return y(p(p(c(p(p(c(p(c(p(a(u[3][3],u[4][4]),a(-u[3][4],u[4][3])),u[2][2]),p(c(p(a(u[3][2],u[4][4]),a(-u[3][4],u[4][2])),-u[2][3]),c(p(a(u[3][2],u[4][3]),a(-u[3][3],u[4][2])),u[2][4]))),u[1][1]),c(p(c(p(a(u[3][3],u[4][4]),a(-u[3][4],u[4][3])),u[2][1]),p(c(p(a(u[3][1],u[4][4]),a(-u[3][4],u[4][1])),-u[2][3]),c(p(a(u[3][1],u[4][3]),a(-u[3][3],u[4][1])),u[2][4]))),-u[1][2])),p(c(p(c(p(a(u[3][2],u[4][4]),a(-u[3][4],u[4][2])),u[2][1]),p(c(p(a(u[3][1],u[4][4]),a(-u[3][4],u[4][1])),-u[2][2]),c(p(a(u[3][1],u[4][2]),a(-u[3][2],u[4][1])),u[2][4]))),u[1][3]),c(p(c(p(a(u[3][2],u[4][3]),a(-u[3][3],u[4][2])),u[2][1]),p(c(p(a(u[3][1],u[4][3]),a(-u[3][3],u[4][1])),-u[2][2]),c(p(a(u[3][1],u[4][2]),a(-u[3][2],u[4][1])),u[2][3]))),-u[1][4]))),u[0][0]),c(p(p(c(p(c(p(a(u[3][3],u[4][4]),a(-u[3][4],u[4][3])),u[2][2]),p(c(p(a(u[3][2],u[4][4]),a(-u[3][4],u[4][2])),-u[2][3]),c(p(a(u[3][2],u[4][3]),a(-u[3][3],u[4][2])),u[2][4]))),u[1][0]),c(p(c(p(a(u[3][3],u[4][4]),a(-u[3][4],u[4][3])),u[2][0]),p(c(p(a(u[3][0],u[4][4]),a(-u[3][4],u[4][0])),-u[2][3]),c(p(a(u[3][0],u[4][3]),a(-u[3][3],u[4][0])),u[2][4]))),-u[1][2])),p(c(p(c(p(a(u[3][2],u[4][4]),a(-u[3][4],u[4][2])),u[2][0]),p(c(p(a(u[3][0],u[4][4]),a(-u[3][4],u[4][0])),-u[2][2]),c(p(a(u[3][0],u[4][2]),a(-u[3][2],u[4][0])),u[2][4]))),u[1][3]),c(p(c(p(a(u[3][2],u[4][3]),a(-u[3][3],u[4][2])),u[2][0]),p(c(p(a(u[3][0],u[4][3]),a(-u[3][3],u[4][0])),-u[2][2]),c(p(a(u[3][0],u[4][2]),a(-u[3][2],u[4][0])),u[2][3]))),-u[1][4]))),-u[0][1])),p(c(p(p(c(p(c(p(a(u[3][3],u[4][4]),a(-u[3][4],u[4][3])),u[2][1]),p(c(p(a(u[3][1],u[4][4]),a(-u[3][4],u[4][1])),-u[2][3]),c(p(a(u[3][1],u[4][3]),a(-u[3][3],u[4][1])),u[2][4]))),u[1][0]),c(p(c(p(a(u[3][3],u[4][4]),a(-u[3][4],u[4][3])),u[2][0]),p(c(p(a(u[3][0],u[4][4]),a(-u[3][4],u[4][0])),-u[2][3]),c(p(a(u[3][0],u[4][3]),a(-u[3][3],u[4][0])),u[2][4]))),-u[1][1])),p(c(p(c(p(a(u[3][1],u[4][4]),a(-u[3][4],u[4][1])),u[2][0]),p(c(p(a(u[3][0],u[4][4]),a(-u[3][4],u[4][0])),-u[2][1]),c(p(a(u[3][0],u[4][1]),a(-u[3][1],u[4][0])),u[2][4]))),u[1][3]),c(p(c(p(a(u[3][1],u[4][3]),a(-u[3][3],u[4][1])),u[2][0]),p(c(p(a(u[3][0],u[4][3]),a(-u[3][3],u[4][0])),-u[2][1]),c(p(a(u[3][0],u[4][1]),a(-u[3][1],u[4][0])),u[2][3]))),-u[1][4]))),u[0][2]),p(c(p(p(c(p(c(p(a(u[3][2],u[4][4]),a(-u[3][4],u[4][2])),u[2][1]),p(c(p(a(u[3][1],u[4][4]),a(-u[3][4],u[4][1])),-u[2][2]),c(p(a(u[3][1],u[4][2]),a(-u[3][2],u[4][1])),u[2][4]))),u[1][0]),c(p(c(p(a(u[3][2],u[4][4]),a(-u[3][4],u[4][2])),u[2][0]),p(c(p(a(u[3][0],u[4][4]),a(-u[3][4],u[4][0])),-u[2][2]),c(p(a(u[3][0],u[4][2]),a(-u[3][2],u[4][0])),u[2][4]))),-u[1][1])),p(c(p(c(p(a(u[3][1],u[4][4]),a(-u[3][4],u[4][1])),u[2][0]),p(c(p(a(u[3][0],u[4][4]),a(-u[3][4],u[4][0])),-u[2][1]),c(p(a(u[3][0],u[4][1]),a(-u[3][1],u[4][0])),u[2][4]))),u[1][2]),c(p(c(p(a(u[3][1],u[4][2]),a(-u[3][2],u[4][1])),u[2][0]),p(c(p(a(u[3][0],u[4][2]),a(-u[3][2],u[4][0])),-u[2][1]),c(p(a(u[3][0],u[4][1]),a(-u[3][1],u[4][0])),u[2][2]))),-u[1][4]))),-u[0][3]),c(p(p(c(p(c(p(a(u[3][2],u[4][3]),a(-u[3][3],u[4][2])),u[2][1]),p(c(p(a(u[3][1],u[4][3]),a(-u[3][3],u[4][1])),-u[2][2]),c(p(a(u[3][1],u[4][2]),a(-u[3][2],u[4][1])),u[2][3]))),u[1][0]),c(p(c(p(a(u[3][2],u[4][3]),a(-u[3][3],u[4][2])),u[2][0]),p(c(p(a(u[3][0],u[4][3]),a(-u[3][3],u[4][0])),-u[2][2]),c(p(a(u[3][0],u[4][2]),a(-u[3][2],u[4][0])),u[2][3]))),-u[1][1])),p(c(p(c(p(a(u[3][1],u[4][3]),a(-u[3][3],u[4][1])),u[2][0]),p(c(p(a(u[3][0],u[4][3]),a(-u[3][3],u[4][0])),-u[2][1]),c(p(a(u[3][0],u[4][1]),a(-u[3][1],u[4][0])),u[2][3]))),u[1][2]),c(p(c(p(a(u[3][1],u[4][2]),a(-u[3][2],u[4][1])),u[2][0]),p(c(p(a(u[3][0],u[4][2]),a(-u[3][2],u[4][0])),-u[2][1]),c(p(a(u[3][0],u[4][1]),a(-u[3][1],u[4][0])),u[2][2]))),-u[1][3]))),u[0][4])))))}}function h(p){return(2===p?r:3===p?d:4===p?f:5===p?t:void 0)(n,i,e,l)}var s=[function(){return[0]},function(p){return[p[0][0]]}];function o(p,c,a,y,u,_,b,w){return function(T){switch(T.length){case 0:return p(T);case 1:return c(T);case 2:return a(T);case 3:return y(T);case 4:return u(T);case 5:return _(T)}var C=b[T.length];return C||(C=b[T.length]=w(T.length)),C(T)}}!function(){for(;s.length<6;)s.push(h(s.length));k.exports=o.apply(void 0,s.concat([s,h]));for(var p=0;p<s.length;++p)k.exports[p]=s[p]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(g,k,x){"use strict";var e=g("two-product"),n=g("robust-sum");k.exports=function(i,l){for(var r=e(i[0],l[0]),d=1;d<i.length;++d)r=n(r,e(i[d],l[d]));return r}},{"robust-sum":289,"two-product":306}],282:[function(g,k,x){"use strict";var e=g("two-product"),n=g("robust-sum"),i=g("robust-subtract"),l=g("robust-scale");function r(c){return(3===c?d:4===c?f:5===c?t:h)(n,i,e,l)}function d(c,a,y,u){return function(_,b,w){var T=y(_[0],_[0]),C=u(T,b[0]),M=u(T,w[0]),I=y(b[0],b[0]),P=u(I,_[0]),S=u(I,w[0]),E=y(w[0],w[0]),R=u(E,_[0]),D=u(E,b[0]),j=c(a(D,S),a(P,C)),H=a(R,M),Y=a(j,H);return Y[Y.length-1]}}function f(c,a,y,u){return function(_,b,w,T){var C=c(y(_[0],_[0]),y(_[1],_[1])),M=u(C,b[0]),I=u(C,w[0]),P=u(C,T[0]),S=c(y(b[0],b[0]),y(b[1],b[1])),E=u(S,_[0]),R=u(S,w[0]),D=u(S,T[0]),j=c(y(w[0],w[0]),y(w[1],w[1])),H=u(j,_[0]),Y=u(j,b[0]),X=u(j,T[0]),Z=c(y(T[0],T[0]),y(T[1],T[1])),W=u(Z,_[0]),re=u(Z,b[0]),U=u(Z,w[0]),B=c(c(u(a(U,X),b[1]),c(u(a(re,D),-w[1]),u(a(Y,R),T[1]))),c(u(a(re,D),_[1]),c(u(a(W,P),-b[1]),u(a(E,M),T[1])))),V=c(c(u(a(U,X),_[1]),c(u(a(W,P),-w[1]),u(a(H,I),T[1]))),c(u(a(Y,R),_[1]),c(u(a(H,I),-b[1]),u(a(E,M),w[1])))),ee=a(B,V);return ee[ee.length-1]}}function t(c,a,y,u){return function(_,b,w,T,C){var M=c(y(_[0],_[0]),c(y(_[1],_[1]),y(_[2],_[2]))),I=u(M,b[0]),P=u(M,w[0]),S=u(M,T[0]),E=u(M,C[0]),R=c(y(b[0],b[0]),c(y(b[1],b[1]),y(b[2],b[2]))),D=u(R,_[0]),j=u(R,w[0]),H=u(R,T[0]),Y=u(R,C[0]),X=c(y(w[0],w[0]),c(y(w[1],w[1]),y(w[2],w[2]))),Z=u(X,_[0]),W=u(X,b[0]),re=u(X,T[0]),U=u(X,C[0]),B=c(y(T[0],T[0]),c(y(T[1],T[1]),y(T[2],T[2]))),V=u(B,_[0]),ee=u(B,b[0]),N=u(B,w[0]),K=u(B,C[0]),J=c(y(C[0],C[0]),c(y(C[1],C[1]),y(C[2],C[2]))),te=u(J,_[0]),ae=u(J,b[0]),le=u(J,w[0]),se=u(J,T[0]),ve=c(c(c(u(c(u(a(se,K),w[1]),c(u(a(le,U),-T[1]),u(a(N,re),C[1]))),b[2]),c(u(c(u(a(se,K),b[1]),c(u(a(ae,Y),-T[1]),u(a(ee,H),C[1]))),-w[2]),u(c(u(a(le,U),b[1]),c(u(a(ae,Y),-w[1]),u(a(W,j),C[1]))),T[2]))),c(u(c(u(a(N,re),b[1]),c(u(a(ee,H),-w[1]),u(a(W,j),T[1]))),-C[2]),c(u(c(u(a(se,K),b[1]),c(u(a(ae,Y),-T[1]),u(a(ee,H),C[1]))),_[2]),u(c(u(a(se,K),_[1]),c(u(a(te,E),-T[1]),u(a(V,S),C[1]))),-b[2])))),c(c(u(c(u(a(ae,Y),_[1]),c(u(a(te,E),-b[1]),u(a(D,I),C[1]))),T[2]),c(u(c(u(a(ee,H),_[1]),c(u(a(V,S),-b[1]),u(a(D,I),T[1]))),-C[2]),u(c(u(a(N,re),b[1]),c(u(a(ee,H),-w[1]),u(a(W,j),T[1]))),_[2]))),c(u(c(u(a(N,re),_[1]),c(u(a(V,S),-w[1]),u(a(Z,P),T[1]))),-b[2]),c(u(c(u(a(ee,H),_[1]),c(u(a(V,S),-b[1]),u(a(D,I),T[1]))),w[2]),u(c(u(a(W,j),_[1]),c(u(a(Z,P),-b[1]),u(a(D,I),w[1]))),-T[2]))))),ue=c(c(c(u(c(u(a(se,K),w[1]),c(u(a(le,U),-T[1]),u(a(N,re),C[1]))),_[2]),u(c(u(a(se,K),_[1]),c(u(a(te,E),-T[1]),u(a(V,S),C[1]))),-w[2])),c(u(c(u(a(le,U),_[1]),c(u(a(te,E),-w[1]),u(a(Z,P),C[1]))),T[2]),u(c(u(a(N,re),_[1]),c(u(a(V,S),-w[1]),u(a(Z,P),T[1]))),-C[2]))),c(c(u(c(u(a(le,U),b[1]),c(u(a(ae,Y),-w[1]),u(a(W,j),C[1]))),_[2]),u(c(u(a(le,U),_[1]),c(u(a(te,E),-w[1]),u(a(Z,P),C[1]))),-b[2])),c(u(c(u(a(ae,Y),_[1]),c(u(a(te,E),-b[1]),u(a(D,I),C[1]))),w[2]),u(c(u(a(W,j),_[1]),c(u(a(Z,P),-b[1]),u(a(D,I),w[1]))),-C[2])))),ye=a(ve,ue);return ye[ye.length-1]}}function h(c,a,y,u){return function(_,b,w,T,C,M){var I=c(c(y(_[0],_[0]),y(_[1],_[1])),c(y(_[2],_[2]),y(_[3],_[3]))),P=u(I,b[0]),S=u(I,w[0]),E=u(I,T[0]),R=u(I,C[0]),D=u(I,M[0]),j=c(c(y(b[0],b[0]),y(b[1],b[1])),c(y(b[2],b[2]),y(b[3],b[3]))),H=u(j,_[0]),Y=u(j,w[0]),X=u(j,T[0]),Z=u(j,C[0]),W=u(j,M[0]),re=c(c(y(w[0],w[0]),y(w[1],w[1])),c(y(w[2],w[2]),y(w[3],w[3]))),U=u(re,_[0]),B=u(re,b[0]),V=u(re,T[0]),ee=u(re,C[0]),N=u(re,M[0]),K=c(c(y(T[0],T[0]),y(T[1],T[1])),c(y(T[2],T[2]),y(T[3],T[3]))),J=u(K,_[0]),te=u(K,b[0]),ae=u(K,w[0]),le=u(K,C[0]),se=u(K,M[0]),ve=c(c(y(C[0],C[0]),y(C[1],C[1])),c(y(C[2],C[2]),y(C[3],C[3]))),ue=u(ve,_[0]),ye=u(ve,b[0]),Me=u(ve,w[0]),pe=u(ve,T[0]),ge=u(ve,M[0]),we=c(c(y(M[0],M[0]),y(M[1],M[1])),c(y(M[2],M[2]),y(M[3],M[3]))),oe=u(we,_[0]),de=u(we,b[0]),Te=u(we,w[0]),Ee=u(we,T[0]),Ae=u(we,C[0]),De=c(c(c(u(c(c(u(c(u(a(Ae,ge),T[1]),c(u(a(Ee,se),-C[1]),u(a(pe,le),M[1]))),w[2]),u(c(u(a(Ae,ge),w[1]),c(u(a(Te,N),-C[1]),u(a(Me,ee),M[1]))),-T[2])),c(u(c(u(a(Ee,se),w[1]),c(u(a(Te,N),-T[1]),u(a(ae,V),M[1]))),C[2]),u(c(u(a(pe,le),w[1]),c(u(a(Me,ee),-T[1]),u(a(ae,V),C[1]))),-M[2]))),b[3]),c(u(c(c(u(c(u(a(Ae,ge),T[1]),c(u(a(Ee,se),-C[1]),u(a(pe,le),M[1]))),b[2]),u(c(u(a(Ae,ge),b[1]),c(u(a(de,W),-C[1]),u(a(ye,Z),M[1]))),-T[2])),c(u(c(u(a(Ee,se),b[1]),c(u(a(de,W),-T[1]),u(a(te,X),M[1]))),C[2]),u(c(u(a(pe,le),b[1]),c(u(a(ye,Z),-T[1]),u(a(te,X),C[1]))),-M[2]))),-w[3]),u(c(c(u(c(u(a(Ae,ge),w[1]),c(u(a(Te,N),-C[1]),u(a(Me,ee),M[1]))),b[2]),u(c(u(a(Ae,ge),b[1]),c(u(a(de,W),-C[1]),u(a(ye,Z),M[1]))),-w[2])),c(u(c(u(a(Te,N),b[1]),c(u(a(de,W),-w[1]),u(a(B,Y),M[1]))),C[2]),u(c(u(a(Me,ee),b[1]),c(u(a(ye,Z),-w[1]),u(a(B,Y),C[1]))),-M[2]))),T[3]))),c(c(u(c(c(u(c(u(a(Ee,se),w[1]),c(u(a(Te,N),-T[1]),u(a(ae,V),M[1]))),b[2]),u(c(u(a(Ee,se),b[1]),c(u(a(de,W),-T[1]),u(a(te,X),M[1]))),-w[2])),c(u(c(u(a(Te,N),b[1]),c(u(a(de,W),-w[1]),u(a(B,Y),M[1]))),T[2]),u(c(u(a(ae,V),b[1]),c(u(a(te,X),-w[1]),u(a(B,Y),T[1]))),-M[2]))),-C[3]),u(c(c(u(c(u(a(pe,le),w[1]),c(u(a(Me,ee),-T[1]),u(a(ae,V),C[1]))),b[2]),u(c(u(a(pe,le),b[1]),c(u(a(ye,Z),-T[1]),u(a(te,X),C[1]))),-w[2])),c(u(c(u(a(Me,ee),b[1]),c(u(a(ye,Z),-w[1]),u(a(B,Y),C[1]))),T[2]),u(c(u(a(ae,V),b[1]),c(u(a(te,X),-w[1]),u(a(B,Y),T[1]))),-C[2]))),M[3])),c(u(c(c(u(c(u(a(Ae,ge),T[1]),c(u(a(Ee,se),-C[1]),u(a(pe,le),M[1]))),b[2]),u(c(u(a(Ae,ge),b[1]),c(u(a(de,W),-C[1]),u(a(ye,Z),M[1]))),-T[2])),c(u(c(u(a(Ee,se),b[1]),c(u(a(de,W),-T[1]),u(a(te,X),M[1]))),C[2]),u(c(u(a(pe,le),b[1]),c(u(a(ye,Z),-T[1]),u(a(te,X),C[1]))),-M[2]))),_[3]),u(c(c(u(c(u(a(Ae,ge),T[1]),c(u(a(Ee,se),-C[1]),u(a(pe,le),M[1]))),_[2]),u(c(u(a(Ae,ge),_[1]),c(u(a(oe,D),-C[1]),u(a(ue,R),M[1]))),-T[2])),c(u(c(u(a(Ee,se),_[1]),c(u(a(oe,D),-T[1]),u(a(J,E),M[1]))),C[2]),u(c(u(a(pe,le),_[1]),c(u(a(ue,R),-T[1]),u(a(J,E),C[1]))),-M[2]))),-b[3])))),c(c(c(u(c(c(u(c(u(a(Ae,ge),b[1]),c(u(a(de,W),-C[1]),u(a(ye,Z),M[1]))),_[2]),u(c(u(a(Ae,ge),_[1]),c(u(a(oe,D),-C[1]),u(a(ue,R),M[1]))),-b[2])),c(u(c(u(a(de,W),_[1]),c(u(a(oe,D),-b[1]),u(a(H,P),M[1]))),C[2]),u(c(u(a(ye,Z),_[1]),c(u(a(ue,R),-b[1]),u(a(H,P),C[1]))),-M[2]))),T[3]),u(c(c(u(c(u(a(Ee,se),b[1]),c(u(a(de,W),-T[1]),u(a(te,X),M[1]))),_[2]),u(c(u(a(Ee,se),_[1]),c(u(a(oe,D),-T[1]),u(a(J,E),M[1]))),-b[2])),c(u(c(u(a(de,W),_[1]),c(u(a(oe,D),-b[1]),u(a(H,P),M[1]))),T[2]),u(c(u(a(te,X),_[1]),c(u(a(J,E),-b[1]),u(a(H,P),T[1]))),-M[2]))),-C[3])),c(u(c(c(u(c(u(a(pe,le),b[1]),c(u(a(ye,Z),-T[1]),u(a(te,X),C[1]))),_[2]),u(c(u(a(pe,le),_[1]),c(u(a(ue,R),-T[1]),u(a(J,E),C[1]))),-b[2])),c(u(c(u(a(ye,Z),_[1]),c(u(a(ue,R),-b[1]),u(a(H,P),C[1]))),T[2]),u(c(u(a(te,X),_[1]),c(u(a(J,E),-b[1]),u(a(H,P),T[1]))),-C[2]))),M[3]),u(c(c(u(c(u(a(Ee,se),w[1]),c(u(a(Te,N),-T[1]),u(a(ae,V),M[1]))),b[2]),u(c(u(a(Ee,se),b[1]),c(u(a(de,W),-T[1]),u(a(te,X),M[1]))),-w[2])),c(u(c(u(a(Te,N),b[1]),c(u(a(de,W),-w[1]),u(a(B,Y),M[1]))),T[2]),u(c(u(a(ae,V),b[1]),c(u(a(te,X),-w[1]),u(a(B,Y),T[1]))),-M[2]))),_[3]))),c(c(u(c(c(u(c(u(a(Ee,se),w[1]),c(u(a(Te,N),-T[1]),u(a(ae,V),M[1]))),_[2]),u(c(u(a(Ee,se),_[1]),c(u(a(oe,D),-T[1]),u(a(J,E),M[1]))),-w[2])),c(u(c(u(a(Te,N),_[1]),c(u(a(oe,D),-w[1]),u(a(U,S),M[1]))),T[2]),u(c(u(a(ae,V),_[1]),c(u(a(J,E),-w[1]),u(a(U,S),T[1]))),-M[2]))),-b[3]),u(c(c(u(c(u(a(Ee,se),b[1]),c(u(a(de,W),-T[1]),u(a(te,X),M[1]))),_[2]),u(c(u(a(Ee,se),_[1]),c(u(a(oe,D),-T[1]),u(a(J,E),M[1]))),-b[2])),c(u(c(u(a(de,W),_[1]),c(u(a(oe,D),-b[1]),u(a(H,P),M[1]))),T[2]),u(c(u(a(te,X),_[1]),c(u(a(J,E),-b[1]),u(a(H,P),T[1]))),-M[2]))),w[3])),c(u(c(c(u(c(u(a(Te,N),b[1]),c(u(a(de,W),-w[1]),u(a(B,Y),M[1]))),_[2]),u(c(u(a(Te,N),_[1]),c(u(a(oe,D),-w[1]),u(a(U,S),M[1]))),-b[2])),c(u(c(u(a(de,W),_[1]),c(u(a(oe,D),-b[1]),u(a(H,P),M[1]))),w[2]),u(c(u(a(B,Y),_[1]),c(u(a(U,S),-b[1]),u(a(H,P),w[1]))),-M[2]))),-T[3]),u(c(c(u(c(u(a(ae,V),b[1]),c(u(a(te,X),-w[1]),u(a(B,Y),T[1]))),_[2]),u(c(u(a(ae,V),_[1]),c(u(a(J,E),-w[1]),u(a(U,S),T[1]))),-b[2])),c(u(c(u(a(te,X),_[1]),c(u(a(J,E),-b[1]),u(a(H,P),T[1]))),w[2]),u(c(u(a(B,Y),_[1]),c(u(a(U,S),-b[1]),u(a(H,P),w[1]))),-T[2]))),M[3]))))),Ie=c(c(c(u(c(c(u(c(u(a(Ae,ge),T[1]),c(u(a(Ee,se),-C[1]),u(a(pe,le),M[1]))),w[2]),u(c(u(a(Ae,ge),w[1]),c(u(a(Te,N),-C[1]),u(a(Me,ee),M[1]))),-T[2])),c(u(c(u(a(Ee,se),w[1]),c(u(a(Te,N),-T[1]),u(a(ae,V),M[1]))),C[2]),u(c(u(a(pe,le),w[1]),c(u(a(Me,ee),-T[1]),u(a(ae,V),C[1]))),-M[2]))),_[3]),c(u(c(c(u(c(u(a(Ae,ge),T[1]),c(u(a(Ee,se),-C[1]),u(a(pe,le),M[1]))),_[2]),u(c(u(a(Ae,ge),_[1]),c(u(a(oe,D),-C[1]),u(a(ue,R),M[1]))),-T[2])),c(u(c(u(a(Ee,se),_[1]),c(u(a(oe,D),-T[1]),u(a(J,E),M[1]))),C[2]),u(c(u(a(pe,le),_[1]),c(u(a(ue,R),-T[1]),u(a(J,E),C[1]))),-M[2]))),-w[3]),u(c(c(u(c(u(a(Ae,ge),w[1]),c(u(a(Te,N),-C[1]),u(a(Me,ee),M[1]))),_[2]),u(c(u(a(Ae,ge),_[1]),c(u(a(oe,D),-C[1]),u(a(ue,R),M[1]))),-w[2])),c(u(c(u(a(Te,N),_[1]),c(u(a(oe,D),-w[1]),u(a(U,S),M[1]))),C[2]),u(c(u(a(Me,ee),_[1]),c(u(a(ue,R),-w[1]),u(a(U,S),C[1]))),-M[2]))),T[3]))),c(c(u(c(c(u(c(u(a(Ee,se),w[1]),c(u(a(Te,N),-T[1]),u(a(ae,V),M[1]))),_[2]),u(c(u(a(Ee,se),_[1]),c(u(a(oe,D),-T[1]),u(a(J,E),M[1]))),-w[2])),c(u(c(u(a(Te,N),_[1]),c(u(a(oe,D),-w[1]),u(a(U,S),M[1]))),T[2]),u(c(u(a(ae,V),_[1]),c(u(a(J,E),-w[1]),u(a(U,S),T[1]))),-M[2]))),-C[3]),u(c(c(u(c(u(a(pe,le),w[1]),c(u(a(Me,ee),-T[1]),u(a(ae,V),C[1]))),_[2]),u(c(u(a(pe,le),_[1]),c(u(a(ue,R),-T[1]),u(a(J,E),C[1]))),-w[2])),c(u(c(u(a(Me,ee),_[1]),c(u(a(ue,R),-w[1]),u(a(U,S),C[1]))),T[2]),u(c(u(a(ae,V),_[1]),c(u(a(J,E),-w[1]),u(a(U,S),T[1]))),-C[2]))),M[3])),c(u(c(c(u(c(u(a(Ae,ge),w[1]),c(u(a(Te,N),-C[1]),u(a(Me,ee),M[1]))),b[2]),u(c(u(a(Ae,ge),b[1]),c(u(a(de,W),-C[1]),u(a(ye,Z),M[1]))),-w[2])),c(u(c(u(a(Te,N),b[1]),c(u(a(de,W),-w[1]),u(a(B,Y),M[1]))),C[2]),u(c(u(a(Me,ee),b[1]),c(u(a(ye,Z),-w[1]),u(a(B,Y),C[1]))),-M[2]))),_[3]),u(c(c(u(c(u(a(Ae,ge),w[1]),c(u(a(Te,N),-C[1]),u(a(Me,ee),M[1]))),_[2]),u(c(u(a(Ae,ge),_[1]),c(u(a(oe,D),-C[1]),u(a(ue,R),M[1]))),-w[2])),c(u(c(u(a(Te,N),_[1]),c(u(a(oe,D),-w[1]),u(a(U,S),M[1]))),C[2]),u(c(u(a(Me,ee),_[1]),c(u(a(ue,R),-w[1]),u(a(U,S),C[1]))),-M[2]))),-b[3])))),c(c(c(u(c(c(u(c(u(a(Ae,ge),b[1]),c(u(a(de,W),-C[1]),u(a(ye,Z),M[1]))),_[2]),u(c(u(a(Ae,ge),_[1]),c(u(a(oe,D),-C[1]),u(a(ue,R),M[1]))),-b[2])),c(u(c(u(a(de,W),_[1]),c(u(a(oe,D),-b[1]),u(a(H,P),M[1]))),C[2]),u(c(u(a(ye,Z),_[1]),c(u(a(ue,R),-b[1]),u(a(H,P),C[1]))),-M[2]))),w[3]),u(c(c(u(c(u(a(Te,N),b[1]),c(u(a(de,W),-w[1]),u(a(B,Y),M[1]))),_[2]),u(c(u(a(Te,N),_[1]),c(u(a(oe,D),-w[1]),u(a(U,S),M[1]))),-b[2])),c(u(c(u(a(de,W),_[1]),c(u(a(oe,D),-b[1]),u(a(H,P),M[1]))),w[2]),u(c(u(a(B,Y),_[1]),c(u(a(U,S),-b[1]),u(a(H,P),w[1]))),-M[2]))),-C[3])),c(u(c(c(u(c(u(a(Me,ee),b[1]),c(u(a(ye,Z),-w[1]),u(a(B,Y),C[1]))),_[2]),u(c(u(a(Me,ee),_[1]),c(u(a(ue,R),-w[1]),u(a(U,S),C[1]))),-b[2])),c(u(c(u(a(ye,Z),_[1]),c(u(a(ue,R),-b[1]),u(a(H,P),C[1]))),w[2]),u(c(u(a(B,Y),_[1]),c(u(a(U,S),-b[1]),u(a(H,P),w[1]))),-C[2]))),M[3]),u(c(c(u(c(u(a(pe,le),w[1]),c(u(a(Me,ee),-T[1]),u(a(ae,V),C[1]))),b[2]),u(c(u(a(pe,le),b[1]),c(u(a(ye,Z),-T[1]),u(a(te,X),C[1]))),-w[2])),c(u(c(u(a(Me,ee),b[1]),c(u(a(ye,Z),-w[1]),u(a(B,Y),C[1]))),T[2]),u(c(u(a(ae,V),b[1]),c(u(a(te,X),-w[1]),u(a(B,Y),T[1]))),-C[2]))),_[3]))),c(c(u(c(c(u(c(u(a(pe,le),w[1]),c(u(a(Me,ee),-T[1]),u(a(ae,V),C[1]))),_[2]),u(c(u(a(pe,le),_[1]),c(u(a(ue,R),-T[1]),u(a(J,E),C[1]))),-w[2])),c(u(c(u(a(Me,ee),_[1]),c(u(a(ue,R),-w[1]),u(a(U,S),C[1]))),T[2]),u(c(u(a(ae,V),_[1]),c(u(a(J,E),-w[1]),u(a(U,S),T[1]))),-C[2]))),-b[3]),u(c(c(u(c(u(a(pe,le),b[1]),c(u(a(ye,Z),-T[1]),u(a(te,X),C[1]))),_[2]),u(c(u(a(pe,le),_[1]),c(u(a(ue,R),-T[1]),u(a(J,E),C[1]))),-b[2])),c(u(c(u(a(ye,Z),_[1]),c(u(a(ue,R),-b[1]),u(a(H,P),C[1]))),T[2]),u(c(u(a(te,X),_[1]),c(u(a(J,E),-b[1]),u(a(H,P),T[1]))),-C[2]))),w[3])),c(u(c(c(u(c(u(a(Me,ee),b[1]),c(u(a(ye,Z),-w[1]),u(a(B,Y),C[1]))),_[2]),u(c(u(a(Me,ee),_[1]),c(u(a(ue,R),-w[1]),u(a(U,S),C[1]))),-b[2])),c(u(c(u(a(ye,Z),_[1]),c(u(a(ue,R),-b[1]),u(a(H,P),C[1]))),w[2]),u(c(u(a(B,Y),_[1]),c(u(a(U,S),-b[1]),u(a(H,P),w[1]))),-C[2]))),-T[3]),u(c(c(u(c(u(a(ae,V),b[1]),c(u(a(te,X),-w[1]),u(a(B,Y),T[1]))),_[2]),u(c(u(a(ae,V),_[1]),c(u(a(J,E),-w[1]),u(a(U,S),T[1]))),-b[2])),c(u(c(u(a(te,X),_[1]),c(u(a(J,E),-b[1]),u(a(H,P),T[1]))),w[2]),u(c(u(a(B,Y),_[1]),c(u(a(U,S),-b[1]),u(a(H,P),w[1]))),-T[2]))),C[3]))))),Oe=a(De,Ie);return Oe[Oe.length-1]}}var s=[function(){return 0},function(){return 0},function(){return 0}];function o(c){var a=s[c.length];return a||(a=s[c.length]=r(c.length)),a.apply(void 0,c)}function p(c,a,y,u,_,b,w,T){return function(C,M,I,P,S,E){switch(arguments.length){case 0:case 1:return 0;case 2:return u(C,M);case 3:return _(C,M,I);case 4:return b(C,M,I,P);case 5:return w(C,M,I,P,S);case 6:return T(C,M,I,P,S,E)}for(var R=new Array(arguments.length),D=0;D<arguments.length;++D)R[D]=arguments[D];return c(R)}}!function(){for(;s.length<=6;)s.push(r(s.length));k.exports=p.apply(void 0,[o].concat(s));for(var c=0;c<=6;++c)k.exports[c]=s[c]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(g,k,x){"use strict";var e=g("robust-determinant");function n(s){return(2===s?i:3===s?l:4===s?r:5===s?d:f)(s<6?e[s]:e)}function i(s){return function(o,p){return[s([[+p[0],+o[0][1]],[+p[1],+o[1][1]]]),s([[+o[0][0],+p[0]],[+o[1][0],+p[1]]]),s(o)]}}function l(s){return function(o,p){return[s([[+p[0],+o[0][1],+o[0][2]],[+p[1],+o[1][1],+o[1][2]],[+p[2],+o[2][1],+o[2][2]]]),s([[+o[0][0],+p[0],+o[0][2]],[+o[1][0],+p[1],+o[1][2]],[+o[2][0],+p[2],+o[2][2]]]),s([[+o[0][0],+o[0][1],+p[0]],[+o[1][0],+o[1][1],+p[1]],[+o[2][0],+o[2][1],+p[2]]]),s(o)]}}function r(s){return function(o,p){return[s([[+p[0],+o[0][1],+o[0][2],+o[0][3]],[+p[1],+o[1][1],+o[1][2],+o[1][3]],[+p[2],+o[2][1],+o[2][2],+o[2][3]],[+p[3],+o[3][1],+o[3][2],+o[3][3]]]),s([[+o[0][0],+p[0],+o[0][2],+o[0][3]],[+o[1][0],+p[1],+o[1][2],+o[1][3]],[+o[2][0],+p[2],+o[2][2],+o[2][3]],[+o[3][0],+p[3],+o[3][2],+o[3][3]]]),s([[+o[0][0],+o[0][1],+p[0],+o[0][3]],[+o[1][0],+o[1][1],+p[1],+o[1][3]],[+o[2][0],+o[2][1],+p[2],+o[2][3]],[+o[3][0],+o[3][1],+p[3],+o[3][3]]]),s([[+o[0][0],+o[0][1],+o[0][2],+p[0]],[+o[1][0],+o[1][1],+o[1][2],+p[1]],[+o[2][0],+o[2][1],+o[2][2],+p[2]],[+o[3][0],+o[3][1],+o[3][2],+p[3]]]),s(o)]}}function d(s){return function(o,p){return[s([[+p[0],+o[0][1],+o[0][2],+o[0][3],+o[0][4]],[+p[1],+o[1][1],+o[1][2],+o[1][3],+o[1][4]],[+p[2],+o[2][1],+o[2][2],+o[2][3],+o[2][4]],[+p[3],+o[3][1],+o[3][2],+o[3][3],+o[3][4]],[+p[4],+o[4][1],+o[4][2],+o[4][3],+o[4][4]]]),s([[+o[0][0],+p[0],+o[0][2],+o[0][3],+o[0][4]],[+o[1][0],+p[1],+o[1][2],+o[1][3],+o[1][4]],[+o[2][0],+p[2],+o[2][2],+o[2][3],+o[2][4]],[+o[3][0],+p[3],+o[3][2],+o[3][3],+o[3][4]],[+o[4][0],+p[4],+o[4][2],+o[4][3],+o[4][4]]]),s([[+o[0][0],+o[0][1],+p[0],+o[0][3],+o[0][4]],[+o[1][0],+o[1][1],+p[1],+o[1][3],+o[1][4]],[+o[2][0],+o[2][1],+p[2],+o[2][3],+o[2][4]],[+o[3][0],+o[3][1],+p[3],+o[3][3],+o[3][4]],[+o[4][0],+o[4][1],+p[4],+o[4][3],+o[4][4]]]),s([[+o[0][0],+o[0][1],+o[0][2],+p[0],+o[0][4]],[+o[1][0],+o[1][1],+o[1][2],+p[1],+o[1][4]],[+o[2][0],+o[2][1],+o[2][2],+p[2],+o[2][4]],[+o[3][0],+o[3][1],+o[3][2],+p[3],+o[3][4]],[+o[4][0],+o[4][1],+o[4][2],+p[4],+o[4][4]]]),s([[+o[0][0],+o[0][1],+o[0][2],+o[0][3],+p[0]],[+o[1][0],+o[1][1],+o[1][2],+o[1][3],+p[1]],[+o[2][0],+o[2][1],+o[2][2],+o[2][3],+p[2]],[+o[3][0],+o[3][1],+o[3][2],+o[3][3],+p[3]],[+o[4][0],+o[4][1],+o[4][2],+o[4][3],+p[4]]]),s(o)]}}function f(s){return function(o,p){return[s([[+p[0],+o[0][1],+o[0][2],+o[0][3],+o[0][4],+o[0][5]],[+p[1],+o[1][1],+o[1][2],+o[1][3],+o[1][4],+o[1][5]],[+p[2],+o[2][1],+o[2][2],+o[2][3],+o[2][4],+o[2][5]],[+p[3],+o[3][1],+o[3][2],+o[3][3],+o[3][4],+o[3][5]],[+p[4],+o[4][1],+o[4][2],+o[4][3],+o[4][4],+o[4][5]],[+p[5],+o[5][1],+o[5][2],+o[5][3],+o[5][4],+o[5][5]]]),s([[+o[0][0],+p[0],+o[0][2],+o[0][3],+o[0][4],+o[0][5]],[+o[1][0],+p[1],+o[1][2],+o[1][3],+o[1][4],+o[1][5]],[+o[2][0],+p[2],+o[2][2],+o[2][3],+o[2][4],+o[2][5]],[+o[3][0],+p[3],+o[3][2],+o[3][3],+o[3][4],+o[3][5]],[+o[4][0],+p[4],+o[4][2],+o[4][3],+o[4][4],+o[4][5]],[+o[5][0],+p[5],+o[5][2],+o[5][3],+o[5][4],+o[5][5]]]),s([[+o[0][0],+o[0][1],+p[0],+o[0][3],+o[0][4],+o[0][5]],[+o[1][0],+o[1][1],+p[1],+o[1][3],+o[1][4],+o[1][5]],[+o[2][0],+o[2][1],+p[2],+o[2][3],+o[2][4],+o[2][5]],[+o[3][0],+o[3][1],+p[3],+o[3][3],+o[3][4],+o[3][5]],[+o[4][0],+o[4][1],+p[4],+o[4][3],+o[4][4],+o[4][5]],[+o[5][0],+o[5][1],+p[5],+o[5][3],+o[5][4],+o[5][5]]]),s([[+o[0][0],+o[0][1],+o[0][2],+p[0],+o[0][4],+o[0][5]],[+o[1][0],+o[1][1],+o[1][2],+p[1],+o[1][4],+o[1][5]],[+o[2][0],+o[2][1],+o[2][2],+p[2],+o[2][4],+o[2][5]],[+o[3][0],+o[3][1],+o[3][2],+p[3],+o[3][4],+o[3][5]],[+o[4][0],+o[4][1],+o[4][2],+p[4],+o[4][4],+o[4][5]],[+o[5][0],+o[5][1],+o[5][2],+p[5],+o[5][4],+o[5][5]]]),s([[+o[0][0],+o[0][1],+o[0][2],+o[0][3],+p[0],+o[0][5]],[+o[1][0],+o[1][1],+o[1][2],+o[1][3],+p[1],+o[1][5]],[+o[2][0],+o[2][1],+o[2][2],+o[2][3],+p[2],+o[2][5]],[+o[3][0],+o[3][1],+o[3][2],+o[3][3],+p[3],+o[3][5]],[+o[4][0],+o[4][1],+o[4][2],+o[4][3],+p[4],+o[4][5]],[+o[5][0],+o[5][1],+o[5][2],+o[5][3],+p[5],+o[5][5]]]),s([[+o[0][0],+o[0][1],+o[0][2],+o[0][3],+o[0][4],+p[0]],[+o[1][0],+o[1][1],+o[1][2],+o[1][3],+o[1][4],+p[1]],[+o[2][0],+o[2][1],+o[2][2],+o[2][3],+o[2][4],+p[2]],[+o[3][0],+o[3][1],+o[3][2],+o[3][3],+o[3][4],+p[3]],[+o[4][0],+o[4][1],+o[4][2],+o[4][3],+o[4][4],+p[4]],[+o[5][0],+o[5][1],+o[5][2],+o[5][3],+o[5][4],+p[5]]]),s(o)]}}var t=[function(){return[[0]]},function(s,o){return[[o[0]],[s[0][0]]]}];function h(s,o,p,c,a,y,u,_){return function(b,w){switch(b.length){case 0:return s(b,w);case 1:return o(b,w);case 2:return p(b,w);case 3:return c(b,w);case 4:return a(b,w);case 5:return y(b,w)}var T=u[b.length];return T||(T=u[b.length]=_(b.length)),T(b,w)}}!function(){for(;t.length<6;)t.push(n(t.length));k.exports=h.apply(void 0,t.concat([t,n]));for(var s=0;s<6;++s)k.exports[s]=t[s]}()},{"robust-determinant":280}],284:[function(g,k,x){"use strict";var e=g("two-product"),n=g("robust-sum"),i=g("robust-scale"),l=g("robust-subtract");function r(a,y,u,_){return function(b,w,T){var C=a(a(y(w[1],T[0]),y(-T[1],w[0])),a(y(b[1],w[0]),y(-w[1],b[0]))),M=a(y(b[1],T[0]),y(-T[1],b[0])),I=_(C,M);return I[I.length-1]}}function d(a,y,u,_){return function(b,w,T,C){var M=a(a(u(a(y(T[1],C[0]),y(-C[1],T[0])),w[2]),a(u(a(y(w[1],C[0]),y(-C[1],w[0])),-T[2]),u(a(y(w[1],T[0]),y(-T[1],w[0])),C[2]))),a(u(a(y(w[1],C[0]),y(-C[1],w[0])),b[2]),a(u(a(y(b[1],C[0]),y(-C[1],b[0])),-w[2]),u(a(y(b[1],w[0]),y(-w[1],b[0])),C[2])))),I=a(a(u(a(y(T[1],C[0]),y(-C[1],T[0])),b[2]),a(u(a(y(b[1],C[0]),y(-C[1],b[0])),-T[2]),u(a(y(b[1],T[0]),y(-T[1],b[0])),C[2]))),a(u(a(y(w[1],T[0]),y(-T[1],w[0])),b[2]),a(u(a(y(b[1],T[0]),y(-T[1],b[0])),-w[2]),u(a(y(b[1],w[0]),y(-w[1],b[0])),T[2])))),P=_(M,I);return P[P.length-1]}}function f(a,y,u,_){return function(b,w,T,C,M){var I=a(a(a(u(a(u(a(y(C[1],M[0]),y(-M[1],C[0])),T[2]),a(u(a(y(T[1],M[0]),y(-M[1],T[0])),-C[2]),u(a(y(T[1],C[0]),y(-C[1],T[0])),M[2]))),w[3]),a(u(a(u(a(y(C[1],M[0]),y(-M[1],C[0])),w[2]),a(u(a(y(w[1],M[0]),y(-M[1],w[0])),-C[2]),u(a(y(w[1],C[0]),y(-C[1],w[0])),M[2]))),-T[3]),u(a(u(a(y(T[1],M[0]),y(-M[1],T[0])),w[2]),a(u(a(y(w[1],M[0]),y(-M[1],w[0])),-T[2]),u(a(y(w[1],T[0]),y(-T[1],w[0])),M[2]))),C[3]))),a(u(a(u(a(y(T[1],C[0]),y(-C[1],T[0])),w[2]),a(u(a(y(w[1],C[0]),y(-C[1],w[0])),-T[2]),u(a(y(w[1],T[0]),y(-T[1],w[0])),C[2]))),-M[3]),a(u(a(u(a(y(C[1],M[0]),y(-M[1],C[0])),w[2]),a(u(a(y(w[1],M[0]),y(-M[1],w[0])),-C[2]),u(a(y(w[1],C[0]),y(-C[1],w[0])),M[2]))),b[3]),u(a(u(a(y(C[1],M[0]),y(-M[1],C[0])),b[2]),a(u(a(y(b[1],M[0]),y(-M[1],b[0])),-C[2]),u(a(y(b[1],C[0]),y(-C[1],b[0])),M[2]))),-w[3])))),a(a(u(a(u(a(y(w[1],M[0]),y(-M[1],w[0])),b[2]),a(u(a(y(b[1],M[0]),y(-M[1],b[0])),-w[2]),u(a(y(b[1],w[0]),y(-w[1],b[0])),M[2]))),C[3]),a(u(a(u(a(y(w[1],C[0]),y(-C[1],w[0])),b[2]),a(u(a(y(b[1],C[0]),y(-C[1],b[0])),-w[2]),u(a(y(b[1],w[0]),y(-w[1],b[0])),C[2]))),-M[3]),u(a(u(a(y(T[1],C[0]),y(-C[1],T[0])),w[2]),a(u(a(y(w[1],C[0]),y(-C[1],w[0])),-T[2]),u(a(y(w[1],T[0]),y(-T[1],w[0])),C[2]))),b[3]))),a(u(a(u(a(y(T[1],C[0]),y(-C[1],T[0])),b[2]),a(u(a(y(b[1],C[0]),y(-C[1],b[0])),-T[2]),u(a(y(b[1],T[0]),y(-T[1],b[0])),C[2]))),-w[3]),a(u(a(u(a(y(w[1],C[0]),y(-C[1],w[0])),b[2]),a(u(a(y(b[1],C[0]),y(-C[1],b[0])),-w[2]),u(a(y(b[1],w[0]),y(-w[1],b[0])),C[2]))),T[3]),u(a(u(a(y(w[1],T[0]),y(-T[1],w[0])),b[2]),a(u(a(y(b[1],T[0]),y(-T[1],b[0])),-w[2]),u(a(y(b[1],w[0]),y(-w[1],b[0])),T[2]))),-C[3]))))),P=a(a(a(u(a(u(a(y(C[1],M[0]),y(-M[1],C[0])),T[2]),a(u(a(y(T[1],M[0]),y(-M[1],T[0])),-C[2]),u(a(y(T[1],C[0]),y(-C[1],T[0])),M[2]))),b[3]),u(a(u(a(y(C[1],M[0]),y(-M[1],C[0])),b[2]),a(u(a(y(b[1],M[0]),y(-M[1],b[0])),-C[2]),u(a(y(b[1],C[0]),y(-C[1],b[0])),M[2]))),-T[3])),a(u(a(u(a(y(T[1],M[0]),y(-M[1],T[0])),b[2]),a(u(a(y(b[1],M[0]),y(-M[1],b[0])),-T[2]),u(a(y(b[1],T[0]),y(-T[1],b[0])),M[2]))),C[3]),u(a(u(a(y(T[1],C[0]),y(-C[1],T[0])),b[2]),a(u(a(y(b[1],C[0]),y(-C[1],b[0])),-T[2]),u(a(y(b[1],T[0]),y(-T[1],b[0])),C[2]))),-M[3]))),a(a(u(a(u(a(y(T[1],M[0]),y(-M[1],T[0])),w[2]),a(u(a(y(w[1],M[0]),y(-M[1],w[0])),-T[2]),u(a(y(w[1],T[0]),y(-T[1],w[0])),M[2]))),b[3]),u(a(u(a(y(T[1],M[0]),y(-M[1],T[0])),b[2]),a(u(a(y(b[1],M[0]),y(-M[1],b[0])),-T[2]),u(a(y(b[1],T[0]),y(-T[1],b[0])),M[2]))),-w[3])),a(u(a(u(a(y(w[1],M[0]),y(-M[1],w[0])),b[2]),a(u(a(y(b[1],M[0]),y(-M[1],b[0])),-w[2]),u(a(y(b[1],w[0]),y(-w[1],b[0])),M[2]))),T[3]),u(a(u(a(y(w[1],T[0]),y(-T[1],w[0])),b[2]),a(u(a(y(b[1],T[0]),y(-T[1],b[0])),-w[2]),u(a(y(b[1],w[0]),y(-w[1],b[0])),T[2]))),-M[3])))),S=_(I,P);return S[S.length-1]}}function t(a){return(3===a?r:4===a?d:f)(n,e,i,l)}var h=t(3),s=t(4),o=[function(){return 0},function(){return 0},function(a,y){return y[0]-a[0]},function(a,y,u){var _,b=(a[1]-u[1])*(y[0]-u[0]),w=(a[0]-u[0])*(y[1]-u[1]),T=b-w;if(b>0){if(w<=0)return T;_=b+w}else{if(!(b<0)||w>=0)return T;_=-(b+w)}var C=33306690738754716e-32*_;return T>=C||T<=-C?T:h(a,y,u)},function(a,y,u,_){var b=a[0]-_[0],w=y[0]-_[0],T=u[0]-_[0],C=a[1]-_[1],M=y[1]-_[1],I=u[1]-_[1],P=a[2]-_[2],S=y[2]-_[2],E=u[2]-_[2],R=w*I,D=T*M,j=T*C,H=b*I,Y=b*M,X=w*C,Z=P*(R-D)+S*(j-H)+E*(Y-X),W=7771561172376103e-31*((Math.abs(R)+Math.abs(D))*Math.abs(P)+(Math.abs(j)+Math.abs(H))*Math.abs(S)+(Math.abs(Y)+Math.abs(X))*Math.abs(E));return Z>W||-Z>W?Z:s(a,y,u,_)}];function p(a){var y=o[a.length];return y||(y=o[a.length]=t(a.length)),y.apply(void 0,a)}function c(a,y,u,_,b,w,T){return function(C,M,I,P,S){switch(arguments.length){case 0:case 1:return 0;case 2:return _(C,M);case 3:return b(C,M,I);case 4:return w(C,M,I,P);case 5:return T(C,M,I,P,S)}for(var E=new Array(arguments.length),R=0;R<arguments.length;++R)E[R]=arguments[R];return a(E)}}!function(){for(;o.length<=5;)o.push(t(o.length));k.exports=c.apply(void 0,[p].concat(o));for(var a=0;a<=5;++a)k.exports[a]=o[a]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(g,k,x){"use strict";var e=g("robust-sum"),n=g("robust-scale");k.exports=function(i,l){if(1===i.length)return n(l,i[0]);if(1===l.length)return n(i,l[0]);if(0===i.length||0===l.length)return[0];var r=[0];if(i.length<l.length)for(var d=0;d<i.length;++d)r=e(r,n(l,i[d]));else for(d=0;d<l.length;++d)r=e(r,n(i,l[d]));return r}},{"robust-scale":286,"robust-sum":289}],286:[function(g,k,x){"use strict";var e=g("two-product"),n=g("two-sum");k.exports=function(i,l){var r=i.length;if(1===r){var d=e(i[0],l);return d[0]?d:[d[1]]}var f=new Array(2*r),t=[.1,.1],h=[.1,.1],s=0;e(i[0],l,t),t[0]&&(f[s++]=t[0]);for(var o=1;o<r;++o){e(i[o],l,h),n(t[1],h[0],t),t[0]&&(f[s++]=t[0]);var c=h[1],a=t[1],y=c+a,u=a-(y-c);t[1]=y,u&&(f[s++]=u)}return t[1]&&(f[s++]=t[1]),0===s&&(f[s++]=0),f.length=s,f}},{"two-product":306,"two-sum":307}],287:[function(g,k,x){"use strict";k.exports=function(n,i,l,r){var d=e(n,l,r),f=e(i,l,r);if(d>0&&f>0||d<0&&f<0)return!1;var t=e(l,n,i),h=e(r,n,i);return!(t>0&&h>0||t<0&&h<0)&&(0!==d||0!==f||0!==t||0!==h||function(s,o,p,c){for(var a=0;a<2;++a){var y=s[a],u=o[a],_=Math.min(y,u),b=Math.max(y,u),w=p[a],T=c[a],C=Math.min(w,T);if(Math.max(w,T)<_||b<C)return!1}return!0}(n,i,l,r))};var e=g("robust-orientation")[3]},{"robust-orientation":284}],288:[function(g,k,x){"use strict";k.exports=function(e,n){var I,P,S,E,R,i=0|e.length,l=0|n.length;if(1===i&&1===l)return(R=(I=e[0])-((S=I+(P=-n[0]))-(E=S-I))+(P-E))?[R,S]:[S];var r,d,f=new Array(i+l),t=0,h=0,s=0,o=Math.abs,p=e[h],c=o(p),a=-n[s],y=o(a);c<y?(d=p,(h+=1)<i&&(c=o(p=e[h]))):(d=a,(s+=1)<l&&(y=o(a=-n[s]))),h<i&&c<y||s>=l?(r=p,(h+=1)<i&&(c=o(p=e[h]))):(r=a,(s+=1)<l&&(y=o(a=-n[s])));for(var u,_,b=r+d,w=b-r,T=d-w,C=T,M=b;h<i&&s<l;)c<y?(r=p,(h+=1)<i&&(c=o(p=e[h]))):(r=a,(s+=1)<l&&(y=o(a=-n[s]))),(T=(d=C)-(w=(b=r+d)-r))&&(f[t++]=T),C=M-((u=M+b)-(_=u-M))+(b-_),M=u;for(;h<i;)(T=(d=C)-(w=(b=(r=p)+d)-r))&&(f[t++]=T),C=M-((u=M+b)-(_=u-M))+(b-_),M=u,(h+=1)<i&&(p=e[h]);for(;s<l;)(T=(d=C)-(w=(b=(r=a)+d)-r))&&(f[t++]=T),C=M-((u=M+b)-(_=u-M))+(b-_),M=u,(s+=1)<l&&(a=-n[s]);return C&&(f[t++]=C),M&&(f[t++]=M),t||(f[t++]=0),f.length=t,f}},{}],289:[function(g,k,x){"use strict";k.exports=function(e,n){var I,P,S,E,R,i=0|e.length,l=0|n.length;if(1===i&&1===l)return(R=(I=e[0])-((S=I+(P=n[0]))-(E=S-I))+(P-E))?[R,S]:[S];var r,d,f=new Array(i+l),t=0,h=0,s=0,o=Math.abs,p=e[h],c=o(p),a=n[s],y=o(a);c<y?(d=p,(h+=1)<i&&(c=o(p=e[h]))):(d=a,(s+=1)<l&&(y=o(a=n[s]))),h<i&&c<y||s>=l?(r=p,(h+=1)<i&&(c=o(p=e[h]))):(r=a,(s+=1)<l&&(y=o(a=n[s])));for(var u,_,b=r+d,w=b-r,T=d-w,C=T,M=b;h<i&&s<l;)c<y?(r=p,(h+=1)<i&&(c=o(p=e[h]))):(r=a,(s+=1)<l&&(y=o(a=n[s]))),(T=(d=C)-(w=(b=r+d)-r))&&(f[t++]=T),C=M-((u=M+b)-(_=u-M))+(b-_),M=u;for(;h<i;)(T=(d=C)-(w=(b=(r=p)+d)-r))&&(f[t++]=T),C=M-((u=M+b)-(_=u-M))+(b-_),M=u,(h+=1)<i&&(p=e[h]);for(;s<l;)(T=(d=C)-(w=(b=(r=a)+d)-r))&&(f[t++]=T),C=M-((u=M+b)-(_=u-M))+(b-_),M=u,(s+=1)<l&&(a=n[s]);return C&&(f[t++]=C),M&&(f[t++]=M),t||(f[t++]=0),f.length=t,f}},{}],290:[function(g,k,x){"use strict";k.exports=function(i){return n(e(i))};var e=g("boundary-cells"),n=g("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(g,k,x){"use strict";k.exports=function(r,d,f,t){if(f=f||0,void 0===t&&(t=function(u){for(var _=u.length,b=0,w=0;w<_;++w)b=0|Math.max(b,u[w].length);return b-1}(r)),0===r.length||t<1)return{cells:[],vertexIds:[],vertexWeights:[]};var h=function(u,_){for(var b=u.length,w=n.mallocUint8(b),T=0;T<b;++T)w[T]=u[T]<_|0;return w}(d,+f),s=function(u,_){for(var b=u.length,T=n.mallocUint32(2*(_*(_+1)/2*b|0)),C=0,M=0;M<b;++M)for(var I=u[M],P=(_=I.length,0);P<_;++P)for(var S=0;S<P;++S){var E=I[S],R=I[P];T[C++]=0|Math.min(E,R),T[C++]=0|Math.max(E,R)}i(e(T,[C/2|0,2]));var D=2;for(M=2;M<C;M+=2)T[M-2]===T[M]&&T[M-1]===T[M+1]||(T[D++]=T[M],T[D++]=T[M+1]);return e(T,[D/2|0,2])}(r,t),o=function(u,_,b,w){for(var T=u.data,C=u.shape[0],M=n.mallocDouble(C),I=0,P=0;P<C;++P){var S=T[2*P],E=T[2*P+1];if(b[S]!==b[E]){var R=_[S],D=_[E];T[2*I]=S,T[2*I+1]=E,M[I++]=(D-w)/(D-R)}}return u.shape[0]=I,e(M,[I])}(s,d,h,+f),p=function(u,_){var b=n.mallocInt32(2*_),w=u.shape[0],T=u.data;b[0]=0;for(var C=0,M=0;M<w;++M){var I=T[2*M];if(I!==C){for(b[2*C+1]=M;++C<I;)b[2*C]=M,b[2*C+1]=M;b[2*C]=M}}for(b[2*C+1]=w;++C<_;)b[2*C]=b[2*C+1]=w;return b}(s,0|d.length),c=l(t)(r,s.data,p,h),a=function(u){for(var _=0|u.shape[0],b=u.data,w=new Array(_),T=0;T<_;++T)w[T]=[b[2*T],b[2*T+1]];return w}(s),y=[].slice.call(o.data,0,o.shape[0]);return n.free(h),n.free(s.data),n.free(o.data),n.free(p),{cells:c,vertexIds:a,vertexWeights:y}};var e=g("ndarray"),n=g("typedarray-pool"),i=g("ndarray-sort"),l=g("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(g,k,x){"use strict";k.exports=function(n){return e[n]()};var e=[function(){return function(n,i,l,r){for(var d=n.length,f=0;f<d;++f);return[]}},function(){function n(i,l,r,d){for(var f=0|Math.min(r,d),t=0|Math.max(r,d),h=i[2*f],s=i[2*f+1];h<s;){var o=h+s>>1,p=l[2*o+1];if(p===t)return o;t<p?s=o:h=o+1}return h}return function(i,l,r,d){for(var f=i.length,t=[],h=0;h<f;++h){var s=i[h];if(2===s.length){var o=(d[s[0]]<<0)+(d[s[1]]<<1);if(0===o||3===o)continue;switch(o){case 0:break;case 1:t.push([n(r,l,s[0],s[1])]);break;case 2:t.push([n(r,l,s[1],s[0])])}}}return t}},function(){function n(i,l,r,d){for(var f=0|Math.min(r,d),t=0|Math.max(r,d),h=i[2*f],s=i[2*f+1];h<s;){var o=h+s>>1,p=l[2*o+1];if(p===t)return o;t<p?s=o:h=o+1}return h}return function(i,l,r,d){for(var f=i.length,t=[],h=0;h<f;++h){var s=i[h],o=s.length;if(3===o){if(0==(p=(d[s[0]]<<0)+(d[s[1]]<<1)+(d[s[2]]<<2))||7===p)continue;switch(p){case 0:break;case 1:t.push([n(r,l,s[0],s[2]),n(r,l,s[0],s[1])]);break;case 2:t.push([n(r,l,s[1],s[0]),n(r,l,s[1],s[2])]);break;case 3:t.push([n(r,l,s[0],s[2]),n(r,l,s[1],s[2])]);break;case 4:t.push([n(r,l,s[2],s[1]),n(r,l,s[2],s[0])]);break;case 5:t.push([n(r,l,s[2],s[1]),n(r,l,s[0],s[1])]);break;case 6:t.push([n(r,l,s[1],s[0]),n(r,l,s[2],s[0])])}}else if(2===o){var p;if(0==(p=(d[s[0]]<<0)+(d[s[1]]<<1))||3===p)continue;switch(p){case 0:break;case 1:t.push([n(r,l,s[0],s[1])]);break;case 2:t.push([n(r,l,s[1],s[0])])}}}return t}},function(){function n(i,l,r,d){for(var f=0|Math.min(r,d),t=0|Math.max(r,d),h=i[2*f],s=i[2*f+1];h<s;){var o=h+s>>1,p=l[2*o+1];if(p===t)return o;t<p?s=o:h=o+1}return h}return function(i,l,r,d){for(var f=i.length,t=[],h=0;h<f;++h){var s=i[h],o=s.length;if(4===o){if(0==(p=(d[s[0]]<<0)+(d[s[1]]<<1)+(d[s[2]]<<2)+(d[s[3]]<<3))||15===p)continue;switch(p){case 0:break;case 1:t.push([n(r,l,s[0],s[1]),n(r,l,s[0],s[2]),n(r,l,s[0],s[3])]);break;case 2:t.push([n(r,l,s[1],s[2]),n(r,l,s[1],s[0]),n(r,l,s[1],s[3])]);break;case 3:t.push([n(r,l,s[1],s[2]),n(r,l,s[0],s[2]),n(r,l,s[0],s[3])],[n(r,l,s[1],s[3]),n(r,l,s[1],s[2]),n(r,l,s[0],s[3])]);break;case 4:t.push([n(r,l,s[2],s[0]),n(r,l,s[2],s[1]),n(r,l,s[2],s[3])]);break;case 5:t.push([n(r,l,s[0],s[1]),n(r,l,s[2],s[1]),n(r,l,s[0],s[3])],[n(r,l,s[2],s[1]),n(r,l,s[2],s[3]),n(r,l,s[0],s[3])]);break;case 6:t.push([n(r,l,s[2],s[0]),n(r,l,s[1],s[0]),n(r,l,s[1],s[3])],[n(r,l,s[2],s[3]),n(r,l,s[2],s[0]),n(r,l,s[1],s[3])]);break;case 7:t.push([n(r,l,s[0],s[3]),n(r,l,s[1],s[3]),n(r,l,s[2],s[3])]);break;case 8:t.push([n(r,l,s[3],s[1]),n(r,l,s[3],s[0]),n(r,l,s[3],s[2])]);break;case 9:t.push([n(r,l,s[3],s[1]),n(r,l,s[0],s[1]),n(r,l,s[0],s[2])],[n(r,l,s[3],s[2]),n(r,l,s[3],s[1]),n(r,l,s[0],s[2])]);break;case 10:t.push([n(r,l,s[1],s[0]),n(r,l,s[3],s[0]),n(r,l,s[1],s[2])],[n(r,l,s[3],s[0]),n(r,l,s[3],s[2]),n(r,l,s[1],s[2])]);break;case 11:t.push([n(r,l,s[1],s[2]),n(r,l,s[0],s[2]),n(r,l,s[3],s[2])]);break;case 12:t.push([n(r,l,s[3],s[0]),n(r,l,s[2],s[0]),n(r,l,s[2],s[1])],[n(r,l,s[3],s[1]),n(r,l,s[3],s[0]),n(r,l,s[2],s[1])]);break;case 13:t.push([n(r,l,s[0],s[1]),n(r,l,s[2],s[1]),n(r,l,s[3],s[1])]);break;case 14:t.push([n(r,l,s[2],s[0]),n(r,l,s[1],s[0]),n(r,l,s[3],s[0])])}}else if(3===o){if(0==(p=(d[s[0]]<<0)+(d[s[1]]<<1)+(d[s[2]]<<2))||7===p)continue;switch(p){case 0:break;case 1:t.push([n(r,l,s[0],s[2]),n(r,l,s[0],s[1])]);break;case 2:t.push([n(r,l,s[1],s[0]),n(r,l,s[1],s[2])]);break;case 3:t.push([n(r,l,s[0],s[2]),n(r,l,s[1],s[2])]);break;case 4:t.push([n(r,l,s[2],s[1]),n(r,l,s[2],s[0])]);break;case 5:t.push([n(r,l,s[2],s[1]),n(r,l,s[0],s[1])]);break;case 6:t.push([n(r,l,s[1],s[0]),n(r,l,s[2],s[0])])}}else if(2===o){var p;if(0==(p=(d[s[0]]<<0)+(d[s[1]]<<1))||3===p)continue;switch(p){case 0:break;case 1:t.push([n(r,l,s[0],s[1])]);break;case 2:t.push([n(r,l,s[1],s[0])])}}}return t}}]},{}],293:[function(g,k,x){"use strict";var e=g("bit-twiddle"),n=g("union-find");function i(s,o){var p=s.length,c=s.length-o.length,a=Math.min;if(c)return c;switch(p){case 0:return 0;case 1:return s[0]-o[0];case 2:return(_=s[0]+s[1]-o[0]-o[1])||a(s[0],s[1])-a(o[0],o[1]);case 3:var y=s[0]+s[1],u=o[0]+o[1];if(_=y+s[2]-(u+o[2]))return _;var _,b=a(s[0],s[1]),w=a(o[0],o[1]);return(_=a(b,s[2])-a(w,o[2]))||a(b+s[2],y)-a(w+o[2],u);default:var T=s.slice(0);T.sort();var C=o.slice(0);C.sort();for(var M=0;M<p;++M)if(c=T[M]-C[M])return c;return 0}}function l(s,o){return i(s[0],o[0])}function r(s,o){if(o){for(var p=s.length,c=new Array(p),a=0;a<p;++a)c[a]=[s[a],o[a]];for(c.sort(l),a=0;a<p;++a)s[a]=c[a][0],o[a]=c[a][1];return s}return s.sort(i),s}function d(s){if(0===s.length)return[];for(var o=1,p=s.length,c=1;c<p;++c){var a=s[c];if(i(a,s[c-1])){if(c===o){o++;continue}s[o++]=a}}return s.length=o,s}function f(s,o){for(var p=0,c=s.length-1,a=-1;p<=c;){var y=p+c>>1,u=i(s[y],o);u<=0?(0===u&&(a=y),p=y+1):u>0&&(c=y-1)}return a}function t(s,o){for(var p=new Array(s.length),c=0,a=p.length;c<a;++c)p[c]=[];for(var y=[],u=(c=0,o.length);c<u;++c)for(var _=o[c],b=_.length,w=1,T=1<<b;w<T;++w){y.length=e.popCount(w);for(var C=0,M=0;M<b;++M)w&1<<M&&(y[C++]=_[M]);var I=f(s,y);if(!(I<0))for(;p[I++].push(c),!(I>=s.length||0!==i(s[I],y)););}return p}function h(s,o){if(o<0)return[];for(var p=[],c=(1<<o+1)-1,a=0;a<s.length;++a)for(var y=s[a],u=c;u<1<<y.length;u=e.nextCombination(u)){for(var _=new Array(o+1),b=0,w=0;w<y.length;++w)u&1<<w&&(_[b++]=y[w]);p.push(_)}return r(p)}x.dimension=function(s){for(var o=0,p=Math.max,c=0,a=s.length;c<a;++c)o=p(o,s[c].length);return o-1},x.countVertices=function(s){for(var o=-1,p=Math.max,c=0,a=s.length;c<a;++c)for(var y=s[c],u=0,_=y.length;u<_;++u)o=p(o,y[u]);return o+1},x.cloneCells=function(s){for(var o=new Array(s.length),p=0,c=s.length;p<c;++p)o[p]=s[p].slice(0);return o},x.compareCells=i,x.normalize=r,x.unique=d,x.findCell=f,x.incidence=t,x.dual=function(s,o){if(!o)return t(d(h(s,0)),s);for(var p=new Array(o),c=0;c<o;++c)p[c]=[];c=0;for(var a=s.length;c<a;++c)for(var y=s[c],u=0,_=y.length;u<_;++u)p[y[u]].push(c);return p},x.explode=function(s){for(var o=[],p=0,c=s.length;p<c;++p)for(var a=s[p],y=0|a.length,u=1,_=1<<y;u<_;++u){for(var b=[],w=0;w<y;++w)u>>>w&1&&b.push(a[w]);o.push(b)}return r(o)},x.skeleton=h,x.boundary=function(s){for(var o=[],p=0,c=s.length;p<c;++p)for(var a=s[p],y=0,u=a.length;y<u;++y){for(var _=new Array(a.length-1),b=0,w=0;b<u;++b)b!==y&&(_[w++]=a[b]);o.push(_)}return r(o)},x.connectedComponents=function(s,o){return o?function(p,c){for(var a=new n(c),y=0;y<p.length;++y)for(var u=p[y],_=0;_<u.length;++_)for(var b=_+1;b<u.length;++b)a.link(u[_],u[b]);var w=[],T=a.ranks;for(y=0;y<T.length;++y)T[y]=-1;for(y=0;y<p.length;++y){var C=a.find(p[y][0]);T[C]<0?(T[C]=w.length,w.push([p[y].slice(0)])):w[T[C]].push(p[y].slice(0))}return w}(s,o):function(p){for(var c=d(r(h(p,0))),a=new n(c.length),y=0;y<p.length;++y)for(var u=p[y],_=0;_<u.length;++_)for(var b=f(c,[u[_]]),w=_+1;w<u.length;++w)a.link(b,f(c,[u[w]]));var T=[],C=a.ranks;for(y=0;y<C.length;++y)C[y]=-1;for(y=0;y<p.length;++y){var M=a.find(f(c,[p[y][0]]));C[M]<0?(C[M]=T.length,T.push([p[y].slice(0)])):T[C[M]].push(p[y].slice(0))}return T}(s)}},{"bit-twiddle":32,"union-find":309}],294:[function(g,k,x){arguments[4][32][0].apply(x,arguments)},{dup:32}],295:[function(g,k,x){arguments[4][293][0].apply(x,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(g,k,x){"use strict";function e(n){this.roots=new Array(n),this.ranks=new Array(n);for(var i=0;i<n;++i)this.roots[i]=i,this.ranks[i]=0}k.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},e.prototype.find=function(n){for(var i=this.roots;i[n]!==n;){var l=i[n];i[n]=i[l],n=l}return n},e.prototype.link=function(n,i){var l=this.find(n),r=this.find(i);if(l!==r){var d=this.ranks,f=this.roots,t=d[l],h=d[r];t<h?f[l]=r:h<t?f[r]=l:(f[r]=l,++d[l])}}},{}],297:[function(g,k,x){"use strict";k.exports=function(i,l,r){for(var d=l.length,f=i.length,t=new Array(d),h=new Array(d),s=new Array(d),o=new Array(d),p=0;p<d;++p)t[p]=h[p]=-1,s[p]=1/0,o[p]=!1;for(p=0;p<f;++p){var c=i[p];if(2!==c.length)throw new Error("Input must be a graph");var a=c[1],y=c[0];h[y]=-1!==h[y]?-2:a,t[a]=-1!==t[a]?-2:y}function u(X){if(o[X])return 1/0;var W,re,V=t[X],ee=h[X];return V<0||ee<0?1/0:(W=l[V],re=l[ee],Math.abs(e(l[X],W,re))/Math.sqrt(Math.pow(W[0]-re[0],2)+Math.pow(W[1]-re[1],2)))}function _(X,Z){var W=S[X],re=S[Z];S[X]=re,S[Z]=W,E[W]=Z,E[re]=X}function b(X){return s[S[X]]}function w(X){return 1&X?X-1>>1:(X>>1)-1}function T(X){for(var Z=b(X);;){var W=Z,re=2*X+1,U=2*(X+1),B=X;if(re<R){var V=b(re);V<W&&(B=re,W=V)}if(U<R&&b(U)<W&&(B=U),B===X)return X;_(X,B),X=B}}function C(X){for(var Z=b(X);X>0;){var W=w(X);if(!(W>=0&&Z<b(W)))return X;_(X,W),X=W}}function M(){if(R>0){var X=S[0];return _(0,R-1),R-=1,T(0),X}return-1}function I(X,Z){var W=S[X];return s[W]===Z?X:(s[W]=-1/0,C(X),M(),s[W]=Z,C((R+=1)-1))}function P(X){if(!o[X]){o[X]=!0;var Z=t[X],W=h[X];t[W]>=0&&(t[W]=Z),h[Z]>=0&&(h[Z]=W),E[Z]>=0&&I(E[Z],u(Z)),E[W]>=0&&I(E[W],u(W))}}var S=[],E=new Array(d);for(p=0;p<d;++p)(s[p]=u(p))<1/0?(E[p]=S.length,S.push(p)):E[p]=-1;var R=S.length;for(p=R>>1;p>=0;--p)T(p);for(;;){var D=M();if(D<0||s[D]>r)break;P(D)}var j=[];for(p=0;p<d;++p)o[p]||(E[p]=j.length,j.push(l[p].slice()));function H(X,Z){if(X[Z]<0)return Z;var W=Z,re=Z;do{var U=X[re];if(!o[re]||U<0||U===re||(U=X[re=U],!o[re]||U<0||U===re))break;re=U,W=X[W]}while(W!==re);for(var B=Z;B!==re;B=X[B])X[B]=re;return re}var Y=[];return i.forEach(function(X){var Z=H(t,X[0]),W=H(h,X[1]);if(Z>=0&&W>=0&&Z!==W){var re=E[Z],U=E[W];re!==U&&Y.push([re,U])}}),n.unique(n.normalize(Y)),{positions:j,edges:Y}};var e=g("robust-orientation"),n=g("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(g,k,x){"use strict";k.exports=function(i,l){var r,d,f,t;if(l[0][0]<l[1][0])r=l[0],d=l[1];else{if(!(l[0][0]>l[1][0]))return n(l,i);r=l[1],d=l[0]}if(i[0][0]<i[1][0])f=i[0],t=i[1];else{if(!(i[0][0]>i[1][0]))return-n(i,l);f=i[1],t=i[0]}var h=e(r,d,t),s=e(r,d,f);if(h<0){if(s<=0)return h}else if(h>0){if(s>=0)return h}else if(s)return s;if(h=e(t,f,d),s=e(t,f,r),h<0){if(s<=0)return h}else if(h>0){if(s>=0)return h}else if(s)return s;return d[0]-t[0]};var e=g("robust-orientation");function n(i,l){var r,d,f,t;if(l[0][0]<l[1][0])r=l[0],d=l[1];else{if(!(l[0][0]>l[1][0])){var h=Math.min(i[0][1],i[1][1]),s=Math.max(i[0][1],i[1][1]),o=Math.min(l[0][1],l[1][1]),p=Math.max(l[0][1],l[1][1]);return s<o?s-o:h>p?h-p:s-p}r=l[1],d=l[0]}i[0][1]<i[1][1]?(f=i[0],t=i[1]):(f=i[1],t=i[0]);var c=e(d,r,f);return c||(c=e(d,r,t))||t-d}},{"robust-orientation":284}],299:[function(g,k,x){"use strict";k.exports=function(s){for(var o=s.length,p=2*o,c=new Array(p),a=0;a<o;++a){var y=s[a],u=y[0][0]<y[1][0];c[2*a]=new h(y[0][0],y,u,a),c[2*a+1]=new h(y[1][0],y,!u,a)}c.sort(function(P,S){var E=P.x-S.x;return E||(E=P.create-S.create)||Math.min(P.segment[0][1],P.segment[1][1])-Math.min(S.segment[0][1],S.segment[1][1])});var _=n(l),b=[],w=[],T=[];for(a=0;a<p;){for(var C=c[a].x,M=[];a<p;){var I=c[a];if(I.x!==C)break;a+=1,I.segment[0][0]===I.x&&I.segment[1][0]===I.x?I.create&&(I.segment[0][1]<I.segment[1][1]?(M.push(new t(I.segment[0][1],I.index,!0,!0)),M.push(new t(I.segment[1][1],I.index,!1,!1))):(M.push(new t(I.segment[1][1],I.index,!0,!1)),M.push(new t(I.segment[0][1],I.index,!1,!0)))):_=I.create?_.insert(I.segment,I.index):_.remove(I.segment)}b.push(_.root),w.push(C),T.push(M)}return new r(b,w,T)};var e=g("binary-search-bounds"),n=g("functional-red-black-tree"),i=g("robust-orientation"),l=g("./lib/order-segments");function r(s,o,p){this.slabs=s,this.coordinates=o,this.horizontal=p}function d(s,o){return s.y-o}function f(s,o){for(var p=null;s;){var c,a,y=s.key;y[0][0]<y[1][0]?(c=y[0],a=y[1]):(c=y[1],a=y[0]);var u=i(c,a,o);if(u<0)s=s.left;else if(u>0)if(o[0]!==y[1][0])p=s,s=s.right;else{if(_=f(s.right,o))return _;s=s.left}else{if(o[0]!==y[1][0])return s;var _;if(_=f(s.right,o))return _;s=s.left}}return p}function t(s,o,p,c){this.y=s,this.index=o,this.start=p,this.closed=c}function h(s,o,p,c){this.x=s,this.segment=o,this.create=p,this.index=c}r.prototype.castUp=function(s){var o=e.le(this.coordinates,s[0]);if(o<0)return-1;var p=f(this.slabs[o],s),c=-1;if(p&&(c=p.value),this.coordinates[o]===s[0]){var a=null;if(p&&(a=p.key),o>0){var y=f(this.slabs[o-1],s);y&&(a?l(y.key,a)>0&&(a=y.key,c=y.value):(c=y.value,a=y.key))}var u=this.horizontal[o];if(u.length>0){var _=e.ge(u,s[1],d);if(_<u.length){var b=u[_];if(s[1]===b.y){if(b.closed)return b.index;for(;_<u.length-1&&u[_+1].y===s[1];)if((b=u[_+=1]).closed)return b.index;if(b.y===s[1]&&!b.start){if((_+=1)>=u.length)return c;b=u[_]}}if(b.start)if(a){var w=i(a[0],a[1],[s[0],b.y]);a[0][0]>a[1][0]&&(w=-w),w>0&&(c=b.index)}else c=b.index;else b.y!==s[1]&&(c=b.index)}}}return c}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(g,k,x){"use strict";var e=g("robust-dot-product"),n=g("robust-sum");function i(r,d){var f=n(e(r,d),[d[d.length-1]]);return f[f.length-1]}function l(r,d,f,t){var h=-d/(t-d);h<0?h=0:h>1&&(h=1);for(var s=1-h,o=r.length,p=new Array(o),c=0;c<o;++c)p[c]=h*r[c]+s*f[c];return p}k.exports=function(r,d){for(var f=[],t=[],h=i(r[r.length-1],d),s=r[r.length-1],o=r[0],p=0;p<r.length;++p,s=o){var c=i(o=r[p],d);if(h<0&&c>0||h>0&&c<0){var a=l(s,c,o,h);f.push(a),t.push(a.slice())}c<0?t.push(o.slice()):c>0?f.push(o.slice()):(f.push(o.slice()),t.push(o.slice())),h=c}return{positive:f,negative:t}},k.exports.positive=function(r,d){for(var f=[],t=i(r[r.length-1],d),h=r[r.length-1],s=r[0],o=0;o<r.length;++o,h=s){var p=i(s=r[o],d);(t<0&&p>0||t>0&&p<0)&&f.push(l(h,p,s,t)),p>=0&&f.push(s.slice()),t=p}return f},k.exports.negative=function(r,d){for(var f=[],t=i(r[r.length-1],d),h=r[r.length-1],s=r[0],o=0;o<r.length;++o,h=s){var p=i(s=r[o],d);(t<0&&p>0||t>0&&p<0)&&f.push(l(h,p,s,t)),p<=0&&f.push(s.slice()),t=p}return f}},{"robust-dot-product":281,"robust-sum":289}],301:[function(g,k,x){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(f){return l(d(f),arguments)}function i(f,t){return n.apply(null,[f].concat(t||[]))}function l(f,t){var h,s,o,p,c,a,y,u,_,b=1,w=f.length,T="";for(s=0;s<w;s++)if("string"==typeof f[s])T+=f[s];else if("object"==typeof f[s]){if((p=f[s]).keys)for(h=t[b],o=0;o<p.keys.length;o++){if(null==h)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',p.keys[o],p.keys[o-1]));h=h[p.keys[o]]}else h=p.param_no?t[p.param_no]:t[b++];if(e.not_type.test(p.type)&&e.not_primitive.test(p.type)&&h instanceof Function&&(h=h()),e.numeric_arg.test(p.type)&&"number"!=typeof h&&isNaN(h))throw new TypeError(n("[sprintf] expecting number but found %T",h));switch(e.number.test(p.type)&&(u=h>=0),p.type){case"b":h=parseInt(h,10).toString(2);break;case"c":h=String.fromCharCode(parseInt(h,10));break;case"d":case"i":h=parseInt(h,10);break;case"j":h=JSON.stringify(h,null,p.width?parseInt(p.width):0);break;case"e":h=p.precision?parseFloat(h).toExponential(p.precision):parseFloat(h).toExponential();break;case"f":h=p.precision?parseFloat(h).toFixed(p.precision):parseFloat(h);break;case"g":h=p.precision?String(Number(h.toPrecision(p.precision))):parseFloat(h);break;case"o":h=(parseInt(h,10)>>>0).toString(8);break;case"s":h=String(h),h=p.precision?h.substring(0,p.precision):h;break;case"t":h=String(!!h),h=p.precision?h.substring(0,p.precision):h;break;case"T":h=Object.prototype.toString.call(h).slice(8,-1).toLowerCase(),h=p.precision?h.substring(0,p.precision):h;break;case"u":h=parseInt(h,10)>>>0;break;case"v":h=h.valueOf(),h=p.precision?h.substring(0,p.precision):h;break;case"x":h=(parseInt(h,10)>>>0).toString(16);break;case"X":h=(parseInt(h,10)>>>0).toString(16).toUpperCase()}e.json.test(p.type)?T+=h:(!e.number.test(p.type)||u&&!p.sign?_="":(_=u?"+":"-",h=h.toString().replace(e.sign,"")),a=p.pad_char?"0"===p.pad_char?"0":p.pad_char.charAt(1):" ",y=p.width-(_+h).length,c=p.width&&y>0?a.repeat(y):"",T+=p.align?_+h+c:"0"===a?_+c+h:c+_+h)}return T}var r=Object.create(null);function d(f){if(r[f])return r[f];for(var t,h=f,s=[],o=0;h;){if(null!==(t=e.text.exec(h)))s.push(t[0]);else if(null!==(t=e.modulo.exec(h)))s.push("%");else{if(null===(t=e.placeholder.exec(h)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var p=[],c=t[2],a=[];if(null===(a=e.key.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(p.push(a[1]);""!==(c=c.substring(a[0].length));)if(null!==(a=e.key_access.exec(c)))p.push(a[1]);else{if(null===(a=e.index_access.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");p.push(a[1])}t[2]=p}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");s.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}h=h.substring(t[0].length)}return r[f]=s}void 0!==x&&(x.sprintf=n,x.vsprintf=i),typeof window<"u"&&(window.sprintf=n,window.vsprintf=i)}()},{}],302:[function(g,k,x){"use strict";k.exports=function(r,d){if(r.dimension<=0)return{positions:[],cells:[]};if(1===r.dimension)return function(h,s){for(var o=n(h,s),p=o.length,c=new Array(p),a=new Array(p),y=0;y<p;++y)c[y]=[o[y]],a[y]=[y];return{positions:c,cells:a}}(r,d);var f=r.order.join()+"-"+r.dtype,t=l[f];return d=+d||0,t||(t=l[f]=function(h,s){var p=i[h.length+"d"];if(p)return p(e,h,s)}(r.order,r.dtype)),t(r,d)};var e=g("ndarray-extract-contour"),n=g("zero-crossings"),i={"2d":function(r,d,f){var t=r({order:d,scalarArguments:3,getters:"generic"===f?[0]:void 0,phase:function(h,s,o,p){return h>p|0},vertex:function(h,s,o,p,c,a,y,u,_,b,w,T,C){var M=(y<<0)+(u<<1)+(_<<2)+(b<<3)|0;if(0!==M&&15!==M)switch(M){case 0:case 15:w.push([h-.5,s-.5]);break;case 1:w.push([h-.25-.25*(p+o-2*C)/(o-p),s-.25-.25*(c+o-2*C)/(o-c)]);break;case 2:w.push([h-.75-.25*(-p-o+2*C)/(p-o),s-.25-.25*(a+p-2*C)/(p-a)]);break;case 3:w.push([h-.5,s-.5-.5*(c+o+a+p-4*C)/(o-c+p-a)]);break;case 4:w.push([h-.25-.25*(a+c-2*C)/(c-a),s-.75-.25*(-c-o+2*C)/(c-o)]);break;case 5:w.push([h-.5-.5*(p+o+a+c-4*C)/(o-p+c-a),s-.5]);break;case 6:w.push([h-.5-.25*(-p-o+a+c)/(p-o+c-a),s-.5-.25*(-c-o+a+p)/(c-o+p-a)]);break;case 7:w.push([h-.75-.25*(a+c-2*C)/(c-a),s-.75-.25*(a+p-2*C)/(p-a)]);break;case 8:w.push([h-.75-.25*(-a-c+2*C)/(a-c),s-.75-.25*(-a-p+2*C)/(a-p)]);break;case 9:w.push([h-.5-.25*(p+o+-a-c)/(o-p+a-c),s-.5-.25*(c+o+-a-p)/(o-c+a-p)]);break;case 10:w.push([h-.5-.5*(-p-o-a-c+4*C)/(p-o+a-c),s-.5]);break;case 11:w.push([h-.25-.25*(-a-c+2*C)/(a-c),s-.75-.25*(c+o-2*C)/(o-c)]);break;case 12:w.push([h-.5,s-.5-.5*(-c-o-a-p+4*C)/(c-o+a-p)]);break;case 13:w.push([h-.75-.25*(p+o-2*C)/(o-p),s-.25-.25*(-a-p+2*C)/(a-p)]);break;case 14:w.push([h-.25-.25*(-p-o+2*C)/(p-o),s-.25-.25*(-c-o+2*C)/(c-o)])}},cell:function(h,s,o,p,c,a,y,u,_){u.push(c?[h,s]:[s,h])}});return function(h,s){var o=[],p=[];return t(h,o,p,s),{positions:o,cells:p}}}},l={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(g,k,x){(function(e){(function(){"use strict";k.exports=function r(d,f,t){t=t||{};var h=l[d];h||(h=l[d]={" ":{data:new Float32Array(0),shape:.2}});var s=h[f];if(!s)if(f.length<=1||!/\d/.test(f))s=h[f]=function(C){for(var M=C.cells,I=C.positions,P=new Float32Array(6*M.length),S=0,E=0,R=0;R<M.length;++R)for(var D=M[R],j=0;j<3;++j){var H=I[D[j]];P[S++]=H[0],P[S++]=H[1]+1.4,E=Math.max(H[0],E)}return{data:P,shape:E}}(n(f,{triangles:!0,font:d,textAlign:t.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var o=f.split(/(\d|\s)/),p=new Array(o.length),c=0,a=0,y=0;y<o.length;++y)p[y]=r(d,o[y]),c+=p[y].data.length,a+=p[y].shape,y>0&&(a+=.02);var u=new Float32Array(c),_=0,b=-.5*a;for(y=0;y<p.length;++y){for(var w=p[y].data,T=0;T<w.length;T+=2)u[_++]=w[T]+b,u[_++]=w[T+1];b+=p[y].shape+.02}s=h[f]={data:u,shape:a}}return s};var n=g("vectorize-text"),i=window||e.global||{},l=i.__TEXT_CACHE||{};i.__TEXT_CACHE={}}).call(this)}).call(this,g("_process"))},{_process:5,"vectorize-text":311}],304:[function(g,k,x){"use strict";var e=g("parse-unit");function n(l,r){var d=e(getComputedStyle(l).getPropertyValue(r));return d[0]*i(d[1],l)}function i(l,r){switch(r=r||document.body,l=(l||"px").trim().toLowerCase(),r!==window&&r!==document||(r=document.body),l){case"%":return r.clientHeight/100;case"ch":case"ex":return function(d,f){var t=document.createElement("div");t.style["font-size"]="128"+d,f.appendChild(t);var h=n(t,"font-size")/128;return f.removeChild(t),h}(l,r);case"em":return n(r,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}k.exports=i},{"parse-unit":265}],305:[function(g,k,x){"use strict";k.exports=function(c){var a=(c=c||{}).center||[0,0,0],y=c.up||[0,1,0],u=c.right||h(y),_=c.radius||1,b=c.theta||0,w=c.phi||0;if(a=[].slice.call(a,0,3),y=[].slice.call(y,0,3),r(y,y),u=[].slice.call(u,0,3),r(u,u),"eye"in c){var T=c.eye,C=[T[0]-a[0],T[1]-a[1],T[2]-a[2]];l(u,C,y),f(u[0],u[1],u[2])<1e-6?u=h(y):r(u,u),_=f(C[0],C[1],C[2]);var M=d(y,C)/_,I=d(u,C)/_;w=Math.acos(M),b=Math.acos(I)}return _=Math.log(_),new s(c.zoomMin,c.zoomMax,a,y,u,_,b,w)};var e=g("filtered-vector"),n=g("gl-mat4/invert"),i=g("gl-mat4/rotate"),l=g("gl-vec3/cross"),r=g("gl-vec3/normalize"),d=g("gl-vec3/dot");function f(c,a,y){return Math.sqrt(Math.pow(c,2)+Math.pow(a,2)+Math.pow(y,2))}function t(c){return Math.min(1,Math.max(-1,c))}function h(c){var a=Math.abs(c[0]),y=Math.abs(c[1]),u=Math.abs(c[2]),_=[0,0,0];a>Math.max(y,u)?_[2]=1:y>Math.max(a,u)?_[0]=1:_[1]=1;for(var b=0,w=0,T=0;T<3;++T)b+=c[T]*c[T],w+=_[T]*c[T];for(T=0;T<3;++T)_[T]-=w/b*c[T];return r(_,_),_}function s(c,a,y,u,_,b,w,T){this.center=e(y),this.up=e(u),this.right=e(_),this.radius=e([b]),this.angle=e([w,T]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(c,a),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var C=0;C<16;++C)this.computedMatrix[C]=.5;this.recalcMatrix(0)}var o=s.prototype;o.setDistanceLimits=function(c,a){c=c>0?Math.log(c):-1/0,a=a>0?Math.log(a):1/0,a=Math.max(a,c),this.radius.bounds[0][0]=c,this.radius.bounds[1][0]=a},o.getDistanceLimits=function(c){var a=this.radius.bounds[0];return c?(c[0]=Math.exp(a[0][0]),c[1]=Math.exp(a[1][0]),c):[Math.exp(a[0][0]),Math.exp(a[1][0])]},o.recalcMatrix=function(c){this.center.curve(c),this.up.curve(c),this.right.curve(c),this.radius.curve(c),this.angle.curve(c);for(var a=this.computedUp,y=this.computedRight,u=0,_=0,b=0;b<3;++b)_+=a[b]*y[b],u+=a[b]*a[b];var w=Math.sqrt(u),T=0;for(b=0;b<3;++b)y[b]-=a[b]*_/u,T+=y[b]*y[b],a[b]/=w;var C=Math.sqrt(T);for(b=0;b<3;++b)y[b]/=C;var M=this.computedToward;l(M,a,y),r(M,M);var I=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],S=this.computedAngle[1],E=Math.cos(P),R=Math.sin(P),D=Math.cos(S),j=Math.sin(S),H=this.computedCenter,Y=E*D,X=R*D,Z=j,W=-E*j,re=-R*j,U=D,B=this.computedEye,V=this.computedMatrix;for(b=0;b<3;++b){var ee=Y*y[b]+X*M[b]+Z*a[b];V[4*b+1]=W*y[b]+re*M[b]+U*a[b],V[4*b+2]=ee,V[4*b+3]=0}var N=V[1],K=V[5],J=V[9],te=V[2],ae=V[6],le=V[10],se=K*le-J*ae,ve=J*te-N*le,ue=N*ae-K*te,ye=f(se,ve,ue);for(ve/=ye,ue/=ye,V[0]=se/=ye,V[4]=ve,V[8]=ue,b=0;b<3;++b)B[b]=H[b]+V[2+4*b]*I;for(b=0;b<3;++b){T=0;for(var Me=0;Me<3;++Me)T+=V[b+4*Me]*B[Me];V[12+b]=-T}V[15]=1},o.getMatrix=function(c,a){this.recalcMatrix(c);var y=this.computedMatrix;if(a){for(var u=0;u<16;++u)a[u]=y[u];return a}return y};var p=[0,0,0];o.rotate=function(c,a,y,u){if(this.angle.move(c,a,y),u){this.recalcMatrix(c);var _=this.computedMatrix;p[0]=_[2],p[1]=_[6],p[2]=_[10];for(var b=this.computedUp,w=this.computedRight,T=this.computedToward,C=0;C<3;++C)_[4*C]=b[C],_[4*C+1]=w[C],_[4*C+2]=T[C];for(i(_,_,u,p),C=0;C<3;++C)b[C]=_[4*C],w[C]=_[4*C+1];this.up.set(c,b[0],b[1],b[2]),this.right.set(c,w[0],w[1],w[2])}},o.pan=function(c,a,y,u){a=a||0,y=y||0,u=u||0,this.recalcMatrix(c);var _=this.computedMatrix,b=(Math.exp(this.computedRadius[0]),_[1]),w=_[5],T=_[9],C=f(b,w,T),M=_[0],I=_[4],P=_[8],S=M*(b/=C)+I*(w/=C)+P*(T/=C),E=f(M-=b*S,I-=w*S,P-=T*S),R=(M/=E)*a+b*y,D=(I/=E)*a+w*y,j=(P/=E)*a+T*y;this.center.move(c,R,D,j);var H=Math.exp(this.computedRadius[0]);H=Math.max(1e-4,H+u),this.radius.set(c,Math.log(H))},o.translate=function(c,a,y,u){this.center.move(c,a||0,y||0,u||0)},o.setMatrix=function(c,a,y,u){var _=1;"number"==typeof y&&(_=0|y),(_<0||_>3)&&(_=1);var b=(_+2)%3;a||(this.recalcMatrix(c),a=this.computedMatrix);var w=a[_],T=a[_+4],C=a[_+8];if(u){var M=Math.abs(w),I=Math.abs(T),P=Math.abs(C),S=Math.max(M,I,P);M===S?(w=w<0?-1:1,T=C=0):P===S?(C=C<0?-1:1,w=T=0):(T=T<0?-1:1,w=C=0)}else{var E=f(w,T,C);w/=E,T/=E,C/=E}var R,D,j=a[b],H=a[b+4],Y=a[b+8],X=j*w+H*T+Y*C,Z=f(j-=w*X,H-=T*X,Y-=C*X),W=T*(Y/=Z)-C*(H/=Z),re=C*(j/=Z)-w*Y,U=w*H-T*j,B=f(W,re,U);if(W/=B,re/=B,U/=B,this.center.jump(c,oe,de,Te),this.radius.idle(c),this.up.jump(c,w,T,C),this.right.jump(c,j,H,Y),2===_){var V=a[1],ee=a[5],N=a[9];R=se<0?-Math.PI/2:Math.PI/2,D=Math.atan2(V*W+ee*re+N*U,V*j+ee*H+N*Y)}else{var te=a[2],ae=a[6],le=a[10],se=te*w+ae*T+le*C,ve=te*j+ae*H+le*Y,ue=te*W+ae*re+le*U;R=Math.asin(t(se)),D=Math.atan2(ue,ve)}this.angle.jump(c,D,R),this.recalcMatrix(c);var ye=a[2],Me=a[6],pe=a[10],ge=this.computedMatrix;n(ge,a);var we=ge[15],oe=ge[12]/we,de=ge[13]/we,Te=ge[14]/we,Ee=Math.exp(this.computedRadius[0]);this.center.jump(c,oe-ye*Ee,de-Me*Ee,Te-pe*Ee)},o.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},o.idle=function(c){this.center.idle(c),this.up.idle(c),this.right.idle(c),this.radius.idle(c),this.angle.idle(c)},o.flush=function(c){this.center.flush(c),this.up.flush(c),this.right.flush(c),this.radius.flush(c),this.angle.flush(c)},o.setDistance=function(c,a){a>0&&this.radius.set(c,Math.log(a))},o.lookAt=function(c,a,y,u){this.recalcMatrix(c),a=a||this.computedEye,y=y||this.computedCenter;var _=(u=u||this.computedUp)[0],b=u[1],w=u[2],T=f(_,b,w);if(!(T<1e-6)){_/=T,b/=T,w/=T;var C=a[0]-y[0],M=a[1]-y[1],I=a[2]-y[2],P=f(C,M,I);if(!(P<1e-6)){C/=P,M/=P,I/=P;var S=this.computedRight,E=S[0],R=S[1],D=S[2],j=_*E+b*R+w*D,H=f(E-=j*_,R-=j*b,D-=j*w);if(!(H<.01&&(H=f(E=b*I-w*M,R=w*C-_*I,D=_*M-b*C))<1e-6)){E/=H,R/=H,D/=H,this.up.set(c,_,b,w),this.right.set(c,E,R,D),this.center.set(c,y[0],y[1],y[2]),this.radius.set(c,Math.log(P));var Y=b*D-w*R,X=w*E-_*D,Z=_*R-b*E,W=f(Y,X,Z),U=E*C+R*M+D*I,B=(Y/=W)*C+(X/=W)*M+(Z/=W)*I,V=Math.asin(t(_*C+b*M+w*I)),ee=Math.atan2(B,U),N=this.angle._state,K=N[N.length-1],J=N[N.length-2];K%=2*Math.PI;var te=Math.abs(K+2*Math.PI-ee),ae=Math.abs(K-ee),le=Math.abs(K-2*Math.PI-ee);te<ae&&(K+=2*Math.PI),le<ae&&(K-=2*Math.PI),this.angle.jump(this.angle.lastT(),K,J),this.angle.set(c,ee,V)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(g,k,x){"use strict";k.exports=function(n,i,l){var r=n*i,d=e*n,f=d-(d-n),t=n-f,h=e*i,s=h-(h-i),o=i-s,p=t*o-(r-f*s-t*s-f*o);return l?(l[0]=p,l[1]=r,l):[p,r]};var e=+(Math.pow(2,27)+1)},{}],307:[function(g,k,x){"use strict";k.exports=function(e,n,i){var l=e+n,r=l-e,d=n-r,f=e-(l-r);return i?(i[0]=f+d,i[1]=l,i):[f+d,l]}},{}],308:[function(g,k,x){(function(e){(function(){"use strict";var n=g("bit-twiddle"),i=g("dup"),l=g("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var r=typeof Uint8ClampedArray<"u",d=typeof BigUint64Array<"u",f=typeof BigInt64Array<"u",t=e.__TYPEDARRAY_POOL;t.UINT8C||(t.UINT8C=i([32,0])),t.BIGUINT64||(t.BIGUINT64=i([32,0])),t.BIGINT64||(t.BIGINT64=i([32,0])),t.BUFFER||(t.BUFFER=i([32,0]));var h=t.DATA,s=t.BUFFER;function o(E){if(E){var D=n.log2(E.length||E.byteLength);h[D].push(E)}}function p(E){E=n.nextPow2(E);var R=n.log2(E),D=h[R];return D.length>0?D.pop():new ArrayBuffer(E)}function c(E){return new Uint8Array(p(E),0,E)}function a(E){return new Uint16Array(p(2*E),0,E)}function y(E){return new Uint32Array(p(4*E),0,E)}function u(E){return new Int8Array(p(E),0,E)}function _(E){return new Int16Array(p(2*E),0,E)}function b(E){return new Int32Array(p(4*E),0,E)}function w(E){return new Float32Array(p(4*E),0,E)}function T(E){return new Float64Array(p(8*E),0,E)}function C(E){return r?new Uint8ClampedArray(p(E),0,E):c(E)}function M(E){return d?new BigUint64Array(p(8*E),0,E):null}function I(E){return f?new BigInt64Array(p(8*E),0,E):null}function P(E){return new DataView(p(E),0,E)}function S(E){E=n.nextPow2(E);var R=n.log2(E),D=s[R];return D.length>0?D.pop():new l(E)}x.free=function(E){if(l.isBuffer(E))s[n.log2(E.length)].push(E);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(E)&&(E=E.buffer),!E)return;var D=0|n.log2(E.length||E.byteLength);h[D].push(E)}},x.freeUint8=x.freeUint16=x.freeUint32=x.freeBigUint64=x.freeInt8=x.freeInt16=x.freeInt32=x.freeBigInt64=x.freeFloat32=x.freeFloat=x.freeFloat64=x.freeDouble=x.freeUint8Clamped=x.freeDataView=function(E){o(E.buffer)},x.freeArrayBuffer=o,x.freeBuffer=function(E){s[n.log2(E.length)].push(E)},x.malloc=function(E,R){if(void 0===R||"arraybuffer"===R)return p(E);switch(R){case"uint8":return c(E);case"uint16":return a(E);case"uint32":return y(E);case"int8":return u(E);case"int16":return _(E);case"int32":return b(E);case"float":case"float32":return w(E);case"double":case"float64":return T(E);case"uint8_clamped":return C(E);case"bigint64":return I(E);case"biguint64":return M(E);case"buffer":return S(E);case"data":case"dataview":return P(E);default:return null}return null},x.mallocArrayBuffer=p,x.mallocUint8=c,x.mallocUint16=a,x.mallocUint32=y,x.mallocInt8=u,x.mallocInt16=_,x.mallocInt32=b,x.mallocFloat32=x.mallocFloat=w,x.mallocFloat64=x.mallocDouble=T,x.mallocUint8Clamped=C,x.mallocBigUint64=M,x.mallocBigInt64=I,x.mallocDataView=P,x.mallocBuffer=S,x.clearCache=function(){for(var E=0;E<32;++E)t.UINT8[E].length=0,t.UINT16[E].length=0,t.UINT32[E].length=0,t.INT8[E].length=0,t.INT16[E].length=0,t.INT32[E].length=0,t.FLOAT[E].length=0,t.DOUBLE[E].length=0,t.BIGUINT64[E].length=0,t.BIGINT64[E].length=0,t.UINT8C[E].length=0,h[E].length=0,s[E].length=0}}).call(this)}).call(this,void 0!==m?m:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(g,k,x){"use strict";function e(i){this.roots=new Array(i),this.ranks=new Array(i);for(var l=0;l<i;++l)this.roots[l]=l,this.ranks[l]=0}k.exports=e;var n=e.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},n.find=function(i){for(var l=i,r=this.roots;r[i]!==i;)i=r[i];for(;r[l]!==i;){var d=r[l];r[l]=i,l=d}return i},n.link=function(i,l){var r=this.find(i),d=this.find(l);if(r!==d){var f=this.ranks,t=this.roots,h=f[r],s=f[d];h<s?t[r]=d:s<h?t[d]=r:(t[d]=r,++f[r])}}},{}],310:[function(g,k,x){"use strict";k.exports=function(e,n,i){return 0===e.length?e:n?(i||e.sort(n),function(l,r){for(var d=1,f=l.length,t=l[0],h=l[0],s=1;s<f;++s)if(h=t,r(t=l[s],h)){if(s===d){d++;continue}l[d++]=t}return l.length=d,l}(e,n)):(i||e.sort(),function(l){for(var r=1,d=l.length,f=l[0],t=l[0],h=1;h<d;++h,t=f)if(t=f,(f=l[h])!==t){if(h===r){r++;continue}l[r++]=f}return l.length=r,l}(e))}},{}],311:[function(g,k,x){"use strict";k.exports=function(l,r){return"object"==typeof r&&null!==r||(r={}),e(l,r.canvas||n,r.context||i,r)};var e=g("./lib/vtext"),n=null,i=null;typeof document<"u"&&((n=document.createElement("canvas")).width=8192,n.height=1024,i=n.getContext("2d"))},{"./lib/vtext":312}],312:[function(g,k,x){k.exports=function(o,p,c,a){var y=64,u=1.25,_={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return a&&(a.size&&a.size>0&&(y=a.size),a.lineSpacing&&a.lineSpacing>0&&(u=a.lineSpacing),a.styletags&&a.styletags.breaklines&&(_.breaklines=!!a.styletags.breaklines),a.styletags&&a.styletags.bolds&&(_.bolds=!!a.styletags.bolds),a.styletags&&a.styletags.italics&&(_.italics=!!a.styletags.italics),a.styletags&&a.styletags.subscripts&&(_.subscripts=!!a.styletags.subscripts),a.styletags&&a.styletags.superscripts&&(_.superscripts=!!a.styletags.superscripts)),c.font=[a.fontStyle,a.fontVariant,a.fontWeight,y+"px",a.font].filter(function(b){return b}).join(" "),c.textAlign="start",c.textBaseline="alphabetic",c.direction="ltr",s(function(b,w,T,C,M,I){T=(T=T.replace(/\n/g,"")).replace(/\<br\>/g,!0===I.breaklines?"\n":" ");var P="",S=[];for(j=0;j<T.length;++j)S[j]=P;!0===I.bolds&&(S=f("b","b|",T,S)),!0===I.italics&&(S=f("i","i|",T,S)),!0===I.superscripts&&(S=f("sup","+1",T,S)),!0===I.subscripts&&(S=f("sub","-1",T,S));var E=[],R="";for(j=0;j<T.length;++j)null!==S[j]&&(R+=T[j],E.push(S[j]));var D,j,H,Y,X,Z=R.split("\n"),W=Z.length,re=Math.round(M*C),U=C,B=2*C,V=0,ee=W*re+B;b.height<ee&&(b.height=ee),w.fillStyle="#000",w.fillRect(0,0,b.width,b.height),w.fillStyle="#fff";var N=0,K="";function J(){if(""!==K){var Me=w.measureText(K).width;w.fillText(K,U+H,B+Y),H+=Me}}function te(){return Math.round(X)+"px "}function ae(Me,pe){var ge=""+w.font;if(!0===I.subscripts){var we=Me.indexOf("-"),oe=pe.indexOf("-"),de=we>-1?parseInt(Me[1+we]):0,Te=oe>-1?parseInt(pe[1+oe]):0;de!==Te&&(ge=ge.replace(te(),"?px "),X*=Math.pow(.75,Te-de),ge=ge.replace("?px ",te())),Y+=.25*re*(Te-de)}if(!0===I.superscripts){var Ee=Me.indexOf("+"),Ae=pe.indexOf("+"),De=Ee>-1?parseInt(Me[1+Ee]):0,Ie=Ae>-1?parseInt(pe[1+Ae]):0;De!==Ie&&(ge=ge.replace(te(),"?px "),X*=Math.pow(.75,Ie-De),ge=ge.replace("?px ",te())),Y-=.25*re*(Ie-De)}if(!0===I.bolds){var Oe=Me.indexOf("b|")>-1,Xe=pe.indexOf("b|")>-1;!Oe&&Xe&&(ge=Fe?ge.replace("italic ","italic bold "):"bold "+ge),Oe&&!Xe&&(ge=ge.replace("bold ",""))}if(!0===I.italics){var Fe=Me.indexOf("i|")>-1,Pe=pe.indexOf("i|")>-1;!Fe&&Pe&&(ge="italic "+ge),Fe&&!Pe&&(ge=ge.replace("italic ",""))}w.font=ge}for(D=0;D<W;++D){var le=Z[D]+"\n";for(H=0,Y=D*re,X=C,K="",j=0;j<le.length;++j){var se=j+N<E.length?E[j+N]:E[E.length-1];P===se?K+=le[j]:(J(),K=le[j],void 0!==se&&(ae(P,se),P=se))}J(),N+=le.length;var ve=0|Math.round(H+2*U);V<ve&&(V=ve)}var ue=V,ye=B+re*W;return n(w.getImageData(0,0,ue,ye).data,[ye,ue,4]).pick(-1,-1,0).transpose(1,0)}(p,c,o,y,u,_),a,y)},k.exports.processPixels=s;var e=g("surface-nets"),n=g("ndarray"),i=g("simplify-planar-graph"),l=g("clean-pslg"),r=g("cdt2d"),d=g("planar-graph-to-polyline");function f(o,p,c,a){for(var y="<"+o+">",u="</"+o+">",_=y.length,b=u.length,w="+"===p[0]||"-"===p[0],T=0,C=-b;T>-1&&-1!==(T=c.indexOf(y,T))&&-1!==(C=c.indexOf(u,T+_))&&!(C<=T);){for(var M=T;M<C+b;++M)if(M<T+_||M>=C)a[M]=null,c=c.substr(0,M)+" "+c.substr(M+1);else if(null!==a[M]){var I=a[M].indexOf(p[0]);-1===I?a[M]+=p:w&&(a[M]=a[M].substr(0,I+1)+(1+parseInt(a[M][I+1]))+a[M].substr(I+2))}var P=T+_,S=c.substr(P,C-P).indexOf(y);T=-1!==S?S:C+b}return a}function h(o,p,c,a){var y=function t(o,p){var c=e(o,128);return p?i(c.cells,c.positions,.25):{edges:c.cells,positions:c.positions}}(o,a),u=function(D,j,H){for(var Y=j.textAlign||"start",X=j.textBaseline||"alphabetic",Z=[1<<30,1<<30],W=[0,0],re=D.length,U=0;U<re;++U)for(var B=D[U],V=0;V<2;++V)Z[V]=0|Math.min(Z[V],B[V]),W[V]=0|Math.max(W[V],B[V]);var ee=0;switch(Y){case"center":ee=-.5*(Z[0]+W[0]);break;case"right":case"end":ee=-W[0];break;case"left":case"start":ee=-Z[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+Y+"'")}var N=0;switch(X){case"hanging":case"top":N=-Z[1];break;case"middle":N=-.5*(Z[1]+W[1]);break;case"alphabetic":case"ideographic":N=-3*H;break;case"bottom":N=-W[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+X+"'")}var K=1/H;return"lineHeight"in j?K*=+j.lineHeight:"width"in j?K=j.width/(W[0]-Z[0]):"height"in j&&(K=j.height/(W[1]-Z[1])),D.map(function(J){return[K*(J[0]+ee),K*(J[1]+N)]})}(y.positions,p,c),_=y.edges,b="ccw"===p.orientation;if(l(u,_),p.polygons||p.polygon||p.polyline){for(var w=d(_,u),T=new Array(w.length),C=0;C<w.length;++C){for(var M=w[C],I=new Array(M.length),P=0;P<M.length;++P){for(var S=M[P],E=new Array(S.length),R=0;R<S.length;++R)E[R]=u[S[R]].slice();b&&E.reverse(),I[P]=E}T[C]=I}return T}return p.triangles||p.triangulate||p.triangle?{cells:r(u,_,{delaunay:!1,exterior:!1,interior:!0}),positions:u}:{edges:_,positions:u}}function s(o,p,c){try{return h(o,p,c,!0)}catch{}try{return h(o,p,c,!1)}catch{}return p.polygons||p.polyline||p.polygon?[]:p.triangles||p.triangulate||p.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(g,k,x){!function(){"use strict";if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=y);var e=!1;if("function"==typeof WeakMap){var n=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var i=new n,l=Object.freeze({});if(i.set(l,1),1===i.get(l))return void(k.exports=WeakMap);e=!0}}var r=Object.getOwnPropertyNames,d=Object.defineProperty,f=Object.isExtensible,t="weakmap:ident:"+Math.random()+"___";if(typeof crypto<"u"&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var h=new ArrayBuffer(25),s=new Uint8Array(h);crypto.getRandomValues(s),t="weakmap:rand:"+Array.prototype.map.call(s,function(T){return(T%36).toString(36)}).join("")+"___"}if(d(Object,"getOwnPropertyNames",{value:function(T){return r(T).filter(u)}}),"getPropertyNames"in Object){var o=Object.getPropertyNames;d(Object,"getPropertyNames",{value:function(T){return o(T).filter(u)}})}!function(){var T=Object.freeze;d(Object,"freeze",{value:function(I){return _(I),T(I)}});var C=Object.seal;d(Object,"seal",{value:function(I){return _(I),C(I)}});var M=Object.preventExtensions;d(Object,"preventExtensions",{value:function(I){return _(I),M(I)}})}();var p=!1,c=0,a=function(){this instanceof a||w();var T=[],C=[],M=c++;return Object.create(a.prototype,{get___:{value:b(function(I,P){var S,E=_(I);return E?M in E?E[M]:P:(S=T.indexOf(I))>=0?C[S]:P})},has___:{value:b(function(I){var P=_(I);return P?M in P:T.indexOf(I)>=0})},set___:{value:b(function(I,P){var S,E=_(I);return E?E[M]=P:(S=T.indexOf(I))>=0?C[S]=P:(C[S=T.length]=P,T[S]=I),this})},delete___:{value:b(function(I){var P,S,E=_(I);return E?M in E&&delete E[M]:!((P=T.indexOf(I))<0||(S=T.length-1,T[P]=void 0,C[P]=C[S],T[P]=T[S],T.length=S,C.length=S,0))})}})};a.prototype=Object.create(Object.prototype,{get:{value:function(T,C){return this.get___(T,C)},writable:!0,configurable:!0},has:{value:function(T){return this.has___(T)},writable:!0,configurable:!0},set:{value:function(T,C){return this.set___(T,C)},writable:!0,configurable:!0},delete:{value:function(T){return this.delete___(T)},writable:!0,configurable:!0}}),"function"==typeof n?function(){function T(){this instanceof a||w();var C,M=new n,I=void 0,P=!1;return C=e?function(S,E){return M.set(S,E),M.has(S)||(I||(I=new a),I.set(S,E)),this}:function(S,E){if(P)try{M.set(S,E)}catch{I||(I=new a),I.set___(S,E)}else M.set(S,E);return this},Object.create(a.prototype,{get___:{value:b(function(S,E){return I?M.has(S)?M.get(S):I.get___(S,E):M.get(S,E)})},has___:{value:b(function(S){return M.has(S)||!!I&&I.has___(S)})},set___:{value:b(C)},delete___:{value:b(function(S){var E=!!M.delete(S);return I&&I.delete___(S)||E})},permitHostObjects___:{value:b(function(S){if(S!==y)throw new Error("bogus call to permitHostObjects___");P=!0})}})}e&&typeof Proxy<"u"&&(Proxy=void 0),T.prototype=a.prototype,k.exports=T,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),k.exports=a)}function y(T){T.permitHostObjects___&&T.permitHostObjects___(y)}function u(T){return!("weakmap:"==T.substr(0,8)&&"___"===T.substr(T.length-3))}function _(T){if(T!==Object(T))throw new TypeError("Not an object: "+T);var C=T[t];if(C&&C.key===T)return C;if(f(T)){C={key:T};try{return d(T,t,{value:C,writable:!1,enumerable:!1,configurable:!1}),C}catch{return}}}function b(T){return T.prototype=null,Object.freeze(T)}function w(){p||typeof console>"u"||(p=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(g,k,x){var e=g("./hidden-store.js");k.exports=function(){var n={};return function(i){if(("object"!=typeof i||null===i)&&"function"!=typeof i)throw new Error("Weakmap-shim: Key must be object");var l=i.valueOf(n);return l&&l.identity===n?l:e(i,n)}}},{"./hidden-store.js":315}],315:[function(g,k,x){k.exports=function(e,n){var i={identity:n},l=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(r){return r!==n?l.apply(this,arguments):i},writable:!0}),i}},{}],316:[function(g,k,x){var e=g("./create-store.js");k.exports=function(){var n=e();return{get:function(i,l){var r=n(i);return r.hasOwnProperty("value")?r.value:l},set:function(i,l){return n(i).value=l,this},has:function(i){return"value"in n(i)},delete:function(i){return delete n(i).value}}}},{"./create-store.js":314}],317:[function(g,k,x){"use strict";var i,l;k.exports=(i=function(){return function(i,l,r,d,f,t){var h=i[0],s=r[0],o=[0],p=s;d|=0;var c=0,a=s;for(c=0;c<h;++c){var y=l[d]-t,u=l[d+p]-t;y>=0!=u>=0&&f.push(o[0]+.5+.5*(y+u)/(y-u)),d+=a,++o[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),l={},function(r,d,f){var t=r.dtype,h=r.order,s=[t,h.join()].join(),o=l[s];return o||(l[s]=o=i([t,h])),o(r.shape.slice(0),r.data,r.stride,0|r.offset,d,f)})},{}],318:[function(g,k,x){"use strict";k.exports=function(n,i){var l=[];return i=+i||0,e(n.hi(n.shape[0]-1),l,i),l};var e=g("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[27])(27)}}]);